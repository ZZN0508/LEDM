(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df9ba998"],{"29fb":function(t,e,a){t.exports={l1item:"CoCreation_l1item_8FqeA",t1:"CoCreation_t1_3tw8i",l2item:"CoCreation_l2item_2jff6",t2:"CoCreation_t2_2nG3W",gap1:"CoCreation_gap1_2Vmhg",gray1:"CoCreation_gray1_yJvd-",tit1:"CoCreation_tit1_S6NAS",switch:"CoCreation_switch_3iCBC",list1:"CoCreation_list1_3DABn",pos:"CoCreation_pos_3vt6p",b1:"CoCreation_b1_2Hpx-",b2:"CoCreation_b2_hxich",b3:"CoCreation_b3_3vMNo",layer:"CoCreation_layer_2I4q1",layeritem:"CoCreation_layeritem_29pXk",bg:"CoCreation_bg_3Hona",tit:"CoCreation_tit_2y1Aa",btn:"CoCreation_btn_1p-k5",iptbox:"CoCreation_iptbox_1GmkJ",ipt:"CoCreation_ipt_1MMl8",i:"CoCreation_i_3W8rJ",list2:"CoCreation_list2_3JYHQ",list21:"CoCreation_list21_2L6DO",list22:"CoCreation_list22_1wAJd",itemin:"CoCreation_itemin_2Vfc0",cut:"CoCreation_cut_2c0iG",opt:"CoCreation_opt_18eGx",i1:"CoCreation_i1_1O2lV",i2:"CoCreation_i2_2AZp7"}},"42a4":function(t,e,a){"use strict";var o=a("29fb"),n=a.n(o);e["default"]=n.a},"9cf6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:t.$style.gap1},[a("woo-box",{class:t.$style.switch,attrs:{align:"center"}},[a("woo-box-item",{attrs:{align:"center"}},[a("woo-box",{attrs:{align:"center"}},[a("div",{class:[t.$style.gray1,t.$style.tit1]},[t._v("共创")])])],1),a("div",[a("woo-switch",{ref:"CoCreationRef",attrs:{size:.6875,disabled:t.type||!t.visible||t.timer},nativeOn:{click:function(e){return t.showToast()}},model:{value:t.CoCreation,callback:function(e){t.CoCreation=e},expression:"CoCreation"}})],1)],1),a("div",{class:t.$style.list1},[t.CoCreation?a("woo-box",{attrs:{old:"",items:7,"gap-row":10,"gap-col":20}},[a("woo-box-item",{class:t.$style.l1item},[a("woo-box",{class:t.$style.pos,attrs:{direction:"y",align:"center"}},[a("woo-avatar",{attrs:{size:50,src:t.config.user.avatar_large}}),a("div",{class:t.$style.t1},[t._v(t._s(t.config.user.screen_name))]),a("div",{class:t.$style.t2},[t._v("作者")])],1)],1),t._l(t.selectArr,(function(e,o){return a("woo-box-item",{key:o,class:t.$style.l1item},[a("woo-box",{class:t.$style.pos,attrs:{direction:"y",align:"center"}},[a("woo-avatar",{attrs:{size:50,src:e.avatar_large}}),a("div",{class:t.$style.t1},[t._v(t._s(e.screen_name))]),a("changeCreation",{class:t.$style.b3,attrs:{creationCur:"",item:e,coCreateConfig:t.coCreateConfig},on:{show:t.closeAll}}),a("woo-fonticon",{class:t.$style.b2,attrs:{value:"close",kind:"dark"},nativeOn:{click:function(e){return t.deleteItemReal(o)}}})],1)],1)})),a("woo-box-item",{class:t.$style.l1item},[a("woo-box",{class:t.$style.pos,attrs:{direction:"y",align:"center"}},[a("woo-fonticon",{class:t.$style.b1,attrs:{value:"add",kind:"dark"},nativeOn:{click:function(e){return t.addCoCreation(e)}}}),a("div",{class:t.$style.t1},[t._v("添加共创人")])],1)],1)],2):t._e()],1)],1),a("woo-divider",{class:t.$style.gap1,attrs:{"border-color":"var(--w-card-border)"}}),t.showAdd?a("woo-modal",[a("div",{staticClass:"wbpro-layer",class:t.$style.layer},[a("woo-panel",{attrs:{border:"bottom"}},[a("woo-box",{staticClass:"wbpro-layer-tit"},[a("woo-box",{staticClass:"wbpro-layer-tit-nav",attrs:{align:"center",justify:"center"}}),a("woo-box-item",{staticClass:"wbpro-layer-tit-text",attrs:{align:"center"}},[t._v("选择共创人")])],1)],1),a("woo-box",[a("woo-box-item",{class:[t.$style.layeritem,t.$style.bg]},[a("div",{class:t.$style.iptbox},[a("woo-input",{ref:"searchCo",class:t.$style.ipt,attrs:{placeholder:"搜索"},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}}),a("woo-fonticon",{class:t.$style.i,attrs:{value:"search"}})],1),a("div",{class:[t.$style.list2,t.$style.list21,"wbpro-scrollbar"]},[a("Scroll",{attrs:{data:t.friendsBilateral,isLoading:t.isLoading,isRetry:t.isRetry,isNoData:t.isNoData,isEmpty:t.isEmpty,emptyText:"没有找到相关用户"},on:{loadMoreData:t.getFriendsBilateral},scopedSlots:t._u([{key:"content",fn:function(e){var o=e.item;return[a("div",{class:t.$style.l2item,on:{click:function(e){!t.check.find((function(t){return t===o.idstr}))&&t.selectArrTemporary.length>=10&&t.showLengthToast()}}},[a("woo-box",{class:t.$style.itemin,attrs:{align:"center"}},[a("woo-checkbox",{class:t.$style.ipt,attrs:{value:o.idstr,disabled:!t.check.find((function(t){return t===o.idstr}))&&t.selectArrTemporary.length>=10},model:{value:t.check,callback:function(e){t.check=e},expression:"check"}}),a("woo-avatar",{attrs:{size:50,src:o.avatar_large}}),a("woo-box-item",{class:t.$style.cut,attrs:{align:"center"}},[a("div",{class:t.$style.t1},[t._v(" "+t._s(o.screen_name)+" ")]),a("div",{class:t.$style.t2},[t._v(t._s(o.description))])]),o.following?t._e():a("div",{class:t.$style.opt},[a("FollowBtn",{attrs:{following:o.following,uid:o.idstr,doFoAction:!0,foToast:!0}})],1)],1),a("woo-divider",{attrs:{"border-color":"var(--w-off-border)"}})],1)]}}],null,!1,3976829676)})],1)]),a("woo-box-item",{class:t.$style.layeritem},[a("woo-box",{class:t.$style.tit,attrs:{align:"center"}},[t._v("已选择( "+t._s(t.selectArrTemporary.length+1)+" / 11)")]),a("div",{class:[t.$style.list2,t.$style.list22,"wbpro-scrollbar"],on:{dragover:function(t){t.stopPropagation(),t.preventDefault()},scroll:t.scroll}},[a("div",{class:t.$style.l2item},[a("woo-box",{class:t.$style.itemin,attrs:{align:"center"}},[a("woo-avatar",{attrs:{size:50,src:t.config.user.avatar_large}}),a("woo-box-item",{class:t.$style.cut,attrs:{align:"center"}},[a("div",{class:t.$style.t1},[t._v(" "+t._s(t.config.user.screen_name)+" ")]),a("div",{class:t.$style.t2},[t._v("作者")])])],1),t.selectArrTemporary.length?a("woo-divider"):t._e()],1),t._l(t.selectArrTemporary,(function(e,o){return a("div",{key:o,class:t.$style.l2item,attrs:{draggable:"true"},on:{dragstart:function(e){return t.onDragStart(arguments[0],o)},dragover:function(e){return e.preventDefault(),t.onDragEnter(arguments[0],o)},dragend:function(e){return e.preventDefault(),t.onDragEnd(e)}}},[a("woo-box",{class:t.$style.itemin,attrs:{align:"center"}},[a("woo-avatar",{attrs:{size:50,src:e.avatar_large}}),a("woo-box-item",{class:t.$style.cut,attrs:{align:"center"}},[a("div",{class:t.$style.t1},[t._v(t._s(e.screen_name))]),a("div",{class:t.$style.t2},[t._v("共创")])]),a("changeCreation",{attrs:{item:e,coCreateConfig:t.coCreateConfig},on:{show:t.closeAll}}),a("woo-fonticon",{class:t.$style.i2,attrs:{value:"move"}}),a("woo-fonticon",{class:t.$style.i1,attrs:{value:"close",kind:"dark"},nativeOn:{click:function(e){return t.deleteItem(o)}}})],1),a("woo-divider")],1)}))],2),a("woo-box",{class:t.$style.btn,attrs:{align:"center",justify:"center"}},[a("woo-button",{attrs:{kind:"default"},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("取消")]),a("woo-button",{attrs:{sort:"flat",kind:"primary"},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v("确认")])],1)],1)],1)],1)]):t._e()],1)},n=[],r=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("a630"),a("caad"),a("d81d"),a("a434"),a("2532"),a("3ca3"),a("5530")),i=a("3835"),s=a("2909"),l=a("ed09"),c=a("6701"),u=a("b047"),v=a.n(u),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("woo-pop",{attrs:{show:t.show,flow:!t.creationCur,gap:2},on:{"click-outside":t.close},scopedSlots:t._u([{key:"ctrl",fn:function(){return[a("woo-box",{class:t.$style.btn,attrs:{tag:"button",align:"center",justify:"end"},nativeOn:{click:function(e){return t.showCur(e)}}},[a("span",{class:t.$style.t},[t._v(t._s(t.creation[t.cur].name_zh))]),a("woo-fonticon",{class:t.$style.i,attrs:{value:"caretDown"}})],1)]},proxy:!0}])},[a("woo-pop-wrap",[a("woo-pop-group",t._l(t.creation,(function(e,o){return a("woo-pop-item",{key:o,attrs:{cur:t.cur===o},nativeOn:{click:function(e){return t.change(o)}}},[t._v(" "+t._s(e.name_zh)+" ")])})),1)],1)],1)},f=[],p={props:{item:{},creationCur:{type:Boolean,default:!1},coCreateConfig:{}},emit:["show"],setup:function(t,e){var a=e.emit,o=function(){r.value=!1},n=function(e){t.item.role=e+1,s.value=e,o()},r=Object(l["n"])(!1),i=Object(l["a"])((function(){var e;return null===t||void 0===t||null===(e=t.coCreateConfig)||void 0===e?void 0:e.role})),s=Object(l["n"])(t.item.role-1);Object(l["s"])((function(){return t.item.role}),(function(t){s.value=t-1}));var c=function(){a("show",t.item),r.value=!r.value,t.item.show=r.value};return Object(l["s"])((function(){return t.item.show}),(function(t){t||(r.value=!1)})),{cur:s,creation:i,show:r,close:o,change:n,showCur:c}}},_=p,b=a("cf01"),y=a("2877");function m(t){this["$style"]=b["default"].locals||b["default"]}var g=Object(y["a"])(_,d,f,!1,m,null,null),C=g.exports,w=a("2f62"),h=a("0e00"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{domProps:{innerHTML:t._s(t.text)}})},x=[],k=(a("ac1f"),a("5319"),a("9911"),{props:{protocol:{}},setup:function(t){var e=t.protocol,a=Object(l["n"])();return a.value=e.text.replace(e.link.key,(function(){return'<a href="'.concat(e.link.value,'" target="_blank">').concat(e.link.key,"</a>")})),{text:a}}}),O=k,j=Object(y["a"])(O,$,x,!1,null,null,null),A=j.exports,D=10,T={emit:["change"],props:{coCreateConfig:{},type:{},visible:{},timer:{}},setup:function(t,e){var a=e.emit,o=Object(l["d"])(),n=o.proxy,r=Object(l["n"])(!1),c=Object(l["n"])(),u=Object(l["n"])(!1),d=Object(l["n"])([]),f=Object(l["n"])([]),p=Object(l["n"])([]),_=Object(l["n"])(1),b=Object(l["n"])(""),y=Object(l["n"])([]),m=Object(l["n"])(!0),g=Object(l["n"])(!1),C=Object(l["n"])(!1),w=Object(l["n"])(!1),h=function(){b.value||n.$http.get("/ajax/profile/getGroupMembers",{params:{list_id:"100093073493157",page:_.value}}).then((function(t){var e;if(m.value=!1,_.value+=1,t.data.data.total_number)if(null===(e=t.data.data.users)||void 0===e?void 0:e.length){var a;(a=d.value).push.apply(a,Object(s["a"])(t.data.data.users)),m.value=!0}else m.value=!1,C.value=!0;else w.value=!0,C.value=!0}))},$=function(){_.value=1,t.coCreateConfig.invite_status?(w.value=!1,n.$http.get("/ajax/setting/searchUsers",{params:{nick:b.value}}).then((function(t){t.data&&t.data.ok&&(t.data.total_number||(w.value=!0),d.value=t.data.users,m.value=!1),m.value=!1,C.value=!0}))):n.$http.get("/ajax/mblog/attention",{params:{q:b.value,type:3,detail:!0}}).then((function(t){var e;m.value=!1,0===t.data.data.total_number?w.value=!0:(null===(e=t.data.data.users)||void 0===e?void 0:e.length)?(d.value=t.data.data.users,m.value=!1):d.value=[],m.value=!1,C.value=!0}))},x=Object(l["n"])(),k=function(){y.value=f.value.map((function(t){return t.idstr})),u.value=!0,Object(l["f"])((function(){x.value.$el.querySelector("input").select()}))},O=function(){n.$_w_toast({type:"success",message:"最多添加".concat(D,"个共创人")})},j=function(t){if(10===p.value.length)n.$_w_toast({type:"success",message:"最多添加".concat(D,"个共创人")}),y.value.pop();else{var e=p.value.findIndex((function(e){return e.idstr===t.idstr}));if(-1===e){var a=t.screen_name,o=t.avatar_large,r=t.idstr,i=t.id,s=t.selected;p.value.push({screen_name:a,avatar_large:o,idstr:r,id:i,role:1,selected:s,show:!1})}else{var l=p.value.findIndex((function(e){return e.idstr===t.idstr}));T(l)}}},T=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=p.value.splice(t,1),o=Object(i["a"])(a,1),n=o[0];if(e){var r=y.value.findIndex((function(t){return t===n.idstr}));y.value.splice(r,1)}},E=function(t){f.value.splice(t,1)},S=v()((function(){d.value=[],b.value?$():h()}),500,{leading:!0}),B=function(){u.value=!1},I=function(){JSON.stringify(f.value)===JSON.stringify(p)?B():n.$_w_dialog({type:"confirm",title:"共同创作投稿须知",component:A,componentProps:{protocol:t.coCreateConfig.protocol},action:function(){f.value=Object(s["a"])(p.value),B()}})};Object(l["s"])((function(){return b.value}),(function(){S()})),Object(l["s"])((function(){return y.value}),(function(t,e){var a=function(t,e){var a=t.filter((function(t){return!e.includes(t)})),o=e.filter((function(e){return!t.includes(e)}));return{added:a,removed:o}},o=a(t,e),n=o.added,r=o.removed;n.map((function(t){var e=d.value.find((function(e){return e.idstr===t}));j(e)})),r.map((function(t){var e=p.value.findIndex((function(e){return e.idstr===t}));T(e,!1)}))})),Object(l["s"])((function(){return r.value}),(function(t){t?a("change",{coCreation:!0,selectArr:f}):(f.value=[],a("change",{coCreation:!1,selectArr:f}))}),{deep:!0}),h();var L,J,q=function(t){t.preventDefault()},z=function(t,e){L=e,J=Array.from(p.value),document.body.addEventListener("dragover",q)},F=function(t,e){var a;e!==L&&void 0!==L&&(J=Array.from(J),(a=J).splice.apply(a,[e,0].concat(Object(s["a"])(J.splice(L,1)))),L=e,p.value=J,t.preventDefault())},N=function(t){document.body.removeEventListener("dragover",q)},R=function(t){p.value.map((function(t){return t.show=!1,t}))},M=function(){p.value.map((function(t){return t.show=!1,t}))},G=function(){t.type?n.$_w_toast({type:"warn",message:"转载视频无法共同创作"}):t.visible?t.timer&&n.$_w_toast({type:"warn",message:"定时发布无法共同创作"}):n.$_w_toast({type:"warn",message:"非公开视频无法共同创作"})};return{scroll:R,closeAll:M,CoCreation:r,CoCreationRef:c,showAdd:u,isEmpty:w,isLoading:m,isNoData:C,isRetry:g,friendsBilateral:d,selectArr:f,selectArrTemporary:p,q:b,check:y,searchCo:x,showToast:G,showLengthToast:O,onDragEnd:N,onDragEnter:F,onDragStart:z,cancel:B,confirm:I,selectItem:j,deleteItem:T,deleteItemReal:E,getFriendsBilateral:h,addCoCreation:k,searchBilateral:$}},components:{Scroll:c["a"],changeCreation:C,FollowBtn:h["a"]},computed:Object(r["a"])({},Object(w["c"])(["config"]))},E=T,S=a("42a4");function B(t){this["$style"]=S["default"].locals||S["default"]}var I=Object(y["a"])(E,o,n,!1,B,null,null);e["default"]=I.exports},cd2e:function(t,e,a){t.exports={btn:"changeCreation_btn_yXHVY",t:"changeCreation_t_LOZ0t",i:"changeCreation_i_3QFKx"}},cf01:function(t,e,a){"use strict";var o=a("cd2e"),n=a.n(o);e["default"]=n.a}}]);