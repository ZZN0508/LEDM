!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).MailScanLogin=t()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n,t=function(){return(t=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},e=(navigator.userAgent.toLowerCase().match(/(ipod|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i),document);(window.location.host.match(/reg1\.vip\.163\.com/)||[])[0];function i(n){return document.getElementById(n)}function o(n){return document.querySelectorAll?document.querySelectorAll(n):function(n,t){if(n.getElementsByClassName)return n.getElementsByClassName(t);for(var e=document.getElementsByTagName("*"),i=[],o=0;o<e.length;o++){var r=e[o].className.split(" ");a(t,r)&&i.push(e[o])}return i}(document,n.replace(".",""))}function a(n,t){for(var e=0;e<t.length;e++)if(t[e]==n)return!0;return!1}function r(n,t,e,i){i=!!i,n.addEventListener?n.addEventListener(t,e,i):n.attachEvent&&n.attachEvent("on"+t,e)}function s(n,t,e){if(n){var i=n,o=i.className.indexOf(t);if("add"===e){if(-1!==o)return;i.className=i.className+" "+t}if("remove"===e&&-1!==o){t="\\s"+t;var a=new RegExp(t,"g");i.className=i.className.replace(a,"")}}}var c=function(n,t,e){return arguments[2]||(e=!1),e?"?"+n+"="+t:"&"+n+"="+t},p=function(n){var t="?";if("object"==typeof n)for(var e in n.t=Date.now(),n)t+=e+"="+n[e]+"&";return t.slice(0,-1)},l=document,d=function(n,t){for(var e in t)n[e]=t[e];return n},h=Array.prototype.slice,u=Array.prototype.push,m=function(n,t){for(var e=0;e<n.length;e++){var i=n[e];if(!1===t.call(i,e-1,i))return!1}},g=/^[\],:{}\s]*$/,f=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,y=function(n){return"string"==typeof n&&n?(n=n.replace(/(^\s*)|(\s*$)/g,""),window.JSON&&window.JSON.parse?window.JSON.parse(n):g.test(n.replace(f,"@").replace(w,"]").replace(v,""))?new Function("return "+n)():void 0):null},_={};m(["isString","isFunction","isArray","isNull","isUndefined"],(function(n,t){var e;e="[object "+t.substring(2,t.length)+"]",_[t]=function(n){return Object.prototype.toString.call(n)===e}}));var A,S,L=function(){return function(){}},b=function(){return+new Date},x=function(n,t){for(var e=[],i=t||0,o=n.length;i<o;i++)e.push(n[i]);return e},k=function(){var n=[];return{add:function(t){return n.push(t),n},dequeue:function(){return n.length&&n.shift()},clear:function(){return n.length=0},isEmpty:function(){return 0===n.length},each:function(t){return m(n,t)},get:function(){return n}}},C=function(){var n={},t=this,e=function(t,e){n[t]||(n[t]=k()),n[t].add(e)};return{listen:e,one:function(t,i){n[t]&&n[t].clear(),e(t,i)},trigger:function(e){var i=n[e];if(i&&!i.isEmpty()){var o=x(arguments,1);return i.each((function(n,e){try{return e.apply(t,o)}catch(n){alert(n.message)}}))}}}},T=function(){var n,t,e,i,o,a={send:{}},r={},s=function(n){try{delete window[n]}catch(t){window[n]=null}};a.send={get:function(n,t,e,i){void 0===i&&(i="get");var o=n.url,a=n.headers,r=function(){var n,t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=null;if(window.XMLHttpRequest)try{e=new XMLHttpRequest}catch(n){}if(!e)for(var i=0;i<3;i++){var o=t[i];try{e=new ActiveXObject(o)}catch(t){n=t}if(e){t=[o];break}}if(!e)throw new Error("XMLHTTP not available:"+n);return e}();if("get"===i&&(o+=p(n.param)),r.open(i||"get",o,!0),r.onreadystatechange=function(){if(4===r.readyState){if(r.status>=200&&r.status<300||304===r.status||1223===r.status||0===r.status)try{var n=y(r.responseText);n?t.call(window,n):e.call(window,n)}catch(n){throw e.call(window,n),new Error(n)}else e.call(window,r);r=null}},a)for(var s in a)a[s]&&r.setRequestHeader(s,a[s]);"get"==i?r.send(null):"post"==i&&(r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.send(JSON.stringify(n.param)))},post:function(n,t,e){a.send.get(n,t,e,"post")},jsonp:function(n,t,e){var i=n.callbackName||"sing_"+b()+(1e4*Math.random()|0),o=l.getElementsByTagName("head")[0],a=l.createElement("script"),r=d({},n.param);r.callback=i,a.src=n.url+c(r),a.setAttribute("nonce","csp-script-inline"),o.appendChild(a),window[i]=function(n){try{t&&t.call(window,n)}catch(n){throw console&&console.error(n),new Error("jsonp request error")}finally{s(i),o.removeChild(a)}}},iframe:(t=b(),e=function(n,t){var e=l.createElement(n);for(var i in t)e[i]=t[i],e.setAttribute(i,t[i]);return e},i=function(n){return n.style.display="none",n},o=function(){var o=l.body;return n||(n=e("iframe",{id:t,name:t}),o.appendChild(i(n)))},function(n,a){o();var r,c="sing_"+b()+(1e4*Math.random()|0),p=d({},n.param);p.callback="top."+c;var h=e("form",{target:t,method:"post",action:n.url});for(var u in l.body.appendChild(i(h)),p)r=e("input",{name:u,value:p[u]}),h.appendChild(r);window[c]=function(n){try{a&&a.call(window,n)}catch(n){throw new Error("iframe request error")}finally{s(c),function(n){for(;n.firstChild;)n.removeChild(n.firstChild);n.parentNode&&n.parentNode.removeChild(n)}(h)}},h.submit()})};var c=function(n){var t=[];for(var e in n)t.push(e+"="+n[e]);return"?"+t.join("&")};return function(){var n,t=function(){};return{start:function(e){var i=this;e=e||{},n=a.send[e.type||"get"];var o,s=e.callback||t,p=function(n){o.clear(),e.error&&e.error(n)};e.timeout&&(o=function(n){var t=function(){},e=setTimeout((function(){t()}),n);return{timeout:function(n){t=n},clear:function(){clearTimeout(e),e=null}}}(e.timeout)).timeout((function(){o.clear(),s=L,p({error:"timeout"}),i.trigger("error","timeout")}));var l=e.url+c(e.param);return t=function(n){o&&o.clear(),e.cache&&(r[l]=n),s.apply(this,x(arguments))},r[l]?t(r[l]):n(e,t,p),!0},done:function(n){return t=n||t,this}}}}(),E=((A=function(n){this.config={},this.param={},this.event=C.call(this),this.data={},this.cache=!1,this.paramCurry=!1,this.reviseParam(n)}).prototype.reviseParam=function(n){var t=location.protocol+"//"+location.host,e=/^mailmaster:\/\/static.dashi/i;this.config=_.isString(n)?{url:n}:d({},n),e.test(t)&&(t=t.replace(e,"https://dashi")),/^(http|https):\/\//.test(this.config.url)||(this.config.url=t+this.config.url),this.param=this.config.param=this.config.param?d(this.config.param):{},this.name=this.config.name,this.cache=!!this.config.cache},A.prototype.setParam=function(n){this.param=this.config.param=d({},n)},A.prototype.chain=function(){return this.queue=R(),this.queue.chain.apply(this,x(arguments))},A.prototype.start=function(n){var t=this;t.chain(),_.isFunction(this.param)&&(this.param=this.config.param=function(){try{t.param.call(t,n)}catch(n){return{}}}()),T().done((function(n){if(_.isString(n))try{n=y(n)}catch(t){n={},this.trigger("error","json parse error")}t.data=n,!1!==t.event.trigger("done",n)&&t.event.trigger("queueContinue")})).start.call(this,this.config)},A.prototype.error=function(n){var t=this,e=n,i=n;n=function(){!0===i.apply(this,x(arguments))&&(t.data={},!1!==t.event.trigger("done",t.data)&&t.event.trigger("queueContinue")),!0===e.apply(this,x(arguments))&&(t.data={},!1!==t.event.trigger("done",t.data)&&t.event.trigger("queueContinue"))},this.event.listen("error",n)},A.prototype.trigger=function(){var n=x(arguments);this.event.trigger.apply(this,n),n.splice(2,0,this),this.queue.event.trigger.apply(this.queue,n)},m(["beforeSend","done"],(function(n,t){A.prototype[t]=function(n){this.event.listen(t,n)}})),m(["useCache","stopCache"],(function(n,t){A.prototype[t]=function(){this.cache=!n}})),function(n){return new A(n)}),R=function(){var n,t=x(arguments),e=0,i=!1,o=function(t){return n[n.length]=t,n.length+=1,n},a=function(t){if(!((t=t||0)>=n.length))for(var o,r=n[e=t].length,s=r;r--;)(o=n[e][r]).event.one("queueContinue",(function(){if(!0!==i)return 0==--s?a(++e):void 0})),o.before=n[e-1]&&n[e-1][0]||{},o.queue=n,o.start(o.before)},r=function(){return i=!1,a(),n},s=function(){i=!0},c=function(){a(++e)},p=function(){return n[e]},l=function(t){return o(x(arguments)),n},d=function(t){n.event.listen("error",t)},g=function(){var t=e+1,i=n.length,o=h.call(n,(i||t)+1||n.length);return n.length=t<0?n.length+t:t,u.apply(n,o),n};return(n={length:0,start:r,now:p,stop:s,contine:c,chain:l,error:d,cut:g}).event=C.call(n),m(["useCache","stopCache"],(function(t,e){n[e]=function(){m(n,(function(n,t){t[e]()}))}})),t.length&&o(t),n},B=function(){var n=navigator.userAgent,t=n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1,e=n.indexOf("Edge")>-1&&!t,i=n.indexOf("Trident")>-1&&n.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(n);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9:10==o?10:6}return e?"edge":i?11:-1}(),I=(S=window.location.hostname,["mail.126.com","www.126.com","126.com"].indexOf(S)>=0?"https://scanlogin.mail.126.com":["mail.yeah.net","www.yeah.net","yeah.net"].indexOf(S)>=0?"https://scanlogin.mail.yeah.net":["vip.188.com","www.188.com","mail.188.com","188.com"].indexOf(S)>=0?"https://scanlogin.vip.188.com":["vip.163.com","vipmail.163.com"].indexOf(S)>=0?"https://scanlogin.vip.163.com":S.indexOf("vip.126.com")>-1?"https://scanlogin.vip.126.com":S.indexOf("dashi.163.com")>-1||/^mailmaster:\/\/static.dashi/i.test(location.protocol+"://"+S)?"https://scanlogin.dashi.163.com":"https://scanlogin.mail.163.com"),F={"二维码已失效":"The QR code is invalid","二维码加载失败":"QR code loading failed","请点击刷新":"Refresh","扫描成功，请在手机上确认登录":'Scan successfully, please click "Confirm to login" on your mobile phone',"返回二维码扫描":"Return to QR code scanning page","抱歉，系统维护中，暂时无法提供服务":"Sorry, the system is undergoing maintenance and the service is temporarily unavailable","登录失败":"Login failed","请在邮箱大师App上点击确认登录":'Please click "Confirm to login" on your Mailmaster App',"立即登录":"Login now","重新扫码":"Re-scan","${n}天内自动登录":"${n} days auto login","当前浏览器版本不支持扫码登录<br/>请升级后重试":"The current browser version does not support QR code login. Please upgrade and try again."},U=function(n,t){return"en_US"!==t||void 0===F[n]?n:F[n]};return function(){function a(n){this.includeBox=null,this.options={},this.gOption={},this._currDomain="",this._accountType="",this._malFrom="mail163",this._loopCount=0,this.INTERVAL=2e3,this._timer=null,this._bFirst=!0,this._product="",this._uuid="",this._usage="0",this._language="zh_CN",this._deviceId="",this._getCodeIdURL=I+"/proxy/getqrcodeid",this._getCodeURL=I+"/proxy/getUrlQrcode",this._getStatusURL=I+"/proxy/ngxqrcodeauthstatus",this._getAuthURL=I+"/proxy/qrcodeauth",this._loginURL="https://reg.163.com/services/ticketlogin",this._noScanLoginUrl=I+"/ma/freescanlogin/confirm",this._noScanLoginCheckUrl=I+"/ma/freescanlogin/check",this._maLoginUrl="https://dashi.163.com/account/view/ma/login",this._asyncMaLoginUrl="https://dashi.163.com/account/ma/login",this._entryUrl="https://mail.163.com/entry/login.jsp",this._urls={"@163.com":{entryDaShiUrl:"https://dashi.163.com/163entry/cgi/ntesdoor",url2:"https://mail.163.com/errorpage/error163.htm"},"@126.com":{entryDaShiUrl:"https://dashi.163.com/126entry/cgi/ntesdoor",url2:"https://mail.126.com/errorpage/error126.htm"},"@yeah.net":{entryDaShiUrl:"https://dashi.163.com/yeahentry/cgi/ntesdoor",url2:"https://mail.yeah.net/errorpage/err_yeah.htm"},"@vip.163.com":{entryDaShiUrl:"https://dashi.163.com/vip163entry/cgi/ntesdoor",url2:"https://vip.163.com/"},"@vip.126.com":{entryDaShiUrl:"https://dashi.163.com/vip126entry/cgi/ntesdoor",url2:"https://vip.126.com/"},"@188.com":{entryDaShiUrl:"https://dashi.163.com/vip188entry/cgi/ntesdoor",url2:"https://vip.188.com/"}},this._codeSlowTimer=null,this._codeSlowStamp=3e3,this._codeTimeoutTimer=null,this._codeTimerStamp=2e4,this._isCodeImgTimeout=!1,this._qrcodeStatus=0,this._isAsync=!1,this.currentStyleTag=null,this.noScanLoginShow=!1,this.noScanConfig=null,this.codeStartTime=0,this.isLowerIe9=!1;var o,a=n.includeBox,r=n.product,s=n.currDomain,c=void 0===s?"":s,p=n.initReady,l=n.masterfp;this.isLowerIe9="number"==typeof B&&B>0&&B<=9,this.includeBox=(o=a,("object"==typeof HTMLElement?o instanceof HTMLElement:o&&"object"==typeof o&&(1===o.nodeType||9===o.nodeType)&&"string"==typeof o.nodeName)?a:document.getElementById(a)),this.options=t({},n),this._product=r,this._currDomain=c,this.options.deviceId?this._deviceId=this.options.deviceId:this.options.mailStats&&this.options.mailStats.deviceId&&(this._deviceId=this.options.mailStats.deviceId),l&&(this._isAsync=!0,this._usage="1"),n.language&&(this._language=n.language),this._malFrom=n.malFrom;try{var d=function(n){var t=n+"=";if(e.cookie.length>0){var i=e.cookie.indexOf(t);if(-1!==i){i+=t.length;var o=e.cookie.indexOf(";",i);return-1===o&&(o=e.cookie.length),decodeURIComponent(e.cookie.substring(i,o))}return""}}("MASTER_FSL")||"{}",h=JSON.parse(d),u=this.getFslStorage();u&&(h={muid:u}),h&&h.muid&&(this.noScanLoginShow=!0,this.noScanConfig=h)}catch(n){console.log(n)}this.initStyle(),this.render(),this.isLowerIe9?(i("appLoginWait").style.display="block",i("appLoginScan").style.display="none",this.showError({text:U("当前浏览器版本不支持扫码登录<br/>请升级后重试",this._language),key:"b_appLogin_lowerIE9_tips_show"})):(this.init(),this.listen()),p&&p()}return a.prototype.initStyle=function(){if(!this.currentStyleTag){var n=function(n){void 0===n&&(n={});var t=n.codeWidth,e=void 0===t?160:t;return"\n    .w-mc-content {\n        position: relative;\n        width: 284px;\n        margin: 0 auto;\n        font-family: PingFang SC, sans-serif;\n    }\n    \n    .w-mc-codeWrap {\n        text-align: center;\n        margin-bottom: 24px;\n    }\n    \n    .w-mc-scanTips {\n        height: 20px;\n        line-height: 20px;\n        margin-top: 16px;\n        margin-bottom: 22px;\n        font-size: 14px;\n        color: #666666;\n    }\n    \n    .w-mc-scanTips a {\n        text-decoration: none;\n        color: #538ff4;\n    }\n    \n    .appCodeBox-inner {\n        position: relative;\n    }\n    \n    .appCodeBox-inner-show-hover::after {\n        position: absolute;\n        top: 0;\n        left: 50%;\n        width: 128px;\n        height: 152px;\n        margin-left: "+((e+128)/2-128)+'px;\n        content: ".";\n        font-size: 0;\n        line-height: 0;\n        opacity: 0;\n        transition: all .3s;\n        display: none9;\n        background: url(https://mimg.127.net/vip/newindex/img/urs_sprite.png) no-repeat;\n        background-position: 0 -167px;\n    }\n    .appCodeBox-inner-show-hover:hover::after {\n        display: block;\n        opacity: 1;\n    }\n    \n    .w-mc-codeRefresh + .w-mc-scanTips {\n        height: 36px;\n        line-height: 36px;\n        margin: 0;\n    }\n    \n    .w-mc-codeWrap img {\n        border: none;\n    }\n    \n    .w-mc-appCode-wrap {\n        margin: 0 auto;\n        width: '+e+"px;\n        height: "+e+"px;\n    }\n    \n    .w-mc-appCode-wrap img {\n        display: block;\n        width: 100%;\n        transition: all .4s;\n    }\n    \n    .appCodeBox-inner-show-hover:hover .w-mc-codeRefresh, .appCodeBox-inner-show-hover:hover .w-mc-appCode-wrap img {\n        transform: translateX(-"+((e+128)/2-e/2)+"px);\n    }\n    \n    .w-mc-sLoading img {\n        display: none;\n    }\n    \n    .w-mc-loading {\n        position: absolute;\n        width: 80px;\n        height: 80px;\n        left: 50%;\n        top: "+(e-80)/2+"px;\n        margin-left: -40px;\n        background: #F3F3F3;\n        border-radius: 12px;\n    }\n    \n    .w-mc-loading img {\n        display: block;\n        margin: 15px auto;\n        animation: loading-rotate 1s linear infinite;\n        -webkit-animation: loading-rotate 1s linear infinite;\n        -moz-animation: loading-rotate 1s linear infinite;\n        -o-animation: loading-rotate 1s linear infinite;\n    }\n    \n    .w-mc-codeRefresh {\n        position: absolute;\n        top: 0px;\n        left: 50%;\n        margin-left: -"+e/2+"px;\n        width: "+e+"px;\n        height: "+e+"px;\n        transition: all .4s;\n    }\n    \n    .w-mc-codeRefresh.lowerIE9 {\n        width: 190px;\n        margin-left: -90px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQAAAACjtFqAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAJcEhZcwAAFxEAABcRAcom8z8AAAGuSURBVEjH1ZcxbsQgEEUHUVD6BuYiKL7WFisZaQtfC4uL2DegpEA7+YMTyUWKSICUuLH8mln+/zPDEv/w0L+BnkjxlMnpw359NcON+eRE5Gi2k6lf7dDr86BsYlAHvoIaCZlM1pEP7gkTe0coZDpB0WXirdBME9+l6wzF1CPlh3Nix833BigPlF8hkk3mls8G6HUgSqigGYk0vI+Cm3eWUbYsJw5mAtl2KOZaSB4c5CETFHeAZUEGTXbLUZUfB19SMD/EaYYdQbVD/yR74CwQHq+H7gHzU6YUrQFtnzhTVX4ExBnwyqQLIZ9Z72c7zIS8QPklzFbmC3eBkmvDERAtqmsfNUJPru6AGK85OAxuL1HJcHAi1lpUB4h+VzJYSl0Ma/mw7VBWAU9kivxsLJtL+QFw82hKCTuj+vcQaIR5DbMY7epgIeoBoXzNNWBt0dqbI+C1JpB5nChJTDvAus5kscv0xi6+fG+DsmilAhdZkRz3cxSUCw9MiWUWN/Tb9oG4raHEmxKcvt1YmmAd29LvsnaHwarSlU+xg2w7vC48iCL0mTAS3qod/sE/Dr+Fn1lyqWzA85HAAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .w-mc-codeRefresh.lowerIE9 p {\n        line-height: 22px !important;\n        font-size: 12px;\n        font-weight: bold;\n        color: #000;\n    }\n    .w-mc-codeRefresh.lowerIE9 a {\n        display: none;\n    }\n    .w-mc-codeRefresh.lowerIE9 .w-mc-codeRefresh-mask {\n        opacity: .95;\n        filter:Alpha(opacity=95);\n    }\n\n    .w-mc-codeRefresh-mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: #fff;\n        opacity: .85;\n        filter: alpha(opacity=85);\n    }\n    \n    .w-mc-codeRefresh-main {\n        position: relative;\n        display: table;\n        width: 100%;\n        height: 100%;\n        font-style: normal;\n        font-weight: 500;\n        font-size: 14px;\n        line-height: 20px;\n        color: #333333;\n    }\n    \n    .w-mc-codeRefresh-main__inner {\n        display: table-cell;\n        width: 100%;\n        height: 100%;\n        vertical-align: middle;\n        text-align: center;\n    }\n    \n    .w-mc-codeRefresh-main p {\n        margin: 0 auto 12px;\n    }\n    \n    .w-mc-codeRefresh-main a {\n        display: block;\n        width: 100px;\n        height: 36px;\n        text-decoration: none;\n        background-color: #3b78dd;\n        color: #fff;\n        line-height: 36px;\n        margin: 12px auto 0;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n    }\n    \n    .w-mc-appLogin-scanSuc {\n        padding-top: 46px;\n        padding-bottom: 44px;\n        text-align: center;\n    }\n    \n    .w-mc-appLogin-scanSuc-img {\n        margin: 0 auto;\n        width: 72px;\n        height: 72px;\n        background-image: url(https://mimg.127.net/p/freemail/index/lib/img/applogin-scan-suc.png);background-position: 0 0;\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n    }\n    \n    .w-mc-appLogin-scantxt {\n        margin: 26px 0 10px;\n        line-height: 22px;\n        font-weight: 500;\n        font-size: 16px;\n    }\n    \n    .w-mc-txt-suc {\n        color: #33A853;\n    }\n        \n    .w-mc-appLogin-scanSuc a {\n        line-height: 20px;\n        font-size: 14px;\n        color: #3B78DD;\n        text-decoration: none;\n    }\n    \n    .s-noScan-active .w-mc-codeWrap, .s-noScan-active .w-mc-appLogin-scanSuc {\n        display: none !important;\n    }\n    .s-noScan-active .w-mc-appLogin-noScan{\n        display: block !important;\n    }\n    .w-mc-appLogin-noScan {\n        display: none;\n        margin-top: 40px;\n        text-align: center;\n    }\n    \n    .w-mc-appLogin-noScan-avatar {\n        width: 100px;\n        height: 100px;\n        margin: 0 auto;\n        border-radius: 50px;\n        overflow: hidden;\n    }\n    .w-mc-appLogin-noScan-avatar img {\n        display: block;\n        width: 100%;\n    }\n    \n    .w-mc-appLogin-noScan-nickname {\n        margin: 12px 0;\n        font-weight: 500;\n        font-size: 16px;\n        height: 22px;\n        line-height: 22px;\n        color: #333;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n    \n    .w-mc-appLogin-noScan_waitTips {\n        display: none;\n        margin: 40px auto 0 auto;\n        line-height: 22px;\n        font-size: 14px;\n        color: #878787;\n    }\n    .w-mc-appLogin-noScan-loginBtn {\n        width: 220px;\n        height: 50px;\n        line-height: 50px;\n        margin: 40px auto 0 auto;\n        font-size: 20px;\n        color: #fff;\n        background: #3370FF;\n        border-radius: 4px;\n        cursor: pointer;\n        user-select: none;\n    }\n    \n    .w-mc-appLogin-noScan-wait .w-mc-appLogin-noScan_waitTips {\n        display: block;\n    }\n    \n    .w-mc-appLogin-noScan-wait .w-mc-appLogin-noScan-loginBtn {\n        display: none;\n    }\n    \n    .w-mc-appLogin-noScan-loginBtn:hover {\n        background: #477EFF;\n    }\n    .w-mc-appLogin-noScan-loginBtn:active {\n        background: #2E65E6;\n    }\n    \n    .w-mc-appLogin-noScan-switchBtn {\n        margin-top: 16px;\n        cursor: pointer;\n        font-size: 14px;\n        line-height: 20px;\n        color: #3370FF;\n        user-select: none;\n    }\n    .w-mc-appLogin-noScan-switchBtn:hover {\n        color: #477EFF;\n    }\n    .w-mc-appLogin-noScan-switchBtn:active {\n        color: #2E65E6;\n    }\n    .w-mc-description {\n        color: #81858A;\n        background: #f5f5f5; \n        border-radius: 20px; \n        width: 284px; \n        height: 32px; \n        line-height: 32px; \n        text-align: center; \n        margin: 24px auto 0 auto;\n        font-size: 12px;\n    }\n    .w-mc-autoLogin-opt {\n        display: none;\n        text-align: center;\n        color: #81858A;\n        font-size: 12px;\n        line-height: 16px;\n        margin: 24px auto;\n        user-select: none;\n    }\n    .w-mc-alCkb {\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n        padding: 0;\n        margin: 0 6px 0 0;\n        vertical-align: middle;\n        border: none;\n        outline: none;\n        -webkit-appearance: none;\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEHSURBVHgB7Zc/TsMwFMa/5xAxxhKQMrJma47ADbgCR+hJOEKvkCNwA9iyduRPh5gtiuSHXyGRJUqXxl36flJs+dnS90uy+AHnDsWLtm3vQmnNoCXAFnPDaIh4VVXV5o+AhDPMS5Lg2IG5M4R6lLiYNsg8hV1bFAVuFyWMMZiTYRjwud3CuS/LwDqU7qVuIrUHmW6ur2YPF/I8x6Isf6N4OdbNvoOpyLJsNxOR/Vfg1KiACqiACqiACqiACqhAJECdjN57pEJuxgcE+FXGt/ePvQePRV5MruU/UWjG+tQX9ODHy9CYOOdseJAO6nryq3E1fYHQqmx6+DrcmRskYfeLnyWjjloz5RuPBFWA49oyyAAAAABJRU5ErkJggg==);\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n        cursor: pointer;\n        border-radius: 0;\n    }\n    .w-mc-alCkb:checked {\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN+SURBVHgB7Ve7UhRBFL23Z8sXSoGpiaFVBsIXCGhs4SeY4hoQGlqWZWjAbswnsB8AC38AZoR8gSyPKspiptv7mp6enZGHrCR6t2bn1dPn3HNP39kF+NcD05NnXw+fZnlnHSDMBYAZmHjgwOf56v6n2YMGAQXPdv8OcC1GPi/mSxKuvOry7NstgHPMYCdbj7jJjWW4pSDZ59oITDZC4C/d6Bjrd6PSHZh4BAMHA0awMznm+ymdCRKgaRkbPOEqibdzd+XO4Pt5JCFEEjluTEByMrl98LTzAt5deAArtGmcwgaRQEHGKBDHjTxQgrPIIRQK7gt4v3A/ATeCRkzKkEjwxwQ4m2AmCwJM0jP44hQRmIrjesNTGOyeWf21RGm0E7AagmVXuricQr69ZsQZS3bAso+DH0N/+9im9PZsfT2MeSDY/CGeh4ACVFEI0csMrPIWAszZR/CtIyHgso76HpN8ExN00qx5ULCM+VO6eGPvJzk8RAK+plIL+OYh9ChzxEyGcLmq2tc9UBHgmpqb+bP84g58eaNGejIN0N85s0xsNZupxmu+tvkD+sMjms8pkO0D4ngzgqhJYJ1D1bWgXE4W7OiVl/fkmqea+6JQw9H1Ws0p8z5Jz5mjo9x4bySQN0u0QYAGhVoHo2N2bm94EgdqpvfJdDlt59Dl88WHtcx7WyPL2MnU6DLaZbJHOg/Y9HzHFIDnn8mtxCP4yojqYHL30rSReKTrnabj43HZBRAZ1CUKONC6Q2skHmAstPWtx3yR3czSd1/p+6O7VH9ji+xccxaTMzUCWn8UAgGx1orbSmAM0Li4WCu+x9KuEdB4iOzDkdU8MwWcqmDZ/w64qYBEUMeaAjyhehHJXIdy/8PrxxU4EYugpfxiOLsGUCl6JQL8kPQDb4ZhQl6J0KFKra/V/taoAiqlRyUdC34JeIOA2UC/JBPQppTRxJ7kpBXQ3z5Rk5LJVPaOPlmSAIzZXyVqBEKZnyUgbZhaKXK/54sZ1tpoueTQca2dyY1wnWj9PVBOglYSEYRVgIwakdduqF3FxmbgYre7XPZWAjTNqParOK4Mb6vCyXJ0mXpDe7yzda6krwvOkRZrr3VE0tnK5QWx1VqTsRfMVcFp3KBBoOgU71iFdhKYvFjGN2z094uCaI5CXqw2COx/nD0gEvOQsLtomuuGAAPsFLmfT/+a/Y9f9HmkI7Rz1H8AAAAASUVORK5CYII=);\n        border-radius: 0;\n    }\n    .w-mc-autoLogin-opt span {\n        vertical-align: middle;\n    }\n    @keyframes loading-rotate {\n        0% {\n            transform: rotate(90deg) skew(0deg) scale(1);\n            -ms-transform: rotate(90deg) skew(0deg) scale(1);\n            /* IE 9 */\n            -moz-transform: rotate(90deg) skew(0deg) scale(1);\n            /* Firefox */\n            -webkit-transform: rotate(90deg) skew(0deg) scale(1);\n            /* Safari ºÍ Chrome */\n            -o-transform: rotate(90deg) skew(0deg) scale(1);\n        }\n    \n        100% {\n            transform: rotate(450deg) skew(0deg) scale(1);\n            -ms-transform: rotate(450deg) skew(0deg) scale(1);\n            /* IE 9 */\n            -moz-transform: rotate(450deg) skew(0deg) scale(1);\n            /* Firefox */\n            -webkit-transform: rotate(450deg) skew(0deg) scale(1);\n            /* Safari ºÍ Chrome */\n            -o-transform: rotate(450deg) skew(0deg) scale(1);\n        }\n    }\n\n    "}({codeWidth:this.options.codeWidth||160}),t=document,e=t.getElementsByTagName("head")[0];if(t.createStyleSheet){t.createStyleSheet().cssText=n}else{var i=t.createElement("style");i.type="text/css",i.innerHTML=n,e.appendChild(i),this.currentStyleTag=i}}},a.prototype.getHtml=function(){var n=this.options,t=n.tipsPos,e=n.isCustomEnter,i=n.description,o=(n.needUnLogin,n.unLoginTime,p(this.options.utmData||{})),a="",r="",s='<div class="w-mc-scanTips">请打开<a id="appDlLink" href="https://mail.163.com/dashi/dlpro.html'+o+'" rel="noopener norefferrer" target="_blank"> 网易邮箱大师App </a>扫一扫登录</div>';return"en_US"===this._language&&(s='<div class="w-mc-scanTips">Please open "Scan" on your<a id="appDlLink" href="https://mail.163.com/dashi/dlpro.html'+o+'" rel="noopener norefferrer" target="_blank"> MailMaster </a>to log in</div>'),"boolean"==typeof t||t||(t="top"),i&&(r='<div id="mcDesc" class="w-mc-description">'+i+"</div>"),e&&(a='<iframe id="maScanLoginFrame" name="maScanLoginFrame" style="overflow:hidden;border:0; width: 0; height: 0;" sandbox="allow-scripts allow-top-navigation"></iframe>'),'\n            <div class="w-mc-content">\n                \x3c!-- 二维码扫描界面 --\x3e\n                <div id="appLoginWait" class="w-mc-codeWrap">\n                    <div class="appLoginWaitInner">\n                        <div id="appCodeWrap">\n                            <div id="appCodeBox">\n                                '+("top"===t?s:"")+'\n                                <div class="appCodeBox-inner '+(this.options.hoverGuide?"appCodeBox-inner-show-hover":"")+'">\n                                    <div class="w-mc-appCode-wrap w-mc-sLoading" id="appCodeMain">\n                                        <img id="appCode" />\n                                    </div>\n                                    <div class="w-mc-loading" id="appCodeLoadingWrap">\n                                        <img id="appCodeLoading" width="50" height="50" src="https://mimg.127.net/p/freemail/index/lib/img/loading@2x.png" />\n                                    </div>\n                                    <div id="appCodeRefresh" class="w-mc-codeRefresh" style="display: none;">\n                                        <div class="w-mc-codeRefresh-mask"></div>\n                                        <div class="w-mc-codeRefresh-main">\n                                            <div class="w-mc-codeRefresh-main__inner">\n                                                <p id="appLoginTxt">'+U("二维码已失效",this._language)+'</p>\n                                                <a href="javascript:void(0)">'+U("请点击刷新",this._language)+"</a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                "+("bottom"===t?s:"")+"\n\n                                "+r+'\n                                <div class="w-mc-autoLogin-opt" id="mcAutoLoginOpt">\n                                    <label>\n                                        <input id="w-mc-alCkb" class="w-mc-alCkb" type="checkbox" />\n                                        <span id="mcAutoLoginDay"></span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- 扫码确认界面 --\x3e\n                <div id="appLoginScan" class="w-mc-appLogin-scanSuc">\n                    <div class="w-mc-appLogin-scanSuc-img" id="appLoginScanSuc"></div>\n                    <p class="w-mc-appLogin-scantxt w-mc-txt-suc">'+U("扫描成功，请在手机上确认登录",this._language)+'</p>\n                    <a id="appLoginRestart" href="javascript:void(0)">'+U("返回二维码扫描",this._language)+'</a>\n                </div>\n                \x3c!-- 免扫界面 --\x3e\n                <div id="noScanWrap" class="w-mc-appLogin-noScan">\n                    <div class="w-mc-appLogin-noScan_main">\n                        <div class="w-mc-appLogin-noScan-avatar" id="noScanAvatar"></div>\n                        <div class="w-mc-appLogin-noScan-nickname" id="noScanNickname"></div>\n                        <div class="w-mc-appLogin-noScan-operation">\n                            <div class="w-mc-appLogin-noScan_waitTips">'+U("请在邮箱大师App上点击确认登录")+'</div>\n                            <div class="w-mc-appLogin-noScan-loginBtn" id="scanConfirmBtn">'+U("立即登录")+'</div>\n                            <div class="w-mc-appLogin-noScan-switchBtn" id="scanReScanBtn">'+U("重新扫码")+"</div>\n                        </div>\n                    </div>\n                </div>\n\n                "+a+'\n                <form id="appLoginForm" method="post" action="" autocomplete="off" target="_self"></form>\n                <form id="maLoginForm" method="post" action="" autocomplete="off" target="_self"></form>\n            </div>\n        '},a.prototype.confirmNoScan=function(){var n=this,t={product:this._product,type:0,usage:this._usage,malfrom:this._malFrom},e=this.getFslStorage();e&&(t.fsl=e);var i={type:"get",url:this._noScanLoginUrl,param:t,callback:function(t){n.removeFslStorage(),n.getCode(t,"noScan")},error:function(){n.removeFslStorage(),n.showError({key:"b_appLogin_confirmNoScan_api_fail"})}};E(i).start()},a.prototype.getCodeId=function(){var n=this,t={product:this._product,usage:this._usage,deviceId:this._deviceId},e={type:"get",url:this._getCodeIdURL,param:t,timeout:5e3,callback:function(t){n.removeFslStorage(),n.getCode(t,"getCodeId")},error:function(t){var e="b_appLogin_qrcodeid_load_fail";t&&"timeout"===t.error&&(e="b_appLogin_qrcodeid_load_timeout"),n.showError({text:U("二维码加载失败",n._language),key:e})}};E(e).start()},a.prototype.getCode=function(n,t){if(!n)return this.showError({key:"b_appLogin_qrcodeid_load_fail",type:t}),clearTimeout(this._codeSlowTimer),clearTimeout(this._codeTimeoutTimer),!1;if(200===n.code){var e=i("noScanWrap"),o=n.result;if(this._uuid=o.l.i,this.noScanLoginShow)s(e,"w-mc-appLogin-noScan-wait","add"),this.statistics("b_noscan_confirm_pane_show",{},"show");else{var a=this._getCodeURL+"?uuid="+this._uuid+"&product="+this._product+"&size=340&malfrom="+this._malFrom+"&blackRgb=000";this.options.showLogo&&(a+="&showLogo="+!0),this.updateMf(o.mf),i("appCode").src=a,s(e,"w-mc-appLogin-noScan-wait","remove"),this.statistics("b_mailmasterLoginQrcode_show",{},"show"),this.watchCodeLoad()}"noScan"===t&&this.getStatus(this._uuid)}else this.noScanLoginShow?(this.noScanLoginShow=!1,this.refresh()):this.showError({key:"b_mailmasterLogin_get_code_error",type:t,code:n.code,text:U("二维码加载失败",this._language)})},a.prototype.removeFslStorage=function(){localStorage.removeItem("MASTER_FSL")},a.prototype.getFslStorage=function(){return localStorage.getItem("MASTER_FSL")||""},a.prototype.updateMf=function(n){var t=document.getElementById("mcAutoLoginOpt"),e=document.getElementById("mcAutoLoginDay");if(this.options.needUnLogin&&n){var i=Math.floor(n/864e5);this._mf=n,t.style.display="block",e.innerHTML=U("${n}天内自动登录").replace("${n}",i)}else this._mf=0,t.style.display="none"},a.prototype.getStatus=function(n){var t=this,e=this,i=this.options.onScanSuc,o={uuid:this._uuid,product:this._product},a={type:"get",url:this._getStatusURL,param:o,callback:function(o){var a=o.result||{},r=a.qrcodeStatus,s=a.accountType,c=a.fsl;t.handleStatus(n,r.toString(),(function(){if(e._accountType=s,c&&localStorage.setItem("MASTER_FSL",c),1===s){var o={uuid:e._uuid,product:e._product},a={type:"get",url:e._getAuthURL,headers:{deviceId:t._deviceId||""},param:o,callback:function(n){t.getAuth(n)},error:function(){t.showError({key:"b_appLogin_getAuth_api_fail"})}};E(a).start()}else 2===s&&(e.statistics("b_mailmasterLoginDashi_success",{},"show"),i&&i(),e._isAsync?e.asyncLogin(n):setTimeout((function(){e.submitMaLogin()}),500))}))},error:function(){t.showError({key:"b_appLogin_getStatus_api_fail"})}};E(a).start()},a.prototype.handleStatus=function(n,t,e){var o=this,a=o.options,r=a.onScan,s=a.onStatusChange;if(o._uuid&&n===o._uuid)switch(this._qrcodeStatus!==t&&(this._qrcodeStatus=t,s&&s(t)),t){case"200":e();break;case"404":if(this.noScanLoginShow)return this.noScanLoginShow=!1,this.refresh(),!1;var c=i("appLoginWait"),p=i("appLoginScan");"none"===c.style.display&&(c.style.display="block",p.style.display="none"),this.showError({key:"b_mailmasterLoginTimeout_show"});break;case"408":o.startPoll((function(){o.getStatus.call(o,n)}));break;case"409":o._bFirst&&(o._bFirst=!1,o.INTERVAL=1e3,i("appLoginWait").style.display="none",i("appLoginScan").style.display="block",o.statistics("b_mailmasterLoginWaitPanel_show",{},"show"),r&&r()),o.startPoll((function(){o.getStatus.call(o,n)}));break;default:o.showError({key:"b_mailmasterLogin_check_status_error",code:t})}},a.prototype.getAuth=function(n){void 0===n&&(n={});var t=n||{},e=t.code,i=t.result,o=this,a=i.retCode||"";i.scan;200===e?o.handleStatus(this._uuid,a.toString(),(function(){o.statistics("b_mailmasterLogin_success",{},"show"),o.submitLogin(i)})):(o.init(),o.showError({key:"b_mailmasterLogin_check_auth_error",code:e}))},a.prototype.submitMaLogin=function(){var n=document.getElementById("maLoginForm"),t=['<input type="hidden" name="product" value="'+this._product+'">','<input type="hidden" name="uuid" value="'+this._uuid+'">'].join("");this.options.url2?t+='<input type="hidden" name="url2" value="'+this.options.url2+'">':t+='<input type="hidden" name="url2" value="'+("https://dashi.163.com/projects/scanerror/?url2="+encodeURIComponent(window.location.href))+'">';this.options.mailStats&&(this.options.mailStats.commonData.sdid&&(t+='<input type="hidden" name="sdid" value="'+this.options.mailStats.commonData.sdid+'">'),this._deviceId&&(t+='<input type="hidden" name="deviceId" value="'+this._deviceId+'">')),this.options.isCustomEnter&&(t+='<input type="hidden" name="rdt" value="1">'),n.innerHTML=t,n.action=this._maLoginUrl,n.submit()},a.prototype.asyncLogin=function(n){var t=this,e={uuid:n,session:!0};this._mf&&this._mfChecked&&(e.freelogin=this._mf);var i={type:"post",url:this._asyncMaLoginUrl,param:e,timeout:5e3,headers:{deviceId:this._deviceId,masterfp:this.options.masterfp||""},callback:function(n){var e=t.options.onLogin;200===n.code&&e&&e(n.result)},error:function(n){t.showError({text:U("登录失败",t._language),key:"b_appLogin_malogin_async_fail"})}};E(i).start()},a.prototype.listenFrameLogin=function(){var n=this.options.onLogin;window.addEventListener("message",(function(t){t.data.success&&n&&n()}))},a.prototype.submitLogin=function(n){var t=this.options.onScanSuc,e="mailmaster_mail_",i=this._entryUrl,o="",a="";this.options.mailStats&&this.options.mailStats.commonData.sdid&&(a=this.options.mailStats.commonData.sdid),this._currDomain=n.domain,n.domain?(o=this._urls[n.domain].url2,2===this._accountType&&(i=this._urls[n.domain].entryDaShiUrl,e="mailmaster_web_")):o="https://mail.163.com/errorpage/error163.htm";var r=c("df",e+(this.options.df||this._product),!0)+c("uuid",this._uuid)+c("style",13)+c("allssl",!0)+c("from","web")+c("t",(new Date).getTime());this._deviceId&&(r+=c("deviceId",this._deviceId)),a&&(r+=c("sdid",a));var s="";switch(n.domain){case"@126.com":s="126.com";break;case"@vip.126.com":s=".vip.126.com";break;case"@vip.163.com":s=".vip.163.com";break;case"@188.com":s=".188.com";break;case"@yeah.net":s="yeah.net";break;default:s=""}var p=['<input type="hidden" name="product" value="'+this._product+'">','<input type="hidden" name="domains" value="'+s+'" />','<input type="hidden" name="noRedirect" value="1">','<input type="hidden" name="url" value="'+i+r+'" />','<input type="hidden" name="url2" value="'+o+'" />','<input type="hidden" name="ticket" value="'+n.ticket+'">'].join("");document.getElementById("appLoginForm").innerHTML=p,document.getElementById("appLoginForm").action=this._loginURL,t&&t(),setTimeout((function(){document.getElementById("appLoginForm").submit()}),500)},a.prototype.startPoll=function(n){var t=this;this.clearPoll(),this._timer=setTimeout((function(){t._loopCount++,t._loopCount>60&&(t.INTERVAL=4e3),n&&n()}),this.INTERVAL)},a.prototype.clearPoll=function(){clearTimeout(this._timer)},a.prototype.showError=function(n){var t=n.code,e=n.text,o=n.key,a=n.type,r=U("二维码已失效",this._language),c=i("appLoginTxt"),p=i("appCodeRefresh"),l={};i("appCodeLoadingWrap").style.display="none",c.innerHTML=e||r,t&&(l.errorCode=t),a&&(l.type=a),o&&this.statistics(o,l,"show"),this.isLowerIe9&&s(p,"lowerIE9","add"),p.style.display="block"},a.prototype.init=function(){this._bFirst=!0,this._loopCount=0,this.INTERVAL=2e3,this._uuid="",this._accountType="",this._currDomain="",this.clearPoll(),i("appLoginWait").style.display="block",i("appLoginScan").style.display="none",i("appCodeLoadingWrap").style.display="block",s(i("appCodeMain"),"w-mc-sLoading","add"),this.noScanLoginShow?this.checkNoScanStatus():(this.codeStartTime=Date.now(),this.modeChange("scan"),this.getCodeId())},a.prototype.modeChange=function(n){var t=document.getElementById("mcDesc");t&&(t.style.display="scan"===n?"block":"none"),this.options.onModeChange&&this.options.onModeChange(n)},a.prototype.watchCodeLoad=function(){var n=this;clearTimeout(this._codeSlowTimer),this._codeSlowTimer=setTimeout((function(){n.statistics("b_appLogin_qrcode_slow")}),this._codeSlowStamp),clearTimeout(this._codeTimeoutTimer),this._codeTimeoutTimer=setTimeout((function(){n._isCodeImgTimeout=!0,n.showError({text:U("二维码加载失败",n._language),key:"b_appLogin_qrcodeimg_timeout"})}),this._codeTimerStamp)},a.prototype.listen=function(){var n=this,t=i("appLoginRestart"),e=i("appDlLink"),o=i("appCodeRefresh"),a=i("scanConfirmBtn"),c=i("scanReScanBtn"),p=i("noScanWrap"),l=document.querySelector(".w-mc-content"),d=i("w-mc-alCkb");if(r(t,"click",(function(){n.statistics("b_appLogin_goBack_qrcode_click"),n.refresh()}),!1),e&&r(e,"click",(function(){n.statistics("b_appLogin_mailmaster_download_click",n.options.utmData||{})}),!1),r(o,"click",(function(){n.statistics("b_appLogin_refresh_qrcode_click"),o.style.display="none",n.refresh()}),!1),i("appCode").onload=function(){if(n._isCodeImgTimeout)return!1;n.getStatus(n._uuid),i("appCodeLoadingWrap").style.display="none",s(i("appCodeMain"),"w-mc-sLoading","remove"),clearTimeout(n._codeSlowTimer),clearTimeout(n._codeTimeoutTimer),n.statistics("b_appLogin_qrcodeimg_load_success",{loadingTime:Date.now()-n.codeStartTime},"show")},i("appCode").onerror=function(){clearTimeout(n._codeSlowTimer),clearTimeout(n._codeTimeoutTimer),n.showError({text:U("二维码加载失败",n._language),key:"b_appLogin_qrcodeimg_load_fail"})},r(a,"click",(function(){n.confirmNoScan(),n.statistics("b_noscan_confirm_btn_click",{},"click")}),!1),r(c,"click",(function(){var t,e=(t="w-mc-appLogin-noScan-wait",!!p.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")));s(l,"s-noScan-active","remove"),n.noScanLoginShow=!1,n.refresh(),e?n.statistics("b_noscan_confirm_pane_rescan_btn_click",{},"click"):n.statistics("b_noscan_rescan_btn_click",{},"click")}),!1),r(d,"change",(function(t){n._mfChecked=t.target.checked}),!1),this.options.isCustomEnter){var h=document.getElementById("maScanLoginFrame"),u=document.getElementById("maLoginForm");h&&(u.target="maScanLoginFrame",this.listenFrameLogin())}},a.prototype.statistics=function(n,e,i){void 0===e&&(e={}),void 0===i&&(i="click");var o=this.options,a=o.username,r=o.mailStats,s=o.origin,c=void 0===s?"normal":s,p=o.malFrom,l=void 0===p?"":p,d=o.onTongji,h=a&&""!=a?-1===a.indexOf("@")?a+"@"+this._currDomain:a:"";if(r)switch(i){case"show":r.show(n,t({uid:h,malFrom:l,domain:this._currDomain,origin:c},e));break;default:r.click(n,t({uid:h,malFrom:l,domain:this._currDomain,origin:c},e))}else d&&d(n,t({uid:h,domain:this._currDomain},e),i)},a.prototype.refresh=function(){var n=i("appCodeRefresh"),t=document.querySelector(".w-mc-content");return!this.isLowerIe9&&(this._isCodeImgTimeout=!1,!this.noScanLoginShow&&(n.style.display="none",s(t,"s-noScan-active","remove"),s(this.includeBox,"no-scan-codebox","remove"),this.noScanConfig=null,this.noScanLoginShow=!1,this.clearPoll(),void this.init()))},a.prototype.render=function(){this.includeBox&&(this.includeBox.innerHTML=this.getHtml())},a.prototype.checkNoScanStatus=function(){var n=this,e={},i=this.getFslStorage();i&&(e.fsl=i);var o={type:"get",url:this._noScanLoginCheckUrl,param:t({},e),callback:function(t){t&&200===t.code?(n.noScanConfig=t.result,n.showNoScanPane(),n.modeChange("noScan"),s(n.includeBox,"no-scan-codebox","add")):(n.removeFslStorage(),n.noScanLoginShow=!1,n.refresh())},error:function(){n.noScanLoginShow=!1,n.showError({key:"b_appLogin_checkNoScanStatus_fail"})}};E(o).start()},a.prototype.showNoScanPane=function(){var t=document.querySelector(".w-mc-content"),e=i("noScanAvatar"),o=i("noScanNickname");s(t,"s-noScan-active","add");var a=document.createElement("img");a.src=this.noScanConfig.mava||"https://onegoods.nosdn.127.net/resupload/2021/11/4/3712055530d6d91405b57ca222182bbd.png",e.appendChild(a),o.innerHTML=this.noScanConfig.mnkn?function(t){n||(n=document.createElement("DIV"));var e=n.cloneNode(!1),i=document.createTextNode(t);return e.appendChild(i),e.innerHTML}(this.noScanConfig.mnkn):"",this.statistics("b_noscan_pane_show",{},"show")},a.prototype.destroy=function(){var n=this.includeBox||document.body,t=document.getElementsByTagName("head")[0],e=o(".w-mc-content");this.clearPoll(),e.length&&(e=e[0],n.removeChild(e)),this.currentStyleTag&&t.removeChild(this.currentStyleTag)},a}()}));
