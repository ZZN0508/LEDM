(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2261],{44494:function(e,t,n){e.exports=n(69743)},98926:function(e,t,n){e.exports=n(76258)},32271:function(e,t,n){var r=n(14471);e.exports=r},99565:function(e,t,n){var r=n(96507);e.exports=r},78690:function(e,t,n){var r=n(16670);e.exports=r},6172:function(e,t,n){n(80290);var r=n(35703);e.exports=r("Array").fill},80446:function(e,t,n){var r=n(7046),o=n(6172),a=Array.prototype;e.exports=function(e){var t=e.fill;return e===a||r(a,e)&&t===a.fill?o:t}},70063:function(e,t,n){n(89622);var r=n(54058);e.exports=r.Number.isNaN},35254:function(e,t,n){n(53882);var r=n(54058).Object;e.exports=function(e,t){return r.create(e,t)}},76094:function(e,t,n){e.exports=n(26467)},74303:function(e,t,n){e.exports=n(28688)},55122:function(e,t,n){e.exports=n(5383)},26467:function(e,t,n){var r=n(32271);e.exports=r},28688:function(e,t,n){var r=n(99565);e.exports=r},5383:function(e,t,n){var r=n(78690);e.exports=r},91860:function(e,t,n){"use strict";var r=n(89678),o=n(59413),a=n(10623);e.exports=function(e){for(var t=r(this),n=a(t),i=arguments.length,l=o(i>1?arguments[1]:void 0,n),c=i>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>l;)t[l++]=e;return t}},80290:function(e,t,n){var r=n(76887),o=n(91860),a=n(18479);r({target:"Array",proto:!0},{fill:o}),a("fill")},89622:function(e,t,n){n(76887)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},53882:function(e,t,n){n(76887)({target:"Object",stat:!0,sham:!n(55746)},{create:n(29290)})},69743:function(e,t,n){var r=n(80446);e.exports=r},76258:function(e,t,n){var r=n(70063);e.exports=r},14471:function(e,t,n){var r=n(35254);e.exports=r},17727:function(e,t,n){"use strict";var r=n(82109),o=n(31913),a=n(13366),i=n(47293),l=n(35005),c=n(60614),u=n(36707),s=n(69478),f=n(31320);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&i((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,l("Promise")),n=c(e);return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}}),!o&&c(a)){var d=l("Promise").prototype.finally;a.prototype.finally!==d&&f(a.prototype,"finally",d,{unsafe:!0})}},49195:function(e,t,n){"use strict";var r=n(67294),o=n(94184),a=n.n(o),i=n(96453),l=n(52030);t.Z=function(e){var t=e.clsPrefix,n=void 0===t?"FeedContainer":t,o=e.toMoreConfig,c=e.headerAppend,u=e.title,s=e.className,f=(0,l.Hk)().isPwa;return r.createElement("div",{className:a()("".concat(n,"__header"),s)},void 0!==o?r.createElement(r.Fragment,null,r.createElement("a",{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(o.href,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:function(){return o.onClick&&o.onClick("title")},target:f?"_self":o.target},r.createElement("div",{className:"".concat(n,"__title color-content-primary")},u)),r.createElement("a",{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(o.href,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:function(){return o.onClick&&o.onClick("more")},target:f?"_self":o.target,className:"".concat(n,"__toMore color-link-content-secondary")},r.createElement("span",null,"更多"),r.createElement(i.OU8,{width:"13",height:"13"}))):"2022世界杯"===u?null:r.createElement("div",{className:"".concat(n,"__title")},u),c)}},49697:function(e,t,n){"use strict";var r=n(79349),o=n(33938),a=n(59056),i=n(63109),l=n.n(i),c=n(77766),u=n.n(c),s=n(2991),f=n.n(s),d=n(3649),h=n.n(d),v=n(66419),m=n.n(v),p=n(67294),g=n(27361),b=n.n(g),y=n(9361),_=n(51808),k=n(94184),w=n.n(k),C=n(23279),Z=n.n(C),E=n(49195),x=n(75485),L="FeedContainer",S=p.forwardRef((function(e,t){var n,i=e.lazyDistance,c=void 0===i?500:i,s=e.isLazyLoad,d=void 0===s||s,v=e.title,g=void 0===v?"":v,k=e.className,C=e.defaultData,S=e.renderItem,I=e.queryCountRef,P=e.fetchData,N=e.renderLoadingItem,T=e.withPaging,D=void 0!==T&&T,M=e.noSlice,O=void 0!==M&&M,F=e.useDefaultData,R=void 0!==F&&F,B=e.layoutResetDep,j=void 0===B?[]:B,A=e.toMoreConfig,H=e.headerAppend,q=e.customHeader,U=e.defaultRowCount,z=e.onPagingClick,G=e.onPagingShow,K=e.hideAfterFetchEmpty,W=void 0===K||K,V=e.injectAfterItemHandler,Y=e.autoFetchOnShortage,Q=void 0===Y||Y,X=e.itemKey,J=void 0===X?"key":X,$=(0,p.useRef)(null),ee=(0,p.useState)(0),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],oe=(0,p.useState)(!1),ae=(0,a.Z)(oe,2),ie=ae[0],le=ae[1],ce=(0,p.useState)(!1),ue=(0,a.Z)(ce,2),se=ue[0],fe=ue[1],de=(0,p.useRef)(!1),he=(0,p.useState)(U||8),ve=(0,a.Z)(he,2),me=ve[0],pe=ve[1],ge=(0,p.useState)(!d),be=(0,a.Z)(ge,2),ye=be[0],_e=be[1],ke=(0,p.useState)(!1),we=(0,a.Z)(ke,2),Ce=(we[0],we[1],(0,x.Z)()),Ze=(0,p.useRef)(b()(C,"list",[])),Ee=(0,p.useMemo)((function(){return R?b()(C,"list",[]):Ze.current}),[C,R]),xe=(0,p.useState)([]),Le=(0,a.Z)(xe,2),Se=Le[0],Ie=Le[1],Pe=u()(Ee).call(Ee,Se),Ne=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,o,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:0,P){e.next=3;break}return e.abrupt("return");case 3:if(!de.current){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,!((n=t+me-Pe.length)<=0)){e.next=9;break}return e.abrupt("return");case 9:return fe(!0),de.current=!0,e.next=13,P(n,Re.current,null==I?void 0:I.current);case 13:(o=e.sent)&&o.list&&(Ie((function(e){var t;return u()(t=[]).call(t,(0,r.Z)(e),(0,r.Z)(o.list))})),le(!0),Re.current=o,I&&I.current++),e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(5),e.t0;case 20:return e.prev=20,fe(!1),de.current=!1,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[5,17,20,24]])})));return function(){return e.apply(this,arguments)}}(),Te=(0,p.useState)(!1),De=(0,a.Z)(Te,2),Me=De[0],Oe=De[1],Fe=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Pe.length<me)){e.next=4;break}return e.next=3,Ne(0);case 3:Oe(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=(0,p.useRef)(C),Be="0px 0px ".concat(c||0,"px 0px"),je=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&z("right"),!de.current){e.next=3;break}return e.abrupt("return");case 3:Ne(ne+me),re(ne+me);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){z&&z("left");var e=ne-me;e<0&&(e=0),re(e)},He=function(e,t){var n=$.current;if(null!=n){var r=n.children[e];if(null!=r){var o=r;n.scrollTo({left:o.offsetLeft-5,behavior:"smooth"})}}};(0,p.useLayoutEffect)((function(){He(ne)}),[ne]);var qe,Ue,ze=(0,p.useCallback)(Z()((function(){var e=$.current;if(null!=e){var t=e.children[0],n=e.children[1];if(null!=t&&null!=n){var r=t.offsetWidth,o=n.offsetLeft-t.offsetLeft-r,a=Math.floor((e.clientWidth-r)/(r+o)+1);a<0&&(a=0),pe(a)}}He(ne)}),200),[ne]);return(0,p.useLayoutEffect)((function(){ze()}),u()(n=[Ce.side]).call(n,(0,r.Z)(j))),(0,p.useLayoutEffect)((function(){return window.addEventListener("resize",ze),function(){return window.removeEventListener("resize",ze)}}),[ze]),(0,p.useEffect)((function(){d||Fe()}),[]),(0,p.useEffect)((function(){Q&&Me&&Ne(ne)}),[Q,me,Me]),p.createElement(y.ZP,{onChange:function(e,t){e.isIntersecting&&(Fe(),_e(!0),t())},disabled:!d||ye,rootMargin:Be},W&&ie&&0===Pe.length?null:p.createElement("div",{className:w()(L,k),ref:t},void 0!==q?q:g?p.createElement(E.Z,{toMoreConfig:A,title:g,clsPrefix:L,headerAppend:H}):null,p.createElement("div",{className:"".concat(L,"__content")},p.createElement("div",{className:"".concat(L,"__items"),ref:$},f()(qe=O?Pe:h()(Pe).call(Pe,0,D?Pe.length:me+1)).call(qe,(function(e,t){if(e.loading)return p.createElement("div",{key:t,className:"".concat(L,"__itemWrapper loading"),style:e.style},N());String(t);var n=e["function"==typeof J?J(e):J];return n||console.warn("请检查FeedContainer的数据源单项，是否不存在对应的itemKey"),p.createElement(p.Fragment,{key:n||t},p.createElement("div",{className:"".concat(L,"__itemWrapper"),style:e.style},S(e,t)),null==V?void 0:V(t,me))})),(se||0===Pe.length)&&f()(Ue=m()({length:me})).call(Ue,(function(e,t){return p.createElement("div",{key:t,className:"".concat(L,"__itemWrapper loading")},N())}))),D&&p.createElement(p.Fragment,null,ne>0&&p.createElement(_.Z,{onViewableChange:function(e){e&&G&&G("left")},justOnce:!0},p.createElement("div",{className:w()("".concat(L,"__arrow"),"".concat(L,"__prev")),onClick:Ae},p.createElement("i",{className:"icon-arrow"}))),p.createElement(_.Z,{onViewableChange:function(e){e&&G&&G("right")},justOnce:!0},p.createElement("div",{className:w()("".concat(L,"__arrow"),"".concat(L,"__next")),onClick:je},p.createElement("i",{className:"icon-arrow"})))))))}));t.Z=S},14351:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var r=n(73126),o=n(41266),a=n(67294),i=n(12520),l=n(25392),c=n(94184),u=n.n(c),s=["video_watch_count","publish_time","className"],f=function(){return a.createElement(i.B,{className:"followTrendsItemPlaceHolder",bottomHeight:18,bottomLineCount:1})};t.Z=function(e){var t=e.video_watch_count,n=e.publish_time,c=e.className,f=(0,o.Z)(e,s);return a.createElement(i.Z,(0,r.Z)({},f,{className:u()("HorizontalChannelBlockList__item",c),bottomInfo:a.createElement(l.Z,{video_watch_count:t,publish_time:n})}))}},72597:function(e,t,n){"use strict";n(41539),n(54747);var r=n(86902),o=n.n(r),a=n(14310),i=n.n(a),l=n(20116),c=n.n(l),u=n(34074),s=n.n(u),f=n(39649),d=n.n(f),h=n(73126),v=n(44845),m=n(41266),p=(n(68309),n(81643)),g=n.n(p),b=n(78580),y=n.n(b),_=n(59340),k=n.n(_),w=n(51942),C=n.n(w),Z=n(67294),E=n(49697),x=n(42816),L=n(14351),S=n(65876),I=n(44999),P=n(94184),N=n.n(P),T=n(74598),D=n(25413),M=n(68956),O=n(88768),F=n(17097),R=n(54871),B=n(92744),j=n(67225),A=n(91481),H=["channelId","withPaging","className","title","customHeader","blockInfo","request_from","onGarbageClick","anchorQuery","videoShowQuery","keyword","tracing","categoryType"];function q(e,t){var n=o()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):d()?Object.defineProperties(e,d()(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,s()(n,t))}))}return e}var z=E.Z;t.Z=function(e){var t=e.channelId,n=e.withPaging,r=void 0!==n&&n,o=e.className,a=e.title,i=e.customHeader,l=e.blockInfo,c=e.request_from,u=e.onGarbageClick,s=e.anchorQuery,f=e.videoShowQuery,d=e.keyword,v=e.tracing,p=e.categoryType,b=(0,m.Z)(e,H),_=(0,R.jY)(),w=function(e){var t,n=function(e){var t;return g()(t=window.location.href).call(t,e)>-1};return n("/channel")?["category","category"]:n("/cluster")?["category","cluster"]:n("/my/attention")?["attention","attention"]:n("/my/watch-history")?["history","history","video_history"]:n("/my/favorite")?["like","like","like",String(null==e||null===(t=e.user_info)||void 0===t?void 0:t.user_id)]:["homepage","homepage"]},E=function(e,t){var n,r,o;F.Z.authorInfoClick({log_pb:(0,B.ST)(e.log_pb,(o=function(e){var t;return g()(t=window.location.href).call(t,e)>-1},o("/my/watch-history")?["page_type","sourcepage","category_name"]:o("/my/favorite")?["page_type","sourcepage","category_name","author_id"]:["page_type","sourcepage"]),w(e)),click_position:t,user_status:_.id===String(null==e||null===(n=e.user_info)||void 0===n?void 0:n.user_id)?"author":"guest",is_following:null!=e&&null!==(r=e.user_info)&&void 0!==r&&r.follow?1:0})},P=function(e){var t=window.location.href;return g()(t).call(t,"/my/favorite")>-1?"like":g()(t).call(t,"/my/watch-history")>-1?"video_history":e},q=function(e){var t;if(!e)return"";var n=window.location.pathname;return y()(t=["/"]).call(t,n)||g()(n).call(n,"/search/")>-1||g()(n).call(n,"/channel/")>-1||g()(n).call(n,"/my/attention/")>-1?1:""};return Z.createElement(z,(0,h.Z)({},b,{customHeader:i,title:a,withPaging:r,className:N()("channelBlocklist",o),onPagingShow:function(e){M.Z.category.block_slide_show(U({slide_type:e},l))},onPagingClick:function(e){M.Z.category.block_slide_click(U({slide_type:e},l))},renderItem:function(e,t){var n=function(e,t){var n=e;if(t)try{n=k()(C()({},JSON.parse(e),t))}catch(e){console.log("json parse error")}return n};if(303===e.cellType||0===e.cellType){var r,o,a,i,c,h,m,g,b,y,_=e.data,w=Boolean(_.isPSeries),S=void 0!==_.series,N=w&&(null===(r=_.pseries)||void 0===r?void 0:r.is_pseries_updated);w&&(y=_.pseries.total),S&&(y=_.series.total);var F=w?O.IG.PSERIES:O.IG.SHORT_VIDEO;return Z.createElement(x.Z,{onGarbageClick:u?u.bind(null,e):void 0,inView:function(){var e;M.Z.common.videoShow({log_pb:n(_.log_pb,f),rank_in_block:t+1,category_name:P(null==l?void 0:l.block_title),block_title:null!==(e=null==l?void 0:l.block_title)&&void 0!==e?e:"",has_updating_buff:N?1:0})},tracing:U(U({},v),{},{video_card_type:F}),seriesCount:y,seriesType:w?"pseries":S?"series":void 0,isUpdated:N,isCoCreate:null===(o=_.co_creators_video_info)||void 0===o?void 0:o.is_co_creators_video,coCreatorList:null===(a=_.co_creators_video_info)||void 0===a?void 0:a.creator_list,title:_.title,titleNode:d?(0,A.LA)(d,_.title):void 0,anchorProps:(0,I.ZF)({gid:_.group_id,pSeriresId:null!==(i=null===(c=_.pseries)||void 0===c?void 0:c.id)&&void 0!==i?i:void 0,seriresId:null!==(h=null===(m=_.series)||void 0===m?void 0:m.id)&&void 0!==h?h:void 0,query:U({logPb:_.log_pb,rank_in_block:t+1,block_title:null!==(g=null==l?void 0:l.block_title)&&void 0!==g?g:"",series_flow:q(w)},s)}),coverURL:_.image_url,authorInfo:_.user_info,video_watch_count:_.playNum,publish_time:_.publish_time,duration:_.duration,watchDuration:"HISTORY"===e._displayPlace?Math.floor(_.history_duration/1e3):void 0,clientShowParams:{log_pb:_.log_pb},videoURL:_.preview_url,onAuthorProfileClick:function(){return E(_,"profile")},onAuthorNameClick:function(){return E(_,"name")},defaultIsCollected:"FAVORITE"===e._displayPlace||(null!=_.video_user_like?!!_.video_user_like:void 0),gid:_.group_id,pseriesId:w?null===(b=_.pseries)||void 0===b?void 0:b.id:void 0,categoryType:p,isVr:null==_?void 0:_.isVr})}if(310===e.cellType||309===e.cellType){var R,H=e.data,z=(0,j.Z)(H.attribute),G=z.isNeedToPay,K=z.isForVip,W=G||K,V=(0===H.watchDuration?H.watchDuration:H.historyDuration)||0,Y=(0,B.r6)(H.interactionStatus);return Z.createElement(x.Z,{isLvideo:!0,title:H.title,titleNode:d?(0,A.LA)(d,H.title):void 0,subTitle:H.subTitle,onGarbageClick:u?u.bind(null,e):void 0,duration:"HISTORY"===e._displayPlace||"FAVORITE"===e._displayPlace?H.duration:void 0,watchDuration:"HISTORY"===e._displayPlace?Math.floor(V/1e3):void 0,tagMark:W?{albumType:H.albumType,attribute:H.attribute,type:"mixTag"}:H.albumType?T.O[H.albumType]:void 0,bottomLabel:H.bottomLabel,inView:function(){var e;return M.Z.common.videoShow({log_pb:H.log_pb,rank_in_block:t+1,category_name:P(null==l?void 0:l.block_title),block_title:null!==(e=null==l?void 0:l.block_title)&&void 0!==e?e:""})},anchorProps:(0,I.sb)({albumId:H.albumId,episodeId:H.episodeId,query:U({logPb:H.log_pb,rank_in_block:t+1,block_title:null!==(R=null==l?void 0:l.block_title)&&void 0!==R?R:""},s)}),coverURL:(0,B.un)({coverList:H.coverList,imageStyle:"horizontal"}),clientShowParams:{log_pb:H.log_pb},videoURL:H.previewHorizontal,operationType:H.albumType,categoryType:p,episodeId:H.episodeId,albumId:H.albumId,defaultIsCollected:Y})}if(304===e.cellType){var Q,X=e.data,J=function(){var e;return{log_pb:n(X.log_pb,f),rank_in_block:t+1,block_title:null!==(e=null==l?void 0:l.block_title)&&void 0!==e?e:""}};return Z.createElement(x.Z,{isLive:!0,inView:function(){return M.Z.common.videoShow(J())},tracing:U(U({},v),{},{video_card_type:"live"}),title:X.title,titleNode:d?(0,A.LA)(d,X.title):void 0,anchorProps:{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl((0,D.Z)({short_id:X.short_id,room_id:X.room_id}),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:function(){return M.Z.common.videoClick(J())}},hotPoint:X.watching_count,authorInfo:X.user_info,coverURL:X.imageUrl,bottomLabel:null===(Q=X.tag)||void 0===Q?void 0:Q.name,clientShowParams:{log_pb:X.log_pb},onAuthorProfileClick:function(){return E(X,"profile")},onAuthorNameClick:function(){return E(X,"name")},watchingCount:X.watching_count,categoryType:p})}return Z.createElement(L.L,null)},renderLoadingItem:function(){return Z.createElement(L.L,null)},fetchData:e.fetchData||(t?(0,S.kg)(t,c):void 0)}))}},94546:function(e,t,n){"use strict";n.d(t,{V2:function(){return ce},EP:function(){return ue},Xw:function(){return se},ZP:function(){return ye},Lg:function(){return Q},xE:function(){return Y},ct:function(){return V},LW:function(){return W},St:function(){return pe}});var r=n(86902),o=n.n(r),a=n(14310),i=n.n(a),l=n(34074),c=n.n(l),u=n(39649),s=n.n(u),f=n(53311),d=n(59056),h=n(33938),v=n(41266),m=n(79349),p=n(44845),g=(n(41539),n(54747),n(9653),n(63109)),b=n.n(g),y=n(44494),_=n.n(y),k=n(2991),w=n.n(k),C=n(77766),Z=n.n(C),E=n(20116),x=n.n(E),L=n(78580),S=n.n(L),I=n(67294),P=n(27484),N=n.n(P),T=n(65050),D=n(49195),M=n(9361),O=n(74391),F=n(79112),R=n(32089),B=n(3649),j=n.n(B),A=n(98926),H=n.n(A),q=n(65876),U=(n(75485),n(8306),n(22533));function z(e,t){var n=o()(e);if(i()){var r=i()(e);t&&(r=x()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var K,W=function(e,t,n,r){var o=(0,q.kg)(e,t,n),a=[],i=r||[],l=!0;return(0,h.Z)(b().mark((function e(){var t,n,r,c,u,s,f,d=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length<=0?void 0:d[0],n=d.length>2?d.length<=2?void 0:d[2]:1,!(a.length>=t)){e.next=6;break}return r=j()(a).call(a,0,t),a=j()(a).call(a,t),e.abrupt("return",{list:r});case 6:if(e.prev=6,c=[],!l){e.next=14;break}return e.next=11,o(t,{list:i},n);case 11:u=e.sent,s=u.list,c=s;case 14:return i=c,c.length||(l=!1),f=Z()(a).call(a,c),a=j()(f).call(f,t),e.abrupt("return",{list:j()(f).call(f,0,t)});case 21:return e.prev=21,e.t0=e.catch(6),console.error(e.t0),e.abrupt("return",{list:[]});case 25:case"end":return e.stop()}}),e,null,[[6,21]])})))},V=function(e,t){var n,r=(0,q.Z3)(e,t),o=[],a=[];return(0,h.Z)(b().mark((function e(){var t,i,l,c,u,s,f,d=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length<=0?void 0:d[0],i=d.length<=2?void 0:d[2],!(o.length>=t)){e.next=6;break}return l=j()(o).call(o,0,t),o=j()(o).call(o,t),e.abrupt("return",{list:l,channelInfo:n});case 6:return e.next=8,r(t,{list:a},i);case 8:return c=e.sent,u=c.list,s=c.channelInfo,a=u,f=Z()(o).call(o,u),n=s,o=j()(f).call(f,t),e.abrupt("return",{list:j()(f).call(f,0,t),channelInfo:s});case 16:case"end":return e.stop()}}),e)})))},Y=function(e){var t=(0,q.DA)(e),n=[],r=[];return(0,h.Z)(b().mark((function e(){var o,a,i,l,c,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length<=0?void 0:u[0],!(n.length>=o)){e.next=5;break}return a=j()(n).call(n,0,o),n=j()(n).call(n,o),e.abrupt("return",{list:a});case 5:return e.next=7,t(o,{list:r});case 7:return i=e.sent,l=i.list,r=l,c=Z()(n).call(n,l),n=j()(c).call(c,o),e.abrupt("return",{list:j()(c).call(c,0,o)});case 13:case"end":return e.stop()}}),e)})))},Q=function(e){var t=(0,q.Y0)(e),n=[],r=[];return(0,h.Z)(b().mark((function e(){var o,a,i,l,c,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length<=0?void 0:u[0],!(n.length>=o)){e.next=5;break}return a=j()(n).call(n,0,o),n=j()(n).call(n,o),e.abrupt("return",{list:a});case 5:return e.next=7,t(o,{list:r});case 7:return i=e.sent,l=i.list,r=l,c=Z()(n).call(n,l),n=j()(c).call(c,o),e.abrupt("return",{list:j()(c).call(c,0,o)});case 13:case"end":return e.stop()}}),e)})))},X=function(e){var t=e.element,n=e.cssKey,r=(0,I.useState)(3),o=(0,d.Z)(r,2),a=o[0],i=o[1],l=(0,I.useCallback)((function(){if(t){var e=Number(window.getComputedStyle(t).getPropertyValue(n));H()(e)||i(e)}}),[t,n]);return(0,U.Z)(l,300),(0,I.useEffect)((function(){l()})),a},J=n(64138);function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}var ee=function(e){return I.createElement("svg",$({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),K||(K=I.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.98.646a.5.5 0 01.707 0L6 4.96 10.313.646a.5.5 0 11.707.708L6.353 6.02a.5.5 0 01-.707 0L.98 1.354a.5.5 0 010-.708z",fill:"#0C0D0F"})))},te=["lazyDistance","isLazyLoad","queryCountRef","fetchData","renderBlockList","moreText","maxItemCount","itemCssKey","defaultRowCount","rowCountPerFetch","deletedId","hidePlaceholder","replaceLoadingWithPlaceholder","bottomThreshold","EmptyComponent","onGarbageClick"],ne=["lazyDistance","isLazyLoad","bottomThreshold","fetchData","maxItemCount","itemCssKey","defaultLoadData","defaultRowCount","maxScrollLoadTimes","rowCountPerFetch","queryCountRef","renderBlockList","moreText","onClickLoadButton","hidePlaceholder","replaceLoadingWithPlaceholder","parentCb"],re=["EmptyComponent","fetchData","maxItemCount","itemCssKey","defaultRowCount","rowCountPerFetch","queryCountRef","bottomThreshold","renderBlockList","moreText","type","onGarbageClick","deletedId","resetDeps"];function oe(e,t){var n=o()(e);if(i()){var r=i()(e);t&&(r=x()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ie=function(e){var t;return _()(t=new Array(e)).call(t,1)},le=function(e){var t,n,r=e.props,o=e.itemCount,a=e.defaultDataCount,i=e.fetchingCount,l=e.renderBlockList,c=e.data,u=e.hidePlaceholder,s=e.replaceLoadingWithPlaceholder,f=e.hasMore,d=e.scrollLoadable,h=void 0===d||d,v=ae(ae({},r),{},{noSlice:!0,useDefaultData:!0,className:r.className?"".concat(r.className," loadmoreChannelBlocklist"):"loadmoreChannelBlocklist"}),p=c.length;if(0===p&&!f)return I.createElement("div",{className:"FeedContainer channelBlocklist"},I.createElement(D.Z,v));if(0===p&&a){var g,b=w()(g=ie(a)).call(g,(function(e,t){return{loading:!0}}));return l(ae(ae({},v),{},{defaultData:{list:b}}),0)}var y=s?o:u?0:i,_=h?w()(t=ie(y)).call(t,(function(e,t){return{loading:!0}})):[],k=Z()(n=[]).call(n,(0,m.Z)(c),(0,m.Z)(_));return l(ae(ae({},v),{},{defaultData:{list:k}}),0)};function ce(e){var t=e.lazyDistance,n=void 0===t?500:t,r=e.isLazyLoad,o=void 0===r||r,a=e.queryCountRef,i=e.fetchData,l=e.renderBlockList,c=e.moreText,u=void 0===c?"加载更多视频...":c,s=(e.maxItemCount,e.itemCssKey),h=e.defaultRowCount,p=void 0===h?1:h,g=e.rowCountPerFetch,b=void 0===g?3:g,y=e.deletedId,_=void 0===y?[]:y,k=e.hidePlaceholder,w=e.replaceLoadingWithPlaceholder,C=e.bottomThreshold,E=e.EmptyComponent,L=e.onGarbageClick,P=(0,v.Z)(e,te),N=(0,f.Z)(void 0),D=(0,d.Z)(N,2),F=D[0],B=D[1],j=X({element:F.current,cssKey:s}),A=p*j,H=j*b,q=(0,I.useState)(!o),U=(0,d.Z)(q,2),z=U[0],G=U[1],K=(0,I.useState)(!1),W=(0,d.Z)(K,2),V=W[0],Y=W[1],Q=(0,I.useState)(!0),$=(0,d.Z)(Q,2),ee=$[0],ne=$[1],re=(0,I.useState)([]),oe=(0,d.Z)(re,2),ie=oe[0],ce=oe[1],ue=(0,I.useState)(!1),se=(0,d.Z)(ue,2),fe=se[0],de=se[1],he=0===_.length?ie:x()(ie).call(ie,(function(e){return!S()(_).call(_,e.key)})),ve=0===he.length&&!V&&!ee&&E;function me(e){!V&&ee&&(Y(!0),i(e||H,void 0,null==a?void 0:a.current).then((function(e){var t=e.list;Y(!1),ne(t.length>0),ce((function(e){var n;return Z()(n=[]).call(n,(0,m.Z)(e),(0,m.Z)(t))})),a&&t.length>0&&a.current++})).catch((function(e){Y(!1),ne(!1)})))}var pe=(0,O.M)({threshold:C||200,loading:V,hasNextPage:ee,forbidListenScroll:fe,onLoadMore:me}).ref,ge="0px 0px ".concat(n||0,"px 0px");return(0,J.Z)((function(){e.request_from===R.yo.IXIGUA_USER_HOME&&(Y(!0),i(H,void 0).then((function(e){var t=e.list;Y(!1),ne(t.length>0),ce((0,m.Z)(t))})).catch((function(e){Y(!1),ne(!1)})))}),[i]),(0,I.useEffect)((function(){ie.length%j>0&&me(j-ie.length%j)}),[ie.length,A]),(0,I.useEffect)((function(){de(!B)}),[B]),ve?I.createElement(E,null):I.createElement(M.ZP,{onChange:function(e,t){e.isIntersecting&&(me(),G(!0),t())},disabled:!o||z,rootMargin:ge},I.createElement("div",{className:"load-more-container",ref:F},I.createElement("div",{className:"load-more-blocklist-wrapper",ref:pe},I.createElement("div",{className:"FeedContainer load-more-blocklist"},le({props:ae(ae({},P),{},{onGarbageClick:L}),data:he,itemCount:j,fetchingCount:H,defaultDataCount:A,renderBlockList:l,hidePlaceholder:k,replaceLoadingWithPlaceholder:w,hasMore:ee})),(!w||!ee)&&I.createElement(T.Z,{text:{more:ee?u:"已经到底部，没有新的内容啦"},hasMore:ee}))))}function ue(e){var t=e.lazyDistance,n=void 0===t?500:t,r=e.isLazyLoad,o=void 0===r||r,a=e.bottomThreshold,i=e.fetchData,l=(e.maxItemCount,e.itemCssKey),c=e.defaultLoadData,u=void 0===c?[]:c,s=e.defaultRowCount,p=void 0===s?1:s,g=e.maxScrollLoadTimes,y=void 0===g?2:g,_=e.rowCountPerFetch,k=void 0===_?3:_,w=e.queryCountRef,C=e.renderBlockList,E=e.moreText,x=void 0===E?"加载更多视频...":E,L=e.onClickLoadButton,S=e.hidePlaceholder,P=void 0!==S&&S,N=e.replaceLoadingWithPlaceholder,D=void 0!==N&&N,R=e.parentCb,B=(0,v.Z)(e,ne),j=(0,I.useState)(!o),A=(0,d.Z)(j,2),H=A[0],q=A[1],U=(0,I.useState)(!1),z=(0,d.Z)(U,2),G=z[0],K=z[1],W=(0,I.useState)(!0),V=(0,d.Z)(W,2),Y=V[0],Q=V[1],J=(0,I.useState)((0,m.Z)(u)),$=(0,d.Z)(J,2),te=$[0],re=$[1],oe=(0,I.useState)(!1),ae=(0,d.Z)(oe,2),ie=ae[0],ce=ae[1],ue=(0,f.Z)(void 0),se=(0,d.Z)(ue,2),fe=se[0],de=se[1],he=X({element:fe.current,cssKey:l}),ve=p*he,me=he*k,pe=te.length/he<p+y*k,ge=(0,I.useState)(!0),be=(0,d.Z)(ge,2),ye=be[0],_e=be[1],ke=(0,I.useRef)({list:[],more:!0}),we=(0,I.useState)(!1),Ce=(0,d.Z)(we,2),Ze=Ce[0],Ee=Ce[1],xe=function(){var e=(0,h.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G&&Y){e.next=2;break}return e.abrupt("return",null);case 2:return K(!0),e.next=5,i(t,void 0,null==w?void 0:w.current).then((function(e){var t=e.list;return K(!1),w&&t.length>0&&w.current++,{list:t,more:t&&t.length>0}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,h.Z)(b().mark((function e(){var t,n=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=12;break}if(!G){e.next=5;break}return Ee(!0),e.abrupt("return");case 5:return ke.current&&ke.current.list&&ke.current.list.length>0&&(_e(!1),re(Z()(t=[]).call(t,(0,m.Z)(te),(0,m.Z)(ke.current.list))),Ee(!1),Q(ke.current.more)),e.next=8,xe(me);case 8:case 14:return ke.current=e.sent,e.abrupt("return");case 12:return e.next=14,xe(me);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=(0,h.Z)(b().mark((function e(t){var n,r,o,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe){e.next=4;break}return e.next=3,Le(t);case 3:return e.abrupt("return");case 4:return e.next=6,xe(me);case 6:r=e.sent,o=r.list,a=r.more,Q(a),re(Z()(n=[]).call(n,(0,m.Z)(te),(0,m.Z)(o)));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=(0,O.M)({threshold:a||200,loading:G,hasNextPage:Y,forbidListenScroll:ie,onLoadMore:Se}).ref,Pe="0px 0px ".concat(n||0,"px 0px");return(0,I.useEffect)((function(){var e=function(){var e=(0,h.Z)(b().mark((function e(){var t,n,r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(te.length%he>0)){e.next=5;break}return e.next=3,xe(he-te.length%he);case 3:(t=e.sent)&&(r=t.list,o=t.more,Q(o),re(Z()(n=[]).call(n,(0,m.Z)(te),(0,m.Z)(r))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[te.length,ve,he]),(0,I.useEffect)((function(){pe||Se(!1),ce(!pe||!de)}),[pe,de]),(0,I.useEffect)((function(){(!Y||Y&&!pe)&&R&&R()}),[Y,pe]),(0,I.useEffect)((function(){G||pe||!Ze||Le(!0)}),[G]),(0,I.useEffect)((function(){ye||_e(!0)}),[ye]),I.createElement(I.Fragment,null,Y||0!==u.length||0!==te.length?I.createElement(M.ZP,{onChange:function(e,t){var n=e.isIntersecting;u&&u.length||n&&(Se(),q(!0),t())},disabled:!o||H,rootMargin:Pe},I.createElement("div",{className:"load-more-container",ref:fe},I.createElement("div",{className:"load-more-blocklist-wrapper",ref:Ie},I.createElement("div",{className:"FeedContainer load-more-blocklist load-more-blocklist-with-button"},le({props:B,data:te,itemCount:he,fetchingCount:me,defaultDataCount:ve,renderBlockList:C,hidePlaceholder:P,replaceLoadingWithPlaceholder:D,hasMore:Y,scrollLoadable:pe})),Y&&pe&&!D&&I.createElement(T.Z,{text:{more:x},hasMore:Y}),ye&&Y&&!pe&&I.createElement("button",{className:"load-more-blocklist-button color-link-content-secondary",onClick:function(e){Ze||(e.stopPropagation(),null==L||L(),Se(!0))}},Ze?I.createElement(F.yg,{classname:"load-more-blocklist-button__loading"}):I.createElement(I.Fragment,null,I.createElement("span",null,"查看更多"),I.createElement(ee,null)))))):I.createElement(I.Fragment,null))}function se(e){var t=e.EmptyComponent,n=e.fetchData,r=(e.maxItemCount,e.itemCssKey),o=e.defaultRowCount,a=void 0===o?1:o,i=e.rowCountPerFetch,l=void 0===i?3:i,c=e.queryCountRef,u=e.bottomThreshold,s=e.renderBlockList,h=e.moreText,p=void 0===h?"加载更多视频...":h,g=e.type,b=e.onGarbageClick,y=e.deletedId,_=void 0===y?[]:y,k=(e.resetDeps,(0,v.Z)(e,re)),C=(0,I.useState)(!1),E=(0,d.Z)(C,2),L=E[0],P=E[1],N=(0,I.useState)(!0),D=(0,d.Z)(N,2),M=D[0],F=D[1],B=(0,I.useState)([]),j=(0,d.Z)(B,2),A=j[0],H=j[1],q=(0,I.useState)(!1),U=(0,d.Z)(q,2),z=U[0],G=U[1],K=(0,f.Z)(void 0),W=(0,d.Z)(K,2),V=W[0],Y=W[1],Q=X({element:V.current,cssKey:r}),$=a*Q,ee=0===_.length?A:x()(A).call(A,(function(e){return!S()(_).call(_,e.key)})),te=Q*l-ee.length%Q,ne=0===ee.length&&!L&&!M&&t;var oe,ie,ce=(0,O.M)({threshold:u||200,loading:L,hasNextPage:M,forbidListenScroll:z,onLoadMore:function(){P(!0),n(te,void 0,null==c?void 0:c.current).then((function(e){var t=e.list;P(!1),F(t.length>0),H((function(e){var n;return Z()(n=[]).call(n,(0,m.Z)(e),(0,m.Z)(t))})),c&&t.length>0&&c.current++})).catch((function(e){P(!1),F(!1)}))}}),ue=ce.ref,se=(0,I.useMemo)(pe,[]);return(0,J.Z)((function(){e.request_from===R.yo.IXIGUA_USER_HOME&&(P(!0),n(te,void 0).then((function(e){var t=e.list;P(!1),F(t.length>0),H((0,m.Z)(t))})).catch((function(e){P(!1),F(!1)})))}),[n]),(0,I.useEffect)((function(){G(!Y)}),[Y]),ne?I.createElement(t,null):I.createElement("div",{className:"load-more-container",ref:V},I.createElement("div",{className:"load-more-blocklist-wrapper",ref:ue},I.createElement("div",{className:"FeedContainer load-more-blocklist load-more-blocklist-with-timeline"},(oe={props:k,itemCount:Q,fetchingCount:te,defaultDataCount:$,renderBlockList:s,hasMore:M,data:ee},ie=[],se.forEach((function(e){ie.push({timeInfo:e,data:[]})})),oe.data.forEach((function(e){var t=0;"MyAttention"===g&&(t=Number(e.data.publish_time)),"MyWatchHistory"===g&&(t=Number(e.maxTime)),304===e.cellType&&(t=Number(e.data.time_now)),ie.forEach((function(n){t>n.timeInfo.startTime&&t<n.timeInfo.endTime&&(0===_.length||!S()(_).call(_,e.key))&&n.data.push(e)}))})),w()(ie).call(ie,(function(e){if(0===e.data.length)return null;var t=e.timeInfo.title;return le({props:ae(ae({},k),{},{title:t,onGarbageClick:b,anchorQuery:ae(ae({},k.anchorQuery),{},{block_title:t}),blockInfo:{block_id:"",block_title:t,block_name:""}}),fetchingCount:0,itemCount:Q,defaultDataCount:0,renderBlockList:s,data:e.data,hasMore:M})})))),I.createElement(T.Z,{text:{more:M?p:"已经到底部，没有新的内容啦"},hasMore:M})))}var fe=n(94184),de=n.n(fe),he=["isLazy","needLoadMore","queryCountRef","fetchData","maxItemCount","defaultRowCount","rowCountPerFetch","defaultLoadData","renderBlockList","moreText","EmptyComponent","onGarbageClick","deletedId","resetDeps","hidePlaceholder","itemCssKey"];function ve(e,t){var n=o()(e);if(i()){var r=i()(e);t&&(r=x()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var pe=function(){for(var e=N()(),t=e.startOf("day").unix(),n=86400,r=function(t){var n=N().unix(t);return 0===e.diff(n,"day")?"今天":1===e.diff(n,"day")?"昨天":2===e.diff(n,"day")?"前天":e.diff(n,"day")>=3?0===e.diff(n,"year")?n.format("MM月DD日"):n.format("YYYY年MM月DD日"):""},o=[],a=0;a<7;a++){var i={startTime:t-n*a,endTime:t+n-n*a,title:r(t-n*a)};o.push(i)}return o.push({startTime:0,endTime:o[o.length-1].startTime,title:"更早"}),o},ge=function(e){var t;return _()(t=new Array(e)).call(t,1)},be=function(e){var t,n,r=e.props,o=e.defaultDataCount,a=e.fetchingCount,i=e.renderBlockList,l=e.data,c=e.hidePlaceholder,u=e.hasMore,s=me(me({},r),{},{noSlice:!0,useDefaultData:!0,className:r.className?"".concat(r.className," loadmoreChannelBlocklist"):"loadmoreChannelBlocklist"}),f=l.length;if(0===f&&!u)return I.createElement("div",{className:"FeedContainer channelBlocklist"},I.createElement(D.Z,s));if(0===f&&o){var d,h=w()(d=ge(o)).call(d,(function(e,t){return{loading:!0}}));return i(me(me({},s),{},{defaultData:{list:h}}),0)}var v=c?[]:w()(t=ge(a)).call(t,(function(e,t){return{loading:!0}})),p=Z()(n=[]).call(n,(0,m.Z)(l),(0,m.Z)(v));return i(me(me({},s),{},{defaultData:{list:p}}),0)};var ye=function(e){var t,n=e.isLazy,r=void 0===n||n,o=e.needLoadMore,a=void 0===o||o,i=e.queryCountRef,l=e.fetchData,c=(e.maxItemCount,e.defaultRowCount),u=void 0===c?1:c,s=e.rowCountPerFetch,p=void 0===s?3:s,g=e.defaultLoadData,y=void 0===g?[]:g,_=e.renderBlockList,k=e.moreText,w=void 0===k?"加载更多视频...":k,C=e.EmptyComponent,E=e.onGarbageClick,L=e.deletedId,P=void 0===L?[]:L,N=e.resetDeps,D=e.hidePlaceholder,M=e.itemCssKey,O=(0,v.Z)(e,he),F=function(){var e=(0,h.Z)(b().mark((function e(t){var n,r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,void 0,null==i?void 0:i.current);case 2:return n=e.sent,r=n.list,o=n.hasMore,i&&(o||r.length>0)&&i.current++,e.abrupt("return",{data:r,hasMore:o||r.length>0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=(0,I.useRef)(null),B=X({element:R.current,cssKey:M}),j=u*B,A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,I.useRef)({isFetching:!1,hasMore:!0}),r=(0,I.useState)({isFetching:!1,fetchingCount:0,hasMore:!0,data:[]}),o=(0,d.Z)(r,2),a=o[0],i=o[1],l=a.isFetching,c=a.fetchingCount,u=a.hasMore,s=a.data;(0,I.useEffect)((function(){n.current={isFetching:!1,hasMore:!0},i((function(e){return G(G({},e),{},{isFetching:!1,fetchingCount:0,hasMore:!0,data:[]})}))}),t);var f=(0,I.useCallback)(function(){var t=(0,h.Z)(b().mark((function t(r){var o;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.current.isFetching&&n.current.hasMore){t.next=2;break}return t.abrupt("return");case 2:return i((function(e){return G(G({},e),{},{isFetching:!0,fetchingCount:r})})),n.current.isFetching=!0,t.next=6,e(r);case 6:if(o=t.sent,n.current.isFetching){t.next=9;break}return t.abrupt("return");case 9:n.current={isFetching:!1,hasMore:o.hasMore},i((function(e){var t;return G(G({},e),{},{isFetching:!1,fetchingCount:0,hasMore:o.hasMore,data:Z()(t=e.data).call(t,o.data)})}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return[l,u,s,f,c]}(F,N),H=(0,d.Z)(A,5),q=H[0],U=H[1],z=H[2],K=H[3],W=H[4],V=Z()(t=[]).call(t,(0,m.Z)(y),(0,m.Z)(z)),Y=0===P.length?V:x()(V).call(V,(function(e){return!S()(P).call(P,e.key)})),Q=0===Y.length&&!q&&!U&&C,J=(0,f.Z)(void 0,void 0,[Q]),$=(0,d.Z)(J,2),ee=$[0],te=$[1],ne=(0,f.Z)(void 0,void 0,[Q]),re=(0,d.Z)(ne,2),oe=re[0],ae=re[1],ie=V.length;return(0,I.useEffect)((function(){!te&&r||(0===ie&&j?K(j-ie):V.length%B!=0?K(B-V.length%B):ae&&K(B*p))}),[te,ae,ie,j,B]),Q?I.createElement(C,null):I.createElement("div",{className:"load-more-blocklist-wrapper",ref:R},I.createElement("div",{className:"FeedContainer load-more-blocklist",ref:ee},be({props:me(me({},O),{},{onGarbageClick:E}),itemCount:B,fetchingCount:W,defaultDataCount:j,renderBlockList:_,data:Y,hidePlaceholder:D,hasMore:U})),a&&I.createElement("div",{ref:oe,className:de()("load-more-blocklist-mark",{"three-line":3===p})}),a&&I.createElement(T.Z,{text:{more:U?w:"已经到底部，没有新的内容啦"},hasMore:U}))}},65876:function(e,t,n){"use strict";n.d(t,{Z3:function(){return E},kg:function(){return L},DA:function(){return S},Y0:function(){return I},C8:function(){return C},ir:function(){return P}});n(41539),n(54747);var r=n(44845),o=n(33938),a=(n(9653),n(63109)),i=n.n(a),l=n(2991),c=n.n(l),u=n(86902),s=n.n(u),f=n(14310),d=n.n(f),h=n(20116),v=n.n(h),m=n(34074),p=n.n(m),g=n(39649),b=n.n(g),y=n(72169),_=n(44999);function k(e,t){var n=s()(e);if(d()){var r=d()(e);t&&(r=v()(r).call(r,(function(t){return p()(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):b()?Object.defineProperties(e,b()(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,p()(n,t))}))}return e}var C,Z=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o,a,l,u,s,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channelId,r=t.offset,o=void 0===r?0:r,a=t.limit,l=void 0===a?6:a,u=t.request_from,s=t.queryCount,f=y.Z.cinemaFeed.getFeedById,e.abrupt("return",f({channelId:n,offset:o,limit:l,request_from:u,queryCount:s}).then((function(e){var t,n={channelInfo:e.data.data.channelInfo,channelFeedData:e.data.data.channelFeed.Data,channelFeedBlockList:e.data.data.channelFeed.BlockList};return{list:c()(t=n.channelFeedData).call(t,(function(e){return w(w({},e),{},{key:e.episodeId||e.albumId})})),blockList:n.channelFeedBlockList,channelInfo:n.channelInfo}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){return function(){var n=(0,o.Z)(i().mark((function n(r,o,a){var l,c,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=0,void 0!==o&&(c=o.list).length>0&&(u=Number(c[c.length-1].offset),isNaN(u)||(l=u)),n.abrupt("return",Z({channelId:e,offset:l,limit:r,request_from:t,queryCount:a}));case 3:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},x=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o,a,l,c,u,s,f,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channelId,r=t.maxTime,o=void 0===r?0:r,a=t.limit,l=void 0===a?5:a,c=t.request_from,u=t.channelType,s=t.queryCount,f=t.offset,d=void 0===f?0:f,e.abrupt("return",y.Z.feed.getFeedById({channelId:n,count:l,maxTime:o,request_from:c,channelType:u,queryCount:s,offset:d}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t,n){var r=0;return function(){var a=(0,o.Z)(i().mark((function o(a,l,c){var u;return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u="0",l&&l.list.length>0&&(u=l.list[l.list.length-1].maxTime),o.abrupt("return",x({channelId:e,maxTime:u,limit:a,request_from:t,channelType:n,queryCount:c,offset:r}).then((function(e){var t;if(200===e.data.code)return r=null===(t=e.data.data.channelFeed)||void 0===t?void 0:t.Offset,{list:e.data.data.channelFeed.Data};throw new Error("通用feed接口错误")})));case 3:case"end":return o.stop()}}),o)})));return function(e,t,n){return a.apply(this,arguments)}}()},S=function(e){return function(){var t=(0,o.Z)(i().mark((function t(n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=String(Math.floor(Date.now()/1e3)),r&&r.list.length>0&&(o=String(Number(r.list[r.list.length-1].maxTime)-1)),t.abrupt("return",y.Z.video.getHistory({maxTime:o,type:e,count:n}).then((function(e){if(200===e.data.code)return{list:e.data.data.channelFeed.Data};throw new Error("history feed接口错误")})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=(0,o.Z)(i().mark((function t(n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=String(Math.floor(Date.now()/1e3)),r&&r.list.length>0&&(o=String(Number(r.list[r.list.length-1].maxTime)-1)),t.abrupt("return",y.Z.video.getFavorite({maxTime:o,type:e,count:n}).then((function(e){if(200===e.data.code)return{list:e.data.data.channelFeed.Data};throw new Error("history feed接口错误")})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};!function(e){e[e.ALBUM=1]="ALBUM",e[e.EPISODE=2]="EPISODE",e[e.IMAGE=3]="IMAGE",e[e.SHORT_VIDEO=4]="SHORT_VIDEO"}(C||(C={}));var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.operationType)switch(e.operationType){case C.IMAGE:return{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(e.url,null,{logType:"js.href/src",mode:"black",reportOnly:!1})};case C.ALBUM:case C.EPISODE:return(0,_.sb)({albumId:e.albumId,episodeId:e.episodeId,query:w({logPb:e.logPb},t)});case C.SHORT_VIDEO:var n=void 0!==e.pseries;return(0,_.ZF)({gid:e.group_id,pSeriresId:n?e.pseries.id:void 0,query:w({logPb:e.log_pb},t)})}return(0,_.sb)({albumId:e.albumId,episodeId:e.episodeId,query:w({logPb:e.logPb},t)})}},65050:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(59056),o=n(67294),a=n(79112),i=n(9361);function l(e){var t=e.hasMore,n=void 0===t||t,l=e.text,c=l&&l.end?l.end:"没有更多内容了",u=o.useState(!1),s=(0,r.Z)(u,2),f=s[0],d=s[1];return n?o.createElement(i.ZP,{onChange:function(e){e.isIntersecting?d(!0):d(!1)}},o.createElement("div",{className:"Feed-footer"},o.createElement(a.W_,{isActive:f}))):o.createElement("div",{className:"Feed-footer"},c)}},74391:function(e,t,n){"use strict";n.d(t,{M:function(){return u}});var r=n(59056),o=n(67294),a=n(19623);var i=function(){var e="object"===("undefined"==typeof window?"undefined":(0,a.Z)(window)),t=(0,o.useCallback)((function(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}),[e]),n=(0,o.useState)(t()),i=(0,r.Z)(n,2),l=i[0],c=i[1];return(0,o.useEffect)((function(){function n(){c(t())}if(e)return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[t,e]),l};var l=function(e,t){var n=(0,o.useRef)(null);(0,o.useEffect)((function(){n.current=e}),[e]),(0,o.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},c="parent";var u=function(e){var t=e.loading,n=e.hasNextPage,a=e.forbidListenScroll,u=void 0!==a&&a,s=e.onLoadMore,f=e.threshold,d=void 0===f?150:f,h=e.checkInterval,v=void 0===h?200:h,m=e.scrollContainer,p=void 0===m?"window":m,g=(0,o.useRef)(null),b=i(),y=b.height,_=void 0===y?0:y,k=b.width,w=void 0===k?0:k,C=(0,o.useState)(!0),Z=(0,r.Z)(C,2),E=Z[0],x=Z[1];function L(){var e=g.current.parentNode.getBoundingClientRect();return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}function S(){if(E&&!t&&n&&g.current&&g.current.clientHeight>0){if(p===c&&!function(){if(g.current&&g.current.parentNode){var e=L(),t=e.left,n=e.right,r=e.top,o=e.bottom;if(t>w)return!1;if(n<0)return!1;if(r>_)return!1;if(o<0)return!1}return!0}())return;(function(){var e=g.current.getBoundingClientRect().bottom,t=e-_;return p===c&&(t=e-L().bottom),t})()<d&&(x(!1),s())}}return(0,o.useEffect)((function(){t||x(!0)}),[t]),l((function(){S()}),!n||u?0:v),{ref:g}}},25047:function(e,t,n){"use strict";n(54747);var r=n(86902),o=n.n(r),a=n(14310),i=n.n(a),l=n(20116),c=n.n(l),u=n(34074),s=n.n(u),f=n(39649),d=n.n(f),h=n(44845),v=n(93476),m=n.n(v),p=(n(41539),n(88674),n(17727),n(67294)),g=n(8306),b=n(64138);function y(e,t){var n=o()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):d()?Object.defineProperties(e,d()(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,s()(n,t))}))}return e}t.Z=function(e){e||(e={});var t=e,n=t.defaultConfig,r=t.config;t.sideDefaultShortBorder;r||(r={});var o=r,a=o.header,i=o.side,l=o.className,c=o.loading,u=o.headerTheme,s=o.headerSkin,f=o.transitionRange,d=o.isFixedButtonShow,h=o.withShadow,v=(0,p.useContext)(g.ZP),y=v.setHeaderHidden,k=v.setHeaderNormal,w=v.setHeaderTheme,C=v.setHeaderSkin,Z=v.setTransitionRange,E=v.setSideHidden,x=v.setSideNomal,L=v.setSideShort,S=v.setClassName,I=v.setFixedButton,P=v.setWithShadow,N=v.setLoading,T=v.isUserSetShortSide,D=function(e){null!=e&&(e===g.MS.Normal&&k(),e===g.MS.Hidden&&y())},M=(0,p.useCallback)((function(e){null!=e&&(e===g.MS.Hidden&&E(),e===g.MS.Normal&&x(),e===g.MS.Short&&L(),"dynamic"===e&&x())}),[T,E,x,L,i]);(0,b.Z)((function(){var e;"dynamic"!==(null==n?void 0:n.side)&&"dynamic"!==(null===(e=r)||void 0===e?void 0:e.side)||M("dynamic")}),[]),(0,p.useLayoutEffect)((function(){if(n||r){var e=_(_({},n),r),t=e.header,o=e.side,a=e.className,i=e.headerTheme,l=e.headerSkin,c=e.transitionRange,u=e.isFixedButtonShow,s=e.withShadow,f=void 0===s||s;null!=t&&D(t),null!=o&&M(o),null!=a&&S(a),null!=i&&w(i),null!=l&&C(l),null!=c&&Z(c),null!=u&&I(u),null!==f&&P(f)}return function(){g.it.Dark&&w(g.it.Default),S("")}}),[]),(0,b.Z)((function(){a&&D(a)}),[a]),(0,b.Z)((function(){u&&w(u)}),[u]),(0,b.Z)((function(){s&&C(s)}),[s]),(0,b.Z)((function(){f&&Z(f)}),[f]),(0,b.Z)((function(){i&&M(i)}),[i]),(0,b.Z)((function(){null!=l&&S(l)}),[l]),(0,b.Z)((function(){null!=c&&N(c)}),[c]),(0,b.Z)((function(){I(d)}),[d]),(0,b.Z)((function(){P(h)}),[h]);var O=(0,p.useRef)(null);return _(_({},v),{},{setSide:M,setLoadingEvent:function(e){if(null!=e){N(!0);var t=!1;return null!=O.current&&O.current(),O.current=function(){t=!0},m().resolve(e).finally((function(){t||N(!1)}))}}})}},25413:function(e,t,n){"use strict";function r(e){var t=e.room_id,n=e.uid,r="//live.ixigua.com/";return t&&+t>0?r="//live.ixigua.com/room/".concat(t,"/"):n&&+n>0&&(r="//live.ixigua.com/userlive/".concat(n,"/")),r}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=https://sourcemap.ixigua.com/obj/xigua-video-web-pc-sourcemap/xgpc/sourcemap/js/2261.a3466bddc0.chunk.js.map