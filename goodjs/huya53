!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Taf=e()}(this,function(){"use strict";var f={Wup:function(){this.iVersion=3,this.cPacketType=0,this.iMessageType=0,this.iRequestId=0,this.sServantName="",this.sFuncName="",this.sBuffer=new f.BinBuffer,this.iTimeout=0,this.context=new f.Map(new f.STRING,new f.STRING),this.status=new f.Map(new f.STRING,new f.STRING),this.data=new f.Map(new f.STRING,new f.Map(new f.STRING,new f.BinBuffer)),this.newdata=new f.Map(new f.STRING,new f.BinBuffer)}};f.Wup.prototype.setVersion=function(t){this.iVersion=t},f.Wup.prototype.getVersion=function(t){return this.iVersion},f.Wup.prototype.setServant=function(t){this.sServantName=t},f.Wup.prototype.setFunc=function(t){this.sFuncName=t},f.Wup.prototype.setRequestId=function(t){this.iRequestId=t||++this.iRequestId},f.Wup.prototype.getRequestId=function(){return this.iRequestId},f.Wup.prototype.setTimeOut=function(t){this.iTimeout=t},f.Wup.prototype.getTimeOut=function(){return this.iTimeout},f.Wup.prototype.writeTo=function(){var t=new f.JceOutputStream;return t.writeInt16(1,this.iVersion),t.writeInt8(2,this.cPacketType),t.writeInt32(3,this.iMessageType),t.writeInt32(4,this.iRequestId),t.writeString(5,this.sServantName),t.writeString(6,this.sFuncName),t.writeBytes(7,this.sBuffer),t.writeInt32(8,this.iTimeout),t.writeMap(9,this.context),t.writeMap(10,this.status),new f.BinBuffer(t.getBuffer())},f.Wup.prototype.encode=function(){var t=new f.JceOutputStream;3==this.iVersion?t.writeMap(0,this.newdata):t.writeMap(0,this.data),this.sBuffer=t.getBinBuffer();var e=new f.BinBuffer;e=this.writeTo();var r=new f.BinBuffer;return r.writeInt32(4+e.len),r.writeBytes(e),r},f.Wup.prototype.writeBoolean=function(t,e){var r=new f.JceOutputStream;if(r.writeBoolean(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.BOOLEAN;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new f.BinBuffer(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeInt8=function(t,e){var r=new f.JceOutputStream;if(r.writeInt8(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.CHAR;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new f.BinBuffer(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeInt16=function(t,e){var r=new f.JceOutputStream;if(r.writeInt16(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.SHORT;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeInt32=function(t,e){var r=new f.JceOutputStream;if(r.writeInt32(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.INT32;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeInt64=function(t,e){var r=new f.JceOutputStream;if(r.writeInt64(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.INT64;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeFloat=function(t,e){var r=new f.JceOutputStream;if(r.writeFloat(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.FLOAT;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeDouble=function(t,e){var r=new f.JceOutputStream;if(r.writeDouble(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=TAF.TypeHelp.DOUBLE;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeString=function(t,e){var r=new f.JceOutputStream;if(r.writeString(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=f.TypeHelp.STRING;if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeVector=function(t,e){var r=new f.JceOutputStream;if(r.writeVector(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBinBuffer()));else{var i=this.data.get(t),n=e._className();if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeStruct=function(t,e){var r=new f.JceOutputStream;if(r.writeStruct(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t);if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(" ",new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeBytes=function(t,e){var r=new f.JceOutputStream;if(r.writeBytes(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t);if(null==i)i=new f.Map(f.STRING,f.STRING);i.put("vec",new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.writeMap=function(t,e){var r=new f.JceOutputStream;if(r.writeMap(0,e),3==this.iVersion)this.newdata.put(t,new f.BinBuffer(r.getBuffer()));else{var i=this.data.get(t),n=f.Util.getClassType(e);if(null==i)i=new f.Map(f.STRING,f.STRING);i.put(n,new Uint8Array(r.getBuffer())),this.data.put(t,i)}},f.Wup.prototype.readFrom=function(t){this.iVersion=t.readInt16(1,!0),this.cPacketType=t.readInt8(2,!0),this.iMessageType=t.readInt32(3,!0),this.iRequestId=t.readInt32(4,!0),this.sServantName=t.readString(5,!0),this.sFuncName=t.readString(6,!0),localStorage.__wup&&console.info("%c@@@ "+this.sServantName+"."+this.sFuncName,"color:white;background:black;",this),this.sBuffer=t.readBytes(7,!0),this.iTimeout=t.readInt32(8,!0),this.context=t.readMap(9,!0,new f.Map(new f.STRING,new f.STRING)),this.status=t.readMap(10,!0,new f.Map(new f.STRING,new f.STRING))},f.Wup.prototype.decode=function(t){var e=new f.JceInputStream(t);if(e.buf.vew.getInt32(e.buf.position)<4)throw Error("packet length too short");e.buf.position+=4,this.readFrom(e),e=new f.JceInputStream(this.sBuffer.getBuffer()),3==this.iVersion?(this.newdata.clear(),e.readMap(0,!0,this.newdata)):(this.data.clear(),e.readMap(0,!0,this.data))},f.Wup.prototype.readBoolean=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=new f.JceInputStream(e.buffer).readBoolean(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.BOOLEAN,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n).readBoolean(0,!0,r)}return r},f.Wup.prototype.readInt8=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=new f.JceInputStream(e.buffer).readInt8(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.CHAR,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n).readInt8(0,!0,r)}return r},f.Wup.prototype.readInt16=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=(o=new f.JceInputStream(e.buffer)).readInt16(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.SHORT,n=e.get(i),o=new f.JceInputStream(n);if(null==n)throw Error("UniAttribute not found type:"+i);r=o.readInt16(0,!0,r)}return r},f.Wup.prototype.readInt32=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=new f.JceInputStream(e.buffer).readInt32(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.INT32,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n).readInt32(0,!0,r)}return r},f.Wup.prototype.readInt64=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=new f.JceInputStream(e.buffer).readInt64(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.INT64,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n).readInt64(0,!0,r)}return r},f.Wup.prototype.readFloat=function(t){var e,r;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);r=new f.JceInputStream(e.buffer).readFloat(0,!0,r)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.FLOAT,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n).readFloat(0,!0,r)}return r},f.Wup.prototype.readDouble=function(t){var e;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);var r=new f.JceInputStream(e.buffer);def=r.readDouble(0,!0,def)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var i=f.TypeHelp.DOUBLE,n=e.get(i);if(null==n)throw Error("UniAttribute not found type:"+i);r=new f.JceInputStream(n);def=r.readDouble(0,!0,def)}return def},f.Wup.prototype.readVector=function(t,e,r){var i;if(3==this.iVersion){if(null==(i=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new f.JceInputStream(i.buffer).readVector(0,!0,e)}else{if(null==(i=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=i.get(r);if(null==n)throw Error("UniAttribute not found type:"+r);e=new f.JceInputStream(n).readVector(0,!0,e)}return e},f.Wup.prototype.readStruct=function(t,e,r){var i;if(3==this.iVersion){if(null==(i=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new f.JceInputStream(i.buffer).readStruct(0,!0,e)}else{if(null==(i=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=i.get(r);if(null==n)throw Error("UniAttribute not found type:"+r);e=new f.JceInputStream(n).readStruct(0,!0,e)}return e},f.Wup.prototype.readMap=function(t,e,r){var i;if(3==this.iVersion){if(null==(i=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new f.JceInputStream(i.buffer).readMap(0,!0,e)}else{if(null==(i=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=i.get(r);if(null==n)throw Error("UniAttribute not found type:"+r);e=new f.JceInputStream(n).readMap(0,!0,e)}return e},f.Wup.prototype.readBytes=function(t,e,r){var i;if(3==this.iVersion){if(null==(i=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new f.JceInputStream(i.buffer).readBytes(0,!0,e)}else{if(null==(i=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=i.get(r);if(null==n)throw Error("UniAttribute not found type:"+r);e=new f.JceInputStream(n).readBytes(0,!0,e)}return e},f.DataHelp={EN_INT8:0,EN_INT16:1,EN_INT32:2,EN_INT64:3,EN_FLOAT:4,EN_DOUBLE:5,EN_STRING1:6,EN_STRING4:7,EN_MAP:8,EN_LIST:9,EN_STRUCTBEGIN:10,EN_STRUCTEND:11,EN_ZERO:12,EN_SIMPLELIST:13},f.TypeHelp={BOOLEAN:"bool",CHAR:"char",SHORT:"short",INT32:"int32",INT64:"int64",FLOAT:"float",DOUBLE:"double",STRING:"string",VECTOR:"list<$t>",MAP:"map<$k, $v>"},f.BinBuffer=function(t){this.buf=null,this.vew=null,this.len=0,this.position=0,null!=t&&null!=t&&t instanceof f.BinBuffer&&(this.buf=t.buf,this.vew=new DataView(this.buf),this.len=t.length,this.position=t.position),null!=t&&null!=t&&t instanceof ArrayBuffer&&(this.buf=t,this.vew=new DataView(this.buf),this.len=this.vew.byteLength,this.position=0),this.__defineGetter__("length",function(){return this.len}),this.__defineGetter__("buffer",function(){return this.buf})},f.BinBuffer.prototype._write=function(t,e,r){return t.writeBytes(e,r)},f.BinBuffer.prototype._read=function(t,e,r){return t.readBytes(e,!0,r)},f.BinBuffer.prototype._clone=function(){return new f.BinBuffer},f.BinBuffer.prototype.allocate=function(t){if(t=this.position+t,!(null!=this.buf&&this.buf.length>t)){var e=new ArrayBuffer(Math.max(256,2*t));null!=this.buf&&(new Uint8Array(e).set(new Uint8Array(this.buf)),this.buf=void 0),this.buf=e,this.vew=void 0,this.vew=new DataView(this.buf)}},f.BinBuffer.prototype.getBuffer=function(){var t=new ArrayBuffer(this.len);return new Uint8Array(t).set(new Uint8Array(this.buf,0,this.len)),t},f.BinBuffer.prototype.memset=function(t,e,r){this.allocate(r),new Uint8Array(this.buf).set(new Uint8Array(t,e,r),this.position)},f.BinBuffer.prototype.writeInt8=function(t){this.allocate(1),this.vew.setInt8(this.position,t),this.position+=1,this.len=this.position},f.BinBuffer.prototype.writeUInt8=function(t){this.allocate(1),this.vew.setUint8(this.position++,t),this.len=this.position},f.BinBuffer.prototype.writeInt16=function(t){this.allocate(2),this.vew.setInt16(this.position,t),this.position+=2,this.len=this.position},f.BinBuffer.prototype.writeUInt16=function(t){this.allocate(2),this.vew.setUint16(this.position,t),this.position+=2,this.len=this.position},f.BinBuffer.prototype.writeInt32=function(t){this.allocate(4),this.vew.setInt32(this.position,t),this.position+=4,this.len=this.position},f.BinBuffer.prototype.writeUInt32=function(t){this.allocate(4),this.vew.setUint32(this.position,t),this.position+=4,this.len=this.position},f.BinBuffer.prototype.writeInt64=function(t){if("string"==typeof t){this.allocate(8),t=t.toLowerCase();for(var e=4294967296,r=0,i=0,n=0;n<t.length;n++){var o=t.charCodeAt(n)-48;9<o&&(o-=39),r=10*r+o,i=10*i+Math.floor(r/e),r%=e}return this.vew.setUint32(this.position,i),this.vew.setUint32(this.position+4,r),this.position+=8,void(this.len=this.position)}this.allocate(8),this.vew.setUint32(this.position,parseInt(t/4294967296)),this.vew.setUint32(this.position+4,t%4294967296),this.position+=8,this.len=this.position},f.BinBuffer.prototype.writeFloat=function(t){this.allocate(4),this.vew.setFloat32(this.position,t),this.position+=4,this.len=this.position},f.BinBuffer.prototype.writeDouble=function(t){this.allocate(8),this.vew.setFloat64(this.position,t),this.position+=8,this.len=this.position},f.BinBuffer.prototype.writeString=function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));this.allocate(e.length),new Uint8Array(this.buf).set(new Uint8Array(e),this.position),this.position+=e.length,this.len=this.position},f.BinBuffer.prototype.writeBytes=function(t){0!=t.length&&null!=t.buf&&(this.allocate(t.length),new Uint8Array(this.buf).set(new Uint8Array(t.buf,0,t.length),this.position),this.position+=t.length,this.len=this.position)},f.BinBuffer.prototype.readInt8=function(){return this.vew.getInt8(this.position++)},f.BinBuffer.prototype.readInt16=function(){return this.position+=2,this.vew.getInt16(this.position-2)},f.BinBuffer.prototype.readInt32=function(){return this.position+=4,this.vew.getInt32(this.position-4)},f.BinBuffer.prototype.readUInt8=function(){return this.position+=1,this.vew.getUint8(this.position-1)},f.BinBuffer.prototype.readUInt16=function(){return this.position+=2,this.vew.getUint16(this.position-2)},f.BinBuffer.prototype.readUInt32=function(){return this.position+=4,this.vew.getUint32(this.position-4)};var s=Math.pow(2,53);function r(t){var e="";"function"==typeof t?e=(new t)._className():e=t._className();return e}return f.BinBuffer.prototype.readInt64=function(){var t=this.vew.getUint32(this.position),e=this.vew.getUint32(this.position+4);this.position+=8;var r=4294967296*t+e;if(r<s)return r;for(var i,n,o,a="",u=Math.pow(2,32);0!=t||0!=e;)a=(n=(o=(i=t%10)*u+e)%10).toString(10)+a,t=(t-i)/10,e=(o-n)/10;return a},f.BinBuffer.prototype.readFloat=function(){var t=this.vew.getFloat32(this.position);return this.position+=4,t},f.BinBuffer.prototype.readDouble=function(){var t=this.vew.getFloat64(this.position);return this.position+=8,t},f.BinBuffer.prototype.readString=function(t){for(var e=[],r=0;r<t;r++)e.push(String.fromCharCode(this.vew.getUint8(this.position++)));var i=e.join("");try{i=decodeURIComponent(escape(i))}catch(t){}return i},f.BinBuffer.prototype.readBytes=function(t){var e=new f.BinBuffer;return e.allocate(t),e.memset(this.buf,this.position,t),e.position=0,e.len=t,this.position=this.position+t,e},f.JceOutputStream=function(){this.buf=new f.BinBuffer,this.getBinBuffer=function(){return this.buf},this.getBuffer=function(){return this.buf.getBuffer()}},f.JceOutputStream.prototype.writeTo=function(t,e){t<15?this.buf.writeUInt8(t<<4&240|e):this.buf.writeUInt16((240|e)<<8|t)},f.JceOutputStream.prototype.writeBoolean=function(t,e){this.writeInt8(t,1==e?1:0)},f.JceOutputStream.prototype.writeInt8=function(t,e){0==e?this.writeTo(t,f.DataHelp.EN_ZERO):(this.writeTo(t,f.DataHelp.EN_INT8),this.buf.writeInt8(e))},f.JceOutputStream.prototype.writeInt16=function(t,e){-128<=e&&e<=127?this.writeInt8(t,e):(this.writeTo(t,f.DataHelp.EN_INT16),this.buf.writeInt16(e))},f.JceOutputStream.prototype.writeInt32=function(t,e){-32768<=e&&e<=32767?this.writeInt16(t,e):(this.writeTo(t,f.DataHelp.EN_INT32),this.buf.writeInt32(e))},f.JceOutputStream.prototype.writeInt64=function(t,e){-2147483648<=e&&e<=2147483647?this.writeInt32(t,e):(this.writeTo(t,f.DataHelp.EN_INT64),this.buf.writeInt64(e))},f.JceOutputStream.prototype.writeUInt8=function(t,e){this.writeInt16(t,e)},f.JceOutputStream.prototype.writeUInt16=function(t,e){this.writeInt32(t,e)},f.JceOutputStream.prototype.writeUInt32=function(t,e){this.writeInt64(t,e)},f.JceOutputStream.prototype.writeFloat=function(t,e){0==e?this.writeTo(t,f.DataHelp.EN_ZERO):(this.writeTo(t,f.DataHelp.EN_FLOAT),this.buf.writeFloat(e))},f.JceOutputStream.prototype.writeDouble=function(t,e){0==e?this.writeTo(t,f.DataHelp.EN_ZERO):(this.writeTo(t,f.DataHelp.EN_DOUBLE),this.buf.writeDouble(e))},f.JceOutputStream.prototype.writeStruct=function(t,e){if(null==e.writeTo)throw Error("not defined writeTo Function");this.writeTo(t,f.DataHelp.EN_STRUCTBEGIN),e.writeTo(this),this.writeTo(0,f.DataHelp.EN_STRUCTEND)},f.JceOutputStream.prototype.writeString=function(t,e){var r=e;try{r=unescape(encodeURIComponent(r))}catch(t){}255<r.length?(this.writeTo(t,f.DataHelp.EN_STRING4),this.buf.writeUInt32(r.length)):(this.writeTo(t,f.DataHelp.EN_STRING1),this.buf.writeUInt8(r.length)),this.buf.writeString(r)},f.JceOutputStream.prototype.writeBytes=function(t,e){this.writeTo(t,f.DataHelp.EN_SIMPLELIST),this.writeTo(0,f.DataHelp.EN_INT8),this.writeInt32(0,e.length),this.buf.writeBytes(e)},f.JceOutputStream.prototype.writeVector=function(t,e){var r=e.value.length;this.writeTo(t,f.DataHelp.EN_LIST),this.writeInt32(0,r);for(var i=0;i<r;i++){("function"==typeof e.proto?new e.proto:e.proto)._write(this,0,e.value[i])}},f.JceOutputStream.prototype.writeMap=function(t,e){for(var r in this.writeTo(t,f.DataHelp.EN_MAP),this.writeInt32(0,e.size()),e.value){var i="function"==typeof e.kproto?new e.kproto:e.kproto,n="function"==typeof e.vproto?new e.vproto:e.vproto;i._write(this,0,r),n._write(this,1,e.value[r])}},f.JceInputStream=function(t){this.buf=new f.BinBuffer(t)},f.JceInputStream.prototype.readFrom=function(){var t=this.buf.readUInt8(),e=(240&t)>>4,r=15&t;return 15<=e&&(e=this.buf.readUInt8()),{tag:e,type:r}},f.JceInputStream.prototype.peekFrom=function(){var t=this.buf.position,e=this.readFrom();return this.buf.position=t,{tag:e.tag,type:e.type,size:15<=e.tag?2:1}},f.JceInputStream.prototype.skipField=function(t){switch(t){case f.DataHelp.EN_INT8:this.buf.position+=1;break;case f.DataHelp.EN_INT16:this.buf.position+=2;break;case f.DataHelp.EN_INT32:this.buf.position+=4;break;case f.DataHelp.EN_INT64:this.buf.position+=8;break;case f.DataHelp.EN_STRING1:var e=this.buf.readUInt8();this.buf.position+=e;break;case f.DataHelp.EN_STRING4:var r=this.buf.readInt32();this.buf.position+=r;break;case f.DataHelp.EN_STRUCTBEGIN:this.skipToStructEnd();break;case f.DataHelp.EN_STRUCTEND:case f.DataHelp.EN_ZERO:break;case f.DataHelp.EN_MAP:for(var i=this.readInt32(0,!0),n=0;n<2*i;++n){var o=this.readFrom();this.skipField(o.type)}break;case f.DataHelp.EN_SIMPLELIST:if((o=this.readFrom()).type!=f.DataHelp.EN_INT8)throw Error("skipField with invalid type, type value: "+t+","+o.type);e=this.readInt32(0,!0);this.buf.position+=e;break;case f.DataHelp.EN_LIST:for(i=this.readInt32(0,!0),n=0;n<i;++n){o=this.readFrom();this.skipField(o.type)}break;case f.DataHelp.EN_FLOAT:this.buf.position+=4;break;case f.DataHelp.EN_DOUBLE:this.buf.position+=8;break;default:throw new Error("skipField with invalid type, type value: "+t)}},f.JceInputStream.prototype.skipToStructEnd=function(){for(;;){var t=this.readFrom();if(this.skipField(t.type),t.type==f.DataHelp.EN_STRUCTEND)return}},f.JceInputStream.prototype.skipToTag=function(t,e){for(;this.buf.position<this.buf.length;){var r=this.peekFrom();if(t<=r.tag||r.type==f.DataHelp.EN_STRUCTEND)return r.type!=f.DataHelp.EN_STRUCTEND&&t==r.tag;this.buf.position+=r.size,this.skipField(r.type)}if(e)throw Error("require field not exist, tag:"+t);return!1},f.JceInputStream.prototype.readBoolean=function(t,e,r){return 1==this.readInt8(t,e,r)},f.JceInputStream.prototype.readInt8=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();switch(i.type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_INT8:return this.buf.readInt8()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+i.type)},f.JceInputStream.prototype.readInt16=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();switch(i.type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_INT8:return this.buf.readInt8();case f.DataHelp.EN_INT16:return this.buf.readInt16()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+i.type)},f.JceInputStream.prototype.readInt32=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();switch(i.type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_INT8:return this.buf.readInt8();case f.DataHelp.EN_INT16:return this.buf.readInt16();case f.DataHelp.EN_INT32:return this.buf.readInt32()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+i.type)},f.JceInputStream.prototype.readInt64=function(t,e,r){if(0==this.skipToTag(t,e))return r;switch(this.readFrom().type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_INT8:return this.buf.readInt8();case f.DataHelp.EN_INT16:return this.buf.readInt16();case f.DataHelp.EN_INT32:return this.buf.readInt32();case f.DataHelp.EN_INT64:return this.buf.readInt64()}throw Error("read int64 type mismatch, tag:"+t+", get type:"+h.type)},f.JceInputStream.prototype.readFloat=function(t,e,r){if(0==this.skipToTag(t,e))return r;switch(this.readFrom().type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_FLOAT:return this.buf.readFloat()}throw Error("read float type mismatch, tag:"+t+", get type:"+h.type)},f.JceInputStream.prototype.readDouble=function(t,e,r){if(0==this.skipToTag(t,e))return r;switch(this.readFrom().type){case f.DataHelp.EN_ZERO:return 0;case f.DataHelp.EN_DOUBLE:return this.buf.readDouble()}throw Error("read double type mismatch, tag:"+t+", get type:"+h.type)},f.JceInputStream.prototype.readUInt8=function(t,e,r){return this.readInt16(t,e,r)},f.JceInputStream.prototype.readUInt16=function(t,e,r){return this.readInt32(t,e,r)},f.JceInputStream.prototype.readUInt32=function(t,e,r){return this.readInt64(t,e,r)},f.JceInputStream.prototype.readStruct=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type!=f.DataHelp.EN_STRUCTBEGIN)throw Error("read struct type mismatch, tag: "+t+", get type:"+i.type);return r.readFrom(this),this.skipToStructEnd(),r},f.JceInputStream.prototype.readString=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type==f.DataHelp.EN_STRING1)return this.buf.readString(this.buf.readUInt8());if(i.type==f.DataHelp.EN_STRING4)return this.buf.readString(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+i.type+".")},f.JceInputStream.prototype.readString2=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type==f.DataHelp.EN_STRING1)return this.buf.readBytes(this.buf.readUInt8());if(i.type==f.DataHelp.EN_STRING4)return this.buf.readBytes(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+i.type+".")},f.JceInputStream.prototype.readBytes=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type==f.DataHelp.EN_SIMPLELIST){var n=this.readFrom();if(n.type!=f.DataHelp.EN_INT8)throw Error("type mismatch, tag:"+t+",type:"+i.type+","+n.type);if((o=this.readInt32(0,!0))<0)throw Error("invalid size, tag:"+t+",type:"+i.type+","+n.type);return this.buf.readBytes(o)}if(i.type!=f.DataHelp.EN_LIST)throw Error("type mismatch, tag:"+t+",type:"+i.type);var o=this.readInt32(0,!0);return this.buf.readBytes(o)},f.JceInputStream.prototype.readVector=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type!=f.DataHelp.EN_LIST)throw Error("read 'vector' type mismatch, tag: "+t+", get type: "+i.type);var n=this.readInt32(0,!0);if(n<0)throw Error("invalid size, tag: "+t+", type: "+i.type+", size: "+n);for(var o=0;o<n;++o){var a="function"==typeof r.proto?new r.proto:r.proto;r.value.push(a._read(this,0,a._clone()))}return r},f.JceInputStream.prototype.readMap=function(t,e,r){if(0==this.skipToTag(t,e))return r;var i=this.readFrom();if(i.type!=f.DataHelp.EN_MAP)throw Error("read 'map' type mismatch, tag: "+t+", get type: "+i.type);var n=this.readInt32(0,!0);if(n<0)throw Error("invalid map, tag: "+t+", size: "+n);for(var o=0;o<n;o++){var a="function"==typeof r.kproto?new r.kproto:r.kproto,u="function"==typeof r.vproto?new r.vproto:r.vproto,s=a._read(this,0,a._clone()),p=u._read(this,1,u._clone());r.put(s,p)}return r},f.Util=f.Util||{},f.Util.jcestream=function(t,e){if(null!=t&&null!=t&&t instanceof ArrayBuffer){e=e||16;for(var r=new Uint8Array(t),i=0;i<r.length;i++)0!=i&&i%e==0?0:0!=i&&0,r[i],r[i].toString(16)}},f.Util.str2ab=function(t){var e,r=t.length,i=new Array(r);for(e=0;e<r;++e)i[e]=t.charCodeAt(e);return new Uint8Array(i).buffer},f.Util.ajax=function(t,e,r,i){var n=new XMLHttpRequest;n.overrideMimeType("text/plain; charset=x-user-defined");n.addEventListener("readystatechange",function t(){4===n.readyState&&(200===n.status||304===n.status?r(f.Util.str2ab(n.response)):i(n.status),n.removeEventListener("readystatechange",t),n=void 0)}),n.open("post",t),n.send(e)},f.INT8=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt8(e,r)},this._read=function(t,e,r){return t.readInt8(e,!0,r)},this._className=function(){return f.CHAR}},f.INT16=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt16(e,r)},this._read=function(t,e,r){return t.readInt16(e,!0,r)},this._className=function(){return f.SHORT}},f.INT32=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt32(e,r)},this._read=function(t,e,r){return t.readInt32(e,!0,r)},this._className=function(){return f.INT32}},f.INT64=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt64(e,r)},this._read=function(t,e,r){return t.readInt64(e,!0,r)},this._className=function(){return f.INT64}},f.UINT8=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt16(e,r)},this._read=function(t,e,r){return t.readInt16(e,!0,r)},this._className=function(){return f.SHORT}},f.UInt16=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt32(e,r)},this._read=function(t,e,r){return t.readInt32(e,!0,r)},this._className=function(){return f.INT32}},f.UInt32=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt64(e,r)},this._read=function(t,e,r){return t.readInt64(e,!0,r)},this._className=function(){return f.INT64}},f.Float=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeFloat(e,r)},this._read=function(t,e,r){return t.readFloat(e,!0,r)},this._className=function(){return f.FLOAT}},f.Double=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeDouble(e,r)},this._read=function(t,e,r){return t.readDouble(e,!0,r)},this._className=function(){return f.DOUBLE}},f.STRING=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeString(e,r)},this._read=function(t,e,r){return t.readString(e,!0,r)},this._className=function(){return f.STRING}},f.BOOLEAN=function(){this._clone=function(){return!1},this._write=function(t,e,r){return t.writeBoolean(e,r)},this._read=function(t,e,r){return t.readBoolean(e,!0,r)},this._className=function(){return f.BOOLEAN}},f.ENUM=function(){this._clone=function(){return 0},this._write=function(t,e,r){return t.writeInt32(e,r)},this._read=function(t,e,r){return t.readInt32(e,!0,r)}},f.Vector=function(t){this.proto=t,this.value=new Array},f.Vector.prototype._clone=function(){return new f.Vector("function"==typeof this.proto?new this.proto:this.proto)},f.Vector.prototype._write=function(t,e,r){return t.writeVector(e,r)},f.Vector.prototype._read=function(t,e,r){return t.readVector(e,!0,r)},f.Vector.prototype._className=function(){var t=r(this.proto);return f.TypeHelp.VECTOR.replace("$t",t)},f.Map=function(t,e){this.kproto=t,this.vproto=e,this.value=new Object},f.Map.prototype._clone=function(){var t="function"==typeof this.kproto?new this.kproto:this.kproto,e="function"==typeof this.vproto?new this.vproto:this.vproto;return new f.Map(t,e)},f.Map.prototype._write=function(t,e,r){return t.writeMap(e,r)},f.Map.prototype._read=function(t,e,r){return t.readMap(e,!0,r)},f.Map.prototype.put=function(t,e){this.value[t]=e},f.Map.prototype.get=function(t){return this.value[t]},f.Map.prototype.remove=function(t){delete this.value[t]},f.Map.prototype.clear=function(){this.value=new Object},f.Map.prototype.size=function(){var t=0;for(var e in this.value)t++;return t},f.Map.prototype._className=function(){var t=r(this.kproto),e=r(this.vproto);return f.TypeHelp.Map.replace("$k",t).replace("$v",e)},f});
//# sourceMappingURL=libwup.min.js.map
