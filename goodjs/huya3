!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).hyReport=n()}(this,(function(){"use strict";function e(e,n){return e(n={exports:{}},n.exports),n.exports}var n=e((function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n}));var t=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")};function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e},i=function(e){return"object"==typeof e?null!==e:"function"==typeof e},a={}.toString,u=function(e){return a.call(e).slice(8,-1)},c=e((function(e){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)})),s=(c.version,e((function(e){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}))),f=e((function(e){var n=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:c.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),l=0,d=Math.random(),p=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++l+d).toString(36))},h=e((function(e){var n=f("wks"),t=s.Symbol,r="function"==typeof t;(e.exports=function(e){return n[e]||(n[e]=r&&t[e]||(r?t:p)("Symbol."+e))}).store=n})),v=h("match"),g=function(e){var n;return i(e)&&(void 0!==(n=e[v])?!!n:"RegExp"==u(e))},b=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e},m=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},w=h("species"),x=Math.ceil,y=Math.floor,S=function(e){return isNaN(e=+e)?0:(e>0?y:x)(e)},O=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},E=function(e){return function(n,t){var r,o,i=String(O(n)),a=S(t),u=i.length;return a<0||a>=u?e?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}}(!0),_=function(e,n,t){return n+(t?E(e,n).length:1)},T=Math.min,k=function(e){return e>0?T(S(e),9007199254740991):0},R=h("toStringTag"),I="Arguments"==u(function(){return arguments}()),j=function(e){var n,t,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=Object(e),R))?t:I?u(n):"Object"==(r=u(n))&&"function"==typeof n.callee?"Arguments":r},N=RegExp.prototype.exec,M=function(e,n){var t=e.exec;if("function"==typeof t){var r=t.call(e,n);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==j(e))throw new TypeError("RegExp#exec called on incompatible receiver");return N.call(e,n)},A=function(){var e=b(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n},C=RegExp.prototype.exec,D=String.prototype.replace,P=C,z=function(){var e=/a/,n=/b*/g;return C.call(e,"a"),C.call(n,"a"),0!==e.lastIndex||0!==n.lastIndex}(),V=void 0!==/()??/.exec("")[1];(z||V)&&(P=function(e){var n,t,r,o,i=this;return V&&(t=new RegExp("^"+i.source+"$(?!\\s)",A.call(i))),z&&(n=i.lastIndex),r=C.call(i,e),z&&r&&(i.lastIndex=i.global?r.index+r[0].length:n),V&&r&&r.length>1&&D.call(r[0],t,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var L=P,F=function(e){try{return!!e()}catch(e){return!0}},q=!F((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),H=s.document,X=i(H)&&i(H.createElement),G=function(e){return X?H.createElement(e):{}},U=!q&&!F((function(){return 7!=Object.defineProperty(G("div"),"a",{get:function(){return 7}}).a})),$=function(e,n){if(!i(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!i(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")},B=Object.defineProperty,Y={f:q?Object.defineProperty:function(e,n,t){if(b(e),n=$(n,!0),b(t),U)try{return B(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},J=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},W=q?function(e,n,t){return Y.f(e,n,J(1,t))}:function(e,n,t){return e[n]=t,e},K={}.hasOwnProperty,Q=function(e,n){return K.call(e,n)},Z=f("native-function-to-string",Function.toString),ee=e((function(e){var n=p("src"),t=(""+Z).split("toString");c.inspectSource=function(e){return Z.call(e)},(e.exports=function(e,r,o,i){var a="function"==typeof o;a&&(Q(o,"name")||W(o,"name",r)),e[r]!==o&&(a&&(Q(o,n)||W(o,n,e[r]?""+e[r]:t.join(String(r)))),e===s?e[r]=o:i?e[r]?e[r]=o:W(e,r,o):(delete e[r],W(e,r,o)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[n]||Z.call(this)}))})),ne=function(e,n,t){if(m(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)}}return function(){return e.apply(n,arguments)}},te=function(e,n,t){var r,o,i,a,u=e&te.F,f=e&te.G,l=e&te.S,d=e&te.P,p=e&te.B,h=f?s:l?s[n]||(s[n]={}):(s[n]||{}).prototype,v=f?c:c[n]||(c[n]={}),g=v.prototype||(v.prototype={});for(r in f&&(t=n),t)i=((o=!u&&h&&void 0!==h[r])?h:t)[r],a=p&&o?ne(i,s):d&&"function"==typeof i?ne(Function.call,i):i,h&&ee(h,r,i,e&te.U),v[r]!=i&&W(v,r,a),d&&g[r]!=i&&(g[r]=i)};s.core=c,te.F=1,te.G=2,te.S=4,te.P=8,te.B=16,te.W=32,te.U=64,te.R=128;var re=te;re({target:"RegExp",proto:!0,forced:L!==/./.exec},{exec:L});var oe=h("species"),ie=!F((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),ae=function(){var e=/(?:)/,n=e.exec;e.exec=function(){return n.apply(this,arguments)};var t="ab".split(e);return 2===t.length&&"a"===t[0]&&"b"===t[1]}(),ue=function(e,n,t){var r=h(e),o=!F((function(){var n={};return n[r]=function(){return 7},7!=""[e](n)})),i=o?!F((function(){var n=!1,t=/a/;return t.exec=function(){return n=!0,null},"split"===e&&(t.constructor={},t.constructor[oe]=function(){return t}),t[r](""),!n})):void 0;if(!o||!i||"replace"===e&&!ie||"split"===e&&!ae){var a=/./[r],u=t(O,r,""[e],(function(e,n,t,r,i){return n.exec===L?o&&!i?{done:!0,value:a.call(n,t,r)}:{done:!0,value:e.call(t,n,r)}:{done:!1}})),c=u[0],s=u[1];ee(String.prototype,e,c),W(RegExp.prototype,r,2==n?function(e,n){return s.call(e,this,n)}:function(e){return s.call(e,this)})}},ce=Math.min,se=[].push,fe="length",le=!F((function(){RegExp(4294967295,"y")}));ue("split",2,(function(e,n,t,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[fe]||2!="ab".split(/(?:ab)*/)[fe]||4!=".".split(/(.?)(.?)/)[fe]||".".split(/()()/)[fe]>1||"".split(/.?/)[fe]?function(e,n){var r=String(this);if(void 0===e&&0===n)return[];if(!g(e))return t.call(r,e,n);for(var o,i,a,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),s=0,f=void 0===n?4294967295:n>>>0,l=new RegExp(e.source,c+"g");(o=L.call(l,r))&&!((i=l.lastIndex)>s&&(u.push(r.slice(s,o.index)),o[fe]>1&&o.index<r[fe]&&se.apply(u,o.slice(1)),a=o[0][fe],s=i,u[fe]>=f));)l.lastIndex===o.index&&l.lastIndex++;return s===r[fe]?!a&&l.test("")||u.push(""):u.push(r.slice(s)),u[fe]>f?u.slice(0,f):u}:"0".split(void 0,0)[fe]?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,r){var i=e(this),a=null==t?void 0:t[n];return void 0!==a?a.call(t,i,r):o.call(String(i),t,r)},function(e,n){var i=r(o,e,this,n,o!==t);if(i.done)return i.value;var a=b(e),u=String(this),c=function(e,n){var t,r=b(e).constructor;return void 0===r||null==(t=b(r)[w])?n:m(t)}(a,RegExp),s=a.unicode,f=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(le?"y":"g"),l=new c(le?a:"^(?:"+a.source+")",f),d=void 0===n?4294967295:n>>>0;if(0===d)return[];if(0===u.length)return null===M(l,u)?[u]:[];for(var p=0,h=0,v=[];h<u.length;){l.lastIndex=le?h:0;var g,x=M(l,le?u:u.slice(h));if(null===x||(g=ce(k(l.lastIndex+(le?0:h)),u.length))===p)h=_(u,h,s);else{if(v.push(u.slice(p,h)),v.length===d)return v;for(var y=1;y<=x.length-1;y++)if(v.push(x[y]),v.length===d)return v;h=p=g}}return v.push(u.slice(p)),v}]}));var de,pe,he={f:{}.propertyIsEnumerable},ve=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==u(e)?e.split(""):Object(e)},ge=function(e){return ve(O(e))},be=Object.getOwnPropertyDescriptor,me={f:q?be:function(e,n){if(e=ge(e),n=$(n,!0),U)try{return be(e,n)}catch(e){}if(Q(e,n))return J(!he.f.call(e,n),e[n])}},we=function(e,n){if(b(e),!i(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},xe={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,t){try{(t=ne(Function.call,me.f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,r){return we(e,r),n?e.__proto__=r:t(e,r),e}}({},!1):void 0),check:we}.set,ye=function(e,n,t){var r,o=n.constructor;return o!==t&&"function"==typeof o&&(r=o.prototype)!==t.prototype&&i(r)&&xe&&xe(e,r),e},Se=Math.max,Oe=Math.min,Ee=f("keys"),_e=function(e){return Ee[e]||(Ee[e]=p(e))},Te=(de=!1,function(e,n,t){var r,o=ge(e),i=k(o.length),a=function(e,n){return(e=S(e))<0?Se(e+n,0):Oe(e,n)}(t,i);if(de&&n!=n){for(;i>a;)if((r=o[a++])!=r)return!0}else for(;i>a;a++)if((de||a in o)&&o[a]===n)return de||a||0;return!de&&-1}),ke=_e("IE_PROTO"),Re=function(e,n){var t,r=ge(e),o=0,i=[];for(t in r)t!=ke&&Q(r,t)&&i.push(t);for(;n.length>o;)Q(r,t=n[o++])&&(~Te(i,t)||i.push(t));return i},Ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),je=Ie.concat("length","prototype"),Ne={f:Object.getOwnPropertyNames||function(e){return Re(e,je)}},Me=h("species"),Ae=Y.f,Ce=Ne.f,De=s.RegExp,Pe=De,ze=De.prototype,Ve=/a/g,Le=/a/g,Fe=new De(Ve)!==Ve;if(q&&(!Fe||F((function(){return Le[h("match")]=!1,De(Ve)!=Ve||De(Le)==Le||"/a/i"!=De(Ve,"i")})))){De=function(e,n){var t=this instanceof De,r=g(e),o=void 0===n;return!t&&r&&e.constructor===De&&o?e:ye(Fe?new Pe(r&&!o?e.source:e,n):Pe((r=e instanceof De)?e.source:e,r&&o?A.call(e):n),t?this:ze,De)};for(var qe=function(e){e in De||Ae(De,e,{configurable:!0,get:function(){return Pe[e]},set:function(n){Pe[e]=n}})},He=Ce(Pe),Xe=0;He.length>Xe;)qe(He[Xe++]);ze.constructor=De,De.prototype=ze,ee(s,"RegExp",De)}pe=s["RegExp"],q&&pe&&!pe[Me]&&Y.f(pe,Me,{configurable:!0,get:function(){return this}});var Ge=Y.f,Ue=Function.prototype,$e=/^\s*function ([^ (]*)/;"name"in Ue||q&&Ge(Ue,"name",{configurable:!0,get:function(){try{return(""+this).match($e)[1]}catch(e){return""}}});var Be="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ye="["+Be+"]",Je=RegExp("^"+Ye+Ye+"*"),We=RegExp(Ye+Ye+"*$"),Ke=function(e,n,t){var r={},o=F((function(){return!!Be[e]()||"​"!="​"[e]()})),i=r[e]=o?n(Qe):Be[e];t&&(r[t]=i),re(re.P+re.F*o,"String",r)},Qe=Ke.trim=function(e,n){return e=String(O(e)),1&n&&(e=e.replace(Je,"")),2&n&&(e=e.replace(We,"")),e},Ze=Ke,en=Object.keys||function(e){return Re(e,Ie)},nn=q?Object.defineProperties:function(e,n){b(e);for(var t,r=en(n),o=r.length,i=0;o>i;)Y.f(e,t=r[i++],n[t]);return e},tn=s.document,rn=tn&&tn.documentElement,on=_e("IE_PROTO"),an=function(){},un=function(){var e,n=G("iframe"),t=Ie.length;for(n.style.display="none",rn.appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),un=e.F;t--;)delete un.prototype[Ie[t]];return un()},cn=Object.create||function(e,n){var t;return null!==e?(an.prototype=b(e),t=new an,an.prototype=null,t[on]=e):t=un(),void 0===n?t:nn(t,n)},sn=Ne.f,fn=me.f,ln=Y.f,dn=Ze.trim,pn=s.Number,hn=pn,vn=pn.prototype,gn="Number"==u(cn(vn)),bn="trim"in String.prototype,mn=function(e){var n=$(e,!1);if("string"==typeof n&&n.length>2){var t,r,o,i=(n=bn?n.trim():dn(n,3)).charCodeAt(0);if(43===i||45===i){if(88===(t=n.charCodeAt(2))||120===t)return NaN}else if(48===i){switch(n.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+n}for(var a,u=n.slice(2),c=0,s=u.length;c<s;c++)if((a=u.charCodeAt(c))<48||a>o)return NaN;return parseInt(u,r)}}return+n};if(!pn(" 0o1")||!pn("0b1")||pn("+0x1")){pn=function(e){var n=arguments.length<1?0:e,t=this;return t instanceof pn&&(gn?F((function(){vn.valueOf.call(t)})):"Number"!=u(t))?ye(new hn(mn(n)),t,pn):mn(n)};for(var wn,xn=q?sn(hn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),yn=0;xn.length>yn;yn++)Q(hn,wn=xn[yn])&&!Q(pn,wn)&&ln(pn,wn,fn(hn,wn));pn.prototype=vn,vn.constructor=pn,ee(s,"Number",pn)}var Sn=Math.max,On=Math.min,En=Math.floor,_n=/\$([$&`']|\d\d?|<[^>]*>)/g,Tn=/\$([$&`']|\d\d?)/g;ue("replace",2,(function(e,n,t,r){return[function(r,o){var i=e(this),a=null==r?void 0:r[n];return void 0!==a?a.call(r,i,o):t.call(String(i),r,o)},function(e,n){var i=r(t,e,this,n);if(i.done)return i.value;var a=b(e),u=String(this),c="function"==typeof n;c||(n=String(n));var s=a.global;if(s){var f=a.unicode;a.lastIndex=0}for(var l=[];;){var d=M(a,u);if(null===d)break;if(l.push(d),!s)break;""===String(d[0])&&(a.lastIndex=_(u,k(a.lastIndex),f))}for(var p,h="",v=0,g=0;g<l.length;g++){d=l[g];for(var m=String(d[0]),w=Sn(On(S(d.index),u.length),0),x=[],y=1;y<d.length;y++)x.push(void 0===(p=d[y])?p:String(p));var O=d.groups;if(c){var E=[m].concat(x,w,u);void 0!==O&&E.push(O);var T=String(n.apply(void 0,E))}else T=o(m,u,w,x,O,n);w>=v&&(h+=u.slice(v,w)+T,v=w+m.length)}return h+u.slice(v)}];function o(e,n,r,o,i,a){var u=r+e.length,c=o.length,s=Tn;return void 0!==i&&(i=Object(O(i)),s=_n),t.call(a,s,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=i[a.slice(1,-1)];break;default:var f=+a;if(0===f)return t;if(f>c){var l=En(f/10);return 0===l?t:l<=c?void 0===o[l-1]?a.charAt(1):o[l-1]+a.charAt(1):t}s=o[f-1]}return void 0===s?"":s}))}})),q&&"g"!=/./g.flags&&Y.f(RegExp.prototype,"flags",{configurable:!0,get:A});var kn=/./.toString,Rn=function(e){ee(RegExp.prototype,"toString",e,!0)};F((function(){return"/a/b"!=kn.call({source:"a",flags:"b"})}))?Rn((function(){var e=b(this);return"/".concat(e.source,"/","flags"in e?e.flags:!q&&e instanceof RegExp?A.call(e):void 0)})):"toString"!=kn.name&&Rn((function(){return kn.call(this)}));var In=Date.prototype,jn=In.toString,Nn=In.getTime;new Date(NaN)+""!="Invalid Date"&&ee(In,"toString",(function(){var e=Nn.call(this);return e==e?jn.call(this):"Invalid Date"}));var Mn={};Mn[h("toStringTag")]="z",Mn+""!="[object z]"&&ee(Object.prototype,"toString",(function(){return"[object "+j(this)+"]"}),!0);var An={name:"na",version:"-1"};function Cn(e){return function(n){return Object.prototype.toString.call(n)==="[object "+e+"]"}}var Dn=Cn("String"),Pn=Cn("RegExp"),zn=Cn("Object"),Vn=Cn("Function");function Ln(e,n,t,r){var o=An;!function(e,n){for(var t=0,r=e.length;t<r&&!1!==n.call(e,e[t],t);t++);}(n,(function(n){var t=function(e,n,t){var r=Vn(n)?n.call(null,t):n;if(!r)return null;var o={name:e,version:"-1",codename:""};if(!0===r)return o;if(Dn(r)){if(-1!==t.indexOf(r))return o}else{if(zn(r))return r.hasOwnProperty("version")&&(o.version=r.version),o;if(Pn(r)){var i=r.exec(t);if(i)return i.length>=2&&i[1]?o.version=i[1].replace(/_/g,"."):o.version="-1",o}}}(n[0],n[1],e);if(t)return o=t,!1})),t.call(r,o.name,o.version)}var Fn=function(){function e(n){t(this,e),this._rules=n}return o(e,[{key:"parse",value:function(e){e=(e||"").toLowerCase();var n={};Ln(e,this._rules.device,(function(e,t){var r=parseFloat(t);n.device={name:e,version:r,fullVersion:t},n.device[e]=r}),n),Ln(e,this._rules.os,(function(e,t){var r=parseFloat(t);n.os={name:e,version:r,fullVersion:t},n.os[e]=r}),n);var t=this.IEMode(e);return Ln(e,this._rules.engine,(function(e,r){var o=r;t&&(r=t.engineVersion||t.engineMode,o=t.engineMode);var i=parseFloat(r);n.engine={name:e,version:i,fullVersion:r,mode:parseFloat(o),fullMode:o,compatible:!!t&&t.compatible},n.engine[e]=i}),n),Ln(e,this._rules.browser,(function(e,r){var o=r;t&&("ie"===e&&(r=t.browserVersion),o=t.browserMode);var i=parseFloat(r);n.browser={name:e,version:i,fullVersion:r,mode:parseFloat(o),fullMode:o,compatible:!!t&&t.compatible},n.browser[e]=i}),n),n}},{key:"IEMode",value:function(e){if(!this._rules.re_msie.test(e))return null;var n,t,r,o,i;if(-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e))&&n.length>=2){r=n[1];var a=n[1].split(".");a[0]=parseInt(a[0],10)+4,i=a.join(".")}o=(n=this._rules.re_msie.exec(e))[1];var u=n[1].split(".");return void 0===i&&(i=o),u[0]=parseInt(u[0],10)-4,t=u.join("."),void 0===r&&(r=t),{browserVersion:i,browserMode:o,engineVersion:r,engineMode:t,compatible:r!==t}}}]),e}();ue("match",1,(function(e,n,t,r){return[function(t){var r=e(this),o=null==t?void 0:t[n];return void 0!==o?o.call(t,r):new RegExp(t)[n](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var o=b(e),i=String(this);if(!o.global)return M(o,i);var a=o.unicode;o.lastIndex=0;for(var u,c=[],s=0;null!==(u=M(o,i));){var f=String(u[0]);c[s]=f,""===f&&(o.lastIndex=_(i,k(o.lastIndex),a)),s++}return 0===s?null:c}]}));var qn="undefined"==typeof window?global:window,Hn=qn.external,Xn=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,Gn=/\bbb10\b.+?\bversion\/([\d.]+)/,Un=/\bblackberry\b.+\bversion\/([\d.]+)/,$n=/\bblackberry\d+\/([\d.]+)/;function Bn(e){if(Hn)try{var n=Hn.twGetRunPath.toLowerCase(),t=Hn.twGetSecurityID(qn),r=Hn.twGetVersion(t);if(n&&-1===n.indexOf(e))return!1;if(r)return{version:r}}catch(e){}}var Yn={device:[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["redmi ","redmi"],["oneplus ","oneplus"],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var n=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:-1!==e.indexOf("honor")?"huawei":n.test(e)?n:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_ ]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],os:[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var n=e.match(Gn)||e.match(Un)||e.match($n);return n?{version:n[1]}:"blackberry"}]],browser:[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=Bn("theworld");return void 0!==e?e:/theworld(?: ([\d.])+)?/}],["360",function(e){var n=Bn("360se");return void 0!==n?n:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(Hn&&(Hn.mxVersion||Hn.max_version))return{version:Hn.mxVersion||Hn.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var n;try{Hn&&Hn.LiebaoGetVersion&&(n=Hn.LiebaoGetVersion())}catch(e){}return{version:n||"-1"}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",Xn],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var n=/\bopera.+version\/([0-9.ab]+)/;return n.test(e)?n:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["baiduboxapp",function(e){var n,t=0;return!!/ baiduboxapp\//i.test(e)&&((n=/([\d+.]+)_(?:diordna|enohpi)_/.exec(e))?t=(n=n[1].split(".")).reverse().join("."):(n=/baiduboxapp\/([\d+.]+)/.exec(e))&&(t=n[1]),{version:t})}],["oppobrowser",/\boppobrowser\/([0-9.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["headlesschrome",/ (?:headlesschrome)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var n=e.match(Gn)||e.match(Un)||e.match($n);return n?{version:n[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]],engine:[["edgehtml",/edge\/([0-9.]+)/],["trident",Xn],["blink",function(){return"chrome"in qn&&"CSS"in qn&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var n=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/);if(n)return{version:n[1]+"."+n[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],re_msie:Xn},Jn=(navigator.userAgent||"")+" "+(navigator.appVersion||"")+" "+(navigator.vendor||""),Wn=new Fn(Yn);function Kn(e){var n=Wn.parse(e),t=function(e){if(!Yn.re_msie.test(e))return null;var n,t,r,o,i;if(-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e))&&n.length>=2){r=n[1];var a=n[1].split(".");a[0]=parseInt(a[0],10)+4,i=a.join(".")}o=(n=Yn.re_msie.exec(e))[1];var u=n[1].split(".");return void 0===i&&(i=o),u[0]=parseInt(u[0],10)-4,t=u.join("."),void 0===r&&(r=t),{browserVersion:i,browserMode:o,engineVersion:r,engineMode:t,compatible:r!==t}}(e);if(t){var r=n.engine.name,o=t.engineVersion||t.engineMode,i=parseFloat(o),a=t.engineMode;n.engine={name:r,version:i,fullVersion:o,mode:parseFloat(a),fullMode:a,compatible:!!t&&t.compatible},n.engine[n.engine.name]=i;var u=n.browser.name,c=n.browser.fullVersion;"ie"===u&&(c=t.browserVersion);var s=t.browserMode,f=parseFloat(c);n.browser={name:u,version:f,fullVersion:c,mode:parseFloat(s),fullMode:s,compatible:!!t&&t.compatible},n.browser[u]=f}return n}var Qn=Kn(Jn);Qn.parse=Kn;var Zn,et,nt,tt=(Zn=navigator.userAgent,et="web",Zn.indexOf("Android")>-1||Zn.indexOf("Adr")>-1?et="android":Zn.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?et="ios":et),rt=(nt=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(nt+16*Math.random())%16|0;return nt=Math.floor(nt/16),("x"===e?n:7&n|8).toString(16)}))),ot=function(e){for(var n=document.cookie.split("; "),t=0;t<n.length;t+=1){var r=n[t].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return""}("yyuid")||0,it="";try{it=window.localStorage.getItem("hyReport")}catch(e){}var at,ut,ct,st,ft,lt,dt=function(e,n,t,r){var o=null,i={ua:tt+"&"+t,uid:ot||0,sguid:rt,m:e.splice(e,e.length)};o=window.XDomainRequest?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),it&&window.console&&console.log(i);var a=function(e,n){var t,r,o,i,a,u,c,s="",f="",l="",d=0,p=0,h=0,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=function(e){for(var n=[],t=0;t<e.length;t++){var r=e.charCodeAt(t);r<128?n.push(r):r<2048?n.push(192|r>>6,128|63&r):r<55296||r>=57344?n.push(224|r>>12,128|r>>6&63,128|63&r):(t++,r=65536+((1023&r)<<10|1023&e.charCodeAt(t)),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return n}(e);for(d=g.length-1,h=0;d>=0;d--)f=g[d]^n.charCodeAt(h)^p,s+=String.fromCharCode(f),h=++h%n.length,p=f;for(d=0;d<s.length;)i=(t=s.charCodeAt(d++))>>2,a=(3&t)<<4|(r=s.charCodeAt(d++))>>4,u=(15&r)<<2|(o=s.charCodeAt(d++))>>6,c=63&o,isNaN(r)?u=c=64:isNaN(o)&&(c=64),l=l+v.charAt(i)+v.charAt(a)+v.charAt(u)+v.charAt(c);return l}(JSON.stringify(i),String(n)),u="".concat(r,"/?ts=").concat(n);return o.open("POST",u,!0),o.send(a),o},pt=(at="/"===window.location.pathname.substring(window.location.pathname.length-1)?window.location.pathname+"index":window.location.pathname,(window.location.host+at).replace(".html","")),ht=[],vt=(ut=dt,ct=500,st=1e3,lt=null,function(){var e=this,n=arguments,t=Number(new Date);clearTimeout(lt),ft||(ft=t),t-ft>=st?(ut.apply(e,n),ft=t):lt=setTimeout((function(){ut.apply(e,n),ft=Number(new Date)}),ct)}),gt=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pt,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://metric.huya.com";if(t)return dt([e],n,r,o);ht.push(e),vt(ht,n,r,o)},bt=function(e){var n=performance.timing,t=e.firstScreenTime||window.hyReport&&window.hyReport.firstScreenTime||0;return{dns:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,ttfb:n.responseStart-n.requestStart,trans:n.responseEnd-n.responseStart,dom:n.domInteractive-n.responseEnd,res:n.loadEventStart-n.domContentLoadedEventEnd,firstbyte:n.responseStart-n.domainLookupStart,fpt:n.responseEnd-n.fetchStart,tti:n.domInteractive-n.fetchStart,firstScreenTime:t-n.fetchStart,readyTime:n.domContentLoadedEventEnd-n.fetchStart,loadTime:n.loadEventEnd-n.fetchStart}},mt=function(e){return!!(window.hyReport?window.hyReport:e).firstScreenTime},wt=function(e){var n="";if(!!(window.performance.getEntriesByType&&window.performance.getEntriesByType("resource")instanceof Array))for(var t=window.performance.getEntriesByType("resource"),r=0;r<t.length;r++)if(t[r].name&&t[r].name.indexOf(e)>-1){n=t[r];break}return n},xt=function(){try{var e=navigator.connection;return e?"effectiveType=".concat(e.effectiveType,"||rtt=").concat(e.rtt,"||downlink=").concat(e.downlink):""}catch(e){return window.console&&console.log(e),""}},yt=["load","loadend","timeout","error","readystatechange","abort"],St="__origin_xhr";function Ot(e,n){var t={};for(var r in e)t[r]=e[r];return t.target=t.currentTarget=n,t}var Et=yt[0],_t=yt[1],Tt=yt[2],kt=yt[3],Rt=yt[4],It=yt[5];function jt(e,n){return function(e,n){var t=e.onRequest,r=e.onResponse,o=e.onError;function i(){return!0}function a(e){return function(n,t){return function(e,n,t,r){var i=new zt(e);t={config:e.config,error:t,type:r},o?o(t,i):i.next(t)}(n,0,t,e),!0}}function u(e,n){return 4===e.readyState&&0!==e.status?function(e,n){var t=new Pt(e),o=n.responseType,i={response:o&&"text"!==o&&"json"!==o?n.response:n.responseText,status:n.status,statusText:n.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,n){if(""===n)return e;var t=n.split(":");return e[t.shift()]=function(e){return e.replace(/^\s+|\s+$/g,"")}(t.join(":")),e}),{})};if(!r)return t.resolve(i);r(i,t)}(e,n):4!==e.readyState&&Mt(e,Rt),!0}var{originXhr:c,unHook:s}=function(e,n){var t=(n=n||window).XMLHttpRequest;function r(n){return function(){var t=this.hasOwnProperty(n+"_")?this[n+"_"]:this[St][n],r=(e[n]||{}).getter;return r&&r(t,this)||t}}function o(n){return function(t){var r=this[St],o=this,i=e[n];if("on"===n.substring(0,2))o[n+"_"]=t,r[n]=function(i){i=Ot(i,o),e[n]&&e[n].call(o,r,i)||t.call(o,i)};else{var a=(i||{}).setter;t=a&&a(t,o)||t,this[n+"_"]=t;try{r[n]=t}catch(e){}}}}function i(n){return function(){var t=[].slice.call(arguments);if(e[n]){var r=e[n].call(this,t,this[St]);if(r)return r}return this[St][n].apply(this[St],t)}}return n.XMLHttpRequest=function(){for(var e=new t,n=0;n<yt.length;++n){var a="on"+yt[n];void 0===e[a]&&(e[a]=null)}for(var u in e){var c="";try{c=typeof e[u]}catch(e){}"function"===c?this[u]=i(u):u!==St&&Object.defineProperty(this,u,{get:r(u),set:o(u),enumerable:!0})}var s=this;e.getProxy=function(){return s},this[St]=e},Object.assign(n.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),{originXhr:t,unHook:function(){n.XMLHttpRequest=t,t=void 0}}}({onload:i,onloadend:i,onerror:a(kt),ontimeout:a(Tt),onabort:a(It),onreadystatechange:function(e){return u(e,this)},open:function(e,n){var r=this,o=n.config={headers:{}};o.method=e[0],o.url=e[1],o.async=e[2],o.user=e[3],o.password=e[4],o.xhr=n;var i="on"+Rt;if(n[i]||(n[i]=function(){return u(n,r)}),t)return!0},send:function(e,n){var r=n.config;if(r.withCredentials=n.withCredentials,r.body=e[0],t){var o=function(){t(r,new Dt(n))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(e,n){if(n.config.headers[e[0].toLowerCase()]=e[1],t)return!0},addEventListener:function(e,n){var t=this;if(-1!==yt.indexOf(e[0])){var r=e[1];return Nt(n).addEventListener(e[0],(function(n){var o=Ot(n,t);o.type=e[0],o.isTrusted=!0,r.call(t,o)})),!0}},getAllResponseHeaders:function(e,n){var t=n.resHeader;if(t){var r="";for(var o in t)r+=o+": "+t[o]+"\r\n";return r}},getResponseHeader:function(e,n){var t=n.resHeader;if(t)return t[(e[0]||"").toLowerCase()]}},n);return{originXhr:c,unProxy:s}}(e,n=n||window)}function Nt(e){return e.watcher||(e.watcher=document.createElement("a"))}function Mt(e,n){var t,r=e.getProxy(),o="on"+n+"_",i=Ot({type:n},r);r[o]&&r[o](i),"function"==typeof Event?t=new Event(n,{bubbles:!1}):(t=document.createEvent("Event")).initEvent(n,!1,!0),Nt(e).dispatchEvent(t)}function At(e){this.xhr=e,this.xhrProxy=e.getProxy()}function Ct(e){function n(e){At.call(this,e)}return n.prototype=Object.create(At.prototype),n.prototype.next=e,n}At.prototype=Object.create({resolve:function(e){var n=this.xhrProxy,t=this.xhr;n.readyState=4,t.resHeader=e.headers,n.response=n.responseText=e.response,n.statusText=e.statusText,n.status=e.status,Mt(t,Rt),Mt(t,Et),Mt(t,_t)},reject:function(e){this.xhrProxy.status=0,Mt(this.xhr,e.type),Mt(this.xhr,_t)}});var Dt=Ct((function(e){var n=this.xhr;for(var t in e=e||n.config,n.withCredentials=e.withCredentials,n.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)n.setRequestHeader(t,e.headers[t]);n.send(e.body)})),Pt=Ct((function(e){this.resolve(e)})),zt=Ct((function(e){this.reject(e)}));var Vt=0,Lt={},Ft="";try{Ft=window.localStorage.getItem("hyVisit")}catch(e){}var qt=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e.dim[t]=n[t]);return e},Ht=function(e,n,t,r,o,i){var a=Lt[e+r];if(a){a.outTimer&&clearTimeout(a.outTimer);var u=n-a.startTime,c=Date.now(),s={name:"web.page.index",its:c,dim:{path:e,success:u>=i.config.apiTimeOut?"0":"1",extdesc:(a.msg||t)&&a.msg+"||"+t+"||"},field:{value:u},exlog:{extdesc:""}};s.dim.extdesc+="network="+Vt+"||sendTime="+(c-i.startTime),Vt<700&&(s=qt(s,o),gt(s,c,!1,i.config.pageview,i.config.rpurl)),delete Lt[e+r]}},Xt={apiMess:function(e,n,t){var r=Date.now(),o={name:"web.page.indexmess",its:r,dim:{path:n.apiName,retcode:n.retcode?String(n.retcode):"1",extdesc:"".concat(n.msg),device:Qn.device.name,deviceversion:String(Qn.device.fullVersion),os:Qn.os.name,osversion:String(Qn.os.version),browser:Qn.browser.name,browserversion:String(Qn.browser.version),engine:Qn.engine.name,engineversion:String(Qn.engine.version),screen:window.screen.width+"x"+window.screen.height,useragent:"".concat(navigator.userAgent,"||sendTime=").concat(r-t.startTime)},field:{},exlog:{extdesc:""}};o=qt(o,e),gt(o,r,!1,t.config.pageview,t.config.rpurl)},_resourceError:function(e,n,t){var r=Date.now(),o={name:"web.page.resourceError",its:r,dim:{path:n.uri,retcode:"404",extdesc:"sendTime=".concat(r-t.startTime)},field:{},exlog:{extdesc:""}};o=qt(o,e),gt(o,r,!1,t.config.pageview,t.config.rpurl)},apiTime:function(e,n,t){if("start"===n.identity.status){var r=n.apiName+n.unique;Lt[r]&&(Lt[r].outTimer&&clearTimeout(Lt[r].outTimer),delete Lt[r]),Lt[r]={startTime:n.identity.times,outTimer:null,msg:n.msg||""},Lt[r].outTimer=setTimeout((function(){Ht(n.apiName,Date.now(),"timeout",n.unique,e,t)}),t.config.apiTimeOut)}"end"===n.identity.status&&Ht(n.apiName,n.identity.times,n.msg,n.unique,e,t)},pv:function(e,n,t){var r=Date.now(),o=xt(),i={name:"web.page.pv",its:r,dim:{visit:Ft?"0":"1",device:Qn.device.name,deviceversion:String(Qn.device.fullVersion),os:Qn.os.name,osversion:String(Qn.os.version),browser:Qn.browser.name,browserversion:String(Qn.browser.version),engine:Qn.engine.name,engineversion:String(Qn.engine.version),screen:window.screen.width+"x"+window.screen.height,extdesc:navigator.userAgent+"||"+t.sdkLoadTime+"||"+o},field:{},exlog:{extdesc:""}};i=qt(i,e);var a=gt(i,r,!0,t.config.pageview,t.config.rpurl);if(a){var u=Date.now();a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){Vt=Date.now()-u;try{Ft||(localStorage.hyVisit=1)}catch(e){}}else Vt=-1}}},_loadStatus:function(e,n,t){var r=function(){var n=Date.now(),r="1";!1===mt(t)&&(r="0");var o={name:"web.page.loadStatus",its:n,dim:{success:r,extdesc:"".concat(navigator.userAgent,"||sendTime=").concat(n-t.startTime)},field:{},exlog:{extdesc:""}};!1===mt(t)&&(o.dim.extdesc+="||pagePerformance=".concat(JSON.stringify(bt(t)),"||network=").concat(Vt)),o=qt(o,e),gt(o,n,!1,t.config.pageview,t.config.rpurl)};!1===mt(t)?setTimeout((function(){r()}),t.config.pageTimeOut):r()},_performance:function(e,n,t){var r=0,o=function n(){if(r>=50)return!1;if(!1===mt(t))return r++,setTimeout((function(){n()}),200),!1;var o=bt(t),i=!0;for(var a in o)if(o[a]<0||isNaN(o[a])){i=!1;break}i&&function(n){var r=Date.now(),o={name:"web.page.performance",its:r,dim:{},field:n,exlog:{extdesc:""}};o=qt(o,e),gt(o,r,!1,t.config.pageview,t.config.rpurl)}(o)},i=function e(){window.removeEventListener("load",e),setTimeout((function(){o()}),50)};0!==performance.timing.loadEventEnd?i():window.addEventListener("load",i)}};function Gt(e,n){for(var t=!1,r=0;r<n.length;r++){if((n[r]instanceof RegExp?n[r]:new RegExp(n[r])).test(e)){t=!0;break}}return t}var Ut=new(function(){function e(){t(this,e),this.usable=this._compatibleDetection(),this.hmt=[],this.startTime=Number(new Date),this.config={pageTimeOut:5e3,apiTimeOut:2e3,sdkVersion:"v1.1.0",appVersion:"v1.0.0",errExclude:[],appId:""},window.hyReport&&window.hyReport.hmt&&(this.hmt=window.hyReport.hmt),window.hyReport&&window.hyReport.config&&this.setConfig(window.hyReport.config),this._init()}return o(e,[{key:"_init",value:function(){var e,n;this.usable&&(this.sdkLoadTime=(e=Number(new Date)-performance.timing.responseEnd,(n=wt("hy-report.js"))?e="pageAnalysis=".concat((e-n.duration).toFixed(2),"||sdkDuration=").concat(n.duration.toFixed(2)):""),this._resetReport(),this.config.ajax&&this.config.ajax.hook&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];jt({onRequest:function(n,t){n.url.indexOf("//metric")<0&&n.url.indexOf("sentry")<0&&(Gt(n.url,e)||(n.apiTimeObj={handle:"apiTime",data:{apiName:n.url.split("?")[0],unique:Number(new Date),identity:{status:"start",times:Number(new Date)},msg:""}},$t.hmt.push(n.apiTimeObj))),t.next(n)},onResponse:function(n,t){n.config.url.indexOf("//metric")<0&&n.config.url.indexOf("sentry")<0&&(Gt(n.config.url,e)||(n.config.apiTimeObj.data.identity={status:"end",times:Number(new Date)},$t.hmt.push(n.config.apiTimeObj))),t.next(n)}})}(this.config.ajax.exclude))}},{key:"setConfig",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.config[n]=e[n])}},{key:"_resetReport",value:function(){var e=this,n=function(n){var t=n.handle;Xt[t]&&Xt[t]({sdkVersion:e.config.sdkVersion,appVersion:e.config.appVersion,appId:e.config.appId},n.data,e)},t=this.hmt,r=this;if(t.length)for(var o=0;o<t.length;o++)n(t[o]);this.hmt.length=0,this.hmt.push=function(e){n(e)},this._sendDate(),window.addEventListener("error",(function(e){if(e.target!==window){var n=e.target.nodeName;if(n&&{SCRIPT:2,LINK:3}[n.toUpperCase()]){var t=e.target.src||e.target.href;r.config.appId&&r.hmt.push({handle:"_resourceError",data:{uri:t}})}}}),!0);var i={},a=window.onerror;window.onerror=function(e,n,t,o,u){var c=e.toLowerCase();if(!Gt(e,r.config.errExclude)&&!i[c]){i[c]=1;var s=["Message: "+e,"URL: "+n,"Line: "+t,"Column: "+o].join(" - ");r.config.appId&&r.hmt.push({handle:"apiMess",data:{apiName:"winError",msg:s,retcode:"500"}})}a&&a.apply(this,arguments)}}},{key:"start",value:function(){this._sendDate()}},{key:"_sendDate",value:function(){if(!this.config.appId)return window.console&&console.warn("appId不能为空"),!1;this.hmt.push({handle:"pv"}),this.hmt.push({handle:"_performance"}),this.hmt.push({handle:"_loadStatus"})}},{key:"_compatibleDetection",value:function(){return!(!document.addEventListener||!window.performance||"object"!==n(window.performance.timing))&&!(window.performance.timing.fetchStart<=0||new Date(window.performance.timing.fetchStart).getFullYear()!==(new Date).getFullYear())}}]),e}()),$t=window.hyReport||Ut;return $t}));
