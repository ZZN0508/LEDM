var BingAppQrCode;(function(){function w(){if(document.querySelector("".concat(e,' > [id^="bnp.nid."]')))return!0}function h(){i("ClickPage")}function c(){i("ClickCloseIcon")}function l(n){n.stopPropagation()}function a(n){Log.Log(f,y,n);sj_be(_d,"click",h);sj_be(o,"click",l);sj_be(s,"click",c);r.classList.add("active");t=!0}function i(n,i){i===void 0&&(i=!1);Log.Log(f,p,n);sj_ue(_d,"click",h);sj_ue(o,"click",l);sj_ue(s,"click",c);r.classList.remove("active");t=!1;i||b()}function b(){if(u){u=!1;n.lastCloseTime=Date.now();n.closeTimes++;try{localStorage.setItem(v,JSON.stringify(n))}catch(t){}}}var f="HomePageIdentityBingAppUpsell_Popup_",y="Show",p="Hide",e="#id_h",r=_ge("id_qrcode"),o=_ge("id_qrcode_popup_positioner"),s=_qs("#id_qrcode_popup_positioner .id_qrcode_close"),t=!1;sj_evt.bind("bnp.embed.ready",function(n){var u=n[0],r=n[1];r.tar==e&&t&&i("BnpConflictDetected",!0)});sj_be(r,"click",function(n){n===null||n===void 0?void 0:n.stopPropagation();t?i("ClickQrCodeIcon"):a("ClickQrCodeIcon")});var v="HomePageIdentityBingAppUpsellCloseHistory",n=function(){try{var n=JSON.parse(localStorage.getItem(v));if(n)return n}catch(t){}return{lastCloseTime:0,closeTimes:0}}(),u=!1;Date.now()>=n.lastCloseTime+432e6&&n.closeTimes<3&&!w()&&(u=!0,a("AutoShow"))})(BingAppQrCode||(BingAppQrCode={}))