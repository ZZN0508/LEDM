"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[7780],{1065:function(e,n,t){t.d(n,{E:function(){return _}});var o,l=t(65146),r=t(53864),i=t(79705),a=t.n(i),u="Hjv3wHis",d="gMMEpzXI",c="M0gVvasL",s="E3E0uwhI",f="_LDsUshk";function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},v.apply(this,arguments)}var m,h,p=function(e){return r.createElement("svg",v({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.28 2.102a.75.75 0 010 1.06l-2.828 2.83L8.28 8.82a.75.75 0 01-1.06 1.06L3.86 6.522a.75.75 0 010-1.061l3.36-3.359a.75.75 0 011.06 0z",fill:"#fff",fillOpacity:.8})))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},g.apply(this,arguments)}var w=function(e){return r.createElement("svg",g({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=r.createElement("circle",{r:12,transform:"matrix(-1 0 0 1 12 12)",fill:"#363741"})),h||(h=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.736 16.677a.9.9 0 000-1.272l-3.394-3.394 3.394-3.395a.9.9 0 10-1.272-1.272l-4.03 4.03a.9.9 0 000 1.273l4.03 4.03a.9.9 0 001.272 0z",fill:"#000"})))},C=t(9909),_=function(e){var n,t=e.className,o=e.onClick,i=e.direction,v=e.disable,m=e.circle,h=void 0!==m&&m;return r.createElement("div",{className:a()(t,u,(n={},(0,l.Z)(n,s,"right"===i),(0,l.Z)(n,f,v),(0,l.Z)(n,d,h),n)),onClick:o},r.createElement(C.Z,{className:c,src:globalThis.xssNamespace.douyin_web.filterUrl(h?w:p,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:h?24:12,height:h?24:12,viewBox:h?"0 0 24 24":"0 0 12 12"}))}},42275:function(e,n,t){t.r(n),t.d(n,{FollowingUpdateWindow:function(){return an}});var o=t(65146),l=t(32781),r=t(8e3),i=t.n(r),a=t(85792),u=t.n(a),d=t(76569),c=t.n(d),s=t(34346),f=t.n(s),v=t(53864),m=t(79705),h=t.n(m),p=t(59676),g=t(92267),w=t(54203),C=t(54867),_=t(2433),I=t(8318),E=t(71116),y=t(17172),b=t(76475),S=t(96716),A="PEXnhets",L="jh5rcojh",k="xK2hiPYK",T="zscO5e__",x="xVsY52aE",N="eaqZCizu",P="wsDrlFon",M="TYnn3Ifv",R="B09LynWG",F="TM_jx7ef",Z="UOQtoPLA",D="_75ufq1x",V="QmnP82ng",B="NltQSiOw",O="D9qlzIXr",U="wwuuoWn7",W=t(24556),H=t(94116),j=t(11227),G=t.n(j),z=[],K=function(e){return i()(e).call(e,(function(e){var n,t,o;return!G()(z).call(z,null!==(n=null==e||null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&void 0!==n?n:null==e||null===(o=e.authorInfo)||void 0===o?void 0:o.uid)}))},q=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return null==e?void 0:i()(e).call(e,(function(e){var n,t;return(null===(n=E.Le.getConfig(E.gI.UnLookVideos))||void 0===n||null===(t=n[e])||void 0===t?void 0:t.status)===C.Pl.UnLook}))},J="T6zWywkt",Y="XLrCdjgs",Q="qviwauFh",X=function(e){var n=e.className;return v.createElement("div",{className:h()(J,n)},v.createElement("div",{className:Y}),v.createElement("div",{className:Q}))},$="ov0KBU9r",ee=function(e,n){var t=e.dislikePosition,o=e.dislikeShow,l=e.onClick;return o?v.createElement("div",{onClick:l,style:t,className:$},"\u4e0d\u611f\u5174\u8da3"):null},ne=function(e){var n,t=e.bingeInfo,o=e.deleteCard,r=(0,v.useState)(!1),i=(0,l.Z)(r,2),a=i[0],d=i[1],c=(0,v.useState)(),s=(0,l.Z)(c,2),f=s[0],m=s[1],h=null===(n=q(null==t?void 0:t.awemeIds))||void 0===n?void 0:n[0];return(0,v.useEffect)((function(){if(a){var e,n,o,l;g.i.sendLog("skylightDislikeShow",{enter_from:"recommend",type:t.mixInfo?"compilation":"author",compilation_id:null==t||null===(e=t.mixInfo)||void 0===e?void 0:e.mixId,group_id:h,author_id:null==t||null===(n=t.authorInfo)||void 0===n?void 0:n.uid,update_num:null===(o=E.Le.getConfig(E.gI.UnLookVideos))||void 0===o||null===(l=o[h])||void 0===l?void 0:l.countOnce,reason:null==t?void 0:t.reason,position:"feed"});var r=function(){return d(!1)},i=u()((function(){document.addEventListener("contextmenu",r,{once:!0})}),500);return document.addEventListener("click",r,{once:!0}),function(){clearTimeout(i),document.removeEventListener("contextmenu",r),document.removeEventListener("click",r)}}}),[a]),{dislikeShow:a,clickDislike:function(e){var n,l,r,i,a,u,c;e.stopPropagation(),o(t),d(!1),(0,I.bV)({scene:null!=t&&t.mixInfo?w.t.DislikeOftenWatchMix:w.t.DislikeOftenWatchAuthor,ids:[null!==(n=null==t||null===(l=t.mixInfo)||void 0===l?void 0:l.mixId)&&void 0!==n?n:null==t||null===(r=t.authorInfo)||void 0===r?void 0:r.uid]}),g.i.sendLog("skylightDislikeClick",{enter_from:"recommend",type:t.mixInfo?"compilation":"author",compilation_id:null==t||null===(i=t.mixInfo)||void 0===i?void 0:i.mixId,group_id:h,author_id:null==t||null===(a=t.authorInfo)||void 0===a?void 0:a.uid,update_num:null===(u=E.Le.getConfig(E.gI.UnLookVideos))||void 0===u||null===(c=u[h])||void 0===c?void 0:c.countOnce,reason:null==t?void 0:t.reason,position:"feed"})},showDislike:function(e){null==e||e.preventDefault(),d(!0),m({left:null==e?void 0:e.nativeEvent.offsetX,top:null==e?void 0:e.nativeEvent.offsetY})},dislikePosition:f}},te=function(e){return e.Collection="pc_binge_col_A",e.OftenSee="pc_binge_col_B",e}(te||{}),oe=function(e){var n,t,l,r,i,a=e.bingeInfo,u=e.onClick,d=e.onShow,c=e.deleteCard,s=e.scene,f=e.currentPlayingBingeInfo,m=ne({bingeInfo:a,deleteCard:c}),p=m.dislikeShow,g=m.clickDislike,w=m.showDislike,_=m.dislikePosition,I=s===C.yC.MiniModal&&(null==f||null===(n=f.mixInfo)||void 0===n?void 0:n.mixId)===a.mixInfo.mixId,E=Math.min(null===(t=q(null==a?void 0:a.awemeIds))||void 0===t?void 0:t.length,99),y=(0,S.x)((function(){return null==d?void 0:d()}));return v.createElement("div",{className:h()(A,(l={},(0,o.Z)(l,L,s===C.yC.MiniModal),(0,o.Z)(l,F,I),l)),onClick:function(){return u(a)},ref:y},v.createElement("div",{className:k},v.createElement(W.Q,{src:globalThis.xssNamespace.douyin_web.filterUrl((null==a||null===(r=a.mixInfo)||void 0===r?void 0:r.cover)||"",null,{logType:"js.href/src",mode:"black",reportOnly:!1}),imgClass:h()(x,Z),iconWidth:26,iconHeight:30}),s===C.yC.Recommend&&v.createElement("div",{className:h()(O,N)},(null==a?void 0:a.reason)===te.OftenSee?"\u8fd1\u671f\u770b\u8fc7":"\u6211\u7684\u6536\u85cf"),I&&v.createElement(X,null)),!I&&v.createElement("div",{className:h()(T,(0,o.Z)({},D,0===E))},v.createElement("div",{className:h()(V,B,Z)},0===E?"\u5df2\u770b\u5b8c":"".concat(E,"\u96c6\u66f4\u65b0"))),v.createElement("div",{className:P},v.createElement("div",{className:M},v.createElement(H.Z,{className:R,text:null==a||null===(i=a.mixInfo)||void 0===i?void 0:i.mixName}))),s===C.yC.Recommend&&null!==c&&v.createElement(v.Fragment,null,v.createElement("div",{onContextMenu:function(e){return w(e)},className:U}),v.createElement(ee,{dislikePosition:_,dislikeShow:p,onClick:g})))},le="hmmVyuQu",re="D24dqggx",ie="sNS3ZgDn",ae="SqK2uyaV",ue="rxFmkwpJ",de="cSJpm1D7",ce="VTrEd0GB",se="S_n5AfzF",fe="vqk_nS65",ve="ZzvEkU93",me="WoYvQrEl",he="E4IF8m94",pe="gm9eBCZl",ge=t(51078),we=function(e){var n,t,l,r,i,a,u=e.bingeInfo,d=e.onClick,c=e.isLogin,s=e.onShow,f=e.deleteCard,m=e.scene,p=e.currentPlayingBingeInfo,g=ne({bingeInfo:u,deleteCard:f}),w=g.dislikeShow,_=g.clickDislike,I=g.showDislike,E=g.dislikePosition,y=(0,v.useRef)(),b=(0,S.x)((function(){return null==s?void 0:s()})),A=Math.min(null===(n=q(null==u?void 0:u.awemeIds))||void 0===n?void 0:n.length,99),L=m===C.yC.MiniModal&&!(null!=p&&p.mixInfo)&&(null==p||null===(t=p.authorInfo)||void 0===t?void 0:t.uid)===(null==u||null===(l=u.authorInfo)||void 0===l?void 0:l.uid);return v.createElement("div",{className:h()(le,(r={},(0,o.Z)(r,re,m===C.yC.MiniModal),(0,o.Z)(r,ve,L),r)),onClick:function(){return d(u)},ref:function(e){b.current=e,y.current=e}},v.createElement(ge.q,{src:globalThis.xssNamespace.douyin_web.filterUrl(null==u||null===(i=u.authorInfo)||void 0===i?void 0:i.avatarUri,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:ie,imgClassName:ae,maskConf:{showMask:L,MaskItem:X,className:ue}}),!L&&v.createElement("div",{className:h()(de,(0,o.Z)({},me,0===A))},v.createElement("div",{className:he},0===A?"\u5df2\u770b\u5b8c":c?"".concat(A,"\u4e2a\u66f4\u65b0"):"\u6709\u66f4\u65b0")),v.createElement("div",{className:ce},v.createElement("div",{className:se},v.createElement(H.Z,{className:fe,text:null==u||null===(a=u.authorInfo)||void 0===a?void 0:a.nickname}))),m===C.yC.Recommend&&null!==f&&v.createElement(v.Fragment,null,v.createElement("div",{className:pe,onContextMenu:function(e){return I(e)}}),v.createElement(ee,{dislikePosition:E,dislikeShow:w,onClick:_})))},Ce=function(e){var n,t=e||{},o=t.singleInfo,l=t.onClick,r=t.isLogin,i=t.deleteCard,a=t.scene,u=t.currentPlayingBingeInfo,d=null===(n=q(null==o?void 0:o.awemeIds))||void 0===n?void 0:n[0],c=(0,v.useCallback)((function(){var e,n,t,l;g.i.sendLog("skylightCoverShow",{type:o.mixInfo?"compilation":"author",compilation_id:null==o||null===(e=o.mixInfo)||void 0===e?void 0:e.mixId,group_id:d,author_id:null==o||null===(n=o.authorInfo)||void 0===n?void 0:n.uid,update_num:null===(t=E.Le.getConfig(E.gI.UnLookVideos))||void 0===t||null===(l=t[d])||void 0===l?void 0:l.countOnce,reason:null==o?void 0:o.reason,position:a===C.yC.Recommend?"feed":"modal"})}),[o]),s=(0,v.useCallback)((function(){var e,n,t,l;g.i.sendLog("skylightCoverClick",{type:o.mixInfo?"compilation":"author",compilation_id:null==o||null===(e=o.mixInfo)||void 0===e?void 0:e.mixId,group_id:d,author_id:null==o||null===(n=o.authorInfo)||void 0===n?void 0:n.uid,update_num:null===(t=E.Le.getConfig(E.gI.UnLookVideos))||void 0===t||null===(l=t[d])||void 0===l?void 0:l.countOnce,reason:null==o?void 0:o.reason,position:a===C.yC.Recommend?"feed":"modal"})}),[o]);return o.mixInfo?v.createElement(oe,{bingeInfo:o,onClick:function(e){null==l||l(e),s()},onShow:c,deleteCard:i,scene:a,currentPlayingBingeInfo:u}):v.createElement(we,{bingeInfo:o,onClick:function(e){null==l||l(e),s()},isLogin:r,onShow:c,deleteCard:i,scene:a,currentPlayingBingeInfo:u})},_e=t(1065),Ie="p1zztDJg",Ee="e481bC5J",ye="M0uIfdGL",be="Ji_PD92t",Se="E_oLu39p",Ae="i0hW9vv0",Le="FRErQSvz",ke="cfErVZpC",Te="QhHeYVFI",xe="UKXvIIHp",Ne="krN8cNnt",Pe="Q_MW6Ijt",Me="h2teLt7l",Re=t(97876),Fe=t(53361),Ze=t.n(Fe),De=t(30673),Ve=t(64408),Be=t(94090),Oe=t.n(Be),Ue=t(56442),We=t.n(Ue),He=t(58144),je=t.n(He),Ge=t(5594),ze=t.n(Ge),Ke=t(51613),qe=t(46801),Je=t(34590),Ye=function(e){var n,t,o=e.currentNumber,r=e.setCurrentNumber,a=e.awemeInfoList,u=e.setAwemeInfoList,d=e.defaultAwemeList,c=void 0===d?[]:d,s=e.awemeIds,m=void 0===s?[]:s,h=e.showToast,p=e.close,g=e.bingeInfo,w=e.needLoadRelated,C=void 0===w||w,_=e.refNextVideoCallBack,I=(0,v.useRef)(!1),E=(0,v.useRef)(c.length),y=(0,v.useRef)(!1),b=(0,v.useState)(!1),S=(0,l.Z)(b,2),A=S[0],L=S[1],k=(0,v.useRef)((null==g||null===(n=g.mixInfo)||void 0===n?void 0:n.mixId)||(null==g||null===(t=g.authorInfo)||void 0===t?void 0:t.uid));(0,v.useEffect)((function(){var e,n,t=!1;return r(0),L(!1),E.current=0,y.current=!1,I.current=!1,k.current=(null==g||null===(e=g.mixInfo)||void 0===e?void 0:e.mixId)||(null==g||null===(n=g.authorInfo)||void 0===n?void 0:n.uid),(0,Ve.Z)(ze().mark((function e(){var n,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.current=!0,n=1,e.next=4,(0,Ke.m_)({awemeId:m[0]});case 4:if(o=e.sent,I.current=!1,!t){e.next=8;break}return e.abrupt("return");case 8:o&&0===o.statusCode?(u([o.detail]),E.current=n,L(!0)):(Je.F.info("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),null==p||p());case 9:case"end":return e.stop()}}),e)})))(),function(){t=!0}}),[g]),(0,v.useEffect)((function(){var e,n;o>=m.length&&!y.current&&h&&(y.current=!0,Je.F.info("\u6682\u65e0\u66f4\u591a\u4f5c\u54c1, \u5df2\u4e3a\u4f60\u64ad\u653e\u63a8\u8350\u89c6\u9891"));var t=(null==g||null===(e=g.mixInfo)||void 0===e?void 0:e.mixId)||(null==g||null===(n=g.authorInfo)||void 0===n?void 0:n.uid);Math.abs(Number(null==a?void 0:a.length)-o)<5&&-1!==o&&!I.current&&A&&(0,Ve.Z)(ze().mark((function e(){var n,l,d;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=(0,Ve.Z)(ze().mark((function e(){var n,l;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.current=!0,e.next=3,(0,qe.b)({awemeId:null===(n=a[o])||void 0===n?void 0:n.awemeId,count:20,filterGids:f()(a).call(a,(function(e){return null==e?void 0:e.awemeId})).join(",")||""});case 3:if(l=e.sent,I.current=!1,t===k.current){e.next=7;break}return e.abrupt("return");case 7:u((function(e){var n;return Oe()(n=[]).call(n,(0,De.Z)(e),(0,De.Z)((null==l?void 0:l.awemeList)||[]))})),-1===o&&r(0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!(E.current>=m.length)){e.next=7;break}if(!C){e.next=5;break}return n(),e.abrupt("return");case 5:return _.current=function(){return Je.F.info("\u6682\u65e0\u66f4\u591a\u89c6\u9891")},e.abrupt("return");case 7:return l=6,I.current=!0,e.next=11,(0,Ke.c7)(We()(m).call(m,E.current,E.current+l));case 11:if(d=e.sent,I.current=!1,t===k.current){e.next=15;break}return e.abrupt("return");case 15:d&&0===d.statusCode&&(u((function(e){var n,t,o,l=null===(n=d.detail)||void 0===n||null===(t=i()(n))||void 0===t?void 0:t.call(n,(function(n){return!je()(e).call(e,(function(e){return e.awemeId===n.awemeId}))}));return Oe()(o=[]).call(o,(0,De.Z)(e),(0,De.Z)(l||[]))})),E.current=Math.min(E.current+l,m.length));case 16:case"end":return e.stop()}}),e)})))()}),[a,o,A])},Qe=t(26447),Xe=t.n(Qe),$e=t(21155),en=t.n($e),nn=t(54805),tn=t(77032),on=t(93538),ln=null,rn=(0,p.default)((function(){return Promise.all([t.e(2398),t.e(2875),t.e(9),t.e(7780),t.e(5254),t.e(5847),t.e(3803),t.e(6193),t.e(4339),t.e(2934),t.e(2447),t.e(6647),t.e(9443),t.e(8930)]).then(t.bind(t,75421))}),{ssr:!1}),an=function(e){var n,t,r,a,d,s=e.swiper,m=e.isExpand,p=e.abTestData,S=e.userInfo,A=e.onItemClick,L=e.scene,k=e.initPosition,T=void 0===k?18:k,x=e.currentPlayingBingeInfo,N=e.dispatch,P=e.className,M=e.onUpdateListCountChange,R=e.setIsDisable,F=(0,v.useState)(T),Z=(0,l.Z)(F,2),D=Z[0],V=Z[1],B=(0,v.useState)("absolute"),O=(0,l.Z)(B,2),U=O[0],W=O[1],H=(0,v.useState)(!1),j=(0,l.Z)(H,2),q=j[0],J=j[1],Y=(0,v.useState)(!1),Q=(0,l.Z)(Y,2),X=(Q[0],Q[1]),$=(0,v.useContext)(b.C)||{},ee=$.isFullScreen,ne=$.isCssFullScreen,te=$.isClientMiniWin,oe=(0,v.useRef)(null),le=(0,v.useRef)(null),re=(0,v.useRef)(D),ie=(0,v.useRef)(0),ae=(0,v.useRef)(),ue=(0,v.useRef)(ee),de=(0,v.useRef)(ne),ce=(0,v.useRef)(te),se=(0,v.useRef)(U);ue.current=ee,de.current=ne,ce.current=te,re.current=D,se.current=U;var fe=L===C.yC.Recommend?33:0,ve=function(e){var n=e.isExpand,t=e.setIsDisable,o=e.scene,r=e.isLogin,a=(0,v.useState)(o===C.yC.Recommend?[]:ln),u=(0,l.Z)(a,2),d=u[0],c=u[1],s=K(d);o===C.yC.Recommend&&(ln=s);var f=(0,v.useRef)(0),m=(0,v.useRef)(!1),h=(0,v.useCallback)((function(e){c((function(n){return i()(n).call(n,(function(n){return n!==e}))}))}),[]),p=(0,nn.Z)((0,Ve.Z)(ze().mark((function e(){var n,l,a,u,d;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o!==C.yC.Recommend){e.next=14;break}if(!m.current){e.next=3;break}return e.abrupt("return");case 3:return f.current=Xe()(),m.current=!0,e.next=7,(0,on.g)({cardsCount:30,awemeCount:0});case 7:a=e.sent,u=r?a.list:null===(n=a.list)||void 0===n||null===(l=i()(n))||void 0===l?void 0:l.call(n,(function(e){var n;return!(null!=e&&null!==(n=e.mixInfo)&&void 0!==n&&n.mixId)})),m.current=!1,en()(u).call(u,(function(e){var n;en()(n=e.awemeIds).call(n,(function(n){(0,tn.b)({awemeId:n,countOnce:e.awemeIds.length,scene:"recommendUpdateWindow"})}))})),d=K(u),c(d),0===u.length?t(!0):t(!1);case 14:case"end":return e.stop()}}),e)})))),g=(0,v.useCallback)((function(){Xe()()-f.current>=3e5&&r!==undefined&&p()}),[r,d.length]);return(0,v.useEffect)((function(){g()}),[n]),(0,v.useEffect)((function(){r!==undefined&&p()}),[r]),{followingUpdateList:o===C.yC.Recommend?s:d,deleteCard:h}}({swiper:s,isExpand:m,abTestData:p,isLogin:S.isLogin,scene:L,setIsDisable:R}),me=ve.followingUpdateList,he=ve.deleteCard,pe=(0,v.useMemo)((function(){return L===C.yC.Recommend?"absolute"===U?46:14:"absolute"===U?12:2}),[U,L]),ge=(0,v.useMemo)((function(){if(q){var e,n,t,o=null===(e=ae.current)||void 0===e?void 0:i()(n=e.awemeIds).call(n,(function(e){var n,t;return(null===(n=E.Le.getConfig(E.gI.UnLookVideos))||void 0===n||null===(t=n[e])||void 0===t?void 0:t.status)===C.Pl.UnLook}));return 0===o.length?null===(t=ae.current)||void 0===t?void 0:t.awemeIds:o}}),[q,ae.current]),we=(0,v.useCallback)((function(){return[D!==T&&"relative"!==U,"auto"!==D&&D!==ie.current&&"relative"!==U]}),[D,U]),Fe=(0,v.useCallback)((function(){if(!(ce.current||de.current||ue.current)||L!==C.yC.Recommend){var e=(oe.current||{}).clientWidth,n=(le.current||{}).clientWidth;(e-Number(re.current)>n||re.current===ie.current&&0!==ie.current)&&V("auto"),n<=e?"absolute"===se.current&&(W("relative"),V(0)):"relative"===se.current&&(W("absolute"),V(T)),ie.current=-(n-e+fe),X(document.body.clientWidth<=690)}}),[]),De=(0,v.useCallback)((function(e){var n,t,o;ae.current=e,null==A||A({info:e}),L===C.yC.Recommend&&J(!0),u()((function(){var n,t,o,l;l=null!==(n=null==e||null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&void 0!==n?n:null==e||null===(o=e.authorInfo)||void 0===o?void 0:o.uid,G()(z).call(z,l)||z.push(l)})),(0,I.bV)({scene:null!=e&&e.mixInfo?w.t.OftenWatchMix:w.t.OftenWatchAuthor,ids:[null!==(n=null==e||null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&void 0!==n?n:null==e||null===(o=e.authorInfo)||void 0===o?void 0:o.uid]})}),[A,L,p]);!function(e){var n=e.setBingeInfo,t=e.scene,o=(0,v.useState)(),r=(0,l.Z)(o,2),i=r[0],a=r[1];(0,v.useEffect)((function(){var e=Re.listen(Re.EVENT.recommendUpdateWindow,(function(e){t===C.yC.Recommend&&(n(e.bingeInfo),a(e.bingeInfo))}));return function(){e()}}),[])}({setBingeInfo:function(e){return ae.current=e},scene:L}),function(e){var n=e.currentPlayingBingeInfo,t=e.followingUpdateList,o=e.scene,l=e.setLeft,r=e.windowContainerRef,i=e.slideContainerRef,a=e.miniTypeSingleCardWidth;(0,v.useEffect)((function(){if(o!==C.yC.Recommend){var e=r.current.clientWidth,u=i.current.clientWidth,d=Ze()(t).call(t,(function(e){var t,o,l,r,i,a;return(null!==(t=null==e||null===(o=e.mixInfo)||void 0===o?void 0:o.mixId)&&void 0!==t?t:null==e||null===(l=e.authorInfo)||void 0===l?void 0:l.uid)===(null!==(r=null==n||null===(i=n.mixInfo)||void 0===i?void 0:i.mixId)&&void 0!==r?r:null==n||null===(a=n.authorInfo)||void 0===a?void 0:a.uid)}))*a;l(0-d<e-u?e-u:-d)}}),[])}({currentPlayingBingeInfo:x,followingUpdateList:me,scene:L,setLeft:V,windowContainerRef:oe,slideContainerRef:le,miniTypeSingleCardWidth:92}),(0,v.useEffect)((function(){Fe()}),[ne]),(0,v.useEffect)((function(){var e=new MutationObserver(Fe);e.observe(le.current,{childList:!0});var n=oe.current,t=c()(y.Z).call(y.Z,n,Fe);return function(){t&&t(),e.disconnect()}}),[]),(0,v.useEffect)((function(){0===me.length?null==M||M(!1):null==M||M(!0)}),[me.length]);var Be=v.createElement("div",{className:h()(Ie,(n={},(0,o.Z)(n,Me,0===me.length),(0,o.Z)(n,Ee,L===C.yC.MiniModal),n))},v.createElement("div",{className:h()(ye,(0,o.Z)({},Se,!m&&L===C.yC.Recommend)),ref:oe},v.createElement("div",{className:be},v.createElement("div",{className:h()(Te,(t={},(0,o.Z)(t,Me,!we()[0]),(0,o.Z)(t,Ne,L===C.yC.MiniModal),t))}),v.createElement("div",{className:h()(Te,xe,(r={},(0,o.Z)(r,Me,!we()[1]),(0,o.Z)(r,Ne,L===C.yC.MiniModal),r))}),v.createElement("div",{className:ke,ref:le,style:{left:D,right:"auto"===D?fe:"auto",position:U,top:pe}},f()(me).call(me,(function(e,n){return v.createElement(Ce,{singleInfo:e,key:n,onClick:De,isLogin:S.isLogin,deleteCard:he,scene:L,currentPlayingBingeInfo:x})})))),q&&v.createElement(rn,{userContext:{userInfo:S,dispatch:N},abtestData:p,close:function(){return J(!1)},anyHooks:Ye,awemeIds:ge,bingeInfo:ae.current,isDefaultShowRelatedCard:!0,defaultForceOpenTab:null!==(a=ae.current)&&void 0!==a&&a.mixInfo?_.L.Mix:_.L.Author,modalEnterFrom:"recommendUpdateWindow",logParams:{is_from_skylight:1,tab_name:"update",enter_from:"update"},isDependentRender:!0,showToast:!0,videoUpdateType:null!==(d=ae.current)&&void 0!==d&&d.mixInfo?C.dH.Mix:C.dH.Author,needLoadRelated:!1})));return v.createElement("div",{className:h()(Pe,P,(0,o.Z)({},Ee,L===C.yC.MiniModal))},v.createElement(_e.E,{className:h()(Ae,(0,o.Z)({},Me,!m||"relative"===U)),disable:!we()[0],onClick:function(){g.i.sendLog("skylightLoadClick",{position:"left"});var e=we(),n=(0,l.Z)(e,2),t=n[0];n[1];if(t){var o=(oe.current||{}).clientWidth,r=(le.current||{}).clientWidth;"auto"===D&&V(ie.current),u()((function(){if(("auto"===D?o-r:D)+o>T)V(T);else{var e=("auto"===D?o-r:D)+o;if(L===C.yC.Recommend)V(e);else{var n=92*Math.floor(e/92);V(n)}}}))}},circle:!0}),v.createElement(_e.E,{className:h()(Le,(0,o.Z)({},Me,!m||"relative"===U)),disable:!we()[1],onClick:function(){g.i.sendLog("skylightLoadClick",{position:"right"});var e=we(),n=(0,l.Z)(e,2);n[0];if(n[1]){var t=oe.current.clientWidth,o=le.current.clientWidth;if(Number(D)-t<t-o-fe)V(t-o-fe);else if(L===C.yC.Recommend)V(Number(D)-t);else{var r=92*Math.floor((Number(D)-t)/92);V(r)}}},direction:"right",circle:!0}),Be)}},46595:function(e,n,t){t.d(n,{Y:function(){return i}});var o=t(67624),l=t.n(o),r=t(2433),i=new(l())([[r.L.Related,"\u76f8\u5173\u63a8\u8350"],[r.L.AwemeRelated,"\u76f8\u5173\u63a8\u8350"],[r.L.Music,"\u97f3\u4e50"],[r.L.Topic,"\u8bdd\u9898"],[r.L.Mix,"\u5408\u96c6"],[r.L.Series,"\u77ed\u5267"],[r.L.Comment,"\u8bc4\u8bba"],[r.L.Hot,"\u70ed\u70b9"],[r.L.Author,"TA\u7684\u4f5c\u54c1"],[r.L.Handpick,"\u7f16\u8f91\u7cbe\u9009"],[r.L.Search,"\u641c\u7d22\u7ed3\u679c"],[r.L.History,"\u5386\u53f2\u8bb0\u5f55"],[r.L.Like,"TA\u7684\u559c\u6b22"],[r.L.Collection,"TA\u7684\u6536\u85cf"],[r.L.CollectFolder,"\u6536\u85cf\u5939"],[r.L.Record,"\u89c2\u770b\u5386\u53f2"]])},78863:function(e,n,t){t.d(n,{ZP:function(){return q}});var o=t(30906),l=t(65146),r=t(32781),i=t(85792),a=t.n(i),u=t(76569),d=t.n(u),c=t(42249),s=t.n(c),f=t(11227),v=t.n(f),m=t(90457),h=t.n(m),p=t(34346),g=t.n(p),w=t(26447),C=t.n(w),_=t(79705),I=t.n(_),E=t(53864),y=t(56920),b=t(2433),S=t(54867),A=t(90037),L=t(25902),k=t(71116),T=t(97876),x=t(51365),N=t(17172),P=t(76475),M=t(94090),R=t.n(M),F=t(30978),Z=t(346),D="YwClj8rK",V="qRePWKBJ",B="OdfU1utT",O="DKu2Hr2J",U="agh_7JEd",W="Kc2jycUT",H="iYUP6oy9",j=t(67289),G=t(21228),z=t(7786),K=t(34590);var q=function(e){var n,t,i,u,c,f,m,p,w,_=e.className,M=e.swiperClassName,q=e.abTestData,J=void 0===q?{}:q,Y=e.cardBetween,Q=void 0===Y?j.qF.cardBetween:Y,X=e.upperSpace,$=void 0===X?j.qF.upperSpace:X,ee=e.nextSwiperHeaderHeight,ne=void 0===ee?j.qF.nextSwiperHeaderHeight:ee,te=e.children,oe=e.onSwiper,le=e.style,re=void 0===le?{}:le,ie=e.swiperStyle,ae=void 0===ie?{}:ie,ue=e.isDefaultShowSideBar,de=e.customTop,ce=e.data,se=e.scene,fe=e.defaultCssFullScreen,ve=e.initIndex,me=e.useWheelListener,he=void 0===me||me,pe=e.splashAdStatus,ge=e.collectionFolderInfo,we=(0,E.useRef)(null),Ce=(0,E.useRef)(!1),_e=(0,E.useState)(null),Ie=(0,r.Z)(_e,2),Ee=Ie[0],ye=Ie[1],be=(0,E.useState)(null),Se=(0,r.Z)(be,2),Ae=Se[0],Le=Se[1],ke=(0,E.useState)(),Te=(0,r.Z)(ke,2),xe=Te[0],Ne=Te[1],Pe=(0,E.useState)(),Me=(0,r.Z)(Pe,2),Re=Me[0],Fe=Me[1],Ze=(0,E.useState)(!1),De=(0,r.Z)(Ze,2),Ve=De[0],Be=De[1],Oe=(0,E.useState)(ue),Ue=(0,r.Z)(Oe,2),We=Ue[0],He=Ue[1],je=(0,E.useState)(),Ge=(0,r.Z)(je,2),ze=Ge[0],Ke=Ge[1],qe=(0,E.useState)((0,L.r)()),Je=(0,r.Z)(qe,2),Ye=Je[0],Qe=Je[1],Xe=(0,E.useState)(fe),$e=(0,r.Z)(Xe,2),en=$e[0],nn=$e[1],tn=(0,E.useState)(!1),on=(0,r.Z)(tn,2),ln=on[0],rn=on[1],an=(0,E.useState)(!1),un=(0,r.Z)(an,2),dn=un[0],cn=un[1],sn=(0,E.useState)(b.L.Author),fn=(0,r.Z)(sn,2),vn=fn[0],mn=fn[1],hn=(0,E.useRef)(""),pn=(0,E.useRef)();we.current=Ae;var gn=function(){var e;null===(e=we.current)||void 0===e||e.update()};(0,E.useEffect)((function(){He(ue)}),[ue]);var wn=(0,E.useRef)(null),Cn=(0,E.useRef)(null),_n=(0,E.useCallback)((function(e){K.F.info({text:e},wn.current)}),[]);(0,E.useEffect)((function(){var e=function(){var e,n;Qe((function(e){return!e})),null===(e=we.current)||void 0===e||null===(n=e.update)||void 0===n||n.call(e)};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e);var n=document.documentElement,t=function(){var e;cn(null==n||null===(e=n.hasAttribute)||void 0===e?void 0:e.call(n,"header-with-bottom"))};t();var o=new MutationObserver(t);return o.observe(n,{attributes:!0,childList:!1,subtree:!1}),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e),o.disconnect(),k.Le.setConfig(k.gI.SlideStartTime,{slideStartTime:0})}}),[]),(0,E.useEffect)((function(){var e=T.listen(T.EVENT.changeMinWindows,(function(e){var n=e.isMiniWin;z.s.getPlayersByScene(S.lT.Modal).length>0||(n&&(hn.current=document.body.style.minWidth),document.body.style.minWidth=n?"auto":hn.current,document.body.style.overflow=n?"hidden":"",Ce.current=!0,rn(n),k.Le.setConfig(k.gI.IsMiniWin,n))}));return function(){return e()}}),[]),(0,E.useEffect)((function(){var e=T.listen(T.EVENT.pageFullScreen,(function(e){var n=e.fullScreen;0===z.s.getPlayersByScene(S.lT.Modal).length&&nn((function(e){return null!=n?n:!e}))}));return function(){null==e||e()}}),[]),(0,E.useEffect)((function(){var e=a()((function(){try{var e=document.getElementById("slidelist");e instanceof Element&&"flex"!==getComputedStyle(e).display&&x.oe.event.error({name:x.Mo.CssDroped})}catch(n){}}),5e3);return function(){clearTimeout(e)}}),[]);var In=(0,E.useRef)(0);(0,E.useEffect)((function(){if(Ae){var e=function(){T.emit(T.EVENT.tabContainerScroll,{tab:"recommend",scrollType:Ae.activeIndex>In.current?"down":"up"}),In.current=Ae.activeIndex};return Ae.on("slideChange",e),function(){Ae.off("slideChange",e)}}}),[Ae]),(0,E.useEffect)((function(){if(Ee){var e=d()(N.Z).call(N.Z,Ee,gn);return function(){e&&(null==e||e())}}}),[Ee]);var En,yn=(0,E.useMemo)((function(){return ln||Ye||en}),[ln,Ye,en]),bn=(0,E.useMemo)((function(){var e=ne;return dn&&(e-=30),{nextSwiperHeaderHeightIn:e>=0?e:0,cardBetweenIn:Q,upperSpaceIn:$}}),[dn,ne,Q,$]),Sn=(0,E.useMemo)((function(){var e=bn.nextSwiperHeaderHeightIn,n=bn.cardBetweenIn,t=bn.upperSpaceIn,o=function(e){var n,t,o=e.containerEl,l=e.nextSwiperHeaderHeight,r=e.cardBetween,i=e.upperSpace,a=(0,F.U)(l)?0:100*l,u=(0,F.U)(l)?l:0,d=o?(0,F.U)(r)?0:100*r:0,c=(0,F.U)(r)?r:o?0:24,s=(0,F.U)(i)?0:100*i,f=(0,F.U)(i)?i:0,v=f+c+u;return{swiperHeight:R()(n="calc(".concat(100-a-d-s,"% - ")).call(n,f+c+u,"px)"),calcUpperSpace:R()(t="calc(".concat(s,"% + ")).call(t,f,"px)"),calSpaceBetween:c||d/100*(null==o?void 0:o.offsetHeight),spacePixelSum:v}}({containerEl:Ee,nextSwiperHeaderHeight:e,cardBetween:n,upperSpace:t}),l=o.calcUpperSpace,r=o.calSpaceBetween,i=o.swiperHeight;return a()((function(){return null==Ae?void 0:Ae.update()})),{upperSpace:yn?0:l,swiperHeight:yn||pe===A.QB.Fullscreen?"100%":i,spaceBetween:yn?0:r}}),[bn,Ee,yn,pe]),An=(0,E.useRef)(new(s())),Ln=v()(n=[y.Ap.On,y.Ap.AvoidAd]).call(n,J.permanentDislikeBtn)&&se===j.R5.Recommend,kn=se===j.R5.Follow&&y.xN.LeftAuthorList===(null==J?void 0:J.followAuthorList),Tn=(0,E.useMemo)((function(){return{globalIsCommentShow:xe,setIsCommentShowFunc:Ne,globalIsCommentTrayPushGuideShow:Re,setIsCommentTrayPushGuideShowFunc:Fe,globalCommentTrayPushGuideType:Ve,setCommentTrayPushGuideTypeFunc:Be,globalIsRelatedShow:ze,setIsRelatedShowFunc:Ke,globalIsSideBarShow:We,setIsSideBarShowFunc:He,setTargetVideoRef:function(e){Cn.current=e.current},swiper:Ae,isFullScreen:Ye,isCssFullScreen:en,isClientMiniWin:ln,fullScreenTarget:Ee,videoToast:_n,slideVideoTab:vn,setSlideVideoTab:mn,dislikeIdList:An.current,collectionFolderInfo:ge}}),[xe,ze,We,Ae,Ye,en,ln,Ee,_n,vn,Re,Ve,ge]),xn=(0,E.useMemo)((function(){return{position:"absolute",left:0,top:de||Sn.upperSpace}}),[de,Sn]),Nn=yn?0:null!==(t=null==ae?void 0:ae.paddingLeft)&&void 0!==t?t:30,Pn=yn?0:null!==(i=null==ae?void 0:ae.paddingRight)&&void 0!==i?i:60,Mn=pe===A.QB.Fullscreen?"calc(100% + ".concat(Pn,"px)"):"100%";return h()(u=E.Children.toArray(te)).call(u,(function(e){var n;return(null==e||null===(n=e.props)||void 0===n?void 0:n.slot)===j.t6.OCCUPATION}))?E.createElement(E.Fragment,null,g()(En=E.Children.toArray(te)).call(En,(function(e){var n;if((null==e||null===(n=e.props)||void 0===n?void 0:n.slot)===j.t6.OCCUPATION)return e}))):E.createElement(P.C.Provider,{value:Tn},g()(c=E.Children.toArray(te)).call(c,(function(e){var n;if((null==e||null===(n=e.props)||void 0===n?void 0:n.slot)===j.t6.OUTOFCONTAINER)return e})),E.createElement("div",{id:"slidelist",className:I()(D,_,"fullscreen_capture_feedback",(f={},(0,l.Z)(f,I()(B,"isCssFullScreen"),yn),(0,l.Z)(f,"isMiniWindow",ln),f)),ref:ye,style:re},g()(m=E.Children.toArray(te)).call(m,(function(e){var n;if((null==e||null===(n=e.props)||void 0===n?void 0:n.slot)===j.t6.OUTSIDE)return e})),E.createElement(G.t,{onActiveIndexChange:function(){return k.Le.setConfig(k.gI.SlideStartTime,{slideStartTime:C()()})},direction:1,className:I()(V,"fullscreen_capture_feedback",M,U,(p={},(0,l.Z)(p,W,Ln),(0,l.Z)(p,H,kn),p)),style:(0,o.Z)((0,o.Z)((0,o.Z)({},xn),{},{width:Mn,height:Sn.swiperHeight,overflow:"visible"},ae),{},{paddingLeft:Nn,paddingRight:Pn}),data:ce,spaceBetween:Sn.spaceBetween,speed:250,touchRatio:2,resistanceRatio:yn?0:.7,ref:pn,onSwiper:function(e){Le(e),null==oe||oe(e)},slideKey:function(e){var n,t;return(null==e?void 0:e.awemeId)||(null==e||null===(n=e.cellRoom)||void 0===n||null===(t=n.rawdata)||void 0===t?void 0:t.id_str)},"data-e2e":"slideList",initIndex:ve},g()(w=E.Children.toArray(te)).call(w,(function(e){var n,t;if(v()(n=[j.t6.INSIDE,j.t6.CONTAINERSTART,j.t6.CONTAINEREND,j.t6.WRAPPERSTART,j.t6.WRAPPEREND]).call(n,null==e||null===(t=e.props)||void 0===t?void 0:t.slot))return e}))),E.createElement("div",{style:{marginLeft:Nn,marginRight:Pn},className:I()(O,"fullscreen_capture"),ref:wn}),E.createElement("div",{id:"fullscreen_capture_feedback"},E.createElement("div",{id:"fullscreen_capture"})),he&&E.createElement(Z.J,{EventListener:Ae,refContainerStatus:Ee,isCssFullScreen:en,isClientMiniWin:ln})))}},346:function(e,n,t){t.d(n,{J:function(){return _}});var o=t(30673),l=t(60260),r=t.n(l),i=t(56442),a=t.n(i),u=t(85792),d=t.n(u),c=t(94090),s=t.n(c),f=t(90173),v=t.n(f),m=t(11227),h=t.n(m),p=t(53864),g=t(5277),w=t(97876),C=t(71116),_=function(e){var n=e.EventListener,t=e.refContainerStatus,l=(e.isCssFullScreen,e.isClientMiniWin),i=(0,p.useRef)(!1),u=(0,p.useRef)(null),c=(0,p.useRef)([]),f=(0,p.useRef)(null),m=(0,p.useRef)(null),_=(0,p.useRef)((0,g.vU)()?120:0),I=(0,p.useCallback)((function(e,n){for(var t=0,o=a()(e).call(e,Math.max(e.length-n,1)),l=0;l<o.length;l++)t+=o[l];return Math.ceil(t/n)}),[]),E=(0,p.useCallback)((function(){w.emit(w.EVENT.swiperVideo)}),[]),y=(0,p.useCallback)((function(e){var t,l;E(),null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),u.current&&clearTimeout(u.current),u.current=d()((function(){c.current=[]}),400);var r=(new Date).getTime(),i=e.wheelDelta||-e.deltaY||-e.detail,a=Math.max(-1,Math.min(1,i)),h="undefined"!=typeof e.wheelDeltaX||"undefined"!=typeof e.deltaX,p=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!h;c.current=s()(l=[]).call(l,(0,o.Z)(c.current),[_.current+Math.abs(i)]);var g,w=r-f.current;(f.current=r,w>400)&&(1===c.current.length&&(c.current=v()(g=new Array(2)).call(g,c.current[0]),m.current=!1));var C=I(c.current,20)>I(c.current,40);C&&!m.current&&p&&(a<0?n.emit("changeNext",{from:"scroll"}):n.emit("changePrev",{from:"scroll"}),m.current=!0),!C&&m.current&&p&&(m.current=!1)}),[n]);return(0,p.useEffect)((function(){if(n)return null==n||n.on("sliderMove",E),function(){null==n||n.off("sliderMove",E)}}),[n]),(0,p.useEffect)((function(){if(t)return null==t||t.addEventListener("wheel",y),function(){null==t||t.removeEventListener("wheel",y)}}),[t,y]),(0,p.useEffect)((function(){var e=l?[38]:[38,87],t=l?[40]:[40,83],o=r()((function(o){var l,r;o.nativeEvent||null!==(l=C.Le.getConfig(C.gI.IsInModalVideo))&&void 0!==l&&l.isInModal||null!==(r=C.Le.getConfig(C.gI.PlayerShortcutConf))&&void 0!==r&&r.pausePlayControlShortcut||i.current||(h()(e).call(e,o.keyCode)&&!o.shiftKey?n.emit("changePrev",{from:"keyboard"}):h()(t).call(t,o.keyCode)&&!o.shiftKey&&n.emit("changeNext",{from:"keyboard"}))}),500,{leading:!0,trailing:!1});document.addEventListener("keydown",o);var a=w.listen(w.EVENT.showLoginPane,(function(e){i.current=e}));return function(){document.removeEventListener("keydown",o),a()}}),[l,n]),null}},27389:function(e,n,t){t.d(n,{_:function(){return g}});var o=t(65146),l=t(32781),r=t(53864),i=t(79705),a=t.n(i),u=t(5277),d=t(85649),c="OaNxZqFU",s="TZSoTPGl",f="FX_a7Anw",v="vGUlZ5X0",m="WNh_uenW",h="pTNkN0cC",p="OvBj617m",g=function(e){var n,t,i,g,w,C,_,I,E,y,b=e.awemeInfo,S=e.disableFilter,A=void 0===S?(0,u.b_)():S,L=e.useServerFilterCover,k=void 0===L?(0,u.Sb)():L,T=(0,u.G6)()||A,x=(0,u.GP)(),N=!T&&k,P=null==b||null===(n=b.video)||void 0===n?void 0:n.gaussianCover,M=!1,R=(null==b||null===(t=b.video)||void 0===t?void 0:t.originCover)||(null==b||null===(i=b.cellRoom)||void 0===i||null===(g=i.rawdata)||void 0===g||null===(w=g.cover)||void 0===w||null===(C=w.url_list)||void 0===C?void 0:C[0])||(null==b||null===(_=b.varietyVideo)||void 0===_||null===(I=_.cover)||void 0===I||null===(E=I.url_list)||void 0===E?void 0:E[0]);T?R=d:N&&P&&(R=P,M=!0);var F=(0,r.useState)(!1),Z=(0,l.Z)(F,2),D=Z[0],V=Z[1];return r.createElement("div",{className:a()((y={},(0,o.Z)(y,c,!T),(0,o.Z)(y,m,T),(0,o.Z)(y,h,x),(0,o.Z)(y,p,(0,u.vU)()),(0,o.Z)(y,f,M&&P),(0,o.Z)(y,s,D),y))},r.createElement("img",{elementtiming:"lcp_ele",src:globalThis.xssNamespace.douyin_web.filterUrl(R,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onError:function(){return V(!0)}}),!T&&r.createElement("div",{className:v}))}},5237:function(e,n,t){t.d(n,{Z:function(){return _l}});var o,l,r=t(65902),i=t(53864),a=t(54867),u=t(65146),d=t(30906),c=t(32781),s=t(11227),f=t.n(s),v=t(85792),m=t.n(v),h=t(79705),p=t.n(h),g=t(59676),w=t(91287),C=t(7793),_=t(83400),I=t(45992),E=t(92267),y=t(79784),b=t(64153),S=t(18121),A=t(91704),L=t(56920),k=t(50799),T=t(50230),x=t(2433),N=t(36177),P=t(90037),M=t(72603),R=t(25902),F=t(97876),Z=t(71116),D=t(44833),V=t(5277),B=t(5611),O=t(78384),U=t(46973),W=t(76475),H=t(23860),j={miniModalContainer:"V0UtprL9",miniModalFullScreen:"bhAHYvBl",playerCommentWrapper:"BasEuG5Q",adapterMiniHeight:"v9kM3lLX",adapterMiniHeightWithDislikeBtn:"q1jBdH4G",isFullScreen:"Hyz2IPtM",flex:"TebsBf5N",searchFit:"vI2dBU_E",playerContainer:"JrMwkvQy",sideBar:"_QjzkgP3",shopSidebar:"B2RDqklc",sideBarDefaultWidth:"Vw_S4MTA",force280pxWidth:"PfRJulgm",bgColorDarken1:"XbHOr8Q9",bgColorDarken2:"jmJm7hIH",middle:"IKYeXYSU",sideBarInnerWrapper:"aDQw7OWI",sideBarInnerHidden:"JFWzESlW",relatedVertical:"_628BWQES",inFullScreen:"UOaw2vqQ",sideBarHidden:"z_zS3jcn",noTransition:"dLCldFlr",displayNone:"lKzLJFSO",showSideBar:"WQ9IVUcw",interactionPos:"d6KxRih3",isSafari:"iCowLMOb",videoImage:"tmnnAC_V",isHavePlayer:"YFEqUSvt",playerWrap:"zK9etl_2",electronDrag:"BPENXcZt",btn:"DZKZZklc",openBtn:"EubOZ5gx",putBtn:"PYTxzIym",backgroundImg:"xj1RiyWp",backgroundMask:"wJpPeiLL",backgroundImgSarari:"P3E7hgC1",videoInfoContainer:"SJ5sF5nc",title:"khzeaon8",infoContainer:"JaYdjxRC",time:"AhJ8hWxq",reportTool:"H6NT0VBm",report:"yavyq0oB",publishTime:"PFGVlK2h",statsContainer:"mBO0vG_k",count:"h7_r8hcK",statsItem:"nncDksWG",share:"m9a8_3Vn",active:"Ru9aifIP",iconSvg:"n3xjp4su",shareContainer:"wwDXEwyp",shareBox:"vBD_jYVn",shareBoxHidden:"p4vYfRo6",miniScreenBtn:"iTHRSMu9",hidden:"lwX1O7tx",imgPlaceHolder:"vrCAuyeG",programCardHidden:"KCb1cWZJ",linkHashTag:"SDyNVZCs",hide:"ccj5MUrc",inOutFeed:"Y383Ug7n",miniWidth:"xFpO50wq",adapterThird:"YLVVkbsP",adapterSeventh:"nQWxAwdY",shopCard:"kMf5pi_F",playSwitch:"isuD7dEZ"},G=t(12827),z=t(18255),K=t(8e3),q=t.n(K),J=t(34346),Y=t.n(J),Q=t(94090),X=t.n(Q),$=t(13795),ee={clickAuthorHead:{eventName:"click_author_head",params:{click_from:"",action:"open",author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",is_full_webscreen:"",log_pb:"",from_follow_list:"0",from_xigua:0,music_id:"",aweme_type:"",clarity:"",is_auto:1,to_user_id:"",is_co_publish:0,co_publish_author_list:undefined}},clickCommentButton:{eventName:"click_comment_button",params:{action:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",from_follow_list:"0",relation:"",clarity:"",aweme_type:"",click_from:"",item_duration_ms:0}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_xigua:0,relation:"",from_group_id:"",music_id:"",compilation_id:"",aweme_type:"",is_pure:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",relation:"",from_group_id:"",music_id:"",compilation_id:""}},volumeNormReady:{eventName:"volume_norm_ready",params:{state:"",isReady:undefined,muted:undefined,volume:undefined,enter_from:"",peak:undefined,loudness:undefined,vid:""}},volumeNormError:{eventName:"volume_norm_error",params:{state:"",error:"",muted:undefined,volume:undefined,currentTime:undefined,enter_from:"",peak:undefined,loudness:undefined,vid:""}},videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:"",is_small_window:"0",is_update:"",is_seen:""}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:"",is_small_window:"0",is_update:"",is_seen:""}},closePlayer:{eventName:"close_player",params:{click_method:"",enter_from:""}},dislikeRecallShow:{eventName:"dislike_recall_show",params:{}},dislikeRecallClick:{eventName:"dislike_recall_click",params:{}}},ne=new $.hD(ee),te=function(e){var n,t,o,l={to_user_id:null==e||null===(n=e.authorInfo)||void 0===n?void 0:n.uid,is_co_publish:0,co_publish_author_list:undefined};if((null==e||null===(t=e.cooperationInfo)||void 0===t||null===(o=t.cooperationCreators)||void 0===o?void 0:o.length)>1){var r,i;l.is_co_publish=1;var a=null==e||null===(r=e.cooperationInfo)||void 0===r||null===(i=r.cooperationCreators)||void 0===i?void 0:q()(i).call(i,(function(e){return e.roleId!==y.CooperationRoleId.Author}));null!=a&&a.length&&(l.co_publish_author_list=Y()(a).call(a,(function(e){var n;return X()(n="".concat(e.uid,"_")).call(n,null==e?void 0:e.roleId)})))}return l},oe=t(34590),le=t(25546),re=t(96533),ie=t(75422),ae=t(35667),ue=function(e){var n=(0,ae.n)(),t=e.onPlayer;return(0,i.useEffect)((function(){n&&(null==t||t(n))}),[n]),null},de=t(35323),ce=t.n(de),se=t(19478),fe=t.n(se),ve=t(67624),me=t.n(ve),he=t(38660),pe=t(56042),ge=t(31554),we=function(e){var n=e.originAwemeInfo,t=e.player,o=e.toast,l=e.isActive,r=e.isLast,u=e.modalEnterFrom,d=e.handleNextOnLast,s=e.handleOuterPlayNext,f=e.handleOuterPlayPrev,v=e.handlePrev,h=e.handleNext,p=e.isInnerFeedCondition,g=e.scene,w=(0,i.useState)(n),_=(0,c.Z)(w,2),I=_[0],E=_[1],y=(0,i.useState)(null),b=(0,c.Z)(y,2),S=b[0],A=b[1],L=(0,i.useState)(null),k=(0,c.Z)(L,2),T=k[0],N=k[1],P=(0,i.useRef)({}),M=(0,i.useRef)(),R=(0,i.useRef)(!0);M.current!==n&&(R.current=!0,M.current=n);var D=R.current?n:I,V=(0,i.useMemo)((function(){return null!=p?p:n.awemeId!==I.awemeId}),[p,n,I]),B=(0,i.useCallback)((function(e){var t,o,r=e.inComingAwemeInfo,i=e.card;if(i){var a=Z.Le.getConfig(Z.gI.PlayerCardInfo);Z.Le.setConfig(Z.gI.PlayerCardInfo,{isActive:(null==r?void 0:r.awemeId)===(null==n?void 0:n.awemeId)||l,videoCardType:i!==x.L.Comment?i:null==a?void 0:a.videoCardType,expandCardType:"chat"===i?null==a?void 0:a.expandCardType:i})}(null==r?void 0:r.awemeId)===(null==I?void 0:I.awemeId)&&(null==r||null===(t=r.authorInfo)||void 0===t?void 0:t.uid)===(null==I||null===(o=I.authorInfo)||void 0===o?void 0:o.uid)&&"im"!==u||(ce()(r,"logPb",(null==r?void 0:r.scrollLogPb)||(null==r?void 0:r.logPb)),R.current=!1,E((function(){return r})),m()((function(){F.emit(F.EVENT.feedVideoCardLocateCurrentVideo)})))}),[I,null==n?void 0:n.awemeId,t]);(0,C.Z)((function(){l&&F.emit(F.EVENT.videoChange)}),[I,l]),(0,C.Z)((function(){l&&t&&(t.replayed=!1,g!==a.lT.Recommend||p||(0,pe.Ci)())}),[I,l,t]);var O=(0,i.useCallback)(fe()((function(e){if(l){(0,ge.removeLoginPanel)();var n=null==e?void 0:e.from;(0,he.Y3)(n);if(V||g===a.lT.Search){var i,u=null===(i=Z.Le.getConfig(Z.gI.PlayerCardInfo))||void 0===i?void 0:i.videoCardType,c=new(me())([[x.L.Related,"\u8be5\u89c6\u9891\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[x.L.Music,"\u8be5\u97f3\u4e50\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[x.L.Topic,"\u8be5\u8bdd\u9898\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[x.L.Mix,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.Author,"\u8be5\u4f5c\u8005\u5df2\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.Comment,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.CollectFolder,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.Search,"\u6682\u65e0\u66f4\u591a\u641c\u7d22\u7ed3\u679c"],[x.L.Like,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.Collection,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[x.L.Record,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"]]),f=new(me())([[x.L.Related,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891"],[x.L.Music,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u97f3\u4e50\u89c6\u9891"],[x.L.Topic,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u8bdd\u9898\u89c6\u9891"],[x.L.Mix,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.Author,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"],[x.L.Comment,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.CollectFolder,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.Search,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362\uff0c\u8bf7\u5728\u300c\u641c\u7d22\u7ed3\u679c\u300d\u4e2d\u9009\u62e9"],[x.L.Like,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.Collection,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.Record,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"]]);if(T)B({inComingAwemeInfo:T,card:u}),"scroll"!==n&&"keyboard"!==n&&"auto"!==n||F.emit(F.EVENT.reportPlayNext,{clickFrom:n});else if("auto"===n)t&&(t.isReplay=!0,t.replay(),t.replayed=!0);else if(null===T){var v=f.get(u);v&&o(v)}else{var m=c.get(u);m&&o(m)}}else r&&(null==d||d()),s(e),r&&"auto"===(null==e?void 0:e.from)&&t&&(t.isReplay=!0,t.replay(),t.replayed=!0);null==h||h()}}),400,{leading:!0,trailing:!1}),[T,t,l,d,V,r,s]),U=(0,i.useCallback)(fe()((function(e){if(l){(0,ge.removeLoginPanel)();var n=null==e?void 0:e.from;if((0,he.Y3)(n),V){var t,r=null===(t=Z.Le.getConfig(Z.gI.PlayerCardInfo))||void 0===t?void 0:t.videoCardType,i=new(me())([[x.L.Related,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891"],[x.L.Music,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u97f3\u4e50\u89c6\u9891"],[x.L.Topic,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u8bdd\u9898\u89c6\u9891"],[x.L.Mix,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[x.L.Author,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"],[x.L.Search,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"]]);if(S)B({inComingAwemeInfo:S,card:r}),"scroll"!==n&&"keyboard"!==n&&"auto"!==n||F.emit(F.EVENT.reportPlayPrev,{clickFrom:n});else if(null===S){var a=i.get(r);a&&o(a)}}else m()((function(){return null==f?void 0:f(e)}),0);null==v||v()}}),400,{leading:!0,trailing:!1}),[S,l,V,f]),W=(0,i.useCallback)((function(e){var n=e.logParams;P.current=n}),[]);return{awemeInfo:D,updateAwemeInfo:B,changePrevVideo:U,changeNextVideo:O,setPrevAwemeInfo:A,setNextAwemeInfo:N,nextAwemeInfo:T,prevAwemeInfo:S,isInnerFeed:V,updateLogParams:W}},Ce=t(50051),_e=function(e){var n,t=e.awemeInfo,o=e.scene,l=e.modalEnterFrom,r=e.filterData,u=e.currentVideoFeedRef,d=e.lastVideoFeedAwemeRef,c=e.outFeedItem,s=e.isInnerFeed,v=(e.abtestData,[]),m=(0,i.useCallback)((function(e){var n,o,l,r=((null===(n=e||t)||void 0===n||null===(o=n.webRawData)||void 0===o||null===(l=o.CTR)||void 0===l?void 0:l.recommendScore)||{}).showRelateVideo;return r===N.TP.ShowSideCarOnly||r===N.TP.ShowAll}),[t]),h=(0,i.useMemo)((function(){var e,n,r,i,f,v,h,p=[x.L.Comment];if((null==t?void 0:t.awemeType)===(null==y?void 0:N.ed.XgVideo)||(0,_.Jt)(t)||(0,_.gc)(t)||p.unshift(x.L.Author),"collection_folder"===l)p.unshift(x.L.CollectFolder);return(0,Ce.n)(t)||(0,_.Jt)(t)||!(o===a.lT.Recommend&&m()||s&&m(c)&&(null==c?void 0:c.awemeId)===t.awemeId||(null===(e=d.current)||void 0===e||null===(n=e[x.t.Related])||void 0===n?void 0:n.awemeId)===t.awemeId||u.current===x.t.Related||o===a.lT.Topic)||p.push(x.L.Related),null==t||null===(r=t.mixInfo)||void 0===r||!r.mixId||null!=t&&null!==(i=t.seriesInfo)&&void 0!==i&&i.seriesId||p.push(x.L.Mix),null!=t&&null!==(f=t.seriesInfo)&&void 0!==f&&f.seriesId&&p.push(x.L.Series),null!=t&&t.hotList&&51!==(null==t||null===(v=t.hotList)||void 0===v?void 0:v.rank)&&2!==(null==t||null===(h=t.hotList)||void 0===h?void 0:h.type)&&p.push(x.L.Hot),p}),[t,l,o,u.current,c,s,m,d.current]);return f()(n=[a.lT.Recommend,a.lT.Follow,a.lT.Friend,a.lT.Modal,a.lT.Topic,a.lT.Search]).call(n,o)&&(v=h),{showRelatedTabList:(0,i.useMemo)((function(){return r?r(v):v}),[v,r])}},Ie=t(58144),Ee=t.n(Ie),ye="RWxqX3yv",be="Wy3jDyjP",Se="MN8dFKun",Ae="pdekmrQO",Le="v0zdIvd4",ke="olWWa3YB",Te="s4S9hQQR",xe="BBvi2cJk",Ne="RUCJaKbm",Pe="JAlFtg8R",Me=function(e,n){var t,o=(n||{}).needFoldText,l=void 0!==o&&o,r=null==e||null===(t=e.suggestWords)||void 0===t?void 0:Ee()(t).call(t,(function(e){return e.scene===N.gQ.FeedBottomRec}));if(r){var i=r.words,u=void 0===i?[]:i,d=r.hintText,c=(null==u?void 0:u.length)||0,s=Y()(u).call(u,(function(e,n){var t,o=e.word;return o?{index:n,type:a.WZ.RelatedSearch,title:l?"".concat(d):X()(t="".concat(d,"\uff1a")).call(t,o),word:o,hintText:d,searchWord:e,wordsNum:c,itemClassName:p()(ye),textClassName:p()(Ne)}:null}));return s}return[]},Re=function(e){for(var n,t,o,l=e.useCTR,r=e.awemeInfo,i=e.scene,u=e.showRelatedTabList,d=(e.isActive,e.abtestData),c=e.recommendScore,s=(void 0===c?{}:c)||{},v=s.showHot,m=s.showMix,h=s.showRelateSearch,p=s.showRelateVideo,g=[{isShow:(!l||1!==(null==d?void 0:d.searchUseCtr)||m)&&(null==r||null===(n=r.seriesInfo)||void 0===n?void 0:n.seriesId),cardTab:x.L.Series,feedBarTag:a.WZ.Series},{isShow:!l||m,cardTab:x.L.Mix,feedBarTag:a.WZ.Mix},{isShow:!l||v,cardTab:x.L.Hot,feedBarTag:a.WZ.Hot},{isShow:(!l||1!==(null==d?void 0:d.searchUseCtr)||h)&&(null===(t=Me(r))||void 0===t?void 0:t.length)&&i!==a.lT.Friend,feedBarTag:a.WZ.RelatedSearch},{isShow:!l||p===N.TP.ShowAll,cardTab:x.L.Related,feedBarTag:a.WZ.Related}],w=0;w<g.length;w++){var C=g[w],_=C.cardTab,I=C.feedBarTag,E=C.isShow;if((f()(u).call(u,_)||I===a.WZ.RelatedSearch)&&E){o=I;break}}return o},Fe=function(e){var n=e.awemeInfo,t=e.showRelatedTabList,o=void 0===t?[]:t,l=e.clickedCard,r=e.isActive,u=e.useCTR,d=void 0===u||u,c=e.scene,s=e.abtestData;(0,i.useEffect)((function(){var e=Z.Le.getConfig(Z.gI.PlayerCardInfo);return l&&Z.Le.setConfig(Z.gI.PlayerCardInfo,{isActive:r,videoCardType:l!==x.L.Comment?l:null==e?void 0:e.videoCardType,expandCardType:l}),function(){Z.Le.setConfig(Z.gI.PlayerCardInfo,null)}}),[]);var v={defaultCard:l||x.L.Author,videoTag:""},m=(0,i.useMemo)((function(){return d?function(e){var n,t,o=e||{},l=o.clickedCard,r=o.showRelatedTabList,i=o.awemeInfo,u=o.scene,d=o.isActive,c=o.abtestData,s=(null==i||null===(n=i.webRawData)||void 0===n||null===(t=n.CTR)||void 0===t?void 0:t.recommendScore)||{},f=s.showRelateSearch,v={defaultCard:l||x.L.Author,videoTag:""};if(u===a.lT.Recommend)i.awemeType===N.ed.XgVideo?v.defaultCard=x.L.Related:v.videoTag=Re({useCTR:!0,awemeInfo:i,scene:u,showRelatedTabList:r,isActive:d,abtestData:c,recommendScore:s});else if(i.awemeType===N.ed.XgVideo)v.defaultCard=x.L.Related;else if(i.awemeType===N.ed.Normal)v.videoTag=Re({useCTR:!0,awemeInfo:i,scene:u,showRelatedTabList:r,isActive:d,abtestData:c,recommendScore:s});else if(i.awemeType===N.ed.Note){var m;(1!==(null==c?void 0:c.searchUseCtr)||f)&&null!==(m=Me(i))&&void 0!==m&&m.length&&u!==a.lT.Friend&&(v.videoTag=a.WZ.RelatedSearch)}return v}({showRelatedTabList:o,awemeInfo:n,clickedCard:l,scene:c,isActive:r,abtestData:s}):function(e){var n,t=e||{},o=t.clickedCard,l=t.showRelatedTabList,r=t.awemeInfo,i=t.scene,u=t.isActive,d=t.abtestData,c={defaultCard:o||x.L.Author,videoTag:""};if(i===a.lT.Recommend)f()(n=[N.ed.XgVideo]).call(n,r.awemeType)||(c.videoTag=Re({useCTR:!1,awemeInfo:r,scene:i,showRelatedTabList:l,isActive:u,abtestData:d}));else if(r.awemeType===N.ed.Normal)c.videoTag=Re({useCTR:!1,awemeInfo:r,scene:i,showRelatedTabList:l,isActive:u,abtestData:d});else if(r.awemeType===N.ed.Note){var s;null!==(s=Me(r))&&void 0!==s&&s.length&&i!==a.lT.Friend&&(c.videoTag=a.WZ.RelatedSearch)}return c}({showRelatedTabList:o,awemeInfo:n,clickedCard:l,scene:c,isActive:r,abtestData:s})}),[n,o,d,l,c,r,s]);return n?l?{defaultCard:l,videoTag:m.videoTag}:m:v},Ze=t(61508),De=t(353),Ve=t(13971),Be=t(81762),Oe=t(7786),Ue=function(e){var n;return(n={},(0,u.Z)(n,x.L.Author,x.t.Author),(0,u.Z)(n,x.L.Mix,x.t.Mix),(0,u.Z)(n,x.L.Series,x.t.Series),(0,u.Z)(n,x.L.Search,x.t.Search),(0,u.Z)(n,x.L.CollectFolder,x.t.CollectFolder),(0,u.Z)(n,x.L.Collection,x.t.Collection),(0,u.Z)(n,x.L.Hot,x.t.Hot),(0,u.Z)(n,x.L.Related,x.t.Related),(0,u.Z)(n,x.L.Search,x.t.Search),(0,u.Z)(n,x.L.Record,x.t.Record),(0,u.Z)(n,x.L.Like,x.t.Like),n)[e]},We=function(e){var n=e.defaultTab,t=e.isActive,o=e.stopAutoPlay,l=e.awemeInfo,r=e.abtestData,a=(0,i.useState)(n),s=(0,c.Z)(a,2),f=s[0],v=s[1],h=(0,i.useState)(Ue(f)),p=(0,c.Z)(h,2),g=p[0],w=p[1],C=(0,i.useState)((function(){if(Ue(f))return(0,u.Z)({},Ue(f),l)})),_=(0,c.Z)(C,2),I=_[0],E=_[1],y=(0,i.useRef)(n),b=(0,i.useRef)(r),S=(0,i.useRef)(!1);y.current=f,b.current=r;var A=(0,i.useCallback)((function(e){var n=e.tab,t=e.from;if(v((function(e){var l,i=null===(l=Z.Le.getConfig(Z.gI.IsInLookMiniModal))||void 0===l?void 0:l.isInMiniModal;if(e!==n&&(e===x.L.Mix||e===x.L.Series)&&i&&null!=r&&r.mixCardAutoplay){var a=Z.Le.getConfig(Z.gI.AutoPlayChanged),u=Oe.s.getPlayer(Oe.s.lastRegisterPlayerId);null!=a&&a.changed||null==a||!a.autoEmit||(null==u||u.emit(Be.B.UpdateAutoPlaySwitch,{isInnerReset:!1}),F.emit(F.EVENT.changeInnerAutoPlay,2),Z.Le.setConfig(Z.gI.AutoPlayChanged,{autoEmit:!1}))}return e!==n&&"auto"!==t&&(null==o||o()),n})),n!==x.L.Comment&&F.emit(F.EVENT.changeTab,n),n){var l=Z.Le.getConfig(Z.gI.PlayerCardInfo);Z.Le.setConfig(Z.gI.PlayerCardInfo,{isActive:!0,videoCardType:n!==x.L.Comment?n:null==l?void 0:l.videoCardType,expandCardType:n})}}),[o,r]),L=(0,i.useCallback)((function(){v(null),w(undefined)}),[]);return(0,i.useEffect)((function(){t&&n&&v(n)}),[t]),(0,i.useEffect)((function(){f!==x.L.Comment&&f&&w((function(e){var n=Ue(f);return n!==e?n:(E((function(n){return(0,d.Z)((0,d.Z)({},n),{},(0,u.Z)({},e,l))})),e)}))}),[f,l]),(0,i.useEffect)((function(){var e,n=function(){var e=Oe.s.getPlayer(Oe.s.lastRegisterPlayerId),n=Number((0,Ve.$o)(De.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY)),t=Z.Le.getConfig(Z.gI.AutoPlayChanged);n||null!=t&&t.changed||(null==e||e.emit(Be.B.UpdateAutoPlaySwitch,{isInnerReset:!1}),Z.Le.setConfig(Z.gI.AutoPlayChanged,{autoEmit:!0}),F.emit(F.EVENT.changeInnerAutoPlay,0))},o=null===(e=Z.Le.getConfig(Z.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;if(o&&(S.current=o),t&&((f===x.L.Mix||f===x.L.Series)&&o&&null!=r&&r.mixCardAutoplay?Z.Le.setConfig(Z.gI.IsInMixCard,!0):Z.Le.setConfig(Z.gI.IsInMixCard,!1)),t&&(f===x.L.Mix||f===x.L.Series)&&o&&null!=r&&r.mixCardAutoplay){var l=null===Oe.s||void 0===Oe.s?void 0:Oe.s.getAllPlayer();(null==l?void 0:l.length)>1?n():m()((function(){n()}),500)}}),[f,t,r]),{curTab:f,changeTab:A,curVideoFeed:g,clearTab:L,lastVideoFeedAweme:I}},He=function(e){var n=e.awemeInfo,t=e.onAwemeInfoChange;(0,i.useEffect)((function(){var e;(null===(e=Z.Le.getConfig(Z.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)&&F.emit(F.EVENT.livePause)}),[]),(0,i.useEffect)((function(){null==t||t({awemeInfo:n})}),[n])},je=function(e){var n=e.onChangeAwemeInfo,t=(0,i.useCallback)((function(e){return n({inComingAwemeInfo:e,card:x.L.Author})}),[n]),o=(0,i.useCallback)((function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:x.L.Related;n({inComingAwemeInfo:e,card:t})}),[n]);return{handleAuthorVideoChange:t,handleOtherVideoChange:o}},Ge=t(64408),ze=t(5594),Ke=t.n(ze),qe=t(42223),Je="",Ye=null,Qe=function(e){var n,t=e.awemeInfo,o=(e.enablePreload,(0,i.useState)((null==t||null===(n=t.stats)||void 0===n?void 0:n.commentCount)||0)),l=(0,c.Z)(o,2),r=l[0],a=l[1];(0,i.useEffect)((function(){var e;a((null==t||null===(e=t.stats)||void 0===e?void 0:e.commentCount)||0)}),[t]);var u=(0,i.useCallback)(function(){var e=(0,Ge.Z)(Ke().mark((function e(n,o,l,r,i,a){var u,d,c,s,f,v,m,h,p=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=p.length>6&&p[6]!==undefined&&p[6],v=null==t?void 0:t.awemeId,m=X()(u=X()(d=X()(c=X()(s="".concat(v,"-0-")).call(s,o,"-")).call(c,n,"-")).call(d,i,"-")).call(u,l),Je!==m||!Ye){e.next=5;break}return e.abrupt("return",Ye);case 5:return e.next=7,(0,qe.iq)({awemeId:null==t?void 0:t.awemeId,cursor:n,count:o,itemType:(null==t?void 0:t.awemeType)===N.ed.XgVideo?1:0,fetchType:l,cancleFunc:r,cid:i,whaleCutToken:a});case 7:return h=e.sent,f&&h&&(Je=m,Ye=h),e.abrupt("return",h);case 10:case"end":return e.stop()}}),e)})));return function(n,t,o,l,r,i){return e.apply(this,arguments)}}(),[null==t?void 0:t.awemeId]),d=(0,i.useCallback)((function(e,n,o,l){return(0,qe.rs)({awemeId:null==t?void 0:t.awemeId,commentId:e,cursor:n,count:o,itemType:(null==t?void 0:t.awemeType)===N.ed.XgVideo?1:0,whaleCutToken:l})}),[null==t?void 0:t.awemeId]),s=(0,i.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cursor,o=void 0===n?0:n,l=e.count,r=e.needPage,i=void 0===r||r,a=e.ctx,u=void 0===a?null:a;return(0,qe.Yp)({cursor:o,count:l,needPage:i,ctx:u,groupId:null==t?void 0:t.awemeId})}),[null==t?void 0:t.awemeId]),f=(0,i.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cid,o=e.diggType,l=e.level;return(0,qe.y6)({awemeId:null==t?void 0:t.awemeId,cid:n,diggType:o,itemType:(null==t?void 0:t.awemeType)===N.ed.XgVideo?1:0,level:l})}),[null==t?void 0:t.awemeId]),v=(0,i.useCallback)((function(){var e=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).cid;return(0,qe.YF)({cid:e})}),[]),m=(0,i.useCallback)((0,Ge.Z)(Ke().mark((function e(){var n,o,l,r,i,a,u,d,c=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&c[0]!==undefined?c[0]:{},o=n.text,l=n.textExtra,r=n.replyId,i=n.replyToReplyId,a=n.commentSendCelltime,u=n.commentVideoCelltime,e.next=3,(0,qe.uo)({awemeId:null==t?void 0:t.awemeId,text:o,textExtra:l,replyId:r,replyToReplyId:i,commentVideoCelltime:u,commentSendCelltime:a});case 3:return(d=e.sent).statusCode||F.emit(F.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"\u53ca\u65f6\u63a5\u6536\u4e92\u52a8\u6d88\u606f\u901a\u77e5"}),e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)}))),[null==t?void 0:t.awemeId]);return{globalCommentCount:r,updateGlobalCommentCount:a,fetchComment:u,fetchReply:d,fetchCommentMention:s,publishCommentItem:m,deleteCommentItem:v,diggCommentItem:f}},Xe=t(22867),$e=t(21518),en=(0,pe.fF)("CommentPreload"),nn=[L.wO.CommentPreloadHighThreshold,L.wO.CommentPreloadLowThreshold,L.wO.CommentPreloadAll],tn=t(5450),on=t(30978),ln=t(90511),rn=function(e){var n=e.awemeInfo,t=e.logParams,o=void 0===t?{}:t,l=e.originAwemeInfo,r=e.tagId,a=e.expandCard,u=e.curCard,c=void 0===u?"":u,s=e.isInnerFeedCondition,v=void 0!==s&&s,m=e.searchSideCardProps,h=e.modalEnterFrom,p=(0,i.useRef)(o),g=(0,i.useMemo)((function(){var e,t,o;return null!==(e=null===(t=Z.Le.getConfig(Z.gI.UnLookVideos))||void 0===t||null===(o=t[null==n?void 0:n.awemeId])||void 0===o?void 0:o.status)&&void 0!==e?e:""}),[n]);return(0,i.useEffect)((function(){var e,t,i,u,s,w,C,I,E,b,S,A,L,k=null==o?void 0:o.enter_from,T="";""!==c&&(T=c===a&&"comment"!==c?"1":"0");var R={};if((0,Ce.n)(n)){var F,V,B=(null==n||null===(F=n.anchorInfo)||void 0===F||null===(V=F.extra)||void 0===V?void 0:V[0])||{};R={anchor_product_comment_cnt:B.comment_count,anchor_product_category_id:B.front_category_id,anchor_product_price:B.price,anchor_product_sales:B.sales}}var O,U=(0,d.Z)((0,d.Z)((0,d.Z)({enter_from:(0,M.yW)()},o),{},{is_card_expand:T,from_group_id:null!==(e=o.from_group_id)&&void 0!==e?e:null==l?void 0:l.awemeId,music_id:null==n||null===(t=n.music)||void 0===t?void 0:t.mid,compilation_id:null==n||null===(i=n.mixInfo)||void 0===i?void 0:i.mixId,tag_id:r,from_xigua:(null==n?void 0:n.awemeType)===N.ed.XgVideo?1:0,insert_task_id:(null==n?void 0:n.libfinsertTaskId)||"0",enter_from_merge:(0,M.yW)(),search_params:null==n?void 0:n.searchLogParams,from_video_id:Z.Le.getConfig(Z.gI.PageEnterFromVideoID),is_seen:h===y.ModalEnterFromVal.FollowAuthorModal&&""===g?1:g,is_update:null!==(u=Z.Le.getConfig(Z.gI.UnLookVideos))&&void 0!==u&&u[null==n?void 0:n.awemeId]?1:0,post_time:(0,on.MH)(1e3*n.createTime),is_from_skylight:null!==(s=null==o?void 0:o.is_from_skylight)&&void 0!==s?s:0},(0,D.t)()),{},{is_co_publish:(null==n||null===(w=n.cooperationInfo)||void 0===w||null===(C=w.cooperationCreators)||void 0===C?void 0:C.length)>1?1:0,co_publish_author_list:null==n||null===(I=n.cooperationInfo)||void 0===I||null===(E=I.cooperationCreators)||void 0===E||null===(b=q()(E).call(E,(function(e){return e.roleId!==y.CooperationRoleId.Author})))||void 0===b?void 0:Y()(b).call(b,(function(e){var n;return X()(n="".concat(e.uid,"_")).call(n,null==e?void 0:e.roleId)})),cid:null===(S=(0,_.Rx)(n))||void 0===S?void 0:S.creative_id,if_qianchuan_ad:(0,_.nT)(n)===P.Z9.Live||(0,_.nT)(n)===P.Z9.ShopVideo?1:0,ad_type:(0,_.nT)(n),brand_ad_type:tn.AD_LOG_MAP[null==n||null===(A=n.webRawData)||void 0===A||null===(L=A.brandAd)||void 0===L?void 0:L.brand_type]},R),W=[x.L.Author,x.L.Hot,x.L.Mix,x.L.Music,x.L.Related,x.L.Topic,x.L.AwemeRelated,x.L.Search,x.L.History,x.L.Like,x.L.CollectFolder,x.L.Collection,x.L.Handpick];if(null!=v?v:(null==l?void 0:l.awemeId)!==(null==n?void 0:n.awemeId))if(f()(W).call(W,c))k=c;else{if(c===x.L.Comment){var H=Z.Le.getConfig(Z.gI.PlayerCardInfo),j=Z.Le.getConfig(Z.gI.CurLookCard);k=null!=j&&j.curCard?null==j?void 0:j.curCard:null!=H&&H.isActive&&null!=H&&H.videoCardType?null==H?void 0:H.videoCardType:null==o?void 0:o.enter_from}p.current=(0,d.Z)({},U)}Boolean(null==m?void 0:m.scene)&&(null==l?void 0:l.awemeId)!==(null==n?void 0:n.awemeId)&&!v&&(k=(0,ln.V)(null==m?void 0:m.scene,n,null==o||null===(O=o.search_params)||void 0===O?void 0:O.token_type),null!=m&&m.scene||(k="search_related_card"),Z.Le.setConfig(Z.gI.PlayerCardInfo,{videoCardType:k,expandCardType:k,isActive:!0}));p.current=k?(0,d.Z)((0,d.Z)({},U),{},{enter_from:k}):(0,d.Z)({},U)}),[o,c,a,n,l,r,g,v]),{reportParams:p.current}},an=function(e){var n=e.isActive,t=e.player,o=e.showSideCard,l=(0,i.useState)(!1),r=(0,c.Z)(l,2),a=r[0],u=r[1],d=(0,i.useRef)(!1);return(0,i.useEffect)((function(){var e,l;d.current?n&&o&&u(!0):l=m()((function(){n&&o&&u(!0)}),3e3);var r=function(){d.current=!0,clearTimeout(l),o&&u(!0)};return null==t||null===(e=t.on)||void 0===e||e.call(t,Ze.CANPLAY,r),function(){var e;null==t||null===(e=t.off)||void 0===e||e.call(t,Ze.CANPLAY,r),clearTimeout(l)}}),[t,n,o]),{hasRelatedCardShown:a}},un=t(67330),dn=t(34452),cn=t(83901),sn=t(55981),fn=t(12629),vn=t(48970),mn=t(92294),hn=t(73596),pn=t(67495),gn=t(51613),wn=t(12338),Cn=t(9729),_n=t(45021),In=function(e){var n=e.awemeInfo,t=(0,i.useState)((0,_n.g)(n)),o=(0,c.Z)(t,2),l=o[0],r=o[1];return(0,i.useEffect)((function(){r((0,_n.g)(n))}),[n]),{hotData:l}},En=(0,V.b_)(),yn=t(30673),bn=function(e){var n=e.scene,t=e.originAwemeInfo,o=e.awemeInfo,l=e.videoTag,r=e.toast,u=e.reportParams,s=void 0===u?{}:u,f=e.canShowMixCard,v=void 0!==f&&f,m=e.canShowSeriesCard,h=void 0!==m&&m,g=e.canShowRelatedCard,w=void 0!==g&&g,C=e.canShowRelatedSearchFeedBar,I=void 0!==C&&C,E=e.canShowChapterFeedbar,y=void 0!==E&&E,b=e.curCard,S=e.handleAvatarClick,A=e.handleMixClick,L=e.handleSeriesClick,k=e.handleRelatedClick,T=e.handleHotClick,P=e.isShowSideBar,V=e.isInnerFeed,B=(0,i.useState)(!1),O=(0,c.Z)(B,2),U=O[0],W=O[1],H=(0,i.useRef)(null!=l?l:""),j=(0,i.useCallback)((function(e,t){var l,i,u,c,f,v,m=te(o)||{},h=m.to_user_id,p=m.is_co_publish,g=m.co_publish_author_list;if((null==o?void 0:o.awemeType)===N.ed.XgVideo)return ne.sendLog("clickAuthorHead",(0,d.Z)((0,d.Z)({click_from:(null==t?void 0:t.clickMethod)||"head",action:"",urlParamList:["previous_page"],author_id:null==o||null===(c=o.authorInfo)||void 0===c?void 0:c.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:(0,M.mo)(),is_full_screen:(0,R.r)()?"1":"0",from_follow_list:null!==(f=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==f&&f.tag?"1":"0"},(0,D.t)()),s)),void((null==o?void 0:o.awemeType)===N.ed.XgVideo&&F.emit(F.EVENT.videoPause));if((0,_.Jt)(o)){if(n===a.lT.Recommend){var w;null==e||null===(w=e.preventDefault)||void 0===w||w.call(e),F.emit(F.EVENT.openAdSideCard);var C=(0,_.Rx)(o);return void(0,cn.E)("realtime_click",{tag:(0,pn.f)(),value:null==C?void 0:C.creative_id,log_extra:null==C?void 0:C.log_extra,refer:"source"})}var I;if((0,_.gc)(o))return null==e||null===(I=e.preventDefault)||void 0===I||I.call(e),void(r?r("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):oe.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"))}return(0,_.gc)(o)?(null==e||null===(v=e.preventDefault)||void 0===v||v.call(e),void oe.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd")):(null==e||null===(l=e.preventDefault)||void 0===l||l.call(e),ne.sendLog("clickAuthorHead",(0,d.Z)((0,d.Z)((0,d.Z)({click_from:(null==t?void 0:t.clickMethod)||"head",urlParamList:["previous_page"],author_id:null==o||null===(i=o.authorInfo)||void 0===i?void 0:i.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:(0,M.mo)(),is_full_screen:(0,R.r)()?"1":"0",from_follow_list:null!==(u=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==u&&u.tag?"1":"0"},s),{},{action:P&&b===x.L.Author?"close":"open"},(0,D.t)()),{},{to_user_id:h,is_co_publish:p,co_publish_author_list:g})),null==S||S(e,t),!0)}),[o,s,b,S,P]),G=(0,i.useCallback)((function(){null==T||T()}),[T]);(0,i.useEffect)((function(){var e=function(){W(window.innerWidth<700)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,i.useEffect)((function(){l&&t.awemeId===o.awemeId&&(H.current=l)}),[l]);var z=(0,i.useMemo)((function(){var e,n,l,r,i,u=[];if(v&&-1!==(null==o||null===(e=o.mixInfo)||void 0===e?void 0:e.status)){var d,c="\u5408\u96c6\uff1a".concat(null==o||null===(d=o.mixInfo)||void 0===d?void 0:d.mixName);u.push({type:a.WZ.Mix,title:c,onClick:function(e){return null==A?void 0:A(e)},itemClassName:p()(Se),textClassName:p()(Pe)})}if(h&&-1!==(null==o||null===(n=o.seriesInfo)||void 0===n?void 0:n.status)){var s,f="".concat(null==o||null===(s=o.seriesInfo)||void 0===s?void 0:s.seriesName);u.push({type:a.WZ.Series,title:f,onClick:function(e){return null==L?void 0:L(e)},itemClassName:p()(Se),textClassName:p()(Pe)})}if(null!=o&&null!==(l=o.hotList)&&void 0!==l&&l.title&&51!==(null==o||null===(r=o.hotList)||void 0===r?void 0:r.rank)&&2!==(null==o||null===(i=o.hotList)||void 0===i?void 0:i.type)){var m,g,C,E,b,S,T,x,N,P,M,R,F=null!=o&&null!==(m=o.hotList)&&void 0!==m&&m.rank?X()(g=X()(C="".concat(null==o||null===(E=o.hotList)||void 0===E?void 0:E.header,"TOP")).call(C,null==o||null===(b=o.hotList)||void 0===b?void 0:b.rank,"\uff1a ")).call(g,null==o||null===(S=o.hotList)||void 0===S?void 0:S.title):"\u7f6e\u9876\u70ed\u699c\uff1a".concat(null==o||null===(T=o.hotList)||void 0===T?void 0:T.title);u.push({type:a.WZ.Hot,title:F,customProps:{trending_topic:null==o||null===(x=o.hotList)||void 0===x?void 0:x.title,first_tag_name:null==o||null===(N=o.hotList)||void 0===N?void 0:N.header,top:null==o||null===(P=o.hotList)||void 0===P?void 0:P.rank},onClick:G,itemClassName:null!=o&&null!==(M=o.hotList)&&void 0!==M&&M.rank?p()(be):p()(Le),textClassName:null!=o&&null!==(R=o.hotList)&&void 0!==R&&R.rank?p()(ke):p()(Te)})}if(!w||(null==t?void 0:t.awemeId)!==(null==o?void 0:o.awemeId)||(0,_.Jt)(o)||(0,Ce.n)(o)||u.push({type:a.WZ.Related,title:"\u76f8\u5173\u63a8\u8350 \xb7 \u89c2\u770b\u66f4\u591a\u7cbe\u5f69\u89c6\u9891",onClick:k,itemClassName:p()(Ae),textClassName:p()(xe)}),I){var Z=Me(o,{needFoldText:!1});u.push.apply(u,(0,yn.Z)(Z))}return o.chapterInfo.status&&y&&u.push({type:a.WZ.Chapter}),V?q()(u).call(u,(function(e){return e.type===a.WZ.Chapter})):q()(u).call(u,(function(e){return e.type===a.WZ.Chapter||e.type===H.current}))}),[A,v,o,G,w,t,k,I,P,U,V]);return{videoInfoTags:z,onAvatarClick:j}},Sn=t(92264),An=t(68393),Ln=function(e){e.scene;var n=e.awemeInfo,t=e.scrollElRef,o=e.swiper,l=e.isActive,r=e.changeNextVideo,u=e.changePrevVideo,d=e.player,s=e.onFullScreen,f=e.onCssFullScreen,v=e.onFullScreenrestore,m=e.onTriggerModalPlayerClose,h=e.onChangeMinWindows,p=e.onCanPlay,g=e.onPlay,w=e.onEnterVideo,_=e.onLeaveVideo,I=e.onVideoTitleClick,E=e.feedCssFullScreen,y=(0,i.useState)(!1),b=(0,c.Z)(y,2),S=b[0],A=b[1],L=null!=E?E:S,k=(0,i.useState)(!1),T=(0,c.Z)(k,2),x=T[0],N=T[1],P=(0,Sn.O)().isFullscreen;(0,i.useEffect)((function(){var e,n,o,r,i=function(e){null==e||e.stopPropagation(),F.emit(F.EVENT.golbalEventPrevented)},a=function(e){null==e||e.stopPropagation(),F.emit(F.EVENT.golbalEventPrevented)};t.current&&(null===(e=t.current)||void 0===e||e.addEventListener("wheel",i),null===(n=t.current)||void 0===n||n.addEventListener("mousedown",a),null===(o=t.current)||void 0===o||o.addEventListener("pointerdown",a),null===(r=t.current)||void 0===r||r.addEventListener("touchstart",a));var u=F.listen(F.EVENT.pageFullScreen,(function(e){if(l){var n=e.fullScreen;A((function(e){return null!=n?n:!e}))}}));return function(){var e,n,o,l;null===(e=t.current)||void 0===e||e.removeEventListener("wheel",i),null===(n=t.current)||void 0===n||n.removeEventListener("mousedown",a),null===(o=t.current)||void 0===o||o.removeEventListener("pointerdown",a),null===(l=t.current)||void 0===l||l.removeEventListener("touchstart",a),null==u||u()}}),[t,d,l]),(0,i.useEffect)((function(){if(l&&o){var e=function(){(0,An.i0)(An.CK.User),r.apply(void 0,arguments)},n=function(){(0,An.i0)(An.CK.User),u.apply(void 0,arguments)};try{null==o||o.on("changeNext",e),null==o||o.on("changePrev",n)}catch(t){}return function(){try{null==o||o.off("changeNext",e),null==o||o.off("changePrev",n)}catch(t){}}}}),[l,o,r,u]),(0,C.Z)((function(){l&&(L||P||null==v||v())}),[P,L]),(0,C.Z)((function(){l&&(P?null==s||s(!0):null==s||s(!1))}),[P]),(0,C.Z)((function(){l&&(L?null==f||f(!0):null==f||f(!1))}),[L]),(0,i.useEffect)((function(){var e=F.listen(F.EVENT.triggerModalPlayerClose,m);return function(){null==e||e()}}),[m]),(0,i.useEffect)((function(){var e=F.listen(F.EVENT.changeMinWindows,(function(e){var n=Oe.s.getPlayersByScene(a.lT.Modal).length>0;if(Oe.s.getPlayerScene(null==d?void 0:d.playerId)===a.lT.Modal||!n){var t=(e||{}).isMiniWin;N(t),null==h||h(t)}}));return function(){return e()}}),[h,d]);var M=(0,i.useRef)(p);M.current=p,(0,i.useEffect)((function(){if(d&&l){var e=function(){var e;null===(e=M.current)||void 0===e||e.call(M)};return d.once("canplay",e),function(){d.off("canplay",e)}}}),[d,l]);var R=(0,i.useRef)(g);return R.current=g,(0,i.useEffect)((function(){if(d){var e=function(){var e;null===(e=R.current)||void 0===e||e.call(R)};return d.on("play",e),function(){d.off("play",e)}}}),[d]),(0,C.Z)((function(){l&&(null==w||w()),l||null==_||_()}),[l]),(0,i.useEffect)((function(){var e=F.listen(F.EVENT.videoTitleClick,(function(e){var t=e.awemeId,o=e.playerId;(null==n?void 0:n.awemeId)===t&&(null==d?void 0:d.playerId)===o&&(null==I||I())}));return function(){null==e||e()}}),[n,d,I]),{isCssFullScreen:L,isFullScreen:P,isMiniWin:x}},kn=function(e){var n=e.isActive,t=e.awemeInfo,o=e.isNext,l=e.scene,r=e.isUpperFeed,u=void 0!==r&&r,d=e.modalEnterFrom;(0,i.useEffect)((function(){if(t&&l!==a.lT.Search){if(u)return;if(n)F.emit(F.EVENT.postCurVideoInfo,{awemeId:null==t?void 0:t.awemeId,groupId:null==t?void 0:t.groupId,scene:l,suggestWords:null==t?void 0:t.suggestWords,modalEnterFrom:d}),Z.Le.getConfig(Z.gI.FirstFeedVideoSearchInfo)||Z.Le.setConfig(Z.gI.FirstFeedVideoSearchInfo,{awemeId:null==t?void 0:t.awemeId,groupId:null==t?void 0:t.groupId,scene:l,suggestWords:null==t?void 0:t.suggestWords,modalEnterFrom:d});else o&&F.emit(F.EVENT.postCurVideoInfo,{awemeId:null==t?void 0:t.awemeId,groupId:null==t?void 0:t.groupId,scene:l,suggestWords:null==t?void 0:t.suggestWords,preload:!0,modalEnterFrom:d})}}),[t,n,l,o])},Tn=function(e){var n=e.awemeInfo,t=e.customProps,o=e.reportParams,l=e.fullScreenTarget,r=e.tab,u=e.showSideCard,c=e.player,s=e.scrollElRef,f=e.followStatus,v=e.handleCommentClick,h=e.isShowRelatedCard,p=e.isActive,g=e.isUpperFeed,w=void 0!==g&&g,C=e.globalIsCommentTrayPushGuideShow,_=e.globalCommentTrayPushGuideType,I=e.setCommentTrayPushGuideTypeFunc,E=e.setIsCommentTrayPushGuideShowFunc,y=e.onSearchTextClick,b=e.scene,S=t||{},A=S.abtestData,L=S.userContext,k=S.insertCommentId,T=S.tab,N=L||{},P=N.userInfo,M=N.dispatch;(0,i.useEffect)((function(){var e,n;if(p){var t;h&&(t=m()((function(){return F.emit(F.EVENT.feedVideoCardLocateCurrentVideo)}),0));var o=Z.Le.getConfig(Z.gI.IsSidebarShow)||{},l=o.isShow,i=o.isModal,a=o.tab,u=(null===(e=Z.Le.getConfig(Z.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||!1,c=(null===(n=Z.Le.getConfig(Z.gI.IsInModalVideo))||void 0===n?void 0:n.isInModal)||!1,s=i!==(c||u)?{tab:a,isShow:undefined}:{tab:a,isShow:l};return Z.Le.setConfig(Z.gI.IsSidebarShow,{isShow:h,tab:r,isModal:c||u,lastStatus:(0,d.Z)((0,d.Z)({},s),{},{isModal:i})}),F.emit(F.EVENT.changeVideoSideBar,{isShowRelatedCard:h,isShowComment:r===x.L.Comment,lastStatus:s}),function(){clearTimeout(t)}}}),[h,r]);var R=(0,i.useMemo)((function(){return{awemeInfo:n,sense:"slider_video",onCloseClick:function(){},onCollapseClick:function(){},userContext:L,abtestData:A,changeLoginStatus:function(){M({type:"updateUserInfo"})},logParams:o}}),[n,L,M,o,A]),D=Qe({awemeInfo:n}),V=D.fetchComment,B=D.fetchReply,O=D.fetchCommentMention,U=D.deleteCommentItem,W=D.publishCommentItem,H=D.diggCommentItem;return{authorConfig:R,commentConfig:{abtestData:A,fullScreenTarget:l,isDetail:!1,isShowComment:r===x.L.Comment&&u,total:0,onCloseCommentClick:v,awemeInfo:n,awemelogPb:null==n?void 0:n.logPb,userInfo:P,scrollContainerEl:null==s?void 0:s.current,player:c,shortcutMode:null==A?void 0:A.shortcutMode,fetchComment:V,fetchReply:B,fetchEmoticonGif:qe.D2,fetchCommentMetionList:O,diggCommentItem:H,deleteCommentItem:U,puhlishCommentItem:W,count:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:w?"":k,isNeedCommentInput:!0,changeLoginStatus:function(){return M({type:"updateUserInfo"})},reportExtraParams:(0,d.Z)((0,d.Z)({},o),{},{relation:String(f)}),dispatch:M,globalIsCommentTrayPushGuideShow:C,globalCommentTrayPushGuideType:_,setCommentTrayPushGuideTypeFunc:I,setIsCommentTrayPushGuideShowFunc:E,tab:T,onSearchTextClick:y,isSearch:b===a.lT.Search}}},xn=t(77370),Nn=t.n(xn),Pn=t(27389),Mn=t(76569),Rn=t.n(Mn),Fn=t(40032),Zn=t(46193),Dn=t(35640),Vn=t(2074),Bn="cu4637EW",On="N_pbezMl",Un="rEn3uMSv",Wn="Rdkm80SF",Hn="ArbenARZ",jn="fb0v1ivJ",Gn="M9ba3z6G",zn="LRb_a2W3",Kn="ZG4qVNxS";function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qn.apply(this,arguments)}var Jn,Yn,Qn=function(e){return i.createElement("svg",qn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=i.createElement("g",{filter:"url(#arrow_svg__filter0_d_42186_220754)",clipPath:"url(#arrow_svg__clip0_42186_220754)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.402 2.574a2 2 0 01.024 2.828l-6.597 6.714 6.573 6.457a2 2 0 11-2.804 2.854l-8-7.86a2 2 0 01-.024-2.829l8-8.14a2 2 0 012.828-.024z",fill:"#fff"}))),l||(l=i.createElement("defs",null,i.createElement("clipPath",{id:"arrow_svg__clip0_42186_220754"},i.createElement("path",{fill:"#fff",transform:"rotate(-180 12 12)",d:"M0 0h24v24H0z"})),i.createElement("filter",{id:"arrow_svg__filter0_d_42186_220754",x:2,y:-2,width:20,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:2}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_42186_220754"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_42186_220754",result:"shape"})))))};function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xn.apply(this,arguments)}var $n,et,nt=function(e){return i.createElement("svg",Xn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Jn||(Jn=i.createElement("g",{filter:"url(#fullScreenArrow_svg__filter0_d_42186_220763)",clipPath:"url(#fullScreenArrow_svg__clip0_42186_220763)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.051 2.93c.591.58.6 1.53.019 2.121l-6.949 7.07 6.93 6.809a1.5 1.5 0 11-2.102 2.14l-8-7.86a1.5 1.5 0 01-.019-2.121l8-8.14a1.5 1.5 0 012.121-.019z",fill:"#fff"}))),Yn||(Yn=i.createElement("defs",null,i.createElement("clipPath",{id:"fullScreenArrow_svg__clip0_42186_220763"},i.createElement("path",{fill:"#fff",transform:"rotate(-180 12 12)",d:"M0 0h24v24H0z"})),i.createElement("filter",{id:"fullScreenArrow_svg__filter0_d_42186_220763",x:2.5,y:-1.5,width:19,height:27,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:2}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_42186_220763"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_42186_220763",result:"shape"})))))},tt=t(9909),ot=function(e){var n,t=e.word,o=void 0===t?"\u9000\u51fa\u5408\u96c6":t,l=e.style,r=e.onClick,a=e.className,s=e.canHover,f=e.isPageFullScreen,v=e.isFullScreen,m=e.canHoverScale,h=(0,i.useState)(!s),g=(0,c.Z)(h,2),w=g[0],C=g[1],_=(0,i.useRef)(o);o&&(_.current=o);var I=f||v;(0,i.useEffect)((function(){C(!(!v&&!f))}),[v,f]);var E=(0,i.useMemo)((function(){for(var e=0,n=o||_.current,t=0;t<n.length;t++)n.charCodeAt(t)>127||94===n.charCodeAt(t)?e+=2:e++;return e}),[o]);return i.createElement("div",{className:p()(Hn,a,(n={},(0,u.Z)(n,zn,w),(0,u.Z)(n,Kn,m),n)),style:(0,d.Z)((0,d.Z)({},l),{},{width:w?11*E+56:56}),onClick:r,onMouseEnter:function(){s&&C(!0)},onMouseLeave:function(){!s||f||v||C(!1)}},!I&&i.createElement(tt.Z,{viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(Qn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:24,height:24,className:Gn}),I&&i.createElement(tt.Z,{viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(nt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:24,height:24,className:Gn}),i.createElement("span",{className:p()((0,u.Z)({},jn,!w))},_.current))},lt=t(52668),rt=t(86846),it="kp7Y2zLB",at="A50RBdiT",ut="u1lbTqFC",dt="oTGiwHW2";function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ct.apply(this,arguments)}var st,ft,vt=function(e){return i.createElement("svg",ct({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$n||($n=i.createElement("g",{filter:"url(#return_svg__filter0_d_2723_115796)",clipPath:"url(#return_svg__clip0_2723_115796)"},i.createElement("path",{d:"M16 4l-8 8.14L16 20",stroke:"#fff",strokeOpacity:.7,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"crispEdges"}))),et||(et=i.createElement("defs",null,i.createElement("clipPath",{id:"return_svg__clip0_2723_115796"},i.createElement("path",{fill:"#fff",transform:"rotate(-180 12 12)",d:"M0 0h24v24H0z"})),i.createElement("filter",{id:"return_svg__filter0_d_2723_115796",x:2,y:-2,width:20,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:2}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2723_115796"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2723_115796",result:"shape"})))))},mt=function(e){var n=e.word,t=e.onHandleReturn,o=(0,i.useRef)(),l=(0,i.useRef)(n);return n&&(l.current=n),i.createElement("div",{className:it},i.createElement(lt.e,{target:o.current,type:"bottom",text:l.current,className:dt},i.createElement("div",{className:at,onClick:t,ref:o},i.createElement(rt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(vt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:ut,viewBox:"0 0 24 24"}))))},ht=t(27809),pt=t(46595),gt=t(346),wt="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,Ct=function(e){var n,t=e.close,o=e.clickedCard,l=e.customProps,r=e.isEnterByFullScreen,u=void 0!==r&&r,s=e.modalEnterFrom,v=e.currentAwemeInfo,h=(e.awemeInfo,e.isClientMiniWin),g=l||{},w=g.tab,C=g.userContext,_=g.abtestData.inStreamSearch,I=C.userInfo,E=(0,i.useState)({}),y=(0,c.Z)(E,2),b=y[0],S=y[1],A=(0,i.useContext)(W.C),k=A.isCssFullScreen,T=A.isFullScreen,N=A.isSelf,P=(0,i.useState)(!1),M=(0,c.Z)(P,2),R=M[0],D=M[1],V=(0,i.useState)(""),B=(0,c.Z)(V,2),O=B[0],U=B[1],H=(0,i.useRef)(null),j=(0,i.useRef)(null),G=(0,i.useRef)(null),z=(0,i.useRef)("click_screen"),K=(0,i.useRef)((function(){}));(0,i.useEffect)((function(){F.emit(F.EVENT.InnerFeedReady,!0)}),[]),(0,i.useEffect)((function(){var e,n,t,l,r,i,a,u=(null===(e=G.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))||o,d=f()(t=[x.L.Author,x.L.Hot,x.L.Mix,x.L.Series,x.L.Music,x.L.Related,x.L.Topic,x.L.Like,x.L.Collection,x.L.CollectFolder,x.L.Record,x.L.Search]).call(t,u)?"\u9000\u51fa".concat(pt.Y.get((null===(l=G.current)||void 0===l||null===(r=l.getCurTab)||void 0===r?void 0:r.call(l))||o)):"";switch(u){case x.L.Like:"userLike"===s&&N&&(d=d.replace("TA",N?"\u6211":"TA"));break;case x.L.Collection:"userCollection"===s&&N&&(d=d.replace("TA",N?"\u6211":"TA"));break;case x.L.Author:"userPost"===s&&(null==v||null===(i=v.authorInfo)||void 0===i?void 0:i.uid)===(null==I||null===(a=I.info)||void 0===a?void 0:a.uid)&&N&&(d=d.replace("TA",N?"\u6211":"TA"))}O!==d&&U(d)})),(0,i.useEffect)((function(){var e=F.listen(F.EVENT.changeTab,(function(e){var n,t=f()(n=[x.L.Author,x.L.Hot,x.L.Mix,x.L.Music,x.L.Related,x.L.Topic,x.L.Like,x.L.Collection,x.L.CollectFolder,x.L.Record,x.L.Search]).call(n,e)?"\u9000\u51fa".concat(pt.Y.get(e)):"";O!==t&&U(t)}));return function(){return e()}}),[O]);var q=(0,i.useCallback)((function(e){e.target===H.current&&(z.current="click_screen",D(!0))}),[]),J=(0,i.useCallback)((function(){S({width:"100%",height:"100%"})}),[]);(0,i.useEffect)((function(){var e,n,t;J();var o=null===Zn.Z||void 0===Zn.Z||null===(e=Zn.Z.getCurrentUserActivePlayerId)||void 0===e?void 0:e.call(Zn.Z);return null===(n=Oe.s.getPlayer(o))||void 0===n||null===(t=n.pause)||void 0===t||t.call(n),function(){var e,n;Zn.Z.setCurrentUserActive(o,!0);var t=null===Dn.Z||void 0===Dn.Z||null===(e=Dn.Z.pluginGroup)||void 0===e||null===(n=e[o])||void 0===n?void 0:n._player;if(m()((function(){null==t||t.play()})),Z.Le.getConfig(Z.gI.IsInMixCard)){var l=Number((0,Ve.$o)(De.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY)),r=Z.Le.getConfig(Z.gI.AutoPlayChanged);null!=r&&r.changed||null==r||!r.autoEmit||!l||((0,Ve.qQ)(De.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"0"),F.emit(F.EVENT.changeInnerAutoPlay,2),Z.Le.setConfig(Z.gI.InnerAutoPlay,null),Z.Le.setConfig(Z.gI.AutoPlayChanged,{autoEmit:!1})),Z.Le.setConfig(Z.gI.IsInMixCard,!1)}m()((function(){F.emit(F.EVENT.syncInteraction)}),500)}}),[J]),wt((function(){return Z.Le.setConfig(Z.gI.IsInLookMiniModal,{isInMiniModal:!0}),function(){Z.Le.setConfig(Z.gI.IsInLookMiniModal,{isInMiniModal:!1})}}),[]),(0,i.useEffect)((function(){var e,n,o=function e(){var n,o,l;R&&(null==t||t(z.current,null===(n=G.current)||void 0===n||null===(o=n.getCurTab)||void 0===o?void 0:o.call(n)),null===(l=j.current)||void 0===l||l.removeEventListener("animationend",e))};R&&(null==t||t(z.current,null===(e=G.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e)));var l=F.listen(F.EVENT.sendImUserMsg,(function(){var e,n;null==t||t(z.current,null===(e=G.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))})),r=j.current;return r.addEventListener("animationend",o),function(){r.removeEventListener("animationend",o),l()}}),[k,T,R,t,h]),K.current=function(e){if(!(e.shiftKey||e.metaKey||e.ctrlKey)){var n=Z.Le.getConfig(Z.gI.DisableExit);return"Escape"!==e.code||k&&w!==a.lT.Modal||T||h||n?void 0:(e.preventDefault(),e.returnValue=!1,t("esc",G.current.getCurTab()),!1)}},(0,i.useEffect)((function(){return Rn()(Vn.k).call(Vn.k,"Escape",K.current),function(){Vn.k.remove("Escape",K.current)}}),[]);var Y=(0,i.useMemo)((function(){return k||T?{position:"absolute",left:34,top:45}:{position:"relative",left:0,top:0}}),[k,T]);return(0,i.useEffect)((function(){if(k)return S({}),function(){J()}}),[k]),(0,i.useEffect)((function(){if(T)return S({}),function(){J()}}),[T]),(0,i.useEffect)((function(){if(h)return S({}),function(){J()}}),[h]),(0,i.useEffect)((function(){var e,n,t;u||w===a.lT.Modal||F.emit(F.EVENT.pageFullScreen,{fullScreen:!0,playerId:null===(e=G.current)||void 0===e||null===(n=e.getPlayer)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.playerId,clickMethod:"inner_player"})}),[]),i.createElement(ht.T,{onMaskClick:function(){z.current="click_screen",D(!0)},className:p()(Wn)},i.createElement("div",{className:On,ref:H,onClick:q},!h&&_!==L.bu.On&&i.createElement(ot,{onClick:function(){var e,n;z.current="click_button",null==t||t(z.current,null===(e=G.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))},isFullScreen:T,isPageFullScreen:k,word:O,style:Y,canHover:!1,canHoverScale:!0}),!h&&_===L.bu.On&&i.createElement(mt,{word:O,onHandleReturn:function(){var e,n;z.current="click_button",null==t||t(z.current,null===(e=G.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))}}),i.createElement("div",{className:Un,ref:j,style:{height:"100%"}},i.createElement($o,(0,d.Z)((0,d.Z)({},e),{},{style:b,isUpperFeed:!0,className:Bn,close:t,ref:G,swiper:null!==(n=null==e?void 0:e.swiper)&&void 0!==n?n:F.commonEvent})))),w===a.lT.Search&&H.current&&i.createElement(gt.J,{EventListener:F.commonEvent,refContainerStatus:H.current}))},_t=function(e){var n=(0,i.useRef)(document.createElement("div")),t=(0,i.useContext)(W.C),o=(0,i.useRef)(null);return o.current||(o.current=(0,Fn.createRoot)(n.current)),(0,i.useEffect)((function(){var l,a;null===(l=o.current)||void 0===l||null===(a=l.render)||void 0===a||a.call(l,i.createElement(W.C.Provider,{value:t},i.createElement(Ct,(0,r.Z)({},e,{close:function(){var t,l,r,i,a,u;null===(t=o.current)||void 0===t||t.unmount(),null===(l=n.current)||void 0===l||l.remove();for(var d=arguments.length,c=new Array(d),s=0;s<d;s++)c[s]=arguments[s];null==e||null===(r=e.close)||void 0===r||r.call.apply(r,X()(i=[e]).call(i,c)),F.emit(null==F||null===(a=F.EVENT)||void 0===a?void 0:a.clarityRel,{exitInner:!0}),F.emit(null==F||null===(u=F.EVENT)||void 0===u?void 0:u.quitInnerFeed,!0)}}))))})),(0,i.useEffect)((function(){var e=document.getElementById("upperFeedContainer")||document.getElementById("slidelist")||document.querySelector('#sliderVideo[data-e2e="feed-active-video"]')||document.body;return null==e||e.appendChild(n.current),function(){var e,t,l,r;null===(e=o.current)||void 0===e||null===(t=e.unmount)||void 0===t||t.call(e),null===(l=n.current)||void 0===l||null===(r=l.remove)||void 0===r||r.call(l),n.current=null}}),[]),i.createElement(i.Fragment,null)},It=t(21793);function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Et.apply(this,arguments)}var yt,bt,St=function(e){return i.createElement("svg",Et({width:16,height:92,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),st||(st=i.createElement("g",{filter:"url(#tab-bg_svg__filter0_b_33991_204394)"},i.createElement("path",{d:"M16 0v92l-2.626-2.025a12.262 12.262 0 00-7.488-2.552A5.886 5.886 0 010 81.537V10.463a5.886 5.886 0 015.886-5.886c2.709 0 5.342-.897 7.488-2.552L16 0z",fill:"#000",fillOpacity:.3}))),ft||(ft=i.createElement("defs",null,i.createElement("filter",{id:"tab-bg_svg__filter0_b_33991_204394",x:-20,y:-20,width:56,height:132,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:10}),i.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_33991_204394"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_backgroundBlur_33991_204394",result:"shape"})))))},At="UXyEyqbq",Lt="UdkDK3ea",kt="rZlSNoco",Tt="otZjcQr3",xt="z8UOaKU4",Nt="RvwrvJd0",Pt="o_x_607E",Mt="n96zKsb5",Rt="_GD0CJv4";function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ft.apply(this,arguments)}var Zt,Dt,Vt=function(e){return i.createElement("svg",Ft({width:32,height:48,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yt||(yt=i.createElement("g",{opacity:.18,clipPath:"url(#shadow-arrow-left_svg__clip0_12_1531)"},i.createElement("path",{d:"M0 24C0 10.745 10.745 0 24 0h8v48h-8C10.745 48 0 37.255 0 24z",fill:"#000"}),i.createElement("path",{d:"M24 .5h8.5v47H24C11.021 47.5.5 36.979.5 24S11.021.5 24 .5z",stroke:"#fff",strokeOpacity:.92}))),bt||(bt=i.createElement("defs",null,i.createElement("clipPath",{id:"shadow-arrow-left_svg__clip0_12_1531"},i.createElement("path",{fill:"#fff",d:"M0 0h32v48H0z"})))))};function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bt.apply(this,arguments)}var Ot,Ut=function(e){return i.createElement("svg",Bt({width:32,height:48,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Zt||(Zt=i.createElement("g",{filter:"url(#arrow-left_svg__filter0_d_12_1532)",opacity:.18},i.createElement("path",{d:"M21.316 29.73a1.393 1.393 0 01-1.97 0l-5.056-5.055a1.393 1.393 0 010-1.97l.012-.011 5.044-5.045a1.393 1.393 0 011.97 1.97l-4.07 4.071 4.07 4.071a1.393 1.393 0 010 1.97z",fill:"#fff"}))),Dt||(Dt=i.createElement("defs",null,i.createElement("filter",{id:"arrow-left_svg__filter0_d_12_1532",x:12.883,y:17.241,width:9.842,height:14.898,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dy:1}),i.createElement("feGaussianBlur",{stdDeviation:.5}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_12_1532"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_12_1532",result:"shape"})))))};function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wt.apply(this,arguments)}var Ht,jt,Gt=function(e){return i.createElement("svg",Wt({width:10,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ot||(Ot=i.createElement("path",{d:"M9.72 9.67a.945.945 0 000-1.34L1.629.277a.957.957 0 00-1.349 0 .945.945 0 000 1.342L7.698 9 .279 16.38a.945.945 0 000 1.342c.373.37.977.37 1.35 0L9.72 9.671z",fill:"#fff"})))},zt=function(e){var n=e.onClick,t=e.className;return i.createElement("div",{className:p()(At,Lt,t)},i.createElement("button",{className:p()(Tt),onClick:n,type:"button"},i.createElement(tt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Vt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:48,viewBox:"0 0 32 48",className:xt}),i.createElement(tt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Ut,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:48,viewBox:"0 0 32 48",className:Nt})))},Kt=function(e){var n=e.onClick,t=e.className;return i.createElement("div",{className:p()(At,kt,t)},i.createElement("button",{className:p()(Pt),onClick:n,type:"button"},i.createElement(tt.Z,{className:p()(Mt),src:globalThis.xssNamespace.douyin_web.filterUrl(St,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:16,height:92,viewBox:"0 0 16 92"}),i.createElement(tt.Z,{className:p()(Rt),src:globalThis.xssNamespace.douyin_web.filterUrl(Gt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:10,height:18,viewBox:"0 0 10 18"})))},qt=function(e){switch(e.type){case"circle":return i.createElement(zt,e);case"rectangle":return i.createElement(Kt,e)}return i.createElement(i.Fragment,null)},Jt="M5tPQXbC",Yt="SjLZb8mi",Qt="gIlgGCJu",Xt="Flersr5Y",$t="VtELKylF";function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},eo.apply(this,arguments)}var no,to=function(e){return i.createElement("svg",eo({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ht||(Ht=i.createElement("path",{d:"M7.978 8.5H14a4.5 4.5 0 014.5 4.5v0a4.5 4.5 0 01-4.5 4.5H7.5",stroke:"#222",strokeWidth:2,strokeLinecap:"round"})),jt||(jt=i.createElement("path",{d:"M8.5 5.5l-3 3 3 3",stroke:"#222",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))},oo=t(68350),lo=function(e){var n=e.width,t=void 0===n?24:n,o=e.height,l=void 0===o?24:o,a=e.className;return i.createElement(oo.A,(0,r.Z)({},e,{width:t,height:l,src:globalThis.xssNamespace.douyin_web.filterUrl(to,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),id:"svg_icon_revoke",defaultWidth:24,defaultHeight:24,viewBox:"0 0 24 24",className:a}))},ro=function(e){var n=e.onRevokeDislike,t=e.isActive,o=void 0!==t&&t;(0,i.useEffect)((function(){o&&ne.sendLog("dislikeRecallShow")}),[o]);return i.createElement("div",{className:Jt},i.createElement("span",{className:Yt},"\u4f60\u5df2\u5bf9\u8be5\u89c6\u9891\u4e0d\u611f\u5174\u8da3"),i.createElement("div",{className:Qt,onClick:function(){null==n||n(),ne.sendLog("dislikeRecallClick")}},i.createElement(lo,{className:Xt}),i.createElement("span",{className:$t},"\u64a4\u9500")))},io="jLIgND8E",ao="N4LfzX7B",uo="pndRgZHB",co="ek_xjsaH",so="PxOv2ciG",fo=function(e){var n=e.awemeInfo,t=e.abtestData,o=e.className,l=(0,i.useMemo)((function(){var e,t,o,l;return n.awemeType===N.ed.Note?null===(t=n.images)||void 0===t||null===(o=t[0])||void 0===o||null===(l=o.urlList)||void 0===l?void 0:l[0]:null===(e=n.video)||void 0===e?void 0:e.originCover}),[n]);return i.createElement("div",{className:p()(io,o)},i.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(l,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:p()(ao,(0,u.Z)({},uo,(null==t?void 0:t.searchPlayerUnify)===L.gA.V2))}),i.createElement("div",{className:co},i.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(l,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),i.createElement("div",{className:so})))},vo=t(22541),mo=t.n(vo),ho=t(47601),po=t.n(ho),go=t(46549),wo="yqIGYI1q",Co="fozLfGkK",_o="B9ZmKkAD",Io="JPh0Up1D",Eo="O6rlbeqJ",yo="LcHoJGhZ",bo="qJ5DTtn6",So="P1gweFET",Ao="HSWSehSf",Lo="sKnbSLIP";function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ko.apply(this,arguments)}var To=function(e){return i.createElement("svg",ko({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),no||(no=i.createElement("path",{d:"M23.5 15.134a1 1 0 010 1.732l-11.25 6.495a1 1 0 01-1.5-.866V9.505a1 1 0 011.5-.866l11.25 6.495z",fill:"#fff"})))};mo().extend(po());var xo,No=function(e){var n=e.time,t=e.abtestData,o=e.enableEnterDetail,l=(0,i.useMemo)((function(){return mo().duration(Math.round(n/1e3),"seconds").format("mm:ss")}),[n]);return i.createElement("div",{className:p()(wo,(0,u.Z)({},Lo,(null==t?void 0:t.searchPlayerUnify)===L.gA.V2))},i.createElement("div",{className:Co}),i.createElement("div",{className:_o},i.createElement("div",{className:Io},i.createElement(To,null),n>0&&i.createElement("div",{className:Eo},i.createElement("span",null,"00:00"),i.createElement("span",{className:yo},"/"),i.createElement("span",null,l))),o&&i.createElement("div",{className:bo},i.createElement("div",{className:So},"\u8be6\u60c5"),i.createElement("div",{className:Ao},i.createElement(go.Z,{width:6,height:9,viewBox:"0 0 6 9"})))))},Po=function(e){var n=e.isActive,t=e.awemeInfo,o=e.player,l=e.abtestData,r=(0,i.useState)(!1),a=(0,c.Z)(r,2),u=a[0],d=a[1];return(0,i.useEffect)((function(){d(!0)}),[]),i.createElement(i.Fragment,null,!u&&i.createElement(fo,{awemeInfo:t,abtestData:l}),(!o||!n)&&i.createElement(No,{time:t.video.duration,abtestData:l}))},Mo=t(42249),Ro=t.n(Mo),Fo=t(54805),Zo=t(96235),Do=t(9191),Vo=Rn()(xo=oe.F.info).call(xo,oe.F),Bo=function(e){var n,t,o=(0,Ve.$o)(De.LocalStorageKeys.DislikeAwemeCount);return o?e?null!==(n=o[e])&&void 0!==n?n:0:null!==(t=o.count)&&void 0!==t?t:0:0},Oo=function(e){var n,t=e.abtestData,o=e.scene,l=e.isModal,r=e.awemeInfo,s=e.dislikeIdList,v=void 0===s?new(Ro()):s,h=e.deleteCurrentSwiper,p=e.videoToast,g=e.uuid,w=e.player,C=t.permanentDislikeBtn,I=void 0===C?L.Ap.Off:C,y=o===a.lT.Recommend&&!l,b=(0,_.Jt)(r),S=y&&I===L.Ap.On||y&&I===L.Ap.AvoidAd&&!b,A=function(e){var n=e.awemeInfo,t=e.reportExtraParams,o=e.onDislikeSuccess,l=e.onDislikeError,r=e.initIsDislike,a=e.toast,u=void 0===a?Vo:a,s=e.onRevokeDislikeSuccess,v=e.player,h=(0,i.useState)(null!=r&&r),p=(0,c.Z)(h,2),g=p[0],w=p[1];(0,i.useLayoutEffect)((function(){void 0!==r&&w(r)}),[r]);var C=(0,i.useRef)(),I=(0,Fo.Z)((0,Ge.Z)(Ke().mark((function e(){var r,i,a,c,s,h,p,g,I,y,b,S=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=S.length>0&&S[0]!==undefined?S[0]:{clickMethod:"icon"},a=i.clickMethod,c=i.reportExtraParams,!(0,_.Jt)(n)){e.next=4;break}return null==v||v.emit(Be.B.AdDislike,{onAddDislikeSuccess:function(){null==o||o(),C.current=m()((function(){w(!0)}),2500)}}),e.abrupt("return");case 4:return e.next=6,(0,Zo.w)(null==n?void 0:n.awemeId);case 6:s=e.sent,h=s.statusCode,p=s.errMsg,g=null!==(r=Z.Le.getConfig(Z.gI.WallPaperIds))&&void 0!==r&&f()(r).call(r,null==n?void 0:n.awemeId)?1:0,0===h?(null==u||u("\u64cd\u4f5c\u6210\u529f\uff0c\u5c06\u51cf\u5c11\u6b64\u7c7b\u89c6\u9891\u51fa\u73b0"),E.i.sendLog("dislike",(0,d.Z)((0,d.Z)({urlParamList:["previous_page"],enter_from:(0,M.mo)(),author_id:null==n||null===(I=n.authorInfo)||void 0===I?void 0:I.uid,group_id:null==n?void 0:n.awemeId,log_pb:null==n?void 0:n.logPb,is_full_screen:(0,R.r)()?"1":"0",tab_name:k.getTabName()||(0,Do.Rs)("tab_name")||"",click_method:a,from_follow_list:null!==(y=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==y&&y.tag?"1":"0",aweme_type:null==n?void 0:n.awemeType,is_insert_wallpaper:g,item_duration_ms:(null==n||null===(b=n.video)||void 0===b?void 0:b.duration)||0},c),t)),null==o||o(),C.current=m()((function(){w(!0)}),2500)):(null==u||u(p),null==l||l(p)),g&&(0,Ve.qQ)(De.LocalStorageKeys.WallPaper,{disappear:!0});case 12:case"end":return e.stop()}}),e)})))),y=(0,Fo.Z)((0,Ge.Z)(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Zo.m)(null==n?void 0:n.awemeId);case 2:0===e.sent.statusCode&&(w(!1),null==s||s());case 5:case"end":return e.stop()}}),e)}))));return(0,i.useEffect)((function(){return function(){clearTimeout(C.current)}}),[]),{dislike:I,revokeDislike:y,isDislike:g}}({awemeInfo:r,toast:function(e){if(y&&I!==L.Ap.Off&&function(e){return Bo(e)<3}(g))return p("\u64cd\u4f5c\u6210\u529f\uff0c\u5212\u56de\u53ef\u64a4\u9500\u4e0d\u611f\u5174\u8da3"),void function(e){var n=Bo(e),t=(0,Ve.$o)(De.LocalStorageKeys.DislikeAwemeCount)||{};e?(0,Ve.qQ)(De.LocalStorageKeys.DislikeAwemeCount,(0,d.Z)((0,d.Z)({},t),{},(0,u.Z)({},e,n+1))):(0,Ve.qQ)(De.LocalStorageKeys.DislikeAwemeCount,(0,d.Z)((0,d.Z)({},t),{},{count:n+1}))}(g);p(e)},onDislikeSuccess:function(){null==h||h(),null!=r&&r.awemeId&&S&&v.add(r.awemeId)},initIsDislike:v.has(r.awemeId),onRevokeDislikeSuccess:function(){null!=r&&r.awemeId&&S&&v.delete(r.awemeId)},player:w}),T=A.isDislike,x=A.dislike,N=A.revokeDislike,P=T&&y&&I!==L.Ap.Off;return{isDislikePanelVisible:P,dislike:x,revokeDislike:N,isPermanentDislikeBtn:S,disableShortCut:P,isAdapterMiniHeightWithDislikeBtn:f()(n=[L.Ap.On,L.Ap.AvoidAd]).call(n,I)&&y}},Uo=t(73231),Wo="Ab0e9Tqp",Ho=t(30556),jo=t(4868),Go=function(e){var n=e.userInfo,t=e.abtestData,o=e.awemeInfo,l=(0,jo.s)().handleHiddenLog;(0,i.useEffect)((function(){F.emit(F.EVENT.postCurVideoInfo,{awemeId:null==o?void 0:o.awemeId,groupId:null==o?void 0:o.groupId,scene:a.lT.InnerUpper,suggestWords:null==o?void 0:o.suggestWords})}),[o]);return i.createElement("div",{className:p()(Wo,"isDark")},i.createElement(Ho.default,{customProps:{isInnerUpper:!0},userInfo:n,abTestData:t,onSearchClick:function(e){return l(e)},onHistoryClick:function(e){var n=e.currentTarget.dataset.text;return l(n)},onInputKeyDown:function(e,n){if("Enter"===(0,Uo.CS)(e))return l(n)},playerProps:{awemeInfo:o,scene:a.lT.InnerUpper}}))},zo=(0,g.default)((function(){return Promise.all([t.e(258),t.e(7142),t.e(9046),t.e(2713)]).then(t.bind(t,73189))}),{ssr:!1}),Ko=(0,g.default)((function(){return Promise.all([t.e(7251),t.e(5874),t.e(3555)]).then(t.bind(t,16686))}),{ssr:!1}),qo=(0,g.default)((function(){return t.e(3437).then(t.bind(t,67694))}),{ssr:!1}),Jo=(0,g.default)((function(){return t.e(7891).then(t.bind(t,72096))}),{ssr:!1,resolveComponent:function(e){return e.SearchPlayerSideCard}});function Yo(e,n){var o,l,s,v,h,g,K,J,Y,Q,X,$,ee,ae,de,ce,se,fe,ve,me,he,Ie,ye,be,Se,Ae,Le,ke,Te,xe,Ne,Pe,Me,Re,De,Ve,Be,Oe,Ue=e.item,ze=e.playPrevFunc,qe=e.playNextFunc,Je=e.deleteCurrentSwiper,Ye=e.fullScreenTarget,on=e.isActive,_n=e.isNext,yn=e.swiper,Sn=e.children,An=e.customProps,xn=e.isLast,Mn=e.handleNextOnLast,Rn=e.slideListInsideFunc,Fn=e.InnerPlayer,Zn=e.className,Dn=e.isShowGuide,Vn=e.isClientMiniWin,Bn=e.style,On=e.isUpperFeed,Un=void 0!==On&&On,Wn=e.close,Hn=e.hotDefaultList,jn=e.mixDefault,Gn=e.seriesDefault,zn=e.relatedDefault,Kn=e.currentAwemeInfo,qn=e.clickedCard,Jn=e.moreBoxShowList,Yn=e.getCurrentTime,Qn=e.modalInnerFeedCard,Xn=e.modalEnterFrom,$n=e.defaultCommentShow,et=e.setOuterRelatedList,nt=e.startTime,tt=e.splashAdStatus,ot=e.changeSplashAdStatus,lt=e.isFirst,rt=e.needStaticContainer,it=e.searchSideCardProps,at=e.onSearchTextClick,ut=An||{},dt=ut.abtestData,ct=void 0===dt?{}:dt,st=ut.tab,ft=ut.userContext,vt=ut.logParams,mt=(0,i.useRef)(null),ht=ft||{},pt=ht.userInfo,gt=ht.dispatch,wt=(pt||{}).isLogin,Ct=(0,i.useContext)(W.C),Et=Ct.globalIsSideBarShow,yt=Ct.setIsSideBarShowFunc,bt=Ct.isFullScreen,St=Ct.isCssFullScreen,At=Ct.setTargetVideoRef,Lt=void 0===At?function(){}:At,kt=Ct.slideVideoTab,Tt=Ct.setSlideVideoTab,xt=Ct.videoToast,Nt=void 0===xt?function(e){return oe.F.info(e,mt.current)}:xt,Pt=Ct.dislikeIdList,Mt=Ct.globalIsCommentTrayPushGuideShow,Rt=Ct.globalCommentTrayPushGuideType,Ft=Ct.setCommentTrayPushGuideTypeFunc,Zt=Ct.setIsCommentTrayPushGuideShowFunc,Dt=(0,i.useState)(!0),Vt=(0,c.Z)(Dt,2),Bt=Vt[0],Ot=Vt[1],Ut=(0,i.useState)(null),Wt=(0,c.Z)(Ut,2),Ht=Wt[0],jt=Wt[1],Gt=(0,i.useState)(null),zt=(0,c.Z)(Gt,2),Kt=zt[0],Jt=zt[1],Yt=(0,i.useState)(!1),Qt=(0,c.Z)(Yt,2),Xt=Qt[0],$t=Qt[1],eo=(0,i.useState)(x.L.Author),no=(0,c.Z)(eo,2),to=no[0],oo=no[1],lo=(0,i.useState)(!1),io=(0,c.Z)(lo,2),ao=io[0],uo=io[1],co=yt?Et:Xt,so=yt||$t,fo=Tt?kt:to,vo=Tt||oo,mo=(0,i.useRef)(!1),ho=(0,i.useRef)(!1),po=(0,i.useRef)(!1),go=(0,i.useRef)(!1),wo=(0,i.useRef)(null),Co=(0,i.useRef)(null),_o=(0,i.useRef)(null),Io=(0,i.useRef)(null),Eo=(0,i.useRef)(),yo=(0,i.useRef)(null),bo=Un?Bt:(!(0,_.Jt)(Ue)||fo===x.L.Comment)&&co,So=Un||st===a.lT.Modal?function(e){return oe.F.infoInModalVideo(e)}:Nt,Ao=we({player:Ht,originAwemeInfo:Kn||Ue,isActive:on,isLast:xn,toast:So,modalEnterFrom:Xn,handleNextOnLast:Mn,handleOuterPlayNext:qe,handleOuterPlayPrev:ze,isInnerFeedCondition:Un,scene:st}),Lo=Ao.changeNextVideo,ko=Ao.changePrevVideo,To=Ao.awemeInfo,xo=Ao.updateAwemeInfo,No=Ao.setNextAwemeInfo,Mo=Ao.setPrevAwemeInfo,Ro=Ao.prevAwemeInfo,Fo=Ao.nextAwemeInfo,Zo=Ao.isInnerFeed,Do=Ao.updateLogParams;(0,I.u)("webp"===ct.ecomHeadImgFormat?Ko:{load:function(){}});var Vo=_e({awemeInfo:To,currentVideoFeedRef:wo,lastVideoFeedAwemeRef:Co,outFeedItem:Ue,scene:st,modalEnterFrom:Xn,abtestData:ct,isInnerFeed:Zo}).showRelatedTabList,Bo=Fe({abtestData:ct,isActive:on,awemeInfo:To,showRelatedTabList:Vo,clickedCard:null!=qn?qn:fo===x.L.Comment?x.L.Comment:undefined,useCTR:st===a.lT.Recommend,scene:st}),Uo=Bo.defaultCard,Wo=Bo.videoTag,Ho=(0,i.useMemo)((function(){var e;return(null==To?void 0:To.awemeType)===N.ed.XgVideo?f()(e=[x.L.CollectFolder]).call(e,Uo)?Uo:x.L.Comment:Uo}),[Uo,To,fo]),jo=function(e){var n=e.isShow,t=e.player,o=e.isActive,l=e.awemeInfo,r=e.abtestData,a=(0,i.useRef)(!1),u=(0,i.useRef)((function(){}));u.current=(0,i.useCallback)((function(){a.current&&(m()((function(){F.emit(F.EVENT.videoRemoveStopPlayNext)})),a.current=!1)}),[t]);var d=(0,i.useCallback)((function(){t&&o&&t.duration-t.currentTime>0&&t.duration-t.currentTime<=5&&!a.current&&n&&(null==l?void 0:l.awemeType)!==N.ed.Note&&(F.emit(F.EVENT.videoStopPlayNext),a.current=!0,t.once(Ze.ENDED,u.current))}),[t,n,o,l,r]);return(0,i.useEffect)((function(){if(n)return function(){u.current()}}),[n]),(0,i.useEffect)((function(){if(l)return function(){u.current()}}),[l]),{stopAutoPlay:d}}({isShow:bo||ao||po.current,player:Ht,isActive:on,awemeInfo:To,abtestData:ct}),Yo=jo.stopAutoPlay,Qo=We({defaultTab:Ho,isActive:on,stopAutoPlay:Yo,awemeInfo:To,abtestData:ct}),Xo=Qo.curTab,$o=Qo.curVideoFeed,el=Qo.changeTab,nl=Qo.lastVideoFeedAweme;wo.current=$o,Co.current=nl,He({originAwemeInfo:Ue,awemeInfo:To}),function(e){var n=e.curTab,t=(e.awemeInfo,e.isActive),o=(e.abtestData,e.modalAwemeInfo),l=(0,i.useContext)(W.C).setSlideVideoTab;(0,i.useEffect)((function(){t&&(null==l||l(n))}),[n,t,o])}({awemeInfo:To,curTab:Xo,isActive:on,abtestData:ct,isUpperFeed:Un,modalAwemeInfo:Kt});var tl=je({onChangeAwemeInfo:function(e){Un?xo(e):Jt(null==e?void 0:e.inComingAwemeInfo)}}),ol=tl.handleAuthorVideoChange,ll=tl.handleOtherVideoChange,rl=Qe({awemeInfo:To}),il=rl.globalCommentCount,al=rl.updateGlobalCommentCount,ul=rl.fetchComment;!function(e){var n=e.isModal,o=e.awemeInfo,l=e.isActive,r=e.fetchComment,i=e.player,u=e.commentpreloadAbStatus,d=e.adCommentpreloadAbStatus,c=e.scene,s=e.showSideCard;(0,Xe.b)((0,Ge.Z)(Ke().mark((function e(){var v,m,h,p,g,w,C,_,I,E;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f()(nn).call(nn,u)&&c===a.lT.Recommend&&!1===n&&!0===l&&(null==i?void 0:i.currentTime)>=0&&!1===s){e.next=2;break}return e.abrupt("return");case 2:if(!0!==(null==o?void 0:o.isAds)||f()(v=[L.aR.AdCommentPreloadHighThreshold,L.aR.AdCommentPreloadLowThreshold]).call(v,d)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,m=function(){r(0,20,"user",{current:null},"",undefined,!0)},e.next=8,t.e(8261).then(t.t.bind(t,8261,23));case 8:return h=e.sent,p=h.Pylon,g=h.EScene,w=h.EBiz,C=new p({biz:w.DOUYIN_WEB_RECOMMEND}),_=u===L.wO.CommentPreloadHighThreshold?$e.TccKey.CommentPreloadHighThreshold:$e.TccKey.CommentPreloadLowThreshold,d===L.aR.AdCommentPreloadHighThreshold?_=$e.TccKey.AdCommentPreloadHighThreshold:d===L.aR.AdCommentPreloadLowThreshold&&(_=$e.TccKey.AdCommentPreloadLowThreshold),e.next=17,(0,pe.aW)(_);case 17:I=e.sent,(E=C.createStrategyEngine({abConfig:I,scene:g.COMMENT})).setThresholdCallback((0,Ge.Z)(Ke().mark((function e(){var n,t,l,r,a,u,d,c,s,f,v,h,p,w,_,y,b,S,A,L;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pe.cy.getPreloadCache(pe.mM.COMMENT_BTN_CLICKED)){e.next=3;break}return e.abrupt("return");case 3:return s=null!==(n=I.preload_ml)&&void 0!==n?n:{},f=s.package,v=void 0===f?"":f,h=s.engine_config,p=void 0===h?{}:h,e.next=6,C.createEngine({scene:g.COMMENT,modelUrl:v,inputs:null==p?void 0:p.inputs,outputs:null==p?void 0:p.outputs});case 6:if(w=e.sent,_=1e3*((null==i?void 0:i.currentTime)||0),y=w.inference({features:{videoPlayTime:_}}),b=E.hitThresholdValue(y),S=null==I||null===(t=I.preload_ml)||void 0===t?void 0:t.package,A=null==I||null===(l=I.preload_ml)||void 0===l||null===(r=l.output)||void 0===r||null===(a=r[0])||void 0===a||null===(u=a.args)||void 0===u?void 0:u[0],L=null!==(d=w.getFeatureVector({features:{scene:g.COMMENT,videoPlayTime:_}}))&&void 0!==d?d:[],(0,pe.zo)(y,b,pe.vV.COMMENT_PRELOAD,S,A,L,0),en("comment-ret:",y,",hit:",b,", nickname:",null==o||null===(c=o.authorInfo)||void 0===c?void 0:c.nickname,", playTime: ",_),!b){e.next=18;break}return m(),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),en("comment inference error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,22]])}))),[l,i])}({isModal:Un,awemeInfo:To,isActive:on,fetchComment:ul,player:Ht,showSideCard:bo,commentpreloadAbStatus:null==ct?void 0:ct.commentAiPreloadStatus,adCommentpreloadAbStatus:null==ct?void 0:ct.adCommentAiPreloadStatus,scene:st});var dl=rn({originAwemeInfo:Ue,awemeInfo:To,logParams:vt,curCard:Xo,expandCard:bo?Xo:"",isSideBarShow:bo,isInnerFeedCondition:Un,searchSideCardProps:it,modalEnterFrom:Xn}).reportParams,cl=an({isActive:on,player:Ht,showSideCard:bo}).hasRelatedCardShown;(0,i.useEffect)((function(){Do({logParams:dl})}),[dl]);var sl=(0,i.useCallback)((function(e){var n,t,o,l,r=e.tab,i=e.clickMethod,a=void 0===i?"":i,u=e.awemeInfo,d=void 0===u?To:u,c=e.isEnterModal,s=void 0===c||c;if(r!==x.L.Comment){var v;if(!Un)return vo(r),el({tab:r}),Jt(d),void E.i.sendLog("enterVideoCardTab",{from_group_id:null==d?void 0:d.awemeId,type:r,enter_method:a,enter_from_merge:(0,M.vM)(),enter_from:null!==(v=null==vt?void 0:vt.enter_from)&&void 0!==v?v:(0,M.mo)(),tab_name:(null==vt?void 0:vt.tab_name)||k.getTabName()});if(r===Xo)return null==Wn?void 0:Wn()}(Un||bo||!f()(n=[x.L.Author,x.L.Mix,x.L.Hot]).call(n,r))&&(bo&&r===Xo?(kl(!1,{from:a}),E.i.sendLog("closeVideoCard",{type:r,enter_method:a,enter_from_merge:(0,M.vM)()})):(vo(r),kl(!0,{from:a}),E.i.sendLog("enterVideoCardTab",{from_group_id:null==d?void 0:d.awemeId,type:r,enter_method:a,enter_from_merge:(0,M.vM)(),enter_from:null!==(o=null==vt?void 0:vt.enter_from)&&void 0!==o?o:(0,M.mo)(),tab_name:(null==vt?void 0:vt.tab_name)||k.getTabName()})));(el({tab:r}),!Un&&!bo&&f()(t=[x.L.Author,x.L.Mix,x.L.Hot]).call(t,r)&&s)&&(E.i.sendLog("enterVideoCardTab",{from_group_id:null==d?void 0:d.awemeId,type:r,enter_method:a,enter_from_merge:(0,M.vM)(),enter_from:null!==(l=null==vt?void 0:vt.enter_from)&&void 0!==l?l:(0,M.mo)(),tab_name:(null==vt?void 0:vt.tab_name)||k.getTabName()}),Jt(d))}),[bo,To,Un,Xo,Wn,ct]);(0,i.useEffect)((function(){!Un&&"mix"===Qn&&on&&m()((function(){sl({tab:x.L.Mix,clickMethod:"auto"})}))}),[Un,Qn,sl]),(0,i.useEffect)((function(){!Un&&Xn===y.ModalEnterFromVal.FollowAuthorModal&&on&&m()((function(){sl({tab:x.L.Author,clickMethod:"click_follow_head_show"})}))}),[Xn,Un,on,sl]);var fl=function(e){var n=e.awemeInfo,t=e.userInfo,o=e.onOpenCard,l=e.isActive,r=e.onCloseAdCard,a=e.abtestData,u=e.toast,d=e.isFirst,s=e.isUpperFeed,v=e.changeSplashAdStatus,m=(0,i.useRef)($e.TCC_DEFAULT_VALUE_MAP.get($e.TccKey.AdConfig)),h=(0,i.useState)(!1),p=(0,c.Z)(h,2),g=p[0],w=p[1],C=(0,i.useRef)(!1),I=(0,i.useRef)(!1);(0,i.useEffect)((function(){C.current=!1,I.current=!1,w(!1)}),[n]),(0,i.useEffect)((function(){var e=!1;return(0,Ge.Z)(Ke().mark((function n(){var t;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dn.U2({key:$e.TccKey.AdConfig,defaultValue:$e.TCC_DEFAULT_VALUE_MAP.get($e.TccKey.AdConfig)});case 2:t=n.sent,e||(m.current=t);case 4:case"end":return n.stop()}}),n)})))(),function(){e=!0}}),[]);var E=(0,i.useCallback)((function(e){"closeIcon"===(e||{}).from&&(C.current=!0),I.current&&(I.current=!1,F.emit(F.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),w(!1),null==r||r()}),[r]),y=(0,i.useCallback)((function(e){var l,r,i=(e||{}).from,d=(0,_.Rx)(n),c=(0,_.BD)(n);if("automatic"===i||I.current||(I.current=!0,F.emit(F.EVENT.videoStopPlayNext,{openSideCard:!0})),"keyboard"===i&&(0,cn.E)("realtime_click",{tag:(0,pn.f)(),value:null==d?void 0:d.creative_id,log_extra:null==d?void 0:d.log_extra,refer:"enter"}),!(0,b.o4)(n))if((0,sn.hj)(n))if(F.emit(F.EVENT.videoPause),null!=c&&null!==(r=c.lynx_raw_data)&&void 0!==r&&r.open_url){var s,v,h=(0,sn.at)({rawAdData:d,extraParams:{enter_from_merge:"web_homepage_hot",action_type:"click",group_id:n.awemeId,request_id:n.logPb}}),p=(un.parseUrl(h||"")||{}).query,g=void 0===p?{}:p;(null==a?void 0:a.liveModalFullplayer)===L.if.DynamicBg||(null==a?void 0:a.liveModalFullplayer)===L.if.EntranceStrengthen||(null==a?void 0:a.liveModalFullplayer)===L.if.WithoutAction||(null==a?void 0:a.liveModalFullplayer)===L.if.Normal?F.emit(F.EVENT.liveModalShow,{type:"recommend",data:{webRid:(0,sn.Hx)({rawAdData:d}),roomId:g.room_id,anchorId:null==n||null===(s=n.authorInfo)||void 0===s?void 0:s.uid},enterMethod:hn.a.VIDEO_HEAD,teaLogParams:{request_id:null!==(v=null==n?void 0:n.logPb)&&void 0!==v?v:"",enter_method:"web_video_head",video_id:null==n?void 0:n.awemeId,cid:null==d?void 0:d.creative_id,if_qianchuan_ad:1,ad_type:P.Z9.Live,live_ad_creative_id:null==d?void 0:d.creative_id,live_ad_id:null==d?void 0:d.ad_id,ad_log_extra:null==d?void 0:d.log_extra}}):window.open(h)}else u?u("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"):oe.F.info("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"),(0,cn.E)("load_failed",{tag:(0,pn.f)(),value:d.creative_id,log_extra:d.log_extra});else if((0,fn.L)(n)||(0,vn.u)(n)){var C;null!=c&&null!==(C=c.lynx_raw_data)&&void 0!==C&&C.web_url?(w(!0),null==o||o({isAuto:"automatic"===i}),(0,cn.E)("detail_show",{tag:"landing_ad",value:d.creative_id,log_extra:d.log_extra})):(u?u("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"):oe.F.info("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"),(0,cn.E)("load_failed",{tag:(0,pn.f)(),value:null==d?void 0:d.creative_id,log_extra:null==d?void 0:d.log_extra}))}else{var E,y,S=!1;if(null!=c&&null!==(l=c.lynx_raw_data)&&void 0!==l&&l.web_url)if(null===(E=m.current)||void 0===E||!f()(y=E.openInSidebarCondition.siteTypes).call(y,d.site_type)||(0,B.DT)()){if("automatic"!==i){var A=(0,mn.J2)({awemeInfo:n,userInfo:t});S=!0,window.open(A)}}else w(!0),S=!0,null==o||o({isAuto:"automatic"===i});else u?u("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"):oe.F.info("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"),(0,cn.E)("load_failed",{tag:(0,pn.f)(),value:null==d?void 0:d.creative_id,log_extra:null==d?void 0:d.log_extra});S&&(0,cn.E)("detail_show",{tag:"landing_ad",value:d.creative_id,log_extra:d.log_extra})}}),[n,t,o,a]);return(0,i.useEffect)((function(){var e=F.listen(F.EVENT.openAdSideCard,(function(e){if(l){"automatic"===(null==e?void 0:e.from)?!C.current&&y({from:null==e?void 0:e.from}):y({from:null==e?void 0:e.from});var t=(0,_.Rx)(n);"keyboard"===(null==e?void 0:e.from)&&(0,cn.E)("slide",{tag:(0,pn.f)(),value:t.creative_id,log_extra:t.log_extra})}}));return function(){return e()}}),[l,y,n]),(0,i.useEffect)((function(){d&&!s&&l&&(null==v||v((0,_.pb)(n)?P.QB.Fullscreen:P.QB.Normal))}),[]),(0,i.useEffect)((function(){l?(d||null==v||v(P.QB.Normal),I.current=!1):w(!1)}),[l]),(0,i.useEffect)((function(){(0,_.Kf)(n)&&(0,gn.sk)({awemeId:null==n?void 0:n.awemeId})}),[n]),{closeAdCard:E,openAdCard:y,isShowAdCard:g,isAdAweme:(0,_.Jt)(n)}}({awemeInfo:To,userInfo:pt,isActive:on,abtestData:ct,toast:So,isFirst:lt,isUpperFeed:Un,changeSplashAdStatus:ot}),vl=fl.closeAdCard,ml=fl.isShowAdCard,hl=fl.isAdAweme,pl=function(e){var n=e.isActive,t=e.onOpenCard,o=e.isLogin,l=e.accountParentEl,r=e.awemeInfo,a=e.onLoginSuccess,u=e.onCloseCard,d=(e.abtestData,e.toast),s=(0,i.useState)(!1),f=(0,c.Z)(s,2),v=f[0],m=f[1],h=(0,i.useRef)(!1),p=(0,i.useMemo)((function(){return(0,b.o4)(r)}),[r]),g=(0,i.useMemo)((function(){return(0,_.Rx)(r)}),[r]),w=(0,i.useRef)(!1),C=(0,i.useRef)(!0),I=(0,i.useCallback)((function(e){var n=(e||{}).from;w.current||"automatic"===n||(w.current=!0,F.emit(F.EVENT.videoStopPlayNext,{openSideCard:!0}));var r,i,u,d=function(){m(!0),(0,Cn.B1)("ecom_load_start"),null==t||t(),p&&(0,cn.E)("detail_show",{tag:"landing_ad",value:g.creative_id,log_extra:g.log_extra})};o?d():(0,ge.default)({success:(u=(0,Ge.Z)(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(),d();case 2:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u67e5\u770b\u5546\u54c1\u8be6\u60c5",enterMethod:"product_entrance_click",next:"https://".concat(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.host)},l)}),[m,o,l,t,g,p]);(0,i.useEffect)((function(){var e=F.listen(F.EVENT.openAdSideCard,(function(e){var t="automatic"!==(null==e?void 0:e.from)||!h.current;if(n&&p&&t){var o,l,r=null==g||null===(o=g.lynx_components)||void 0===o?void 0:Ee()(o).call(o,(function(e){return(null==e?void 0:e.lynx_type)===tn.AD_FEED_TYPE}));if(!(null!=r&&null!==(l=r.lynx_raw_data)&&void 0!==l&&l.open_url||null!=g&&g.open_url))return d?d("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"):wn.F.info("\u5e7f\u544a\u94fe\u63a5\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u8df3\u8fc7"),void(0,cn.E)("load_failed",{tag:(0,pn.f)(),value:g.creative_id,log_extra:g.log_extra});I({from:null==e?void 0:e.from}),"automatic"===(null==e?void 0:e.from)&&(0,cn.E)("realtime_click",{tag:(0,pn.f)(),value:null==g?void 0:g.creative_id,log_extra:null==g?void 0:g.log_extra,refer:"enter"})}}));return function(){return e()}}),[n,r,o,I,g,p]);var E=(0,i.useCallback)((function(e){"manual"===(e||{}).action&&(h.current=!0),m(!1),C.current=!1,w.current&&(w.current=!1,F.emit(F.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),p&&(0,cn.E)("close",{tag:(0,pn.f)(),value:g.creative_id,log_extra:g.log_extra,content:"ad_detail"}),null==u||u()}),[m,p,g,u]);return(0,i.useEffect)((function(){!n&&v&&E()}),[n]),(0,i.useEffect)((function(){!(0,Ce.n)(r)&&v&&E()}),[r]),{isShowShopDetailSideCard:v,closeShopDetailCard:E,openShopDetailCard:I,isFirstLoad:C.current}}({awemeInfo:To,isActive:on,onOpenCard:function(){ml&&vl()},isLogin:wt,accountParentEl:(0,R.r)()&&Ye,onLoginSuccess:function(){return null==gt?void 0:gt({type:"updateUserInfo"})},onCloseCard:function(){go.current=!0},abtestData:ct,toast:So}),gl=pl.openShopDetailCard,wl=pl.isShowShopDetailSideCard,Cl=pl.closeShopDetailCard,_l=pl.isFirstLoad,Il=(0,i.useMemo)((function(){return(0,b.o4)(To)}),[To]),El=Il?(0,b.ZO)({rawAdData:(0,_.Rx)(To)}):{},yl=Il?{promotion_id:El.promotion_id,product_id:El.product_id,shop_info:{author_id:null==To||null===(o=To.authorInfo)||void 0===o?void 0:o.uid}}:(null==To||null===(l=To.anchorInfo)||void 0===l||null===(s=l.extra)||void 0===s?void 0:s[0])||{},bl=(0,S._t)((function(){var e;return(0,A.L)({promotionId:null==yl?void 0:yl.promotion_id,originType:638302,secAuthorId:null==To||null===(e=To.authorInfo)||void 0===e?void 0:e.secUid,roomId:""})})),Sl=bl.sendPrefetch,Al=bl.cancelPrefetch,Ll=(0,i.useCallback)((function(e){var n=(e||{}).clickMethod;return"hot_key"!==n&&"click_icon"!==n||!bo||Xo!==x.L.Comment||!wl&&!ml?(sl({tab:x.L.Comment,clickMethod:n||"click_icon"}),(!bo||Xo!==x.L.Comment)&&(bo&&x.L.Comment,!0)):(ho.current||(ho.current=!0,F.emit(F.EVENT.videoStopPlayNext,{openSideCard:!0})),Cl(),vl(),!0)}),[bo,sl,Xo,wl,ml]);(0,C.Z)((function(){po.current=wl}),[wl]);var kl=function(e,n){var t=(n||{}).from;!ho.current&&e&&"auto"!==t&&(ho.current=!0,F.emit(F.EVENT.videoStopPlayNext,{openSideCard:!0})),ho.current&&!e&&(ho.current=!1,F.emit(F.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),Un?(Ot(e),e&&!bo&&Cl()):(null==so||so(e),e&&(vl(),Cl(),(0,pe.nJ)(pe.mM.COMMENT_BTN_CLICKED)))};!function(e){var n=e.showSideCard,t=e.isActive,o=e.item,l=e.showRelatedTabList,r=e.slideVideoTab,a=e.changeTab,u=e.isUpperFeed,d=e.defaultCommentShow,c=e.handleShowSidebar,s=(0,i.useRef)(!d),v=(0,i.useMemo)((function(){if(t){var e;if(n)return null!=l&&null!==(e=f()(l))&&void 0!==e&&e.call(l,r)?r:l[0];if(d)return l[0]}}),[t,n,d,l[0],l[1],l[2],l[3],l[4]]);(0,i.useEffect)((function(){!(0,_.Jt)(o)&&t&&v&&!u&&(!s.current&&d?(m()((function(){c(!0,{from:"auto"}),a({tab:x.L.Comment,from:"auto"})})),s.current=!0):n&&a({tab:v,from:"auto"}))}),[v,o,t])}({showSideCard:bo,isActive:on,item:Ue,showRelatedTabList:Vo,slideVideoTab:fo,abtestData:ct,changeTab:el,isUpperFeed:Un,defaultCommentShow:$n,handleShowSidebar:kl});var Tl=In({awemeInfo:To}).hotData,xl=function(e){var n=e.player,t=e.isActive,o=e.showSideCard,l=(0,i.useState)(!En),r=(0,c.Z)(l,2),a=r[0],u=r[1];return(0,i.useEffect)((function(){if(o)if(t&&n&&En){if(!n.isPlaying){var e=m()((function(){return u(!0)}),3e3),l=function(){clearTimeout(e),u(!0)};return n.once(Ze.AUTOPLAY_STARTED,l),function(){n.off(Ze.AUTOPLAY_STARTED,l),clearTimeout(e)}}u(!0)}else!t&&a&&En?u(!1):a||u(!0)}),[n,t,o]),a}({isActive:on,player:Ht,showSideCard:bo}),Nl=bn({videoTag:Wo,scene:st,reportParams:dl,originAwemeInfo:Ue,isInnerFeed:Zo,player:Ht,awemeInfo:To,canShowMixCard:!0,canShowSeriesCard:!0,canShowRelatedCard:!0,canShowRelatedSearchFeedBar:!0,canShowChapterFeedbar:f()(v=[L.n6.TagList]).call(v,ct.chapterList),updateVideoInfo:xo,curCard:Xo,toast:So,handleAvatarClick:function(e,n){var t=(n||{}).clickMethod;sl({tab:x.L.Author,clickMethod:"hot_key"===t?"hot_key":"click_icon"})},handleMixClick:function(e){var n=e||{},t=n.clickMethod,o=n.awemeInfo;sl({tab:x.L.Mix,clickMethod:null!=t?t:"click_feed_bar",awemeInfo:o})},handleSeriesClick:function(e){var n=e||{},t=n.clickMethod,o=n.awemeInfo;sl({tab:x.L.Series,clickMethod:null!=t?t:"click_feed_bar",awemeInfo:o})},handleHotClick:function(){sl({tab:x.L.Hot,clickMethod:"click_feed_bar"})},handleRelatedClick:function(e){sl({tab:x.L.Related,clickMethod:(null==e?void 0:e.clickMethod)||"click_feed_bar",awemeInfo:null==e?void 0:e.awemeInfo})},isShowSideBar:ml||bo||wl}),Pl=Nl.onAvatarClick,Ml=Nl.videoInfoTags,Rl=(0,It.O)({player:Ht,isActive:on}).inImmersive,Fl=(0,le.OM)({selfUid:null==pt||null===(h=pt.info)||void 0===h?void 0:h.uid,actionUid:null==To||null===(g=To.authorInfo)||void 0===g?void 0:g.uid,defaultFollowerStatus:null==To||null===(K=To.authorInfo)||void 0===K?void 0:K.followerStatus,defaultFollowStatus:null==To||null===(J=To.authorInfo)||void 0===J?void 0:J.followStatus,logExtraParams:(0,d.Z)({author_id:null==To||null===(Y=To.authorInfo)||void 0===Y?void 0:Y.uid,group_id:null==To?void 0:To.awemeId,from_group_id:null==Ue?void 0:Ue.awemeId,music_id:null==To||null===(Q=To.music)||void 0===Q?void 0:Q.mid,compilation_id:null==To||null===(X=To.mixInfo)||void 0===X?void 0:X.mixId,aweme_type:null==To?void 0:To.awemeType,is_pure:Rl?"1":"0",to_user_id:null==To||null===($=To.authorInfo)||void 0===$?void 0:$.uid,item_duration_ms:(null==To||null===(ee=To.video)||void 0===ee?void 0:ee.duration)||0},dl),isLogin:wt,accountParentEl:(0,R.r)()&&Ye,onLoginSuccess:function(){return null==gt?void 0:gt({type:"updateUserInfo"})}}),Zl=Fl.follow,Dl=Fl.unFollow,Vl=(0,re.r)({selfUid:null==pt||null===(ae=pt.info)||void 0===ae?void 0:ae.uid,actionUid:null==To||null===(de=To.authorInfo)||void 0===de?void 0:de.uid,defaultFollowerStatus:null==To||null===(ce=To.authorInfo)||void 0===ce?void 0:ce.followerStatus,defaultFollowStatus:null==To||null===(se=To.authorInfo)||void 0===se?void 0:se.followStatus}).followStatus;!function(e){var n=e.player,t=e.isActive,o=e.isOuter;(0,i.useEffect)((function(){var e;return n&&t&&o&&(null===(e=Z.Le.getConfig(Z.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)&&m()((function(){var e;null===(e=n.pause)||void 0===e||e.call(n),n.config.autoplay=!1,n.autoplay=!1}),20),function(){clearTimeout(void 0)}}),[n,t])}({isOuter:!Un,isActive:on,player:Ht});var Bl=Ln({scene:st,awemeInfo:To,scrollElRef:_o,changeNextVideo:Lo,changePrevVideo:ko,swiper:yn,isActive:on&&!Kt||Un,feedCssFullScreen:St,player:Ht,onFullScreen:function(e){e&&kl(Zo,{from:"auto"}),Un&&(e||F.emit(F.EVENT.pageFullScreen,{fullScreen:!0,playerId:null==Ht?void 0:Ht.playerId,clickMethod:"inner_player"}))},onCssFullScreen:function(e){e&&kl(Zo,{from:"auto"}),Un&&(e||bt||null==Wn||Wn())},onFullScreenrestore:function(){kl(Zo,{from:"auto"})},onTriggerModalPlayerClose:function(){Un&&(null==Wn||Wn("click_button",Xo))},onCanPlay:function(){var e=function(){Ht.seek(nt,"play"),Z.Le.setConfig(Z.gI.PreviewPlayInfoRecord,{awemeId:"",recordPlayTime:0})};if(Un){var n=null==Yn?void 0:Yn();n&&Ht.seek(n,"play"),Qn&&e()}else if(nt)e();else{var t=To.continationInfo;null!=t&&t.playProgress&&(Ht.seek(null==t?void 0:t.playProgress,"play"),delete t.playProgress)}},onPlay:function(){Un||Kt&&m()((function(){var e;return null===(e=Ht.pause)||void 0===e?void 0:e.call(Ht)}))},onVideoTitleClick:function(){var e,n;sl({tab:x.L.Author,clickMethod:"click_title"}),ne.sendLog("clickAuthorHead",(0,d.Z)((0,d.Z)({click_from:"title",urlParamList:["previous_page"],author_id:null==To||null===(e=To.authorInfo)||void 0===e?void 0:e.uid,group_id:null==To?void 0:To.awemeId,log_pb:null==To?void 0:To.logPb,enter_from:(0,M.mo)(),is_full_screen:(0,R.r)()?"1":"0",from_follow_list:null!==(n=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==n&&n.tag?"1":"0"},dl),{},{action:bo?"close":"open"},(0,D.t)()))}}).isMiniWin;kn({scene:st,awemeInfo:To,isActive:on,isNext:_n,isUpperFeed:Un,modalEnterFrom:Xn});var Ol=Tn({awemeInfo:To,customProps:An,reportParams:dl,fullScreenTarget:Ye,tab:Xo,showSideCard:bo,isShowRelatedCard:bo,player:Ht,scrollElRef:_o,followStatus:Vl,handleCommentClick:function(e){return Ll(e)},isActive:on,isUpperFeed:Un,globalIsCommentTrayPushGuideShow:Mt,globalCommentTrayPushGuideType:Rt,setCommentTrayPushGuideTypeFunc:Ft,setIsCommentTrayPushGuideShowFunc:Zt,onSearchTextClick:at,scene:st}),Ul=Ol.authorConfig,Wl=Ol.commentConfig;!function(e){var n=e.isActive,t=e.isUpperFeed,o=e.modalAwemeInfo,l=e.showSideCard,r=e.isShowAdCard,a=e.isShowShopDetailSideCard,u=(0,i.useRef)(!0);(0,i.useEffect)((function(){u.current?u.current=!1:n&&F.emit(F.EVENT.sideCardShowChange,{isUpperFeed:t,isModalAwemeShow:Boolean(o),isShow:l||r||a})}),[l,r,t,a,n,o])}({isActive:on,isUpperFeed:Un,modalAwemeInfo:Kt,showSideCard:bo,isShowAdCard:ml,isShowShopDetailSideCard:wl}),(0,i.useImperativeHandle)(n,(function(){return{getPlayer:function(){return Ht},setIsAuthorCardShow:kl,setIsShowRelatedCard:kl,getCurTab:function(){return Xo},getCurrAweme:function(){return To},player:Ht}}),[on,Xo,Ht,To]);var Hl=function(e){var n=e.curTab,t=e.awemeInfo,o=e.handleChangeVideo,l=e.handleCooperationAvatarClick,r=e.reportParams,a=e.isShowVideoCard,u=(0,i.useRef)(!1),c=(0,i.useCallback)((function(e){var o,i;u.current=!0,null==l||l(e);var c=te(e)||{},s=c.to_user_id,f=c.is_co_publish,v=c.co_publish_author_list;ne.sendLog("clickAuthorHead",(0,d.Z)((0,d.Z)((0,d.Z)({click_from:"click_co_author_head",urlParamList:["previous_page"],author_id:null==e||null===(o=e.authorInfo)||void 0===o?void 0:o.uid,group_id:null==t?void 0:t.awemeId,log_pb:null==t?void 0:t.logPb,is_full_screen:(0,R.r)()?"1":"0",from_follow_list:null!==(i=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0"},r),{},{action:a&&n===x.L.Author?"close":"open"},(0,D.t)()),{},{to_user_id:s,is_co_publish:f,co_publish_author_list:v}))}),[l,t,n,a,r]);return(0,i.useEffect)((function(){var e;if(t.authorInfo.roleId!==undefined&&t.authorInfo.roleId!==y.CooperationRoleId.Author&&f()(e=[x.L.Mix,x.L.Hot]).call(e,n)){var l,r,i=Nn()(t),a=null==i||null===(l=i.cooperationInfo)||void 0===l||null===(r=l.cooperationCreators)||void 0===r?void 0:q()(r).call(r,(function(e){return e.roleId===y.CooperationRoleId.Author}))[0];a&&(i.authorInfo=a),null==o||o(i)}}),[n]),{onCooperationAvatarClick:c,changeIsInCooperation:function(e){u.current=e},isInCooperation:u.current}}({curTab:Xo,awemeInfo:To,handleChangeVideo:function(e){xo({inComingAwemeInfo:e})},handleCooperationAvatarClick:function(e){var n;Un?(el({tab:x.L.Author}),kl(!0,{from:"auto"}),xo({inComingAwemeInfo:e})):Jt(e),E.i.sendLog("enterVideoCardTab",{from_group_id:e.awemeId,type:x.L.Author,enter_method:"click_co_author_head",enter_from:null!==(n=null==vt?void 0:vt.enter_from)&&void 0!==n?n:(0,M.mo)(),enter_from_merge:(0,M.vM)(),tab_name:(null==vt?void 0:vt.tab_name)||k.getTabName()})},reportParams:dl,isShowVideoCard:bo}),jl=Hl.onCooperationAvatarClick,Gl=Hl.isInCooperation,zl=Hl.changeIsInCooperation;(0,C.Z)((function(){!Kt&&on&&(zl(!1),(bt||St)&&kl(!1,{from:"auto"})),Kt&&(mo.current=St)}),[Kt]);var Kl,ql,Jl=Oo({awemeInfo:To,scene:st,deleteCurrentSwiper:Je,isModal:Un,videoToast:So,abtestData:ct,dislikeIdList:Pt,uuid:null===(fe=(0,Z.Es)())||void 0===fe?void 0:fe.user_unique_id,player:Ht}),Yl=Jl.isPermanentDislikeBtn,Ql=Jl.isDislikePanelVisible,Xl=Jl.dislike,$l=Jl.revokeDislike,er=Jl.disableShortCut,nr=Jl.isAdapterMiniHeightWithDislikeBtn,tr=(0,i.useMemo)((function(){return"waterFall"===Xn&&null!=Kt&&Kt.awemeId?(0,d.Z)((0,d.Z)({},vt),{},{from_group_id:null==Kt?void 0:Kt.awemeId}):vt}),[vt,null==Kt?void 0:Kt.awemeId,Xn]),or=(0,i.useMemo)((function(){if(null==it||!it.scene)return{};var e=To.awemeId;return{search_third_item_id:e,aladdin_words:To.desc,list_item_id:e}}),[null==it?void 0:it.scene,To]),lr=(0,i.useMemo)((function(){var e;switch(null==it?void 0:it.scene){case"mix":return null!=To&&null!==(e=To.seriesInfo)&&void 0!==e&&e.seriesId?"\u77ed\u5267":"\u5408\u96c6";case"user":return"\u76f8\u5173\u4f5c\u54c1";default:return""}}),[it]),rr=!bo||wl||ml||st===a.lT.Search&&!on;return i.createElement(i.Fragment,null,i.createElement(H.v.Provider,{value:{playerScene:st,globalCommentCount:il,setGlobalCommentCount:al,authorVideoCardClick:ol,setNextAemeInfo:No,setPrevAwemeInfo:Mo,modalEnterFrom:Xn,player:Ht,stopAutoPlay:Yo}},i.createElement("div",{"data-e2e":on?"feed-active-video":"feed-video","data-e2e-vid":null==To?void 0:To.awemeId,id:Un?"slideMode":"sliderVideo",className:p()(j.playerCommentWrapper,Zn,(ve={isMiniWindow:Vn},(0,u.Z)(ve,j.flex,!xl),(0,u.Z)(ve,j.isFullScreen,bt),(0,u.Z)(ve,j.inOutFeed,!Un),(0,u.Z)(ve,j.miniWidth,bo),(0,u.Z)(ve,j.adapterSeventh,!wl),(0,u.Z)(ve,j.shopCard,wl),(0,u.Z)(ve,j.adapterMiniHeight,Un),(0,u.Z)(ve,j.adapterMiniHeightWithDislikeBtn,nr),(0,u.Z)(ve,j.searchFit,st===a.lT.Search),(0,u.Z)(ve,"relatedUiAdapter",!(st===a.lT.Search&&!Un)),ve)),style:Bn,ref:Io},i.createElement("div",{className:p()(j.playerContainer,"playerContainer",(me={},(0,u.Z)(me,j.isHavePlayer,To),(0,u.Z)(me,j.isSafari,(0,V.G6)()),(0,u.Z)(me,j.showSideBar,wl||ml||bo),(0,u.Z)(me,j.noTransition,!bo||wl||go.current),me))},Sn,i.createElement("div",{className:p()(j.playerWrap,"slider-video"),ref:function(e){on?mt.current||Un||(mt.current=e,Lt(mt)):mt.current=null}},st===a.lT.Modal&&(0,B.DT)()&&!Kt&&i.createElement("div",{className:j.electronDrag}),(null==To?void 0:To.debugInfo)&&i.createElement(z.W,{req:null==To||null===(he=To.debugInfo)||void 0===he?void 0:he.web_debug_req,video:null==To||null===(Ie=To.debugInfo)||void 0===Ie?void 0:Ie.client_rec_debug_info,size:{height:null==Ht?void 0:Ht._videoHeight,width:null==Ht?void 0:Ht._videoWidth},gear:null==To||null===(ye=To.video)||void 0===ye||null===(be=ye.bitRateList)||void 0===be||null===(Se=be[0])||void 0===Se?void 0:Se.gearName,showPanelRightside:!0}),i.createElement(G.r,null,i.createElement(Fn,(0,r.Z)({},e,{actionFollow:Zl,actionUnFollow:Dl,userInfo:pt,dispatch:gt,awemeInfo:To,nextAwemeInfo:Fo,prevAwemeInfo:Ro,videoTags:Ml,isInnerFeed:Zo,playNextFunc:Lo,playPrevFunc:ko,deleteCurrentSwiper:Je,toggleComment:function(e){return Ll(e)},onCooperationAuthorClick:jl,isShowCooperation:!0,onAvatarClick:Pl,avatarTipText:Un&&Xo===x.L.Author?"\u9000\u51fa\u4f5c\u8005\u4e3b\u9875":undefined,logParams:(0,d.Z)((0,d.Z)({},dl),{},{relation:String(Vl),is_click_cover:Number(Un||Ue!==To),enter_from:Un?(Kl=$o,(ql={},(0,u.Z)(ql,x.t.Author,x.L.Author),(0,u.Z)(ql,x.t.Mix,x.L.Mix),(0,u.Z)(ql,x.t.Series,x.L.Series),(0,u.Z)(ql,x.t.Search,x.L.Search),(0,u.Z)(ql,x.t.CollectFolder,x.L.CollectFolder),(0,u.Z)(ql,x.t.Collection,x.L.Collection),(0,u.Z)(ql,x.t.Hot,x.L.Hot),(0,u.Z)(ql,x.t.Related,x.L.Related),(0,u.Z)(ql,x.t.Like,x.L.Like),(0,u.Z)(ql,x.t.Record,x.L.Record),ql)[Kl]):null==dl?void 0:dl.enter_from,search_params:(0,d.Z)((0,d.Z)((0,d.Z)({},or),null==vt?void 0:vt.search_params),{},{item_rank:((null===(Ae=Eo.current)||void 0===Ae||null===(Le=Ae.getCurIndex)||void 0===Le?void 0:Le.call(Ae))||0)+1})}),videoToast:So,abtestData:ct,abTestData:ct,isFullScreen:bt,isAuthorCardShow:!1,slideListInsideFunc:Rn,sideBarShow:bo,isShowRelatedCard:Un,isShowGuide:Dn,showPlaySwitch:St||bt||!1,moreBoxShowList:(0,d.Z)((0,d.Z)({},Jn),{},{notInterestingIcon:Un?!Zo&&(null==Ue?void 0:Ue.awemeId)===(null==To?void 0:To.awemeId):null===(ke=null==Jn?void 0:Jn.notInterestingIcon)||void 0===ke||ke,unfollow:!Un||(null===(Te=null==Jn?void 0:Jn.unfollow)||void 0===Te||Te),report:!Un||(null===(xe=null==Jn?void 0:Jn.report)||void 0===xe||xe)}),shortCutFiltered:(null==Ue?void 0:Ue.awemeId)!==(null==To?void 0:To.awemeId)||Un?[T.getShortcut().dislike.badgeText]:[],positionBoxClassName:{right:bo||ml||wl?null:j.interactionPos},isAdShortCut:!bo,isShowAdCard:ml,isShowShopSideCard:wl,onShopAnchorClick:function(){wl?Cl():(gl(),"webp"===ct.ecomHeadImgFormat&&Al())},onShopAnchorMouseEnter:function(){"webp"!==ct.ecomHeadImgFormat||wl||Sl({reqKey:null==yl?void 0:yl.promotion_id})},onShopAnchorMouseLeave:function(){"webp"!==ct.ecomHeadImgFormat||wl||Al()},defaultIsPageFullScreen:!(bt||!Un)||undefined,onDislike:Xl,isPermanentDislikeBtn:Yl,disableShortCut:er,isDislike:Ql,splashAdStatus:tt,fullScreenTarget:null!=Ye?Ye:Io.current,horizontalToggleProps:{showHorizontalToggle:Boolean(null==it?void 0:it.scene)&&!(ao||bo||ml||wl),onClick:function(){var e;uo(!0),E.i.sendLog("enterVideoCardTab",{enter_from:"general_search",enter_from_merge:"general_search",enter_method:"click_card_entrance",type:(0,ln.V)(null==it?void 0:it.scene,To,null==vt||null===(e=vt.search_params)||void 0===e?void 0:e.token_type)})},buttonText:lr,buttonClassName:"",scene:null==it?void 0:it.scene},enableAutoPlayPlugin:Boolean(null==it?void 0:it.scene)||Un,isUpperFeed:Un}),i.createElement(ue,{onPlayer:jt})))),(null==To?void 0:To.awemeType)!==N.ed.XgVideo&&(st!==a.lT.Search||Un)&&i.createElement(qt,{onClick:function(){var e;E.i.sendLog("enterVideoCardTab",{from_group_id:null==To?void 0:To.awemeId,type:Xo,enter_method:"click_card_entrance",enter_from_merge:(0,M.vM)(),enter_from:null!==(e=null==vt?void 0:vt.enter_from)&&void 0!==e?e:(0,M.mo)(),tab_name:(null==vt?void 0:vt.tab_name)||k.getTabName()}),wl&&bo?Cl():(kl(!0),wl||(go.current=!1))},className:p()(j.btn,(0,u.Z)({},j.hide,bo&&!wl||Bl||hl||tt===P.QB.Fullscreen)),type:"circle"})),ml&&i.createElement("div",{id:"videoSideBar",className:p()(j.sideBar,j.sideBarDefaultWidth,"isDark","dark"),onWheel:function(e){return e.stopPropagation()}},i.createElement(qo,{awemeInfo:To,onClose:function(){vl({from:"closeIcon"})},userInfo:pt})),wl&&i.createElement("div",{id:"videoSideBar",className:p()(j.sideBarDefaultWidth,j.shopSidebar,"isDark"),onWheel:function(e){return e.stopPropagation()}},i.createElement(Ko,{isFirstLoad:_l,awemeInfo:To,onClose:Cl,userInfo:pt,abtestData:ct})),Boolean(null==it?void 0:it.scene)&&i.createElement(Jo,(0,r.Z)({className:p()((0,u.Z)({},j.displayNone,!ao||bo||ml||wl)),currentPlayingAwemeInfo:To,onClose:function(){return uo(!1)},onItemClick:xo,updateNextAwemeInfo:function(e){return No(e)},isActive:on,showSearchSideCard:ao,setShowSearchSideCard:uo,ref:Eo,stopAutoPlay:Yo,logParams:vt},it)),i.createElement("div",{id:"videoSideBar",className:p()(j.sideBar,j.sideBarDefaultWidth,"isDark",(Ne={},(0,u.Z)(Ne,j.sideBarHidden,rr),(0,u.Z)(Ne,j.noTransition,!bo),(0,u.Z)(Ne,j.middle,!xl),(0,u.Z)(Ne,j.force280pxWidth,st===a.lT.Search&&!Un&&!rr),Ne)),onWheel:function(e){return e.stopPropagation()},ref:_o},!xl&&bo&&i.createElement(ie.g,null),xl&&i.createElement("div",{id:"relatedVideoCard",className:p()(j.sideBarInnerWrapper,j.relatedVertical,(Me={},(0,u.Z)(Me,j.sideBarInnerHidden,!bo),(0,u.Z)(Me,j.inFullScreen,St||bt),(0,u.Z)(Me,"LookModalFrameFast","Windows"===(null===(Pe=(0,O.fV)())||void 0===Pe?void 0:Pe.os)),Me))},i.createElement(w.SV,null,i.createElement(zo,{isRender:cl,ref:yo,collapse:!1,scene:a.lT.Recommend,isShow:bo,awemeInfo:To,lastVideoFeedAweme:nl,originFeedAwemeInfo:Ue,handleClose:function(){kl(!1),Z.Le.setConfig(Z.gI.PlayerCardInfo,null),E.i.sendLog("closeVideoCard",{type:Xo,enter_from_merge:(0,M.vM)(),enter_method:"click_x"})},isActive:on,customProps:An,logParams:dl,abtestData:ct,userContext:ft,isShowCloseBtn:!0,handleRelatedVideoChange:ll,tab:Xo,videoFeed:$o,showTabList:st!==a.lT.Search||Un?Vo:[x.L.Comment],relatedAuthorConfig:Ul,relatedCommentConfig:Wl,defaultHotData:Tl,hotDefaultList:Hn,mixDefault:jn,seriesDefault:Gn,relatedDefault:zn,setOuterRelatedList:et,onTabChange:function(e){el({tab:e})},isUpperFeed:Un,isObscuredByOtherCard:wl||ml||Boolean(Kt)})))),!(0,U.B)(To)&&i.createElement(Pn._,{awemeInfo:To}),Ql&&i.createElement(ro,{onRevokeDislike:$l,isActive:on}),rt&&i.createElement(Po,{isActive:on,awemeInfo:To,player:Ht,abtestData:ct}))),ct.inStreamSearch===L.bu.On&&Zo&&i.createElement(Go,{userInfo:pt,awemeInfo:To,abtestData:ct}),Kt&&i.createElement(_t,(0,d.Z)((0,d.Z)((0,d.Z)({},e),{logParams:tr,customProps:(0,d.Z)((0,d.Z)({},e.customProps),{},{logParams:tr}),close:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"inner_player",n=arguments.length>1?arguments[1]:undefined;ne.sendLog("closePlayer",{click_method:e,enter_from:n});var t=e;"click_screen"===e&&(t="click_blank"),E.i.sendLog("closeVideoCard",{enter_method:t,type:n,enter_from_merge:(0,M.vM)()}),Jt(null),mo.current||F.emit(F.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==Ht?void 0:Ht.playerId,clickMethod:"inner_player"}),"mix"===Qn&&m()((function(){null==Wn||Wn()})),Xn===y.ModalEnterFromVal.FollowAuthorModal&&m()((function(){null==Wn||Wn()}))},item:Ue,getCurrentTime:function(){return Kt.awemeId===Ue.awemeId?Ht.currentTime:null},clickedCard:Gl?x.L.Author:Xo,hotDefaultList:Xo===x.L.Hot?null==yo||null===(Re=yo.current)||void 0===Re?void 0:Re.getHotDefaultList():null,mixDefault:Xo===x.L.Mix?null==yo||null===(De=yo.current)||void 0===De?void 0:De.getMixDefaultParam():null,seriesDefault:Xo===x.L.Series?null==yo||null===(Ve=yo.current)||void 0===Ve?void 0:Ve.getSeriesDefaultParam():null,relatedDefault:Xo===x.L.Related?null==yo||null===(Be=yo.current)||void 0===Be?void 0:Be.getRelatedDefaultList():null,setOuterRelatedList:null==yo||null===(Oe=yo.current)||void 0===Oe?void 0:Oe.setRelatedList,currentAwemeInfo:Kt,isActive:!0,isEnterByCssFullScreen:St,isEnterByFullScreen:bt,awemeInfo:To,changeSplashAdStatus:ot,fullScreenTarget:null!=Ye?Ye:Io.current}),{},{isClientMiniWin:Vn})))}var Qo,Xo,$o=(0,i.forwardRef)(Yo),el="b29gWijH",nl="avT8bB6Q",tl="z11eIvZY",ol="xJkOFnEJ",ll="LfNb3JcT",rl="JLIbSmbm",il=t(60260),al=t.n(il),ul=t(15919),dl="KbX4L1ZW",cl="nz4f9u0e";function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},sl.apply(this,arguments)}var fl=function(e){return i.createElement("svg",sl({width:27,height:27,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Qo||(Qo=i.createElement("path",{d:"M24.5 14.334c0 5.983-4.85 10.833-10.833 10.833-5.983 0-10.834-4.85-10.834-10.833C2.833 8.35 7.683 3.5 13.667 3.5 19.65 3.5 24.5 8.35 24.5 14.334z",stroke:"#fff",strokeOpacity:.9,strokeWidth:1.667})),Xo||(Xo=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.81 13.434a.836.836 0 00-.464.778.833.833 0 00.463.78l2.843 2.842a.835.835 0 001.181-1.18l-1.486-1.486h8.486a.833.833 0 000-1.667h-8.73l1.73-1.729a.835.835 0 00-1.18-1.18l-2.844 2.842z",fill:"#EAEAEB"})))},vl=function(e){var n=e.word,t=void 0===n?"\u9000\u51fa\u5408\u96c6":n,o=e.style,l=e.onClick,r=e.className,a=(0,i.useRef)(t);return t&&(a.current=t),i.createElement("div",{className:p()(dl,r),style:(0,d.Z)({width:20*a.current.length+54},o),onClick:l},i.createElement(tt.Z,{viewBox:"0 0 27 27",src:globalThis.xssNamespace.douyin_web.filterUrl(fl,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:23,height:23,className:cl}),a.current)},ml=t(42275),hl=(0,g.default)((function(){return Promise.all([t.e(258),t.e(7142),t.e(9046),t.e(2713)]).then(t.bind(t,73189))}),{ssr:!1});function pl(e,n){var t,o,l,s,v,m,h,g,_,I,y,b,S,A,P,B,O,U,W,G,K,q,J,Y,Q,X=e.item,$=e.playPrevFunc,ee=e.playNextFunc,te=e.deleteCurrentSwiper,ie=e.fullScreenTarget,ae=e.isActive,de=e.isNext,ce=e.swiper,se=e.children,fe=e.customProps,ve=e.isFirst,me=e.isLast,he=e.handleNextOnLast,pe=e.slideListInsideFunc,ge=e.InnerPlayer,Ce=e.className,Ie=e.isShowGuide,Ee=e.isClientMiniWin,ye=e.style,be=e.close,Se=e.hotDefaultList,Ae=e.mixDefault,Le=e.relatedDefault,ke=e.currentAwemeInfo,Te=e.defaultForceOpenTab,xe=e.moreBoxShowList,Ne=e.modalEnterFrom,Pe=e.isDefaultShowRelatedCard,Me=void 0!==Pe&&Pe,Re=e.bingeInfo,Ze=e.setModalAwemeInfo,De=(0,i.useState)(Me),Ve=(0,c.Z)(De,2),Be=Ve[0],Oe=Ve[1],Ue=function(e){return oe.F.info(e)},Ge=fe||{},ze=Ge.abtestData,Ke=Ge.userContext,qe=Ge.tab,Je=Ge.logParams,Ye=Ke||{},Xe=Ye.userInfo,$e=Ye.dispatch,en=(Xe||{}).isLogin,nn=(0,i.useRef)(null),tn=(0,i.useRef)(null),on=(0,i.useRef)(null),ln=(0,i.useState)(null),un=(0,c.Z)(ln,2),dn=un[0],cn=un[1],sn=(0,i.useRef)(null),fn=(0,i.useRef)(null),vn=we({player:dn,originAwemeInfo:ke||X,isActive:ae,isLast:me,toast:Ue,modalEnterFrom:Ne,handleNextOnLast:he,handleOuterPlayNext:ee,handleOuterPlayPrev:$,isInnerFeedCondition:Be}),mn=vn.changeNextVideo,hn=vn.changePrevVideo,pn=vn.awemeInfo,gn=vn.updateAwemeInfo,wn=vn.setNextAwemeInfo,Cn=vn.setPrevAwemeInfo,_n=vn.prevAwemeInfo,En=vn.nextAwemeInfo,yn=vn.isInnerFeed,Sn=vn.updateLogParams,An=je({onChangeAwemeInfo:function(e){gn(e)}}),xn=An.handleAuthorVideoChange,Nn=An.handleOtherVideoChange,Mn=_e({awemeInfo:pn,scene:qe,modalEnterFrom:Ne,currentVideoFeedRef:tn,isInnerFeed:!0,outFeedItem:X,lastVideoFeedAwemeRef:on,abtestData:ze}).showRelatedTabList;(0,C.Z)((function(){null!=Mn&&f()(Mn).call(Mn,Vn)||On({tab:Mn[0]})}),[Mn]);var Rn=Fe({isActive:ae,awemeInfo:pn,showRelatedTabList:Mn,clickedCard:Te,useCTR:!1}),Fn=Rn.defaultCard,Zn=Rn.videoTag,Dn=We({defaultTab:(null==pn?void 0:pn.awemeType)===N.ed.XgVideo?x.L.Comment:Fn,isActive:ae}),Vn=Dn.curTab,Bn=Dn.curVideoFeed,On=Dn.changeTab,Un=Dn.lastVideoFeedAweme;tn.current=Bn,on.current=Un;var Wn=Qe({awemeInfo:pn}),Hn=Wn.globalCommentCount,jn=Wn.updateGlobalCommentCount,Gn=rn({originAwemeInfo:X,awemeInfo:pn,logParams:Je,curCard:Vn,expandCard:Be?Vn:"",isSideBarShow:Be,isInnerFeedCondition:Be}).reportParams;(0,i.useEffect)((function(){Sn({logParams:Gn})}),[Gn]);var zn=In({awemeInfo:pn}).hotData,Kn=(0,i.useCallback)((function(e){var n,t=e.tab,o=e.clickMethod,l=void 0===o?"":o;Be&&t===Vn?(Oe(!1),E.i.sendLog("closeVideoCard",{type:t,enter_method:l,enter_from_merge:(0,M.vM)()})):(Oe(!0),E.i.sendLog("enterVideoCardTab",{from_group_id:null==pn?void 0:pn.awemeId,type:t,enter_method:l,enter_from_merge:(0,M.vM)(),enter_from:null!==(n=null==Je?void 0:Je.enter_from)&&void 0!==n?n:(0,M.mo)(),tab_name:(null==Je?void 0:Je.tab_name)||k.getTabName()}));On({tab:t})}),[Be,pn,Vn]),qn=an({isActive:ae,player:dn,showSideCard:Be}).hasRelatedCardShown,Jn=(0,i.useCallback)((function(e){var n=(e||{}).clickMethod;return Kn({tab:x.L.Comment,clickMethod:"hot_key"===n?"hot_key":"click_icon"}),Be}),[Be,Kn]),Yn=bn({videoTag:Zn,scene:qe,reportParams:Gn,player:dn,originAwemeInfo:X,awemeInfo:pn,canShowMixCard:!0,canShowSeriesCard:!0,canShowRelatedCard:!0,canShowRelatedSearchFeedBar:!0,canShowChapterFeedbar:f()(t=[L.n6.TagList]).call(t,ze.chapterList),updateVideoInfo:gn,curCard:Vn,toast:Ue,handleAvatarClick:function(e,n){var t=(n||{}).clickMethod;Kn({tab:x.L.Author,clickMethod:"hot_key"===t?"hot_key":"click_icon"})},handleMixClick:function(){return Kn({tab:x.L.Mix,clickMethod:"click_feed_bar"})},handleSeriesClick:function(){return Kn({tab:x.L.Series,clickMethod:"click_feed_bar"})},handleHotClick:function(){return Kn({tab:x.L.Hot,clickMethod:"click_feed_bar"})},isShowSideBar:Be}),Qn=Yn.onAvatarClick,Xn=Yn.videoInfoTags,$n=(0,It.O)({player:dn,isActive:ae}).inImmersive,et=(0,le.OM)({selfUid:null==Xe||null===(o=Xe.info)||void 0===o?void 0:o.uid,actionUid:null==pn||null===(l=pn.authorInfo)||void 0===l?void 0:l.uid,defaultFollowerStatus:null==pn||null===(s=pn.authorInfo)||void 0===s?void 0:s.followerStatus,defaultFollowStatus:null==pn||null===(v=pn.authorInfo)||void 0===v?void 0:v.followStatus,logExtraParams:(0,d.Z)({author_id:null==pn||null===(m=pn.authorInfo)||void 0===m?void 0:m.uid,group_id:null==pn?void 0:pn.awemeId,from_group_id:null==X?void 0:X.awemeId,music_id:null==pn||null===(h=pn.music)||void 0===h?void 0:h.mid,compilation_id:null==pn||null===(g=pn.mixInfo)||void 0===g?void 0:g.mixId,aweme_type:null==pn?void 0:pn.awemeType,is_pure:$n?"1":"0",to_user_id:null==pn||null===(_=pn.authorInfo)||void 0===_?void 0:_.uid,item_duration_ms:(null==pn||null===(I=pn.video)||void 0===I?void 0:I.duration)||0},Gn),isLogin:en,accountParentEl:(0,R.r)()&&ie,onLoginSuccess:function(){return null==$e?void 0:$e({type:"updateUserInfo"})}}),nt=et.follow,tt=et.unFollow,ot=(0,re.r)({selfUid:null==Xe||null===(y=Xe.info)||void 0===y?void 0:y.uid,actionUid:null==pn||null===(b=pn.authorInfo)||void 0===b?void 0:b.uid,defaultFollowerStatus:null==pn||null===(S=pn.authorInfo)||void 0===S?void 0:S.followerStatus,defaultFollowStatus:null==pn||null===(A=pn.authorInfo)||void 0===A?void 0:A.followStatus}).followStatus,lt=Ln({scene:qe,awemeInfo:pn,scrollElRef:sn,changeNextVideo:mn,changePrevVideo:hn,swiper:ce,isActive:!0,player:dn,onFullScreen:function(e){e&&Oe(!0)},onCssFullScreen:function(e){e&&Oe(!0)},onFullScreenrestore:function(){Oe(!0)},onTriggerModalPlayerClose:function(){null==be||be("click_button",Vn)},onLeaveVideo:function(){gn({inComingAwemeInfo:X}),Cn(null),wn(null)},onVideoTitleClick:function(){var e,n;Kn({tab:x.L.Author,clickMethod:"click_title"}),ne.sendLog("clickAuthorHead",(0,d.Z)((0,d.Z)({click_from:"title",urlParamList:["previous_page"],author_id:null==pn||null===(e=pn.authorInfo)||void 0===e?void 0:e.uid,group_id:null==pn?void 0:pn.awemeId,log_pb:null==pn?void 0:pn.logPb,enter_from:(0,M.mo)(),is_full_screen:(0,R.r)()?"1":"0",from_follow_list:null!==(n=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==n&&n.tag?"1":"0"},Gn),{},{action:Be?"open":"close"},(0,D.t)()))}}),rt=lt.isFullScreen,it=lt.isCssFullScreen,at=lt.isMiniWin;kn({scene:qe,awemeInfo:pn,isActive:ae,isNext:de});var ut=Tn({awemeInfo:pn,customProps:fe,reportParams:Gn,fullScreenTarget:ie,tab:Vn,showSideCard:Be,isShowRelatedCard:Be,player:dn,scrollElRef:sn,followStatus:ot,handleCommentClick:function(e){return Jn(e)},isActive:ae}),dt=ut.authorConfig,ct=ut.commentConfig;(0,i.useImperativeHandle)(n,(function(){return{getPlayer:function(){return dn},setIsAuthorCardShow:Oe,setIsShowRelatedCard:Oe,getCurTab:function(){return Vn},player:dn}}),[ae,Vn,dn]),He({awemeInfo:pn,originAwemeInfo:X,onAwemeInfoChange:function(e){var n=e.awemeInfo;null==Ze||Ze(n)}});var st=(0,i.useCallback)((function(e){F.emit(F.EVENT.recommendUpdateWindow,{bingeInfo:null==e?void 0:e.info})}),[]),ft=function(e){var n=e.isCssFullscreen,t=e.isFullscreen,o=e.container,l=e.containerMarginLeft,r=void 0===l?120:l,a=e.switchMarginLeft,u=void 0===a?24:a,d=(0,i.useState)(0),s=(0,c.Z)(d,2),f=s[0],v=s[1];return(0,i.useEffect)((function(){var e=al()((function(){v((null==o?void 0:o.clientWidth)+r+u)}),100,{trailing:!0});return v((null==o?void 0:o.clientWidth)+r+u),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[n,t,o,r,u]),{left:f}}({isCssFullscreen:it,isFullscreen:rt,container:nn.current,containerMarginLeft:114,switchMarginLeft:7}),vt=ft.left;return i.createElement(i.Fragment,null,i.createElement(H.v.Provider,{value:{playerScene:qe,globalCommentCount:Hn,setGlobalCommentCount:jn,authorVideoCardClick:xn,setNextAemeInfo:wn,setPrevAwemeInfo:Cn,modalEnterFrom:Ne}},i.createElement("div",{className:el,onClick:function(){null==be||be()}}),i.createElement("div",{className:p()(ll,(0,u.Z)({},tl,rt||it))},i.createElement(vl,{onClick:function(){null==be||be()},className:p()((P={},(0,u.Z)(P,rl,!(rt||it)),(0,u.Z)(P,ol,rt||it),P)),word:"\u9000\u51fa"}),i.createElement(ml.FollowingUpdateWindow,{swiper:null,isExpand:!0,abTestData:ze,userInfo:Xe,onItemClick:st,scene:a.yC.MiniModal,initPosition:0,currentPlayingBingeInfo:Re,className:p()((0,u.Z)({},j.hidden,rt||it))})),i.createElement("div",{className:p()(j.miniModalContainer,(0,u.Z)({},j.miniModalFullScreen,rt||it)),ref:nn},i.createElement("div",{"data-e2e":ae?"feed-active-video":"feed-video","data-e2e-vid":pn.awemeId,id:"slideMode",className:p()(nl,j.playerCommentWrapper,Ce,"relatedUiAdapter",(B={isMiniWindow:Ee},(0,u.Z)(B,tl,rt||it),(0,u.Z)(B,j.isFullScreen,rt),(0,u.Z)(B,j.miniWidth,Be),(0,u.Z)(B,j.adapterSeventh,!0),(0,u.Z)(B,j.adapterMiniHeight,!0),B)),style:ye},i.createElement("div",{className:p()(j.playerContainer,"playerContainer",(O={},(0,u.Z)(O,j.isHavePlayer,pn),(0,u.Z)(O,j.isSafari,(0,V.G6)()),(0,u.Z)(O,j.showSideBar,Be),(0,u.Z)(O,j.noTransition,!Be),O))},se,i.createElement("div",{className:p()(j.playerWrap,"slider-video"),ref:function(e){ae?fn.current||(fn.current=e):fn.current=null}},(null==pn?void 0:pn.debugInfo)&&i.createElement(z.W,{req:null==pn||null===(U=pn.debugInfo)||void 0===U?void 0:U.web_debug_req,video:null==pn||null===(W=pn.debugInfo)||void 0===W?void 0:W.client_rec_debug_info,size:{height:null==dn?void 0:dn._videoHeight,width:null==dn?void 0:dn._videoWidth},gear:null==pn||null===(G=pn.video)||void 0===G||null===(K=G.bitRateList)||void 0===K||null===(q=K[0])||void 0===q?void 0:q.gearName,showPanelRightside:!0}),i.createElement(ge,(0,r.Z)({},e,{actionFollow:nt,actionUnFollow:tt,userInfo:Xe,dispatch:$e,awemeInfo:pn,nextAwemeInfo:En,prevAwemeInfo:_n,videoTags:Xn,isInnerFeed:yn,playNextFunc:mn,playPrevFunc:hn,deleteCurrentSwiper:te,toggleComment:function(e){Jn(e)},onAvatarClick:Qn,logParams:(0,d.Z)((0,d.Z)({},Gn),{},{relation:String(ot),is_click_cover:Number(X.awemeId!==pn.awemeId)}),videoToast:Ue,abtestData:ze,isFullScreen:rt,slideListInsideFunc:pe,isAuthorCardShow:!1,isCssFullScreen:it,isShowRelatedCard:Be,isShowGuide:Ie,showPlaySwitch:it||rt,moreBoxShowList:(0,d.Z)((0,d.Z)({},xe),{},{notInterestingIcon:!1,unfollow:!0,report:!0}),shortCutFiltered:[T.getShortcut().dislike.badgeText],positionBoxClassName:{right:(0,V.vU)()&&(null==pn?void 0:pn.awemeType)===N.ed.Normal||Be?null:j.interactionPos},isShowPageFullScreen:!0}),i.createElement(ue,{onPlayer:cn}))),(null==pn?void 0:pn.awemeType)!==N.ed.XgVideo&&i.createElement(qt,{onClick:function(){var e;Oe(!0),E.i.sendLog("enterVideoCardTab",{from_group_id:null==pn?void 0:pn.awemeId,type:Vn,enter_method:"click_card_entrance",enter_from_merge:(0,M.vM)(),enter_from:null!==(e=null==Je?void 0:Je.enter_from)&&void 0!==e?e:(0,M.mo)(),tab_name:(null==Je?void 0:Je.tab_name)||k.getTabName()})},className:p()(j.btn,(0,u.Z)({},j.hide,Be||at)),type:"circle"})),i.createElement("div",{id:"videoSideBar",className:p()(j.sideBar,j.sideBarDefaultWidth,"isDark",(J={},(0,u.Z)(J,j.sideBarHidden,!Be),(0,u.Z)(J,j.noTransition,!Be),J)),onWheel:function(e){return e.stopPropagation()},ref:sn},i.createElement("div",{id:"relatedVideoCard",className:p()(j.sideBarInnerWrapper,j.relatedVertical,(Y={},(0,u.Z)(Y,j.sideBarInnerHidden,!Be),(0,u.Z)(Y,j.inFullScreen,it||rt),Y))},i.createElement(w.SV,null,i.createElement(hl,{isRender:qn,collapse:!1,scene:a.lT.Modal,isShow:Be,awemeInfo:pn,originFeedAwemeInfo:X,isActive:ae,customProps:fe,abtestData:ze,userContext:Ke,isShowCloseBtn:!0,handleRelatedVideoChange:Nn,tab:Vn,handleClose:function(){Oe(!1),E.i.sendLog("closeVideoCard",{type:Vn,enter_from_merge:(0,M.vM)(),enter_method:"click_x"})},videoFeed:Bn,showTabList:Mn,relatedAuthorConfig:dt,relatedCommentConfig:ct,defaultHotData:zn,hotDefaultList:Se,mixDefault:Ae,relatedDefault:Le,onTabChange:function(e){return On({tab:e})},logParams:Gn})))),i.createElement(Pn._,{awemeInfo:pn,showImg:!1,className:j.bigBackgroundImg,controlHeight:a.fp.MidHigh}))),!(rt||it)&&i.createElement(ul.I,{playNextFunc:function(){mn(undefined,{from:"click_button"})},playPrevFunc:function(){hn(undefined,{from:"click_button"})},disablePrev:ve&&!Be||Be&&!_n,disableNext:me&&!Be||Be&&!En,style:{position:"absolute",left:vt||(null===(Q=nn.current)||void 0===Q?void 0:Q.clientWidth)+120+24,top:document.body.clientHeight/2-40},className:j.playSwitch})))}var gl=(0,i.forwardRef)(pl),wl=t(75450),Cl=function(e,n){var t=e.customProps,o=e.modalEnterFrom,l=(t||{}).tab,u=(0,i.useRef)(null);(0,i.useImperativeHandle)(n,(function(){var e,n;return{getPlayer:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:null===(e=u.current)||void 0===e?void 0:e.setIsAuthorCardShow,setIsShowRelatedCard:null===(n=u.current)||void 0===n?void 0:n.setIsShowRelatedCard,setTab:function(e){var n,t;null===(n=u.current)||void 0===n||null===(t=n.setTab)||void 0===t||t.call(n,e)},getCurTab:function(){var e,n;return null===(e=u.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e)},getCurrAweme:function(){var e,n;return null===(e=u.current)||void 0===e||null===(n=e.getCurrAweme)||void 0===n?void 0:n.call(e)}}}),[u.current]),(0,wl.s)(!0);return i.createElement(i.Fragment,null,l===a.lT.Modal&&"recommendUpdateWindow"===o?i.createElement(gl,(0,r.Z)({},e,{ref:u})):i.createElement($o,(0,r.Z)({ref:u},e)))},_l=(0,i.forwardRef)(Cl)},45021:function(e,n,t){t.d(n,{g:function(){return o}});var o=function(e){var n,t,o,l,r,i,a,u,d,c;return{boardType:Number(null===(n=/board_type=([\w|_]*)&/.exec(null==e||null===(t=e.hotList)||void 0===t?void 0:t.schema))||void 0===n?void 0:n[1]),boardSubType:(null===(o=/board_sub_type=([\w|_]*)&/.exec(null==e||null===(l=e.hotList)||void 0===l?void 0:l.schema))||void 0===o?void 0:o[1])||"",sentence:(null==e||null===(r=e.hotList)||void 0===r?void 0:r.sentence)||"",sentenceId:(null==e||null===(i=e.hotList)||void 0===i?void 0:i.sentenceId)||"",footer:null==e||null===(a=e.hotList)||void 0===a?void 0:a.footer,rank:null==e||null===(u=e.hotList)||void 0===u?void 0:u.rank,type:null==e||null===(d=e.hotList)||void 0===d?void 0:d.type,hotName:null==e||null===(c=e.hotList)||void 0===c?void 0:c.header}}},90511:function(e,n,t){t.d(n,{V:function(){return r}});var o=t(11227),l=t.n(o),r=function(e,n,t){var o,r;if(l()(o=["douyin_dcd_model","douyin_disease","xiaohe_disease","baikemy_disease","medicines_baikemy"]).call(o,t))return"search_related_card";switch(e){case"user":return"author_card";case"mix":return null!=n&&null!==(r=n.seriesInfo)&&void 0!==r&&r.seriesId?"playlet_card":"compilation_card";case"hot":return"hot_card";default:return"general_search"}}},67748:function(e,n,t){t.d(n,{_:function(){return u}});var o=t(53864),l=t(353),r=t(97876),i=t(71116),a=t(13971),u=function(e){var n=e.prevAwemeInfo,t=e.awemeInfo,u=e.isInnerFeedModel,d=(0,o.useRef)(t);(0,o.useEffect)((function(){d.current=t}),[t]),(0,o.useEffect)((function(){var e=null==r?void 0:r.listen(null==r?void 0:r.EVENT.quitInnerFeed,(function(e){e&&i.Le.setConfig(i.gI.PreAwemeId,"")}));return function(){return e()}}),[]),(0,o.useEffect)((function(){var e=(0,a.$o)(l.LocalStorageKeys.HasUseFlashBack),t=(0,a.$o)(l.LocalStorageKeys.ShowFlashBackTipNum)||0;if(u&&!e&&t<3){var o,c=i.Le.getConfig(i.gI.PreAwemeId);c&&c===(null===(o=d.current)||void 0===o?void 0:o.awemeId)?r.emit(r.EVENT.showFlashbackTip,!0):r.emit(r.EVENT.showFlashbackTip,!1),null!=n&&n.awemeId&&i.Le.setConfig(i.gI.PreAwemeId,null==n?void 0:n.awemeId)}}),[n,u])}},67343:function(e,n,t){t.d(n,{V:function(){return d}});var o=t(11227),l=t.n(o),r=t(53864),i=t(36177),a=t(51365),u=t(72603),d=function(e){var n=e.awemeInfo;(0,r.useEffect)((function(){var e,t,o,r,d,c,s,f,v,m;(null==n||null===(e=n.anchorInfo)||void 0===e?void 0:e.type)!==i.as.AnchorShop||null!=n&&null!==(t=n.anchorInfo)&&void 0!==t&&null!==(o=t.extra)&&void 0!==o&&null!==(r=o[0])&&void 0!==r&&r.product_detail_schema||!l()(d=[1,4]).call(d,Number(null==n||null===(c=n.anchorInfo)||void 0===c||null===(s=c.extra)||void 0===s||null===(f=s[0])||void 0===f?void 0:f.platform))||a.oe.event.error({name:a.Mo.ShopAnchorDataError,report:{logId:n.logPb,erroData:null==n||null===(v=n.anchorInfo)||void 0===v||null===(m=v.extra)||void 0===m?void 0:m[0],enterFromMerge:(0,u.yW)()}})}),[n])}},87490:function(e,n,t){t.d(n,{q:function(){return k}});var o=t(11227),l=t.n(o),r=t(84639),i=t.n(r),a=t(34346),u=t.n(a),d=t(8e3),c=t.n(d),s=t(85792),f=t.n(s),v=t(53864),m=t(42053),h=t(36177),p=t(353),g=t(5611),w=t(71116),C=t(80806),_=t(41644),I=t(13948),E=t(11256),y=t(35667),b=t(72627),S=t(66028),A=[h.ed.Normal];var L=function(e){var n=e||{},t=n.isActive,o=n.abtestData,r=n.awemeInfo,a=(0,y.n)(),d=(0,v.useMemo)((function(){var e={};return("both"===(null==o?void 0:o.videoPreloadConfigApplySideServer)||(0,g.DT)()&&"client"===(null==o?void 0:o.videoPreloadConfigApplySideServer)||!(0,g.DT)()&&"web"===(null==o?void 0:o.videoPreloadConfigApplySideServer))&&(e=null==o?void 0:o.videoPreloadConfigServer),i()({},null==o?void 0:o.videoPreloadConfig,e)}),[o]);return(0,v.useEffect)((function(){var e=window.playerPreloader;if(a&&t&&e){var n,r,i=w.Le.getConfig(w.gI.PreloadList)||[],s=null===(n=(0,C.G)(p.SessionStorageKeys.manualSwitch))||void 0===n?void 0:n.gearType,f=null!==(r=null==d?void 0:d.preloadTime)&&void 0!==r?r:5,v=(null==o?void 0:o.payloadUrl)||(null==o?void 0:o.payloadUrlServer);if((null==i?void 0:i.length)>0){var m,h,g=u()(m=c()(i).call(i,(function(e){return function(e,n){return l()(A).call(A,e.awemeType)}(e)}))).call(m,(function(e,n){var t,l,r,i,a=(0,I.Q)({awemeInfo:e,abtestData:o,userselection:s,filter264InMix:!0}),u=null==a||null===(t=a.definition)||void 0===t?void 0:t.list;!v||null!==(l=u)&&void 0!==l&&l.length||(u=[{url:null==a?void 0:a.url,duration:(null==e||null===(r=e.video)||void 0===r?void 0:r.duration)/1e3,uri:null==e||null===(i=e.video)||void 0===i?void 0:i.uri,bitrate:null==a?void 0:a.bitrate,size:null==a?void 0:a.size}]);return{order:n,data:{codecType:null==a?void 0:a.codecType,vid:null==e?void 0:e.awemeId,payload:u,preloadTime:f,vtype:null==a?void 0:a.vtype}}}));null===(h=e.addPreloaderList)||void 0===h||h.call(e,g)}}}),[t,a,r,o,d]),(0,v.useEffect)((function(){var e=window.playerPreloader;if(null!=a&&a.video&&e&&t){var n=null==a?void 0:a.video,o=f()((function(){var t,o;null!=a&&null!==(t=a.plugins)&&void 0!==t&&t.mp4encryptplayer&&(null==e||null===(o=e.attachPlayer)||void 0===o||o.call(e,n))}),3e3);return function(){clearTimeout(o),null==e||e.detachPlayer(n)}}}),[t,a,r]),(0,v.useEffect)((function(){var e,n,t,l;(window.Mp4Preloader=m.Mp4Preloader,null!=o&&o.use265Web)&&((null===(e=(0,_.$)())||void 0===e?void 0:e.score)>(null==o||null===(n=o.xgvideoOptions)||void 0===n?void 0:n.score)&&(0,E.Cu)()&&(0,E.VV)()?null===m.Mp4Preloader||void 0===m.Mp4Preloader||null===(t=m.Mp4Preloader.disable)||void 0===t||t.call(m.Mp4Preloader):null===m.Mp4Preloader||void 0===m.Mp4Preloader||null===(l=m.Mp4Preloader.enable)||void 0===l||l.call(m.Mp4Preloader))}),[o,r]),null},k=function(e){var n=(0,b.N)();return v.createElement(S.k,{componentName:"Preload",Slardar:n},v.createElement(L,e))}},93710:function(e,n,t){t.d(n,{n:function(){return F}});var o=t(65146),l=t(30906),r=t(34346),i=t.n(r),a=t(53864),u=t(79705),d=t.n(u),c=t(61508),s=t(96716),f=t(92267),v=t(50051),m=t(55266),h="QpUlbJX7",p="fsQBBc7f",g="Lnsyat3L",w="hVT1IjTo",C="CdbaaVHz",_="bkmqyRO3",I="e5qNJ7Tg",E="iSX8ttBD",y="IlEhZCtJ",b="E3rlsPae",S=t(32781),A=t(81762),L=t(35667),k=t(68843),T=0,x=1;var N=t(72627),P=t(9909),M=t(66028),R=function(e){var n,t,r,u=e.awemeInfo,N=e.onClick,M=e.isActive,R=e.className,F=e.onMouseEnter,Z=e.onMouseLeave,D=function(e){var n=e.awemeInfo,t=e.isActive,o=(0,L.n)(),l=(0,a.useRef)(!0),r=(0,a.useRef)(!1),i=(0,a.useState)(T),u=(0,S.Z)(i,2),d=u[0],s=u[1],f=(0,a.useCallback)((function(){var e,n;r.current||(null==o||null===(e=o.on)||void 0===e||e.call(o,A.B.TimeUpdate,h),null==o||null===(n=o.on)||void 0===n||n.call(o,c.SEEKING,p)),r.current=!0}),[o]),v=(0,a.useCallback)((function(){var e,n;r.current&&(null==o||null===(e=o.off)||void 0===e||e.call(o,A.B.TimeUpdate,h),null==o||null===(n=o.off)||void 0===n||n.call(o,c.SEEKING,p)),r.current=!1}),[o]),m=(0,a.useCallback)((function(){l.current=!0}),[]),h=(0,a.useCallback)((function(e){(e||{}).currentTime>=16&&(l.current=!1,s(x),v())}),[o,n,v]),p=(0,a.useCallback)((function(e){e.currentTime>=16&&(s(x),v()),l.current=!1}),[v]),g=(0,a.useCallback)((function(){s(x),m(),f()}),[f,m]);return(0,k.u)(o,A.B.Ended,g),(0,a.useEffect)((function(){m()}),[t,m]),(0,a.useEffect)((function(){s(T),m()}),[n.awemeId,m]),(0,a.useEffect)((function(){if(t)return o&&l.current?(f(),function(){v()}):void 0}),[o,n,t,f,v]),(0,a.useEffect)((function(){null!=o&&o.currentTime&&h({currentTime:o.currentTime})}),[o]),{displayState:d}}({isActive:M,awemeInfo:u}),V=D.displayState,B=(null==u||null===(n=u.anchorInfo)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t[0])||{},O=(0,L.n)(),U=(0,s.x)((function(){f.i.sendLog("productEntranceShow",(0,l.Z)((0,l.Z)({},(0,v.R)(u)),{},{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))})),W=(null==B?void 0:B.tags)||[],H=V===x&&W.length>0;return a.createElement("div",{className:d()("xgplayer-shop-anchor",h,p,(0,o.Z)({},C,H),R),onClick:function(){null==N||N(),null==O||O.emit(c.USER_ACTION,{action:"shop_anchor_click"}),f.i.sendLog("productEntranceClick",(0,l.Z)((0,l.Z)({},(0,v.R)(u)),{},{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))},onMouseEnter:function(){null==F||F()},onMouseLeave:function(){null==Z||Z()},ref:U},a.createElement("div",{className:g},a.createElement(P.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(m.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:w,width:20,height:20,viewBox:"0 0 20 20"}),a.createElement("div",{className:_},a.createElement("div",{className:I},null==u||null===(r=u.anchorInfo)||void 0===r?void 0:r.titleTag,(null==B?void 0:B.elastic_title)&&a.createElement(a.Fragment,null,a.createElement("span",{className:E}," | ")," ",null==B?void 0:B.elastic_title)),H&&a.createElement("div",{className:y},i()(W).call(W,(function(e,n){return a.createElement("span",{key:e,className:b},e," ",n<W.length-1&&a.createElement(a.Fragment,null," ",a.createElement("span",{className:E}," | ")))}))))))},F=function(e){var n=(0,N.N)();return a.createElement(M.k,{componentName:"ShopAnchor",Slardar:n},a.createElement(R,e))}},59568:function(e,n,t){t.d(n,{h:function(){return c}});var o=t(85792),l=t.n(o),r=t(53864),i=t(35667),a=t(72627),u=t(66028),d=function(e){var n,t,o=(e||{}).isActive,a=(0,i.n)(),u=null==a||null===(n=a.getPlugin("progress"))||void 0===n?void 0:n.outer,d=null==a||null===(t=a.getPlugin("volume"))||void 0===t?void 0:t.root;return(0,r.useEffect)((function(){var e=function(e){null==e||e.stopPropagation()};return null==u||u.addEventListener("pointerdown",e),null==u||u.addEventListener("touchstart",e),null==d||d.addEventListener("pointerdown",e),null==d||d.addEventListener("touchstart",e),function(){null==u||u.removeEventListener("pointerdown",e),null==u||u.removeEventListener("touchstart",e),null==d||d.removeEventListener("pointerdown",e),null==d||d.removeEventListener("touchstart",e)}}),[u,d]),(0,r.useEffect)((function(){if(a&&o){a.addClass("hide-loading");var e=l()((function(){a.removeClass("hide-loading")}),2e3);return a.once("playing",(function(){a.removeClass("hide-loading"),clearTimeout(e)})),function(){clearTimeout(e)}}}),[o,a]),null},c=function(e){var n=(0,a.N)();return r.createElement(u.k,{componentName:"SwiperFitPlugin",Slardar:n},r.createElement(d,e))}},26571:function(e,n,t){t.d(n,{L:function(){return oe},Qf:function(){return Y},QU:function(){return ne}});var o,l,r=t(30673),i=t(32781),a=t(64408),u=t(5594),d=t.n(u),c=t(21155),s=t.n(c),f=t(26447),v=t.n(f),m=t(7924),h=t.n(m),p=t(56442),g=t.n(p),w=t(101),C=t.n(w),_=t(85792),I=t.n(_),E=t(71444),y=t.n(E),b=t(53864),S=t(61508),A=t(56920),L=t(28712),k=t(71116),T=t(5277),x=t(97876),N=t(30906),P=t(72603),M=t(91990),R=t.n(M),F=function(){var e,n,t=(new(R())).getResult(),o=null==t||null===(e=t.browser)||void 0===e?void 0:e.name,l=null==t||null===(n=t.browser)||void 0===n?void 0:n.version;switch(o){case"Chrome":return"70.0.0.0"<l||l<"199.0.0.0";case"Safari":case"Opera":return!1;default:return!0}},Z=function(){var e=0,n=-1;return{getRecentShortestTime:function(){var e=n;return n=-1,e},getRecentLongestConsumeTime:function(){var n=e;return e=0,n},recordRecentLongestConsumeTime:function(t){e=Math.max(e,t),n=-1===n?t:Math.min(t,n)}}},D=function(e){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];e.canSuspend=!0,I()((function(){var t,o;e.canSuspend&&(0===e.currentActiveNodeCount||n)&&(null===(t=e.audioCtx)||void 0===t||null===(o=t.suspend)||void 0===o||o.call(t),e.currentSourceNodeCount=0)}),100)},V=function(e){e.currentActiveNodeCount+=1},B=function(e){e.currentActiveNodeCount-=1,0===e.currentActiveNodeCount&&D(e)},O="effectNodeErrorEvent",U=new(t(13795).hD)({volumeBalanceEvent:{eventName:"volume_balance_event",params:{desc:"",enter_from:"",sample_rate:0}}}),W=function(){var e=(0,a.Z)(d().mark((function e(n,t,o){var l,r,i,a,u,c,s,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,L.p)()&&window.AudioContext&&F()){e.next=3;break}return e.abrupt("return");case 3:if((null==(i=null===(l=window.SSR_RENDER_DATA_DOC||window.SSR_RENDER_DATA)||void 0===l||null===(r=l.app)||void 0===r?void 0:r.abTestData)?void 0:i.disableAudioContext)!==A.PA.On){e.next=6;break}return e.abrupt("return");case 6:if(!(null!=n&&n.audioCtx||null!=n&&n.effectNode)){e.next=8;break}return e.abrupt("return");case 8:return U.sendLog("volumeBalanceEvent",{desc:"audioContextCreate",enter_from:(0,P.vM)()}),a=null!=i&&i.useNewMammonWorkletProcessor?"https://unpkg.byted-static.com/byted/mammon-engine/1.4.0-alpha.0/dist/mammon-worklet-processor.min.js":"https://unpkg.byted-static.com/byted/mammon-engine/1.0.11/dist/mammon-worklet-processor.min.js",u=new AudioContext,e.next=14,u.audioWorklet.addModule(a);case 14:U.sendLog("volumeBalanceEvent",{desc:"audioWorkletCreate",enter_from:(0,P.vM)()}),n.audioCtx=u,n.getRecentLongestConsumeTimePackRes=Z(),c=new AudioWorkletNode(u,"mammon-worklet-processor",{outputChannelCount:[u.destination.channelCount],processorOptions:(0,N.Z)((0,N.Z)({},Y(n)),{},{maxCount:Math.floor(u.sampleRate/128)})}),s=Boolean(u.createAnalyser),c.onprocessorerror=function(e){U.sendLog("volumeBalanceEvent",{desc:"processorerror",enter_from:(0,P.vM)()}),t.emit(O,{error:e});try{s&&n.analyser?(n.analyser.disconnect(u.destination),c.disconnect(n.analyser)):c.disconnect(u.destination)}catch(o){}n.effectNode=null,n.analyser=null},c.port.onmessage=function(e){var t;"SAMPLE"===e.data.type?n.getRecentLongestConsumeTimePackRes.recordRecentLongestConsumeTime(e.data.duration):U.sendLog("volumeBalanceEvent",{desc:"effectNode_".concat(null==e||null===(t=e.data)||void 0===t?void 0:t.type),enter_from:(0,P.vM)()})},u.onstatechange=function(){U.sendLog("volumeBalanceEvent",{desc:"audioCtxState_".concat(null==u?void 0:u.state),enter_from:(0,P.vM)(),sample_rate:null==u?void 0:u.sampleRate})},s?((f=u.createAnalyser()).fftSize=256,c.connect(f),f.connect(u.destination),n.analyser=f,n.hasAnalyser=!0):c.connect(u.destination),c.port.postMessage({type:"ENABLE"}),n.effectNode=c,n.volumeEvent=t,t.on("liveActiveEvent",(function(){D(n,!0)})),e.next=31;break;case 29:e.prev=29,e.t0=e.catch(0);case 31:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(n,t,o){return e.apply(this,arguments)}}(),H=t(62754),j=t.n(H),G=function(e,n,t){var o=e.audioCtx.createMediaElementSource(t);e.currentSourceNodeCount+=1;n.on(S.VOLUME_CHANGE,(function(){n.isPlaying&&e.audioCtx&&(e.canSuspend=!1,e.audioCtx.resume())}));return n.on(S.PLAY,(function(){e.audioCtx&&(e.canSuspend=!1,e.audioCtx.resume())})),n.isPlaying&&I()((function(){e.audioCtx.resume()})),o.connect(e.effectNode),n.equalizeVolumeState="connected",o},z=t(35667),K=t(72627),q=t(46090),J=t(66028),Y=function(e,n){return{sampleRate:e.audioCtx.sampleRate,numChannels:e.audioCtx.destination.channelCount,source_peak:(null==n?void 0:n.peak)||.99,source_lufs:(null==n?void 0:n.loudness)||-12,target_lufs:(null==n?void 0:n.targetLufs)||-12,debugger:!1}},Q=[{audioCtx:null,effectNode:null,currentMeta:null,volumeEvent:null,currentSourceNodeCount:0,currentActiveNodeCount:0,analyser:null,maxDb:[],hasAnalyser:!1,canSuspend:!1}],X=[new(y())];function $(){return $=(0,a.Z)(d().mark((function e(){var n,t,o,l,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>0&&r[0]!==undefined?r[0]:1,t=0;case 2:if(!(t<n)){e.next=10;break}return o=Q[t],l=X[t],e.next=7,W(o,l,"".concat(t));case 7:t++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}(0,L.p)()||(window.globalCtx={audioCtxArr:Q,volumeCtxArr:X});var ee=(null===(o=k.Le.getConfig(k.gI.AbtestData)||{})||void 0===o||null===(l=o.fixStringVideoLeak)||void 0===l?void 0:l.audioCount)||1;!function(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,n=0;n<e;n++)if(X[n]||X.push(new(y())),!Q[n]){Q.push({audioCtx:null,effectNode:null,currentMeta:null,volumeEvent:null,currentSourceNodeCount:0,currentActiveNodeCount:0,analyser:null,maxDb:[],hasAnalyser:!1,canSuspend:!1})}}(ee),function(){$.apply(this,arguments)}(ee);var ne=function(){s()(Q).call(Q,(function(e){D(e,!0)}))},te=function(e){var n=e||{},t=n.index,o=void 0===t?0:t,l=n.awemeInfo,a=n.isActive,u=n.abtestData,d=n.suspendWhenMetaIsUndefined,c=void 0!==d&&d,f=(0,b.useState)(),m=(0,i.Z)(f,2),p=m[0],w=m[1],_=(0,z.n)(),E=(0,b.useRef)(),y=(0,b.useRef)(!1),L=(0,b.useRef)(v()()),k=(0,b.useRef)(null),N=(0,b.useRef)(Q[o%Q.length]||Q[0]),P=(0,b.useRef)(X[o%X.length]||X[0]);y.current=a;var M=c&&function(e,n,t){var o,l,r=Number(null==n?void 0:n.currentSourceNodeCount);if(r<=3)return!1;if(j()(null==e||null===(o=e.video)||void 0===o?void 0:o.meta))return!0;if(null==t||null===(l=t.suspendCondition)||void 0===l||!l.open)return!1;var i=t.suspendCondition,a=i.thresholdToForceSuspend,u=i.thresholdToSuspend,d=Number(e.video.meta.loudness);return r>u&&d<-12||r>a}(l,N.current,u),R=!(0,T.G6)()&&(null==u?void 0:u.volumeBalance)===A.L.On&&!M;(0,b.useEffect)((function(){var e=N.current,n=(null==e?void 0:e.volumeEvent)||P.current;if(_&&_.video){if(e.audioCtx&&e.effectNode&&R){var t;if("h265soft"!==(null==_||null===(t=_.config)||void 0===t?void 0:t.initCodecType)){var o,l,r;if(null!==(o=_.video)&&void 0!==o&&o.sourceNode)(l=null===(r=_.video)||void 0===r?void 0:r.sourceNode).connect(e.effectNode);else l=G(e,_,_.video);E.current=l,_.video.sourceNode=l;var i=!1,a=function(){i=!0,l.disconnect(e.effectNode),l.connect(e.audioCtx.destination)};return n.once(O,a),V(e),function(){B(e),n.off(O,a),i||E.current.disconnect(e.effectNode),E.current=null,l=null}}var u,d=function(){var n,t;if(null!=e&&e.effectNode){var o,l;if(null===(n=u)||void 0===n||null===(t=n.disconnect)||void 0===t||t.call(n,e.effectNode),_.video instanceof HTMLVideoElement)null!==(o=_.video)&&void 0!==o&&o.sourceNode?(u=_.video.sourceNode).connect(e.effectNode):(u=G(e,_,_.video),_.video.sourceNode=u);else if(_.video.audioMedia.sourceNode)(u=_.video.audioMedia.sourceNode).connect(e.effectNode);else u=G(e,_,null===(l=_.video)||void 0===l?void 0:l.audioMedia),_.video.audioMedia.sourceNode=u;w(u),V(e)}else try{var r,i,a,d,c;null===(r=(null===(a=_.video)||void 0===a?void 0:a.sourceNode)||(null===(d=_.video)||void 0===d||null===(c=d.audioMedia)||void 0===c?void 0:c.sourceNode))||void 0===r||null===(i=r.connect)||void 0===i||i.call(r,e.audioCtx.destination)}catch(s){}};_.on(S.LOADED_DATA,d);var c=!1,s=function(){var n,t,o;c=!0;var l=(null===(n=_.video)||void 0===n?void 0:n.sourceNode)||(null===(t=_.video)||void 0===t||null===(o=t.audioMedia)||void 0===o?void 0:o.sourceNode);null==l||l.disconnect(e.effectNode),null==l||l.connect(e.audioCtx.destination)};n.once(O,s);var f=function(){var n,t;c||(null===(n=u)||void 0===n||null===(t=n.disconnect)||void 0===t||t.call(n,e.effectNode));u=null,B(e)};return _.once(S.DESTROY,f),function(){_.off(S.LOADED_DATA,d),n.off(O,s),_.off(S.DESTROY,f),u=null}}_.equalizeVolumeState="origin"}}),[_]),(0,b.useEffect)((function(){var e,n,t,o=N.current;_&&(Boolean((null===(e=_.video)||void 0===e?void 0:e.sourceNode)||(null===(n=_.video)||void 0===n||null===(t=n.audioMedia)||void 0===t?void 0:t.sourceNode))&&o.audioCtx&&o.effectNode||!M||!a||D(o,!0));a&&_&&N.current&&s()(Q).call(Q,(function(e){e!==o&&D(e,!0)}))}),[a,_]);var F=(0,b.useMemo)((function(){var e,n,t,o,r,i;return{peak:h()(null==l||null===(e=l.video)||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.peak)||0,loudness:h()(null==l||null===(t=l.video)||void 0===t||null===(o=t.meta)||void 0===o?void 0:o.loudness)||0,targetLufs:"undefined"!=typeof window&&null!==(r=null===(i=window)||void 0===i?void 0:i.targetLufs)&&void 0!==r?r:-12}}),[l]),Z=(0,b.useCallback)((function(e){var n,t,o=N.current;(null==o||null===(n=o.currentMeta)||void 0===n?void 0:n.peak)===(null==e?void 0:e.peak)&&(null==o||null===(t=o.currentMeta)||void 0===t?void 0:t.loudness)===(null==e?void 0:e.loudness)||!y.current||(o.currentMeta=e,o.audioCtx&&o.effectNode&&o.effectNode.port.postMessage({type:"UPDATE",param:Y(o,e)}))}),[]),U=function(){var e=N.current,n=function(){Z(F)};_.crossOrigin=(0,q.S)(l)?"use-credentials":"anonymous",_.effectNodeConsumeTime={longest:e.getRecentLongestConsumeTimePackRes.getRecentLongestConsumeTime(),shortest:e.getRecentLongestConsumeTimePackRes.getRecentShortestTime()};var t=x.listen(x.EVENT.syncInteraction,(function(){_.isUserActive&&Z(F)}));return _.on(S.TIME_UPDATE,n),(0,T.vU)()||(_.once(S.AUTOPLAY_STARTED,n),_.once(S.PLAY,n),_.once("immediatePlay",n)),function(){t(),_.off(S.TIME_UPDATE,n),_.off(S.AUTOPLAY_STARTED,n),_.off(S.PLAY,n),_.off("immediatePlay",n)}};(0,b.useEffect)((function(){if(_&&E.current&&a)return U()}),[F,_,a]),(0,b.useEffect)((function(){if(_&&p&&a)return U()}),[F,p,a]);var W=function e(){var n=N.current;if(n.analyser){var t,o,l=new Uint8Array(128);if(n.analyser.getByteFrequencyData(l),n.maxDb&&!1===(null==_?void 0:_.paused)&&!1===(null==_||null===(t=_.video)||void 0===t?void 0:t.muted)&&(null==_||null===(o=_.video)||void 0===o?void 0:o.volume)>0&&v()()-L.current>=2e3){var i;L.current=v()(),n.maxDb.push(Math.max.apply(Math,(0,r.Z)(l))),n.maxDb.length>=100&&n.maxDb.shift();var a=g()(i=n.maxDb).call(i,-5);if(null!=u&&u.useDownRawAudio&&a.length>=5&&C()(a).call(a,(function(e){return 0===e})))return void function(e,n){var t,o,l,r,i,a;e.audioCtx&&e.effectNode&&!1===(null==n||null===(t=n.video)||void 0===t?void 0:t.muted)&&(null==n||null===(o=n.video)||void 0===o?void 0:o.volume)>0&&(null===(l=n.video)||void 0===l||null===(r=l.sourceNode)||void 0===r||r.disconnect(e.effectNode),null===(i=n.video)||void 0===i||null===(a=i.sourceNode)||void 0===a||a.connect(e.audioCtx.destination),e.audioCtx=null,e.effectNode=null,e.analyser=null)}(n,_)}k.current=requestAnimationFrame(e)}};return(0,b.useEffect)((function(){var e=N.current;if(R&&e.analyser&&a){var n=I()((function(){e.analyser&&W()}),100);return function(){clearTimeout(n),cancelAnimationFrame(k.current)}}}),[a]),null},oe=function(e){var n=(0,K.N)();return b.createElement(J.k,{componentName:"VolumeBalance",Slardar:n},b.createElement(te,e))}},85649:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAALQAQMAAAD1s08VAAAAA1BMVEUAAACnej3aAAAAlElEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOD24JAAAAAAQND/154wAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqwDE3wABfajOdgAAAABJRU5ErkJggg=="}}]);