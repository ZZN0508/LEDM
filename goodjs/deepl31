"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[3891],{62522:function(e,t,r){var n=r(77396),s=r(98808),o=r(30171),a=r(61606);let i=(e,t,n,s,o)=>{var a,i,l;return e?1e3:!o.isActive("TACO-8")||t||n||!s||null!==(a=r.g.store)&&void 0!==a&&null!==(i=a.getState())&&void 0!==i&&null!==(l=i.auth)&&void 0!==l&&l.userType.lastLoginTime?500:0};a.Z.defineType("/translator/common/charCount",["/translator/core/config","/translator/core/textareas","/translator/core/loadingTranslation","/translator/environment/releaseGroups"],(e,t,r,a)=>{let{isLoading:l}=r,u=e.get("CONFIG__IS_PRO"),d=e.get("isWriteMode"),c=e.get("CONFIG__IS_ANONYMOUS"),f=e.get("isApp"),p=(0,o.S3)(0),g=(0,o.S3)(!1),h=(0,o.S3)(!1),S=(0,o.S3)(!1),m=(0,o.S3)(""),O=(0,o.S3)(""),R=(0,o.S3)(!u),T=(0,o.S3)(!1),b=(0,o.S3)(!0),v=(0,n.$)(),C=(0,s.f)(),y=i(u,d,f,c,a),x=e.get("CONFIG__MAX_NUM_CHARACTERS");return t.onSourceTextChanged.push(e=>{p(e.length)}),t.onTargetTextChanged.push(e=>{b(0===e.length)}),(0,o.S1)([p],e=>{m(`${x} / ${e}`),O(`${e} / ${x}`),g(e>y),h((!!d||!u)&&e>x),!c||d||f||S(e>3e3)}),(0,o.S1)([h],e=>{e?T(!0):T(!1)}),{charCount:p,isMarkerVisible:g,isLimitReached:h,isAnonymousLimitReached:S,charLimitWithCount:m,charCountWithLimit:O,onClickProAd:v,onDisplayProAd:C,charLimit:x,isProAdVisible:T,showLimit:R,isLoading:l,isTargetTextEmpty:b}})},32818:function(e,t,r){var n=r(4769),s=r(98808),o=r(30171),a=r(61606),i=r(51098),l=r(10878),u=r(12959);a.Z.defineType("/translator/common/errorHandling",["/translator/core/networkStatus","/translator/core/config","/translator/core/requestHandling","/translator/environment/userInfo","globalState"],(e,t,r,a,d)=>{var c;let f,p=0,g=(0,s.f)(),h=(0,s.f)(),S=(0,o.S3)([]),m=new Set,O=e=>m.has(e),R=e=>{S(S().filter(t=>t.type!==e)),m.delete(e)},T=()=>{S([]),m.clear()},b=e=>{let t=[];return t.push(e.statusCode||"0"),e.rpcError&&e.rpcError.code&&t.push(`${e.rpcError.code}`),e.trigger&&("splitting"===e.trigger?t.push("S"):"translation"===e.trigger&&t.push("T")),`(${t.join("-")})`},v=e=>{O(e.type)||(S([].concat((0,n.Z)(S()),[e])),m.add(e.type),g(e))},C=e=>{O(e)&&(R(e),h(e))},y=(c=(e,t)=>{v({type:i.c.TooManyRequests,isIpBlock:t,priority:1e4,errorCode:e})},f=!1,r.onRequestContextStarted.push(()=>{f=!1}),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];f||(f=!0,r.waitForPendingRequests().then(()=>{c.apply(void 0,t)}))});return e.onRPCCallFailed.push(()=>{p=Date.now()}),e.onRequestFailed.push((r,n)=>{try{let o=b(n);if(n.errorType===l.ri&&n.rpcError&&429===n.statusCode){if("autocompletion"===r||"alternatives"===r)t.get("CONFIG__IS_PRO")?console.warn("429 in autocomplete/alternatives: ignore"):(d[l.AL](!0),d[l.JR]=2*Date.now());else if(d[l.JR]=Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION"),t.get("CONFIG__IS_PRO")||1042901!==n.rpcError.code&&1042902!==n.rpcError.code&&1042911!==n.rpcError.code&&1042912!==n.rpcError.code)v({type:i.c.Overloaded,text:o,priority:50,errorCode:n}),setTimeout(()=>{C(i.c.Overloaded)},6e4);else{let e=1042901===n.rpcError.code||1042902===n.rpcError.code?"user":"ip";setTimeout(()=>y(n,"ip"===e))}}else if(n.errorType===l.ri&&n.rpcError&&503===n.statusCode){var s;d[l.JR]=Math.max(d[l.JR],Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION"));let r=null!==(s=a.isProAvailable())&&void 0!==s&&s,u=t.get("CONFIG__IS_PRO"),c=[1042911,1042912].includes(n.rpcError.code);u||(r?setTimeout(()=>y(n,c)):(v({type:i.c.ServiceUnavailable,text:o,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(C(i.c.ServiceUnavailable),"REMOVE"))))}else n.errorType===l.ri&&n.rpcError&&456==n.statusCode?(v({type:i.c.QuotaReached,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(C(i.c.QuotaReached),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&403==n.statusCode?(v({type:i.c.AccountIssue,text:o,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(C(i.c.AccountIssue),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&401==n.statusCode?(v({type:i.c.SessionLost,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>(C(i.c.SessionLost),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&412==n.statusCode?(v({type:i.c.TooMuchAuthentication,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>(C(i.c.TooMuchAuthentication),"REMOVE"))):n.errorType===l.ri?(d[l.JR]=Math.max(d[l.JR],Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION")),m.has(i.c.NetworkIssue)||(v({type:i.c.NetworkIssue,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>{if(Date.now()>p+2e4)return C(i.c.NetworkIssue),"REMOVE"}))):v({type:i.c.InternalIssue,priority:100,errorCode:n})}catch(e){}}),d[l.AL].onValueChanged.push(e=>{e?v({type:i.c.LimitedAdvancedEditing,priority:20,errorCode:{statusCode:429,trigger:"translation"}}):C(i.c.LimitedAdvancedEditing)}),u.Z["system-error"]&&setTimeout(()=>{let e=i.c[u.Z["system-error"]];e&&(e===i.c.TooManyRequests?v({type:e,priority:1e4,isIpBlock:!!u.Z["too-many-requests-ip-block"],errorCode:{statusCode:0,trigger:"translation"}}):v({type:e,priority:1e4,text:"(0)",errorCode:{statusCode:0,trigger:"translation"}}))},2e3),{onError:g,onErrorSolved:h,activeSystemErrors:S,isSystemErrorActive:O,removeActiveSystemError:R,removeSystemErrors:T,addSystemError:v,resolveSystemError:C}})},46096:function(e,t,r){var n=r(61606),s=r(84627),o=r(88141),a=r(26493),i=r(25889);n.Z.defineType("/translator/common/observeTextSession",["/translator/webTranslatorCore","/translator/core/domElements","/translator/core/translateSourceSentences","/translator/core/textareas","/translator/core/predefinedState","/translator/core/requestHandling","/translator/common/observeTranslationBackend","/translator/core/networkStatus"],(e,t,r,n,l,u,d,c)=>{let f,p;let g=null;e.features.with(["/translator/dictionary"],e=>{g=e});let h="",S="",m=0,O=!1,R=!1,T=(0,s.fo)({allowReplay:!0}),b=(0,s.fo)({allowReplay:!0}),v=(0,s.fo)({allowReplay:!0}),C=(0,s.fo)(),y=(0,s.fo)(),x=(0,s.fo)(),E=(0,s.fo)(),q=(0,s.fo)(),w=(0,o.xu)(1e4),I=(0,o.xu)(1e4),D=(0,s.S3)(!1),_=(0,s.S3)(!1),A=(0,s.S3)(!1);function J(){p=Date.now()%864e5*1e6+Math.round(1e6*Math.random()),d.setTextSessionId(`${p}`)}let H=(e,t)=>{if(e===t)return 0;let r=a.Z.getEqualPreAndPostfix(e,t);return e.length>t.length?e.length-(r[0]+r[1]):t.length-(r[0]+r[1])};J(),n.onSourceTextBecomesEmpty.push(J),document.addEventListener("selectionchange",()=>{if(f=void 0,t.isSelectionInSourceTextarea()){let e=t.getSourceEditCursorOffset(),r=t.getSourceEditCursorOffsetEnd();f={startOffset:e,endOffset:r,text:n.getSourceText()}}}),e.features.with(["/translator/common/switchLang"],e=>{e.onSwitchLanguage.push(e=>{E(e),O=!0,setTimeout(()=>{O=!1},200)})}),e.features.with(["/translator/write/switchContent"],e=>{e.onContentSwitched.push(()=>{q(),R=!0,setTimeout(()=>{R=!1},200)})});let M=e=>{m=n.getSourceText().length,document.removeEventListener("visibilitychange",P),window.removeEventListener("beforeunload",P),m>0&&u.waitForPendingRequests().then(()=>{var t,r;_(!1),v({...e,dictionaryTriggered:null!==(t=null===(r=g)||void 0===r?void 0:r.isDictionaryAvailable())&&void 0!==t&&t,...d.getTrackingData(e.textSessionId)})})},P=e=>{if("beforeunload"===e.type||"visibilitychange"===e.type&&"hidden"===document.visibilityState){let e={textSessionId:`${p}`,numberOfCharactersBefore:m,numberOfCharactersAfter:n.getSourceText().length};M(e),w(()=>{})}};return n.onSourceTextChanged.pushWithReplay((t,s,o)=>{let a=Date.now();if("internal"===s)return;let S=t.trim(),v=h.trim();if(S===v&&!o)return;let C=""!==S,{changedPartInFirstString:y,changedPartInSecondString:x}=i.ZP.getStringChangeRange(v.replace(/\s/g,""),S.replace(/\s/g,""));if(y+x===""||!C&&"replace"===s)return;let E=!!(""!==v!==C||f&&!f.text.substr(0,f.startOffset).trim()&&!f.text.substr(f.endOffset).trim()||O||R||"replace"===s);E&&(J(),m=0,O=!1,R=!1);let q=l.isInPredefinedState()||"typing"!==s&&E;if(q){let t={textSessionId:`${p}`,numberOfCharacters:n.getSourceText().length},s={pastedInlineFormatting:!1,pastedBlockFormatting:!1};e.features.with(["/translator/common/interceptClipboard"],e=>{let t=e.contentInfo();s.pastedInlineFormatting=t.containsInlineFormatting,s.pastedBlockFormatting=t.containsBlockFormatting});let o=A()||l.isInPredefinedState()?T:b;m=n.getSourceText().length;let i=()=>(u.waitForPendingRequests().then(()=>{let e=Date.now()-a;setTimeout(()=>{var r,n,a;g&&g.isRequestPending()?null===(a=g)||void 0===a||a.isRequestPending.onValueChanged.push(()=>{var r,n;return o({...t,...s,dictionaryTriggered:null!==(r=null===(n=g)||void 0===n?void 0:n.isDictionaryAvailable())&&void 0!==r&&r,completeTranslationDuration:e,...d.getTrackingData(t.textSessionId)}),"REMOVE"}):o({...t,...s,dictionaryTriggered:null!==(r=null===(n=g)||void 0===n?void 0:n.isDictionaryAvailable())&&void 0!==r&&r,completeTranslationDuration:e,...d.getTrackingData(t.textSessionId)})})}),"REMOVE");m>0&&(r.onTargetSentencesHaveChanged.push(i),c.onRequestFailed.push(e=>{if("translation"===e||"splitting"===e)return r.onTargetSentencesHaveChanged.remove(i),"REMOVE"}))}else{let e=()=>{let e={textSessionId:`${p}`,numberOfCharactersBefore:m,numberOfCharactersAfter:n.getSourceText().length};return _(!0),w(()=>M(e)),document.removeEventListener("visibilitychange",P),window.removeEventListener("beforeunload",P),document.addEventListener("visibilitychange",P),window.addEventListener("beforeunload",P),"REMOVE"};r.onTargetSentencesHaveChanged.push(e),c.onRequestFailed.push(t=>{if("translation"===t||"splitting"===t)return r.onTargetSentencesHaveChanged.remove(e),"REMOVE"})}h=t}),n.onTargetTextChanged.push((e,t)=>{if("update"===t||"internal"===t||"replace"===t){D()||(S=e);return}if(D(!0),e.trim()===S.trim())return;let r={textSessionId:`${p}`,numberOfCharactersSource:n.getSourceText().length,numberOfCharactersTargetBefore:S.length,numberOfCharactersTargetAfter:e.length,characterDiff:H(S,e)};I(()=>{D(!1),S=e,C(r)})}),e.features.with(["/translator/smartEditing/smartTargetEditing"],e=>{e.onUserSelectsAlternative.push(t=>{let{index:r,isAutoCompletion:n}=t,s={textSessionId:`${p}`,selectedPosition:r,suggestionType:n?2:1};n||e.onTargetSentenceChangedByAlternative.push(e=>{let{targetTextBefore:t,targetTextAfter:r}=e;return x({...s,characterDiff:H(t,r)}),"REMOVE"}),n&&e.onTargetSentenceChangedByAutocompletion.push(e=>{let{targetTextBefore:t,targetTextAfter:r}=e;return x({...s,characterDiff:H(t,r)}),"REMOVE"})})}),{getTextSessionId:()=>p,onInitialFullTranslation:T,onFullTranslation:b,onPartialTranslation:v,onTranslationCorrection:C,onTranslationAutocomplete:y,onSuggestionDropdownSelection:x,onLanguageSwitchTriggered:E,isTranslationCorrectionSessionActive:D,isPartialTranslationSessionActive:_,onContentSwitchTriggered:q,setSourceTextIsPredefined:e=>A(e)}})},41655:function(e,t,r){var n=r(61606);let s=function(){function e(){this.numberOfSplitTextRequests=0,this.numberOfFailedSplitTextRequests=0,this.sumOfDurationOfSplitTextRequests=0,this.numberOfHandleJobsRequests=0,this.numberOfFailedHandleJobsRequests=0,this.sumOfDurationOfHandleJobsRequests=0,this.numberOfHandleJobsSentences=0,this.numberOfHandleJobsJobs=0,this.sumOfServerSideDurationOfSplitTextRequests=0,this.sumOfServerSideDurationOfHandleJobsRequests=0,this.sampleTranslationRequestsStats=void 0,this.sampleSplittingRequestsStats=void 0}return e.prototype.getTrackingDataAsObject=function(){return{numberOfSplitTextRequests:this.numberOfSplitTextRequests,sumOfDurationOfSplitTextRequests:Math.round(this.sumOfDurationOfSplitTextRequests),numberOfHandleJobsRequests:this.numberOfHandleJobsRequests,sumOfDurationOfHandleJobsRequests:Math.round(this.sumOfDurationOfHandleJobsRequests),numberOfHandleJobsSentences:this.numberOfHandleJobsSentences,numberOfHandleJobsJobs:this.numberOfHandleJobsJobs,randomSplitTextRequestStats:this.sampleSplittingRequestsStats,randomHandleJobsRequestStats:this.sampleTranslationRequestsStats,totalServerSideDurationOfSplitTextRequests:this.sumOfServerSideDurationOfSplitTextRequests,totalServerSideDurationOfHandleJobsRequests:this.sumOfServerSideDurationOfHandleJobsRequests}},e}();n.Z.defineType("/translator/common/observeTranslationBackend",["/translator/core/translationBackend"],e=>{let t=new Map,r="";function n(e){void 0===e&&(e=r);let n=t.get(e);if(!n){!function(){let e=t.keys(),r=Date.now()-18e4;for(let n of e){let e=t.get(n);e.lastAccess<r&&t.delete(n)}}();let r={lastAccess:Date.now(),data:new s};return t.set(e,r),r.data}return n.lastAccess=Date.now(),n.data}function o(e,t,r){let{totalDuration:s,requestReceiveDuration:o,handshakeDuration:a}=r,i=s-o-a,l=n();"splitting"===e?(l.numberOfSplitTextRequests+=1,l.sumOfDurationOfSplitTextRequests+=t,l.sumOfServerSideDurationOfSplitTextRequests+=i):(l.numberOfHandleJobsRequests+=1,l.sumOfDurationOfHandleJobsRequests+=t,l.sumOfServerSideDurationOfHandleJobsRequests+=i)}return e.onRequestSucceeded.push((e,t,r)=>{o(e,t,r)}),e.onRequestFailed.push((e,t,r,s)=>{(function(e){let t=n();"splitting"===e?t.numberOfFailedSplitTextRequests+=1:t.numberOfFailedHandleJobsRequests+=1})(e),o(e,r,s)}),e.onSplitSentenceResultReceived.push((e,t)=>{let r=n(),s=r.numberOfSplitTextRequests-r.numberOfFailedSplitTextRequests||1;if(Math.random()<=1/s){let n=0,s=0;e.texts.forEach(e=>{n+=e.chunks.reduce((e,t)=>{var r;return e+(null!==(r=t.sentences.length)&&void 0!==r?r:0)},0),s+=e.chunks.flatMap(e=>e.sentences).reduce((e,t)=>e+t.text.length,0)}),r.sampleSplittingRequestsStats={sentenceCount:n,numberOfCharacters:s,...t}}}),e.onTranslationsReceived.push((e,t,r,s,o)=>{let a=r.reduce((e,t)=>{var r,n;return e+(null!==(r=null===(n=t.sentences)||void 0===n?void 0:n.length)&&void 0!==r?r:0)},0),i=n();i.numberOfHandleJobsSentences+=a,i.numberOfHandleJobsJobs+=r.length;let l=i.numberOfHandleJobsRequests-i.numberOfFailedHandleJobsRequests||1;if(Math.random()<=1/l){let e=r.flatMap(e=>e.sentences).reduce((e,t)=>{var r;return e+(null!==(r=null==t?void 0:t.text.length)&&void 0!==r?r:0)},0);i.sampleTranslationRequestsStats={sentenceCount:a,numberOfCharacters:e,jobCount:r.length,...o}}}),{getTrackingData:e=>n(e).getTrackingDataAsObject(),setTextSessionId:e=>{r=e}}})},26493:function(e,t,r){var n=r(46625);let s={diff:n.Hg,getEqualPreAndPostfix:n.zj,slicePrefixAndPostfix:n.jx,_diffToString:n.eB,_test_fuzzy:n.Df,test:n.Bu};"object"==typeof window&&window.M&&window.M.registerAsync("diff",s),t.Z=s}}]);