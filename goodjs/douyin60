"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[2398],{21228:function(e,t,n){n.d(t,{t:function(){return He}});var i,o=n(65902),l=n(65146),r=n(32781),a=n(67161),u=n(34346),s=n.n(u),c=n(53864),d=n(79705),f=n.n(d),v="oLQoaUK3",h="u0N5WOYm",p="Srjrb_Q0",g=n(84639),m=n.n(g),y=n(76569),w=n.n(y),_=100,b=50,S=.7,E={horizontal:0,vertical:1,unknow:2},I=n(60260),T=n.n(I),P=n(17172),x=n(11227),C=n.n(x),k=n(29529),L=n(26447),N=n.n(L);if("object"===("undefined"==typeof performance?"undefined":(0,k.Z)(performance))&&"function"==typeof performance.now){var Z=performance;i=function(){return Z.now()}}else{Date;var R=N()();i=function(){return N()()-R}}var D="transitionStart",A="transitionEnd",M=["INPUT","SELECT","OPTION","TEXTAREA","BUTTON","VIDEO","LABEL"];function O(e){var t,n;this.eventEmitter.emit("touchStart"),this.touchData.isTouchDown=!0,this.touchData.touchStartX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,this.touchData.touchStartY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,this.touchData.startX=this.touchData.x,this.touchData.startY=this.touchData.y,this.touchData.lastDetectTime=i(),C()(M).call(M,null==e||null===(t=e.target)||void 0===t?void 0:t.nodeName)||null!=e&&null!==(n=e.target)&&void 0!==n&&n.isContentEditable||e.preventDefault()}var B=n(8369),U=n.n(B),H=n(53361),F=n.n(H),Y=n(52249),W=n.n(Y);function j(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"x",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"y";return this.touchData[this.direction===E.horizontal?e:t]}var K=function(e,t,n,i){var o;e.style.transform="translate3d(".concat(s()(o=[t,n,i]).call(o,(function(e){return function(e){return"string"==typeof e?e:"".concat(e,"px")}(e)})).join(","),")")},V=[],z=function(e,t){var n=t>=0?1:-1;return Math.min(e,Math.abs(t))===e?n*e:t};function q(){return null!=this&&this.data&&null!=this&&this.activeIndex&&!this.data[this.activeIndex-1]?-this.touchData.containerHeight*this.activeIndex:0}function X(){return-(this.data.length-1)*this.touchData[this.direction===E.horizontal?"containerWidth":"containerHeight"]}function Q(e,t){this.touchData.x=this.direction===E.horizontal?this.touchData.startX+z(this.touchData.containerWidth,e):0,this.touchData.y=this.direction===E.vertical?this.touchData.startY+z(this.touchData.containerHeight,t):0;var n,i=q.call(this);if(j.call(this)>i)this.touchData[this.direction===E.horizontal?"x":"y"]=i-1+Math.pow(-i+j.call(this,"startX","startY")+(this.direction===E.horizontal?e:t),null!==(n=this.resistanceRatio)&&void 0!==n?n:S);else if(j.call(this)<X.call(this)){var o;this.touchData[this.direction===E.horizontal?"x":"y"]=X.call(this)+1-Math.pow(X.call(this)-j.call(this,"startX","startY")-(this.direction===E.horizontal?e:t),null!==(o=this.resistanceRatio)&&void 0!==o?o:S)}}function G(e){if(this.touchData.isTouchDown){e.cancelable&&e.preventDefault();var t="touchmove"===e.type&&e.targetTouches&&(e.targetTouches[0]||e.changedTouches[0]),n="touchmove"===e.type?t.pageX:e.pageX,o="touchmove"===e.type?t.pageY:e.pageY,l=(n-this.touchData.touchStartX)*this.touchRatio,r=(o-this.touchData.touchStartY)*this.touchRatio;if(Math.max(Math.abs(l),Math.abs(r))>=30&&this.touchData.userIntendDirection===E.unknow&&(this.touchData.userIntendDirection=Math.max(Math.abs(l),Math.abs(r))===Math.abs(l)?E.horizontal:E.vertical),this.touchData.userIntendDirection===this.direction){var a=i(),u=this.direction===E.horizontal?this.touchData.x:this.touchData.y;Q.call(this,l,r),this.touchData.gestureSwipeSpeed=function(e,t){return V.push([e,t]),U()(V).call(V,0,F()(V).call(V,(function(t){return e-t[0]<=300}))),W()(V).call(V,(function(e,t){return e+t[1]}),0)/V.length}(a,Math.floor((this.touchData[this.direction===E.horizontal?"x":"y"]-u)/((a-this.touchData.lastDetectTime)/1e3))),this.touchData.lastDetectTime=a,K(this.el,this.touchData.x,this.touchData.y,"0"),this.eventEmitter.emit("touchMove"),this.touchData.isTouchMove=!0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null)}}}var $=function(e,t){e.style.transitionDuration="string"!=typeof t?"".concat(t,"ms"):t};function J(e,t,n){var i=this;this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=E.unknow,0<=e&&this.data.length;var o=this.touchData.containerWidth*-e,l=this.touchData.containerHeight*-e;if(this.direction===E.horizontal?this.touchData.x===o:this.touchData.y===l)return this.activeIndex=e,this.updateCallback(e,{from:n}),!1;var r=null!=t?t:this.speed;if($(this.el,r),this.touchData.x=this.direction===E.horizontal?o:0,this.touchData.y=this.direction===E.vertical?l:0,K(this.el,this.touchData.x,this.touchData.y,0),this.activeIndex=e,this.updateCallback(e,{from:n}),0!==r)return this.touchData.animating=!0,this.eventEmitter.emit(D),this.transitionCallback=function(){i.touchData.animating=!1,i.eventEmitter.emit(A),$(i.el,0),i.el.removeEventListener("transitionend",i.transitionCallback),i.el.removeEventListener("webkitTransitionEnd",i.transitionCallback)},this.el.addEventListener("transitionend",this.transitionCallback),this.el.addEventListener("webkitTransitionEnd",this.transitionCallback),!0;this.touchData.animating=!1}function ee(){J.call(this,this.activeIndex,250)}function te(){return Math.abs(j.call(this)-j.call(this,"startX","startY"))>=j.call(this,"containerWidth","containerHeight")/2}function ne(e){return e-this.touchData.lastDetectTime>=_}function ie(e){var t=te.call(this),n=Math.abs(this.touchData.gestureSwipeSpeed)>=b,i=ne.call(this,e),o=0===this.activeIndex&&j.call(this)>0||this.activeIndex===this.data.length-1&&j.call(this)<X.call(this),l=j.call(this)-j.call(this,"startX","startY")<0==this.touchData.gestureSwipeSpeed<0||0===this.touchData.gestureSwipeSpeed;return(t||n&&!i)&&!o&&l}function oe(){var e=j.call(this)-j.call(this,"startX","startY")<0?1:-1,t=this.activeIndex+e;return this.data[t]?t:this.activeIndex}function le(e){if(this.touchData.isTouchDown&&this.touchData.userIntendDirection===this.direction){this.eventEmitter.emit("touchEnd");var t=i();ie.call(this,t)?J.call(this,oe.call(this),250,"drag"):ee.call(this)}this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=E.unknow}var re=n(21155),ae=n.n(re),ue=n(76473),se=n.n(ue);function ce(){var e,t=this,n=this.el.offsetWidth,i=this.el.offsetHeight;this.touchData.containerWidth=n+(this.direction===E.horizontal?this.spaceBetween:0),this.touchData.containerHeight=i+(this.direction===E.vertical?this.spaceBetween:0),ae()(e=this.el.childNodes).call(e,(function(e){var o;C()(o=se()(e.classList)).call(o,"dySwiperSlide")&&(e.style[t.direction===E.vertical?"height":"width"]="".concat(t.direction===E.vertical?i:n,"px"),e.style[t.direction===E.vertical?"marginBottom":"marginRight"]="".concat(t.spaceBetween,"px"))}));var o=this.activeIndex,l=this.touchData.containerWidth*-o,r=this.touchData.containerHeight*-o;this.touchData.x=this.direction===E.horizontal?l:0,this.touchData.y=this.direction===E.vertical?r:0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null),K(this.el,this.touchData.x,this.touchData.y,0)}var de,fe=n(42404),ve=n.n(fe),he=n(28712);function pe(){return de||(0,he.p)()||(de={pointerEvents:Boolean(window.PointerEvent)&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,observer:"MutationObserver"in window||"WebkitMutationObserver"in window,smoothScroll:document.documentElement&&"scrollBehavior"in document.documentElement.style,touch:Boolean("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),passiveListener:function(){var e=!1;try{var t=ve()({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(n){}return e}(),gestures:"ongesturestart"in window}),de}var ge,me=n(92524),ye=n.n(me),we=n(94090),_e=n.n(we);function be(){return ge||(ge=function(){var e;if((0,he.p)())return null;var t=pe(),n=window.navigator.platform,i=window.navigator.userAgent,o={ios:!1,android:!1},l=window.screen.width,r=window.screen.height,a=i.match(/(Android);?[\s\/]+([\d.]+)?/),u=i.match(/(iPad).*OS\s([\d_]+)/),s=i.match(/(iPod)(.*OS\s([\d_]+))?/),c=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===n,f="MacIntel"===n,v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&f&&t.touch&&ye()(v).call(v,_e()(e="".concat(l,"x")).call(e,r))>=0&&((u=i.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),f=!1),a&&!d&&(o.os="android",o.android=!0),(u||c||s)&&(o.os="ios",o.ios=!0),o}()),ge}var Se="touchstart",Ee="touchmove",Ie="touchend",Te="touchcancel",Pe="pointerdown",xe="pointermove",Ce="pointerup";function ke(e){this.touchData.animating&&(e.stopPropagation(),e.stopImmediatePropagation())}var Le=function(e){var t=e.dySwiperStatusRef,n=e.spaceBetween,i=e.speed,o=e.resistanceRatio,l=e.swiperContainerRef,r=e.direction,a=e.updateActiveIndex,u=e.swiperEventsEmitter,d=e.touchRatio,f=e.onSwiper,v=e.activeIndex,h=e.data,p=(0,c.useRef)(-1);(0,c.useEffect)((function(){-1!==p.current&&t.current.slideTo(p.current,0)}),[h]),(0,c.useEffect)((function(){var e,c,h,g,y,_={isTouchDown:!1,isTouchMove:!1,animating:!1,x:0,y:0,startX:0,startY:0,touchStartX:0,touchStartY:0,gestureSwipeSpeed:0,userIntendDirection:E.unknow,containerWidth:l.current.offsetWidth+(r===E.horizontal?n:0),containerHeight:l.current.offsetHeight+(r===E.vertical?n:0)};t.current=m()(t.current,{el:l.current,direction:r,updateCallback:a,eventEmitter:u.current,touchData:_,spaceBetween:n,speed:i,resistanceRatio:o,touchRatio:d,on:w()(e=u.current.on).call(e,u.current),once:w()(c=u.current.once).call(c,u.current),emit:w()(h=u.current.emit).call(h,u.current),off:w()(g=u.current.off).call(g,u.current),slideTo:w()(J).call(J,t.current),slideToSync:function(e){p.current=e,a(e,{from:""})},update:function(){return null},slideNext:function(){var e,n,i=t.current.activeIndex+1;i<(null===(e=t.current)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)&&J.call(t.current,i)},slidePrev:function(){var e,n,i=t.current.activeIndex-1;i>=0&&null!==(e=t.current)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n[i]&&J.call(t.current,i)}});var b=function(e,t){var n,i=pe(),o=be(),l=s()(n=[O,G,le,T()(ce,50,{leading:!0,trailing:!0})]).call(n,(function(e){return w()(e).call(e,t)})),r=w()(ke).call(ke,t);if(!i.touch&&i.pointerEvents){e.addEventListener(Pe,l[0],!1),document.addEventListener(xe,l[1],!1),document.addEventListener(Ce,l[2],!1),e.addEventListener("click",r,!0);var a=w()(P.Z).call(P.Z,e,l[3]);return function(){e.removeEventListener(Pe,l[0],!1),document.removeEventListener(xe,l[1],!1),document.removeEventListener(Ce,l[2],!1),e.removeEventListener("click",r,!0),a&&a()}}var u=!("touchstart"!==Se||!i.passiveListener)&&{passive:!0,capture:!1};i.touch&&(e.addEventListener(Se,l[0],u),e.addEventListener(Ee,l[1],!!i.passiveListener&&{passive:!1,capture:!1}),e.addEventListener(Ie,l[2],u),e.addEventListener(Te,l[2],u)),(!o.ios&&!o.android||!i.touch&&o.ios)&&(e.addEventListener("mousedown",l[0],!1),document.addEventListener("mousemove",l[1],!1),document.addEventListener("mouseup",l[2],!1));var c=w()(P.Z).call(P.Z,e,l[3]);return e.addEventListener("click",r,!0),function(){i.touch&&(e.removeEventListener(Se,l[0],u),e.removeEventListener(Ee,l[1],!1),e.removeEventListener(Ie,l[2],u),e.removeEventListener(Te,l[2],u)),(!o.ios&&!o.android||!i.touch&&o.ios)&&(e.removeEventListener("mousedown",l[0],!1),document.removeEventListener("mousemove",l[1],!1),document.removeEventListener("mouseup",l[2],!1)),c&&c(),e.removeEventListener("click",r,!0)}}(l.current,t.current);return null==f||f(t.current),null===(y=t.current)||void 0===y||y.slideTo(v,0),function(){b()}}),[])},Ne=n(85792),Ze=n.n(Ne),Re=n(71444),De=n.n(Re),Ae=n(54805),Me=n(47298);function Oe(e){var t,n=[];return ae()(t=c.Children.toArray(e)).call(t,(function(e){if(e.type&&e.type.displayName===Me.o.displayName)n.push(e);else if(e.props&&e.props.children){var t;ae()(t=Oe(e.props.children)).call(t,(function(e){return n.push(e)}))}})),n}function Be(e){var t,n=[],i={"wrapper-start":[],"wrapper-end":[]};return ae()(t=c.Children.toArray(e)).call(t,(function(e){if(e.type&&e.type.displayName===Me.o.displayName)n.push(e);else if(e.props&&e.props.slot&&i[e.props.slot])i[e.props.slot].push(e);else if(e.props&&e.props.children){var t=Oe(e.props.children);t.length>0?ae()(t).call(t,(function(e){return n.push(e)})):i["wrapper-end"].push(e)}else i["wrapper-end"].push(e)})),[n,i]}var Ue=["direction","children","className","data","spaceBetween","style","speed","resistanceRatio","onSwiper","slideKey","onActiveIndexChange","touchRatio","initIndex"],He=(0,c.forwardRef)((function(e,t){var n=e.direction,i=e.children,u=e.className,d=e.data,g=e.spaceBetween,y=void 0===g?0:g,w=e.style,_=e.speed,b=e.resistanceRatio,S=e.onSwiper,I=e.slideKey,T=e.onActiveIndexChange,P=e.touchRatio,x=void 0===P?1:P,C=e.initIndex,k=void 0===C?0:C,L=(0,a.Z)(e,Ue),N=(0,c.useRef)(null),Z=(0,c.useRef)({}),R=Be(i),D=(0,r.Z)(R,2),A=D[0],M=D[1],O=A[0],B=function(e){var t=e.data,n=e.onActiveIndexChange,i=e.initIndex,o=(0,c.useState)(i),l=(0,r.Z)(o,2),a=l[0],u=l[1],s=(0,c.useRef)();s.current||(s.current=new(De()));var d=(0,Ae.Z)((function(e,t){var i=t.from,o=void 0===i?"":i;a!==e&&(null==n||n(e),u(e),s.current.emit("slideChange",{from:o}))}));return{activeIndex:a,updateActiveIndex:d,swiperEventsEmitter:s,dataList:t}}({data:d,onActiveIndexChange:T,dySwiperStatusRef:Z,initIndex:k}),U=B.activeIndex,H=B.updateActiveIndex,F=B.swiperEventsEmitter,Y=B.dataList;return Le({dySwiperStatusRef:Z,data:d,activeIndex:U,spaceBetween:y,speed:_,resistanceRatio:b,touchRatio:x,swiperContainerRef:N,direction:n,updateActiveIndex:H,swiperEventsEmitter:F,onSwiper:S}),(0,c.useImperativeHandle)(t,(function(){return Z.current}),[]),function(e){var t=e.dySwiperStatusRef,n=e.data,i=e.activeIndex,o=e.spaceBetween,l=e.speed,r=e.resistanceRatio;t.current=m()(t.current,{data:n,activeIndex:i,speed:l,resistanceRatio:r,spaceBetween:o,slides:n}),(0,c.useEffect)((function(){Ze()((function(){ce.call(t.current)}))}),[o,n])}({dySwiperStatusRef:Z,activeIndex:U,data:d,spaceBetween:y,speed:_,resistanceRatio:b}),function(e){var t=e.dySwiperStatusRef,n=e.data;(0,c.useEffect)((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.activeIndex)>(null==n?void 0:n.length)-1&&(null==n?void 0:n.length)>0&&J.call(t.current,(null==n?void 0:n.length)-1,0)}),[n])}({dySwiperStatusRef:Z,data:d}),c.createElement("div",(0,o.Z)({className:f()(v,u),style:w},L),c.createElement("div",{ref:N,className:f()(h,(0,l.Z)({},p,n===E.vertical))},M["wrapper-start"],O?s()(Y).call(Y,(function(e,t){return c.cloneElement(O,{activeIndex:U,currentIndex:t,slideData:e,key:null==I?void 0:I(e,t)})})):null,M["wrapper-end"]))}))},47298:function(e,t,n){n.d(t,{o:function(){return c}});var i=n(65902),o=n(67161),l=n(53864),r=n(79705),a=n.n(r),u="Fgy_mWbW",s=["activeIndex","currentIndex","children","slideData","style","className"],c=(0,l.memo)((function(e){var t=e.activeIndex,n=e.currentIndex,r=e.children,c=e.slideData,d=e.style,f=e.className,v=(0,o.Z)(e,s),h={activeIndex:t,currentIndex:n,slideData:c};return l.createElement("div",(0,i.Z)({style:d,className:a()(u,"dySwiperSlide",f)},v),"function"==typeof r?r(h):r)}));c.displayName="SwiperSlide"},96889:function(e,t,n){n.d(t,{H:function(){return s}});var i=n(76569),o=n.n(i),l=n(96716),r=n(72603),a=n(37425),u=function(e){a.Z.sendLog("playSettingIconShow",{enter_from_merge:(0,r.yW)(),enter_from:(0,r.vM)(),icon:e})},s=function(e){return(0,l.x)(o()(u).call(u,null,e))}},16786:function(e,t,n){n.d(t,{f:function(){return P}});var i=n(30906),o=n(32781),l=n(71444),r=n.n(l),a=n(53864),u=n(46193),s=n(61508),c=n(79705),d=n.n(c),f=n(9729),v="wD8o9sOR",h=n(83512),p=n(28712),g=n(5611),m=n(93976),y=n(92267),w=!1;if(!(0,p.p)()&&!w){w=!0;var _=0;try{var b,S,E;_=null!==(b=window)&&void 0!==b&&b.MediaSource&&null!==(S=window)&&void 0!==S&&null!==(E=S.MediaSource)&&void 0!==E&&E.isTypeSupported?1:0}catch(x){}if((0,g.DT)())y.i.sendLog("hardParseSupported",{is_supported_hevc1:(0,m._u)()?1:0,is_supported_264:(0,m.b4)()?1:0,is_enable_mse:_});else try{u.Z.probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:2e6,framerate:30}}).then((function(e){y.i.sendLog("hardParseSupported",{is_supported_hevc1:u.Z.isHevcSupported()?1:0,powerEfficient:null!=e&&e.powerEfficient?1:0,smooth:null!=e&&e.smooth?1:0,supported:null!=e&&e.supported?1:0,is_enable_mse:_})}))}catch(C){}}var I=n(53128),T=n(81762),P=(n(32034),(0,a.forwardRef)((function(e,t){var n=e.className,l=e.style,c=e.children,p=e.xgplayerConfig,g=e.isInitPlayer,m=e.onReady,y=e.onClick,w=e.slardarInstance,_=e.id,b=(0,a.useState)(null),S=(0,o.Z)(b,2),E=S[0],P=S[1],x=(0,a.useRef)(null),C=(0,a.useRef)();return C.current||(C.current=new(r())),(0,a.useEffect)((function(){if(g){var e,t=x.current;(null===(e=(0,f.bE)("new_player"))||void 0===e?void 0:e.length)<1&&(0,f.B1)("new_player");var n=new u.Z((0,i.Z)({el:t,width:"100%",height:"100%",closeFocusVideoFocus:!0},p));C.current.emit(I.V.PlayerCreated,n),P(n);var o=function(){null==m||m(n)};return null==n||n.on(s.READY,o),function(){null==n||n.off(s.READY,o),null==n||n.emit(T.B.BeforeDestroy),P(null),null==n||n.destroy()}}}),[g]),(0,a.useImperativeHandle)(t,(function(){return{getPlayer:function(){return E},player:E,getPlayerRoot:function(){return x.current},root:x.current}}),[E]),a.createElement("div",{onClick:y,className:d()(v,"basePlayerContainer",n),style:l,ref:x,id:_},a.createElement(h.E.Provider,{value:{player:E,slardarInstance:w,contextEvent:C.current}},c))})))},40181:function(e,t,n){n.d(t,{G:function(){return i}});var i={paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:2e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e5,25e5],mode:"buffer-info",quality_filter:{}}},53128:function(e,t,n){n.d(t,{V:function(){return i}});var i={PlayerCreated:"PlayerCreated"}},81762:function(e,t,n){n.d(t,{B:function(){return i}});var i={Ended:"ended",MiniWinChange:"miniWinChange",PlayRatioChange:"playRatioChange",UpdateCommentCount:"updateCommentCount",Blur:"blur",VolumeUp:"upVolume",VolumeDown:"downVolume",NextAutoplayChange:"nextAutoplayChange",BeforePlaySwitchPrev:"playSwitchPrevBefore",AfterPlaySwitchNext:"playSwitchNextBefore",KeyPlaySwitchPrev:"keyPlaySwitchPrev",KeyPlaySwitchNext:"keyPlaySwitchNext",Waiting:"waiting",ManualChangeMiniState:"manual_change_min_state",Star:"onStar",ShowComment:"showComment",Collect:"onCollect",ShowShareCode:"showShareCode",Dislike:"onDislike",Avatar:"onAvatar",Follow:"onFollow",FakeScreen:"onFakeScreen",SwitchFullScreen:"switch_fullscreen",FakeScreenChange:"fakeScreenChange",PlayRatioPanelShow:"playRatioPanelShow",LightBottomControls:"lightBottomControls",ResolutionChange:"resolutionChange",PlayResolutionClick:"playResolutionClick",PlayResolutionEnter:"playResolutionEnter",VolumeChange:"volumechange",UpdateImmersiveSwitch:"updateImmersiveSwitch",ImmersiveSwitchChange:"immersiveSwitchChange",UpdateAutoPlaySwitch:"updateAutoPlay",AutoPlaySwitchChange:"autoPlaySwitchChange",CustomShortCut:"customShortCut",ChangePlayRate:"changePlayRate",TimeUpdate:"timeupdate",ShowAdDetail:"showAdDetail",AdLike:"adverLike",AdDislike:"adverDislike",AdReport:"adverReport",AdThrow:"adverThrow",AdIntroduce:"adverIntroduce",Play:"play",Replay:"replay",Error:"error",ChangeDanmaku:"changeDanmaku",UpdateRadio:"UpdateRadio",UpdateClarity:"UpdateClarity",UpdateAutoPlay:"UpdateAutoPlay",BeforeDestroy:"beforeDestroy"}},69095:function(e,t,n){n.d(t,{K:function(){return E},M:function(){return I}});var i=n(64130),o=n(27448),l=n(81842),r=n(14870),a=n(10708),u=n(68180),s=n(24837),c=n(28470),d=n(90634),f=n(82269),v=n(93118),h=n(88983),p=n(39458),g=n(71753),m=n(14181),y=n(54853),w=n(50692),_=n(20369),b=n(9909),S=n(75422),E={play:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(o.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),pause:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(l.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),startPlay:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(o.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),startPause:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(l.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),playNext:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(r.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),mini:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(a.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),volumeSmall:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(u.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),volumeLarge:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(u.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),volumeMuted:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(s.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"-3 0 39 39",needRenderInSSR:!0}),fullscreen:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(c.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),exitFullscreen:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(d.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),playSwitchPrev:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(f.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),playSwitchNext:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(v.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),loadingIcon:(0,i.Y)(S.g,{})},I={play:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(h.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),pause:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(p.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),startPlay:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(h.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),startPause:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(p.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),playNext:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(r.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),mini:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(a.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39",needRenderInSSR:!0}),volumeSmall:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(m.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),volumeLarge:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(y.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),volumeMuted:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(g.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),fullscreen:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(w.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),exitFullscreen:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(_.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32",needRenderInSSR:!0}),playSwitchPrev:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(f.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),playSwitchNext:(0,i.Y)(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(v.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,needRenderInSSR:!0}),loadingIcon:(0,i.Y)(S.g,{})}},12509:function(e,t,n){n.d(t,{k:function(){return b}});var i=n(30906),o=n(84639),l=n.n(o),r=n(92934),a=n(86615),u=n(83400),s=n(56920),c=n(8590),d=n(36177),f=n(5611),v=n(71116),h=n(72603),p=n(69095),g=n(40181),m=n(11102),y=n(46090),w=n(68078),_=function(e){var t=e.abtestData,n={isOpen:!1,type:"filter",filterKey:"definition",filterList:[{source:1,target:[2]},{source:2,target:[3]}]};return e.enableSr?l()({},n,null==t?void 0:t.SR):n},b=function(e){var t,n,o,b,S,E,I,T,P,x,C,k,L,N,Z,R=e.awemeInfo,D=void 0===R?{}:R,A=e.abtestData,M=void 0===A?{}:A,O=e.enableSr,B=(0,m.U)({awemeInfo:D,abtestData:M}),U=2===B?"h266":1===B?"h265":"h264";("both"===(null==M?void 0:M.testSpeedOptionsApplySideServer)||(0,f.DT)()&&"client"===(null==M?void 0:M.testSpeedOptionsApplySideServer)||!(0,f.DT)()&&"web"===(null==M?void 0:M.testSpeedOptionsApplySideServer))&&(Z=null==M?void 0:M.testSpeedOptionsApplySideServer);var H=l()({openSpeed:!0,testCnt:0},null==M?void 0:M.testSpeedOptions,Z),F=(0,w.J)(M),Y=F.volume,W=F.autoplayMuted,j=(0,u.pb)(D)?{closeVideoClick:!0}:{},K=(0,i.Z)((0,i.Z)({lang:"zh",inactive:2e3,leavePlayerTime:0,autoplay:!0,autoplayMuted:W,volume:Y,loop:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,closePlayVideoFocus:!0,closeVideoPreventDefault:!0,closeVideoStopPropagation:!0,playbackRate:!1,cssFullscreen:!1,dynamicBg:{disable:!0,frameRate:10,filter:"blur(60px)",maskBg:"rgba(0,0,0,0.7)"},enter:{innerHtml:'<div class="xg-douyin-loading" />'},start:{disableAnimate:!0},ignores:["poster","definition",(null==M?void 0:M.interactionOpt)>=s.U5.On?"miniscreen":""],progresspreview:{disable:!0},progress:!0,miniprogress:!1,miniscreen:{width:350,height:197,left:-1,top:-1,disableDrag:!0},vodLogOpts:{line_app_id:c.APP_ID,line_user_id:(null===(t=(0,v.Es)())||void 0===t?void 0:t.user_unique_id)||"",vtype:"MP4",tag:(0,h.yW)(),codec_type:U,drm_type:0,sendLocalCallback:function(e,t){},disableLocalCache:!0,channel:"cn",closeResolutionLog:!0,closeSeekLog:!0,maxQueueCount:5,isTask:!1,enableAbTest:!1,checkByInnerLog:!0},icons:p.M,closeVideoDblclick:!0,plugins:[r.default,a.default],BitrateSelector:(0,i.Z)((0,i.Z)((0,i.Z)({},g.G),(null==M?void 0:M.BitrateSelector)||{}),{},{overscore:_({abtestData:M,enableSr:O})}),controls:{mode:"normal",autoHide:!1,initShow:!0},marginControls:!(0,u.pb)(D)},j),{},{keyboard:{isGlobalTrigger:!0,disableRootTrigger:!0,keyCodeMap:{up:{disable:!0},down:{disable:!0}}},vtype:(null==D?void 0:D.awemeType)===d.ed.Note?"MP3":"MP4",TestSpeed:(0,i.Z)((0,i.Z)({url:null!==(n=null!==(o=null==D||null===(b=D.video)||void 0===b||null===(S=b.bitRateList)||void 0===S||null===(E=S[0])||void 0===E||null===(I=E.playAddr)||void 0===I||null===(T=I[0])||void 0===T?void 0:T.src)&&void 0!==o?o:null==D||null===(P=D.video)||void 0===P||null===(x=P.playAddr)||void 0===x||null===(C=x[0])||void 0===C?void 0:C.src)&&void 0!==n?n:null==D||null===(k=D.video)||void 0===k?void 0:k.playApi},H),{},{loadSize:null!==(L=null==H?void 0:H.loadSize)&&void 0!==L?L:204800,testTimeStep:null!==(N=null==H?void 0:H.testTimeStep)&&void 0!==N?N:5e3}),videoConfig:{crossorigin:(0,y.S)(D)?"use-credentials":"anonymous"},i18n:[{LANG:"zh",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4e0d\u652f\u6301\u7684\u97f3\u9891/\u89c6\u9891\u683c\u5f0f\n\u6216\n\u8bbe\u5907\u65e0\u7f51\u7edc"}}],enableContextmenu:!0});return K.keyboard=(0,i.Z)((0,i.Z)({},K.keyboard),{},{seekStep:5}),K.volume={default:Y,showValueLabel:!0},K}},83512:function(e,t,n){n.d(t,{E:function(){return l}});var i=n(71444),o=n.n(i),l=n(53864).createContext({player:{},slardarInstance:null,contextEvent:new(o())})},21793:function(e,t,n){n.d(t,{O:function(){return r}});var i=n(32781),o=n(53864),l=n(81762);function r(e){var t=e.player,n=e.isActive,r=(0,o.useState)(undefined),a=(0,i.Z)(r,2),u=a[0],s=a[1];return(0,o.useEffect)((function(){if(t&&n){var e=function(e){"boolean"==typeof(null==e?void 0:e.isOn)&&s(e.isOn)};return t.on(l.B.ImmersiveSwitchChange,e),function(){t.off(l.B.ImmersiveSwitchChange,e)}}!n&&t&&s(!1)}),[t,n]),{inImmersive:u}}},35667:function(e,t,n){n.d(t,{n:function(){return l}});var i=n(53864),o=n(83512),l=function(){return(0,i.useContext)(o.E).player}},72627:function(e,t,n){n.d(t,{N:function(){return l}});var i=n(53864),o=n(83512),l=function(){return(0,i.useContext)(o.E).slardarInstance}},75780:function(e,t,n){n.d(t,{s:function(){return a},v:function(){return u}});var i=n(85792),o=n.n(i),l=n(60443),r=n(40032).createRoot,a=function(e,t){return e.clientRoot?void e.clientRoot.render(t):void(e.root&&(e.clientRoot=r(e.root),e.clientRoot.render(t)))},u=function(e){if(e.clientRoot){var t=e.clientRoot;e.clientRoot=undefined,o()((function(){t.unmount()}),0)}else l.unmountComponentAtNode(e.root)}},38445:function(e,t,n){n.d(t,{v:function(){return o},G:function(){return l}});var i=0,o=function(){i++},l=function(){return i}},10603:function(e,t,n){n.d(t,{Ot:function(){return ye},KM:function(){return de},zQ:function(){return fe},zf:function(){return he},iu:function(){return pe}});var i,o=n(19049),l=n(95508),r=n(73316),a=n(6670),u=n(78034),s=n(65146),c=n(30906),d=n(32781),f=n(85792),v=n.n(f),h=n(34346),p=n.n(h),g=n(94090),m=n.n(g),y=n(76569),w=n.n(y),_=n(53864),b=n(79705),S=n.n(b),E=n(61508),I=n(44487),T=n(48051),P=n(56920),x=n(353),C=n(36177),k=n(13971),L=n(71116),N=n(72603),Z=n(68393),R=n(5277),D=n(97876),A=n(5827),M=n(43115),O=n(17962),B=n(13795),U=new B.hD({autoPlayModePanelShow:{eventName:"auto_play_mode_panel_show",params:{group_id:"",enter_from_merge:"",enter_from:""}},autoPlayModePanelClick:{eventName:"auto_play_mode_panel_click",params:{group_id:"",enter_from_merge:"",enter_from:"",auto_play_mode:""}}}),H="xgnFsawv",F="b_o0jOiZ",Y="gk3ariuU",W="rrDv0xv4",j="eAjjOkhU",K="vyL0M9BT",V="_RbTVWwZ",z=n(35667),q=n(9909),X=n(81762),Q=n(19681),G=n(96716),$="S2i4SglW",J="kdP2ni1p",ee="O31V5L9a",te="a8WTgOMc",ne="dpWestBU",ie="PN04cBXS";function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oe.apply(this,arguments)}var le=function(e){return _.createElement("svg",oe({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=_.createElement("path",{d:"M15.82 9.05a.615.615 0 00-.87-.87L12 11.13 9.05 8.18a.615.615 0 00-.87.87L11.13 12l-2.95 2.95a.615.615 0 00.87.87L12 12.87l2.95 2.95a.615.615 0 00.87-.87L12.87 12l2.95-2.95z",fill:"#fff"})))},re=new B.hD({reversePlayGuideShow:{eventName:"reverse_play_guide_show",params:{enter_from_merge:"",enter_from:""}},reversePlayGuideClick:{eventName:"reverse_play_guide_click",params:{enter_from_merge:"",enter_from:""}}}),ae=function(){re.sendLog("reversePlayGuideShow",{enter_from_merge:(0,N.yW)(),enter_from:(0,N.vM)()})},ue=_.forwardRef((function(e,t){var n=e.autoPlayStatus,i=e.player,o=e.hide,l=(0,_.useState)(!1),r=(0,d.Z)(l,2),a=r[0],u=r[1],c=(0,_.useRef)(0),f=(0,_.useState)(!1),h=(0,d.Z)(f,2),p=h[0],g=h[1],m=(0,G.x)(w()(ae).call(ae,null));(0,_.useEffect)((function(){var e=D.listen(D.EVENT.showFlashbackTip,(function(e){return g(e)}));return function(){return e()}}),[]),(0,_.useEffect)((function(){var e=(0,k.$o)(x.LocalStorageKeys.ShowFlashBackTipNum)||0;!p||o||"reverse"===n||c.current||(u(!0),(0,k.qQ)(x.LocalStorageKeys.ShowFlashBackTipNum,e+1),c.current=v()((function(){u(!1),g(!1),clearTimeout(c.current),c.current=0}),15e3))}),[p,n,o]);var y=(0,_.useCallback)((function(){c.current&&(clearTimeout(c.current),c.current=0),u(!1),g(!1)}),[]);return(0,_.useEffect)((function(){(o||"reverse"===n)&&y()}),[o,y,n]),(0,_.useImperativeHandle)(t,(function(){return{close:y}})),_.createElement("div",{ref:m,className:S()($,(0,s.Z)({},J,a))},_.createElement(q.Z,{className:S()(ee,"noTransform"),width:24,height:24,viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(le,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:y}),_.createElement("div",{className:te},_.createElement(q.Z,{className:"noTransform",width:24,height:24,viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(M.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),_.createElement("span",null,"\u5012\u5e8f\u8fde\u64ad")),_.createElement("p",{className:ne},"\u6309\u7167\u89c6\u9891\u5217\u8868\u5012\u5e8f\u8fde\u64ad"),_.createElement("p",{className:ne},"\u5feb\u6377\u952eK\u53ef\u4fbf\u6377\u5207\u6362\u64ad\u653e\u6a21\u5f0f"),_.createElement(Q.z,{className:ie,onClick:function(){null==i||i.emit(X.B.UpdateAutoPlay,{index:1}),re.sendLog("reversePlayGuideClick",{enter_from_merge:(0,N.yW)(),enter_from:(0,N.vM)()}),y()}},"\u7acb\u5373\u4f53\u9a8c"))})),se=n(96889),ce=n(75780),de=function(e){return e[e.Nomal=0]="Nomal",e[e.Reverse=1]="Reverse",e[e.Cycle=2]="Cycle",e}({}),fe=["\u987a\u5e8f\u8fde\u64ad","\u5012\u5e8f\u8fde\u64ad","\u5faa\u73af\u64ad\u653e"],ve=["order","reverse","loop"],he=[A.Z,M.Z,O.Z],pe=function(e){var t=e.isSetLog,n=e.awemeInfo,i=e.plugin,o=e.aloneState,l=e.defaultModeRef,r=(0,_.useState)((function(){var e,t=(0,k.$o)(o?x.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY:x.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY),n=null===(e=L.Le.getConfig(L.gI.InnerAutoPlay))||void 0===e?void 0:e.modeIndex;return"number"==typeof n?n:Number(t)?2===Number(t)&&o?de.Reverse:de.Nomal:o===P.M2.DefaultEnabled&&null===t?de.Nomal:de.Cycle})),a=(0,d.Z)(r,2),u=a[0],s=a[1];return(0,_.useEffect)((function(){var e=function(e){var o,r,a=null==e||null===(o=e.target)||void 0===o?void 0:o.tagName;"INPUT"!==a&&"TEXTAREA"!==a&&"true"!==(null==e||null===(r=e.target)||void 0===r?void 0:r.contentEditable)&&"KeyK"===(null==e?void 0:e.code)&&s((function(e){return l&&(l.current=!1),"reverse"===ve[(e+1)%3]&&(0,k.qQ)(x.LocalStorageKeys.HasUseFlashBack,!0),t&&U.sendLog("autoPlayModePanelClick",{group_id:null==n?void 0:n.awemeId,enter_from:(0,N.mo)(),enter_from_merge:(0,N.yW)(),auto_play_mode:ve[e]}),i.stopFlag=0,(e+1)%3}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,_.useEffect)((function(){o?l.current||(u===de.Nomal?(0,k.qQ)(x.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"1"):u===de.Reverse?(0,k.qQ)(x.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"2"):(0,k.qQ)(x.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"0")):u===de.Nomal||u===de.Reverse?(0,k.qQ)(x.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"1"):(0,k.qQ)(x.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"0"),L.Le.setConfig(L.gI.InnerAutoPlay,{modeIndex:u,mode:ve[u]})}),[u,o]),[u,s]},ge=function(e){var t=e.playPrevFunc,n=e.playNextFunc,i=e.ablePlayPrev,o=e.ablePlayNext,l=e.player,r=e.isActive,a=e.innerAutoPlayWeight,u=e.awemeInfo,f=e.onMouseLeave,h=e.hide,g=void 0!==h&&h,m=e.plugin,y=e.aloneState,w=(0,_.useRef)(!0),b=pe({isSetLog:!0,awemeInfo:u,plugin:m,aloneState:y,defaultModeRef:w}),I=(0,d.Z)(b,2),T=I[0],P=I[1],A=(0,_.useState)(!1),M=(0,d.Z)(A,2),O=M[0],B=M[1],z=(0,se.H)("auto_play"),Q=(0,_.useRef)(null),G=(0,_.useRef)(),$=(0,_.useCallback)((function(){if(a>=0&&T===de.Nomal&&n&&o&&0===(null==m?void 0:m.stopFlag))(0,Z.i0)(Z.CK.Auto),null==n||n({from:"auto"}),L.Le.setConfig(L.gI.VideoPlayMethod,"auto_play_open");else if(a>=0&&T===de.Reverse&&i&&t&&0===(null==m?void 0:m.stopFlag))(0,Z.i0)(Z.CK.Auto),null==t||t({from:"auto"}),L.Le.setConfig(L.gI.VideoPlayMethod,"auto_play_open");else{var e=function(){l.replay(),l.replayed=!0,L.Le.setConfig(L.gI.VideoPlayMethod,"auto")};(0,R.G6)()?v()(e,50):e()}}),[l,o,i,t,n,T,a]);(0,_.useEffect)((function(){if(l&&r&&(null==u?void 0:u.awemeType)===C.ed.Note){var e=function(){var e;return null==l||null===(e=l.replay)||void 0===e?void 0:e.call(l)};return l.on(E.ENDED,e),function(){l.off(E.ENDED,e)}}}),[l,r,u]),(0,_.useEffect)((function(){if(l&&r&&$&&(null==u?void 0:u.awemeType)!==C.ed.Note)return l.on(E.ENDED,$),function(){l.off(E.ENDED,$)}}),[l,r,$,u]),(0,_.useEffect)((function(){}),[r,l,T]),(0,_.useEffect)((function(){if(l&&r){l.replayed=!1;var e=D.listen(D.EVENT.changeInnerAutoPlay,(function(e){"reverse"===ve[e]&&(0,k.qQ)(x.LocalStorageKeys.HasUseFlashBack,!0),P(e),w.current=!1}));return function(){e()}}}),[r,l,T]);var J=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};m.stopFlag=0,null==f||f(),B(!1),U.sendLog("autoPlayModePanelClick",(0,c.Z)({group_id:null==u?void 0:u.awemeId,enter_from:(0,N.mo)(),enter_from_merge:(0,N.yW)(),auto_play_mode:ve[e]},t)),"reverse"===ve[e]&&(0,k.qQ)(x.LocalStorageKeys.HasUseFlashBack,!0),L.Le.getConfig(L.gI.IsInMixCard)&&L.Le.setConfig(L.gI.AutoPlayChanged,{changed:!0}),P(e),w.current=!1};return(0,_.useEffect)((function(){var e=function(e){var t=e.index,n=e.logParams;J(t,n)};if(l)return null==l||l.on(X.B.UpdateAutoPlay,e),function(){null==l||l.off(X.B.UpdateAutoPlay,e)}}),[l]),_.createElement("div",{className:S()("xgplayer-icon",H,Y),onMouseLeave:function(){G.current=v()((function(){B(!1)}),300)},onMouseEnter:function(){clearTimeout(G.current)},ref:z},O&&_.createElement("div",{className:S()(F,"isDark")},p()(fe).call(fe,(function(e,t){return _.createElement("div",{key:e,className:S()(W,(0,s.Z)({},K,t===T)),onClick:function(){return J(t)}},_.createElement(q.Z,{width:24,height:24,viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(he[t],null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),_.createElement("span",null,e))})),_.createElement("div",{className:V},"K\u952e\u5feb\u6377\u5207\u6362")),_.createElement(ue,{autoPlayStatus:ve[T],player:l,ref:Q,hide:g}),_.createElement("div",{className:S()("inner-autoplay-item",j),onMouseEnter:function(){var e;clearTimeout(G.current),B(!0),O||U.sendLog("autoPlayModePanelShow",{group_id:null==u?void 0:u.awemeId,enter_from:(0,N.mo)(),enter_from_merge:(0,N.yW)()}),null===(e=Q.current)||void 0===e||e.close()}},_.createElement(q.Z,{width:24,height:24,viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(he[T],null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),_.createElement("div",{className:"inner-autoplay-name"},fe[T])))},me=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,i;(0,o.Z)(this,n);for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return i=t.call.apply(t,m()(e=[this]).call(e,a)),(0,s.Z)((0,r.Z)(i),"stopFlag",0),(0,s.Z)((0,r.Z)(i),"onMouseleave",(function(){i.emit("icon_mouseleave",{pluginName:i.pluginName})})),(0,s.Z)((0,r.Z)(i),"onMouseenter",(function(){i.emit("icon_mouseenter",{pluginName:i.pluginName})})),i}return(0,l.Z)(n,[{key:"beforePlayerInit",value:function(){this.renderRoot()}},{key:"updateConfig",value:function(e){this.config=(0,c.Z)((0,c.Z)({},this.config),e),this.renderRoot()}},{key:"afterCreate",value:function(){w()(this).call(this,"mouseenter",this.onMouseenter),w()(this).call(this,"mouseleave",this.onMouseleave),this.renderRoot()}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),(0,ce.v)(this)}},{key:"renderRoot",value:function(){if(this.root){var e=_.createElement(ge,(0,c.Z)((0,c.Z)({onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave},this.config),{},{player:this.player,plugin:this}));(0,ce.s)(this,e)}}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-inner-autoplay automatic-continuous" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"InnerAutoPlayPlugin"}},{key:"defaultConfig",get:function(){return{position:T.kd.CONTROLS_RIGHT,index:9,className:"xgplayer-inner-autplay"}}}]),n}(I.ZP),ye=function(e){var t=e.playPrevFunc,n=e.playNextFunc,i=e.ablePlayPrev,o=e.ablePlayNext,l=e.isActive,r=e.hide,a=e.awemeInfo,u=e.abtestData,s=(0,z.n)();return(0,_.useEffect)((function(){return s&&l?(s.registerPlugin(me,(0,c.Z)((0,c.Z)({},e),{},{player:s,innerAutoPlayWeight:0,aloneState:null==u?void 0:u.innerAutoplay})),function(){s.getPlugin("InnerAutoPlayPlugin")&&s.unRegisterPlugin("InnerAutoPlayPlugin",!0)}):undefined}),[s,l,r,null==u?void 0:u.innerAutoplay]),(0,_.useEffect)((function(){var t,n=null==s||null===(t=s.getPlugin)||void 0===t?void 0:t.call(s,"InnerAutoPlayPlugin");s&&l&&n&&n.updateConfig((0,c.Z)({},e))}),[s,l,n,t,o,i,r]),(0,_.useEffect)((function(){var e,t=null==s||null===(e=s.getPlugin)||void 0===e?void 0:e.call(s,"InnerAutoPlayPlugin");s&&l&&t&&(t.stopFlag=0)}),[a]),(0,_.useEffect)((function(){if(s&&l){var e,t=null==s||null===(e=s.getPlugin)||void 0===e?void 0:e.call(s,"InnerAutoPlayPlugin");if(t){var n=D.listen(D.EVENT.videoStopPlayNext,(function(e){!1!==s.isUserActive&&((e||{}).openSideCard?t.stopFlag+=1:t.updateConfig({innerAutoPlayWeight:t.config.innerAutoPlayWeight>-1?t.config.innerAutoPlayWeight-1:-1}))})),i=D.listen(D.EVENT.videoRemoveStopPlayNext,(function(e){!1!==s.isUserActive&&((e||{}).openSideCard?t.stopFlag=Math.max(t.stopFlag-1,0):t.updateConfig({innerAutoPlayWeight:t.config.innerAutoPlayWeight<0?t.config.innerAutoPlayWeight+1:0}))}));return function(){null==n||n(),null==i||i(),t.updateConfig({innerAutoPlayWeight:0})}}}}),[s,l,r,u]),null}},30572:function(e,t,n){n.r(t),n.d(t,{PictureMode:function(){return nt},PictureModeInner:function(){return tt}});var i,o,l=n(65146),r=n(32781),a=n(56442),u=n.n(a),s=n(76569),c=n.n(s),d=n(94090),f=n.n(d),v=n(53864),h=n(66028),p=(n(66785),n(79705)),g=n.n(p),m=n(97702),y=n(36177),w=n(17172),_="hGj6kBXN",b="PLQlwgTO",S="FrPqWf3c",E="PdiOodzz",I="E55rWk40",T="lX9urTg_",P="MXeghcLf",x="rJkNu_iK",C="XhLWAMjR",k="ejuvdEW1",L="L_gLfJSi",N=n(30906),Z=n(60260),R=n.n(Z),D=n(26447),A=n.n(D),M=n(34346),O=n.n(M),B=n(85792),U=n.n(B),H=n(76933),F=n(6478),Y=n(61508),W=n(50799),j=n(25902),K=n(97876),V=n(71116),z=n(72603),q=n(9191),X=n(19049),Q=n(95508),G=n(6670),$=n(78034),J=n(58144),ee=n.n(J),te=n(44487),ne=n(29809),ie=n.n(ne),oe=n(53361),le=n.n(oe),re=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played transition",styleKey:"playedColor"}],ae=function(){function e(t){(0,X.Z)(this,e),this.fragments=t.fragments||[],this.onInnerClick=t.onInnerClick,this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return(0,Q.Z)(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=ie()(1e3*e);var n=0,i=this.fragments;this.fragments=O()(i).call(i,(function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,o=t.newIndex,l=t.curIndex,r=t.millisecond;o!==l&&O()(n).call(n,(function(t,n){n<o?t[e].style.width="100%":n>o&&(t[e].style.width=0)}));var a=i[o],u=0===r?0:(r-a.start)/a.duration;n[o]&&(n[o][e].style.width=u<0?0:"".concat(100*u,"%"))}},{key:"reset",value:function(){var e=this.progressList;this.fragments;O()(e).call(e,(function(e,t){m.ZP.removeClass(e.played,"transition"),U()((function(){return m.ZP.addClass(e.played,"transition")}),100)})),this.update({played:0},this.duration)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:undefined;if(!this.duration||ie()(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==m.ZP.typeOf(e.played)){var o=le()(this).call(this,1e3*e.played,n);this.updateProgress("played",{newIndex:o,curIndex:n,millisecond:ie()(1e3*e.played,10)}),this.playedIndex=o}if("Undefined"!==m.ZP.typeOf(e.cached)){var l=le()(this).call(this,1e3*e.cached,i);this.updateProgress("cached",{newIndex:l,curIndex:i,millisecond:ie()(1e3*e.cached,10)}),this.cachedIndex=l}}},{key:"findIndex",value:function(e,t){if(1===this.fragments.length||0===e)return 0;for(var n=t,i=0;i<this.fragments.length;i++){var o=this.fragments[i];if(n=i,e>o.start&&e<=o.end)break}return n}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(m.ZP.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)m.ZP.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return m.ZP.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e,t=this,n=this.style.progressColor;(this.root=m.ZP.createDom("xg-inners","",{},"progress-list"),this.fragments)&&(this.progressList=O()(e=this.fragments).call(e,(function(e,i){var o,l=m.ZP.createDom("xg-inner","",{style:n?f()(o="background:".concat(n,"; flex: ")).call(o,e.percent):"flex: ".concat(e.percent)},"".concat(e.isFocus?"inner-focus":""," xgplayer-progress-inner picture-inner"));return l.addEventListener("click",(function(){return t.onInnerClick(i)})),t.root.appendChild(l),O()(re).call(re,(function(e){l.appendChild(m.ZP.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))})),{cached:l.children[0],played:l.children[1]}})));return this.root}}]),e}(),ue=function(e){(0,G.Z)(n,e);var t=(0,$.Z)(n);function n(e){var i;return(0,X.Z)(this,n),(i=t.call(this,e)).percent=0,i._state={now:-1,direc:0,time:0},i}return(0,Q.Z)(n,[{key:"duration",get:function(){return this.playerConfig&&this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.progress&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e,t=this;this.innerList=new ae({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{},onInnerClick:this.config.onInnerClick}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),O()(e=["findHightLight","unHightLight","setHightLight","findFragment"]).call(e,(function(e){var n;t[e]=c()(n=t.innerList[e]).call(n,t.innerList)}))}},{key:"afterCreate",value:function(){this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=ee()(this).call(this,"xg-outer"),this.createInner(),c()(this).call(this,"pointerdown",this.onStopPropagation),c()(this).call(this,"touchstart",this.onStopPropagation))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),m.ZP.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),m.ZP.removeClass(this.root,"active")}},{key:"onStopPropagation",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){var t=this.player,n=(this.pos,this.config,this.playerConfig,m.ZP.getEventPos(e,t.zoom)),i=this.root.getBoundingClientRect(),o=i.width,l=(i.height,i.top,i.left),r=(n.clientX-l)/o;this.updatePercent(r)}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"updatePercent",value:function(e){e=e>1?1:e<0?0:e,this.percent=e,this.innerList.update({played:e*this.duration},this.duration)}},{key:"getPercent",value:function(){return this.percent}},{key:"destroy",value:function(){this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.unbind("mousedown",this.onMouseDown),this.unbind("pointerdown",this.onStopPropagation),this.unbind("touchstart",this.onStopPropagation)}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer picture">\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"pictureProgress"}},{key:"defaultConfig",get:function(){return{position:te.kd.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(te.ZP),se=ue,ce=n(35323),de=n.n(ce),fe=n(56402),ve=n.n(fe),he=n(73231),pe=n(35667),ge=n(77323),me=n(53026),ye=he.bf.ArrowLeft,we=he.bf.ArrowRight,_e=he.bf.A,be=he.bf.D,Se=n(9909);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ee.apply(this,arguments)}var Ie,Te,Pe=function(e){return v.createElement("svg",Ee({width:56,height:56,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=v.createElement("g",{clipPath:"url(#arrowLeft_svg__clip0_1670_162489)"},v.createElement("path",{d:"M0 28c0 15.464 12.536 28 28 28s28-12.536 28-28S43.464 0 28 0 0 12.536 0 28z",fill:"#000"}),v.createElement("g",{filter:"url(#arrowLeft_svg__filter0_d_1670_162489)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.402 18.573a2 2 0 01.024 2.829l-6.598 6.713 6.574 6.458a2 2 0 11-2.804 2.854l-8-7.86a2 2 0 01-.024-2.829l8-8.14a2 2 0 012.828-.024z",fill:"#fff"})))),o||(o=v.createElement("defs",null,v.createElement("clipPath",{id:"arrowLeft_svg__clip0_1670_162489"},v.createElement("path",{fill:"#fff",d:"M0 0h56v56H0z"})),v.createElement("filter",{id:"arrowLeft_svg__filter0_d_1670_162489",x:19,y:18,width:14,height:22,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",{dy:1}),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1670_162489"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1670_162489",result:"shape"})))))};function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xe.apply(this,arguments)}var Ce=function(e){return v.createElement("svg",xe({width:56,height:56,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ie||(Ie=v.createElement("g",{clipPath:"url(#arrowRight_svg__clip0_1683_162494)"},v.createElement("path",{d:"M0 28c0 15.464 12.536 28 28 28s28-12.536 28-28S43.464 0 28 0 0 12.536 0 28z",fill:"#000"}),v.createElement("g",{filter:"url(#arrowRight_svg__filter0_d_1683_162494)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.598 37.426a2 2 0 01-.024-2.828l6.598-6.713-6.574-6.458a2 2 0 112.804-2.854l8 7.86a2 2 0 01.024 2.829l-8 8.14a2 2 0 01-2.828.024z",fill:"#fff"})))),Te||(Te=v.createElement("defs",null,v.createElement("clipPath",{id:"arrowRight_svg__clip0_1683_162494"},v.createElement("path",{fill:"#fff",d:"M0 0h56v56H0z"})),v.createElement("filter",{id:"arrowRight_svg__filter0_d_1683_162494",x:23,y:18,width:14,height:22,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",{dy:1}),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1683_162494"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1683_162494",result:"shape"})))))},ke=n(13795),Le={multiPhotoSlide:{eventName:"multi_photo_slide",params:{aweme_type:y.ed.Note,enter_from:"",enter_method:"",author_id:"",group_id:"",pic_cnt:0,is_zoom:!1}},enterGraphicDetail:{eventName:"enter_graphic_detail",params:{enter_from:"",author_id:"",group_id:"",pic_cnt:0}},videoPlayFinish:{eventName:"video_play_finish",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",compilation_id:"",playlet_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",is_force:"0",trending_topic:""}},finishTuji:{eventName:"finish_tuji",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",compilation_id:"",playlet_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",is_force:"0",trending_topic:""}}},Ne=new ke.hD(Le),Ze=n(10603),Re=function(e){return e[e.singleTime=3e3]="singleTime",e[e.speed=250]="speed",e}(Re||{}),De=function(e){var t,n,i,o=e.isActive,a=e.awemeInfo,u=e.swiper,s=e.playNextFunc,c=e.ablePlayNext,d=e.playPrevFunc,f=e.ablePlayPrev,h=e.logParams,p=e.arrowButtonSize,w=void 0===p?56:p,x=e.isClientMiniWin,C=e.disableShortCut,k=void 0!==C&&C,L=e.isShowSideBar,Z=void 0!==L&&L,D=e.inSearch,M=e.leftStyle,B=e.rightStyle,X=(0,pe.n)(),Q=(0,v.useState)(!0),G=(0,r.Z)(Q,2),$=G[0],J=G[1],ee=(0,v.useState)([!0,!0]),te=(0,r.Z)(ee,2),ne=te[0],ie=te[1],oe=(0,v.useState)(!1),le=(0,r.Z)(oe,2),re=le[0],ae=le[1],ue=(0,v.useRef)(A()()),ce=(0,v.useRef)(0),fe=(0,v.useRef)(h),he=(0,v.useRef)(!0),Ee=(0,v.useRef)(null),Ie=function(e){J(e),he.current=e},Te=function(e){var t=e.player,n=e.timeDuration,i=void 0===n?3e3:n,o=(0,v.useState)(!1),l=(0,r.Z)(o,2),a=l[0],u=l[1],s=(0,v.useRef)(),c=(0,v.useCallback)((function(){s.current&&clearTimeout(s.current),s.current=U()((function(){u(!0),s.current=null}),i)}),[i]);return(0,v.useEffect)((function(){if(null!=t&&t.root){var e,n,i,o=function(){s.current&&clearTimeout(s.current),u(!1)},l=function(){u(!1),c()},r=function(){u(!1),c()};return null==t||null===(e=t.root)||void 0===e||e.addEventListener("mouseenter",l),null==t||null===(n=t.root)||void 0===n||n.addEventListener("mousemove",r),null==t||null===(i=t.root)||void 0===i||i.addEventListener("mouseleave",o),function(){var e,n,i;null==t||null===(e=t.root)||void 0===e||e.removeEventListener("mouseenter",l),null==t||null===(n=t.root)||void 0===n||n.removeEventListener("mousemove",r),null==t||null===(i=t.root)||void 0===i||i.removeEventListener("mouseleave",o)}}}),[null==t?void 0:t.root,c,u]),(0,v.useEffect)((function(){return function(){s.current&&clearTimeout(s.current),s.current=null}}),[]),a}({player:X});fe.current=h;var xe=(0,v.useCallback)((function(e){var t,n=null==X?void 0:X.getPlugin("pictureProgress");null==n||null===(t=n.updatePercent)||void 0===t||t.call(n,e),ce.current=e}),[X]),ke=(0,v.useCallback)((function(e){var t,n;Ne.sendLog("multiPhotoSlide",(0,N.Z)({enter_from:null===(t=fe.current)||void 0===t?void 0:t.enter_from,enter_method:"click_pic",author_id:null==a||null===(n=a.authorInfo)||void 0===n?void 0:n.uid,group_id:null==a?void 0:a.awemeId,pic_cnt:a.images.length,is_zoom:(0,j.r)()},fe.current)),ie([0===u.activeIndex,u.activeIndex===(null==a?void 0:a.images.length)-1]),Ie(!1),xe((e+1)/a.images.length),null==u||u.slideTo(e,0)}),[u,xe,a]),Le=(0,v.useCallback)((function(e){var t,n;u.activeIndex>0&&(Ne.sendLog("multiPhotoSlide",(0,N.Z)({enter_from:null===(t=fe.current)||void 0===t?void 0:t.enter_from,enter_method:"click"===(null==e?void 0:e.type)?"click_button":"keyboard",author_id:null==a||null===(n=a.authorInfo)||void 0===n?void 0:n.uid,group_id:null==a?void 0:a.awemeId,pic_cnt:a.images.length,is_zoom:(0,j.r)()},fe.current)),Ie(!1),xe(u.activeIndex/a.images.length),u.slidePrev(),ie([0===u.activeIndex,u.activeIndex===(null==a?void 0:a.images.length)-1]))}),[u,xe,a]),De=(0,v.useCallback)((function(e){var t;u.activeIndex<u.slides.length-1&&(Ne.sendLog("multiPhotoSlide",(0,N.Z)({enter_from:null==h?void 0:h.enter_from,enter_method:"click"===(null==e?void 0:e.type)?"click_button":"keyboard",author_id:null==a||null===(t=a.authorInfo)||void 0===t?void 0:t.uid,group_id:null==a?void 0:a.awemeId,pic_cnt:a.images.length,is_zoom:(0,j.r)()},fe.current)),Ie(!1),xe((u.activeIndex+2)/a.images.length),u.slideNext(),ie([0===u.activeIndex,u.activeIndex===(null==a?void 0:a.images.length)-1]))}),[u,xe,a]);return function(e){var t=(0,pe.n)(),n=e.preClick,i=e.nextClick,o=e.disableShortCut,l=void 0!==o&&o;(0,v.useEffect)((function(){if(t){if(l)return(0,ge.K)(t);var e={left:{keyCode:ye.keyCode,action:n,disable:!1,noBodyTarget:!1},right:{keyCode:we.keyCode,action:i,disable:!1,noBodyTarget:!1},letterA:{keyCode:_e.keyCode,action:n,disable:!1,noBodyTarget:!1},letterD:{keyCode:be.keyCode,action:i,disable:!1,noBodyTarget:!1}},o={left:ve()(t,"plugins.keyboard.keyCodeMap.left"),right:ve()(t,"plugins.keyboard.keyCodeMap.right"),letterA:ve()(t,"plugins.keyboard.keyCodeMap.letterA"),letterD:ve()(t,"plugins.keyboard.keyCodeMap.letterD")};return de()(t,"plugins.keyboard.keyCodeMap",(0,N.Z)((0,N.Z)({},ve()(t,"plugins.keyboard.keyCodeMap")||{}),e)),function(){t.plugins.keyboard&&((0,me.v)({currentCodeMap:t.plugins.keyboard.keyCodeMap,additionalCodeMap:e}),de()(t,"plugins.keyboard.keyCodeMap",(0,N.Z)((0,N.Z)({},ve()(t,"plugins.keyboard.keyCodeMap")||{}),o)))}}}),[t,n,i,l])}({preClick:Le,nextClick:De,disableShortCut:k}),(0,v.useEffect)((function(){var e=K.listen(K.EVENT.showDisturbLoginPanel,(function(e){ae(e)}));return function(){null==e||e()}}),[]),(0,v.useEffect)((function(){if(X&&(null==a?void 0:a.awemeType)===y.ed.Note){var e=function(e){var t;e&&Ne.sendLog("enterGraphicDetail",{enter_from:null==h?void 0:h.enter_from,author_id:null==a||null===(t=a.authorInfo)||void 0===t?void 0:t.uid,group_id:null==a?void 0:a.awemeId,pic_cnt:a.images.length})};return X.on(Y.FULLSCREEN_CHANGE,e),function(){X.off(Y.FULLSCREEN_CHANGE,e)}}}),[a,X]),(0,v.useEffect)((function(){if(X&&(null==a?void 0:a.awemeType)===y.ed.Note){var e=X.getPlugin("AutoPlaySettingPlugin")||X.getPlugin("SearchAutoPlaySettingPlugin");if(e)return e.playeNextWeightNum+=1,function(){e.playeNextWeightNum-=1}}}),[a,X]),(0,v.useEffect)((function(){if(X&&(null==a?void 0:a.awemeType)===y.ed.Note){var e=X.getPlugin("InnerAutoPlayPlugin");if(e)return e.config.innerAutoPlayWeight+=1,function(){e.config.innerAutoPlayWeight-=1}}}),[a,X]),(0,v.useEffect)((function(){var e;if(X)return ce.current=0,X.registerPlugin(se,{fragments:O()(e=a.images).call(e,(function(e){return{percent:1/a.images.length}})),onInnerClick:ke}),X.getPlugin(H.Z.pluginName)&&X.unRegisterPlugin(H.Z.pluginName,!0),X.getPlugin(F.Z.pluginName)&&X.unRegisterPlugin(F.Z.pluginName,!0),function(){X.getPlugin(se.pluginName)&&X.unRegisterPlugin(se.pluginName,!0),X.registerPlugin(H.Z,{}),X.registerPlugin(F.Z,{})}}),[X,ke]),(0,v.useEffect)((function(){if(u){var e=!1,t=function(){e=!1,U()((function(){return ke(u.activeIndex)}))},n=function(){Ie(!1),xe((u.activeIndex+1)/a.images.length),!e&&u.once("touchEnd",t),e=!0};try{u.on("touchMove",n)}catch(i){}return function(){try{null==u||u.off("touchMove",n)}catch(i){}}}}),[u,xe,ke]),(0,v.useEffect)((function(){if(o&&X){if($){ue.current=A()()-ce.current*Re.singleTime*a.images.length;var e,t,n,i=X.getPlugin("pictureProgress");if(0===ce.current)null==i||null===(e=i.innerList)||void 0===e||e.reset();else null==i||null===(t=i.innerList)||void 0===t||null===(n=t.progressList)||void 0===n||O()(n).call(n,(function(e,t){m.ZP.addClass(null==e?void 0:e.played,"transition")}));var l=R()((function(){X.cumulateTime>=5e3&&(Ee.current(),X.off(Y.TIME_UPDATE,l))}),500,{leading:!0,trailing:!0}),r=function(){if((A()()-ue.current)/(Re.singleTime*a.images.length)>=1){var e,t,n,o;X.off(Y.TIME_UPDATE,l),X.on(Y.TIME_UPDATE,l),xe(1),ce.current=0,ue.current=A()(),null==i||null===(e=i.innerList)||void 0===e||e.reset();var r=X.getPlugin("AutoPlaySettingPlugin")||X.getPlugin("SearchAutoPlaySettingPlugin"),v=X.getPlugin("InnerAutoPlayPlugin");r&&null!=r&&null!==(t=r.config)&&void 0!==t&&t.nextAutoPlay&&(null==r?void 0:r.playeNextWeightNum)<=1&&c&&0===(null==r?void 0:r.stopFlag)&&!re?null==s||s():v&&(null===(n=V.Le.getConfig(V.gI.InnerAutoPlay))||void 0===n?void 0:n.modeIndex)===Ze.KM.Nomal&&v.config.innerAutoPlayWeight>=0&&c&&0===(null==v?void 0:v.stopFlag)&&!re?null==s||s({from:"auto"}):v&&(null===(o=V.Le.getConfig(V.gI.InnerAutoPlay))||void 0===o?void 0:o.modeIndex)===Ze.KM.Reverse&&v.config.innerAutoPlayWeight>=0&&f&&0===(null==v?void 0:v.stopFlag)&&!re&&(null==d||d({from:"auto"}))}else xe((A()()-ue.current)/(Re.singleTime*a.images.length));var p=Math.floor((A()()-ue.current)/Re.singleTime);if(u.activeIndex!==p){var g;if(null!=u&&u.destroyed)return;Ne.sendLog("multiPhotoSlide",(0,N.Z)({enter_from:null==h?void 0:h.enter_from,enter_method:"auto",author_id:null==a||null===(g=a.authorInfo)||void 0===g?void 0:g.uid,group_id:null==a?void 0:a.awemeId,pic_cnt:a.images.length,is_zoom:(0,j.r)()},fe.current)),u.slideTo(p,u.activeIndex===a.images.length-1?0:Re.speed),ie([0===u.activeIndex,u.activeIndex===(null==a?void 0:a.images.length)-1])}},v=function(){ue.current=A()()-ce.current*Re.singleTime*a.images.length};return X.on(Y.TIME_UPDATE,r),X.on(Y.PLAY,v),function(){X.off(Y.TIME_UPDATE,r),X.off(Y.PLAY,v)}}var p,g,y=X.getPlugin("pictureProgress");null==y||null===(p=y.innerList)||void 0===p||null===(g=p.progressList)||void 0===g||O()(g).call(g,(function(e,t){m.ZP.removeClass(null==e?void 0:e.played,"transition")}));var w=function(){Ie(!0)};null!=X&&X.paused&&X.once(Y.PLAY,w);var _=function(){X.once(Y.PLAY,w)},b=function(){X.off(Y.PLAY,w)};return X.on(Y.PAUSE,_),X.on(Y.ENDED,b),function(){var e,t;X.off(Y.PAUSE,_),X.off(Y.ENDED,b),null==y||null===(e=y.innerList)||void 0===e||null===(t=e.progressList)||void 0===t||O()(t).call(t,(function(e,t){m.ZP.addClass(null==e?void 0:e.played,"transition")}))}}ce.current=0}),[o,X,$,xe,u,s,c,re]),(0,v.useEffect)((function(){if(u){var e=function e(){if(u.activeIndex===(null==a?void 0:a.images.length)-1){var t,n,i,o,l,r,s;Ne.sendLog("videoPlayFinish",(0,N.Z)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,z.mo)(),author_id:null==a||null===(t=a.authorInfo)||void 0===t?void 0:t.uid,group_id:null==a?void 0:a.awemeId,log_pb:null==a?void 0:a.logPb,compilation_id:null==a||null===(n=a.mixInfo)||void 0===n?void 0:n.mixId,playlet_id:null==a||null===(i=a.seriesInfo)||void 0===i?void 0:i.seriesId,tab_name:W.getTabName()||(0,q.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:null!==(o=V.Le.getConfig("isCollapseAuthorCard"))&&void 0!==o&&o.isCollapseAuthorCard?0:1,from_follow_list:null!==(l=V.Le.getConfig("fromFollowList"))&&void 0!==l&&l.tag?"1":"0",is_mute:null!=X&&X.muted?"1":"0",is_force:"browser"===(null===(r=V.Le.getConfig(V.gI.ForceMuted))||void 0===r?void 0:r.currentMuteType)?"1":"0",trending_topic:"",aweme_type:null==a?void 0:a.awemeType,pic_cnt:null==a||null===(s=a.images)||void 0===s?void 0:s.length,is_small_window:"0"},h));try{u.off("slideChange",e)}catch(c){}}};try{u.slideTo(0,0),ie([0===u.activeIndex,u.activeIndex===(null==a?void 0:a.images.length)-1]),u.on("slideChange",e)}catch(t){}return function(){try{u.off("slideChange",e)}catch(t){}}}}),[u,a]),(0,v.useEffect)((function(){if(u){Ee.current=function(){var e,t,n,i,o,l,r;Ne.sendLog("finishTuji",(0,N.Z)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,z.mo)(),author_id:null==a||null===(e=a.authorInfo)||void 0===e?void 0:e.uid,group_id:null==a?void 0:a.awemeId,log_pb:null==a?void 0:a.logPb,compilation_id:null==a||null===(t=a.mixInfo)||void 0===t?void 0:t.mixId,playlet_id:null==a||null===(n=a.seriesInfo)||void 0===n?void 0:n.seriesId,tab_name:W.getTabName()||(0,q.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:null!==(i=V.Le.getConfig("isCollapseAuthorCard"))&&void 0!==i&&i.isCollapseAuthorCard?0:1,from_follow_list:null!==(o=V.Le.getConfig("fromFollowList"))&&void 0!==o&&o.tag?"1":"0",is_mute:null!=X&&X.muted?"1":"0",is_force:"browser"===(null===(l=V.Le.getConfig(V.gI.ForceMuted))||void 0===l?void 0:l.currentMuteType)?"1":"0",trending_topic:"",aweme_type:null==a?void 0:a.awemeType,pic_cnt:null==a||null===(r=a.images)||void 0===r?void 0:r.length,is_small_window:"0"},h)),Ee.current=function(){}};var e=function(){u.activeIndex===(null==a?void 0:a.images.length)-1&&Ee.current&&(he.current||Ee.current())};return u.on("slideChange",e),function(){u.off("slideChange",e)}}}),[u,a]),!x&&(null==a||null===(t=a.images)||void 0===t?void 0:t.length)>1?v.createElement(v.Fragment,null,v.createElement("div",{className:g()(E,_,(n={},(0,l.Z)(n,S,ne[0]),(0,l.Z)(n,I,Z),(0,l.Z)(n,T,D),(0,l.Z)(n,b,Te),(0,l.Z)(n,M,M),n)),style:{width:"".concat(w,"px"),height:"".concat(w,"px")}},v.createElement(Se.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Pe,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:w,height:w,viewBox:"0 0 56 56",onClick:Le})),v.createElement("div",{className:g()(P,_,(i={},(0,l.Z)(i,S,ne[1]),(0,l.Z)(i,I,Z),(0,l.Z)(i,T,D),(0,l.Z)(i,b,Te),(0,l.Z)(i,B,B),i)),style:{width:"".concat(w,"px"),height:"".concat(w,"px")}},v.createElement(Se.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Ce,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:w,height:w,viewBox:"0 0 56 56",onClick:De}))):null},Ae=n(5277),Me=n(66798),Oe=n(91510),Be="Bj07xoIA",Ue="q4JrLhPM",He="yWm90O3y",Fe="uQC8UHff",Ye="U8RNVATZ",We="iRX47Q8q",je="zRXWKKO9",Ke="aDCpkgmW",Ve="_uoKs3MB",ze="QDUexymC",qe="LrgYn5wq",Xe=function(e){return e[e.NORMAL=0]="NORMAL",e[e.BOTTOM=33]="BOTTOM",e}(Xe||{}),Qe=function(e){return e[e.LENGTH=2e3]="LENGTH",e}(Qe||{}),Ge=function(e){var t=e.imageInfo,n=e.className,i=e.imgPlaceHolderClassName,o=e.isMini,a=(0,v.useState)(!0),u=(0,r.Z)(a,2),s=u[0],d=u[1],f=(0,v.useState)(!1),h=(0,r.Z)(f,2),p=h[0],m=h[1],y=(0,v.useState)(null),_=(0,r.Z)(y,2),b=_[0],S=_[1],E=(0,v.useState)(-1),I=(0,r.Z)(E,2),T=I[0],P=I[1],x=(0,v.useRef)(0),C=(0,Ae.G6)(),k=(0,Ae.vU)();x.current=(null==t?void 0:t.width)/(null==t?void 0:t.height);var L=(0,v.useCallback)((function(){b&&x.current&&(b.offsetWidth/x.current>b.offsetHeight-(o?Xe.NORMAL:Xe.BOTTOM)?d(!0):d(!1))}),[b,o]),N=(0,v.useCallback)((function(){!p&&m(!0)}),[p]);(0,v.useEffect)((function(){if(b&&L){var e=c()(w.Z).call(w.Z,b,L);return function(){e&&e()}}}),[b,L]),(0,v.useEffect)((function(){b&&(o?b.setAttribute("normal",""):b.removeAttribute("normal"))}),[b,o]);var Z=(0,v.useMemo)((function(){if(p)return null;var e,n;if(-1!==T)return v.createElement(v.Fragment,null,v.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(null==t?void 0:t.urlList[T],null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:g()((e={},(0,l.Z)(e,Ue,!s),(0,l.Z)(e,He,s),(0,l.Z)(e,Fe,C),e),qe,i),onError:N}),v.createElement("div",{className:g()((n={},(0,l.Z)(n,We,!C),(0,l.Z)(n,Ke,k),(0,l.Z)(n,Ve,C),n))},v.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(C?Me:(null==t?void 0:t.urlList[T])||Me,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),!C&&v.createElement("div",{className:je})));var o,r,a=new Image;a.src=globalThis.xssNamespace.douyin_web.filterUrl(null==t?void 0:t.urlList[0],null,{logType:"js.href/src",mode:"black",reportOnly:!1});var u=U()((function(){var e;null==t||O()(e=t.urlList).call(e,(function(e,t){var n=new Image;n.src=globalThis.xssNamespace.douyin_web.filterUrl(e,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),n.onload=function(){return P(t)}}))}),Qe.LENGTH);return a.onload=function(){P(0),clearTimeout(u)},v.createElement(v.Fragment,null,v.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(Oe,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:g()((o={},(0,l.Z)(o,Ue,!s),(0,l.Z)(o,He,s),(0,l.Z)(o,Fe,C),o),qe,i)}),v.createElement("div",{className:g()((r={},(0,l.Z)(r,We,!C),(0,l.Z)(r,Ke,k),(0,l.Z)(r,Ve,C),r))},v.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(C?Me:Oe,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),!C&&v.createElement("div",{className:je})))}),[p,T,N,s]);return v.createElement("div",{className:g()(n,Be,Ye,(0,l.Z)({},ze,k)),ref:S},Z)},$e=n(72627),Je=n(21228),et=n(47298),tt=function(e){var t=e.isActive,n=e.awemeInfo,i=e.playNextFunc,o=e.playPrevFunc,a=e.ablePlayPrev,s=e.ablePlayNext,d=e.logParams,h=e.isMini,p=e.isClientMiniWin,_=e.customProps,b=(e.abTestData,e.disableShortCut),S=void 0!==b&&b,E=e.isShowSideBar,I=void 0!==E&&E,T=e.inSearch,P=(0,pe.n)(),N=(0,v.useState)(null),Z=(0,r.Z)(N,2),R=Z[0],D=Z[1],A=(0,v.useState)(n),M=(0,r.Z)(A,2),O=M[0],B=M[1],U=_||{},H=U.arrowButtonSize,F=void 0===H?56:H,Y=U.disableInactiveCursor,W=void 0!==Y&&Y,j=U.leftStyle,K=U.rightStyle,V=(0,v.useMemo)((function(){return(null==n?void 0:n.awemeType)!==y.ed.Note?[]:t?null==n?void 0:n.images:(null==n||null===(e=n.images)||void 0===e?void 0:u()(e).call(e,0,1))||[];var e}),[null==n?void 0:n.images,t,null==n?void 0:n.awemeType]);return(0,v.useEffect)((function(){return function(){return D(null)}}),[]),(0,v.useEffect)((function(){var e=null==P?void 0:P.innerContainer;if(e&&(null==n?void 0:n.awemeType)===y.ed.Note)return m.ZP.addClass(e,"hideXgVideo"),function(){m.ZP.removeClass(e,"hideXgVideo")}}),[P,n]),(0,v.useEffect)((function(){if(t&&R&&P){var e;R.update();var n=c()(w.Z).call(w.Z,null==R||null===(e=R.$el)||void 0===e?void 0:e[0],(function(){R.update()}));return function(){n&&n()}}}),[R,t,P]),(0,v.useEffect)((function(){B(n)}),[n]),(null==n?void 0:n.awemeType)!==y.ed.Note?null:v.createElement(v.Fragment,null,v.createElement(Je.t,{direction:0,onSwiper:D,className:g()(x,"focusPanel"),tabIndex:-1,data:V,slideKey:function(e,t){var n;return f()(n="".concat(null==e?void 0:e.uri,"_")).call(n,t)},speed:250},v.createElement(et.o,{className:L},(function(e){var t=e.slideData,n=e.activeIndex,i=e.currentIndex;return v.createElement(v.Fragment,null,v.createElement("button",{style:{width:"100%",height:"100%",zIndex:2,background:"transparent"},className:g()(C,(0,l.Z)({},k,!(n===i)&&W)),type:"button",onKeyDown:function(e){return null==e?void 0:e.preventDefault()}}),v.createElement(Ge,{imageInfo:t,isMini:h}))}))),O===n&&t&&v.createElement(De,{isActive:t,awemeInfo:n,swiper:R,playNextFunc:i,playPrevFunc:o,ablePlayNext:s,ablePlayPrev:a,logParams:d,arrowButtonSize:F,isClientMiniWin:p,disableShortCut:S,isShowSideBar:I,inSearch:T,leftStyle:j,rightStyle:K}))},nt=function(e){var t=(0,$e.N)();return v.createElement(h.k,{componentName:"PictureMode",Slardar:t},v.createElement(tt,e))}},30298:function(e,t,n){n.d(t,{gu:function(){return I}});var i=n(68493),o=n.n(i),l=n(11227),r=n.n(l),a=n(85792),u=n.n(a),s=n(53864),c=n(61508),d=n(353),f=n(56920),v=n(13971),h=n(56462),p=n(97876),g=n(35667),m=n(72627),y=n(34590),w=n(66028),_=n(68078),b=n(81762),S=function(e){var t=e.isActive,n=e.abtestData,i=(e.awemeInfo,(0,g.n)());return(0,s.useEffect)((function(){if(i&&t){var e=0===(null==n?void 0:n.newSilent)?.6:.5,l=function(e){!0!==(null==e?void 0:e.isInternalOp)&&(0===(0,v.$o)(d.LocalStorageKeys.PLAYER_IS_MUTE)&&i.muted&&(0,v.qQ)(d.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,v.qQ)(d.LocalStorageKeys.PLAYER_VOLUME,i.volume),(0,v.qQ)(d.LocalStorageKeys.PLAYER_IS_MUTE,i.muted?1:0),(0,_.c)({isMute:i.muted,volume:i.volume}))};new(o())((function(t,o){try{var l;null===(0,v.$o)(d.LocalStorageKeys.PLAYER_VOLUME)&&(0,v.qQ)(d.LocalStorageKeys.PLAYER_VOLUME,e),null===(0,v.$o)(d.LocalStorageKeys.PLAYER_IS_MUTE)&&(0,v.qQ)(d.LocalStorageKeys.PLAYER_IS_MUTE,0);var r=(0,_.J)(n),a=r.volume,u=r.autoplayMuted;i.video.volume=a,i.video.muted=u,null===(l=i.getPlugin("volume"))||void 0===l||l.onVolumeChange(),h.Q.getItem({sKey:d.CookieKeys.VolumeInfo})||h.Q.setItem(d.CookieKeys.VolumeInfo,{isUserMute:!1,isMute:i.video.muted,volume:i.video.volume}),t(0)}catch(s){i.volume=volume,i.muted=autoplayMuted,o(s)}})).then((function(){null==i||i.on(c.VOLUME_CHANGE,l)})).catch((function(e){}));var r=p.listen(p.EVENT.syncInteraction,(function(){if(null!=i&&i.video){var e=(0,_.J)(n),t=e.volume,o=e.autoplayMuted;i.video.volume=t,i.video.muted=o}}));return function(){null==i||i.off(c.VOLUME_CHANGE,l),r()}}}),[i,t,null==n?void 0:n.syncVolume]),(0,s.useEffect)((function(){var e;if(t&&i&&r()(e=[f.T0.PreventTip,f.T0.PreventTipAndSyncVolume]).call(e,null==n?void 0:n.syncVolume)){var o=function(e){"change_muted"!==(null==e?void 0:e.action)&&"change_volume"!==(null==e?void 0:e.action)||u()((function(){(0,_.c)({isUserMute:!0===i.muted||0===i.volume,isMute:i.muted,volume:i.volume})}))};return i.on(c.USER_ACTION,o),function(){i.off(c.USER_ACTION,o)}}}),[i,n,t]),(0,s.useEffect)((function(){var e;if(t&&i&&r()(e=[f.T0.PreventTip,f.T0.PreventTipAndSyncVolume]).call(e,null==n?void 0:n.syncVolume)){var o=function(e){"volumeDown"!==e.action&&"volumeUp"!==e.action||u()((function(){(0,_.c)({isUserMute:0===i.volume,isMute:i.muted,volume:i.volume})}))};return i.on(b.B.CustomShortCut,o),function(){i.off(b.B.CustomShortCut,o)}}}),[i,n,t]),null},E=function(e){var t=e.isActive,n=(e.abtestData,e.awemeInfo,e.scene),i=void 0===n?"":n,o=e.toast,l=(0,g.n)();return(0,s.useEffect)((function(){if(l&&t){var e=u()((function(){var e,t,n;l.muted=!0,l.volume=0,l.musicMute=!0,null===(e=l.plugins)||void 0===e||null===(t=e.volume)||void 0===t||null===(n=t.disable)||void 0===n||n.call(t)}));return function(){var t,n,i;clearTimeout(e),l.musicMute=!1,null===(t=l.plugins)||void 0===t||null===(n=t.volume)||void 0===n||null===(i=n.enable)||void 0===i||i.call(n)}}}),[l,t]),(0,s.useEffect)((function(){var e;if(l&&t&&r()(e=["modal","detail"]).call(e,i)){if(o)return void o("\u8be5\u58f0\u97f3\u4e0d\u53ef\u7528");y.F.info("\u8be5\u58f0\u97f3\u4e0d\u53ef\u7528")}}),[l,t,i]),null},I=function(e){var t,n,i=(0,m.N)(),o=e.awemeInfo;return null!=o&&null!==(t=o.status)&&void 0!==t&&null!==(n=t.videoMute)&&void 0!==n&&n.isMute?s.createElement(E,e):s.createElement(w.k,{componentName:"VolumePlugin",Slardar:i},s.createElement(S,e))}},98355:function(e,t,n){n.d(t,{D3:function(){return d},td:function(){return f},ZR:function(){return v}});var i=n(30906),o=n(30673),l=n(21155),r=n.n(l),a=n(50750),u=n.n(a),s=n(94090),c=n.n(s),d=function(e,t){var n;if(!t)return e;var i={2:[],3:[],4:[],5:[]};return r()(n=u()(e)).call(n,(function(n){var l;i[n]=c()(l=[]).call(l,(0,o.Z)(e[n]),(0,o.Z)(t[n]))})),i},f=function(e,t){var n,i;if(!t)return e;var l,r,a,u=null===(n=navigator)||void 0===n?void 0:n.hardwareConcurrency;return u>4?c()(l=[]).call(l,(0,o.Z)(e),(0,o.Z)(t.cpu_high)):4===u?c()(r=[]).call(r,(0,o.Z)(e),(0,o.Z)(t.cpu_mid)):u<4?c()(a=[]).call(a,(0,o.Z)(e),(0,o.Z)(t.cpu_low)):c()(i=[]).call(i,(0,o.Z)(e),(0,o.Z)(t.cpu_high))},v=function(e,t){var n;if(!t)return e;var o=null===(n=navigator)||void 0===n?void 0:n.hardwareConcurrency;return o>4?(0,i.Z)((0,i.Z)({},e),t.cpu_high):4===o?(0,i.Z)((0,i.Z)({},e),t.cpu_mid):o<4?(0,i.Z)((0,i.Z)({},e),t.cpu_low):(0,i.Z)((0,i.Z)({},e),t.cpu_high)}},12324:function(e,t,n){n.d(t,{r7:function(){return B}});var i=n(30673),o=n(32781),l=n(21155),r=n.n(l),a=n(50750),u=n.n(a),s=n(8e3),c=n.n(s),d=n(11227),f=n.n(d),v=n(84639),h=n.n(v),p=n(58144),g=n.n(p),m=n(90457),y=n.n(m),w=n(95140),_=n.n(w),b=n(52249),S=n.n(b),E=n(34346),I=n.n(E),T=n(94090),P=n.n(T),x=n(56920),C=n(36177),k=n(98355),L={5:1,4:2,3:3,2:4},N=x.Ej(),Z=N.quality_filter,R=N.white_list,D=function(e){if(e&&e.core_cnt){var t,n=null!==(t=navigator.hardwareConcurrency)&&void 0!==t?t:-1,i=(0,o.Z)(e.core_cnt,2),l=i[0],r=i[1];return n>=l&&n<=r}return!0},A=function(e){if(e&&e.memory){var t,n=null!==(t=navigator.deviceMemory)&&void 0!==t?t:-1,i=(0,o.Z)(e.memory,2),l=i[0],r=i[1];return n>=l&&n<=r}return!0},M=function(e,t){if(e&&e.video_screen_mode){var n,i=null!==(n=null==t?void 0:t.video)&&void 0!==n?n:{},o=i.width,l=i.height;return"landscape"===e.video_screen_mode[0]&&o>l}return!0},O=function(e,t){return!e||!e.encoder||e.encoder[0]===t},B=function(e,t,n,l,a){if((null==n?void 0:n.awemeType)===C.ed.Note)return[];var s=null!=e?e:[],d=function(e,t){var n,i,o=(0,k.D3)(null!==(n=null==t?void 0:t.clarityMap)&&void 0!==n?n:x.u2,null==t?void 0:t.extraClarityMap),l=[];return r()(i=u()(o)).call(i,(function(t){for(var n=o[t],i=function(i){var o=c()(e).call(e,(function(e){var t;return null==e||null===(t=e.gearName)||void 0===t?void 0:f()(t).call(t,n[i])}));if(null!=o&&o.length){var r=h()({},o[0]);return r.definition=L[t],l.push(r),"break"}},r=0;r<n.length&&"break"!==i(r);r++);})),l.length>0?l:e}(s,t);if(d.length>0&&(s=d),!a){var v,p,m,w,b=null!==(v=null==t||null===(p=t.BitrateSelector)||void 0===p?void 0:p.quality_filter)&&void 0!==v?v:Z;s=function(){var e,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:R,i=arguments.length>2?arguments[2]:undefined,o=arguments.length>3?arguments[3]:undefined,l=arguments.length>4?arguments[4]:undefined,r=n;if(null!=i&&null!==(e=i.BitrateSelector)&&void 0!==e&&e.multiFactors){var a=i.BitrateSelector.multiFactors,u=g()(a).call(a,(function(e){var t=D(e.factor),n=A(e.factor),i=O(e.factor,l),r=M(e.factor,o);return t&&n&&i&&r}));u&&u.config&&u.config.white_list&&(r=u.config.white_list)}r=(0,k.td)(r,null==i?void 0:i.extraBitrateWhitelist);var s=c()(t).call(t,(function(e){return y()(r).call(r,(function(t){var n;return null==e||null===(n=e.gearName)||void 0===n?void 0:f()(n).call(n,t)}))}));return s.length>0?s:t}(s,null!==(m=null==t||null===(w=t.BitrateSelector)||void 0===w?void 0:w.white_list)&&void 0!==m?m:R,t,n,l),s=function(){var e,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Z,i=arguments.length>2?arguments[2]:undefined,l=arguments.length>3?arguments[3]:undefined,r=arguments.length>4?arguments[4]:undefined,a=n;if(null!=i&&null!==(e=i.BitrateSelector)&&void 0!==e&&e.multiFactors){var u=i.BitrateSelector.multiFactors,s=g()(u).call(u,(function(e){var t=D(e.factor),n=A(e.factor),i=O(e.factor,r),o=M(e.factor,l);return t&&n&&i&&o}));s&&s.config&&s.config.quality_filter&&(a=s.config.quality_filter)}a=(0,k.ZR)(a,null==i?void 0:i.extraQualityFilter);var d=c()(t).call(t,(function(e){for(var t=!0,n=0,i=_()(a);n<i.length;n++){var l,r=(0,o.Z)(i[n],2),u=r[0],s=r[1];if(null!=e&&null!==(l=e.gearName)&&void 0!==l&&f()(l).call(l,u)){var c=null!=s?s:{},d=c.lower,v=c.upper;(e.bitRate<d||e.bitRate>v)&&(t=!1)}}return t}));if(0===d.length&&t.length>0){var v=S()(t).call(t,(function(e,t){return e.bitRate&&e.bitRate<t.bitRate?e:t}),{});d.push(v)}return d}(s,b,t,n,l)}return I()(s).call(s,(function(e){var t,o;return{size:null==e?void 0:e.dataSize,uri:null==e?void 0:e.uri,url:P()(t=[]).call(t,(0,i.Z)((null==e?void 0:e.playAddr)||[]),[{src:globalThis.xssNamespace.douyin_web.filterUrl(null==e?void 0:e.playApi,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}]),bitrate:null==e?void 0:e.bitRate,definition:(null==e?void 0:e.definition)||(null==e?void 0:e.qualityType),qualityType:null==e?void 0:e.qualityType,duration:(null==n||null===(o=n.video)||void 0===o?void 0:o.duration)/1e3,isH265:e.isH265,gearName:e.gearName}}))}},46090:function(e,t,n){n.d(t,{S:function(){return r}});var i=n(11227),o=n.n(i),l=n(36177),r=function(e){var t,n,i,r,a;return(null==e||null===(t=e.video)||void 0===t||null===(n=t.playAddr)||void 0===n||null===(i=n[0])||void 0===i?void 0:o()(r=i.src).call(r,"video-web-cn"))||(null==e||null===(a=e.status)||void 0===a?void 0:a.privateStatus)>0&&(null==e?void 0:e.awemeType)!==l.ed.Note}},10487:function(e,t,n){n.d(t,{K:function(){return s}});var i=n(90457),o=n.n(i),l=n(56920),r=n(5611),a=n(28712),u=n(93976),s=function(e){var t,n,i,s=e.awemeInfo,c=e.abtestData;return!(!(0,r.DT)()||(0,a.p)())&&!(!(null==s||null===(t=s.video)||void 0===t||null===(n=t.bitRateList)||void 0===n||null===(i=o()(n))||void 0===i?void 0:i.call(n,(function(e){return 2===e.isH265})))||!(0,u.Yk)()||(null==c?void 0:c.useClientH266)!==l.k1.On)}},77323:function(e,t,n){n.d(t,{K:function(){return a}});var i=n(21155),o=n.n(i),l=n(50750),r=n.n(l);function a(e){var t,n;if(null!=e&&null!==(t=e.plugins)&&void 0!==t&&null!==(n=t.keyboard)&&void 0!==n&&n.keyCodeMap){var i,l=e.plugins.keyboard.keyCodeMap||{},a={};return o()(i=r()(l)).call(i,(function(e){l[e]&&(a[e]=l[e].disable,l[e].disable=!0)})),function(){var t,n,i,l=(null==e||null===(t=e.plugins)||void 0===t||null===(n=t.keyboard)||void 0===n?void 0:n.keyCodeMap)||{};l&&o()(i=r()(l)).call(i,(function(e){l[e]&&(l[e].disable=a[e])}))}}}},7976:function(e,t,n){n.d(t,{qs:function(){return v},yf:function(){return p}});n(30673);var i=n(30906),o=n(34346),l=n.n(o),r=n(8e3),a=n.n(r),u=n(90457),s=n.n(u),c=(n(94090),n(22247)),d=n(56920),f=n(12324),v=function(e){var t=e.awemeInfo,n=e.abtestData,o=e.userselection,l=h({awemeInfo:t,abtestData:n,userselection:o});return{preloadCacheType:1,preloadMaxCacheCount:20,minBufferLength:5,maxBufferLength:50,defaultFormat:"dash",dashOpts:{dynamic_video:(0,i.Z)((0,i.Z)({},t.video.videoModel.dynamicVideo),{},{dynamic_video_list:l})},duration:t.video.videoModel.videoDuration,vid:t.video.videoModel.videoId,defaultDefinition:t.video.videoModel.autoDefinition,focusUserDefinition:!0,needAutoBitrate:!0,smallGapLimit:1}},h=function(e){var t=e.abtestData,n=e.awemeInfo,i=e.userselection,o=n.video.videoModel.dynamicVideo.dynamic_video_list,r=null==o?void 0:l()(o).call(o,(function(e){return{bitRate:e.real_bitrate,gearName:e.gear_name,qualityType:e.quality_type}})),u=(0,f.r7)(r,t,n,"h264",i);return null==o?void 0:a()(o).call(o,(function(e){return s()(u).call(u,(function(t){if(t.qualityType===e.quality_type)return e.definition=t.definition,e.qualityType=t.qualityType,e.size=t.size,e.uri=t.uri,!0}))}))},p=function(e){var t,n,i,o,l,r,a,u,s,f,v=e.awemeInfo,h=e.abtestData;return((null==h?void 0:h.useDashWeb)===d.Q9.OneMin&&(null==v||null===(t=v.video)||void 0===t?void 0:t.duration)>=6e4||(null==h?void 0:h.useDashWeb)===d.Q9.ThreeMin&&(null==v||null===(n=v.video)||void 0===n?void 0:n.duration)>=18e4)&&(null===(i=v.video.videoModel)||void 0===i||null===(o=i.dynamicVideo)||void 0===o||null===(l=o.dynamic_video_list)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.codec_type)&&"bytevc1"!==(null===(a=v.video.videoModel)||void 0===a||null===(u=a.dynamicVideo)||void 0===u||null===(s=u.dynamic_video_list)||void 0===s||null===(f=s[0])||void 0===f?void 0:f.codec_type)&&!1!==window.useDash&&c.ZP.encryptUtils.isSupported()}},93691:function(e,t,n){n.d(t,{H:function(){return i}});var i=function(e){var t,n=null===(t=e.root)||void 0===t?void 0:t.closest(".basePlayerContainer");return(null==n?void 0:n.querySelector(".focusPanel"))||null}},11256:function(e,t,n){n.d(t,{Xo:function(){return M},pK:function(){return O},w:function(){return D},if:function(){return R},Cu:function(){return N},VV:function(){return Z},On:function(){return A},ad:function(){return H},I:function(){return B},OS:function(){return U}});var i=n(30906),o=n(90457),l=n.n(o),r=n(11227),a=n.n(r),u=n(18271),s=n(56920),c=n(353),d=n(36177),f=n(28712),v=n(5611),h=n(71116),p=n(72603),g=n(41644),m=n(13971),y=n(27942),w=n(63751),_=n(93976),b=n(8e3),S=n.n(b),E=n(101),I=n.n(E),T=n(52249),P=n.n(T),x=n(5277),C=n(38445),k=n(10487),L=!1,N=function(){return u.Z.isSupported()},Z=function(){var e=u.Z.getDeviceCapacity(),t=e.simd,n=e.thread,i=e.nbCpu;return t&&i>=8||n&&i>8},R=function(e){var t,n,o,r,a,c,m;if((0,f.p)()||(0,v.DT)())return!1;if((null==e||null===(t=e.abtestData)||void 0===t?void 0:t.use265Web)!==s.dy.On)return!1;var y=e.awemeInfo,w=e.abtestData,_=(null!==(n=h.Le.getConfig(h.gI.IsInLookMiniModal))&&void 0!==n?n:{}).isInMiniModal,b=null==y||null===(o=y.video)||void 0===o||null===(r=o.bitRateList)||void 0===r||null===(a=l()(r))||void 0===a?void 0:a.call(r,(function(e){return 1===e.isH265})),S="recommend"===(0,p.yW)();return!!(b&&S&&!_&&h.Le.getConfig(h.gI.isVideoPlayed)&&(null===(c=(0,g.$)())||void 0===c?void 0:c.score)>(null==w||null===(m=w.xgvideoOptions)||void 0===m?void 0:m.score)&&(null==y?void 0:y.awemeType)===d.ed.Normal&&N()&&Z())&&(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(L)return!0;var t=(0,i.Z)({preloadDecoder:"h265",wasmFallbackToAsm:!1,evaluateVVCount:1,disabledByLowdecodePrecent:1,reuseMseForAudio:!0,preciseSeek:Infinity,offscreenCanvas:!0,lowDecodeFpsDelta:10,lowDecodeThreshold:75},e);u.Z.setDecodeCapacity(t),L=!0}(null==w?void 0:w.xgvideoOptions),!0)},D=function(e){var t,n,i,o;if((0,f.p)()||(0,v.DT)()||function(e){var t;if(!(0,x.un)())return!1;var n=(0,m.$o)(c.LocalStorageKeys.IsSupportHevc);if(!n)return!0;if(n.has_detect&&!1===n.is_support)return!0;if(null!=e&&e.raiseHevcRate)return!1;if((0,C.G)()<3)return!0;var i=null!==(t=(0,m.$o)(c.LocalStorageKeys.FrameInfoList))&&void 0!==t?t:[],o=S()(i).call(i,(function(e){return 0===e.isH265})),l=S()(i).call(i,(function(e){return 1===e.isH265}));if(l.length>=2&&I()(l).call(l,(function(e){return 0===e.total})))return(0,m.qQ)(c.LocalStorageKeys.IsSupportHevc,{has_detect:!0,is_support:!1}),!0;var r=S()(o).call(o,(function(e){return e.total>20})),a=S()(l).call(l,(function(e){return e.total>20})),u=P()(r).call(r,(function(e,t){return e+t.rate}),0)/r.length,s=P()(a).call(a,(function(e,t){return e+t.rate}),0)/a.length;return a.length>=2&&s-u>=10&&((0,m.qQ)(c.LocalStorageKeys.IsSupportHevc,{has_detect:!0,is_support:!1}),!0)}(null==e?void 0:e.abtestData))return!1;var r=e.awemeInfo,a=e.abtestData;return!(null!=a&&a.noStartedDowngrade&&(null===(t=(0,m.$o)(c.LocalStorageKeys.IsSupportHevc))||void 0===t||!t.pure_support))&&!(!(null==r||null===(n=r.video)||void 0===n||null===(i=n.bitRateList)||void 0===i||null===(o=l()(i))||void 0===o?void 0:o.call(i,(function(e){return 1===e.isH265})))||(null==a?void 0:a.use265HardParse)!==s.vz.On||!(0,y.E)()||(null==a||!a.raiseHevcRate)&&(0,w.p)())},A=function(e){var t,n,i,o=e.awemeInfo;if(!(0,v.DT)()||(0,f.p)())return!1;if(!(null==o||null===(t=o.video)||void 0===t?void 0:l()(n=t.bitRateList).call(n,(function(e){return 1===e.isH265})))||!(0,_.Ko)())return!1;var r=null===(i=navigator)||void 0===i?void 0:i.hardwareConcurrency;return!!(r&&r>=8)||(!!(0,_._u)()||!(0,_.b4)()&&!(r<=4))},M=function(e){var t,n,i,o,l=e.player;return(0,f.p)()?0:null!=l&&null!==(t=l.curDefinition)&&void 0!==t&&t.isH265?null!=l&&null!==(i=l.currentSrc)&&void 0!==i&&null!==(o=a()(i))&&void 0!==o&&o.call(i,"downgrade_264")?0:1:0===(null==l||null===(n=l.curDefinition)||void 0===n?void 0:n.isH265)?0:A(e)||R(e)?1:0},O=function(e){var t=e.player;if(null!=t&&t.curDefinition){var n=2===t.curDefinition.isH265;return Boolean(n)}return!!(0,k.K)(e)},B=function(e){var t,n,i,o=e.player;return null!=o&&null!==(t=o.curDefinition)&&void 0!==t&&t.isH265&&null!=o&&null!==(n=o.currentSrc)&&void 0!==n&&null!==(i=a()(n))&&void 0!==i&&i.call(n,"downgrade_264")?1:0},U=function(e){return(0,v.DT)()||1!==B(e)?0:1},H=function(e){return(0,v.DT)()&&1===B(e)?1:0}},13948:function(e,t,n){n.d(t,{Q:function(){return H}});var i=n(30673),o=n(30906),l=n(32781),r=n(8e3),a=n.n(r),u=n(11227),s=n.n(u),c=n(58144),d=n.n(c),f=n(94090),v=n.n(f),h=n(19672),p=n.n(h),g=n(34346),m=n.n(g),y=n(84639),w=n.n(y),_=n(67330),b=n(56920),S=n(22912),E=n(36177),I=n(71116),T=n(91990),P=n.n(T),x=n(41644),C=n(12324),k=n(7976),L=n(11256),N=n(10487),Z=n(82766),R=n.n(Z),D=n(72603),A=n(28712),M=n(25902),O={1:{width:1920,height:1080},2:{width:1280,height:720},3:{width:1024,height:576},4:{width:1024,height:576}},B=function(e){var t,n,i,o,l,r,a,u=e.awemeInfo,c=e.H264List,f=e.H265List,v=e.H266List,h=e.abtestData,p=e.userselection;if((0,A.p)())return{};if(!s()(t=[1,2,3]).call(t,null==h?void 0:h.hasOverRect))return{};if(p)return{};if(2===(null==h?void 0:h.hasOverRect)&&window.devicePixelRatio>=1.25)return{};var g=null!==(n=I.Le.getConfig(I.gI.VideoRectList))&&void 0!==n?n:[],m=d()(g).call(g,(function(e){return e.id===u.awemeId}));if(m)return m.config;if(3===(null==h?void 0:h.hasOverRect)&&(0,M.r)())return{};var y=I.Le.getConfig(I.gI.VideoRect);y||(y=function(){if("general_search"===(0,D.vM)())return{width:1114,height:660};var e=window.innerWidth>=1240?228:140;return{width:window.innerWidth-e,height:window.innerHeight-128}}(),I.Le.setConfig(I.gI.VideoRect,y));var w=null!==(i=null!=v?v:f)&&void 0!==i?i:c,_=null==w?void 0:R()(w).call(w,(function(e,t){return(null==t?void 0:t.definition)-(null==e?void 0:e.definition)})),b=(null==u||null===(o=u.video)||void 0===o?void 0:o.width)/(null==u||null===(l=u.video)||void 0===l?void 0:l.height),S=[];if(_&&b>1)for(var T=0;T<_.length;T++){var P,x,C,k=null!==(P=_[T].definition)&&void 0!==P?P:1,L=O[k];if(!((null===(x=y)||void 0===x?void 0:x.width)>(null==L?void 0:L.width)&&(null===(C=y)||void 0===C?void 0:C.height)>(null==L?void 0:L.height))){S.push(_[T]);break}S.push(_[T])}if(_&&b<1)for(var N=0;N<_.length;N++){var Z,B,U,H=null!==(Z=_[N].definition)&&void 0!==Z?Z:1,F=O[H];if(!((null===(B=y)||void 0===B?void 0:B.width)>(null==F?void 0:F.height)&&(null===(U=y)||void 0===U?void 0:U.height)>(null==F?void 0:F.width))){S.push(_[N]);break}S.push(_[N])}if(0===S.length)return{};var Y={defaultDefinition:(null==S||null===(r=S[0])||void 0===r?void 0:r.definition)||-1,defaultBitrate:(null==S||null===(a=S[0])||void 0===a?void 0:a.bitrate)||"",definition:{list:(null==u?void 0:u.awemeType)===E.ed.Note?[]:S}};return g.push({id:u.awemeId,config:Y}),I.Le.setConfig(I.gI.VideoRectList,g),Y},U=function(e){var t=e.url,n=void 0===t?"":t,i=e.target,r=n,a=n.split("?"),u=(0,l.Z)(a,2),c=u[0],d=u[1];try{if(s()(n).call(n,"/aweme/v1/play")&&d){var f,h=(0,_.parse)(d);r=v()(f="".concat(c,"?")).call(f,(0,_.stringify)((0,o.Z)((0,o.Z)({},h),S.getSharkCommonParams({target:i}))))}}catch(p){}return r},H=function(e){var t,n,l,r,u,c,f,h,g,y,_,S,T,Z,R,D,A,M,O,H,F,Y,W,j,K,V,z,q,X,Q=e.awemeInfo,G=e.abtestData,$=e.userselection,J=e.filter264InMix,ee=void 0!==J&&J,te=Q;null!==(t=I.Le.getConfig(I.gI.RefetchAwemeInfo))&&void 0!==t&&t[null==Q?void 0:Q.awemeId]&&(te=I.Le.getConfig(I.gI.RefetchAwemeInfo)[null==Q?void 0:Q.awemeId]);var ne,ie=((te||{}).video||{}).bitRateList,oe=void 0===ie?[]:ie,le=null===(n=te)||void 0===n||null===(l=n.video)||void 0===l?void 0:l.playAddr,re=[];if(p()(le)&&(re=m()(le).call(le,(function(e){var t;return{src:globalThis.xssNamespace.douyin_web.filterUrl(U({url:e.src,target:null===(t=te)||void 0===t?void 0:t.awemeId}),null,{logType:"js.href/src",mode:"black",reportOnly:!1})}}))),null!==(r=te)&&void 0!==r&&null!==(u=r.video)&&void 0!==u&&u.playApi){var ae,ue,se,ce,de={src:globalThis.xssNamespace.douyin_web.filterUrl(U({url:null===(ae=te)||void 0===ae||null===(ue=ae.video)||void 0===ue?void 0:ue.playApi,target:null===(se=te)||void 0===se?void 0:se.awemeId}),null,{logType:"js.href/src",mode:"black",reportOnly:!1})};re=v()(ce=[]).call(ce,(0,i.Z)(re),[de]),ne={src:globalThis.xssNamespace.douyin_web.filterUrl("".concat(de.src,"&downgrade_264=1"),null,{logType:"js.href/src",mode:"black",reportOnly:!1})}}var fe,ve,he,pe,ge,me,ye,we,_e,be,Se,Ee=(0,C.r7)(function(e,t){var n,i,o=null==e||null===(n=a()(e))||void 0===n?void 0:n.call(e,(function(e){return 0===e.isH265})),l=null==o||null===(i=a()(o))||void 0===i?void 0:i.call(o,(function(e){var t;return s()(t=["normal_1440_0","normal_1080_0","normal_720_0","normal_540_0","normal_480_0","normal_360_0","lower_540_0"]).call(t,e.gearName)})),r=(null==l?void 0:l.length)>0?l:o;if((null==t?void 0:t.use264Adapt)===b.Uq.On){var u,c=null==o||null===(u=a()(o))||void 0===u?void 0:u.call(o,(function(e){var t;return s()(t=["adapt_1080_0","adapt_720_0","adapt_540_0","adapt_480_0","adapt_360_0","adapt_lower_540_0"]).call(t,e.gearName)}));return(null==c?void 0:c.length)>0?c:r}if((null==t?void 0:t.useHeaac)===b.Pt.ON){var f,v=null==o||null===(f=a()(o))||void 0===f?void 0:f.call(o,(function(e){var t;return s()(t=["low_1080_0","low_720_0","low_540_0","low_480_0","low_360_0","adapt_low_540_0"]).call(t,e.gearName)}));if(v&&v.length>0&&!d()(v).call(v,(function(e){return"low_1080_0"===e.gearName}))){var h=null==r?void 0:d()(r).call(r,(function(e){return"normal_1080_0"===e.gearName}));h&&v.unshift(h)}return(null==v?void 0:v.length)>0?v:r}return r}(oe,G),G,te,"h264",$),Ie={},Te={},Pe={};if((0,k.yf)({awemeInfo:te,abtestData:G})){var xe,Ce=m()(xe=te.video.videoModel.dynamicVideo.dynamic_video_list).call(xe,(function(e){return{bitRate:e.real_bitrate,gearName:e.gear_name,qualityType:e.quality_type}})),ke=(0,C.r7)(Ce,G,te,"h264",$);w()(Ie,{DASHPlugin:(0,k.qs)({awemeInfo:te,abtestData:G,userselection:$}),definition:{list:ke}})}else if((0,L.w)({awemeInfo:te,abtestData:G})){var Le,Ne,Ze,Re,De,Ae,Me,Oe,Be=(0,C.r7)(null==oe?void 0:a()(oe).call(oe,(function(e){return 1===e.isH265})),G,te,"h265",$);re=v()(Le=[]).call(Le,(0,i.Z)(te.video.playAddrH265),[{src:globalThis.xssNamespace.douyin_web.filterUrl(null===(Ne=te)||void 0===Ne||null===(Ze=Ne.video)||void 0===Ze?void 0:Ze.playApiH265,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}]);var Ue,He=(ge=(new(P())).getResult(),me=null==ge||null===(fe=ge.browser)||void 0===fe?void 0:fe.name,ye=Number(null==ge||null===(ve=ge.browser)||void 0===ve?void 0:ve.major),we="Chrome"===me&&ye<=100||"MetaSr"===me,_e=navigator.hardwareConcurrency,be=null!==(he=null===(pe=(0,x.$)())||void 0===pe?void 0:pe.score)&&void 0!==he?he:-1,Se={isBan1080:!1,isBan720:!1},_e>=8&&we&&(Se.isBan1080=!0),_e<8&&_e>=4&&(we&&(Se.isBan1080=!0),we&&be>0&&be<6&&(Se.isBan720=!0)),_e<4&&we&&(Se.isBan1080=!0,Se.isBan720=!0),Se);if(He.isBan1080){Be=a()(Be).call(Be,(function(e){return 1!==e.definition}));var Fe=d()(Ee).call(Ee,(function(e){return 1===e.definition}));Fe&&Be.push(Fe)}if(He.isBan720){Be=a()(Be).call(Be,(function(e){return 2!==e.definition}));var Ye=d()(Ee).call(Ee,(function(e){return 2===e.definition}));Ye&&Be.push(Ye)}if(!ee)null===(Ue=Be)||void 0===Ue||m()(Ue).call(Ue,(function(e){return p()(e.url)&&ne&&e.url.push(ne),e}));w()(Te,{defaultDefinition:(null===(Re=Be)||void 0===Re||null===(De=Re[0])||void 0===De?void 0:De.definition)||-1,defaultBitrate:(null===(Ae=Be)||void 0===Ae||null===(Me=Ae[0])||void 0===Me?void 0:Me.bitrate)||"",codecType:"h265",definition:{list:(null===(Oe=te)||void 0===Oe?void 0:Oe.awemeType)===E.ed.Note?[]:Be}})}else if((0,L.if)({awemeInfo:te,abtestData:G})){var We,je,Ke,Ve,ze,qe,Xe=(0,C.r7)(null==oe?void 0:a()(oe).call(oe,(function(e){return 1===e.isH265})),G,te,"h265",$);re=v()(We=[]).call(We,(0,i.Z)(te.video.playAddrH265),[{src:globalThis.xssNamespace.douyin_web.filterUrl(null===(je=te)||void 0===je||null===(Ke=je.video)||void 0===Ke?void 0:Ke.playApiH265,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}]),w()(Te,{H264DefinitionList:Ee,codecType:"h265",mediaType:"xg-video",defaultDefinition:(null==Xe||null===(Ve=Xe[0])||void 0===Ve?void 0:Ve.definition)||-1,defaultBitrate:(null==Xe||null===(ze=Xe[0])||void 0===ze?void 0:ze.bitrate)||"",definition:{list:(null===(qe=te)||void 0===qe?void 0:qe.awemeType)===E.ed.Note?[]:Xe},initCodecType:"h265soft"})}else if((0,N.K)({awemeInfo:te,abtestData:G})){var Qe,Ge,$e,Je=(0,C.r7)(null==oe?void 0:a()(oe).call(oe,(function(e){return 2===e.isH265})),G,te,"h266",$);if(!ee){var et,tt,nt,it,ot={h264:"",h265:""};if(null!==(et=te)&&void 0!==et&&null!==(tt=et.video)&&void 0!==tt&&tt.playApiH265){var lt,rt,at,ut=U({url:null===(lt=te)||void 0===lt||null===(rt=lt.video)||void 0===rt?void 0:rt.playApiH265,target:null===(at=te)||void 0===at?void 0:at.awemeId});ot.h265="".concat(ut,"&is_h265=1")}if(null!==(nt=te)&&void 0!==nt&&null!==(it=nt.video)&&void 0!==it&&it.playApi){var st,ct,dt,ft=U({url:null===(st=te)||void 0===st||null===(ct=st.video)||void 0===ct?void 0:ct.playApi,target:null===(dt=te)||void 0===dt?void 0:dt.awemeId});ot.h264="".concat(ft,"&is_h264=1")}null==Je||m()(Je).call(Je,(function(e){return p()(e.url)&&(ot.h265&&e.url.push({src:globalThis.xssNamespace.douyin_web.filterUrl(ot.h265,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),ot.h264&&e.url.push({src:globalThis.xssNamespace.douyin_web.filterUrl(ot.h264,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})),e}))}if(3===Je.length){var vt=(0,C.r7)(null==oe?void 0:a()(oe).call(oe,(function(e){return 1===e.isH265})),G,te,"h265",$),ht=d()(vt).call(vt,(function(e){return 2===e.qualityType}));ht&&Je.push(ht)}w()(Pe,{H264DefinitionList:Ee,codecType:"h266",mediaType:"video",defaultDefinition:(null==Je||null===(Qe=Je[0])||void 0===Qe?void 0:Qe.definition)||-1,defaultBitrate:(null==Je||null===(Ge=Je[0])||void 0===Ge?void 0:Ge.bitrate)||"",definition:{list:(null===($e=te)||void 0===$e?void 0:$e.awemeType)===E.ed.Note?[]:Je}})}else if((0,L.On)({awemeInfo:te})){var pt,gt,mt,yt=(0,C.r7)(null==oe?void 0:a()(oe).call(oe,(function(e){return 1===e.isH265})),G,te,"h265",$);ee||null==yt||m()(yt).call(yt,(function(e){return p()(e.url)&&ne&&e.url.push(ne),e})),w()(Te,{H264DefinitionList:Ee,codecType:"h265",mediaType:"video",defaultDefinition:(null==yt||null===(pt=yt[0])||void 0===pt?void 0:pt.definition)||-1,defaultBitrate:(null==yt||null===(gt=yt[0])||void 0===gt?void 0:gt.bitrate)||"",definition:{list:(null===(mt=te)||void 0===mt?void 0:mt.awemeType)===E.ed.Note?[]:yt}})}var wt=B({awemeInfo:te,H264List:Ee,H265List:null==Te||null===(c=Te.definition)||void 0===c?void 0:c.list,H266List:null==Pe||null===(f=Pe.definition)||void 0===f?void 0:f.list,abtestData:G,userselection:$});return(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({poster:null===(h=te)||void 0===h||null===(g=h.video)||void 0===g?void 0:g.cover,size:(null===(y=te)||void 0===y||null===(_=y.video)||void 0===_?void 0:_.dataSize)||0,uri:null===(S=te)||void 0===S||null===(T=S.video)||void 0===T?void 0:T.uri,vid:null===(Z=te)||void 0===Z?void 0:Z.awemeId,authorId:null===(R=te)||void 0===R||null===(D=R.authorInfo)||void 0===D?void 0:D.uid,videoWidth:null===(A=te)||void 0===A||null===(M=A.video)||void 0===M?void 0:M.width,videHeight:null===(O=te)||void 0===O||null===(H=O.video)||void 0===H?void 0:H.height,defaultDefinition:(null==Ee||null===(F=Ee[0])||void 0===F?void 0:F.definition)||-1,defaultBitrate:(null==Ee||null===(Y=Ee[0])||void 0===Y?void 0:Y.bitrate)||"",duration:(null===(W=te)||void 0===W||null===(j=W.video)||void 0===j?void 0:j.duration)/1e3||0,url:re,vtype:(null===(K=te)||void 0===K?void 0:K.awemeType)===E.ed.Note?"MP3":"MP4",definition:{list:Ee},bitrate:Math.floor(8*(null===(V=te)||void 0===V||null===(z=V.video)||void 0===z?void 0:z.dataSize)/((null===(q=te)||void 0===q||null===(X=q.video)||void 0===X?void 0:X.duration)/1e3))||0,userSelectDefinition:$,codecType:"h264",mediaType:"video"},Te),Pe),Ie),wt)}},68078:function(e,t,n){n.d(t,{J:function(){return a},c:function(){return u}});var i=n(30906),o=n(13971),l=n(56462),r=n(353),a=function(e){var t,n,i,a,u=0===(null==e?void 0:e.newSilent)?.6:.5,s=1===(null!==(t=(0,o.$o)(r.LocalStorageKeys.PLAYER_IS_MUTE))&&void 0!==t?t:0),c=null!==(n=(0,o.$o)(r.LocalStorageKeys.PLAYER_VOLUME))&&void 0!==n?n:u,d=l.Q.getItem({sKey:r.CookieKeys.VolumeInfo})||{};(!d.isMute||d.isMute&&d.isUserMute)&&(c=null!==(i=d.volume)&&void 0!==i?i:c,s=null!==(a=d.isMute)&&void 0!==a?a:s);return{volume:c,autoplayMuted:s}},u=function(e){var t=l.Q.getItem({sKey:r.CookieKeys.VolumeInfo});l.Q.setItem(r.CookieKeys.VolumeInfo,(0,i.Z)((0,i.Z)({},t),e))}},11102:function(e,t,n){n.d(t,{U:function(){return l}});var i=n(7976),o=n(11256),l=function(e){var t=e.player,n=e.abtestData,l=e.awemeInfo;return"dash"===(null==t?void 0:t.playerType)||(0,i.yf)({awemeInfo:l,abtestData:n})?0:(0,o.pK)({abtestData:n,awemeInfo:l,player:t})?2:(0,o.Xo)({abtestData:n,awemeInfo:l,player:t})?1:0}},53026:function(e,t,n){n.d(t,{v:function(){return a}});var i=n(34346),o=n.n(i),l=n(50750),r=n.n(l),a=function(e){var t,n=e.currentCodeMap,i=e.additionalCodeMap;o()(t=r()(i)).call(t,(function(e){delete n[e]}))}},13727:function(){},91510:function(e,t,n){e.exports=n.p+"image/douyinDefault.d84fa3f2.png"},66798:function(e,t,n){e.exports=n.p+"image/generalBG.0640de7c.png"}}]);