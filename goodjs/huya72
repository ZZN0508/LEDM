(function(c,a){var b=function(){this.JSSDK={Global:{exchange:""},Resource:{VERSION:"2.4",URI:{EXH_CAL:"190001",EXH_ASC:"190002",EXH_LIS:"190003",SDK_INF:"310000"},EXCEPT:{EXH_CAL:{PARSE:"190101",FORMAT:"190102",UNKNOWN:"190103",LALPAR:"190110",LALFMT:"190111",RMTPAR:"190112",RMTFMT:"190113"},EXH_ASC:{PARSE:"190104",ERROR:"190105",FORMAT:"190107",NETOFF:"190108"},EXH_LIS:{ERROR:"190106"},SDK_INF:{EXCHSUC:"310104"}}}};this.Ajax.init(this);this.Callback.init(this);this.Message.init(this);this.Cookie.init(this)};b.prototype.init=function(d){var e=this;e.JSSDK.Global.exchange=(d&&d!=undefined)?d:"";e.listen(e.Callback,"udb_exchange",e.JSSDK.Global.exchange)};b.prototype.listen=function(i,e,d){var h=this;try{if(c.postMessage){if(c.addEventListener){c.addEventListener("message",function(j){if(j&&typeof j!=undefined&&j.data&&typeof j.data!=undefined&&typeof j.data=="string"&&j.data!=""&&j.data!="undefined"){i.remote.call(i,j.data)}},false)}else{if(c.attachEvent){c.attachEvent("onmessage",function(j){if(j&&typeof j!=undefined&&j.data&&typeof j.data!=undefined&&typeof j.data=="string"&&j.data!=""&&j.data!="undefined"){i.remote.call(i,j.data)}})}}}else{var g="";setInterval(function(){if(c.name!==g){g=c.name;if(g&&g!=undefined&&typeof g=="string"&&g!=""&&g!="undefined"){i.remote.call(i,g)}}},5)}if(e&&typeof e=="string"){h.Cookie.remove(e);if(d&&d!=undefined&&d!=""){h.Cookie.remove(e+d)}c.setInterval(function(){var j=h.Cookie.get(e);if((j==null||j==undefined||j==""||j=="undefined")&&d&&d!=undefined&&d!=""&&d!="undefined"){j=h.Cookie.get(e+d)}if(j!=null&&j!=undefined&&j!=""&&j!="undefined"){h.Cookie.remove(e);if(d&&d!=undefined&&d!=""){h.Cookie.remove(e+d)}i.local.call(i,j)}},50)}}catch(f){h.Message.error(1,"EXH_LIS","ERROR",encodeURIComponent(f.message))}};b.prototype.Callback={init:function(d){this.$parent=d;this.$global=d.JSSDK.Global;this.$message=d.Message;this.$ajax=d.Ajax},message:function(e){var g=this;var d=g.$message.decode(e);if(d&&typeof d!="undefined"){if(d&&typeof d=="object"&&d.hasOwnProperty("uri")&&d.hasOwnProperty("version")&&d.hasOwnProperty("context")){if(d.hasOwnProperty("returnCode")&&d.hasOwnProperty("message")&&d.hasOwnProperty("description")){g.$message.send(encodeURIComponent(e))}else{if(d.hasOwnProperty("appId")&&d.hasOwnProperty("lcid")&&d.hasOwnProperty("url")&&d.hasOwnProperty("method")){var f=d.url,h=d.method;delete d.url;delete d.method;g.$ajax.send({url:f,method:h,async:true,headers:{lcid:d.lcid,uri:d.uri,reqid:d.requestId,context:d.context},data:d,success:function(i){g.$message.send(encodeURIComponent(i))},error:function(i){g.$message.send(encodeURIComponent(i))}})}else{g.$message.error(1,"EXH_CAL","UNKNOWN",encodeURIComponent(e))}}}else{g.$message.error(1,"EXH_CAL","FORMAT",encodeURIComponent(e))}}else{g.$message.error(1,"EXH_CAL","PARSE",encodeURIComponent(e))}},local:function(e){var f=this;var d=f.$message.decode(e);if(d&&typeof d!="undefined"){if(d&&typeof d=="object"&&d.hasOwnProperty("uri")&&d.hasOwnProperty("version")&&d.hasOwnProperty("context")&&d.hasOwnProperty("returnCode")&&d.hasOwnProperty("message")&&d.hasOwnProperty("description")){if(!d.hasOwnProperty("exchange")){d.exchange=f.$global.exchange}f.$message.send(encodeURIComponent(f.$message.stringify(d)))}else{f.$message.error(1,"EXH_CAL","LALFMT",encodeURIComponent(e))}}else{f.$message.error(1,"EXH_CAL","LALPAR",encodeURIComponent(e))}},remote:function(e){var g=this;var d=g.$message.decode(e);if(d&&typeof d!="undefined"){if(d&&typeof d=="object"&&d.hasOwnProperty("uri")&&d.hasOwnProperty("version")&&d.hasOwnProperty("context")&&d.hasOwnProperty("appId")&&d.hasOwnProperty("lcid")&&d.hasOwnProperty("url")&&d.hasOwnProperty("method")){var f=d.url,h=d.method;delete d.url;delete d.method;g.$ajax.send({url:f,method:h,async:true,headers:{lcid:d.lcid,uri:d.uri,reqid:d.requestId,context:d.context},data:d,success:function(i){g.local(i)},error:function(i){g.local(i)}})}else{g.$message.error(1,"EXH_CAL","RMTFMT",encodeURIComponent(e))}}else{g.$message.error(1,"EXH_CAL","RMTPAR",encodeURIComponent(e))}}};b.prototype.Message={init:function(d){this.$parent=d;this.$global=d.JSSDK.Global;this.$resource=d.JSSDK.Resource},send:function(d){if(c.postMessage){c.parent.postMessage(d,"*")}else{c.parent.name=d}},decode:function(d){try{return(c.JSON&&c.JSON.parse)?c.JSON.parse(decodeURIComponent(d)):(new Function("return "+decodeURIComponent(d)))()}catch(e){return undefined}},error:function(e,h,g,f){var i=this;var d=encodeURIComponent('{"uri":"'+i.$resource.URI[h]+'","version":"'+i.$resource.VERSION+'","exchange":"'+i.$global.exchange+'","context":"","returnCode":"'+i.$resource.EXCEPT[h][g]+'","message":"'+f+'","description":"'+((location&&location!=undefined&&location.href&&location.href!=undefined)?encodeURIComponent(location.href):"")+'"}');if(e&&e==1){i.send(d)}return d},stringify:function(i){if(c.JSON&&c.JSON.stringify){return JSON.stringify(i)}else{var h=typeof(i);if(h!="object"||i==null){if(h=="string"){i='"'+i+'"'}return String(i)}else{var h=typeof(i);if(h!="object"||i==null){if(h=="string"){if(i!=null&&i!=""){i='"'+i.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}else{i='"'+i+'"'}}return String(i)}else{var j,f,g=[],d=(i&&i.constructor==Array);var e=arguments.callee;for(j in i){f=i[j];h=typeof(f);if(i.hasOwnProperty(j)){if(h=="string"){if(f!=null&&f!=""){f='"'+f.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}else{f='"'+f+'"'}}else{if(h=="object"&&f!==null){f=e(f)}}g.push((d?"":'"'+j+'":')+String(f))}}return(d?"[":"{")+String(g)+(d?"]":"}")}}}}};b.prototype.Ajax={init:function(d){this.$parent=d;this.$message=d.Message},send:function(m){var i=this;try{var l=i.getXHR();var k=m.success||function(){},j=m.error||function(){};var e=m.url||"",f=m.async!=false,d=(m.method||"GET").toUpperCase(),g=m.data||null;if(d=="GET"){e+=(e.indexOf("?")==-1?"?":"&")+i.getArgs(g);g=null}else{if(d=="POST"){m.headers["content-type"]="application/json;charset=UTF-8"}}l.onreadystatechange=function(){i.readyStateChange(l,k,j)};l.open(d,e,true);i.setHeaders(l,m.headers);l.send(i.$message.stringify(g))}catch(h){i.$message.error(1,"EXH_ASC","PARSE",encodeURIComponent(h.message))}},getXHR:function(){if(c.XMLHttpRequest&&(!c.location||"file:"!=c.location.protocol||!c.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(d){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(d){}return undefined}},getArgs:function(f){var d="";if(f){if(typeof f=="string"){d=f}else{if(typeof f=="object"){var h=new Array();for(var e in f){var g=f[e];h.push(encodeURIComponent(e)+"="+encodeURIComponent(g))}d=h.join("&")}}}return d},setHeaders:function(f,e){e=e||{};for(var d in e){(e[d]&&f.setRequestHeader(d,e[d]))}},readyStateChange:function(i,h,f){var g=this;if(i.readyState==4){var d=i.status;if(d>=200&&d<300){var e=(c.JSON&&c.JSON.parse)?c.JSON.parse(i.responseText):(new Function("return "+i.responseText))();if(e&&typeof e=="object"&&e.hasOwnProperty("uri")&&e.hasOwnProperty("version")&&e.hasOwnProperty("context")&&e.hasOwnProperty("returnCode")&&e.hasOwnProperty("message")&&e.hasOwnProperty("description")){h(i.responseText)}else{f(g.$message.error(2,"EXH_ASC","FORMAT"))}}else{if(!(undefined===typeof c.navigator.onLine)&&!c.navigator.onLine){f(g.$message.error(2,"EXH_ASC","NETOFF"))}else{f(g.$message.error(2,"EXH_ASC","ERROR",encodeURIComponent(i.responseText)))}}}}};b.prototype.Cookie={init:function(d){this.$parent=d},get:function(d){var h=d+"=";var f=a.cookie.split(";");for(var e=0;e<f.length;e++){var g=f[e];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(h)==0){return g.substring(h.length,g.length)}}return undefined},set:function(f,g,h){var d="";if(h!=undefined&&h){var e=new Date();e.setTime(e.getTime()+(h*24*60*60*1000));d="; expires="+e.toUTCString()}a.cookie=f+"="+g+d+";SameSite=None;Secure;domain="+a.domain+"; path=/";a.cookie=f+"="+g+d+"; domain="+a.domain+"; path=/"},remove:function(d){this.set(d,"",-1)},convert:function(e,d){if(typeof e!="undefined"&&(typeof e=="string"||typeof e=="boolean"||typeof e=="number")){if(typeof e=="string"){return e.toString().replace(new RegExp('([""])',"g"),'\\"')}else{return e.toString()}}else{if(typeof d!="undefined"){return d}else{return""}}}};c.HyUDBWebErr_Exchange="";c.HyUDBWebSDK_Exchange=new b();c.onerror=function(f,m,e,d,i){try{var l=encodeURIComponent(f+"-"+m+"-"+e+"-"+d+"-"+i),k="300001-"+l;if(c.HyUDBWebErr_Exchange!=k){c.HyUDBWebErr_Exchange=k;var j=a.getElementsByTagName("head")[0],h=a.createElement("script");j.appendChild(h);h.src="https://udblog.huya.com/web/log/report?request="+encodeURIComponent('{"topic":"huyaudb","json":"{\\"term_type\\":\\"4\\",\\"net_type\\":2,\\"carrier_type\\":2,\\"device_id\\":\\"'+((c&&c!=undefined&&c.HyUDBWebSDK_Exchange&&c.HyUDBWebSDK_Exchange!=undefined)?c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("udb_guiddata")):"")+'\\",\\"device_name\\":\\"'+((navigator&&navigator!=undefined)?navigator.platform:"")+'\\",\\"system_info\\":\\"'+((navigator&&navigator!=undefined)?navigator.userAgent:"")+'\\",\\"appid\\":\\"0\\",\\"sdk_ver\\":\\"1.9\\",\\"local_time\\":'+(new Date().getTime())+',\\"uid\\":0,\\"uri\\":300001,\\"context\\":\\"'+((c&&c!=undefined&&c.HyUDBWebSDK_Exchange&&c.HyUDBWebSDK_Exchange!=undefined)?("JS-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("udb_guiddata"))+"-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("__yamid_new"))+"-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("guid"))):"JS-")+'\\",\\"rsp_time\\":0,\\"rescode\\":300001,\\"strategy\\":\\"\\",\\"detail\\":\\"{\\\\\\"uri\\\\\\":300001,\\\\\\"version\\\\\\":\\\\\\"1.9\\\\\\",\\\\\\"context\\\\\\":\\\\\\"'+((c&&c!=undefined&&c.HyUDBWebSDK_Exchange&&c.HyUDBWebSDK_Exchange!=undefined)?("JS-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("udb_guiddata"))+"-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("__yamid_new"))+"-"+c.HyUDBWebSDK_Exchange.Cookie.convert(c.HyUDBWebSDK_Exchange.Cookie.get("guid"))):"JS-")+'\\\\\\",\\\\\\"returnCode\\\\\\":300001,\\\\\\"message\\\\\\":\\\\\\"'+l+'\\\\\\",\\\\\\"description\\\\\\":\\\\\\"javascript script error\\\\\\",\\\\\\"data\\\\\\":{\\\\\\"page\\\\\\":\\\\\\"'+encodeURIComponent(location.href)+'\\\\\\"}}\\"}"}');j.removeChild(h)}}catch(g){}}})(window,document);