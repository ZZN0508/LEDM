var load=function(){"use strict";function e(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?bt[Yt.call(e)]||"object":typeof e}function t(t){return"function"===e(t)}function i(t){return"string"===e(t)}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return null!=e&&e===e.window}function r(t){var i=void 0;if(!t||"object"!==e(t)||t.nodeType||n(t))return!1;try{if(t.constructor&&!Ct.call(t,"constructor")&&!Ct.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(o){return!1}for(i in t);return i===undefined||Ct.call(t,i)}function s(e,t){for(var i=t.length,o=0,n=e.length;o<i;)e[n++]=t[o++];return e.length=n,e}function a(e){var t=document.createElement("tbody"),i=document.createDocumentFragment();t.innerHTML=e;for(var o=t.childNodes;o.length;){var n=o[0];1===n.nodeType&&i.appendChild(n)}return i.childNodes}function c(e){var t=St.getElementById(e);return t?[t]:[]}function l(e,t){var i=t!==undefined?t:St;if(i.getElementsByClassName)return u(i.getElementsByClassName(e));for(var o=[],n=u(i.getElementsByTagName("*")),r=0,s=n.length;r<s;r++)h(n[r],e)&&o.push(n[r]);return o}function d(e,t){return u((t||St).getElementsByTagName(e))}function h(e,t){return 1===e.nodeType&&(" "+e.className+" ").indexOf(" "+t+" ")>-1}function u(e){try{return Array.prototype.slice.call(e)}catch(n){for(var t=[],i=0,o=e.length;i<o;i++)t.push(e[i]);return t}}function p(e){return Ot[e]||(Ot[e]=e.replace(Bt,function(e,t){return t.toUpperCase()}))}function g(e,t){var i=void 0;return i=window.getComputedStyle!==undefined?window.getComputedStyle(e):e.currentStyle!==undefined?e.currentStyle:e.style,i[p(t)]}function m(e,t,i){return e.style[p(t)]=i}function f(e){return e._eid||(e._eid=Ft++)}function T(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t,i,o){var n=void 0;return t=y(t),t.ns&&(n=T(t.ns)),(Ut[f(e)]||[]).filter(function(e){return e&&(!t.type||e.type==t.type)&&(!t.ns||n.test(e.ns))&&(!o||e.selector==o)})}function b(e,t){return e.delegate&&!Wt&&e.type in jt||!!t}function y(e){var t=(""+e).split(".");return{type:t[0],ns:t.slice(1).sort().join(" ")}}function w(e){return Wt&&jt[e]||!Kt&&zt[e]||e}function C(e,t,i,o,n,r){var s=f(e),a=Ut[s]||(Ut[s]=[]);t.split(/\s/).forEach(function(t){var s=n||i,c=y(t);if(t=w(c.type),c.fn=i,c.selector=o,c.delegate=n,c.proxy=function(t){return t=k(t),t.currentTarget||(t.currentTarget=e),s.apply(e,[t])},c.i=a.length,a.push(c),"propertychange"==t&&o)return void new Nt(o,e).forEach(function(e){C(e,t,i)});e.addEventListener?e.addEventListener(t,c.proxy,b(c,r)):e.attachEvent("on"+t,c.proxy)})}function Y(e,t,i,o,n){(t||"").split(/\s/).forEach(function(t){v(e,t,i,o).forEach(function(i){var o=f(e);if(delete Ut[o][i.i],"propertychange"==(t=w(i.type))&&i.selector)return void new Nt(i.selector,e).forEach(function(e){Y(e,t,i.proxy)});e.removeEventListener?e.removeEventListener(t,i.proxy,b(i,n)):e.detachEvent("on"+t,i.proxy)})})}function k(e){return e=e||window.event,e.target||(e.target=e.srcElement),e.preventDefault||(e.preventDefault=function(){e.returnValue=!1}),e.stopPropagation||(e.stopPropagation=function(){e.cancelBubble=!0}),e}function _(e){var t={originalEvent:e};for(var i in e)qt.test(i)||e[i]===undefined||(t[i]=e[i]);return t.preventDefault=function(){e.preventDefault()},t.stopPropagation=function(){e.stopPropagation()},t}function S(){}function M(e,t){if(ri){var i=document.createElement("a");i.href=e,i.target=t||"_self",i.setAttribute("data-openurl","true"),document.body.appendChild(i),i.click()}else t?window.open(e,t):location.href=e}function R(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=[];for(var o in e)!function(o){var n=e[o];-1===t.indexOf(o)&&""!==n&&null!=n&&(kt(n)||(n=[n]),n.forEach(function(e){i.push(encodeURIComponent(o)+"="+encodeURIComponent(e))}))}(o);return i.join("&")}function E(e,t){return e+=(-1===e.indexOf("?")?"?":"&")+R(t)}function L(){}function I(e,t,i,o){"function"==typeof t?(o=i,i=t,t={}):t=t||{};var n=document.createElement("script");for(var r in t)"retry"!==r&&n.setAttribute(r,t[r]);t.crossOrigin&&(t.retry=1,delete t.crossOrigin),n.src=e;var s=document.getElementsByTagName("head")[0],a=!1;n.onload=n.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,n.onload=n.onreadystatechange=null,s.removeChild(n),i&&i())},n.onerror=function(){n.onerror=null,t.retry?(t.retry--,I(e,t,i,o)):o&&o()},s.appendChild(n)}function A(e,t,i){function o(){h.parentNode&&h.parentNode.removeChild(h),window[s]=L,u&&clearTimeout(u)}function n(){window[s]&&o()}"function"==typeof t&&(i=t,t={}),t||(t={});var r=t.prefix||"__jp",s=t.name||r+si++,a=t.param||"callback",c=null!=t.timeout?t.timeout:6e4,l=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head,h=void 0,u=void 0;return c&&(u=setTimeout(function(){o(),i&&i(new Error("è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•"))},c)),window[s]=function(e){o(),i&&i(e)},e+=(e.indexOf("?")>-1?"&":"?")+a+"="+l(s),e=e.replace("?&","?"),h=document.createElement("script"),h.src=e,d.parentNode.insertBefore(h,d),n}function P(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(!i.length)return e;var n=i.shift();return(r(n)||kt(n))&&V(e,n,!0),P.apply(undefined,[e].concat(i))}function V(e,t,i){for(var o in t)i&&(r(t[o])||kt(t[o]))?(r(t[o])&&!r(e[o])&&(e[o]={}),kt(t[o])&&!kt(e[o])&&(e[o]=[]),V(e[o],t[o],i)):t[o]!==undefined&&""!==t[o]&&(e[o]=t[o])}function x(e,t){return ai.test(e)?"email":(gi[t||"CN"]||pi).test(e)?"mobile":"string"}function N(e){return"email"===x(e)}function D(e,t){return"mobile"===x(e,t)}function $(e,t){return e===t}function B(e){return!!ui.test(e)}function O(e){return!!(ci.test(e)||li.test(e)||di.test(e))}function F(e){var t=0;return e.match(/[a-z]/g)&&t++,e.match(/[0-9]/g)&&t++,e.match(/[A-Z]/g)&&t++,e.match(/(.[^a-z0-9])/g)&&t++,e.length<6||e.length>16?t=0:O(e)&&(t=1),Math.min(t,3)}function q(e){return!!hi.test(e)}function U(e,t){return Array.isArray(e)?e.map(function(e){return U(e,t)}):mi+"//"+(t?vi:"")+e}function W(){return bi}function j(e){e&&(bi=-1===e.indexOf("http")?U(e,-1===e.indexOf("account")):e)}function H(e){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/,i=t.exec(e||window.location.href),o=i[0].split("."),n=o.length;return o[n-2]+"."+o[n-1]}function K(e){if(!(bi.indexOf(window.location.host)>-1||yi)){var t=new Image;t.onerror=function(){t.onerror=t.onload=null,e&&e(!1,bi)},t.onload=function(){t.onerror=t.onload=null,yi=!1,e&&e(!0,bi)},t.src=bi+"/static-resources/images/list_icon.png",yi=!0}}function z(){var e=window.location.hostname.match(/\.(\w+)\.(com|ai|net|tv)$/),t=e&&e[1]||"youku",i=_i[t];return i||(t="youku",i=_i[t]),{url:i,name:t}}function Q(e){var t=String(e).match(/\.(\w+)\.(com|ai|net|tv)$/),i=t&&t[1];return!(!i||!_i[i])}function G(){}function X(){return Object.assign({},ki)}function J(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Si&&0===arguments.length?Si:(Si=X(),e.regRules&&(Si.regRules=e.regRules),Z(e),"tempMobile"!==Si.template&&"tempTlsiteMobile"!==Si.template||(Si.isMobile=!0),"tempTlsite"!==Si.template&&"tempTlsiteMobile"!==Si.template||(Si.isTlsite=!0),"tempB"===Si.template&&(Si.isIku=!0),"20160317PLF000211"===Si.pid&&(Si.showSuccessPage=!0),ie(),Si)}function Z(e,t){if(Si&&e){for(var i in e)null===e[i]&&delete e[i];e.config&&e.config.__dataType?(ee(e.config),delete e.config,Z(e),ie()):(P(Si,e),t&&ie())}}function ee(e){var t=Si.isMobile;for(var i in e){if(i.indexOf("_h5")>-1){if(!t)continue}else if(t)continue;var o=te(e[i]);V(Si,o)}}function te(e){var t={};for(var i in e)P(t,e[i]);return t}function ie(){ne(),re(),oe(),Si.isHasLogin!==undefined&&(Si.mode="embedded",Si.size="mini"),kt(Si.qrBu)||(Si.qrBu=ki.qrBu),kt(Si.loginModel)||(Si.loginModel=ki.loginModel),kt(Si.regModel)||(Si.regModel=ki.regModel),Si.loginSubmitStyle&&-1===Si.loginSubmitStyle.indexOf("background-color")&&(Si.loginSubmitStyle+="background-color:"),Si.registerSubmitStyle&&-1===Si.registerSubmitStyle.indexOf("background-color")&&(Si.registerSubmitStyle+="background-color:"),kt(Si.regRules)?3===Si.regRules.length&&Si.regRules[2].indexOf("//")>-1&&(Si.regRules[3]=Si.regRules[2],Si.regRules[2]=ki.regRules[2]):Si.regRules=ki.regRules,Si.isIku&&-1===window.location.host.indexOf("account.youku.com")&&(Si.isThirdPartLogin=!1)}function oe(){var e=Si.accountDomain||"";e&&(e=e.replace(/^https?:\/\/|^\/\//i,""),j("https://"+e))}function ne(){var e=Si.themes;if(2!==e.length)return void(Si.themes=ki.themes);q(e[0])&&q(e[1])||(Si.themes=ki.themes)}function re(){var e=Si.thirdPartUrlAry;Si.isTlsite&&!Si.dtTlsiteAry&&(Si.dtTlsiteAry=["alipay","taobao","qq","weibo"],Si.isMobile||Si.dtTlsiteAry.push("wechat")),e&&e.length&&Si.isTlsite&&e.forEach(function(e){e.link+="&isCheckBind=1"});var t=(Si.isTlsite?Si.dtTlsiteAry:Si.tlsiteAry)||[];if(t=t&&kt(t)?t:t.split("|"),t.length&&e&&e.length){var i=[];t.forEach(function(t){e.forEach(function(e){if(t===e.site)return i.push(e),!0})}),Si.thirdPartUrlAry=i}}function se(e){return wi[e]||e}function ae(){try{return XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw new Error("Unable to create XHR object.")}}function ce(){}function le(e,o,n){var r=i(e)?{url:e}:e;return t(o)&&(r.callback=o),t(n)&&(r.callback=n),Object.assign({},Ii,r,o)}function de(){function e(e,t,i){m||(m=!0,o.callback(e,t,i))}function t(){clearTimeout(s);var t=new Error("è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•");return t.statusCode=0,e(t,"",u)}function i(){if(!r){clearTimeout(s);var t=1223===n.status?204:n.status,i=u,l=null,d=void 0;if(0!==t){if(d=n.responseText,"json"===o.dataType)try{d=JSON.parse(d)}catch(h){l=new Error("JSONæ•°æ®è§£æžé”™è¯¯: "+d)}i={body:d,statusCode:t,method:c,headers:n.getAllResponseHeaders(),url:a,rawRequest:n}}else l=new Error("Internal XMLHttpRequest Error");return l||o.afterSend(d),e(l,d,i)}}var o=le.apply(null,arguments),n=o.xhr||ae(),r=void 0,s=void 0,a=n.url=o.url,c=n.method=o.type.toUpperCase()||"GET",l=n.headers=o.headers||{},d=n.async=o.async,h=o.data?R(o.data):"",u={body:undefined,headers:"",statusCode:0,method:c,url:a,rawRequest:n},p=l.accept,g=l["content-type"];"json"===o.dataType&&(p||(l.accept="application/json"),"GET"!==c&&"HEAD"!==c&&(g||(l["content-type"]="application/json"))),"GET"===c?h&&(a+=(/\?/.test(a)?"&":"?")+h):"POST"===c&&(p||(l.accept="*/*"),g||(l["content-type"]="application/x-www-form-urlencoded"),h.replace(/%20/g,"+"));var m=!1;n.onreadystatechange=function(){4===n.readyState&&setTimeout(i,0)},n.onload=i,n.onerror=t,n.onprogress=ce,n.onabort=function(){r=!0},n.ontimeout=t,n.open(c,a,d,o.username,o.password),d&&o.timeout>0&&(s=setTimeout(function(){r||(r=!0,n.abort("timeout"),t())},o.timeout));for(var f in l)l.hasOwnProperty(f)&&n.setRequestHeader(f,l[f]);return o.withCredentials&&(n.withCredentials=!0),o.beforeSend(n),n.send(h||null),n}function he(e,i,o){var n=this,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},s=i.match(Ai),a=r.eventName||s&&s[1]||"";return("post"===r.methods?pe:ue)(e+i,o,function(e){return Te(e)?(t(r.errorCallback)&&r.errorCallback(e),void n.emit(a+":error",e)):t(r.responseCallback)?void r.responseCallback(e):void(e.result&&"success"===e.result?(t(r.callback)&&r.callback(r.getDataNode?e.data:e),n.emit(a+":success",r.getDataNode?e.data:e)):(t(r.errorCallback)&&r.errorCallback(e),n.emit(a+":fail",e)))})}function ue(e,i,o){var n=e;return t(i)&&(o=i,i=null),i&&(e+=(-1===e.indexOf("?")?"?":"&")+R(i)),A(e,{param:"jsonpCallback",timeout:1e4},function(e){ge(n,i,e),o(e)})}function pe(e,t,i){if(Li.isNeedRequestProxy())return Li.request(e,t,i);if(document.addEventListener){var o=de(e,{type:"POST",dataType:"json",withCredentials:!0,timeout:1e4,data:t},function(o,n){ge(e,t,o||n),i(o||n)});return function(){o.abort?o.abort():o.onabort()}}return ue(e,t,i)}function ge(e,t,i){if(window.YKLoginTracker){var o={code:2,ajaxurl:e,params:R(t),c5:fe("cna")};if(Te(i))o.msg=e+i.message,o.sampleRate=1,K(function(e,t){!1===e&&window.YKLoginTracker.log({code:12,msg:"accountåŸŸä¸å¯è®¿é—®",sampleRate:1,c1:t})});else{if(!i||!i.result||"success"===i.result)return;if(me(e))return;o.msg=e+"æŽ¥å£JSONè¿”å›žé”™è¯¯<code:"+(i.errorCode||"")+">",o.sampleRate=.01,window.JSON&&JSON.stringify&&(o.c3=JSON.stringify(i||{}))}if(window.YKLoginTracker.log(o),Vi&&window.external)try{window.external.execute("iku",'iku://|login|psp|error|json|{"url":"'+e+'","code":"'+(i.errorCode||"TIMEOUT")+'", "desc":"'+(i.errorMsg||i.message)+'"}|')}catch(n){}}}function me(e){for(var t=0,i=Pi.length;t<i;t++)if(e&&e.indexOf(Pi[t])>-1)return!0;return!1}function fe(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return i?unescape(i[2]):null}function Te(e){return e instanceof Error}function ve(e){var t=e.isMobile?Bi:Oi,i=(e.bgThemes||e.themesBgStyle||"").match(/url\((\S*)\)/);i&&i[1]&&((new Image).src=i[1]),e.useAliLoginFrame&&e.padding&&Array.isArray(e.padding)&&e.padding.length&&(e.padding[3]=e.padding[3]||e.padding[1]||e.padding[0],e.padding[2]=e.padding[2]||e.padding[0],e.padding[1]=e.padding[1]||e.padding[0],e.padding[0]-=30,e.padding[1]-=30,e.padding[2]-=30,e.padding[3]-=30),be(t(Object.assign(e,{padding:Array.isArray(e.padding)?e.padding:[],secColor:e.themesColor||e.themes[0],mainColor:e.themesDecoColor||e.themes[1]})))}function be(e){var t=document.getElementsByTagName("head")[0]||document.body,i=document.createElement("style");i.type="text/css",i.media="screen",i.styleSheet?i.styleSheet.cssText=e:i.innerHTML=e,t.appendChild(i)}function ye(e,t,i,o){I(we(e),t,i,o)}function we(e){var t=window.YT_STATIC_DOMAIN||"";return t&&-1===e.indexOf(t)&&(e=e.replace("//g.alicdn.com",t)),e}function Ce(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=J();i.callbackURL=t.msg&&t.msg.callback||i.callbackURL||o.callbackURL||o.callback||"",i.skip=i.skip||!1,o.needTaobaoAuth&&(i.callbackURL=E(i.callbackURL,{taobaoAuth:o.taobaoAuth||!1}));var n=i.callbackURL,r=i.skip;if(t&&t.msg&&e){var s=Gi.getInstance();if(s&&s.isMiniProgram&&window.my.postMessage({token:t.msg.cookieToken,type:"needLogin"}),t.msg.domains&&0!==t.msg.domains.length)Ye(e,function(t){ke(e,t,i)},function(){Ye(e,function(t){ke(e,t,i)})});else if(n){if(r)return;_e("P_j_scl","hadCheckLogin",H(n)),window.location.href=n}else _e("P_j_scl","hadCheckLogin",H()),o.loginSuccess()}}function Ye(e,t,i){var o=J();e.checkLogin({buid:o.buid,pid:o.pid},function(e){"success"===e.result?t&&t(e):i&&i()},function(){i&&i()})}function ke(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=J(),n=t.msg.tokens,r=t.msg.domains,s=r.length,a=i.callbackURL,c=i.skip,l={},d=!1,h=setTimeout(function(){h=null,d=!0},3e3);e.off("crossDomain:success crossDomain:fail crossDomain:error"),e.on("crossDomain:fail crossDomain:error",function(e){var t=l[e.siteUrl];t&&(t.times++,t.query=!1)}),e.on("crossDomain:success",function(e){var t=l[e.siteUrl];t&&(t.times++,_e("P_j_scl","hadCheckLogin",H(e.siteUrl)),clearInterval(t.timer),t.timer=null,t.state=!0)});for(var u=0;u<s;u++)!function(t){var i=n[t],s=U(r[t]);l[s]||(l[s]={times:0,timer:null,state:!1,query:!1});var a=l[s];a.timer=setInterval(function(){if(a.state||a.times>=3)return a.timer&&(clearInterval(a.timer),a.timer=null),void(a.state=!0);a.query||(e.crossDomain(s,{buid:o.buid,pid:o.pid,token:i}),a.query=!0)},100)}(u);if(c)return a&&Z({callbackURL:a}),!1;var p=setInterval(function(){for(var e=0,t=0;t<s;t++){var i=U(r[t]),n=l[i];n&&n.state&&e++}(e>=s||d)&&(clearInterval(p),clearTimeout(h),a?window.location.href=a:o.loginSuccess())},100)}function _e(e,t,i){document.cookie=e+"="+escape(t)+";domain="+i+";path=/;"}function Se(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Me(e,t){return e<<t|e>>>32-t}function Re(e,t,i,o,n,r){return Se(Me(Se(Se(t,e),Se(o,r)),n),i)}function Ee(e,t,i,o,n,r,s){return Re(t&i|~t&o,e,t,n,r,s)}function Le(e,t,i,o,n,r,s){return Re(t&o|i&~o,e,t,n,r,s)}function Ie(e,t,i,o,n,r,s){return Re(t^i^o,e,t,n,r,s)}function Ae(e,t,i,o,n,r,s){return Re(i^(t|~o),e,t,n,r,s)}function Pe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var i=void 0,o=void 0,n=void 0,r=void 0,s=void 0,a=1732584193,c=-271733879,l=-1732584194,d=271733878;for(i=0;i<e.length;i+=16)o=a,n=c,r=l,s=d,a=Ee(a,c,l,d,e[i],7,-680876936),d=Ee(d,a,c,l,e[i+1],12,-389564586),l=Ee(l,d,a,c,e[i+2],17,606105819),c=Ee(c,l,d,a,e[i+3],22,-1044525330),a=Ee(a,c,l,d,e[i+4],7,-176418897),d=Ee(d,a,c,l,e[i+5],12,1200080426),l=Ee(l,d,a,c,e[i+6],17,-1473231341),c=Ee(c,l,d,a,e[i+7],22,-45705983),a=Ee(a,c,l,d,e[i+8],7,1770035416),d=Ee(d,a,c,l,e[i+9],12,-1958414417),l=Ee(l,d,a,c,e[i+10],17,-42063),c=Ee(c,l,d,a,e[i+11],22,-1990404162),a=Ee(a,c,l,d,e[i+12],7,1804603682),d=Ee(d,a,c,l,e[i+13],12,-40341101),l=Ee(l,d,a,c,e[i+14],17,-1502002290),c=Ee(c,l,d,a,e[i+15],22,1236535329),a=Le(a,c,l,d,e[i+1],5,-165796510),d=Le(d,a,c,l,e[i+6],9,-1069501632),l=Le(l,d,a,c,e[i+11],14,643717713),c=Le(c,l,d,a,e[i],20,-373897302),a=Le(a,c,l,d,e[i+5],5,-701558691),d=Le(d,a,c,l,e[i+10],9,38016083),l=Le(l,d,a,c,e[i+15],14,-660478335),c=Le(c,l,d,a,e[i+4],20,-405537848),a=Le(a,c,l,d,e[i+9],5,568446438),d=Le(d,a,c,l,e[i+14],9,-1019803690),l=Le(l,d,a,c,e[i+3],14,-187363961),c=Le(c,l,d,a,e[i+8],20,1163531501),a=Le(a,c,l,d,e[i+13],5,-1444681467),d=Le(d,a,c,l,e[i+2],9,-51403784),l=Le(l,d,a,c,e[i+7],14,1735328473),c=Le(c,l,d,a,e[i+12],20,-1926607734),a=Ie(a,c,l,d,e[i+5],4,-378558),d=Ie(d,a,c,l,e[i+8],11,-2022574463),l=Ie(l,d,a,c,e[i+11],16,1839030562),c=Ie(c,l,d,a,e[i+14],23,-35309556),a=Ie(a,c,l,d,e[i+1],4,-1530992060),d=Ie(d,a,c,l,e[i+4],11,1272893353),l=Ie(l,d,a,c,e[i+7],16,-155497632),c=Ie(c,l,d,a,e[i+10],23,-1094730640),a=Ie(a,c,l,d,e[i+13],4,681279174),d=Ie(d,a,c,l,e[i],11,-358537222),l=Ie(l,d,a,c,e[i+3],16,-722521979),c=Ie(c,l,d,a,e[i+6],23,76029189),a=Ie(a,c,l,d,e[i+9],4,-640364487),d=Ie(d,a,c,l,e[i+12],11,-421815835),l=Ie(l,d,a,c,e[i+15],16,530742520),c=Ie(c,l,d,a,e[i+2],23,-995338651),a=Ae(a,c,l,d,e[i],6,-198630844),d=Ae(d,a,c,l,e[i+7],10,1126891415),l=Ae(l,d,a,c,e[i+14],15,-1416354905),c=Ae(c,l,d,a,e[i+5],21,-57434055),a=Ae(a,c,l,d,e[i+12],6,1700485571),d=Ae(d,a,c,l,e[i+3],10,-1894986606),l=Ae(l,d,a,c,e[i+10],15,-1051523),c=Ae(c,l,d,a,e[i+1],21,-2054922799),a=Ae(a,c,l,d,e[i+8],6,1873313359),d=Ae(d,a,c,l,e[i+15],10,-30611744),l=Ae(l,d,a,c,e[i+6],15,-1560198380),c=Ae(c,l,d,a,e[i+13],21,1309151649),a=Ae(a,c,l,d,e[i+4],6,-145523070),d=Ae(d,a,c,l,e[i+11],10,-1120210379),l=Ae(l,d,a,c,e[i+2],15,718787259),c=Ae(c,l,d,a,e[i+9],21,-343485551),a=Se(a,o),c=Se(c,n),l=Se(l,r),d=Se(d,s);return[a,c,l,d]}function Ve(e){var t=void 0,i="",o=32*e.length;for(t=0;t<o;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function xe(e){var t=void 0,i=[];for(i[(e.length>>2)-1]=undefined,t=0;t<i.length;t+=1)i[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function Ne(e){return Ve(Pe(xe(e),8*e.length))}function De(e,t){var i=void 0,o=xe(e),n=[],r=[],s=void 0;for(n[15]=r[15]=undefined,o.length>16&&(o=Pe(o,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^o[i],r[i]=1549556828^o[i];return s=Pe(n.concat(xe(t)),512+8*t.length),Ve(Pe(r.concat(s),640))}function $e(e){var t="0123456789abcdef",i="",o=void 0,n=void 0;for(n=0;n<e.length;n+=1)o=e.charCodeAt(n),i+=t.charAt(o>>>4&15)+t.charAt(15&o);return i}function Be(e){return unescape(encodeURIComponent(e))}function Oe(e){return Ne(Be(e))}function Fe(e){return $e(Oe(e))}function qe(e,t){return De(Be(e),Be(t))}function Ue(e,t){return $e(qe(e,t))}function We(e,t,i){return t?i?qe(t,e):Ue(t,e):i?Oe(e):Fe(e)}function je(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return i?unescape(i[2]):null}function He(e,t,i){var o=[];return"normal"===e?o=[{name:"YT-ytaccount",rules:"required",errorMsg:t.errorTips.account},{name:"YT-ytpassword",rules:"required",errorMsg:t.errorTips.password}]:"mobile"===e&&(o=[{name:"YT-mAccount",rules:i?"required":"required|valid_mobile",errorMsg:t.errorTips.mobile},{name:"YT-mPassword",rules:"callback_sms_sent|required",errorMsg:{sms_sent:t.hasMobile?t.errorTips.smsCode.noGet:t.errorTips.smsCode.noGetPwd,required:t.hasMobile?t.errorTips.validate.required:t.errorTips.smsCode.smsPwd}}]),o}function Ke(e,t){var i=[];return"email"===e?i=[{name:"YT-passport",rules:"required|valid_email",errorMsg:t.errorTips.account},{name:"YT-regPassword",rules:"required|cant_matches[YT-passport]|cant_match_email_account[YT-passport]|min_length[6]|max_length[16]|valid_space_char|valid_illegal_char|valid_pwdStrong|valid_pwd_n_s_spe",errorMsg:t.errorTips.password},{name:"YT-repeatPwd",rules:"required|matches[YT-regPassword]",errorMsg:t.errorTips.repeatPassword},{name:"YT-regPhone",rules:"required|!valid_mobile",errorMsg:t.errorTips.mobile}]:"mobile"===e&&(i=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:t.errorTips.mobile},{name:"YT-mRegPassword",rules:"required|min_length[6]|max_length[16]|valid_space_char|valid_illegal_char|valid_pwdStrong|valid_pwd_n_s_spe",errorMsg:t.errorTips.password},{name:"YT-mRepeatPwd",rules:"required|matches[YT-mRegPassword]",errorMsg:t.errorTips.repeatPassword}]),i}function ze(e,t){var i=Ke(e,t);return"email"===e?i.push({name:"YT-eValidateCode",rules:"required",errorMsg:t.errorTips.validate}):"mobile"===e&&i.push({name:"YT-mValidateCode",rules:"required",errorMsg:t.errorTips.validate}),i}function Qe(e){var t=[{name:"YT-rPassword",rules:"required",errorMsg:{required:e.errorTips.smsCode.smsPwd}}];return e.riskData.hasMobile||t.push({name:"YT-rAccount",rules:"required|valid_mobile",errorMsg:e.errorTips.mobile}),t}function Ge(e){window.YKLoginTracker&&window.YKLoginTracker.log({code:13,msg:"éªŒè¯æ»‘å—å¼‚å¸¸",sampleRate:1,c1:e||""})}function Xe(e){return e.replace(/([^\x00-\xff])/g,"$1 ").length}function Je(e,t,i){return e=e||"",i===undefined&&(i=".."),Xe(e)<=t?e:e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1")+i}function Ze(e,t){var i="",o=e<0,n=String(Math.abs(e));return n.length<t&&(i=new Array(t-n.length+1).join("0")),(o?"-":"")+i+n}function et(e,t){return t=t.length,e=e||0,1===t?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function tt(e,t){return t=t||",",String(e).replace(/(\d)(?=(\d{3})+($|\.))/g,"$1"+t)}function it(e){e=parseInt(e);var t=void 0;if(e>=1e8)t=(e/1e8).toFixed(2)+"äº¿";else if(e>=1e4){var i=e/1e4,o=parseInt(i).toString(),n=o.length;n<4&&i!==o&&(o=i.toFixed(1===n?2:4-n)),t=tt(o)+"ä¸‡"}else t=tt(e);return t}function ot(e){e=parseInt(e);var t=-1;do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+["KB","MB","GB","TB"][t]}function nt(e,t,i){return Math.min(Math.max(e,t||0),i||100)}function rt(e,t){return t===undefined?t=new Date:o(t)?t=new Date(parseInt(t,10)):i(t)&&(t=new Date(t.replace(/-/g,"/"))),e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return Lo(t.getFullYear(),e);case"M":return Lo(t.getMonth()+1,e);case"D":return Lo(t.getDate(),e);case"w":return t.getDay()+1;case"h":return Lo(t.getHours(),e);case"m":return Lo(t.getMinutes(),e);case"s":return Lo(t.getSeconds(),e)}})}function st(e,t,i){o(e)&&(e=new Date(parseInt(e,10))),o(t)&&(t=new Date(parseInt(t,10))),e===undefined&&(e=new Date),t===undefined&&(t=new Date),i||(i="YYYYå¹´MMæœˆDDæ—¥");var n=new Date(t.toDateString()),r=(+t-+e)/1e3,s=(+t-+n)/1e3;return r<=60?"åˆšåˆš":r<=3600?Math.floor(r/60)+"åˆ†é’Ÿå‰":r<=s?Math.floor(r/3600)+"å°æ—¶å‰":r<=s+Io?"æ˜¨å¤©":r<=s+2*Io?"å‰å¤©":r<=s+25*Io?Math.floor(r/Io)+"å¤©å‰":rt(i,e)}function at(e,t){var i=0;e=String(e).split(":");for(var o=0,n=e.length;o<n;o++)i+=parseInt(e[o],10)*Math.pow(60,n-o-1);return t?1e3*i:i}function ct(e,t){var i=[],o=void 0,n=void 0;return t===undefined||t?(o=parseInt(e/3600),n=parseInt(e%3600/60)):n=parseInt(e/60),e%=60,n<10&&(n="0"+n),e<10&&(e="0"+e),i=[n,e],o>0&&i.unshift(o),i.join(":")}function lt(t,i,o){i="date"===e(i)?+i:parseInt(i);var n=new Date(i),r=n.getHours();return n>432e5&&(r+=Math.floor(n/432e5)),o&&(t=t.replace(/(\w)\1+/g,"$1")),t.replace(/([hms])\1*/g,function(e){switch(e.charAt()){case"h":return Lo(r-8,e);case"m":var i=60*(/h+/.test(t)?0:r-8)+n.getMinutes();return Lo(i,e);case"s":return Lo(n.getSeconds(),e)}})}function dt(e,t){return e<36e5?this.formatTime("mm:ss",e,t):this.formatTime("hh:mm:ss",e,t)}function ht(e){var t=function(t){t?Q(t.origin)&&e(t):e(t)};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}var ut=Array.prototype,pt=ut.slice,gt=Object,mt=gt.prototype,ft=String.prototype,Tt=Function.prototype,vt=function(){};window.console||(window.console={log:vt,error:vt}),ft.trim||(ft.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),ut.filter||(ut.filter=function(e,t){for(var i=[],o=0,n=this.length;o<n;o++)o in this&&e.call(t,this[o],o,this)&&i.push(this[o]);return i}),ut.forEach||(ut.forEach=function(e,t){for(var i=0,o=this.length;i<o;i++)i in this&&e.call(t,this[i],i,this)}),ut.some||(ut.some=function(e,t){for(var i=0,o=this.length;i<o;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1}),ut.map||(ut.map=function(e,t){for(var i=0,o=this.length,n=new Array(o);i<o;i++)i in this&&(n[i]=e.call(t,this[i],i,this));return n}),ut.indexOf||(ut.indexOf=function(e,t){var i=this.length;for(t=parseInt(t)||0,t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===e)return t;return-1}),Array.from||(Array.from=function(){return pt.call(arguments)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===mt.toString.call(e)}),Date.now||(Date.now=function(){return+new Date}),gt.keys||(gt.keys=function(e){var t=[],i=void 0;for(i in e)mt.hasOwnProperty.call(e,i)&&t.push(i);return t}),gt.create||(gt.create=function(e){function t(){}return t.prototype=e,new t}),gt.assign||(gt.assign=function(e){e=gt(e);for(var t=arguments.length,i=1;i<t;i++){var o=arguments[i];for(var n in o)gt.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}),Tt.bind||(Tt.bind=function(e){var t=pt.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o?this:e||window,t.concat(pt.call(arguments)))};return o.prototype=this.prototype,n.prototype=new o,n});var bt={},yt="Boolean Number String Function Array Date RegExp Object".split(" "),wt=Object.prototype,Ct=wt.hasOwnProperty,Yt=wt.toString;yt.forEach(function(e){bt["[object "+e+"]"]=e.toLowerCase()});var kt=Array.isArray,_t=/^\s*(<[\w\W]+>)[^>]*$/,St=window.document,Mt=[],Rt=Mt.splice,Et=Mt.indexOf,Lt=Mt.forEach,It=void 0,At=void 0;document.querySelectorAll?It=At=function(e,t){return(t||St).querySelectorAll(e)}:(It=function(e,t){for(var i=e.split(" "),o=[t],n=0,r=i.length;n<r;n++){(function(e,t){if(""===i[e].trim())return"continue";var n=[];o.forEach(function(t){n=n.concat(At(i[e],t))}),o=n})(n)}return o},At=function(e,t){var i=e.substring(1),o=void 0;switch(e.charAt(0)){case"#":o=c(i);break;case".":o=l(i,t);break;default:o=d(e,t)}return o});var Pt=function(e,t){if(this.length=0,!e)return this;if(this.selector=e,this.context=t||St,"string"==typeof e){var i=void 0,o=_t.exec(e);i=o&&o[1]?a(o[1]):-1!==e.indexOf(" ")?It(e,this.context):At(e,this.context),s(this,u(i))}else if(e.nodeType)return this.context=this[0]=e,this.length=1,this};Pt.prototype.splice=Rt,Pt.prototype.indexOf=Et,Pt.prototype.forEach=Lt;var Vt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},xt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Nt=function(e){function i(){return xt(this,e.apply(this,arguments))}return Vt(i,e),i.prototype.get=function(e){return this[e]||null},i.prototype.pushStack=function(e){var t=s(new i,e);return t.prevObject=this,t.context=this.context,t},i.prototype.eq=function(e){var t=[];return this[e]&&t.push(this[e]),this.pushStack(t)},i.prototype.find=function(e){for(var t=[],i=0,o=this.length;i<o;i++)s(t,u(It(e,this[i])));return this.pushStack(t)},i.prototype.hasClass=function(e){for(var t=0,i=this.length;t<i;t++)if(h(this[t],e))return!0;return!1},i.prototype.addClass=function(e){return this.forEach(function(t){new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)||(t.className+=" "+e)}),this},i.prototype.removeClass=function(e){return this.forEach(function(t){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");i.test(t.className)&&(t.className=t.className.replace(i," ").trim())}),this},i.prototype.attr=function(e,t){for(var i=0,o=this.length;i<o;i++){if(t===undefined){if("object"==typeof e){for(var n in e)this.attr(n,e[n]);return this}return this[i].getAttribute(e)}"id"==e?this[i].id=t:"class"==e||"className"==e?this[i].className=t:this[i].setAttribute(e,t)}if(0!=this.length||t!=undefined)return this},i.prototype.removeAttr=function(e){for(var t=0,i=this.length;t<i;t++)this[t].removeAttribute(e);return this},i.prototype.css=function(e,t){for(var i=0,o=this.length;i<o;i++)if("object"==typeof e)for(var n in e)this.css(n,e[n]);else{if(t===undefined)return g(this[i],e);m(this[i],e,t)}return this},i.prototype.val=function(e){for(var t=0,i=this.length;t<i;t++){if(e===undefined)return this[t].value;this[t].value=e}if(e!=undefined||0!=this.length)return this},i.prototype.html=function(e){for(var t=0,i=this.length;t<i;t++){if(e===undefined)return this[t].innerHTML;"string"==typeof e?this[t].innerHTML=e:this[t].appendChild(e)}return e==undefined&&0==this.length?null:this},i.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e].parentNode.removeChild(this[e]);return this.length=0,this},i.prototype.append=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(e){1===e.nodeType&&t.forEach(function(t,i){t.appendChild(0==i?e:e.cloneNode(!0))})}),this},i.prototype.prepend=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(e){1===e.nodeType&&t.forEach(function(t,i){t.insertBefore(0==i?e:e.cloneNode(!0),t.firstChild)})}),this},i.prototype.replaceWith=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(e){1===e.nodeType&&t.forEach(function(t,i){t.parentNode&&t.parentNode.replaceChild(0==i?e:e.cloneNode(!0),t)})}),this},i.prototype.show=function(){for(var e=0,t=this.length;e<t;e++)this.eq(e).css("display","block");return this},i.prototype.hide=function(){for(var e=0,t=this.length;e<t;e++)this.eq(e).css("display","none");return this},i.prototype.on=function(e,o,n){return!t(n)&&t(o)&&(n=o,o=""),this.forEach(function(t){var r=void 0;o&&(r=function(e){var r=new i(t).find(o),s=void 0;if(r.indexOf(e.target)>-1)s=e.target;else for(var a=e.target;a&&t!=a;)if(a=a.parentNode,r.indexOf(a)>-1){s=a;break}if(s){var c=_(e);return c.currentTarget=s,n.apply(s,[c])}}),C(t,e,n,o,r)}),this},i.prototype.off=function(e,i,o){return!t(o)&&t(i)&&(o=i,i=""),this.forEach(function(t,n){Y(t,e,o,i)}),this},i}(Pt),Dt=window.document,$t=Dt.documentElement,Bt=/-(\w)/g,Ot={"float":"cssFloat"in $t.style?"cssFloat":"styleFloat"},Ft=1,qt=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,Ut={},Wt="onfocusin"in document,jt={focus:"focusin",blur:"focusout"},Ht=document.createElement("input"),Kt="oninput"in Ht,zt={input:"propertychange"};Ht=null,"focus blur load resize scroll unload click error mousedown mouseup mousemove mouseover mouseout change input select keydown keypress keyup".split(" ").forEach(function(e){Nt.prototype[e]=function(t){return this.on(e,t)}});var Qt=function(e,t){return new Nt(e,t)},Gt=/\s+/;S.prototype.on=function(e,t,i){var o,n,r;if(!t)return this;for(o=this.__events||(this.__events={}),e=e.split(Gt);n=e.shift();)r=o[n]||(o[n]=[]),r.push(t,i);return this},S.prototype.once=function(e,t,i){var o,n,r=this;if(!t)return this;for(e=e.split(Gt);o=e.shift();)!function(e){n=function(){S.prototype.off.apply(r,[e]),t.apply(i||this,arguments)},S.prototype.on.apply(r,[e,n,i])}(o);return this},S.prototype.off=function(e,t,i){var o,n,r,s;if(!(o=this.__events))return this
;if(!(e||t||i))return delete this.__events,this;for(e=e?e.split(Gt):Object.keys(o);n=e.shift();)if(r=o[n])if(t||i)for(s=r.length-2;s>=0;s-=2)t&&r[s]!==t||i&&r[s+1]!==i||r.splice(s,2);else delete o[n];return this},S.prototype.emit=function(e){var t,i,o,n,r,s,a,c;if(!(t=this.__events))return this;for(e=e.split(Gt),a=arguments.length>1?[].slice.call(arguments,1):[];i=e.shift();){if((o=t.all)&&(o=o.slice()),(n=t[i])&&(n=n.slice()),n)for(r=0,s=n.length;r<s;r+=2)n[r].apply(n[r+1]||this,a);if(o)for(c=[i].concat(a),r=0,s=o.length;r<s;r+=2)o[r].apply(o[r+1]||this,c)}return this};var Xt=0,Jt=["el","id","attrs","className","tagName","model","delegate"],Zt=/^(\S+)\s*(.*)$/,ei=function(e){function i(t){var i=arguments,o=xt(this,e.call(this));return o.tagName="div",o.delegate=null,o.clsid=Xt++,o._configure(t||{}),o.init.apply(o,arguments),o._ensureElement(),o.created.apply(o,arguments),o.delegateEvents(),setTimeout(function(){o.mounted.apply(o,i),o.callDelegateFunc("viewDidLoad")},0),o}return Vt(i,e),i.prototype.init=function(){},i.prototype.created=function(){},i.prototype.mounted=function(){},i.prototype.render=function(){return this},i.prototype.$=function(){return Qt.apply(this,arguments)},i.prototype.find=function(e){return this.$el.find(e)},i.prototype.remove=function(){this.$el.remove(),this.undelegateEvents(),this.delegate=null,this.off()},i.prototype.create=function(e,t,i){var o=document.createElement(e);return t&&Qt(o).attr(t),i&&Qt(o).html(i),o},i.prototype.setElement=function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof Pt?e:Qt(e),this.el=this.$el.get(0),!1!==t&&this.delegateEvents(),this},i.prototype.clearTimer=function(){for(var e=arguments,t=0,i=e.length;t<i;t++){var o=e[t];o&&(clearTimeout(o),clearInterval(o))}return null},i.prototype.delegateEvents=function(e,i){var o=e||(this.events&&t(this.events)?this.events():this.events);if(o){e||this.undelegateEvents();for(var n in o){var r=o[n];if(t(r)||(r=i&&this.delegate?this.delegate[o[n]]:this[o[n]]),r){var s=n.match(Zt),a=s[1],c=s[2];r=r.bind(i&&this.delegate||this),a+=".delegateEvents"+this.clsid,""===c?this.$el.on(a,r):this.$el.on(a,c,r)}}return this}},i.prototype.undelegateEvents=function(e,t){return this.$el.off((e||"")+".delegateEvents"+this.clsid,t),this},i.prototype.callDelegateFunc=function(e){if(e&&this.delegate&&t(this.delegate[e])){var i=arguments.length>1?[].slice.call(arguments,1):[];return this.delegate[e].apply(this.delegate,i)}},i.prototype._configure=function(e){this.options&&(e=Object.assign({},this.options,e));for(var t=0,i=Jt.length;t<i;t++){var o=Jt[t];e[o]&&(this[o]=e[o])}this.options=e},i.prototype._ensureElement=function(){if(this.el||this.options.el)this.setElement(this.el||this.options.el,!1);else{var e=this.attrs||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.create(this.tagName,e),!1)}},i}(S),ti=0,ii=["view","model","parentViewController"],oi=function(e){function i(t){var i=xt(this,e.call(this));return i.clsid=ti++,i._configure(t||{}),i.init.apply(i,arguments),i.bindActions(),i}return Vt(i,e),i.prototype.init=function(){},i.prototype.viewDidLoad=function(){},i.prototype.destory=function(){this.view&&(this.view.remove(),this.view.delegate=null,this.view=null),this.parentViewController&&(this.parentViewController=null),this.statDelegate&&(this.statDelegate=null)},i.prototype.bindActions=function(e){e===undefined&&(e=this.view),e&&e.delegate&&this.Actions&&e.delegateEvents(this.Actions(),!0)},i.prototype.safeCallFunc=function(e){if(e&&t(this[e])){var i=arguments.length>1?[].slice.call(arguments,1):[];return this[e].apply(this,i)}},i.prototype._sendStat=function(){this.statDelegate&&t(this.statDelegate.send)&&this.statDelegate.send.apply(this.statDelegate,arguments)},i.prototype._configure=function(e){this.options&&(e=Object.assign({},this.options,e));for(var t=0,i=ii.length;t<i;t++){var o=ii[t];e[o]&&(this[o]=e[o])}this.options=e},i}(S),ni=/(msie) ([\w.]+)/.exec(navigator.userAgent)||[],ri=ni[1]||"",si=0,ai=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]{1,4}$/,ci=/^\d+$/,li=/^[A-Za-z]+$/,di=/^\W+$/,hi=/^[0-9a-fA-F]{6}$/,ui=/^[\w~!@#$%^&*-+=\[\]{}|\\;:'"\/?.,]{6,16}$/,pi=/^\d{7,11}$/,gi={CN:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/},mi="https:",fi=window.location.host.match(/\.((youku|tudou|laifeng|soku|jingguan)\.(com|ai))$/),Ti=fi&&fi[1]||"youku.com",vi="account.",bi=U(Ti,!0),yi=!1,wi={alipay:"æ”¯ä»˜å®",taobao:"æ·˜å®",wechat:"å¾®ä¿¡",qzone:"QQ",qq:"QQ",weibo:"å¾®åš",sina:"å¾®åš"},Ci={login:{account:"æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·",password:"ç™»å½•å¯†ç "},reg:{email:"é‚®ç®±åœ°å€",account:"æ‰‹æœºå·ç ",mobile:"æ‰‹æœºå·ç ï¼ˆå¯ç”¨äºŽæ‰¾å›žå¯†ç ï¼‰",password:"å¯†ç (6-16ä½å­—æ¯ã€æ•°å­—å’Œç¬¦å·)",repeatPassword:"ç¡®è®¤å¯†ç ",validate:"éªŒè¯ç "}},Yi={account:{required:"è¯·è¾“å…¥è´¦å·",valid_mobile:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",reg_email:"è¯·è¾“å…¥é‚®ç®±åœ°å€",valid_email:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",notExist:"ç”¨æˆ·ä¸å­˜åœ¨",exist:'è´¦å·å·²å­˜åœ¨ï¼Œè¯·ç›´æŽ¥<a href="javascript:;" class="YT-existToLogin" id="YT-existToLogin">ç™»å½•</a>',check_passport:"è¯·è¾“å…¥æ­£ç¡®çš„ç»‘å®šè´¦å·",not_exist_mobile:'è¯¥æ‰‹æœºå·æœªæ³¨å†Œï¼Œå¯ä½¿ç”¨<a href="javascript:;" class="YT-existToLogin" id="YT-toMLogin">æ‰‹æœºå¿«æ·ç™»å½•</a>',auth_expired:'é¡µé¢è¿‡æœŸäº†å“¦ï¼Œè¯·é‡æ–°<a href="//account.youku.com">ç™»å½•</a>'},password:{required:"è¯·è¾“å…¥å¯†ç ",min_length:"å¯†ç ä½æ•°å¿…é¡»åœ¨6-16ä½ä¹‹é—´",max_Length:"å¯†ç ä½æ•°å¿…é¡»åœ¨6-16ä½ä¹‹é—´",valid_pwdStrong:"å¯†ç å¿…é¡»ç”±å­—æ¯ã€æ•°å­—å’Œç¬¦å·ç»„æˆ",valid_pwd_n_s_spe:"å¯†ç ä¸èƒ½ä¸ºçº¯æ•°å­—ã€çº¯å­—æ¯æˆ–çº¯å­—ç¬¦",valid_illegal_char:"å¯†ç ä¸æ”¯æŒæ‹¬å·ã€å¼•å·ï¼Œè¯·æ›´æ¢",valid_space_char:"å¯†ç ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¯·æ›´æ¢",is_pwd_sick:"è¯¥å¯†ç å®‰å…¨æ€§è¾ƒä½Žï¼Œè¯·è®¾ç½®æ›´å¤æ‚å¯†ç ",cant_match_email_account:"å¯†ç ä¸èƒ½å’Œé‚®ç®±å‰ç¼€ç›¸åŒ",cant_matches:"å¯†ç ä¸èƒ½å’Œç™»å½•åç›¸åŒ"},mobile:{required:"è¯·è¾“å…¥æ‰‹æœºå·ç ",valid_mobile:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç "},repeatPassword:{required:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",matches:"ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´"},validate:{required:"è¯·è¾“å…¥éªŒè¯ç "},smsCode:{noGet:"è¯·å…ˆèŽ·å–æ‰‹æœºéªŒè¯ç ",noGetPwd:"è¯·å…ˆèŽ·å–åŠ¨æ€å¯†ç ",smsPwd:"è¯·è¾“å…¥åŠ¨æ€å¯†ç "},captcha:{required:"è¯·è¾“å…¥å›¾ç‰‡éªŒè¯ç ",error:"å›¾ç‰‡éªŒè¯ç ä¸æ­£ç¡®"},sliderCaptcha:{required:"è¯·æ‹–åŠ¨æ»‘å—ï¼Œå®ŒæˆéªŒè¯",error:"æ»‘å—éªŒè¯ä¸æ­£ç¡®"},errorCode:{defaults:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽå†è¯•",MOBILE_CODE_ERROR:"æ‰‹æœºéªŒè¯ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥",MOBILE_ALREADY_EXIST:"æ‚¨å·²æ³¨å†Œè¿‡å•¦",system_error:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽå†è¯•",NEED_CAPTCHA:"éœ€è¦éªŒè¯ç ",CAPTCHA_ERROR:"å›¾ç‰‡éªŒè¯ç ä¸æ­£ç¡®",CAPTCHA_TIMEOUT:"å›¾ç‰‡éªŒè¯ç è¶…æ—¶ï¼Œè¯·é‡æ–°è¾“å…¥",timeout:"ç™»å½•è¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•2",loginTimeout:"ç™»å½•è¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•",regTimeout:"æ³¨å†Œè¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•"}},ki={mode:"popup",size:"normal",isMobile:!1,isIku:!1,isTlsite:!1,template:"tempA",needHideTitle:"",themes:["2692ff","ffbec9"],bgThemes:"",themesBgStyle:"#fff",fontColor:"#333",linkColor:"#333",callbackURL:"",frameID:"",from:"",clientId:"",loginModel:["mobile","normal"],loginTitleWord:"ç™»å½•",needHideRegister:"",passportInputWord:"æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·",loginSubmitWord:"",loginSubmitStyle:"",changePsdName:"",changePsdLink:"http://id.youku.com/resetPwdView.htm",isQRlogin:!0,qrMode:0,qrMsg:"è¯·ä½¿ç”¨ä¼˜é…·APPæ‰«ç ç™»å½•",isThirdPartLogin:!0,tlsiteAry:"",qrBu:["yk",60,"true"],registerTitleWord:"æ³¨å†Œ",registerSubmitWord:"",registerSubmitStyle:"",regModel:["mobile"],regShowType:"in",regRules:["ç”¨æˆ·åè®®","http://mapp.youku.com/service/agreement","éšç§æ”¿ç­–","//account.youku.com/privacypolicy.html"],checkNoLogin:G,loginSuccess:G,closeCallback:G,rememberMe:!0,accountDomain:"",loginCountry:{},placeholders:Ci,errorTips:Yi},_i={youku:"cnpassport.youku.com",laifeng:"cnpassport.laifeng.com",jingguan:"cnpassport.jingguan.ai",soku:"cnpassport.soku.com",tudou:"cnpassport.tudou.com",wasu:"passport.cp12.wasu.tv",cibntv:"passport.cp12.ott.cibntv.net",taobao:"market.m.taobao.com"},Si=void 0,Mi=0,Ri=void 0,Ei=[],Li=function(e){function t(t){var i=xt(this,e.call(this));return i.init(t),i}return Vt(t,e),t.prototype.init=function(e){if(Ri)return void this.loadFrame(e);var t=this.proxy=document.createElement("iframe");t.id="YKLoginProxyFrame",t.frameBorder=0,t.style.width="0",t.style.height="0",this.loadFrame(e),this.addListener(this.handleMessage=this.handleMessage.bind(this)),document.body.appendChild(t)},t.prototype.loadFrame=function(e){Ei=[],this.proxy.src=e+"/login/proxy.htm"},t.prototype.addListener=function(e){var t=function(t){t?Q(t.origin)&&e(t):e(t)};window.addEventListener?(this._messageCallback=t,window.addEventListener("message",t,!1)):window.attachEvent&&window.attachEvent("onmessage",t)},t.prototype.removeListener=function(){window.removeEventListener?window.removeEventListener("message",this._messageCallback,!1):window.detachEvent&&window.detachEvent("onmessage",this._messageCallback),this._messageCallback=null},t.prototype.ready=function(e){e&&(Ei?Ei.push(e):e())},t.prototype.handleMessage=function(e){var t=void 0;try{t=JSON.parse(decodeURIComponent(e.data))}catch(i){t=r(e.data)?e.data:{}}switch(this.origin=e.origin,t.name){case"x-ready":this.handleReady();break;case"x-response":this.emit("response",t.data,t.id)}},t.prototype.handleReady=function(){for(;Ei&&Ei.length;){var e=Ei.shift();e&&e()}Ei=null},t.prototype.request=function(e,t){var i={name:"x-request",requestID:"x-request-"+Mi++,requestURL:e,data:t};return this.proxy.contentWindow.postMessage(JSON.stringify(i),this.origin),i.requestID},t.request=function(e,t,i){return Ri&&Ri.ready(function(){var o=Ri.request(e,t);Ri.once("response",function(e,t){o===t&&i&&i(e)})}),function(){Ri&&Ri.off("response")}},t.create=function(e){return Ri?Ri.loadFrame(e):Ri=new t(e),Ri},t.isNeedRequestProxy=function(){return!!window.XDomainRequest},t}(S),Ii={url:"",type:"get",data:null,dataType:"json",async:!0,withCredentials:!1,headers:{},timeout:0,username:null,password:null,callback:ce,beforeSend:ce,afterSend:ce},Ai=/\/?(\w+)\.?\w*$/,Pi=["qrcode/loginByCode.json"],Vi=navigator.userAgent.indexOf("IKUCID/IKU")>-1,xi=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.getFormToken=function(e,t,i){return he.call(this,W(),"/refreshFormToken.json",e,{eventName:"getFormToken",getDataNode:!0,callback:t,errorCallback:i})},t.prototype.getConfig=function(e){return he.call(this,W(),"/getConfig.json",e,{getDataNode:!0})},t.prototype.getVerifyIdentityModel=function(e){return he.call(this,W(),"/getVerifyIdentityModel.json",e,{getDataNode:!0})},t.prototype.checkBindMobile=function(e){return he.call(this,W(),"/passport/checkBindMobile.htm",e)},t.prototype.thirdPartyLogin=function(e){return he.call(this,W(),"/tlsite/thirdparty_account_login.json",e,{eventName:"thirdPartyLogin"})},t.prototype.thirdPartyAjaxCallback=function(e){return he.call(this,W(),"/thirdparty/ajax_callback.json",e,{eventName:"thirdPartyAjaxCallback",getDataNode:!0})},t.prototype.checkPasswordValid=function(e){return e=Object.assign({bizType:"register"},e),he.call(this,W(),"/passport/isPasswordValid.json",e,{eventName:"checkPasswordValid"})},t.prototype.thirdpartyBind=function(e){return he.call(this,W(),"/thirdparty/bind.json",e,{eventName:"thirdpartyBind"})},t.prototype.recomLoginConfirm=function(e){return he.call(this,W(),"/thirdparty/loginConfirm.json",e,{eventName:"recomLoginConfirm"})},t.prototype.recomBindExchange=function(){return he.call(this,W(),"/thirdparty/bindExchange.json",{},{eventName:"recomBindExchange"})},t.prototype.recommendMergeUser=function(e){return he.call(this,W(),"/recommendMergeUser.json",e)},t.prototype.mergeUser=function(e){return he.call(this,W(),"/mergeUser.json",e)},t.prototype.loginConfirm=function(e,t){var i=void 0,o="get";switch(t||""){case"pre_bind_exchange":i="/tlsite/preFromBindExchange.json";break;case"tlsite_recommend":i="/tlsite/recommend_account_login.json";break;case"tlsite_youku":i="/tlsite/youku_account_login.json";break;case"verify_login":i="/passport/verifyIdentityAndLogin.htm";break;case"bind_login":i="/passport/bindMobileAndLogin.htm";break;default:i="/login/confirm.json",o="post"}return he.call(this,W(),i,e,{methods:o,eventName:"loginConfirm"})},t.prototype.registerConfirm=function(e,t){var i="/register/confirm.json",o="post";return t&&t.alipay&&(i="/tlsite/registerAndBindAlipay.json",o="get"),he.call(this,W(),i,e,{methods:o,eventName:"registerConfirm"})},t.prototype.confirmBindExchange=function(e){return he.call(this,W(),"/tlsite/confirmBindExchange.json",e)},t.prototype.confirmTlsiteAuth=function(e){return he.call(this,W(),"/tlsite/confirmTlsiteAuth.json",e)},t.prototype.checkLogin=function(e,t,i){var o=W();return e.accountDomain&&(o=e.accountDomain,delete e.accountDomain),he.call(this,o,"/login/checkLogin.json",e,{responseCallback:t,errorCallback:i})},t.prototype.checkCodeStatus=function(e,t,i){var o=W();return e.accountDomain&&(o=e.accountDomain,delete e.accountDomain),he.call(this,o,"/qrcode/checkCodeStatus.json",e,{responseCallback:t,errorCallback:i})},t.prototype.checkCaptcha=function(e){return he.call(this,W(),"/passport/checkCaptcha.json",e)},t.prototype.getCaptchaImageURL=function(e){return e=Object.assign({bizType:"login",time:+new Date},e),W()+"/passport/captcha.htm?"+R(e)},t.prototype.sendMobileCode=function(e){return he.call(this,W(),"/passport/sendMobileCode.json",e)},t.prototype.modifyMobile=function(e){return he.call(this,W(),"/passport/modifyMobile.htm",e)},t.prototype.verifyResult=function(e,t,i){return he.call(this,W(),"/passport/verifyResult.htm",e,{responseCallback:t,errorCallback:i})},t.prototype.bindMobileConfirm=function(e){return e=Object.assign({bindNewMobile:!1,bizType:"bind_mobile",template:"tempA"},e),he.call(this,W(),"/thirdparty/bindMobileConfirm.json",e)},t.prototype.modifyUserInfo=function(e){return e=Object.assign({bizType:"add_mobile"},e),he.call(this,W(),"/passport/userModifyInfo.htm",e,{eventName:"modifyUserInfo"})},t.prototype.getQRCode=function(e){return e=Object.assign({size:200},e),he.call(this,W(),"/qrcode/show.json",e,{eventName:"getQRCode"})},t.prototype.loginByCode=function(e){return he.call(this,W(),"/qrcode/loginByCode.json",e)},t.prototype.authByToken=function(e){return he.call(this,W(),"/qrcode/authByToken.htm",e)},t.prototype.crossDomain=function(e,t){var i=this;if(t&&t.token)return ue(e+"/login/crossdomain.json",t,function(t){if(t=t||{},t.siteUrl=e,Te(t))return void i.emit("crossDomain:error",t);t.result&&"success"===t.result?i.emit("crossDomain:success",t):i.emit("crossDomain:fail",t)})},t}(S),Ni=document.body,Di=["account.youku.com","cloud.youku.com","zhifu.youku.com"],$i=function(e){function t(t){var i=xt(this,e.call(this,t)),o=window.parent||{},n=o.location;n=n===undefined?{}:n;var r=n.host,s=r===undefined?"":r;return Di.includes(s)||window.addEventListener("message",function(e){var t=JSON.parse(decodeURIComponent(e.data||"{}"));"resizeIframe"===t.action&&i.locate(t.width,t.height)}),i}return Vt(t,e),t.prototype.events=function(){return{"click .YT-frame-close":"close"}},t.prototype.init=function(){this.id="YT-loginFramePop",this.className="YT-loginFrame-popbox"},t.prototype.created=function(){Ni.appendChild(this.el),this.$el.html(this.options.view.el),this.createMaskLayer(),this.createFrameLayer()},t.prototype.createMaskLayer=function(){var e=document.getElementById("YT-loginFrameshade");e||(e=document.createElement("div"),e.id="YT-loginFrameshade",e.className="YT-loginFrame-shade",Ni.appendChild(e)),this.$shadeDom=this.$(e)},t.prototype.createFrameLayer=function(){var e=document.getElementById("YT-iframeBack");if(!e){e=document.createElement("iframe"),e.className="YT-iframe-backface",e.id="YT-iframeBack",e.src="about:blank",e.frameBorder=0;try{e.document.write(""),e.document.clear()}catch(t){}this.el.appendChild(e)}},t.prototype.locate=function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=-(t||this.el.clientHeight)/2,o=-(e||this.el.clientWidth)/2;this.$el.css("margin-top",(i<-300?-300:i)+"px"),this.$el.css("margin-left",(o<-450?-450:o)+"px"),this.$el.css("visibility","visible")},t.prototype.open=function(){var e=this;this.$shadeDom.show(),this.$el.show(),setTimeout(function(){return e.locate()},0),document.onkeyup||(document.onkeyup=function(t){t=t||window.event,27===t.keyCode&&(e.close(),document.onkeyup=null)})},t.prototype.close=function(){this.$shadeDom.hide(),this.$el.hide(),this.callDelegateFunc("popupDisappear")},t}(ei),Bi=function(e){var t=".YT-changeType-box .active { color: #"+e.secColor+"; border-bottom: 1px solid #"+e.secColor+" }.YT-loginWrap .YT-form .YT-form-btn { background-color: #"+e.secColor+" !important; }.YT-loginWrap .YT-noGet, .YT-loginWrap .disabled-color { color: "+e.fontColor+" !important }.YT-loginWrap .YT-check-label.checked:before { color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button { background-color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button-l { background-color: #fff; color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button-l:before { box-shadow: 0 0 0 1px #"+e.secColor+" inset }.YT-partner-foot .YT-footer a,.YT-loginWrap .YT-other-link { color: #"+e.secColor+" !important }.YT-loginWrap .YT-other-link:after { border-color: #"+e.secColor+" !important }.YT-checkbox:checked + .YT-label:before { background: #"+e.secColor+"; border-color: #"+e.secColor+" }";return""===e.needHideTitle||"false"!=e.needHideTitle&&0!=e.needHideTitle||(t+=".wap-header { display: none !important }"),e.isTlsite&&e.isChangeSkin&&(t+=" ",e.tlHeaderBg&&(t+='.YT-tbind-header { background:url("'+e.tlHeaderBg+'") no-repeat center top !important; background-size: cover !important; } '),t+=".YT-loginWrap a { color: "+(e.tlButtonColor||"#2692ff")+" }.YT-loginWrap .YT-switch-check.checked { background-color: "+e.tlButtonColor+" !important; }.YT-loginWrap .YT-switch-check.checked:before { border-left: 6px solid "+e.tlButtonColor+" !important; background-color: "+e.tlButtonColor+" !important; }.YT-loginWrap .YT-button { background-color:"+e.tlButtonColor+" !important; color: "+(e.tlButtonTextColor||"#fff")+"; } ",e.tlButtonGradientColor&&(t+=".YT-loginWrap .YT-button { background-image: -webkit-linear-gradient(left, "+e.tlButtonGradientColor+", "+e.tlButtonColor+"); } "),t+=".YT-loginWrap .YT-button-l { background-color:#fff !important; color: "+(e.tlLinkButtonTextColor||"#555")+" !important; }.YT-loginWrap .YT-button-l:before { box-shadow:0 0 0 1px "+e.tlLinkButtonColor+" inset !important; }.YT-changeType-box .active { color: "+(e.tlButtonColor||"#0aa6de")+" !important; border-color: "+e.tlButtonColor+" !important; }.YT-account-item.checked { border-color: "+e.tlButtonColor+" !important;",e.tlCheckedAccountBgColor&&(t+=" background: "+e.tlCheckedAccountBgColor+" !important;"),t+=" }"),t},Oi=function(e){var t=".YT-loginWrap a:hover,.YT-third-bind a:hover,.YT-partner-hasLogin .change-account a,.YT-loginWrap .YT-change-logintype i,.YT-loginWrap .YT-change-logintype:hover,.YT-loginWrap .YT-loginFrame-foot .YT-registe-btn:hover,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qr-func a:hover { color: #"+e.secColor+" !important }.YT-loginWrap .YT-form .YT-form-btn,.YT-third-bind .YT-no-bing-submit,.YT-third-bind .YT-thirdbox-body .YT-form .YT-form-btn,.YT-loginWrap .nc-container .imgCaptcha .nc_scale_submit,.YT-loginWrap .YT-qr-login .YT-qrImg-box .YT-invalid-tips .YT-qr-refresh,.YT-loginWrap .YT-form .YT-pwd-strong { background-color: #"+e.secColor+" }.YT-loginWrap .YT-frame-close { color: #"+e.secColor+" }.YT-loginWrap { background: "+(e.bgThemes||e.themesBgStyle)+" !important; color: "+e.fontColor+" !important }.YT-loginWrap a { color: "+e.linkColor+" !important }";return 4==e.padding.length?t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px "+e.padding[1]+"px "+e.padding[2]+"px "+e.padding[3]+"px !important }":2==e.padding.length?t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px "+e.padding[1]+"px !important }":e.padding.length>0&&(t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px !important }"),e.isTlsite&&e.isChangeSkin&&(e.tlHeaderBg&&(t+='.header { background:url("'+e.tlHeaderBg+'") no-repeat center center '+e.tlHeaderBgColor+"; }"),t+=".YT-loginWrap .YT-form-btn,.YT-loginFrame-body .YT-switch-user:after { background-color:"+e.tlButtonColor+" !important; }.YT-changeType-box .active { border-color:"+e.tlButtonColor+" !important; }.YT-changeType-box .active,.YT-loginFrame-body .YT-switch-user,.YT-loginFrame-body .YT-switch-user:hover,.YT-loginFrame-body .YT-form-link,.YT-loginFrame-body .YT-btn-box .YT-form-btn.YT-b-white { color:"+e.tlButtonColor+" !important; }.YT-loginFrame-body .YT-form-link b,.YT-loginFrame-body .YT-icon-exchange { background-color: "+e.tlButtonColor+" !important; }.YT-loginFrame-body .YT-other-btn { border-color: "+e.tlLinkButtonColor+" !important; color: "+e.tlLinkButtonTextColor+" !important; }"),e.useAliLoginFrame&&(t+=".YT-loginWrap { width: auto !important; min-height: 334px; background-color:#fff!important;}.YT-loginWrap.mini { padding: 0 !important; }body .YT-loginWrap.normal.YT-dark {padding:0!important;background:#2A2A32!important;border-radius: 8px;}body .YT-loginWrap.YT-dark .YT-frame-close{width:18px;height:18px;color:#7b7b7f;font-size: 18px;}body .YT-loginFrame-popbox{background:none !important;}"),t},Fi=function(e){var t="";return e.isIku&&(t+='<div class="YT-riskBox-head"><span class="YT-risk-header"></span><span class="YT-risk-userinfo">å®‰å…¨ä¸­å¿ƒ</span></div>'),t+='<div id="YT-loginWrap" class="YT-loginWrap '+(e.size||"")+" ","8fb8456183734a86bfc1c15a1c761cdf"!=e.pid&&"20160607PLF000287"!=e.pid||(t+=" YT-dark "),t+='">',e.useAliLoginFrame?(t+='<div id="alibaba-login-iframe"><div id="alibaba-login-iframe-loading"></div></div>',e.isIku&&(t+='<div id="alibaba-qrlogin-iframe"> <div id="alibaba-qrlogin-iframe-loading"></div></div>')):t+='<input type="hidden" id="YT-countryRegion" name="YT-countryRegion"data-name="'+e.loginCountry.countryName+'"data-code="'+e.loginCountry.countryCode+'"data-region="'+e.loginCountry.region+'"value="'+e.loginCountry.region+'" /><div id="_umfp" style="width:1px;height:1px;overflow:hidden;position:absolute"></div>',"popup"==e.mode&&(t+='<div class="YT-frame-close YT-iconfont" id="YT-closeLoginFrame" title="å…³é—­">&#xe9b4;</div>'),t+='<div class="YT-loginFrame-func"></div><div id="YT-loginFrame-container"></div></div>'},qi=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.created=function(){var e=this.config=this.getConfig();if(this.$el.html(Fi(e)),"embedded"===e.mode){if(!e.frameID)return void alert("è¯·ä¼ å…¥åµŒå…¥å®¹å™¨çš„ID");var t=document.getElementById(e.frameID);if(!t)return void alert("åµŒå…¥å®¹å™¨ä¸å­˜åœ¨");t.appendChild(this.el)}"popup"===e.mode&&(this.popupLayer=new $i({view:this}),this.popupLayer.delegate=this),this.$loginWrap=this.find("#YT-loginWrap"),this.$container=this.find("#YT-loginFrame-container");var i=e.bannerTopImg,o=e.bannerBottomImg;i&&i instanceof Array&&this.setBanner("top",i),o&&o instanceof Array&&this.setBanner("bottom",o)},t.prototype.append=function(e){e&&e.el&&this.$container.append(e.el)},t.prototype.getConfig=function(){return this.delegate&&this.delegate.viewGetConfig()||{}},t.prototype.openPopupWindow=function(){this.popupLayer&&this.popupLayer.open()},t.prototype.closePopupWindow=function(){this.popupLayer&&this.popupLayer.close()},t.prototype.setBanner=function(e,t){var i=document.createElement("img");i.src=t[0];var o=document.createElement("div");o.style.position="absolute",o.style.left=t[2]+"px",o.appendChild(i),"top"===e&&(this.$loginWrap.prepend(o),o.style.top=t[1]+"px"),"bottom"===e&&(this.$loginWrap.append(o),o.style.bottom=t[1]+"px")},t.prototype.updateThemeBgStyle=function(e){},t.prototype.popupDisappear=function(){this.el.className=""},t}(ei),Ui={passport:"/yt/passport.passport11",voice:"/yt/YTvoice.anquan",dtRecom:"/yt/alidt.Recommendedaccount",dtBind:"/yt/alidt.bindExistingaccount",scChangeBind:"/yt/SecurityCenter.changebind",bindMobile:"/yt/bindmobile"},Wi=void 0,ji=function(){function e(){this.config=J(),this.loadAplus()}return e.prototype.loadAplus=function(){var e=this;if(window.goldlog&&window.goldlog.record)return void this.listen();ye("//g.alicdn.com/alilog/mlog/aplus_o.js",{id:"beacon-aplus",async:!0,exparams:"clog=o&aplus&sidx=aplusSidx&ckx=aplusCkx"},function(){return e.listen()})},e.prototype.listen=function(){var e=this;Qt(document.body).on("click",function(t){return e.record(t)})},e.prototype.record=function(e){var t=e.target,i=t.getAttribute("data-gm-stat")||"",o=t.getAttribute("data-gm-ns")||"passport";if(i){var n=i.replace(/\s+/g,"").split(";"),r=n&&n[0]||"",s=n&&n[1]||"",a=n&&n[2]||"";this._sendRecord(o,s,a,r)}},e.prototype.send=function(e){var t=arguments.length>1?[].slice.call(arguments,1):[];switch(e){case"voice":this.sendVoice.apply(this,t);break;default:this._sendRecord.apply(this,arguments)}},e.prototype.sendVoice=function(e){var t="";switch(e){case"tryVoiceBtn":t="click_type=voiceCode";break;case"tryVoiceBtnH5":t="click_type=voiceCodeh5";break;case"trySmsBtn":t="click_type=mobileCode";break;case"getVoiceBtn":t="click_type=getvoiceCode";break;case"getSmsBtn":t="click_type=getmobileCode";break;case"sureVoiceBtn":t="click_type=getvoiceCodeh5";break;case"question":t="click_type=doubt";break;case"submit":t="click_type=submit";break;case"success":t="verify=true";break;case"isGetVoive":t="voice=true"}t+="&source="+H().split(".")[0],this._sendRecord("voice","clcik",t,"H1480571959")},e.prototype._sendRecord=function(e,t,i,o){var n=this.config;window.goldlog&&window.goldlog.record&&Ui[e]&&(i=i||"click=[$]",n.configId&&(i+="&configId="+n.configId),n.isTlsite&&(n.pid&&(i+="&pid="+n.pid),n.activityId&&(i+="&activityId="+n.activityId),n.tlsite&&(i+="&tlsite="+n.tlsite),i+="&type="+(n.needBindExchange?"2":"1")),window.goldlog.record(Ui[e]+"."+(t||"click"),"CLK",i,o))},e.init=function(){return Wi||(Wi=new e),Wi},e.getInstance=function(){return Wi},e}(),Hi=[],Ki=void 0,zi=function(){function e(){this.loadScript()}return e.prototype.loadScript=function(){var e=this;window.mtee&&window.mtee.getUA||I("//aeu.alicdn.com/ctl/ctl.js",{"data-env":"cn",retry:2},function(){window.ctl&&(window.mtee=window.ctl.noConflict(),window.mtee.ready(function(){}),window.mtee.config(),e.ensureAPI(),setTimeout(function(){return e._executeCallback()},3e3));window.YT_STATIC_DOMAIN&&-1===window.YT_STATIC_DOMAIN.indexOf("//g.alicdn.com")&&I(window.YT_STATIC_DOMAIN+"/security/umscript/3.3.35/um.js")},function(){window.YKLoginTracker&&window.YKLoginTracker.log({code:14,sampleRate:1,msg:"ctlè„šæœ¬åŠ è½½å¼‚å¸¸"})})},e.prototype.ensureAPI=function(){var e=this;this.timer=setInterval(function(){window.mtee&&window.mtee.getUA()&&window.umx&&window.umx.getStatus()&&(clearInterval(e.timer),e._executeCallback())},250)},e.prototype._executeCallback=function(){for(this.timer&&clearInterval(this.timer);Hi&&Hi.length;){var e=Hi.shift();e&&e()}Hi=null},e.init=function(){return Ki||(Ki=new e),Ki},e.ready=function(e){Ki&&(Hi?Hi.push(e):e&&e())},e}(),Qi=void 0,Gi=function(){function e(e){this.config=e||J(),this.loadScript()}return e.prototype.loadScript=function(){var e=this;if(window.my)return void this.getEnv();I("//appx/web-view.min.js",{},function(){e.getEnv()})},e.prototype.getEnv=function(){window.my.getEnv(function(e){(e.miniprogram||e.miniProgram)&&(Qi.isMiniProgram=!0)})},e.init=function(t){return Qi||(Qi=new e(t)),Qi},e.getInstance=function(){return Qi},e}(),Xi={messages:{required:" %s å¿…å¡«",matches:" %s ä¸Ž %s ä¸ç›¸åŒã€‚",cant_matches:"%s ä¸èƒ½ä¸Ž %s ç›¸åŒ",cant_match_email_account:"%s ä¸èƒ½ä¸Ž %s ç›¸åŒ",defaults:"The %s field is still set to default, please change.",valid_email:" %s å¿…é¡»æ˜¯é‚®ç®±åœ°å€ã€‚",valid_mobile:" %s å¿…é¡»æ˜¯æ‰‹æœºå·ã€‚",min_length:"é•¿åº¦è¿‡å°ã€‚",max_length:"é•¿åº¦è¿‡å¤§ã€‚",numeric:" %s åªèƒ½æ˜¯æ•°å­—ã€‚",integer:" %s åªèƒ½æ˜¯æ•´æ•°ã€‚",decimal:" %s åªèƒ½æ˜¯åè¿›åˆ¶æ•°ã€‚",sms_sent:"è¯·å…ˆèŽ·å–éªŒè¯ç ",valid_pwdStrong:" %s å¼ºåº¦ä¸å¤Ÿ",valid_pwd_n_s_spe:" s% ä¸èƒ½ä¸ºçº¯æ•°å­—ã€çº¯å­—æ¯æˆ–çº¯å­—ç¬¦",valid_illegal_char:" %s ä¸èƒ½åŒ…å«éžæ³•å­—ç¬¦",valid_space_char:" %s ä¸èƒ½åŒ…å«ç©ºæ ¼"},callback:function(){}},Ji=/^(.+?)\[(.+)\]$/,Zi=/^[0-9]+$/,eo=/^\-?[0-9]+$/,to=/^\-?[0-9]*\.?[0-9]+$/,io=function(e,t,i){this.callback=i||Xi.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={},this.conditionals={};for(var o=0,n=t.length;o<n;o++){var r=t[o];if((r.name||r.names)&&r.rules)if(r.names)for(var s=0,a=r.names.length;s<a;s++)this._addField(r,r.names[s]);else this._addField(r,r.name)}this.form.onsubmit=function(){return!1}},oo=function(e,t){if(!(e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(var i=0,o=e.length;i<o;i++)if(e[i].checked)return e[i][t]};io.prototype.setMessage=function(e,t){return this.messages[e]=t,this},io.prototype.registerCallback=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.handlers[e]=t),this},io.prototype.registerConditional=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.conditionals[e]=t),this},io.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:document.forms[e]},io.prototype._addField=function(e,t){this.fields[t]={name:t,display:e.display||t,rules:e.rules,depends:e.depends,errorMsg:e.errorMsg,id:null,element:null,type:null,value:null,checked:null}},io.prototype._validateForm=function(e){this.errors=[];for(var t in this.fields)if(this.fields.hasOwnProperty(t)){var i=this.fields[t]||{},o=this.form[i.name];o&&o!==undefined&&(i.id=oo(o,"id"),i.element=o,i.type=o.length>0?o[0].type:o.type,i.value=oo(o,"value"),i.checked=oo(o,"checked"),i.depends&&"function"==typeof i.depends?i.depends.call(this,i)&&this._validateField(i):i.depends&&"string"==typeof i.depends&&this.conditionals[i.depends]?this.conditionals[i.depends].call(this,i)&&this._validateField(i):this._validateField(i))}return"function"==typeof this.callback&&this.callback(this.errors,e),this.errors.length,!0},io.prototype._validateField=function(e){for(var t=e.rules.split("|"),i=e.rules.indexOf("required"),o=!e.value||""===e.value||e.value===undefined,n=0,r=t.length;n<r;n++){var s=t[n],a=null,c=!1,l=Ji.exec(s);if((-1!==i||-1!==s.indexOf("!callback_")||!o)&&(l&&(s=l[1],a=l[2]),"!"===s.charAt(0)&&(s=s.substring(1,s.length)),"function"==typeof this._hooks[s]?this._hooks[s].apply(this,[e,a])||(c=!0):"callback_"===s.substring(0,9)&&(s=s.substring(9,s.length),"function"==typeof this.handlers[s]&&!1===this.handlers[s].apply(this,[e.value,a,e])&&(c=!0)),c)){var d=this.messages[e.name+"."+s]||this.messages[s]||Xi.messages[s],h="An error has occurred with the "+e.display+" field.";d&&(h=d.replace("%s",e.display),a&&(h=h.replace("%s",this.fields[a]?this.fields[a].display:a)),e.errorMsg&&(h=e.errorMsg[s])),this.errors.push({id:e.id,element:e.element,name:e.name,message:h,rule:s});break}}},io.prototype._hooks={required:function(e){var t=e.value;return"checkbox"===e.type||"radio"===e.type?!0===e.checked:null!==t&&""!==t},defaults:function(e,t){return e.value!==t},matches:function(e,t){var i=this.form[t];return!!i&&e.value===i.value},cant_matches:function(e,t){var i=this.form[t];return!i||e.value!==i.value},cant_match_email_account:function(e,t){var i=this.form[t];if(i){var o=i.value||"",n=o.split("@")[0];return e.value!==n}return!0},valid_pwdStrong:function(e){return B(e.value)},valid_pwd_n_s_spe:function(e){return!O(e.value)},valid_space_char:function(e){return!(/\s+/.test(e.value)&&!/^\s+$/.test(e.value))},valid_illegal_char:function(e){return!/[<>\(\)'"]/.test(e.value)},valid_email:function(e){return N(e.value)},valid_mobile:function(e){var t="CN",i=document.getElementById("YT-countryRegion");return i&&i.value&&(t=i.value),D(e.value,t)},min_length:function(e,t){return!!Zi.test(t)&&e.value.length>=parseInt(t,10)},max_length:function(e,t){return!!Zi.test(t)&&e.value.length<=parseInt(t,10)},numeric:function(e){return Zi.test(e.value)},integer:function(e){return eo.test(e.value)},decimal:function(e){return to.test(e.value)}};var no=function(){try{var e="__storejs__test__";localStorage.setItem(e,e);var t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t}catch(i){return!1}}(),ro=function(){function e(e){if(no&&window.JSON&&JSON.parse){if(this.storageKey=e,!this.cachedStorage)try{this.cachedStorage=JSON.parse(localStorage.getItem(this.storageKey)||"{}")}catch(t){this.cachedStorage={}}this.support=!0}}return e.prototype.getItem=function(e){if(!this.support)return null;if(e!==undefined){var t=this.cachedStorage[e];return t!==undefined?t:null}return this.cachedStorage},e.prototype.setItem=function(e,t){this.support&&e&&t!==undefined&&(this.cachedStorage[e]=t,localStorage.setItem(this.storageKey,JSON.stringify(this.cachedStorage)))},e.prototype.removeItem=function(e){this.support&&e!==undefined&&this.cachedStorage[e]&&(delete this.cachedStorage[e],localStorage.setItem(this.storageKey,JSON.stringify(this.cachedStorage)))},e}(),so="YK_LOGIN_USER_STORAGE",ao=function(e){
function t(){return xt(this,e.call(this,so))}return Vt(t,e),t.prototype.getAccount=function(){return this.getItem("account")},t.prototype.setAccount=function(e){this.setItem("account",e)},t.prototype.getRegExistAccountInfo=function(){var e=this.getItem("regExistUserInfo");return e!==undefined&&this.removeItem("regExistUserInfo"),e},t.prototype.setRegExistAccountInfo=function(e){this.setItem("regExistUserInfo",e)},t}(ro),co=new ao,lo=function(e){var t="";return e.isFromSDK||(t+='<div class="wap-header">'+(e.customConfig.sliderCaptchaTitle||"å®‰å…¨éªŒè¯")+'<a href="javascript:;" class="go-back" id="YT-risk-close"></a></div>'),t+='<div class="risk-content"',e.customConfig.sliderCaptchaImageStyle&&(t+=' data-no-icon="true"'),t+=">",e.customConfig.sliderCaptchaImageStyle&&(t+='<div class="risk-header-bg" style="'+e.customConfig.sliderCaptchaImageStyle+'"></div>'),t+="<p>"+(e.customConfig.sliderCaptchaTopicText||"ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·æ‹–åŠ¨æ»‘å—è¿›è¡Œå®‰å…¨éªŒè¯")+'</p><div id="YT-captchaWrap" class="nc-container"><div class="loading"></div></div></div>'},ho=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-risk-close":"hideLayer"}},t.prototype.init=function(){this.NCData={},this.loadTimes=0,this.needSliderCaptcha=!1,this.passSliderCaptcha=!1,this.standalone=this.options.standalone||!1,this.options.isMobile||(this.className="nc-container")},t.prototype.hideLayer=function(){this.$riskWrap.removeClass("YT-risk-active"),this.$riskWrap.removeClass("YT-risk-ok"),this.$riskWrap=null,this.NCObj&&(this.NCObj=null)},t.prototype.isNeedSlider=function(e){e?(this._loadNC(),this.needSliderCaptcha=!0,this.passSliderCaptcha=!1):(this.needSliderCaptcha=!1,this.passSliderCaptcha=!0)},t.prototype.resetNCInstance=function(e){this.isNeedSlider(!0),this.NCObj?this.NCObj.reset():this.getNCInstance(e)},t.prototype.removeNCInstance=function(e){var t=this.customerID||this._getContainerID(e);this.$("#"+t).html("").removeClass("nc-container"),this.isNeedSlider(!1),this.customerID=null,this.NCObj=null,this.callDelegateFunc("sliderCaptchaDidRemoved")},t.prototype.getNCInstance=function(e){var t=this,i=this._getContainerID(e),o="nc_"+e+"_0_box";if(this.off("scriptloaded"),this.isNeedSlider(!0),this.NCObj)return void this.resetNCInstance();this.scriptloaded?setTimeout(function(){t._createDom(o,i),t._getNC(o,i)},0):this.once("scriptloaded",function(){t._createDom(o,i),t._getNC(o,i)})},t.prototype._createDom=function(e,t){if(this.options.isMobile&&!this.standalone){var i=this.callDelegateFunc("sliderCaptchaCreatedWithCustomConfig")||{};this.$el.html(lo({id:e,customConfig:i,isFromSDK:this.options.isFromSDK})),this.$riskWrap=this.$("#YT-riskWrap"),this.$riskWrap.append(this.el).addClass("YT-risk-active");var o=document.querySelector("button");o&&o.focus(),document.body.scrollTop=0}else this.$("#"+t).append(this.el).show()},t.prototype._getContainerID=function(e){e=e||"mobile";var t="mobile"===e?"YT-mCaptchaWrap":"YT-captchaWrap",i=this.callDelegateFunc("sliderCaptchaLoadWithContainerID");return i?(this.customerID=i,i):this.options.isMobile?"YT-captchaWrap":("register"===this.options.type&&(t="mobile"===e?"YT-mRegCaptchaWrap":"YT-eRegCaptchaWrap"),t)},t.prototype._loadNC=function(){var e=this;if(window.NoCaptcha||window.noCaptcha)return void(this.scriptloaded=!0);var t=new Date;ye((this.options.isMobile?"//g.alicdn.com/sd/nch5/index.js?t=":"//g.alicdn.com/sd/ncpc/nc.js?t=")+[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours()].join(""),{retry:1},function(){e.scriptloaded=!0,e.emit("scriptloaded")})},t.prototype._getNC=function(e,t){var i=this,o=this.options.type,n=this.options.isMobile,r=window.mtee&&window.mtee.getUmidToken()||["FFFF00000000016514CE",+new Date,Math.random()].join(":"),s=void 0;if(s=n?"login"===o?"login_h5":"register_h5":"login"===o?"Login":"Register",!window.NoCaptcha&&!window.noCaptcha)return i.loadTimes<=5?setTimeout(function(){i._getNC(e,t),i.loadTimes++},1e3):(Ge("SLIDER_LOAD_FAILED"),i.isNeedSlider(!1)),!1;var a={renderTo:t,appkey:"FFFF00000000016514CE",token:r,scene:s,isEnabled:!0,callback:function(e){i.passSliderCaptcha=!0,i.NCData=e,i.NCData.token=r,n&&!i.standalone&&i.$riskWrap.addClass("YT-risk-ok"),i.callDelegateFunc("sliderCaptchaPassed",e)},error:function(e){Ge(e&&e.code||"SLIDER_ERROR"),i.isNeedSlider(!1)}};n?(a.renderTo="#"+t,i.NCObj=new window.NoCaptcha(a),i.NCObj.setEnabled(!0),i.NCObj.reset()):(a.customWidth=t,i.NCObj=new window.noCaptcha(a))},t}(ei),uo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-reGetQRCode":"getQRCode"}},t.prototype.init=function(){this.el="#YT-qrLogin",this.config=J()},t.prototype.created=function(){this.$qrCodeImg=this.find("#YT-qrImg"),this.$invalidTips=this.find("#YT-invalidTips")},t.prototype.getQRCode=function(){var e=this,t=this.model,i=this.config;this.find("#YT-qrLogining").show(),this.find("#YT-qrLoginOK").hide(),t.off("getQRCode:fail getQRCode:success"),t.once("getQRCode:fail",function(){e.$invalidTips.show()}),t.once("getQRCode:success",function(t){t.msg&&t.msg.qrImgUrl&&(e.$invalidTips.hide(),e.$qrCodeImg.attr("src",t.msg.qrImgUrl).show(),e._qrInterval=setInterval(function(){e._qrInterval&&e.loginConnect(t.msg.code)},3e3))}),this.disconnect(),t.getQRCode({callback:i.callbackURL||window.location.href,buid:i.buid,pid:i.pid,size:200,logo:i.qrLogo||i.qrBu[0]||"yk",logosize:i.qrBu[1]||60,logoOnTop:i.qrLogoType||i.qrBu[2]||"true"})},t.prototype.loginConnect=function(e){var t=this,i=this.model,o=this.config;i.off("loginByCode:fail loginByCode:success"),i.once("loginByCode:fail",function(e){"QR_CODE_ERROR"===e.errorCode||"QR_CODE_NOT_EXIST"===e.errorCode?(t.$invalidTips.show(),t.disconnect()):e.riskErrorCode&&t.callDelegateFunc("qrLoginFail",e)}),i.once("loginByCode:success",function(e){t.disconnect(),e.msg.riskErrorCode?t.callDelegateFunc("qrLoginFail",e):(t.find("#YT-qrLogining").hide(),t.find("#YT-qrLoginOK").show(),t.callDelegateFunc("qrLoginSuccess",e))});var n={buid:o.buid,pid:o.pid,code:e};if(o.customParam)for(var r in o.customParam)n[r]=o.customParam[r];o.ykOpensid&&(n.ykOpensid=o.ykOpensid),i.loginByCode(n)},t.prototype.disconnect=function(){this._qrInterval=this.clearTimer(this._qrInterval)},t}(ei),po=function(e){var t='<div class="YT-voiceVerifyTips"> <span class="YT-noGet">æœªæ”¶åˆ°ï¼Ÿ</span><span class="YT-voiceVerifyTry">è¯•è¯•è¯­éŸ³èŽ·å–</span> <div class="YT-m-icon YT-icon-question questionIcon">&#xe9ba;</div></div><div class="YT-smsVerifyTips" style="display:none"> <span class="YT-smsVerifyTry">ä½¿ç”¨çŸ­ä¿¡èŽ·å–</span></div><div class="YT-voiceVerifyTipsHover" style="display:none"> <div class="triangle-up1"></div><div class="triangle-up2"></div> <p>æˆ‘ä»¬ä¼šé€šè¿‡æ‹¨æ‰“æ‚¨çš„æ‰‹æœºå·å‘ŠçŸ¥';return"register"==e.type?t+="éªŒè¯ç ï¼ŒéªŒè¯ç ":t+="åŠ¨æ€å¯†ç ï¼ŒåŠ¨æ€å¯†ç ",t+='æ˜¯æ‚¨å¬åˆ°çš„6ä½æ•°å­—</p></div><div class="YT-voiceVerifyTipsSuccess" style="display:none"> <p class="voiceVerifyTips-title">æ¸©é¦¨æç¤º</p> <p class="voiceVerifyTips-cont">è¯·æ³¨æ„æŽ¥å¬æ¥è‡ª 0571-86756617 ç”µè¯ï¼Œ',"login"==e.type?t+="åŠ¨æ€å¯†ç ":t+="éªŒè¯ç ",t+="æ˜¯æ‚¨å¬åˆ°çš„6ä½æ•°å­—</p></div>"},go=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"mouseout .questionIcon":"hideHelp","mouseover .questionIcon":"showHelp"}},t.prototype.created=function(){var e=po({type:this.options.type});this.find(".YT-voiceAndSmsCont").html(e)},t.prototype.mounted=function(){this.$hoverHelp=this.find(".YT-voiceVerifyTipsHover"),this.$phoneTips=this.find(".YT-voiceVerifyTipsSuccess"),this.$voiceTips=this.find(".YT-voiceVerifyTips"),this.$smsTips=this.find(".YT-smsVerifyTips")},t.prototype.remove=function(){this.undelegateEvents(),this.delegate=null,this.$el=null,this.el=null},t.prototype.showIncomingCallTips=function(){this._showPhoneTips||(this._showPhoneTips=!0,this.$phoneTips.show())},t.prototype.hideIncomingCallTips=function(){this._showPhoneTips&&(this._showPhoneTips=!1,this.$phoneTips.hide())},t.prototype.showVoiceTips=function(){this.$voiceTips.css("display","inline-block"),this.$smsTips.hide()},t.prototype.showSmsTips=function(){this.$smsTips.css("display","inline-block"),this.$voiceTips.hide()},t.prototype.showHelp=function(){this.$hoverHelp.show()},t.prototype.hideHelp=function(){this.$hoverHelp.hide()},t.prototype.show=function(){this.showVoiceTips(),this.hideIncomingCallTips()},t.prototype.hide=function(){this.$voiceTips.hide(),this.$smsTips.hide(),this.hideIncomingCallTips()},t}(ei),mo=function(e){return'<div class="YT-form-group no-icon"> <img class="YT-captcha-img" title="ç‚¹å‡»æ›´æ¢éªŒè¯ç " src="'+e.imageSrc+'" width="100" /> <input type="text" maxLength="'+e.maxLength+'" tabindex="'+e.tabindex+'" class="YT-form-input YT-captcha short-input" name="YT-captcha" /></div>'},fo=void 0,To=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click .YT-captcha-img":"refresh"}},t.prototype.init=function(){this.config=J(),this.options.templateFn?this.templateFn=this.options.templateFn:this.templateFn=mo,this.options.type||(this.options.type="login"),this.isPass=!0},t.prototype.created=function(){this.$el.html(this.templateFn({imageSrc:this.getImageSrc(),tabindex:"login"===this.options.type?3:6,maxLength:this.options.maxLength||4}))},t.prototype.mounted=function(){var e=document.getElementById(this.options.container);e&&e.appendChild(this.el)},t.prototype.val=function(e){return this.find(".YT-captcha").val(e)||""},t.prototype.getState=function(){return this.isPass},t.prototype.getImageSrc=function(){var e=this.config;return this.model.getCaptchaImageURL({bizType:this.options.type,buid:e.buid,pid:e.pid})},t.prototype.refresh=function(){var e=this.find(".YT-captcha-img").get(0);e&&(e.src=this.getImageSrc(),this.val(""),this.isPass=!0)},t.prototype.check=function(){var e=this.config,t=this.val();""!==t&&(this.model.checkCaptcha({formtoken:e.formtoken,bizType:this.options.type,buid:e.buid,pid:e.pid,captcha:t}),this.model.on("checkCaptcha:success",this.checkSuccess,this),this.model.on("checkCaptcha:fail",this.checkFail,this))},t.prototype.checkSuccess=function(e){this.isPass=!0,this.emit("checkcaptcha:success",e)},t.prototype.checkFail=function(e){this.isPass=!1,"CAPTCHA_ERROR"===e.errorCode?this.emit("checkcaptcha:error",e):"CAPTCHA_TIMEOUT"===e.errorCode?this.refresh():this.isPass=!0},t.create=function(e){return t.destory(),fo=new t(e)},t.destory=function(){return fo&&(fo.remove(),fo=null),null},t}(ei),vo=function(e){var t='<div class="YT-country-select-main YT-login"><ul class="YT-country-list">';if(e.mobileCommonCountries&&e.mobileCommonCountries.length>0){var i=e.mobileCommonCountries.map(function(e){return e.region}),o=e.mobileCommonCountries;if(o)for(var n,r=-1,s=o.length-1;r<s;)n=o[r+=1],t+='<li country="'+(n.region||"")+'" countryCode="'+(n.countryCode||"")+'" countryName="'+(n.countryName||"")+'"><span class="YT-country-code">+'+(n.countryCode||"")+'</span><span class="YT-country-name">'+(n.countryName||"")+"</span></li>"}if(e.mobileCountries)for(var a in e.mobileCountries){var c=e.mobileCountries[a];if(c)for(var n,l=-1,d=c.length-1;l<d;)n=c[l+=1],-1==i.indexOf(n.region)&&(t+='<li country="'+(n.region||"")+'" countryCode="'+(n.countryCode||"")+'" countryName="'+(n.countryName||"")+'"><span class="YT-country-code">+'+(n.countryCode||"")+'</span><span class="YT-country-name">'+(n.countryName||"")+"</span></li>")}else t+='<li country="CN" countryCode="86" countryName="ä¸­å›½å¤§é™†"><span class="YT-country-code">+86</span><span class="YT-country-name">ä¸­å›½å¤§é™†</span></li>';return t+="</ul></div>"},bo=void 0,yo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click li":"select"}},t.prototype.init=function(){this.className="YT-country-select-wrap",this.$region=this.$("#YT-countryRegion"),this.$body=this.$(document.body),this.isActive=!1},t.prototype.created=function(){this.config=J(),this.$el.html(vo(this.config)),this.appendList(this.options.container)},t.prototype.appendList=function(e){e&&(e.appendChild(this.el),this.$btn=this.$(e.parentNode).find(".YT-country-chouse-box"),this.countryCode=null)},t.prototype.show=function(){var e=this;this.isActive||(this.$el.show(),this.$btn.addClass("active"),setTimeout(function(){e.$body.on("click.countrylist",e.hide=e.hide.bind(e))},0),this.isActive=!0)},t.prototype.hide=function(){this.isActive&&(this.$body.off(".countrylist",this.hide),this.$btn.removeClass("active"),this.off("select"),this.$el.hide(),this.isActive=!1)},t.prototype.select=function(e){var t=e.currentTarget,i=t.getAttribute("country"),o=t.getAttribute("countrycode"),n=t.getAttribute("countryname");this.countryCode!==o&&(this.countryCode=o,this.$region.val(i).attr({"data-region":i,"data-name":n,"data-code":o}),this.emit("select",i,o,n)),this.hide()},t.isActive=function(){return!!bo&&bo.isActive},t.create=function(e){if(e){if(bo){if(bo.isActive)return;bo.appendList(e)}else bo=new t({container:e});return bo.show(),bo}},t.close=function(){bo&&bo.hide()},t}(ei),wo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.init=function(){this.config=J(),this.role="login",this.mobileCodeType=1,this.smsRetryCount=0,this.willSendVoiceNumber=""},t.prototype.mounted=function(){this.$errMessage=this.find(".YT-errtips-box"),this.$noticeBox=this.find(".YT-notice-box"),this.$countryRegion=this.$("#YT-countryRegion"),this.$countryCode=this.find(".YT-countryCode")},t.prototype.toggleCountryList=function(e){if(yo.isActive())return void yo.close();var t=e.currentTarget.parentNode,i=this.$(t).find(".YT-country-container").get(0);yo.create(i).once("select",this.selectCountry,this)},t.prototype.selectCountry=function(e,t){this.$countryCode.html("+"+t).attr({"data-code":t,"data-region":e}),this.removeVoiceVerify(),this.checkMobile(),this.clearErrorTip()},t.prototype.checkMobile=function(){var e=this.config,t=this.getCountryRegion(),i=this.getMobilePhoneNumber(),o=this.getSendCodeBtn(),n=e&&(e.hasMobile||e.riskData&&e.riskData.hasMobile)||!1;this._countTimer||(D(i,t)||n?o.removeClass("disabled").removeAttr("disabled"):o.addClass("disabled").attr("disabled","disabled"),this.willSendVoiceNumber&&!this.checkSamePhoneNumber(i)&&this.removeVoiceVerify())},t.prototype.checkMobileNumber=function(){var e=this.getMobilePhoneNumber(),t=this.getCountryRegion();e&&!D(e,t)&&this.showErrorTip(this.config.errorTips.mobile.valid_mobile)},t.prototype.createCaptcha=function(){var e=this,t=this.getContainerID();if(t&&this.delegate&&this.delegate.model){if(this.captchaView)return void this.changeCaptcha();this.captchaView=To.create({type:this.role,container:t,model:this.delegate.model}),this.captchaView.on("checkcaptcha:error",function(t){return e.showErrorTip(t.errorMsg)}),this.needCaptcha=!0}},t.prototype.removeCaptcha=function(){this.captchaView&&(To.destory(),this.captchaView=null,this.needCaptcha=!1)},t.prototype.changeCaptcha=function(){this.captchaView&&this.captchaView.refresh()},t.prototype.resetSendCodeBtn=function(e){var t=this.getSendCodeBtn();(e||this._getCodeText)&&t.html(e||this._getCodeText),this._countTimer=this.clearTimer(this._countTimer),this.checkMobile()},t.prototype.resendCountDown=function(e){var t=this,i=60,o=this.getSendCodeBtn(),n=this.getCountryRegion();this.willSendVoiceNumber=e,this._getCodeText=o.html(),this.clearTimer(this._countTimer),this._countTimer=setInterval(function(){i--,0===i?(t.smsRetryCount++,t.resetSendCodeBtn(),t.smsRetryCount>1&&"CN"===n&&t.addVoiceVerify()):o.html(i+"ç§’åŽé‡å‘")},1e3),o.addClass("disabled").attr("disabled","disabled"),this.clearInput(this.getPassCodeInput())},t.prototype.addVoiceVerify=function(){this.voiceView?this.voiceView.show():this.voiceView=new go({el:this.el,type:this.role})},t.prototype.removeVoiceVerify=function(){this.voiceView&&(this.willSendVoiceNumber="",this.setSMSVerifyMode(),this.voiceView.hide(),this.smsRetryCount=0)},t.prototype.checkSamePhoneNumber=function(e){return""!==e&&""!==this.willSendVoiceNumber&&this.willSendVoiceNumber===e},t.prototype.setSMSVerifyMode=function(){this.isVoiceVerify=!1,this.voiceView.showVoiceTips(),this.resetSendCodeBtn(1===this.mobileCodeType?"èŽ·å–åŠ¨æ€å¯†ç ":"èŽ·å–éªŒè¯ç "),this.clearInput(this.getPassCodeInput()),this.callDelegateFunc("_sendStat","voice","trySmsBtn")},t.prototype.setVoiceVerifyMode=function(){this.isVoiceVerify=!0,this.voiceView.showSmsTips(),this.resetSendCodeBtn(1===this.mobileCodeType?"èŽ·å–è¯­éŸ³åŠ¨æ€å¯†ç ":"èŽ·å–è¯­éŸ³éªŒè¯ç "),this.clearInput(this.getPassCodeInput()),this.callDelegateFunc("_sendStat","voice","tryVoiceBtn")},t.prototype.showIncomingCallTips=function(e){var t=this;this.voiceView&&(this.voiceView.showIncomingCallTips(),this.clearTimer(this._delayTimer),e&&(this._delayTimer=setTimeout(function(){return t.hideIncomingCallTips()},1e3*e)))},t.prototype.hideIncomingCallTips=function(){this.voiceView&&this.voiceView.hideIncomingCallTips()},t.prototype.hidePlaceholder=function(e){var t=e.currentTarget,i=this.$(t.parentNode),o=i.find(".YT-form-label");o.hasClass("hideholder")||o.addClass("hideholder"),this.isVoiceVerify&&this.hideIncomingCallTips()},t.prototype.showPlaceholder=function(e){var t=e.currentTarget,i=this.$(t.parentNode),o=i.find(".YT-form-label");""===t.value&&o.removeClass("hideholder"),this.clearErrorTip()},t.prototype.clearInput=function(e){e&&(e.nodeType||(e=e.get(0)),""!==e.value&&(e.value="",this.showPlaceholder({currentTarget:e})))},t.prototype.showErrorTip=function(e){e&&this.$errMessage.html(e).show(),this.$noticeBox.get(0)&&this.$noticeBox.hide()},t.prototype.clearErrorTip=function(){this.$errMessage.hide(),this.$noticeBox.get(0)&&this.$noticeBox.show()},t.prototype.getCountryRegion=function(){return this.$countryCode.attr("data-region")||this.$countryRegion.attr("data-region")},t.prototype.getCountryCode=function(){return this.$countryCode.attr("data-code")||this.$countryRegion.attr("data-code")},t.prototype.getCaptchaState=function(){return!!this.captchaView&&this.captchaView.getState()},t.prototype.getCaptchaCode=function(){return this.captchaView?this.captchaView.val():""},t.prototype.setContainerID=function(e){this._captchaContainerID=e||""},t.prototype.getContainerID=function(){return""},t.prototype.getMobilePhoneNumber=function(){return""},t.prototype.getSendCodeBtn=function(){return null},t.prototype.getPassCodeInput=function(){return null},t.prototype.getSubmitButton=function(){return null},t.prototype.disableButton=function(e,t){e&&(t===undefined&&(t=!0),t?e.addClass("disabled").attr("disabled","disabled"):e.removeClass("disabled").removeAttr("disabled"))},t.prototype.disableSendCodeButton=function(e){this.disableButton(this.getSendCodeBtn(),e)},t.prototype.disableSubmitButton=function(e){e===undefined&&(e=!0);var t=this.getSubmitButton(),i=t.attr("title"),o=t.attr("data-process");e?o&&t.html(o):o&&t.html(i),this.disableButton(t,e)},t.prototype.emptyInput=function(){var e=this;this.find("input").forEach(function(t){return e.clearInput(t)}),this.resetSendCodeBtn()},t.prototype.show=function(){this.$el.show(),this.callDelegateFunc("viewAppear",this.regMode||this.loginMode)},t.prototype.hide=function(){this.emptyInput(),this.$el.hide(),this.$el.removeClass("fix-autofill"),this.callDelegateFunc("viewDisappear",this.regMode||this.loginMode)},t}(ei),Co=void 0,Yo=function(){function e(){this.winObj={}}return e.prototype.addWindow=function(e,t){e&&e.close&&(this.winObj[t||"defaultWindow"]=e)},e.prototype.getWindow=function(e){return this.winObj[e||"defaultWindow"]},e.add=function(t,i){Co||(Co=new e),Co.addWindow(t,i)},e.onClose=function(e,t){if(Co){Co.timer&&clearInterval(Co.timer);var i=Co.getWindow(e);i&&(Co.timer=setInterval(function(){i.closed&&(clearInterval(Co.timer),t&&t())},600))}},e}(),ko=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click .show-all-third-btn":"showAll","click .hide-third-btn":"hide","click .YT-third-part-item":"open"}},t.prototype.init=function(){this.config=J(),this.client=this.$("#ikuBox").attr("data-from")||""},t.prototype.showAll=function(){this.$el.addClass("YT-third-part-showall")},t.prototype.hide=function(){this.$el.removeClass("YT-third-part-showall")},t.prototype.open=function(e){var t=this.config,i=this.$(e.currentTarget),o=i.attr("data-link"),n=i.attr("data-site"),r=H(),s=window.mtee&&window.mtee.getUA()||"",a=window.mtee&&window.mtee.getUmidToken()||"",c=o+"&needRecommend=true&protocol="+window.location.protocol+"&jsToken="+a+"&UA="+encodeURIComponent(s);if(t.configId&&(c+="&configId="+t.configId),document.domain=r,"Iku"===this.client||"itudou"===this.client)if(window.external&&"execute"in window.external){var l='{"data":{"url":"'+c+'","site":"'+n+'"}}';window.external.execute("iku","iku://|login|2|3|"+l)}else window.location.href=c;else if(this.config.isMobile)window.location.href=c;else{var d=window.open(c,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no");(window.ActiveXObject||"ActiveXObject"in window)&&(Yo.add(d,"thirdPartLoginWindow"),Yo.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(je("YK_thirdLogin_data")||"{}"),setTimeout(function(){document.cookie="YK_thirdLogin_data=;domain=youku.com;expires="+new Date(1970,0,1).toGMTString()},500)}))}},t}(ei),_o=function(e){var t="";if(e.isQRlogin&&e.qrMode<2&&!e.isHasLogin&&(t+='<div class="YT-qr-btn" id="YT-qrbtn" title="æ‰«ç ç™»å½•" data-gm-stat="H1505507020;change;change=yes"></div>'),e.isIku&&(t+='<div class="YT-header-space"></div>'),t+='<div class="YT-loginFrame-head"><div class="YT-loginFrame-title" id="YT-loginFrameTitle" data-custom-mid="loginFrameTitle">',2===e.qrMode?t+="æ‰«ç ç™»å½•":"mobile"==e.loginModel[0]?t+=""+(e.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•"):t+=""+(e.pwdLoginTitleWord||"è´¦å·ç™»å½•"),t+="</div>",e.loginNotice&&e.loginNotice[0]&&(t+='<div class="YT-notice-box',"ad"==e.loginNotice[0].noticeType&&(t+=" YT-notice-ad"),t+='"><i class="YT-notice-icon',"sys"!=e.loginNotice[0].noticeType&&(t+=" YT-notice-gift"),t+='"',e.loginNotice[0].iconUrl&&(t+=' style="background-image:url('+e.loginNotice[0].iconUrl+')"'),t+="></i>",e.loginNotice[0].link?t+='<a target="_blank" href="'+e.loginNotice[0].link+'">'+e.loginNotice[0].word+'<i class="YT-link-icon"></i></a>':t+="<span>"+e.loginNotice[0].word+"</span>",t+="</div>"),t+='<div class="YT-errtips-box" style="display:none"></div>',e.qrMode<2&&(-1!=e.loginModel.indexOf("mobile")&&(t+='<div class="YT-change-logintype',"mobile"==e.loginModel[0]&&(t+=" active"),t+='" id="YT-showMobileLogin"><span id="YT-showMobileLogin-text">'+(e.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•")+'</span><i class="YT-iconfont">&#xe9a9;</i></div>'),-1!=e.loginModel.indexOf("normal")&&(t+='<div class="YT-change-logintype',"normal"==e.loginModel[0]&&(t+=" active"),t+='" id="YT-showNormalLogin"><span id="YT-showNormalLogin-text">'+(e.pwdLoginTitleWord||"è´¦å·ç™»å½•")+'</span><i class="YT-iconfont">&#xe9a9;</i></div>')),t+='</div><div class="YT-loginFrame-body">',e.qrMode<2){var i=e.loginModel;if(i)for(var o,n=-1,r=i.length-1;n<r;)o=i[n+=1],"normal"==o?(t+='<form class="YT-form YT-login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false" autocomplete="off" ',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group" data-custom-mid="passport"><input type="text" id="YT-ytaccount" name="YT-ytaccount" tabindex="1" maxlength="50" class="YT-form-input" autocomplete="off" data-gm-stat="H48564865;click2;Account_input=yes" /><label class="YT-form-label" for="YT-ytaccount"><span class="YT-form-tips YT-l-account-tips">'+(e.passportInputWord||e.placeholders.login.account)+'</span><span class="YT-m-icon YT-icon-user">&#xe9a8;</span></label></div><div class="YT-form-group"><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-stat="H48564865;click2;Password_input=yes" /><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips YT-l-password-tips">'+e.placeholders.login.password+'</span><span class="YT-m-icon YT-icon-password">&#xe9b9;</span></label></div><div id="YT-captchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group YT-remember" data-custom-mid="forgetPwd"><div class="YT-passport-help"><a href="'+(e.changePsdLink||"http://id.youku.com/resetPwdView.htm")+'" target="_blank" id="YT-forgetPwd" data-gm-stat="H48564865;click2;Forget_password=yes">'+(e.changePsdName||"å¿˜è®°å¯†ç ")+"</a>",e.hideHelpCenter||(t+='&nbsp;|&nbsp;<a href="'+(e.helpCenterLink||"https://csc.youku.com/feedback-web/alicare?style=1068&spm=a2h0h.8290239.header.5~5~1~3!4~A")+'" target="_blank" data-gm-stat="H48564865;click2;passport_help=yes">'+(e.helpCenterName||"å¸®åŠ©")+"</a>"),t+='</div><label for="YT-ytremember"',e.rememberMe||(t+=' style="display:none"'),t+='><input type="checkbox"',e.rememberMe&&(t+=' checked="checked"'),t+=' id="YT-ytremember" name="YT-ytremember" data-gm-stat="H48564865;click2;Remember_me=yes">&nbsp;<span>è®°ä½æˆ‘</span></label></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-nloginSubmit" data-custom-mid="loginSubmit" data-process="æ­£åœ¨è¿›å…¥..." title="'+(e.loginSubmitWord||"ç™» å½•")+'" class="YT-form-btn"',e.loginSubmitStyle&&(t+=' style="'+e.loginSubmitStyle+'"'),t+=' data-gm-stat="H48564865;click2;Login_button=yes">'+(e.loginSubmitWord||"ç™» å½•")+"</button></div></form>"):"mobile"==o&&(t+='<form class="YT-form YT-login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false" autocomplete="off" ',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-mAccount" name="YT-mAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off" data-gm-stat="H48564843;click1;Phone_number=yes" /><label class="YT-form-label" for="YT-mAccount"><span class="YT-form-tips l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box" data-gm-stat="H48564843;click1;area=yes"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div id="YT-sCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled data-gm-stat="H48564843;click1;Dynamic_passwordbutton=yes">èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" data-gm-stat="H48564843;click1;Dynamic_password=yes" /><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips short-tips">åŠ¨æ€å¯†ç </span><span class="YT-m-icon icon-password"></span></label></div><div id="YT-mCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-block21"><div class="YT-voiceAndSmsCont"></div></div><div class="YT-form-group YT-btn-group"><div class="YT-block21" id="quickRegAgreement" style="display:none"><label for="YT-agreeRegRules" id="YT-rulesLabel" class="YT-check-label checked" data-gm-stat="H48654216;Register1;agree=yes"><input type="checkbox" id="YT-agreeRegRules" name="YT-agreeRegRules">&nbsp;å·²é˜…è¯»å¹¶åŒæ„<span id="YT-rulesBody"><a href="'+e.regRules[1]+'" target="_blank">ã€Š'+e.regRules[0]+"ã€‹</a>",e.regRules.length>2&&(t+='<a href="'+e.regRules[3]+'" target="_blank">ã€Š'+e.regRules[2]+"ã€‹</a>"),t+='</span></label></div><button type="submit" id="YT-mloginSubmit" data-custom-mid="loginSubmit" data-process="æ­£åœ¨è¿›å…¥..." title="'+(e.loginSubmitWord||"ç™» å½•")+'" class="YT-form-btn"',e.loginSubmitStyle&&(t+=' style="'+e.loginSubmitStyle+'"'),t+=' data-gm-stat="H48564843;click1;SMS_loginbutton=yes">'+(e.loginSubmitWord||"ç™» å½•")+"</button></div></form>")}if((e.isQRlogin||2===e.qrMode)&&(t+='<div id="YT-qrLogin" class="YT-qr-login" data-custom-mid="qrSetting" style="display:none">',e.isIku&&(t+='<div class="YT-qr-title">æ‰«ç ç™»å½•</div>'),t+='<div class="YT-qr-ok" id="YT-qrLoginOK" style="display:none"><span class="success-icon"></span><p>ç™»å½•æˆåŠŸ</p></div><div class="YT-qrLogining" id="YT-qrLogining"><div class="YT-qrImg-box"><div class="YT-invalid-tips" id="YT-invalidTips" style="display:none"><p class="YT-tips">äºŒç»´ç å·²å¤±æ•ˆ</p><a href="javascript:;" class="YT-qr-refresh" id="YT-reGetQRCode">ç‚¹æˆ‘åˆ·æ–°</a></div><img src="" alt="" id="YT-qrImg" class="YT-qrimg" style="display:none"></div><div class="YT-qr-foot YT-form"><div class="YT-qr-tips">'+e.qrMsg+"</div></div></div></div>"),t+="</div>",e.qrMode<2)if(e.isPartnerLogin)t+='<div class="YT-partner-foot"><a href="'+(e.partnerGoBackURL||"#")+'">'+(e.partnerGoBackTitle||"è¿”å›žå‰é¡µ")+'</a><a href="'+(e.partnerHelpURL||"#")+'" class="YT-partner-help" target="_blank">'+(e.partnerHelpTitle||"é‡åˆ°é—®é¢˜ï¼Ÿ")+"</a></div>";else{if(t+='<div class="YT-loginFrame-foot',e.isThirdPartLogin&&e.thirdPartUrlAry&&(t+=" hasthirdlist"),t+='" id="YT-thirdParyBody">',"false"!==e.needHideRegister&&!1!==e.needHideRegister&&(t+='<a href="javascript:;" id="YT-registeBtn" class="YT-registe-btn">æ³¨å†Œ</a>'),e.isThirdPartLogin&&e.thirdPartUrlAry){t+='<div class="YT-third-type"><span class="YT-text">å…¶ä»–æ–¹å¼ï¼š</span><div class="YT-third-part-wrap" id="YT-thirdPartWrap">';var s={qq:"H48594750;loginQQ;loginQQ=yes",weibo:"H1509201135;loginweibo;loginweibo=yes",wechat:"H1510124655;loginweixin;loginweixin=yes",alipay:"H1507354093;zhifubao;zhifubao=yes",taobao:"H1510124656;logintaobao;logintaobao=yes"};t+='<div class="YT-third-part-list">';var a=e.thirdPartUrlAry;if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],t+='<span class="YT-third-part-item',l>4&&e.thirdPartUrlAry.length>5&&(t+=" hide"),t+='" data-link="'+c.link+'" data-site="'+c.site+'"><a href="javascript:;" title="ç”¨'+c.name+'è´¦å·ç™»å½•" class="YT-l-icon icon-'+c.site+'" data-gm-stat="'+(s[c.site]||"")+'"></a></span>';e.thirdPartUrlAry.length>5&&(t+='<span class="YT-third-btn show-all-third-btn"><a href="javascript:;" title="æ›´å¤š" class="YT-l-icon icon-more"></a></span><span class="YT-third-btn hide-third-btn" style="display:none"><a href="javascript:;" title="éšè—" class="YT-l-icon icon-more icon-hide"></a></span>'),t+="</div></div></div>"}t+="</div>"}return t},So=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-qrbtn":"toggleQRLogin","click #YT-forgetPwd":"goResetPassword","click #YT-showNormalLogin":"showNormalLogin","click #YT-showMobileLogin":"showMobileLogin","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","click #YT-agreeRegRules":"toggleSubmitState"}},t.prototype.init=function(){e.prototype.init.call(this),this.id="YT-loginFrame-main",this.className="YT-loginFrame-main fix-autofill",this.loginMode=this.config.loginModel[0]},t.prototype.created=function(){this.$el.html(_o(this.config))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$qrcodeBtn=this.find("#YT-qrbtn"),this.$normalView=this.find("#YT-normalLogin"),this.$mobileView=this.find("#YT-mobileLogin"),this.$showNormal=this.find("#YT-showNormalLogin"),this.$showMobile=this.find("#YT-showMobileLogin"),this.$loginTitle=this.find("#YT-loginFrameTitle"),this.$ytAccount=this.find("#YT-ytaccount"),this.$mobAccount=this.find("#YT-mAccount"),this.$ytPassword=this.find("#YT-ytpassword"),this.$mPassword=this.find("#YT-mPassword"),this.$getSmsCode=this.find("#YT-getMobileCode"),this.$regAgree=this.find("#quickRegAgreement"),this.$regAgreeCheck=this.find("#YT-agreeRegRules"),this.config.isThirdPartLogin&&(this.thirdPartView=new ko({el:"#YT-thirdPartWrap"})),(this.config.isQRlogin&&this.config.qrMode>0||2===this.config.qrMode)&&this.toggleQRLogin(),this.setUserData(),this.$mobAccount.on("input change",this.checkMobile.bind(this))},t.prototype.showNormalLogin=function(){this.$showMobile.removeClass("active"),
this.$showNormal.addClass("active"),this.$loginTitle.html(this.config.pwdLoginTitleWord||"è´¦å·ç™»å½•"),this.$normalView.show(),this.$mobileView.hide(),this.changeMode("normal")},t.prototype.showMobileLogin=function(){this.$showNormal.removeClass("active"),this.$showMobile.addClass("active"),this.$loginTitle.html(this.config.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•"),this.$normalView.hide(),this.$mobileView.show(),this.changeMode("mobile")},t.prototype.toggleQRLogin=function(){this.$el.hasClass("YT-qrLoginMode")?(this.$el.removeClass("YT-qrLoginMode"),this.$loginTitle.html(this._loginTitle),this.$qrcodeBtn.attr("title","æ‰«ç ç™»å½•"),this.changeMode(this._loginMode)):(this.$el.addClass("YT-qrLoginMode"),this._loginTitle=this.$loginTitle.html(),this.$loginTitle.html("æ‰«ç ç™»å½•"),this.$qrcodeBtn.attr("title","æ™®é€šç™»å½•"),this.changeMode("qrcode"))},t.prototype.toggleSubmitState=function(e){var t=this.getSubmitButton(),i=e.currentTarget.checked;this.disableButton(t,!i)},t.prototype.showRegAgreement=function(){var e=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];!1===e?(t=!0,this.$regAgree.hide()):this.$regAgree.show(),this.$regAgreeCheck.get(0).checked=t;var i=this.getSubmitButton(),o=this.config.loginSubmitWord||"ç™»å½•",n=this.config.loginAndRegSubmitWord||"æ³¨å†Œå¹¶ç™»å½•";i.html(!1===e?o:n),i.attr("title",!1===e?o:n),this.disableButton(i,!t)},t.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"normal"===this.loginMode?"YT-captchaWrap":"YT-mCaptchaWrap"},t.prototype.getSubmitButton=function(){return this.find("normal"===this.loginMode?"#YT-nloginSubmit":"#YT-mloginSubmit")},t.prototype.getMobilePhoneNumber=function(){return this.$mobAccount.val()},t.prototype.getSendCodeBtn=function(){return this.$getSmsCode},t.prototype.getPassCodeInput=function(){return this.$mPassword},t.prototype.setUserData=function(){if(!this.config.isTlsite){var e=co.getRegExistAccountInfo();e&&(this.updateCountryInfo(e.loginCountry),"normal"===this.loginMode&&this.config.loginModel.indexOf("mobile")>-1&&this.showMobileLogin());var t=e&&e.mobile||co.getAccount();t&&("normal"===this.loginMode?(this.$ytAccount.val(t),this.hidePlaceholder({currentTarget:this.$ytAccount[0]})):e&&(this.$mobAccount.val(t),this.hidePlaceholder({currentTarget:this.$mobAccount[0]}),this.resetSendCodeBtn()))}},t.prototype.updateCountryInfo=function(e){this.getCountryRegion()!==e.region&&(this.selectCountry(e.region,e.countryCode,e.countryName),this.$countryRegion.val(e.region).attr({"data-region":e.region,"data-name":e.countryName,"data-code":e.countryCode}))},t.prototype.matchCountryInfo=function(e){var t=this.config.mobileCountries;if(t)for(var i in t)for(var o=0;o<t[i].length;o++)if(new RegExp("^00"+t[i][o].countryCode).test(e))return t[i][o];return null},t.prototype.changeMode=function(e){if(e){this._loginMode=this.loginMode,this.loginMode=e;var t=this.getCountryCode(),i=this.getCountryRegion(),o=this.$mobAccount.val(),n=this.$ytAccount.val();if("normal"===e&&(D(o,i)?(this.$ytAccount.val("CN"===i?o:"00"+t+o),this.$ytAccount.get(0).focus()):(this.clearInput(this.$ytAccount.get(0)),this.setUserData()),this.clearInput(this.$ytPassword.get(0))),"mobile"===e){var r=this.matchCountryInfo(n),s=r?r.region:i,a=r?n.replace(new RegExp("^00"+r.countryCode),""):n;D(a,s)?(this.$mobAccount.val(a),this.$mobAccount.get(0).focus(),r&&this.updateCountryInfo(r)):this.clearInput(this.$mobAccount.get(0)),this.clearInput(this.getPassCodeInput()),this.removeVoiceVerify(),this.resetSendCodeBtn(),this.showRegAgreement(!1)}}this.clearErrorTip(),this.$el.removeClass("fix-autofill"),this.callDelegateFunc("viewChangeMode",e,this._loginMode)},t.prototype.goResetPassword=function(e){if(e){var t=e.currentTarget,i=t.href,o=t.getAttribute("target"),n=!this.needDecrypt&&this.$ytAccount.val()||"",r=this.getCountryRegion(),s=i+(i.indexOf("?")>-1?"&":"?")+"passport="+encodeURIComponent(n)+"&region="+r;this.config.isIku?t.href=s:(e.preventDefault(),M(s,o))}},t}(wo),Mo=function(e){var t='<input type="hidden" id="YT-countryRegion" name="YT-countryRegion" data-name="'+e.loginCountry.countryName+'"data-code="'+e.loginCountry.countryCode+'"data-region="'+e.loginCountry.region+'"value="'+e.loginCountry.region+'" /><div class="YT-loginFrame-body">';if(e.isNewUser){if(t+='<ul class="YT-default-list inside"><li class="YT-no-passport"><b class="YT-icon-exchange"></b><div class="YT-userbox"><div class="YT-userpic"><img src="'+(e.avatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-blue-shadow"></i></div><div class="YT-userinfo"><em>ä¼˜é…·åœŸè±†ç”¨æˆ·</em></div></div><div class="YT-userbox YT-userbox-r"><div class="YT-userpic"><img src="'+(e.tbAvatar||"/static-resources/images/logo_taobao.jpg")+'"><i class="YT-pic-shadow YT-gray-shadow"></i></div><div class="YT-userinfo"><em>'+(e.tbName||"")+"</em></div></div></li></ul>",e.showMiddlePage&&(t+='<div class="YT-btn-box no-recommend-guide"><button type="button" class="YT-form-btn YT-switch-account" data-gm-ns="dtBind" data-gm-stat="H49667132;useotheraccount2">ç»‘å®šå·²æœ‰ä¼˜é…·è´¦å·</button>',e.tbName&&(t+='<div class="YT-space">æˆ–</div><button type="button" class="YT-other-btn YT-useTlsite" data-gm-ns="dtBind" data-gm-stat="H1535059723;clicktaobao">ç”¨æ·˜å®åˆ›å»ºä¼˜é…·è´¦å·</button>'),t+="</div>"),t+='<div class="no-recommend-main"',e.showMiddlePage&&(t+=' style="display:none"'),t+='><ul class="YT-default-list inside"><li class="YT-tips"><i></i><em>è¯·è¾“å…¥ä¼˜é…·åœŸè±†è´¦å·</em></li><li class="YT-errtips-box" style="display:none;"></li><li><div id="YT-changeType-box" class="YT-changeType-box"><span class="active" id="YT-showNormalLogin" data-gm-ns="dtBind" data-gm-stat="H1541524369;clickpassportlogin">'+(e.dtPwdLoginTitleWord||"è´¦å·ç™»å½•")+'</span><span id="YT-showMobileLogin" data-gm-ns="dtBind" data-gm-stat="H1539677327;clickmobilelogin">'+(e.dtSmsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•")+'</span></div></li></ul><form class="YT-form login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false;" autocomplete="off"><ul class="YT-form-list"><li><input type="text" id="YT-ytaccount" name="YT-ytaccount" tabindex="1" maxlength="50" class="YT-form-input account-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H49577737;enteraccount1" /><label class="YT-form-label" for="YT-ytaccount"><span class="YT-form-tips YT-l-account-tips">æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·</span></label></li><li><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H48832962;enterpwd1"><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips">ç™»å½•å¯†ç </span></label></li><li id="YT-captchaWrap" class="YT-captcha-wrap"></li><li class="YT-btn-box"><button type="submit" id="YT-nloginSubmit" class="YT-form-btn btn-block" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtBind" data-gm-stat="H49577737;loginandbind1">ç™»å½•å¹¶ç»‘å®š</button></li></ul></form><form class="YT-form YT-login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off" style="display:none"><ul class="YT-default-list inside"><li class="YT-mobile-group"><input type="text" id="YT-mAccount" name="YT-mAccount" tabindex="1" maxlength="11" class="YT-form-input account-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H49637437;enteraccountSMS" /><label class="YT-form-label" for="YT-mAccount"><span class="YT-form-tips mobile-tips">æ‰‹æœºå·ç </span></label><div class="YT-country-chouse-box" data-gm-ns="dtBind" data-gm-stat="H1536906796;choosecountry"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+e.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></li><li id="YT-sCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-mobile-group"><button id="YT-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H48803289;enterSMS" /><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips">åŠ¨æ€å¯†ç </span></label></li><li class="YT-mobile-group YT-voiceAndSmsCont"></li><li id="YT-mCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-btn-box"><button type="submit" id="YT-mloginSubmit" class="YT-form-btn" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtBind" data-gm-stat="H49577737;loginandbind1">ç™»å½•å¹¶ç»‘å®š</button></li></ul></form>',!1!==e.dtThirdPartLogin&&e.thirdPartUrlAry&&e.thirdPartUrlAry.length&&e.tlsiteName){t+='<ul class="YT-default-list inside"><li><div class="YT-third-list">';var i=e.thirdPartUrlAry;if(i)for(var o,n=-1,r=i.length-1;n<r;)o=i[n+=1],1==e.thirdPartUrlAry.length?o.site==e.tlsiteName?t+='<button type="button" class="YT-other-btn YT-useTlsite" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'">'+o.name+"è´¦å·ç™»å½•</button>":t+='<button type="button" class="YT-other-btn YT-useTlsite-other" data-url="'+o.link+"&callback="+(e.bizCallback||"")+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'">'+o.name+"è´¦å·ç™»å½•</button>":o.site==e.tlsiteName?t+='<a href="javascript:;" class="YT-third-item YT-useTlsite for-'+o.site+'"><i class="YT-l-icon icon-'+o.site+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'"></i></a>':t+='<a href="javascript:;" class="YT-third-item YT-useTlsite-other for-'+o.site+'" data-url="'+o.link+"&callback="+(e.bizCallback||"")+'"><i class="YT-l-icon icon-'+o.site+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'"></i></a>';t+="</div></li></ul>"}t+="</div>"}else{var s=e.recommendYKUserList||[],a=e.tlSelectAccountIndex||0;if(e.needVerify&&"mobile"==s[a].verifyType?t+='<form class="YT-form login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off">':t+='<form class="YT-form login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false;" autocomplete="off">',t+='<div class="YT-has-passport" id="YT-has-passport"><b class="YT-icon-exchange"></b><div class="YT-userbox folded" id="YT-recomAccountBox">',e.needVerify&&"mobile"==s[a].verifyType?t+='<input type="hidden" id="YT-mAccount" name="YT-mAccount" value="'+(s[a].passport||"")+'"><input type="hidden" class="YT-countryCode" data-region="'+(s[a].region||"CN")+'">':t+='<input type="hidden" id="YT-ytaccount" name="YT-ytaccount" value="'+(s[a].passport||"")+'">',t+='<div class="YT-userpic"><img src="'+(s[a].avatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-blue-shadow"></i></div><div class="YT-userinfo"><em>'+s[a].hiddenNickname+"</em>("+(s[a].hint||s[a].hiddenPassport)+")</div>",s.length>1){t+='<a href="#" class="YT-switch-user">æ›´æ¢æŽ¨èè´¦å·</a><ul class="YT-userlist">';var c=s;if(c)for(var l,n=-1,d=c.length-1;n<d;)l=c[n+=1],t+="<li",n==a&&(t+=' class="current"'),t+='><a href="#" rel="'+n+'"><em>'+l.hiddenNickname+"</em>("+(l.hint||l.hiddenPassport)+")</a></li>";t+="</ul>"}t+='</div><div class="YT-userbox YT-userbox-r"><div class="YT-userpic"><img src="'+(e.tbAvatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-gray-shadow"></i></div><div class="YT-userinfo"><em>'+(e.tbName||"")+'</em></div></div></div><ul class="YT-form-list"><li class="YT-errtips-box" style="display:none;"></li>',e.needVerify?"email"==s[a].verifyType?t+='<li><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-ns="dtRecom" data-gm-stat="H1511971666;enterpwd"><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips">ç™»å½•å¯†ç </span></label></li><li id="YT-captchaWrap" class="YT-captcha-wrap"></li>':"mobile"==s[a].verifyType&&(t+='<li><div class="YT-form-text">'+(s[a].hiddenPassport||"")+'</div></li><li id="YT-sCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-mobile-group"><button id="YT-getMobileCode" data-type="verify_user" data-name="mobileCode" class="YT-form-btn inline getCode">èŽ·å–éªŒè¯ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off"><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips">éªŒè¯ç </span></label></li><li class="YT-mobile-group YT-voiceAndSmsCont"></li><li id="YT-mCaptchaWrap" class="YT-captcha-wrap"></li>'):t+='<li id="YT-captchaWrap" class="YT-captcha-wrap"></li>',t+='<li class="YT-btn-box"><button type="submit" id="YT-nloginSubmit" class="YT-form-btn btn-block" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtRecom" data-gm-stat="H1535059691;loginandbind">ç™»å½•å¹¶ç»‘å®š</button><div class="YT-space">æˆ–</div><a href="/tlsite/login_view_other.htm?state='+(e.state||"")+'" class="YT-other-btn" data-gm-ns="dtRecom" data-gm-stat="H1537830291;tabotheraccount">ç»‘å®šå·²æœ‰ä¼˜é…·è´¦å·</a></li></ul></form>'}return e.tbName&&(t+='<div class="YT-bt-fixed"><input type="checkbox" id="YT-agreement-checked" checked="checked" class="YT-checkbox" /><label for="YT-agreement-checked" class="YT-label">åŒæ„ <a href="//terms.alicdn.com/legal-agreement/terms/TD/TD201608031631_71011.html" target="_blank" data-gm-ns="dtRecom" data-gm-stat="H1507354101;law">ã€Šè´¦æˆ·äº’ç»‘åè®®ã€‹</a></label></div>'),t+="</div>"},Ro=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return Object.assign(e.prototype.events.call(this),{"click #YT-agreement-checked":"checkAgreement","click .YT-switch-account":"switchAccount","click .YT-switch-user":"toggleAccountList","click .YT-userlist a":"switchRecomAccount"})},t.prototype.init=function(){e.prototype.init.call(this);var t=this.config,i=t.recommendYKUserList||[],o=i.length&&i[t.tlSelectAccountIndex||0];t.isThirdPartLogin=!1,t.ytid=o.ytid,t.needVerify&&o&&"mobile"===o.verifyType?(t.sendCodeToken=o.formtoken,t.hasMobile=!0,this.loginMode="mobile"):(t.hasMobile=!1,this.loginMode="normal"),this.needDecrypt=o&&o.needDecrypt||!1},t.prototype.created=function(){this.$el.html(Mo(this.config))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$body=this.$(document.body),this.$accountBox=this.find("#YT-recomAccountBox"),this.$accountList=this.find(".YT-userlist"),!1===this.config.tlShowBgText&&this.$(".headerLogo div").hide()},t.prototype.remove=function(){e.prototype.remove.call(this),this.clearTimer(this._countTimer,this._fadeinTimer,this._fadeoutTimer,this._delayTimer),this.removeCaptcha(),this.$body.off(".tlsite"),this.$body=null,this.config.hasMobile=!1,this.voiceView&&this.voiceView.remove(),this.$mobAccount&&this.$mobAccount.off()},t.prototype.toggleAccountList=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.$accountBox.hasClass("folded")?(this.$accountBox.removeClass("folded"),this.$body.on("click.tlsite",function(){t.$body.off(".tlsite"),t.toggleAccountList(e)})):(this.$body.off(".tlsite"),this.$accountBox.addClass("folded"))},t.prototype.switchRecomAccount=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,i=parseInt(t.getAttribute("rel")||0);if(this.$body.off(".tlsite"),t.parentNode.className.indexOf("current")>-1)return void this.$accountBox.addClass("folded");Z({tlSelectAccountIndex:i}),this.callDelegateFunc("viewWillUpdate")},t.prototype.switchAccount=function(e){e&&e.preventDefault(),this.find(".no-recommend-guide").hide(),this.find(".no-recommend-main").show()},t.prototype.checkAgreement=function(e){var t=e.currentTarget;this.isAgreeBind=!!t.checked},t}(So),Eo={format:et,split:tt,pad:Ze,field:it,bytes:ot,range:nt},Lo=Eo.format,Io=86400,Ao={release:st,formatDate:rt,formatTime:lt,formatTimeE:dt,beautyTime:ct,parseTime:at},Po=function(e){for(var t="",i=e.data&&e.data.recommendList||[],o={alipay:"æ”¯ä»˜å®",taobao:"æ·˜å®",wechat:"å¾®ä¿¡",qzone:"QQ",qq:"QQ",sina:"å¾®åš",weibo:"å¾®åš"},n=o[e.tlsite]||"",r=0,s=0;s<i.length;s++)i[s].profileInfo.vip&&r++;t+='<div class="YT-recom-icon"></div><div class="YT-loginFrame-head"> ',"bind"===e.type?t+=' <div class="YT-loginFrame-title">é€‰æ‹©è´¦å·ä¸Ž'+n+"ç»‘å®š</div> ":t+=' <div class="YT-loginFrame-title">é€‰æ‹©ç™»å½•è´¦å·</div> ',t+=' <div class="YT-errtips-box" style="display:none"></div> ',e.data.showMergeUrl&&(t+=' <div class="YT-change-logintype" id="mergeAccount" data-vipcount="'+r+'"><span>è´¦å·åˆå¹¶</span><i class="YT-iconfont">&#xe9a9;</i></div> '),t+='</div><div class="YT-loginFrame-body"> <div class="YT-account-select"> <ul class="YT-account-list"> ';var a=i;if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],t+=' <li class="YT-account-item" data-token="'+(c.userKey||"")+'"> <img class="user-avatar" src="'+(c.profileInfo.avatar||"https://img.alicdn.com/tfs/TB1wY43dbGYBuNjy0FoXXciBFXa-160-160.png")+'" /> <span class="user-nickname">'+e.cutString(c.userDto.nickname||"",33,c.profileInfo.vip),c.profileInfo.vip&&(t+='<img class="vip-icon" src="https://img.alicdn.com/tfs/TB1A5seJKSSBuNjy0FlXXbBpVXa-28-24.png" />'),t+='</span> <span class="user-account"',c.profileInfo.vip&&(t+=' title="'+e.formatDate("YYYY/MM/DD",1e3*c.profileInfo.vipExpireTime)+'åˆ°æœŸ"'),t+="> "+e.cutString(c.userDto.loginMobile||c.userDto.loginEmail||c.partnerInfo&&"å·²ç»‘å®š"+o[c.partnerInfo.tlsite]+" "+(c.partnerInfo.nickname||"")||"",34,!1,c.profileInfo.vip)+" ",c.profileInfo.vip&&(t+=" "+e.formatDate("YYYY/MM/DD",1e3*c.profileInfo.vipExpireTime)+"åˆ°æœŸ"),t+=" </span> </li> ";return t+=' </ul> </div> <div class="YT-form-group YT-btn-group"> <button id="selectConfirm" class="YT-form-btn disabled">ç¡®è®¤å¹¶ç™»å½•</button> ',e.data.showCreateNewUserUrl&&(t+=' <a href="#" class="YT-createNewAccount" id="createAccount">åˆ›å»ºæ–°è´¦å·</a> '),t+=' </div></div><div class="YT-bindExchange"> <div class="YT-header"><p></p></div> <div class="YT-btn-group"> <button class="YT-form-btn YT-form-btn-l" id="bindExchangeCancel">å–æ¶ˆ</button> <button class="YT-form-btn" id="bindExchangeConfirm">æ˜¯çš„</button> </div></div>'},Vo=void 0,xo=void 0,No=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #selectConfirm":"selectConfirm","click #createAccount":"createAccount","click #mergeAccount":"mergeAccounts","click .YT-account-item":"selectAccountItem","click #bindExchangeCancel":"bindExchangeCancel","click #bindExchangeConfirm":"bindExchangeConfirm"}},t.prototype.init=function(){this.id="YT-loginRecom-main",this.className="YT-loginFrame-main YT-recommend-login"},t.prototype.created=function(){this.options.config=J(),this.options.formatDate=Ao.formatDate,this.options.cutString=this.cutString.bind(this),this.renderView()},t.prototype.mounted=function(){var t=this;e.prototype.mounted.call(this),setTimeout(function(){Vo||(Vo=document.getElementById("YT-loginFrame-container").offsetWidth,xo=t.find(".YT-account-item")[0].offsetWidth,t.renderView())},0)},t.prototype.renderView=function(){this.$el.html(Po(this.options)),this.$confirmBtn=this.find("#selectConfirm"),this.$accountItem=this.find(".YT-account-item")},t.prototype.remove=function(){this.options.formatDate=null,this.selectItem=null,e.prototype.remove.call(this)},t.prototype.confirmBindExchange=function(e){this.$el.addClass("YT-bindExchange-confirm");var t=this.find(".YT-header p"),i=se(e.tlsite);t.html("æ‚¨éœ€è¦ç»‘å®šçš„ä¼˜é…·è´¦å·\n            <b>"+e.hiddenPassport+"</b> å·²ç»ç»‘å®š"+i+"è´¦å·\n            <b>"+e.thirdpartyNickname+"</b>ï¼Œæ˜¯å¦è¿›è¡Œæ›¿æ¢ï¼Ÿ")},t.prototype.bindExchangeCancel=function(){this.$el.removeClass("YT-bindExchange-confirm")},t.prototype.bindExchangeConfirm=function(){this.bindExchangeCancel(),this.callDelegateFunc("confirmBindExchange")},t.prototype.selectAccountItem=function(e){var t=e.currentTarget;this.$accountItem.removeClass("checked"),this.$(t).addClass("checked"),this.selectItem||this.$confirmBtn.removeClass("disabled"),this.selectItem=t},t.prototype.selectConfirm=function(){var e=this.selectItem.getAttribute("data-token");this.callDelegateFunc("confirmSelectedAccount",e)},t.prototype.createAccount=function(){this.callDelegateFunc("clickToCreateAccount")},t.prototype.mergeAccounts=function(e){var t=parseInt(e.currentTarget.getAttribute("data-vipcount")||"0");this.callDelegateFunc("clickToMergeAccounts",t)},t.prototype.disableSubmitButton=function(e){e===undefined&&(e=!0),e?this.$confirmBtn.addClass("disabled"):this.$confirmBtn.removeClass("disabled")},t.prototype.cutString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2],o=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return Vo-xo>16&&(t-=3),"mini"===this.options.config.size&&(t-=6),i&&(t-=4),o&&(t-=13),Je(e,t,"...")},t}(wo),Do=function(e){var t='<div class="YT-recom-icon"></div><div class="YT-loginFrame-head"> <div class="YT-loginFrame-title">è´¦å·åˆå¹¶';return e.vipCount>=2&&(t+="<em>(åˆå¹¶åŽæƒç›Šå åŠ )</em>"),t+='</div> <div class="YT-change-logintype"><span>è¿”å›žç™»å½•è´¦å·</span></div></div><div class="YT-loginFrame-body"> <div class="YT-qr-login"> <div class="YT-qr-ok" style="display:none"> <span class="success-icon"></span> <p>æ‰«ææˆåŠŸï¼<br>è¯·åœ¨æ‰‹æœºç«¯è¿›è¡Œè´¦å·åˆå¹¶</p> </div> <div class="YT-qr-fail" style="display:none"> <span class="fail-icon"></span> <p>é¡µé¢é•¿æ—¶é—´åœç•™å·²è¿‡æœŸï¼Œè¯·é‡æ–°å®Œæˆç™»å½•</p> <button class="YT-form-btn" id="gotoLogin">é‡æ–°ç™»å½•</button> </div> <div class="YT-qrLogining"> <div class="YT-qrImg-box"> <div class="YT-invalid-tips" style="display:none"> <p class="YT-tips">äºŒç»´ç å·²å¤±æ•ˆ</p> <a href="javascript:;" class="YT-qr-refresh" id="refreshQRCode">ç‚¹æˆ‘åˆ·æ–°</a> </div> <img src="" class="YT-qrimg" style="display:none"> </div> <div class="YT-qr-foot YT-form"> <div class="YT-qr-tips">è¯·ä½¿ç”¨ä¼˜é…·APPè¿›è¡Œæ‰«ç </div> </div> </div> </div></div>'},$o=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #refreshQRCode":"getQRCode","click .YT-change-logintype":"back","click #gotoLogin":"gotoLogin"}},t.prototype.init=function(){this.id="YT-mergeAccount-main",this.className="YT-loginFrame-main YT-merge-account",this.config=J()},t.prototype.created=function(){var e=this.options.vipCount;this.$el.html(Do({vipCount:e})),this.$qrCodeImg=this.find(".YT-qrimg"),this.$invalidTips=this.find(".YT-invalid-tips"),this.$qrScan=this.find(".YT-qrLogining"),this.$qrSuccess=this.find(".YT-qr-ok"),this.getQRCode()},t.prototype.getQRCode=function(){var e=this,t=this.model,i=this.config;this.$qrScan.show(),this.$qrSuccess.hide(),t.off("getQRCode:fail getQRCode:success"),t.once("getQRCode:fail",function(t){if("TOKEN_NOT_EXIST_OR_EXPIRE"===t.errorCode)return void e.tokenFail();e.$invalidTips.show()}),t.once("getQRCode:success",function(t){t.msg&&t.msg.qrImgUrl&&(e.$invalidTips.hide(),e.$qrCodeImg.attr("src",t.msg.qrImgUrl).show(),e._qrInterval=setInterval(function(){e._qrInterval&&e.loginConnect(t.msg.code,t.msg.codeType)},3e3))}),this.disconnect(),t.getQRCode({callback:i.callbackURL||window.location.href,buid:i.buid,pid:i.pid,size:200,logo:i.qrLogo||i.qrBu[0]||"yk",logosize:i.qrBu[1]||60,logoOnTop:i.qrLogoType||i.qrBu[2]||"true",codeType:"mergeUser"})},t.prototype.loginConnect=function(e,t){var i=this,o=this.model;o.off("loginByCode:fail loginByCode:success"),o.once("loginByCode:fail",function(e){switch(e.errorCode){case"QR_CODE_SCAN":i.$qrScan.hide(),i.$qrSuccess.show();break;case"QR_CODE_ERROR":case"QR_CODE_BEE_USED":case"QR_CODE_NOT_EXIST":i.$invalidTips.show(),i.disconnect();break;case"TOKEN_NOT_EXIST_OR_EXPIRE":i.tokenFail()}}),o.once("loginByCode:success",function(e){i.disconnect(),i.$qrScan.hide(),i.$qrSuccess.show(),i.$qrSuccess.find("p").html("ç™»å½•æˆåŠŸ"),i.callDelegateFunc("mergeLoginSuccess",e)}),o.loginByCode({codeType:t,code:e})},t.prototype.tokenFail=function(){this.$qrScan.hide(),this.$qrSuccess.hide(),this.find(".YT-qr-fail").show(),this.find(".YT-change-logintype").hide(),this.disconnect()},t.prototype.disconnect=function(){this._qrInterval=this.clearTimer(this._qrInterval)},t.prototype.gotoLogin=function(){this.callDelegateFunc("mergeLoginExpire")},t.prototype.back=function(){this.disconnect(),this.callDelegateFunc("backToLogin")},t}(ei),Bo=function(e){function i(){return xt(this,e.apply(this,arguments))}return Vt(i,e),i.prototype.sendMobileCodeAction=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=t.config||this.config,o=t.model||this.model,n=t.view||this.view,r=t.hasMobile||!1,s=t.accountType||"normal",a=t.codeType||(n.isVoiceVerify?"voiceCode":"mobileCode"),c=t.formtoken||i.sendCodeToken||i.formtoken,l=window.mtee&&window.mtee.getUmidToken()||"",d=window.mtee&&window.mtee.getUA()||"",h=n.getCountryRegion(),u=n.getMobilePhoneNumber();if(n.isVoiceVerify&&!n.checkSamePhoneNumber(u)&&!r)return void n.removeVoiceVerify();var p={bizType:t.bizType||"login",sendCodeType:a,formtoken:c,buid:i.buid,pid:i.pid,jsToken:l,UA:d};r||(p.mobileNo=u,p.region=h),t.userInfoToken&&(p.userInfoToken=t.userInfoToken),t.needDecrypt&&(p.needDecrypt=t.needDecrypt),n.needCaptcha&&(p.captcha=n.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(p.sliderCaptchaSessionId=this.ali.NCData.csessionid,p.sliderCaptchaToken=this.ali.NCData.token,p.sliderCaptchaSig=this.ali.NCData.sig),this.isGetMobileCode=!1,o.off("sendMobileCode:error sendMobileCode:fail sendMobileCode:success"),o.once("sendMobileCode:error sendMobileCode:fail",function(i){n.showErrorTip(i.errorMsg||i.message,"validateCode"),e.safeCallFunc("sendMobileCodeFail"),e.addCaptchaComponent({errorCode:i.errorCode,mode:s,needSliderCallback:function(){return e.safeCallFunc("sendMobileCodeNeedSlider",t,p)},createCaptchaCallback:function(){return e.safeCallFunc("sendMobileCodeNeedCaptcha",t,p)}})}),o.once("sendMobileCode:success",function(t){e.isGetMobileCode=!0,n.isVoiceVerify&&n.showIncomingCallTips(t.msg||5),n.resendCountDown(u),e.removeCaptchaComponent(s),e.safeCallFunc("sendMobileCodeSuccess",t)}),o.sendMobileCode(p),n.clearErrorTip("validateCode"),n.disableSendCodeButton(),this._sendStat("voice",n.isVoiceVerify?"getVoiceBtn":"getSmsBtn")},i.prototype.addCaptchaComponent=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};switch(e.errorCode){case"NEED_CAPTCHA":case"CAPTCHA_ERROR":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":t(e.createCaptchaCallback)&&e.createCaptchaCallback(),this.view.createCaptcha();break;case"CAPTCHA_TIMEOUT":t(e.changeCaptchaCallback)&&e.changeCaptchaCallback(),this.view.changeCaptcha();break;case"NEED_SLIDER_CAPTCHA":case"SLIDER_CAPTCHA_ERROR":t(e.needSliderCallback)&&e.needSliderCallback(),this.ali&&this.ali.resetNCInstance(e.mode||"normal")}},i.prototype.removeCaptchaComponent=function(e){this.ali&&this.ali.needSliderCaptcha&&this.ali.removeNCInstance(e),this.view.needCaptcha&&(this.view.removeCaptcha(),this.view.setContainerID(null))},i}(oi),Oo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.Actions=function(){return{"click #YT-getMobileCode":"sendMobileCode","click #YT-nloginSubmit":"checkSubmit","click #YT-mloginSubmit":"checkSubmit","click .YT-useTlsite-other":"authLoginRedirect","click .YT-useTlsite":"authLogin"}},t.prototype.init=function(){this.updateConfig(),this.updateView(),this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:fail",this.loginFail,this),this.model.on("loginConfirm:error",this.loginError,this),this.ali=new ho({type:"login"}),this.ali.delegate=this},t.prototype.destory=function(){this.model&&(this.model.off(),this.model=null),this.ali&&(this.ali.delegate=null,this.ali=null),e.prototype.destory.call(this)},t.prototype.updateConfig=function(){this.config=J()},t.prototype.updateView=function(){this.view&&(this.view.remove(),this.view=null),this.view=this.config.isTlsite?new Ro:new So,this.view.delegate=this},t.prototype.hideView=function(){this.view&&this.view.$el.hide(),this.recomLoginView&&this.recomLoginView.$el.hide(),this.mergeView&&this.mergeView.$el.hide()},t.prototype.viewDidLoad=function(){var e=this;!this.qrView&&this.config.isIku&&this.getQRCode(),this.config.isUserAlreadyBind&&setTimeout(function(){return e.view.showErrorTip("è¯¥ç¬¬ä¸‰æ–¹å·²ç»ç»‘å®šå…¶ä»–è´¦å·")},1500)},t.prototype.sendMobileCode=function(e){var t=this.view,i=t.$(e.currentTarget),o=i.attr("data-type")||"login",n=t.needDecrypt||!1;this.sendMobileCodeAction({bizType:o,needDecrypt:n,accountType:t.loginMode})},t.prototype.sendMobileCodeSuccess=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this.view,i=this.config,o=e.content||{};o.regAgreement&&!i.isTlsite&&"mobile"===t.loginMode&&(t.showRegAgreement(!0,o.checked),e.errorMsg&&t.showErrorTip(e.errorMsg))},t.prototype.sendMobileCodeFail=function(){this.view.resetSendCodeBtn()},t.prototype.sendMobileCodeNeedCaptcha=function(){this.view.setContainerID("YT-sCaptchaWrap")},t.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sendMobileCodeNeedCaptcha(),this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},t.prototype.checkSubmit=function(){var e=this,t=this.ali,i=this.view,o=this.config.errorTips,n="normal"===i.loginMode?"YT-normalLogin":"YT-mobileLogin",r=He(i.loginMode,this.config,i.needDecrypt);if(!this.needAgreement()){var s=new io(n,r,function(n){if(n.length>0)i.showErrorTip(n[0].message);else{if(i.clearErrorTip(),i.needCaptcha){if(""===i.getCaptchaCode())return void i.showErrorTip(o.captcha.required);if(!i.getCaptchaState())return void i.showErrorTip(o.captcha.error)}if(t&&t.needSliderCaptcha&&!t.passSliderCaptcha)return t.getNCInstance(i.loginMode),void i.showErrorTip(o.sliderCaptcha.required);zi.ready(function(){return e.loginSubmit()}),i.disableSubmitButton()}});s.registerCallback("sms_sent",function(){return!!e.isGetMobileCode}),s._validateForm()}},t.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.config,i={formtoken:t.formtoken,buid:t.buid,pid:t.pid,mode:t.mode,actionFrom:t.from||"",sendCodeType:e.isVoiceVerify?"voiceCode":"mobileCode",state:e.$("#YT-state").val()||!1};e.needDecrypt&&(i.needDecrypt=!0),t.callbackURL&&(i.callback=t.callbackURL),t.clientId&&(i.clientId=t.clientId),t.configId&&(i.configId=t.configId),t.ytid&&(i.ytid=t.ytid),!1!==t.needRecommend&&(i.needRecommend=!0);var o=e.find("#YT-ytremember").get(0);if(o&&o.checked&&(i.rememberMe=!0),"normal"===e.loginMode){var n=e.find("#YT-ytpassword").val();i.passport=e.find("#YT-ytaccount").val().trim(),i.password=n?We(n):"",i.loginType="passport_pwd",e.needDecrypt||(this._userAccount=i.passport)}if("mobile"===e.loginMode&&(i.passport=e.find("#YT-mAccount").val().trim(),i.smsCode=e.getPassCodeInput().val(),i.region=e.getCountryRegion(),i.loginType="mobile_sms_code"),e.needCaptcha&&"normal"===e.loginMode&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||""),t.customParam)for(var r in t.customParam)i[r]=t.customParam[r];this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive");var s=t.isTlsite?t.isNewUser?"tlsite_youku":"tlsite_recommend":"";this.model.loginConfirm(i,s),this._loginLock=!0}},t.prototype.recomLoginSubmit=function(e){var t=this.config,i="mobile"===this.view.loginMode?"mobile_sms_code":"passport_pwd",o={formtoken:t.formtoken,buid:t.buid,pid:t.pid,loginType:i,userKey:e};this.model.loginConfirm(o),this.recomLoginView.clearErrorTip(),this.recomLoginView.disableSubmitButton()},t.prototype.loginError=function(e){var t=this.recomLoginView||this.view;this._loginLock=!1,t.showErrorTip(e.message),t.disableSubmitButton(!1)},t.prototype.loginFail=function(e){var t=this.ali,i=this.recomLoginView||this.view,o=this.config.errorTips;switch(this._loginLock=!1,i.disableSubmitButton(!1),i.needCaptcha&&i.changeCaptcha(),t&&t.needSliderCaptcha&&t.resetNCInstance(i.loginMode),e.riskErrorCode||e.errorCode){case"RISK_USER_WARN_FOR_BIND_MOBILE":case"RISK_USER_WARN_RESET_PWD":this.loginOnRisk(e,!0),Ce(this.model,e,{skip:!0});break;case"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE":
case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD":this.loginOnRisk(e);break;case"RISK_USER_INTERCEPTOR_FOR_RESET_PWD":window.location.href=e.jumpUrl;break;case"QR_CODE_ERROR":case"QR_CODE_NOT_EXIST":break;case"FORM_TIMEOUT":i.showErrorTip(o.errorCode.loginTimeout);break;case"NEED_CAPTCHA":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":"normal"===i.loginMode&&(i.createCaptcha(),i.showErrorTip(e.errorMsg));break;case"CAPTCHA_TIMEOUT":i.changeCaptcha(),i.showErrorTip(e.errorMsg);break;case"NEED_SLIDER_CAPTCHA":i.showErrorTip(e.errorMsg),t&&!t.needSliderCaptcha&&t.resetNCInstance(i.loginMode);break;case"CAPTCHA_ERROR":i.needCaptcha||i.createCaptcha(),i.showErrorTip(o.errorCode.CAPTCHA_ERROR);break;case"NEED_RECOMMEND_LOGIN":this.needRecommendLogin(e.msg.recommendData);break;case"BIND_MOBILE_REQUIRED":if(this.parentViewController){var n={userInfoToken:e.userInfoToken,bindMobileRequired:!0,callback:this.config.callbackURL,formtoken:e.formtoken,pid:this.config.pid,buid:this.config.buid};this.parentViewController.thirdConnect(n)}break;default:i.showErrorTip(e.errorMsg||o.errorCode.defaults)}},t.prototype.loginSuccess=function(e){this._sendStat("voice","success"),this._loginLock=!1,this.view.clearErrorTip();var t=!1;if(e.msg&&e.msg.riskErrorCode&&(this.loginOnRisk(e,!0),t=!0),e.msg.bindMobileAdvice){if(this.parentViewController){var i={userInfoToken:e.msg.userInfoToken,bindMobileRequired:!1,callback:this.config.callbackURL,formtoken:e.msg.formtoken,pid:this.config.pid,buid:this.config.buid};this.parentViewController.thirdConnect(i)}t=!0}if(e.msg.ykOpensid){var o=this.config.callbackURL;Z({callbackURL:o+(o.indexOf("?")>-1?"&":"?")+"ykOpensid="+e.msg.ykOpensid})}this._userAccount&&co.setAccount(this._userAccount),Ce(this.model,e,{skip:t})},t.prototype.loginOnRisk=function(e,t){var i=this,o=this.view,n=this.model,r=this.config,s=e.userInfoToken||e.msg.userInfoToken;n.getVerifyIdentityModel({buid:r.buid,pic:r.pid,userInfoToken:s}),n.once("getVerifyIdentityModel:error",function(){o.showErrorTip(r.errorTips.errorCode.defaults),o.disableSubmitButton(!1)}),n.once("getVerifyIdentityModel:fail",function(e){if("AUTH_CODE_NOT_EXIST"===e.errorCode||"LOGIN_AUTH_CODE_NULL"===e.errorCode)return void o.showErrorTip(r.errorTips.account.auth_expired);o.showErrorTip(e.errorMsg),o.disableSubmitButton(!1)}),n.once("getVerifyIdentityModel:success",function(e){e.skip=!!t,e.riskErrorCode.indexOf("RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE")>-1&&(e.hasMobile=!0),i.parentViewController&&i.parentViewController.buildRiskDom(e)})},t.prototype.getQRCode=function(){this.config.isHasLogin||(this.qrView||(this.qrView=new uo({model:this.model}),this.qrView.delegate=this),this.qrView.getQRCode())},t.prototype.authLoginRedirect=function(e){if(!this.needAgreement()){var t=e&&e.currentTarget,i=t&&t.getAttribute("data-url");if(i){var o=H(),n=i+"&protocol="+window.location.protocol;document.domain=o;var r=window.open(n,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no");(window.ActiveXObject||"ActiveXObject"in window)&&(Yo.add(r,"thirdPartLoginWindow"),Yo.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(je("YK_thirdLogin_data")||"{}"),document.cookie="YK_thirdLogin_data=;domain=youku.com;expires="+new Date(1970,0,1).toGMTString()}))}}},t.prototype.authLogin=function(){var e=this,t=this.view,i=this.model,o=this.config.errorTips,n=t.$("#YT-state").val();if(!this.needAgreement()&&!this._authLoginLock){this._authLoginLock=!0;var r={state:n};window.mtee&&(r.UA=window.mtee.getUA()||"",r.jsToken=window.mtee.getUmidToken()||""),i.off("thirdPartyLogin:fail thirdPartyLogin:success"),i.once("thirdPartyLogin:fail",function(i){e._authLoginLock=!1,t.showErrorTip(i.errorMsg||o.errorCode.defaults)}),i.once("thirdPartyLogin:success",function(t){e._authLoginLock=!1,t.msg&&t.msg.needBindMobile?e.parentViewController&&e.parentViewController.thirdConnect(t.msg):Ce(i,t)}),i.thirdPartyLogin(r)}},t.prototype.needAgreement=function(){return!1===this.view.isAgreeBind&&(this.view.showErrorTip("è¯·å…ˆåŒæ„äº’ç»‘åè®®æ¡æ¬¾"),!0)},t.prototype.needRecommendLogin=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.qrView&&this.config.isIku&&this.qrView.disconnect(),this.view&&this.view.$el.hide(),this.recomLoginView=new No({data:e}),this.recomLoginView.delegate=this,this.parentViewController.view.append(this.recomLoginView)},t.prototype.bindExchange=function(){var e=this,t=this.recomLoginView||this.view;this.model.once("recomBindExchange:success",function(t){e.loginSuccess(t)}),this.model.once("recomBindExchange:fail",function(e){t.showErrorTip(e.errorMsg)}),this.model.recomBindExchange()},t.prototype.createAccount=function(){var e=this,t=this.config,i=this.recomLoginView||this.view;this.model.once("thirdpartyBind:success",function(t){e.loginSuccess(t)}),this.model.once("thirdpartyBind:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.thirdpartyBind({isLoginDirect:!0,formtoken:t.formtoken,tlsite:t.tlsite,tuid:t.recommendData.tuserInfoKey})},t.prototype.createMergeView=function(e){var t=this.model;(this.recomLoginView||this.view).$el.hide(),this.mergeView=new $o({model:t,vipCount:e}),this.mergeView.delegate=this,this.parentViewController.view.append(this.mergeView)},t.prototype.confirmSelectedAccount=function(e){this.recomLoginSubmit(e)},t.prototype.confirmBindExchange=function(){this.bindExchange()},t.prototype.clickToCreateAccount=function(){this.createAccount()},t.prototype.clickToMergeAccounts=function(e){this.createMergeView(e)},t.prototype.mergeLoginSuccess=function(e){this.loginSuccess(e)},t.prototype.mergeLoginExpire=function(){this.mergeView&&(this.mergeView.remove(),this.mergeView=null),this.viewWillUpdate()},t.prototype.backToLogin=function(){var e=this.recomLoginView||this.view;this.mergeView&&e&&(this.mergeView.$el.hide(),e.$el.show())},t.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},t.prototype.sliderCaptchaDidRemoved=function(){this.view.setContainerID(null),this.sliderPassedCallback=null},t.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback||(this.sliderPassedCallback=function(){return e.loginSubmit()}),setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},t.prototype.qrLoginFail=function(e){this.loginFail(e)},t.prototype.qrLoginSuccess=function(e){this.loginSuccess(e)},t.prototype.viewChangeMode=function(e,t){"qrcode"===e?this.getQRCode():this.qrView&&!this.config.isIku&&this.qrView.disconnect(),this.removeCaptchaComponent(t),this.isGetMobileCode=!1,this._loginLock=!1,this.view.disableSubmitButton(!1)},t.prototype.viewAppear=function(e){("qrcode"===e||this.config.isIku)&&this.getQRCode(),this.removeCaptchaComponent(e)},t.prototype.viewDisappear=function(){this.qrView&&this.qrView.disconnect()},t.prototype.viewWillUpdate=function(){this.updateView(),this.parentViewController.view.append(this.view),this.bindActions()},t}(Bo),Fo=function(e){var t="";e.isIku&&(t+='<div class="YT-reg-icon"></div>'),t+='<div class="YT-loginFrame-head"><div class="YT-loginFrame-title" id="YT-loginFrameTitle">',"mobile"==e.regModel[0]?t+="æ‰‹æœºæ³¨å†Œ":t+="é‚®ç®±æ³¨å†Œ",t+="</div>",-1!=e.regModel.indexOf("mobile")&&(t+='<div class="YT-change-logintype',"mobile"==e.regModel[0]&&(t+=" active"),t+='" id="YT-showMobileReg">æ‰‹æœºæ³¨å†Œ<i class="YT-iconfont">&#xe9a9;</i></div>'),-1!=e.regModel.indexOf("email")&&(t+='<div class="YT-change-logintype',"email"==e.regModel[0]&&(t+=" active"),t+='" id="YT-showEmailReg">é‚®ç®±æ³¨å†Œ<i class="YT-iconfont">&#xe9a9;</i></div>'),e.regNotice&&e.regNotice[0]&&(t+='<div class="YT-notice-box',"ad"==e.regNotice[0].noticeType&&(t+=" YT-notice-ad"),t+='"><i class="YT-notice-icon',"sys"!=e.regNotice[0].noticeType&&(t+=" YT-notice-gift"),t+='"',e.regNotice[0].iconUrl&&(t+=' style="background-image:url('+e.regNotice[0].iconUrl+')"'),t+="></i>",e.regNotice[0].link?t+='<a target="_blank" href="'+e.regNotice[0].link+'">'+e.regNotice[0].word+'<i class="YT-link-icon"></i></a>':t+="<span>"+e.regNotice[0].word+"</span>",t+="</div>"),t+='<div class="YT-errtips-box" style="display:none"></div></div><div class="YT-loginFrame-body">';var i=e.regModel;if(i)for(var o,n=-1,r=i.length-1;n<r;)o=i[n+=1],"email"==o?(t+='<form class="YT-form reg-form" name="YT-emailReg" id="YT-emailReg" method="post" autocomplete="off" onsubmit="return false"',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group"><label class="YT-form-label" for="YT-passport"><span class="YT-form-tips r-eAccount-tips">'+e.placeholders.reg.email+'</span><span class="YT-m-icon icon-user">&#xe9a8;</span></label><input type="text" id="YT-passport" name="YT-passport" maxlength="50" tabindex="1" class="YT-form-input account-input" autocomplete="off"></div><div class="YT-form-group"><label class="YT-form-label" for="YT-regPassword"><span class="YT-form-tips r-ePassword-tips">'+e.placeholders.reg.password+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><div class="YT-pwd-strong strong01" id="YT-pwdStrong"></div><input type="password" id="YT-regPassword" name="YT-regPassword" maxlength="16" tabindex="2" class="YT-form-input YT-pr30" autocomplete="off"></div><div class="YT-form-group"><label class="YT-form-label" for="YT-repeatPwd"><span class="YT-form-tips r-eRepeatPwd-tips">'+e.placeholders.reg.repeatPassword+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><input type="password" id="YT-repeatPwd" name="YT-repeatPwd" maxlength="16" tabindex="3" class="YT-form-input" onpaste="return false"></div><div class="YT-form-group YT-mobile-group no-icon"><label class="YT-form-label" for="YT-regPhone"><span class="YT-form-tips r-eMobile-tips">'+e.placeholders.reg.mobile+'</span><span class="YT-m-icon icon-phone"></span></label><input type="text" id="YT-regPhone" name="YT-regPhone" tabindex="4" maxlength="11" class="YT-form-input"><div class="YT-country-chouse-box"><div id="YT-countryCode-email" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div class="YT-form-group no-icon"><label class="YT-form-label" for="YT-eValidateCode"><span class="YT-form-tips short-tips r-eValidate-tips">'+e.placeholders.reg.validate+'</span><span class="YT-m-icon icon-password"></span></label><button type="submit" id="YT-eGetMobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–éªŒè¯ç </button><input type="text" id="YT-eValidateCode" name="YT-eValidateCode" maxlength="6" tabindex="5" class="YT-form-input short-input"></div><div id="YT-eRegCaptchaWrap"></div><div class="YT-form-group btn-group"><button type="submit" id="YT-eRegSubmit" data-custom-mid="regSubmit" data-process="æ­£åœ¨æ³¨å†Œ..." title="'+(e.registerSubmitWord||"æ³¨ å†Œ")+'" class="YT-form-btn"',e.registerSubmitStyle&&(t+=' style="'+e.registerSubmitStyle+'"'),t+=">"+(e.registerSubmitWord||"æ³¨ å†Œ")+"</button></div></form>"):"mobile"==o&&(t+='<form class="YT-form reg-form" name="YT-mobileReg" id="YT-mobileReg" method="post" autocomplete="off" onsubmit="return false"',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><label class="YT-form-label" for="YT-mPassport"><span class="YT-form-tips r-mAccount-tips">'+e.placeholders.reg.account+'</span><span class="YT-m-icon icon-phone"></span></label><input type="text" id="YT-mPassport" name="YT-mPassport" tabindex="1" maxlength="11" class="YT-form-input" autocomplate="off" data-gm-stat="H48654216;Register1;Phone_number=yes" /><div class="YT-country-chouse-box" data-gm-stat="H48654216;Register1;area=yes"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div class="YT-form-group"><label class="YT-form-label" for="YT-mRegPassword"><span class="YT-form-tips r-mPassword-tips">'+e.placeholders.reg.password+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><div class="YT-pwd-strong strong01" id="YT-pwdStrong2"></div><input type="password" id="YT-mRegPassword" name="YT-mRegPassword" maxlength="16" tabindex="2" class="YT-form-input YT-pr30" autocomplate="off" data-gm-stat="H48654216;Register1;Password=yes" /></div><div class="YT-form-group"><label class="YT-form-label" for="YT-mRepeatPwd"><span class="YT-form-tips r-mRepeatPwd-tips">'+e.placeholders.reg.repeatPassword+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><input type="password" id="YT-mRepeatPwd" name="YT-mRepeatPwd" maxlength="16" tabindex="3" class="YT-form-input" onpaste="return false;" data-gm-stat="H48654216;Register1;Confirm_password=yes"></div><div id="YT-sRegCaptchaWrap"></div><div class="YT-form-group no-icon"><label class="YT-form-label" for="YT-mValidateCode"><span class="YT-form-tips short-tips r-mValidate-tips">'+e.placeholders.reg.validate+'</span></label><button id="YT-mGetMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled data-gm-stat="H48654216;Register1;button=yes">èŽ·å–éªŒè¯ç </button><input type="text" id="YT-mValidateCode" name="YT-mValidateCode" maxlength="6" tabindex="4" class="YT-form-input short-input" data-gm-stat="H48654216;Register1;Verification_Code=yes"></div><div id="YT-mRegCaptchaWrap"></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group btn-group"><button type="submit" id="YT-mRegSubmit" data-custom-mid="regSubmit" data-process="æ­£åœ¨æ³¨å†Œ..." title="'+(e.registerSubmitWord||"æ³¨ å†Œ")+'" class="YT-form-btn"',e.registerSubmitStyle&&(t+=' style="'+e.registerSubmitStyle+'"'),t+=' data-gm-stat="H48654216;Register1;Register_button=yes">'+(e.registerSubmitWord||"æ³¨ å†Œ")+"</button></div></form>");if(t+='<div class="YT-form-group YT-remember"><span class="YT-fr"><a href="javascript:;" id="YT-gotoLogin" data-gm-stat="H48654216;Register1;Switch_login=yes">ç™»å½•</a></span><span><label for="YT-agreeRegRules" id="YT-rulesLabel" class="YT-check-label checked" data-gm-stat="H48654216;Register1;agree=yes"><input type="checkbox" id="YT-agreeRegRules" name="YT-agreeRegRules"></label>&nbsp;å·²é˜…è¯»å¹¶åŒæ„<span id="YT-rulesBody"><a href="'+e.regRules[1]+'" target="_blank">ã€Š'+e.regRules[0]+"ã€‹</a>",e.regRules.length>2&&(t+='<a href="'+e.regRules[3]+'" target="_blank">ã€Š'+e.regRules[2]+"ã€‹</a>"),t+="</span></span></div></div>",!0===e.regThirdPartLogin&&e.thirdPartUrlAry){t+='<div class="YT-loginFrame-foot hasthirdlist"><div class="YT-third-type"><span class="YT-text">å…¶ä»–æ–¹å¼ï¼š</span><div class="YT-third-part-wrap" id="YT-regThirdPartWrap">';var s={qq:"H48594750;loginQQ;loginQQ=yes",weibo:"H1509201135;loginweibo;loginweibo=yes",wechat:"H1510124655;loginweixin;loginweixin=yes",alipay:"H1507354093;zhifubao;zhifubao=yes",taobao:"H1510124656;logintaobao;logintaobao=yes"};t+='<div class="YT-third-part-list">';var a=e.thirdPartUrlAry;if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],t+='<span class="YT-third-part-item',l>4&&e.thirdPartUrlAry.length>5&&(t+=" hide"),t+='" data-link="'+c.link+'" data-site="'+c.site+'"><a href="javascript:;" title="ç”¨'+c.name+'è´¦å·ç™»å½•" class="YT-l-icon icon-'+c.site+'" data-gm-stat="'+(s[c.site]||"")+'"></a></span>';e.thirdPartUrlAry.length>5&&(t+='<span class="YT-third-btn show-all-third-btn"><a href="javascript:;" title="æ›´å¤š" class="YT-l-icon icon-more"></a></span><span class="YT-third-btn hide-third-btn" style="display:none"><a href="javascript:;" title="éšè—" class="YT-l-icon icon-more icon-hide"></a></span>'),t+="</div></div></div></div>"}return t},qo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-showEmailReg":"showEmailReg","click #YT-showMobileReg":"showMobileReg","click #YT-agreeRegRules":"checkAgreement","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","keyup #YT-passport":"checkSpaceInput","keyup #YT-mPassport":"checkSpaceInput","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-mPassport":"checkMobileNumber","blur #YT-regPhone":"checkMobileNumber","blur #YT-regPassword":"checkPassword","blur #YT-mRegPassword":"checkPassword","blur #YT-repeatPwd":"checkRepeatPassword","blur #YT-mRepeatPwd":"checkRepeatPassword"}},t.prototype.init=function(){e.prototype.init.call(this),this.id="YT-regFrame-main",this.className="YT-loginFrame-main fix-autofill",-1===window.location.hash.indexOf("reg_email")&&(this.config.regModel=["mobile"]),this.regMode=this.config.regModel[0],this.role="register",this.mobileCodeType=2,this.isAgreeRules=!1},t.prototype.created=function(){this.$el.html(Fo(this.config))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$emailView=this.find("#YT-emailReg"),this.$mobileView=this.find("#YT-mobileReg"),this.$showEmail=this.find("#YT-showEmailReg"),this.$showMobile=this.find("#YT-showMobileReg"),this.$loginTitle=this.find("#YT-loginFrameTitle"),this.$eSendCode=this.find("#YT-eGetMobileCode"),this.$mSendCode=this.find("#YT-mGetMobileCode"),this.$regPhone=this.find("#YT-regPhone"),this.$mPassport=this.find("#YT-mPassport"),this.$eValidCode=this.find("#YT-eValidateCode"),this.$mValidCode=this.find("#YT-mValidateCode"),this.checkMobile=this.checkMobile.bind(this),this.$mPassport.on("input change",this.checkMobile),this.$regPhone.on("input change",this.checkMobile),this.checkPwdStrength=this.checkPwdStrength.bind(this),this.find("#YT-mRegPassword").on("input change",this.checkPwdStrength),this.find("#YT-regPassword").on("input change",this.checkPwdStrength),this.config.regThirdPartLogin&&(this.thirdPartView=new ko({el:"#YT-regThirdPartWrap"}))},t.prototype.showEmailReg=function(){this.$showMobile.removeClass("active"),this.$showEmail.addClass("active"),this.$loginTitle.html("é‚®ç®±æ³¨å†Œ"),this.$emailView.show(),this.$mobileView.hide(),this.changeMode("email")},t.prototype.showMobileReg=function(){this.$showEmail.removeClass("active"),this.$showMobile.addClass("active"),this.$loginTitle.html("æ‰‹æœºæ³¨å†Œ"),this.$emailView.hide(),this.$mobileView.show(),this.changeMode("mobile")},t.prototype.checkSpaceInput=function(e){var t=this.$(e.currentTarget),i=t.val(),o=i.trim();i!==o&&t.val(o)},t.prototype.checkPwdStrength=function(e){var t=this.$(e.currentTarget.parentNode),i=F(e.target.value);t.find(".YT-pwd-strong").get(0).className="YT-pwd-strong strong"+i},t.prototype.checkPassword=function(e){this.isPasswordSick=!1,this.callDelegateFunc("viewCheckPassword",e.currentTarget)},t.prototype.checkRepeatPassword=function(e){var t=this.$(e.currentTarget).val(),i="mobile"===this.regMode?this.find("#YT-mRegPassword"):this.find("#YT-regPassword");t&&!$(i.val(),t)&&this.showErrorTip(this.config.errorTips.repeatPassword.matches)},t.prototype.checkAgreement=function(e){var t=e&&e.currentTarget;this.isAgreeRules=t&&t.checked},t.prototype.showLoginTip=function(e){var t=e;this.config.loginModel.indexOf("mobile")>-1?t+='ï¼Œå¯ä½¿ç”¨<a href="#" id="loginWithExistAccount">æ‰‹æœºå¿«æ·ç™»å½•</a>':t+='ï¼Œå¯ç›´æŽ¥<a href="#" id="loginWithExistAccount">ç™»å½•</a>',this.showErrorTip(t)},t.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"mobile"===this.regMode?"YT-mRegCaptchaWrap":"YT-eRegCaptchaWrap"},t.prototype.getMobilePhoneNumber=function(){return"mobile"===this.regMode?this.$mPassport.val():this.$regPhone.val()},t.prototype.getSendCodeBtn=function(){return"mobile"===this.regMode?this.$mSendCode:this.$eSendCode},t.prototype.getPassCodeInput=function(){return"mobile"===this.regMode?this.$mValidCode:this.$eValidCode},t.prototype.getSubmitButton=function(){return this.find("mobile"===this.regMode?"#YT-mRegSubmit":"#YT-eRegSubmit")},t.prototype.changeMode=function(e){e&&(this._regMode=this.regMode,this.regMode=e),this.resetSendCodeBtn(),this.clearErrorTip(),this.callDelegateFunc("viewChangeMode",e)},t.prototype.hide=function(){e.prototype.hide.call(this),this.find(".YT-pwd-strong").forEach(function(e){e.className="YT-pwd-strong"})},t}(wo),Uo=function(e){var t='<div class="YT-loginFrame-head YT-regSuc-head"><div class="YT-title-icon"><div class="icon"></div><div class="title">æ³¨å†ŒæˆåŠŸ</div></div></div><div class="YT-loginFrame-body">';return"RegPage"==e.regType?t+='<div class="YT-popFrame-subtitle">æ‚¨å¯ä»¥ä½¿ç”¨æ‰‹æœº'+e.hideMobileNum+'ç™»å½•æœ¬è´¦å·å“¦ã€‚</div><div class="YT-regSuc-nickname">ç³»ç»Ÿå›é€æ‚¨ä¸ªæ˜µç§°â€œ'+e.nickname+'â€ï¼Œ<br/>è‹¥ä¸æ»¡æ„ï¼Œæ‚¨å¯<a id="YT-modifyNickname" href="javascript:;">ä¿®æ”¹æ˜µç§°</a>ã€‚</div>':t+='<div class="YT-popFrame-subtitle">ç³»ç»Ÿå›é€æ‚¨ä¸ªæ˜µç§°ï¼Œè‹¥ä¸æ»¡æ„ï¼Œå¯ä¿®æ”¹</div><div class="YT-regSuc-nickname">æ˜µç§°ï¼š'+e.nickname+'</div><div class="YT-form-group btn-group"><button type="submit" id="YT-modifyNickname" title="å‰å¾€ä¿®æ”¹æ˜µç§°" class="YT-form-btn" data-gm-stat="H49607528;modifynickname;click=yes">å‰å¾€ä¿®æ”¹æ˜µç§°</button></div>',t+='<div class="YT-bt-action">',"RegPage"==e.regType?t+='<span class="callback-time"><i id="YT-callBack-time">'+(Math.max(0,e.countDownTime)||"5")+"</i>s</span>":t+='<span id="YT-callBack-time">'+(Math.max(0,e.countDownTime)||"5")+"</span>ç§’",t+='åŽï¼Œ<a href="javascript:;" id="YT-sucCallbackReg" data-gm-stat="H49607528;callback;click=yes">è¿”å›ž</a></div></div>'},Wo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-sucCallbackReg":"sucCallback","click #YT-modifyNickname":"openModifyPage"}},t.prototype.init=function(){e.prototype.init.call(this),this.config.regType&&(this.$(".step-undo").removeClass("step-undo").addClass("step-done"),this.$("#registeForm").hide(),this.$(".stepLine").attr("src","/static-resources/images/stepline_full.png")),this.id="YT-regFrame-main",this.className="YT-loginFrame-main fix-autofill",this.role="regSuc"},t.prototype.created=function(){this.$el.html(Uo(this.config))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$countNum=this.find("#YT-callBack-time"),this.countDown()},t.prototype.openModifyPage=function(){window.location.href="https://id.youku.com/modifyNicknameView.htm"},t.prototype.countDown=function(){var e=this,t=Math.max(0,this.config.countDownTime)||5;this._countTimer=setInterval(function(){t--,0===t?(e._countTimer=e.clearTimer(e._countTimer),e.sucCallback()):e.$countNum.html(t+"")},1e3)},t.prototype.sucCallback=function(){var e=this.config.callbackURL||this.config.callback;e?window.location.href=e:this.config.loginSuccess()},t}(wo),jo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.Actions=function(){return{"click #loginWithExistAccount":"loginWithExistAccount","click #YT-eGetMobileCode":"checkSendMobileCode","click #YT-mGetMobileCode":"checkSendMobileCode","click #YT-eRegSubmit":"checkSubmit","click #YT-mRegSubmit":"checkSubmit"}},t.prototype.init=function(){this.updateConfig(),this.view=new qo,this.view.delegate=this,this.model.on("registerConfirm:success",this.regSuccess,this),this.model.on("registerConfirm:fail",this.regFail,this),this.model.on("registerConfirm:error",this.regError,this),this.ali=new ho({type:"register"}),this.ali.delegate=this},t.prototype.destory=function(){this.model&&(this.model.off(),this.model=null),this.ali&&(this.ali.delegate=null,this.ali=null),e.prototype.destory.call(this)},t.prototype.updateConfig=function(){this.config=J()},t.prototype.checkSendMobileCode=function(e){var t=this,i=this.view,o="mobile"===i.regMode?"YT-mobileReg":"YT-emailReg",n=Ke(i.regMode,this.config);new io(o,n,function(o){o.length>0?i.showErrorTip(o[0].message):(i.clearErrorTip(),t.sendMobileCode(e))})._validateForm()},t.prototype.sendMobileCode=function(e){var t=this.view,i=t.$(e.currentTarget),o=i.attr("data-type")||"register";this.sendMobileCodeAction({bizType:o,accountType:t.regMode})},t.prototype.sendMobileCodeFail=function(){this.view.checkMobile()},t.prototype.sendMobileCodeNeedCaptcha=function(){this.view.setContainerID("YT-sRegCaptchaWrap")},t.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sendMobileCodeNeedCaptcha(),this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},t.prototype.checkSubmit=function(){var e=this,t=this.ali,i=this.view,o=this.config.errorTips,n="mobile"===i.regMode?"YT-mobileReg":"YT-emailReg",r=ze(i.regMode,this.config);if(!i.isAgreeRules)return void i.showErrorTip("è¯·å…ˆé˜…è¯»å¹¶åŒæ„æ³¨å†Œç›¸å…³åè®®");new io(n,r,function(n){if(n.length>0)i.showErrorTip(n[0].message);else{if(i.clearErrorTip(),i.isPasswordSick)return void i.showErrorTip(o.password.is_pwd_sick);if(i.needCaptcha){if(""===i.getCaptchaCode())return void i.showErrorTip(o.captcha.required);if(!i.getCaptchaState())return void i.showErrorTip(o.captcha.error)}if(!e.isGetMobileCode)return void i.showErrorTip(o.smsCode.noGet);if(t&&t.needSliderCaptcha&&!t.passSliderCaptcha)return t.getNCInstance(i.regMode),void i.showErrorTip(o.sliderCaptcha.required);e.regSubmit()}})._validateForm()},t.prototype.regSubmit=function(){if(!this._regLock){var e=this.view,t=this.config,i={template:"tempA",formtoken:t.formtoken,buid:t.buid,pid:t.pid,mode:t.mode,actionFrom:t.from||"",sendCodeType:e.isVoiceVerify?"voiceCode":"mobileCode",region:e.getCountryRegion()};t.configId&&(i.configId=t.configId),"email"===e.regMode&&(i.email=e.find("#YT-passport").val(),i.password=e.find("#YT-regPassword").val(),i.repeatPassword=e.find("#YT-repeatPwd").val(),i.bindMobile=e.getMobilePhoneNumber(),i.smsCode=e.getPassCodeInput().val()),"mobile"===e.regMode&&(i.mobile=e.find("#YT-mPassport").val(),i.password=e.find("#YT-mRegPassword").val(),i.repeatPassword=e.find("#YT-mRepeatPwd").val(),i.smsCode=e.getPassCodeInput().val()),e.needCaptcha&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||""),this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive"),this.model.registerConfirm(i),this._regLock=!0,e.disableSubmitButton()}},t.prototype.regError=function(e){this._regLock=!1,this.view.showErrorTip(e.message),this.view.disableSubmitButton(!1)},t.prototype.regFail=function(e){var t=this.ali,i=this.view,o=this.config.errorTips;switch(this._regLock=!1,i.disableSubmitButton(!1),i.needCaptcha&&i.changeCaptcha(),t&&t.needSliderCaptcha&&t.resetNCInstance(i.regMode),e.errorCode){case"FORM_TIMEOUT":i.showErrorTip(o.errorCode.regTimeout);break;case"NEED_CAPTCHA":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":case"CAPTCHA_TIMEOUT":i.createCaptcha(),i.showErrorTip(e.errorMsg);break;case"NEED_SLIDER_CAPTCHA":e.errorMsg&&i.showErrorTip(e.errorMsg),t&&!t.needSliderCaptcha&&t.resetNCInstance(i.regMode);break;case"CAPTCHA_ERROR":i.needCaptcha||i.createCaptcha(),i.showErrorTip(o.errorCode.CAPTCHA_ERROR);break;case"MOBILE_CODE_ERROR":i.showErrorTip(o.errorCode.MOBILE_CODE_ERROR),i.getPassCodeInput().val("");break;case"MOBILE_ALREADY_EXIST":i.showLoginTip(o.errorCode.MOBILE_ALREADY_EXIST),i.getPassCodeInput().val("");break;default:i.showErrorTip(e.errorMsg||o.errorCode.defaults)}},t.prototype.regSuccess=function(e){this._sendStat("voice","success"),this._regLock=!1,this.config.showSuccessPage&&(Z({nickname:e.msg.nickname}),this.parentViewController.hideView(),this.parentViewController.view.append(new Wo)),Ce(this.model,e,{skip:this.config.showSuccessPage||!1})},t.prototype.checkPasswordValid=function(e){var t=this.view,i=this.model,o=this.config;i.off("checkPasswordValid:fail checkPasswordValid:success"),i.once("checkPasswordValid:fail",function(e){if("FORM_TIMEOUT"===e.errorCode)return void(t.isPasswordSick=!1);t.showErrorTip(e.errorMsg),t.isPasswordSick=!0}),i.once("checkPasswordValid:success",function(){t.clearErrorTip(),t.isPasswordSick=!1}),i.checkPasswordValid({bizType:"register",formtoken:o.formtoken,buid:o.buid,pid:o.pid,password:e.value,jsToken:window.mtee&&window.mtee.getUmidToken()||""})},t.prototype.loginWithExistAccount=function(e){if(e&&e.preventDefault(),this.parentViewController){var t=this.view.getCountryCode(),i=this.view.$countryRegion,o=this.view.getMobilePhoneNumber();-1===this.config.loginModel.indexOf("mobile")&&(o=86===t?o:"00"+t+o),co.setRegExistAccountInfo({mobile:o,loginCountry:{countryCode:i.attr("data-code"),countryName:i.attr("data-name"),region:i.attr("data-region")}}),this.parentViewController.buildLoginDom()}},t.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},t.prototype.sliderCaptchaDidRemoved=function(){this.view.setContainerID(null),this.sliderPassedCallback=null},t.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback||(this.sliderPassedCallback=function(){return e.regSubmit()}),setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},t.prototype.viewCheckPassword=function(e){var t=this,i=this.view,o="mobile"===i.regMode?"YT-mobileReg":"YT-emailReg",n=Ke(i.regMode,this.config),r=[n[1]];new io(o,r,function(o){o.length>0?i.showErrorTip(o[0].message):(i.clearErrorTip(),t.checkPasswordValid(e))})._validateForm()},t.prototype.viewChangeMode=function(e,t){this.removeCaptchaComponent(t),this.isGetMobileCode=!1,this._regLock=!1,this.view.disableSubmitButton(!1)},t}(Bo),Ho=function(e){var t="";return"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"!=e.riskErrorCode&&"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE"!=e.riskErrorCode&&"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE"!=e.riskErrorCode&&"RISK_USER_WARN_FOR_BIND_MOBILE"!=e.riskErrorCode||(t+='<div id="YT-risk-mobile"><div class="YT-loginFrame-head YT-risk-head">',e.hasMobile?t+='<div class="YT-bindTips">è¯·éªŒè¯èº«ä»½<p class="sub-title">äº²çˆ±çš„ <strong class="YT-c666">'+(e.passport||"ä¼˜é…·ç”¨æˆ·")+"</strong> ï¼Œå°é…·ä¸ºæ‚¨çš„è´¦å·å®‰å…¨ä¿é©¾æŠ¤èˆªï¼Œæœ¬æ¬¡ç™»å½•éœ€è¦éªŒè¯æ‰‹æœºå“¦</p></div>":"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"!=e.riskErrorCode&&(t+='<div class="YT-bindTips">ä¸ºäº†è´¦å·å®‰å…¨ï¼Œè¯·ç»‘å®šæ‰‹æœº<p class="sub-title">äº²çˆ±çš„ <strong class="YT-c666">'+(e.passport||"ä¼˜é…·ç”¨æˆ·")+"</strong> ï¼Œå°é…·æŽæŒ‡ä¸€ç®—ï¼Œç»‘å®šæ‰‹æœºå¯ä»¥å¤§å¤§æå‡å®‰å…¨æ€§å“¦</p></div>"),t+='<div class="YT-errtips-box" style="display:none;"></div></div><div class="YT-loginFrame-body"><form class="YT-form YT-login-form" id="YT-mobileRisk" name="YT-mobileRisk" method="post" onsubmit="return false;" autocomplete="off">',e.hasMobile?t+='<div class="YT-form-group YT-risk-hasMobile">æ‰‹æœºå·ç ï¼š'+e.mobileNo+'<input type="hidden" id="YT-rAccount" name="YT-rAccount" value="'+e.mobileNo+'" /></div>':t+='<div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-rAccount" name="YT-rAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off" /><label class="YT-form-label" for="YT-rAccount"><span class="YT-form-tips YT-l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box"><div class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+e.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div>',t+='<div id="YT-rCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-rGetMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode',e.hasMobile||(t+=" disabled"),t+='" ',e.hasMobile||(t+="disabled"),t+='>èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-rPassword" name="YT-rPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" /><label class="YT-form-label" for="YT-rPassword"><span class="YT-form-tips short-tips">åŠ¨æ€å¯†ç </span><span class="YT-m-icon icon-password"></span></label></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-rLoginSubmit" class="YT-form-btn">',e.hasMobile?t+="éªŒè¯å¹¶ç™»å½•":t+="ç»‘å®šå¹¶ç™»å½•",t+='</button></div><div class="YT-sec-tips"></div>',
"RISK_USER_WARN_FOR_BIND_MOBILE"==e.riskErrorCode?t+='<div class="YT-bt-info"><a href="javascript:;" id="YT-direct-login">æš‚ä¸ç»‘å®š</a></div>':"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE"!=e.riskErrorCode&&(t+='<div class="YT-bt-info">',e.hasMobile?t+='æ‰‹æœºå·ç ä¸å¯ç”¨ï¼Ÿ<a href="javascript:;" id="YT-direct-change"><strong>ç›´æŽ¥æ›´æ¢</strong></a>':t+='<a href="javascript:;" id="YT-tips">é‡åˆ°é—®é¢˜ï¼Ÿ<span class="YT-bt-tips"><em>æ”¶ä¸åˆ°çŸ­ä¿¡ï¼Ÿæ‰‹æœºå·ç ä¸å¯ç”¨ï¼Ÿ</em><span>è¯·æ‹¨æ‰“å®¢æœç”µè¯ï¼š400 8103 568æˆ–è”ç³»<strong id="telLine">åœ¨çº¿å®¢æœ</strong><i class="YT-cross-bt"><del></del></i></span></span></a>',t+="</div>"),t+="</form></div></div>"),"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"==e.riskErrorCode&&(t+='<div class="YT-loginFrame-body" id="YT-warn-pwd" style="display:none"><form class="YT-form YT-login-form" action="'+e.jumpUrl+'&direct=true" name="YT-mobileRisk" method="post" autocomplete="off"><div class="YT-riskPassword-icon YT-sucRisk-icon">&nbsp;</div><div class="YT-form-group YT-btn-group"><button type="submit" class="YT-form-btn">é‡ç½®ç™»å½•å¯†ç </button></div></form><div class="YT-sec-tips">ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ç¬¦å·çš„å¯†ç ç»„åˆï¼Œå¯ä»¥ä½¿è´¦å·å¯†ç æ›´å®‰å…¨</div><div class="YT-bt-info risk-bt-info"><a href="javascript:;" id="YT-direct-login">ç›´æŽ¥ç™»å½•</a></div></div>'),"RISK_USER_WARN_RESET_PWD"==e.riskErrorCode&&(t+='<div class="YT-loginFrame-body"><form class="YT-form YT-login-form" action="'+e.jumpUrl+'&direct=true" name="YT-mobileRisk" method="post" autocomplete="off"><div class="YT-riskPassword-icon">&nbsp;</div><div class="YT-loginFrame-head YT-risk-head YT-text-center"><div class="YT-bindTips"><p class="sub-title">å°é…·å‘çŽ°è´¦å· <strong class="YT-c666">'+(e.passport||"ä¼˜é…·ç”¨æˆ·")+'</strong> å·²ç»è¢«åè›‹ç›¯ä¸Šäº†ï¼Œå»ºè®®è¿›è¡Œå®‰å…¨å‡çº§å“¦</p></div></div><div class="YT-form-group YT-btn-group"><button type="submit" class="YT-form-btn">ç«‹å³é‡ç½®</button></div></form><div class="YT-sec-tips YT-text-center">ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ç¬¦å·çš„å¯†ç ç»„åˆï¼Œå¯ä»¥ä½¿è´¦å·å¯†ç æ›´å®‰å…¨</div><div class="YT-bt-info risk-bt-info"><a href="javascript:;" id="YT-direct-login">è·³è¿‡</a></div></div>'),t},Ko=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #telLine":"openServicePage","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-rAccount":"checkMobileNumber"}},t.prototype.init=function(){e.prototype.init.call(this),this.id="YT-riskFrame-main",this.className="YT-riskFrame-main",this.riskData=this.config.riskData,this.role="risk"},t.prototype.created=function(){var e=Object.assign(this.riskData,{loginCountry:this.config.loginCountry});this.$el.html(Ho(e))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$rSendCode=this.find("#YT-rGetMobileCode"),this.$rAccount=this.find("#YT-rAccount"),this.$rPassword=this.find("#YT-rPassword"),this.$rAccount.on("input change",this.checkMobile.bind(this))},t.prototype.getContainerID=function(){return"YT-rCaptchaWrap"},t.prototype.getMobilePhoneNumber=function(){return this.$rAccount.val()},t.prototype.getSendCodeBtn=function(){return this.$rSendCode},t.prototype.getPassCodeInput=function(){return this.$rPassword},t.prototype.getSubmitButton=function(){return this.find("#YT-rLoginSubmit")},t.prototype.showResetPasswordWarning=function(){"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"===this.riskData.riskErrorCode&&(this.find("#YT-risk-mobile").hide(),this.find("#YT-warn-pwd").show())},t.prototype.openServicePage=function(){this.openPage("http://os3.cs.tudou.com/new/client.php?arg=yktd&style=28")},t.prototype.openPage=function(e){if(!e)return void(this.popwin=window.open("","_blank"));if(this.config.isIku){var t=document.getElementById("openSchemeLink");t||(t=document.createElement("a"),t.id="openSchemeLink",t.style.display="none",document.body.appendChild(t),t.setAttribute("target","_blank")),t.href=e,t.click()}else this.popwin?(this.popwin.location=e,this.popwin=null):window.open(e)},t}(wo),zo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.Actions=function(){return{"click #YT-rGetMobileCode":"sendMobileCode","click #YT-direct-change":"modifyMobile","click #YT-direct-login":"directLogin","click #YT-rLoginSubmit":"checkSubmit"}},t.prototype.init=function(){this.updateConfig(),this.view=new Ko,this.view.delegate=this,this.model=new xi,this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:error loginConfirm:fail",this.loginFail,this),this.ali=new ho({type:"login"}),this.ali.delegate=this},t.prototype.updateConfig=function(){this.config=J(),this.riskData=this.config.riskData},t.prototype.sendMobileCode=function(){var e=this.riskData,t=e.hasMobile;this.sendMobileCodeAction({hasMobile:t,bizType:t?"verify_user":"add_mobile",formtoken:e.formtoken||"",userInfoToken:e.userInfoToken||""})},t.prototype.sendMobileCodeFail=function(){this.view.disableSendCodeButton(!1)},t.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},t.prototype.checkSubmit=function(){var e=this,t=this.view,i=Qe(this.config);new io("YT-mobileRisk",i,function(i){if(i.length>0)t.showErrorTip(i[0].message);else{if(t.clearErrorTip(),!e.isGetMobileCode)return void t.showErrorTip("è¯·å…ˆèŽ·å–åŠ¨æ€å¯†ç ");e.loginSubmit()}})._validateForm()},t.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.config,i=e.getPassCodeInput().val(),o=e.isVoiceVerify?"voiceCode":"mobileCode",n=this.riskData.userInfoToken,r={bizType:"verify_user",buid:t.buid,pid:t.pid,formtoken:this.riskData.formtoken,userInfoToken:n,sendCodeType:o,verifyCode:i};if(this.useAuthcode&&(r.sendCodeType="authCode"),this.riskData.hasMobile||(r.bizType="add_mobile",r.receiver=e.getMobilePhoneNumber(),r.region=e.getCountryRegion()),t.customParam)for(var s in t.customParam)r[s]=t.customParam[s];this.model.loginConfirm(r,this.riskData.hasMobile?"verify_login":"bind_login"),this._loginLock=!0,e.disableSubmitButton()}},t.prototype.loginFail=function(e){var t=this.view;this._loginLock=!1,t.disableSubmitButton(!1),t.showErrorTip(e.errorMsg||e.message)},t.prototype.loginSuccess=function(e){var t=this;if(this._loginLock=!1,this.view.clearErrorTip(),e.msg.ykOpensid){var i=this.config.callbackURL;if(-1===i.indexOf("ykOpensid=")){Z({callbackURL:i+(i.indexOf("?")>-1?"&":"?")+"ykOpensid="+e.msg.ykOpensid})}}this.model.checkLogin({buid:this.config.buid,pid:this.config.pid},function(e){"success"===e.result&&e.msg.login&&(t.riskData.skip?t.directLogin():(t.view.showResetPasswordWarning(),Ce(t.model,e)))})},t.prototype.modifyMobile=function(){var e=this;if(!this._modifyLock){var t=this.view,i=this.model,o=this.config,n=this.riskData,r={bizType:"verify_user",IsFromSdk:"false",sdkUserInfoToken:"false",pid:o.pid,mobileNo:n.mobileNo,passport:n.passport,riskErrorCode:n.riskErrorCode,userInfoToken:n.userInfoToken,formtoken:n.formtoken};n.jumpUrl&&(r.jumpUrl=n.jumpUrl),n.hasMobile||(r.bizType="add_mobile");t.openPage(),i.off("modifyMobile:error modifyMobile:fail modifyMobile:success"),i.once("modifyMobile:error",function(){t.openPage("https://id.youku.com/modifyMobileByTradeView.htm"),e._modifyLock=!1}),i.once("modifyMobile:fail",function(i){"SYS_EXCEPTION"===i.errorCode?t.openPage("https://id.youku.com/modifyMobileByTradeView.htm"):t.showErrorTip(i.errorMsg),e._modifyLock=!1}),i.once("modifyMobile:success",function(i){e.checkVerifyResult(i.msg.token),t.openPage(i.msg.modifyMobileUrl),e._modifyLock=!1}),this._modifyLock=!0,this.model.modifyMobile(r)}},t.prototype.checkVerifyResult=function(e){var t=this,i=this.view;e&&(this._checkTimer&&clearInterval(this._checkTimer),this._checkTimer=setInterval(function(){t.model.verifyResult({pid:t.config.pid,token:e},function(e){"S"===e.msg.state?(clearInterval(t._checkTimer),t._checkTimer=null,t.useAuthcode=!0,i.getPassCodeInput().val(e.msg.authCode),t.loginSubmit()):"SYS_EXCEPTION"===e.errorCode||null==e.msg.state?(clearInterval(t._checkTimer),t._checkTimer=null,i.showErrorTip(t.config.errorTips.account.auth_expired)):""!==e.errorMsg&&(clearInterval(t._checkTimer),t._checkTimer=null,i.showErrorTip(e.errorMsg))})},3e3))},t.prototype.directLogin=function(){var e=this.config;e.callbackURL?window.location.href=e.callbackURL:e.loginSuccess()},t.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},t.prototype.sliderCaptchaDidRemoved=function(){this.sliderPassedCallback=null},t.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback&&setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},t}(Bo),Qo=function(e){var t='<div class="YT-loginFrame-head YT-loginFrame-head-sub"><div class="YT-loginFrame-title" id="YT-loginFrameTitle">ä¸ºäº†è´¦å·å®‰å…¨ï¼Œè¯·ç»‘å®šæ‰‹æœº</div>';return e.bindMobileRequired!=undefined&&(t+='<div class="YT-loginFrame-sub-title">ä¾ã€Šç½‘ç»œå®‰å…¨æ³•ã€‹è¦æ±‚ï¼Œéœ€ç»‘å®šæ‰‹æœºè®©è´¦å·æ›´å®‰å…¨</div>'),t+='<div class="YT-errtips-box" style="display:none"></div></div><div class="YT-loginFrame-body">',e.mobile&&(t+='<div id="YT-bindMobile-hasAccount"><form class="YT-form YT-login-form" action="#" name="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off"><div class="YT-hasMobile-icon"></div><div class="YT-bindTips YT-bigSize">'+e.mobile+'</div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-hasMobileSubmit" class="YT-form-btn" data-process="æ­£åœ¨è¿›å…¥..." title="ç™»å½•å¹¶ç»‘å®š">ç™»å½•å¹¶ç»‘å®š</button></div><div class="YT-third-bottom"><a href="javascript:;" class="YT-popLink" id="YT-use-other">ä½¿ç”¨å…¶å®ƒæ‰‹æœºå·</a></div></form></div>'),t+='<div id="YT-bindMobile-noAccount"',e.mobile&&(t+=' style="display:none"'),t+='><form class="YT-form YT-login-form" action="#" name="YT-mobileLogin" id="YT-bindMobile" method="post" onsubmit="return false;" autocomplete="off"><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-bindMobile-mAccount" name="YT-bindMobile-mAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off"><label class="YT-form-label" for="YT-bindMobile-mAccount"><span class="YT-form-tips l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box"><div class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+e.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div id="YT-bindCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-bindMobile-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–éªŒè¯ç </button><input type="text" id="YT-bindMobile-getMobile" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" /><label class="YT-form-label" for="YT-bindMobile-getMobile"><span class="YT-form-tips short-tips">éªŒè¯ç </span><span class="YT-m-icon icon-password"></span></label></div><div id="YT-bindSubmitCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-noMobileSubmit" tabindex="3" class="YT-form-btn" data-process="æ­£åœ¨è¿›å…¥..." title="ç™»å½•å¹¶ç»‘å®š">ç™»å½•å¹¶ç»‘å®š</button></div></form>',0==e.bindMobileRequired&&(t+='<div class="bind-bt-info"><span href="javascript:;" id="YT-direct-login">æš‚ä¸ç»‘å®š</span></div>'),t+="</div></div>"},Go=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-use-other":"useOtherAccount","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-bindMobile-mAccount":"checkMobileNumber"}},t.prototype.init=function(){e.prototype.init.call(this),this.className="YT-third-bind-main",this.role="third-bind"},t.prototype.created=function(){var e=this.config.thirdPartData||{};e=Object.assign(e,{loginCountry:this.config.loginCountry}),this.$el.html(Qo(e)),this.hasMobile=!!e.mobile},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.$bSendCode=this.find("#YT-bindMobile-getMobileCode"),this.$bPassword=this.find("#YT-bindMobile-getMobile"),this.$bAccount=this.find("#YT-bindMobile-mAccount"),this.$bAccount.on("input change",this.checkMobile.bind(this))},t.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"YT-bindCaptchaWrap"},t.prototype.getMobilePhoneNumber=function(){return this.$bAccount.val()},t.prototype.getSendCodeBtn=function(){return this.$bSendCode},t.prototype.getPassCodeInput=function(){return this.$bPassword},t.prototype.getSubmitButton=function(){return this.hasMobile?this.find("#YT-hasMobileSubmit"):this.find("#YT-noMobileSubmit")},t.prototype.useOtherAccount=function(){this.hasMobile=!1,this.clearErrorTip(),this.find("#YT-bindMobile-hasAccount").hide(),this.find("#YT-bindMobile-noAccount").show()},t}(wo),Xo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.Actions=function(){return{"click #YT-bindMobile-getMobileCode":"sendMobileCode","click #YT-hasMobileSubmit":"loginSubmit","click #YT-noMobileSubmit":"loginSubmit","click #YT-direct-login":"skipBindMobile"}},t.prototype.init=function(){this.updateConfig();var e=this.thirdConfig;if(this.model=new xi,!0===e.bindMobileRequired?(this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:error loginConfirm:fail",this.loginFail,this)):!1===e.bindMobileRequired?(this.model.on("modifyUserInfo:success",this.loginSuccess,this),this.model.on("modifyUserInfo:error modifyUserInfo:fail",this.loginFail,this)):(this.model.on("bindMobileConfirm:success",this.loginSuccess,this),this.model.on("bindMobileConfirm:error bindMobileConfirm:fail",this.loginFail,this),this.model.on("recomLoginConfirm:success",this.loginSuccess,this),this.model.on("recomLoginConfirm:error recomLoginConfirm:fail",this.loginFail,this)),!1!==e.isNewUser||e.bindMobileRequired!==undefined)this.createThirdBindView();else{if(e.recommendData)return void this.needRecommendLogin(e.recommendData);this.checkLogin()}},t.prototype.updateConfig=function(){this.config=J(),this.thirdConfig=this.config.thirdPartData},t.prototype.createThirdBindView=function(){this._loginLock=!1,this.recomLoginView&&this.recomLoginView.$el.hide(),this.view&&(this.view.$el.hide(),this.view.remove()),this.view=new Go,this.view.delegate=this,this.ali=new ho({type:"login"}),this.ali.delegate=this,this.parentViewController&&(this.parentViewController.view.append(this.view),this.bindActions())},t.prototype.hideView=function(){this.view&&this.view.$el.hide(),this.recomLoginView&&this.recomLoginView.$el.hide(),this.mergeView&&this.mergeView.$el.hide()},t.prototype.checkLogin=function(){var e=this.model,t=this.config;e.checkLogin({buid:t.buid,pid:t.pid},function(t){"success"===t.result&&t.msg.login&&Ce(e,t)})},t.prototype.sendMobileCode=function(){var e=this.thirdConfig;this.sendMobileCodeAction({bizType:e.userInfoToken&&!e.isFromRecommend?"add_mobile":"bind_mobile",formtoken:e.formtoken,userInfoToken:e.userInfoToken})},t.prototype.sendMobileCodeFail=function(){this.view.checkMobile()},t.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},t.prototype.recomLoginSubmit=function(e){var t=this.thirdConfig;this.model.recomLoginConfirm({tuid:t.tuid,buid:t.buid,pid:t.pid,formtoken:t.formtoken,tuserInfoKey:t.recommendData.tuserInfoKey,userKey:e})},t.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.thirdConfig,i={tuid:t.tuid,buid:t.buid,pid:t.pid,formtoken:t.formtoken,callback:t.callback};if(t.tlsite&&(i.tlsite=t.tlsite),t.isTlsite&&(i.isCheckBind=1),t.loginForInterflow&&(i.loginForInterflow=!0),t.isFromRecommend&&(i.isFromRecommend=!0,i.tuid=t.tuserInfoKey||t.recommendData.tuserInfoKey),e.needCaptcha&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=t.UA||window.mtee.getUA(),i.jsToken=t.jsToken||window.mtee.getUmidToken()||""),!e.hasMobile){if(i.mobile=e.getMobilePhoneNumber(),i.region=e.getCountryRegion(),i.mobileCode=e.getPassCodeInput().val(),i.sendCodeType=e.isVoiceVerify?"voiceCode":"mobileCode",i.bindNewMobile=!0,""===i.mobile)return void e.showErrorTip("è¯·è¾“å…¥æ‰‹æœºå·ç ");if(!D(i.mobile,i.region))return void e.showErrorTip("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ");if(!this.isGetMobileCode)return void e.showErrorTip("è¯·å…ˆèŽ·å–éªŒè¯ç ");if(""===i.mobileCode)return void e.showErrorTip("è¯·è¾“å…¥éªŒè¯ç ");this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive")}t.userInfoToken&&(i.userInfoToken=t.userInfoToken,i.bizType=t.userInfoToken&&!t.isFromRecommend?"add_mobile":"bind_mobile",i.formtoken=t.formtoken,i.verifyCode=i.mobileCode),t.bindMobileRequired?(i.buid=t.buid,i.pid=t.pid,i.receiver=i.mobile,this.model.loginConfirm(i,"bind_login")):!1===t.bindMobileRequired?(i.passport=i.mobile,i.modifyType=i.bizType.split("_")[0],i.passportType=i.bizType.split("_")[1],this.model.modifyUserInfo(i)):this.model.bindMobileConfirm(i),this._loginLock=!0,e.disableSubmitButton()}},t.prototype.loginFail=function(e){var t=this,i=this.recomLoginView||this.view;if(this._loginLock=!1,i.disableSubmitButton(!1),"NEED_RECOMMEND_LOGIN"===e.errorCode){var o=e.msg.recommendData||{};return this.thirdConfig.recommendData=o,this.thirdConfig.formtoken=e.msg.formtoken||"",void this.needRecommendLogin(o)}if("USER_ALREADY_BIND"===e.errorCode){var n=e.msg.bindedData||{};return void i.confirmBindExchange(n)}if("BIND_MOBILE_REQUIRED"===e.errorCode)return this.thirdConfig.formtoken=e.formtoken||"",this.thirdConfig.tuserInfoKey=e.tuserInfoKey||"",this.thirdConfig.userInfoToken=e.userInfoToken||"",this.thirdConfig.isFromRecommend=!0,void this.createThirdBindView();i.showErrorTip(e.errorMsg||e.message),this.addCaptchaComponent({errorCode:e.errorCode,mode:"mobile",needSliderCallback:function(){t.sliderPassedCallback=function(){return t.loginSubmit()},t.view.setContainerID("YT-bindSubmitCaptchaWrap")},createCaptchaCallback:function(){t.view.setContainerID("YT-bindSubmitCaptchaWrap")}})},t.prototype.loginSuccess=function(){var e=this;this._sendStat("voice","success"),this._loginLock=!1,this.view.clearErrorTip(),this.model.checkLogin({buid:this.thirdConfig.buid,pid:this.thirdConfig.pid},function(t){"success"===t.result?t.msg.login&&Ce(e.model,t):window.parent.close()})},t.prototype.needRecommendLogin=function(e){var t=this,i=new No({type:"bind",tlsite:this.thirdConfig.tlsite,data:e});setTimeout(function(){t.view?(t.view.$el.hide(),t.recomLoginView=i,t.recomLoginView.delegate=t):(t.parentViewController.hideView(),t.view=i,t.view.delegate=t),t.config.isIku&&(t.parentViewController.view.el.className=""),t.parentViewController.view.append(i)},0)},t.prototype.bindExchange=function(){var e=this,t=this.recomLoginView||this.view;this.model.once("recomBindExchange:success",function(t){e.loginSuccess(t)}),this.model.once("recomBindExchange:fail",function(e){t.showErrorTip(e.errorMsg)}),this.model.recomBindExchange()},t.prototype.createAccount=function(){var e=this,t=this.thirdConfig,i=this.recomLoginView||this.view;this.model.once("thirdpartyBind:success",function(t){e.loginSuccess(t)}),this.model.once("thirdpartyBind:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.thirdpartyBind({isLoginDirect:!0,formtoken:t.formtoken,tlsite:t.tlsite,tuid:t.recommendData.tuserInfoKey})},t.prototype.createMergeView=function(e){var t=this.model;(this.recomLoginView||this.view).$el.hide(),this.mergeView=new $o({model:t,vipCount:e}),this.mergeView.delegate=this,this.parentViewController.view.append(this.mergeView)},t.prototype.skipBindMobile=function(){var e=this.config;e.callbackURL?window.location.href=e.callbackURL:e.loginSuccess()},t.prototype.confirmSelectedAccount=function(e){this.recomLoginSubmit(e)},t.prototype.confirmBindExchange=function(){this.bindExchange()},t.prototype.clickToCreateAccount=function(){this.createAccount()},t.prototype.clickToMergeAccounts=function(e){this.createMergeView(e)},t.prototype.mergeLoginSuccess=function(e){this.loginSuccess(e)},t.prototype.mergeLoginExpire=function(){this.mergeView&&(this.mergeView.remove(),this.mergeView=null),this.parentViewController&&this.parentViewController.loginVC&&this.parentViewController.loginVC.viewWillUpdate()},t.prototype.backToLogin=function(){var e=this.recomLoginView||this.view;this.mergeView&&e&&(this.mergeView.$el.hide(),e.$el.show())},t.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},t.prototype.sliderCaptchaDidRemoved=function(){this.sliderPassedCallback=null},t.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback&&setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},t}(Bo),Jo=function(e){return'<div class="YT-loginFrame-head has-login-title">æ£€æµ‹åˆ°æ‚¨å·²ç™»å½•çš„ä¼˜é…·åœŸè±†è´¦å·</div><div class="YT-loginFrame-body YT-form"> <div class="user-avatar"> <img src="'+(e.avatar||"/static-resources/images/suc.png")+'"> <div class="avatar-mask"></div> </div> <div class="user-nickname">'+(e.nickName||"")+'</div> <div class="change-account"><a href="javascript:;" id="changeAccount">æ›´æ¢è´¦å·</a></div> <div class="YT-form-group YT-btn-group"> <a class="YT-form-btn" href="'+e.partnerCallbackURL+'">å¿«é€Ÿç™»å½•</a> </div></div><div class="YT-partner-foot"> <a href="'+(e.partnerGoBackURL||"#")+'">'+(e.partnerGoBackTitle||"è¿”å›žå‰é¡µ")+"</a></div>"},Zo=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.init=function(){this.config=J(),this.className="YT-partner-hasLogin"},t.prototype.created=function(){var e=this.config;e.partnerCallbackURL=e.callbackURL+(e.callbackURL.indexOf("?")>-1?"&":"?")+"ykOpensid="+e.ykOpensid,this.$el.html(Jo(e))},t}(ei),en=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.Actions=function(){return{"click #changeAccount":"changeAccount"}},t.prototype.init=function(){this.config=J(),this.view=new Zo,this.view.delegate=this},t.prototype.changeAccount=function(){this.parentViewController&&(this.parentViewController.buildLoginDom(),this.destory())},t}(oi),tn=function(e){var t='<div class="YT-loginFrame-body"> <div class="YT-header"> <div class="YT-header-bg verify-icon"></div> ';return e.useSliderCaptcha?t+=" <p>ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·æ‹–åŠ¨æ»‘å—<br>è¿›è¡Œå®‰å…¨éªŒè¯</p> ":t+=" <p>ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·è¿›è¡Œå›¾ç‰‡éªŒè¯</p> ",t+=' </div> <div class="YT-form"> <div class="YT-errtips-box" style="display:none"></div> <div id="YT-vCaptchaWrap" class="YT-captcha-wrap"></div> ',e.useSliderCaptcha||(t+=' <div class="YT-form-group"> <button type="button" class="YT-form-btn" id="YT-verifySubmit">æäº¤å¹¶éªŒè¯</button> </div> '),t+=" </div></div>"},on=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.events=function(){return{"click #YT-verifySubmit":"verifySubmit"}},t.prototype.init=function(){this.config=J(),this.className="YT-verifyFrame-main",this.options.useSliderCaptcha===undefined&&(this.options.useSliderCaptcha=!0)},t.prototype.created=function(){var e=this.options.useSliderCaptcha;this.$el.html(tn({useSliderCaptcha:e}))},t.prototype.mounted=function(){e.prototype.mounted.call(this),this.options.useSliderCaptcha?(this.ali=new ho({type:"login"}),this.ali.delegate=this,this.ali.getNCInstance()):this.createCaptcha()},t.prototype.remove=function(){this.ali&&this.options.useSliderCaptcha?(this.ali.delegate=null,this.ali.removeNCInstance(),this.ali=null):this.removeCaptcha(),e.prototype.remove.call(this)},t.prototype.getContainerID=function(){return"YT-vCaptchaWrap"},t.prototype.verifySubmit=function(){var e=this.getCaptchaCode();if(""===e)return void this.showErrorTip(this.config.errorTips.validate.required);this.callDelegateFunc("verifyDidSubmit",{code:e})},t.prototype.sliderCaptchaLoadWithContainerID=function(){return this.getContainerID()},t.prototype.sliderCaptchaPassed=function(e){this.callDelegateFunc("verifyDidSubmit",e)},t}(wo),nn=function(e){function t(){return xt(this,e.apply(this,arguments))}return Vt(t,e),t.prototype.init=function(){this.config=J();var e=this.data=this.options.data||{},t=this.useSliderCaptcha=e.errorCode.indexOf("SLIDER")>-1;this.model=this.options.model||null,this.view=new on({useSliderCaptcha:t}),this.view.delegate=this},t.prototype.checkLogin=function(e){var t=this,i=this.model,o=this.config;i.checkLogin({buid:o.buid,pid:o.pid},function(o){"success"===o.result&&o.msg.login?Ce(i,o):e&&t.view.showErrorTip("æ‚¨è¿˜æœªç™»å½•")})},t.prototype.verifyDidSubmit=function(e){var t=this,i={tuid:this.data.tuid,tlsite:this.data.tlsite};this.useSliderCaptcha?(i.sliderCaptchaSessionId=e.csessionid,i.sliderCaptchaToken=e.token,i.sliderCaptchaSig=e.sig,i.UA=this.data.UA||"",i.jsToken=this.data.jsToken||"",window.mtee&&!i.UA&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||"")):i.captcha=e.code,this.model.thirdPartyAjaxCallback(i),this.model.off("thirdPartyAjaxCallback:success thirdPartyAjaxCallback:fail"),this.model.once("thirdPartyAjaxCallback:success",function(e){e.riskErrorCode?window.riskConnect(e):e.isNewUser?window.thirdConnect(e):t.checkLogin()}),this.model.once("thirdPartyAjaxCallback:fail",function(e){t.view.showErrorTip(e.errorMsg||"å®‰å…¨éªŒè¯å¤±è´¥"),t.view.ali.resetNCInstance()})},t}(oi),rn=function(){function e(){}return e.authLogin=function(e){var t=void 0,i=J();(i.thirdPartUrlAry||[]).forEach(function(i){e===i.site&&(t=i.link)});var o=H(),n=window.mtee&&window.mtee.getUA()||"",r=window.mtee&&window.mtee.getUmidToken()||"",s=t+"&needRecommend=true&protocol="+window.location.protocol+"&jsToken="+r+"&UA="+encodeURIComponent(n);i.configId&&(s+="&configId="+i.configId),document.domain=o;var a=window.open(s,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no");(window.ActiveXObject||"ActiveXObject"in window)&&(Yo.add(a,"thirdPartLoginWindow"),Yo.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(je("YK_thirdLogin_data")||"{}"),setTimeout(function(){document.cookie="YK_thirdLogin_data=;domain="+o+";expires="+new Date(1970,0,1).toGMTString()},500)}))},e}(),sn=function(e){return'<span></span><h3>sorryï¼Œæ‚¨è®¿é—®çš„é¡µé¢æ— æ³•æ‰“å¼€</h3><p>ç½‘ç»œè¿žæŽ¥å¼‚å¸¸ï¼Œæˆ–è¿è¥å•†ç½‘ç»œæ•…éšœï¼Œè¯·åé¦ˆç»™<a href="http://os3.cs.tudou.com/new/client.php?spm=a2h26.8769780.0.0&arg=yktd&style=28" target="_blank" >åœ¨çº¿å®¢æœ</a>ï¼Œæˆ–è”ç³»è¿è¥å•†å®¢æœã€‚</p><a  class="YT-client" href="#" id="retryGetConfig" data-type="'+e.type+'">ç‚¹å‡»é‡è¯•</a>'},an=void 0,cn=["account.youku.com","cloud.youku.com","zhifu.youku.com"],ln=function(e){function i(){return xt(this,e.apply(this,arguments))}return Vt(i,e),i.prototype.Actions=function(){return{"click #YT-gotoLogin":"switchToLoginView","click #YT-registeBtn":"switchToRegView","click #retryGetConfig":"retryGetConfig"}},i.prototype.init=function(){if(this.config=J(this.options),this.model=new xi,ji.init(),zi.init(),this.config.isHasLogin)return void this.buildPartnerLoginDom();this.config.checkNoLogin(),an=this},i.prototype.getCustomConfig=function(e){var t=this,i=this.model,o=this.config;if(this._configLoaded)return void(e&&this.renderDom(o,e));var n={pid:o.pid,bizType:e||"",callback:encodeURIComponent(o.callbackURL)};o.configId&&(n.configId=o.configId),i.once("getConfig:success",function(i){Z(i,!0),t._configLoaded=!0,t.emit("configLoaded",t.config),e&&t.renderDom(i,e)}),i.once("getConfig:fail",function(i){t.renderErrorDom(i,e)}),i.once("getConfig:error",function(){t.renderErrorDom({errorMsg:sn({type:e})},e)}),window.YKLoginPreLoadConfig?window.YKLoginPreLoadConfig(function(e){if(e instanceof Error)return void i.getConfig(n);e.result&&"success"===e.result?i.emit("getConfig:success",e.data):i.emit("getConfig:fail",e)}):i.getConfig(n)},i.prototype.retryGetConfig=function(e){e.preventDefault(),e.target.innerHTML="æ­£åœ¨é‡è¯•...",this.getCustomConfig(e.target.getAttribute("data-type"))},i.prototype.getFormToken=function(e,i){var o=this.config;this.model.getFormToken({pid:o.pid,bizType:e||""},function(e){Z({formtoken:e.formtoken}),t(i)&&i()})},i.prototype.removeErrView=function(){this.errView&&(this.errView.remove(),this.errView=null,this.loginVC&&(this.loginVC.destory(),this.loginVC=null),this.regVC&&(this.regVC.destory(),this.regVC=null))},i.prototype.loadAliLoginModule=function(e){I("https://g.alicdn.com/vip/havana-login/0.3.2/js/mini-login-embedder-min.js",{crossOrigin:!0,retry:2},e)},i.prototype.aliLoginMessageHandler=function(e){var t=this.config;if(e.action&&("hasLoginResult"===e.action||"loginResult"===e.action)&&e.st){var i=t.callbackURL||t.callback||"";i?window.location.href=i:t.loginSuccess()}},i.prototype.initAliLoginFrame=function(){var e=this;this.miniLoginEmbedder&&(document.getElementById("alibaba-login-iframe").innerHTML="");var t=this.config,i="mini"===t.size?340:380,o=z(),n=window.parent||{},s=n.location;s=s===undefined?{}:s;var a=s.host,c=a===undefined?"":a,l=this.miniLoginEmbedder=new window.MiniLoginEmbedder,d="https://"+o.url+"/mini_login.htm",h="&"+R({pid:t.pid,returnUrl:t.callbackURL}),u=o.name,p={targetId:"alibaba-login-iframe",appName:"youku",appEntrance:u,iframeUrl:d,lang:"zh_cn",iframeWidth:i,iframeHeight:350,notLoadSsoView:"true",isMobile:"false",queryStr:h};if("8fb8456183734a86bfc1c15a1c761cdf"!==t.pid&&"20160607PLF000287"!==t.pid||(p.appEntrance="youku_dark"),t.isIku){u="iku",p.appEntrance="iku";var g=new window.MiniLoginEmbedder;g.addEvent("onMessage",this.aliLoginMessageHandler.bind(this)),g.init({targetId:"alibaba-qrlogin-iframe",appName:"youku",appEntrance:"iku_qrcode",iframeUrl:d,lang:"zh_cn",iframeWidth:320,iframeHeight:350,resizeIframeWidthFix:!0,notLoadSsoView:"true",isMobile:"false",queryStr:h})}"youku"===u&&(cn.includes(c)?(p.iframeWidth=424,p.iframeHeight=507):(p.iframeWidth=793,p.iframeHeight=528)),l.addEvent("onMessage",this.aliLoginMessageHandler.bind(this)),l.init(p),ht(function(t){var i=void 0;try{i=JSON.parse(decodeURIComponent(t.data))}catch(o){i=r(t.data)?t.data:{}}"needUpgrade"===(i.action||"")&&(e.view.el.className=i.size&&"large"===i.size?"TB-needUpgrade":"")})},i.prototype.renderDom=function(e,t){var i=this;return this.config.useAliLoginFrame=this.config.useAliLoginFrame||window.location.hash.indexOf("useAliLoginFrame")>-1,this.setNotice(e),this.getFormToken(t),Li.isNeedRequestProxy()&&Li.create(W()),this.view?this.removeErrView():(ve(this.config),this.view=new qi({delegate:this}),this.bindActions(),this.emit("mainViewLoaded")),this.waitThirdConnectRender||this.waitVerifyConnectRender?(this.waitThirdConnectRender&&this.thirdConnect(),this.waitVerifyConnectRender&&this.verifyConnect(),this.waitThirdConnectRender=!1,this.waitVerifyConnectRender=!1,void(this._mainViewLoaded=!0)):this.config.useAliLoginFrame?void this.loadAliLoginModule(function(){i.view.openPopupWindow(),i.initAliLoginFrame()}):("partner_login"===t&&this.renderPartnerLoginView(),"login"===t&&this.renderLoginView(),"register"===t&&this.renderRegView(),void(this._mainViewLoaded=!0))},i.prototype.renderErrorDom=function(e,t){this.renderDom({},t),this.loginVC&&this.loginVC.view.$el.css({visibility:"hidden"}),this.regVC&&this.regVC.view.$el.css({visibility:"hidden"});var i=this.errView=new ei({className:"YT-errview"});i.$el.html(e.errorMsg),this.view.append(i),this._mainViewLoaded=!0},i.prototype.renderPartnerLoginView=function(){this.partnerLoginVC=new en({model:this.model}),this.partnerLoginVC.parentViewController=this,this.partnerLoginVC.statDelegate=ji.getInstance(),this.view.append(this.partnerLoginVC.view)},i.prototype.renderLoginView=function(){this.loginVC?(this.loginVC.view.show(),this.loginVC.view.setUserData(),this.loginVC.updateConfig()):(this.loginVC=new Oo({model:this.model}),this.loginVC.parentViewController=this,this.loginVC.statDelegate=ji.getInstance(),this.view.append(this.loginVC.view),
window.location.hash.indexOf("debug")>-1&&(window.__yt_login_view_controller=this.loginVC)),this.view.openPopupWindow()},i.prototype.renderRegView=function(){this.regVC?(this.regVC.view.show(),this.regVC.updateConfig()):(this.regVC=new jo({model:this.model}),this.regVC.parentViewController=this,this.regVC.statDelegate=ji.getInstance(),this.view.append(this.regVC.view),window.location.hash.indexOf("debug")>-1&&(window.__yt_reg_view_controller=this.regVC)),this.view.openPopupWindow()},i.prototype.renderRiskView=function(){this.riskVC&&this.riskVC.destory(),this.riskVC=new zo,this.riskVC.parentViewController=this,this.view.append(this.riskVC.view),window.location.hash.indexOf("debug")>-1&&(window.__yt_risk_view_controller=this.riskVC),this.view.openPopupWindow()},i.prototype.renderThirdBindView=function(){this.tbindVC&&this.tbindVC.destory(),this.tbindVC=new Xo,this.tbindVC.parentViewController=this,this.tbindVC.statDelegate=ji.getInstance(),(this.tbindVC.view||this.config.thirdPartData.recommendData)&&(this.view.append(this.tbindVC.view),this.view.openPopupWindow())},i.prototype.renderVerifyView=function(){this.verifyVC&&this.verifyVC.destory(),this.verifyVC=new nn({model:this.model,data:this.config.verifyData}),this.verifyVC.parentViewController=this,this.view.append(this.verifyVC.view),this.view.openPopupWindow()},i.prototype.buildPartnerLoginDom=function(){this.getCustomConfig("partner_login")},i.prototype.buildLoginDom=function(e){e&&Z({from:e});var t=this.config;t.isIku&&(t.thirdPartData||t.riskData)||(this._mainViewLoaded?(this.getFormToken("login"),this.hideView(),this.renderLoginView()):this.getCustomConfig("login"))},i.prototype.buildRegDom=function(e){var t=this.config.regShowType;"in"===t?(e&&Z({from:e}),this._mainViewLoaded?(this.getFormToken("register"),this.hideView(),this.renderRegView()):this.getCustomConfig("register")):"new"===t?window.open(W()+"/register.htm","register"):window.location.href=W()+"/register.htm"},i.prototype.buildRiskDom=function(e){this.config.riskData=e,this.hideView(),this.view.el.className="YT-riskFrame",this.renderRiskView()},i.prototype.thirdConnect=function(e){if(e&&(this.config.thirdPartData&&delete this.config.thirdPartData,Z({thirdPartData:e})),!this.view)return void(this.waitThirdConnectRender=!0);var t=this.config.thirdPartData;!1===t.isNewUser&&t.bindMobileRequired===undefined||this.hideView(),(!1!==t.isNewUser||t.recommendData)&&(this.view.el.className="YT-third-bind"),this.renderThirdBindView()},i.prototype.verifyConnect=function(e){if(e&&(this.config.verifyData=e),!this.view)return void(this.waitVerifyConnectRender=!0);this.hideView(),this.view.el.className="YT-riskFrame",this.renderVerifyView()},i.prototype.riskConnect=function(e){this.loginVC||this.buildLoginDom(),this.loginVC.loginFail(e)},i.prototype.switchToLoginView=function(){this.buildLoginDom()},i.prototype.switchToRegView=function(){this.buildRegDom()},i.prototype.setNotice=function(e){var t=e.notice,i=t&&t.login&&t.login.topNoticePC,o=t&&t.register&&t.register.topNoticePC;i&&i.length&&Z({loginNotice:i}),o&&o.length&&Z({regNotice:o})},i.prototype.hideView=function(){this.loginVC&&this.loginVC.hideView&&this.loginVC.hideView(),this.regVC&&this.regVC.view&&this.regVC.view.hide(),this.riskVC&&this.riskVC.view&&this.riskVC.view.hide(),this.tbindVC&&this.tbindVC.hideView&&this.tbindVC.hideView(),this.verifyVC&&this.verifyVC.view&&this.verifyVC.destory()},i.prototype.closeFrame=function(){this.view.closePopupWindow(),t(this.config.closeCallback)&&this.config.closeCallback()},i.prototype.mainLoginSuccess=function(e,t,i){an&&(Z({buid:t,pid:i}),Ce(an.model,e))},i.prototype.updateConfig=function(e){r(e)&&Z(e)},i.prototype.updateThemeBg=function(e){var t=this;this.view?this.view.updateThemeBgStyle(e):this.once("mainViewLoaded",function(){t.view.updateThemeBgStyle(e)})},i.prototype.viewGetConfig=function(){return this.config},i._thirdConnect=function(e){an&&(an.thirdConnect.call(an,e),an.view||an.getCustomConfig("connect"))},i._verifyConnect=function(e){an&&(an.verifyConnect.call(an,e),an.view||an.getCustomConfig("connect"))},i._riskConnect=function(e){an&&(an.riskConnect.call(an,e),an.view||an.getCustomConfig("connect"))},i._connect=function(e){var t=void 0;try{t=JSON.parse(decodeURIComponent(e))}catch(n){t=r(e)?e:{}}var o=t.data||{};switch(t.name||""){case"thirdConnect":i._thirdConnect(o);break;case"riskConnect":i._riskConnect(o);break;case"verifyConnect":i._verifyConnect(o)}},i}(oi);return ht(function(e){return ln._connect(e.data)}),window.YKLoginConnect=ln._connect,window.thirdConnect=ln._thirdConnect,window.verifyConnect=ln._verifyConnect,window.riskConnect=ln._riskConnect,window.YKAuthLogin=rn.authLogin,window.loginFrame=window.loginFrame||ln,ln}();