define("indexnew:component/ecommerce/ecommerce.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:component/ecommerce/countdown.js","indexnew:component/hotgoods/hotgoods.js"],function(e,c,o,n,t,a,i){function s(){function e(){try{o++,o>l&&(o=1,i.css({left:d})),i.animate({left:"-="+m+"px"}),f.removeClass("product-active"),f.eq(o+l).addClass("product-active")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:76})}}function c(){try{o--,-(l-1)>o&&(o=0,i.css({left:d-m})),i.animate({left:"+="+m+"px"}),f.removeClass("product-active"),f.eq(o+l).addClass("product-active")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:91})}}try{var o=0,n=null,t=4e3,a=h(".product-banner"),i=h(".product-list"),s=i.children();s.removeClass("product-active");var r=s.eq(0),m=r.width(),l=s.size(),d=-l*m+40,p=s.clone(),g=s.clone();i.append(p),i.prepend(g),i.css("left",d),i.children().eq(l).addClass("product-active");var f=i.children("li");n=setInterval(e,t),a.on("mouseenter",function(){try{clearInterval(n)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:43})}}),a.on("mouseleave",function(){try{clearInterval(n),n=setInterval(e,t)}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:49})}}),h(".leftCover").click(function(c){try{e(),c.preventDefault()}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:55})}}),h(".rightCover").click(function(e){try{c(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:61})}})}catch(u){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:u.message||u.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:92})}}function r(e){try{for(var c=h(e).find(".time-detail"),o="<span>hh</span><i>:</i><span>mm</span><i>:</i><span>ss</span>",n=0;n<c.length;n++)!function(e){try{var n=c.eq(e),t=n.data("remain");new f(n,{format:o,lastTime:t,cb:function(){try{var c=h(".product").eq(e),o=c.data("detail_url");c.find(".coupon-purchase").attr("href",o),c.find(".activity").addClass("activity-end"),c.find(".activity-title").text("已结束：")}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:118})}}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:120})}}(n)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:122})}}function m(){try{for(var e=h(".atmosphere-ul"),c=0;c<e.length;c++)!function(c){try{var o=e.eq(c),n=o.find(".word"),t=n.height(),a=n.css("marginBottom");a=parseFloat(a.replace("px",""));for(var i=o.children(),s=i.length,c=0;c<i.length;c++){var r=o.children().eq(c).clone();o.append(r)}{var m=0,l=0;setInterval(function(){try{m++,m>s&&(o.css({top:0}),m=1,l=0),l-=t+a,o.animate({top:l},3e3)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:162})}},7e3)}}catch(d){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:d.message||d.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:163})}}(c)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:165})}}function l(){try{h(".close-btn").click(function(){try{try{var e=+new Date;window.localStorage.setItem(v,"true"),window.localStorage.setItem(y,e)}catch(c){}h(".left-ecommerce-box").hide()}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:179})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:180})}}function d(){try{var e=h("#leftWrapperBox").find(".hot-goods"),c=h("#leftWrapperBox").find(".expand-btn"),o=[],n=0,t=function(){try{var e;return function(c){try{return e||(e=new u(c),r(".hot-goods")),e}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:199})}}}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:200})}}();h.ajax("/api/getgoodthing?pageSize=3",{dataType:"json",jsonpCallback:"setRecom"}).success(function(e){try{o=e.list||[],o.length>0?(c.show(),h(".haohuimai").addClass("hasBangdan")):(c.hide(),h(".haohuimai").removeClass("hasBangdan"))}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:215})}}).fail(function(e){try{console.log(e)}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:218})}}),c.click(function(){try{n++%2===0?(t.call(this,{container:e,data:o,pageSize:3}),e.show(),h(this).addClass("slideUp")):(e.hide(),h(this).removeClass("slideUp"))}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:235})}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:236})}}function p(){function e(){try{var e=window.ecommerceData,c=window.ecommercePosition;if(!e||!e.data||e.data.length<=0)return;for(var o=e.data,n=e.more_url,t='<div class="left-ecommerce-box"><div class="haohuimai" alog-alias="ecommerce" monkey="ecommerce">    <div class="haohuimai-title">        <a class="haohuimai-logo" monkey="logo" href="'+n+'">            <span class="haohuimai-logo-img"></span>        </a>        <a class="more-url" monkey="more-products" href="'+n+'">更多好物            <span class="more-icon"></span>        </a>    </div>    <div class="product-banner-wrap">        <div class="product-banner">            <ul class="product-list">',a=0;a<o.length;a++){var i=o[a],s="",r="",m="",l="";if(i.end_time>0?(s=i.url,m="限时抢：",l="领券购买"):(s=i.detail_url,r="activity-end",m="已结束：",l="去购买"),t+='<li class="product" data-detail_url="'+i.detail_url+'"><a class="coupon-purchase" monkey="product" alog-text="'+i.title+' " href="'+s+'" target="_blank">    <div class="product-show">        <img class="product-img" monkey="imgClick" src="'+i.imgurl+'" onerror="this.src=\'http://t11.baidu.com/it/u=3049637327,2599848241&fm=179&app=35&f=PNG?w=560&h=560&s=39843C7A4B636F241C54C4DA0300E0B1\';"/>        <div class="product-title">            <img class="icon" src="'+i.iconimageurl+'">            <span class="title" monkey="titleClick">'+i.title+"</span>        </div>    </div>",i.atmosphere_words&&i.atmosphere_words.length>0){t+='<div class="atmosphere-area"><ul class="atmosphere-ul">';var d=i.atmosphere_words;!function(){try{for(var e=0;e<d.length;e++){var c=d[e];t+='<li class="word">    <span>'+c+"</span></li>"}}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:314})}}(),t+="</ul></div>"}t+='<div class="product-info">        <div class="activity '+r+'" monkey="timeClick">            <span class="activity-title">'+m+'</span>            <span class="time-detail" data-remain="'+i.end_time+'">                <span></span>                <i>:</i>                <span></span>                <i>:</i>                <span></span>            </span>        </div>        <div class="price" monkey="priceClick">            <span class="discount-price"><i>¥</i>'+i.special_price+'</span>            <span class="initial-price"><i>¥</i>'+i.original_price+'</span>        </div>        <div class="product-link" monkey="purchaseBtnClick">'+l+'</div>    </div>    <div class="leftCover" monkey="leftCover"></div>    <div class="rightCover" monkey="rightCover"></div></a></li>'}t+='</ul>          </div>      </div>  </div>  <div class="hot-goods" alog-alias="hot-goods" monkey="hot-goods"></div>  <a class="close-btn" monkey="ecommerce-close" alog-text="ecommerce-close-btn"></a>  <a class="expand-btn" monkey="ecommerce-expand" alog-text="ecommerce-expand-btn"></a>  </div>',"2"===c?h("#bottom-be").before(t):h("#leftWrapperBox").prepend(t)}catch(p){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:p.message||p.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:356})}}try{e(),s(),r(".haohuimai"),m(),l(),d()}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:364})}}function g(){try{var e,c=!1,o=!0;try{c=window.localStorage.getItem(v),e=window.localStorage.getItem(y),e=parseInt(e,10)}catch(n){}if(e){var t=+new Date,a=+new Date(e+6048e5);o=t>a}if("true"===c&&!o)return;p()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:393})}}var h=t,f=a,u=i,v="CLOSE_ECOMMERCE",y="CLOSE_ECOMMERCE_TIME";g(),c.exports={}});