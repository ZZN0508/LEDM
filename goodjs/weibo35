(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-074455b5"],{20951:function(t,a,s){"use strict";s.d(a,"a",(function(){return e}));s("99af");var i=s("3896");function e(t,a){var s=Object(i["a"])(t.getDate()),e=Object(i["a"])(t.getMonth()+1),o=t.getFullYear();return"YYYY/MM/DD"===a?"".concat(o,"/").concat(e,"/").concat(s):"YYYY-MM-DD"===a?"".concat(o,"-").concat(e,"-").concat(s):"".concat(o).concat(e).concat(s)}},2950:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"list"},[s("Scroll",{attrs:{isEmpty:t.isEmpty,data:t.videoList,keyField:"oid",isLoading:t.isLoading},on:{loadMoreData:t.loadMoreData},scopedSlots:t._u([{key:"content",fn:function(a){var i=a.item,e=a.index;return[s("woo-box",{key:i.oid,staticClass:"video-item",class:t.getStatus(i)},[s("div",{staticClass:"video-box",on:{click:function(a){return t.goPlay(i.oid,i.mid)}}},[s("img",{attrs:{src:i.covers[1].url,alt:""}}),s("div",{staticClass:"video-duration"},[t._v(t._s(t.sec2time(i.duration)))]),!i.video_status||(i.video_status&&i.video_status.status)>0?s("div",{staticClass:"paly-btn"},[s("woo-fonticon",{staticClass:"paly-btn-icon",attrs:{kind:"success",value:"caretRight"}})],1):t._e()]),s("div",{staticClass:"video-info"},[s("div",{staticClass:"title"},[s("span",{staticClass:"text"},[t._v(t._s(i.titles[0].title))]),s("span",{staticClass:"status",class:t.getStatus(i)},[t._v(t._s(i.video_status?i.video_status.text:"视频审核通过"))])]),s("div",{staticClass:"date"},[t._v(" "+t._s(t.formatDate(new Date(i.create_time),"YYYY-MM-DD"))+" ")]),i.statistics?s("div",{staticClass:"others"},[s("span",{staticClass:"icon zan"},[s("i",[t._v(t._s(t.shortNum(i.statistics.attitude_count)))])]),s("span",{staticClass:"icon playnum"},[s("i",[t._v(t._s(t.shortNum(i.statistics.play_count)))])]),s("span",{staticClass:"icon comment"},[s("i",[t._v(t._s(t.shortNum(i.statistics.comment_count)))])]),s("span",{staticClass:"icon repost"},[s("i",[t._v(t._s(t.shortNum(i.statistics.reposts_count)))])])]):t._e()]),s("woo-box",{staticClass:"video-option"},[s("div",{staticClass:"button edit",class:{disable:t.noEditable(i)},on:{click:function(a){return t.goEdit(i)}}},[s("i",{staticClass:"icon"}),s("span",[t._v("编辑")])]),s("div",{staticClass:"button del",on:{click:function(a){return t.delVideo(i,e)}}},[s("i",{staticClass:"icon"}),s("span",[t._v("删除")])])])],1)]}}])})],1)])},e=[],o=(s("99af"),s("caad"),s("c975"),s("fb6a"),s("a434"),s("b680"),s("6701")),n=s("20951"),c=s("eba1"),d={data:function(){return{videoList:[],page:1,page_type:2,next_cursor:0,isLoading:!1,loading:!1,isEmpty:!1,isRetry:!1,checkValue:[{value:!0,label:"删除视频的同时，删除对应的微博"}]}},created:function(){this.getVideoList(),this.formatDate=n["a"],this.shortNum=c["b"]},components:{Scroll:o["a"]},methods:{noEditable:function(t){return-1!==t.oid.indexOf("1042158:")||-1!==t.oid.indexOf("1042212:")||t.video_status&&[1,4,-1].includes(t.video_status.status)||Boolean(!t.editable)},getVideoList:function(){var t=this;this.isLoading=!0,this.loading||this.$http.get("/ajax/multimedia/getVideoList",{params:{cursor:this.next_cursor}}).then((function(a){if(a.data&&a.data.ok>0){t.isLoading=!1;var s=a.data.data,i=s&&s.videos;t.videoList=t.videoList.concat(i),t.isLoading=!0,0===i.length&&(t.isEmpty=!0),0===i.length||i.length<10?t.isLoading=!1:t.next_cursor=s.next_cursor}}))},loadMoreData:function(){this.getVideoList()},goPlay:function(t,a){window.open("https://weibo.com/tv/show/".concat(t,"?mid=").concat(a))},goEdit:function(t){if(!this.noEditable(t)){var a=t.oid;this.$router.push({name:"channel",query:{entry:"edit",oid:a}})}},delVideo:function(t,a){var s=this;this.$_w_dialog({type:"confirm",title:"确定删除视频吗？",message:"",checkbox:this.checkValue,action:function(){var i={oid:t.oid,mid:t.mid,delete_microblog:s.checkValue[0].value};s.$http.post("/ajax/multimedia/videoDelete",i).then((function(t){t.data.ok>0&&t.data.data&&t.data.data.result&&(s.$_w_toast({type:"success",message:"删除成功"}),s.videoList.splice(a,1))})).catch((function(t){s.$_w_toast({type:"warn",message:"删除失败，请稍后重试"})}))}})},sec2time:function(t){var a=function(t,a){return("000"+t).slice(-1*a)},s=parseFloat(t).toFixed(3),i=Math.floor(s/60)%60,e=Math.floor(s-60*i);return a(i,2)+":"+a(e,2)},getStatus:function(t){if(t.video_status){var a=t.video_status.status,s="";switch(a){case-1:s="invalid";break;case 1:s="pending";break;case 3:s="fail";break;case 4:s="pending";break;case 6:s="fail";break;default:s="pass";break}return s}return"pass"}}},u=d,r=(s("9bab"),s("2877")),l=Object(r["a"])(u,i,e,!1,null,"8e2d61ec",null);a["default"]=l.exports},"70c2":function(t,a,s){},"9bab":function(t,a,s){"use strict";var i=s("70c2"),e=s.n(i);e.a}}]);