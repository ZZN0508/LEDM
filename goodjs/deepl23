"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[5105],{9345:function(e,t,n){var o=n(19783),a=n.n(o),r=n(61606),i=n(30171),l=n(12574);r.Z.defineType("/translator/common/computedTextLength",["/translator/core/domElements","/translator/core/textareas"],(e,t)=>{let n=(0,i.S3)(l.A.None),o=()=>{let o=t.getSourceText();if(o.length<=0){n(l.A.Short);return}if(o.length>1e3){n(l.A.VeryLong);return}let a=e.sourceEdit,r=window.getComputedStyle(a),i=a.offsetWidth-(parseFloat(r.paddingLeft)||0)-(parseFloat(r.paddingRight)||0),s=0;o.split("\n").forEach(e=>s+=Math.ceil(10*e.length/i+.1)),i>0&&(s<=1?n(l.A.Short):s<=3?n(l.A.Medium):s<=15?n(l.A.Long):n(l.A.VeryLong))};return t.onSourceTextChanged.push(()=>{o()}),window.addEventListener("resize",a()(()=>{o()},300)),o(),{computedTextLength:n,recalculate:o}})},9859:function(e,t,n){var o=n(61606),a=n(86679);o.Z.defineType("/translator/common/lastFocusedSideUndoRedo",["/translator/common/translatorSideFocus","/translator/common/sourceUndoRedo","/translator/common/targetUndoRedo"],(e,t,n)=>{document.addEventListener("keydown",o=>{let r=e.currentlyFocused(),i=e.lastFocused();if("none"===r){var l,s;(0,a.kp)(o)?null===(l="source"===i?t:n)||void 0===l||l.undo("keyboard"):(0,a.Ve)(o)&&(null===(s="source"===i?t:n)||void 0===s||s.redo("keyboard"))}})})},55309:function(e,t,n){var o=n(61606),a=n(30171),r=n(98808),i=n(58425);o.Z.defineType("/translator/common/sourceUndoRedo",["/translator/core/textareas","/translator/common/translatorSideFocus","/translator/core/requestHandling"],(e,t,n)=>{let o=null==e?void 0:e.getSourceDTextarea();if(!o)return;let l=(0,a.S3)(!1),s=(0,a.S3)(!1),d=(0,a.G7)([t.lastFocused,n.hasPendingRequestsOfType(i.Xk.TYPE__TRANSLATE_SOURCE),e.isSourceTextEmpty,o.isUndoAvailable,o.isRedoAvailable],(e,t,n,o,a)=>"source"===e&&!t&&(!n||o||a));o.onUndoStackChange.push(()=>{l(o.isUndoAvailable()),s(o.isRedoAvailable())});let g=(0,r.f)(),u=(0,r.f)(),c=e=>{l()&&(o.undo(),g(e))},h=e=>{s()&&(o.redo(),u(e))};return{showUndoRedoButtons:d,isUndoAvailable:l.asReadOnly(),isRedoAvailable:s.asReadOnly(),undo:c,redo:h,onUndo:g,onRedo:u}})},82903:function(e,t,n){var o=n(61606),a=n(30171),r=n(98808),i=n(58425);o.Z.defineType("/translator/common/targetUndoRedo",["/translator/core/textareas","/translator/common/translatorSideFocus","/translator/core/requestHandling","/translator/core/config"],(e,t,n,o)=>{var l;let s=null==e?void 0:e.getTargetDTextarea();if(!s)return;let d=(0,a.S3)(null!==(l=o.get("readonlySourceSide"))&&void 0!==l&&l),g=(0,a.S3)(!1),u=(0,a.S3)(!1),c=(0,a.G7)([t.lastFocused,n.hasPendingRequestsOfType(i.Xk.TYPE__TRANSLATE_SOURCE),e.isSourceTextEmpty,g,u],(t,n,o,a,r)=>{if(d())return!0;let i=0===e.getTargetText().length;return"target"===t&&(!o&&!n||!i||a||r)});s.onUndoStackChange.push(()=>{let e=n.hasPendingRequestsOfType(i.Xk.TYPE__TRANSLATE_SOURCE)();g(s.isUndoAvailable()&&!e),u(s.isRedoAvailable()&&!e)});let h=(0,r.f)(),p=(0,r.f)(),S=e=>{g()&&(s.undo(),h(e))},T=e=>{u()&&(s.redo(),p(e))};return{showUndoRedoButtons:c,isUndoAvailable:g.asReadOnly(),isRedoAvailable:u.asReadOnly(),undo:S,redo:T,onUndo:h,onRedo:p}})},71350:function(e,t,n){var o=n(30171);n(61606).Z.defineType("/translator/common/translatorSideFocus",["/translator/core/domElements"],e=>{let{sourceEdit:t,targetEdit:n}=e,a=(0,o.S3)("source"),r=(0,o.S3)("source"),i=e=>{a(e),r(e)},l=()=>{a("none")};return t.addEventListener("focus",()=>i("source")),n.addEventListener("focus",()=>i("target")),t.addEventListener("blur",l),n.addEventListener("blur",l),{currentlyFocused:a.asReadOnly(),lastFocused:r.asReadOnly()}})},82859:function(e,t,n){var o=n(69764),a=n(98808),r=n(61606),i=n(15311);r.Z.defineType("/translator/core/observeDTextareaPerformance",["/translator/core/textareas"],e=>{let t;let n=(0,a.f)(),r=.5>Math.random()?1e4:6e4,l=.5>Math.random()?i.$.SOURCE:i.$.TARGET,s=.33>Math.random()?"internal":.5>Math.random()?"short":"long",d=l===i.$.SOURCE?e.getSourceDTextarea():e.getTargetDTextarea();if(!(.01>Math.random())||void 0===d)return{onPerformanceData:n};d._config_measurePerformance=!0;let g=0,u=0,c=e=>{var n,a,i,d,c;let h=e.characterCount-u;u=e.characterCount,"internal"===s&&e.trigger!==o.z.INTERNAL||"internal"!==s&&e.trigger===o.z.INTERNAL||"short"===s&&Math.abs(h)>4||"long"===s&&4>=Math.abs(h)||Math.random()>=1/(g+=1)||(t={total:Math.round(e.total),syncForward:Math.round(null!==(n=e.updateNodesFromDom)&&void 0!==n?n:0),cleanup:Math.round(null!==(a=e.cleanupNodes)&&void 0!==a?a:0),syncBack:Math.round(null!==(i=e.updateDom)&&void 0!==i?i:0),finalize:Math.round(null!==(d=e.finalizeNodes)&&void 0!==d?d:0),cursorPosition:Math.round(null!==(c=e.getCursorPos)&&void 0!==c?c:0),rest:Math.round(e.other),textarea:l,numberOfCharacters:Math.round(e.characterCount),numberOfCharactersChanged:h,trackingDelay:r,trigger:e.trigger})};d.onPerformanceMeasured.push(c);let h=()=>{d.onPerformanceMeasured.remove(c),d._config_measurePerformance=!1,t&&n(t)};return setTimeout(h,r),{onPerformanceData:n}})},95590:function(e,t,n){var o=n(84627),a=n(61606),r=n(30171);a.Z.defineType("/translator/core/readonlySourceSide",["/translator/core/domElements","/translator/core/config","/translator/core/predefinedState","/translator/core/textareas"],(e,t,n,a)=>{var i;let l=(0,o.S3)(null!==(i=t.get("readonlySourceSide"))&&void 0!==i&&i);return l()&&(e.sourceEdit.disabled=!0,a.onSourceTextChangedPreview.push((e,t,n,o)=>{o(!1)}),(0,r.S1)(n.isPredefinedStateEmpty,e=>{e||a.onSourceTextChangedPreview.push((e,t,n,o)=>(o(!0),"REMOVE"))})),{readonlySource:l.asReadOnly()}})},15311:function(e,t,n){var o;n.d(t,{$:function(){return a}});let a=((o={})[o.UNSPECIFIED=0]="UNSPECIFIED",o[o.SOURCE=1]="SOURCE",o[o.TARGET=2]="TARGET",o)},21348:function(e,t,n){var o=n(61606),a=n(91542),r={partialHighlightAnimation:"alignedSentenceHighlight-module--partialHighlightAnimation--GXUnX",alignmentHighlightBackgroundChange:"alignedSentenceHighlight-module--alignment-highlight-background-change--u5SyN",hideAlignedSentenceHighlights:"alignedSentenceHighlight-module--hideAlignedSentenceHighlights--MqHrv",alignedSentenceHighlight:"alignedSentenceHighlight-module--alignedSentenceHighlight--NKBwe"};o.Z.defineType("/translator/web/alignedSentenceHighlight",["/translator/core/highlightManagement","/translator/core/languageManagement","/translator/core/domElements","/translator/common/charCount","/translator/core/requestHandling","/translator/web/textarea/state","/translator/core/textareas"],(e,t,n,o,i,l,s)=>{let d=a.en.ALIGNED_SENTENCE,g=a.J3.ALIGNED_SENTENCE,u=null,c=null,h=null,p=()=>{u&&(u.highlightState.setSentenceHighlight(g,null),e.notifySourceSentencesChanged([u]),u=null),c&&(c.highlightState.setSentenceHighlight(d,null),e.notifyTargetSentencesChanged([c]),c=null)},S=()=>{var e,t;null===(e=s.getTargetDTextarea())||void 0===e||e._rootDomNode.classList.add(r.hideAlignedSentenceHighlights),null===(t=s.getSourceDTextarea())||void 0===t||t._rootDomNode.classList.add(r.hideAlignedSentenceHighlights)},T=()=>{var e,t;null===(e=s.getTargetDTextarea())||void 0===e||e._rootDomNode.classList.remove(r.hideAlignedSentenceHighlights),null===(t=s.getSourceDTextarea())||void 0===t||t._rootDomNode.classList.remove(r.hideAlignedSentenceHighlights)},m=(t,n)=>{var o;t.getId()!==(null===(o=u)||void 0===o?void 0:o.getId())&&(t.highlightState.setSentenceHighlight(g,{classes:[`bg-[#E1F0F5] text-[#25282D] ${r.alignedSentenceHighlight}`,n?r.partialHighlightAnimation:""],priority:a.JY[a.J3.ALIGNED_SENTENCE]}),u=t,e.notifySourceSentencesChanged([t]))},f=(t,n)=>{var o;t.getId()!==(null===(o=c)||void 0===o?void 0:o.getId())&&(t.highlightState.setSentenceHighlight(d,{classes:[`bg-[#E1F0F5] text-[#25282D] ${r.alignedSentenceHighlight}`,n?r.partialHighlightAnimation:""],priority:a.VE[a.en.ALIGNED_SENTENCE]}),c=t,e.notifyTargetSentencesChanged([t]))},v=(e,t)=>e&&!t||e&&t&&e.getId()===t.getId(),C=()=>t.getActiveLangContext().getTargetSentences().length>1,E=()=>{let e=n.getSourceEditCursorOffset(),o=t.getActiveLangContext().getSourceSentences(),a=e;for(let e=0;e<o.length;e+=1){let t=o[e],n=t.getText(),r=n.length;if(a<r||a===r&&(0===r||e===o.length-1||!n.endsWith("\n")))return t;a-=r}return null},y=function(e){var n;return(void 0===e&&(e=null),null===e)?null:null!==(n=t.getActiveLangContext().getTargetSentences().find(t=>{var n;return(null===(n=t.getSourceSentence())||void 0===n?void 0:n.getId())===e}))&&void 0!==n?n:null},A=()=>t.getActiveLangContext().getSourceSentences().find(e=>{var t;return e.getId()===(null===(t=h)||void 0===t?void 0:t.getId())}),L=function(e){var t;void 0===e&&(e=!1);let n=y(null===(t=h)||void 0===t?void 0:t.getId());A()&&n&&h&&(m(h,e),f(n,e))},H=e=>{let t=e.getSourceSentence();t&&e&&(f(e),t&&m(t))},x=function(e){void 0===e&&(e=!1),!n.isSelectionInSourceTextarea()||!C()||o.isLimitReached()||(h=E(),L(e))};return l.sourceTextAreaEventMPs.onSelectionChanged.push(e=>{let{startSentence:t,endSentence:n}=e;p(),C()&&v(t,n)&&(h=t,L())}),l.targetTextAreaEventMPs.onSelectionChanged.push(e=>{let{startSentence:t,endSentence:n}=e;p(),C()&&v(t,n)&&H(t)}),l.sourceTextAreaEventMPs.onPasteHandler.push(()=>{x(!1)}),l.sourceTextAreaEventMPs.onPredefinedTextLoaded.push(()=>{x(!1)}),l.sourceTextAreaEventMPs.onTypingAndComposingStoppedHandler.push(()=>{T(),i.waitForPendingRequests().then(()=>{x(!0)}).catch(()=>{})}),l.sourceTextAreaEventMPs.onTypingStartedHandler.push(()=>{p()}),l.sourceTextAreaEventMPs.onComposingStartedHandler.push(()=>{S()}),l.targetTextAreaEventMPs.onComposingStartedHandler.push(()=>{S()}),l.targetTextAreaEventMPs.onTypingStartedHandler.push(()=>{p()}),l.targetTextAreaEventMPs.onTypingAndComposingStoppedHandler.push(()=>{T()}),{}})},76304:function(e,t,n){var o=n(98808),a=n(61606),r=n(66726),i=n.n(r);let l=function(){function e(e,t){this.isTyping=void 0,this.isComposing=void 0,this.timeout=void 0,this.eventHandlers=void 0,this.debouncedStopTyping=void 0,this.isTyping=!1,this.isComposing=!1,this.timeout=null!=e?e:1e3,this.eventHandlers=t,this.debouncedStopTyping=i()(this.stopTyping.bind(this),this.timeout)}var t=e.prototype;return t.textChanged=function(e,t){var n,o,a,r;"paste"===t?null===(n=this.eventHandlers)||void 0===n||null===(o=n.onPasteHandler)||void 0===o||o.call(n):"predefinedState"===t?null===(a=this.eventHandlers)||void 0===a||null===(r=a.onPredefinedTextLoaded)||void 0===r||r.call(a):"typing"===t&&this.startTyping()},t.compositionStateChanged=function(e){e?this.startComposing():this.stopComposing()},t.selectionChanged=function(e){var t,n;!e.startSentence&&!e.endSentence||this.isTypingOrComposing()||null===(t=this.eventHandlers)||void 0===t||null===(n=t.onSelectionChanged)||void 0===n||n.call(t,e)},t.isTypingOrComposing=function(){return this.isTyping||this.isComposing},t.startTyping=function(){var e,t;this.debouncedStopTyping(),this.isTyping||(this.isTyping=!0,null===(e=this.eventHandlers)||void 0===e||null===(t=e.onTypingStartedHandler)||void 0===t||t.call(e))},t.stopTyping=function(){var e,t,n,o;this.isTyping=!1,null===(e=this.eventHandlers)||void 0===e||null===(t=e.onTypingStoppedHandler)||void 0===t||t.call(e),this.isTypingOrComposing()||null===(n=this.eventHandlers)||void 0===n||null===(o=n.onTypingAndComposingStoppedHandler)||void 0===o||o.call(n)},t.startComposing=function(){var e,t;this.isComposing=!0,null===(e=this.eventHandlers)||void 0===e||null===(t=e.onComposingStartedHandler)||void 0===t||t.call(e)},t.stopComposing=function(){var e,t,n,o;this.isComposing=!1,null===(e=this.eventHandlers)||void 0===e||null===(t=e.onComposingStoppedHandler)||void 0===t||t.call(e),this.isTypingOrComposing()||null===(n=this.eventHandlers)||void 0===n||null===(o=n.onTypingAndComposingStoppedHandler)||void 0===o||o.call(n)},e}(),s={onPasteHandler:(0,o.f)(),onPredefinedTextLoaded:(0,o.f)(),onTypingStartedHandler:(0,o.f)(),onTypingStoppedHandler:(0,o.f)(),onComposingStartedHandler:(0,o.f)(),onComposingStoppedHandler:(0,o.f)(),onTypingAndComposingStoppedHandler:(0,o.f)(),onSelectionChanged:(0,o.f)()},d={onPasteHandler:(0,o.f)(),onPredefinedTextLoaded:(0,o.f)(),onTypingStartedHandler:(0,o.f)(),onTypingStoppedHandler:(0,o.f)(),onComposingStartedHandler:(0,o.f)(),onComposingStoppedHandler:(0,o.f)(),onTypingAndComposingStoppedHandler:(0,o.f)(),onSelectionChanged:(0,o.f)()};a.Z.defineType("/translator/web/textarea/state",["/translator/core/textareas","/translator/core/observeSentenceSelection"],(e,t)=>{var n,o;let a=new l(1e3,{onPasteHandler:()=>{s.onPasteHandler()},onPredefinedTextLoaded:()=>{s.onPredefinedTextLoaded()},onTypingStartedHandler:()=>{s.onTypingStartedHandler()},onTypingStoppedHandler:()=>{s.onTypingStoppedHandler()},onComposingStartedHandler:()=>{s.onComposingStartedHandler()},onComposingStoppedHandler:()=>{s.onComposingStoppedHandler()},onTypingAndComposingStoppedHandler:()=>{s.onTypingAndComposingStoppedHandler()},onSelectionChanged:e=>{s.onSelectionChanged(e)}}),r=new l(1e3,{onPasteHandler:()=>{d.onPasteHandler()},onPredefinedTextLoaded:()=>{d.onPredefinedTextLoaded()},onTypingStartedHandler:()=>{d.onTypingStartedHandler()},onTypingStoppedHandler:()=>{d.onTypingStoppedHandler()},onComposingStoppedHandler:()=>{d.onComposingStoppedHandler()},onTypingAndComposingStoppedHandler:()=>{d.onTypingAndComposingStoppedHandler()},onSelectionChanged:e=>{d.onSelectionChanged(e)}});return e.onSourceTextChanged.push((e,t)=>{a.textChanged(e,t)}),e.onTargetTextChanged.push((e,t)=>{r.textChanged(e,t)}),null===(n=e.getSourceDTextarea())||void 0===n||n.onCompositionModeChange.push(e=>{a.compositionStateChanged(e)}),null===(o=e.getTargetDTextarea())||void 0===o||o.onCompositionModeChange.push(e=>{r.compositionStateChanged(e)}),t.onSourceSelectionChanged.push((e,t)=>{a.selectionChanged({startSentence:null==e?void 0:e.sentence,endSentence:null==t?void 0:t.sentence})}),t.onTargetSelectionChanged.push((e,t)=>{r.selectionChanged({startSentence:null==e?void 0:e.sentence,endSentence:null==t?void 0:t.sentence})}),{sourceTextAreaEventMPs:s,targetTextAreaEventMPs:d}})},98907:function(e,t,n){var o=n(61606),a=n(89355),r=n(91542),i=n(89300);o.Z.defineType("/translator/web/alternativeAtPositionHighlight",["/translator/core/highlightManagement","/translator/smartEditing/smartTargetEditing","/translator/core/languageManagement"],(e,t,n)=>{let o=r.lp.ALTERNATIVES_AT_POSITION,l=null,s=()=>{var t;l&&(null===(t=l)||void 0===t||t.highlightState.setInnerSentenceHighlight(o,null),e.notifyTargetSentencesChanged([l]),l=null)},d=(t,s)=>{if(!t||"number"!=typeof s)return;let{word_pos:d,word_end:g}=(0,i.PV)(t.getText(),s,(0,i.T_)(n.getTargetLang())),u={ranges:[{offset:d,length:g-d}],classes:["bg-[#B4DAE8] text-[#01557C]"],validationMode:a.s.SENTENCE_CONTENT_UNCHANGED,priority:r.rF[r.lp.ALTERNATIVES_AT_POSITION],optimizationMode:"visibility"};t.highlightState.setInnerSentenceHighlight(o,u),l=t,e.notifyTargetSentencesChanged([t])};return t.onTargetPopupOpened.push(e=>{let{targetSentence:t,sentenceCursor:n}=e;s(),d(t,n)}),t.onTargetPopupClosed.push(()=>{s()}),{}})},19909:function(e,t,n){var o=n(19783),a=n.n(o),r=n(86679),i=n(40977),l=n(30171),s=n(61606),d=n(76045);s.Z.defineType("/translator/web/analytics",["/translator/webTranslatorCore","/translator/common/analytics",d.K],(e,t,n)=>{let{common:o}=t,{send:s}=n;e.features.with(["/translator/core/updateSourceSentences"],e=>{e.onHTMLTextInputRejected.push(()=>s({id:160}))}),e.features.with(["/translator/web/translationRating"],e=>{e.onTranslationRatingClicked.push(e=>{let{sourceText:t,targetText:n,ratingOption:a}=e;s({id:114,data:{translatorTranslationRatingData:{languageData:o.getTranslatorLanguageData(),numberOfCharactersTargetField:t.length,numberOfCharactersSourceField:n.length,ratingOption:a}}})})}),e.features.with(["/translator/web/manyTranslationsBlock"],e=>{e.onDialogEvent.push(e=>{let{thresholdReached:t,dialogShown:n,ctaClicked:o,usageId:a}=e,r={blockModalData:{usageId:a}};t&&s({id:i.qb.MANY_TRANSLATIONS_BLOCK.THRESHOLD_REACHED,data:r}),n&&s({id:i.qb.MANY_TRANSLATIONS_BLOCK.DIALOG_SHOWN,data:r}),o&&s({id:i.qb.MANY_TRANSLATIONS_BLOCK.CTA_CLICKED,data:r})})}),e.features.with(["core/languageManagement"],e=>{(0,l.S1)(e.isUnsupportedLanguage,e=>{e&&s({id:239})})}),e.features.with(["/translator/common/writeAdvertisementBanner"],e=>{e.onUserInteraction.push(e=>{let{interaction:t}=e;s({id:271,data:{userInteractionWriteAdvertisementData:{interaction:t}}})})}),e.features.with(["/translator/web/sourceLanguageUi"],e=>{let t=0;e.onLanguageDropdownOpened.push(()=>{t=Date.now();let e={translatorLanguageData:o.getTranslatorLanguageData(!0)};s({id:59,data:e})}),e.onLanguageDropdownClosed.push(()=>{let e={...o.getTranslatorLanguageData(!0),languageSelectionDuration:{duration:Date.now()-t}};s({id:60,data:{translatorLanguageData:e}})}),e.onLanguageSearchTextEntered.push(()=>{s({id:231})}),e.onLanguageSearchClearButtonClicked.push(()=>{s({id:232})}),e.onLanguageSearchNoResults.push(()=>{s({id:240})})}),e.features.with(["/translator/web/targetLanguageUi"],e=>{let t=0;e.onLanguageDropdownOpened.push(()=>{t=Date.now();let e={translatorLanguageData:o.getTranslatorLanguageData(!0)};s({id:57,data:e})}),e.onLanguageDropdownClosed.push(()=>{let e={...o.getTranslatorLanguageData(!0),languageSelectionDuration:{duration:Date.now()-t}};s({id:58,data:{translatorLanguageData:e}})}),e.onLanguageSearchTextEntered.push(()=>{s({id:231})}),e.onLanguageSearchClearButtonClicked.push(()=>{s({id:232})}),e.onLanguageSearchNoResults.push(()=>{s({id:240})})}),e.features.with(["/translator/core/domElements"],e=>{let t=a()(e=>s({id:308,data:e}),300),n=a()(e=>s({id:309,data:e}),300),i=e=>a=>{let i={translatorUndoRedoData:{languageData:o.getTranslatorLanguageData(),source:"source"===e?1:2}};(0,r.Ve)(a)?n(i):(0,r.kp)(a)&&t(i)};e.sourceEdit.addEventListener("keydown",i("source")),e.targetEdit.addEventListener("keydown",i("target"))}),e.features.with(["/translator/common/sourceUndoRedo","/translator/common/targetUndoRedo"],(e,t)=>{let n=a()(e=>s(e),300),r=(e,t,a)=>{let r="undo"===t?i.qb.EVENT_ID_TRANSLATOR_LOCAL_UNDO_TRIGGERED:i.qb.EVENT_ID_TRANSLATOR_LOCAL_REDO_TRIGGERED,l={languageData:o.getTranslatorLanguageData(),source:{none:0,source:1,target:2}[e],method:{none:0,button:1,keyboard:2}[a]};n({id:r,data:{translatorLocalUndoRedoData:l}})};null==e||e.onUndo.push(e=>r("source","undo",e)),null==e||e.onRedo.push(e=>r("source","redo",e)),null==t||t.onUndo.push(e=>r("target","undo",e)),null==t||t.onRedo.push(e=>r("target","redo",e))}),e.features.with(["/translator/common/detectTargetTextModifications","/translator/common/observeTextSession"],(e,t)=>{let{onDetectedTargetTextModifications:n}=e,o=!0;t.onFullTranslation.push(()=>{o=!0}),t.onPartialTranslation.push(()=>{o=!0}),n.push(e=>{o&&(s({id:311,data:{targetTextModifiedData:{remainingTextLength:e.remainingText.length,remainingTargetSentencesCount:e.remainingTargetSentences.length}}}),o=!1)})}),e.features.with(["/translator/common/summarize"],e=>{let t=e=>{switch(e){case"short":return 3;case"medium":return 2;case"long":return 1;default:return 0}},n=e=>{switch(e){case"success":return 1;case"cached":return 2;case"error":return 3;case"cancel":return 4;default:return 0}},o=e=>[e.lang,e.variant].filter(e=>!!e).join("-");e.events.onSummaryStarted.push(e=>{let{textToSummarizeLengthInCharacters:n,summaryLength:a,summaryLanguage:r}=e;s({id:389,data:{llmSummaryStartedData:{summaryLength:t(a),textToSummarizeLengthInCharacters:n,summaryLanguage:o(r)}}})}),e.events.onSummaryFinished.push(e=>{let{summaryLength:a,textToSummarizeLengthInCharacters:r,summaryLanguage:i,resultType:l,summaryLengthInCharacters:d,elapsedTimeInMs:g}=e;s({id:390,data:{llmSummaryFinishedData:{summaryLength:t(a),textToSummarizeLengthInCharacters:r,summaryLanguage:o(i),resultType:n(l),summaryLengthInCharacters:d,elapsedTimeInMs:Math.floor(g)}}})}),e.events.onSummaryCopied.push(()=>{s({id:391})})}),e.features.with(["/translator/web/voiceDictation"],e=>{e.onTrackStopVoiceRecording.push((e,t)=>{s({id:397,data:{recordingStoppedData:{durationMs:e,source:t}}})}),e.onTrackSuccessfulTranscription.push(e=>{s({id:398,data:{transcriptionDoneData:{...e}}})}),e.onTrackNoSpeechDetectedError.push(()=>{s({id:399})}),e.onTrackTechnicalError.push(()=>{s({id:400})}),e.onTrackClearanceError.push(()=>{s({id:462})}),e.onTrackLanguageNotRecognizedError.push(e=>{s({id:401,data:{languageNotRecognizedData:{detectedSourceLanguage:e}}})}),e.onTrackMicrophoneAccessBlocked.push(()=>{s({id:402})})})})},32317:function(e,t,n){n.d(t,{hF:function(){return l},ok:function(){return s},yu:function(){return r}});var o=n(89300),a=n(89355);function r(e,t,n){if(!e||"number"!=typeof t||!n)return;let{word_pos:a,word_end:r}=(0,o.PV)(e,t,(0,o.T_)(n));return e.substring(a,r)}async function i(e,t,n,o){let r=`popup_anchor_highlight__with_key_${e}`,i=`sentence_anchor_positioning${e}`;t.highlightState.setInnerSentenceHighlight(i,{classes:[r],ranges:[{offset:n,length:1}],validationMode:a.s.SENTENCE_CONTENT_UNCHANGED,priority:1,optimizationMode:"none"}),await o();let l=document.getElementsByClassName(r)[0];if(!l){console.debug("No highlight node found"),t.highlightState.setInnerSentenceHighlight(i,null);return}let s=l.getBoundingClientRect(),d={left:s.left-8,top:s.top+s.height+document.documentElement.scrollTop};return t.highlightState.setInnerSentenceHighlight(i,null),d}function l(e,t,n,o){return i(e,n,o,()=>t.notifySourceSentencesChanged([n]))}function s(e,t,n,o){return i(e,n,o,()=>t.notifyTargetSentencesChanged([n]))}},91542:function(e,t,n){var o,a,r;n.d(t,{JY:function(){return u},J3:function(){return s},VE:function(){return d},en:function(){return i},rF:function(){return g},lp:function(){return l}});let i=((o={}).ALIGNED_SENTENCE="aligned_target_sentence_highlight",o),l=((a={}).ALTERNATIVES_AT_POSITION="target_alternatives_at_position_highlight",a.FOCUSED_WORD="target_focused_word_highlight",a),s=((r={}).ALIGNED_SENTENCE="aligned_source_sentence_highlight",r),d={[i.ALIGNED_SENTENCE]:1},g={[l.ALTERNATIVES_AT_POSITION]:1,[l.FOCUSED_WORD]:2},u={[s.ALIGNED_SENTENCE]:1}},30874:function(e,t,n){n.d(t,{g:function(){return d}});var o=n(66726),a=n.n(o),r=n(49359),i=n(89355),l=n(89300),s=n(91542);function d(e){let t,{sentences:n,onUpdateModel:o,onRenderContextualMenuTooltip:d,onCleanupContextualMenuTooltip:g,...u}=e,c=a()((e,t)=>{let n=e.getParentNode();n&&d(t)},500),h=()=>{t&&(document.removeEventListener("keydown",t),document.removeEventListener("scroll",t),t=void 0),c.cancel(),g()},p=(e,n)=>{t||(t=()=>h(),document.addEventListener("keydown",t,{passive:!0}),document.addEventListener("scroll",t,{passive:!0})),c(e,n)};for(let e of n){let t=function(e){let{withTooltipOnClick:t,withTooltipOnHover:n,withColor:o,onRenderTooltip:a,onCleanupTooltip:d}=e,g={mouseenter:(e,t,o,r)=>{n&&a(o[0],t[0])},mouseleave:(e,t,n,o)=>{d(n[0])}};t&&(g.click=(e,t,n,o)=>{d(n[0]),a(n[0],t[0])});let u=(0,r.Ch)(o&&"hover:bg-[#B4DAE8]");return{ranges:(0,l.Jf)(e.text,(0,l.T_)(e.lang)),classes:[u],validationMode:i.s.SENTENCE_CONTENT_UNCHANGED,priority:s.rF[s.lp.FOCUSED_WORD],optimizationMode:"hover",eventListeners:t||n?g:void 0}}({text:e.getText(),onRenderTooltip:p,onCleanupTooltip:h,...u});o(e,t)}return()=>h()}},19266:function(e,t,n){var o=n(61606),a=n(30874),r=n(91542),i=n(23426),l=n(30171);o.Z.defineType("/translator/web/focusedWordHighlight",["/translator/environment/localizedTexts","/translator/core/highlightManagement","/translator/core/languageManagement","/translator/core/textareas","/translator/core/translateSourceSentences"],(e,t,n,o,s)=>{let d=(0,l.S3)(!1),g=(0,l.S3)(!1),u=(0,l.S3)(!1),c=null,h=o=>{var l;null===(l=c)||void 0===l||l(),c=(0,a.g)({sentences:o,lang:n.getTargetLang(),withColor:!0,withTooltipOnClick:d(),withTooltipOnHover:g()&&u(),onRenderContextualMenuTooltip:function(){let t=e.get("translator/contextMenu.tooltip.target");for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];i.iM.apply(void 0,[t].concat(o))},onCleanupContextualMenuTooltip:i.cA,onUpdateModel:(e,t)=>{e.highlightState.setInnerSentenceHighlight(r.lp.FOCUSED_WORD,t)}}),t.notifyTargetSentencesChanged(o)};return o.onTargetTextChanged.push(()=>{h(n.getActiveLangContext().getTargetSentences())}),s.onFinalizeUpdatedTargetSentences.push(e=>{h(e)}),s.onTargetSentencesHaveChanged.push(e=>{h(e.getTargetSentences())}),(0,l.S1)([g,d,u],()=>{h(n.getActiveLangContext().getTargetSentences())}),{enabledTooltipOnHover:u}})},23426:function(e,t,n){n.d(t,{cA:function(){return r},iM:function(){return a}});let o="target-alternatives-tooltip",a=(e,t)=>{let n=document.getElementById(o);n||((n=document.createElement("div")).id=o,n.classList.add("fixed","z-[10000]","rounded-[3px]","bg-[#1B1E25]","px-3","py-1.5","text-xs","text-white"),document.documentElement.appendChild(n)),n.innerText=e,n.classList.add("invisible"),n.classList.remove("hidden");let a=n.getBoundingClientRect(),r=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect(),l=Math.min(Math.max(i.x+i.width/2-a.width/2,4),r.width-a.width-4);n.style.left=`${l}px`;let s=i.y+i.height+4;n.style.top=`${s}px`,n.classList.remove("invisible")},r=()=>{let e=document.getElementById(o);null==e||e.classList.add("hidden")}},89300:function(e,t,n){n.d(t,{T_:function(){return i},PV:function(){return s},Jf:function(){return l}});var o=n(11269),a=n(25889);let r=function(){function e(e){this.lang=void 0,this.options=void 0,this.shouldSplitBySpace=void 0,this.lang=e,this.shouldSplitBySpace="JA"!==e&&"ZH"!==e,this.options={granularity:"word"}}var t=e.prototype;return t._splitByChar=function(e){return e.split("")},t._splitByRegex=function(e){return e.match(a.cc)},t._splitString=function(e){return this.shouldSplitBySpace?this._splitByRegex(e):this._splitByChar(e)},t.resolvedOptions=function(){return{locale:this.lang,...this.options}},t.segment=function(e){let t=this._splitString(e),n={*[Symbol.iterator](){for(let n=0;n<t.length;n++)yield{segment:t[n],index:n,input:e}},containing:()=>({segment:"",index:0,input:e})};return n},e}();function i(e){var t;return null!==(t=(0,o._)(e)({granularity:"word"}))&&void 0!==t?t:new r(e)}function l(e,t){if(!t||!e)return[];let n=[],o=0;for(let{segment:a}of t.segment(e))/\S/.test(a)&&n.push({offset:o,length:a.length}),o+=a.length;return n}function s(e,t,n){let o=0;for(let{segment:a}of n.segment(e)){let e=o+a.length;if(t<e)return{word_pos:o,word_end:e};o=e}return{word_pos:0,word_end:0}}},71156:function(e,t,n){var o=n(30171),a=n(61606),r=n(724),i=n(32317),l=n(98808);a.Z.defineType("/translator/web/targetContextEditing",["webTranslatorCore","/translator/core/config","/translator/core/domElements","/translator/smartEditing/smartTargetEditingDetector","/translator/smartEditing/smartTargetEditing","/translator/smartEditing/smartTargetEditingAlternatives","/translator/dictionary","/translator/core/highlightManagement","/translator/core/targetLanguages"],(e,t,n,a,s,d,g,u,c)=>{let h=(0,o.S3)(null),p=(0,o.S3)(!1),S=(0,o.S3)(!1),T=(0,o.S3)(!1);(0,o.S1)([S],e=>{e&&T(!0)});let m=g.isDictSupported,f=(0,o.S3)(!1),v=(0,o.S3)({}),C=(0,l.f)();s.onTargetPopupOpened.push(()=>C()),(0,o.S1)([h,p,m],(n,o,a)=>{if(o||!n)return;if(!a||!function(n){let{langContext:o,tSentenceWordPos:a,tSentenceCursorPos:i,clickNumber:l}=n,d=!t.get("isMobile"),g=!a&&e.isActiveLangContext(o);if(g)return!1;let u=o.areWordsWrittenContinuously()?i:a;if(!u)return!1;let c=u.sentence,h=u.sentenceCursorOffset,p=!(0,r.pf)(c.getText(),h,o.areWordsWrittenContinuously());if(p)return!1;let S=!1,T=null;d&&(S=(T=u.cursorOffset)===E);let m=!d&&s.isPopupOpen();return(void 0===l||!(l>=3)&&(!m||1!==l))&&(!m&&!S||2===l)&&!!e.isActiveLangContext(o)&&(d&&(E=T),!0)}(n)){E=null,s.closePopup();return}let{tSentenceCursorPos:i,tSentenceWordPos:l,trigger:d,langContext:g}=n,u=g.areWordsWrittenContinuously()?i:l;if(!u)return;let h={targetSentence:u.sentence,globalCursor:u.cursorOffset,sentenceCursor:u.sentenceCursorOffset,trigger:d,data:{type:"alternatives",isComplete:!0,entries:[],error:!1},dataSecondary:void 0,targetLang:c.currentLanguage()};s.openPopup(h)});let E=null,y=()=>{h(null),E=null,s.closePopup()},A=e=>{let t=n.targetEdit.contains(e.target);t||y()};async function L(e){var t,o,a,r;let{targetSentence:l,sentenceCursor:s}=null!=e?e:{};if(!l||void 0===s)return;let d=await (0,i.ok)("targetContextEditing",u,l,s),g=null!==(t=null!==(o=null==c?void 0:null===(a=c.currentLanguage)||void 0===a?void 0:a.call(c).variant)&&void 0!==o?o:null==c?void 0:null===(r=c.currentLanguage)||void 0===r?void 0:r.call(c).lang)&&void 0!==t?t:"",h=(0,i.yu)(l.getText(),s,g),p={start:n.targetEdit.selectionStart};return{position:d,selection:p,word:h}}a.onAlternatives.push(e=>{p(d.shouldOpenPopup(e,!1)),f(d.isSmartTargetEditingSupported(e.langContext)),h(e)}),a.onStopSmartEditing.push(()=>{y()});let H=(0,o.S3)();return(0,o.S1)([s.targetPopupInfo],e=>{let t=H();if(H(e),t&&e&&e.targetSentence===t.targetSentence&&e.globalCursor===t.globalCursor&&e.sentenceCursor===t.sentenceCursor||(null==e?void 0:e.trigger)==="autocompletion")return;let n=t&&e&&e.targetSentence===t.targetSentence&&e.sentenceCursor!==t.sentenceCursor;n||S(!1),L(e).then(e=>{e&&v(e),S(s.isPopupOpen())}).catch(e=>console.error(e))}),window.addEventListener("resize",()=>{E=null,y()},{passive:!0}),{isOpen:S,wasOpen:T,close:y,closeOutsideClick:A,context:v,isDictionarySupported:m,isAlternativesSupported:f,onOpened:C}})}}]);