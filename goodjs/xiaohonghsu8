/*! For license information please see Explore.73d78a1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkxhs_pc_web=self.webpackChunkxhs_pc_web||[]).push([[987],{92298:function(t,e,n){n.d(e,{GP:function(){return u},p3:function(){return i}});var r=n(4951),o=n(72757),i=function(t){return t.CLOSE_ICON="close_icon",t.NO_TIP="no_tip",t.THANK_CLOSE="thank_close",t.CUSTOM="custom",t}({}),u=function(t){return t.SCORE="score",t.FORM="form",t}({}),a=function(t){return t.NO_TRIGGER="noTrigger",t.SCORING="scoring",t.Forming="forming",t.THANK="thank",t.ClOSE="close",t}({});e.ZP=function(t){var e=t.closeEffects,n=t.reportEffects,i=t.threshold,u=(0,r.iH)(a.NO_TRIGGER),l=(0,r.qj)({score:0,formValues:{answers:[],extra:[{key:"else",value:""}]}}),c=(0,o.Fl)((function(){return u.value===a.SCORING||u.value===a.Forming||u.value===a.THANK})),v=(0,o.Fl)((function(){return u.value===a.SCORING})),s=(0,o.Fl)((function(){return u.value===a.Forming})),f=(0,o.Fl)((function(){return u.value===a.THANK})),d=(0,o.Fl)((function(){return u.value===a.SCORING?0:u.value===a.Forming?1:-1}));return(0,o.YP)(u,(function(e){e===a.THANK&&(null==t||t.normalFinishEffect())})),(0,o.YP)(c,(function(e){e&&(null==t||t.visibleEffect())})),{state:u,step:d,visible:c,showThank:f,showScore:v,showForm:s,triggerNps:function(){u.value=a.SCORING},close:function(t){"function"==typeof(null==e?void 0:e[t])&&e[t](),u.value=a.ClOSE},report:function(t){"function"==typeof(null==n?void 0:n[t])&&n[t](),l.score<=i&&u.value===a.SCORING?u.value=a.Forming:u.value=a.THANK},setScore:function(t){l.score=t},setFormValues:function(t){l.formValues.answers=t.checkbox,l.formValues.extra[0].value=t.textarea},npsContent:l}}},662:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});var r=n(91135),o=n.n(r),i=n(72757),u=n(4951),a=n(48899),l=n(71638),c=n(37307),v=n(51459),s=n.n(v),f=n(24998),d=n.n(f),h=n(16463),p=n.n(h),g=n(41543),y=n.n(g),m=n(53742),w=n(885),x=n.n(w),_=n(79140),N=n.n(_),E=n(2423),L=n.n(E),S=n(16048),b=n.n(S),F=n(94880),k=n.n(F),C=n(97050),T=n.n(C),I=n(49613),O=n(99529),H=n.n(O),G=n(90971),R=n(47349),P=n(60306),A=n(20919),j=n(83613),U=n(86589),K=n(73851),Y=n(92298),Z=n(97197);function M(){M=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=k()||function(t,e,n){t[e]=n.value},o="function"==typeof b()?b():{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(t,e,n){return k()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(j){l=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,u=L()(i.prototype),a=new R(o||[]);return r(u,"_invoke",{value:I(t,n,a)}),u}function v(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=c;var f={};function h(){}function g(){}function w(){}var _={};l(_,i,(function(){return this}));var E=N(),S=E&&E(E(P([])));S&&S!==e&&n.call(S,i)&&(_=S);var F=w.prototype=h.prototype=L()(_);function C(t){var e;x()(e=["next","throw","return"]).call(e,(function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function o(r,i,u,a){var l=v(t[r],t,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==(0,m.Z)(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,u,a)}),(function(t){o("throw",t,u,a)})):e.resolve(s).then((function(t){c.value=t,u(c)}),(function(t){return o("throw",t,u,a)}))}a(l.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function I(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var a=O(u,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=v(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=v(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function H(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function G(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],x()(t).call(t,H,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=w,r(F,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return y()?y()(t,w):(t.__proto__=w,l(t,a,"GeneratorFunction")),t.prototype=L()(F),t},t.awrap=function(t){return{__await:t}},C(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=p());var u=new T(c(e,n,r,o),i);return t.isGeneratorFunction(n)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},C(F),l(F,a,"Generator"),l(F,i,(function(){return this})),l(F,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return d()(n).call(n),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,R.prototype={constructor:R,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,x()(e=this.tryEntries).call(e,G),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+s()(r).call(r,1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),G(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;G(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}var q=function(){var t=(0,u.iH)(!0);return(0,i.dl)((function(){t.value=!0})),(0,i.se)((function(){t.value=!1})),{isKeepAliveActived:t}},D=n(996),V=n(49359);var W=(0,i.aZ)({__name:"Index",setup:function(t){(0,R.Kf)({meta:[{name:"description",content:"2 亿人的生活经验，都在小红书"},{name:"og:description",content:"2 亿人的生活经验，都在小红书"}]});var e=(0,i.RC)((function(){return n.e(302).then(n.bind(n,96828))})),r=(0,u.iH)(!1),v=(0,u.iH)(),s=(0,P.yj)(),f=(0,U.useFeedStore)(),d=(0,V.dw)(),h=function(t){var e=(0,A.s)().serverTime,n=(0,j.L)(),r=(0,U.useFeedStore)(),a=(0,u.iH)({}),l=(0,u.iH)(!1),c=(0,u.iH)(!1),v=(0,u.iH)(!1),s=(0,u.iH)(!1),f=(0,u.iH)(!1),d=(0,u.iH)(!1),h=(0,u.iH)(0),p=(0,u.iH)(!1),g=(0,i.Fl)((function(){return l.value&&(c.value||v.value||s.value)})),y=(0,i.Fl)((function(){var t,r,o,i,u,l,c,v,s,f,d,h;return{bizType:"xhs-pc-web",unitedId:H()(t="".concat(e)).call(t,(null===(r=n.userInfo)||void 0===r?void 0:r.userId)||"unknown"),threshold:null!==(o=null===(i=a.value)||void 0===i?void 0:i.threshold)&&void 0!==o?o:8,npsId:null!==(u=null===(l=a.value)||void 0===l?void 0:l.npsId)&&void 0!==u?u:"",title:null!==(c=null===(v=a.value)||void 0===v?void 0:v.title)&&void 0!==c?c:"",npsRange:null!==(s=null===(f=a.value)||void 0===f?void 0:f.npsRange)&&void 0!==s?s:[0,1,2,3,4,5,6,7,8,9,10],questionnaire:null!==(d=null===(h=a.value)||void 0===h?void 0:h.questionnaire)&&void 0!==d?d:{title:"请问哪些问题影响了您的推荐意愿？（可多选）",answers:[{title:"发现页浏览体验较差",value:"bad_feed_experience"},{title:"笔记详情页的浏览体验较差",value:"bad_note_experience"},{title:"个人主页的浏览体验较差",value:"bad_user_page_experience"},{title:"不能搜索",value:"no_search"},{title:"功能缺失",value:"lack_of_functions"},{title:"其他",value:"other"}]}}})),m=function(){c.value=!0};(0,i.bv)((0,I.Z)(M().mark((function t(){var i,u,c,v,s;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.dJ.get("NPS_CONFIG",{withCredentials:!1});case 3:a.value=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return");case 9:u=(0,G.ORN)(null!==(i=null==r?void 0:r.feedsWrapper)&&void 0!==i?i:document,"scroll",(function(){var t,e,n,o;p.value&&Math.abs((null!==(t=null==r||null===(e=r.feedsWrapper)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:null===(n=document)||void 0===n||null===(o=n.documentElement)||void 0===o?void 0:o.scrollTop)-h.value)>600&&(d.value=!0,u())})),f=void 0,g=void 0,y=void 0,w=void 0,x=void 0,_=void 0,N=void 0,E=void 0,L=void 0,g=!0,y=!1,w=!1,x=window.localStorage.getItem(K.Z.NO_NPS_UNTIL),N=(_=null!==(f=a.value)&&void 0!==f?f:{}).enable,E=_.dateRange,L=_.targetUser,x&&(0,Z.Jf)(e,+x)&&(g=!1),2===(null==E?void 0:E.length)&&(0,Z.tA)(e,E)&&(y=!0),null!=L&&L.length&&(o()(L).call(L,"tourist")&&!n.userInfo.guest&&(w=!0),o()(L).call(L,"redUser")&&n.loggedIn&&(w=!0)),N&&g&&y&&w&&(l.value=!0,(null===(c=a.value)||void 0===c||null===(v=c.triggers)||void 0===v?void 0:v.stayMinutes)>0&&T()(m,60*+(null===(s=a.value.triggers)||void 0===s?void 0:s.stayMinutes)*1e3));case 11:case"end":return t.stop()}var f,g,y,w,x,_,N,E,L}),t,null,[[0,6]])})))),(0,P.iS)((function(){return f.value&&(d.value=!0),!0}));var w=(0,i.m0)((function(){var t,e;r.mfStatistics.visitTimes>(null===(t=a.value)||void 0===t||null===(e=t.triggers)||void 0===e?void 0:e.visitMF)&&(s.value=!0,w())})),x=(0,i.m0)((function(){var t,e;r.mfStatistics.readFeedCount>(null===(t=a.value)||void 0===t||null===(e=t.triggers)||void 0===e?void 0:e.viewNotes)&&(v.value=!0,x())})),_=(0,i.YP)(g,(function(e){e&&(T()((function(){var e;null===(e=t.value)||void 0===e||e.triggerNps(),f.value=!0}),1e4),_())})),N=(0,i.YP)(f,(function(t){var e,n,o,i;t&&(h.value=null!==(e=null===(n=r.feedsWrapper)||void 0===n?void 0:n.scrollTop)&&void 0!==e?e:null===(o=document)||void 0===o||null===(i=o.documentElement)||void 0===i?void 0:i.scrollTop,p.value=!0,N())})),E=(0,i.YP)(d,(function(e){e&&(t.value.close(Y.p3.CUSTOM),E())}));return{npsCompConfig:y}}(v),p=h.npsCompConfig,g=q().isKeepAliveActived;r.value=s.name===c.Z.ExploreName;var y=(0,D.cH)().layoutCtx,m=(0,i.Fl)((function(){var t,e;return null!==(t=null==y||null===(e=y.layoutPreset)||void 0===e?void 0:e.value.exploreLayout)&&void 0!==t?t:a.Z}));return(0,i.YP)(s,(function(t){var e;(t.path===c.Z.ExplorePath&&(r.value=!0),t.name===c.Z.ExploreNoteName)&&(r.value=!o()(e=[l.Dq.Empty,l.Dq.NoteDetail]).call(e,d.prevRoute))})),(0,i.wF)(f.initMfStatistics),function(t,n){var o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,u.SU)(r)?((0,i.wg)(),(0,i.j4)((0,i.LL)((0,u.SU)(m)),{key:0})):(0,i.kq)("",!0),(0,u.SU)(g)?((0,i.wg)(),(0,i.j4)(o,{key:1})):(0,i.kq)("",!0),((0,i.wg)(),(0,i.j4)(i.n4,null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,u.SU)(e),{ref_key:"npsRef",ref:v,config:(0,u.SU)(p)},null,8,["config"])]})),_:1}))],64)}}})}}]);
//# sourceMappingURL=https://picasso-private-1251524319.cos.ap-shanghai.myqcloud.com/data/formula-static/formula/xhs-pc-web/Explore.73d78a1.chunk.js.map