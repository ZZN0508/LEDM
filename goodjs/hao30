define("indexnew:component/gamebox/common/index.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/config.js","indexnew:static/js/store.js","indexnew:static/js/format.js","indexnew:component/gamebox/common/template.js"],function(e,n,t,a,i,r,o,s,u){var c=i,m=r,g=o,l=m.get("userinfo")&&m.get("userinfo").islanding,d=s,h=u,f={renderHeaderTpl:function(e){return d(h.headerTpl,{type:e})},bindSaveEvent:function(e,n,t){var a=this;e.each(function(e,i){c(i).click(function(){var i=n[e];a.saveData(i,t)})})},saveData:function(e,n){var t=e&&e.game_id;if(t&&!l){for(var a,i=g.get("gameCacheList")||[],r=i.length,o={},s={},u=0,c=[],m=0;m<i.length;m++)if(i[m]&&i[m].game_id===t){a=m;break}if(a>=0){o=i[a],c=o.history,u=c&&c.length,u>=3&&c.pop();var d=this.transFormSeconds(+new Date);c.unshift(d),a&&(i.splice(a,1),i.unshift(o)),g.set("playedHoverStatus",!0)}else r>=7&&i.pop(),s=n(e),i.unshift(s),g.set("playedHoverStatus",!0);g.set("gameCacheList",i)}},limitLen:function(e,n){return e&&e.length>n?e.substr(0,n)+"...":e},transFormSeconds:function(e){return e?(e=parseInt(e,10),Math.ceil(e/1e3)):0},changeHotKey:function(e){var n=this.transFormSeconds(+new Date);return{game_id:e.game_id,game_name:e.game_name,icon_url:e.icon_url,jump_url:e.jump_url,history:[n]}},changeLikeKey:function(e){var n=this.transFormSeconds(+new Date);return{game_id:e.game_id,game_name:e.name,icon_url:e.icon,jump_url:e.jump_url,history:[n]}},changeRankKey:function(e){var n=this.transFormSeconds(+new Date);return{game_id:e.game_id,game_name:e.game_name,icon_url:e.game_icon,jump_url:e.jump_url,history:[n]}},guideAnimation:function(e){var n=0,t=setInterval(function(){e.animate({right:"86px"},400,function(){e.animate({right:"56px"},400,function(){3===n&&(e.hide(),n=0,clearInterval(t)),++n})})},800)},getUrlParams:function(){var e={};try{for(var n=window.location.search.substring(1),t=n.split("&")||[],a=0;a<t.length;a++){var i=t[a].split("=");e[i[0]]=i[1]}}catch(r){}return e}};n.exports=f});