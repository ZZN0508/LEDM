"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[2599],{7130:function(e,t,r){r.d(t,{$c:function(){return i},JY:function(){return o},Nw:function(){return l},lx:function(){return s},xb:function(){return a}});var n=r(7766);let a=e=>0===e.trim().length,o=e=>!e.match(n.Nq)&&!e.match(n._s),s=e=>{let t=new Blob([e],{type:"text/plain;charset=UTF-8"});return t.size},i=e=>s(e)<=n.mB,l=e=>e.replace(n.xk,"").replace(n.BB," ").replace(n.Gk," ").replace(n.Nq,"").replace(n._s,"").trim()},7766:function(e,t,r){var n,a,o,s;r.d(t,{$G:function(){return i},BB:function(){return E},CS:function(){return L},DJ:function(){return g},EN:function(){return C},EX:function(){return S},Fe:function(){return v},Gk:function(){return y},Gr:function(){return x},Ju:function(){return f},LQ:function(){return _},Nq:function(){return p},UJ:function(){return h},Wn:function(){return l},_s:function(){return m},mB:function(){return c},nw:function(){return d},w0:function(){return u},xk:function(){return T}});let i=650,l=10,g=2592e3,u=20,c=1024,d=3,h=5,S="glossaryHasAsyncPending",f="glossary",p=RegExp("[\\x00-\\x1F\\x80-\\x9F\\x7F\\xAD]","g"),m=RegExp("[？。．！\xb1]","g"),y=RegExp("\\s+","g"),T=RegExp("\\r?\\n","g"),E=RegExp("\\t","g"),v=((n={}).ActiveGlossaryId="LMT_customization.activeGlossaryId",n.DialogShown="LMT_customization.hasDialogBeenShown",n.EnterpriseUser="LMT_customization.glossaryEnterprise",n.FreeUser="LMT_customization.glossary",n.IsEnabled="LMT_customization.isEnabled",n.DataMigration="LMT_customization.dataMigration",n),C=((a={}).Entries="\n",a.Languages=">",a.SourceAndTarget="	",a),L=((o={}).Comma=",",o.Semicolon=";",o.Tab="	",o),_=((s={})[s.NoSession=1]="NoSession",s[s.InvalidSession=2]="InvalidSession",s[s.InactiveSubscription=3]="InactiveSubscription",s[s.LanguagePairSetIdOutdated=9]="LanguagePairSetIdOutdated",s),b=!1;b=!0;let x=b},95177:function(e,t,r){r.d(t,{Z:function(){return F}});var n=r(4769),a=r(7766),o=r(7130);let s=e=>{if(e.includes("-")){let t=e.split("-");e=`${t[0].toLowerCase()}-${t[1].toUpperCase()}`}else e=e.toLowerCase();return e},i=function(e){return void 0===e&&(e=e=>e),(t,r)=>{let n=e(t),a=e(r);return n<a?-1:n>a?1:0}},l=e=>(0,n.Z)(e).sort(i(e=>e.textSource)),g=function(e,t){var r,a;void 0===t&&(t="");let o=t?(void 0===(r=t)&&(r=""),void 0===(a=e=>e.textSource.toLowerCase())&&(a=e=>e),(e,t)=>{let n=a(e),o=a(t);return n.localeCompare(o,r)}):i(e=>e.textSource.toLowerCase());return(0,n.Z)(e).sort(o)},u=function(e,t){return void 0===t&&(t=l),t(e).map(e=>`${e.textSource}${a.EN.SourceAndTarget}${e.textTarget}`).join(a.EN.Entries)},c=e=>e?e.split(a.EN.Entries).map(e=>{let t=e.split(a.EN.SourceAndTarget);return{textSource:t[0],textTarget:t[1]}}):[],d=e=>Array.isArray(e)?e.flatMap(e=>e.entries.map(t=>({langSource:e.langSource,langTarget:e.langTarget,textSource:t.textSource,textTarget:t.textTarget}))):[],h=e=>(e||[]).reduce((e,t)=>e+t.entries.length,0),S=function(e,t,r){return void 0===e&&(e=[]),e.find(e=>e.langSource===t&&e.langTarget===r)},f=e=>{let{id:t,langSource:r,langTarget:a}=e;return{id:t,langSource:r,langTarget:a,entries:(0,n.Z)(e.entries)}},p=(e,t,r)=>{let n=S(e,t,r);return n?f(n):null},m=function(e){return void 0===e&&(e=[]),e.map(e=>f(e))},y=(e,t)=>e.entries.some(t),T=(e,t,r,n)=>{let a=S(e,t,r);return!!a&&y(a,e=>e.textSource===n)},E=(e,t,r,n,a)=>{let o=S(e,r,n);return!!o&&y(o,e=>e!==t&&e.textSource===a)},v=(e,t,r)=>{let n=e.entries.find(e=>e.textSource===t);n&&(n.textTarget=r)},C=function(e,t){void 0===e&&(e=[]);let{langSource:r,langTarget:n}=t;return e.map(e=>e.langSource===r&&e.langTarget===n?t:e)},L=function(e,t){void 0===e&&(e=[]);let{langSource:r,langTarget:n}=t;return e.filter(e=>e.langSource!==r||e.langTarget!==n)},_=function(e,t,r){return void 0===e&&(e=[]),e.filter(e=>e.textSource!==t||e.textTarget!==r)},b=e=>{let t=e.split(a.EN.Languages);return{langSource:t[0],langTarget:t[1]}},x=(e,t)=>`${e}${a.EN.Languages}${t}`,w=e=>{let t;switch(e){case a.CS.Comma:t="comma";break;case a.CS.Semicolon:t="semicolon";break;case a.CS.Tab:t="tab";break;default:t=""}return t},P=(e,t)=>{let r=e;for(;(0,o.lx)(r)>t;)r=r.slice(0,-1);return r},G=RegExp("^ \\((\\d+)\\)$"),A=(e,t)=>{let r=P(t,a.mB-20);if(e.includes(r)){let t=0;e.forEach(e=>{if(e.startsWith(r)){let n=e.substr(r.length),a=n.match(G);a&&a[1]&&(t=Math.max(t,Number(a[1])))}}),r=`${r} (${t+1})`}return r},I=e=>{var t;e=null!==(t=e)&&void 0!==t?t:"";let r=e.lastIndexOf(".");return r<0?e:e.substr(0,r)};var D=r(52644);let k=function(){function e(e){let t=e.getActiveLangContext(),r=s(t.getSourceLang()),n=s(t.getTargetLang());return{langSource:r,langTarget:n}}return{convertLangPairSetsToEntries:d,convertToLangSourceAndLangTarget:b,convertToLangPair:x,correctLangFormat:s,getAllEntriesCount:h,getElementPathClasses:function(e){let t=[];for(;e;)t.push.apply(t,(0,n.Z)(e.classList)),e=e.parentElement;return t},getFormattedDate:function(e,t){void 0===e&&(e=new Date),void 0===t&&(t=defaultDateSeparator);let r=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return[r,n,a].join(t)},getFormattedTime:function(e,t,r){void 0===e&&(e=new Date),void 0===t&&(t=":"),void 0===r&&(r=!1);let n=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),o=[n,a];if(r){let t=e.getSeconds().toString().padStart(2,"0");o.push(t)}return o.join(t)},getLangPairSet:S,getLangPairSetCopy:p,getLangPairSetForCurrentTranslatorLanguages:function(t,r){let n;let{langSource:a,langTarget:o}=e(r);return a&&o&&(n=S(t,a,o)),n},getLangPairSetsCopy:m,getPrioritizedSourceLangsAndTargetLang:function(e){let t=e.getPrioritizedSourceLangs().reverse(),r=s(t[0]),n=s(t[1]),a=s(e.getSelectedTargetLang());return{prioritizedLangs:[r,n],targetLang:a}},getSeparatorText:w,getTranslatorLanguages:e,getUniqueFilename:A,hasTextInputValidChars:o.JY,isFatalError:function(e){let{code:t}=e;return t===a.LQ.NoSession||t===a.LQ.InvalidSession||t===a.LQ.InactiveSubscription},isTextInputEmpty:o.xb,isTextWithinSizeLimit:o.$c,overwriteTermbaseRPCsWithEmptyFunctions:function(e){Object.keys(e).forEach(t=>{e[t]=()=>{}})},parseGlossaryEntriesFromString:c,removeEntry:_,removeFileEnding:I,removeLangPairSet:L,replaceEntry:v,replaceLangPairSet:C,sanitizeTextInput:o.Nw,serializeGlossaryEntries:u,serializeLangPairSetEntries:function(e){return u(e.entries)},sortLangPairSetEntries:l,sortLangPairSetEntriesCaseInsensitive:g,sortLangPairSets:function(e,t){var r,n;return r=t=>e(t),n=t=>e(t),void 0===r&&(r=e=>e),void 0===n&&(n=e=>e),t.sort((e,t)=>{let a=r(e.langSource),o=n(e.langTarget),s=r(t.langSource),i=n(t.langTarget),l=`${a}${o}`,g=`${s}${i}`;return l<g?-1:l>g?1:0})},sortLangPairSetsByLangCode:function(e){return e.sort((e,t)=>e.langSource<t.langSource?-1:e.langSource>t.langSource?1:e.langTarget<t.langTarget?-1:e.langTarget>t.langTarget?1:0)},sortGlossaries:function(e,t){return e.sort((e,r)=>e.name.localeCompare(r.name,null!=t?t:"en",{numeric:!0})),e},useOnClickOutside:function(e,t,r){e(()=>{let e=e=>{!t.current||t.current.contains(e.target)||r(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[t,r])},wouldCreatedEntryOverwrite:T,wouldUpdatedEntryOverwrite:E,canEditGlossary:function(e){let t=[D.M.Admin,D.M.Editor];return t.includes(e)},isGlossaryAdmin:function(e){return e===D.M.Admin}}}();var F=k},56439:function(e,t,r){var n=r(9443),a=r(30171),o=r(98808),s=r(98824),i=r(61606),l=r(7766),g=r(27378),u=r(51098),c=r(95177),d=r(18149);let h=e=>{let{errorHandlingFeature:t,localizedTexts:r,languageManagement:n,retranslationServices:o,translateSourceSentences:s,updateSourceSentences:i,webTranslatorCore:h,destroyTooltip:S,predefinedState:f}=e,p={editorIsOpen:(0,a.S3)(!1),glossaryId:(0,a.S3)(null),glossaryIsEnabled:(0,a.S3)(null),glossaryLangPairSets:(0,a.S3)(null),hasFatalError:(0,a.S3)(!1),isAsyncPending:(0,a.S3)(!0),isInitialized:(0,a.S3)(!1),storageUseLocal:(0,a.S3)(null),termbaseHasError:(0,a.S3)(!1),considerDelayingTranslationRequest(e,t){m.isAsyncPending()&&(t().push(l.EX),m.isAsyncPending.onValueChanged.push(e=>{if(!e)return t(t().filter(e=>e!==l.EX)),"REMOVE"}))},onTermbaseErrorStateChange(){m.termbaseHasError()||m.hasFatalError()?t.addSystemError({type:u.c.TermbaseIssue,priority:89}):t.resolveSystemError(u.c.TermbaseIssue)},createTooltip(e){let{textSource:t,textTarget:r,langSource:n,langTarget:a}=e;return g.createElement(d.j,{textSource:t,textTarget:r,langSource:n,langTarget:a,onHide:()=>{},oldTextareaStyling:!0},null)},decorateTranslationRequest(e){let t;if(void 0===e&&(e=n.getActiveLangContext()),m.isInitialized()&&m.glossaryIsEnabled()&&!m.termbaseHasError()&&!m.hasFatalError()){let e=c.Z.getLangPairSetForCurrentTranslatorLanguages(m.glossaryLangPairSets(),h);e&&Array.isArray(e.entries)&&e.entries.length&&(t=m.storageUseLocal()?m.buildGlossaryParamsForLocalStorage(e):m.buildGlossaryParamsForBackendStorage(e))}t?e.setTranslationJobParams(l.Ju,t):e.removeTranslationJobParams(l.Ju)},buildGlossaryParamsForLocalStorage(e){let t={termbase:{dictionary:c.Z.serializeLangPairSetEntries(e)}};return t},buildGlossaryParamsForBackendStorage(e){let t;return m.glossaryId()&&(t={termbase:{id:m.glossaryId(),dictionaryId:e.id}}),t},decorateTranslationWithGlossaryHighlights(e){e.forEach(e=>{let{translation:t,translationMetaDataForBeams:r}=e;if(!t||(t.additionalData&&t.additionalData.glossaryHighlights&&(t.additionalData.glossaryHighlights=[]),!m.glossaryIsEnabled()||!Array.isArray(r)||!r.length>0||!Array.isArray(r[0].glossary_highlights)||!r[0].glossary_highlights.length>0))return;let{glossary_highlights:n}=r[0];t.additionalData.glossaryHighlights=n.map(e=>({textSource:e.tag_l1,textTarget:e.tag_l2,characterRanges:e.highlight_chr_ranges}))})},clearTargetSentencesGlossaryHighlights(e){let t=null!=e?e:n.getActiveLangContext().getTargetSentences();m.glossaryIsEnabled()||t.forEach(e=>{e.highlights=e.highlights.filter(e=>"glossaryHighlight"!==e.type)})},decorateTargetSentencesWithGlossaryHighlights(e){m.clearTargetSentencesGlossaryHighlights(e);let t=c.Z.getLangPairSetForCurrentTranslatorLanguages(m.glossaryLangPairSets(),h);e.forEach(e=>{let r=e.getTranslation();e.highlights=e.highlights.filter(e=>"glossaryHighlight"!==e.type),r&&r.additionalData&&r.additionalData.glossaryHighlights&&r.additionalData.glossaryHighlights.forEach(r=>{r.characterRanges.forEach(n=>{let{textSource:a,textTarget:o}=r,s={textSource:a,textTarget:o,langSource:null==t?void 0:t.langSource,langTarget:null==t?void 0:t.langTarget};e.highlights.push({type:"glossaryHighlight",normalizedOffset:n[0],normalizedLength:n[1]-n[0],classes:["lmt__glossary_highlight"],tooltipData:s,tooltipFactory:m.createTooltip})})})})},retranslate(){let e=f.isInPredefinedState()&&f.hasTargetText();e||o.retranslateUnchangedAndUpdateHighlightOfChangedSentences()},beforeUserInteraction(){f.leavePredefinedState()}},m=p;i.doCheckIfSentenceSplittingShouldBeEnforced.push((e,t)=>{(m.glossaryIsEnabled()||null===m.glossaryIsEnabled())&&t(!0)}),s.onFinalizeTranslations.push(m.decorateTranslationWithGlossaryHighlights),s.onFinalizeUpdatedTargetSentences.push(m.decorateTargetSentencesWithGlossaryHighlights),(0,a.S1)(m.glossaryIsEnabled,e=>{e||m.clearTargetSentencesGlossaryHighlights()}),s.collectReasonsToDelayTranslation.push(m.considerDelayingTranslationRequest),n.doPrepareNewLangContext.push(m.decorateTranslationRequest);let y=()=>{m.editorIsOpen()||(m.decorateTranslationRequest(),m.retranslate())};return m.isInitialized.onValueChanged.push(e=>{let t,o;if(!e)return;(0,a.S1)(m.glossaryIsEnabled,e=>{n.isGlossaryEnabled(e),y()}),m.glossaryLangPairSets.onValueChanged.push(y);let s=()=>JSON.stringify(c.Z.sortLangPairSets(e=>r.get(`glossary/select_lang_${e}`),m.glossaryLangPairSets()||[])),i=()=>{t=m.glossaryIsEnabled(),o=s()},l=()=>{let e=!1,r=m.glossaryIsEnabled();return t?e=!r||s()!==o:r&&(e=!0),e};m.editorIsOpen.onValueChanged.push(e=>{e?(i(),S()):l()&&(f.leavePredefinedState(),y())}),m.termbaseHasError.onValueChanged.push(()=>{m.onTermbaseErrorStateChange(),y()}),m.hasFatalError.onValueChanged.push(()=>{m.onTermbaseErrorStateChange(),y()})}),p};var S=r(52644);i.V.defineType("/translator/glossary",["/translator/common/openPage","/translator/core/config","/translator/core/languageManagement","/translator/core/retranslationServices","/translator/core/translationBackend","/translator/core/updateSourceSentences","/translator/webTranslatorCore","/translator/smartEditing/smartTargetEditing","/translator/core/translateSourceSentences","/translator/common/popups","/translator/common/errorHandling","/translator/environment/localizedTexts","/translator/environment/featureSet","/translator/core/predefinedState","/translator/core/domElements"],(e,t,r,i,g,u,c,d,f,p,m,y,T,E,v)=>{var C,L,_,b,x,w;let P=g.backendURL_translation().replace(/\/jsonrpc$/,"/termbases/jsonrpc"),G=s.C.connectTo({url:P,withCredentials:!0}),A=(0,n.OC)(l.Fe.IsEnabled,!1,l.DJ),I=(0,n.OC)(l.Fe.ActiveGlossaryId,"",l.DJ),D=(0,n.OC)(l.Fe.DialogShown,!1,l.DJ),k={changeTermDictionary:G.getFunction("changeTermDictionary"),changeTermbaseName:G.getFunction("changeTermbaseName"),changeTermbaseSharedState:G.getFunction("changeTermbaseSharedState"),createTermbase:G.getFunction("createTermbase"),deleteTermbase:G.getFunction("deleteTermbase"),getTermDictionaries:G.getFunction("getTermDictionaries"),getTermDictionary:G.getFunction("getTermDictionary"),getTermbases:G.getFunction("getTermbases")},F=()=>{let e=c.features.get("targetHighlighting");null==e||e.destroyTooltip()},M=h({errorHandlingFeature:m,localizedTexts:y,languageManagement:r,retranslationServices:i,translateSourceSentences:f,updateSourceSentences:u,webTranslatorCore:c,destroyTooltip:F,predefinedState:E}),{requestPlansPage:N,requestProPage:U}=e,$={coreConfig:t,languageManagement:r,requestPlansPage:N,requestProPage:U,retranslationServices:i,smartTargetEditing:d,termbaseRpc:k,translateSourceSentences:f,translationBackend:g,translatorInterface:M,updateSourceSentences:u,webTranslatorCore:c,popups:p,persistentValue:{glossaryIsEnabled:A,activeGlossaryId:I,hasDialogBeenShown:D},isEnterpriseAccount:t.get("isEnterpriseAccount"),il:t.get("il"),isProUser:t.get("CONFIG__IS_PRO"),isSharingAllowed:null!==(C=null===(L=T())||void 0===L?void 0:null===(_=L.glossary)||void 0===_?void 0:_.sharing)&&void 0!==C&&C,multipleGlossariesLimit:null!==(b=null===(x=T())||void 0===x?void 0:null===(w=x.glossary)||void 0===w?void 0:w.maxGlossaries)&&void 0!==b?b:1,targetTextarea:v.targetEdit},H=(0,a.S3)(null),O=(0,a.S3)(!1),R=(0,a.S3)([]),B=(0,a.S3)(""),z=(0,a.S3)([]),Z=(0,a.S3)(!1),q=(0,a.S3)(S.M.User),J={onReady:(0,o.f)(),onToggleGlossary:(0,o.f)(),onGlossaryButtonClicked:(0,o.f)(),onSelectGlossaryLanguagePair:(0,o.f)(),onSelectGlossarySourceLang:(0,o.f)(),onSelectGlossaryTargetLang:(0,o.f)(),onGlossaryEntryCreated:(0,o.f)(),onGlossaryCreateEntryErrorMessageDisplayed:(0,o.f)(),onEditEntryClicked:(0,o.f)(),onDeleteEntryClicked:(0,o.f)(),onProAdDisplayed:(0,o.f)(),onProAdProCtaClicked:(0,o.f)(),onProAdSecondaryCtaClicked:(0,o.f)(),onProUploadAdDisplayed:(0,o.f)(),onProUploadAdProCtaClicked:(0,o.f)(),onAdvancedAdProCtaClicked:(0,o.f)(),onAdvancedAdSecondaryCtaClicked:(0,o.f)(),onMultiGlossaryAddNewGlossaryLinkClicked:(0,o.f)(),onMultiGlossaryAddNewGlossaryButtonClicked:(0,o.f)(),onMultiGlossarySelectionDropdownClicked:(0,o.f)(),onMultiGlossaryDeleteGlossaryClicked:(0,o.f)(),onMultiGlossaryEditGlossaryClicked:(0,o.f)(),onMultiGlossaryFreeUserPromotionDisplayed:(0,o.f)(),onMultiGlossaryFreeUserCTAClicked:(0,o.f)(),onMultiGlossaryFreeUserSecondaryButtonClicked:(0,o.f)(),onMultiGlossaryStarterUserPromotionDisplayed:(0,o.f)(),onMultiGlossaryStarterUserCTAClicked:(0,o.f)(),onMultiGlossaryStarterUserSecondaryButtonClicked:(0,o.f)(),onEditorUploadGlossaryClicked:(0,o.f)(),onUploadOrCreateLayerUploadGlossaryClicked:(0,o.f)(),onUploadOrCreateLayerCreateGlossaryClicked:(0,o.f)(),onUploadGlossaryStarted:(0,o.f)(),onUploadGlossaryFinished:(0,o.f)(),onDownloadLinkClicked:(0,o.f)(),onSharedStateToggles:(0,o.f)(),onDropdownGlossarySelected:(0,o.f)(),onGlossarySelected:(0,o.f)(),onSharedNotificationShown:(0,o.f)(),onSharedNotificationAction:(0,o.f)(),onGlossaryDropdownClicked:(0,o.f)(),onGlossarySuggestionsPopup:(0,o.f)()};return{isGlossaryEnabled:O,glossaryLangPairSets:R,glossaryId:B,glossariesInfo:z,glossaryShared:Z,glossaryRights:q,glossaryNotifications:J,setGlossaryEnabledState:H,dependencies:$,translatorInterface:M}})},34404:function(e,t,r){var n=r(61606),a=r(98808),o=r(30171),s=r(75671),i=r(12959);n.Z.defineType("/translator/common/manyTranslationsNag",["/translator/common/observeTextSession","/translator/common/openPage"],(e,t)=>{let{requestProPage:r}=t,n=(0,a.f)(),l=(0,o.S3)(!1),g=(0,a.f)(),u=(0,a.f)(),c=(0,a.f)();g.push(()=>{l(!1),n({dialogClosed:!0})}),u.push(()=>{l(!1),n({dialogClosed:!0,ctaClicked:!0}),r({cta:"many-translations-dialog"})}),c.push(()=>{y(Math.floor(new Date().getTime()/1e3))});let d=i.Z.nagThreshold||i.Z.nagResetTimeout||i.Z.nagCooldownPeriod;d&&console.warn("[manyTranslationsNag]","init");let h=i.Z.nagThreshold?Number(i.Z.nagThreshold):40,S=i.Z.nagResetTimeout?Number(i.Z.nagResetTimeout):86400,f=i.Z.nagCooldownPeriod?Number(i.Z.nagCooldownPeriod):604800,p=(0,s.O)("LMT_text_translator_usage_free.firstTranslation",0),m=(0,s.O)("LMT_text_translator_usage_free.translationCount",0),y=(0,s.O)("LMT_text_translator_usage_free.lastSeenPopup",0),T=(0,s.O)("LMT_text_translator_usage_free.seenPopupCount",0),E=()=>{let e=new Date().getTime(),t=new Date(1e3*Number(p())).getTime();return(e-t)/1e3>=S},v=()=>{let e=new Date().getTime(),t=new Date(1e3*Number(y())).getTime();return(e-t)/1e3>=f},C=()=>{var e,t;m((null!==(e=m())&&void 0!==e?e:0)+1),E()||0===p()?(p(Math.floor(new Date().getTime()/1e3)),m(1)):m()>=h&&(v()&&(l(!0),y(Math.floor(new Date().getTime()/1e3)),T((null!==(t=T())&&void 0!==t?t:0)+1),n({dialogShown:!0})),n({thresholdReached:!0}),m(0)),d&&(console.warn(`firstTranslation: ${p()}`),console.warn(`now: ${Math.floor(new Date().getTime()/1e3)}`),console.warn(`translationCount: ${m()}`),console.warn(`lastSeenPopup: ${y()}`))};return e.onInitialFullTranslation.push(C),e.onFullTranslation.push(C),e.onPartialTranslation.push(C),{onDialogEvent:n,showingNag:l,onDismissed:g,onOpenProPage:u,onShowExternalNagDialog:c,isCooldownPeriodExpired:v}})},8196:function(e,t,r){r.d(t,{K:function(){return i}});var n=r(77396),a=r(98808),o=r(61606),s=r(67974);let i=1900;o.Z.defineType("/translator/common/share",["/translator/core/languageManagement","/translator/core/domElements","/translator/core/textareas","/translator/core/updateSourceSentences","/translator/environment/localizedTexts","/translator/core/config","/translator/core/predefinedState","/translator/core/retranslationServices","/translator/common/shareUrl","/translator/environment/releaseGroups"],(e,t,r,o,i,l,g,u,c)=>{let d=(0,n.$)(),h=l.get("isApp")||l.get("CONFIG__IS_PRO"),S=h||g.isInPredefinedState()&&!g.isPredefinedStateEmpty();function f(){let e=window.location.href;e.search("#")>=0&&window.history.pushState(null,"",e.split("#",2)[0])}function p(e){let t=e.split("#",2)[1];if(!t)return;let r=decodeURIComponent(t).replace(/[\\]./g,e=>"\\\\"===e?"{_BACKSLASH_}":e).replace(/([^\\])[/]/g,"$1{_DELIM_PART_}").replace(/([^\\])[|]/g,"$1{_DELIM_SENTENCE_}").replace(/\\([/|])/g,"$1").replace(/{_BACKSLASH_}/g,"\\"),n=r.split("{_DELIM_PART_}"),[a,o,...s]=2===n.length?[n[0],n[0],n[1]]:n;if(s.length){if(s[0].includes("{_DELIM_SENTENCE_}")){let e=[],t=[];s.forEach(r=>{let[n,a]=r.split("{_DELIM_SENTENCE_}",2);e.push(n),t.push(a)}),g.applyPredefinedState({sourceLangcode:a,targetLangcode:o,sourceChains:e.map(e=>[e]),targetChains:t.map(e=>[e]),revert:[d]}),setTimeout(E)}else g.applyPredefinedState({sourceLangcode:a,targetLangcode:o,sourceText:s[0]})}}function m(e){let t=!1;return e.targetSentences.forEach(e=>{let r=e.getTranslation();r&&(t=t||r.isTargetTextPredefined()||e.getText().trim()!==(r.getTargetText()||"").trim())}),t}function y(){u.retranslateEverything()}function T(){if(S||r.getSourceText().length>c.MAX_TEXT_LENGTH||window.location.pathname.endsWith("/files")){f();return}let t=e.getActiveLangContext();if(m(t)){f();return}let{url:n,shortened:a}=c.createShareUrlByLangContext(e.getActiveLangContext(),!1);if(a)f();else if(g.isInPredefinedState());else{let e=n.replace(/%20/g," ");window.history.replaceState(null,"",e)}}function E(){var e,r,n,a;d();let o=document.createElement("div");o.classList.add("lmt__altered_shared_text_hint"),o.setAttribute("data-testid","translator-altered-text-hint"),o.innerHTML=`<p> ${i.get("translator/share.editedTranslationHint","The translation has been edited.")} </p><div class='lmt__altered_shared_text_hint__buttons'><button> ${i.get("translator/share.editedTranslation_revertButton","Change back to the original version")} </button><button> ${i.get("translator/share.editedTranslation_acceptButton","Accept changes")} </button></div>`,null===(e=o.querySelector("button:first-of-type"))||void 0===e||e.addEventListener("click",e=>{y(),d()}),null===(r=o.querySelector("button:last-of-type"))||void 0===r||r.addEventListener("click",e=>{d()}),t.targetEditOuterContainer.appendChild(o);let s=document.createElement("div");s.classList.add("lmt__mobile_altered_shared_text_hint"),s.innerHTML=`<p> ${i.get("translator/share.editedTranslationHint","The translation has been edited.")} </p><div class='lmt__mobile_altered_shared_text_hint__buttons'><button> ${i.get("translator/share.editedTranslation_revertButton","Change back to the original version")} </button><button> ${i.get("translator/share.editedTranslation_acceptButton","Accept changes")} </button></div>`,null===(n=s.querySelector("button:first-of-type"))||void 0===n||n.addEventListener("click",e=>{y(),d()}),null===(a=s.querySelector("button:last-of-type"))||void 0===a||a.addEventListener("click",e=>{d()}),t.targetEditOuterContainer.appendChild(s),d.push(()=>{o.style.opacity="0",s.style.opacity="0",setTimeout(()=>{var e,t;null===(e=o.parentElement)||void 0===e||e.removeChild(o),null==s||null===(t=s.parentElement)||void 0===t||t.removeChild(s)},400)})}window._dbg_createTextUrl=function(t){return void 0===t&&(t=!1),createShareUrl(e.getActiveLangContext(),t)};let v=(0,a.f)();return window.onhashchange&&v.push(window.onhashchange),v.push(()=>{p(window.location.href)}),window.onhashchange=v,r.onSourceTextChanged.push(()=>{(0,s.wx)("share_refresh",T,500)}),o.onSourceSentencesChanged.push(()=>{(0,s.wx)("share_refresh",T,500)}),r.onTargetTextChanged.push(()=>{(0,s.wx)("share_refresh",T,500)}),g.isInPredefinedState()&&g.isPredefinedStateEmpty()&&window.location.hash&&p(window.location.href),{targetTextHasBeenAltered:m}})}}]);