!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Player=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(e){return e&&e.Math==Math&&e},n=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},r=function(e){try{return!!e()}catch(e){return!0}},o=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,l=c&&!a.call({1:2},1);s.f=l?function(e){var t=c(this,e);return!!t&&t.enumerable}:a;var u=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,f=function(e){return h.call(e).slice(8,-1)},d=f,p="".split,g=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==d(e)?p.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},y=g,m=v,k=function(e){return y(m(e))},b=function(e){return"object"==typeof e?null!==e:"function"==typeof e},w=b,C=function(e,t){if(!w(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!w(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!w(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!w(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},x=v,_=function(e){return Object(x(e))},T=_,E={}.hasOwnProperty,S=Object.hasOwn||function(e,t){return E.call(T(e),t)},P=b,R=n.document,O=P(R)&&P(R.createElement),I=function(e){return O?R.createElement(e):{}},A=I,L=!o&&!r((function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a})),D=o,M=s,N=u,F=k,B=C,j=S,H=L,U=Object.getOwnPropertyDescriptor;i.f=D?U:function(e,t){if(e=F(e),t=B(t,!0),H)try{return U(e,t)}catch(e){}if(j(e,t))return N(!M.f.call(e,t),e[t])};var V={},G=b,W=function(e){if(!G(e))throw TypeError(String(e)+" is not an object");return e},Y=o,K=L,z=W,X=C,q=Object.defineProperty;V.f=Y?q:function(e,t,n){if(z(e),t=X(t,!0),z(n),K)try{return q(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var $=V,Z=u,J=o?function(e,t,n){return $.f(e,t,Z(1,n))}:function(e,t,n){return e[t]=n,e},Q={exports:{}},ee=n,te=J,ne=function(e,t){try{te(ee,e,t)}catch(n){ee[e]=t}return t},ie=ne,re="__core-js_shared__",oe=n[re]||ie(re,{}),se=oe,ae=Function.toString;"function"!=typeof se.inspectSource&&(se.inspectSource=function(e){return ae.call(e)});var ce=se.inspectSource,le=ce,ue=n.WeakMap,he="function"==typeof ue&&/native code/.test(le(ue)),fe={exports:{}},de=oe;(fe.exports=function(e,t){return de[e]||(de[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var pe,ge,ve,ye=0,me=Math.random(),ke=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++ye+me).toString(36)},be=fe.exports,we=ke,Ce=be("keys"),xe=function(e){return Ce[e]||(Ce[e]=we(e))},_e={},Te=he,Ee=b,Se=J,Pe=S,Re=oe,Oe=xe,Ie=_e,Ae="Object already initialized",Le=n.WeakMap;if(Te||Re.state){var De=Re.state||(Re.state=new Le),Me=De.get,Ne=De.has,Fe=De.set;pe=function(e,t){if(Ne.call(De,e))throw new TypeError(Ae);return t.facade=e,Fe.call(De,e,t),t},ge=function(e){return Me.call(De,e)||{}},ve=function(e){return Ne.call(De,e)}}else{var Be=Oe("state");Ie[Be]=!0,pe=function(e,t){if(Pe(e,Be))throw new TypeError(Ae);return t.facade=e,Se(e,Be,t),t},ge=function(e){return Pe(e,Be)?e[Be]:{}},ve=function(e){return Pe(e,Be)}}var je={set:pe,get:ge,has:ve,enforce:function(e){return ve(e)?ge(e):pe(e,{})},getterFor:function(e){return function(t){var n;if(!Ee(t)||(n=ge(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},He=n,Ue=J,Ve=S,Ge=ne,We=ce,Ye=je.get,Ke=je.enforce,ze=String(String).split("String");(Q.exports=function(e,t,n,i){var r,o=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||Ve(n,"name")||Ue(n,"name",t),(r=Ke(n)).source||(r.source=ze.join("string"==typeof t?t:""))),e!==He?(o?!a&&e[t]&&(s=!0):delete e[t],s?e[t]=n:Ue(e,t,n)):s?e[t]=n:Ge(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ye(this).source||We(this)}));var Xe=n,qe=Xe,$e=n,Ze=function(e){return"function"==typeof e?e:void 0},Je=function(e,t){return arguments.length<2?Ze(qe[e])||Ze($e[e]):qe[e]&&qe[e][t]||$e[e]&&$e[e][t]},Qe={},et=Math.ceil,tt=Math.floor,nt=function(e){return isNaN(e=+e)?0:(e>0?tt:et)(e)},it=nt,rt=Math.min,ot=function(e){return e>0?rt(it(e),9007199254740991):0},st=nt,at=Math.max,ct=Math.min,lt=function(e,t){var n=st(e);return n<0?at(n+t,0):ct(n,t)},ut=k,ht=ot,ft=lt,dt=function(e){return function(t,n,i){var r,o=ut(t),s=ht(o.length),a=ft(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},pt={includes:dt(!0),indexOf:dt(!1)},gt=S,vt=k,yt=pt.indexOf,mt=_e,kt=function(e,t){var n,i=vt(e),r=0,o=[];for(n in i)!gt(mt,n)&&gt(i,n)&&o.push(n);for(;t.length>r;)gt(i,n=t[r++])&&(~yt(o,n)||o.push(n));return o},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=kt,Ct=bt.concat("length","prototype");Qe.f=Object.getOwnPropertyNames||function(e){return wt(e,Ct)};var xt={};xt.f=Object.getOwnPropertySymbols;var _t,Tt=Qe,Et=xt,St=W,Pt=Je("Reflect","ownKeys")||function(e){var t=Tt.f(St(e)),n=Et.f;return n?t.concat(n(e)):t},Rt=S,Ot=Pt,It=i,At=V,Lt=r,Dt=/#|\.prototype\./,Mt=function(e,t){var n=Ft[Nt(e)];return n==jt||n!=Bt&&("function"==typeof t?Lt(t):!!t)},Nt=Mt.normalize=function(e){return String(e).replace(Dt,".").toLowerCase()},Ft=Mt.data={},Bt=Mt.NATIVE="N",jt=Mt.POLYFILL="P",Ht=Mt,Ut=n,Vt=i.f,Gt=J,Wt=Q.exports,Yt=ne,Kt=function(e,t){for(var n=Ot(t),i=At.f,r=It.f,o=0;o<n.length;o++){var s=n[o];Rt(e,s)||i(e,s,r(t,s))}},zt=Ht,Xt=function(e,t){var n,i,r,o,s,a=e.target,c=e.global,l=e.stat;if(n=c?Ut:l?Ut[a]||Yt(a,{}):(Ut[a]||{}).prototype)for(i in t){if(o=t[i],r=e.noTargetGet?(s=Vt(n,i))&&s.value:n[i],!zt(c?i:a+(l?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;Kt(o,r)}(e.sham||r&&r.sham)&&Gt(o,"sham",!0),Wt(n,i,o,e)}},qt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},$t=kt,Zt=bt,Jt=Object.keys||function(e){return $t(e,Zt)},Qt=V,en=W,tn=Jt,nn=o?Object.defineProperties:function(e,t){en(e);for(var n,i=tn(t),r=i.length,o=0;r>o;)Qt.f(e,n=i[o++],t[n]);return e},rn=Je("document","documentElement"),on=W,sn=nn,an=bt,cn=_e,ln=rn,un=I,hn=xe("IE_PROTO"),fn=function(){},dn=function(e){return"<script>"+e+"</"+"script>"},pn=function(){try{_t=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;pn=_t?function(e){e.write(dn("")),e.close();var t=e.parentWindow.Object;return e=null,t}(_t):((t=un("iframe")).style.display="none",ln.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(dn("document.F=Object")),e.close(),e.F);for(var n=an.length;n--;)delete pn.prototype[an[n]];return pn()};cn[hn]=!0;var gn=Object.create||function(e,t){var n;return null!==e?(fn.prototype=on(e),n=new fn,fn.prototype=null,n[hn]=e):n=pn(),void 0===t?n:sn(n,t)},vn=qt,yn=b,mn=[].slice,kn={},bn=function(e,t,n){if(!(t in kn)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";kn[t]=Function("C,a","return new C("+i.join(",")+")")}return kn[t](e,n)},wn=Function.bind||function(e){var t=vn(this),n=mn.call(arguments,1),i=function(){var r=n.concat(mn.call(arguments));return this instanceof i?bn(t,r.length,r):t.apply(e,r)};return yn(t.prototype)&&(i.prototype=t.prototype),i},Cn=Xt,xn=qt,_n=W,Tn=b,En=gn,Sn=wn,Pn=r,Rn=Je("Reflect","construct"),On=Pn((function(){function e(){}return!(Rn((function(){}),[],e)instanceof e)})),In=!Pn((function(){Rn((function(){}))})),An=On||In;function Ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?Fn(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cn({target:"Reflect",stat:!0,forced:An,sham:An},{construct:function(e,t){xn(e),_n(t);var n=arguments.length<3?e:xn(arguments[2]);if(In&&!On)return Rn(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(Sn.apply(e,i))}var r=n.prototype,o=En(Tn(r)?r:Object.prototype),s=Function.apply.call(e,o,t);return Tn(s)?s:o}});var Un,Vn,Gn=Je("navigator","userAgent")||"",Wn=Gn,Yn=n.process,Kn=Yn&&Yn.versions,zn=Kn&&Kn.v8;zn?Vn=(Un=zn.split("."))[0]<4?1:Un[0]+Un[1]:Wn&&(!(Un=Wn.match(/Edge\/(\d+)/))||Un[1]>=74)&&(Un=Wn.match(/Chrome\/(\d+)/))&&(Vn=Un[1]);var Xn=Vn&&+Vn,qn=Xn,$n=r,Zn=!!Object.getOwnPropertySymbols&&!$n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&qn&&qn<41})),Jn=Zn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Qn=f,ei=Array.isArray||function(e){return"Array"==Qn(e)},ti={},ni=k,ii=Qe.f,ri={}.toString,oi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ti.f=function(e){return oi&&"[object Window]"==ri.call(e)?function(e){try{return ii(e)}catch(e){return oi.slice()}}(e):ii(ni(e))};var si=n,ai=fe.exports,ci=S,li=ke,ui=Zn,hi=Jn,fi=ai("wks"),di=si.Symbol,pi=hi?di:di&&di.withoutSetter||li,gi=function(e){return ci(fi,e)&&(ui||"string"==typeof fi[e])||(ui&&ci(di,e)?fi[e]=di[e]:fi[e]=pi("Symbol."+e)),fi[e]},vi={},yi=gi;vi.f=yi;var mi=Xe,ki=S,bi=vi,wi=V.f,Ci=V.f,xi=S,_i=gi("toStringTag"),Ti=function(e,t,n){e&&!xi(e=n?e:e.prototype,_i)&&Ci(e,_i,{configurable:!0,value:t})},Ei=qt,Si=function(e,t,n){if(Ei(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},Pi=b,Ri=ei,Oi=gi("species"),Ii=function(e,t){var n;return Ri(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ri(n.prototype)?Pi(n)&&null===(n=n[Oi])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ai=Si,Li=g,Di=_,Mi=ot,Ni=Ii,Fi=[].push,Bi=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,u,h){for(var f,d,p=Di(c),g=Li(p),v=Ai(l,u,3),y=Mi(g.length),m=0,k=h||Ni,b=t?k(c,y):n||s?k(c,0):void 0;y>m;m++)if((a||m in g)&&(d=v(f=g[m],m,p),e))if(t)b[m]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:Fi.call(b,f)}else switch(e){case 4:return!1;case 7:Fi.call(b,f)}return o?-1:i||r?r:b}},ji={forEach:Bi(0),map:Bi(1),filter:Bi(2),some:Bi(3),every:Bi(4),find:Bi(5),findIndex:Bi(6),filterOut:Bi(7)},Hi=Xt,Ui=n,Vi=Je,Gi=o,Wi=Zn,Yi=Jn,Ki=r,zi=S,Xi=ei,qi=b,$i=W,Zi=_,Ji=k,Qi=C,er=u,tr=gn,nr=Jt,ir=Qe,rr=ti,or=xt,sr=i,ar=V,cr=s,lr=J,ur=Q.exports,hr=fe.exports,fr=_e,dr=ke,pr=gi,gr=vi,vr=function(e){var t=mi.Symbol||(mi.Symbol={});ki(t,e)||wi(t,e,{value:bi.f(e)})},yr=Ti,mr=je,kr=ji.forEach,br=xe("hidden"),wr="Symbol",Cr=pr("toPrimitive"),xr=mr.set,_r=mr.getterFor(wr),Tr=Object.prototype,Er=Ui.Symbol,Sr=Vi("JSON","stringify"),Pr=sr.f,Rr=ar.f,Or=rr.f,Ir=cr.f,Ar=hr("symbols"),Lr=hr("op-symbols"),Dr=hr("string-to-symbol-registry"),Mr=hr("symbol-to-string-registry"),Nr=hr("wks"),Fr=Ui.QObject,Br=!Fr||!Fr.prototype||!Fr.prototype.findChild,jr=Gi&&Ki((function(){return 7!=tr(Rr({},"a",{get:function(){return Rr(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Pr(Tr,t);i&&delete Tr[t],Rr(e,t,n),i&&e!==Tr&&Rr(Tr,t,i)}:Rr,Hr=function(e,t){var n=Ar[e]=tr(Er.prototype);return xr(n,{type:wr,tag:e,description:t}),Gi||(n.description=t),n},Ur=Yi?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Er},Vr=function(e,t,n){e===Tr&&Vr(Lr,t,n),$i(e);var i=Qi(t,!0);return $i(n),zi(Ar,i)?(n.enumerable?(zi(e,br)&&e[br][i]&&(e[br][i]=!1),n=tr(n,{enumerable:er(0,!1)})):(zi(e,br)||Rr(e,br,er(1,{})),e[br][i]=!0),jr(e,i,n)):Rr(e,i,n)},Gr=function(e,t){$i(e);var n=Ji(t),i=nr(n).concat(zr(n));return kr(i,(function(t){Gi&&!Wr.call(n,t)||Vr(e,t,n[t])})),e},Wr=function(e){var t=Qi(e,!0),n=Ir.call(this,t);return!(this===Tr&&zi(Ar,t)&&!zi(Lr,t))&&(!(n||!zi(this,t)||!zi(Ar,t)||zi(this,br)&&this[br][t])||n)},Yr=function(e,t){var n=Ji(e),i=Qi(t,!0);if(n!==Tr||!zi(Ar,i)||zi(Lr,i)){var r=Pr(n,i);return!r||!zi(Ar,i)||zi(n,br)&&n[br][i]||(r.enumerable=!0),r}},Kr=function(e){var t=Or(Ji(e)),n=[];return kr(t,(function(e){zi(Ar,e)||zi(fr,e)||n.push(e)})),n},zr=function(e){var t=e===Tr,n=Or(t?Lr:Ji(e)),i=[];return kr(n,(function(e){!zi(Ar,e)||t&&!zi(Tr,e)||i.push(Ar[e])})),i};(Wi||(ur((Er=function(){if(this instanceof Er)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=dr(e),n=function(e){this===Tr&&n.call(Lr,e),zi(this,br)&&zi(this[br],t)&&(this[br][t]=!1),jr(this,t,er(1,e))};return Gi&&Br&&jr(Tr,t,{configurable:!0,set:n}),Hr(t,e)}).prototype,"toString",(function(){return _r(this).tag})),ur(Er,"withoutSetter",(function(e){return Hr(dr(e),e)})),cr.f=Wr,ar.f=Vr,sr.f=Yr,ir.f=rr.f=Kr,or.f=zr,gr.f=function(e){return Hr(pr(e),e)},Gi&&(Rr(Er.prototype,"description",{configurable:!0,get:function(){return _r(this).description}}),ur(Tr,"propertyIsEnumerable",Wr,{unsafe:!0}))),Hi({global:!0,wrap:!0,forced:!Wi,sham:!Wi},{Symbol:Er}),kr(nr(Nr),(function(e){vr(e)})),Hi({target:wr,stat:!0,forced:!Wi},{for:function(e){var t=String(e);if(zi(Dr,t))return Dr[t];var n=Er(t);return Dr[t]=n,Mr[n]=t,n},keyFor:function(e){if(!Ur(e))throw TypeError(e+" is not a symbol");if(zi(Mr,e))return Mr[e]},useSetter:function(){Br=!0},useSimple:function(){Br=!1}}),Hi({target:"Object",stat:!0,forced:!Wi,sham:!Gi},{create:function(e,t){return void 0===t?tr(e):Gr(tr(e),t)},defineProperty:Vr,defineProperties:Gr,getOwnPropertyDescriptor:Yr}),Hi({target:"Object",stat:!0,forced:!Wi},{getOwnPropertyNames:Kr,getOwnPropertySymbols:zr}),Hi({target:"Object",stat:!0,forced:Ki((function(){or.f(1)}))},{getOwnPropertySymbols:function(e){return or.f(Zi(e))}}),Sr)&&Hi({target:"JSON",stat:!0,forced:!Wi||Ki((function(){var e=Er();return"[null]"!=Sr([e])||"{}"!=Sr({a:e})||"{}"!=Sr(Object(e))}))},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(qi(t)||void 0!==e)&&!Ur(e))return Xi(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Ur(t))return t}),r[1]=t,Sr.apply(null,r)}});Er.prototype[Cr]||lr(Er.prototype,Cr,Er.prototype.valueOf),yr(Er,wr),fr[br]=!0;var Xr=Xt,qr=r,$r=k,Zr=i.f,Jr=o,Qr=qr((function(){Zr(1)}));Xr({target:"Object",stat:!0,forced:!Jr||Qr,sham:!Jr},{getOwnPropertyDescriptor:function(e,t){return Zr($r(e),t)}});var eo=C,to=V,no=u,io=function(e,t,n){var i=eo(t);i in e?to.f(e,i,no(0,n)):e[i]=n},ro=Pt,oo=k,so=i,ao=io;function co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lo(e,t,n){return t&&co(e.prototype,t),n&&co(e,n),e}function uo(e,t,n){return(uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}Xt({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,i=oo(e),r=so.f,o=ro(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&ao(s,t,n);return s}});var ho=r,fo=Xn,po=gi("species"),go=function(e){return fo>=51||!ho((function(){var t=[];return(t.constructor={})[po]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},vo=Xt,yo=r,mo=ei,ko=b,bo=_,wo=ot,Co=io,xo=Ii,_o=go,To=Xn,Eo=gi("isConcatSpreadable"),So=9007199254740991,Po="Maximum allowed index exceeded",Ro=To>=51||!yo((function(){var e=[];return e[Eo]=!1,e.concat()[0]!==e})),Oo=_o("concat"),Io=function(e){if(!ko(e))return!1;var t=e[Eo];return void 0!==t?!!t:mo(e)};vo({target:"Array",proto:!0,forced:!Ro||!Oo},{concat:function(e){var t,n,i,r,o,s=bo(this),a=xo(s,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(Io(o=-1===t?s:arguments[t])){if(c+(r=wo(o.length))>So)throw TypeError(Po);for(n=0;n<r;n++,c++)n in o&&Co(a,c,o[n])}else{if(c>=So)throw TypeError(Po);Co(a,c++,o)}return a.length=c,a}});var Ao=ji.map;Xt({target:"Array",proto:!0,forced:!go("map")},{map:function(e){return Ao(this,e,arguments.length>1?arguments[1]:void 0)}});var Lo=_,Do=Jt;Xt({target:"Object",stat:!0,forced:r((function(){Do(1)}))},{keys:function(e){return Do(Lo(e))}});var Mo=Xt,No=b,Fo=ei,Bo=lt,jo=ot,Ho=k,Uo=io,Vo=gi,Go=go("slice"),Wo=Vo("species"),Yo=[].slice,Ko=Math.max;Mo({target:"Array",proto:!0,forced:!Go},{slice:function(e,t){var n,i,r,o=Ho(this),s=jo(o.length),a=Bo(e,s),c=Bo(void 0===t?s:t,s);if(Fo(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Fo(n.prototype)?No(n)&&null===(n=n[Wo])&&(n=void 0):n=void 0,n===Array||void 0===n))return Yo.call(o,a,c);for(i=new(void 0===n?Array:n)(Ko(c-a,0)),r=0;a<c;a++,r++)a in o&&Uo(i,r,o[a]);return i.length=r,i}});var zo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Xo=r,qo=function(e,t){var n=[][e];return!!n&&Xo((function(){n.call(null,t||function(){throw 1},1)}))},$o=ji.forEach,Zo=n,Jo=zo,Qo=qo("forEach")?[].forEach:function(e){return $o(this,e,arguments.length>1?arguments[1]:void 0)},es=J;for(var ts in Jo){var ns=Zo[ts],is=ns&&ns.prototype;if(is&&is.forEach!==Qo)try{es(is,"forEach",Qo)}catch(e){is.forEach=Qo}}var rs=W,os=function(){var e=rs(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},ss={},as=r,cs=function(e,t){return RegExp(e,t)};ss.UNSUPPORTED_Y=as((function(){var e=cs("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),ss.BROKEN_CARET=as((function(){var e=cs("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var ls=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),us=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),hs=os,fs=ss,ds=fe.exports,ps=gn,gs=je.get,vs=ls,ys=us,ms=RegExp.prototype.exec,ks=ds("native-string-replace",String.prototype.replace),bs=ms,ws=function(){var e=/a/,t=/b*/g;return ms.call(e,"a"),ms.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Cs=fs.UNSUPPORTED_Y||fs.BROKEN_CARET,xs=void 0!==/()??/.exec("")[1];(ws||xs||Cs||vs||ys)&&(bs=function(e){var t,n,i,r,o,s,a,c=this,l=gs(c),u=l.raw;if(u)return u.lastIndex=c.lastIndex,t=bs.call(u,e),c.lastIndex=u.lastIndex,t;var h=l.groups,f=Cs&&c.sticky,d=hs.call(c),p=c.source,g=0,v=e;if(f&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),v=String(e).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==e[c.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,g++),n=new RegExp("^(?:"+p+")",d)),xs&&(n=new RegExp("^"+p+"$(?!\\s)",d)),ws&&(i=c.lastIndex),r=ms.call(f?n:c,v),f?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:ws&&r&&(c.lastIndex=c.global?r.index+r[0].length:i),xs&&r&&r.length>1&&ks.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&h)for(r.groups=s=ps(null),o=0;o<h.length;o++)s[(a=h[o])[0]]=r[a[1]];return r});var _s=bs;Xt({target:"RegExp",proto:!0,forced:/./.exec!==_s},{exec:_s});var Ts=Q.exports,Es=_s,Ss=r,Ps=gi,Rs=J,Os=Ps("species"),Is=RegExp.prototype,As=function(e,t,n,i){var r=Ps(e),o=!Ss((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),s=o&&!Ss((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Os]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!o||!s||n){var a=/./[r],c=t(r,""[e],(function(e,t,n,i,r){var s=t.exec;return s===Es||s===Is.exec?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}));Ts(String.prototype,e,c[0]),Ts(Is,r,c[1])}i&&Rs(Is[r],"sham",!0)},Ls=b,Ds=f,Ms=gi("match"),Ns=function(e){var t;return Ls(e)&&(void 0!==(t=e[Ms])?!!t:"RegExp"==Ds(e))},Fs=W,Bs=qt,js=gi("species"),Hs=function(e,t){var n,i=Fs(e).constructor;return void 0===i||null==(n=Fs(i)[js])?t:Bs(n)},Us=nt,Vs=v,Gs=function(e){return function(t,n){var i,r,o=String(Vs(t)),s=Us(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},Ws={codeAt:Gs(!1),charAt:Gs(!0)},Ys=Ws.charAt,Ks=function(e,t,n){return t+(n?Ys(e,t).length:1)},zs=f,Xs=_s,qs=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==zs(e))throw TypeError("RegExp#exec called on incompatible receiver");return Xs.call(e,t)},$s=As,Zs=Ns,Js=W,Qs=v,ea=Hs,ta=Ks,na=ot,ia=qs,ra=_s,oa=r,sa=ss.UNSUPPORTED_Y,aa=[].push,ca=Math.min,la=4294967295;$s("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(Qs(this)),r=void 0===n?la:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!Zs(e))return t.call(i,e,r);for(var o,s,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,h=new RegExp(e.source,l+"g");(o=ra.call(h,i))&&!((s=h.lastIndex)>u&&(c.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&aa.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return u===i.length?!a&&h.test("")||c.push(""):c.push(i.slice(u)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=Qs(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var o=n(i,this,e,r,i!==t);if(o.done)return o.value;var s=Js(this),a=String(e),c=ea(s,RegExp),l=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(sa?"g":"y"),h=new c(sa?"^(?:"+s.source+")":s,u),f=void 0===r?la:r>>>0;if(0===f)return[];if(0===a.length)return null===ia(h,a)?[a]:[];for(var d=0,p=0,g=[];p<a.length;){h.lastIndex=sa?0:p;var v,y=ia(h,sa?a.slice(p):a);if(null===y||(v=ca(na(h.lastIndex+(sa?p:0)),a.length))===d)p=ta(a,p,l);else{if(g.push(a.slice(d,p)),g.length===f)return g;for(var m=1;m<=y.length-1;m++)if(g.push(y[m]),g.length===f)return g;p=d=v}}return g.push(a.slice(d)),g}]}),!!oa((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),sa);var ua=Xt,ha=k,fa=[].join,da=g!=Object,pa=qo("join",",");ua({target:"Array",proto:!0,forced:da||!pa},{join:function(e){return fa.call(ha(this),void 0===e?",":e)}});var ga=Xt,va=lt,ya=nt,ma=ot,ka=_,ba=Ii,wa=io,Ca=go("splice"),xa=Math.max,_a=Math.min,Ta=9007199254740991,Ea="Maximum allowed length exceeded";ga({target:"Array",proto:!0,forced:!Ca},{splice:function(e,t){var n,i,r,o,s,a,c=ka(this),l=ma(c.length),u=va(e,l),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=l-u):(n=h-2,i=_a(xa(ya(t),0),l-u)),l+n-i>Ta)throw TypeError(Ea);for(r=ba(c,i),o=0;o<i;o++)(s=u+o)in c&&wa(r,o,c[s]);if(r.length=i,n<i){for(o=u;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>u;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-i+n,r}});var Sa={};Sa[gi("toStringTag")]="z";var Pa="[object z]"===String(Sa),Ra=Pa,Oa=f,Ia=gi("toStringTag"),Aa="Arguments"==Oa(function(){return arguments}()),La=Ra?Oa:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ia))?n:Aa?Oa(t):"Object"==(i=Oa(t))&&"function"==typeof t.callee?"Arguments":i},Da=La,Ma=Pa?{}.toString:function(){return"[object "+Da(this)+"]"},Na=Pa,Fa=Q.exports,Ba=Ma;Na||Fa(Object.prototype,"toString",Ba,{unsafe:!0});var ja=n.Promise,Ha=Q.exports,Ua=b,Va=W,Ga=function(e){if(!Ua(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},Wa=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return Va(n),Ga(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),Ya=Je,Ka=V,za=o,Xa=gi("species"),qa=function(e){var t=Ya(e),n=Ka.f;za&&t&&!t[Xa]&&n(t,Xa,{configurable:!0,get:function(){return this}})},$a={},Za=$a,Ja=gi("iterator"),Qa=Array.prototype,ec=La,tc=$a,nc=gi("iterator"),ic=W,rc=W,oc=function(e){return void 0!==e&&(Za.Array===e||Qa[Ja]===e)},sc=ot,ac=Si,cc=function(e){if(null!=e)return e[nc]||e["@@iterator"]||tc[ec(e)]},lc=function(e){var t=e.return;if(void 0!==t)return ic(t.call(e)).value},uc=function(e,t){this.stopped=e,this.result=t},hc=gi("iterator"),fc=!1;try{var dc=0,pc={next:function(){return{done:!!dc++}},return:function(){fc=!0}};pc[hc]=function(){return this},Array.from(pc,(function(){throw 2}))}catch(e){}var gc,vc,yc,mc=/(?:iphone|ipod|ipad).*applewebkit/i.test(Gn),kc="process"==f(n.process),bc=n,wc=r,Cc=Si,xc=rn,_c=I,Tc=mc,Ec=kc,Sc=bc.location,Pc=bc.setImmediate,Rc=bc.clearImmediate,Oc=bc.process,Ic=bc.MessageChannel,Ac=bc.Dispatch,Lc=0,Dc={},Mc="onreadystatechange",Nc=function(e){if(Dc.hasOwnProperty(e)){var t=Dc[e];delete Dc[e],t()}},Fc=function(e){return function(){Nc(e)}},Bc=function(e){Nc(e.data)},jc=function(e){bc.postMessage(e+"",Sc.protocol+"//"+Sc.host)};Pc&&Rc||(Pc=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Dc[++Lc]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},gc(Lc),Lc},Rc=function(e){delete Dc[e]},Ec?gc=function(e){Oc.nextTick(Fc(e))}:Ac&&Ac.now?gc=function(e){Ac.now(Fc(e))}:Ic&&!Tc?(yc=(vc=new Ic).port2,vc.port1.onmessage=Bc,gc=Cc(yc.postMessage,yc,1)):bc.addEventListener&&"function"==typeof postMessage&&!bc.importScripts&&Sc&&"file:"!==Sc.protocol&&!wc(jc)?(gc=jc,bc.addEventListener("message",Bc,!1)):gc=Mc in _c("script")?function(e){xc.appendChild(_c("script")).onreadystatechange=function(){xc.removeChild(this),Nc(e)}}:function(e){setTimeout(Fc(e),0)});var Hc,Uc,Vc,Gc,Wc,Yc,Kc,zc,Xc={set:Pc,clear:Rc},qc=/web0s(?!.*chrome)/i.test(Gn),$c=n,Zc=i.f,Jc=Xc.set,Qc=mc,el=qc,tl=kc,nl=$c.MutationObserver||$c.WebKitMutationObserver,il=$c.document,rl=$c.process,ol=$c.Promise,sl=Zc($c,"queueMicrotask"),al=sl&&sl.value;al||(Hc=function(){var e,t;for(tl&&(e=rl.domain)&&e.exit();Uc;){t=Uc.fn,Uc=Uc.next;try{t()}catch(e){throw Uc?Gc():Vc=void 0,e}}Vc=void 0,e&&e.enter()},Qc||tl||el||!nl||!il?ol&&ol.resolve?((Kc=ol.resolve(void 0)).constructor=ol,zc=Kc.then,Gc=function(){zc.call(Kc,Hc)}):Gc=tl?function(){rl.nextTick(Hc)}:function(){Jc.call($c,Hc)}:(Wc=!0,Yc=il.createTextNode(""),new nl(Hc).observe(Yc,{characterData:!0}),Gc=function(){Yc.data=Wc=!Wc}));var cl=al||function(e){var t={fn:e,next:void 0};Vc&&(Vc.next=t),Uc||(Uc=t,Gc()),Vc=t},ll={},ul=qt,hl=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=ul(t),this.reject=ul(n)};ll.f=function(e){return new hl(e)};var fl,dl,pl,gl,vl=W,yl=b,ml=ll,kl=n,bl="object"==typeof window,wl=Xt,Cl=n,xl=Je,_l=ja,Tl=Q.exports,El=function(e,t,n){for(var i in t)Ha(e,i,t[i],n);return e},Sl=Wa,Pl=Ti,Rl=qa,Ol=b,Il=qt,Al=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Ll=ce,Dl=function(e,t,n){var i,r,o,s,a,c,l,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=ac(t,u,1+h+d),g=function(e){return i&&lc(i),new uc(!0,e)},v=function(e){return h?(rc(e),d?p(e[0],e[1],g):p(e[0],e[1])):d?p(e,g):p(e)};if(f)i=e;else{if("function"!=typeof(r=cc(e)))throw TypeError("Target is not iterable");if(oc(r)){for(o=0,s=sc(e.length);s>o;o++)if((a=v(e[o]))&&a instanceof uc)return a;return new uc(!1)}i=r.call(e)}for(c=i.next;!(l=c.call(i)).done;){try{a=v(l.value)}catch(e){throw lc(i),e}if("object"==typeof a&&a&&a instanceof uc)return a}return new uc(!1)},Ml=function(e,t){if(!t&&!fc)return!1;var n=!1;try{var i={};i[hc]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},Nl=Hs,Fl=Xc.set,Bl=cl,jl=function(e,t){if(vl(e),yl(t)&&t.constructor===e)return t;var n=ml.f(e);return(0,n.resolve)(t),n.promise},Hl=function(e,t){var n=kl.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},Ul=ll,Vl=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Gl=je,Wl=Ht,Yl=bl,Kl=kc,zl=Xn,Xl=gi("species"),ql="Promise",$l=Gl.get,Zl=Gl.set,Jl=Gl.getterFor(ql),Ql=_l&&_l.prototype,eu=_l,tu=Ql,nu=Cl.TypeError,iu=Cl.document,ru=Cl.process,ou=Ul.f,su=ou,au=!!(iu&&iu.createEvent&&Cl.dispatchEvent),cu="function"==typeof PromiseRejectionEvent,lu="unhandledrejection",uu=!1,hu=Wl(ql,(function(){var e=Ll(eu),t=e!==String(eu);if(!t&&66===zl)return!0;if(zl>=51&&/native code/.test(e))return!1;var n=new eu((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Xl]=i,!(uu=n.then((function(){}))instanceof i)||!t&&Yl&&!cu})),fu=hu||!Ml((function(e){eu.all(e).catch((function(){}))})),du=function(e){var t;return!(!Ol(e)||"function"!=typeof(t=e.then))&&t},pu=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Bl((function(){for(var i=e.value,r=1==e.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=r?l.ok:l.fail,h=l.resolve,f=l.reject,d=l.domain;try{u?(r||(2===e.rejection&&mu(e),e.rejection=1),!0===u?s=i:(d&&d.enter(),s=u(i),d&&(d.exit(),c=!0)),s===l.promise?f(nu("Promise-chain cycle")):(a=du(s))?a.call(s,h,f):h(s)):f(i)}catch(e){d&&!c&&d.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&vu(e)}))}},gu=function(e,t,n){var i,r;au?((i=iu.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),Cl.dispatchEvent(i)):i={promise:t,reason:n},!cu&&(r=Cl["on"+e])?r(i):e===lu&&Hl("Unhandled promise rejection",n)},vu=function(e){Fl.call(Cl,(function(){var t,n=e.facade,i=e.value;if(yu(e)&&(t=Vl((function(){Kl?ru.emit("unhandledRejection",i,n):gu(lu,n,i)})),e.rejection=Kl||yu(e)?2:1,t.error))throw t.value}))},yu=function(e){return 1!==e.rejection&&!e.parent},mu=function(e){Fl.call(Cl,(function(){var t=e.facade;Kl?ru.emit("rejectionHandled",t):gu("rejectionhandled",t,e.value)}))},ku=function(e,t,n){return function(i){e(t,i,n)}},bu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,pu(e,!0))},wu=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw nu("Promise can't be resolved itself");var i=du(t);i?Bl((function(){var n={done:!1};try{i.call(t,ku(wu,n,e),ku(bu,n,e))}catch(t){bu(n,t,e)}})):(e.value=t,e.state=1,pu(e,!1))}catch(t){bu({done:!1},t,e)}}};if(hu&&(tu=(eu=function(e){Al(this,eu,ql),Il(e),fl.call(this);var t=$l(this);try{e(ku(wu,t),ku(bu,t))}catch(e){bu(t,e)}}).prototype,(fl=function(e){Zl(this,{type:ql,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=El(tu,{then:function(e,t){var n=Jl(this),i=ou(Nl(this,eu));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=Kl?ru.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&pu(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),dl=function(){var e=new fl,t=$l(e);this.promise=e,this.resolve=ku(wu,t),this.reject=ku(bu,t)},Ul.f=ou=function(e){return e===eu||e===pl?new dl(e):su(e)},"function"==typeof _l&&Ql!==Object.prototype)){gl=Ql.then,uu||(Tl(Ql,"then",(function(e,t){var n=this;return new eu((function(e,t){gl.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Tl(Ql,"catch",tu.catch,{unsafe:!0}));try{delete Ql.constructor}catch(e){}Sl&&Sl(Ql,tu)}wl({global:!0,wrap:!0,forced:hu},{Promise:eu}),Pl(eu,ql,!1),Rl(ql),pl=xl(ql),wl({target:ql,stat:!0,forced:hu},{reject:function(e){var t=ou(this);return t.reject.call(void 0,e),t.promise}}),wl({target:ql,stat:!0,forced:hu},{resolve:function(e){return jl(this,e)}}),wl({target:ql,stat:!0,forced:fu},{all:function(e){var t=this,n=ou(t),i=n.resolve,r=n.reject,o=Vl((function(){var n=Il(t.resolve),o=[],s=0,a=1;Dl(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=ou(t),i=n.reject,r=Vl((function(){var r=Il(t.resolve);Dl(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var Cu=o,xu=V.f,_u=Function.prototype,Tu=_u.toString,Eu=/^\s*function ([^ (]*)/,Su="name";Cu&&!(Su in _u)&&xu(_u,Su,{configurable:!0,get:function(){try{return Tu.call(this).match(Eu)[1]}catch(e){return""}}});var Pu=b,Ru=Wa,Ou=function(e,t,n){var i,r;return Ru&&"function"==typeof(i=t.constructor)&&i!==n&&Pu(r=i.prototype)&&r!==n.prototype&&Ru(e,r),e},Iu="\t\n\v\f\r                　\u2028\u2029\ufeff",Au=v,Lu="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Du=RegExp("^"+Lu+Lu+"*"),Mu=RegExp(Lu+Lu+"*$"),Nu=function(e){return function(t){var n=String(Au(t));return 1&e&&(n=n.replace(Du,"")),2&e&&(n=n.replace(Mu,"")),n}},Fu={start:Nu(1),end:Nu(2),trim:Nu(3)},Bu=o,ju=n,Hu=Ht,Uu=Q.exports,Vu=S,Gu=f,Wu=Ou,Yu=C,Ku=r,zu=gn,Xu=Qe.f,qu=i.f,$u=V.f,Zu=Fu.trim,Ju="Number",Qu=ju.Number,eh=Qu.prototype,th=Gu(zu(eh))==Ju,nh=function(e){var t,n,i,r,o,s,a,c,l=Yu(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=Zu(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>r)return NaN;return parseInt(o,i)}return+l};if(Hu(Ju,!Qu(" 0o1")||!Qu("0b1")||Qu("+0x1"))){for(var ih,rh=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof rh&&(th?Ku((function(){eh.valueOf.call(n)})):Gu(n)!=Ju)?Wu(new Qu(nh(t)),n,rh):nh(t)},oh=Bu?Xu(Qu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),sh=0;oh.length>sh;sh++)Vu(Qu,ih=oh[sh])&&!Vu(rh,ih)&&$u(rh,ih,qu(Qu,ih));rh.prototype=eh,eh.constructor=rh,Uu(ju,Ju,rh)}var ah=gn,ch=V,lh=gi("unscopables"),uh=Array.prototype;null==uh[lh]&&ch.f(uh,lh,{configurable:!0,value:ah(null)});var hh,fh,dh,ph=function(e){uh[lh][e]=!0},gh=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),vh=S,yh=_,mh=gh,kh=xe("IE_PROTO"),bh=Object.prototype,wh=mh?Object.getPrototypeOf:function(e){return e=yh(e),vh(e,kh)?e[kh]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?bh:null},Ch=r,xh=wh,_h=J,Th=S,Eh=gi("iterator"),Sh=!1;[].keys&&("next"in(dh=[].keys())?(fh=xh(xh(dh)))!==Object.prototype&&(hh=fh):Sh=!0),(null==hh||Ch((function(){var e={};return hh[Eh].call(e)!==e})))&&(hh={}),Th(hh,Eh)||_h(hh,Eh,(function(){return this}));var Ph={IteratorPrototype:hh,BUGGY_SAFARI_ITERATORS:Sh},Rh=Ph.IteratorPrototype,Oh=gn,Ih=u,Ah=Ti,Lh=$a,Dh=function(){return this},Mh=Xt,Nh=function(e,t,n){var i=t+" Iterator";return e.prototype=Oh(Rh,{next:Ih(1,n)}),Ah(e,i,!1),Lh[i]=Dh,e},Fh=wh,Bh=Wa,jh=Ti,Hh=J,Uh=Q.exports,Vh=$a,Gh=Ph.IteratorPrototype,Wh=Ph.BUGGY_SAFARI_ITERATORS,Yh=gi("iterator"),Kh="keys",zh="values",Xh="entries",qh=function(){return this},$h=function(e,t,n,i,r,o,s){Nh(n,t,i);var a,c,l,u=function(e){if(e===r&&g)return g;if(!Wh&&e in d)return d[e];switch(e){case Kh:case zh:case Xh:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,p=d[Yh]||d["@@iterator"]||r&&d[r],g=!Wh&&p||u(r),v="Array"==t&&d.entries||p;if(v&&(a=Fh(v.call(new e)),Gh!==Object.prototype&&a.next&&(Fh(a)!==Gh&&(Bh?Bh(a,Gh):"function"!=typeof a[Yh]&&Hh(a,Yh,qh)),jh(a,h,!0))),r==zh&&p&&p.name!==zh&&(f=!0,g=function(){return p.call(this)}),d[Yh]!==g&&Hh(d,Yh,g),Vh[t]=g,r)if(c={values:u(zh),keys:o?g:u(Kh),entries:u(Xh)},s)for(l in c)(Wh||f||!(l in d))&&Uh(d,l,c[l]);else Mh({target:t,proto:!0,forced:Wh||f},c);return c},Zh=k,Jh=ph,Qh=$a,ef=je,tf=$h,nf="Array Iterator",rf=ef.set,of=ef.getterFor(nf),sf=tf(Array,"Array",(function(e,t){rf(this,{type:nf,target:Zh(e),index:0,kind:t})}),(function(){var e=of(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");Qh.Arguments=Qh.Array,Jh("keys"),Jh("values"),Jh("entries");var af=n,cf=zo,lf=sf,uf=J,hf=gi,ff=hf("iterator"),df=hf("toStringTag"),pf=lf.values;for(var gf in cf){var vf=af[gf],yf=vf&&vf.prototype;if(yf){if(yf[ff]!==pf)try{uf(yf,ff,pf)}catch(e){yf[ff]=pf}if(yf[df]||uf(yf,df,gf),cf[gf])for(var mf in lf)if(yf[mf]!==lf[mf])try{uf(yf,mf,lf[mf])}catch(e){yf[mf]=lf[mf]}}}var kf=ji.filter;Xt({target:"Array",proto:!0,forced:!go("filter")},{filter:function(e){return kf(this,e,arguments.length>1?arguments[1]:void 0)}});var bf=o,wf=r,Cf=Jt,xf=xt,_f=s,Tf=_,Ef=g,Sf=Object.assign,Pf=Object.defineProperty,Rf=!Sf||wf((function(){if(bf&&1!==Sf({b:1},Sf(Pf({},"a",{enumerable:!0,get:function(){Pf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Sf({},e)[n]||Cf(Sf({},t)).join("")!=i}))?function(e,t){for(var n=Tf(e),i=arguments.length,r=1,o=xf.f,s=_f.f;i>r;)for(var a,c=Ef(arguments[r++]),l=o?Cf(c).concat(o(c)):Cf(c),u=l.length,h=0;u>h;)a=l[h++],bf&&!s.call(c,a)||(n[a]=c[a]);return n}:Sf;Xt({target:"Object",stat:!0,forced:Object.assign!==Rf},{assign:Rf});var Of={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,r);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(Of);var If=Of.exports;function Af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Lf(e){return function(e){if(Array.isArray(e))return Af(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Af(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Df=W,Mf=ot,Nf=v,Ff=Ks,Bf=qs;As("match",(function(e,t,n){return[function(t){var n=Nf(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,this,e);if(i.done)return i.value;var r=Df(this),o=String(e);if(!r.global)return Bf(r,o);var s=r.unicode;r.lastIndex=0;for(var a,c=[],l=0;null!==(a=Bf(r,o));){var u=String(a[0]);c[l]=u,""===u&&(r.lastIndex=Ff(o,Mf(r.lastIndex),s)),l++}return 0===l?null:c}]}));var jf=o,Hf=n,Uf=Ht,Vf=Ou,Gf=J,Wf=V.f,Yf=Qe.f,Kf=Ns,zf=os,Xf=ss,qf=Q.exports,$f=r,Zf=S,Jf=je.enforce,Qf=qa,ed=ls,td=us,nd=gi("match"),id=Hf.RegExp,rd=id.prototype,od=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,sd=/a/g,ad=/a/g,cd=new id(sd)!==sd,ld=Xf.UNSUPPORTED_Y,ud=jf&&(!cd||ld||ed||td||$f((function(){return ad[nd]=!1,id(sd)!=sd||id(ad)==ad||"/a/i"!=id(sd,"i")})));if(Uf("RegExp",ud)){for(var hd=function(e,t){var n,i,r,o,s,a,c=this instanceof hd,l=Kf(e),u=void 0===t,h=[],f=e;if(!c&&l&&u&&e.constructor===hd)return e;if((l||e instanceof hd)&&(e=e.source,u&&(t="flags"in f?f.flags:zf.call(f))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),f=e,ed&&"dotAll"in sd&&(i=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,ld&&"sticky"in sd&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),td&&(e=(o=function(e){for(var t,n=e.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(t=e.charAt(i)))t+=e.charAt(++i);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:od.test(e.slice(i+1))&&(i+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||Zf(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=t:r+=t}return[r,o]}(e))[0],h=o[1]),s=Vf(id(e,t),c?this:rd,hd),(i||r||h.length)&&(a=Jf(s),i&&(a.dotAll=!0,a.raw=hd(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(t=e.charAt(i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+e.charAt(++i);return r}(e),n)),r&&(a.sticky=!0),h.length&&(a.groups=h)),e!==f)try{Gf(s,"source",""===f?"(?:)":f)}catch(e){}return s},fd=function(e){e in hd||Wf(hd,e,{configurable:!0,get:function(){return id[e]},set:function(t){id[e]=t}})},dd=Yf(id),pd=0;dd.length>pd;)fd(dd[pd++]);rd.constructor=hd,hd.prototype=rd,qf(Hf,"RegExp",hd)}Qf("RegExp");var gd=Q.exports,vd=W,yd=r,md=os,kd="toString",bd=RegExp.prototype,wd=bd.toString,Cd=yd((function(){return"/a/b"!=wd.call({source:"a",flags:"b"})})),xd=wd.name!=kd;(Cd||xd)&&gd(RegExp.prototype,kd,(function(){var e=vd(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in bd)?md.call(e):n)}),{unsafe:!0});var _d=_,Td=Math.floor,Ed="".replace,Sd=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Pd=/\$([$&'`]|\d{1,2})/g,Rd=As,Od=r,Id=W,Ad=ot,Ld=nt,Dd=v,Md=Ks,Nd=function(e,t,n,i,r,o){var s=n+e.length,a=i.length,c=Pd;return void 0!==r&&(r=_d(r),c=Sd),Ed.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=r[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var h=Td(u/10);return 0===h?o:h<=a?void 0===i[h-1]?c.charAt(1):i[h-1]+c.charAt(1):o}l=i[u-1]}return void 0===l?"":l}))},Fd=qs,Bd=gi("replace"),jd=Math.max,Hd=Math.min,Ud="$0"==="a".replace(/./,"$0"),Vd=!!/./[Bd]&&""===/./[Bd]("a","$0");Rd("replace",(function(e,t,n){var i=Vd?"$":"$0";return[function(e,n){var i=Dd(this),r=null==e?void 0:e[Bd];return void 0!==r?r.call(e,i,n):t.call(String(i),e,n)},function(e,r){if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var o=n(t,this,e,r);if(o.done)return o.value}var s=Id(this),a=String(e),c="function"==typeof r;c||(r=String(r));var l=s.global;if(l){var u=s.unicode;s.lastIndex=0}for(var h=[];;){var f=Fd(s,a);if(null===f)break;if(h.push(f),!l)break;""===String(f[0])&&(s.lastIndex=Md(a,Ad(s.lastIndex),u))}for(var d,p="",g=0,v=0;v<h.length;v++){f=h[v];for(var y=String(f[0]),m=jd(Hd(Ld(f.index),a.length),0),k=[],b=1;b<f.length;b++)k.push(void 0===(d=f[b])?d:String(d));var w=f.groups;if(c){var C=[y].concat(k,m,a);void 0!==w&&C.push(w);var x=String(r.apply(void 0,C))}else x=Nd(y,a,m,k,w,r);m>=g&&(p+=a.slice(g,m)+x,g=m+y.length)}return p+a.slice(g)}]}),!!Od((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Ud||Vd);var Gd=r,Wd=Iu,Yd=Fu.trim;Xt({target:"String",proto:!0,forced:function(e){return Gd((function(){return!!Wd[e]()||"​᠎"!="​᠎"[e]()||Wd[e].name!==e}))}("trim")},{trim:function(){return Yd(this)}});var Kd=Math.floor,zd=function(e,t){var n=e.length,i=Kd(n/2);return n<8?Xd(e,t):qd(zd(e.slice(0,i),t),zd(e.slice(i),t),t)},Xd=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},qd=function(e,t,n){for(var i=e.length,r=t.length,o=0,s=0,a=[];o<i||s<r;)o<i&&s<r?a.push(n(e[o],t[s])<=0?e[o++]:t[s++]):a.push(o<i?e[o++]:t[s++]);return a},$d=zd,Zd=Gn.match(/firefox\/(\d+)/i),Jd=!!Zd&&+Zd[1],Qd=/MSIE|Trident/.test(Gn),ep=Gn.match(/AppleWebKit\/(\d+)\./),tp=!!ep&&+ep[1],np=Xt,ip=qt,rp=_,op=ot,sp=r,ap=$d,cp=qo,lp=Jd,up=Qd,hp=Xn,fp=tp,dp=[],pp=dp.sort,gp=sp((function(){dp.sort(void 0)})),vp=sp((function(){dp.sort(null)})),yp=cp("sort"),mp=!sp((function(){if(hp)return hp<70;if(!(lp&&lp>3)){if(up)return!0;if(fp)return fp<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)dp.push({k:t+i,v:n})}for(dp.sort((function(e,t){return t.v-e.v})),i=0;i<dp.length;i++)t=dp[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));np({target:"Array",proto:!0,forced:gp||!vp||!yp||!mp},{sort:function(e){void 0!==e&&ip(e);var t=rp(this);if(mp)return void 0===e?pp.call(t):pp.call(t,e);var n,i,r=[],o=op(t.length);for(i=0;i<o;i++)i in t&&r.push(t[i]);for(n=(r=ap(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}}(e))).length,i=0;i<n;)t[i]=r[i++];for(;i<o;)delete t[i++];return t}});var kp="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,bp={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},wp="%c[xgplayer]",Cp={config:{debug:kp?3:1},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(t=console).log.apply(t,[wp,bp.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(t=console).warn.apply(t,[wp,bp.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(t=console)[n].apply(t,[wp,bp.error,e].concat(r))}}};var xp=function(){function e(t){Ln(this,e),this.bufferedList=t}return lo(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),_p={};function Tp(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}_p.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},_p.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var r=i.children;return i=null,r.length>0?(r=r[0],n&&_p.addClass(r,n),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(e){return Cp.logError("util.createDomFromHtml",e),null}},_p.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(i){var n=e.className&&"object"===Nn(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},_p.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){_p.hasClass(e,t)||(e.className&&"object"===Nn(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},_p.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){_p.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===Nn(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},_p.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){_p.hasClass(e,t)?_p.removeClass(e,t):_p.addClass(e,t)}))},_p.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===_p.typeOf(e[n])?t.push(e[n]):"Object"===_p.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},_p.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(i){Cp.logError("util.findDom",i),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},_p.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},_p.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},_p.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=_p.padStart(Math.floor(e/3600),2,0),n=_p.padStart(Math.floor((e-3600*t)/60),2,0),i=_p.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},_p.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},_p.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},_p.deepCopy=function(e,t){if("Object"===_p.typeOf(t)&&"Object"===_p.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==_p.typeOf(t[n])||t[n]instanceof Node?"Array"===_p.typeOf(t[n])?e[n]="Array"===_p.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:_p.deepCopy(e[n],t[n])})),e},_p.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i;"Array"===_p.typeOf(t[n])&&"Array"===_p.typeOf(e[n])?"Array"===_p.typeOf(e[n])&&(i=e[n]).push.apply(i,Lf(t[n])):_p.typeOf(e[n])!==_p.typeOf(t[n])||null===e[n]||"Object"!==_p.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):_p.deepMerge(e[n],t[n])})),e},_p.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},_p.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},_p.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},_p.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},_p.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),_p.clearTimeout(e,i)}),n);return e._timers.push(i),i},_p.clearTimeout=function(e,t){var n=e._timers;if("Array"===_p.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},_p.clearAllTimers=function(e){var t=e._timers;"Array"===_p.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},_p.createImgBtn=function(e,t,n,i){var r,o,s,a=_p.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));(a.style.backgroundImage='url("'.concat(t,'")'),n&&i)&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1)||(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,!1)})),a.style.width="".concat(r).concat(s),a.style.height="".concat(o).concat(s),a.style.backgroundSize="".concat(r).concat(s," ").concat(o).concat(s),a.style.margin="start"===e?"-".concat(o/2).concat(s," auto auto -").concat(r/2).concat(s):"auto 5px auto 5px");return a},_p.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},_p.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},_p.checkIsFunction=function(e){return e&&"function"==typeof e},_p.checkIsObject=function(e){return null!==e&&"object"===Nn(e)},_p.hide=function(e){e.style.display="none"},_p.show=function(e,t){e.style.display=t||"block"},_p.isUndefined=function(e){if(null==e)return!0},_p.setStyleFromCsstext=function(e,t){t&&("String"===_p.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},_p.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(Tp(n[0],t)?r[n[0]]=n[1]:o[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),r},_p.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},_p.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.complete?t&&t():(i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)}),i.src=e}},_p.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},_p.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},_p.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},_p.checkTouchSupport=function(){return"ontouchstart"in window},_p.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(t)for(var o=0;o<n.length;o++){var s=r.length;if(s){var a=r[s-1].end;n[o].start-a<t?n[o].end>a&&(r[s-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new xp(r)},_p.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},_p.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},_p.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},_p.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};var Ep=_p,Sp=/(Android)\s([\d.]+)/,Pp=/(Version)\/([\d.]+)/,Rp=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Op={get device(){return Op.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!o,a=!(s||i||n||o),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:o,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:t,isFireFox:r}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?Pp:Sp)?t.exec(e):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;return!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType&&Rp.map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),this.supportResult=t,e=null,t}},Ip=Op,Ap=JSON.parse('"3.0.0-alpha.103"'),Lp={1:"network",2:"network",3:"decoder",4:"format"},Dp=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Ln(this,e);var i=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.video){var r=n.mediaError?n.mediaError:t.video.error||{},o=t.duration,s=t.currentTime,a=t.ended,c=t.src,l=t.currentSrc,u=t.video,h=u.readyState,f=u.networkState,d={playerVersion:Ap,domain:document.domain,currentTime:s,duration:o,ended:a,readyState:h,networkState:f,src:c||l,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:"",host:Ep.getHostFromUrl(c||l)};return n.ext&&Object.keys(n.ext).map((function(e){d[e]=n.ext[e]})),d}if(arguments.length>1){for(var p={playerVersion:Ap,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],v=0;v<arguments.length;v++)p[g[v]]=arguments[v];return p.ex=i?(i[arguments[0]]||{}).msg:"",p}},Mp="play",Np="playing",Fp="ended",Bp="pause",jp="error",Hp="seeking",Up="seeked",Vp="timeupdate",Gp="waiting",Wp="canplay",Yp="durationchange",Kp="volumechange",zp="loadeddata",Xp="ratechange",qp="progress",$p="loadstart",Zp="emptied",Jp="focus",Qp="blur",eg="ready",tg="urlNull",ng="autoplay_started",ig="autoplay_was_prevented",rg="complete",og="replay",sg="destroy",ag="urlchange",cg="fullscreen_change",lg="cssFullscreen_change",ug="mini_state_change",hg="definition_change",fg="after_definition_change",dg="video_resize",pg="pip_change",gg="rotate",vg="screenShot",yg="playnext",mg="shortcut",kg="xglog",bg="user_action",wg="reset",Cg=Object.freeze({__proto__:null,PLAY:Mp,PLAYING:Np,ENDED:Fp,PAUSE:Bp,ERROR:jp,SEEKING:Hp,SEEKED:Up,TIME_UPDATE:Vp,WAITING:Gp,CANPLAY:Wp,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:Yp,VOLUME_CHANGE:Kp,LOADED_DATA:zp,RATE_CHANGE:Xp,PROGRESS:qp,LOAD_START:$p,EMPTIED:Zp,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:Jp,PLAYER_BLUR:Qp,READY:eg,URL_NULL:tg,AUTOPLAY_STARTED:ng,AUTOPLAY_PREVENTED:ig,COMPLETE:rg,REPLAY:og,DESTROY:sg,URL_CHANGE:ag,FULLSCREEN_CHANGE:cg,CSS_FULLSCREEN_CHANGE:lg,MINI_STATE_CHANGE:ug,DEFINITION_CHANGE:hg,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:fg,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:dg,PIP_CHANGE:pg,ROTATE:gg,SCREEN_SHOT:vg,PLAYNEXT:yg,SHORTCUT:mg,XGLOG:kg,USER_ACTION:bg,RESET:wg});function xg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var _g=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort"];function Tg(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}var Eg=function(e){Mn(n,e);var t=xg(n);function n(e){var i;Ln(this,n),(i=t.call(this,e))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var r=e["x5-video-player-type"]||e.x5VideoPlayerType;return Ip.isWeixin&&Ip.os.isAndroid&&r&&(i.videoConfig["x5-video-player-type"]=r,delete i.videoConfig.playsinline,delete i.videoConfig["webkit-playsinline"],delete i.videoConfig["x5-playsinline"]),e.loop&&(i.videoConfig.loop="loop"),i.video=Ep.createDom(i.videoConfig.mediaType,"",i.videoConfig,""),e.defaultPlaybackRate&&(i.video.defaultPlaybackRate=i.video.playbackRate=e.defaultPlaybackRate),"Number"===Ep.typeOf(e.volume)&&(i.volume=e.volume),e.autoplayMuted&&(i.video.muted=!0,i._lastMuted=!0),e.autoplay&&(i.video.autoplay=!0),i._interval={},i.videoEventMiddleware={},i.attachVideoEvents(),i}return lo(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(e){var t=this;this.evHandlers||(this._evHandlers=_g.map((function(e){return Hn({},e,(i=t,r="on".concat((n=e).charAt(0).toUpperCase()).concat(n.slice(1)),i[r]&&"function"==typeof i[r]&&i.on(n,i[r]),function(e){var t=n,r={player:i,eventName:n,timeStamp:e.timeStamp,currentTime:i.currentTime,duration:i.duration,paused:i.paused,ended:i.ended,isInternalOp:!!i._internalOp[e.type],muted:i.muted,volume:i.volume,host:Ep.getHostFromUrl(i.currentSrc),vtype:i.vtype};if(i.removeInnerOP(e.type),"timeupdate"===t&&(i._currentTime=i.video&&i.video.currentTime),"durationchange"===t&&(i._duration=i.video.duration),"volumechange"===t&&(r.isMutedChange=i._lastMuted!==i.muted,i._lastMuted=i.muted),i.videoEventMiddleware[n]){var o=Tg.bind(i);try{i.videoEventMiddleware[n].call(i,r,o)}catch(e){throw Tg.call(i,t,r),e}}else Tg.call(i,t,r)}));var n,i,r}))),e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)}))}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.removeEventListener(Object.keys(t)[0],t[n],!1)}))}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.video.appendChild(Ep.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var i=e.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(e){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,e,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var r=0;r<i.length;r++)i[r].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,i=n.code?Lp[n.code]:"other";n.message;this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new Dp(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"destroy",value:function(){var e=this;for(var t in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null,this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.detachVideoEvents(),this._evHandlers.map((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return!!this.video&&this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var i=0,r=e.length;i<r&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?Ep.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var t=this.video.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){if(!this.video||!this.video.error)return null;return["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(e){this.video&&this.video.muted!==e&&(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){this.video&&e!==1/0&&(this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){this.video&&(this.emit(ag,e),this.emit(Gp),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===Ep.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e!==1/0&&this.video&&(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=uo(jn(n.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=uo(jn(n.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=uo(jn(n.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=uo(jn(n.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){uo(jn(n.prototype),"removeAllListeners",this).call(this)}}]),n}(If),Sg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Ln(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return lo(e,[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),Pg=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Rg=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Og=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ig=Xt,Ag=ji.find,Lg=ph,Dg="find",Mg=!0;function Ng(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=t.call.apply(t,[e].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(r)))}function Fg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var s,a=(s=this.__hooks[e]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(e){!1!==e&&Ng.apply(void 0,[r,t,n.next].concat(Lf(i)))})).catch((function(e){throw e})):Ng.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Ng.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else Ng.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Bg(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function jg(e,t){var n=this.__hooks;n&&delete n[e]}function Hg(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,i)}}function Ug(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.removeHooks&&t.removeHooks.apply(t,i)}}}function Vg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function Gg(e){e.__hooks=null}function Wg(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(r));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(r));if(a&&a.then)a.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(r))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==a)return n.call.apply(n,[e,e].concat(r))}function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zg(e,t){Cp.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}Dg in[]&&Array(1).find((function(){Mg=!1})),Ig({target:"Array",proto:!0,forced:Mg},{find:function(e){return Ag(this,e,arguments.length>1?arguments[1]:void 0)}}),Lg(Dg);var Xg=function(){function e(t){Ln(this,e),Ep.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Vg(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return lo(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=Ep.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):zg(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):zg(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):zg(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Kg(Kg({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}},{key:"hook",value:function(e,t){return Fg.call.apply(Fg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Bg.call.apply(Bg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return jg.call.apply(jg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),Ep.clearAllTimers(this),Ep.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),Gg(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}();if("undefined"!=typeof Element&&!Element.prototype.matches){var qg=Element.prototype;qg.matches=qg.matchesSelector||qg.mozMatchesSelector||qg.msMatchesSelector||qg.oMatchesSelector||qg.webkitMatchesSelector}var $g=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}};function Zg(e,t,n,i,r){var o=Jg.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}function Jg(e,t,n,i){return function(n){n.delegateTarget=$g(n.target,t),n.delegateTarget&&i.call(e,n)}}var Qg=function(e,t,n,i,r){return"function"==typeof e.addEventListener?Zg.apply(null,arguments):"function"==typeof n?Zg.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return Zg(e,t,n,i,r)})))};function ev(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var tv={CONTROLS:"controls",ROOT:"root"},nv={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function iv(e){return!!e&&(e.indexOf&&/^http/.test(e))}function rv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return Ep.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(iv(e)||iv(e.url))return i.src=iv(e)?e:e.url||"",o=Ep.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(Ep.addClass(o,n),Object.keys(i).map((function(e){o.setAttribute(e,i[e])})),o):(Cp.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(e){return Cp.logError("Plugin named [".concat(r,"]:createIcon"),e),null}return"string"==typeof e?Ep.createDomFromHtml(e,i,n):(Cp.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}function ov(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var r=e[i],o=r&&r.class?r.class:"",s=r&&r.attr?r.attr:{},a=null;n&&n[i]&&(o=function(e,t){return"object"===Nn(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],o),s=function(e,t){return"object"===Nn(e)&&e.attr&&"object"===Nn(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],s),a=rv(n[i],i,o,s,t.pluginName)),!a&&r&&(a=rv(r.icon?r.icon:r,s,o,{},t.pluginName)),t.icons[i]=a}))}var sv=function(e){Mn(n,e);var t=ev(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ln(this,n),(e=t.call(this,i)).__delegates=[],e}return lo(n,[{key:"__init",value:function(e){if(uo(jn(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,ov(this.registerIcons()||{},this),this.langText={};var r,o,s=this.registerLanguageTexts()||{};r=s,o=this,Object.keys(r).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang,n=o.i18n;return n[e]?n[e]:r[e]&&r[e][t]||""}})}));var a="";try{a=this.render()}catch(e){throw Cp.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(a)(i=n.insert(a,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=Ep.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;var c=this.config.attr||{},l=this.config.style||{};this.setAttr(c),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===Nn(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,r,o=n,s=t[o],a={root:e.root};"function"==typeof s?(i=e.config[o]||{},r=s):"object"===Nn(s)&&"function"==typeof s.plugin&&(i=s.options?Ep.deepCopy(e.config[o]||{},s.options):e.config[o]||{},r=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),e.registerPlugin(r,a,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=n[t]||i[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var r=uo(jn(n.prototype),"registerPlugin",this).call(this,e,t,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var r=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){r.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===Ep.typeOf(e)?this.root.style[e]=t:void("Object"===Ep.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===Ep.typeOf(e)?this.root.setAttribute(e,t):void("Object"===Ep.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return Cp.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),uo(jn(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,r=Number(n),o=e instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=t.children[s];var l=Number(a.getAttribute("data-index"));if(l>=r){c="beforebegin";break}l<r&&(c="afterend")}return o?"afterend"===c?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[s]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=Qg(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}));else{var s=Qg(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}return o}},{key:"ROOT_TYPES",get:function(){return tv}},{key:"POSITIONS",get:function(){return nv}}]),n}(Xg),av=Ws.charAt,cv=je,lv=$h,uv="String Iterator",hv=cv.set,fv=cv.getterFor(uv);lv(String,"String",(function(e){hv(this,{type:uv,string:String(e),index:0})}),(function(){var e,t=fv(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=av(n,i),t.index+=e.length,{value:e,done:!1})}));var dv=function(){function e(){var t=this;if(Ln(this,e),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(e){var n=(new Date).getTime();n-t.timeStamp<100||(t.timeStamp=n,t.__trigger(e))})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}return lo(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,i=-1,r=0;r<n.length;r++)n[r]&&e===n[r].target&&(i=r);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}},{key:"__trigger",value:function(e){for(var t=0;t<e.length;t++){if(this.__runHandler(e[t].target))break}}}]),e}(),pv=null;function gv(e){return"Object"===Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}var vv={init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.getVideoSize()},pv||(pv=new dv),pv.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins={});var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var a=Object.keys(o),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=o[a[c]];gv(l)&&(n.config=Object.assign({},n.config,o[a[c]]));break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new t(n);return r[s.toLowerCase()]=u,r[s.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var r=e._pluginInfoId;if(t.pluginGroup[r]){for(var o=t.pluginGroup[r]._plugins,s=[],a=0,c=Object.keys(o);a<c.length;a++){var l=c[a];if(o[l]&&o[l].beforePlayerInit)try{var u=o[l].beforePlayerInit();s.push(n(u))}catch(e){throw s.push(n(null)),e}}Promise.all([].concat(s)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];n[o]&&n[o].afterPlayerInit&&n[o].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},i=this.pluginGroup[t]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(t,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(t,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup&&this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];r&&r._player&&(this.pluginGroup[n[i]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n,i;n=e.root,pv.unObserver(n,i);for(var r=this.pluginGroup[t]._plugins,o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.unRegister(t,a)}var c=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,c){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},yv={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function mv(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function kv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var bv=function(e){Mn(n,e);var t=kv(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"onMouseEnter",(function(t){var n=Fn(e),i=n.player;n.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})})),Hn(Fn(e),"onMouseLeave",(function(){Fn(e).player.focus()})),e}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls),e.config.mode||"mobile"!==Ip.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,r=t.mode,o=t.autoHide;if(!n){"flex"===r&&this.player.addClass(yv.FLEX_CONTROLS),o&&this.player.addClass(yv.AUTOHIDE);var s={height:"".concat(i,"px")};Object.keys(s).map((function(t){e.root.style[t]=s[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(ug,(function(t){t?Ep.addClass(e.root,"mini-controls"):Ep.removeClass(e.root,"mini-controls")}));var a=this.playerConfig.isMobileSimulateMode;"mobile"!==Ip.device&&"mobile"!==a&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&Ep.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){Ep.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){Ep.addClass(this.root,"show")}},{key:"hide",value:function(){Ep.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:r.position;switch(o){case nv.CONTROLS_LEFT:t.root=this.left;break;case nv.CONTROLS_RIGHT:t.root=this.right;break;case nv.CONTROLS_CENTER:t.root=this.center;break;case nv.CONTROLS:t.root=this.root;break;default:t.root=this.left}return uo(jn(n.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==Ip.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var r=Ep.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},{control_autohide:n},{controls_permanent:!n},{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(sv),wv={},Cv={},xv=[],_v={};function Tv(){Object.keys(wv.en).map((function(e){Cv[e]=e}))}function Ev(e){("Array"!==Ep.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e).map((function(e){wv[e.LANG]?Ep.deepMerge(wv[e.LANG]||{},e.TEXT||{}):_v[e.LANG]=e.TEXT})),Tv()}function Sv(e){var t=e.LANG,n=e.TEXT||{};wv[t]||xv.push(t),wv[t]?Ep.deepMerge(n,wv[t]):wv[t]=n,_v[t]&&(Ev([{LANG:t,TEXT:_v[t]}]),delete _v[t]),"zh-cn"===t&&(wv.zh=wv["zh-cn"]),Tv()}Sv({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var Pv={get textKeys(){return Cv},get langKeys(){return xv},get lang(){var e={};return xv.map((function(t){e[t]=wv[t]})),e.zh=wv["zh-cn"],e},extend:Ev,use:Sv};function Rv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rv(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Iv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Av=["play","pause","replay","retry"],Lv=function(e){Mn(n,e);var t=Iv(n);function n(e){var i;Ln(this,n);var r,o=Ep.deepMerge(mv(),e);Vg(Fn(i=t.call(this,o)),Av),i.config=o,(r=Fn(i)).logInfo=Cp.logInfo.bind(r),r.logWarn=Cp.logWarn.bind(r),r.logError=Cp.logError.bind(r);var s=i.constructor.defaultPreset;if(i.config.presets.length){var a=i.config.presets.indexOf("default");a>=0&&s&&(i.config.presets[a]=s)}else s&&i.config.presets.push(s);return i.userTimer=null,i.waitTimer=null,i.isReady=!1,i.isPlaying=!1,i.isSeeking=!1,i.isCanplay=!1,i._runPending=!1,i.rotateDeg=0,i.isActive=!1,i.isCssfullScreen=!1,i.fullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.topBar=null,i.root=null,Ip.os.isAndroid&&Ip.osVersion>0&&Ip.osVersion<6&&(i.config.autoplay=!1),i.database=new Sg,i.isUserActive=!1,i._initDOM()?(i._bindEvents(),i._registerPresets(),i._registerPlugins(),vv.onPluginsReady(Fn(i)),Ep.setTimeout(Fn(i),(function(){i.emit(eg),i.onReady&&i.onReady(),i.isReady=!0}),0),i.getInitDefinition(),(i.config.videoInit||i.config.autoplay)&&(i.hasStart||i.start()),i):(console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),Bn(i))}return lo(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(jp,new Dp("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=vv.checkPlayerRoot(this.root);n&&(Cp.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.config.controls){var s=vv.register(this,bv);this.controls=s}var a="mobile"===this.config.isMobileSimulateMode?"mobile":Ip.device;if(this.addClass("".concat(yv.DEFAULT," ").concat(yv.ACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":yv.NO_CONTROLS)),this.config.autoplay?this.addClass(yv.ENTER):this.addClass(yv.NO_START),this.config.fluid){var c={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(100*this.config.height/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(c).map((function(t){e.root.style[t]=c[t]}))}else["width","height"].map((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=Ep.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=Ep.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=Ep.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=Ep.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}));var t=function(){e.fullscreen=!1,e._fullScreenOffset=null};this.onFullscreenChange=function(n,i){var r=Ep.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(bg,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,fullscreen:e.fullscreen}),i||r&&(r===e._fullscreenEl||"VIDEO"===r.tagName))Ep.setTimeout(e,(function(){e.getVideoSize()}),100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,r,yv.FULLSCREEN),e.emit(cg,!0,e._fullScreenOffset),e.isCssfullScreen&&e.exitCssFullscreen();else if(e.fullscreen){Ep.setTimeout(e,(function(){e.getVideoSize()}),100);var o=e._fullScreenOffset;if(e.config.needFullscreenScroll)try{window.scrollTo(o.left,o.top),Ep.setTimeout(e,(function(){t()}),50)}catch(e){Cp.logError(e),t()}else!e.config.closeFocusVideoFocus&&e.video.focus(),t();e.isCssfullScreen?e.removeClass(yv.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,yv.FULLSCREEN),e._fullscreenEl=null,e.emit(cg,!1)}},Pg.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},Ip.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once("play",this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Pg.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off("play",this.playFunc),this.canPlayFunc&&this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e&&("Array"!==Ep.typeOf(e)||0!==e.length)||(e="",this.emit(tg),Cp.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,i=e.startTime,r=e.defaultPlaybackRate;Cp.logInfo("player","canPlayFunc",i),i&&(t.currentTime=i>t.duration?t.duration:i,t.config.startTime=0),1!==r&&(t.playbackRate=r),n&&t.videoPlay(),t.off(Wp,t.canPlayFunc),t.removeClass(yv.ENTER)}},this._detachSourceEvents(this.video),"Array"===Ep.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,"Number"===Ep.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;Cp.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(Ip.os.isIpad||Ip.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(Wp,this.canPlayFunc),Ep.setTimeout(this,(function(){t.emit(rg)}),1),this.hasStart||vv.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).map((function(e){Pv.use(e)}));var i=t.join("||").toLowerCase().split("||");n.map((function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return null;if(t.lazy&&t.loader){var r=vv.lazyRegister(e,t);return void(t.forceBeforeInit&&(r.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})).catch((function(t){Cp.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})),e._loadingPlugins.push(r)))}return e.registerPlugin(t)}catch(e){return Cp.logError("_registerPlugins:",e),null}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){var n,i,r,o,s,a,c,l,u,h,f,d,p,g;n=e,a=(i=t).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config),c=a.plugins,l=void 0===c?[]:c,u=a.ignores,h=void 0===u?[]:u,f=a.icons,d=void 0===f?{}:f,p=a.i18n,g=void 0===p?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(r=n.config.plugins).push.apply(r,Lf(l)),(o=n.config.ignores).push.apply(o,Lf(h)),Object.keys(d).map((function(e){n.config.icons[e]||(n.config.icons[e]=d[e])})),(s=n.config.i18n).push.apply(s,Lf(g))}))}},{key:"registerPlugin",value:function(e,t){var n=null,i=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t);for(var r=Object.keys(this.config),o=0;o<r.length;o++)if(n.pluginName.toLowerCase()===r[o].toLowerCase()){var s=this.config[r[o]];"Object"===Ep.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=sv.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return vv.register(this,n,i)}},{key:"deregister",value:function(e){"string"==typeof e?vv.unRegister(this,e):e instanceof Xg&&vv.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof Xg&&(t=e.pluginName),t)for(var n=this.config.plugins.length-1;n>-1;n--){if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return vv.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=vv.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(Ep.hasClass(this.root,e)||Ep.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&Ep.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return Ep.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!this.hasStart)return e||this.config.url||this.getInitDefinition(),(!this.plugins||Object.keys(this.plugins).length<2)&&(this._registerPlugins(),vv.onPluginsReady(this)),this.hasStart=!0,vv.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",Cp.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===Ep.typeOf(e)&&(n=e.url);var i=this.currentTime,r=this.paused;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=i,r&&t.once("canplay",(function(){t.pause()})),e()};Ip.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart){this.isPlaying||(this.removeClass(yv.NO_START),!this.isCanplay&&this.addClass(yv.ENTER));var t=uo(jn(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(yv.NOT_ALLOW_AUTOPLAY),e.addClass(yv.PLAYING),e.isPlaying||(Cp.logInfo(">>>>playPromise.then"),e.isPlaying=!0,e.emit(ng))})).catch((function(t){if(Cp.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),void e.removeClass(yv.ENTER);"NotAllowedError"===t.name&&(e._errorTimer=Ep.setTimeout(e,(function(){e._errorTimer=null,e.emit(ig),e.addClass(yv.NOT_ALLOW_AUTOPLAY),e.removeClass(yv.ENTER),e.pause()}),0))})):(Cp.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(yv.NOT_ALLOW_AUTOPLAY),this.removeClass(yv.NO_START),this.removeClass(yv.ENTER),this.addClass(yv.PLAYING),this.emit(ng))),t}this.removeClass(yv.NO_START),this.addClass(yv.ENTER);var i=this.start();i&&i.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){uo(jn(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(yv.PAUSED),Wg(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;Wg(this,"pause",(function(){uo(jn(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.video&&!isNaN(Number(e))){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=t||(r?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(Wp,(function(){switch(n.removeClass(yv.ENTER),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.isPlaying?this.currentTime=e:(this.removeClass(yv.NO_START),this.addClass(yv.ENTER),this.currentTime=e,"play"===s&&this.play())}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map((function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t.definition)}))}},{key:"changeDefinition",value:function(e,t){var n=this;if(this.emit(hg,{from:t,to:e}),this.curDefinition=e.definition,this.hasStart){var i=this.switchURL(e.url);i&&i.then?i.then((function(){n.emit(fg,{from:t,to:e})})):this.emit(fg,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[yv.NOT_ALLOW_AUTOPLAY,yv.PLAYING,yv.NO_START,yv.PAUSED,yv.REPLAY,yv.ENTER,yv.ENDED,yv.ERROR,yv.LOADING];this.hasStart=!1,this.isPlaying=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(yv.ENTER),this.emit(wg)}},{key:"reset",value:function(){var e=this;this.resetState();var t=this.plugins;if(t){Object.keys(t).map((function(n){n!==e.controls.pluginName&&e.deregister(t[n])}));var n=mv();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=n[t])}))}}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,i=this.root,r=this.video;if(i&&r){if(this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),Ep.clearAllTimers(this),this.emit(sg),vv.destroy(this),Gg(this),uo(jn(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(e){}if(t)for(var o=t.children,s=0;s<o.length;s++)t.removeChild(o[s]);!t&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&i.removeChild(e[t]),e[t]=null}));var a=i.className.split(" ");a.length>0?i.className=a.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(yv.ENDED),this.currentTime=0,this.isSeeking=!1,Wg(this,"replay",(function(){e.once(Wp,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(og),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(yv.ERROR),this.addClass(yv.LOADING),Wg(this,"retry",(function(){var t=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(Wp,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=yv.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=Ep.filterStyleFromText(e)),Ep.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=Ep.filterStyleFromText(t),Ep.addClass(t,i)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=yv.PARENT_FULLSCREEN),this._orgCss&&(Ep.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),Ep.removeClass(e,n),t&&t!==e&&this._orgPCss&&(Ep.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",Ep.removeClass(t,i))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:Ep.scrollTop(),left:Ep.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var i=Ep.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var r=0;r<Rg.length;r++){var o=Rg[r];if(e[o]){var s="webkitRequestFullscreen"===o?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[o]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this._fullscreenEl||Ep.getFullScreenEl()){this.root;var t=this.video;this._fullActionFrom="exit";for(var n=0;n<Og.length;n++){var i=Og[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=e,this.changeFullStyle(this.root,e,e?yv.INNER_FULLSCREEN:yv.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(lg,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?yv.INNER_FULLSCREEN:yv.CSS_FULLSCREEN;this.fullscreen?this.removeClass(e):this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(lg,!1)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(Jp,Ov({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(Qp,Ov({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(yv.ACTIVE),this.userTimer&&(Ep.clearTimeout(this,this.userTimer),this.userTimer=null),!1!==t.autoHide){var n=t&&t.delay?t.delay:this.config.inactive;this.userTimer=Ep.setTimeout(this,(function(){e.userTimer=null,e.blur()}),n)}else this.userTimer&&(Ep.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(this.isActive){var t=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignorePaused||t||!this.paused&&!this.ended)&&this.addClass(yv.ACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(yv.ENTER),this.removeClass(yv.LOADING),this.isCanplay=!0,this.waitTimer&&Ep.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){this.removeClass(yv.PAUSED),this.ended&&this.removeClass(yv.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(yv.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(Ep.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(yv.ENDED)}},{key:"onError",value:function(){this.updateAcc("error"),this.removeClass(yv.NOT_ALLOW_AUTOPLAY),this.removeClass(yv.NO_START),this.removeClass(yv.ENTER),this.removeClass(yv.LOADING),this.addClass(yv.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(yv.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&Ep.clearTimeout(this,this.waitTimer),this.removeClass(yv.LOADING),this.removeClass(yv.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&Ep.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=Ep.setTimeout(this,(function(){e.addClass(yv.LOADING),Ep.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;[yv.NO_START,yv.PAUSED,yv.ENDED,yv.ERROR,yv.REPLAY,yv.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass(yv.LOADING))&&this.video.readyState>2&&(this.removeClass(yv.LOADING),Ep.clearTimeout(this,this.waitTimer),this.waitTimer=null),this.paused||this.isPlaying||(this.isPlaying=!0,this.emit(ng)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===Ep.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.video&&t&&e){var i="String"===Ep.typeOf(e)?e:e.type||"";"switch_play_pause"===t&&("Undefined"===Ep.typeOf(n.paused)&&(n.paused=this.paused),n.isFirstStart=!this.playing),this.emit(bg,Ov({eventType:i,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,i=t.length,r=0;r<i;r++)if(t.start(r)<=n&&t.end(r)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,r=0;e.y&&(r=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){if("plugins"!==n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===Ep.typeOf(i.setConfig)&&i.setConfig(e[n])}}))}},{key:"playNext",value:function(e){this.resetState(),this.isPlaying=!1,this.setConfig(e),this.play(),this.emit(yg,e)}},{key:"getVideoSize",value:function(){var e=this;if(this.video){var t=this.video,n=t.videoWidth,i=t.videoHeight,r=this.config,o=r.fitVideoSize,s=r.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,h=parseInt(n/i*1e3,10),f=parseInt(l/u*1e3,10),d=l,p=u,g={};"auto"===o&&f>h||"fixWidth"===o?(p=l/h*1e3,this.config.fluid?g.paddingTop="".concat(100*p/d,"%"):g.height="".concat(p+c,"px")):("auto"===o&&f<h||"fixHeight"===o)&&(d=h*u/1e3,g.width="".concat(d,"px")),this.fullscreen||this.isCssfullScreen||Object.keys(g).map((function(t){e.root.style[t]=g[t]})),("fillHeight"===s&&f<h||"fillWidth"===s&&f>h)&&this.setAttribute("data-xgfill","cover");var v={videoScale:h,vWidth:d,vHeight:p,cWidth:d,cHeight:p+c};this.emit(dg,v)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var i=null,r=null;e.map((function(e){t.curDefinition===e.definition&&(i=e),n.defaultDefinition===e.definition&&(r=e)})),!r&&e.length>0&&(r=e[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};try{var t=this.video.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}catch(t){return e}}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==Pv.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,vv.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Pv.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return Pv.lang[e]||Pv.lang.en}},{key:"i18nKeys",get:function(){return Pv.textKeys||{}}},{key:"version",get:function(){return Ap}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=uo(jn(n.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=uo(jn(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=uo(jn(n.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,t){return Fg.call.apply(Fg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return Bg.call.apply(Bg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return jg.call.apply(jg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return Hg.call.apply(Hg,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return Ug.call.apply(Ug,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),vv.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return Cp.config.debug},set:function(e){Cp.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return vv.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){vv.setCurrentUserActive(e,t)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(Eg);function Dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Mv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}function Nv(){return(new Date).getTime()}Hn(Lv,"defaultPreset",null),Hn(Lv,"XgVideoProxy",null);var Fv=function(e){Mn(n,e);var t=Mv(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"_onTimeupdate",(function(){Cp.logInfo("[xgLogger]Events._onTimeupdate"),e._state.isTimeUpdate=!0,e._sendFirstFrame()})),Hn(Fn(e),"_onAutoplayStart",(function(){Cp.logInfo("[xgLogger]Events._onAutoplayStart"),e._state.autoplayStart=!0,e._sendFirstFrame()})),Hn(Fn(e),"_onReset",(function(){e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&Ep.clearTimeout(Fn(e),e._waitTimer),e._waittTimer&&Ep.clearTimeout(Fn(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),Hn(Fn(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=Nv(),e.emitLog("seekStart",{start:Nv()}))})),Hn(Fn(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),Hn(Fn(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=Nv(),e._waitType=1,e.emitLog("waitingStart",{start:e.waitingStart,type:1,endType:"loadstart"}))})),Hn(Fn(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e._waitTimer=Ep.setTimeout(Fn(e),(function(){e._isWaiting&&(e.waitingStart=Nv(),Ep.clearTimeout(Fn(e),e._waitTimer),e._waitTimer=null,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e._startWaitTimeout(),e.emitLog("waitingStart",{start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),Hn(Fn(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),Hn(Fn(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return lo(n,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on($p,(function(){var t=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,Cp.logInfo("[xgLogger]Events.LOAD_START",t),e.pt=Nv(),e.vt=0,e.fvt=0,e.off(ng,e._onAutoplayStart),e.off(Vp,e._onTimeupdate),e._onWaitingLoadStart(),t?e.once(Vp,e._onTimeupdate):e.once(ng,e._onAutoplayStart)})),this.on(zp,(function(){e.vt=Nv(),e.fvt=e.vt-e.pt,Cp.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")})),this.on(Hp,this._onSeeking),this.on(Up,this._onSeeked),this.on(sg,(function(){e.endState("destroy")})),this.on(ag,(function(){e.endState("urlChange"),e._onReset()})),this.on([Np,Wp],this._onPlaying),this.on(Gp,this._onWaiting),this.on(jp,this._onError),this.on([Zp,wg],(function(){e.endState("reset"),e._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=Nv(),this.vt>0&&this._state.isFFLoading&&(Cp.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&Ep.clearTimeout(this,this._waittTimer),this._waittTimer=Ep.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),Ep.clearTimeout(e,e._waittTimer),e._waittTimer=null}),3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=Nv(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(Ep.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(Ep.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=Nv()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:t,type:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit(kg,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dv(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({t:Nv(),host:Ep.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(sv);function Bv(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Hv=function(e){Mn(n,e);var t=jv(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"registerIcons",value:function(){return{replay:Bv}}},{key:"afterCreate",value:function(){var e=this;sv.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Fp,(function(){if(e.playerConfig.loop||Ep.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(Mp,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),Ep.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(sv);function Uv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Vv=function(e){Mn(n,e);var t=Uv(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){Ep.addClass(this.root,"hide")}},{key:"show",value:function(){Ep.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Fp,(function(){e.isEndedShow&&Ep.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(Vp,(function(){e.onTimeUpdate()})),this.on(ag,(function(){Ep.removeClass(e.root,"hide"),Ep.addClass(e.root,"xg-showplay"),e.once(Vp,(function(){e.onTimeUpdate()}))}))):this.on(Mp,(function(){Ep.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?Ep.removeClass(this.root,"xg-showplay"):this.once(Vp,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,i=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(sv);function Gv(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Wv(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Yv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Kv={};var zv=function(e){Mn(n,e);var t=Yv(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"onAutoplayStart",(function(){if(!i.autoPlayStart){var e="auto"===i.config.mode?"auto-hide":"hide";Ep.addClass(i.root,e),i.autoPlayStart=!0,i.onPlayPause("play")}})),i.autoPlayStart=!1,i}return lo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(eg,(function(){n&&(n.lang&&"en"===n.lang?Ep.addClass(t.root,"lang-is-en"):"jp"===n.lang&&Ep.addClass(t.root,"lang-is-jp"))})),this.on(ng,this.onAutoplayStart),n.autoplay||this.show(),this.on(ig,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),Ep.removeClass(e.root,t),e.show()})),this.on(Mp,(function(){e.onPlayPause("play")})),this.on(Bp,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation(),e.emitUserAction(t,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Gv,class:"xg-icon-play"},startPause:{icon:Wv,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){Ep.addClass(this.root,"hide")}},{key:"show",value:function(){Ep.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){Ep.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){Ep.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};Kv[e]&&window.clearTimeout(Kv[e].id),Kv[e]={},n.start&&n.start(),Kv[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(Kv[e].id),delete Kv[e]}),t)}("pauseplay",400,{start:function(){Ep.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){Ep.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;(e.cancelable&&e.preventDefault(),e.stopPropagation(),t.isReady)&&(!this.player.paused&&t.isPlaying?t.pause():t.play())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(n.isPlaying&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(Kv).map((function(e){window.clearTimeout(Kv[e].id),delete Kv[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(sv);function Xv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var qv=function(e){Mn(n,e);var t=Xv(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=Ep.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(sv);function $v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Zv=function(e){Mn(n,e);var t=$v(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:10}}}]),n}(sv);function Jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}function Qv(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var ey=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],ty=ey.length;function ny(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===Nn(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<ty;t++)e[ey[t]]=0;return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var i=n.isBorderBox="border-box"===t.boxSizing,r=0;r<ty;r++){var o=ey[r],s=t[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,p=i,g=Qv(t.width);!1!==g&&(n.width=g+(p?0:c+f));var v=Qv(t.height);return!1!==v&&(n.height=v+(p?0:l+d)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(l+d),n.outerWidth=n.width+u,n.outerHeight=n.height+h,n}}function iy(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier===t)return i}}var ry="dragStart",oy="dragMove",sy="dragEnded",ay={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},cy=function(e){Mn(n,e);var t=Jv(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ln(this,n),(i=t.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=e instanceof Element?e:document.querySelector(e),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):Bn(i)}return lo(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),ay[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=ay[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=iy(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=iy(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=iy(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=ny(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(ry,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(sy)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(e,t),s=o.x,a=o.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,r),this.position.x=i+s,this.position.y=r+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit(oy,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=ny(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(If);function ly(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var uy=function(e){Mn(n,e);var t=ly(n);function n(e){var i;Ln(this,n),Hn(Fn(i=t.call(this,e)),"onCancelClick",(function(e){i.exitMini(),i.isClose=!0})),Hn(Fn(i),"onCenterClick",(function(e){var t=Fn(i).player;t.paused?t.play():t.pause()})),Hn(Fn(i),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var t=parseInt(Ep.getCss(i.player.root,"height"));t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=Fn(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Bp,(function(){e.setAttr("data-state","pause")})),this.on(Mp,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(Zv,n,Zv.pluginName)}var i=Ep.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new cy(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Gv,class:"xg-icon-play"},pause:{icon:Wv,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Ep.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=i.style[t],i.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(ug,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Ep.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){i.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(ug,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=Ep.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(sv);function hy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var fy={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},dy=["videoClick","videoDbClick"],py=function(e){Mn(n,e);var t=hy(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"onMouseMove",(function(t){var n=Fn(e),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus())})),Hn(Fn(e),"onMouseEnter",(function(t){var n=Fn(e),i=n.playerConfig,r=n.player;!i.closeFocusVideoFocus&&r.video.focus(),i.closeDelayBlur?r.focus({autoHide:!1}):r.focus()})),Hn(Fn(e),"onMouseLeave",(function(t){var n=e.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime,o=n.closeDelayBlur;i||o||(r?e.player.focus({autoHide:!0,delay:r}):e.player.blur())})),Hn(Fn(e),"onVideoClick",(function(t){var n=Fn(e),i=n.player,r=n.playerConfig;t.target&&r.closeVideoClick||t.target!==i.video&&t.target!==i.innerContainer&&t.target!==i.video.__canvas||(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Wg(Fn(e),dy[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:i.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),Hn(Fn(e),"onVideoDblClick",(function(t){var n=Fn(e),i=n.player,r=n.playerConfig;!t.target||t.target!==i.video&&t.target!==i.video.__canvas||r.closeVideoDblclick||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Wg(Fn(e),dy[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{fullscreen:i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:t,fullscreen:i.fullscreen})))})),e}return lo(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,dy.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,n=t.enableContextmenu;"mobile"===t.isMobileSimulateMode||"mobile"===Ip.device&&!Ip.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,i=t.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(fy).map((function(t){i.addEventListener(t,e[fy[t]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause"),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,i=t.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(fy).map((function(t){i.removeEventListener(t,e[fy[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(Xg),gy=f,vy=nt,yy=v,my=Xt,ky=nt,by=function(e){if("number"!=typeof e&&"Number"!=gy(e))throw TypeError("Incorrect invocation");return+e},wy=function(e){var t=String(yy(this)),n="",i=vy(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},Cy=r,xy=1..toFixed,_y=Math.floor,Ty=function(e,t,n){return 0===t?n:t%2==1?Ty(e,t-1,n*e):Ty(e*e,t/2,n)},Ey=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=_y(r/1e7)},Sy=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=_y(i/t),i=i%t*1e7},Py=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=String(e[t]);n=""===n?i:n+wy.call("0",7-i.length)+i}return n};my({target:"Number",proto:!0,forced:xy&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Cy((function(){xy.call({})}))},{toFixed:function(e){var t,n,i,r,o=by(this),s=ky(e),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Ty(2,69,1))-69)<0?o*Ty(2,-t,1):o/Ty(2,t,1),n*=4503599627370496,(t=52-t)>0){for(Ey(a,0,n),i=s;i>=7;)Ey(a,1e7,0),i-=7;for(Ey(a,Ty(10,i,1),0),i=t-1;i>=23;)Sy(a,1<<23),i-=23;Sy(a,1<<i),Ey(a,1,1),Sy(a,2),l=Py(a)}else Ey(a,0,n),Ey(a,1<<-t,0),l=Py(a)+wy.call("0",s);return l=s>0?c+((r=l.length)<=s?"0."+wy.call("0",s-r)+l:l.slice(0,r-s)+"."+l.slice(r-s)):c+l}});var Ry="press",Oy="pressend",Iy="doubleclick",Ay="click",Ly="touchmove",Dy="touchstart",My="touchend",Ny={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Fy={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function By(e){return e&&e.length>0?e[e.length-1]:null}function jy(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var Hy=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};Ln(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(e){n.config[e]=i[e]})),this.root=t,this.events="mouse"===i.eventType?Fy:Ny,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return lo(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(Ry,e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(Iy,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(Ay,e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],i=-1,r=0;r<n.length;r++)if(n[r]===t){i=r;break}i>=0&&this.__handlers[e].splice(i,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(t){console.error("trigger>>:".concat(e),t)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&jy(e);var i=By(e.touches);t.x=i?parseInt(i.pageX,10):e.pageX,t.y=i?parseInt(i.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger(Dy,e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&jy(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(Oy,e),this.trigger(My,e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,i=By(e.touches),r=i?parseInt(i.pageX,10):e.pageX,o=i?parseInt(i.pageY,10):e.pageX,s=r-t.x,a=o-t.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(Oy,e),t.press=!1,t.moving=!0,this.trigger(Ly,e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function Uy(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}function Vy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Gy="auto",Wy="seeking",Yy="playbackrate",Ky=function(e){Mn(n,e);var t=Vy(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"onTouchStart",(function(e){var t=Fn(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=i.getTouche(e);if(a&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,Ep.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),i.find(".xg-dur").innerHTML=Ep.format(i.duration);var c=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(a.pageX-o.left,10),u=parseInt(a.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),Hn(Fn(i),"onTouchMove",(function(e){var t=i.getTouche(e),n=Fn(i),r=n.pos,o=n.config,s=n.player;if(t&&!o.disableGesture&&i.duration&&r.isStart){var a=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(t.pageX-r.left,10),u=parseInt(t.pageY-r.top,10),h=90===s.rotateDeg?u:l,f=90===s.rotateDeg?l:u;if(Math.abs(h-r.x)>a||Math.abs(f-r.y)>a){var d=h-r.x,p=f-r.y,g=r.scope;if(-1===g&&(0===(g=i.checkScope(h,f,d,p,r))&&(c?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*i.timeOffset)),r.scope=g),-1===g||g>0&&!o.gestureY||0===g&&!o.gestureX)return;e.cancelable&&e.preventDefault(),i.executeMove(d,p,g,r.width,r.height),r.x=h,r.y=f}}})),Hn(Fn(i),"onTouchEnd",(function(e){var t=Fn(i),n=t.player,r=t.pos,o=t.playerConfig;r.isStart&&(r.scope>-1&&e.cancelable&&e.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),Ep.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(Gy))})),Hn(Fn(i),"onRootTouchMove",(function(e){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.pos.isStart?i.onTouchMove(e):i.onTouchStart(e))})),Hn(Fn(i),"onRootTouchEnd",(function(e){if(i.pos.isStart&&i.checkIsRootTarget(e)){e.stopPropagation(),i.onTouchEnd(e);var t=i.player.controls;t&&t.recoverAutoHide()}})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return lo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Uy,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),Ep.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=Ep.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new Hy(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Yp,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([Wp,Fp],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(n){e[o[t]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),s.addCallBack("dragend",(function(){e.changeAction(Gy)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Ep.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,i,r){var o=r.width,s=-1;if(e<0||e>o)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&e>r.scopeM1&&e<r.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=e<r.scopeL?1:e>r.scopeR?2:3),s}},{key:"executeMove",value:function(e,t,n,i,r){switch(n){case 0:this.updateTime(e/i*this.config.scopeM);break;case 1:this.updateBrightness(t/r);break;case 2:Ip.os.isIos||this.updateVolume(t/r)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;switch(e){case 0:i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)}this.changeAction(Gy)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"onClick",value:function(e){var t=this.player,n=this.config,i=this.playerConfig;t.isPlaying?!n.closedbClick||i.closeVideoClick?t.isActive?t.blur():t.focus():i.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus()):i.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),t.play())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction(Yy))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{from:i.playbackRate,to:t.rate}),i.playbackRate=t.rate,t.rate=1,this.changeAction(Gy))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,i=this.player.duration;e=Number(e.toFixed(4));var r=parseInt(e*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,t.getPlugin("time")&&t.getPlugin("time").updateTime(r/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,e>0),n.isTouchingSeek&&t.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var i=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,t.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,i=this.xgMask,r=t.light+.8*e;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),t.light=r}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!r&&!i.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Wy);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=Ep.format(this.duration),this.find(".xg-cur").innerHTML=Ep.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?Ep.removeClass(this.find(".xg-seek-show"),"xg-back"):Ep.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(!e.hasStart)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(sv);function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}function qy(e){e.preventDefault(),e.returnValue=!1}function $y(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var Zy=function(e){Mn(n,e);var t=Xy(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||$y(n.target))||!e.checkCode(i,!0))&&(qy(n),e.handleKeyCode(i,t),!1)}})),Hn(Fn(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;qy(n),e.handleKeyCode(n.keyCode,t)}})),e}return lo(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,i=e.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*t||i>0&&i-r>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&e===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!t||t&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t=this.player,n=t.currentTime,i=t.duration,r=n,o={currentTime:{from:n,to:r=n+this.seekStep<=i?n+this.seekStep:i-1}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=r}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var i={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.isCssfullScreen,i=t.fullscreen;i&&(t.exitFullscreen(),this.emitUserAction("keyup","switch_fullscreen",{fullscreen:i})),n&&(t.exitCssFullscreen(),this.emitUserAction("keyup","switch_css_fullscreen",{cssfullscreen:n}))}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,s=r.keyCode,a=r.disable;s!==e||a||("function"==typeof o?o(t,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](t,n.player),n.emit(mg,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zy(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:i,target:t.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(Xg);function Jy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}function Qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var em=function(e){Mn(n,e);var t=Qy(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"registerIcons",value:function(){return{loadingIcon:Jy}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:nv.ROOT}}}]),n}(sv),tm=Xt,nm=ji.findIndex,im=ph,rm="findIndex",om=!0;rm in[]&&Array(1).findIndex((function(){om=!1})),tm({target:"Array",proto:!0,forced:om},{findIndex:function(e){return nm(this,e,arguments.length>1?arguments[1]:void 0)}}),im(rm);var sm=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],am=function(){function e(t){Ln(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return lo(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,i=this.fragments;this.fragments=i.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=t.newIndex,o=t.curIndex,s=t.millisecond;r!==o&&n.map((function(t,n){n<r?t[e].style.width="100%":n>r&&(t[e].style.width=0)}));var a=i[r],c=0===s?0:(s-a.start)/a.duration;n[r][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==Ep.typeOf(e.played)){var r=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==Ep.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,i){e>n.start&&e<=n.end&&(t=i)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(Ep.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)Ep.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return Ep.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=Ep.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=Ep.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(i),sm.map((function(t){i.appendChild(Ep.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),e}();function cm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var lm=function(e){Mn(n,e);var t=cm(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"onMoveOnly",(function(e){var t=Fn(i),n=t.pos,r=t.config,o=t.player;Ep.event(e);var s=Ep.getEventPos(e,o.zoom),a=90===o.rotateDeg?s.clientY:s.clientX;if(!(n.moving&&Math.abs(n.x-a)<r.miniMoveStep)){n.moving=!0,n.x=a;var c=i.computeTime(e);i.triggerCallbacks("dragmove",c,e)}})),Hn(Fn(i),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),Hn(Fn(i),"_mouseDownHandler",(function(e,t){i._state.time=t.currentTime,i.updateWidth(t.currentTime,t.percent,0)})),Hn(Fn(i),"_mouseUpHandler",(function(e,t){Fn(i).pos.moving&&i.updateWidth(t.currentTime,t.percent,2)})),Hn(Fn(i),"_mouseMoveHandler",(function(e,t){var n=Fn(i),r=n._state,o=n.pos,s=n.config,a=n.player;r.time<t.currentTime?t.forward=!0:t.forward=!1,r.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&a.pause(),i.triggerCallbacks("dragstart",t,e)),i.updateWidth(t.currentTime,t.percent,1),i.triggerCallbacks("dragmove",t,e)})),Hn(Fn(i),"onMouseDown",(function(e){var t=Fn(i),n=t.player,r=t.pos,o=t.config,s=t.playerConfig,a=Ep.getEventPos(e,n.zoom),c=90===n.rotateDeg?a.clientY:a.clientX;if(!(n.isMini||o.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){e.stopPropagation(),i.focus(),Ep.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),Ep.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),Ep.event(e),r.x=c,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,Ep.addClass(i.progressBtn,"active");var l=i.computeTime(e);return i._mouseDownHandlerHook(e,l),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),Hn(Fn(i),"onMouseUp",(function(e){var t=Fn(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=t._state;e.stopPropagation(),e.preventDefault(),Ep.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),Ep.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),Ep.event(e),Ep.removeClass(i.progressBtn,"active");var c=i.computeTime(e);o.moving?i.triggerCallbacks("dragend",c,e):i.triggerCallbacks("click",c,e),i._mouseUpHandlerHook(e,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,a.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?"mobile"!==s.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(e)),Ep.setTimeout(Fn(i),(function(){i.resetSeekState()}),10),n.focus()})),Hn(Fn(i),"onMouseMove",(function(e){var t=Fn(i),n=t.pos,r=t.player,o=t.config;Ep.checkTouchSupport()&&e.preventDefault(),Ep.event(e);var s=Ep.getEventPos(e,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX,c=Math.abs(n.x-a);if(!(n.moving&&c<o.miniMoveStep||!n.moving&&c<o.miniStartStep)){n.x=a;var l=i.computeTime(e);i._mouseMoveHandlerHook(e,l)}})),Hn(Fn(i),"onMouseOut",(function(e){i.triggerCallbacks("mouseout",null,e)})),Hn(Fn(i),"onMouseOver",(function(e){i.triggerCallbacks("mouseover",null,e)})),Hn(Fn(i),"onMouseEnter",(function(e){var t=Fn(i),n=t.player,r=t.pos;i.triggerCallbacks("mouseenter",null,e),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),Hn(Fn(i),"onMouseLeave",(function(e){i.triggerCallbacks("mouseleave",null,e);var t=Fn(i),n=t.player,r=t.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return lo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.progress&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e=this;this.innerList=new am({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===Ip.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Vp,(function(){e.onTimeupdate()})),this.on(Up,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(qp,(function(){e.onCacheUpdate()})),this.on(Fp,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(Zp,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===Nn(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===e)try{i.handler(t,n)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),e)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===e&&n.handler===t&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",Ep.stopPropagation),t.center&&t.center.addEventListener("touchend",Ep.stopPropagation))):(this.bind("mousedown",this.onMouseDown),"mobile"!==n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),Ep.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),Ep.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=e>r.duration?r.duration-.2:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(e){var t,n,i,r=this.player,o=this.root.getBoundingClientRect(),s=o.width,a=o.height,c=o.top,l=o.left,u=Ep.getEventPos(e,r.zoom);90===r.rotateDeg?(t=a,n=c,i=u.clientY):(t=s,n=l,i=u.clientX);var h=i-n,f=(h=h>t?t:h<0?0:h)/t;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:h,width:t,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!e.isSeeking&&!this.isProgressMoving&&e.hasStart){if(t.now>-1){var i=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&i>300||1===t.direc&&i>-300)return void(t.now=-1);t.now=-1}var r=this.timeOffset+e.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",Ep.stopPropagation),t.center&&t.center.removeEventListener("touchend",Ep.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(sv);function um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var hm=function(e){Mn(n,e);var t=um(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(Bp,(function(){e.animate(t.paused)})),this.on(Mp,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Gv,class:"xg-icon-play"},pause:{icon:Wv,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause"),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(sv);function fm(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}function dm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var pm=function(e){Mn(n,e);var t=dm(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:fm,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){Ep.addClass(this.root,"show")}},{key:"hide",value:function(){Ep.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:nv.ROOT_TOP,index:0}}}]),n}(sv);function gm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function vm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var mm=function(e){Mn(n,e);var t=ym(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.setRotateDeg(0):e.setRotateDeg(90))})),e}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.fullscreen&&(e.config.disable=!e.player.config.fullscreen)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=Ep.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(t){e.emitUserAction(t,"switch_fullscreen",{fullscreen:e.player.fullscreen})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(cg,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t),e.config.needBackIcon&&e.show()})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:pm,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===Ip.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:gm,class:"xg-get-fullscreen"},exitFullscreen:{icon:vm,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===Ip.device?"touchend":"click",this.handleFullscreen),"mobile"===Ip.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"setRotateDeg",value:function(e){var t=this.player;90===window.orientation||-90===window.orientation?t.rotateDeg=0:t.rotateDeg=e}},{key:"getRotateFullscreen",value:function(e){var t=this.player;t.isCssfullScreen&&t.exitCssFullscreen(e);var n=e?yv.INNER_FULLSCREEN:yv.ROTATE_FULLSCREEN;t._fullscreenEl=e||t.root,t.changeFullStyle(t.root,e,n,yv.PARENT_ROTATE_FULLSCREEN),t.fullscreen=!0,this.setRotateDeg(90),this.emit(cg,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this.player;t.fullscreen=!1;var n=t._fullscreenEl!==t.root?yv.INNER_FULLSCREEN:yv.ROTATE_FULLSCREEN;t.recoverFullStyle(t.root,t._fullscreenEl,n,yv.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(cg,!1)}},{key:"changeFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config,i=!1;if((!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen())&&(i=!0),i)t.fullscreen?(t.fullscreen=!1,t.exitCssFullscreen(),this.emit(cg,!1)):(t.fullscreen=!0,t.getCssFullscreen(),this.emit(cg,!0)),this.animate(t.fullscreen);else if(n.rotateFullscreen)t.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(t.fullscreen);else{if(n.switchCallback&&"function"==typeof n.switchCallback)return void n.switchCallback(t.fullscreen);t.fullscreen?t.exitFullscreen():t.getFullscreen()}}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){uo(jn(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){uo(jn(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(sv);function km(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var bm=function(e){Mn(n,e);var t=km(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).isActiving=!1,i}return lo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Yp,(function(){e.onTimeUpdate()})),this.on(Vp,(function(){e.onTimeUpdate()})),this.on(Zp,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&uo(jn(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!this.config.disable&&!this.isActiving&&e.hasStart){var t=e.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=Ep.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=Ep.format(this.duration))):(this.timeDom.innerHTML=Ep.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=Ep.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=Ep.format(0),this.centerDurDom.innerHTML=Ep.format(0)):(this.timeDom.innerHTML=Ep.format(0),this.durationDom.innerHTML=Ep.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=Ep.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Ep.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(Ep.hide(this.durationDom),Ep.hide(this.timeDom),Ep.hide(this.find(".time-separator")),Ep.show(this.find(".time-live-tag"))):Ep.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(Ep.hide(this.durationDom),Ep.hide(this.timeDom),Ep.hide(this.find(".time-separator")),Ep.show(this.find(".time-live-tag"))):(Ep.hide(this.find(".time-live-tag")),Ep.show(this.find(".time-separator")),Ep.show(this.durationDom),Ep.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=Ep.format(e):this.centerCurDom.innerHTML=Ep.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(Up,n),t.isSeeking?this.once(Up,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(sv);function wm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Cm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function xm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}function _m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Tm=function(e){Mn(n,e);var t=_m(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"onBarMousedown",(function(t){var n=Fn(e).player,i=e.find(".xgplayer-slider"),r=e.find(".xgplayer-bar");i.focus(),Ep.event(t);var o=r.getBoundingClientRect(),s=Ep.getEventPos(t,n.zoom),a=o.height-(s.clientY-o.top);if(s.h=a,s.barH=o.height,e.pos=s,!(a<-2))return e.updateVolumePos(a,t),document.addEventListener("mouseup",e.onBarMouseUp),e.isStart=!0,!1})),Hn(Fn(e),"onBarMouseMove",(function(t){if(e.isStart){var n=Fn(e),i=n.pos,r=n.player;t.preventDefault(),t.stopPropagation(),Ep.event(t);var o=Ep.getEventPos(t,r.zoom);e.isMoving=!0;var s=i.h-o.clientY+i.clientY;s>i.barH||e.updateVolumePos(s,t)}})),Hn(Fn(e),"onBarMouseUp",(function(t){Ep.event(t),document.removeEventListener("mouseup",e.onBarMouseUp),e.isStart=!1,e.isMoving=!1})),Hn(Fn(e),"onMouseenter",(function(t){e._timerId&&(Ep.clearTimeout(Fn(e),e._timerId),e._timerId=null),Ep.addClass(e.root,"slide-show")})),Hn(Fn(e),"onMouseleave",(function(t){e._timerId&&(Ep.clearTimeout(Fn(e),e._timerId),e._timerId=null),e._timerId=Ep.setTimeout(Fn(e),(function(){Ep.removeClass(e.root,"slide-show"),e.isStart&&e.onBarMouseUp(t),e._timerId=null}),100)})),Hn(Fn(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,i=n.muted,r=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(i,r)}})),e}return lo(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:Cm,class:"xg-volume-small"},volumeLarge:{icon:wm,class:"xg-volume"},volumeMuted:{icon:xm,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,i=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("muted_change",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==Ip.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Kp,this.onVolumeChange),this.once(zp,this.onVolumeChange),"Number"!==Ep.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(e/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(e,"px");var s=Math.max(Math.min(o/1e3,1),0),a={volume:{from:n.volume,to:s}};n.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:a}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(t,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===Ip.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(sv);function Em(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}function Sm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Pm=function(e){Mn(n,e);var t=Sm(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).rotateDeg=i.config.rotateDeg||0,i}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.rotate&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(dg,(function(){e.rotateDeg&&Ep.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var i=this.player,r=i.root,o=i.innerContainer,s=i.video,a=r.offsetWidth,c=o&&t?o.offsetHeight:r.offsetHeight,l="100%",u="100%",h=0,f=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(a,"px"),h=-(c-a)/2,f=-(a-c)/2);var d="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:d,webKitTransform:d,height:u,width:l},g=t?s:r,v=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){g.style[e]=p[e],v&&v.root&&(v.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,t),i.emit(gg,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:Em}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(sv);function Rm(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Om(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Im(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Am="picture-in-picture",Lm="inline",Dm="fullscreen",Mm=function(e){Mn(n,e);var t=Im(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{from:"pip",to:"normal"}),e.setAttr("data-state","normal")):4===e.player.video.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{from:"normal",to:"pip"}),e.setAttr("data-state","pip"))})),e}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(this.pMode=Lm,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(rg,(function(){e.config.showIcon&&(Ep.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:Rm,class:"xg-get-pip"},pipIconExit:{icon:Om,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;Ep.setTimeout(e,(function(){!n&&t.videoPlay()}),0),!n&&t.videoPlay(),e.setAttr("data-state","normal"),t.emit(pg,!1)},this.enterPIPCallback=function(n){t.emit(pg,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=t.video.webkitPresentationMode;e.pMode===Dm&&i!==Dm&&t.onFullscreenChange(null,!1),e.pMode=i,i===Am?e.enterPIPCallback(n):i===Lm&&e.leavePIPCallback(n)},t.video&&(t.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.video.poster="String"===Ep.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===Am}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return("Boolean"!==Ep.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===Ep.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===Ep.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}(sv);function Nm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Fm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Bm=function(e){Mn(n,e);var t=Fm(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"playNext",(function(e){var t=Fn(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,t.emit(yg,i.idx+1),i.nextHandler(i.config.urlList[i.idx],i.idx)):(i.nextHandler(),t.emit(yg))})),i.idx=-1,i}return lo(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Nm}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var e="mobile"===Ip.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.autoplay=!0,t.src=e)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(sv),jm={exports:{}};!function(e,t){e.exports=function e(t,n,i){var r,o,s=window,a="application/octet-stream",c=i||a,l=t,u=!n&&!i&&l,h=document.createElement("a"),f=function(e){return String(e)},d=s.Blob||s.MozBlob||s.WebKitBlob||f,p=n||"download";if(d=d.call?d.bind(s):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var g=new XMLHttpRequest;return g.open("GET",u,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,a)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==f))return navigator.msSaveBlob?navigator.msSaveBlob(k(l),p):b(l);c=(l=k(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var v=0,y=new Uint8Array(l.length),m=y.length;v<m;++v)y[v]=l.charCodeAt(v);l=new d([y],{type:c})}function k(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=i.charCodeAt(o);return new d([s],{type:n})}function b(e,t){if("download"in h)return h.href=e,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=l instanceof d?l:new d([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+c+";base64,"+s.btoa(r))}catch(e){return b("data:"+c+","+encodeURIComponent(r))}(o=new FileReader).onload=function(e){b(this.result)},o.readAsDataURL(r)}return!0}}(jm);var Hm=jm.exports;function Um(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}function Vm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Gm=function(e){Mn(n,e);var t=Vm(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"download",(function(e){if(!i.isLock){i.emitUserAction(e,"download");var t=i.getAbsoluteURL(i.player.src);Hm(t),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.download&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Um}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"downloadIcon"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(sv);function Wm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Ym=function(e){Mn(n,e);var t=Wm(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(dg,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(vg,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,s=i.quality||r.quality,a=i.type||r.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=e||r.width,n.canvas.height=t||r.height):n.createCanvans(e,t),n.canvasCtx.drawImage(o.video,0,0,e||r.width,t||r.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(dg,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(sv),Km=function(){function e(t){Ln(this,e),this.config=t.config,this.parent=t.root,this.root=Ep.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===Ip.device?"touchend":"click";this._delegates=sv.delegate.call(this,this.root,"li",n,this.onItemClick)}return lo(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){i.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var i=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(Ep.createDom("li","<span>".concat(e.showText,"</span>"),e,i))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&Ep.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Ep.addClass(t,"selected"),i&&Ep.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Ep.removeClass(this.root,"hide"),Ep.addClass(this.root,"active")}},{key:"hide",value:function(){Ep.removeClass(this.root,"active"),Ep.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}();function zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Xm="mobile"===Ip.device,qm=function(e){Mn(n,e);var t=zm(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).isActive=!1,i.curValue=null,i.curIndex=0,i}return lo(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;Xm&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&Ep.addClass(this.root,"portrait"),this.once(Wp,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),Xm&&this.on(Jp,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=Xm?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Ep.addClass(this.root,"show")}},{key:"hide",value:function(){Ep.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;!n&&(n=this.player.lang),t=!t||Ep.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]);try{return"object"===Nn(e[t])?e[t][n]||e[t].zh:e[t]}catch(e){return console.warn(e),""}}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Xm||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),r)return r.renderItemList(e),void this.changeCurrentText();var s={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new Km(s),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(sv);function $m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Zm=function(e){Mn(n,e);var t=$m(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).curTime=0,i.isPaused=!0,i}return lo(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;uo(jn(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(hg,(function(t){e.renderItemList(t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var i=null;t.map((function(e){e.definition===n&&(i=e)})),i||(i=t[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(e){var t=this,i=this.config.list,r=e&&e.definition?e.definition:this.config.defaultDefinition;e&&!Array.isArray(e)&&i.forEach((function(e){e.selected=!1}));var o=0,s=i.map((function(e,n){var i={url:e.url,definition:e.definition||"",showText:t.getTextByLang(e)||e.definition,selected:!1};return(e.selected||!Ep.isUndefined(e.definition)&&e.definition===r)&&(i.selected=!0,o=n),i}));uo(jn(n.prototype),"renderItemList",this).call(this,s,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){var n=this.player;n.switchURL?n.switchUrl(e.url):n.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){uo(jn(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to}),this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(qm);function Jm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Qm=function(e){Mn(n,e);var t=Jm(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).curRate=1,i}return lo(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;uo(jn(n.prototype),"afterCreate",this).call(this),this.on(Xp,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&uo(jn(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){uo(jn(n.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var i=0,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===t&&(o.selected=!0,i=r),o.showText=e.getTextByLang(n),o}));uo(jn(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"destroy",value:function(){uo(jn(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(qm);function ek(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function tk(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function nk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var ik=function(e){Mn(n,e);var t=nk(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(lg,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:ek,class:"xg-get-cssfull"},exitCssFullscreen:{icon:tk,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:nv.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(sv);function rk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var ok=function(e){Mn(n,e);var t=rk(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Wp,(function(){e.handleCanPlay()})),this.on(jp,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){Ep.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,i=t.error;if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(sv);function sk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var ak=function(e){Mn(n,e);var t=sk(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=i;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),Ep.addClass(this.root,"show"),"arrow"===n.mode&&Ep.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var s=n.interval||r;this.intervalId=setTimeout((function(){t.hide()}),s)}}}},{key:"hide",value:function(){Ep.removeClass(this.root,"show"),Ep.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(yv.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(sv),ck={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function lk(e){Object.keys(ck).map((function(t){void 0===e[t]&&(e[t]=ck[t])}))}var uk={initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this._ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(lk(e),this._ispots.push(e)),this._ispotsInit||!t)){var i=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(e.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=Ep.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},o);Object.keys(r).map((function(e){s.style[e]=r[e]})),n.outer&&n.outer.appendChild(s)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(e.id);if(i&&Object.keys(e).map((function(t){i[t]=e[t]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(e.id,'"]'));if(r){var o=this.calcuPosition(e.time,e.duration),s=e.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",e.text),r.setAttribute("data-time",e.time),o.isMini?Ep.addClass(r,"mini"):Ep.removeClass(r,"mini"),Object.keys(s).map((function(e){r.style[e]=s[e]})),t&&this.showDot(e.id)}}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<t.length;r++)t[r].id===e&&i.push(r);for(var o=i.length-1;o>=0;o--)if(t.splice(i[o],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(e,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this._ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>t.length)for(var o=r-1;o>t.length-1;o--)n.outer.removeChild(i[o]);t.map((function(t,n){n<r?(i[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};function hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var fk={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},dk=function(e){Mn(n,e);var t=hk(n);function n(e){var i;return Ln(this,n),Hn(Fn(i=t.call(this,e)),"onMousemove",(function(e){i.config.disable||(i._state.f||Ep.hasClass(e.target,"xg-spot-content"))&&(Ep.event(e),e.stopPropagation())})),Hn(Fn(i),"onMousedown",(function(e){i.config.disable||(i._state.f||Ep.hasClass(e.target,"xg-spot-content"))&&(Ep.event(e),e.stopPropagation())})),Hn(Fn(i),"onDotMouseLeave",(function(e){if(!i.config.disable){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null;var t=i.player.plugins.progress;t&&t.enableBlur(),i.show()}})),Hn(Fn(i),"onProgressMouseOver",(function(e,t){if(!i.config.disable&&Ep.hasClass(t.target,"xgplayer-spot")&&!i._curDot){i._curDot=t.target,i.focusDot(t.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i._state={now:0,f:!1},i}return lo(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),function(e){var t=e.config,n=e.player;Object.keys(uk).map((function(t){e[t]=uk[t].bind(e)}));var i=n.config.progressDot||t.ispots||[];e._ispots=i.map((function(e){return lk(e),e})),e._ispotsInit=!1,n.once(Yp,(function(){e.initDots()}))}(this),this.config.disable&&this.disable()}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(fk).map((function(n){e[fk[n]]=e[fk[n]].bind(e),t.addCallBack(n,e[fk[n]])})),"mobile"!==Ip.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){this.config.disable||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||(this.isDrag=!0,this.videoPreview&&Ep.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||(this.isDrag=!1,this.videoPreview&&Ep.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,t){if(!this.config.disable&&Ep.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n,i,r=this.root,o=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=r.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=e-c/2;u<0&&!a?(u=0,n=e-c/2,!this.thumbnail&&(i=e-c/2-l/2)):u>t-c&&!a?(n=u-(t-c),!this.thumbnail&&(i=u-(t-c)-l/2),u=t-c):(n=0,!this.thumbnail&&(i=-l/2)),void 0!==n&&(o.style.transform="translateX(".concat(n,"px)")),void 0!==i&&(s.style.transform="translateX(".concat(i,"px)")),r.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(e,t),s.now=n;var a=Ep.format(n);i&&i.target&&Ep.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,r.width,r.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==Ip.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i&&Object.keys(e).map((function(t){i.config[t]=e[t]})),i&&i.usable&&n.isShowThumbnail){Ep.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Ep.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else Ep.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return e+t>i.duration&&(t=i.duration-e),i.duration,i.duration,{left:e/i.duration*100,width:t/i.duration*100,isMini:t<o}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,i=t.time/this.player.duration*n;this.updatePosition(i,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),Ep.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(Ep.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ep.addClass(this.root,"no-timepoint"),e&&(Ep.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(Ep.addClass(this.root,"product"),this.tipText.textContent=e):(Ep.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){Ep.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",Ep.removeClass(this.find(".xg-spot-content"),"show-text"),Ep.removeClass(this.root,"product")}},{key:"hide",value:function(){Ep.addClass(this.root,"hide")}},{key:"show",value:function(){Ep.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(fk).map((function(n){t.removeCallBack(n,e[fk[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===Ip.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1}}}]),n}(sv);function pk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var gk=function(e){Mn(n,e);var t=pk(n);function n(e){var i;return Ln(this,n),(i=t.call(this,e)).ratio=1,i.interval=null,i.preloadMark={},i}return lo(n,[{key:"afterCreate",value:function(){this.usable&&this.initThumbnail()}},{key:"setConfig",value:function(e){var t=this;Object.keys(e).map((function(n){t.config[n]=e[n]})),this.initThumbnail()}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.pic_num,r=e.interval;this.ratio=t/n*100,this.interval=r||Math.round(this.player.duration/i),this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,i=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<i&&(Ep.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,s=i.col,a=i.width,c=i.height;this.interval=Math.round(this.player.duration/r);var l=Math.ceil(e/this.interval),u=(l=l>r?r:l)<o*s?0:Math.ceil(l/(o*s))-1,h=l-u*(s*o),f=h>0?Math.ceil(h/s)-1:0,d=h>0?h-f*s-1:0,p=0,g=0;if(t&&n){var v=t/n;v<a/c?g=(p=t)/(a/c):p=(g=n)*(a/c)}else g=(p=t||a)/(a/c);var y=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:f,colIndex:d,url:y,height:g,width:p,style:{backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(p*s,"px auto"),backgroundPosition:"-".concat(d*p,"px -").concat(f*g,"px"),width:"".concat(p,"px"),height:"".concat(g,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=this.config,s=o.pic_num,a=o.urls;if(!(s<=0)&&a&&0!==a.length){var c=this.getPosition(t,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(r).map((function(t){e.style[t]=r[t]}))}}},{key:"createThumbnail",value:function(e,t){var n=Ep.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),n}(sv);function vk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var yk=function(e){Mn(n,e);var t=vk(n);function n(){return Ln(this,n),t.apply(this,arguments)}return lo(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(sv);function mk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var kk="realtime",bk="firstframe";function wk(){try{return window.performance.now()}catch(e){return(new Date).getTime()}}function Ck(e){return"safari"!==Ip.browser||!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.src)}var xk=null,_k=function(e){Mn(n,e);var t=mk(n);function n(){var e;Ln(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hn(Fn(e=t.call.apply(t,[this].concat(r))),"onLoadedData",(function(){if(e.player){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10)}})),Hn(Fn(e),"start",(function(){var t=e.player.video,n=wk();Ck(t)&&e.canvasCtx&&(e.stop(),e.videoPI=t.videoHeight>0?parseInt(t.videoWidth/t.videoHeight*100,10):0,(e.config.mode===kk||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(t,e.videoPI),e.preTime=n),e.frameId=Ep.requestAnimationFrame(e.start))})),Hn(Fn(e),"stop",(function(){e.frameId&&(Ep.cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return lo(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,i=t.disable,r=t.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(rg,(function(){e.player&&e.init()})),this.once(zp,this.onLoadedData),r!==bk&&(this.on(Zp,(function(){e.stop()})),this.on(Mp,(function(){e.start()})),this.on(Bp,(function(){e.stop()}))),r===bk&&this.once(Vp,(function(){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10),t&&Ck(t)&&t.videoWidth&&e.update(t,e.videoPI)})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(e){Cp.logError("plugin:DynamicBg",e)}}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var t="String"===Ep.typeOf(e)?e:"String"===Ep.typeOf(e.poster)?e.poster:null;this.updateImg(t)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){if(t.canvas){t.canvas.height=r,t.canvas.width=i;var e=parseInt(i/r*100,10);t.update(o,e),o=null}},o.src=e}}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var n=this._pos,i=this.config,r=this.canvas.getBoundingClientRect(),o=r.width,s=r.height;if(o!==n.width||s!==n.height||n.pi!==t){var a=parseInt(o/s*100,10);n.pi=t,n.width=this.canvas.width=o,n.height=this.canvas.height=s;var c=s,l=o;a<t?l=parseInt(s*t/100,10):a>t&&(c=parseInt(100*o/t,10)),n.rwidth=l*i.multiple,n.rheight=c*i.multiple,n.x=(o-n.rwidth)/2,n.y=(s-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=i.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(e){Cp.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof xk?xk:xk=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===Ip.browser||"firefox"===Ip.browser)}}]),n}(sv),Tk={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}};function Ek(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=jn(e);if(t){var r=jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Bn(this,n)}}var Sk=function(e){Mn(n,e);var t=Ek(n);function n(){return Ln(this,n),t.apply(this,arguments)}return n}(Lv);return Hn(Sk,"defaultPreset",(function e(t,n){var i,r,o;Ln(this,e);var s=n&&"mobile"===n.isMobileSimulateMode,a=n.isLive,c=[].concat(a?[]:[lm,yk,dk,bm],[hm,mm,Pm,Bm,Zm,Qm,Gm,Ym,Tm,Mm]),l=[Hv,Vv,zv,em,qv,ok,ak,gk,uy];this.plugins=[Fv].concat(Lf(c),l);var u=s?"mobile":Ip.device;switch(u){case"pc":(i=this.plugins).push.apply(i,[Zy,py,ik]);break;case"mobile":(r=this.plugins).push.apply(r,[Ky]);break;default:(o=this.plugins).push.apply(o,[Zy,py,ik])}(Ip.os.isIpad||"pc"===u)&&this.plugins.push(_k),Ip.os.isIpad&&this.plugins.push(py),this.ignores=[],this.i18n=[Tk]})),Hn(Sk,"Util",Ep),Hn(Sk,"Sniffer",Ip),Hn(Sk,"Errors",Dp),Hn(Sk,"Events",Cg),Hn(Sk,"Plugin",sv),Hn(Sk,"BasePlugin",Xg),Hn(Sk,"I18N",Pv),Hn(Sk,"STATE_CLASS",yv),Sk}));
