define("indexnew:component/carsbox/carsbox.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/format.js","indexnew:component/carsbox/carsboxTemplate.js","indexnew:static/js/config.js","indexnew:static/js/events.js"],function(e,a,t,n,o,c,r,s,i){var p=o,l=c,d=r,h=s,m=i,x=p("#feed_news_wrap"),g={entryUrl:"api/carifshow",newCars:"api/carnewlaunch",carsRank:"api/carranklist",carsVideo:"api/carvideorecommend",carsBrand:"api/carvajraposition",newcarlaunch:"api/newcarlaunch"},f={$carsBox:null,inoutAnimateTime:600,inOutAnimateType:"easeInOutCirc",inParmas:{height:"415px",opacity:1,top:0,left:0},outParmas:{height:"36px",opacity:0,top:"415px",left:"93px"},showCarsBox:function(){try{m.on("hao123.feedtab.carsBox.open",this.carsBoxOpen,this),m.on("hao123.feedtab.carsBox.close",this.carsBoxClose,this)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/carsbox/carsbox.js",ln:53})}},carsBoxClose:function(){try{var e=this;this.$carsBox.animate(this.outParmas,this.inoutAnimateTime,this.inOutAnimateType,function(){try{e.$carsBox.remove(),h.set("carsBoxLock",!1)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:60})}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:61})}},getEnteryInfo:function(e){try{p.getJSON(g.entryUrl,{},function(a){try{a&&"1"===a.ifshow&&e&&e(a)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/carsbox/carsbox.js",ln:69})}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:70})}},carsBoxOpen:function(){try{var e=this;p.when(e.getNewcarlaunch(),e.getBrandData()).done(function(a,t){try{if(!a||!a[0]||!a[0].Result)return;var n=a[0].Result;if(!n.newcar_list||!n.sale_list||!n.heat_list)return;if(e.newCarsData=n.newcar_list,e.saleData=n.sale_list,e.heatData=n.heat_list,e.brandData=t[0]&&t[0].Result&&"[object Array]"===Object.prototype.toString.call(t[0].Result.hot_brands)&&t[0].Result.hot_brands.splice(0,10),!e.brandData)return;var o=e.renderNewCarsTpl(e.newCarsData),c=e.renderCarsRankTpl(e.saleData,"销量"),r=e.renderCarsRankTpl(e.heatData,"人气"),s=e.renderBrandTpl(e.brandData);if(!(o&&c&&r&&s))return;var i=o?l(d.newCarWarpTpl,{newCars:o}):"",h=c?l(d.rankWarpTpl,{rank:c,goOutValue:"销量",goOutUrl:"https://www.yoojia.com/rank/1-0-0-0-0-0.html?from_src=hao123_tab_sale"}):"",m=r?l(d.rankWarpTpl,{rank:r,goOutValue:"人气",goOutUrl:"https://www.yoojia.com/rank/2-0-0-0-0-0.html?from_src=hao123_tab_heat"}):"",g=s?l(d.carsBrandTpl,{carsBrand:s}):"",f=l(d.carsTpl,{newCarsWrapper:i,carsRankpWrapper:h,heatRankpWrapper:m,carsBrandWrapper:g});e.$carsBox&&e.$carsBox.remove(),x.prepend(f),e.$carsBox=p("#carsBox",x),e.carsBoxIn()}catch(u){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:u.message||u.description,path:"indexnew:component/carsbox/carsbox.js",ln:126})}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:127})}},carsBoxIn:function(){try{var e=this,a=p("#carsBoxClose");a.click(function(a){try{a&&a.preventDefault(),e.carsBoxClose()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:137})}}),this.$carsBox.animate(this.inParmas,this.inoutAnimateTime,this.inOutAnimateType,function(){try{h.set("carsBoxLock",!0)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/carsbox/carsbox.js",ln:141})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/carsbox/carsbox.js",ln:142})}},parseDate:function(e){try{if(null===e||"undefined"===e||""===e)return"";var a=new Date(e.replace(/-/g,"/"));return a instanceof Date?a.getMonth()+1+"":""}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/carsbox/carsbox.js",ln:153})}},renderNewCarsTpl:function(e){try{var a="",t=this;return p.each(e||[],function(e,n){try{n&&(a+=l(d.newCarsTpl,{url:"https://www.yoojia.com/s-"+n.series_id+"?from_src=hao123_tab_newcar",month:t.parseDate(n.publish_time),imgUrl:n.white_bg_img,price:n.price,name:n.series_name,tag:n.tag}))}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/carsbox/carsbox.js",ln:168})}}),a}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/carsbox/carsbox.js",ln:170})}},renderCarsRankTpl:function(e,a){try{var t="";return p.each(e||[],function(e,n){try{if(n){var o="https://youjia.cdn.bcebos.com/hao123/gold-medal.svg";switch(e){case 1:o="https://youjia.cdn.bcebos.com/hao123/silver-medal.svg";break;case 2:o="https://youjia.cdn.bcebos.com/hao123/bronze-medal.svg";break;default:o="https://youjia.cdn.bcebos.com/hao123/gold-medal.svg"}var c="销量"===a?"sale":"heat";t+=l(d.rankTpl,{url:"https://www.yoojia.com/s-"+n.series_id+"?from_src=hao123_tab_"+c,imgUrl:n.white_bg_img,price:n.price,name:n.series_name,subTitle:n.text.sub_title,title:n.text.title,logTitle:a,medalUrl:o})}}catch(r){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:r.message||r.description,path:"indexnew:component/carsbox/carsbox.js",ln:199})}}),t}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/carsbox/carsbox.js",ln:201})}},renderBrandTpl:function(e){try{var a={title:"更多品牌",code:0,logo:"https://youjia.cdn.bcebos.com/hao123-more-brand.png"};e.push(a);var t="";return p.each(e||[],function(e,a){try{a&&(t+=l(d.brandTpl,{title:a.title,url:"https://www.yoojia.com/car/"+a.code+"-0-0-0-0-0-0-0-0-0-0-0-0-0-4-0-0.html?from_src=hao123_tab_brand",logo:a.logo}))}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/carsbox/carsbox.js",ln:218})}}),t}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/carsbox/carsbox.js",ln:220})}},getNewcarlaunch:function(){try{var e={newcar_num:3,heat_num:3,sale_num:3,token:"1_526c1239fc0b0512a2bd13ac6b962f5f"};return p.getJSON(g.newcarlaunch,e)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:230})}},getBrandData:function(){try{var e={token:"1_526c1239fc0b0512a2bd13ac6b962f5f"};return p.getJSON(g.carsBrand,e)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/carsbox/carsbox.js",ln:237})}}};a.exports=f});