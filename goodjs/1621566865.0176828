/*! For license information please see 0.79a4.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0031":function(e,t,r){var i=r("967c").default,n=function(e,t){n.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(n,i,{name:"CommercialModel",_overlayTypeKey:"overlayType",_overlayQueryParamsKey:"overlayQueryParams",_performerNameKey:"p_id",_promoCampaignNameKey:"campaign",getOverlayType:function(){return this.attributes[this._overlayTypeKey]},getOverlayQueryParams:function(){return this.attributes[this._overlayQueryParamsKey]||{}},getOverlayQueryParameter:function(e){return this.getOverlayQueryParams()[e]},getPromoCampaignName:function(){return this.attributes[this._promoCampaignNameKey]||null}})},"0619":function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("7ab0"),a=function(e){a.superclass.constructor.call(this,e)};e.exports=Ext.extend(a,i.Plugin,{name:n.AutoShowMore.NAME,pageSelector:".page",maxAutoLoadNum:3,offset:100,clientHeight:0,_showMoreEnabled:!1,_tempScrollTop:0,_autoLoadNum:0,direction:n.AutoShowMore.DIRECTION_DOWN,forceShowMore:!1,init:function(e){this.selectElements(),a.superclass.init.call(this,e),this.host.addEvents(n.AutoShowMore.EVENT_SHOW_MORE,n.AutoShowMore.EVENT_NO_MORE_AUTO_SHOW_MORE),this._getClientHeight(),this.reset()},selectElements:function(){return!1},getScrollContainerEl:function(){return this.view.element},reset:function(){this.view.element.removeClass(n.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE),this._autoLoadNum=0,this._tempScrollTop=0,this._showMoreEnabled=!0},_checkTriggerPoint:function(){return this.direction===n.AutoShowMore.DIRECTION_DOWN?this.getScrollContainerEl().dom.getBoundingClientRect().bottom-this.clientHeight<=this.offset:this.getScrollContainerEl().dom.getBoundingClientRect().top>=-this.offset},_isShowMoreNeeded:function(){var e=parseInt(i.getMeta(n.AutoShowMore.META_IS_SINGLE_PAGE),10),t=this.forceShowMore||0===e;return this._showMoreEnabled&&t&&this.isScrollDirectionCorrect()&&this._checkTriggerPoint()},isScrollDirectionCorrect:function(){return this.direction===n.AutoShowMore.DIRECTION_DOWN?this._currentScrollTop>=this._tempScrollTop:this._currentScrollTop<=this._tempScrollTop},showMore:function(){this._autoLoadNum<this.maxAutoLoadNum?(this._autoLoadNum++,this.host.fireEvent(n.AutoShowMore.EVENT_SHOW_MORE,this,this.host)):(this.host.fireEvent(n.AutoShowMore.EVENT_NO_MORE_AUTO_SHOW_MORE,this,this.host),this.view.element.addClass(n.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE))},getScrollTop:function(){return o.getScrollTop()},setShowMoreEnabled:function(e){this._showMoreEnabled=e},_onScroll:function(){this._currentScrollTop=this.getScrollTop(),this._isShowMoreNeeded()&&this.showMore(),this._tempScrollTop=this._currentScrollTop},_onLoadingStarted:function(){this._showMoreEnabled=!1},_onLoadingFinished:function(e){this._showMoreEnabled=!(e&&e.isLastPage)},_onShowMoreButtonClick:function(){this.reset()},_onReset:function(){this.reset()},_getClientHeight:function(){this.clientHeight=document.documentElement.clientHeight},onWindowResize:function(){return this._getClientHeight()},getScrollEl:function(){return Ext.isIE8||Ext.isIE7?Ext.fly(window):Ext.fly(document)},_onResetElements:function(){this.reset(),this.unbind(),this.selectElements(),this.bind()},_bindElements:function(){i.on(Ext.fly(window),"resize",this.onWindowResize,this)},bind:function(){i.on([{element:this.getScrollEl(),event:"scroll",handler:this._onScroll},{element:this.model,event:this.resetEvent,handler:this._onReset},{element:this.model,event:this.loadingStartedEvent,handler:this._onLoadingStarted},{element:this.model,event:this.loadingFinishedEvent,handler:this._onLoadingFinished},{element:this.view,event:this.showMoreButtonClickEvent,handler:this._onShowMoreButtonClick}],this),this.resetElementsEvent&&i.on(this.view,this.resetElementsEvent,this._onResetElements,this),this._bindElements(),a.superclass.bind.call(this)}})},"0c3f":function(e,t,r){var i,n,o,a,s;i=r("5528"),n=r("b0e2").utf8,o=r("c079"),a=r("b0e2").bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):n.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=i.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,h=271733878,f=0;f<r.length;f++)r[f]=16711935&(r[f]<<8|r[f]>>>24)|4278255360&(r[f]<<24|r[f]>>>8);r[l>>>5]|=128<<l%32,r[14+(l+64>>>9<<4)]=l;var p=s._ff,m=s._gg,g=s._hh,P=s._ii;for(f=0;f<r.length;f+=16){var _=c,E=u,y=d,v=h;c=p(c,u,d,h,r[f+0],7,-680876936),h=p(h,c,u,d,r[f+1],12,-389564586),d=p(d,h,c,u,r[f+2],17,606105819),u=p(u,d,h,c,r[f+3],22,-1044525330),c=p(c,u,d,h,r[f+4],7,-176418897),h=p(h,c,u,d,r[f+5],12,1200080426),d=p(d,h,c,u,r[f+6],17,-1473231341),u=p(u,d,h,c,r[f+7],22,-45705983),c=p(c,u,d,h,r[f+8],7,1770035416),h=p(h,c,u,d,r[f+9],12,-1958414417),d=p(d,h,c,u,r[f+10],17,-42063),u=p(u,d,h,c,r[f+11],22,-1990404162),c=p(c,u,d,h,r[f+12],7,1804603682),h=p(h,c,u,d,r[f+13],12,-40341101),d=p(d,h,c,u,r[f+14],17,-1502002290),c=m(c,u=p(u,d,h,c,r[f+15],22,1236535329),d,h,r[f+1],5,-165796510),h=m(h,c,u,d,r[f+6],9,-1069501632),d=m(d,h,c,u,r[f+11],14,643717713),u=m(u,d,h,c,r[f+0],20,-373897302),c=m(c,u,d,h,r[f+5],5,-701558691),h=m(h,c,u,d,r[f+10],9,38016083),d=m(d,h,c,u,r[f+15],14,-660478335),u=m(u,d,h,c,r[f+4],20,-405537848),c=m(c,u,d,h,r[f+9],5,568446438),h=m(h,c,u,d,r[f+14],9,-1019803690),d=m(d,h,c,u,r[f+3],14,-187363961),u=m(u,d,h,c,r[f+8],20,1163531501),c=m(c,u,d,h,r[f+13],5,-1444681467),h=m(h,c,u,d,r[f+2],9,-51403784),d=m(d,h,c,u,r[f+7],14,1735328473),c=g(c,u=m(u,d,h,c,r[f+12],20,-1926607734),d,h,r[f+5],4,-378558),h=g(h,c,u,d,r[f+8],11,-2022574463),d=g(d,h,c,u,r[f+11],16,1839030562),u=g(u,d,h,c,r[f+14],23,-35309556),c=g(c,u,d,h,r[f+1],4,-1530992060),h=g(h,c,u,d,r[f+4],11,1272893353),d=g(d,h,c,u,r[f+7],16,-155497632),u=g(u,d,h,c,r[f+10],23,-1094730640),c=g(c,u,d,h,r[f+13],4,681279174),h=g(h,c,u,d,r[f+0],11,-358537222),d=g(d,h,c,u,r[f+3],16,-722521979),u=g(u,d,h,c,r[f+6],23,76029189),c=g(c,u,d,h,r[f+9],4,-640364487),h=g(h,c,u,d,r[f+12],11,-421815835),d=g(d,h,c,u,r[f+15],16,530742520),c=P(c,u=g(u,d,h,c,r[f+2],23,-995338651),d,h,r[f+0],6,-198630844),h=P(h,c,u,d,r[f+7],10,1126891415),d=P(d,h,c,u,r[f+14],15,-1416354905),u=P(u,d,h,c,r[f+5],21,-57434055),c=P(c,u,d,h,r[f+12],6,1700485571),h=P(h,c,u,d,r[f+3],10,-1894986606),d=P(d,h,c,u,r[f+10],15,-1051523),u=P(u,d,h,c,r[f+1],21,-2054922799),c=P(c,u,d,h,r[f+8],6,1873313359),h=P(h,c,u,d,r[f+15],10,-30611744),d=P(d,h,c,u,r[f+6],15,-1560198380),u=P(u,d,h,c,r[f+13],21,1309151649),c=P(c,u,d,h,r[f+4],6,-145523070),h=P(h,c,u,d,r[f+11],10,-1120210379),d=P(d,h,c,u,r[f+2],15,718787259),u=P(u,d,h,c,r[f+9],21,-343485551),c=c+_>>>0,u=u+E>>>0,d=d+y>>>0,h=h+v>>>0}return i.endian([c,u,d,h])})._ff=function(e,t,r,i,n,o,a){var s=e+(t&r|~t&i)+(n>>>0)+a;return(s<<o|s>>>32-o)+t},s._gg=function(e,t,r,i,n,o,a){var s=e+(t&i|r&~i)+(n>>>0)+a;return(s<<o|s>>>32-o)+t},s._hh=function(e,t,r,i,n,o,a){var s=e+(t^r^i)+(n>>>0)+a;return(s<<o|s>>>32-o)+t},s._ii=function(e,t,r,i,n,o,a){var s=e+(r^(t|~i))+(n>>>0)+a;return(s<<o|s>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=i.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):i.bytesToHex(r)}},"1e4a":function(e,t,r){"use strict";r.r(t);var i=r("44ad"),n=r.n(i),o=r("7ab0"),a=r.n(o),s=r("d869"),l=r.n(s),c=r("0592"),u=r("d59f"),d=function e(t,r){e.superclass.constructor.call(this,t,r)};Ext.extend(d,n.a.Page,{name:"listPageAbstract",layout:null,id:"",memberAppletContainerIsEmbedded:!1,embedListPagePlayerEmbedded:!1,freeChatId:"freechat",favoriteBtnId:"favorite_button",listpageId:"listpage",listpageContainerId:"listpage_container",chatAppletId:"chatapplet",dataAttributeForListPagePlayer:!1,listPageComponentName:u.default,forceDelayedLPPInit:!1,animateImageOnLoad:!1,isRandomPlayerEnabled:!1,isPerformerSwapEnabled:!1,freeChatContainerId:"freechat_container",freeChatOverlayName:"FreeChat",memberChatPerformerStatus:"memberChat",freeChatPerformerStatus:"freeChat",offlinePerformerStatus:"offline",paymentModalComponent:"PaymentModalComponent",overlayContainerId:"overlay_container",overlayId:"overlay",_ajaxListPageRefreshCounter:0,_showMoreJsonQueryParams:{},_onLogoClickRefresh:void 0,init:function(e,t){var i=this;d.superclass.init.call(this,e,t),Promise.resolve().then(r.bind(null,"ddd5")).then((function(e){e.default.getComponent().then((function(e){i._chatComponent=e})).catch(console.error)})),this.addEvents(l.a.ListPageAbstract.EVENT_SUCCESS_REFRESH_LISTPAGE,l.a.ListPageAbstract.EVENT_SHOW_ONLINE_FAVORITES_COUNT),n.a.addEvents(l.a.ListPageAbstract.GLOBALEVENT_DO_INIT_LISTPAGE,l.a.ListPageAbstract.GLOBALEVENT_REFRESH_LISTPAGE),this.isLogoutPopupNeeded()&&c.default.navigate("loggedout",{trigger:!0,replace:!1,preventNavigateBack:!0}),Ext.fly(this.listpageContainerId)&&this.initListPage(!1),this.searchAndDestroyToolbar()},isLogoutPopupNeeded:function(){return n.a.Config.get("isMobileLogoutOverlayEnabled",!0)&&1===parseInt(n.a.Cookie.get("logout"),10)},searchAndDestroyToolbar:function(){Ext.select(".apn-toolbar").item(0)&&(Ext.select("html").item(0).addClass("ask_killer"),Ext.select(".apn-toolbar").item(0).remove())},initListPage:function(e){!Ext.fly(this.listpageId)||this.listPage instanceof this.listPageComponentName?e&&(this.listPage.unbind(),delete this.listPage,this.initListPage(!1)):this.listPage=new this.listPageComponentName(this.listpageId,{contentId:"listpage_",showMoreBtnId:"show_more_btn",isRandomPlayerEnabled:this.isRandomPlayerEnabled})},onAppletTypeWillChange:function(){this.modelContentComponent&&(this.modelContentComponent.destroy(),delete this.modelContentComponent)},onStatusChange:function(e){var t=e.header;n.a.fireEvent(l.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,{statuses:t})},onVideocallChange:function(e){n.a.fireEvent(l.a.BasicController.GLOBALEVENT_GLOBAL_VIDEOCALL_CHANGE,e)},onVipshowChange:function(e){n.a.fireEvent(l.a.BasicController.GLOBALEVENT_GLOBAL_VIPSHOW_STATUS_CHANGE,e)},onModalClosed:function(e){e.scope.name===l.a.LoggedOutModalComponent.NAME&&setTimeout(function(){this.showFlashWarningPopup()}.bind(this),0)},onSetScroll:function(e){a.a.disableScroll(e.disable)},reloadPage:function(){window.location.reload()},bind:function(){d.superclass.bind.call(this),n.a.on([{element:n.a.Broadcaster,event:l.a.BasicLayout.GLOBALEVENT_SET_SCROLL,handler:this.onSetScroll},{element:n.a.Broadcaster,event:l.a.JawsNotificationsComponent.GLOBALEVENT_PERFORMER_STATUS_CHANGE,handler:this.onStatusChange},{element:n.a.Broadcaster,event:l.a.JawsNotificationsComponent.GLOBALEVENT_PERFORMER_VIDEOCALL_CHANGE,handler:this.onVideocallChange},{element:n.a.Broadcaster,event:l.a.JawsNotificationsComponent.GLOBALEVENT_VIPSHOW_CHANGE,handler:this.onVipshowChange},{element:n.a.Broadcaster,event:l.a.FlashChatPageControllerAbstract.GLOBALEVENT_APPLET_TYPE_WILL_CHANGE,handler:this.onAppletTypeWillChange}],this)}}),t.default=d},2809:function(e,t,r){var i=r("44ad"),n=r("d869"),o=function(e,t){o.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(o,i.Component,{name:"PerformerSwapModel",swapRouteHandler:"",ajaxQueue:null,_swappedPerformers:[],init:function(e,t){o.superclass.init.call(this,e,t)},_onChangeListPageId:function(){this._swappedPerformers=[]},setSwappedPerformers:function(e){this._swappedPerformers=i.union(this._swappedPerformers,e)},sendRequest:function(e,t){t=t||{};var r=i.getMeta("listPageId"),o=i.getUrl(this.swapRouteHandler,{listPageId:r},{});this.ajaxQueue.request({type:"json",url:o,params:{performers:Ext.encode(e),swapped:Ext.encode(this._swappedPerformers),applyAdditionalFilters:t.applyAdditionalFilters?1:0},method:"POST",scope:this,success:function(e){if(e.json.data.listPage.id!==r.toString())return window.location.reload();this.fireEvent(n.PerformerSwapModel.EVENT_REQUEST_SUCCESS,{response:e,options:t})},error:function(e){this.fireEvent(n.PerformerSwapModel.EVENT_REQUEST_ERROR,{response:e,options:t})}})},bind:function(){o.superclass.bind.call(this),i.on(i.Broadcaster,n.ListPageModelAbstract.GLOBALEVENT_CHANGE_LIST_PAGE_ID,this._onChangeListPageId,this)}})},"3b17":function(e,t,r){var i=r("7b09"),n=function(e){n.superclass.constructor.call(this,e)};e.exports=Ext.extend(n,i,{name:"ImageWithoutAnchorTemplate",commercialImageUrl:"listpage",commercialImageId:"commercial",tpl:'<div id="container_{id}" class="{containerClass} commercial_container"><img src="{src}" alt /></div>',_setTemplateParams:function(e){return{containerClass:e.size,id:e.id,src:e.commercialImageUrl}}})},"4daa":function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("7ab0"),a=r("a9a1").store,s=r("870e").swapPerformers,l=r("9b2f").default,c=function(e){c.superclass.constructor.call(this,e)};e.exports=Ext.extend(c,i.Plugin,{name:n.PerformerSwap.NAME,animDuration:200,animDelay:200,template:null,perfImgSel:"img",badImgWidth:2,badImgHeight:2,_prevHideAnimationEndTime:0,init:function(e){c.superclass.init.call(this,e),this.host.addEvents(n.PerformerSwap.EVENT_SWAPPED_PERFORMERS,n.PerformerSwap.DESTROY_PERFORMER)},_onPerformerSwap:function(e){var t=i.map(e,(function(e,t){var r,n=this.view.model.createPerformerModelFromData(e),o=this.view.createPerformerView(n).setZeroOpacity(),a={oldPerformerId:t,newPerformerView:o},s=n.getProfilePictureUrl();return i.isUndefined(o.element)?null:(s?((r=new Image).onload=i.bind(this._onPerformerImageLoaded,this,a,r),r.src=s):this._hideAndReplaceBoxesAnimated(a),t)}),this);t.length&&this.host.fireEvent(n.PerformerSwap.EVENT_SWAPPED_PERFORMERS,t)},_onPerformerSwapWithLastPerformer:function(e){var t={oldPerformerId:e.swapPerformerID,newPerformerView:e.lastPerformerView,callback:function(){this.host.fireEvent(n.PerformerSwap.DESTROY_PERFORMER,e.swapPerformerID)}};this._hideAndReplaceBoxesAnimated(t)},_onPerformerImageLoaded:function(e,t){this._isGoodImgDimensions(t)&&this._hideAndReplaceBoxesAnimated(e)},_hideAndReplaceBoxesAnimated:function(e){if(i.hasPath(e,"oldPerformerId")&&i.hasPath(e,"newPerformerView")){var t=this.view.getPerformerViewById(e.oldPerformerId);if(!i.isDefined(t))return;var r=this;l({targets:t.element.dom,opacity:0,delay:this._setHideDelay(),duration:this.animDuration,easing:"linear",complete:function(i){t.setZeroOpacity().replaceWith(e.newPerformerView),r._showBoxAnimated(e.newPerformerView),o.updateLazy(),"function"==typeof e.callback&&e.callback.call(r),r.updateStore(e)}})}},updateStore:function(e){var t=parseInt(e.oldPerformerId,10),r=e.newPerformerView.model.attributes;a.dispatch(s({oldPerformerId:t,newPerformerData:r}))},_showBoxAnimated:function(e){e.element&&l({targets:e.element.dom,opacity:1,duration:this.animDuration,easing:"linear"})},_setHideDelay:function(){var e=(new Date).getTime(),t=e-this._prevHideAnimationEndTime,r=this.animDelay;return t>=this.animDelay?(this._prevHideAnimationEndTime=e,r):(this._prevHideAnimationEndTime+=this.animDelay,Math.abs(t)+r)},_isGoodImgDimensions:function(e){return!(e.width===this.badImgWidth&&e.height===this.badImgHeight)},bind:function(){c.superclass.bind.call(this),this.host.on(n.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,this._onPerformerSwap,this),this.host.on(n.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapWithLastPerformer,this)},unbind:function(){c.superclass.unbind.call(this),this.host.un(n.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,this._onPerformerSwap,this),this.host.on(n.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapWithLastPerformer,this)}})},5528:function(e,t){var r,i;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,i=0;r<e.length;r++,i+=8)t[i>>>5]|=e[r]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],i=0;i<e.length;i+=3)for(var n=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?t.push(r.charAt(n>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],i=0,n=0;i<e.length;n=++i%4)0!=n&&t.push((r.indexOf(e.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|r.indexOf(e.charAt(i))>>>6-2*n);return t}},e.exports=i},"68b3":function(e,t,r){var i=r("44ad"),n=r("d869"),o=function(e){o.superclass.constructor.call(this,e)};e.exports=Ext.extend(o,i.View,{name:"ListPageItemViewAbstract",itemImageSel:"img",visibleListPageSel:"section.page.showless.visible",visibleListPageEl:null,init:function(){this.addEvents(n.ListPageItemViewAbstract.EVENT_VIEW_REPLACED),this.addEvents(n.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE),o.superclass.init.call(this),this.visibleListPageEl=Ext.select(this.visibleListPageSel).item(0),this.element&&(this._selectElements(),this._bindElements())},_selectElements:function(){},setCurrentOrder:function(e){this.element&&this.element.data("order",e)},setZeroOpacity:function(){return this.element&&this.element.setStyle("opacity",0),this},_checkInVisibleListPage:function(){this.element.dom.parentNode||this.visibleListPageEl.appendChild(this.element)},replaceWith:function(e){return this.element&&(this.fireEvent(n.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE,this),this._checkInVisibleListPage(),this.element.replaceWith(e.element),delete this.element,this.fireEvent(n.ListPageItemViewAbstract.EVENT_VIEW_REPLACED,{oldPerformerView:this,newPerformerView:e})),this},getItemImage:function(){return this._itemImage||(this._itemImage=this.select(this.itemImageSel).item(0)),this._itemImage},_bindElements:function(){},_unBindElements:function(){},bind:function(){o.superclass.bind.call(this)},unbind:function(){o.superclass.unbind.call(this),this._unBindElements()}})},"768e":function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("7ab0"),a=r("1cab").default,s=r("38863").setSurveyPostponed,l=r("38863").resetPostponedSurvey,c=function(e,t){c.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(c,i.Controller,{name:"ListPageControllerAbstract",performersConfig:"listPagePerformers",newSorterId:"order_list",newSorterDataAttribute:"data-action",newSorterDataAction:"my_rating",_newSorterEl:void 0,_newSorterObject:{tag:"li",cls:"menu_item",children:[{tag:"a",cls:"item_text ordering filter_item",id:"order_my_rating",html:i.translate("My Rating")}]},init:function(e,t){c.superclass.init.call(this,e,t),this.getPerformerDataObject()&&this.ListPageModel.setPerformerDetailsOnInit(this.getPerformerDataObject()),this._newSorterEl=Ext.get(this.newSorterId),this.addEvents(n.ListPageModelAbstract.EVENT_DESTROY_ALL,n.ListPageControllerAbstract.EVENT_VISIBLE_FREE_MODELS_READY,n.ListPageControllerAbstract.EVENT_VISIBLE_MODELS_READY,n.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,n.ListPageControllerAbstract.EVENT_VIEW_MOUSEOVER,n.ListPageControllerAbstract.EVENT_VIEW_MOUSEOUT,n.ListPageControllerAbstract.GET_ALL_PERFORMERS_READY)},getPerformerDataObject:function(){return i.Config.get(this.performersConfig)},getVisibleFreeModels:function(){this.ListPageModel.getVisibleFreeModels()},getVisiblePerformers:function(){this.ListPageModel.getVisibleModels()},getAllPerformers:function(){this.ListPageModel.getAllPerformers()},onVisibleFreeModelsReady:function(e){var t=i.map(e,(function(e){return this.ListPageView.getPerformerViewById(e)}),this);this.fireEvent(n.ListPageControllerAbstract.EVENT_VISIBLE_FREE_MODELS_READY,t)},onVisibleModelsReady:function(e){var t=i.map(e,(function(e){return this.ListPageView.getPerformerViewById(e.getId())}),this);this.fireEvent(n.ListPageControllerAbstract.EVENT_VISIBLE_MODELS_READY,t)},onGetAllPerformersReady:function(e){var t=i.map(e,(function(e){return this.ListPageView.getPerformerViewById(e.getId())}),this);this.fireEvent(n.ListPageControllerAbstract.GET_ALL_PERFORMERS_READY,t)},onPerformerViewMouseOver:function(e){this.fireEvent(n.ListPageControllerAbstract.EVENT_VIEW_MOUSEOVER,e)},onPerformerViewMouseOut:function(e){this.fireEvent(n.ListPageControllerAbstract.EVENT_VIEW_MOUSEOUT,e)},onShowMore:function(){this.ListPageModel.getNextPage()},onStatusChange:function(e){this.ListPageModel.setNewStatuses(e.statuses)},onVideocallChange:function(e){this.ListPageModel.setVideocallStatus(e)},onVipShowStatusChange:function(e){this.ListPageModel.setVipShowStatus(e)},onRefreshListPage:function(e){this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer(),o.setCursor("wait"),this.ListPageModel.setShowMoreJsonQueryParams(e).refreshListPage()},onSearchResults:function(e){i.isObject(e)&&(this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer(),this.ListPageModel.refreshListPageFromSearch(e))},onCleanListPage:function(){this.ListPageModel.cleanPage()},onPerformerSwap:function(e){this.fireEvent(n.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,e)},onPerformerSwapLast:function(e){this.fireEvent(n.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},onAjaxSearchPageOn:function(){i.isDefined(this.PerformerSwap)&&this.PerformerSwap.disableSwapping(),i.setMeta("isSearchPage",1)},onAjaxSearchPageOff:function(){i.setMeta("isSearchPage",0),i.isDefined(this.PerformerSwap)&&this.PerformerSwap.enableSwapping()},onFirstBillComplete:function(){},onLuckyWheelSpun:function(){},onCommercialCountdownEnd:function(){},onAppletQuickBuySuccess:function(){},onLoggedIn:function(){a.setUserAction(a.CONST.ACTION.LOGIN),this._setNewSorter(),l()},onSignUpSuccess:function(){a.setUserAction(a.CONST.ACTION.SIGNUP),this._setNewSorter(),s()},onQuickBuySuccess:function(){},onListPageCommercialABTest:function(){},_setNewSorter:function(){this._newSorterEl&&Ext.DomHelper.append(this._newSorterEl,this._newSorterObject).setAttribute(this.newSorterDataAttribute,this.newSorterDataAction)},onShowMoreError:function(){this.ListPageView.showMoreError()},onDestroyAll:function(){this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer()},handleRefreshListpageFromData:function(e){this.ListPageModel.setPerformerDetailsOnInit(e)},bind:function(){c.superclass.bind.call(this),i.on([{element:this,event:n.AutoShowMore.EVENT_SHOW_MORE,handler:this.onShowMore},{element:i.Broadcaster,event:"GLOBALEVENT:refresh-listpage-from-data",handler:this.handleRefreshListpageFromData}],this)}})},"7b09":function(e,t,r){r("44ad"),r("d869");e.exports=Ext.extend((function(e){Ext.apply(this,e),this.init()}),Ext.util.Observable,{name:"Template",tpl:"",validateData:!0,_tpl:void 0,init:function(){},getTemplate:function(){return this._tpl},_setTemplateParams:function(e){return e&&e!=={}&&null!==e?{id:e.id}:""},render:function(e){return this._tpl=new Ext.Template(this.tpl),this.validateData&&this._validateData(e),this._tpl.applyTemplate(this._setTemplateParams(e))},_validateData:function(e){if(void 0===e||e==={}||null===e)throw"Invalid data for template applying: "+e}})},"825c":function(e,t,r){var i=r("44ad"),n=function(e,t){n.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(n,i.View,{name:"ListPagePlayerView",_defaultZIndex:110,init:function(){n.superclass.init.call(this)},setElements:function(){this.listPagePlayerDivEl=Ext.get("listpage_player")},getPerformerDetails:function(e){this.model.getPerformerDetails(e)}})},"8f76":function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("e5b0").default,a=function(e,t){a.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(a,i.Model,{name:"StreamPlayerModel",init:function(){this.addEvents(n.StreamPlayerModel.EVENT_PERFORMER_DETAILS_SUCCESS,n.StreamPlayerModel.EVENT_PERFORMER_DETAILS_ERROR),a.superclass.init.call(this)},getPerformerDetails:function(e){if(e.performerId){var t={appletType:e.appletType,videoPreviewSize:e.videoPreviewSize,isOverlayChat:!1};o.get(e.performerId,t).then(i.bind(this._getPerformerDetailsSuccess,this)).catch(i.bind(this._getPerformerDetailsError,this))}},_getPerformerDetailsSuccess:function(e){try{this.fireEvent(n.StreamPlayerModel.EVENT_PERFORMER_DETAILS_SUCCESS,this.filterData(e))}catch(e){console.log("error: ",e)}},_getPerformerDetailsError:function(e){this.fireEvent(n.StreamPlayerModel.EVENT_PERFORMER_DETAILS_ERROR,this.filterData(e))},filterData:function(e){var t=Ext.decode(e.responseText).data||{},r={performer_id:t.performer_id,sb_hash:t.sb_hash,sb_ip:t.sb_ip,proxy_ip:t.proxy_ip,supercategory:t.category,has_channel:t.has_channel,ishostedchannel:t.ishostedchannel,channel_type:t.channel_type,pid:t.p_id,video:t.video};return Ext.encode(Object.assign(r,e.json.data))}})},9381:function(e,t,r){"use strict";r.r(t),r.d(t,"initCountdown",(function(){return o}));var i=r("44ad"),n=i.Config.get("clientServerTimeDifference",0),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=new Date(e.getAttribute("data-count-to")).getTime()||(new Date).getTime(),i=e.getAttribute("data-delimiter")||":";e.innerHTML=s(r,i,t);var n=setInterval((function(){var o=s(r,i,t);o?e.innerHTML=o:clearInterval(n)}),1e3);return function(){return clearInterval(n)}},a=function(e,t){return e.map((function(e){return e.toString().padStart(2,"0")})).join(t)},s=function(e,t,r){var i=new Date;i.setTime(i.getTime()+n);var o=e-i;if(o<=0)return r(),a([0,0,0],t);var s=Math.floor(o/36e5),l=Math.floor(o%36e5/6e4),c=Math.floor(o%6e4/1e3);return a([s,l,c],t)}},"950c":function(e,t,r){"use strict";var i=r("44ad"),n=r.n(i),o=r("c25d"),a=r.n(o),s=r("d869"),l=r.n(s),c=r("7ab0"),u=r.n(c),d=r("0592"),h=r("ffe4"),f=r("1cab"),p=r("9381"),m=r("7b09");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,r,i,o=y(a);function a(){return P(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"name",get:function(){return"FavoritesBannerTemplate"}},{key:"tpl",get:function(){var e=n.a.getUrl("Index/IndexCategory",{category:"girl"});return'\n\t\t\t<article id="{id}" class="commercial is-favorites-banner block_loaded">\n\t\t\t\t<div class="banner-wrapper">\n\t\t\t\t\t<a href="'.concat(e,'">\n\t\t\t\t\t\t<h1 class="banner-title">').concat(n.a.translate("Favorites are offline?"),'</h1>\n\t\t\t\t\t\t<div class="banner-button first_button"><span>').concat(n.a.translate("Show Online Models"),"</span></div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t")}}])&&_(t.prototype,r),i&&_(t,i),a}(r.n(m).a),S=r("68b3"),C=r.n(S);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function e(t){e.superclass.constructor.call(this,t)};Ext.extend(V,C.a,{name:"CommercialItemView",_attributeOverlayType:"data-overlay-type",_attributeOverlayQueryParams:"data-overlay-query-params",_templates:n.a.object([[l.a.CommercialItemView.BLOCK_TYPE.FAVORITES_BANNER,w]]),_countdownIntervalUnbinder:function(){},init:function(){V.superclass.init.call(this),this.model.attributes.overlayType=this.element.dom.getAttribute(this._attributeOverlayType),this.model.attributes.overlayQueryParams=Ext.util.JSON.decode(this.element.dom.getAttribute(this._attributeOverlayQueryParams));var e=this.element.dom.querySelector(".countdown");e&&(this._countdownIntervalUnbinder=Object(p.initCountdown)(e,n.a.bind(this._onCountdownEnd,this)))},_getTemplate:function(){return this._templates[this.model.getBlockType()]},render:function(){!1===this.model.attributes.preRendered?this.element=this._createElementFromTemplateFromModel(this._getTemplate()):this.element=u.a.createElementFromHtmlString(this.model.getContent()),V.superclass.render.call(this)},_bindElements:function(){this.element&&this.element.on("click",this._onElementClick,this)},_unBindElements:function(){this.element&&this.element.un("click",this._onElementClick,this),this._countdownIntervalUnbinder()},_getBannerEventAction:function(e){if(e.stopEvent(),n.a.Config.get("navigateTo"))return!1;var t=this.model.getId(),r=this.model.getPromoCampaignName(),i=r?"".concat(t,"/").concat(r):t,o=null;switch(this.model.getOverlayType()){case l.a.CommercialItemView.OVERLAY_SIGNUP:this._doSignupTypeBannerClickAction();break;case l.a.CommercialItemView.OVERLAY_LOGIN:this._doLoginTypeBannerClickAction();break;case l.a.CommercialItemView.OVERLAY_QUICKBUY:this._doQuickbuyTypeBannerClickAction();break;case l.a.CommercialItemView.LIST_PAGE_FILTER:this._doListPageFilterTypeBannerClickAction();break;case l.a.CommercialItemView.OVERLAY_LUCKY_WHEEL:this._doLuckyWheelBannerClickAction();break;case l.a.CommercialItemView.OVERLAY_CAMPAIGN_PICKER:this._doCampaignPickerBannerClickAction();break;default:o=this._doDefaultBannerClickAction.bind(this)}this.sendGAEvent(i,o)},_doSignupTypeBannerClickAction:function(){var e=a.a.stringify(this.model.getOverlayQueryParams()),t="signup".concat(e&&"?".concat(e));d.default.navigate(t,{trigger:!0,replace:!1})},_doLoginTypeBannerClickAction:function(){d.default.navigate("login",{trigger:!0,preventNavigateBack:!0},"login type listpage commercial click")},_doQuickbuyTypeBannerClickAction:function(){d.default.navigate("payment",{trigger:!0,preventNavigateBack:!0,replace:!1})},_doListPageFilterTypeBannerClickAction:function(){n.a.fireEvent(l.a.SearchFilterComponent.GLOBALEVENT_FILTER_SELECT,{filterId:this.model.getOverlayQueryParameter("filter")})},_doLuckyWheelBannerClickAction:function(){h.default.openModal("wheel-of-fortune")},_doCampaignPickerBannerClickAction:function(){d.default.navigate("payment",{trigger:!0,preventNavigateBack:!0,replace:!1})},_doDefaultBannerClickAction:function(){var e=this.select("a").item(0).dom;e.getAttribute("href")&&(-1!==e.target.indexOf("blank")?window.open(e.href):window.location.href=e.href)},sendGAEvent:function(e,t){new Promise((function(t){f.default.push(L(L({event:f.default.CONST.EVENT.GENERIC,eventCategory:f.default.CONST.PAGE.LISTS,eventAction:f.default.CONST.ACTION.INTERNAL_BANNERS,eventLabel:e},t&&{eventCallback:t}),{},{eventValue:0,eventInteraction:!0}))})).then(t)},_onElementClick:function(e){this._getBannerEventAction(e)},_onCountdownEnd:function(){this._countdownIntervalUnbinder(),n.a.Broadcaster.fireEvent(l.a.CommercialItemView.GLOBALEVENT_COMMERCIAL_COUNTDOWN_END)}});t.a=V},"967c":function(e,t,r){"use strict";r.r(t);var i=r("44ad"),n=r.n(i),o=r("d869"),a=r.n(o),s=r("4388"),l=r.n(s),c=r("a9a1"),u=r("ab2c"),d=function e(t,r){e.superclass.constructor.call(this,t,r)};Ext.extend(d,n.a.Model,{name:"PerformerModel",_performerIdKey:"id",_performerNameKey:"pid",_blockTypeKey:"blockType",_sizeKey:"size",_gravityCategoryKey:"gravity_category",_flashDataKey:"flashInitData",_profilePictureUrlKey:"profilePictureUrl",_profileWebpPictureUrlKey:"profileWebpPictureUrl",_isOnViewPort:!1,_isFullyVisibleOnViewPort:!1,_isLppPlaying:!1,_isVideoCallAppended:!1,_isSendMessageAppended:!1,_chatRouting:"Chat/Performer",_isHovered:!1,init:function(){this.addEvents(a.a.PerformerModel.EVENT_STATUS_CHANGE,a.a.PerformerModel.EVENT_GETS_IN_VIEWPORT,a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE),d.superclass.init.call(this)},getId:function(){return this.attributes[this._performerIdKey]},getName:function(){return this.attributes.performerNick||this.attributes[this._performerNameKey]},getDisplayName:function(){return this.attributes.displayName||this.attributes.display_name},getVideoCallPrice:function(){var e,t;return(null===(e=this.attributes)||void 0===e||null===(t=e.videoCall)||void 0===t?void 0:t.price)||this.attributes.video_call_charge_amount},getBlockType:function(){return this.attributes[this._blockTypeKey]},getUrl:function(){return this.attributes.href||n.a.getUrl(this._chatRouting,{performerId:this.getName()})},hasVideoCall:function(){var e,t;return n.a.Config.get("video_call_enabled")&&((null===(e=this.attributes)||void 0===e||null===(t=e.videoCall)||void 0===t?void 0:t.isEnabled)||1===parseInt(this.attributes.is_video_call_enabled,10))},getStatus:function(){try{var e,t,r=+this.attributes.id;return null!==(e=!Number.isNaN(r)&&(null===(t=c.store.getState().statuses.entities[r])||void 0===t?void 0:t.status))&&void 0!==e?e:0}catch(e){return console.error(e),0}},getFlashData:function(){return this.attributes[this._flashDataKey]},getIsFullyVisibleOnViewPort:function(){return this._isFullyVisibleOnViewPort},getIsOnViewPort:function(){return this._isOnViewPort},getSize:function(){return this.attributes[this._sizeKey]||a.a.ListPageModelAbstract.PERFORMER_SIZE_SMALL},getGravityCategory:function(){return this.attributes[this._gravityCategoryKey]},getProfilePictureUrl:function(){return this.attributes[this._profileWebpPictureUrlKey]&&l()()?this.attributes[this._profileWebpPictureUrlKey]:this.attributes[this._profilePictureUrlKey]},getIsLppPlaying:function(){return this._isLppPlaying},getIsVideoCallAppended:function(){return this._isVideoCallAppended},getIsSendMessageAppended:function(){return this._isSendMessageAppended},isHovered:function(){return this._isHovered},setHovered:function(e){this._isHovered=e},setStatus:function(e){this.fireEvent(a.a.PerformerModel.EVENT_STATUS_CHANGE,e)},setIsVideoCallAppended:function(){return this._isVideoCallAppended=!0,this},setIsSendMessageAppended:function(){return this._isSendMessageAppended=!0,this},setIsOnViewPort:function(e,t){return this._isOnViewPort!==t&&(this._isOnViewPort=t,this._isOnViewPort&&this.fireEvent(a.a.PerformerModel.EVENT_GETS_IN_VIEWPORT,this)),this._isFullyVisibleOnViewPort!==e&&(this._isFullyVisibleOnViewPort=e,this._isFullyVisibleOnViewPort&&this.fireEvent(a.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,this)),this},hasVipShow:function(){var e,t=parseInt(this.attributes.id,10);return(null===(e=c.store.getState().shows.entities[t])||void 0===e?void 0:e.status)===u.a.SCHEDULED},hasOngoingVipShow:function(){var e,t=parseInt(this.attributes.id,10);return(null===(e=c.store.getState().shows.entities[t])||void 0===e?void 0:e.status)===u.a.STARTED},setLppStatusPlaying:function(){this.hasOngoingVipShow()||(this._isLppPlaying=!0,this.fireEvent(a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE))},setLppStatusStopped:function(){this.hasOngoingVipShow()||(this._isLppPlaying=!1,this.fireEvent(a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE))}}),t.default=d},"9cb7":function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("b356").default,a=r("7ab0"),s=r("6d88").isVipShowEnabled,l=function(e,t){l.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(l,i.Controller,{name:"PerformerSwapController",searchPageMeta:"isSearchPage",perfSwapDelay:3e3,perfSwapErrorLimit:5,perfSwapErrorDelay:6e4,isPerfSwapEnabled:!0,overlayId:"overlay",_perfSwapErrorCount:0,_performerSwapTask:null,_performerIdsWithEndedVIPShow:[],init:function(e,t){l.superclass.init.call(this,e,t),this._startPerformerCheckingTask()},_onPerformerCancelledVIPShow:function(e){this._isSwapEnabledForSearchPage()&&(this._performerIdsWithEndedVIPShow=[e.body.performerId.toString()],this.fireEvent(n.PerformerSwapController.GET_ALL_PERFORMERS))},onAllPerformersReady:function(e){this._isSwapEnabledForSearchPage()&&this._swapViPShowPerformers(e)},setVisiblePerformerViews:function(e){this._swapVisiblePerformers(i.filter(e,this._doesPerformerNeedToSwap,this))},_swapViPShowPerformers:function(e){e=i.map(e).filter((function(e){return e}));var t=i.filter(e,(function(e){return e&&e.model.getId()&&this._performerIdsWithEndedVIPShow.indexOf(e.model.getId())>-1}),this);if(0!==t.length){var r=t[0],n=i.map(t,this._getSwapDataFromPerformerBox,this),o=i.sortBy(e,(function(e){return Math.min(e.element.data("order"))})),a=i.findLastIndex(o,(function(e){return e.model.getId()!==this._performerIdsWithEndedVIPShow[0]}),this),s=-1!==a?o[a]:r;this.PerformerSwapModel.sendRequest(n,{performerForSwap:r,lastPerformerView:s,swapPerformerID:r.model.getId(),isVIPShowCanceled:!0,applyAdditionalFilters:!1}),this._performerIdsWithEndedVIPShow=[]}},_isSearchPage:function(){return 1===parseInt(i.getMeta(this.searchPageMeta),10)},_isSwapEnabledForSearchPage:function(){return this._isSearchPage()&&a.isSwappingForVIPShowEnabled()},_isPerformerSwapEnabledOnCurrentPage:function(){return!this._isSearchPage()},_startPerformerCheckingTask:function(){this._isPerformerSwapEnabledOnCurrentPage()&&(this._performerSwapTask=new Ext.util.DelayedTask(this._swapPerformers,this),this._performerSwapTask.delay(this.perfSwapDelay))},_restartPerformerCheckingTask:function(){if(this.isPerfSwapEnabled){if(this._performerSwapTask)return this._performerSwapTask.delay(this.perfSwapDelay);this._startPerformerCheckingTask()}},_stopPerformerCheckingTask:function(){this._performerSwapTask&&this._performerSwapTask.cancel()},_swapPerformers:function(){this._performerSwapTask.delay(this.perfSwapDelay),this.isPerfSwapEnabled&&!this._isOverlayVisible()&&this.fireEvent(n.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS)},_swapVisiblePerformers:function(e){if(e.length){this._performerSwapTask.cancel();var t=i.map(e,this._getSwapDataFromPerformerBox,this);this.PerformerSwapModel.sendRequest(t,{applyAdditionalFilters:!0})}},_getSwapDataFromPerformerBox:function(e){return{id:e.model.getId(),size:e.model.getSize(),gravityCategory:e.model.getGravityCategory()}},_isOverlayVisible:function(){return Ext.get(this.overlayId).isVisible()},_doesPerformerNeedToSwap:function(e){try{if(!e||!e.model)return!1;var t=e.model.getStatus()===n.PerformerSwapController.STATUS_FREE,r=e.model.hasOngoingVipShow(),i=e.model.hasVipShow(),o=e.model.isHovered();return!(!i||s)||(!t||r)&&!o}catch(e){console.error(e)}},_onDocumentFocus:function(){this.enableSwapping()},_onDocumentBlur:function(){this.disableSwapping()},_onModelRequestSuccess:function(e){var t=i.getPath(e,"response.json.data.swapData")||[];if(i.keys(t).length)try{this.fireEvent(n.PerformerSwapController.EVENT_SWAP_PERFORMERS,t)}catch(e){console.error(e)}this._restartPerformerCheckingTask()},_onModelRequestError:function(e){e.options&&e.options.isVIPShowCanceled?this._swapPerformerWithLastPerformer(e.options):(this._perfSwapErrorCount++,this._perfSwapErrorCount===this.perfSwapErrorLimit?(this._perfSwapErrorCount=0,this._performerSwapTask.delay(this.perfSwapErrorDelay)):this._restartPerformerCheckingTask())},_swapPerformerWithLastPerformer:function(e){this.fireEvent(n.PerformerSwapController.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},enableSwapping:function(){this._isSearchPage()||(this.isPerfSwapEnabled=!0,this._restartPerformerCheckingTask())},disableSwapping:function(){this.isPerfSwapEnabled&&(this.isPerfSwapEnabled=!1,this._stopPerformerCheckingTask())},bind:function(){l.superclass.bind.call(this),this._isPerformerSwapEnabledOnCurrentPage()&&Ext.fly(window).on({focus:this._onDocumentFocus,blur:this._onDocumentBlur,scope:this}),i.on([{element:o.getClient(),event:o.EVENT.PERFORMER.SHOW_CANCELLED,handler:i.bind(this._onPerformerCancelledVIPShow,this)},{element:o.getClient(),event:o.EVENT.PERFORMER.SHOW_ENDED,handler:i.bind(this._onPerformerCancelledVIPShow,this)}],this)},unbind:function(){l.superclass.unbind.call(this),this._isPerformerSwapEnabledOnCurrentPage()&&Ext.fly(window).un({focus:this._onDocumentFocus,blur:this._onDocumentBlur,scope:this})}})},a462:function(e,t,r){var i=r("d30b").default,n=r("7ab0"),o=function e(t){e.superclass.constructor.call(this,t)};e.exports=Ext.extend(o,i,{name:"SnapshotTemplate",tpl:'<article id="{id}" class="{containerClass} {hasVideoCall} {lazyLoadClass}" data-status="{dataStatus}">{imageBlock}<div class="performerStatusContainer"></div><a href="{href}" rev="{rev}">{debugText}<span class="snapshot_counter">{snapshotCount}</span><span class="favorite {isFavorite}" data-model-id="{favoriteId}"><span class="broken-heart"><i>'+n.svgIconBlock("heart-broken-left")+"</i><i>"+n.svgIconBlock("heart-broken-right")+'</i></span></span>{rightBottomBadge}<span class="performer_name">{name}</span></a></article>',_setTemplateParams:function(e){return Ext.apply(o.superclass._setTemplateParams.call(this,e),{snapshotCount:e.snapshotCount,imageBlock:this.getImageBlock(e.profilePictureUrl,e.profileWebpPictureUrl,e.altText||e.pid)})}})},b07d:function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("967c").default,a=r("0031"),s=r("7ab0"),l=r("a9a1").store,c=r("870e").addInitialPerformers,u=r("870e").clearListPage,d=r("6d88").isVipShowEnabled,h=function(e,t){h.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(h,i.Model,{name:"ListPageModel",commercialRefreshRouting:"Commercial/Refresh",isSearchPage:"isSearchPage",listPageId:"listPageId",listPageIdResponseKey:"listPageId",lastPageResponsePath:"json.data.content.isLastPage",bigPictureCount:0,_performerCollection:{},_showMoreJsonQueryParams:{wide:!0,layout:"layout-big"},_isLastPage:!1,_currentListPageRefreshByAjax:1,_maxListPageRefreshByAjax:5,init:function(){this.addEvents(n.ListPageModelAbstract.EVENT_PERFORMER_INIT,n.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,n.ListPageModelAbstract.EVENT_DESTROY_ALL,n.ListPageModelAbstract.EVENT_VISIBLE_MODELS_READY,n.ListPageModelAbstract.EVENT_LOGGED_IN,n.ListPageModelAbstract.EVENT_SWAPPED_COMMERCIAL,n.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR,n.ListPageModelAbstract.GET_ALL_PERFORMERS_READY,n.ListPageModelAbstract.EVENT_PRIVATE_STATUS_CHANGE),h.superclass.init.call(this)},getNumericValue:function(e){return void 0!==e?+e:0},setPerformerDetailsOnInit:function(e){l.dispatch(c(e)),this._setIsLastPage(i.getMeta(n.AutoShowMore.META_IS_SINGLE_PAGE)),this._parsePerformers(e,{isInit:!0})},refreshListPageFromSearch:function(e){this._refreshListPageFromResponse(e,0)},setNewStatuses:function(e){i.chain(e).keys().intersection(i.keys(this._performerCollection)).each((function(t){this._performerCollection[t].setStatus(e[t])}),this)},setVideocallStatus:function(e){if(i.Config.get("video_call_enabled")){var t=this._performerCollection[e.body.performerId];if(t){var r=document.getElementById("container_"+e.body.performerId);if(!r)return;e.body.isEnabled?(t.attributes.is_video_call_enabled="1",t.attributes.videoCall&&(t.attributes.videoCall.isEnabled=!0),r.classList.remove("sendMessageAllowed"),r.classList.add("hasvideocall"),r.querySelector(".videoCallBadge")||r.querySelector("a").insertAdjacentHTML("beforeend",'<span class="videoCallBadge">'+s.svgIconBlock("video-call")+"</span>")):(t.attributes.is_video_call_enabled="0",t.attributes.videoCall&&(t.attributes.videoCall.isEnabled=!1),r.classList.remove("hasvideocall"),r.classList.add("sendMessageAllowed"))}}},setVipShowStatus:function(e){if(d){var t=e.performerId,r=this._performerCollection[t];if(r){var n=document.getElementById("container_"+t);if(!n)return;if(e.isVipShow){r.attributes.is_video_call_enabled="0",n.classList.add("vipshow");var o='<span class="vipshow_icon">'+s.svgIconBlock("vipshow")+"</span>",a='<span class="vipshow_text">'+i.translate("{name}'s VIP Show",{name:r.attributes.display_name})+"</span>";n.querySelector(".vipshow_icon")||n.querySelector(".performer_name").insertAdjacentHTML("beforeend",o+a)}else n.classList.remove("vipshow")}}},setShowMoreJsonQueryParams:function(e){return Object.assign(this._showMoreJsonQueryParams,e),this},getNextPage:function(){this._loadPage()},refreshListPage:function(){this._loadPage(0)},createPerformerModelFromData:function(e){var t=new(this._getModelClass(e.blockType))(Object.assign({},e));return this._performerCollection[t.getId()]=t,t},getVisibleFreeModels:function(){var e=[];i.each(this._performerCollection,(function(t){t instanceof a||t.getStatus()===n.ListPageModelAbstract.PERFORMER_STATUS_ONLINE&&t.getIsFullyVisibleOnViewPort()&&e.push(t.getId())}),this),this.fireEvent(n.ListPageModelAbstract.EVENT_VISIBLE_FREE_MODELS_READY,e)},getVisibleModels:function(){var e=i.filter(this._performerCollection,(function(e){return e.getIsOnViewPort()&&!e.getIsLppPlaying()}),this);this.fireEvent(n.ListPageModelAbstract.EVENT_VISIBLE_MODELS_READY,e)},getAllPerformers:function(){this.fireEvent(n.ListPageModelAbstract.GET_ALL_PERFORMERS_READY,this._performerCollection)},_loadPage:function(e){var t=i.isDefined(e)?e:i.getMeta(this.listPageId),r=i.Config.get("isStoryPageFeed");this.isPageLoadingInProgress||r||(this.isPageLoadingInProgress=!0,this.fireEvent(n.ListPageModelAbstract.EVENT_START_LOADING),this.fetch({url:this._getNextPageUrl(t),error:i.bind(this._onLoadPageError,this),failure:i.bind(this._onLoadPageFailure,this),success:i.bind(this._onLoadPageSuccess,this,t)}))},_onLoadPageSuccess:function(e,t){this.isPageLoadingInProgress=!1;var r=e!==t.json.data.content[this.listPageIdResponseKey];this._refreshListPageFromResponse(t,r?0:e),s.setCursor("default")},needPageReload:function(){var e=!(this._currentListPageRefreshByAjax%this._maxListPageRefreshByAjax);return this._setCurrentListPageRefreshByAjax(),e},_setCurrentListPageRefreshByAjax:function(){this._currentListPageRefreshByAjax=this._currentListPageRefreshByAjax>=this._maxListPageRefreshByAjax?1:this._currentListPageRefreshByAjax+1},_setIsLastPage:function(e){this._isLastPage=1===parseInt(e,10)},_onLoadPageError:function(){this.isPageLoadingInProgress=!1,this.fireEvent(n.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0}),this.fireEvent(n.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR),s.setCursor("default")},_onLoadPageFailure:function(){this.isPageLoadingInProgress=!1,this.fireEvent(n.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0}),this.fireEvent(n.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR),s.setCursor("default")},_refreshListPageFromResponse:function(e,t){if(e&&i.hasPath(e,"json.data.redirectUrl")&&this._destroyAll(),e&&i.hasPath(e,"json.data.content")&&i.isArray(e.json.data.content.performers)){if(0===i.getMeta("isSearchPage")&&i.hasPath(e,"json.data.listPageOrderType")&&i.Config.set("listPageOrderType",e.json.data.listPageOrderType),!e.json.data.content.performers.length)return void this.fireEvent(n.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0});this.bigPictureCount=i.getPath(e,"json.data.content.bigPictureCount")||0,this._setIsLastPage(i.getPath(e,this.lastPageResponsePath)),0===t&&(this._setListPageId(i.getPath(e,"json.data.content."+this.listPageIdResponseKey)),this._destroyAll()),this._parsePerformers(e.json.data.content.performers,{isNextPage:!0})}this.fireEvent(n.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:this._isLastPage}),s.updateLazy()},_setListPageId:function(e){i.setMeta("listPageId",e),i.fireEvent(n.ListPageModelAbstract.GLOBALEVENT_CHANGE_LIST_PAGE_ID,{listPageId:e})},destroyPerformerById:function(e){this._performerCollection[e]&&(this._performerCollection[e].destroy(),delete this._performerCollection[e])},cleanPage:function(){this._destroyAll()},_destroyAll:function(){i.each(this._performerCollection,(function(e,t){e.destroy(),delete this._performerCollection[t]}),this),l.dispatch(u()),this.fireEvent(n.ListPageModelAbstract.EVENT_DESTROY_ALL)},_getNextPageUrl:function(e){var t={listPageId:function(){return e}};return i.getUrl(i.Config.get("listPageRoutes").showMoreJson,t,this._showMoreJsonQueryParams)},_parsePerformers:function(e,t){if(i.isArray(e)){var r=i.map(e,this.createPerformerModelFromData,this);t.isInit?i.each(r,i.bind(this.fireEvent,this,n.ListPageModelAbstract.EVENT_PERFORMER_INIT)):t.isNextPage&&this.fireEvent(n.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,r)}},_getModelClass:function(e){return-1!==n.ListPageModelAbstract.BLOCK_TYPE_COMMERCIAL.indexOf(e)?a:o}})},b0e2:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},b909:function(e,t,r){var i=r("44ad"),n=r("d869"),o=r("9cb7"),a=r("2809"),s=r("d30b").default,l=function(e,t){l.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(l,i.Component,{name:"PerformerSwapComponent",swapRouteHandler:"",ajaxQueue:null,template:null,init:function(e,t){l.superclass.init.call(this,e,t),this.template=this.template||s,this._setPerformerSwapController()},_setPerformerSwapController:function(){this._performerSwapController instanceof o||(this._performerSwapController=new o({items:{PerformerSwapModel:{component:this._setPerformerSwapModel(),listeners:{"request-success":"_onModelRequestSuccess","request-error":"_onModelRequestError"}}}}),this._performerSwapController.on(i.object([[n.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS,this._onGetVisiblePerformers],[n.PerformerSwapController.EVENT_SWAP_PERFORMERS,this._onPerformerSwap],[n.PerformerSwapController.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapLast],[n.PerformerSwapController.GET_ALL_PERFORMERS,this._onGetAllPerformers],["scope",this]])))},_setPerformerSwapModel:function(){return this._performerSwapModel instanceof a||(this._performerSwapModel=new a(this.element,{swapRouteHandler:this.swapRouteHandler,ajaxQueue:this.ajaxQueue})),this._performerSwapModel},onAllPerformersReady:function(e){this._performerSwapController.onAllPerformersReady(e)},setVisibleViews:function(e){this._performerSwapController.setVisiblePerformerViews(e)},setSwappedPerformers:function(e){this._performerSwapModel.setSwappedPerformers(e)},enableSwapping:function(){this._performerSwapController.enableSwapping()},disableSwapping:function(){this._performerSwapController.disableSwapping()},_onGetVisiblePerformers:function(){this.fireEvent(n.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS)},_onGetAllPerformers:function(){this.fireEvent(n.PerformerSwapComponent.GET_ALL_PERFORMERS)},_onPerformerSwapLast:function(e){this.fireEvent(n.PerformerSwapComponent.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},_onPerformerSwap:function(e){this.fireEvent(n.PerformerSwapComponent.EVENT_SWAP_PERFORMERS,e)},bind:function(){l.superclass.bind.call(this)},unbind:function(){l.superclass.unbind.call(this)}})},bd6a:function(e,t,r){"use strict";var i=r("36e0"),n=r("2515");var o=function(e,t){var r=[];return Object(n.a)(e,(function(e,i,n){t(e,i,n)&&r.push(e)})),r},a=r("4605"),s=r("517d");t.a=function(e,t){return(Object(s.a)(e)?i.a:o)(e,Object(a.a)(t,3))}},c079:function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},d30b:function(e,t,r){"use strict";r.r(t);var i=r("44ad"),n=r.n(i),o=r("7ab0"),a=r.n(o),s=r("6d88"),l=r("7b09"),c=r.n(l),u=function e(t){e.superclass.constructor.call(this,t)};Ext.extend(u,c.a,{name:"PerformerTemplate",tpl:'<article id="{id}" \n                class="{containerClass} {hasVipShow} {hasVideoCall} {hasStory}"\n                data-status="{dataStatus}"\n                data-langs="{language}"\n            >\n                {imageBlock}\n                <div class="performerStatusContainer"></div>\n                <a href="{href}" rev="{rev}">\n                    {debugText}\n                    <span class="favorite {isFavorite}" data-model-id="{favoriteId}"> </span>\n                    {rightBottomBadge}\n                    <span class="performer_name">{performerNameBlock}</span>\n                    {mobileBadgeBlock}\n                    {badgeBlock}\n                    {videoBadgeBlock}\n                </a>\n            </article>',idPrefix:"container_",perfContainerClass:"perf_container",chatRouting:"Chat/Performer",html5ChatPageRouting:"ChatHtml5/Performer",getBadge:function(e){return n.a.isString(e)?'<span class="badge '.concat(e,'">&nbsp;</span>'):""},getVideoCallBadge:function(e){return e?'<span class="videoCallBadge">'.concat(a.a.svgIconBlock("video-call"),"</span>"):""},getMobileBadge:function(e){return e?'<span class="mobile-badge">'.concat(a.a.svgIconBlock("mobile-badge"),"</span>"):""},getDebugBlock:function(e){return e&&e.title&&e.title.length?'<div class="recommender_debug">\n                        <span>'.concat(e.title,"</span>\n                        <pre>").concat(e.details,"</pre>\n                    </div>"):""},getImageBlock:function(e,t,r){return Ext.isIE11?'<picture class="cover">\n                      <img src="'.concat(e,'" class="cover performer-image" alt="').concat(r,'">\n                    </picture>'):s.isNativeLazyLoadEnabled?'<picture class="cover">\n                       '.concat(t?'<source srcset="'.concat(t,'" type="image/webp">'):"",'\n                      <img src="').concat(e,'" \n                        loading="lazy"\n                        class="cover performer-image" alt="').concat(r,'">\n                   </picture>'):'<picture class="cover">\n                   '.concat(t?'<source srcset="'.concat(t,'" type="image/webp">'):"",'\n                  <img src="/s.png" \n                    data-src="').concat(e,'" \n                    class="lazy cover performer-image" alt="').concat(r,'">\n                </picture>')},getPerformerNameBlock:function(e,t,r){var i='<span class="performer_name_simple"> '.concat(t," </span>");return e&&s.isVipShowEnabled&&(i='<span class="vipshow_icon">'.concat(a.a.svgIconBlock("vipshow"),'</span>\n\t\t\t<span class="performer_name_simple"> ').concat(t,' </span>\n\t\t\t<span class="vipshow_text">').concat(r,"</span>")),i},_setTemplateParams:function(e){var t,r,i,o,a=e.displayName||e.display_name,l=e.hasStory||e.has_story,c=(null==e||null===(t=e.vipShow)||void 0===t?void 0:t.hasVipShow)||1===parseInt(e.has_vip_show,10),u=n.a.Config.get("video_call_enabled")&&((null==e||null===(r=e.videoCall)||void 0===r?void 0:r.isEnabled)||1===parseInt(e.is_video_call_enabled,10)),d=n.a.translate("{name}'s VIP Show",{name:a}),h="JasminCamMobile"===e.software;return{id:this.idPrefix+e.id,name:e.pid,displayName:a,altText:e.altText||e.pid||"".concat(a,"'s Profile Picture"),src:(null==e||null===(i=e.profilePictures)||void 0===i?void 0:i["576x324"])||e.profilePictureUrl,imageBlock:this.getImageBlock((null==e||null===(o=e.profilePictures)||void 0===o?void 0:o["576x324"])||e.profilePictureUrl,e.profileWebpPictureUrl,e.altText||e.pid),defaultImage:n.a.Config.get("newPerformerImageSmall"),containerClass:this.perfContainerClass,hasVipShow:c&&s.isVipShowEnabled?"vipshow":"",hasVideoCall:u?"hasvideocall":"",hasStory:l?"has-story":"",dataStatus:e.originalStatus,rev:e.gravity_category,href:e.href||e.chatPageUrl||n.a.getUrl("Chat/Performer",{performerId:a}),badgeBlock:this.getBadge(e.active_badge),videoBadgeBlock:this.getVideoCallBadge(u),mobileBadgeBlock:this.getMobileBadge(h),rightBottomBadge:this.getBadge(e.right_bottom_badge),isFavorite:1===parseInt(e.isFavorite,10)?"remove":"add",favoriteId:e.id,profilePictureUrl:e.profilePictureUrl,profileWebpPictureUrl:e.profileWebpPictureUrl,debugText:this.getDebugBlock(e.debug),subscriptionStatus:e.isCanceledSubscription?"canceled":"subscribed",translatedVipShowText:d,performerNameBlock:this.getPerformerNameBlock(c,a,d),language:e.language||""}}}),t.default=u},d59f:function(e,t,r){"use strict";r.r(t);var i=r("8af1"),n=r.n(i),o=r("63f1"),a=r.n(o),s=r("0a81"),l=r("a9a1"),c=r("44ad"),u=r.n(c),d=r("7ab0"),h=r.n(d),f=r("d869"),p=r.n(f),m=r("b912"),g=r.n(m),P=r("a532"),_=r("870e"),E=r("e6c0"),y=r("1cab"),v=[{icon:"thumbnail-small",gridSize:P.a.SMALL},{icon:"thumbnail-normal",gridSize:P.a.MEDIUM},{icon:"thumbnail-big",gridSize:P.a.LARGE}],b=function(e){y.default.trackGenericEvent({eventAction:y.GA_CONST.ACTION.CLICK,eventCategory:y.GA_CONST.PAGE.LISTS,eventLabel:"grid resize",gridSize:e})},w=function(){var e=Object(s.e)((function(e){return e.listPage.gridLayout})),t=Object(s.d)(),r=Object(i.useRef)(document.getElementById("inner_container")),o=Object(i.useCallback)((function(i){return function(){try{e!==i&&(c.Broadcaster.fireEvent(p.a.IndexIndex.GLOBALEVENT_STOP_LISTPAGE_PLAYER),r.current.classList.remove("grid--".concat(e)),r.current.classList.add("grid--".concat(i)),c.Cookie.set("gridSize",i,"/"),t(Object(_.setGridLayout)(i)),b(i))}catch(e){c.Config.set("gridSize",window.initialGridSize),b(window.initialGridSize)}}}),[t,e]);return v.map((function(t){var r=t.icon,i=t.gridSize;return n.a.createElement("span",{key:"gridSizeItem-".concat(i),id:"grid_size_button--".concat(i),className:g()("is-mounted",{selected:e===i}),onClick:o(i),role:"button"},n.a.createElement(E.a,{icon:r,"data-testid":"GridSizeSelectorIcon"}))}))},S=r("768e"),C=r.n(S),O=r("e481"),L=r("b07d"),T=r.n(L),V=r("8f76"),A=r.n(V),R=r("0592"),I=r("ee27"),M=r.n(I),k=r("98d2"),N=r("6d88"),B=r("950c"),x=r("f94d");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function H(e,t,r){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=z(e);if(t){var n=z(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(o,e);var t,r,i,n=W(o);function o(){return F(this,o),n.apply(this,arguments)}return t=o,(r=[{key:"name",get:function(){return"HTML5ListPagePlayerController"}},{key:"init",value:function(e,t){H(z(o.prototype),"init",this).call(this,e,t),this._createVideoContainer(),this.HTML5ListPagePlayerView.hideContainer()}},{key:"_createVideoContainer",value:function(){var e=this.OverlapView.createContainer();this.HTML5ListPagePlayerView.renderTo(e)}},{key:"getView",value:function(){return this.HTML5ListPagePlayerView}},{key:"stopVideo",value:function(){this.HTML5ListPagePlayerView.hideContainer(),this.OverlapView.hideContainer(),x.default.instance.hideChat()}},{key:"playVideo",value:function(e){x.default.instance.appletReady.then((function(){x.default.instance.playStreamByPerformerDetails(e,!0).catch((function(){}))}))}},{key:"playPreRollVideo",value:function(e,t,r){this.HTML5ListPagePlayerView.playPreRollVideo(e,t,r)}},{key:"stopPreRollVideo",value:function(){this.HTML5ListPagePlayerView.stopPreRollVideo()}},{key:"startPulse",value:function(e){this.OverlapView.showContainer(e),this.HTML5ListPagePlayerView.startPulse()}},{key:"stopPulse",value:function(){this.HTML5ListPagePlayerView.stopPulse()}},{key:"resetPulseLayer",value:function(){this.OverlapView.resetContainer()}},{key:"onFavoriteUpdateSuccess",value:function(e){e.command===p.a.FavoritesComponent.CONST_COMMAND_ADD?x.default.instance.markAsFavorite():x.default.instance.unmarkAsFavorite()}},{key:"getLayoutMode",value:function(){return x.default.instance.layoutMode}},{key:"handleAppletRecommenderClick",value:function(e){var t=e.performerId,r=e.performerName;!0===u.a.Config.get("featureFlags.enableLppPreRoll",!1)&&!0===u.a.Config.get("featureFlags.enableAppletRecommenderPreRoll",!1)?this.HTML5ListPagePlayerView.playPreRollVideo(t,r):this.HTML5ListPagePlayerView.playPreRollVideo(null)}},{key:"bind",value:function(){u.a.on([{element:u.a.Broadcaster,event:p.a.FavoritesComponent.GLOBALEVENT_FAVORITE_UPDATE_SUCCESS,handler:this.onFavoriteUpdateSuccess,scope:this},{element:u.a.Broadcaster,event:"GLOBALEVENT:applet-recommender-click",handler:this.handleAppletRecommenderClick,scope:this}])}}])&&j(t.prototype,r),i&&j(t,i),o}(u.a.Controller),K=r("0c3f"),q=r.n(K);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=te(e);if(t){var n=te(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return ee(this,r)}}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(o,e);var t,r,i,n=$(o);function o(){return J(this,o),n.apply(this,arguments)}return t=o,(r=[{key:"name",get:function(){return"PulseView"}},{key:"pulseOverlayCls",get:function(){return"pulse-overlay"}},{key:"stopPulse",value:function(){this._pulsingLayoutEl.hide()}},{key:"startPulse",value:function(){this._pulsingLayoutEl.show()}},{key:"setPulseLayout",value:function(){return this._pulsingLayoutEl||(this._pulsingLayoutEl=Ext.select("."+this.pulseOverlayCls).item(0)),this.stopPulse(),this._pulsingLayoutEl}}])&&Z(t.prototype,r),i&&Z(t,i),o}(c.View),ie=r("5aa8"),ne=r.n(ie),oe=function(e){var t=e.src,r=e.imageSrc,i=e.attributes,n=e.badgeText;return'<div class="html5-list-page-player">\n        <figure>\n            <img src="'.concat(r,'" alt="lpp bg" />\n        </figure>\n        <video ').concat(i,'>\n            <source src="').concat(t,'" />\n        </video>\n        <span class="html5-list-page-player__badge">').concat(n,"</span>\n    </div>")};function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t,r){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=he(e);if(t){var n=he(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return de(this,r)}}function de(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=Symbol(),pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(o,e);var t,r,i,n=ue(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e))[fe]=Ext.get(t.container),t}return t=o,(r=[{key:"name",get:function(){return"HTML5ListPagePlayerView"}},{key:"container",get:function(){return"member_client_container"}},{key:"id",get:function(){return"list-page-html5-video-container"}},{key:"blankSrc",get:function(){return u.a.Config.get("testVideoUrl")}},{key:"blankImage",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}},{key:"preRollFadeDuration",get:function(){return 1}},{key:"preRollUrl",get:function(){return this._video.dom.currentSrc}},{key:"preRollProgress",get:function(){return this._video.dom.currentTime}},{key:"preRollDuration",get:function(){return this._video.dom.duration}},{key:"hasError",get:function(){return this._hasError}},{key:"videoElement",get:function(){return this._video.dom}},{key:"imageElement",get:function(){return this._image.dom}},{key:"imageContainerElement",get:function(){var e;return null===(e=this._imageContainer)||void 0===e?void 0:e.dom}},{key:"videoSrc",get:function(){return this._video.dom.currentSrc}},{key:"orientation",get:function(){return this._video.dom.videoWidth>this._video.dom.videoHeight?"landscape":"portrait"}},{key:"displayName",get:function(){return this._displayName}},{key:"canPlayOnApplet",get:function(){return this._asyncHelper}},{key:"selectElements",value:function(){this._video=this._player.select("video").item(0),this.source=this._video.select("source").item(0),this._image=this._player.select("img").item(0),this._imageContainer=this._player.select("figure").item(0)}},{key:"bindVideoEvents",value:function(){this._video.on("canplay",this.onVideoCanPlay.bind(this)),this._video.on("playing",this.onVideoPlaying.bind(this)),this._video.on("ended",this.onVideoEnded.bind(this)),this.source.on("error",this.onVideoPlayError.bind(this))}},{key:"onVideoCanPlay",value:function(){var e;this.videoSrc!==u.a.Config.get("testVideoUrl")&&("landscape"===this.orientation&&(this.imageContainerElement.style.display="none"),null===(e=this._asyncResolver)||void 0===e||e.call(this,this._displayName),this.videoElement.play())}},{key:"onVideoEnded",value:function(){this.stopPreRollVideo()}},{key:"onVideoPlaying",value:function(){var e=this;this._player.show(),this._isPlaying=!0,this.stopPulse(),window.clearInterval(this.videoProgressInterval),this.videoProgressInterval=window.setInterval((function(){e.preRollDuration-e.preRollProgress<=e.preRollFadeDuration&&(window.clearInterval(e.videoProgressInterval),e.stopPulse(),e._isPlaying=!1,e.playLiveStream(!0))}),100)}},{key:"onVideoPlayError",value:function(){var e;this._isClosestSegmentTried?(null===(e=this._asyncRejecter)||void 0===e||e.call(this,"No pre-roll video source for ".concat(this._displayName)),this._hasError=!0):(this._isClosestSegmentTried=!0,this._generateVideoSource(this.performerId,this._closestSegment))}},{key:"showContainer",value:function(e){ne.a.isWin7IE11()?this[fe].removeClass("minified"):(!0===e&&(this[fe].dom.dataset.animation="fadeIn"),this[fe].display("block"))}},{key:"hideContainer",value:function(){ne.a.isWin7IE11()?this[fe].addClass("minified"):(this[fe].dom.dataset.animation="",this[fe].display("none"))}},{key:"renderTo",value:function(e){var t=oe({src:this.blankSrc,imageSrc:this.blankImage,attributes:'muted preload="none"',badgeText:u.a.translate("LIVE")});this._player=Ext.DomHelper.append(e,t,!0),this._player.hide(),this.setPulseLayout(),this.selectElements(),this.bindVideoEvents()}},{key:"playLiveStream",value:function(e){this._isPlaying||(this.showContainer(e),e||this.stopPreRollVideo())}},{key:"playPreRollVideo",value:function(e,t,r){var i=this,n=u.a.Cookie.get("TZhj4ucp5N");if(!["one","two"].includes(window.AB_TEST_CONFIG.preRollVariant)&&!["CQSJBz0iA7","YqzKs9KEU4"].includes(n)){var o;if(this._asyncHelper=new Promise((function(e,t){i._asyncResolver=e,i._asyncRejecter=t})).catch((function(){})),!e)return this._setVideoSource(this.blankSrc),this.performerId=null,this._displayName=null,void(null===(o=this._asyncRejecter)||void 0===o||o.call(this));this.performerId=e,this._displayName=t,this._hasError=!1,this._type="pre-roll";var a=u.a.Config.get("clientServerTimeDifference",0),s=new Date(Date.now()-a).getUTCSeconds(),l=s>=30?"30":"00";this._setClosestSegment(s),this._generateVideoSource(e,l),r?(this._setImageSource(r),this.imageContainerElement.style.display="block"):this._setImageSource(this.blankImage),this.videoElement.load()}}},{key:"stopPreRollVideo",value:function(){window.clearInterval(this.videoProgressInterval),this.imageContainerElement.style.display="none",this._player.hide(),this._isPlaying=!1,this.videoElement.pause(),this._setImageSource(this.blankImage),this._setVideoSource(this.blankSrc),this._asyncHelper=Promise.reject().catch((function(){}))}},{key:"_setClosestSegment",value:function(e){this._isClosestSegmentTried=!1;var t=10*Math.floor(e/10);0===t?t=50:30===t&&(t=20),this._closestSegment=t}},{key:"_setVideoSource",value:function(e){this._video.select("source").item(0).dom.setAttribute("src",e),this.videoElement.load()}},{key:"_generateVideoSource",value:function(e,t){var r=u.a.Config.get("staticLppUrl"),i=q()(e)[0],n="".concat(r,"/").concat(i,"/").concat(e,"/").concat(e,".").concat(t,".mp4");this.videoElement.parentElement&&this.videoElement.parentElement.classList.contains("html5-list-page-player")||document.querySelector(".html5-list-page-player").appendChild(this.videoElement),this._setVideoSource(n)}},{key:"_setImageSource",value:function(e){this.imageElement.setAttribute("src",e)}},{key:"handleAppletStreamReady",value:function(){this.playLiveStream()}},{key:"bind",value:function(){u.a.on([{element:u.a.Broadcaster,event:p.a.FlashExternal.GLOBALEVENT_APPLET_STREAM_READY,handler:this.handleAppletStreamReady}],this),le(he(o.prototype),"bind",this).call(this)}}])&&se(t.prototype,r),i&&se(t,i),o}(re);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=ve(e);if(t){var n=ve(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return ye(this,r)}}function ye(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(o,e);var t,r,i,n=Ee(o);function o(){return ge(this,o),n.apply(this,arguments)}return t=o,(r=[{key:"name",get:function(){return"OverlapView"}},{key:"containerClass",get:function(){return"overlap-container"}},{key:"hideClass",get:function(){return ne.a.isWin7IE11()?"minified":"hide"}},{key:"createContainer",value:function(){return this._container||(this._container=Ext.select(".".concat(this.containerClass)).item(0)),this._container}},{key:"showContainer",value:function(e){this.setContainerDimensions(e).setContainerStyle()}},{key:"resetContainer",value:function(){this.top=0,this.left=0,this.width=0,this.height=0,this.setContainerStyle()}},{key:"setContainerDimensions",value:function(e){var t=e.getDimensions();return this.top=t.top+(window.scrollY||window.pageYOffset),this.left=t.left+(window.scrollX||window.pageXOffset),this.width=t.width,this.height=t.height,this}},{key:"setContainerStyle",value:function(){return this._container.removeClass(this.hideClass).setStyle({left:"".concat(this.left,"px"),top:"".concat(this.top,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}),this}},{key:"hideContainer",value:function(){this._container.addClass(this.hideClass)}}])&&Pe(t.prototype,r),i&&Pe(t,i),o}(c.View);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oe(e,t,r){return(Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=Ae(e);if(t){var n=Ae(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Ve(this,r)}}function Ve(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(o,e);var t,r,i,n=Te(o);function o(){return Se(this,o),n.apply(this,arguments)}return t=o,(r=[{key:"name",get:function(){return"HTML5ListPagePlayerComponent"}},{key:"listPagePlayerId",get:function(){return"listpage_player"}},{key:"init",value:function(e,t){Oe(Ae(o.prototype),"init",this).call(this,e,t),this._createController()}},{key:"getLayoutMode",value:function(){return this.getController().getLayoutMode()}},{key:"_createController",value:function(){this._HTML5ListPagePlayerController=new Y({el:this.element,items:{HTML5ListPagePlayerView:{component:this._createHTML5ListPagePlayerView()},OverlapView:{component:this._createOverlapView()}}})}},{key:"getController",value:function(){return this._HTML5ListPagePlayerController instanceof Y||this._createController(),this._HTML5ListPagePlayerController}},{key:"_createOverlapView",value:function(){return this._OverlapView instanceof be||(this._OverlapView=new be({id:this.listPagePlayerId})),this._OverlapView}},{key:"_createHTML5ListPagePlayerView",value:function(){return this._HTML5ListPagePlayerView instanceof pe||(this._HTML5ListPagePlayerView=new pe({id:this.element.dom.id})),this._HTML5ListPagePlayerView}},{key:"getLppView",value:function(){return this.getController().getView()}},{key:"stopVideo",value:function(){this.getController().stopVideo()}},{key:"startPulse",value:function(e){this.getController().startPulse(e)}},{key:"stopPulse",value:function(){this.getController().stopPulse()}},{key:"resetPulseLayer",value:function(){this.getController().resetPulseLayer()}},{key:"playVideo",value:function(e){this.getController().playVideo(e)}},{key:"playPreRollVideo",value:function(e,t,r){this.getController().playPreRollVideo(e,t,r)}},{key:"stopPreRollVideo",value:function(){this.getController().stopPreRollVideo()}}])&&Ce(t.prototype,r),i&&Ce(t,i),o}(u.a.Component);function Ie(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function Me(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){Ie(o,i,n,a,s,"next",e)}function s(e){Ie(o,i,n,a,s,"throw",e)}a(void 0)}))}}var ke=function e(t,r){e.superclass.constructor.call(this,t,r)};Ext.extend(ke,u.a.Controller,{name:"ListPagePlayerController",overlayId:"overlay",visibleFreeModels:[],isBigThumbsExists:!0,isRandomPlayerEnabled:!1,forceDelayedInit:!1,performer:void 0,_delayedTaskDelayInIE11:100,_delayedTaskDelay:200,_delayedTaskListPagePlayerInitDelay:250,_startLPPStreamDelay:1e4,_isWindowHasFocus:!0,_isPlayingAllowed:!0,_isCookieDisabled:u.a.Config.get("is-cookie-disabled"),_pulseDelay:200,init:function(e,t){this._isMouseOverWindow=!Ext.isIE,ke.superclass.init.call(this,e,t),this._overlayPlayerOpened=!1,this._isAppletVisible=!0,this.ListPagePlayerView.setElements(),this.isRandomPlayerEnabled&&this._startRandomPlayerOnInit(),this.addEvents(p.a.ListPagePlayerController.EVENT_GET_VISIBLE_FREE_MODELS,p.a.ListPagePlayerController.EVENT_MOUSE_OUT)},setVisibleFreeModels:function(e){this.visibleFreeModels=e},setListPagePlayerParams:function(e){var t=u.a.extend({},this.loadDataObject,Ext.decode(e));this.performerName===t.performer_id&&!0===this.isPlaying&&this._selectPlayingProcess(t)},resetRandomPlayer:function(){this._stopRandomPlayer()},_setRandomPlayerTasks:function(){this._randomPlayerTask=new Ext.util.DelayedTask(this._startRandomPlayer,this)},_getVisibleFreeModels:function(){this.fireEvent(p.a.ListPagePlayerController.EVENT_GET_VISIBLE_FREE_MODELS,this)},_getRandomPerformer:function(){return this.visibleFreeModels[Math.floor(Math.random()*this.visibleFreeModels.length)]},_getListPagePlayerParams:function(){this.isPlaying||(this.isPlaying=!0,this.performer&&(this.startPulse(),this.ListPagePlayerView.getPerformerDetails({performerId:this.performerName,appletType:p.a.appletType.HTML5})))},startPulse:function(e){this.getHTML5VideoComponent().startPulse(e||this.performer)},stopPulse:function(e){e?this.getHTML5VideoComponent().stopPulse():setTimeout(function(){this.getHTML5VideoComponent().stopPulse()}.bind(this),this._pulseDelay)},resetPulseLayer:function(){this.getHTML5VideoComponent().resetPulseLayer()},_isPerformerFree:function(){return this.performerStatus===p.a.ListPageModelAbstract.PERFORMER_STATUS_ONLINE},_isRandomPlayerAllowed:function(){var e=!!M.a.getHashValue()&&""!==M.a.getHashValue()[1];return(this._isWindowHasFocus||!this._isWindowHasFocus&&this._isMouseOverWindow)&&this.isRandomPlayerEnabled&&this._isPlayingAllowed&&!Ext.fly(this.overlayId).isVisible()&&!h.a.isChatAppletOnPage()&&!e},_stopHTML5Video:function(){window.clearTimeout(this.playTimeout),this.getHTML5VideoComponent().stopVideo(),u.a.fireEvent(p.a.ListPagePlayerController.GLOBALEVENT_HTML5_PLAYER_STOPPED)},_startHTML5Video:function(e){var t=this;return Me(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.resolve().then(r.bind(null,"f94d"));case 2:i.sent.default.instance.appletReady.then((function(){t.getHTML5VideoComponent().playVideo(e)}));case 4:case"end":return i.stop()}}),i)})))()},_startPreRollOnApplet:function(e){return Me(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.bind(null,"f94d"));case 2:t.sent.default.instance.playPreRollVideo(e);case 4:case"end":return t.stop()}}),t)})))()},getHTML5VideoComponent:function(){return this._html5video instanceof Re||(this._html5video=new Re(this.element,{})),this._html5video},_startLPPStream:function(){this.isRandomPlayerEnabled&&this._randomPlayerTask&&this._restartRandomPlayerTaskWithDelay(this._startLPPStreamDelay)},_startRandomPlayerOnInit:function(){this._stopRandomPlayerTask(),this._setRandomPlayerTasks(),this._randomPlayerTask.delay(this._delayedTaskDelay)},_stopRandomPlayerTask:function(){this._randomPlayerTask&&this._randomPlayerTask.cancel()},_stopRandomPlayer:function(){this._isPlayingWithRandomPlayer=!1,this._stopHTML5Video(),this._performerStopped(),delete this.performer,this.getHTML5VideoComponent().stopPreRollVideo(),this._randomPlayerTask&&(this._isPlayingAllowed=!0,this._randomPlayerTask.delay(1e3))},_startRandomPlayer:function(e){this._isRandomPlayerAllowed()&&(this._overlayPlayerOpened?this._stopRandomPlayerTask():(this._stopRandomPlayer(),this._getVisibleFreeModels(),0!==this.visibleFreeModels.length||e?(this._performerStopped(),this.performer=e||this._getRandomPerformer(),this.performer&&this.performer.model.getName()!==this.performerName?this._startRandomPlayerTaskOnNextPerformer():this._restartRandomPlayerTaskWithDelay(300)):this._restartRandomPlayerTaskWithDelay(3e3)))},_startRandomPlayerTaskOnNextPerformer:function(){this._isPlayingWithRandomPlayer=!0,this.initListPagePlayer(this._delayedTaskDelay),this._restartRandomPlayerTaskWithDelay(this._startLPPStreamDelay)},_performerStopped:function(){u.a.isDefined(this.performer)&&this.performer.model&&this.performer.model.setLppStatusStopped()},_restartRandomPlayerTaskWithDelay:function(e){this._stopRandomPlayerTask(),this._randomPlayerTask&&this._randomPlayerTask.delay(e)},_selectPlayingProcess:function(e){var t,r,i,n=this;if(!this.isChatOpenedOverHtml5ListPagePlayer()){if(window.clearTimeout(this.playTimeout),this.playTimeout=window.setTimeout((function(){n.isStreamReady||n._selectPlayingProcess(e)}),7e3),e.teaser_type=e.teaser_type?e.teaser_type.toUpperCase():"",e.pid=this.performer?this.performer.model.getName():e.performer_id,e.perf_url=this.performer?this.performer.getAnchorElement().dom.href:u.a.getUrl("Chat/Performer",{performerId:e.performer_id},{}),e.playFreeChannel=0,e.ishostedchannel=0,e.thumbnailUrl=null!==(t=null===(r=this.performer)||void 0===r||null===(i=r.getThumbnailUrl)||void 0===i?void 0:i.call(r))&&void 0!==t&&t,!k.default.isLoggedIn()&&N.isGuestOnboardingEnabled)Object.keys(l.store.getState().user.favorites).includes(e.p_id)&&(e.isFavorite=!0);this._isPerformerFree()?(this.playerType="html5",h.a.updateHTMLAppletVars(e),this._startHTML5Video(e)):(this.stopPulse(!0),this.getHTML5VideoComponent().stopPreRollVideo(),this._stopHTML5Video())}},initListPagePlayer:function(e){this.performer&&this.performer.model&&this.ListPagePlayerView.listPagePlayerDivEl&&(this.isStreamReady=!1,this.performer.model.setLppStatusPlaying(),this.isPlaying=!1,this.performerStatus=this.performer.model.getStatus(),this.performerName=this.performer.model.getName(),this.loadDataObject=this.performer.model.getFlashData(),this.requestTask&&this.requestTask.cancel(),this.requestTask=new Ext.util.DelayedTask(this._getListPagePlayerParams,this),this.requestTask.delay(e))},onPerformerViewMouseOver:function(e){var t=e.model.hasOngoingVipShow(),r=e.model.hasVipShow();this._overlayPlayerOpened||window.location.hash.match("messages|chat|story|modelgallery")||(this._isPerformerHovered=!0,this._stopRandomPlayerTask(),(this.performer!==e||this.performer===e&&!this._isPlayingWithRandomPlayer)&&(this.getHTML5VideoComponent().stopPreRollVideo(),this._stopHTML5Video(),this._stopRandomPlayer()),(!h.a.isPrivatePeekAllowedInThumbnail()||2!==e.model.getStatus()&&3!==e.model.getStatus())&&(!t&&!r||N.isVipShowEnabled)&&0!==e.model.getStatus()&&(e instanceof B.a||this.performer&&this.performer===e&&(this.performer!==e||this._isPlayingWithRandomPlayer)||(!0===u.a.Config.get("featureFlags.enableLppPreRoll",!1)&&(this.startPulse(e),this.getHTML5VideoComponent().playPreRollVideo(e.model.getName(),e.model.getDisplayName(),e.getThumbnailUrl())),this.reInitListPagePlayerOnceStreamStop(e,this.forceDelayedInit?this._delayedTaskListPagePlayerInitDelay:this._delayedTaskDelay))))},reInitListPagePlayerOnceStreamStop:function(e,t){this._performerStopped(),this.performer=e,this._isPlayingAllowed=!1,this.isPlaying=!1,this._stopRandomPlayerTask(),this.initListPagePlayer(t)},onPerformerViewMouseOut:function(){this._isPerformerHovered=!1,this.isChatOpenedOverHtml5ListPagePlayer()||(this._isPlayingAllowed=!0,this._stopRandomPlayer(),this.isPlaying=!1)},_onWindowFocus:function(){this._isWindowHasFocus=!0},_onWindowBlur:function(){this._isWindowHasFocus=!1,this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},_onBrowserMouseOver:function(e,t){u.a.Util.checkMouseCrossedWindowBorder(e,t)&&!this._isMouseOverWindow&&(this._isMouseOverWindow=!0,this._startRandomPlayer())},_onBrowserMouseOut:function(e,t){this.isChatOpenedOverHtml5ListPagePlayer()||u.a.Util.checkMouseCrossedWindowBorder(e,t)&&(this._isMouseOverWindow=!1,this._stopRandomPlayer())},_onWindowScroll:function(){this.isChatOpenedOverHtml5ListPagePlayer()||(u.a.isUndefined(this.performer)||this.performer.model&&!this.performer.model.getIsOnViewPort())&&this._stopRandomPlayer()},_onWindowResize:function(){this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},_onOverlayMouseOver:function(){this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},onWindowShow:function(e){this.isChatOpenedOverHtml5ListPagePlayer()||e&&e.window&&-1===["Tooltip","window","DropDownMenu","SearchFilterWindow"].indexOf(e.window.name)&&this._stopRandomPlayerTask()},onWindowHide:function(e){e&&e.window&&"Tooltip"!==e.window.name&&this._startLPPStream()},onOverlayOpen:function(e){var t=this;if(this._overlayPlayerOpened||(this._overlayPlayerOpened=e.scope.name===p.a.ChatModalComponent.NAME),this.stopPulse(!0),this.isChatOpenedOverHtml5ListPagePlayer()){var r=!0===u.a.Config.get("featureFlags.enableLppPreRoll",!1),i=r?this.getHTML5VideoComponent().getLppView():{},n=i.videoElement,o=i.canPlayOnApplet;return!this._overlayPlayerOpened&&this.performer&&u.a.hasPath(e,"scope.performerName")&&e.scope.performerName!==this.performer.model.getName()?(this._stopRandomPlayer(),this._stopRandomPlayerTask()):r&&o&&this._isAppletVisible&&o.then((function(r){r===e.scope.performerName&&t._startPreRollOnApplet(n)})).catch((function(){})),void(this.requestTask&&this.requestTask.cancel())}this._stopRandomPlayer(),this._stopRandomPlayerTask()},onOverlayClose:function(e){var t=M.a.getHashValue()?M.a.getHashValue()[1]:null;(e.scope&&e.scope.name===p.a.ChatModalComponent.NAME||null===t)&&(this._overlayPlayerOpened=!1),(e.scope&&e.scope.name===p.a.ChatModalComponent.NAME||null===t)&&!this._isPerformerHovered&&(this._stopRandomPlayer(),this._startLPPStream())},onPerformerDetailsSuccess:function(e){this.setListPagePlayerParams(e)},onPerformerDetailsError:function(){this.stopPulse(!0)},onStopListpagePlayer:function(){this._stopRandomPlayer()},onSidebarToggle:function(){this._stopRandomPlayer()},isChatOpenedOverHtml5ListPagePlayer:function(){return"html5"===this.playerType&&R.default.getActiveModal()&&R.default.getActiveModal().name===p.a.ChatModalComponent.NAME||this._overlayPlayerOpened},onAppletOutOfContent:function(){},handleAppletStreamReady:function(){this.isStreamReady=!0},onShowChatApplet:function(){this._isAppletVisible=!0},onHideChatApplet:function(){this._isAppletVisible=!1},bind:function(){Ext.fly(this.overlayId).on("mouseover",this._onOverlayMouseOver,this),this._bindedWindowEvents={resize:this._onWindowResize,blur:this._onWindowBlur,focus:this._onWindowFocus,scroll:this._onWindowScroll,scope:this},Ext.fly(window).on(this._bindedWindowEvents),Ext.fly(document).on({mouseover:this._onBrowserMouseOver,mouseout:this._onBrowserMouseOut,scope:this}),u.a.on([{element:u.a.Broadcaster,event:p.a.FlashExternal.GLOBALEVENT_APPLET_STREAM_READY,handler:this.handleAppletStreamReady},{element:u.a.Broadcaster,event:p.a.IndexIndex.GLOBALEVENT_STOP_LISTPAGE_PLAYER,handler:this.onStopListpagePlayer},{element:u.a.Broadcaster,event:p.a.IndexIndex.GLOBALEVENT_TOGGLE_SIDEBAR_BUTTON_CLICK,handler:this.onSidebarToggle},{element:u.a.Broadcaster,event:"GLOBALEVENT:show-chat",handler:this.onShowChatApplet},{element:u.a.Broadcaster,event:"GLOBALEVENT:hide-chat",handler:this.onHideChatApplet}],this)},unbind:function(){Ext.fly(this.overlayId).un("mouseover",this._onOverlayMouseOver,this),Ext.fly(window).un(this._bindedWindowEvents),Ext.fly(document).un({mouseover:this._onBrowserMouseOver,mouseout:this._onBrowserMouseOut,scope:this}),window.clearTimeout(this.playTimeout)}});var Ne=ke,Be=r("825c"),xe=r.n(Be),De=r("b909"),Fe=r.n(De),je=r("0619"),He=r.n(je),Ge=r("4daa"),We=r.n(Ge);function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze=function e(t,r){e.superclass.constructor.call(this,t,r)};t.default=Ext.extend(ze,u.a.Component,{name:"ListPageComponentAbstract",performersConfig:"listPagePerformers",controllerClassName:C.a,viewClassName:O.default,modelClassName:T.a,listPageControllerListeners:{},listPagePlayerControllerClassName:Ne,isRandomPlayerEnabled:!1,listPagePlayerViewClassName:xe.a,isBigThumbsExists:!0,listPagePlayerForceDelayedInit:!1,init:function(e,t){ze.superclass.init.call(this,e,t),("visible"===document.visibilityState||Ext.isIE9)&&this._setController();var r=document.getElementById("grid-size-selector");r&&(a.a.render(n.a.createElement(s.a,{store:l.store,"data-testid":"ListPageComponentAbstractProvider"},n.a.createElement(w,{"data-testid":"ListPageComponentAbstractGridSizeSelector"})),r),this._setListPagePlayerController())},_setController:function(){var e,t=this.controllerClassName;!u.a.isFunction(t)||this._listPageController instanceof t||(this._listPageController=new t({items:Ext.apply({IndexBroadcaster:{component:u.a.Broadcaster,listeners:Ext.apply({},(e={"global-status-change":"onStatusChange","global-videocall-change":"onVideocallChange","global-vipshow-status-change":"onVipShowStatusChange"},Ue(e,p.a.ListPageAbstract.GLOBALEVENT_REFRESH_LISTPAGE,"onRefreshListPage"),Ue(e,p.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_RESULTS,"onSearchResults"),Ue(e,"globalevent-clean-listpage","onCleanListPage"),Ue(e,"logged-in","onLoggedIn"),Ue(e,"after-signup-success","onSignUpSuccess"),Ue(e,p.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_PAGE_OFF,"onAjaxSearchPageOff"),Ue(e,p.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_PAGE_ON,"onAjaxSearchPageOn"),Ue(e,"firstbill-complete","onFirstBillComplete"),Ue(e,"purchase-success","onQuickBuySuccess"),Ue(e,"LuckyWheelModal:wheel-spun","onLuckyWheelSpun"),Ue(e,"WheelOfFortune:guest-wheel-spun","onGuestWheelOfFortuneSpun"),Ue(e,"CommercialItemView:countdown-end","onCommercialCountdownEnd"),Ue(e,"global-list-page-promo-ab-test","onListPageCommercialABTest"),Ue(e,"Applet:quickbuy-success","onAppletQuickBuySuccess"),e),this.listPageControllerListeners.IndexBroadcaster)},ListPageView:{component:this.getView(),listeners:Ext.apply({},{"event-view-mouseover":"onPerformerViewMouseOver","event-view-mouseout":"onPerformerViewMouseOut"},this.listPageControllerListeners.ListPageView)},ListPageModel:{component:this._getListPageModel(),listeners:{"event-visible-free-models-ready":"onVisibleFreeModelsReady","event-visible-models-ready":"onVisibleModelsReady","event-swapped-commercial":"onPerformerSwap","event-show-more-error":"onShowMoreError","destroy-all":"onDestroyAll","ListPageModelAbstract:get-all-performers-ready":"onGetAllPerformersReady"}}}),plugins:u.a.object([p.a.AutoShowMore.NAME],[{component:He.a,config:{direction:p.a.AutoShowMore.DIRECTION_DOWN,view:this.getView(),model:this._getListPageModel(),maxAutoLoadNum:3,resetEvent:p.a.ListPageModelAbstract.EVENT_DESTROY_ALL,loadingStartedEvent:p.a.ListPageModelAbstract.EVENT_START_LOADING,loadingFinishedEvent:p.a.ListPageModelAbstract.EVENT_FINISHED_LOADING,showMoreButtonClickEvent:p.a.ListPageViewAbstract.EVENT_SHOW_MORE_BUTTON_CLICK,offset:2500}}])}),this._listPageController.on(Ext.apply({},{"event-visible-free-models-ready":this.setVisibleFreeModelsReady,"event-view-mouseover":this.onPerformerViewMouseOver,"event-view-mouseout":this.onPerformerViewMouseOut,scope:this},this.listPageControllerListeners.ListPageController)))},enablePerformerSwap:function(){this.performerSwap instanceof Fe.a||!this._listPageController||(this.performerSwap=new Fe.a(this.element,{swapRouteHandler:"ListPageAjax/PerformersSwap",ajaxQueue:new u.a.AjaxQueue}),this._listPageController.addComponent({component:this.performerSwap,listeners:{"PerformerSwapComponent:get-all-performers":"getAllPerformers","get-visible-performers":"getVisiblePerformers","event-swap-performers":"onPerformerSwap","PerformerSwapComponent:swap-performer-with-last-performer":"onPerformerSwapLast"}},"PerformerSwap"),this._listPageController.addPlugin(p.a.PerformerSwap.NAME,{component:We.a,config:{view:this.getView()}}),this._listPageController.on({"PerformerSwap:destroy-performer":this.destroyPerformerById,"ListPageControllerAbstract:get-all-performers-ready":this.getAllPerformersReady,"event-swapped-performers":this.setSwappedPerformers,"event-visible-models-ready":this.setVisibleModelsReady,scope:this}),u.a.fireEvent("global-list-page-swap-ready"))},setVisibleFreeModelsReady:function(e){this._listPagePlayerController&&this._listPagePlayerController.setVisibleFreeModels(e)},onPerformerViewMouseOver:function(e){this._listPagePlayerController&&this._listPagePlayerController.onPerformerViewMouseOver(e)},onPerformerViewMouseOut:function(e){this._listPagePlayerController&&this._listPagePlayerController.onPerformerViewMouseOut(e)},setVisibleModelsReady:function(e){this.performerSwap.setVisibleViews(e)},getAllPerformersReady:function(e){this.performerSwap.onAllPerformersReady(e)},setSwappedPerformers:function(e){this.performerSwap.setSwappedPerformers(e)},destroyPerformerById:function(e){this._getListPageModel().destroyPerformerById(e)},getView:function(){var e=this.viewClassName;return!u.a.isFunction(e)||this._listPageView instanceof e||(this._listPageView=new e({element:this.element,model:this._getListPageModel()})),this._listPageView},getController:function(){return this._listPageController||this._setController(),this._listPageController},_getListPageModel:function(){return!u.a.isFunction(this.modelClassName)||this._listPageModel instanceof this.modelClassName||(this._listPageModel=new this.modelClassName),this._listPageModel},setStreamPlayerModel:function(){var e=A.a;return this._streamPlayerModel instanceof e||(this._streamPlayerModel=new e),this._streamPlayerModel},_setListPagePlayerController:function(){var e=this.listPagePlayerControllerClassName;!u.a.isFunction(e)||this._listPagePlayerController instanceof e||(this._listPagePlayerController=new e({items:{ListPagePlayerView:{component:this.getListPagePlayerView(),listeners:{}},StreamPlayerModel:{component:this.setStreamPlayerModel(),listeners:{"performer-details-success":"onPerformerDetailsSuccess","performer-details-error":"onPerformerDetailsError"}},IndexBroadcaster:{component:u.a.Broadcaster,listeners:u.a.object([["window-show","onWindowShow"],["window-hide","onWindowHide"],[p.a.ModalComponent.GLOBALEVENT_MODAL_OPENED,"onOverlayOpen"],[p.a.ModalComponent.GLOBALEVENT_MODAL_CLOSED,"onOverlayClose"],[p.a.FlashExternal.GLOBALEVENT_OUT_OF_CONTENT,"onAppletOutOfContent"]])}},isRandomPlayerEnabled:this.isRandomPlayerEnabled,isBigThumbsExists:this.isBigThumbsExists,forceDelayedInit:this.listPagePlayerForceDelayedInit}),this.getController().addComponent({component:this._listPagePlayerController,listeners:{"get-visible-free-models":"getVisibleFreeModels"}},"ListPagePlayer"))},getListPagePlayerView:function(){var e=this.listPagePlayerViewClassName;return!u.a.isFunction(e)||this._listPagePlayerView instanceof e||(this._listPagePlayerView=new e({element:this.element,model:this.setStreamPlayerModel()})),this._listPagePlayerView},onHashUpdate:function(){window.location.hash?h.a.saveScrollPosition():h.a.currentScrolling()},onVisibilityChange:function(){"visible"!==document.visibilityState||this._isTabActivated||(this._isTabActivated=!0,this._setController())},bind:function(){ze.superclass.bind.call(this),u.a.on([{element:u.a.Broadcaster,event:p.a.History.GLOBALEVENT_HASH_UPDATE,handler:this.onHashUpdate}],this),(Ext.isChrome||Ext.isSafari||Ext.isEdge)&&"visible"!==document.visibilityState&&Ext.fly(document).on(p.a.BrowserEvents.VISIBILITY_CHANGE,this.onVisibilityChange,this,{single:!0})}})},e481:function(e,t,r){"use strict";r.r(t);var i=r("44ad"),n=r.n(i),o=r("7ab0"),a=r.n(o),s=r("d869"),l=r.n(s),c=r("8af1"),u=r.n(c),d=r("63f1"),h=r.n(d),f=r("978c"),p=r("a9a1"),m=r("870e"),g=r("0a81"),P=r("be52"),_=r("ef59"),E=r("8a2d"),y=r.n(E),v=r("791c"),b=r("0b3c"),w=r("9ced"),S=b.d.div(["background:rgba(0,0,0,0.8);color:#fff;cursor:pointer;display:flex;flex-direction:column;font-size:12px;height:100%;justify-content:center;opacity:0;position:absolute;text-align:center;top:0;width:100%;z-index:25;&:hover{opacity:1;}"]),C=b.d.div(["font-size:",";font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);"],(function(e){return"small"===e.size?"12px":"14px"})),O=b.d.div(["color:#ccc;font-size:10px;font-weight:bold;text-transform:capitalize;"]),L=Object(b.d)(w.a)(["align-self:center;margin:10px 0;"]),T=r("c33b"),V=r("0592"),A=function(e){var t=e.price;return t?u.a.createElement(v.a,{credit:t},1===t?"{credit} credit":"{credit} credits"):null},R=function(e){var t=e.privatePeekPrice,r=e.displayName,i=e.small,n=Object(g.e)((function(e){return e.user._user.balances.freePeeks})),o=Object(g.d)();return u.a.createElement(u.a.Fragment,null,u.a.createElement(L,{small:i,onClick:function(){V.default.navigateToChatPage("chat/".concat(r),{trigger:!0}),o(Object(T.G)())},"data-testid":"TakeAPeekButton"},u.a.createElement(v.a,null,"Take a peek")),u.a.createElement(O,{"data-testid":"TakeAPeekPrice"},n>0?u.a.createElement(v.a,null,"Free"):u.a.createElement(A,{price:t,"data-testid":"TakeAPeekPrivatePeekPrice"})))};R.propTypes={privatePeekPrice:E.number,displayName:E.string.isRequired,small:E.bool.isRequired},R.defaultProps={privatePeekPrice:null};var I=R,M=r("2931"),k=function(e){var t=e.privatePrice,r=e.displayName,i=e.small,o=Object(g.e)(M.a);return u.a.createElement(u.a.Fragment,null,u.a.createElement(L,{small:i,onClick:function(){V.default.navigateToChatPage("chat/".concat(r),{trigger:!0}),o&&n.a.Broadcaster.fireEvent(l.a.ModelMessagesConversationController.GLOBALEVENT_PRIVATE_START,r)},"data-testid":"JoinPrivateButton"},u.a.createElement(v.a,null,"Join Private")),u.a.createElement(O,{"data-testid":"JoinPrivatePrice"},u.a.createElement(v.a,{credit:t},1===t?"{credit} credit":"{credit} credits")))};k.propTypes={privatePrice:E.number.isRequired,displayName:E.string.isRequired,small:E.bool.isRequired};var N=k,B=r("bb1d"),x=function(e){var t=e.privatePeekPrice,r=e.inExclusivePrivate,i=e.displayName,o=e.price,a=e.mainCategory,s=Object(g.e)((function(e){return e.listPage.gridLayout})),l=["soul_mate"].includes(a),c="string"==typeof o?o/100:o,d=r?"I'm in Exclusive Private Chat":"I'm in <strong>Private Chat</strong>";return u.a.createElement(B.a,{component:"span",to:n.a.getUrl("Chat/Performer",{performerId:i}),"data-testid":"PrivateChatMaskRouteManagerLink"},u.a.createElement(S,{"data-testid":"PrivateChatMaskContainer"},u.a.createElement(C,{size:s,"data-testid":"PrivateChatMaskTitle"},u.a.createElement(v.a,{as:"em"},d)),!r&&(l?u.a.createElement(N,{privatePrice:c,displayName:i,small:!0,"data-testid":"PrivateChatMaskJoinPrivate"}):u.a.createElement(I,{privatePeekPrice:t,displayName:i,small:!0,"data-testid":"PrivateChatMaskTakeAPeek"}))))};x.propTypes={privatePeekPrice:E.number,inExclusivePrivate:E.bool,displayName:E.string.isRequired,price:Object(E.oneOfType)([E.string,E.number]),mainCategory:E.string.isRequired},x.defaultProps={inExclusivePrivate:!1,price:null,privatePeekPrice:null};var D=x,F=r("e606"),j=r("1cab"),H=r("ab2c"),G=b.d.div(["background:rgba(0,0,0,0.8);color:#fff;cursor:pointer;display:flex;flex-direction:column;font-size:12px;height:100%;justify-content:center;position:absolute;text-align:center;top:0;width:100%;z-index:25;"]),W=b.d.div(["font-size:",";font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);span{color:#fc0;}"],(function(e){return"small"===e.size?"12px":"14px"})),U=Object(b.d)(w.a)(["font-size:12px;line-height:12px;margin:",";padding:8px;"],(function(e){return"small"===e.size?"8px auto":"12px auto"})),z=b.d.div(["color:#ccc;font-size:10px;font-weight:bold;text-transform:capitalize;"]),Y=Object(b.d)(v.a)(["color:#85b400;"]);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var Q=function(e){var t=e.size,r=e.name;return"small"===t?u.a.createElement(v.a,{as:"p"},"I'm in [span]VIP Show[/span]"):u.a.createElement(v.a,{as:"p",name:r},"{name}'s [span]VIP Show[/span]")};Q.propTypes={size:y.a.string.isRequired,name:y.a.string.isRequired};var J=function(e){var t=e.show,r=Object(g.d)(),i=Object(g.e)((function(e){return e.listPage.entities[t.performer.id]})),o=Object(g.e)((function(e){return e.listPage.gridLayout})),s=Object(g.e)((function(e){return Object(F.c)(e,t.performer.id)})),d=Object(c.useRef)(!1),h=i.display_name||i.displayName,f=K(Object(c.useState)(!1),2),p=f[0],m=f[1];Object(c.useEffect)((function(){d.current=!0;var e=function(e){return d.current&&m(h===e)},t=function(){return d.current&&m(!1)};return n.a.Broadcaster.on(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,e),n.a.Broadcaster.on(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,t),function(){n.a.Broadcaster.un(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,t),n.a.Broadcaster.un(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,e),d.current=!1}}),[h,p]);var P=t.status===H.a.STARTED,_=P||s&&!p,E=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),r(Object(T.x)());var t=a.a.isCurrentPage(l.a.PageId.FAVORITE_INDEX)?j.default.CONST.PAGE.FAVORITE:j.default.CONST.PAGE.LISTS;j.default.trackGenericEvent({eventCategory:t,eventAction:j.default.CONST.ACTION.CLICK,eventLabel:"join now vip show"})}),[r]);return u.a.createElement(B.a,{href:n.a.getUrl("Chat/Performer",{performerId:h}),"data-testid":"VipShowMaskRouteManagerLink"},_&&u.a.createElement(G,{"data-testid":"VipShowMaskVipShowBoxContainer"},u.a.createElement(W,{size:o,"data-testid":"VipShowMaskTitle"},u.a.createElement(Q,{size:o,name:h,"data-testid":"VipShowMaskTitleText"})),u.a.createElement(U,{onClick:E,size:o,theme:s?"lime":"primary","data-testid":"VipShowMaskJoinNowButton"},u.a.createElement(v.a,null,s||P?"Join the show":"Book your place")),u.a.createElement(z,{size:o,"data-testid":"VipShowMaskContainerFooter"},s?u.a.createElement(Y,{as:"span","data-testid":"VipShowMaskTranslatedBooked"},"Booked"):u.a.createElement(v.a,{credit:t.minimumBuyInCredits},1===t.minimumBuyInCredits?"{credit} credit":"{credit} credits"))))};J.propTypes={show:y.a.shape({minimumBuyInCredits:y.a.number,viewer:y.a.shape({subscribed:y.a.bool}),performer:y.a.shape({id:y.a.number}),status:y.a.string}).isRequired};var Z=J,X=r("3686"),$=r("e1b0"),ee=r("bd6a"),te=r("768e7"),re=r("dace"),ie=r("6d88");function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var ae=Object(c.lazy)((function(){return r.e(89).then(r.bind(null,"58a7"))})),se=function(e){var t=e.performerId,r=document.querySelector("#container_".concat(t," .favorite")),i=Object(g.e)((function(e){return e.listPage.entities[t]})),n=i.displayName||i.display_name,o=i.performerNick||i.pid,a=Object(c.useCallback)((function(e){var t=e.isUserLoggedIn,r=e.requestStatus;t||"added"!==r||j.default.trackGenericEvent({eventAction:j.GA_CONST.ACTION.ADDED_FAVORITE,eventCategory:j.GA_CONST.PAGE.LISTS,eventLabel:"success"})}),[]);return r?Object(d.createPortal)(u.a.createElement(te.a,{performerId:t,performerNick:o,displayName:n,background:!1,popoverPosition:re.a.LEFT,popoverPortalContainer:document.body,trackOnClick:a,"data-testid":"PerformerViewMasksFavoriteButton"}),r):null},le=function(e){var t=e.performerId,r=document.querySelector("#container_".concat(t)),i=Object(_.a)("#container_".concat(t," .performerStatusContainer"),[]);if(!r)return null;var n=r.classList.contains("has-story");return Object(d.createPortal)(u.a.createElement($.e,{performerId:t,hasStory:n,className:"status-indicator","data-testid":"PerformerViewMasksPerformerStatusIndicator"}),i)},ce=function(e){var t=e.performerId,r=Object(g.e)((function(e){return Object(X.e)(e,t)})),i=Object(g.e)((function(e){return e.listPage.entities[t]})),n=i.sneak_peek_price,o=i.price,a=i.display_name||i.displayName,s=i.main_category||i.mainCategory,l=Object(_.a)("#container_".concat(t," a"),i),c=Object(g.e)((function(e){return Object(F.d)(e,t)}));if(!r)return null;var h=r.status,f=r.inExclusivePrivate;return c?ie.isVipShowEnabled?Object(d.createPortal)(u.a.createElement(Z,{show:c,"data-testid":"PerformerViewMasksVipShowMask"}),l):Object(d.createPortal)(u.a.createElement(D,{privatePeekPrice:n,inExclusivePrivate:!0,displayName:a,price:o,mainCategory:s,"data-testid":"PerformerViewMasksPrivateChatMask"}),l):2===h?Object(d.createPortal)(u.a.createElement(D,{privatePeekPrice:n,inExclusivePrivate:!!f,displayName:a,price:o,mainCategory:s,"data-testid":"PerformerViewMasksPrivateChatMask"}),l):null},ue=function(){var e=Object(g.e)((function(e){return e.listPage.ids})),t=ne(Object(P.a)("performer-debug-status",!1),1)[0];return Object(c.useEffect)((function(){var t=Object(ee.a)(e,(function(t){return Object(ee.a)(e,(function(e){return e===t})).length>1}));t.length>0&&console.warn("Duplicated ids in list page reducer",[t])}),[e]),0===e.length||n.a.Config.get("isStoryPageFeed")?null:e.map((function(e){return u.a.createElement(u.a.Fragment,{key:"mask-".concat(e)},u.a.createElement(c.Suspense,{fallback:null,"data-testid":"PerformerViewMasksSuspense"},t&&u.a.createElement(ae,{performerId:e,"data-testid":"PerformerViewMasksPerformerStatusDebug"})),u.a.createElement(le,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewStatusIndicator"}),u.a.createElement(se,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewFavoriteButton"}),u.a.createElement(ce,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewMask"}))}))},de=r("9042"),he=r("0031"),fe=r.n(he),pe=r("98d2"),me=r("178a"),ge=b.d.div(["font-family:Roboto,sans-serif;display:none;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);text-align:center;color:#fff;align-items:center;justify-content:center;flex-direction:column;z-index:25;button{margin:10px 0;font-size:12px;line-height:30px;height:30px;padding:0 8px;border-radius:3px;overflow:hidden;}span,em{display:block;}span{font-family:Arial,sans-serif;font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);}em{font-size:10px;color:#ccc;font-weight:bold;}",""],(function(e){return"small"===e.size?"\n                span {\n                    padding: 0 10px;\n                    font-size: 12px;\n                }\n                button {\n                    margin: 8px 0;\n                }\n            ":"\n                span {\n                    padding: 0 15px;\n                    font-size: 14px;\n                }\n                button {\n                    margin: 12px 0;\n                }\n            "})),Pe=function(e){var t=e.price,r=e.freeVideoCallSeconds;return r>l.a.MIN_VIDEO_CALL_SECONDS_TO_SHOW_INFO?u.a.createElement(v.a,{as:"em",value:r},"{value} Free Seconds"):u.a.createElement(v.a,{as:"em",credits:t},"{credits} Credits / minute")};Pe.propTypes={price:E.string,freeVideoCallSeconds:E.number},Pe.defaultProps={price:null,freeVideoCallSeconds:0};var _e=function(e){var t=e.size;return e.freeVideoCallSeconds>l.a.MIN_VIDEO_CALL_SECONDS_TO_SHOW_INFO&&"small"!==t?u.a.createElement(v.a,null,"Call me for Free"):u.a.createElement(v.a,null,"Call me")};_e.propTypes={size:E.string.isRequired,freeVideoCallSeconds:E.number},_e.defaultProps={freeVideoCallSeconds:0};var Ee=function(e){var t=e.price,r=e.onButtonClick,i=Object(g.e)((function(e){return e.user._user.balances.freeVideoCallSecond})),n=Object(g.e)((function(e){return e.listPage.gridLayout}));return u.a.createElement(ge,{size:n,className:"video_call_container","data-testid":"VideoCallSpotBlockMaskSpotBlockMask"},u.a.createElement("span",null,u.a.createElement(v.a,null,"I'm available")),u.a.createElement(me.a,{type:"button",onClick:r,"data-testid":"VideoCallSpotBlockMaskButton"},u.a.createElement(_e,{size:n,freeVideoCallSeconds:i,"data-testid":"VideoCallSpotBlockMaskCta"})),u.a.createElement(Pe,{price:t,freeVideoCallSeconds:i,"data-testid":"VideoCallSpotBlockMaskAltText"}))};Ee.propTypes={price:E.string,onButtonClick:E.func.isRequired},Ee.defaultProps={price:null};var ye=Ee,ve=r("ffe4"),be=r("68b3"),we=r.n(be),Se=r("d30b"),Ce=function e(t){e.superclass.constructor.call(this,t)};Ext.extend(Ce,Se.default,{name:"HistoryTemplate",tpl:'<article id="{id}" class="{containerClass} {hasVideoCall} {lazyLoadClass}" data-status="{dataStatus}">\n            {imageBlock}\n            <div class="performerStatusContainer"></div>\n            <a href="{href}" rev="{rev}">\n                {debugText}\n                <span class="favorite {isFavorite}" data-model-id="{favoriteId}">\n                    <span class="broken-heart">\n                        <i>'.concat(a.a.svgIconBlock("heart-broken-left"),"</i>\n                        <i>").concat(a.a.svgIconBlock("heart-broken-right"),'</i>\n                    </span>\n                </span>\n                <span class="history_status history_type">{historyType}</span>\n                <span class="history_status history_time">{historyTime}</span>\n                {rightBottomBadge}\n                <span class="performer_name">\n                    {displayName}\n                </span>\n                {badgeBlock}\n                {videoBadgeBlock}\n            </a>\n        </article>'),_setTemplateParams:function(e){return Ext.apply(Ce.superclass._setTemplateParams.call(this,e),{historyType:e.lastHistoryEventTimeMessage,historyTime:e.lastHistoryEventType})}});var Oe=Ce,Le=r("a462"),Te=r.n(Le),Ve=r("3b17"),Ae=r.n(Ve),Re=r("089a");function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ne=function e(t){e.superclass.constructor.call(this,t)};Ext.extend(Ne,we.a,{name:"PerformerView",favoriteButtonSel:".favorite",hoverClass:"hover",lppPlayingClass:"lpp_playing",statusAttributeName:"data-status",_performerTemplates:n.a.object([[l.a.PerformerView.BLOCK_TYPE_PERFORMER,Se.default],[l.a.PerformerView.BLOCK_TYPE_FAVORITES,Se.default],[l.a.PerformerView.BLOCK_TYPE_HISTORY,Oe],[l.a.PerformerView.BLOCK_TYPE_SNAPSHOT,Te.a],[l.a.PerformerView.BLOCK_TYPE_NEW_CATEGORIES,Ae.a]]),_itemMargin:0,_minImageSide:0,init:function(){this.addEvents(l.a.PerformerView.EVENT_VIEW_MOUSEOVER,l.a.PerformerView.EVENT_VIEW_MOUSEOUT),Ne.superclass.init.call(this),this._createDebugLabels()},getAnchorElement:function(){return this.select("a").item(0)},getThumbnailUrl:function(){return this.select(".performer-image").item(0).dom.src},getDimensions:function(){var e=this.getItemImage().dom;return e?e.getBoundingClientRect():{width:0,height:0}},_createDebugLabels:function(){var e=this;1===parseInt(localStorage.getItem("performer-view-debug-labels-enabled"),10)&&r.e(17).then(r.bind(null,"aeed")).then((function(t){new(0,t.default)(e.element,e.model.attributes)})).catch((function(){return"An error occurred while loading the component"}))},_getTemplate:function(){return this._performerTemplates[this.model.getBlockType()]},getVideoCallContainer:function(){var e=document.createElement("div");return this.element.select("a").item(0).dom.append(e),this.videoCallMaskContainer=e,e},_appendVideoCallTemplate:function(){var e=0===this.model.getStatus();return 0===parseInt(n.a.getMeta("isSearchPage"),10)&&a.a.isIndexPage()||!e||this.model.getIsVideoCallAppended()||(h.a.render(u.a.createElement(f.a,{store:p.store,"data-testid":"PerformerViewProvider"},u.a.createElement(ye,{price:this.model.getVideoCallPrice(),onButtonClick:this.onVideoCallButtonClick,"data-testid":"PerformerViewVideoCallSpotBlockMask"})),this.getVideoCallContainer()),this.model.setIsVideoCallAppended()),this},_appendSendMessageTemplate:function(){var e,t=0===this.model.getStatus(),r=this.element.select("a").item(0),i=(e=Object(Re.a)("I'm available"),'<div class="send_message_container">\n\t\t\t\t<span>'.concat(e,'</span>\n\t\t\t\t<button class="send_message_button first_button">').concat(Object(Re.a)("Send me a message"),"</button>\n\t\t\t</div>"));return!t||this.model.hasVideoCall()||this.model.getIsSendMessageAppended()||(this.element.addClass("sendMessageAllowed"),Ext.DomHelper.append(r,i),this.model.setIsSendMessageAppended(),n.a.on([{element:this.element.select(".send_message_button"),event:"click",handler:this.onSendMessageButtonClick}],this)),this},_onStatusChange:function(e){this.element&&this.element.dom.setAttribute(this.statusAttributeName,e)},_onPerformerElementClick:function(e,t){e.preventDefault();var r=Ext.get(t).findParent(this.favoriteButtonSel,10,!0),i=t.classList.contains("videoCallBadge"),o=this.element.dom.classList.contains("has-story"),s=t.classList.contains("vipshow_icon");if(this._trackBadgeIconClick({isFavoriteBtn:!!r,isVideoCallBadge:i,isStoryCircle:o,isVipShowIcon:s}),!(a.a.getMouseButton(e)===l.a.Util.MIDDLE_MOUSE_BUTTON||e.ctrlKey||r||a.a.isModalOpenDenied())){var c=this.model.getDisplayName(),u=this.model.hasVipShow();this._trackPerformerClick(u),"two"===window.AB_TEST_CONFIG.newMessage?window.top.document.location.href=n.a.getUrl("ChatHtml5/Performer",{performerId:c},{}):V.default.navigateToChatPage("chat/".concat(c))}},_trackPerformerClick:function(e){e&&j.default.trackGenericEvent({eventCategory:j.default.CONST.PAGE.LISTS,eventAction:j.default.CONST.ACTION.CLICK,eventLabel:"vip show room"})},_trackBadgeIconClick:function(e){var t=e.isFavoriteBtn,r=e.isVideoCallBadge,i=e.isStoryCircle,n=e.isVipShowIcon,o={eventCategory:j.default.CONST.PAGE.LISTS,eventAction:j.default.CONST.ACTION.BADGE_ICON_CLICK};return t?j.default.trackGenericEvent(Me(Me({},o),{},{eventLabel:"favorite icon"})):r?j.default.trackGenericEvent(Me(Me({},o),{},{eventLabel:"video call icon"})):i?j.default.trackGenericEvent(Me(Me({},o),{},{eventLabel:"story circle"})):n?j.default.trackGenericEvent(Me(Me({},o),{},{eventLabel:"vip badge"})):void 0},_onTouchEnd:function(){this.isTouchEvent=!0},_onMouseEnter:function(){if(this.isTouchEvent)this.isTouchEvent=!1;else if(this.addHoverClass(),this.model.setHovered(!0),!this.model.hasOngoingVipShow()){this.model.hasVideoCall()&&this._appendVideoCallTemplate(),a.a.isSendMessageAllowedInThumbnail()&&this._appendSendMessageTemplate();var e,t=this.model.hasOngoingVipShow(),r=this.model.hasVipShow();if((t||r)&&!ie.isVipShowEnabled)null===(e=this.element)||void 0===e||e.addClass("vip_show_disabled");this.fireEvent(l.a.PerformerView.EVENT_VIEW_MOUSEOVER,this),n.a.Broadcaster.fireEvent(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,this.model.getDisplayName())}},_onMouseLeave:function(){var e;null===(e=this.element)||void 0===e||e.removeClass("vip_show_disabled"),this.removeHoverClass(),this.model.setHovered(!1),this.model.hasOngoingVipShow()||(this.fireEvent(l.a.PerformerView.EVENT_VIEW_MOUSEOUT,this),n.a.Broadcaster.fireEvent(l.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,this.model.getDisplayName()))},_onLppChange:function(){this.element&&this.element[this.model.getIsLppPlaying()?"addClass":"removeClass"](this.lppPlayingClass)},_onGetsFullyInViewPort:function(){this.model.un(l.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,this._onGetsFullyInViewPort,this),n.a.Broadcaster.fireEvent(l.a.PerformerView.GLOBALEVENT_GETS_FULLY_IN_VIEWPORT,{scope:this})},addHoverClass:function(){this.element&&this.getAnchorElement().addClass(this.hoverClass)},removeHoverClass:function(){this.element&&this.getAnchorElement().removeClass(this.hoverClass)},onVideoCallButtonClick:function(){n.a.fireEvent("PerformerView:videoCallButtonClick"),j.default.trackVideoCallClick({eventSource:a.a.isCurrentPage(l.a.PageId.FAVORITE_INDEX)?j.GA_CONST.PAGE.FAVORITE:j.GA_CONST.PAGE.LISTS})},onSendMessageButtonClick:function(e){e.stopEvent(),pe.default.isLoggedIn()||ie.isGuestOnboardingEnabled?(j.default.trackGenericEvent({eventCategory:a.a.isCurrentPage(l.a.PageId.FAVORITE_INDEX)?j.default.CONST.PAGE.FAVORITE:j.default.CONST.PAGE.LISTS,eventAction:"click",eventLabel:"send message"}),ve.default.openModal("messages/".concat(this.model.getDisplayName()))):V.default.navigate("signup",{trigger:!0,preventNavigateBack:!0},"listpage performer send message button click")},_bindElements:function(){this.element&&this.element.on({touchend:this._onTouchEnd,mouseenter:this._onMouseEnter,mouseleave:this._onMouseLeave,click:this._onPerformerElementClick,scope:this})},_unBindElements:function(){this.element&&this.element.un({touchend:this._onTouchEnd,mouseenter:this._onMouseEnter,mouseleave:this._onMouseLeave,click:this._onPerformerElementClick,scope:this}),this.videoCallMaskContainer&&h.a.unmountComponentAtNode(this.videoCallMaskContainer)},bind:function(){Ne.superclass.bind.call(this),n.a.on([{element:this.model,event:l.a.PerformerModel.EVENT_STATUS_CHANGE,handler:this._onStatusChange},{element:this.model,event:l.a.PerformerModel.EVENT_LPP_STATUS_CHANGE,handler:this._onLppChange},{element:this.model,event:l.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,handler:this._onGetsFullyInViewPort}],this)}});var Be=Ne,xe=r("950c");function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=function e(t,r){e.superclass.constructor.call(this,t,r)};t.default=Ext.extend(je,n.a.View,{name:"ListPageView",_performerCollection:{},_containerIdPrefix:"container_",listpageId:"listpage",pageSelector:".page.showless",pageClass:"page showless",visiblePageSelector:".page.visible",visiblePageClass:"visible",_listPageCount:1,_showMoreBtnId:"show_more_btn",_noResultSelector:".no-result",_noResultHiddenClass:"is-hidden",_pageIdAttribute:"data-page-id",_errorTagTemplate:'<span id="error_hint"></span>',_listPageBtnCls:"first_button",_refreshPageBtnId:"refresh_page_btn",_scrollTopPos:0,_inViewportObserver:null,init:function(){je.superclass.init.call(this),this._errorTagTemplate='<span id="error_hint">'.concat(n.a.translate("There are no more live performers at the moment... Please try again later"),"</span>"),this.element&&(this._selectElements(),this._bindElements()),this._createViewportObserver(),this.initializePerformerViewMasks()},_createViewportObserver:function(){var e=this;this._inViewportObserver=new IntersectionObserver((function(t,r){var i=r.thresholds;t.forEach((function(t){var r=+t.target.id.replace("container_",""),n=t.intersectionRatio>i[0],o=t.intersectionRatio===i[1];if(!Number.isNaN(r)){var a=e._performerCollection[r];a&&a.model.setIsOnViewPort(o,n)}}))}),{threshold:[0,1]})},initializePerformerViewMasks:function(){this.performerViewMasksContainer=Ext.DomHelper.append(this.element,"<div></div>",!0),this.renderPerformerViewMasks()},renderPerformerViewMasks:function(){h.a.render(u.a.createElement(f.a,{store:p.store,"data-testid":"ListPageViewAbstractProvider"},u.a.createElement(ue,{"data-testid":"ListPageViewAbstractPerformerViewMasks"})),this.performerViewMasksContainer.dom)},_selectElements:function(){this._listpageEl=Ext.get(this.listpageId),this._showMoreBtnEl=Ext.get(this._showMoreBtnId),this._noResultElement=this.element.select(this._noResultSelector)},updateNoResultBlockVisibility:function(){this._noResultElement&&(Object.keys(this._performerCollection).length>0?this._noResultElement.addClass(this._noResultHiddenClass):this._noResultElement.removeClass(this._noResultHiddenClass))},getPerformerViewById:function(e){return this._performerCollection[e]},createPerformerView:function(e,t){var r=Ext.apply({model:e},t),i=new(this._getViewClass(e))(r);return this._inViewportObserver.observe(i.element.dom),this._addPerformerViewToCollection(e.getId(),i),i},showMoreError:function(){var e=this;this._listpageEl.addClass(l.a.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE),this.destroyErrorPopover();var t=document.createElement("div");t.className="listpage_showmore_popover_container",document.querySelector(".show_more_container").prepend(t),this.popoverContainer=document.querySelector(".listpage_showmore_popover_container"),h.a.render(u.a.createElement(de.b,{autoHideDelay:7e3,isOpen:!0,usePortal:!1,onClosed:function(){return e.handlePopoverClose()},content:n.a.translate("There are no more live performers at the moment... Please try again later"),target:u.a.createElement("div",null),"data-testid":"ListPageViewAbstractCustomPopover"}),this.popoverContainer)},destroyErrorPopover:function(){this.popoverContainer&&(h.a.unmountComponentAtNode(this.popoverContainer),this.popoverContainer.parentNode.removeChild(this.popoverContainer),this.popoverContainer=null)},handlePopoverClose:function(){this.destroyErrorPopover(),this._createRefreshPageBtn()},removeShowMoreError:function(){this.destroyErrorPopover()},_createRefreshPageBtn:function(){Ext.fly(this._refreshPageBtnId)||Ext.DomHelper.insertAfter(this._showMoreBtnEl,{tag:"a",href:"javascript:window.location.reload();",cls:this._listPageBtnCls,id:this._refreshPageBtnId,html:n.a.translate("Refresh page")})},_getViewClass:function(e){return e instanceof fe.a?xe.a:Be},_addPerformerViewToCollection:function(e,t){t.on(l.a.Chaos.View.EVENT_DESTROY,n.a.bind(this._onPerformerViewDestroy,this,e),this),t.on(l.a.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE,this._onPerformerViewBeforeReplace,this),t.on(l.a.ListPageItemViewAbstract.EVENT_VIEW_REPLACED,this._onPerformerViewReplaced,this),t.on(l.a.PerformerView.EVENT_VIEW_MOUSEOVER,this._onPerformerViewMouseOver,this),t.on(l.a.PerformerView.EVENT_VIEW_MOUSEOUT,this._onPerformerViewMouseOut,this),this._performerCollection[e]=t,t.setCurrentOrder(Object.keys(this._performerCollection).length)},_appendPerformerViewToContainer:function(e,t){t.element&&e.appendChild(t.element)},_createNewListPage:function(){var e,t=this.select("".concat(this.pageSelector,":last")).item(0),r=n.a.object([["tag","section"],["cls",this.pageClass],[this._pageIdAttribute,this._listPageCount]]);return e=n.a.isNull(t)?this._insertZeroPage(r):Ext.DomHelper.insertAfter(t,r,!0),this._listPageCount++,e},_insertZeroPage:function(e){return Ext.DomHelper.insertFirst(this.element,e,!0)},_managePageVisibility:function(){n.a.each(this.select(this.pageSelector).elements,(function(e){var t=Ext.get(e),r=a.a.isVerticallyInViewport(e,2500);r&&!t.hasClass(this.visiblePageClass)?t.addClass(this.visiblePageClass).setStyle({height:"auto"}):!r&&t.hasClass(this.visiblePageClass)&&this.select(this.visiblePageSelector).getCount()>1&&t.setStyle({height:"".concat(this.select(this.visiblePageSelector).item(0).dom.getBoundingClientRect().height,"px")}).removeClass(this.visiblePageClass)}),this)},_onNextPage:function(e){var t=this._createNewListPage();n.a.chain(e).map(this.createPerformerView,this).each(n.a.bind(this._appendPerformerViewToContainer,this,t)),this.updateNoResultBlockVisibility()},addPerformerAttributesToStore:function(){var e=[];Object.values(this._performerCollection).forEach((function(t){return e.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.model.attributes))})),p.store.dispatch(Object(m.addMorePerformers)(e))},_onPerformerViewDestroy:function(e){e in this._performerCollection&&(this._performerCollection[e].purgeListeners(),delete this._performerCollection[e])},_onDestroyModels:function(){window.scrollTo(0,0),this._listPageCount=0,this.element.select(this.pageSelector).remove()},_onPerformerViewBeforeReplace:function(e){e.element&&this._inViewportObserver.unobserve(e.element.dom)},_onPerformerViewReplaced:function(e){n.a.hasPath(e,"newPerformerView")&&n.a.hasPath(e,"oldPerformerView")&&(e.oldPerformerView.model.destroy(),this._addPerformerViewToCollection(e.newPerformerView.model.getId(),e.newPerformerView))},_onPerformerInit:function(e){if(!1===e.attributes.preRendered){var t=this.createPerformerView(e);this._appendPerformerViewToContainer(Ext.select(this.pageSelector),t),a.a.updateLazy()}else{var r=this._containerIdPrefix+e.getId();this.createPerformerView(e,{id:r})}this.updateNoResultBlockVisibility()},_onPerformerViewMouseOver:function(e){this.fireEvent(l.a.ListPageViewAbstract.EVENT_VIEW_MOUSEOVER,e)},_onPerformerViewMouseOut:function(e){this.fireEvent(l.a.ListPageViewAbstract.EVENT_VIEW_MOUSEOUT,e)},_onStartLoading:function(){this.removeShowMoreError(),this.element.addClass(l.a.ListPageViewAbstract.CLASS_LOADING)},_onFinishedLoading:function(){this.element.removeClass(l.a.ListPageViewAbstract.CLASS_LOADING),this._managePageVisibility(),this.addPerformerAttributesToStore()},_onShowMoreButtonClick:function(e){e.stopPropagation(),e.preventDefault(),this.fireEvent(l.a.ListPageViewAbstract.EVENT_SHOW_MORE_BUTTON_CLICK),this.model.getNextPage()},_onViewPortChange:function(){this._managePageVisibility(),a.a.updateLazy()},bind:function(){je.superclass.bind.call(this),this._bindedModelEvents=n.a.object([[l.a.ListPageModelAbstract.EVENT_PERFORMER_INIT,this._onPerformerInit],[l.a.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,this._onNextPage],[l.a.ListPageModelAbstract.EVENT_START_LOADING,this._onStartLoading],[l.a.ListPageModelAbstract.EVENT_FINISHED_LOADING,this._onFinishedLoading],[l.a.ListPageModelAbstract.EVENT_DESTROY_ALL,this._onDestroyModels],["scope",this]]),this.model.on(this._bindedModelEvents),Ext.fly(window).on({scroll:this._onViewPortChange,resize:this._onViewPortChange,scope:this})},unbind:function(){je.superclass.unbind.call(this),this.model.un(this._bindedModelEvents),Ext.fly(window).un({scroll:this._onViewPortChange,resize:this._onViewPortChange,scope:this}),this._unbindElements()},_bindElements:function(){this._showMoreBtnEl&&this._showMoreBtnEl.on("click",this._onShowMoreButtonClick,this)},_unbindElements:function(){this._showMoreBtnEl&&this._showMoreBtnEl.un("click",this._onShowMoreButtonClick,this)}})},ef59:function(e,t,r){"use strict";var i=r("8af1");t.a=function(e,t){var r=Object(i.useRef)(null);Object(i.useEffect)((function(){var t=document.querySelector(e);if(t)return t.appendChild(r.current),function(){r.current.remove(),-1===t.childNodes.length&&t.remove()}}),[t,e]);return r.current||(r.current=document.createElement("div")),r.current}}}]);