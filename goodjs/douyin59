"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[2875],{94116:function(e,i,o){o.d(i,{Z:function(){return le}});var n,t=o(30906),r=o(77007),l=o(65146),a=o(30673),d=o(62754),u=o.n(d),s=o(19672),c=o.n(s),_=o(82766),v=o.n(_),p=o(94090),f=o.n(p),m=o(34346),g=o.n(m),y=o(1821),h=o.n(y),w=o(56442),I=o.n(w),b=o(90457),T=o.n(b),L=o(21155),P=o.n(L),S=o(53864),E=o(80310),k=o.n(E),C=o(79705),x=o.n(C),R=o(82109),A=o(14392),D=o(72603),F=o(16016),N=o(30978),Z={actionableText:"Nu66P_ba",twemojiText:"jZ9bChTp",userText:"DxCF1YBq",hashtagText:"vStoQqaB",searchText:"KO6vI1qC",text:"kpPqRN9O",icon:"E2fmKKFT",clarity:"oWWIoQGQ"},M=o(64408),V=o(32781),O=o(5594),q=o.n(O),H=o(32487),z=(0,H.kv)(),U=/(\[\S+?\])/g,B=function(e){var i,o=e.text,n=e.imgClassname,t=e.renderTextWithTag,r=(0,S.useState)(z),l=(0,V.Z)(r,2),a=l[0],d=l[1];if((0,S.useEffect)((function(){(0,M.Z)(q().mark((function e(){var i,o,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.zk)();case 2:i=e.sent,o=i.statusCode,n=i.data,0===o&&(z=n,d(n));case 6:case"end":return e.stop()}}),e)})))()}),[]),!o)return null;var u=g()(i=o.split(U)).call(i,(function(e,i){var o;return e?a[e]?S.createElement("img",{className:n,key:"emoji-text-".concat(i),src:globalThis.xssNamespace.douyin_web.filterUrl(null===(o=a[e])||void 0===o?void 0:o.img,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),alt:e,style:{margin:"0 4px",verticalAlign:"text-bottom"}}):S.createElement("span",{key:"emoji-text-".concat(i)},t?t(e):e):null}));return S.createElement("span",null,u)},G=S.memo(B);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},K.apply(this,arguments)}var W,Q=function(e){return S.createElement("svg",K({width:9,height:9,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=S.createElement("path",{clipRule:"evenodd",d:"M1.2 4.024c0-1.375 1.05-2.426 2.426-2.426 1.217 0 2.269 1.051 2.269 2.426 0 1.218-1.051 2.269-2.27 2.269-1.374 0-2.425-1.051-2.425-2.269zM3.626.398C1.588.398 0 1.987 0 4.024 0 5.96 1.645 7.493 3.626 7.493c.729 0 1.414-.239 1.98-.64l1.57 1.57a.6.6 0 00.848-.85l-1.57-1.57c.402-.565.64-1.25.64-1.979 0-1.98-1.533-3.626-3.468-3.626z"})))},j=o(77060),Y=o(9909),J=S.memo((function(e){var i=e.searchQueryId,o=e.text,n=e.onSearchTextClick,t=e.onCloseVideoPlayer,r=e.href,l=e.className,a=e.onMounted,d=e.searchTextPos,u=e.isSpider,s=(0,S.useCallback)((function(e){t&&t(),n&&n(o,i,d,e)}),[i,n,t,d,o]);(0,S.useEffect)((function(){a&&a(i,o,d)}),[i,o,d]);var c=!u||u&&!(0,A.y2)(o,5);return S.createElement(S.Fragment,null,r&&c?S.createElement(j.a,{className:x()(Z.searchText,l),onClick:s,href:globalThis.xssNamespace.douyin_web.filterUrl(r,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",isNeedSeoOpt:!0},S.createElement("span",{className:Z.text},o),S.createElement(Y.Z,{className:Z.icon,width:9,height:9,viewBox:"0 0 9 9",src:globalThis.xssNamespace.douyin_web.filterUrl(Q,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})):S.createElement("span",{className:x()(Z.searchText,l),onClick:s},S.createElement("span",{className:Z.text},o),S.createElement(Y.Z,{className:Z.icon,width:9,height:9,viewBox:"0 0 9 9",src:globalThis.xssNamespace.douyin_web.filterUrl(Q,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})))})),X=function(e,i,o){try{return null==o?void 0:o(e,i)}catch(n){return null==o?void 0:o((0,N.eC)(e),i)}};var $=S.memo((function(e){var i=e.hashtagId,o=e.text,n=e.onClickHashtag,t=e.onCloseVideoPlayer,r=e.href,l=e.className,a=e.isCommerce,d=e.isSpider,u=(0,S.useCallback)((function(){t&&t(),n&&n(i,o,a)}),[i,n,t,o,a]),s=!d||d&&!(0,A.y2)(o,6);return S.createElement(S.Fragment,null,r&&s?S.createElement(j.a,{className:x()(Z.hashtagText,l),onClick:u,href:globalThis.xssNamespace.douyin_web.filterUrl(r,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",isNeedSeoOpt:!0},S.createElement("span",null,o)):S.createElement("span",{className:x()(Z.hashtagText,l),onClick:u},S.createElement("span",null,o)))})),ee=S.memo((function(e){var i,o,n=e.userId,t=e.secUid,r=e.text,l=e.enterMethod,a=e.onClickUser,d=e.onCloseVideoPlayer,u=e.className,s=e.awemeInfo,c=(0,S.useCallback)((function(){d&&d(),a&&a(n)}),[n,a,d]),_=f()(i=f()(o="enter_method=".concat(l,"&enter_from=")).call(o,(0,D.mo)(),"&from_gid=")).call(i,null==s?void 0:s.awemeId),v=t&&(0,F.HC)(t,_);return S.createElement(j.a,{onClick:function(e){c(),v||e.preventDefault()},className:x()(Z.userText,u),href:globalThis.xssNamespace.douyin_web.filterUrl(v,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",rel:"noreferrer",isNeedSeoOpt:!0},S.createElement("span",{id:r},r))}));function ie(e){var i=e.text,o=e.isRemoveRowspan,n=e.renderTextWithTag,t=e.seoInfo,r=i;o&&(r=(0,N.LT)(r));var l=r.split("\n");return S.createElement(S.Fragment,null,g()(l).call(l,(function(e,i){return null!=t&&t.isSpider&&null!=t&&t.awemeId&&h()(e).call(e)&&!/^#/.test(h()(e).call(e))?S.createElement("a",{key:i,href:globalThis.xssNamespace.douyin_web.filterUrl((0,F.JF)(null==t?void 0:t.awemeId),null,{logType:"js.href/src",mode:"black",reportOnly:!1})},e):null!=t&&t.isSpider?S.createElement(S.Fragment,null,e):S.createElement("span",{key:i},S.createElement(G,{text:e,imgClassname:Z.twemojiText,renderTextWithTag:n}),i<l.length-1?S.createElement("br",null):"")})))}var oe=(W={},(0,l.Z)(W,R.w.User,(function(e,i){var o=e.text,n=e.enterMethod,t=e.userTextClassName,r=e.onClickUser,l=e.onCloseVideoPlayer,a=e.awemeInfo,d=i.userId,u=i.secUid;return S.createElement(ee,{text:o,enterMethod:n,className:t,onClickUser:r,onCloseVideoPlayer:l,awemeInfo:a,userId:d,secUid:u})})),(0,l.Z)(W,R.w.HashTag,(function(e,i){var o=e.hashTagClassName,n=e.text,t=e.getHashTagHref,r=e.onClickHashtag,l=e.onCloseVideoPlayer,a=e.seoInfo,d=i.hashtagId,u=i.isCommerce;return S.createElement($,{className:o,href:globalThis.xssNamespace.douyin_web.filterUrl(X((null==n?void 0:I()(n).call(n,1))||"",d||"",t),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),hashtagId:d,text:n,onClickHashtag:r,onCloseVideoPlayer:l,isCommerce:u,isSpider:null==a?void 0:a.isSpider})})),(0,l.Z)(W,R.w.Search,(function(e,i){var o=e.text,n=e.onCloseVideoPlayer,t=e.onSearchTextClick,r=e.getSearchTextUrl,l=e.searchTextClass,a=e.showSearchHighlight,d=e.isRemoveRowspan,u=e.onSearchTextMounted,s=e.seoInfo,c=i.searchQueryId,_=i.searchTextPos;return a?S.createElement(J,{onCloseVideoPlayer:n,href:globalThis.xssNamespace.douyin_web.filterUrl(X(o,c,r),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),text:o,onSearchTextClick:t,searchQueryId:c,className:l,onMounted:u,searchTextPos:_,isSpider:null==s?void 0:s.isSpider}):S.createElement(ie,{isRemoveRowspan:d,text:o,seoInfo:s})})),(0,l.Z)(W,R.w.Unknown,(function(e){var i=e.isRemoveRowspan,o=e.text,n=e.renderTextWithTag,t=e.seoInfo;return S.createElement(ie,{isRemoveRowspan:i,text:o,renderTextWithTag:n,seoInfo:t})})),W);function ne(e,i){var o=function(e){if(!e)return R.w.Unknown;var i=e.type,o=e.userId,n=e.hashtagId;return u()(i)?o?R.w.User:n?R.w.HashTag:R.w.Unknown:i}(i),n=oe[o];return n?n(e,i):oe[R.w.Unknown](e)}var te=function(e,i){var o,n=0,t=0,l=(0,r.Z)(e);try{for(l.s();!(o=l.n()).done;){var a=o.value;if(t===i)break;t+=1,n+=a.length}}catch(d){l.e(d)}finally{l.f()}return n};function re(e){var i=e.text,o=void 0===i?"":i,n=e.textExtra,r=void 0===n?null:n,l=e.onClick,d=void 0===l?null:l,u=e.children,s=void 0===u?undefined:u,_=e.type,p=void 0===_?"":_,f=e.className,m=e.seoInfo,y=e.wrapperClassName,h=(0,S.useRef)(null),w=o||"",b=[];if(!r||c()(r)&&0===r.length)b.push(ne((0,t.Z)((0,t.Z)({},e),{},{text:w})));else{var L=0,E=function(e){if(e&&c()(e)&&e.length>0){var i=(0,a.Z)(e);return v()(i).call(i,(function(e,i){return e.start-i.start})),i}return e}(r);T()(E).call(E,(function(e){var i=e.type,o=e.start,n=e.end,t=e.hashtagName;return i===R.w.HashTag&&"#".concat(t).toLowerCase()!==I()(w).call(w,o,n).toLowerCase()}))&&(w=w.replace(/\s*\n/gi,"\n"));var C=0;P()(E).call(E,(function(e){var i=e.type,o=e.searchText,n=e.start,t=e.end;i===R.w.Search&&(e.searchTextPos=C,C+=1,o!==I()(w).call(w,n,t)&&(e.start=te(w,n),e.end=te(w,t)))})),P()(E).call(E,(function(i){var o=i.start,n=i.end;L<o&&b.push(ne((0,t.Z)((0,t.Z)({},e),{},{text:I()(w).call(w,L,o)})));var r=I()(w).call(w,o,n);b.push(ne((0,t.Z)((0,t.Z)({},e),{},{text:r}),i)),L=n})),L<w.length&&b.push(ne((0,t.Z)((0,t.Z)({},e),{},{text:I()(w).call(w,L)})))}return null!=m&&m.isSpider?S.createElement(S.Fragment,null,S.createElement("span",{ref:h,className:y},S.createElement("span",{className:x()(Z.actionableText,Z[p],f),onClick:d},s||"",g()(b).call(b,(function(e,i){return S.createElement(S.Fragment,null,e)})),(null==m?void 0:m.appendKeyword)&&S.createElement("h1",null,m.appendKeyword)))):S.createElement("span",{ref:h,className:y},S.createElement(k(),{noWrapper:!0,options:{className:Z.twemojiText,base:"//p3-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/twemoji/"}},S.createElement("span",{className:x()(Z.actionableText,Z[p],f),onClick:d},s||"",g()(b).call(b,(function(e,i){return S.createElement("span",{key:i},e)})),(null==m?void 0:m.appendKeyword)&&S.createElement("h1",null,m.appendKeyword))))}var le=S.memo(re)},18255:function(e,i,o){o.d(i,{W:function(){return L}});var n=o(65146),t=o(64408),r=o(94090),l=o.n(r),a=o(8369),d=o.n(a),u=o(5594),s=o.n(u),c=o(53864),_=o(79705),v=o.n(_),p=o(40032),f=o(89933),m=o(16437),g={panelWrapper:"XdA7gYwN",panel:"pV829ilP",buttonWraper:"F2sKzRCp",button:"E4fCwo4q",right:"tKinFfr9",opacityAnimation:"qhR5rzA1"},y=o(34590),h=null,w=!1;function I(e){var i=e.text,o=e.style;function n(){return(n=(0,t.Z)(s().mark((function e(){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,f.J)(null===(i=h)||void 0===i?void 0:i.innerText),y.F.info({text:"\u5df2\u590d\u5236",duration:1e3});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.createElement("div",{className:g.panel,style:{height:o.height,width:o.width},onDoubleClick:function(){return n.apply(this,arguments)}},i)}function b(e,i,o){if("String"!==(0,m.tQ)(e))return"";var n=e.split("\r\n");if(i){var t,r=l()(t="\u64ad\u653e\u5206\u8fa8\u7387: ".concat(i.height,",")).call(t,i.width);d()(n).call(n,2,0,r)}if(o){var a="\u64ad\u653e\u6863\u4f4d: ".concat(o);d()(n).call(n,2,0,a)}return n.join("\r\n")}function T(e){var i=e.name,o=e.text,n=e.showPanelRightside;return c.createElement("div",{className:g.button,onClick:function(e){w?(h.style="display: none;",w=!1):(!function(e,i){if(h){var o,n=l()(o="top:".concat(i.top,"px; left:")).call(o,i.left,"px;");0===i.right&&(n="top:".concat(i.top,"px; right:0px;")),h.style=n}else{var t,r=l()(t="top:".concat(i.top,"px; left:")).call(t,i.left,"px;");0===i.right&&(r="top:".concat(i.top,"px; right:0px;")),(h=document.createElement("div")).className=g.panelWrapper,h.id="panelContainer",h.style=r,document.body.appendChild(h)}(0,p.createRoot)(h).render(c.createElement(I,{text:e,style:i}))}(o,function(e,i){var o={width:300,height:600,top:0,left:0,right:""},n=i.target.getBoundingClientRect(),t=document.documentElement.scrollTop,r=document.documentElement.clientWidth;return o.right=n.right+4+300>r?0:"unset",o.top=n.bottom+4+t,o.left=e?n.right+4:n.left-o.width-4,o}(n,e)),w=!0),e.stopPropagation(),e.preventDefault()}},i)}function L(e){var i=e.req,o=void 0===i?null:i,t=e.video,r=e.isLeft,l=void 0===r||r,a=e.showPanelRightside,d=void 0!==a&&a,u=e.size,s=void 0===u?null:u,_=e.gear;return(0,c.useEffect)((function(){return function(){h&&(document.body.removeChild(h),h=null,w=!1)}}),[]),c.createElement("div",{className:v()(g.buttonWraper,g.opacityAnimation,(0,n.Z)({},g.right,!l))},o&&c.createElement(T,{name:"\u8bf7\u6c42",text:o,showPanelRightside:d}),t&&c.createElement(T,{name:"\u89c6\u9891",text:b(t,s,_),showPanelRightside:d}))}},34643:function(e,i,o){o.d(i,{l:function(){return r}});var n=o(53864),t=o(83512),r=function(){return(0,n.useContext)(t.E).contextEvent}},39217:function(e,i,o){o.d(i,{Z:function(){return Zi}});var n=o(64408),t=o(5594),r=o.n(t),l=o(53864),a=o(68595),d=o.n(a),u=o(93976),s=o(5611),c=o(78384),_=o(11256),v=!1;var p=function(){var e=(0,n.Z)(r().mark((function e(){var i,o,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.DT)()){e.next=15;break}if("Windows"!==(null===(i=(0,c.fV)())||void 0===i?void 0:i.os)){e.next=12;break}return e.next=4,null===d()||void 0===d()||null===(o=d().app)||void 0===o?void 0:o.getHardwareDecodeState();case 4:if(0!==(null==(n=e.sent)?void 0:n.code)||1!==(null==n?void 0:n.data)){e.next=9;break}return e.abrupt("return",1);case 9:case 15:return e.abrupt("return",0);case 10:e.next=13;break;case 12:return e.abrupt("return",(0,u.$n)());case 13:e.next=16;break;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var f=o(30906),m=o(11227),g=o.n(m),y=o(21155),h=o.n(y),w=o(50750),I=o.n(w),b=o(34346),T=o.n(b),L=o(94090),P=o.n(L),S=o(353),E=o(71116),k=o(97876),C=o(56462),x=o(21793);var R=function(e){var i,o,n,t,r,l,a,d,u,s,c,_,v,p,f,m,g,y,h,w,I,b,L,S,E,k;return{author_id:null==e||null===(i=e.authorInfo)||void 0===i?void 0:i.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,compilation_id:null==e||null===(o=e.mixInfo)||void 0===o?void 0:o.mixId,playlet_id:null==e||null===(n=e.seriesInfo)||void 0===n?void 0:n.seriesId,impressionData:null==e?void 0:e.impressionData,awemeId:null==e?void 0:e.awemeId,vduration:null==e||null===(t=e.video)||void 0===t?void 0:t.duration,qualityType:(null==e||null===(r=e.video)||void 0===r||null===(l=r.bitRateList)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.qualityType)||(null==e||null===(d=e.video)||void 0===d?void 0:d.qualityType),bitRate:(null==e||null===(u=e.video)||void 0===u||null===(s=u.bitRateList)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.bitRate)||(null==e||null===(_=e.video)||void 0===_?void 0:_.bitRate),gearName:(null==e||null===(v=e.video)||void 0===v||null===(p=v.bitRateList)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.gearName)||"",bitrate_set:null==e||null===(m=e.video)||void 0===m||null===(g=m.bitRateList)||void 0===g?void 0:T()(g).call(g,(function(e){return null==e?void 0:e.gearName})),quality_bitrate:null==e||null===(y=e.video)||void 0===y||null===(h=y.bitRateList)||void 0===h?void 0:T()(h).call(h,(function(e){var i;return P()(i="".concat(null==e?void 0:e.qualityType,":")).call(i,null==e?void 0:e.bitRate)})),aweme_type:null==e?void 0:e.awemeType,pic_cnt:null!==(w=null==e||null===(I=e.images)||void 0===I?void 0:I.length)&&void 0!==w?w:0,trending_topic:null==e||null===(b=e.hotList)||void 0===b?void 0:b.header,first_tag_name:null==e||null===(L=e.hotList)||void 0===L?void 0:L.sentence,top:null==e||null===(S=e.hotList)||void 0===S?void 0:S.rank,awemeRequestTime:null==e?void 0:e.requestTime,is_landscape:(null==e||null===(E=e.video)||void 0===E?void 0:E.width)>(null==e||null===(k=e.video)||void 0===k?void 0:k.height)?1:0}},A={videoPlay:["is_click_cover"],playTime:["is_click_cover"],videoPlayFinish:["is_click_cover"]};var D=o(61508);var F,N=o(54867),Z=o(78747),M=o(87130);function V(e){var i=e.player,o=e.awemeInfo,n=e.userInfo;(0,l.useEffect)((function(){if(!i||!o)return undefined;var e=function(){var e,i,t;null!=n&&n.isLogin&&null!=o&&o.awemeId&&(0,Z.w6)({awemeId:null==o?void 0:o.awemeId,authorId:null==o||null===(t=o.authorInfo)||void 0===t?void 0:t.uid});!function(e){k.emit(k.EVENT.syncInteractionStatus,{action:"lookVideo",awemeId:e.awemeId,fromUserId:e.authorInfo.secUid,extraAwemeInfo:{isFromSort:e.isFromSort}})}(o),(null===(e=E.Le.getConfig(E.gI.UnLookVideos))||void 0===e||null===(i=e[null==o?void 0:o.awemeId])||void 0===i?void 0:i.status)===N.Pl.UnLook&&((0,M.uR)({awemeIds:o.awemeId}),function(e){var i,o=e.awemeInfo,n=E.Le.getConfig(E.gI.UnLookVideos);n&&(null===(i=n[null==o?void 0:o.awemeId])||void 0===i?void 0:i.status)===N.Pl.UnLook&&(n[null==o?void 0:o.awemeId].status=N.Pl.Looked)}({awemeInfo:o}))};return i.on("autoplay_started",e),function(){i.off("autoplay_started",e)}}),[i,o,n])}function O(e){var i,o=((null==e?void 0:e.curDefinition)||{}).networkSpeed;return null!==(i=F)&&void 0!==i?i:o?Math.floor(o/1e3):0}var q=o(54343),H=o.n(q),z=o(50799),U=o(72603),B=o(9191),G=o(13795),K={videoPlayQuality:{eventName:"video_play_quality",params:{group_id:"",previous_page:"",tab_name:"",bitrate_set:"",enter_from:"",codec_format:"",duration:0,cache_size:0,video_quality:"",video_format:"",video_bitrate:"",vduration:"",internet_speed:0,player_type:"xgplayer",player_version:"",internet_speed_dl:0,preload_time:0,preload_size:0,preload_type:1,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",player_first_frame:0,current_low_decode_count:0,decoder_mode:0,h265_failure_rate:-1,play_order:0}},prfVolumeChange:{eventName:"prf_volume_change",params:{down:0,enter_from:"",search_params:undefined}},videoBlock:{eventName:"video_block",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",codec_format:"",duration:0,cache_size:0,video_quality:"",video_format:"",video_bitrate:"",vduration:"",block_type:"",internet_speed_dl:0,internet_speed:0,player_type:"xgplayer",player_version:"",cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",play_order:0}},videoBlockCount:{eventName:"video_block_count",params:{enter_from:"",UA_info:"",block_count:0,differ_count:0}},videoPlayEnd:{eventName:"video_play_end",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",codec_format:"",duration:0,is_success:0,vduration:"",internet_speed:0,player_type:"xgplayer",player_version:"",video_quality:"",video_format:"",video_bitrate:"",internet_speed_dl:0,preload_time:0,preload_size:0,preload_type:1,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",current_low_decode_count:0,decoder_mode:0,is_bytevc1:0,play_order:0,decode_fps:0,cdn_size_video:0,pcdn_size_video:0,play_size:0,loop_cnt:0,seek_cnt:0,seek_time:0,play_leave_position:0,play_duration_clean:0,fid:"",trace_id:"",uri:"",cache_duration:0,cache_size:0,data_player_type:2}},videoPlayFailed:{eventName:"video_play_failed",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",cache_size:0,errorCode:0,errorDesc:"",is_cdn_expired:0,vduration:"",internet_speed:"",player_type:"xgplayer",player_version:"",internet_speed_dl:0,is_video_support:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",h265_failure_rate:-1,play_order:0}},videoDegrade:{eventName:"video_degrade",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",cache_size:0,errorCode:0,errorDesc:"",is_cdn_expired:0,vduration:"",internet_speed:"",player_type:"xgplayer",player_version:"",internet_speed_dl:0,is_video_support:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",h265_failure_rate:-1,play_order:0}},videoInit:{eventName:"video_init",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",video_quality:"",video_format:"",internet_speed:0,is_csr:1,compilation_id:"",cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",play_order:0,is_have_pcdn:0}},videoRequest:{eventName:"video_request",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",video_quality:"",video_format:"",internet_speed:0,is_csr:1,compilation_id:"",cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",play_order:0,is_have_pcdn:0}},videoRequestResponse:{eventName:"video_request_response",params:{group_id:"",enter_from:"",previous_page:"",tab_name:"",video_quality:"",video_format:"",vduration:"",duration:"",is_success:0,internet_speed:0,is_csr:1,compilation_id:"",internet_speed_dl:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",play_order:0}},videoPlay:{eventName:"video_play",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",previous_page:"",is_visible:"1",compilation_id:"",playlet_id:"",is_auto_play:"0",impression_data:"",video_detail_enter_from:"web_link",tab_name:"",speed:"1",auto_cnt:1,is_full_screen:"0",trending_topic:"",enter_method:"",from_follow_list:"0",is_mute:"0",mute_type:"",from_academy:0,is_small_window:"0",clarity:"",first_tag_name:"",top:0,video_time:0,from_push:0,is_from_ad:0,url_source:"",latest_group_id:"",expand_video_card_type:""}},videoPlayFinish:{eventName:"video_play_finish",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",enter_from_merge:"",compilation_id:"",playlet_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",mute_type:"",trending_topic:"",is_small_window:"0",first_tag_name:"",top:0,video_time:0,from_push:0,is_from_ad:0,url_source:""}},playTime:{eventName:"play_time",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",compilation_id:"",playlet_id:"",previous_page:"",is_auto_play:"0",is_visible:"1",duration:0,from_percent:0,to_percent:0,video_detail_enter_from:"web_link",tab_name:"",speed:"",is_full_screen:"0",trending_topic:"",enter_method:"",from_follow_list:"0",is_mute:"0",mute_type:"",is_small_window:"0",clarity:"",first_tag_name:"",top:0,video_time:0,from_push:0,is_insert_wallpaper:0,is_from_ad:0,latest_group_id:"",url_source:""}},videoPlayCheckPoint:{eventName:"video_play_check_point",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",previous_page:"",compilation_id:"",order:0,tab_name:"",trending_topic:"",first_tag_name:"",top:0}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",tab_name:"",click_from:"",is_small_window:"0",trending_topic:"",first_tag_name:"",top:0}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"",tab_name:"",is_small_window:"0",trending_topic:"",first_tag_name:"",top:0}},clickAutoPlay:{eventName:"click_auto_play",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",status:""}},clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:"",item_duration_ms:0}},enterFullScreen:{eventName:"enter_full_screen",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_small_window:"",click_from:"",item_duration_ms:0}},exitFullScreen:{eventName:"exit_full_screen",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_small_window:"",click_from:""}},clickScreenMode:{eventName:"click_screen_mode",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",status:""}},clickVolume:{eventName:"click_volume",params:{enter_from:"",mute_remind:"none",status:"0"}},pauseVideo:{eventName:"pause_video",params:{enter_from:"",mute_remind:"none",click_method:"click",is_small_window:"0"}},startVideo:{eventName:"start_video",params:{enter_from:"",mute_remind:"none",click_method:"click"}},openPureMode:{eventName:"open_pure_mode",params:{enter_from:"",enter_method:"",enter_from_merge:"",group_id:"",is_full_screen:"0",is_full_webscreen:"0",item_duration_ms:0}},closePureMode:{eventName:"close_pure_mode",params:{enter_from:"",enter_method:""}},progressClick:{eventName:"progress_click",params:{enter_from:"",enter_from_merge:"",tab_name:"",group_id:"",click_method:"hot_key",rate:-1,action:"",is_small_window:"0",chapter_index:0,is_chapter_bar:0}},prfFirstFeedShow:{eventName:"prf_first_feed_show",params:{feed_total_duration:0,landing_page:"",is_landscape:0,group_id:""}},prfFirstFeedFirstFrameShow:{eventName:"prf_first_feed_first_frame_show",params:{feed_total_duration:0,landing_page:"",is_landscape:0,group_id:""}},prfFirstFeedCoverShow:{eventName:"prf_first_feed_cover_show",params:{landing_page:"",duration:0,duration_from_rs:0,duration_from_re:0,duration_from_hs:0,duration_from_bs:0,duration_from_ae:0,duration_from_ar:0,duration_from_ps:0}},videoTransform:{eventName:"video_transform",params:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}},prfTaskDataSize:{eventName:"prf_task_data_size",params:{user_unique_id:"",group_id:"",task_type:1,cdn_size:0,pcdn_size:0,cdn_speed:0,pcdn_speed:0,load_dur:0,buffer_dur:0,force_set_min:0,trace_id:""}},linkPlayFailed:{eventName:"link_play_failed",params:{user_unique_id:"",group_id:"",is_pcdn:0,host:"",aweme_type:0,enter_from:""}},prfLastPreloadDataSize:{eventName:"prf_last_preload_data_size",params:{enter_from:"",group_id:"",preload_size:0,preload_size_cdn:0,preload_size_pcdn:0,preload_time:0,video_bitrate:0,video_quality:"",data_player_type:0,type:0,duration:0,vtype:""}},fpsStuck:{eventName:"fps_stuck",params:{enter_from:"",group_id:""}},srDegrade:{eventName:"sr_degrade",params:{code:"",enter_from:"",group_id:"",vtype:"",quality_type:"",gear_name:"",definition:"",is_bytevc1:0,current_time:""}}},W=new G.hD(K);var Q=o(83400),j=o(28712),Y=o(18185),J=o(44993),X=function(e){var i,o,n=e.player,t=e.qualityType;return(0,_.I)({player:n})?-2:null!==(i=null==n||null===(o=n.curDefinition)||void 0===o?void 0:o.qualityType)&&void 0!==i?i:t},$=o(61979),ee=o(41644),ie=function(){var e,i,o;return{gpu_vendor:null===(e=(0,ee.$)())||void 0===e?void 0:e.vendor,gpu_score:null===(i=(0,ee.$)())||void 0===i?void 0:i.score,gpu_info:null===(o=(0,ee.$)())||void 0===o?void 0:o.info}},oe=o(58144),ne=o.n(oe),te=function(e){var i,o,n,t=e.player,r=null==t||null===(i=t.definitionList)||void 0===i||null===(o=ne()(i))||void 0===o?void 0:o.call(i,(function(e){var i;return(null==e?void 0:e.definition)===(null==t||null===(i=t.curDefinition)||void 0===i?void 0:i.orgDefinition)}));if(t.orgDefinition=r,!r)return{};var l=r.bitrate,a=r.definition;return{video_bitrate_origin:l,gear_name_origin:r.gearName,video_quality_origin:r.qualityType,video_size_origin:r.size,definition_origin:a,enable_sr:null!=t&&null!==(n=t.plugins)&&void 0!==n&&n.srplugin?1:0}},re=o(38445),le=o(19672),ae=o.n(le),de=o(53361),ue=o.n(de),se=o(43332),ce=o.n(se),_e=o(7943),ve=o.n(_e),pe=function(e,i){if("string"!=typeof e||!ae()(i))return{pcdnSrcIndex:-1,isPcdnSource:!1};var o=ue()(i).call(i,(function(e){return Boolean(e.src&&e.ispcdn)}));if(o>-1){var n=i[o].src,t=new(ce())(ve()(e).call(e,"https:")?e:"https:".concat(e)),r=new(ce())(ve()(n).call(n,"https:")?n:"https:".concat(n)),l=t.host===r.host;return{isPcdnSource:l,pcdnSrcIndex:l?o:-1}}return{pcdnSrcIndex:o,isPcdnSource:!1}};var fe=o(53128),me=o(34643);function ge(e){var i=e.awemeInfo,o=e.player,n=e.isActive,t=e.getLogInfo,r=e.getH265DegradeReportFlag,a=e.getSupportHwClientFlag,d=(0,l.useRef)(null),s=(0,l.useRef)(null),c=(0,me.l)();(0,l.useEffect)((function(){var e,l;(d.current&&(null===(e=d.current)||void 0===e?void 0:e.awemeId)!==(null==i?void 0:i.awemeId)||!n||!i)&&(d.current=null,s.current=null);var v,p=o,m=function(){n&&d.current&&!d.current.isReport&&(d.current.isReport=!0,function(e){var i,o,n,t,r,l,a,d,s,c,v,p,m,g,y,h=e.group_id,w=e.compilation_id,I=void 0===w?"":w,b=e.is_csr,T=void 0===b?1:b,L=e.extraParams,P=void 0===L?{}:L,S=e.host,E=e.vtype,k=e.player,C=e.awemeInfo,x=e.h265DeGrade,R=e.logInfo,A=e.supportHw,D=e.fetchExpired;if((0,j.p)())return!1;var F=R.aweme_type,N=R.video_play_mode,Z=R.is_landscape,M=R.action_type,V=(0,J.Z)({awemeInfo:C,player:k}),O=V.isH265,q=V.videoFormat,H=pe(S,null==k||null===(i=k.config)||void 0===i?void 0:i.url).isPcdnSource,z=(null==C||null===(o=C.video)||void 0===o||null===(n=o.bitRateList)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.qualityType)||(null==C||null===(r=C.video)||void 0===r?void 0:r.qualityType);(0,re.v)();var U=(0,re.G)(),B=null==k||null===(l=k.config)||void 0===l||null===(a=l.url)||void 0===a||null===(d=a[0])||void 0===d?void 0:d.src;W.sendLog("videoRequest",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"],group_id:h,compilation_id:I,is_csr:T,host:S,vtype:E,aweme_type:F,action_type:M,is_ad:(0,Q.Jt)(C)?1:0,is_compilation:null!=C&&null!==(s=C.mixInfo)&&void 0!==s&&s.mixId?1:0,video_format:q,video_play_mode:N,is_landscape:Z,is_bytevc1:O,play_order:U,is_supported_265:(0,_.VV)()?1:0,is_265_degrade:x,is_support_hw:A,v_like_cnt:null==C||null===(c=C.stats)||void 0===c?void 0:c.diggCount,v_share_cnt:null==C||null===(v=C.stats)||void 0===v?void 0:v.shareCount,v_comment_cnt:null==C||null===(p=C.stats)||void 0===p?void 0:p.commentCount,v_download_cnt:null==C||null===(m=C.stats)||void 0===m?void 0:m.downloadCount,v_forward_cnt:null==C||null===(g=C.stats)||void 0===g?void 0:g.forwardCount,vduration:null==C||null===(y=C.video)||void 0===y?void 0:y.duration,is_have_pcdn:Number(H),is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,player_version:null==k?void 0:k.version,video_quality:X({player:k,qualityType:z})},(0,$.Z)()),ie()),P),{},{fetch_expired:D,active_expired:B?(0,Y.q)(B):-1},te({player:k})))}(d.current.data))},g=function(){var e,i;n&&(s.current&&!s.current.isReport&&(!function(e){var i,o,n=e.group_id,t=e.compilation_id,r=void 0===t?"":t,l=e.vduration,a=e.duration,d=e.is_csr,s=void 0===d?1:d,c=e.is_success,v=e.videoQuality,p=void 0===v?"":v,m=e.extraParams,g=void 0===m?{}:m,y=e.host,h=e.vtype,w=e.player,I=e.awemeInfo,b=e.logInfo,T=e.h265DeGrade,L=e.supportHw;if((0,j.p)())return!1;var P=b.aweme_type,S=b.video_play_mode,E=b.is_landscape,k=b.action_type,C=(0,J.Z)({awemeInfo:I,player:w}),x=C.isH265,R=C.videoFormat,A=(0,re.G)();W.sendLog("videoRequestResponse",(0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"],group_id:n,compilation_id:r,vduration:l,video_quality:p,video_format:R,is_success:c,duration:a,is_csr:s,host:y,vtype:h,action_type:k,is_ad:(0,Q.Jt)(I)?1:0,is_compilation:null!=I&&null!==(i=I.mixInfo)&&void 0!==i&&i.mixId?1:0,aweme_type:P,video_play_mode:S,is_landscape:E,is_bytevc1:x,play_order:A,is_supported_265:(0,_.VV)()?1:0,is_265_degrade:T,is_support_hw:L,is_hw:"video"===(null==w||null===(o=w.config)||void 0===o?void 0:o.mediaType)?1:0,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,player_version:null==w?void 0:w.version},(0,$.Z)()),ie()),g))}(s.current.data),null!==(e=s.current)&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&i.is_success&&(s.current.isReport=!0)))},y=function(e){var o,n,l,u=t(),s=u.awemeId,c=u.vduration,_=u.compilation_id,v=u.qualityType,f=u.extraParams,m=null!==(o=d.current)&&void 0!==o&&o.duration?(new Date).getTime()-d.current.duration:0;return{awemeId:i.awemeId,isReport:!1,data:{group_id:s,extraParams:f,duration:m,vduration:c,compilation_id:_,videoQuality:(null===(n=p)||void 0===n||null===(l=n.curDefinition)||void 0===l?void 0:l.qualityType)||v,is_success:e,logInfo:u,player:p,awemeInfo:i,h265DeGrade:r(),supportHw:a()}}},h=function(e){if(i)if("loadstart"===e.eventType){var o,n=E.Le.getConfig(E.gI.SearchVideoPlayMethod);n&&E.Le.setConfig(E.gI.VideoPlayMethod,n),d.current?null!==(o=s.current)&&void 0!==o&&o.isReport||(s.current=y(0),d.current.duration=(new Date).getTime(),g()):(d.current=function(e){var o=t(),n=o.awemeId,l=o.extraParams;return{awemeId:i.awemeId,duration:(new Date).getTime(),data:{group_id:n,extraParams:l,logInfo:o,player:p,awemeInfo:i,h265DeGrade:r(),supportHw:a(),host:null==e?void 0:e.host,fetchExpired:null==i?void 0:i.fetchExpired},isReport:!1}}(e),m())}else if("loadeddata"===e.eventType){var l;null!==(l=s.current)&&void 0!==l&&l.isReport||(s.current=y(1)),g()}};i&&(m(),g(),p&&p.on(D.XGLOG,h));var w=function(e){(p=e).on(D.XGLOG,h),v=function(){p.off(D.XGLOG,h)}};return null==c||null===(l=c.on)||void 0===l||l.call(c,fe.V.PlayerCreated,w),function(){var e,i,o;null===(e=v)||void 0===e||e(),null===(i=p)||void 0===i||i.off(D.XGLOG,h),null==c||null===(o=c.off)||void 0===o||o.call(c,fe.V.PlayerCreated,w)}}),[i,n])}var ye=o(85792),he=o.n(ye);var we=o(45669),Ie=o(7786);function be(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(){var e;if(!n)return!1;var o=Ie.s.getPlayerScene(i.playerId),t=Ie.s.getPlayersByScene(N.lT.Modal)||[],r=null===(e=E.Le.getConfig(E.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal,l=Ie.s.lastRegisterPlayerId;return!(o!==N.lT.Modal&&t.length>0||r&&i.playerId!==l)},o=k.listen(k.EVENT.reportPlayNext,(function(i){var o=i.clickFrom;e()&&function(e){W.sendLog("clickNextVideo",Te({getLogInfo:t,clickFrom:e}))}(o)})),r=k.listen(k.EVENT.reportPlayPrev,(function(i){var o=i.clickFrom;e()&&function(e){W.sendLog("clickPreviousVideo",Te({getLogInfo:t,clickFrom:e}))}(o)}));return function(){o(),r()}}),[i,o,n])}var Te=function(e){var i=e.getLogInfo,o=e.clickFrom,n=i(),t=n.author_id,r=n.group_id,l=n.log_pb,a=n.extraParams,d=(n.isMini,n.trending_topic),u=n.first_tag_name,s=n.top;return(0,f.Z)((0,f.Z)({urlParamList:["previous_page"],author_id:t,group_id:r,log_pb:l,enter_from:(0,U.mo)(),click_from:o,tab_name:z.getTabName()||(0,B.Rs)("tab_name")||"",trending_topic:d,first_tag_name:u,top:s},a),{},{is_small_window:(0,we.Q)()?"1":"0"})},Le=o(29529),Pe=o(81762);var Se=function(e){var i=e.getLogInfo,o=e.isAutoPlay,n=e.customParams,t=i(),r=t.author_id,l=t.group_id,a=t.log_pb,d=t.extraParams;return(0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page"],author_id:r,group_id:l,log_pb:a,enter_from:(0,U.yW)(),status:o?"on":"off"},d),n),{},{is_small_window:(0,we.Q)()?"1":"0"})},Ee=o(83901),ke=o(67495),Ce="keyboard",xe={click:"click_button",dblclick:"double_click"};function Re(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){if((0,Q.Jt)(o)){var i=(0,Q.Rx)(o);(0,Ee.E)("full_screen",{tag:(0,ke.f)(),value:i.creative_id,log_extra:i.log_extra,player_form:e})}},r=function(i,o){i?function(i){W.sendLog("exitFullScreen",Ae({getLogInfo:t,clickFrom:i})),e("normal")}(o):function(i){W.sendLog("enterFullScreen",Ae({getLogInfo:t,clickFrom:i})),e("browser_full")}(o)},l=function(e){if("switch_fullscreen"===e.action){var i=xe[e.eventType]||Ce;r(e.fullscreen,i)}},a=function(e){r(e.fullscreen,"hot_key")};return i.on(D.USER_ACTION,l),i.on(Pe.B.SwitchFullScreen,a),function(){i.off(D.USER_ACTION,l),i.off(Pe.B.SwitchFullScreen,a)}}),[i,o,n])}var Ae=function(e){var i=e.getLogInfo,o=e.clickFrom,n=i(),t=n.author_id,r=n.group_id,l=n.log_pb,a=n.extraParams;return(0,f.Z)({urlParamList:["previous_page"],author_id:t,group_id:r,log_pb:l,enter_from:(0,U.yW)(),click_from:o},a)};var De=o(91242);var Fe=o(26447),Ne=o.n(Fe),Ze=o(9729);var Me=o(67159),Ve=o(13971),Oe=function(e,i){return e?1===i&&e.currentTime>=e.duration?0:i:0},qe=function(e){if((0,j.p)()||!e)return 0;try{var i,o=(e.cumulateTime||0)/1e3,n=(null==e||null===(i=e.curDefinition)||void 0===i?void 0:i.bitrate)||0;return(0,Me.e)(o*n)}catch(t){return 0}},He=function(e){var i,o,n=(null==e||null===(i=e.buffered)||void 0===i?void 0:i.length)||0,t=null!==(o=e.removedBuffer)&&void 0!==o?o:0;if(!e||!e.buffered||n<=0)return t;try{for(var r=0,l=(e||{}).buffered,a=0;a<(null==l?void 0:l.length);a++){var d,u;r+=(null==l||null===(d=l.end)||void 0===d?void 0:d.call(l,a))-(null==l||null===(u=l.start)||void 0===u?void 0:u.call(l,a))}return r+t}catch(s){return t}},ze=function(e){var i=null==e?void 0:e.getBufferedRange();if(i&&i[1]){var o=1e3*(i[1]-e.currentTime);return Math.round(o)}return 0},Ue=function(e){var i;switch(e.vtype||""){case"MP4_MSE":i=1;break;case"MP4":i=2;break;case"MP4_1":case"MP4_2":i=3;break;default:i=0}return i},Be=o(7782),Ge=function(e){var i={preloadTime:0,preloadSize:0};if((0,j.p)()||!e)return i;try{var o=e||{},n=o.preLoadData,t=o.plugins,r=o.currentTime,l=o.buffered,a=o.curDefinition;if((0,Be.me)(e)){var d,u=n||(null==t||null===(d=t.mp4encryptplayer)||void 0===d?void 0:d.preLoadData)||{};return i={preloadTime:u.duration,preloadSize:u.byteLength}}if(null!=l&&l.length){var s,c=(null==l||null===(s=l.end)||void 0===s?void 0:s.call(l,0))-r,_=(null==a?void 0:a.bitrate)||0;i={preloadSize:(0,Me.e)(c*_),preloadTime:c}}return i}catch(v){return{preloadSize:0,preloadTime:0}}},Ke=function(e){var i={};if("string"==typeof e)try{i=JSON.parse(e)}catch(o){i={}}return i},We=function(e){var i,o=null===(i=function(e){var i={};try{var o,n,t;if(!(0,s.DT)()||null==e||!e.video||1!==(null==e||null===(o=e.video)||void 0===o?void 0:o.nodeType))return{};for(var r=null==e||null===(n=e.video)||void 0===n||null===(t=n.querySelectorAll)||void 0===t?void 0:t.call(n,"source"),l=0;l<(null==r?void 0:r.length);l++){var a,d=r[l];if(null!=d&&null!==(a=d.execute)&&void 0!==a&&a.call(d,"isActive","")){var u,c=null==d||null===(u=d.execute)||void 0===u?void 0:u.call(d,"getMediaInfo","");i=Ke(c);break}}}catch(_){i={}}return i}(e))||void 0===i?void 0:i.video_platform_decoder;return o===undefined?-1:o},Qe=o(8e3),je=o.n(Qe),Ye=S.LocalStorageKeys.FrameInfoList,Je=function(e){var i,o,n,t,r,l,a=null!==(i=(0,Ve.$o)(Ye))&&void 0!==i?i:[],d=je()(a).call(a,(function(e){return 0===e.isH265})),u=je()(a).call(a,(function(e){return 1===e.isH265}));if(!(d.length>=5&&0===(null==e||null===(o=e.curDefinition)||void 0===o?void 0:o.isH265)||u.length>=5&&1===(null==e||null===(n=e.curDefinition)||void 0===n?void 0:n.isH265))){var s={isH265:null==e||null===(t=e.curDefinition)||void 0===t?void 0:t.isH265,total:null==e||null===(r=e.videoFrameInfo)||void 0===r?void 0:r.total,rate:null==e||null===(l=e.videoFrameInfo)||void 0===l?void 0:l.droppedRate};a.push(s),(0,Ve.qQ)(Ye,a)}},Xe=function(e){var i,o;return null!=e&&null!==(i=e.video)&&void 0!==i&&i.seeking?"seeking":null!=e&&null!==(o=e.video)&&void 0!==o&&o.ended?"end":"playing"};var $e=function(e,i){var o=i.group_id,n=i.vduration,t=i.bitRate,r=i.qualityType,l=i.extraParams,a=i.bitrate_set,d=i.quality_bitrate,u=i.action_type,s=i.aweme_type,c=i.video_play_mode,_=i.is_landscape,v=i.bitrate_set_client,p=((null==e?void 0:e.curDefinition)||{}).bitrate;return(0,f.Z)((0,f.Z)({group_id:o,vduration:n,bitrate_set:a,quality_bitrate:d,video_play_mode:c,is_landscape:_,aweme_type:s,action_type:"click"===u?"click":"up"===u?"down":"up",video_quality:X({player:e,qualityType:r}),video_bitrate:p||t,bitrate_set_client:v},te({player:e})),l)},ei=function(e,i){var o,n,t,r,l,a,d,u,s,c=(0,J.Z)({awemeInfo:i,player:e}),v=c.codecFormat,p=c.isH265,f=c.videoFormat,m=(null===(o=e.video)||void 0===o||null===(n=o.getStats)||void 0===n?void 0:n.call(o))||{},g=m.currentLowDecodeCount,y=void 0===g?0:g,h=m.decoderMode,w=void 0===h?0:h,I=m.lowdecodeVV,b=void 0===I?0:I,T=m.vv,L=void 0===T?0:T,P=m.fps,S=void 0===P?0:P,E=m.currentState,k=void 0===E?0:E;return{duration:e.cumulateTime?e.cumulateTime:0,player_version:e.version,codec_format:v,video_format:f,internet_speed:O(e),drop_frame:null===(t=e.videoFrameInfo)||void 0===t?void 0:t.dropped,total_play_frame:null===(r=e.videoFrameInfo)||void 0===r?void 0:r.total,drop_frame_rate:null===(l=e.videoFrameInfo)||void 0===l?void 0:l.droppedRate,drop_frame_duration:null===(a=e.videoFrameInfo)||void 0===a?void 0:a.droppedDuration,end_status:Xe(e),is_bytevc1:p,current_low_decode_count:y,decoder_mode:w,h265_failure_rate:10===L?b/L:-1,decode_fps:null!==(d=null===(u=e.video)||void 0===u?void 0:u.decodeFps)&&void 0!==d?d:0,is_supported_265:(0,_.VV)()?1:0,is_265_degrade_client:(0,_.ad)({player:e}),is_265_degrade_web:(0,_.OS)({player:e}),frame_rate:S,current_state:k,is_ad:(0,Q.Jt)(i)?1:0,is_compilation:null!=i&&null!==(s=i.mixInfo)&&void 0!==s&&s.mixId?1:0,is_visible:"visible"===document.visibilityState?1:0}},ii=o(25902),oi=o(44833),ni=o(66503);var ti=o(19478),ri=o.n(ti),li=o(67330),ai=o(3400),di=o(88817),ui=o(5277),si=o(15909),ci=o(11706);var _i=o(51365),vi=o(63663);var pi=o(1818),fi=o.n(pi);var mi=o(82766),gi=o.n(mi),yi={1:{width:1920,height:1080},2:{width:1280,height:720},3:{width:1024,height:576},4:{width:1024,height:576}},hi=function(e){var i,o,n,t,r={definition:0},l=null==e?void 0:e.video,a=null==l?void 0:l.getBoundingClientRect(),d=(null==l?void 0:l.videoWidth)/(null==l?void 0:l.videoHeight),u=null==e||null===(i=e.config)||void 0===i||null===(o=i.definition)||void 0===o||null===(n=o.list)||void 0===n?void 0:gi()(n).call(n,(function(e,i){return(null==i?void 0:i.definition)-(null==e?void 0:e.definition)}));if(u&&d>1)for(var s=0;s<u.length;s++){var c,_=null!==(c=u[s].definition)&&void 0!==c?c:1,v=yi[_];if(!((null==a?void 0:a.width)>(null==v?void 0:v.width)&&(null==a?void 0:a.height)>(null==v?void 0:v.height))){r.definition=_;break}}if(u&&d<1)for(var p=0;p<u.length;p++){var f,m=null!==(f=u[p].definition)&&void 0!==f?f:1,g=yi[m];if(!((null==a?void 0:a.width)>(null==g?void 0:g.height)&&(null==a?void 0:a.height)>(null==g?void 0:g.width))){r.definition=m;break}}return(null==e||null===(t=e.curDefinition)||void 0===t?void 0:t.definition)<r.definition?1:0},wi=o(68435),Ii=o.n(wi),bi=o(31674),Ti=o.n(bi),Li=function(e,i,o){try{var n,t,r=(null==e||null===(n=e.plugins)||void 0===n||null===(t=n.mp4encryptplayer)||void 0===t?void 0:t.states)||[],l=ne()(r).call(r,(function(e){return(null==e?void 0:e.state)===i})),a=ne()(r).call(r,(function(e){return(null==e?void 0:e.state)===o})),d=(null==a?void 0:a.t2)-(null==l?void 0:l.t2);return Ii()(d)?d:0}catch(u){return 0}},Pi=function(e){var i=e.player,o=e.isChangeVideoSrc,n=e.slideStartTime,t=e.data,r=e.loadedDataTime,l={};try{var a,d,u;o?l.is_slide_loadeddata=-1:n&&(l.is_slide_loadeddata=n-r>0?1:0,l.slide_to_loadeddata=r-n);var s=null==i||null===(a=i.plugins)||void 0===a||null===(d=a.mp4encryptplayer)||void 0===d||null===(u=d.states)||void 0===u?void 0:T()(u).call(u,(function(e){return e.data=undefined,e}));return(0,f.Z)({playerinit_to_loadstart:null==t?void 0:t.startCostTime,playerinit_to_loadeddata:null==t?void 0:t.loadedCostTime,playerstart_to_mp4metaready:Li(i,"PLAYER_START_INIT","MP4_META_READY"),mp4init_to_mp4metaready:Li(i,"MP4_INIT","MP4_META_READY"),playerinitfinally_to_loadstart:Li(i,"PLAY_INIT_FINALLY","LOAD_START"),mp4metaready_to_loadstart:Li(i,"MP4_META_READY","LOAD_START"),loadstart_to_mseopen:Li(i,"LOAD_START","MSE_OPEN"),mseinitsegok_to_appenddataok:Li(i,"MSE_INITSEG_OK","APPEND_DATA_OK"),mseinitseg_to_mseinitsegok:Li(i,"MSE_INITSEG","MSE_INITSEG_OK"),appenddataok_to_loadeddata:Li(i,"APPEND_DATA_OK","LOADED_DATA"),mseopen_to_loadeddata:Li(i,"MSE_OPEN","LOADED_DATA"),mse_all_phrase:Ti()(s)},l)}catch(c){return{}}};var Si=o(97482);var Ei=o(24880),ki=0,Ci=2,xi=3,Ri=-300,Ai=-600;var Di={};function Fi(e){var i=e.awemeInfo,o=e.player,t=e.isActive,a=e.isNext,c=e.getIsChangingVideoSrc,v=e.getLogInfo,p=e.getH265DegradeReportFlag,m=e.getSpecialParams,y=e.getReportNetworkSpeed,w=e.getSupportHwClientFlag;!function(e){var i=e.player,o=e.awemeInfo,n=e.getLogInfo;(0,l.useEffect)((function(){if(!i)return undefined;var e=!1,o=function(){e=!0},t=function(){e=!1},r=1,l=H()((function(){if(e){var i=n(),o=i.author_id,t=i.group_id,l=i.log_pb,a=i.compilation_id,d=i.extraParams,u=i.trending_topic,s=i.first_tag_name,c=i.top;W.sendLog("videoPlayCheckPoint",(0,f.Z)({urlParamList:["previous_page"],author_id:o,group_id:t,log_pb:l,enter_from:(0,U.mo)(),compilation_id:a,order:r++,tab_name:z.getTabName()||(0,B.Rs)("tab_name")||"",trending_topic:u,first_tag_name:s,top:c},d))}}),6e4);return i.on("autoplay_started",o),i.on("play",o),i.on("pause",t),function(){l&&clearInterval(l),i.off("autoplay_started",o),i.off("play",o),i.off("pause",t)}}),[i,o,n])}({awemeInfo:i,player:o,getLogInfo:v}),ge({awemeInfo:i,player:o,isActive:t,getLogInfo:v,getH265DegradeReportFlag:p,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.getLogInfo;(0,l.useEffect)((function(){var e;if(!i)return undefined;var n=null===(e=i.config)||void 0===e?void 0:e.volume,t=null,r=function(e){"change_volume"===e.action&&(t&&clearTimeout(t),t=he()((function(){var i,t;if(null!==(i=e.props)&&void 0!==i&&i.volume){var r=(null===(t=e.props)||void 0===t?void 0:t.volume).to,l=n>r;n=r;var a=o().extraParams;W.sendLog("prfVolumeChange",(0,f.Z)({down:l?1:0,enter_from:(0,U.vM)()},a))}}),500))};return i.on("user_action",r),function(){i.off("user_action",r)}}),[i])}({player:o,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getH265DegradeReportFlag,r=e.getLogInfo,a=e.getSupportHwClientFlag,d=(0,l.useRef)(0),s=(0,l.useRef)(0),c=(0,l.useRef)(0);(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=!1,l="",_="",v=-1,p=0,m=function(e){l=null==e?void 0:e.host,_=null==e?void 0:e.vtype,i.removedBuffer=0},g=function(){p=1},y=function(e){"firstFrame"===e.eventType&&(v=Ne()())},h=function(){d.current++},w=function(e){var i=e||{},o=i.eventType,n=i.pluginName,t=i.action,r=i.currentTime,l=i.prePlayTime,a=function(){s.current++,c.current=l-r};if("progress"===n)switch(o){case"click":a();break;case"drag":"dragend"===t&&a()}},I=function(){var n,m,g,y,h,w,I,b,T,L,P,k,C,x;if(!e){e=!0;var R=Ge(i),A=R.preloadTime,D=R.preloadSize,F=(0,f.Z)((0,f.Z)({preload_time:(0,Me.N)(A),preload_size:D||0,preload_type:(0,Be.me)(i)?2:1},function(){try{var e,o,n=(null==i?void 0:i.bandwidth)||{},t=n.cdn,r=n.pcdn,l=(t||{}).size,a=r||{},u=a.size,_=a.trace_id,v=a.uri,p=a.fid,f=c.current,m=s.current,g=Oe(i,d.current),y=(null==i||null===(e=i.curDefinition)||void 0===e?void 0:e.bitrate)||0,h=He(i),w=(0,Me.e)(h*y),I=Ue(i),b=(null==i?void 0:i.pcdnReq)||(null==i||null===(o=i.config)||void 0===o?void 0:o.pcdnReq)||{},T=b.pcdn_tracker_request_cnt,L=b.pcdn_tracker_failed_cnt,P=b.pcdn_download_request_cnt,S=b.pcdn_download_failed_cnt;return{fid:p,trace_id:_,uri:v,pcdn_size_video:u,cdn_size_video:l,play_size:qe(i),loop_cnt:g,seek_cnt:m,seek_time:(0,Me.N)(f),play_leave_position:(0,Me.N)(i.currentTime),play_duration_clean:(0,Me.N)(g>0?i.duration:i.currentTime),cache_size:w,cache_duration:(0,Me.N)(h),data_player_type:I,pcdn_tracker_request_cnt:T,pcdn_tracker_failed_cnt:L,pcdn_download_request_cnt:P,pcdn_download_failed_cnt:S}}catch(E){return{}}}()),{},{urlParamList:["previous_page","tab_name"],is_success:p,host:l,vtype:_,play_order:(0,re.G)(),is_265_degrade:t(),from_start_duration:-1===v?-1:Ne()()-v,is_support_hw:a(),is_hw:"video"===(null==i||null===(n=i.config)||void 0===n?void 0:n.mediaType)?1:0,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,is_hw_client:We(i),is_sr:null!=i&&null!==(m=i.plugins)&&void 0!==m&&null!==(g=m.srplugin)&&void 0!==g&&null!==(y=g.getStat)&&void 0!==y&&null!==(h=y.call(g))&&void 0!==h&&h.usingSR?1:0,is_gear_down:null!==(w=null==i||null===(I=i.curDefinition)||void 0===I?void 0:I.orgDefinition)&&void 0!==w?w:0,is_sr_dowgrade_permanently:null!==(b=(0,Ve.$o)(S.LocalStorageKeys.srDegradePermanently))&&void 0!==b?b:0,is_sr_dowgrade_once:null!==(T=E.Le.getConfig(E.gI.SrDegrade))&&void 0!==T?T:0,definition:null==i||null===(L=i.curDefinition)||void 0===L?void 0:L.definition,has_down_definition:ne()(P=i.definitionList).call(P,(function(e){var o;return(null==e?void 0:e.definition)===(null==i||null===(o=i.curDefinition)||void 0===o?void 0:o.definition)+1}))?1:0});Je(i),W.sendLog("videoPlayEnd",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({},F),(0,$.Z)()),ie()),ei(i,o)),$e(i,r())),(null==i?void 0:i.pcdnVVStat)||{}),(null==i||null===(k=i.plugins)||void 0===k||null===(C=k.srplugin)||void 0===C||null===(x=C.getStat)||void 0===x?void 0:x.call(C))||{}),!1),i.removedBuffer=0}},b=function(e){i.removedBuffer+=e.removeDur};return i.on("removeBuffer",b),i.on(D.XGLOG,y),i.on(D.PLAY,m),i.once(D.LOADED_DATA,g),i.on(D.USER_ACTION,w),i.on(D.ENDED,h),window.addEventListener("beforeunload",I),i.once(Pe.B.BeforeDestroy,I),function(){I(),i.off(Pe.B.BeforeDestroy,I),i.off(D.XGLOG,y),i.off(D.PLAY,m),i.off(D.LOADED_DATA,g),i.off(D.USER_ACTION,w),i.off(D.ENDED,h),i.off("removeBuffer",b),window.removeEventListener("beforeunload",I)}}),[i,o,n]),(0,l.useEffect)((function(){d.current=0,s.current=0,c.current=0}),[o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getH265DegradeReportFlag:p,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getSpecialParams;(0,l.useEffect)((function(){if(!i||!n||68===(null==o?void 0:o.awemeType))return undefined;var e=r(),l=function(){var n,r,l,a,d,s,c,_,v,p,m=t(),y=m.author_id,h=m.group_id,w=m.log_pb,I=m.compilation_id,b=m.playlet_id,T=m.extraParams,L=m.aweme_type,P=(m.isMini,m.trending_topic),k=m.first_tag_name,x=m.top,R=m.is_click_cover,A=m.is_pure,D=m.is_insert_wallpaper,F=(0,J.Z)({awemeInfo:o,player:i}).isH265;W.sendLog("videoPlayFinish",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({is_click_cover:R,urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,U.mo)(),author_id:y,group_id:h,log_pb:w,compilation_id:I,playlet_id:b,is_insert_wallpaper:D,tab_name:z.getTabName()||(0,B.Rs)("tab_name")||"",is_full_screen:(0,ii.r)()?"1":"0",is_full_webscreen:Ie.s.getIsPageFullscreen()?"1":"0",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:null!==(n=E.Le.getConfig(E.gI.IsCollapseAuthorCard))&&void 0!==n&&n.isCollapseAuthorCard?0:1,from_follow_list:null!==(r=E.Le.getConfig(E.gI.FromFollowList))&&void 0!==r&&r.tag?"1":"0",is_mute:null!=i&&i.muted?"1":"0"},(0,oi.t)()),{},{mute_type:null===(l=E.Le.getConfig(E.gI.ForceMuted))||void 0===l?void 0:l.currentMuteType,is_force:"browser"===(null===(a=E.Le.getConfig(E.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType)?"1":"0",aweme_type:L,trending_topic:P,first_tag_name:k,top:x,is_pure:A,from_push:C.Q.getItem({sKey:S.CookieKeys.FromClientPush})?1:0},T),e.videoPlayFinish||{}),{},{is_bytevc1:F,video_time:(0,ni.n)(null==o||null===(d=o.video)||void 0===d?void 0:d.duration),is_from_ad:(0,Q.Jt)(o)?1:0,auto_play_mode:null===(s=E.Le.getConfig(E.gI.InnerAutoPlay))||void 0===s?void 0:s.mode,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,video_play_method:null!==(c=E.Le.getConfig(E.gI.VideoPlayMethod))&&void 0!==c?c:"auto",is_small_window:(0,we.Q)()?"1":"0",is_hw_client:We(i),url_source:null!==(_=null==o||null===(v=o.continationInfo)||void 0===v?void 0:v.urlSource)&&void 0!==_?_:g()(p=["recommend","personal_homepage"]).call(p,(0,U.vM)())?C.Q.getItem({sKey:S.CookieKeys.UrlSourceForBrowserPlugin}):""}));var N=E.Le.getConfig(E.gI.SearchVideoPlayMethod);N&&E.Le.setConfig(E.gI.VideoPlayMethod,N)};return i.once(D.ENDED,l),function(){i.off(D.ENDED,l)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getSpecialParams:m}),be({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){if(!0!==(null==e?void 0:e.isInnerReset)){var i=null==e?void 0:e.isOn;W.sendLog("clickAutoPlay",Se({getLogInfo:t,isAutoPlay:i,customParams:"object"===(0,Le.Z)(null==e?void 0:e.logParams)?null==e?void 0:e.logParams:{}}))}};return i.on(Pe.B.AutoPlaySwitchChange,e),function(){i.off(Pe.B.AutoPlaySwitchChange,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),Re({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getSpecialParams;(0,l.useEffect)((function(){if(i&&n){var e,l,a,d,u,s=0,c=Ne()(),_=0,v=0,p=0,m=!1,y=!1,h=i.vtype,w=(null===(e=E.Le.getConfig(E.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||Ie.s.getPlayerScene(null==i?void 0:i.playerId)===N.lT.Modal,I=null!==(l=null===(a=window)||void 0===a?void 0:a.ROUTE_PARAMS)&&void 0!==l?l:(0,li.parse)(null===(d=window)||void 0===d||null===(u=d.location)||void 0===u?void 0:u.search),b=z.getTabName()||(null==I?void 0:I.tab_name)||(0,B.Rs)("tab_name")||"",T=function(){c=Ne()(),y=!0,w&&(m=!1),null!=i&&i.video&&(s=i.currentTime,h=i.vtype)},L=function(){w&&(m=!1),v=1},P=function(e){var n,l,a,d,u,m,y,w,I,T,L,P,k,x,R,A,D=t(),F=D.author_id,N=D.group_id,Z=D.playlet_id,M=D.log_pb,V=D.isFromNextAutoPlay,O=D.vduration,q=D.extraParams,H=D.pic_cnt,z=D.aweme_type,G=(D.isMini,D.trending_topic),K=D.first_tag_name,j=D.top,Y=D.is_click_cover,X=D.is_pure,$=D.is_insert_wallpaper,ee=D.bitRate,oe=D.latest_group_id,ne=r(),le=Ne()()-c,ae=i.cumulateTime-_;if(!(!c||!i||!N||Ne()()-p<100||le<100)){var de=0;(0,B.Rs)("modeFrom")!==ai.MODE_FROM&&(0,B.Rs)("modeFrom")!==ai.MODE_FROM_SEARCH||(de=1);var ue=(0,J.Z)({awemeInfo:o,player:i}).isH265,se=(null==i||null===(n=i.curDefinition)||void 0===n?void 0:n.bitrate)||ee||0,ce=(0,Me.e)(le/1e3*se);W.sendLog("playTime",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({is_click_cover:Y,is_insert_wallpaper:$,is_visible:String(e?1:0),duration:le,duration_moving:ae,play_time:c,from_percent:1e3*s/O,to_percent:1e3*(null==i?void 0:i.currentTime)/O,is_auto_play:String(V?1:0),urlParamList:["enter_method","trending_topic","previous_page"],tab_name:b,author_id:F,enter_from:(0,U.mo)(),group_id:N,playlet_id:Z,log_pb:M,video_detail_enter_from:(0,di.z)("web_link"),speed:String(null==i?void 0:i.playbackRate),is_loop:String(v),is_full_screen:(0,ii.r)()?"1":"0",is_full_webscreen:Ie.s.getIsPageFullscreen()?"1":"0",is_author_card_expand:null!==(l=E.Le.getConfig(E.gI.IsCollapseAuthorCard))&&void 0!==l&&l.isCollapseAuthorCard?0:1,from_follow_list:null!==(a=E.Le.getConfig(E.gI.FromFollowList))&&void 0!==a&&a.tag?"1":"0",from_push:C.Q.getItem({sKey:S.CookieKeys.FromClientPush})?1:0,is_mute:null!=i&&i.muted?"1":"0"},(0,oi.t)()),{},{mute_type:null===(d=E.Le.getConfig(E.gI.ForceMuted))||void 0===d?void 0:d.currentMuteType,from_academy:de,pic_cnt:H,aweme_type:z,trending_topic:G,first_tag_name:K,top:j,is_pure:X,is_from_ad:(0,Q.Jt)(o)?1:0,is_bytevc1:ue,browser_height:(0,ui.P6)(),browser_width:(0,ui.wi)(),browser_ratio:(0,ui.P6)()/(0,ui.wi)()},ie()),q),ne.playTime||{}),{},{is_force:"browser"===(null===(u=E.Le.getConfig(E.gI.ForceMuted))||void 0===u?void 0:u.currentMuteType)?"1":"0",video_time:(0,ni.n)(null==o||null===(m=o.video)||void 0===m?void 0:m.duration),auto_play_mode:null===(y=E.Le.getConfig(E.gI.InnerAutoPlay))||void 0===y?void 0:y.mode,seo_vids:ci.t("seo_vids")||"",video_play_method:null!==(w=E.Le.getConfig(E.gI.VideoPlayMethod))&&void 0!==w?w:"auto",is_small_window:(0,we.Q)()?"1":"0",url_source:null!==(I=null==o||null===(T=o.continationInfo)||void 0===T?void 0:T.urlSource)&&void 0!==I?I:g()(L=["recommend","personal_homepage"]).call(L,(0,U.vM)())?C.Q.getItem({sKey:S.CookieKeys.UrlSourceForBrowserPlugin}):"",play_order:(0,re.G)(),play_size:ce,video_bitrate:se,latest_group_id:oe,vduration:O,vtype:h},(null==i||null===(P=i.plugins)||void 0===P||null===(k=P.srplugin)||void 0===k||null===(x=k.getStat)||void 0===x?void 0:x.call(k))||{}),{},{video_quality:null==i||null===(R=i.curDefinition)||void 0===R?void 0:R.qualityType,gear_name:null==i||null===(A=i.curDefinition)||void 0===A?void 0:A.gearName},te({player:i})),!1),c=Ne()(),p=Ne()(),_=i.cumulateTime,h=i.vtype}},k=ri()((function(){P("visible"===document.visibilityState)}),500,{leading:!0,trailing:!1}),x=ri()((function(){T()}),500,{leading:!1,trailing:!0}),R=function(){P("visible"===document.visibilityState),T()},A=function(){w&&(m=!0),R(),y=!1},D=function(){w&&!m&&R()},F=function(e){!i.video||null!=i&&i.paused||(P(e),T())},Z=function(){y&&!i.isSeeking&&R()};return i.on("seeked",x),i.on("seeking",k),i.on("play",T),i.on("replay",L),i.on("pause",A),i.on("degrade",Z),i.once("destroy",D),(0,si.vP)(F),function(){i.off("seeked",x),i.off("seeking",k),i.off("play",T),i.off("replay",L),i.off("pause",A),i.off("destroy",D),i.off("degrade",Z),null!=i&&i.paused||R(),(0,si.xC)(F)}}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getSpecialParams:m}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){var i=t(),o=i.author_id,n=i.group_id,r=i.log_pb,l=i.extraParams;W.sendLog("clickVideoSpeed",(0,f.Z)({urlParamList:["previous_page"],author_id:o,group_id:n,log_pb:r,enter_from:(0,U.yW)(),speed:e},l))};return i.on(Pe.B.PlayRatioChange,e),function(){i.off(Pe.B.PlayRatioChange,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){if("switch_play_pause"===(null==e?void 0:e.action)){var i,o="pauseVideo";o=e.paused?"startVideo":"pauseVideo";var n=null!==(i=e.pluginName)&&void 0!==i?i:"click",r=t(),l=r.extraParams;r.isMini,W.sendLog(o,(0,f.Z)((0,f.Z)({enter_from:(0,U.yW)(),click_method:n},l),{},{is_small_window:(0,we.Q)()?"1":"0"}))}};return i.on(D.USER_ACTION,e),function(){i.off(D.USER_ACTION,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){if("change_muted"===(null==e?void 0:e.action)||"change_volume"===(null==e?void 0:e.action)){var o=!1,n=t().extraParams;"change_muted"===(null==e?void 0:e.action)?(W.sendLog("clickVolume",(0,f.Z)({enter_from:(0,U.yW)(),status:e.muted?"1":"0"},n)),(null==e?void 0:e.muted)&&(o=!0)):e.volume>0&&(o=!0),o&&(null==i||i.emit("openVolume"))}};return i.on(D.USER_ACTION,e),function(){i.off(D.USER_ACTION,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){if("click"===(null==e?void 0:e.action)){var i,n=e.currentTime,t=e.prePlayTime,r=e.percent;W.sendLog("progressClick",{enter_from:(0,U.mo)(),enter_from_merge:(0,U.vM)(),tab_name:z.getTabName()||(0,B.Rs)("tab_name")||"",click_method:"click",rate:r,action:n>t?"forward":"rewind",is_small_window:(0,we.Q)()?"1":"0",is_chapter_bar:null!=o&&null!==(i=o.chapterInfo)&&void 0!==i&&i.status?1:0,chapter_index:(0,De.P)({awemeInfo:o,currentTime:e.currentTime}),group_id:null==o?void 0:o.awemeId})}};return i.on(D.USER_ACTION,e),function(){i.off(D.USER_ACTION,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(!i||!n)return undefined;var e=function(e){var i=t(),n=i.getEnterFromDynamic,r=i.extraParams;if(!e.isInnerReset){var l=(null==n?void 0:n())||(0,U.mo)(),a=(0,f.Z)((0,f.Z)((0,f.Z)({enter_from:l},r),e.logParams||{}),{},{group_id:null==o?void 0:o.awemeId});e.isOn&&W.sendLog("openPureMode",a),!e.isOn&&W.sendLog("closePureMode",a)}};return i.on(Pe.B.ImmersiveSwitchChange,e),function(){i.off(Pe.B.ImmersiveSwitchChange,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getH265DegradeReportFlag,a=e.getSupportHwClientFlag,d=(0,l.useRef)([]),u=(0,l.useRef)(0),s=(0,l.useRef)(""),c=(0,l.useRef)([]),v=(0,me.l)();(0,l.useEffect)((function(){var e;s.current===(null==o?void 0:o.awemeId)&&n&&o||(s.current=null==o?void 0:o.awemeId,d.current=[],u.current=0);var l,p=i,m=function(){var e,i;n&&(h()(e=d.current).call(e,(function(e){W.sendLog("videoPlayFailed",e),_i.oe.event.info({name:_i.Mo.VideoPlayFailed,report:e})})),d.current=[],h()(i=c.current).call(i,(function(e){W.sendLog("linkPlayFailed",e)})),c.current=[])},g=function(e){var i,l,s,c,v,g,y,h,w,I,b,T,L,P=t(),S=P.group_id,E=P.vduration,k=P.extraParams,C=P.action_type,x=P.aweme_type,R=(P.awemeRequestTime,P.qualityType),A=P.log_pb,D=P.bitrate_set_client,F=(0,J.Z)({awemeInfo:o,player:p}),N=F.isH265,Z=F.codecFormat,M=F.videoFormat,V=(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"]},(0,$.Z)()),ie()),{},{group_id:S,errorCode:(null==e||null===(i=e.mediaError)||void 0===i?void 0:i.code)||"",errorDesc:(null==e||null===(l=e.mediaError)||void 0===l?void 0:l.message)||"",vduration:E,video_quality:X({player:p,qualityType:R}),player_version:p.version,current_position:1e3*p.currentTime,is_video_support:Number((0,vi.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null===(s=p)||void 0===s?void 0:s.vtype),action_type:C,bitrate_set_client:D,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(c=o.mixInfo)&&void 0!==c&&c.mixId?1:0,is_active:1,is_cdn_expired:1===(0,Y.q)(p.currentSrc)?1:0,is_bytevc1:N,aweme_type:x,log_pb:A,codec_format:Z,video_format:M,play_order:(0,re.G)(),is_supported_265:(0,_.VV)()?1:0,is_265_degrade:r(),has_report:u.current++,is_265_degrade_client:(0,_.ad)({player:p}),is_support_hw:a(),is_hw:"video"===(null===(v=p)||void 0===v||null===(g=v.config)||void 0===g?void 0:g.mediaType)?1:0},te({player:p})),k),(null===(y=p)||void 0===y||null===(h=y.plugins)||void 0===h||null===(w=h.srplugin)||void 0===w||null===(I=w.getStat)||void 0===I?void 0:I.call(w))||{});6===(null==e||null===(b=e.mediaError)||void 0===b?void 0:b.code)&&(V.aweme_info=null===(T=p)||void 0===T||null===(L=T.config)||void 0===L?void 0:L.url),n?(W.sendLog("videoPlayFailed",V),_i.oe.event.info({name:_i.Mo.VideoPlayFailed,report:V})):(d.current.push(V),m())},y=function(e){var i,r,l,a,d,u,s,_,v,f,g,y,h,w=t(),I=w.group_id,b=w.aweme_type,T=(0,J.Z)({awemeInfo:o,player:p}),L=T.isH265,P=T.codecFormat,S=T.videoFormat,k=pe(e.src,p.config.url).isPcdnSource,C={group_id:I,aweme_type:b,host:null==e?void 0:e.host,enter_from:(0,U.yW)(),is_pcdn:Number(k),user_unique_id:null===(i=(0,E.Es)())||void 0===i?void 0:i.user_unique_id,src:globalThis.xssNamespace.douyin_web.filterUrl(null==e?void 0:e.src,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),errorDesc:null!==(r=null==e||null===(l=e.mediaError)||void 0===l?void 0:l.message)&&void 0!==r?r:null==e?void 0:e.message,errorCode:null!==(a=null==e||null===(d=e.mediaError)||void 0===d?void 0:d.code)&&void 0!==a?a:null==e?void 0:e.errorCode,vtype:null!==(u=null==e?void 0:e.vtype)&&void 0!==u?u:null===(s=p)||void 0===s?void 0:s.vtype,range:null==e?void 0:e.range,content_length:null==e||null===(_=e.headers)||void 0===_?void 0:_["content-length"],content_range:null==e||null===(v=e.headers)||void 0===v?void 0:v["content-range"],content_type:null==e||null===(f=e.headers)||void 0===f?void 0:f["content-type"],server_ip:null==e||null===(g=e.headers)||void 0===g?void 0:g.server_ip,x_response_cinfo:null==e||null===(y=e.headers)||void 0===y?void 0:y["x-response-cinfo"],is_bytevc1:L,codec_format:P,video_format:S,current_position:null===(h=p)||void 0===h?void 0:h.currentTime};n?W.sendLog("linkPlayFailed",C):(c.current.push(C),m())};o&&(m(),p&&(p.on(D.ERROR,g),p.on(D.SOURCE_ERROR,y)));var w=function(e){(p=e).on(D.ERROR,g),p.on(D.SOURCE_ERROR,y),l=function(){p.on(D.ERROR,g),p.on(D.SOURCE_ERROR,y)}};return null==v||null===(e=v.on)||void 0===e||e.call(v,fe.V.PlayerCreated,w),function(){var e,i,o,n;null===(e=l)||void 0===e||e(),null===(i=p)||void 0===i||i.off(D.ERROR,g),null===(o=p)||void 0===o||o.off(D.SOURCE_ERROR,y),null==v||null===(n=v.off)||void 0===n||n.call(v,fe.V.PlayerCreated,w)}}),[o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getH265DegradeReportFlag:p,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getReportNetworkSpeed,a=e.getH265DegradeReportFlag,d=e.getIsChangingVideoSrc,s=e.getSupportHwClientFlag;(0,l.useEffect)((function(){if(!i||!o||!n)return undefined;var e=0,l=0,c=0,v=function(v){var p,m,g,y,h,w,I,b,T,L,P,S,k,C=t(),x=C.group_id,R=C.vduration,A=C.bitRate,D=C.qualityType,F=C.extraParams,N=C.action_type,Z=C.aweme_type,M=C.video_play_mode,V=C.is_landscape,O=C.bitrate_set_client,q=(0,J.Z)({awemeInfo:o,player:i}),H=q.codecFormat,z=q.isH265,U=q.videoFormat,B=((null==i?void 0:i.curDefinition)||{}).bitrate,G=(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"],group_id:x,duration:v.costTime,duration_origin:v.fixedCostTime,vduration:R,player_version:i.version,video_quality:X({player:i,qualityType:D})},te({player:i})),{},{video_format:U,video_bitrate:B||A,codec_format:H,internet_speed:r(i),current_position:1e3*i.currentTime,video_play_speed:i.playbackRate,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(p=o.mixInfo)&&void 0!==p&&p.mixId?1:0,buffer_time:ze(i),bitrate_set_client:O,block_type:null==v?void 0:v.type,end_type:null==v?void 0:v.endType,host:null==v?void 0:v.host,vtype:(null==v?void 0:v.vtype)||(null==i?void 0:i.vtype),action_type:N,aweme_type:Z,drop_frame:null===(m=i.videoFrameInfo)||void 0===m?void 0:m.dropped,total_play_frame:null===(g=i.videoFrameInfo)||void 0===g?void 0:g.total,drop_frame_rate:null===(y=i.videoFrameInfo)||void 0===y?void 0:y.droppedRate,drop_frame_duration:null===(h=i.videoFrameInfo)||void 0===h?void 0:h.droppedDuration,is_bytevc1:z,video_play_mode:M,is_landscape:V,play_order:(0,re.G)(),is_supported_265:(0,_.VV)()?1:0,is_265_degrade:a(),is_support_hw:s(),is_hw:"video"===(null==i||null===(w=i.config)||void 0===w?void 0:w.mediaType)?1:0,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,is_hw_client:We(i)},(0,$.Z)()),ie()),F),{},{preload_type:(0,Be.me)(i)?2:1,is_sr:null!=i&&null!==(I=i.plugins)&&void 0!==I&&null!==(b=I.srplugin)&&void 0!==b&&null!==(T=b.getStat)&&void 0!==T&&null!==(L=T.call(b))&&void 0!==L&&L.usingSR?1:0},(null==i||null===(P=i.plugins)||void 0===P||null===(S=P.srplugin)||void 0===S||null===(k=S.getStat)||void 0===k?void 0:k.call(S))||{});if("waitingEnd"===v.eventType&&1===v.type){if(!1===n)G.duration=0,G.duration_origin=0;else{var K=(E.Le.getConfig(E.gI.SlideStartTime)||{}).slideStartTime,j=d()||!K||Ne()()-K>(null==v?void 0:v.costTime)?null==v?void 0:v.costTime:Ne()()-K,Y=d()||!K||Ne()()-K>(null==v?void 0:v.fixedCostTime)?null==v?void 0:v.fixedCostTime:Ne()()-K;G.duration=j,G.duration_origin=Y}W.sendLog("videoBlock",G),_i.oe.event.warn({name:_i.Mo.VideoPlayBlock,report:fi()(G,["player_version","video_quality","block_type","end_type","host","vtype","duration"])})}if("waitingStart"===v.eventType&&(e=Ne()(),l+=1),"waitingEnd"===v.eventType){if(c+=1,0===e||1===(null==v?void 0:v.type))return;W.sendLog("videoBlock",G),_i.oe.event.warn({name:_i.Mo.VideoPlayBlock,report:fi()(G,["player_version","video_quality","block_type","end_type","host","vtype","duration"])}),e=0}},p=function(){var e,o,n,r,a,d,u=(null!==(e=t())&&void 0!==e?e:{}).extraParams;W.sendLog("videoBlockCount",(0,f.Z)((0,f.Z)({block_count:l,differ_count:l-c,player_version:i.version,drop_frame:null===(o=i.videoFrameInfo)||void 0===o?void 0:o.dropped,total_play_frame:null===(n=i.videoFrameInfo)||void 0===n?void 0:n.total,drop_frame_rate:null===(r=i.videoFrameInfo)||void 0===r?void 0:r.droppedRate,drop_frame_duration:null===(a=i.videoFrameInfo)||void 0===a?void 0:a.droppedDuration,is_bytevc1:null==i||null===(d=i.curDefinition)||void 0===d?void 0:d.isH265,play_order:(0,re.G)()},(0,$.Z)()),u))};return i.on(D.XGLOG,v),window.addEventListener("beforeunload",p),function(){p(),i.off(D.XGLOG,v),window.removeEventListener("beforeunload",p)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getReportNetworkSpeed:y,getH265DegradeReportFlag:p,getIsChangingVideoSrc:c,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getReportNetworkSpeed,a=e.getH265DegradeReportFlag,d=e.getIsChangingVideoSrc,s=e.getSupportHwClientFlag,c=(0,me.l)(),v=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,l,p,m,g,y,h=i,w=!1,I="",b=function(){v.current=Ne()()},T=function(e){var i=t(),n=i.group_id,l=i.vduration,c=i.bitRate,p=i.qualityType,m=i.extraParams,g=i.bitrate_set,y=i.bitrate_set_client,b=i.quality_bitrate,T=i.action_type,L=i.aweme_type,P=i.video_play_mode,k=i.is_landscape,C=(0,J.Z)({awemeInfo:o,player:h}),x=C.codecFormat,R=C.isH265,A=C.videoFormat;if("firstFrame"===e.eventType&&!w){var D,F,N,Z,M,V,O,q,H,z,U,B,G,K,j,Y,ee,oe,ne,le,ae,de,ue,se,ce,_e,ve,pe;w=!0;var fe=Ge(h),me=fe.preloadTime,ge=fe.preloadSize,ye=((null===(D=h)||void 0===D?void 0:D.curDefinition)||{}).bitrate,he=(E.Le.getConfig(E.gI.SlideStartTime)||{}).slideStartTime,we=(null===(F=h.video)||void 0===F||null===(N=F.getStats)||void 0===N?void 0:N.call(F))||{},Ie=we.currentLowDecodeCount,be=void 0===Ie?0:Ie,Te=we.decoderMode,Le=void 0===Te?0:Te,Pe=we.lowdecodeVV,Se=void 0===Pe?0:Pe,Ee=we.vv,ke=void 0===Ee?0:Ee,Ce=d(),xe=Ne()(),Re=Ce||!he?null==e?void 0:e.costTime:xe-he,Ae=E.Le.getConfig(E.gI.StartPlayTime),De=!Ce&&he&&Ae?Ae-he:-1,Fe=Ae?xe-Ae:-1,Ze=null===(Z=h)||void 0===Z?void 0:Z.video,Oe=Number(Boolean(null==Ze?void 0:Ze.parentNode)),qe=null==Ze?void 0:Ze.getBoundingClientRect();W.sendLog("videoPlayQuality",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"]},(0,$.Z)()),ie()),{},{group_id:n,bitrate_set:g,bitrate_set_client:y,player_first_frame:null==e?void 0:e.costTime,duration:Re,vduration:l,video_width:null==Ze?void 0:Ze.videoWidth,video_height:null==Ze?void 0:Ze.videoHeight,video_ratio:(null==Ze?void 0:Ze.videoWidth)/(null==Ze?void 0:Ze.videoHeight),video_rect_width:null==qe?void 0:qe.width,video_rect_height:null==qe?void 0:qe.height,is_over_gear:hi(h),device_ratio:null!==(M=window.devicePixelRatio)&&void 0!==M?M:-1,player_version:h.version,video_quality:X({player:h,qualityType:p}),video_size:null===(V=h)||void 0===V||null===(O=V.curDefinition)||void 0===O?void 0:O.size,definition:null===(q=h.curDefinition)||void 0===q?void 0:q.definition,video_format:A,video_bitrate:ye||c,codec_format:x,internet_speed:r(h),preload_time:(0,Me.N)(me),preload_size:ge||0,preload_type:(0,Be.me)(h)?2:1,is_mute:null!==(H=h)&&void 0!==H&&H.muted?"1":"0",player_volume:null===(z=h)||void 0===z?void 0:z.volume,local_mute:(0,Ve.$o)(S.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,Ve.$o)(S.LocalStorageKeys.PLAYER_VOLUME),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null===(U=h)||void 0===U?void 0:U.vtype),is_video_support:Number((0,vi.k)().isSupport),quality_bitrate:b,action_type:T,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(B=o.mixInfo)&&void 0!==B&&B.mixId?1:0,aweme_type:L,is_bytevc1:R,equalize_state:null!==(G=null===(K=h)||void 0===K?void 0:K.equalizeVolumeState)&&void 0!==G?G:0,is_hevc_error_down:null!==(j=null===(Y=h)||void 0===Y?void 0:Y.isHevcErrorDown)&&void 0!==j?j:0,volume_balance_longtest_consume_time:null!==(ee=null===(oe=h)||void 0===oe||null===(ne=oe.effectNodeConsumeTime)||void 0===ne?void 0:ne.longest)&&void 0!==ee?ee:-2,volume_balance_shortest_consume_time:null!==(le=null===(ae=h)||void 0===ae||null===(de=ae.effectNodeConsumeTime)||void 0===de?void 0:de.shortest)&&void 0!==le?le:-2,video_play_mode:P,is_landscape:k,current_low_decode_count:be,decoder_mode:Le,h265_failure_rate:10===ke?Se/ke:-1,play_order:(0,re.G)(),is_supported_265:(0,_.VV)()?1:0,is_265_degrade:a(),is_265_degrade_client:(0,_.ad)({player:h}),is_265_degrade_web:(0,_.OS)({player:h}),is_support_hw:s(),is_hw:"video"===(null===(ue=h)||void 0===ue||null===(se=ue.config)||void 0===se?void 0:se.mediaType)?1:0,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,is_hw_client:We(h),active_stage:I,slide_start_to_play:De,play_to_first_frame:Fe,gear_name:null===(ce=h)||void 0===ce||null===(_e=ce.curDefinition)||void 0===_e?void 0:_e.gearName,media_type:null===(ve=h)||void 0===ve||null===(pe=ve.config)||void 0===pe?void 0:pe.mediaType,is_video_in_dom:Oe},Pi({isChangeVideoSrc:Ce,player:h,data:e,slideStartTime:he,loadedDataTime:v.current})),te({player:h})),m))}},L=function(e){e.on(D.LOADED_DATA,b),g=function(){var i;null===(i=e.off)||void 0===i||i.call(e,D.LOADED_DATA,b)},o&&n&&((h=e).on(D.XGLOG,T),g=function(){var i,o,n;null===(i=h)||void 0===i||null===(o=i.off)||void 0===o||o.call(i,D.XGLOG,T),null===(n=e.off)||void 0===n||n.call(e,D.LOADED_DATA,b)})};if(h||null==c||null===(y=c.on)||void 0===y||y.call(c,fe.V.PlayerCreated,L),h&&h.on(D.LOADED_DATA,b),!h||!o||!n)return function(){var e,i;null===(e=g)||void 0===e||e(),null==c||null===(i=c.off)||void 0===i||i.call(c,fe.V.PlayerCreated,L)};var P,k,C,x,R=null===(e=h)||void 0===e||null===(l=e.plugins)||void 0===l||null===(p=l.mp4encryptplayer)||void 0===p||null===(m=p.states)||void 0===m?void 0:m.length;return R>0&&(I=(null===(P=h)||void 0===P||null===(k=P.plugins)||void 0===k||null===(C=k.mp4encryptplayer)||void 0===C||null===(x=C.states[R-1])||void 0===x?void 0:x.state)||""),h.on(D.XGLOG,T),function(){var e,i;null===(e=g)||void 0===e||e(),h.off(D.XGLOG,T),h.off(D.LOADED_DATA,b),null==c||null===(i=c.off)||void 0===i||i.call(c,fe.V.PlayerCreated,L)}}),[o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getReportNetworkSpeed:y,getH265DegradeReportFlag:p,getIsChangingVideoSrc:c,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive;(0,l.useEffect)((function(){if(!i||!o||!n)return undefined;var e=function(){k.emit(k.EVENT.pageFirstFrameLoadStart)},t=function(){k.emit(k.EVENT.pageFirstFrameLoaded);try{if(E.Le.setConfig(E.gI.isVideoPlayed,!0),E.Le.getConfig(E.gI.MarkFirstEnter)){var e,i,n,t,r,l;if(E.Le.setConfig(E.gI.MarkFirstEnter,null),(0,s.DT)())null===d()||void 0===d()||null===(n=d().app)||void 0===n||null===(t=n.printFirstFeedShow)||void 0===t||t.call(n,{is_landscape:(null==o||null===(r=o.video)||void 0===r?void 0:r.width)>(null==o||null===(l=o.video)||void 0===l?void 0:l.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,U.yW)(),tab_feed_prefetch_duration:(0,Ze.L8)("tabFeedPrefetch","tabFeedPrefetchStart","tabFeedPrefetchEnd")});else if(null!==(e=performance)&&void 0!==e&&null!==(i=e.timing)&&void 0!==i&&i.fetchStart){var a,u,c,_;W.sendLog("prfFirstFeedShow",{feed_total_duration:Ne()()-(null===(a=performance)||void 0===a||null===(u=a.timing)||void 0===u?void 0:u.fetchStart),is_landscape:(null==o||null===(c=o.video)||void 0===c?void 0:c.width)>(null==o||null===(_=o.video)||void 0===_?void 0:_.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,U.yW)()})}try{var v,p,f,m;W.sendLog("prfFirstFeedFirstFrameShow",{feed_total_duration:Ne()()-(null===(v=performance)||void 0===v||null===(p=v.timing)||void 0===p?void 0:p.fetchStart),is_landscape:(null==o||null===(f=o.video)||void 0===f?void 0:f.width)>(null==o||null===(m=o.video)||void 0===m?void 0:m.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,U.yW)()})}catch(g){}}"recommend"===(0,U.yW)()&&E.Le.getConfig(E.gI.FirstEnterRecommend)&&(E.Le.setConfig(E.gI.FirstEnterRecommend,!1),k.emit(k.EVENT.firstEnterVideoPlay))}catch(y){}};return i.on(D.LOADED_DATA,t),i.on(D.LOAD_START,e),function(){i.off(D.LOADED_DATA,t),i.off(D.LOAD_START,e)}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getSpecialParams,a=(0,me.l)();(0,l.useEffect)((function(){var e,l,d=i,s=function(){var e,i,n,l,a,s,c,_,v,p,m,y,h,w,I,b,T,L,P,k,x,R,A=t(),D=A.author_id,F=A.group_id,N=A.log_pb,Z=A.compilation_id,M=A.playlet_id,V=A.impressionData,O=A.extraParams,q=A.aweme_type,H=A.pic_cnt,G=A.trending_topic,K=A.first_tag_name,j=A.top,Y=A.is_pure,X=A.is_click_cover,$=A.is_insert_wallpaper,ee=(A.isMini,A.latest_group_id),oe=(0,J.Z)({awemeInfo:o,player:d}).isH265,ne=E.Le.getConfig(E.gI.VideoFeedList),te=(null==ne?void 0:ne.autoPlayCount)||1,re=0;(0,B.Rs)("modeFrom")!==ai.MODE_FROM&&(0,B.Rs)("modeFrom")!==ai.MODE_FROM_SEARCH||(re=1),W.sendLog("videoPlay",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({is_click_cover:X,is_insert_wallpaper:$,urlParamList:["enter_method","trending_topic","previous_page","keywords_index","keywords_content"],author_id:D,enter_from:(0,U.mo)(),group_id:F,log_pb:N,compilation_id:Z,playlet_id:M,is_auto_play:String(null!==(e=d)&&void 0!==e&&null!==(i=e.plugins)&&void 0!==i&&null!==(n=i.autoplaysettingplugin)&&void 0!==n&&null!==(l=n.config)&&void 0!==l&&l.nextAutoPlay?1:0),is_visible:String("visible"===document.visibilityState?1:0),impression_data:V,speed:"".concat(null===(a=d)||void 0===a?void 0:a.playbackRate),auto_cnt:te,video_detail_enter_from:(0,di.z)("web_link"),is_full_screen:(0,ii.r)()?"1":"0",is_full_webscreen:Ie.s.getIsPageFullscreen()?"1":"0",tab_name:z.getTabName()||(0,B.Rs)("tab_name")||"",from_follow_list:null!==(s=E.Le.getConfig(E.gI.FromFollowList))&&void 0!==s&&s.tag?"1":"0",is_mute:null!==(c=d)&&void 0!==c&&c.muted?"1":"0",mute_type:null===(_=E.Le.getConfig(E.gI.ForceMuted))||void 0===_?void 0:_.currentMuteType,is_pure:Y},(0,oi.t)()),{},{from_academy:re,aweme_type:q,pic_cnt:H,trending_topic:G,first_tag_name:K,top:j,browser_height:(0,ui.P6)(),browser_width:(0,ui.wi)(),browser_ratio:(0,ui.P6)()/(0,ui.wi)(),is_from_ad:(0,Q.Jt)(o)?1:0,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(v=o.mixInfo)&&void 0!==v&&v.mixId?1:0,is_bytevc1:oe,video_time:(0,ni.n)(null==o||null===(p=o.video)||void 0===p?void 0:p.duration),is_force:"browser"===(null===(m=E.Le.getConfig(E.gI.ForceMuted))||void 0===m?void 0:m.currentMuteType)?"1":"0",from_push:C.Q.getItem({sKey:S.CookieKeys.FromClientPush})?1:0,auto_play_mode:null===(y=E.Le.getConfig(E.gI.InnerAutoPlay))||void 0===y?void 0:y.mode,seo_vids:ci.t("seo_vids")||"",webdriver:navigator&&navigator.webdriver?1:0,vtype:null===(h=d)||void 0===h?void 0:h.vtype,is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,is_hevc_error_down:null!==(w=null===(I=d)||void 0===I?void 0:I.isHevcErrorDown)&&void 0!==w?w:0},ie()),O),(null===(b=r())||void 0===b?void 0:b.videoPlay)||{}),{},{video_play_method:null!==(T=E.Le.getConfig(E.gI.VideoPlayMethod))&&void 0!==T?T:"auto",is_small_window:(0,we.Q)()?"1":"0"},$&&E.Le.getConfig(E.gI.WallPaperPosition)>0?{vv_sync:1}:{}),{},{url_source:null!==(L=null==o||null===(P=o.continationInfo)||void 0===P?void 0:P.urlSource)&&void 0!==L?L:g()(k=["recommend","personal_homepage"]).call(k,(0,U.vM)())?C.Q.getItem({sKey:S.CookieKeys.UrlSourceForBrowserPlugin}):"",latest_group_id:ee,expand_video_card_type:null!==(x=E.Le.getConfig(E.gI.PlayerCardInfo))&&void 0!==x&&x.isActive?null===(R=E.Le.getConfig(E.gI.PlayerCardInfo))||void 0===R?void 0:R.expandCardType:""}))},c=function(i){o&&n&&((d=i).once(D.AUTOPLAY_STARTED,s),e=function(){d.off(D.AUTOPLAY_STARTED,s)})};return d||null==a||null===(l=a.on)||void 0===l||l.call(a,fe.V.PlayerCreated,c),d&&n?(d.once(D.AUTOPLAY_STARTED,s),function(){var i,o;null===(i=e)||void 0===i||i(),d.off(D.AUTOPLAY_STARTED,s),null==a||null===(o=a.off)||void 0===o||o.call(a,fe.V.PlayerCreated,c)}):function(){var i,o;null==a||null===(i=a.off)||void 0===i||i.call(a,fe.V.PlayerCreated,c),null===(o=e)||void 0===o||o()}}),[o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getSpecialParams:m}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){var e;if(!i||!o||!n)return undefined;var r=t(),l=r.group_id,a=r.vduration,d=r.extraParams,u=r.bitrate_set,s=r.bitrate_set_client,c=r.quality_bitrate,_=r.action_type,v=r.aweme_type,p=r.video_play_mode,m=r.is_landscape,g=(0,J.Z)({awemeInfo:o,player:i}),y=g.codecFormat,h=g.isH265,w=g.videoFormat,I=(0,Si.J)(),b=I.battery,T=void 0===b?{}:b,L=I.memory,P=void 0===L?{}:L;W.sendLog("videoInit",(0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"]},(0,$.Z)()),{},{group_id:l,bitrate_set:u,bitrate_set_client:s,vduration:a,player_version:i.version,video_format:w,codec_format:y,is_mute:null!=i&&i.muted?"1":"0",player_volume:null==i?void 0:i.volume,local_mute:(0,Ve.$o)(S.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,Ve.$o)(S.LocalStorageKeys.PLAYER_VOLUME),is_video_support:Number((0,vi.k)().isSupport),quality_bitrate:c,action_type:_,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(e=o.mixInfo)&&void 0!==e&&e.mixId?1:0,aweme_type:v,is_bytevc1:h,video_play_mode:p,is_landscape:m,play_order:(0,re.G)()},d),{},{buffer_duration:He(i),battery_charging:T.charging,battery_level:T.level,memory_js_heap_size_limit:P.jsHeapSizeLimit,memory_free_js_heap_size:P.freeJSHeapSize,memory_free_level:P.freeLevel,memory_used_js_heap_size:P.usedJSHeapSize}))}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v}),function(e){var i=e.player,o=e.awemeInfo;e.isActive,(0,l.useEffect)((function(){if(i){var e,o=window.playerPreloader,n=function(e){var i,o=e||{},n=o.vid,t=o.force_set_min;W.sendLog("prfTaskDataSize",(0,f.Z)((0,f.Z)({},e||{}),{},{user_unique_id:null===(i=(0,E.Es)())||void 0===i?void 0:i.user_unique_id,group_id:n,force_set_min:t?1:0}))};return i.on("prf_data_size",n),null==o||null===(e=o.on)||void 0===e||e.call(o,"prf_data_size",n),function(){var e;i.off("prf_data_size",n),null==o||null===(e=o.off)||void 0===e||e.call(o,"prf_data_size",n)}}}),[i,o])}({player:o,awemeInfo:i,isActive:t}),function(e){var i=e.isNext,o=e.player,t=e.awemeInfo,a=e.getLogInfo;e.isActive,(0,l.useEffect)((function(){if(i&&o&&t){var e=(0,U.yW)(),n=function(){var i,n,r=t.awemeId,l=(null===(i=o.curDefinition)||void 0===i?void 0:i.bitrate)||0,d=He(o),u=(0,Me.e)(d*l),s=Ue(o),c=a().qualityType,_={user_unique_id:null===(n=(0,E.Es)())||void 0===n?void 0:n.user_unique_id,enter_from:e,group_id:r,preload_size:u,preload_time:d,video_bitrate:l,video_quality:X({player:o,qualityType:c}),data_player_type:s,vtype:o.vtype,duration:o.duration,type:0};W.sendLog("prfLastPreloadDataSize",_,!1)};return o.on(Pe.B.BeforeDestroy,n),window.addEventListener("beforeunload",n),function(){o.off(Pe.B.BeforeDestroy,n),window.removeEventListener("beforeunload",n)}}}),[o,t,i]),(0,l.useEffect)((function(){if(o){var e=Ie.s.getPlayerScene(o.playerId)===N.lT.Modal;if(o.preloader&&(i||e)){var t=(0,U.yW)(),l=function(){var e=(0,n.Z)(r().mark((function e(){var i,n,l,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(i=(n=o.preloader).getPreloadUnuseInfo)||void 0===i?void 0:i.call(n);case 2:l=e.sent,ae()(l)&&(h()(l).call(l,(function(e){var i;if(!Di[null==e?void 0:e.vid]){var o=e||{},n=o.vid,r=o.bw,l=o.pbw,a=o.duration,d=(o.definition,o.bitrate),u={user_unique_id:null===(i=(0,E.Es)())||void 0===i?void 0:i.user_unique_id,enter_from:t,group_id:n,preload_size_cdn:r,preload_size_pcdn:l,duration:a,video_bitrate:d,type:1,vtype:"MP4_MSE",preload_time:5};W.sendLog("prfLastPreloadDataSize",u,!1),Di[null==e?void 0:e.vid]=!0}})),h()(a=I()(Di)).call(a,(function(e){-1===ue()(l).call(l,(function(i){return(null==i?void 0:i.vid)===e}))&&delete Di[e]})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.on(Pe.B.BeforeDestroy,l),window.addEventListener("beforeunload",l),function(){o.off(Pe.B.BeforeDestroy,l),window.removeEventListener("beforeunload",l)}}}}),[o,t,i])}({isNext:a,player:o,awemeInfo:i,getLogInfo:v,isActive:t}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo;(0,l.useEffect)((function(){if(i&&n)try{var e=function(e){try{var n,r=t(),l=r.group_id,a=r.playlet_id,d=r.log_pb,u=r.extraParams,s=r.aweme_type,c=r.top,_=r.is_pure,v=r.bitRate,p=r.latest_group_id,m=(0,J.Z)({awemeInfo:o,player:i}).isH265,g=(null===(n=i.curDefinition)||void 0===n?void 0:n.bitrate)||v||0;W.sendLog("fpsStuck",(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({},e),{},{enter_from:(0,U.mo)(),group_id:l,playlet_id:a,log_pb:d,speed:String(null==i?void 0:i.playbackRate)},(0,oi.t)()),{},{aweme_type:s,top:c,is_pure:_,is_bytevc1:m},ie()),u),{},{play_order:(0,re.G)(),video_bitrate:g,latest_group_id:p,current_position:i.currentTime,vtype:i.vtype}),!1)}catch(y){_i.oe.event.error({name:_i.Mo.FpsStuckReportError,report:{type:1}})}};return i.on(D.FPS_STUCK,e),function(){i.off(D.FPS_STUCK,e)}}catch(r){_i.oe.event.error({name:_i.Mo.FpsStuckReportError,report:{type:0}})}}),[i,o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getSpecialParams:m}),function(e){var i=e.player,o=e.awemeInfo,n=e.isActive,t=e.getLogInfo,r=e.getH265DegradeReportFlag,a=e.getSupportHwClientFlag,d=(0,l.useRef)([]),u=(0,l.useRef)(0),s=(0,l.useRef)(""),c=(0,me.l)();(0,l.useEffect)((function(){s.current===(null==o?void 0:o.awemeId)&&n&&o||(s.current=null==o?void 0:o.awemeId,d.current=[],u.current=0);var e,l=i,v=function(){var e;n&&(h()(e=d.current).call(e,(function(e){W.sendLog("videoDegrade",e)})),d.current=[])},p=function(e){var i,n,s,c,p=t(),m=p.group_id,g=p.vduration,y=p.extraParams,h=p.action_type,w=p.aweme_type,I=(p.awemeRequestTime,p.qualityType),b=p.log_pb,T=p.bitrate_set_client,L=(0,J.Z)({awemeInfo:o,player:l}),P=L.isH265,S=L.codecFormat,E=L.videoFormat,k=(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({urlParamList:["previous_page","tab_name"]},(0,$.Z)()),ie()),{},{group_id:m,errorCode:null==e?void 0:e.errc,errorDesc:null==e?void 0:e.err_msg,vduration:g,video_quality:X({player:l,qualityType:I}),player_version:l.version,current_position:1e3*l.currentTime,is_video_support:Number((0,vi.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null===(i=l)||void 0===i?void 0:i.vtype),action_type:h,bitrate_set_client:T,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:null!=o&&null!==(n=o.mixInfo)&&void 0!==n&&n.mixId?1:0,is_active:1,is_cdn_expired:1===(0,Y.q)(l.currentSrc)?1:0,is_bytevc1:P,aweme_type:w,log_pb:b,codec_format:S,video_format:E,play_order:(0,re.G)(),is_supported_265:(0,_.VV)()?1:0,is_265_degrade:r(),has_report:u.current++,is_265_degrade_client:(0,_.ad)({player:l}),is_support_hw:a(),is_hw:"video"===(null===(s=l)||void 0===s||null===(c=s.config)||void 0===c?void 0:c.mediaType)?1:0},te({player:l})),y);d.current.push(k),v()};o&&(v(),l&&l.on("degrade",p));var m,g=function(i){(l=i).on("degrade",p),e=function(){l.on("degrade",p)}};return l||null==c||null===(m=c.on)||void 0===m||m.call(c,fe.V.PlayerCreated,g),function(){var i,o,n;null===(i=e)||void 0===i||i(),null===(o=l)||void 0===o||o.off("degrade",p),null==c||null===(n=c.off)||void 0===n||n.call(c,fe.V.PlayerCreated,g)}}),[o,n])}({player:o,awemeInfo:i,isActive:t,getLogInfo:v,getH265DegradeReportFlag:p,getSupportHwClientFlag:w}),function(e){var i=e.player,o=e.isActive;(0,l.useEffect)((function(){if(i&&o){var e,n=function(e){var o,n,t,r,l,a,d,u,s,c,_,v,p,m,y,h,w=null==e?void 0:e.code;W.sendLog("srDegrade",(0,f.Z)((0,f.Z)({enter_from:(0,U.yW)(),group_id:null==i||null===(o=i.config)||void 0===o?void 0:o.vid,vtype:null==i?void 0:i.vtype,quality_type:null==i||null===(n=i.curDefinition)||void 0===n?void 0:n.qualityType,gear_name:null==i||null===(t=i.curDefinition)||void 0===t?void 0:t.gearName,definition:null==i||null===(r=i.curDefinition)||void 0===r?void 0:r.definition,is_bytevc1:null==i||null===(l=i.curDefinition)||void 0===l?void 0:l.isH265,current_time:null==i?void 0:i.currentTime},(null==i||null===(a=i.plugins)||void 0===a||null===(d=a.srplugin)||void 0===d||null===(u=d.getStat)||void 0===u?void 0:u.call(d))||{}),e||{})),(null==i||null===(s=i.plugins)||void 0===s||null===(c=s.srplugin)||void 0===c||null===(_=c.getStat)||void 0===_||null===(v=_.call(c))||void 0===v?void 0:v.renderDelta)>(null==e?void 0:e.defaultRenderDelta)&&ki++;var I=null===(p=E.Le.getConfig(E.gI.AbtestData))||void 0===p||null===(m=p.SR)||void 0===m?void 0:m.renderDeltaAccumulate;ki>I&&(0,Ve.qQ)(S.LocalStorageKeys.srDegradePermanently,1),g()(y=[Ci,xi,Ri,Ai]).call(y,w)&&(window.srDegradeFinally=!0,E.Le.setConfig(E.gI.SrDegrade,1)),g()(h=[Ri,Ai]).call(h,w)&&(0,Ve.qQ)(S.LocalStorageKeys.srDegradePermanently,1)};return null==i||null===(e=i.on)||void 0===e||e.call(i,Ei.D.SR_DEGRADE,n),function(){var e;null==i||null===(e=i.off)||void 0===e||e.call(i,Ei.D.SR_DEGRADE,n)}}}),[i,o])}({player:o,isActive:t})}var Ni=o(35667),Zi=function(e){var i=e||{},o=i.awemeInfo,t=i.isActive,a=i.isNext,d=i.isPrev,s=i.logParams,c=i.userInfo,m=i.isClientMiniWin,y=i.isFirst,w=(0,Ni.n)(),b=function(e){var i=e.awemeInfo,o=e.isActive,t=(0,l.useRef)(!1),a=(0,l.useRef)((0,u.$n)());t.current=(0,l.useMemo)((function(){return!v&&!(0,_.Cu)()&&(v=!0,!0)}),[i]),(0,l.useEffect)((function(){(0,n.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,p();case 3:a.current=e.sent;case 4:case"end":return e.stop()}}),e)})))()}),[i,o]);var d=(0,l.useCallback)((function(){return a.current}),[]);return{getH265DegradeReportFlag:(0,l.useCallback)((function(){return t.current?1:0}),[]),getSupportHwClientFlag:d}}({awemeInfo:o,isActive:t}),L=b.getH265DegradeReportFlag,P=b.getSupportHwClientFlag,N=function(e){var i=e.awemeInfo,o=e.isNext,n=e.isPrev,t=e.isActive,r=(0,l.useRef)(null),a=(0,l.useRef)("click"),d=(0,l.useRef)(!1),u=(0,l.useRef)();return o?a.current="down":n&&(a.current="up"),r.current&&null!=i&&i.awemeId&&(null==i?void 0:i.awemeId)!==r.current&&(t&&u.current?(d.current=!0,a.current="click"):d.current=!1),u.current=t,r.current=null==i?void 0:i.awemeId,{getActionType:(0,l.useCallback)((function(){return a.current}),[]),getIsChangingVideoSrc:(0,l.useCallback)((function(){return d.current}),[])}}({awemeInfo:o,isNext:a,isPrev:d,isActive:t}),Z=N.getActionType,M=N.getIsChangingVideoSrc,q=function(e){var i=e.awemeInfo,o=e.player,n=e.isActive,t=e.isFirst,r=e.isClientMiniWin,a=e.specialParams,d=e.logParams,u=e.getActionType,s=(0,x.O)({player:o,isActive:n}).inImmersive;(0,l.useEffect)((function(){if(o&&n){var e=function(e){var i,o=(null==e?void 0:e.from)||(null==e?void 0:e.clickFrom),n="auto";g()(i=["click_button","scroll"]).call(i,o)?n="manual":"auto"===o&&(n="auto_play_open"),E.Le.setConfig(E.gI.VideoPlayMethod,n)},i=k.listen(k.EVENT.reportPlayNext,e),t=k.listen(k.EVENT.reportPlayPrev,e);return function(){t(),i()}}}),[o,i,n]);var c=(0,l.useRef)(null);return c.current=(0,l.useMemo)((function(){var e,n,l,c,_,v,p,m,y,w=(0,f.Z)({item_duration_ms:(null==i||null===(e=i.video)||void 0===e?void 0:e.duration)||0},d);h()(n=I()(a)).call(n,(function(e){var i;h()(i=a[e]).call(i,(function(e){delete w[e]}))}));var b={is_click_cover:t?1:0,action_type:u(),is_pure:s?"1":"0",extraParams:w,isMini:r,video_play_mode:1===(null===(l=C.Q.getItem({sKey:S.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===l?void 0:l.type)?"landscape":"all",is_insert_wallpaper:null!==(c=E.Le.getConfig(E.gI.WallPaperIds))&&void 0!==c&&g()(c).call(c,null==i?void 0:i.awemeId)?1:0,latest_group_id:null===(_=E.Le.getConfig(E.gI.FeedLatestViewedAweme))||void 0===_?void 0:_.awemeId};return(0,f.Z)((0,f.Z)((0,f.Z)({},R(i)),b),{},{isFromNextAutoPlay:null==o||null===(v=o.plugins)||void 0===v||null===(p=v.autoplaysettingplugin)||void 0===p||null===(m=p.config)||void 0===m?void 0:m.nextAutoPlay,bitrate_set_client:null==o||null===(y=o.definitionList)||void 0===y?void 0:T()(y).call(y,(function(e){return null==e?void 0:e.gearName}))})}),[i,d,t,r,s,o,u]),{getLogInfo:(0,l.useCallback)((function(){return c.current}),[])}}({awemeInfo:o,player:w,specialParams:A,logParams:s,isFirst:y,isClientMiniWin:m,isActive:t,getActionType:Z}),H=q.getLogInfo,z=function(e){var i=(0,e.getLogInfo)(),o=(0,l.useRef)(null);return o.current=(0,l.useMemo)((function(){var e,o={};return h()(e=I()(A)).call(e,(function(e){var n,t={};h()(n=A[e]).call(n,(function(e){t[e]=i[e]})),o[e]=t})),o}),[i]),{getSpecialParams:(0,l.useCallback)((function(){return o.current}),[])}}({getLogInfo:H}),U=z.getSpecialParams;return function(e){var i=e.player;(0,l.useEffect)((function(){if(!i)return undefined;var e=function(){i.emit("focus")};return i.on("autoplay_started",e),function(){i.off("autoplay_started",e)}}),[i]),(0,l.useEffect)((function(){if(!i)return undefined;var e=function(){k.emit(k.EVENT.videoPlay)},o=function(){k.emit(k.EVENT.videoPlayPrevent)};return i.on(D.AUTOPLAY_PREVENTED,o),i.on(D.AUTOPLAY_STARTED,e),function(){i.off(D.AUTOPLAY_PREVENTED,o),i.off(D.AUTOPLAY_STARTED,e)}}),[i])}({player:w}),V({player:w,awemeInfo:o,userInfo:c}),function(e){var i=e.player;(0,l.useEffect)((function(){if(!i)return undefined;var e=function(e){var i=e.speed;F=i,E.Le.setConfig(E.gI.NetworkSpeed,i)};return i.on("download_speed_change",e),function(){i.off("download_speed_change",e)}}),[i])}({player:w}),Fi({player:w,isActive:t,awemeInfo:o,getIsChangingVideoSrc:M,getLogInfo:H,getH265DegradeReportFlag:L,getSpecialParams:U,getReportNetworkSpeed:O,getSupportHwClientFlag:P,isNext:a}),null}},61979:function(e,i,o){var n=o(72603),t=o(28712);i.Z=function(){var e,i,o,r,l;return{enter_from:(0,n.mo)(),internet_speed_dl:null===(e=navigator)||void 0===e||null===(i=e.connection)||void 0===i?void 0:i.downlink,cpu_core:null===(o=navigator)||void 0===o?void 0:o.hardwareConcurrency,memory_size:null===(r=navigator)||void 0===r?void 0:r.deviceMemory,UA_info:null===(l=navigator)||void 0===l?void 0:l.userAgent,webdriver:!(0,t.p)()&&navigator&&navigator.webdriver?1:0}}},44993:function(e,i,o){o.d(i,{Z:function(){return t}});var n=o(11102);function t(e){var i,o=e.awemeInfo,t=e.player,r=(0,n.U)({awemeInfo:o,player:t});return{isH265:r,codecFormat:2===r?"bytevc2":1===r?"bytevc":"h264",videoFormat:null!==(i=null==t?void 0:t.playerType)&&void 0!==i?i:"mp4"}}}}]);