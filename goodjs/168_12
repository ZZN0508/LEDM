define("pkg/@alife/vbar-topline/0.0.12/index",["preact-compat","pkg/@alife/refly-tracelog/0.0.12/index","pkg/@alife/refly-request/0.2.x/index","pkg/@alife/refly-helpers/0.0.11/index"],function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_5__,__WEBPACK_EXTERNAL_MODULE_6__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat),_container=__webpack_require__(2),_container2=_interopRequireDefault(_container);module.exports={title:"\u963f\u91cc\u5934\u6761",icon:{normal:"url(//img.alicdn.com/tfs/TB1LSg1KxjaK1RjSZKzXXXVwXXa-16-16.png) center no-repeat",hover:"url(//img.alicdn.com/tfs/TB1D53xKrPpK1RjSZFFXXa5PpXa-16-16.png) center no-repeat"},login:!0,panel:{name:"panel-topline",title:"\u963f\u91cc\u5934\u6761\u8ba2\u9605\u53f7\u6d88\u606f",showHeader:!0,render:function(state,props){return _preactCompat2["default"].createElement(_container2["default"],props)}}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat),_reflyTracelog=__webpack_require__(3),_reflyTracelog2=_interopRequireDefault(_reflyTracelog),_api=__webpack_require__(4),_api2=_interopRequireDefault(_api),_tab=__webpack_require__(7),_tab2=_interopRequireDefault(_tab),_tinyInfiniteScroll=__webpack_require__(13),_tinyInfiniteScroll2=_interopRequireDefault(_tinyInfiniteScroll),_card=__webpack_require__(16),_card2=_interopRequireDefault(_card),_detailPanel=__webpack_require__(20),_detailPanel2=_interopRequireDefault(_detailPanel);__webpack_require__(23);var TABS=[{key:"all",name:"\u6240\u6709"},{key:"unread",name:"\u672a\u8bfb"}],pageSize=10,Container=function(_Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this.state={isLoading:!1,tabs:TABS,dataSource:[],hasMore:!0,currentDetail:null},_this.page=1,_this.unReadCount=0,_this.activeKey=_this.props.activeKey||"all",_this.onTabChange=_this.onTabChange.bind(_this),_this.onListLoad=_this.onListLoad.bind(_this),_this.onDetailPanelClose=_this.onDetailPanelClose.bind(_this),_this.onClickItem=_this.onClickItem.bind(_this),_this}return _inherits(Container,_Component),Container.prototype.componentDidMount=function(){new _reflyTracelog2["default"](".ap-vbar-topline.container",{noClick:!0,noExposure:!1}),this.getMessageList({page:this.page,size:pageSize})},Container.prototype.onTabChange=function(tab){this.activeKey=tab.key,this.getMessageList({page:1}),this.setState({currentDetail:null})},Container.prototype.onListLoad=function(){this.getMessageList({page:this.page+1})},Container.prototype.onClickItem=function(detail){this.setState({currentDetail:detail}),this.markMsgRead(detail)},Container.prototype.onDetailPanelClose=function(){var _this2=this;setTimeout(function(){_this2.setState({currentDetail:null})},100)},Container.prototype.getMessageList=function(params){var _this3=this;this.state.isLoading||this.setState({isLoading:!0,dataSource:1===params.page?[]:this.state.dataSource},function(){var defaultParam={size:pageSize,mark:"toutiao"};"unread"===_this3.activeKey&&(defaultParam.isRead=!1),_api2["default"].getDetailListByBiz(_extends(defaultParam,params)).then(function(res){var oldDataSource=_this3.state.dataSource;_this3.page=params.page,1===params.page&&(oldDataSource=[],_this3.unReadCount=res.unReadCount>0?res.unReadCount:0);var hasMore=params.page<res.totalPages;_this3.setState({hasMore:hasMore,dataSource:oldDataSource.concat(res.msgDetailList||[]),tabs:_this3.convertTabs(_this3.unReadCount),isLoading:!1})},function(){return _this3.setState({isLoading:!1})})})},Container.prototype.markMsgRead=function(detail){var _this4=this;1!==detail.readStatus&&_api2["default"].updateMsgById({msgId:detail.id,markRead:!0,markOpen:!0}).then(function(){var _state$dataSource=_this4.state.dataSource,dataSource=void 0===_state$dataSource?[]:_state$dataSource,index=dataSource.findIndex(function(item){return item.taskId===detail.taskId}),newDataSource=[].concat(dataSource.slice(0,index),[_extends({},dataSource[index],{readStatus:1})],dataSource.slice(index+1));_this4.unReadCount=_this4.unReadCount>1?_this4.unReadCount-1:0;var newTabs=_this4.convertTabs(_this4.unReadCount);_this4.setState({dataSource:newDataSource,tabs:newTabs})})},Container.prototype.convertTabs=function(unReadCount){return TABS.map(function(tab){return"unread"===tab.key?_extends({},tab,{name:tab.name+"("+unReadCount+")"}):_extends({},tab)})},Container.prototype.render=function(){var _this5=this,activeKey=this.props.activeKey?this.props.activeKey:TABS[0].key,_state=this.state,hasMore=_state.hasMore,dataSource=_state.dataSource,isLoading=_state.isLoading,tabs=_state.tabs,currentDetail=_state.currentDetail,isEmpty=dataSource.length<=0&&!isLoading;return _preactCompat2["default"].createElement("div",{className:"ap-vbar-topline container"},_preactCompat2["default"].createElement(_tab2["default"],{defaultActiveKey:activeKey,dataSource:tabs,onChange:this.onTabChange}),_preactCompat2["default"].createElement(_tinyInfiniteScroll2["default"],{hasMore:hasMore,onLoad:this.onListLoad,isInfiniteLoading:isLoading},isEmpty?_preactCompat2["default"].createElement("div",{className:"empty"},_preactCompat2["default"].createElement("p",null,"\u60a8\u6682\u65f6\u8fd8\u672a\u6536\u5230\u5934\u6761\u53f7\u6d88\u606f\uff0c\u6709\u65b0\u589e\u6d88\u606f\u65f6\uff0c\u5de5\u5177\u6761\u4f1a\u6709\u65b0\u3010\u6d88\u606f\u3011\u63d0\u9192\u54e6\uff01\u656c\u8bf7\u5173\u6ce8\uff01"),_preactCompat2["default"].createElement("img",{className:"img",src:"//img.alicdn.com/tfs/TB1cG5Tj3vD8KJjy0FlXXagBFXa-240-180.png"})):dataSource.map(function(detail){return _preactCompat2["default"].createElement("div",{key:detail.id||detail.taskId},_preactCompat2["default"].createElement(_card2["default"],{detail:detail,onClick:_this5.onClickItem}))})),_preactCompat2["default"].createElement(_detailPanel2["default"],{visible:!!currentDetail,onClose:this.onDetailPanelClose,url:currentDetail&&(currentDetail.msgBody.contentUrl||currentDetail.msgBody.mobileTargetLink)}))},Container}(_preactCompat.Component);exports["default"]=Container},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_reflyRequest=__webpack_require__(5),_reflyRequest2=_interopRequireDefault(_reflyRequest),_reflyHelpers=__webpack_require__(6),_reflyHelpers2=_interopRequireDefault(_reflyHelpers),msgServer=_reflyHelpers2["default"].getUrl("messageServer"),_getDetailListByBiz=(0,_reflyRequest2["default"])(msgServer+"/msg/ajax/getDetailListByBiz.jsonp"),_updateMsgById=(0,_reflyRequest2["default"])("mbox://msgCenterUpdateMsgById/execute"),_listContentInfos=(0,_reflyRequest2["default"])("mbox://listContentInfos/execute"),MBOX_OPTIONS={urlTpl:"//widget.1688.com/front/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",csrfUrlTpl:"//widget.1688.com/front/ajax/getJsonComponent.json?namespace={namespace}&widgetId={widgetId}&methodName={methodName}",dataType:"jsonp",transType:"jsonp",bridgeUrl:"//widget.1688.com/front/ajax/bridge.html?target={target}"};exports["default"]={getDetailListByBiz:function(params){var _this=this,convertList=function(list){var contentInfos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return list.map(function(msg){var body=msg.bizData;try{body=JSON.parse(msg.body)}catch(e){}return body.aggrArr&&body.aggrArr.length&&(body.aggrArr=body.aggrArr.map(function(item){return _extends({},item,{contentInfo:contentInfos[item.feedId]})})),_extends({},msg,{msgBody:body,contentInfo:contentInfos[msg.bizData&&msg.bizData.feedId]||{}})})};return this.snedRequest(_getDetailListByBiz,_extends({channelCode:12,isShowUnReadCount:!0},params)).then(function(res){var _res$msgDetailList=res.msgDetailList,msgDetailList=void 0===_res$msgDetailList?[]:_res$msgDetailList,ids=[];return msgDetailList.forEach(function(msg){msg.bizData.aggrArr&&msg.bizData.aggrArr.length?msg.bizData.aggrArr.forEach(function(m){return ids.push(m.feedId)}):ids.push(msg.bizData.feedId)}),ids=ids.filter(function(id){return!!id}),ids.length>0?_this.listContentInfos({contentIds:ids.join(",")}).then(function(infosRes){var contentInfos=infosRes&&infosRes.contentInfos;return res.msgDetailList=convertList(msgDetailList,contentInfos),res},function(){return res.msgDetailList=convertList(msgDetailList,{}),res}):res})},updateMsgById:function(params){return new Promise(function(resolve,reject){_updateMsgById.jsonp(_extends({bizCode:12},params),_extends({csrfToken:!0,nocache:!0},MBOX_OPTIONS)).done(function(res){!res.hasError&&res.content&&res.content.success||reject(res),resolve(res.content[prop]||{})}).fail(function(err){reject(err)})})},listContentInfos:function(params){return this.snedRequest(_listContentInfos,params,"jsonp","data")},snedRequest:function(requestInstance){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},method=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jsonp",prop=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"content";return new Promise(function(resolve,reject){requestInstance[method](params,{nocache:!0}).done(function(res){!res.hasError&&res.content&&res.content.success||reject(res),resolve(res.content[prop]||{})}).fail(function(err){reject(err)})})}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_6__},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames);__webpack_require__(9);var Tabs=function(_Component){function Tabs(props){_classCallCheck(this,Tabs);var _this=_possibleConstructorReturn(this,_Component.call(this,props)),defaultActiveKey=props.defaultActiveKey,dataSource=props.dataSource,_dataSource$=dataSource[0],firstItem=void 0===_dataSource$?{}:_dataSource$,activeKey=void 0!==defaultActiveKey?defaultActiveKey:firstItem.key;return _this.state={activeKey:activeKey,currentIndex:0},_this.onClickItem=_this.onClickItem.bind(_this),_this.onClickPaging=_this.onClickPaging.bind(_this),_this}return _inherits(Tabs,_Component),Tabs.prototype.onClickItem=function(item){var noClosePanel=arguments.length>1&&void 0!==arguments[1]&&arguments[1],key=item.key;this.state.activeKey!==key&&(this.setState({activeKey:key}),this.props.onChange(item,noClosePanel))},Tabs.prototype.onClickPaging=function(type){if(!this.isPagingOff(type)){var factor="prev"===type?-1:1;this.setState(function(preState){return{currentIndex:preState.currentIndex+factor}})}},Tabs.prototype.isPagingOff=function(type){var currentIndex=this.state.currentIndex,_props=this.props,tabSize=_props.tabSize,dataSource=_props.dataSource,pageSize=Math.ceil(dataSource.length/tabSize);return"prev"===type&&0===currentIndex||"prev"!==type&&currentIndex+1>=pageSize},Tabs.prototype.normalizePagingClazz=function(type){var clazz="tabs__"+("prev"===type?"prev":"next");return this.isPagingOff(type)&&(clazz+=" "+clazz+"--disabled"),clazz},Tabs.prototype.renderItems=function(){var _this2=this,items=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],tabSize=this.props.tabSize,lastIndex=items.length-1,tabStyle={width:Number(100/tabSize).toFixed(4)+"%"};return items.map(function(item,index){var key=item.key,name=item.name,tabClazz=(0,_classnames2["default"])("tabs__item",{"tabs__item--first":0===index,"tabs__item--last":index===lastIndex,"tabs__item--active":_this2.state.activeKey===key});return _preactCompat2["default"].createElement("li",{key:key,className:tabClazz,style:tabStyle,onClick:function(){return _this2.onClickItem(item)}},_preactCompat2["default"].createElement("p",{className:"tabs__text"},name))})},Tabs.prototype.render=function(){var _classNames,_this3=this,currentIndex=this.state.currentIndex,_props2=this.props,className=_props2.className,tabSize=_props2.tabSize,dataSource=_props2.dataSource,clazz=(0,_classnames2["default"])("tabs",(_classNames={},_classNames[className]=!!className,_classNames)),startIndex=currentIndex*tabSize,items=dataSource.slice(startIndex,startIndex+tabSize),len=dataSource.length,showPaging=len>tabSize;return _preactCompat2["default"].createElement("div",{className:clazz},_preactCompat2["default"].createElement("ul",{className:"tabs__items"},this.renderItems(items)),showPaging&&_preactCompat2["default"].createElement("span",{className:this.normalizePagingClazz("prev"),onClick:function(){return _this3.onClickPaging("prev")}}),showPaging&&_preactCompat2["default"].createElement("span",{className:this.normalizePagingClazz("next"),onClick:function(){return _this3.onClickPaging("next")}}))},Tabs}(_preactCompat.Component);Tabs.defaultProps={className:"",tabSize:4,defaultActiveKey:void 0,dataSource:[],onChange:function(){}},exports["default"]=Tabs},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  Copyright (c) 2017 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?(classNames["default"]=classNames,module.exports=classNames):(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},function(module,exports,__webpack_require__){var content=__webpack_require__(10);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,'.ap-vbar-topline .tabs{position:relative;border-bottom:1px solid #dcdee3}.ap-vbar-topline .tabs .tabs__item{cursor:pointer;display:inline-block;text-align:center}.ap-vbar-topline .tabs .tabs__item--active .tabs__text,.ap-vbar-topline .tabs .tabs__item:hover .tabs__text{color:#ff6000}.ap-vbar-topline .tabs .tabs__item--active .tabs__text:before,.ap-vbar-topline .tabs .tabs__item:hover .tabs__text:before{content:"";position:absolute;z-index:9;bottom:-1px;width:100%;border-bottom:2px solid #ff6000}.ap-vbar-topline .tabs .tabs__text{position:relative;display:inline-block;height:36px;line-height:36px;color:#333;font-size:14px}.ap-vbar-topline .tabs .tabs__next,.ap-vbar-topline .tabs .tabs__prev{cursor:pointer;position:absolute;z-index:9;top:0;bottom:0;width:20px;background-size:60%;background-position:center 50%;background-repeat:no-repeat}.ap-vbar-topline .tabs .tabs__next--disabled,.ap-vbar-topline .tabs .tabs__prev--disabled{cursor:not-allowed}.ap-vbar-topline .tabs .tabs__prev{left:0;background-image:url(//img.alicdn.com/tfs/TB1yLEhhY_I8KJjy1XaXXbsxpXa-16-16.png)}.ap-vbar-topline .tabs .tabs__prev:hover{background-image:url(//img.alicdn.com/tfs/TB10Ffuh0fJ8KJjy0FeXXXKEXXa-16-16.png)}.ap-vbar-topline .tabs .tabs__prev--disabled,.ap-vbar-topline .tabs .tabs__prev--disabled:hover{background-image:url(//img.alicdn.com/tfs/TB1VOPwh_nI8KJjSszbXXb4KFXa-16-16.png)}.ap-vbar-topline .tabs .tabs__next{right:0;background-image:url(//img.alicdn.com/tfs/TB1ybHCh8HH8KJjy0FbXXcqlpXa-16-16.png)}.ap-vbar-topline .tabs .tabs__next:hover{background-image:url(//img.alicdn.com/tfs/TB10JzDhZrI8KJjy0FhXXbfnpXa-16-16.png)}.ap-vbar-topline .tabs .tabs__next--disabled,.ap-vbar-topline .tabs .tabs__next--disabled:hover{background-image:url(//img.alicdn.com/tfs/TB13PLmh0bJ8KJjy1zjXXaqapXa-16-16.png)}',""])},function(module,exports){module.exports=function(){var list=[];return list.toString=function(){for(var result=[],i=0;i<this.length;i++){var item=this[i];item[2]?result.push("@media "+item[2]+"{"+item[1]+"}"):result.push(item[1])}return result.join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,styleElement){var head=getHeadElement(),lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling):head.appendChild(styleElement):head.insertBefore(styleElement,head.firstChild),styleElementsInsertedAtTop.push(styleElement);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");head.appendChild(styleElement)}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);idx>=0&&styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");return styleElement.type="text/css",insertStyleElement(options,styleElement),styleElement}function createLinkElement(options){var linkElement=document.createElement("link");return linkElement.rel="stylesheet",insertStyleElement(options,linkElement),linkElement}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options)),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(styleElement=createLinkElement(options),update=updateLink.bind(null,styleElement),remove=function(){removeStyleElement(styleElement),styleElement.href&&URL.revokeObjectURL(styleElement.href)}):(styleElement=createStyleElement(options),update=applyToTag.bind(null,styleElement),remove=function(){removeStyleElement(styleElement)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media;if(media&&styleElement.setAttribute("media",media),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,obj){var css=obj.css,sourceMap=obj.sourceMap;sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){return"undefined"==typeof memo&&(memo=fn.apply(this,arguments)),memo}},isOldIE=memoize(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),getHeadElement=memoize(function(){return document.head||document.getElementsByTagName("head")[0]}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[];module.exports=function(list,options){options=options||{},"undefined"==typeof options.singleton&&(options.singleton=isOldIE()),"undefined"==typeof options.insertAt&&(options.insertAt="bottom");var styles=listToStyles(list);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat);__webpack_require__(14);var containerStyle={overflow:"auto"},loadingStyle={padding:"8px",fontSize:"12px",color:"#999",textAlign:"center"},TinyInfiniteScroll=function(_Component){function TinyInfiniteScroll(props){_classCallCheck(this,TinyInfiniteScroll);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this.timer=null,_this.onScroll=_this.onScroll.bind(_this),_this}return _inherits(TinyInfiniteScroll,_Component),TinyInfiniteScroll.prototype.canLoading=function(){var $container=this.$container,totalContainerHeight=$container.scrollHeight,bottomScrollPos=$container.scrollTop+$container.offsetHeight;return totalContainerHeight-bottomScrollPos<this.props.threshold},TinyInfiniteScroll.prototype.onScroll=function(){var _this2=this,_props=this.props,hasMore=_props.hasMore,delay=_props.delay,onLoad=_props.onLoad;hasMore&&(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){_this2.canLoading()&&onLoad()},delay))},TinyInfiniteScroll.prototype.render=function(){var _this3=this,_props2=this.props,className=_props2.className,isInfiniteLoading=_props2.isInfiniteLoading,children=_props2.children,clazz="tiny-infinite-scroll "+className;return _preactCompat2["default"].createElement("div",{className:clazz,style:containerStyle,ref:function($elm){_this3.$container=$elm},onScroll:this.onScroll},_preactCompat2["default"].createElement("div",{className:"tiny-infinite-scroll__body"},children),isInfiniteLoading&&_preactCompat2["default"].createElement("div",{className:"tiny-infinite-scroll__loading",style:loadingStyle},"loading..."))},TinyInfiniteScroll}(_preactCompat.Component);TinyInfiniteScroll.defaultProps={className:"",delay:160,threshold:100,hasMore:!0,isInfiniteLoading:!1,onLoad:function(){}},exports["default"]=TinyInfiniteScroll},function(module,exports,__webpack_require__){var content=__webpack_require__(15);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".ap-vbar-topline .tiny-infinite-scroll{padding:20px 6px;position:absolute;top:37px;bottom:0;width:100%;box-sizing:border-box}.ap-vbar-topline .tiny-infinite-scroll::-webkit-scrollbar-thumb{border-radius:5px;box-shadow:inset 0 0 5px #d8d8d8;background:#d8d8d8}.ap-vbar-topline .tiny-infinite-scroll::-webkit-scrollbar-track{background:#f8f8f8;box-shadow:inset 0 0 5px transparent;border-radius:0}.ap-vbar-topline .tiny-infinite-scroll::-webkit-scrollbar{width:4px;height:4px}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_utils=__webpack_require__(17),utils=_interopRequireWildcard(_utils);__webpack_require__(18);var Card=function(_Component){function Card(props){_classCallCheck(this,Card);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this.state={active:!1},_this.onMouseEnter=_this.onMouseEnter.bind(_this),_this.onMouseLeave=_this.onMouseLeave.bind(_this),_this}return _inherits(Card,_Component),Card.prototype.onMouseEnter=function(){this.setState({active:!0})},Card.prototype.onMouseLeave=function(){this.setState({active:!1})},Card.prototype.getTraceParams=function(detail,bizData){return{msgId:detail.id,taskId:detail.taskId,noticeDefinitionId:bizData.noticeDefinitionId,contentId:bizData.feedId,traceId:bizData.traceId}},Card.prototype.renderNameAndView=function(item,contentInfo){return _preactCompat2["default"].createElement("p",{className:"name-view"},_preactCompat2["default"].createElement("span",{className:"name",title:item.senderName},item.senderName),_preactCompat2["default"].createElement("span",null,_preactCompat2["default"].createElement("span",{className:"iconfont"},"\ue66b"),_preactCompat2["default"].createElement("span",{className:"view"},utils.formatNum(+contentInfo.viewNum||0))))},Card.prototype.render=function(){var _this2=this,_props=this.props,_props$detail=_props.detail,detail=void 0===_props$detail?{}:_props$detail,_onClick=_props.onClick,active=this.state.active,msgBody=detail.msgBody,_detail$bizData=detail.bizData,bizData=void 0===_detail$bizData?{}:_detail$bizData,_detail$contentInfo=detail.contentInfo,contentInfo=void 0===_detail$contentInfo?{}:_detail$contentInfo,isRead=(detail.taskId,detail.id,!!detail.readStatus),isAggrContent=msgBody.aggrArr&&msgBody.aggrArr.length,firstContent=isAggrContent?msgBody.aggrArr[0]:msgBody;return _preactCompat2["default"].createElement("div",{className:"card-wrapper",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_preactCompat2["default"].createElement("p",{className:"time"},(0,_utils.formatDate)(new Date(detail.createTime))),_preactCompat2["default"].createElement("div",{className:(0,_classnames2["default"])("card",{unread:!isRead,active:active})},_preactCompat2["default"].createElement("div",_extends({className:"first-content"},utils.getTraceClick("msg-list-card",this.getTraceParams(detail,firstContent)),utils.getTraceExposure("msg-list-card",this.getTraceParams(detail,firstContent)),{onClick:function(){return _onClick(_extends({},detail,{msgBody:firstContent}))}}),_preactCompat2["default"].createElement("img",{src:firstContent.contentPic||firstContent.summaryPicture||bizData.summaryPicture}),_preactCompat2["default"].createElement("p",{title:firstContent.title,className:"title two-line"},firstContent.title)),isAggrContent?msgBody.aggrArr.slice(1).map(function(item){var _item$contentInfo=item.contentInfo,contentInfo=void 0===_item$contentInfo?{}:_item$contentInfo;return _preactCompat2["default"].createElement("div",_extends({className:"item"},utils.getTraceClick("msg-list-card",_this2.getTraceParams(detail,item)),utils.getTraceExposure("msg-list-card",_this2.getTraceParams(detail,item)),{onClick:function(){return _onClick(_extends({},detail,{msgBody:item}))},key:item.feedId}),_preactCompat2["default"].createElement("div",{className:"left"},_preactCompat2["default"].createElement("p",{className:"item-title two-line",title:item.title},item.title),_this2.renderNameAndView(item,contentInfo)),_preactCompat2["default"].createElement("img",{className:"item-img",src:item.contentPic||item.summaryPicture||bizData.summaryPicture}))}):_preactCompat2["default"].createElement("div",{style:{marginTop:10}},this.renderNameAndView(firstContent,contentInfo)),isAggrContent?_preactCompat2["default"].createElement("a",{className:"check-more",href:"//club.1688.com/",target:"_blank"},"\u67e5\u770b\u66f4\u591a",_preactCompat2["default"].createElement("span",{className:"iconfont"},"\ue601")):null))},Card}(_preactCompat.Component);exports["default"]=Card},function(module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},TRACELOG_URL="1688toolbar.tracelog.headlines";exports.formatDate=function(){var date=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,paddingZero=function(num){return num<10?"0"+num:num};return date.getFullYear()+"."+paddingZero(date.getMonth()+1)+"."+paddingZero(date.getDate())},exports.formatNum=function(num){return num=+num,num>=Math.pow(10,8)?(num/Math.pow(10,8)).toFixed(1)+"\u4ebf":num>=Math.pow(10,4)?(num/Math.pow(10,4)).toFixed(1)+"\u4e07":num},exports.getTraceClick=function(key,params){var exParams={};if(params)for(var k in params)exParams["data-trace-click-param-"+k.replace(/([A-Z])/g,"-$1").toLocaleLowerCase().replace(/^-/,"")]=params[k];return _extends({"data-trace-click":"clk-"+key,"data-trace-click-url":TRACELOG_URL},exParams)},exports.getTraceExposure=function(key,params){var exParams={};if(params)for(var k in params)exParams["data-trace-exposure-param-"+k.replace(/([A-Z])/g,"-$1").toLocaleLowerCase().replace(/^-/,"")]=params[k];return _extends({"data-trace-exposure":"exp-"+key,"data-trace-exposure-url":TRACELOG_URL},exParams)}},function(module,exports,__webpack_require__){var content=__webpack_require__(19);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".ap-vbar-topline .card-wrapper *{box-sizing:border-box}.ap-vbar-topline .card-wrapper .time{font-size:12px;color:#999;text-align:center;margin-bottom:8px}.ap-vbar-topline .card-wrapper .card{padding:12px 6px;background:#fff;margin-bottom:24px;cursor:pointer;transition:all .2s}.ap-vbar-topline .card-wrapper .card.active{box-shadow:2px 4px 4px 0 rgba(0,0,0,.08);transform:translate3d(0,-2px,0)}.ap-vbar-topline .card-wrapper .card .first-content{width:100%;height:160px;position:relative}.ap-vbar-topline .card-wrapper .card .first-content img{width:100%;height:100%}.ap-vbar-topline .card-wrapper .card .title{font-size:14px;font-weight:700;color:#fff;position:absolute;bottom:0;background:rgba(0,0,0,.6);padding:4px}.ap-vbar-topline .card-wrapper .card .two-line{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;width:100%}.ap-vbar-topline .card-wrapper .card.unread{border-top:2px solid #ff7300}.ap-vbar-topline .card-wrapper .card .item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #ededed}.ap-vbar-topline .card-wrapper .card .left{width:125px;margin-right:8px;flex-shrink:1}.ap-vbar-topline .card-wrapper .card .item-title{font-size:12px;color:#666;height:32px;margin-bottom:4px;line-height:16px}.ap-vbar-topline .card-wrapper .card .name-view{display:flex;justify-content:space-between;font-size:12px;color:#999}.ap-vbar-topline .card-wrapper .card .name-view .name{max-width:85px;flex-shrink:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ap-vbar-topline .card-wrapper .card .name-view .view{white-space:nowrap}.ap-vbar-topline .card-wrapper .card .item-img{width:72px;height:50px}.ap-vbar-topline .card-wrapper .card .check-more{font-size:12px;color:#999;display:flex;justify-content:center;margin-top:10px}.ap-vbar-topline .card-wrapper .card .iconfont{font-family:ap-vbar-topline-iconfont;font-size:12px;font-style:normal;color:#999;margin-right:4px}.ap-vbar-topline .card-wrapper .card .headerline-name{max-width:72px;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:8px;margin-bottom:8px}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _preactCompat=__webpack_require__(1),_preactCompat2=_interopRequireDefault(_preactCompat),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames);__webpack_require__(21);var DetailPanel=function(_React$Component){function DetailPanel(){return _classCallCheck(this,DetailPanel),_possibleConstructorReturn(this,_React$Component.apply(this,arguments))}return _inherits(DetailPanel,_React$Component),DetailPanel.prototype.render=function(){var _classNames,_props=this.props,className=_props.className,title=_props.title,visible=_props.visible,onClose=_props.onClose,url=_props.url,clazz=(0,_classnames2["default"])("panel",(_classNames={},_classNames[className]=!!className,_classNames));return visible?_preactCompat2["default"].createElement("div",{className:clazz},_preactCompat2["default"].createElement("div",{className:"panel__header"},_preactCompat2["default"].createElement("p",{className:"panel__title"},title),_preactCompat2["default"].createElement("span",{className:"panel__close",onClick:onClose})),_preactCompat2["default"].createElement("div",{className:"panel__body"},_preactCompat2["default"].createElement("iframe",{className:"iframe",src:url}))):null},DetailPanel}(_preactCompat2["default"].Component);DetailPanel.defaultProps={className:"",title:"\u963f\u91cc\u5934\u6761",onClose:function(){}},exports["default"]=DetailPanel},function(module,exports,__webpack_require__){var content=__webpack_require__(22);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".ap-vbar-topline .panel{padding:20px 28px 0;box-sizing:border-box;background-color:#fff;box-shadow:0 8px 8px 0 rgba(0,0,0,.08);position:fixed;z-index:9998;top:0;right:276px;bottom:0;width:432px}.ap-vbar-topline .panel .panel__title{display:inline-block;color:#333;font-size:18px}.ap-vbar-topline .panel .panel__close{cursor:pointer;float:right;margin-top:6px;height:16px;width:16px;background:url(//img.alicdn.com/tfs/TB1LfAWkf6H8KJjSspmXXb2WXXa-16-16.png) no-repeat 50%}.ap-vbar-topline .panel .panel__close:hover{background-image:url(//img.alicdn.com/tfs/TB1JdcYknvI8KJjSspjXXcgjXXa-16-16.png)}.ap-vbar-topline .panel .panel__body{margin-top:3px;height:calc(100% - 30px)}.ap-vbar-topline .panel .panel__body .iframe{border:none;width:375px;height:100%}",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(24);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,'@font-face{font-family:ap-vbar-topline-iconfont;src:url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.eot");src:url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.eot?#iefix") format("embedded-opentype"),url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.woff2") format("woff2"),url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.woff") format("woff"),url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.ttf") format("truetype"),url("//at.alicdn.com/t/font_843174_pa7sdjwnmsd.svg#iconfont") format("svg")}.ap-vbar-topline{height:100%;position:relative}.ap-vbar-topline .empty{font-size:12px;color:#999}.ap-vbar-topline .empty .img{width:100%}',""])}])});;