/*! For license information please see stream_player_js.native_ui.modern.js.LICENSE.txt */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=76)}([function(e,t,r){"use strict";function n(){}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){A.href=e;let t=A.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const r=(A.search||"")+(A.hash||""),o=e.lastIndexOf(r),a=-1===o?e:e.slice(0,o);if(g.test(e)){const t=i(e.replace(g,"https:"));return A.href=e,n({},t,{originalPath:a,protocol:e.slice(0,e.indexOf(":")+1),href:A.href})}const s=A.protocol&&/^[a-z\-]+:/i.test(A.protocol)?A.protocol:"";return{originalPath:a,href:A.href,protocol:s,host:A.host,hostname:A.hostname,port:A.port,pathname:t,search:A.search,hash:A.hash}}function o(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,r="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(r?"/":"")+e.search+e.hash}const r="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+r+e.pathname+e.search+e.hash}function a(e){const t={},r=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let e=0;e<r.length;e++){const n=r[e].indexOf("=");let i,o;if(-1===n?(i=m(r[e]),o=""):(i=m(r[e].slice(0,n)),o=r[e].slice(n+1)),i){const e=Boolean(/(\[\])$/.exec(i));i=i.replace(/\[\]$/,""),e?void 0===t[i]?t[i]=[m(o)]:t[i]=[].concat(t[i],m(o)):t[i]=m(o)}}return t}function s(e){return a(i(e).search)}function l(e){const t=[];for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];Object(p.a)(n)?t.push(T(r,n)):void 0!==n&&t.push(r+"="+encodeURIComponent(n))}return"?"+t.join("&")}function c(e,t,r){if(void 0===r)return e;const s=i(e),c=a(s.search);return c[t]=r,o(n({},s,{search:l(c)}))}function d(e,t,r){let{override:s=!0,saveOriginalPath:c=!1}=void 0===r?{}:r;const d=i(e),u=a(d.search);Object(E.a)(t,(e,t)=>{(void 0===u[t]||s)&&(u[t]=e)});return o(n({},d,{search:l(u)}),c)}function u(e){return i(e).pathname.split("/").pop()||""}function h(e){const t=u(e).split(".");return t.length>1?t.pop():""}r.d(t,"g",(function(){return i})),r.d(t,"h",(function(){return o})),r.d(t,"f",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return h}));var p=r(18);class f{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}var E=r(11);const A=document.createElement("a");v=e=>n({},i(e)),void 0===y&&(y=e=>e),void 0===S&&(S=new f({}));var v,y,S;const g=/^(android-app:|chrome-extension:)/,m=e=>{try{return decodeURIComponent(e)}catch(t){return e}},T=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&")},function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===Object(i.a)(e)}r.d(t,"a",(function(){return n}));var i=r(25)},function(e,t,r){"use strict";function n(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(e){return""}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){try{return e()}catch(e){"function"===typeof t&&t(e)}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if(!e)return[];const t=[];for(let r=0;r<e.length;r++)t.push(e[r]);return t}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){let t=function(){t=()=>r;const r=e.apply(this,arguments);return r};return function(){return t.apply(this,arguments)}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){return"string"===typeof e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const r in e)Object(i.a)(e,r)&&t.push(r);return t}}r.d(t,"a",(function(){return n}));var i=r(14)},function(e,t,r){"use strict";function n(e,t,r){for(const n in e)Object(i.a)(e,n)&&t.call(r,e[n],n,e)}r.d(t,"a",(function(){return n}));var i=r(14)},function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Object(i.a)(e)&&e.forEach(e=>{"function"===typeof e&&e(...r)})}r.d(t,"a",(function(){return n}));var i=r(18)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var i=n(r(65)),o=n(r(55)),a=n(r(67)),s=null;(0,i.default)("localStorage")?t.storage=s=window.localStorage:(0,i.default)("sessionStorage")?t.storage=s=window.sessionStorage:(0,i.default)("cookieStorage")?t.storage=s=new o.default:t.storage=s=new a.default,t.default=s,t.storage=s,t.isSupported=i.default,t.CookieStorage=o.default,t.MemoryStorage=a.default},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0}},function(e,t,r){"use strict";function n(e,t){void 0===t&&(t=!0);const r=Object(i.a)(e);if(!r)return t;return!e[r]}r.d(t,"a",(function(){return n}));var i=r(42)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(25),i=r(32);const o=Object(i.a)(Array,"isArray"),a=Boolean(o)?e=>o.call(Array,e):e=>"Array"===Object(n.a)(e)},function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var a,s,l,c=n(t),d=n(r);if(c&&d){if((s=t.length)!=r.length)return!1;for(a=s;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(c!=d)return!1;var u=t instanceof Date,h=r instanceof Date;if(u!=h)return!1;if(u&&h)return t.getTime()==r.getTime();var p=t instanceof RegExp,f=r instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==r.toString();var E=i(t);if((s=E.length)!==i(r).length)return!1;for(a=s;0!==a--;)if(!o.call(r,E[a]))return!1;for(a=s;0!==a--;)if(!e(t[l=E[a]],r[l]))return!1;return!0}return t!==t&&r!==r}},function(e,t,r){"use strict";function n(e){return void 0===e&&(e=window),void 0===u&&(u=function(e){void 0===e&&(e=window);return e.JSON&&Object(o.a)(e.JSON.stringify)&&Object(o.a)(e.JSON.parse)}(e)?e.JSON:{stringify:p("stringify"),parse:p("parse")}),u}function i(e){return n().stringify(e,function(){const e=[],t=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(r,n)=>{if(void 0!==e)try{e.set(r,n)}catch(e){t.push({path:n,value:r})}else t.push({path:n,value:r})},get:r=>{const n=s(t,e=>e.value===r);return void 0!==e&&void 0===n?e.get(r):n?n.path:void 0}}}();return(r,n)=>{if(Object(l.a)(n))return Object(E.a)(n.name)?n.name:"[Function]";if(!Object(f.a)(n))return n;const i=t.get(n);if(i)return"[Circular "+i+"]";for(;e.length>0&&e[e.length-1].value[r]!==n;)e.pop();const o=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:o,value:n}),t.set(n,o),n}}())}r.d(t,"a",(function(){return i}));var o=r(9);const a=[].find,s=Object(o.a)(a)?(e,t)=>a.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const n=e[r];if(t(n,r,e))return n}};var l=r(3),c=r(43),d=r(15);let u;const h=function(e){void 0===e&&(e=document.body);const t=function(e){const t=Object(c.a)(e);return t.width="0",t.height="0",t.style.position="absolute",t}(e);return{JSON:t.contentWindow.JSON,clean:()=>function(e){e.src="",Object(d.a)(e)}(t)}},p=e=>t=>{const{JSON:r,clean:n}=h();try{return r[e](t)}finally{n()}};var f=r(1),E=r(8)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(37),i=r(27),o=r(46);const a=(void 0===s&&(s=window),Object(o.a)(s)||Object(i.a)(s)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&Object(n.a)(e)}(s));var s},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(9);const i=!Object(n.a)(Math.random)||Math.random()===Math.random();var o=r(31);let a=Date.now()*Object(o.a)()%2147483647;const s=i?function(){return a=16807*a%2147483647,(a-1)/2147483646}:function(){return Math.random()}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(41),i=r(20),o=r(16);const a=r(62);class s extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||o.a.message)};super(),a(this,s.prototype),this.message=t.message||r.message||o.a.message,this.code=t.code||r.code||r.id||o.a.code,this.isFatal=Boolean(function(e){const[t]=Object(n.a)(e,e=>void 0!==e);return t}([t.isFatal,r.isFatal,o.a.isFatal])),this.details=t.details||r.details||o.a.details;const l=t.stack||r.stack||function(e){const{url:t,line:r,col:n,fileName:i,columnNumber:o,lineNumber:a}=e;return(t||i||"?")+":"+(r||a||"?")+":"+(n||o||"?")}(r);let c=l===o.a.stack?this.stack:l;if(c&&c!==o.a.stack)this.stack=c;else if(!this.stack)try{throw new Error(this.message)}catch(e){this.stack=c=e.stack||o.a.stack}this.toString=()=>Object(i.a)(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:c})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(34);const i=e=>{const t=[];for(;e;)try{if(Object(n.a)(e),t.push(e),e.parent===e)break;e=e.parent}catch(e){break}return t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));const n={}.toString,i=/\[object (\w+)\]/,o=e=>{const t=n.call(e);if(!t)return null;const r=t.match(i);if(!r)return null;const o=r[1];return o||null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const n=r(61),i=function(e){void 0===e&&(e=window);const t=n(e);return"boolean"===typeof t?-1:t}},function(e,t,r){"use strict";function n(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!Object(i.a)(e)}r.d(t,"a",(function(){return n}));var i=r(45)},function(e,t){e.exports=function(e){var t;return function(e){return navigator.clipboard?navigator.clipboard.writeText(e):Promise.reject()}(e).catch((function(r){return t=r,function(e){var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",document.body.appendChild(t);var r=window.getSelection(),n=window.document.createRange();r.removeAllRanges(),n.selectNode(t),r.addRange(n);var i,o=!1;try{o=window.document.execCommand("copy")}catch(e){i=e}return r.removeAllRanges(),window.document.body.removeChild(t),o?Promise.resolve():Promise.reject(i)}(e)})).catch((function(e){throw e||t||new DOMException("The request is not allowed","NotAllowedError")}))}},function(e,t,r){e.exports={video_hiddenControls:"_20Eh5WL",videoHiddenControls:"_20Eh5WL",video_hiddenTime:"_1ll4Zna",videoHiddenTime:"_1ll4Zna",video_hiddenTimeline:"_3D52tih",videoHiddenTimeline:"_3D52tih",video_hiddenSubtitlesBtn:"_2yNfXKt",videoHiddenSubtitlesBtn:"_2yNfXKt"}},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));const n=["","webkit","moz","o","ms"],i=["","-webkit-","-ms-","-moz-","-o-"]},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(38),i=r(3);const o="undefined"===typeof window?void 0:window.performance,a=o&&Object(i.a)(o.now),s=o&&o.timing&&o.timing.navigationStart?o.timing.navigationStart:Object(n.a)();let l=0;const c=a?()=>o.now():()=>(()=>{const e=Object(n.a)()-s;return l=Math.max(e,l),l})()},function(e,t,r){"use strict";function n(e,t){let r=e[t];if(!Object(i.a)(r)){const n=r;try{delete e[t];const i=e[t];"function"===typeof i&&(r=i),e[t]=n}catch(e){}}return r}r.d(t,"a",(function(){return n}));var i=r(9)},function(e,t,r){"use strict";function n(e){let t="";for(let r=0;r<e;r++)t+=(16*Object(i.a)()|0).toString(16);return t}r.d(t,"a",(function(){return n}));var i=r(22)},function(e,t,r){"use strict";function n(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=(e,t,r)=>{const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n}},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){const{method:t,url:r,async:c=!0,data:d,responseType:u="text",onBeforeSend:h=a.a,onRetry:p=a.a,checkStatus:f=(e=>l===e),headers:E={},xhrConstructor:A=XMLHttpRequest,retries:v=0,timeout:y=0,withCredentials:S,onAbort:g,onSetup:m}=e,T=e.onSuccess?Object(o.a)(e.onSuccess):a.a,R=e.onError?Object(o.a)(e.onError):a.a;let _,O=!1,P=0,b=e=>{O=!0,b=a.a,_=e,I(new Error("Abort request")),"function"===typeof g&&g(e)};const I=t=>{C.onerror=null,C.onreadystatechange=null,P&&clearTimeout(P);if(P&&4!==C.readyState||O)try{C.abort()}catch(t){}if(!O)if(v>0){const r=p(t,C);if("boolean"!==typeof r||Boolean(r)||b(),O)return;i(n({},e,{onSetup:e=>{let{abort:t}=e;b=e=>t(e),O&&t(_)},retries:v-1}))}else b=a.a,R(t,C)},C=new A;try{C.open(t,r,c)}catch(e){return void I(e)}if(C.responseType=u,C.withCredentials=Boolean(S),Object(s.a)(E,(e,t)=>{try{C.setRequestHeader(t,e)}catch(e){}}),y>0&&isFinite(y)&&(P=window.setTimeout(()=>{I(new Error("Request timeout, "+r))},y)),C.onerror=I,C.onreadystatechange=()=>{if(4===C.readyState){const{status:e}=C;f(e)?(b=a.a,clearTimeout(P),T(C)):I(new Error("Invalid request status "+e+", "+r))}},("function"!==typeof m||(m({abort:e=>b(e)}),!O))&&(h(C,e),!O))try{C.send(d)}catch(e){I(e)}}r.d(t,"a",(function(){return i}));var o=r(7),a=r(0),s=r(11);const l=200},function(e,t,r){"use strict";function n(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:r,maxTouchPoints:n}=t;return r||n||0}(e)>0&&!Object(a.a)(e)}function i(e,t){if(!Object(l.a)(e.matchMedia))return!1;const r=e.matchMedia(t);return Object(c.a)(r)&&Boolean(r.matches)}function o(e){return void 0===e&&(e=window),n(e)||function(e){return i(e,u)}(e)||function(e){return i(e,h)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}r.d(t,"a",(function(){return o}));var a=r(44),s=r(35),l=r(3),c=r(1),d=r(30);const u=Object(s.a)(d.a,e=>"("+e+"any-pointer:coarse)").join(","),h=Object(s.a)(d.a,e=>"("+e+"touch-enabled)").join(",")},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3);const i=Date&&Object(n.a)(Date.now)?()=>Date.now():()=>(new Date).getTime()},function(e,t,r){e.exports={player__video:"_3IkwtZe",playerVideo:"_3IkwtZe",player__skinWrapper:"_3dD-e8F",playerSkinWrapper:"_3dD-e8F",player__slot:"_2n8_7eB",playerSlot:"_2n8_7eB"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OK="ok",e.FAIL="fail"}(t.AccessFunctionStatus||(t.AccessFunctionStatus={})),t.PLAYSTATION_4_API_COMMAND_NAME={getAudioTracks:!0,getSubtitleTracks:!0,getPlaybackTime:!0,getSeekWindow:!0,getPlaySpeed:!0,getVideoResolution:!0,load:!0,pause:!0,play:!0,setAdaptiveStreamingParameters:!0,setAudioTrack:!0,setVolume:!0,setPlayTime:!0,setSubtitleTrack:!0,setClosedCaptions:!0,setForwardCloseCaptionTimedMetadata:!0,setTimedMetadata:!0,setVideoPortalSize:!0,setVideoStartingBandwidth:!0,stop:!0,setFixVideoRepresentations:!0,getRepresentationsCount:!0,getRepresentationInfo:!0,getBitrate:!0,setRepresentationEnable:!0,setRepresentationDisable:!0,isRepresentationEnable:!0,isPsnPlusAccount:!0,getExternalParameter:!0},t.APPLICATION_MESSAGE_COMMAND_NAME={contentAvailable:!0,applicationStatusChange:!0,networkStatusChange:!0,playerStatusChange:!0,playerStreamingError:!0,playerError:!0,playerMessage:!0,playerTimedEvent:!0,externalParameter:!0,playerSubtitle:!0},function(e){e[e.MP4=1]="MP4",e[e.MSS=2]="MSS",e[e.Dash=4]="Dash",e[e.DashMPEG2=6]="DashMPEG2",e[e.HLS=8]="HLS",e[e.MPEG2=9]="MPEG2"}(t.SourceType||(t.SourceType={})),function(e){e.ApplicationMP4="application/mp4",e.VideoMP4="video/mp4",e.AudioMP4="audio/mp4",e.MSS="application/vnd.ms-sstr+xml",e.Dash="application/dash+xml",e.DashMPEG2="application/dash_ts+xml",e.HLS="application/vnd.apple.mpegurl",e.MPEG2="video/mp2t"}(t.VideoMIMEType||(t.VideoMIMEType={})),function(e){e.BUFFERING="buffering",e.END_OF_STREAM="endOfStream",e.NOT_READY="notReady",e.READY="ready",e.OPENING="opening",e.PAUSED="paused",e.PLAYING="playing",e.DISPLAYING_VIDEO="DisplayingVideo",e.STOPPED="stopped",e.UNKNOWN="unknown"}(t.PlayerState||(t.PlayerState={})),function(e){e.BACKGROUND="background",e.FOREGROUND="foreground"}(t.ApplicationStatus||(t.ApplicationStatus={})),function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected",e.UNKNOWN="unknown"}(t.NetworkStatus||(t.NetworkStatus={})),function(e){e.WIRED="wired",e.WIRELESS="wireless",e.PHONE="phone",e.UNKNOWN="unknown"}(t.ConnectionType||(t.ConnectionType={})),function(e){e.CONNECTION_FAILED="http_connection",e.HTTP_STATUS="http_status_code"}(t.PlayerStreamingError||(t.PlayerStreamingError={})),function(e){e.VIDEO="video_error",e.DRM="drm_error"}(t.PlayerErrorType||(t.PlayerErrorType={})),function(e){e.FileNonInterleaved="0x806A00A0",e.StreamLoopingBack="0x806A00A1",e.JumpCompleted="0x806A00A3",e.Encoded="0x1000"}(t.PlayerMessageCodeHexa||(t.PlayerMessageCodeHexa={})),function(e){e.Emsg="emsg",e.Text="text",e.Data="data",e.CloseCaption="cea-708",e.Webvtt="webvtt"}(t.PlayerTimedEventDatatype||(t.PlayerTimedEventDatatype={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++){const o=e[i];t.call(r,o,i,e)&&n.push(o)}return n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0},function(e,t,r){"use strict";function n(e,t){let{content:r,size:n}=void 0===t?{}:t;const i=e.ownerDocument.createElement("iframe");i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",n&&(i.height=n.height,i.width=n.width),e.appendChild(i);const o=i.contentDocument;return o.open(),r&&o.write(r),o.close(),o.body.style.margin="0",i.style.borderWidth="0",i}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(26);const i=function(e){return void 0===e&&(e=window),Object(n.a)(e)>11}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(4);const i=function(e){void 0===e&&(e=window);const t=Object(n.a)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const r=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){for(var n=e.length+t.length,i=new Array(n),o=0,a=0,s=0;s<n;){var l=o>=e.length,c=a>=t.length;!l&&(c||r(e[o],t[a])<0)?(i[s]=e[o],o++):(i[s]=t[a],a++),s++}return i}},function(e,t,r){"use strict";(function(t){function n(e,t,r){var n,i,s,u,E={tag:null,value:null},A=a(e,4,0),v=a(e,1,0);r||o(e.slice(4));if(0!==[e[8],e[9]][1])return!1;if(!(A in c))return!1;if(E.tag=c[A],"T"===v){if(0===(i=e[10]))E.value=f(e.slice(11));else if(3===i)E.value=p(e.slice(11));else{if(1!==i&&2!==i)return!1;E.value=h(e.slice(11))}"TCON"===A&&parseInt(E.value)&&(E.value=l[parseInt(E.value)])}else if("W"===v)E.value=p(e.slice(10));else if("COMM"===A||"USLT"===A){for(i=e[10],u=0,n=s=14;;n++)if(1===i||2===i){if(0===e[n]&&0===e[n+1]){s=n+2;break}n++}else if(0===e[n]){s=n+1;break}if(0===i||3===i)E.value=p(e.slice(s));else{if(1!==i&&2!==i)return!1;E.value=h(e.slice(s))}}else if("APIC"===A){i=e[10];var y={type:null,mime:null,imageType:null,description:null,data:null};for(u=0,n=s=11;;n++)if(0===e[n]){u=n-s;break}for(y.mime=p(e.slice(s),u),y.type=d[e[s+u+1]]||"other",s+=u+2,u=0,n=s;;n++)if(0===e[n]){u=n-s;break}for(y.description=0===u?null:h(e.slice(s),u),n=s+=u+1;0===e[n];n++)s++;y.data=e.slice(s),E.value=y}return!!E.tag&&E}function i(e){return 2097152*(127&e[0])+16384*(127&e[1])+128*(127&e[2])+(127&e[3])}function o(e){return e.length<4?0:16777216*e[0]+65536*e[1]+256*e[2]+e[3]}function a(e,r,n,i){n=n||0,r<0&&(r+=e.length);var o="";if(A)return(e=e.slice(n,n+r))instanceof t?e.toString():new t(e).toString();for(var a=n;a<n+r;a++)o+=String.fromCharCode(e[a]);return i?o:decodeURIComponent(encodeURIComponent(o))}var s=r(69),l=r(70),c=r(71),d=r(72),u=r(73),h=u.readUTF16String,p=u.readUTF8String,f=u.readISO8859String,E=void 0!==s.File&&void 0!==s.FileReader,A=void 0!==s.Buffer;e.exports={parse:function(e){return new Promise((function(r,n){var i;E&&e instanceof File?((i=new FileReader).onload=function(t){e=new Uint8Array(t.target.result),r(e)},i.readAsArrayBuffer(e)):e instanceof t||e instanceof Uint8Array?r(e):n(new TypeError("argument should be instance of Buffer|Uint8Array|File"))})).then((function(e){var t,r=function(e){if(!e||e.length<128)return!1;e=e.slice(e.length-128);var t={version:{major:1,minor:0}},r=p(e,3),n=/(^[\s\u0000]+|[\s\u0000]+$)/;if("TAG"!==r)return!1;t.title=p(e.slice(3),30).replace(n,""),t.artist=p(e.slice(33),30).replace(n,""),t.album=p(e.slice(63),30).replace(n,""),t.year=p(e.slice(93),4).replace(n,""),0===e[125]?(t.comment=p(e.slice(97),28).replace(n,""),t.version.minor=1,t.track=e[126]):t.comment=p(e.slice(97),30).replace(n,"");return t.genre=l[e[127]]||"",t}(e),a=function(e){if(!e||e.length<20)return!1;var t,r,a,s=function(e,t){if(!e||e.length<10)return!1;var r,n,i;if(t=t||{},"ID3"!==p(e,3))return!1;return r=t.version||(t.version={major:2}),n=t.version.flags||(t.version.flags={}),r.minor=e[3],r.revision=e[4],i=e[5],n.unsync=!0&i,n.xheader=!0&i,n.experimental=!0&i,t}(e.slice(0,14));if(!s)return!1;if(t=s.version.flags,r=10,t.unsync)throw new Error("not support unsynchronisation");t.xheader&&(r+=i(e.slice(10,14)));return a=i(e.slice(6,10)),function(e,t){var r=0,i=t.version;for(;r<e.length;){var a,s,l=o(e.slice(r+4));if(0===l)break;if(!(s=e.slice(r,r+10+l)).length)break;(a=n(s,i.minor,l))&&(t[a.tag]=a.value),r+=s.length}}(e.slice(r,a+r),s),s}(e);if(a){for(t in r)t in a&&""!==a[t]||(a[t]=r[t]);return a.version={v1:r&&r.version,v2:a.version},a}return r?(r.version={v1:r.version,v2:!1},r):{version:!1}}))}}}).call(this,r(68).Buffer)},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,"a",(function(){return l}));r(24),r(12);var i=r(0);const o=i.a,a=i.a,s=i.a,l=e=>{let{win:t,propertyName:r}=e;return{call:e=>o(n({win:t,propertyName:r},e)),subscribe:e=>s(n({win:t,propertyName:r},e)),wait:e=>(e=>{let{propertyName:t,win:r}=e;return new Promise(e=>{s({callback:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(r)},propertyName:t,win:r})})})(n({win:t,propertyName:r},e)),waitUntil:e=>(e=>{let{propertyName:t,win:r,comparator:n}=e;return new Promise(e=>{s({propertyName:t,win:r,callback:function(){n(...arguments)&&e()}})})})(n({win:t,propertyName:r},e)),clear:e=>a(n({win:t,propertyName:r},e))}}},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r]);return e})},function(e,t,r){"use strict";function n(e,t){if(void 0===t&&(t=!0),A.a&&t)return[];{const t=[];let r=e;for(;;)try{if(r=r.ownerDocument.defaultView.frameElement,!r)return t;t.push(r)}catch(e){return t}}}function i(e){const t=n(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:Object(E.a)(e.defaultView),referrer:e.referrer}))}function o(e){return"function"===typeof Object.entries?Object.entries(e):Object(v.a)(e).map(t=>[t,e[t]])}function a(){if(I&&I.document&&"function"===typeof I.document.hasFocus)try{return I.document.hasFocus()}catch(e){}}function s(e){setTimeout(()=>{throw e},0)}function l(e){return N?Object(w.a)(e.location.ancestorOrigins):[]}function c(e){let t="",r="";if(e){i(e).reverse().forEach(e=>{let{location:n,referrer:i}=e;t=t||n,r=r||i})}return{location:t,referrer:r}}function d(e){const t={};return e.forEach(e=>{let[r,n]=e;t[r]=n}),t}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){const r=o({UrlParams:()=>{const r=i(e.document);for(let e=0;e<r.length;e++){const{location:n}=r[e],i=Object(M.e)(n)[t];if(i)return i}},LocalStorage:()=>e.localStorage.getItem(t),globalVariable:()=>{const r=Object(f.a)(e);for(let e=0;e<r.length;e++){const n=r[e],i=n&&n.Ya&&n.Ya.hardcodedParams&&n.Ya.hardcodedParams[t];if(i)return String(i)}}});for(let e=0;e<r.length;e++){const[n,i]=r[e],o=Object(se.a)(i);if("string"===typeof o&&o.length>0)return ae.deprecated("HardcodedParamObtainedFrom"+n,"ATTENTION! Product parameter obtained from "+n+" ["+t+"]["+o+"]"),o}}function p(e,t,r){const n=h(e,t);return n?Number(n):function(e){const t=100*Object(G.a)();let r=0;for(let n=0;n<e.length;n++)if(r+=e[n].percent,t<r)return e[n].id;return e[0].id}(r)}r.r(t),r.d(t,"getHardcodedParam",(function(){return h})),r.d(t,"getBundlesVersion",(function(){return p}));var f=r(24),E=r(34),A=r(21),v=r(10),y=r(3),S=r(1);const g=(e,t)=>{for(const r of t.split(".")){if(!Object(S.a)(e)){e=void 0;break}e=e[r]}return e},m="__ADB_CONFIG__",T=Object(S.a)(m)&&m.fn&&Object(y.a)(m.fn.encodeUrl)?m.fn.encodeUrl:void 0,R=void 0!==T?e=>T(e):void 0,_=function(e){if(void 0===e&&(e=window),R)return R;const t=Object(f.a)(e);for(;t.length;){const e=t.pop();if(!e)continue;const r=g(e,"ya.videoAd.encodeUrl");if(Object(y.a)(r))return r}}(window);var O=r(17);const P=n(document.documentElement),{length:b}=P,I=b>0?P[b-1].ownerDocument.defaultView:window;var C=r(23);const N=Boolean(window.location.ancestorOrigins);var w=r(6);const D=l(window);var L=r(35);const k=function(){const e=Object(L.a)(P,e=>e.ownerDocument),{length:t}=e,r=(t?e[t-1]:document).defaultView;return!!r&&r.self!==r.parent}();var M=r(2);const{topAncestor:V,isTrusted:U}=function(e){void 0===e&&(e=window);const t=l(e);if(t.length>0)return{topAncestor:t[t.length-1],isTrusted:!0};const{location:r,referrer:n}=c(e.document),i=k?n:r,o=!k||function(e){let t=e;const r=[e],{top:n}=e;for(;t!==n;)t=t.parent,r.push(t);return r}(I).length<2,{protocol:a,hostname:s,host:d,port:u}=Object(M.g)(i);return{topAncestor:Object(M.h)({protocol:a,hostname:s,host:d,port:u,originalPath:"",href:"",pathname:"",search:"",hash:""}),isTrusted:o}}(),F=V,x=U;var H=r(52),j=r(33),B=r(20),Y=r(36),K=r(11),G=r(22);const W=Object(G.a)();var X=r(9);const q=(e=>Object(X.a)(e.navigator.sendBeacon))(window),Q="_$".split("").reverse().join(""),z=e=>"_$invalid_"+e+Q,J={sensorName:z("sensor_name"),labelKey:z("label_key"),labelValue:z("label_value")};var $;!function(e){e.event="event",e.error="error",e.fatal="fatal",e.deprecated="deprecated",e.warning="warning",e.value="value",e.values="values"}($||($={}));var Z=r(49);Object(Z.a)({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});const ee=e=>{let{eventType:t,eventName:r,value:n,values:i}=e;const o={};return Object(K.a)(i,(e,n)=>{o[t+"_"+r+"_"+n]=e}),u({[t+"_"+r]:n},o)},te=e=>e.isFatal?$.fatal:$.error,re=/^\w(\-|_|:|\s|\.|\w){1,20}$/,ne=/^\w(\-|_|:|\s|\.|\w){0,70}$/,ie=/^\w(\-|_|:|\s|\.|\w){1,70}$/;class oe{constructor(e){this.rootFields={},this.labels={},this.event=e=>{let{name:t,data:r,labels:n,probability:i,extraRootFields:o}=e;this.push({eventType:$.event,eventName:t,data:r,additionalStatsLabels:n,probability:i,extraRootFields:o})},this.error=e=>{let{error:t,labels:r,probability:n,extraRootFields:i}=e;const o=new C.a(t);this.push({eventName:String(o.code),eventType:te(o),data:o,additionalStatsLabels:r,probability:n,extraRootFields:i})},this.value=e=>{let{name:t,value:r,data:n,labels:i,probability:o,extraRootFields:a}=e;this.push({eventName:t,value:r,eventType:$.value,data:n,additionalStatsLabels:i,probability:o,extraRootFields:a})},this.values=e=>{let{name:t,values:r,data:n,labels:i,probability:o,extraRootFields:a}=e;this.push({eventName:t,eventType:$.values,data:n,additionalStatsLabels:i,probability:o,values:r,extraRootFields:a})},this.warning=e=>{let{name:t,message:r,probability:n,extraRootFields:i}=e;Object(S.a)(console)&&Object(y.a)(console.warn)&&console.warn(r),this.push({eventName:t,eventType:$.warning,data:{message:r},probability:n,extraRootFields:i})},this.getParams=()=>function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(this.params,["onLogError"]),this.setRootFields=e=>{o(e).forEach(e=>{let[t,r]=e;void 0===r?delete this.rootFields[t]:this.rootFields[t]=r})},this.setLabels=e=>{o(e).forEach(e=>{let[t,r]=e;void 0===r?delete this.labels[t]:this.labels[t]=r})},this.eventToStats=(e,t,r,n)=>{this.push({eventType:$.event,eventName:e,data:t,additionalStatsLabels:r,extraRootFields:n})},this.errorToStats=(e,t,r)=>{const n=new C.a(e);this.push({eventName:String(n.code),eventType:te(n),data:n,additionalStatsLabels:t,extraRootFields:r})},this.deprecated=(e,t)=>{Object(S.a)(console)&&Object(y.a)(console.warn)&&console.warn(t),this.push({eventName:e,eventType:$.deprecated,data:{message:t}})},this.valueToStats=(e,t,r,n)=>{this.push({eventName:e,value:t,eventType:$.value,data:r,additionalStatsLabels:n})};const{onLogError:t}=e;this.params=u({},e,{sid:e.sid||Object(j.a)(64),onLogError:t?e=>{try{t(e)}catch(e){s(e)}}:s}),this.logUrl=oe.getLogUrl(e),this.isStrmLogUrl="https://strm.yandex.ru/log"===this.logUrl}static getLogUrl(e){return e.logUrl?e.logUrl:!0===e.useAlias?"https://jstracer.yandex.ru/jstracer":"https://an.yandex.ru/jstracer"}push(e){let{eventName:t,eventType:r,data:n={},additionalStatsLabels:i,value:o=1,probability:a=1,values:s={},extraRootFields:l={}}=e;if(!function(e,t,r,n){void 0===n&&(n=!1);const i=(n?Object(G.a)():W)<e,o=i?t:r;return"function"===typeof o&&o(),i}(a))return;const{service:c,version:d}=this.params,h={service:c,version:d,data:n,eventName:t,eventType:r,additionalStatsLabels:i,value:o,values:s};if(oe.isSendingData)throw new C.a({message:"RecursiveStatsRequests",details:{service:c,version:d,eventType:r,eventName:t}});oe.isSendingData=!0;try{let e=this.logUrl;this.params.sendOnlyPrimaryParams||(e=Object(M.b)(this.logUrl,u({[c]:d,[r]:t},i)));const n=this.createFullStatsObject(h,l),{routeToJSTracer:o=!0}=l;this.isStrmLogUrl&&o&&(n.routeToJSTracer=!0),this.sendData(e,Object(B.a)(n))}catch(e){oe.isSendingData=!1,this.params.onLogError(new C.a(e,{details:{service:c,version:d,eventType:r,eventName:t}}))}oe.isSendingData=!1}sendData(e,t){if(this.params.useSendBeacon){if(function(e,t){return!!q&&window.navigator.sendBeacon(e,t)}(e,t))return}Object(Y.a)({url:e,data:t,method:"POST",onBeforeSend:this.params.onBeforeSend})}createFullStatsObject(e,t){const{service:r,version:n,eventName:i,eventType:s,data:l,additionalStatsLabels:h,value:p}=e,f=(this.params.createTagsFunction||ee)(e),A=u({},this.labels,h,{version:this.params.version}),v={service:r,tags:d(o(f).map(e=>{let[t,r]=e;return ie.test(t)?[t,r]:[J.sensorName,r]})),labels:d(o(A).map(e=>{let[t,r]=e,n=t,i=r;return re.test(n)||(n=J.labelKey),ne.test(i)||(i=J.labelValue),[n,i]}))},{location:S,referrer:g}=c(document);return u({},t,this.rootFields,v,{timestamp:Date.now(),eventType:s,eventName:i,data:l,sid:this.params.sid,version:n,location:Object(E.a)(window),topLocation:S,topAncestor:F,isTopAncestorUndetermined:!x||void 0,ancestorOrigins:D,documentIsVisible:Object(O.a)(document),referrer:window.document.referrer,topReferrer:g,currentScriptSrc:H.a,secureIFrame:k,isVideoADB:Object(y.a)(_),value:p,rnd:W,topDocumentFocus:a()})}}oe.isSendingData=!1;const ae=new oe({service:"CommonPcode",version:"0",sid:Object(j.a)(64)});var se=r(5)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const n=function(e,t){void 0===e&&(e=document);const r=e.currentScript;if(r)return r;{const r=e.getElementsByTagName("script"),n=[];for(let e=0;e<r.length;e++)n.push(r[e]);if("function"===typeof t){const e=n.filter(t);return e[e.length-1]}return n[n.length-1]}}(),i=n?n.src:""},function(e,t,r){"use strict";(function(e,n){var i,o=r(57);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:n;var a=Object(o.a)(i);t.a=a}).call(this,r(54),r(63)(e))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new d;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}};var a,s=r(66),l=(a=s)&&a.__esModule?a:{default:a},c="lS_",d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=n({path:"/"},t),c=t.prefix||c}return o(e,[{key:"getItem",value:function(e){var t=l.default.parse(document.cookie);return t&&t.hasOwnProperty(c+e)?t[c+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=l.default.serialize(c+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=n({},this.cookieOptions,{maxAge:-1});return document.cookie=l.default.serialize(c+e,"",t),null}},{key:"clear",value:function(){var e=l.default.parse(document.cookie);for(var t in e)0===t.indexOf(c)&&this.removeItem(t.substr(c.length));return null}}]),e}();t.default=d},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.patchPlaystation4API=function(e){if(e.playstationAPIEventTarget)return e.playstationAPIEventTarget;var t=e.accessfunction,r=!1,o=function(){};Object.defineProperty(e,"accessfunction",{get:function(){return o},set:function(e){r?console.warn("The window.accessfunction is set already. Use PlaystationAPIEventTargetInterface defined at window.playstationAPIEventTarget"):(r=!0,o=e)}});var a=function(){function r(){this.subscribers=[],e.accessfunction=this.handle.bind(this)}return r.prototype.subscribe=function(e){var t=this;return this.subscribers.push(e),function(){return t.unsubscribe(e)}},r.prototype.unsubscribe=function(e){var t=this.subscribers.indexOf(e);t<0||this.subscribers.splice(t,1)},r.prototype.execute=function(t,r){void 0===r&&(r={});var i=JSON.stringify(n({command:t},r));e.external.user(i)},r.prototype.handle=function(e){"function"===typeof t&&t(e);try{var r=JSON.parse(e),n={command:r.command,status:r.status,data:i(r,["command","status"])};this.subscribers.forEach((function(e){return e(n)}))}catch(t){console.error("Failed parse playstation 4 response. Receive message:",e,". Error:",t)}},r}();return e.playstationAPIEventTarget=new a,e.playstationAPIEventTarget}},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"===typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",(function(){return n}))},function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e){return o[Object.keys(o).filter((function(e){return"number"==typeof o[e]})).reverse().find((function(t){return o[t]<=e}))]}var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.estimateConnection=t.scoreToQuality=t.SCORE_MAX_RTT=t.SCORE_MAX_DOWNLINK=t.scorePoints=t.Quality=void 0;var o,a=r(2);!function(e){e[e.NoVideo=0]="NoVideo",e[e.Video360p=2.5]="Video360p",e[e.Video480p=4.5]="Video480p",e[e.Video720p=6.5]="Video720p",e[e.Video1080p=8]="Video1080p",e[e.Video2K=10]="Video2K",e[e.Video4K=11]="Video4K"}(o=t.Quality||(t.Quality={})),t.scorePoints=[[0,o.NoVideo],[.9,o.Video360p],[2.5,o.Video480p],[5,o.Video720p],[7.5,o.Video1080p],[10,o.Video2K],[14,o.Video4K]],t.SCORE_MAX_DOWNLINK=t.scorePoints[t.scorePoints.length-1][0],t.SCORE_MAX_RTT=3e3,t.scoreToQuality=n,t.estimateConnection=function(e,r,o){var s=a.collectMetaData(e,r),l=0,c=t.scorePoints.findIndex((function(e){return e[0]>=s.downlink}));if(c>0){var d=c-1,u=t.scorePoints[d],h=u[0],p=u[1],f=t.scorePoints[c],E=f[0],A=f[1];l=p+(s.downlink-h)/(E-h)*(A-p)}var v=3*s.rtt/t.SCORE_MAX_RTT,y=Math.max(0,Math.round(10*(l-v))/10),S=Math.min(y,10),g=n(y);return!0!==o.disable&&a.sendScoreLog(i(i({},s),{score:S,logOptions:o})),{score:S,quality:g}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.defineProperty(t,"estimateConnection",{enumerable:!0,get:function(){return n.estimateConnection}}),Object.defineProperty(t,"scoreToQuality",{enumerable:!0,get:function(){return n.scoreToQuality}}),Object.defineProperty(t,"Quality",{enumerable:!0,get:function(){return n.Quality}});var i=r(3);Object.defineProperty(t,"Mark",{enumerable:!0,get:function(){return i.Mark}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectMetaData=t.sendScoreLog=t.SCORE_STAT_URL=t.SCORE_STAT_ID=void 0;var n=r(0);t.SCORE_STAT_ID="inet."+Date.now()+"."+Math.random(),t.SCORE_STAT_URL="https://yandex.ru/clck/click",t.sendScoreLog=function(e){var r=["-s="+e.score,"-d="+e.downlink,"-r="+e.rtt,"-nid="+e.niDownlink,"-drs="+e.resDownloadSpeed,"-srv="+encodeURIComponent(e.logOptions.service),"-ua="+encodeURIComponent(navigator.userAgent)].join(","),n=t.SCORE_STAT_URL+"/reqid="+t.SCORE_STAT_ID+"/path=tech.inet.score_stats/vars="+r+"/*",i=new XMLHttpRequest;i.open("get",n),i.send()},t.collectMetaData=function(e,t){var r=e/1e6,i=Math.min(r,n.SCORE_MAX_DOWNLINK),o=Math.min(t,n.SCORE_MAX_RTT),a=null,s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return s&&s.downlink&&"number"==typeof s.downlink&&(a=s.downlink),{downlink:i,rtt:o,resDownloadSpeed:r,niDownlink:a}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4),t)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;var o=r(5),a=r(0);r(8);var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getColorClass=function(e){switch(e.quality){case a.Quality.Video4K:return"4K";case a.Quality.Video2K:return"2K";case a.Quality.Video1080p:return e.score<8.5?"1080":e.score<9.5?"1080x":"1080xx";default:return"0"}},t.formatValue=function(e){return e>=10?"10":e.toFixed(1).replace(".",",")},t.prototype.render=function(){var e=this.props,r=e.estimation,n=e.mix;if(void 0===r)return null;var i=t.formatValue(r.score),a=t.getColorClass(r),s="mark"+(a?" mark_"+a:"")+(n?" "+n:"");return o.createElement("div",{className:s},i)},t}(o.Component);t.Mark=s},function(e,t,r){"use strict";e.exports=r(6)},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)r+="&args[]="+encodeURIComponent(arguments[i+1]);n(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}function o(e,t,r){this.props=e,this.context=t,this.refs=k,this.updater=r||L}function a(){}function s(e,t,r){this.props=e,this.context=t,this.refs=k,this.updater=r||L}function l(e,t,r){var n=void 0,i={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)F.call(t,n)&&!x.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return{$$typeof:g,type:e,key:o,ref:a,props:i,_owner:U.current}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===g}function d(e,t,r,n){if(j.length){var i=j.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function u(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>j.length&&j.push(e)}function h(e,t,r){return null==e?0:function e(t,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var s=!1;if(null===t)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case g:case m:s=!0}}if(s)return n(o,t,""===r?"."+p(t,0):r),1;if(s=0,r=""===r?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=r+p(a=t[l],l);s+=e(a,c,n,o)}else if("function"==typeof(c=null===t||"object"!=typeof t?null:"function"==typeof(c=D&&t[D]||t["@@iterator"])?c:null))for(t=c.call(t),l=0;!(a=t.next()).done;)s+=e(a=a.value,c=r+p(a,l++),n,o);else"object"===a&&i("31","[object Object]"===(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return s}(e,"",t,r)}function p(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function f(e,t){e.func.call(e.context,t,e.count++)}function E(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?A(e,n,r,(function(e){return e})):null!=e&&(c(e)&&(e=function(e,t){return{$$typeof:g,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(H,"$&/")+"/")+r)),n.push(e))}function A(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(H,"$&/")+"/"),h(e,E,t=d(t,o,n,i)),u(t)}function v(){var e=V.current;return null===e&&i("321"),e}var y=r(7),S="function"==typeof Symbol&&Symbol.for,g=S?Symbol.for("react.element"):60103,m=S?Symbol.for("react.portal"):60106,T=S?Symbol.for("react.fragment"):60107,R=S?Symbol.for("react.strict_mode"):60108,_=S?Symbol.for("react.profiler"):60114,O=S?Symbol.for("react.provider"):60109,P=S?Symbol.for("react.context"):60110,b=S?Symbol.for("react.concurrent_mode"):60111,I=S?Symbol.for("react.forward_ref"):60112,C=S?Symbol.for("react.suspense"):60113,N=S?Symbol.for("react.memo"):60115,w=S?Symbol.for("react.lazy"):60116,D="function"==typeof Symbol&&Symbol.iterator,L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var M=s.prototype=new a;M.constructor=s,y(M,o.prototype),M.isPureReactComponent=!0;var V={current:null},U={current:null},F=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0},H=/\/+/g,j=[],B={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return A(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;h(e,f,t=d(null,null,t,r)),u(t)},count:function(e){return h(e,(function(){return null}),null)},toArray:function(e){var t=[];return A(e,t,null,(function(e){return e})),t},only:function(e){return c(e)||i("143"),e}},createRef:function(){return{current:null}},Component:o,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:P,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:O,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:I,render:e}},lazy:function(e){return{$$typeof:w,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:N,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return v().useCallback(e,t)},useContext:function(e,t){return v().useContext(e,t)},useEffect:function(e,t){return v().useEffect(e,t)},useImperativeHandle:function(e,t,r){return v().useImperativeHandle(e,t,r)},useDebugValue:function(){},useLayoutEffect:function(e,t){return v().useLayoutEffect(e,t)},useMemo:function(e,t){return v().useMemo(e,t)},useReducer:function(e,t,r){return v().useReducer(e,t,r)},useRef:function(e){return v().useRef(e)},useState:function(e){return v().useState(e)},Fragment:T,StrictMode:R,Suspense:C,createElement:l,cloneElement:function(e,t,r){null==e&&i("267",e);var n=void 0,o=y({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,l=U.current),void 0!==t.key&&(a=""+t.key);var c=void 0;for(n in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)F.call(t,n)&&!x.hasOwnProperty(n)&&(o[n]=void 0===t[n]&&void 0!==c?c[n]:t[n])}if(1===(n=arguments.length-2))o.children=r;else if(1<n){c=Array(n);for(var d=0;d<n;d++)c[d]=arguments[d+2];o.children=c}return{$$typeof:g,type:e.type,key:a,ref:s,props:o,_owner:l}},createFactory:function(e){var t=l.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.8.6",unstable_ConcurrentMode:b,unstable_Profiler:_,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:V,ReactCurrentOwner:U,assign:y}},Y={default:B},K=Y&&B||Y;e.exports=K.default||K},function(e,t,n){"use strict";function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(r({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,l=i(e),c=1;c<arguments.length;c++){for(var d in r=Object(arguments[c]))a.call(r,d)&&(l[d]=r[d]);if(o){n=o(r);for(var u=0;u<n.length;u++)s.call(r,n[u])&&(l[n[u]]=r[n[u]])}}return l}},function(e,t,r){}])},function(e,t,r){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.batchedSubscribe=function(e){function t(){s===a&&(s=a.slice())}function r(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var r=!0;return t(),s.push(e),function(){if(r){r=!1,t();var n=s.indexOf(e);s.splice(n,1)}}}function i(){for(var e=a=s,t=0;t<e.length;t++)e[t]()}function o(){e(i)}if("function"!==typeof e)throw new Error("Expected batch to be a function.");var a=[],s=a;return function(e){return function(){function t(){var e=i.dispatch.apply(i,arguments);return o(),e}var i=e.apply(void 0,arguments),a=i.subscribe;return n({},i,{dispatch:t,subscribe:r,subscribeImmediate:a})}}}},function(e,t,r){e.exports={overlapAdContainer:"ZXrWmGG"}},function(e,t){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r]);return e})},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";r.r(t),r.d(t,"MODERN_BUNDLE_FORCED_MODE",(function(){return i})),r.d(t,"NATIVE_UI_MODE",(function(){return o})),r.d(t,"AD_SESSION_ID_LAST_UTC_TIMESTAMP",(function(){return a})),r.d(t,"AD_SESSION_ID_LAST_ADSID",(function(){return s})),r.d(t,"AD_SESSION_ID_LAST_SERVICE_NAME",(function(){return l})),r.d(t,"AD_SESSION_ID_LAST_AD_SESSION_WATCHED_TIME",(function(){return c}));const n="videoplayer",i=n+"-modern-bundle-forced-mode",o=n+"-native-ui-mode",a=n+"-ad-session-id-last-utc-timestamp",s=n+"-ad-session-id-last-adsid",l=n+"-ad-session-id-last-service-name",c=n+"-ad-session-id-last-ad-session-watched-time"},function(e,t,r){"use strict";function n(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(55)},function(e,t,r){"use strict";function n(e,t){try{return t(e)}catch(t){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},o=t||{},s=e.split(a),l=o.decode||i,c=0;c<s.length;c++){var d=s[c],u=d.indexOf("=");if(!(u<0)){var h=d.substr(0,u).trim(),p=d.substr(++u,d.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==r[h]&&(r[h]=n(p,l))}}return r},t.serialize=function(e,t,r){var n=r||{},i=n.encode||o;if("function"!==typeof i)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=i(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return l};var i=decodeURIComponent,o=encodeURIComponent,a=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return n(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=i},function(e,t){function r(){throw new Error("Buffer is not included.")}r.isBuffer=function(){return!1},t.INSPECT_MAX_BYTES=50,t.SlowBuffer=r,t.Buffer=r},function(e,t,r){(function(t){var r;"object"===typeof window&&window.window===window?(r=window).ID3={}:r="object"===typeof t&&t.global===t?t:this,"slice"in Uint8Array.prototype||(Uint8Array.prototype.slice=Uint8Array.prototype.subarray),e.exports=r}).call(this,r(54))},function(e,t,r){"use strict";e.exports=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"]},function(e,t,r){"use strict";e.exports={TALB:"album",TBPM:"bpm",TCOM:"composer",TCON:"genre",TCOP:"copyright",TDEN:"encoding-time",TDLY:"playlist-delay",TDOR:"original-release-time",TDRC:"recording-time",TDRL:"release-time",TDTG:"tagging-time",TENC:"encoder",TEXT:"writer",TFLT:"file-type",TIPL:"involved-people",TIT1:"content-group",TIT2:"title",TIT3:"subtitle",TKEY:"initial-key",TLAN:"language",TLEN:"length",TMCL:"credits",TMED:"media-type",TMOO:"mood",TOAL:"original-album",TOFN:"original-filename",TOLY:"original-writer",TOPE:"original-artist",TOWN:"owner",TPE1:"artist",TPE2:"band",TPE3:"conductor",TPE4:"remixer",TPOS:"set-part",TPRO:"produced-notice",TPUB:"publisher",TRCK:"track",TRSN:"radio-name",TRSO:"radio-owner",TSOA:"album-sort",TSOP:"performer-sort",TSOT:"title-sort",TSRC:"isrc",TSSE:"encoder-settings",TSST:"set-subtitle",TXXX:"user-defined-text-information",TYER:"year",WCOM:"url-commercial",WCOP:"url-legal",WOAF:"url-file",WOAR:"url-artist",WOAS:"url-source",WORS:"url-radio",WPAY:"url-payment",WPUB:"url-publisher",WAF:"url-file",WAR:"url-artist",WAS:"url-source",WCM:"url-commercial",WCP:"url-copyright",WPB:"url-publisher",COMM:"comments",USLT:"lyrics",APIC:"image",PIC:"image"}},function(e,t,r){"use strict";e.exports=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"]},function(e,t,r){"use strict";var n={readUTF16String:function(e,t,r){var n=0,i=1,o=0;r=Math.min(r||e.length,e.length),254===e[0]&&255===e[1]?(t=!0,n=2):255===e[0]&&254===e[1]&&(t=!1,n=2),t&&(i=0,o=1);var a,s,l,c,d,u=[];for(d=0;n<r&&(a=e[n+i],s=e[n+o],n+=2,0!==(l=(a<<8)+s));d++)a<216||a>=224?u[d]=String.fromCharCode(l):(c=(e[n+i]<<8)+e[n+o],n+=2,u[d]=String.fromCharCode(l,c));return u.join("")},readUTF8String:function(e,t){var r=0;t=Math.min(t||e.length,e.length),239===e[0]&&187===e[1]&&191===e[2]&&(r=3);for(var n=[],i=0;r<t;i++){var o,a,s,l=e[r++];if(0===l)break;l<128?n[i]=String.fromCharCode(l):l>=194&&l<224?(o=e[r++],n[i]=String.fromCharCode(((31&l)<<6)+(63&o))):l>=224&&l<240?(o=e[r++],a=e[r++],n[i]=String.fromCharCode(((15&l)<<12)+((63&o)<<6)+(63&a))):l>=240&&l<245&&(s=((7&l)<<18)+((63&(o=e[r++]))<<12)+((63&(a=e[r++]))<<6)+(63&e[r++])-65536,n[i]=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return n.join("")},readNullTerminatedString:function(e,t){var r,n,i=[];for(t=t||e.length,r=0;r<t&&0!==(n=e[r++]);)i[r-1]=String.fromCharCode(n);return i.join("")},readISO8859String:function(e,t){var r,n,i=[];for(t=t||e.length,r=0;r<t;)n=e[r++],i[r-1]=String.fromCharCode(n);return i.join("")}};e.exports=n},function(e,t,r){"use strict";r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i}));const n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,r){},function(e,t,r){"use strict";function n(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).match(/Tizen ([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,r,n]=t;return{major:parseInt(r,10),minor:parseInt(n,10)}}function i(){var e;return null==(e=window.webapis)?void 0:e.avplay}function o(e){let{preferNative:t=!1}=void 0===e?{}:e;return void 0!==i()&&(t||Rl||_l)}function a(e){let{preferNative:t=!1}=void 0===e?{}:e;return wl&&(t||xl||Hl)}function s(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;return r||void 0}function l(e,t,r){return e>r?r:e<t?t:e}function c(e,t){const r=e.style;for(const e in t)if(t.hasOwnProperty(e)){r[Ql(e)]=t[e]}}function d(e,t,r,n){const i=function(e){let t=!1,r=!1,n=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),r=Boolean(e.passive),n=Boolean(e.once)),{capture:t,passive:r,once:n}}(n),o=oc?i:i.capture,a=i.once&&!nc?function(e){s(),r.call(this,e)}:r,s=()=>{tc(e,t,a,o)};return ec(e,t,a,o),s}function u(e){const t=[...e],r=t.pop();if(!r||0===t.length)throw new Error("memoizeSingle need at least 2 functions as arg");return{preparers:t,resolver:r}}function h(e){return Object(Bl.a)(e.className)?e.className:e.namespaceURI===pc.svg&&e.getAttribute("class")||""}function p(e,t){Object(Bl.a)(e.className)?e.className=t:e.namespaceURI===pc.svg&&e.setAttributeNS("","class",t)}function f(e,t){void 0===t&&(t=""),0!==e.className.length?Ac(e)?Sc(e,t):function(e,t){let r=h(e).split(" ").concat(t.split(" "));r=function(e){const t={};for(let r=0;r<e.length;r++)t[e[r]]=r;return Object(cc.a)(t)}(Object(ac.a)(r,(function(e){return""!==e}))),p(e,r.join(" "))}(e,t):e.className=t}function E(e,t){const r=function(e){const t=Object(mc.a)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return r?d(e,r,()=>{t(Object(gc.a)(e))}):rc.a}function A(e){return Object(jl.a)(e).map(e=>{let{screenX:t,screenY:r}=e;return{screenX:t,screenY:r}})}function v(e,t,r){function n(e){let{touches:t}=e;return Object(kl.a)(t)&&t.length===h}function i(){return f>0}function o(){i()&&(window.clearTimeout(f),f=0,s=[])}function a(e){o(),p=!1}let s,{threshold:l=Tc,delay:c=Rc,handleContextmenu:u=!1,touchesCount:h=1}=void 0===r?{}:r,p=!1,f=0;const E=d(e,"touchstart",(function(e){n(e)&&(s=A(e.touches),o(),f=window.setTimeout(()=>{i()&&t()},c),p=!0)}),{passive:!0}),v=d(e,"touchend",a,{passive:!0}),y=d(e,"touchcancel",a,{passive:!0}),S=d(e,"touchmove",(function(e){i()&&(n(e)?function(e){if(e.length!==s.length)return!0;for(let t=0;t<e.length;t++){if(Math.abs(s[t].screenX-e[t].screenX)>l)return!0;if(Math.abs(s[t].screenY-e[t].screenY)>l)return!0}return!1}(A(e.touches))&&o():o())}),{passive:!0}),g=u?d(e,"contextmenu",(function(e){!i()&&p||(o(),t(e))}),{passive:!1}):rc.a;return()=>{o(),E(),v(),y(),S(),g()}}function y(e,t){void 0===t&&(t=window);const r=()=>_c.forEach(e=>t.removeEventListener(e,n)),n=t=>{"pagehide"===t.type&&t.persisted||(e(t),r())};return _c.forEach(e=>t.addEventListener(e,n)),r}function S(e){const t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||(t=>e.setTimeout(t,1e3/60)),r=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame||(t=>e.clearTimeout(t));return{requestAnimationFrame:t.bind(e),cancelAnimationFrame:r.bind(e)}}function g(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function m(e,t){e.forEach(e=>{g(e,t)})}function T(e){return 0===Vc.length&&(Mc=window.setInterval(()=>{Vc.forEach(e=>e())},250)),Vc.push(e),()=>{const t=Vc.indexOf(e);t>-1&&Vc.splice(t,1),0===Vc.length&&clearInterval(Mc)}}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e){void 0===e&&(e=window);const{document:t={}}=e;return Fc.filter(e=>{let{enabled:r}=e;return r in t})}function O(e,t){const r=_(e);if(r.length>0)return r[0];const n=function(e,t){return void 0===e&&(e=window),void 0===t&&(t=e.HTMLVideoElement&&e.HTMLVideoElement.prototype||{}),Fc.filter(e=>{let{enabled:r}=e;return r in t})}(e,t);return n.length>0?n[0]:void 0}function P(e){e&&"function"===typeof e.catch&&e.catch(e=>{})}function b(e){return"number"===typeof e&&isFinite(e)}function I(e){void 0===e&&(e=Gc.a);const t=e();return()=>Math.max(0,e()-t)}function C(e,t,r){let n,i=0;const o=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.call(r,...n)};return function(){const e=Date.now(),r=e-i;clearTimeout(n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];r<t?n=window.setTimeout(o,t-r,...s):(i=e,o(...s))}}function N(e,t){Object(cc.a)(t).forEach(r=>{const n=t[r];null===n?e.removeAttribute(r):e.setAttribute(r,n)})}function w(e){const t=e.navigator;if(!t)return;const{userActivation:r}=t;if(!Object(kl.a)(r))return;const{isActive:n,hasBeenActive:i}=r;return{isActive:n,hasBeenActive:i}}function D(e,t){if(void 0===t&&(t=window),!t||!t[e]||!t[e].prototype)return;const{play:r}=t[e].prototype;return r&&Object(uc.a)(r)?r:void 0}function L(e){if(!ed)return Promise.reject();const t=(r=e.play).__yaMuffleVideoPlayPromiseOriginalPlay||r;var r;if(Object(uc.a)(t))return t.call(e);const n=D("HTMLVideoElement")||D("HTMLMediaElement");if(n)return n.call(e);const i=document.createElement("div");i.style.display="none",document.body.appendChild(i);const o=D("HTMLMediaElement",Object(nd.a)(i).contentWindow);if(o){const t=o.call(e);return Object($c.a)(i),t}return e.play()}function k(e){const{error:t}=e;return new Ml(t)}function M(e,t){void 0===t&&(t={});let r=0;const n=[],i=(t,i)=>{n.push(d(e,t,i,sd)),clearTimeout(r)},o=()=>Object(xc.a)(n),a=new Promise((n,o)=>{const a=t=>{e.paused&&o(t)},s=L(e);if(a(ad.VideoTagPaused),i("durationchange",()=>a(ad.VideoTagPausedAfterDurationChange)),i("error",()=>a(ad.VideoTagPausedAfterError)),i("pause",()=>o(ad.PauseEvent)),i("playing",()=>{n(ad.PlayingEvent)}),s)t.useProgressEvent&&i("progress",()=>{n(ad.ProgressEvent)}),s.then(()=>n(ad.PromiseResolve)).catch(e=>o(function(e){return e?ad.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":ad.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(r=window.setTimeout(()=>{o(ad.Timeout)},t.timeoutForNonPromisePlay))}});return a.then(o,o),a}function V(e,t){const{paused:r}=e,n=t();return r||P(L(e)),n}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e){let{canPlayUnMuted:t,canPlayMuted:r,detectionMethod:n}=e;return{canPlayUnMuted:t,canPlayMuted:r,requireMute:!t&&r,requireUserGesture:!t&&!r,detectionMethod:n}}function x(e){if("boolean"===typeof e.allowedToPlay)return Promise.resolve(function(e){const t=id(e);return e.muted=!1,e.volume=1,e.allowedToPlay?(t(),F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.YaBroAllowedToPlay})):(e.muted=!0,e.volume=0,e.allowedToPlay?(t(),F({canPlayUnMuted:!1,canPlayMuted:!0,detectionMethod:od.YaBroAllowedToPlay})):(t(),F({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:od.YaBroAllowedToPlay})))}(e));const t=function(e){if(void 0===e&&(e=window),Nl(e))return F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.WebOSSmartTV})}();if(void 0!==t)return Promise.resolve(t);const r=function(e){if(void 0===e&&(e=window),Ol(e))return F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.OrsaySmartTV})}();if(void 0!==r)return Promise.resolve(r);const n=function(e){if(void 0===e&&(e=window),bl(e))return F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.PlayStationSmartTV})}();if(void 0!==n)return Promise.resolve(n);if(e.isAVPlay)return Promise.resolve(U({},ud,{detectionMethod:od.TizenAVPlay}));const i=function(e){if(void 0===e&&(e=window),gl(e))return ml(e)?F({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:od.Tizen23SmartTV}):F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.TizenSmartTVModern})}();if(void 0!==i)return Promise.resolve(i);return Jc&&zc<=9||ld?Promise.resolve(U({},dd,{detectionMethod:od.IOS9OrLess})):ed?cd?Promise.resolve(U({},ud,{detectionMethod:od.OldIE})):void 0:Promise.resolve(U({},dd,{detectionMethod:od.HTML5VideoIsNotSupported}))}function H(e){let t,r,{videoSlot:n,autoplay:i,muted:o,allowMuted:a}=e;if(!i){const e={autoplay:!1,muted:o,detectionMethod:pd.AutoplayDisabled};return{promise:Promise.resolve(e),abort:rc.a}}return{promise:new Promise(async e=>{t=e;const{promise:i,stop:s}=function(e,t){let{checkSoundEnabled:r=!0}=void 0===t?{}:t;const n=x(e),i=new hd(e,{checkSoundEnabled:r,promise:n});return{promise:i.promise,stop:i.stop}}(n,{checkSoundEnabled:!o});r=s;const{requireMute:l,requireUserGesture:c,detectionMethod:d}=await i.catch(()=>ud);e(function(e){let{requireUserGesture:t,requireMute:r,muted:n,allowMuted:i,detectionMethod:o}=e;return t?{autoplay:!1,muted:n,autoplayImpossible:!0,detectionMethod:o}:r?n?{autoplay:!0,muted:!0,detectionMethod:o}:i?{autoplay:!0,muted:!0,requireUserGestureToUnmute:!0,detectionMethod:o}:{autoplay:!1,muted:n,autoplayImpossible:!0,requireAllowMutedToAutoplay:!0,detectionMethod:o}:{autoplay:!0,muted:n,detectionMethod:o}}({requireUserGesture:c,requireMute:l,muted:o,allowMuted:a,detectionMethod:d}))}),abort:()=>{r(),t({autoplay:!0,muted:o,detectionMethod:pd.RASAborted})}}}function j(e){return Math.max(e,0)}function B(e){return j(function(e){return Math.floor(e)}(e))}function Y(e){return e}function K(e){const t=e;return t.Ya||(t.Ya={}),t.Ya.streamPlayer||(t.Ya.streamPlayer={}),t.Ya.streamPlayer}function G(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map(W),i="YA PLAYER: "+(new Date).toString()+" "+n.join(" ");return i}function W(e){return e&&"object"===typeof e?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}function X(e){const{pathname:t}=Object(Ll.g)(e.toLocaleLowerCase()),r=Object(Ll.c)(t);return"ismc"===r||"ism"===r||""===r&&/\.ism(c|l)?\/manifest$/.test(t)}function q(e,t){if(!Object(kl.a)(e))return!1;let r=e.isProxyElement;return void 0!==t&&r&&(r=e.proxyElementType===t),r}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function z(e){if(void 0===e)return qd.DEFAULT;const t=function(e){switch(e){case Qd.DEFAULT_ERROR:return qd.DEFAULT;case Qd.BROADCAST_AD_BLOCK_INIT_ERROR:case Qd.AD_LOADER_INIT_ERROR:case Qd.AD_TYPE_IS_NOT_RECOGNIZED:case Qd.AD_IS_ALREADY_PLAYING:case Qd.AD_CANNOT_FIND_CONTAINER_TO_PLAY:case Qd.MULTIROLL_INIT_ERROR:case Qd.PREROLL_ERROR:case Qd.PLAY_AD_VIEWERS_ERROR:return qd.ADS;case Qd.INVALID_METADATA:case Qd.INVALID_STREAM_URL:case Qd.UNEXPECTED_FEATURE_NAME:case Qd.UNEXPECTED_FEATURE_ACTION_NAME:case Qd.NO_PARAMS_IN_FEATURE_ACTION:case Qd.REQUIRED_FEATURE_IS_NOT_IN_BUNDLE:case Qd.NO_STREAMS:return qd.CONFIG;case Qd.YANDEX_RPC_ERROR:case Qd.PUBLIC_API_CALL_ERROR:case Qd.ON_TICK_ERROR:case Qd.SAGA_ERROR:case Qd.SHAKA_FILTER_ERROR:case Qd.SHAKA_CONFIGURE_ERROR:case Qd.REFRESH_SUBTITLES_ERROR:case Qd.NO_HLS_JS_INSTANCE:case Qd.RAA_TAKING_2SEC:case Qd.RAA_TAKING_10SEC:case Qd.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Qd.FEATURE_ACTION_DISPATCH_ERROR:case Qd.TANKER_KEY_ERROR:case Qd.RECOVER_TASK_ERROR:case Qd.PRELOAD_SOURCE_FAILED:case Qd.MEDIA_ERR_ABORTED:case Qd.AVPLAY_ERROR_PLAYER_ERROR_INVALID_STATE:case Qd.AVPLAY_ERROR_PLAYER_ERROR_INVALID_OPERATION:case Qd.AVPLAY_ERROR_PLAYER_ERROR_INVALID_PARAMETER:case Qd.AVPLAY_ERROR_PLAYER_ERROR_SEEK_FAILED:return qd.EXCEPTION;case Qd.UNSUPPORTED_MEDIA_TYPE:case Qd.MPD_NOT_SUPPORTED_ERROR:case Qd.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Qd.HLS_JS_NOT_SUPPORTED_ERROR:case Qd.HLS_JS_INVALID_MANIFEST_URL:case Qd.MEDIA_ERR_SRC_NOT_SUPPORTED:case Qd.MEDIA_ERR_DECODE:case Qd.MEDIA_ERR_CUSTOM:case Qd.AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FORMAT:case Qd.AVPLAY_ERROR_UNKNOWN_ERROR:case Qd.AVPLAY_ERROR_PLAYER_ERROR_INVALID_URI:case Qd.AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FILE:case Qd.AVPLAY_ERROR_PLAYER_ERROR_NO_SUCH_FILE:case Qd.AVPLAY_ERROR_PLAYER_ERROR_NONE:case Qd.AVPLAY_ERROR_PLAYER_ERROR_GENERIC:case Qd.AVPLAY_ERROR_PREPARE_ASYNC_TIMEOUT:case Qd.AVPLAY_ERROR_SEEK_TO_TIMEOUT:case Qd.WEBOS_ERROR_UNKNOWN_ERROR:case Qd.PLAYSTATION_PLAYER_ERROR_VIDEO_ERROR:case Qd.PLAYSTATION_PLAYER_ERROR_UNEXPECTED_ERROR:case Qd.ORSAY_ERROR_UNKNOWN_ERROR:case Qd.ORSAY_ERROR_UNSUPPORTED_CONTAINER:case Qd.ORSAY_ERROR_UNSUPPORTED_VIDEO_CODEC:case Qd.ORSAY_ERROR_UNSUPPORTED_AUDIO_CODEC:case Qd.ORSAY_ERROR_UNSUPPORTED_VIDEO_RESOLUTION:case Qd.ORSAY_ERROR_UNSUPPORTED_VIDEO_FRAMERATE:case Qd.ORSAY_ERROR_CORRUPTED_STREAM:case Qd.ORSAY_ERROR_UNEXPECTED_ERROR:return qd.MEDIA;case Qd.HLS_CONTROLLER_SCRIPT_LOAD_ERROR:case Qd.MPD_CONTROLLER_SCRIPT_LOAD_ERROR:case Qd.MP4_CONTROLLER_SCRIPT_LOAD_ERROR:case Qd.YANDEX_CONTROLLER_SCRIPT_LOAD_ERROR:case Qd.SCRIPT_INIT_ERROR:case Qd.MPD_SHAKA_INIT_ERROR:case Qd.META_INFO_REQUEST_FAILED:case Qd.STRM_ABD_INVALID_RESPONSE:return qd.NETWORK_PLAYER;case Qd.MEDIA_ERR_NETWORK:case Qd.AVPLAY_ERROR_PLAYER_ERROR_CONNECTION_FAILED:case Qd.ORSAY_ERROR_CONNECTION_FAILED:case Qd.ORSAY_ERROR_NETWORK_DISCONNECTED:case Qd.ORSAY_ERROR_STREAM_NOT_FOUND:case Qd.PLAYSTATION_STREAMING_ERROR_CONNECTION_FAILED:case Qd.PLAYSTATION_STREAMING_ERROR_HTTP_STATUS_FAIL:case Qd.PLAYSTATION_STREAMING_ERROR_UNEXPECTED_ERROR:return qd.NETWORK_MEDIA;case Qd.MPD_WIDEVINE_CERT_LOAD_ERROR:case Qd.FAIRPLAY_CERT_LOAD_ERROR:case Qd.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Qd.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Qd.FAIRPLAY_SPC_LOAD_ERROR:case Qd.FAIRPLAY_CREATE_KEY_ERROR:case Qd.FAIRPLAY_INVALID_CONTENT_ID:case Qd.DRM_PROXY_ERROR:case Qd.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Qd.WEBOS_DRM_ERROR_DRM_TYPE_NOT_SUPPORTED:case Qd.WEBOS_DRM_ERROR_RESULT_OF_SEND_DRM_MESSAGE_EMPTY:case Qd.WEBOS_DRM_ERROR_UNEXPECTED_ERROR:case Qd.AVPLAY_DRM_ERROR:case Qd.PLAYSTATION_PLAYER_ERROR_DRM_ERROR:case Qd.ORSAY_ERROR_AUTHENTICATION_FAILED:case Qd.MEDIA_ERR_ENCRYPTED:case Qd.FAIRPLAY_NOT_SUPPORTED:case Qd.NO_DRM:return qd.DRM;case Qd.REGIONAL_LIMITATION_MANIFEST:case Qd.REGIONAL_LIMITATION_LEVEL:case Qd.REGIONAL_LIMITATION_SEGMENT:return qd.REGIONAL;case Qd.SIGNATURE_EXPIRED_MANIFEST:case Qd.SIGNATURE_EXPIRED_LEVEL:case Qd.SIGNATURE_EXPIRED_SEGMENT:return qd.ACCESS;case Qd.NO_CODECS:return qd.NO_CODECS;case Qd.NO_PLAYABLE_STREAMS:return qd.CANNOT_PLAY;case Qd.NO_MSE:return qd.UNSUPPORTED_ENV}return qd.DEFAULT}(e);if(t!==qd.DEFAULT)return t;switch(e){case zd.BUFFER_FULL_ERROR:case zd.BUFFER_NUDGE_ON_STALL:case zd.BUFFER_STALLED_ERROR:case zd.SHAKA_VIDEO_ERROR_3016:case zd.FRAG_PARSING_ERROR:case zd.BUFFER_SEEK_OVER_HOLE:case zd.BUFFER_APPENDING_ERROR:case zd.PIPELINE_ERROR_DECODE:case zd.DECODER_ERROR_NOT_SUPPORTED:case zd.BUFFER_APPEND_ERROR:case zd.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015:case zd.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case zd.REMUX_ALLOC_ERROR:case zd.BUFFER_ADD_CODEC_ERROR:case zd.DEMUXER_ERROR_COULD_NOT_OPEN:case zd.NS_ERROR_DOM_INVALID_STATE_ERR:case zd.SHAKA_DASH_INVALID_XML_4001:case zd.SHAKA_QUOTA_EXCEEDED_ERROR_3017:case zd.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case zd.FAILED_TO_INIT_DECODER:case zd.PIPELINE_ERROR_INITIALIZATION_FAILED:case zd.NS_ERROR_FAILURE:case zd.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014:case zd.REQUEST_FAILED:case zd.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case zd.PIPELINE_ERROR_COULD_NOT_RENDER:case zd.NS_ERROR_DOM_MEDIA_METADATA_ERR:case zd.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case zd.NS_ERROR_DOM_MEDIA_FATAL_ERR:case zd.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012:case zd.MANIFEST_PARSING_ERROR:return qd.MEDIA;case zd.FRAG_LOAD_ERROR:case zd.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST:case zd.SHAKA_HTTP_ERROR_1002_SEGMENT:case zd.MANIFEST_LOAD_ERROR:case zd.LEVEL_LOAD_ERROR:case zd.SHAKA_HTTP_ERROR_1002_MANIFEST:case zd.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT:case zd.SHAKA_UNSUPPORTED_SCHEME_1000:case zd.AUDIO_TRACK_LOAD_ERROR:return qd.NETWORK_MEDIA;case zd.SHAKA_TIMEOUT_1003_SEGMENT:case zd.FRAG_LOAD_TIME_OUT:case zd.MANIFEST_LOAD_TIME_OUT:case zd.LEVEL_LOAD_TIME_OUT:case zd.SHAKA_TIMEOUT_1003_MANIFEST:case zd.SHAKA_TIMEOUT_1003_LICENSE:case zd.AUDIO_TRACK_LOAD_TIME_OUT:return qd.NETWORK_TIMEOUT;case zd.INTERNAL_EXCEPTION:case zd.SHAKA_OPERATION_ABORTED_7001:case zd.ON_PLAYER_INIT_ERROR_INTERNAL:case zd.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case zd.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case zd.LOAD_SKIN_ERROR:case zd.INSERT_INTO_WITH_SECURE_FRAME:return qd.EXCEPTION;case zd.UNABLE_TO_LOAD_PLAYER_IFRAME:case zd.ON_PLAYER_INIT_ERROR:case zd.LOADER_INIT_ERROR:case zd.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case zd.FAILED_TO_DOWNLOAD_DEBUG_INFO:case zd.SHAKA_REQUEST_FILTER_ERROR_1006:return qd.NETWORK_PLAYER;case zd.PLAYER_CONTAINER_NOT_FOUND:case zd.KEY_LOAD_ERROR:case zd.FEATURE_HANDLER_ERROR:case zd.SHAKA_NO_LICENSE_SERVER_GIVEN_6012:case zd.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case zd.INVALID_CONFIG_IN_CREATE_PLAYER:case zd.INVALID_CONFIG_IN_SET_SOURCE:case zd.INVALID_CONFIG_IN_SOURCE_UPDATE:case zd.ELEMENT_NOT_IN_DOM:return qd.CONFIG;case zd.SHAKA_FAILED_TO_CREATE_CDM_6002:case zd.SHAKA_HTTP_ERROR_1002_LICENSE:case zd.SHAKA_LICENSE_REQUEST_FAILED_6007:case zd.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006:case zd.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001:case zd.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003:case zd.SHAKA_LICENSE_RESPONSE_REJECTED_6008:case zd.SHAKA_INVALID_SERVER_CERTIFICATE_6004:case zd.SHAKA_EXPIRED_6014:case zd.SHAKA_BAD_HTTP_STATUS_1001_LICENSE:return qd.DRM;case zd.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032:return qd.NO_CODECS}return qd.DEFAULT}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ee(e){return Boolean(e)}function te(e){if(void 0===e&&(e=window),!e.navigator)return ou;const{connection:t={}}=e.navigator;return b(t.rtt)?t.rtt:ou}function re(e){return e>=au.M?au.L:e>=au.S?au.M:e>=au.XS?au.S:au.XS}function ne(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,r=/Android/.test(t),n=function(e){void 0===e&&(e=window);return/Windows Phone/i.test(e.navigator.userAgent)}(e),i=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return r&&!n||i}function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oe(e){let{event:t}=e;const r=t.touches[0]||t.changedTouches[0];return{clientX:r?r.clientX:-1,clientY:r?r.clientY:-1}}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function se(e){wu[e]=!0}function le(e){wu[e]=!1}function ce(e){return!!wu[e]}function de(e){if(Du.checkExisting&&ce(e))throw new TypeError("Duplicate action type: ".concat(e))}function ue(){return Object.keys(wu).filter(ce)}function he(){ue().forEach(le)}function pe(){Du.checkExisting=!0}function fe(){Du.checkExisting=!1}function Ee(e,t,r){function n(){var e=t.apply(void 0,arguments);return r?{type:a,payload:e,error:e instanceof Error,meta:r.apply(void 0,arguments)}:{type:a,payload:e,error:e instanceof Error}}function i(){return l(s,!1).apply(void 0,arguments)}"function"===typeof e&&(r=t,t=e,e=void 0),"function"!==typeof t&&(t=ku),"function"!==typeof r&&(r=void 0);var o="string"===typeof e&&/^[0-9A-Z_]+$/.test(e);o?(de(e),se(e)):++Lu;var a=o?e:"[".concat(Lu,"]").concat(e?" "+e:""),s=void 0,l=function(e,t){return function(){var r=n.apply(void 0,arguments);return r.error||(r.error=t),Array.isArray(e)?e.map((function(e){return e(r)})):e?e(r):r}};return i.asError=function(){return l(s,!0).apply(void 0,arguments)},i.getType=function(){return a},i.toString=function(){return a},i.raw=n,i.assignTo=function(e){return s=Vu(e),i},i.assigned=function(){return!!s},i.bound=function(){return!1},i.dispatched=i.assigned,i.bindTo=function(e){var t=l(Vu(e));return t.asError=l(Vu(e)),t.raw=n,t.getType=i.getType,t.toString=i.toString,t.assignTo=function(){return t},t.bindTo=function(){return t},t.assigned=function(){return!1},t.bound=function(){return!0},t.dispatched=t.bound,t},i}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ve(e){return e&&e.getType?e.toString():e}function ye(){function e(e){return!!o[ve(e)]}function t(e,r){return Array.isArray(e)?e.forEach((function(e){t(e,r)})):o[ve(e)]=r,l}function r(e){return Array.isArray(e)?e.forEach(r):delete o[ve(e)],l}function n(e){return Object.keys(e).forEach((function(t){return s[t]=e[t]})),l}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;if(!t||"string"!==typeof t.type)return e;if(t.type.startsWith("@@redux/"))return e;var r=o[t.type]||s.fallback;return r?s.payload?r(e,t.payload,t.meta):r(e,t):e}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s={payload:!0,fallback:null},l=Ae(i,{has:e,on:t,off:r,options:n});if("function"===typeof o){var c=o;o={},c(t,r)}return e(Uu)||t(Uu,(function(e,t){return s.payload?t.reduce(i,e):t.payload.reduce(i,e)})),l}function Se(e){return e&&e.type===Fu?(e.payload.type=Fu,e.payload):e}function ge(e,t){const r=e.height||0;return(t.height||0)-r}function me(e){return Boolean(e&&e.adType===bu.inroll)}function Te(e,t){const{ad:{originalBroadcastAdCues:r}}=e,n=r[t];if(n){const{start:e}=n;if(void 0===e)return;const{end:t=e+Vp}=n;return{start:Y(e),end:Y(t)}}}function Re(e){const{ad:{originalBroadcastAdCues:t,adInfo:r}}=e;return me(r)?r.params.cueId:Object(cc.a)(t).find(t=>function(e,t){const{controller:{currentTime:r,programDateTime:n}}=e;if(void 0===n)return!1;const i=n/1e3+r,o=Te(e,t);if(!o)return!1;const{start:a,end:s}=o;return a<=i&&i<=s}(e,t))}function _e(e){const{controller:{currentTime:t,programDateTime:r}}=e;return void 0===r?r:Ad(r,yd(t,1e3))}function Oe(e,t){return Math.max(e+Yp,t+Bp)}function Pe(e){let{cue_id:t,pts:r,offset:n,cutoff:i}=e;const o=Ad(r,n);return{start:o,isEndReceived:void 0!==i,cueId:t,end:void 0!==i?Ad(r,i):Oe(r,o),isValid:!0,invalidateReason:void 0}}function be(e,t){const r=[],n=[];return((e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)})(e,(i,o)=>{t(i,o,e)?r.push(i):n.push(i)}),[r,n]}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ce(e){return e.reduce((e,t)=>Ad(e,Y(t.getAdDuration())),Y(0))}function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function we(e){void 0===e&&(e=window);try{return e.ya.videoAd.getBundleVersion()}catch(e){return"none"}}function De(e){void 0===e&&(e=window);try{return e.ya.videoAd.getModuleVersion()}catch(e){return"none"}}function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ke(){return tf||(!function(){try{ef=encodeURIComponent(JSON.stringify(Le({},$p,Zp)))}catch(e){}}(),tf=!0),ef}function Me(){try{return JSON.parse(window.Ya.Rum._vars["-additional"])}catch(e){return{}}}function Ve(){try{return window.Ya.Rum.setVars({"-additional":JSON.stringify($p)})}catch(e){}}function Ue(){try{return window.Ya.Rum.updateErrors({additional:Le({},$p)})}catch(e){}}function Fe(e){return void 0===e||void 0===e.additional?ke():encodeURIComponent(JSON.stringify(Le({},$p,Zp,e.additional)))}function xe(e){$p=Le({},Me(),e),Ve(),Ue(),tf=!1}function He(e,t){$p=Le({},Me(),{[e]:t}),Ve(),Ue(),tf=!1}function je(){return rf}function Be(){return of}function Ye(){return af}function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ge(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function We(e){Object(Yc.a)(()=>{window.Ya.Rum.time(e)})}function Xe(e,t){void 0===t&&(t={}),je()&&Object(Yc.a)(()=>{const r=Ge(t,["additional"]);window.Ya.Rum.timeEnd(e,Ke({},r,{"-additional":Fe(t)}))})}function qe(e){const t=Ye();return sf.subpageIndex!==t?(sf.subpageIndex=t,sf.deltas={},!1):Boolean(sf.deltas[e])}function Qe(e){nf&&(qe(e)||We(e))}function ze(e,t){var r;(void 0===t&&(t={}),nf)&&(qe(e)||(Xe(e,t),r=e,sf.deltas[r]=!0))}function Je(e){const t=e.document;let r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r}function $e(e,t){void 0===e&&(e="a"),void 0===t&&(t="z");const r=function(e,t){let r=e+Object(cf.a)()*(t+1-e);return r=Math.floor(r),r}(e.charCodeAt(0),t.charCodeAt(0));return String.fromCharCode(r)}function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function et(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:r=rc.a,retries:n=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let i=r,o=0;return t&&n>0&&(i=e=>{if(r(e),o>0){const t=-1===e.src.indexOf("?")?"?":"&",r=function(e){const t=[];for(let r=0;r<e;r++)t.push($e());return t.join("")}(4);e.src+=t+r}o++}),function e(t){const{src:r,win:n=window,charset:i=df,async:o=!0,retries:a=0,onRetry:s=rc.a,retryDelay:l=0,checkLoad:c=uf,onBeforeLoad:d=rc.a,onLoad:u=rc.a,onError:h=rc.a}=t,p=n.document.createElement("script"),f=n=>{a>0?(s(n),e(Ze({},t,{src:r,retries:a-1}))):h(n),Object($c.a)(p)};p.type="text/javascript",p.async=o,p.onload=()=>c(p)?u():f(new Error("checkLoad for "+r+" failed")),p.onerror=e=>{try{n.setTimeout(()=>{f(e)},l)}catch(e){}},p.src=r,p.charset=i,d(p),Je(n).appendChild(p)}(Ze({},e,{onBeforeLoad:i}))}function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nt(e){return new Promise((t,r)=>{!function(e){const{win:t=window,src:r,retries:n=0,onError:i=rc.a}=e,o=new Cc.a({id:lf.LOAD_SCRIPT_ERROR,message:"Failed to load script ["+r+"]",details:{src:r,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:n}});et(tt({},e,{win:t,onError:()=>i(o)}))}(rt({},e,{onLoad:t,onError:r}))})}function it(e){let{win:t=window,src:r,checkLoad:n,onBeforeLoad:i=rc.a,onLoad:o=rc.a,withCredentials:a=!1}=e;ff["ll1.0-6810"]=ff["ll1.0-6810"]||{};const s=ff["ll1.0-6810"];return s[r]||(s[r]=nt({checkLoad:n,win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{a||(e.crossOrigin="anonymous"),i()}}).then(o),s[r].catch(()=>delete s[r])),s[r]}function ot(){let e=!1;return it({src:Ef,checkLoad:()=>"undefined"!==typeof Hls,onBeforeLoad:()=>{e=!0,We("lib.hlsjs")},onLoad:()=>{e&&Xe("lib.hlsjs")}})}function at(){let e=!1;return it({src:Af,checkLoad:()=>"undefined"!==typeof shaka,onBeforeLoad:()=>{e=!0,We("lib.shaka")},onLoad:()=>{e&&Xe("lib.shaka")}}).then(()=>shaka.polyfill.installAll())}async function st(e){void 0===e&&(e=window);let t=!1,r=0;e===window&&Qe("adsdk.loader"),await it({win:e,src:"https://an.yandex.ru/system/video-ads-sdk/adsdk.js",onBeforeLoad:()=>{r++,t=!0},onLoad:()=>{t&&e===window&&e===window&&ze("adsdk.loader",{additional:{retry:r}})},checkLoad:()=>void 0!==vf(e),withCredentials:!0});const n=vf(e);e===window&&Qe("adsdk.multiroll");const i=n("Multiroll");return i.then(()=>{e===window&&ze("adsdk.multiroll")}),i}function lt(e){return e===bu.overlay||e===bu.inrollOverlay||e===bu.overlaySelfPromo}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dt(e){return new Promise((t,r)=>{Object(Kd.a)(ct({},e,{onSuccess:t,onError:r}))})}function ut(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ht(e,t,r){function n(){p===h&&(p=h.slice())}function i(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function o(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return n(),p.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,n();var r=p.indexOf(e);p.splice(r,1),h=null}}}function a(e){if(!ut(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,u=d(u,e)}finally{f=!1}for(var t=h=p,r=0;r<t.length;r++){(0,t[r])()}return e}function s(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,a({type:Rf.REPLACE})}function l(){var e,t=o;return(e={subscribe:function(e){function r(){e.next&&e.next(i())}if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}})[mf.a]=function(){return this},e}var c;if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error("Expected the enhancer to be a function.");return r(ht)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var d=e,u=t,h=[],p=h,f=!1;return a({type:Rf.INIT}),(c={dispatch:a,subscribe:o,getState:i,replaceReducer:s})[mf.a]=l,c}function pt(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function ft(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];0,"function"===typeof e[i]&&(r[i]=e[i])}var o,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"===typeof r(void 0,{type:Rf.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof r(void 0,{type:Rf.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Rf.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var l=a[s],c=r[l],d=e[l],u=c(d,t);if("undefined"===typeof u){var h=pt(l,t);throw new Error(h)}i[l]=u,n=n||u!==d}return(n=n||a.length!==Object.keys(e).length)?i:e}}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(r,!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function gt(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function mt(e){var t=!1;return function(){t||(t=!0,e())}}function Tt(e,t,r){void 0===t&&(t=Zf),void 0===r&&(r="iterator");var n={meta:{name:r},next:e,throw:t,return:eE,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}function Rt(e,t){var r=t.sagaStack;console.error(e),console.error(r)}function _t(e,t){var r=Object.keys(e),n=r.length;var i,o=0,a=Hf(e)?tE(n):{},s={};return r.forEach((function(e){var r=function(r,s){i||(s||oE(r)?(t.cancel(),t(r,s)):(a[e]=r,++o===n&&(i=!0,t(a))))};r.cancel=Qf,s[e]=r})),t.cancel=function(){i||(i=!0,r.forEach((function(e){return s[e].cancel()})))},s}function Ot(e){return{name:e.name||"anonymous",location:Pt(e)}}function Pt(e){return e[Mf]}function bt(e,t){void 0===e&&(e=10);var r=new Array(e),n=0,i=0,o=0,a=function(t){r[i]=t,i=(i+1)%e,n++},s=function(){if(0!=n){var t=r[o];return r[o]=null,n--,o=(o+1)%e,t}},l=function(){for(var e=[];n;)e.push(s());return e};return{isEmpty:function(){return 0==n},put:function(s){var c;if(n<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[i]=s,o=i=(i+1)%e;break;case 4:c=2*e,r=l(),n=r.length,i=r.length,o=0,r.length=c,e=c,a(s)}},take:s,flush:l}}function It(e,t){return void 0===e&&(e="*"),Yf(e)?sE("TAKE",{pattern:e}):Kf(r=e)&&r[Cf]&&Uf(t)&&Yf(t)?sE("TAKE",{channel:e,pattern:t}):Kf(e)?sE("TAKE",{channel:e}):void 0;var r}function Ct(e,t){return Vf(t)&&(t=e,e=void 0),sE("PUT",{channel:e,action:t})}function Nt(e){var t=sE("ALL",e);return t.combinator=!0,t}function wt(e){var t=sE("RACE",e);return t.combinator=!0,t}function Dt(e,t){var r,n=null;return Ff(e)?r=e:(Hf(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&xf(r)&&Ff(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function Lt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return sE("CALL",Dt(e,r))}function kt(e,t,r){void 0===r&&(r=[]);return sE("CALL",Dt([e,t],r))}function Mt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return sE("FORK",Dt(e,r))}function Vt(e){return void 0===e&&(e=wf),sE("CANCEL",e)}function Ut(e){void 0===e&&(e=Jf);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return sE("SELECT",{selector:e,args:r})}function Ft(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}function xt(e){try{Bt(),e()}finally{Yt()}}function Ht(e){dE.push(e),uE||(Bt(),Kt())}function jt(e){try{return Bt(),e()}finally{Kt()}}function Bt(){uE++}function Yt(){uE--}function Kt(){var e;for(Yt();!uE&&void 0!==(e=dE.shift());)xt(e)}function Gt(e){var t="*"===e?AE:xf(e)?fE:Hf(e)?hE:Gf(e)?fE:Ff(e)?pE:Wf(e)?EE:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}function Wt(e){void 0===e&&(e=aE());var t=!1,r=[];return{take:function(n){t&&e.isEmpty()?n(vE):e.isEmpty()?(r.push(n),n.cancel=function(){gt(r,n)}):n(e.take())},put:function(n){if(!t){if(0===r.length)return e.put(n);r.shift()(n)}},flush:function(r){t&&e.isEmpty()?r(vE):r(e.flush())},close:function(){if(!t){t=!0;var e=r;r=[];for(var n=0,i=e.length;n<i;n++){(0,e[n])(vE)}}}}}function Xt(){var e,t,r,n,i,o,a=(t=!1,n=r=[],i=function(){n===r&&(n=r.slice())},o=function(){t=!0;var e=r=n;n=[],e.forEach((function(e){e(vE)}))},(e={})[Cf]=!0,e.put=function(e){if(!t)if(yE(e))o();else for(var i=r=n,a=0,s=i.length;a<s;a++){var l=i[a];l[If](e)&&(l.cancel(),l(e))}},e.take=function(e,r){void 0===r&&(r=AE),t?e(vE):(e[If]=r,i(),n.push(e),e.cancel=mt((function(){i(),gt(n,e)})))},e.close=o,e),s=a.put;return a.put=function(e){e[Nf]?s(e):Ht((function(){s(e)}))},a}function qt(e,t){var r=e[Of];Ff(r)&&(t.cancel=r),e.then(t,(function(e){t(e,!0)}))}function Qt(e){e.isRunning()&&e.cancel()}function zt(e,t){return e+"?"+t}function Jt(e){var t=e.name,r=e.location;return r?t+"  "+zt(r.fileName,r.lineNumber):t}function $t(e){var t,r,n,i=(t=function(e){return e.cancelledTasks},r=e,(n=[]).concat.apply(n,r.map(t)));return i.length?["Tasks cancelled due to error:"].concat(i).join("\n"):""}function Zt(e,t,r,n,i,o,a){function s(t,r){if(r){if(u=2,(E={meta:i,cancelledTasks:p}).crashedEffect=TE,RE.push(E),A.isRoot){var n=(o=RE[0],a=RE.slice(1),s=o.crashedEffect?(l=o.crashedEffect,(f=Pt(l))?f.code+"  "+zt(f.fileName,f.lineNumber):""):null,["The above error occurred in task "+Jt(o.meta)+(s?" \n when executing effect "+s:"")].concat(a.map((function(e){return"    created by "+Jt(e.meta)})),[$t(RE)]).join("\n"));_E(),e.onError(t,{sagaStack:n})}d=t,h&&h.reject(t)}else t===Lf?u=1:1!==u&&(u=3),c=t,h&&h.resolve(t);var o,a,s,l,f,E;A.cont(t,r),A.joiners.forEach((function(e){e.cb(t,r)})),A.joiners=null}var l;void 0===a&&(a=Qf);var c,d,u=0,h=null,p=[],f=Object.create(r),E=function(e,t,r){function n(e){t(),o(),r(e,!0)}function i(t){s.push(t),t.cont=function(i,o){l||(gt(s,t),t.cont=Qf,o?n(i):(t===e&&(a=i),s.length||(l=!0,r(a))))}}function o(){l||(l=!0,s.forEach((function(e){e.cont=Qf,e.cancel()})),s=[])}var a,s=[],l=!1;return i(e),{addTask:i,cancelAll:o,abort:n,getTasks:function(){return s}}}(t,(function(){p.push.apply(p,E.getTasks().map((function(e){return e.meta.name})))}),s),A=((l={})[Df]=!0,l.id=n,l.meta=i,l.isRoot=o,l.context=f,l.joiners=[],l.queue=E,l.cancel=function(){0===u&&(u=1,E.cancelAll(),s(Lf,!1))},l.cont=a,l.end=s,l.setContext=function(e){$f(f,e)},l.toPromise=function(){return h||(h=cE(),2===u?h.reject(d):0!==u&&h.resolve(c)),h.promise},l.isRunning=function(){return 0===u},l.isCancelled=function(){return 1===u||0===u&&1===t.status},l.isAborted=function(){return 2===u},l.result=function(){return c},l.error=function(){return d},l);return A}function er(e,t,r,n,i,o,a){function s(e,r){try{var i;r?(i=t.throw(e),_E()):iE(e)?(d.status=1,s.cancel(),i=Ff(t.return)?t.return(Lf):{done:!0,value:Lf}):i=nE(e)?Ff(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==d.status&&(d.status=3),d.cont(i.value)):l(i.value,n,s)}catch(e){if(1===d.status)throw e;d.status=2,d.cont(e,!0)}}function l(t,r,n,i){function o(r,i){a||(a=!0,n.cancel=Qf,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(s,r):e.sagaMonitor.effectResolved(s,r)),i&&function(e){TE=e}(t),n(r,i))}void 0===i&&(i="");var a,s=gE();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:s,parentEffectId:r,label:i,effect:t}),o.cancel=Qf,n.cancel=function(){a||(a=!0,o.cancel(),o.cancel=Qf,e.sagaMonitor&&e.sagaMonitor.effectCancelled(s))},c(t,s,o)}var c=e.finalizeRunEffect((function(t,r,n){if(jf(t))qt(t,n);else if(Bf(t))er(e,t,u.context,r,i,!1,n);else if(t&&t[bf]){(0,mE[t.type])(e,t.payload,n,h)}else n(t)}));s.cancel=Qf;var d={meta:i,cancel:function(){0===d.status&&(d.status=1,s(Lf))},status:0},u=Zt(e,d,r,n,i,o,a),h={task:u,digestEffect:l};return a&&(a.cancel=u.cancel),s(),u}function tr(e,t){var r=e.channel,n=void 0===r?Xt():r,i=e.dispatch,o=e.getState,a=e.context,s=void 0===a?{}:a,l=e.sagaMonitor,c=e.effectMiddlewares,d=e.onError,u=void 0===d?Rt:d;for(var h=arguments.length,p=new Array(h>2?h-2:0),f=2;f<h;f++)p[f-2]=arguments[f];var E=t.apply(void 0,p);var A,v=gE();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Qf,l.effectTriggered=l.effectTriggered||Qf,l.effectResolved=l.effectResolved||Qf,l.effectRejected=l.effectRejected||Qf,l.effectCancelled=l.effectCancelled||Qf,l.actionDispatched=l.actionDispatched||Qf,l.rootSagaStarted({effectId:v,saga:t,args:p})),c){var y=yt.apply(void 0,c);A=function(e){return function(t,r,n){return y((function(t){return e(t,r,n)}))(t)}}}else A=Jf;var S={channel:n,dispatch:rE(i),getState:o,sagaMonitor:l,onError:u,finalizeRunEffect:A};return jt((function(){var e=er(S,E,s,v,Ot(t),!0,void 0);return l&&l.effectResolved(v,e),e}))}function rr(e){return Kf(e)?"channel":Gf(e)?String(e):Ff(e)?e.name:String(e)}function nr(e,t,r){function n(t,r){if(s===bE)return PE(t);if(r&&!o)throw s=bE,r;i&&i(t);var n=r?e[o](r):e[s]();return s=n.nextState,a=n.effect,i=n.stateUpdater,o=n.errorState,s===bE?PE(t):a}var i,o,a,s=t;return Tt(n,(function(e){return n(null,e)}),r)}function ir(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a={done:!1,value:It(e)},s=function(e){return{done:!1,value:Mt.apply(void 0,[t].concat(n,[e]))}},l=function(e){return o=e};return nr({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeEvery("+rr(e)+", "+t.name+")")}function or(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a,s={done:!1,value:It(e)},l=function(e){return{done:!1,value:Mt.apply(void 0,[t].concat(n,[e]))}},c=function(e){return{done:!1,value:Vt(e)}},d=function(e){return o=e},u=function(e){return a=e};return nr({q1:function(){return{nextState:"q2",effect:s,stateUpdater:u}},q2:function(){return o?{nextState:"q3",effect:c(o)}:{nextState:"q1",effect:l(a),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:l(a),stateUpdater:d}}},"q1","takeLatest("+rr(e)+", "+t.name+")")}function ar(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a={done:!1,value:It(e)},s=function(e){return{done:!1,value:Lt.apply(void 0,[t].concat(n,[e]))}},l=function(e){return o=e};return nr({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeLeading("+rr(e)+", "+t.name+")")}function sr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Mt.apply(void 0,[ir,e,t].concat(n))}function lr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Mt.apply(void 0,[or,e,t].concat(n))}function cr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Mt.apply(void 0,[ar,e,t].concat(n))}function dr(e,t){return e.volume===t.volume&&e.muted===t.muted}function ur(e,t){return{reason:e,details:t,getElapsedTime:I()}}function*hr(e){const{ad:{adInfo:t}}=yield Ut();t||(yield Lt(e.publicApi.updateVideoControllerNativeControlsVisibility))}function*pr(e){const t=function(e){const{ad:{nextAdInfo:t},controller:{videoType:r}}=e;if(void 0!==t&&("postroll"!==t.adBreakType||r===Ed.VOD))return Y(t.remainingTime)}(yield Ut());yield Lt(e.onNextAdRemainingTimeChange,t)}function*fr(e){let{payload:{cueId:t,start:r,end:n}}=e;const{ad:{originalBroadcastAdCues:i}}=yield Ut(),o=GA(i),a=o[t]||{start:r,end:n};void 0!==r&&(a.start=r),void 0!==n&&(a.end=n),o[t]=a,yield Ct(Xu(o))}function Er(e,t,r){return e.replace(new RegExp("{{"+t+"}}","gm"),encodeURIComponent(r))}function Ar(e){return QA.indexOf(Object(Ll.g)(e).hostname)>-1}function vr(e){const t=function(e){return Ar(e)&&Object(Ll.g)(e).pathname.slice(1).split("/")[1]||""}(e);return{channel:t,metaInfoUrl:"https://strm.yandex.net/kal/"+t+"/break/last?start_ts={{video-timestamp}}"}}function*yr(e,t,r){yield lE(qA);const n=yield Ut(),{ad:{adInfo:i},controller:{stream:o}}=n,a=function(e){const{controller:{stream:t}}=e;if(t)return void 0!==t.metaInfoUrl?t.metaInfoUrl:Ar(t.url)?vr(t.url).metaInfoUrl:void 0}(n);if(!i||!me(i)||i.params.startTimestamp!==e.params.startTimestamp||!o||!a)return;const{startProgramDateTime:s,startVideoTime:l,startTimestamp:c}=i.params,d=Ad(s,l),u=Ad(d,zA),h=Math.round(1e3*(d+(Date.now()/1e3-c))),p=Er(a,"video-timestamp",String(h));let f;try{f=yield t({method:"GET",url:p})}catch(e){return r.onError(new Ou({code:Qd.META_INFO_REQUEST_FAILED,details:{url:p},fatal:!1})),void(yield Ct(qu({end:u,cueId:i.params.cueId})))}const E=function(e){try{return Object(Bl.a)(e)?JSON.parse(e):void 0}catch(e){return}}(f.responseText);if(!Object(kl.a)(E))return;const{cutoff:A,cue_id:v}=E;if(v!==i.params.cueId)return;const y=b(A)?Sd(Ad(h,A),1e3):u;yield Ct(qu({end:y,cueId:v})),yield yr(e,t,r)}function*Sr(e,t){let{payload:r}=t;const{ad:{adInfo:n}}=yield Ut();yield Ct(Ku(r)),n&&r&&n.adType!==r.adType?(yield Lt(e.onAdStateChange,{state:WA.NOT_PLAYING,type:n.adType,adParams:{}}),yield Lt(e.onAdStateChange,{state:WA.PLAYING,type:r.adType,adParams:{}})):n&&!r?yield Lt(e.onAdStateChange,{state:WA.NOT_PLAYING,type:n.adType,adParams:{}}):!n&&r&&(yield Lt(e.onAdStateChange,{state:WA.PLAYING,type:r.adType,adParams:{}})),void 0!==r&&me(r)&&(yield yr(r,dt,e))}function*gr(e){const t=yield Ut(),{ad:{adInfo:r,originalBroadcastAdCueId:n},controller:{watchedTime:i}}=t,o=Re(t);if(o&&me(r)){const n=Te(t,o);if(n){const{startProgramDateTime:t,startVideoTime:i,startTimestamp:o}=r.params,a=n.end+Xp,s=vd(Sd(Date.now(),1e3),o),l=Ad(t,i);if(a<Ad(s,l)){const t={utc:Ad(l,s),videoTime:b(i)?Ad(i,s):void 0};return void e.publicApi.stopAd({stopAdReason:Iu.CutOff,data:{loadPositionAfterAd:t}})}}}if(o===n)return;yield Ct(Gu(o));let a;void 0!==o?JA=i:a=vd(i,JA),yield Lt(e.onOriginalBroadcastAdStateChange,{cueId:o,originalBroadcastAdDuration:a})}function*mr(e){const{externalPlayback:{playerListStatus:t}}=yield Ut();if(t!==Id.CLOSED)return e.logEvent({event:Pu.ExternalPlaybackCloseButtonClick,params:{}}),void(yield Ct(VE(Id.CLOSED)));e.logEvent({event:Pu.ExternalPlaybackOpenButtonClick,params:{}}),yield Lt(e.publicApi.pause),yield Ct(UE())}function*Tr(e){let{payload:t}=e;yield Ct(BE(t))}function*Rr(){yield Ct(VE(Id.CLOSED))}function*_r(){yield Ct(UE())}function*Or(e){let{payload:t}=e;t!==fd.PAUSE&&(yield Ct(VE(Id.CLOSED)),yield Ct(GE(!1)))}function*Pr(){const{activity:e}=yield wt({timeout:lE($A),activity:It(VE)});if(e)return;const{timeout:t}=yield wt({timeout:lE(ZA-$A),activity:It(DE)});t&&(yield Ct(VE(Id.CLOSED)))}function*br(e,t){let{payload:r}=t;r&&(yield lE(ev),e.logEvent({event:Pu.ExternalPlaybackCsrfTokenExpired,params:{}}),yield Ct(kE(void 0)))}function*Ir(){let e=!1;do{const{payload:t}=yield It(op);e=t}while(!e);const{externalPlayback:{playerListStatus:t}}=yield Ut();t!==Id.CLOSED&&(yield Ct(UE()))}function Cr(){return(Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function*Nr(e){const{externalPlayback:{playerCsrfToken:t}}=yield Ut();if(t)return;const r=e.publicApi.getExternalRequestController();try{const{promise:t,abort:n}=rv(r);e.logEvent({event:Pu.ExternalPlaybackPlayerCsrfFetching,params:{}}),t[Of]=n;const{token:i}=yield t;yield Ct(kE(i)),e.logEvent({event:Pu.ExternalPlaybackPlayerCsrfFetchSuccess,params:{}}),yield Ct(ME())}catch(t){e.logEvent({event:Pu.ExternalPlaybackPlayerCsrfFetchError,params:{}})}}function*wr(e,t){let{payload:r}=t;const{controller:{currentTime:n},externalPlayback:{externalPlayerConfig:i}}=yield Ut();yield Ct(KE({id:r,status:tv.ATTEMPT})),e.logEvent({event:Pu.ExternalPlaybackPlayerActivate,params:{}});const o=e.publicApi.getExternalRequestController(),a=yield function*(e){yield Nr(e);const{externalPlayback:{playerCsrfToken:t}}=yield Ut();return t}(e);try{const{promise:t,abort:s}=ov(o,{externalPlayerId:r,startPosition:n,config:i},a);t[Of]=s,yield t,yield Ct(KE({id:r,status:tv.PLAYING})),yield Ct(GE(!0)),yield Ct(VE(Id.CLOSED)),e.logEvent({event:Pu.ExternalPlaybackPlayerActivateSucceed,params:{}})}catch(t){yield Ct(KE({id:r,status:tv.ERROR})),yield Ct(kE(void 0)),e.logEvent({event:Pu.ExternalPlaybackPlayerActivateFailed,params:{}})}}function Dr(e){return e.externalPlayback.playerListStatus}function Lr(e,t){return function(e,t){return e.status===t.status?0:e.status===tv.OFFLINE?1:-1}(e,t)||function(e,t){return String.prototype.localeCompare.call(e.name,t.name)}(e,t)}function*kr(e){const t=yield Ut();yield Ct(VE(Id.LOADING));let r=!1;yield Ct(LE());const n=e.publicApi.getExternalRequestController();try{if(0===t.externalPlayback.playerList.length){r=!0,e.logEvent({event:Pu.ExternalPlaybackPlayerListFetching,params:{cachedList:r}});const t=yield function*(e){const{promise:t,abort:r}=nv(e);return t[Of]=r,yield t}(n);if(e.logEvent({event:Pu.ExternalPlaybackPlayerListFetchSuccess,params:{cachedList:r}}),!t.length)return yield Ct(HE([])),void(yield Ct(VE(Id.IDLE)));e.logEvent({event:Pu.ExternalPlaybackPlayerListHasAnyDevice,params:{}})}r=!1,e.logEvent({event:Pu.ExternalPlaybackPlayerListFetching,params:{cachedList:r}});const i=yield function*(e){const{promise:t,abort:r}=iv(e);return t[Of]=r,yield t}(n);yield Ct(HE(i.filter(e=>e.screen_capable).map(e=>({id:e.id,name:e.name,status:e.online?tv.IDLE:tv.OFFLINE})).sort(Lr)));(yield Ut(Dr))!==Id.CLOSED&&(yield Ct(VE(Id.IDLE))),e.logEvent({event:Pu.ExternalPlaybackPlayerListFetchSuccess,params:{cachedList:r}})}catch(t){const n=yield Ut(Dr),i=function(e){return e.status&&403!==e.status?401===e.status?Id.UNKNOWN_USER:Id.ERROR:Id.ACCESS_ERROR}(t);n!==Id.CLOSED&&(yield Ct(VE(i)),i===Id.UNKNOWN_USER&&(yield Ct(WE()))),e.logEvent({event:Pu.ExternalPlaybackPlayerListFetchError,params:{cachedList:r,status:t.status||0}})}}function*Mr(e){let{payload:t}=e;if(1!==t.length)return;const[r]=t;r.status===tv.IDLE&&(yield Ct(BE(r.id)))}function*Vr(e){yield Ct(NE(ee(e.payload)))}function Ur(e,t){return e.map(e=>({adViewer:e,additionalData:{},adType:t}))}function Fr(e,t){return'<?xml version="1.0" encoding="utf-8"?>\n    <VAST version="2.0">\n        <Ad id="0">\n            <InLine>\n                <AdSystem>Ether</AdSystem>\n                <AdTitle>Promo</AdTitle>\n                <Creatives>\n                    <Creative id="0">\n                        '+function(e,t){if("VPAID"===e.type){const r='\n            <MediaFiles>\n                <MediaFile width="0" height="0" delivery="progressive" type="application/javascript" apiFramework="VPAID">\n                    <![CDATA['+e.url+"]]>\n                </MediaFile>\n            </MediaFiles>\n            <AdParameters>\n                <![CDATA["+e.adParameters+"]]>\n            </AdParameters>";return t?'<NonLinearAds>\n                <NonLinear apiFramework="VPAID" width="300" height="60" id="overlay-1">'+r+"</NonLinear>\n            </NonLinearAds>":'<Linear skipoffset="00:00:05">\n                <Duration>00:00:03</Duration>\n                '+r+"\n            </Linear>"}return t?'<NonLinearAds>\n            <NonLinear apiFramework="VPAID" width="300" height="60" id="overlay-1">\n                <StaticResource creativeType="application/javascript"><![CDATA[https://yastatic.net/awaps-ad-sdk-js/1_0/overlay_creative.js]]></StaticResource>\n                <AdParameters>\n                    <![CDATA[{ "mediaFiles": [{"type": "overlay-creative/javascript", "url": "'+e.url+'"}]}]]>\n                </AdParameters>\n            </NonLinear>\n        </NonLinearAds>':'<Linear skipoffset="00:00:05">\n            <Duration>00:00:03</Duration>\n            <AdParameters><![CDATA[{"mediaFiles": [{"type": "motion-creative/javascript","url": "'+e.url+'"}],"adParameters": {}}]]></AdParameters>\n            <MediaFiles>\n                <MediaFile height="0" width="0" type="application/x-javascript" apiFramework="VPAID"><![CDATA[https://yastatic.net/awaps-ad-sdk-js/1_0/ad_creative.js]]></MediaFile>\n            </MediaFiles>\n        </Linear>'}(e,t)+"\n                    </Creative>\n                </Creatives>\n        </InLine>\n        </Ad>\n    </VAST>"}async function xr(e,t){const{AdLoader:r}=await st(),n=e===bu.overlaySelfPromo,i=t.map(async t=>(await r.create({adBreakType:av[e],vast:Fr(t,n)})).loadAd());return Promise.all(i)}function Hr(e){const{adInfo:t}=e.ad;return t&&t.adType}function*jr(e){const t=yield Ut(),{ad:{adSessionWatchedTime:r},controller:{currentTimeLowGranularity:n,duration:i,videoType:o,watchedTime:a,sourceParams:{promoConfig:s={}}={}},skin:{nativeControlsVisibility:l}}=t;if(isNaN(i))return;const c=Hr(t),d=e.publicApi.getMultiroll(),u={watchedTime:r,sourceWatchedTime:a,currentTime:n,duration:i,videoType:o||Ed.VOD},h=yield d.midroll.loadViewers(u),p=d.getNextAdInfo(u);if(yield Ct(rh(p)),h.length>0)return c===bu.overlay&&e.publicApi.stopAd({stopAdReason:Iu.AdTypeChange,data:{loadPositionAfterAd:{},adType:bu.midroll}}),void(yield e.publicApi.playAdViewers(bu.midroll,Ur(h,bu.midroll),{}));if(l)return;const f=yield d.overlay.loadViewers(u);if(f.length>0)return void 0!==c&&c!==bu.overlay?void f.forEach(e=>{e.preventPlaying("PriorityAdIsAlreadyPlaying",{adTypeBefore:lv(c),adTypeAfter:"overlay"})}):(e.publicApi.stopAd({stopAdReason:Iu.AdTypeChange,data:{loadPositionAfterAd:{},adType:bu.overlay}}),void e.publicApi.playAdViewers(bu.overlay,Ur(f,bu.overlay),{}));if(void 0!==c||void 0!==p&&p.remainingTime<=10)return;const E=cv.requestCreative({watchedTime:a,promoConfig:s});if(void 0===E)return;const A=yield xr(bu.overlaySelfPromo,[E]);e.publicApi.playAdViewers(bu.overlay,Ur(A,bu.overlaySelfPromo),{}).then(()=>cv.onCreativeFinished(e.publicApi.getWatchedTime()))}function Br(e){let{ad:t}=e;const{adInfo:r}=t;return void 0!==r}function*Yr(e){const t=yield Ut(),{controller:{playingState:r},skin:{nativeControlsVisibility:n,handleVideoTagClickWhenHidingNativeControls:i}}=t;if(!i||n||Br(t))return;let o;r===fd.PLAY?(o=dv.PAUSE,yield Lt(e.publicApi.pause)):(o=dv.PLAY,yield Lt(e.publicApi.play)),yield Lt(e.onUserAction,{name:"PLAY_BUTTON_CLICK",data:{state:o}})}async function Kr(e){await dt({method:"GET",url:e,withCredentials:!1,timeout:uv})}function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wr(e){const t=pv[e];if(t)return t;hv.href=e;let r=hv.pathname||"";"/"!==r.charAt(0)&&(r="/"+r);const n={href:hv.href,protocol:hv.protocol,host:hv.host,hostname:hv.hostname,port:hv.port,pathname:r,search:hv.search,hash:hv.hash,baseDomain:(hv.hostname||"").split(".").slice(-2).join(".")};return pv[e]=n,Gr({},n)}function Xr(e,t,r){if(void 0===t)return e;{if(void 0===r)return e;const n=encodeURIComponent(t)+"="+encodeURIComponent(r);return hv.href=e,hv.hash=hv.hash?hv.hash+"&"+n:"#"+n,hv.href}}function qr(e,t){if(-1===e.indexOf("?"))return e;hv.href=e;const r=zr(hv.search.slice(1),t);return hv.search=r?"?"+r:"",hv.href}function Qr(e,t){if(-1===e.indexOf("#"))return e;hv.href=e;const r=zr(hv.hash.slice(1),t);return hv.hash=r?"#"+r:"",hv.href}function zr(e,t){return e.split("&").filter(e=>e!==t&&0!==e.indexOf(t+"=")).join("&")}function Jr(e){if(!Ar(e))return;const{protocol:t,host:r}=Wr(e);return t+"//"+r+"/ping"}function $r(e,t){const r=e.publicApi.getRecoverHelper();r&&r.planTask(()=>e.publicApi.recoverStream(),t)}function*Zr(e,t){void 0===t&&(t=fv);const r=yield Ut(),{controller:{stream:n}}=r;if(!n)return;const i=function(e){const t=Jr(e);if(!t)return;const r=""+Date.now()+Math.round(1e3*Math.random());return Object(Ll.a)(t,"r",r)}(n.url);if(!i)return;let o=!1;for(;!1===o;){yield Lt(()=>Wc(t).promise);try{yield Lt(Kr,i),o=!0}catch(e){}}yield Ct(bh(!0)),yield $r(e,Ev)}function*en(e){yield Ct(PA()),yield Lt(e.publicApi.seek,{utc:Y(0),videoTime:Y(0)}),yield Lt(e.publicApi.play)}function*tn(e,t){let{payload:r}=t;const n=Av.internalToPublic(r);yield Lt(e.publicApi.setVolume,r),r>0&&(yield Lt(e.publicApi.setMuted,!1)),yield kt(e,e.onUserAction,[{name:"VOLUME_CHANGE",data:{volume:n}}])}function rn(e){return e.sharing.html}function nn(e){const{link:t}=e.sharing;return function(e,t){if(void 0!==e)return Er(e,"from_block",t)}(t,gv.CONTEXT_MENU)}function on(e){const t=nn(e),r=function(e){const t=Boolean(nn(e)),r=function(e){return e.controller.videoType}(e),n=r===Ed.VOD||r===Ed.EVENT;return t&&n}(e);if(!t||!r)return;const n=Math.floor(e.controller.currentTimeLowGranularity);return Object(Ll.a)(t,"t",String(n))}function an(e){return e.controller.vsid}function*sn(e,t){let{payload:r}=t;switch(yield Ct(_p(!1)),r){case vv.COPY_LINK:yield function*(){const e=yield Ut(nn);e&&(yield Lt(Sv.a,e))}();break;case vv.COPY_LINK_WITH_TIME:yield function*(){const e=yield Ut(on);e&&(yield Lt(Sv.a,e))}();break;case vv.COPY_HTML:yield function*(){const e=yield Ut(rn);e&&(yield Lt(Sv.a,e))}();break;case vv.COPY_VSID:yield function*(){const e=yield Ut(an);yield Lt(Sv.a,e)}()}yield Lt(e.onUserAction,{name:r,data:void 0})}function*ln(e){yield Ct(PA()),yield Lt(e.publicApi.play)}function*cn(){const e=yield Ut(),{settingsVisible:t}=e.skin;yield Ct(Sp(t))}function*dn(e,t){let{payload:r}=t;yield kt(e,e.onUserAction,[{name:"FINISH_CHANGE_VOLUME",data:{volume:Av.internalToPublic(r)}}]),0!==r&&(yield Ct(hh(r)))}function un(e){const{controller:{dvrDuration:t}}=e,r=function(e){const{controller:{startStage:t}}=e;return t!==xA.started&&t!==xA.starting}(e);return t>0&&isFinite(t)&&!r}function*hn(){yield Ct(sA(!0)),yield Ct(IA())}function*pn(e){let{payload:{reason:t,step:r}}=e;const n=yield Ut(),{controller:{currentTime:i},skin:{skinDVRStartTime:o,skinDVRDuration:a,seeking:s}}=n,l=Y(r>0?Math.min(i+r,o+a):Math.max(i+r,o));(r>0?l>i:l<i)&&(s||(yield Ct(eA())),yield Ct(ZE({videoPosition:l,step:r,reason:t})))}function*fn(e,t){let{payload:r}=t;const n=yield Ut(),{controller:{volume:i,muted:o},skin:{hiddenControls:a}}=n;switch(r){case hu.ArrowLeft:un(n)&&!a.includes(Od.TIMELINE)&&(yield Lt(pn,{payload:{reason:Nd.KEYBOARD,step:Y(-mv),videoPosition:Y(0)}}),yield hn());break;case hu.ArrowRight:un(n)&&!a.includes(Od.TIMELINE)&&(yield Lt(pn,{payload:{reason:Nd.KEYBOARD,step:mv,videoPosition:Y(0)}}),yield hn());break;case hu.ArrowDown:a.includes(Od.VOLUME)||(!o&&i>0&&(yield Ct(QE(Number(Math.max(i-.2,0).toFixed(1))))),yield hn());break;case hu.ArrowUp:a.includes(Od.VOLUME)||((o||i<1)&&(yield Ct(QE(o?.2:Number(Math.min(i+.2,1).toFixed(1))))),yield hn())}}function*En(e,t){let{payload:r}=t;const n=yield Ut(),{controller:{volume:i,muted:o},skin:{hiddenControls:a,contextMenuVisibility:s,settingsVisible:l}}=n;switch(r){case hu.ArrowLeft:case hu.ArrowRight:un(n)&&!a.includes(Od.TIMELINE)&&(yield Ct(tA()));break;case hu.Space:yield Ct(EA());break;case hu.ArrowDown:case hu.ArrowUp:a.includes(Od.VOLUME)||(yield Ct(JE(o?0:i)));break;case hu.KeyF:a.includes(Od.FULLSCREEN)||(yield Ct(iA()));break;case hu.Escape:l&&(yield Ct(yp(!1))),s&&(yield Ct(_p(!1)))}}function An(e,t){let{payload:r}=t;e.logEvent(r)}function*vn(e,t){let{payload:r}=t;r||(yield Ct(gp(Tv.INDEX)))}function*yn(){yield Ct(cA(!0)),yield lE(Rv),yield Ct(cA(!1))}function*Sn(){const{skin:{mouseMotionlessTimeoutId:e},controller:{isFullscreen:t}}=yield Ut();e>0&&window.clearTimeout(e);const{timeoutId:r,promise:n}=Wc(t?_v:Rv);yield Ct(uA(r)),yield Ct(dA(!1)),yield n,yield Ct(aA())}function*gn(e){const{controller:{volume:t,muted:r}}=yield Ut(),n=!r;yield Lt(e.publicApi.setMuted,n),yield kt(e,e.onUserAction,[{name:"VOLUME_CHANGE",data:{volume:Av.internalToPublic(n?0:t)}}])}function*mn(e){const t=yield Ut(),{skin:{hiddenControls:r}}=t;yield Lt(e.publicApi.setHiddenControls,r)}function*Tn(e){const{controller:{autoplay:t}}=yield Ut();t&&(yield Nt([Ct(ih(!1)),Lt(e.publicApi.play)]))}function Rn(e,t){let{name:r,lang:n}=t;const i=e.find(e=>e.name===r);return i||(n?e.find(e=>e.lang===n):void 0)}function*_n(e){const{controller:{textTrackValue:t,textTracks:r,userTextTrackName:n,userTextTrackLang:i}}=yield Ut();if(t)return void(yield Lt(e.publicApi.setTextTrack,t));const o=Rn(r,{name:n,lang:i})||function(e){if(0===e.length)return;const t=function(e,t){if("string"!==typeof t)return;const r=t.split("-")[0].toLowerCase();for(let t=0;t<e.length;t++){const n=e[t];if(n.name.toLowerCase()===r)return n}}(e,navigator.language);return void 0!==t?t:e[0]}(r);void 0===o?xd.error("No text tracks to enable"):yield Lt(e.publicApi.setTextTrack,o.value)}function On(e){let{ad:t}=e;const{adInfo:r}=t;if(void 0===r)return!1;const{adType:n}=r;return n!==bu.overlay}function*Pn(e,t){let{payload:r}=t;const{controller:{playingState:n,watchedTime:i}}=yield Ut();if(n===r||n===fd.END&&r===fd.PAUSE)return;if(r===fd.BUFFERING)return void(yield function*(){yield Ct(Ah(fd.BUFFERING)),yield lE(_d);const{controller:{playingState:e}}=yield Ut();yield Ct(Ap(e===fd.BUFFERING))}());if(n===fd.BUFFERING&&(yield function*(e){yield Ct(Ap(!1)),e===fd.PLAY&&(yield Ct(sp(ur(jA.Other,void 0))))}(r)),n===fd.BUFFERING&&r===fd.PAUSE&&0===i||(yield Ct(oh(xA.started))),r===fd.PLAY&&(yield Ct(Ap(!1))),r!==fd.END)return void(yield Ct(Ah(r)));const o=yield Ut(),{ad:{adInfo:a}}=o;On(o)?xd.log("putPlayingState("+fd.END+") has not been dispatched because ad("+(a&&a.adType)+") is playing"):yield function*(e){const t=e.publicApi.getMultiroll(),r=yield t.postroll.loadViewers({});r.length>0&&(e.publicApi.stopAd({stopAdReason:Iu.AdTypeChange,data:{loadPositionAfterAd:{},adType:bu.postroll}}),yield e.publicApi.playAdViewers(bu.postroll,Ur(r,bu.postroll),{})),yield Ct(Ah(fd.END)),e.publicApi.stop()}(e)}function*bn(e,t){let{payload:r}=t;yield Lt(e.onAdblockDetected,r)}function*In(e,t){let{payload:r}=t;yield kt(e,e.onAudioTracksChange,[r])}function Cn(e){const{audioTrackValue:t,audioTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function*Nn(e,t){let{payload:r}=t;const n=yield Ut();yield Lt(e.onAudioTrackChange,Cn(n))}function*wn(e,t){let{payload:r}=t;yield Lt(e.onBufferingRangesChange,r)}function*Dn(e,t){let{payload:r}=t;yield Lt(e.onErrorScreenVisibilityChange,!r)}function Ln(e){return Y("number"!==typeof(t=Math.floor(2*e)/2)||isNaN(t)||!isFinite(t)?0:t);var t}function kn(e){const{controller:{currentTime:t},skin:{skinDVRStartTime:r,skinDVRDuration:n}}=e;return n===1/0||t>r+n-Ov}function*Mn(e){const t=yield Ut(),{controller:{videoType:r,playbackRate:n}}=t;r!==Ed.VOD&&(Br(t)||(n>1?kn(t)&&e.publicApi.setPlaybackRate(1):function(e){const{controller:{videoType:t}}=e;if(t!==Ed.LIVE)return!1;const{controller:{currentTime:r},skin:{skinDVRStartTime:n}}=e;return n+(0===r?0:Ov)>r}(t)&&e.publicApi.setPlaybackRate(1)))}function Vn(e){let{ad:{adInfo:t}}=e;return void 0!==t&&Pv.includes(t.adType)}function*Un(){const{ad:{adSessionWatchedTime:e,watchedTimeSinceAd:t=Y(0)},controller:{currentTime:r,playingState:n,watchedTime:i,playbackRate:o,sourceId:a}}=yield Ut();if(Iv!==a&&(bv=void 0,Iv=a),void 0!==bv){const n=function(e,t){const r=0<=e&&e<=t+.5?e:t;return Y(Math.max(0,r))}(Sd(vd(r,bv.videoTime),o),Sd(bv.getElapsedTime(),1e3));yield Ct(cp(Ad(i,n))),yield Ct(dp(Ad(t,n))),yield Ct(up(Ad(e,n)))}const s=yield Ut(Vn);bv=n!==fd.PLAY||s?void 0:{getElapsedTime:I(),videoTime:r}}function*Fn(e,t){let{payload:r}=t;yield Un(),yield Mn(e),yield kt(e,e.onCurrentTimeChange,[r]),yield Ct(yh(Ln(r)))}function*xn(e,t){let{payload:r}=t;yield Lt(e.onDurationChange,r)}function Hn(e){switch(e.controller.engine){case Cv.NATIVE:case Cv.YANDEX:case Cv.MP4:return!0;case Cv.HLS:case Cv.MPD:case void 0:default:return!1}}function*jn(e){let{payload:t}=e;const{controller:{engine:r,videoType:n,fragmentDuration:i,liveOffset:o}}=yield Ut(),a=yield Ut(Hn),s=r===Cv.HLS?o:Y(0),l=n===Ed.LIVE?Ad(a?Y(0):yd(1,i),s):s,c=void 0===n||n===Ed.VOD?t:vd(t,l);yield Ct(kh(c))}function*Bn(e){let{payload:t}=e;const{controller:{videoType:r,fragmentDuration:n}}=yield Ut(),i=yield Ut(Hn),o=r===Ed.LIVE?Ad(i?Y(0):yd(n,1),t):Y(0);yield Ct(Lh(o))}function*Yn(){const{controller:{encoderState:e}}=yield Ut();e===HA.Attached&&(yield Ct(lh()))}function*Kn(e,t){const{error:r}=t.payload;if(void 0===r)return;const{code:n,isFatal:i,details:o}=r;i?(xd.error(n,o),yield Ct(_p(!1)),yield Lt(e.publicApi.setFullscreen,!1)):xd.warn(n,o),yield Lt(e.onError,r)}function*Gn(e){let{payload:t}=e;const{controller:{videoTrackValue:r}}=yield Ut();yield Ct(jh({videoTrackValue:r,isAbrEnabled:t}))}function*Wn(e,t){let{payload:r}=t;yield Lt(e.onFullScreenChange,r)}function*Xn(e,t){let{payload:r}=t;yield Lt(e.onNetworkStatusChange,{isOnline:r})}function qn(e){if(void 0===e)return;const t=Object(Nv.estimateConnection)(e,te(),{disable:!0});return t&&b(t.score)&&b(t.quality)?t:void 0}function*Qn(e,t){let{payload:r}=t;const n=r?yield Lt(qn,r):void 0;yield Lt(e.onNetworkScoreChange,n),yield Ct(Dp(n))}function*zn(e,t){let{payload:r}=t;yield Lt(e.onPlaybackRateChange,r)}function Jn(e){return"https://"+e+"/ping?r="+Object(Nc.a)(12)}function $n(e){return Jn(Wr(e).hostname)}function Zn(e){return e.map(e=>e&&e.name||"").filter(e=>{return wv.includes(Object(Ll.c)(e))&&(t=Object(Ll.g)(e).hostname,(r=".strm.yandex.net")===t.substring(t.length-r.length));var t,r})}function ei(e,t){return e.find(e=>{let{start:r,end:n}=e;return r<=t&&t<=n})}function ti(e,t){const r=ei(e,t);return void 0===r?void 0:vd(r.end,t)}function ri(e){const{currentTime:t,bufferingRanges:r}=e.controller;return ti(r,t)}function*ni(e){const t=yield Ut();if(!function(e){return(ri(e)||0)<Mv}(t))return;if(e.publicApi.getConnectionQuality()!==Lv.OK)return;if(On(t))return;const{bufferingRanges:r,stream:n}=t.controller;if(0===r.length)return;if(!n)return;const i=Jr(n.url);if(!i)return;const{resourceTimings:o}=e.publicApi.getDebugInfo(),a=function(e){const t=Zn(e);if(0===t.length)return[];const[r,n]=be(t,e=>Object(Ll.d)(e).includes("audio")),i=n[n.length-1],o=r[r.length-1],a=[];return i&&a.push($n(i)),o&&a.push($n(o)),a}(o),{controller:{isOnline:s}}=yield Ut();if(!s)return;const l=Object(Ll.a)(i,"r",Date.now().toString()),c=a.map(e=>Object(Ll.a)(e,"r",Date.now().toString()));if(a.length<=0)return;const d=Kr(l),u={reason:"ChunkServerIsNotAvailable",delay:new Promise(e=>{d.then(()=>{Promise.all(c.map(Kr)).catch(e)}).catch(rc.a)}),rawData:0};yield $r(e,u)}function*ii(e){const{controller:{playingState:t},ad:{inStreamPlayingState:r}}=yield Ut();t===fd.BUFFERING&&(yield ni(e),yield function*(e){const t=yield Ut(),{controller:{isOnline:r,stream:n}}=t;if(!r){const t={reason:"recoverStreamIfIsOffline",delay:0,rawData:0};yield $r(e,t)}}(e)),yield Un(),void 0===r||r===fd.END?yield Lt(e.onStateChange,t):yield Lt(e.onStateChange,r)}function*oi(e,t){let{payload:r}=t;r&&(yield Lt(e.onResourcesIdle),e.logEvent({event:Pu.ResourcesIdle,params:{}}))}function*ai(e,t){let{payload:r}=t;yield Lt(e.onStartStageChange,r)}function*si(e,t){let{payload:r}=t;yield Lt(e.onChangeStream,r)}function*li(e,t){let{payload:r}=t;yield Lt(e.onStreamsWithSupportInfoChange,r)}function*ci(e,t){let{payload:r}=t;yield kt(e,e.onSubtitlesChange,[r])}function*di(e,t){let{payload:r}=t;yield kt(e,e.onTextTracksChange,[r])}function*ui(e,t){let{payload:r}=t;yield Lt(e.onThumbnailTileGeneralMetaInfoChange,r)}function*hi(e,t){let{payload:r}=t;yield Lt(e.onVideoReadyStateChange,r)}function*pi(e,t){let{payload:r}=t;yield Lt(e.onVideoSizeChange,r)}function fi(){return(fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ei(e){const{videoTrackValue:t,videoTracks:r,isAbrEnabled:n}=e.controller,i=r.find(e=>{let{value:r}=e;return r===t});if(i)return fi({},i,{auto:n})}function*Ai(e,t){yield lE(0),yield Lt(e.onVideoTrackChange,yield Ut(Ei))}function*vi(e,t){let{payload:r}=t;yield kt(e,e.onVideoTracksChange,[r])}function*yi(e,t){let{payload:r}=t;yield Lt(e.onVideoTypeChange,r)}function*Si(e,t){let{payload:{volume:r,muted:n,changeReason:i}}=t;yield Lt(e.onVolumeChange,{volume:Av.internalToPublic(r),muted:n,changeReason:i}),i!==Vv.RequestAutoplaySettings&&(yield Ct(bp()))}function gi(e,t){void 0===t&&(t=window);const r=Object(Sl.a)(t),n=new RegExp("\\b"+e+"/((?:\\d+)(?:\\.\\d+)*)\\b","i"),i=r.match(n);if(i)return i[1].split(".").map(e=>parseInt(e,10))}function mi(e){const t=Object(Sl.a)(e).match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2],10):-1}function Ti(){return!0}function Ri(e){const{controller:{isFullscreen:t},skin:{useNativeControls:r,useNativeFullscreen:n}}=e;return r||t&&n}function*_i(e){const t=yield Ut(),{skin:{nativeControlsVisibility:r},controller:{textTrackEnabled:n,nativeTextTrackVisible:i,isPip:o}}=t,a=(void 0===i?yield Lt(Ti):i)||o||Boolean(r&&Ri(t)&&n);yield Lt(e.publicApi.toggleNativeSubtitles,a)}function*Oi(e){let{payload:t}=e;t!==fd.PAUSE&&(yield Ct(ap(!1)))}function Pi(e){const{textTrackValue:t,textTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function*bi(e,t){let{payload:{enabled:r,textTrackValue:n}}=t;const{controller:{textTrackEnabled:i,textTrackValue:o}}=yield Ut(),a=void 0===r?i:r,s=void 0===n?o:n;yield Ct(Qh(a)),yield Ct(Jh(s));if((i?o:void 0)===(r?n:void 0))return;const l=r?Pi(yield Ut()):void 0;yield Lt(e.onTextTrackChange,l)}function Ii(e,t,r){void 0===r&&(r=md.a);let n=t;return function*(){var t;if(0===arguments.length)return;const{payload:i}=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],o=r(i,n)||Number.isNaN(i)&&Number.isNaN(n);o||(n=i,yield*e(...arguments))}}function*Ci(e){let{payload:t}=e;const{condition:r,action:n,delay:i}=t;yield lE(i),r()&&(yield Ct(n))}function Ni(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Mt((function*(){const r=yield It(e);yield Mt.call(null,t,...n.concat(r))}))}function wi(e,t){const r=function(e,t){let{controller:{volume:r,muted:n,duration:i,isAbrEnabled:o,videoTrackValue:a}}=t;const s=[],l=[sr(CE,Vr),sr(wE,mr,e),sr(jE,Tr),sr(FE,_r),sr(xE,Rr),lr(LE,Nr,e),lr(UE,kr,e),lr(HE,Mr),lr(BE,wr,e),lr(YE,Pr),lr(kE,br,e),lr(Ah,Or),lr(WE,Ir)];return[sr(DA,cn),sr(ch,Ii(Si,{volume:r,muted:n},dr),e),sr(ch,Ii(mn,{volume:r,muted:n},dr),e),sr(Ah,Ii(mn),e),sr(rp,Ii(mn),e),sr(ph,Ii(xn,i),e),sr(Eh,Ii(yi),e),sr(Np,Pn,e),sr(Ah,Ii(ii,YA.playingState),e),sr(th,Ii(ii,kA.inStreamPlayingState),e),sr(Ah,Ii(Oi,YA.playingState)),sr(th,Ii(Oi,kA.inStreamPlayingState)),Ni(Ah,Sn),sr(vh,Ii(Fn),e),sr(yp,vn,e),sr(sh,Yn),Ni(lh,Tn,e),sr(mh,Ii(si),e),sr(Oh,Ii(li),e),Ni(Dh,yn),sr(bh,Ii(Xn),e),sr(Hh,Ii(Gn,o)),sr(jh,Ii(Ai,{videoTrackValue:a,isAbrEnabled:o}),e),sr(Bh,Ii(vi),e),sr(Kh,Ii(Nn),e),sr(Gh,Ii(In),e),sr(Zh,Ii(bi),e),sr(qh,Ii(di),e),sr(ep,_n,e),sr(tp,Ii(ci),e),sr(hp,ui,e),sr(_p,Ii(Dn),e),sr(rp,Ii(Wn),e),sr(eh,Ii(Qn),e),sr(Uh,Kn,e),sr(Wu,Ii(bn),e),sr(Nh,Ii(Bn)),sr(wh,Ii(jn)),sr(Vh,Ii(wn),e),sr(oh,Ii(ai),e),sr(Mh,zn,e),sr(fh,Ii(pi),e),sr(Xh,hi,e),sr(QE,Ii(tn),e),sr(JE,Ii(dn),e),sr($E,gn,e),sr(oA,sn,e),sr(rA,fn,e),sr(nA,En,e),sr(XE,Yr,e),sr(IE,Ci),sr(Qh,_i,e),sr(np,_i,e),sr(zh,_i,e),sr(rp,Ii(_i),e),cr([up,Ah],jr,e),sr(qu,fr),sr($u,gr,e),sr(Xu,gr,e),sr(Lp,An,e),sr(Yu,Ii(Sr),e),sr(Ku,Ii(hr),e),sr(rh,Ii(pr),e),sr(_A,ln,e),sr(OA,en,e),sr(pp,Ii(oi),e),cr(qE,Zr,e),...l,...s]}(e,t),{featuresEnabled:n}=t.controller;return function*(){yield Nt(r)}}function Di(){return(Di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Li(e,t,r){const n=e[t];return(i=n)===(o=r)||Number.isNaN(i)&&Number.isNaN(o)?e:Di({},e,{[t]:r});var i,o}function ki(e){return function(t,r){return Li(t,e,r)}}function Mi(e,t){return function(r){return Li(r,e,t)}}function Vi(){return(Vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ui(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),[...e,...t]}function Fi(e,t){return void 0===e?t:void 0===t?e:{before:Ui(e.before,t.before),after:Ui(e.after,t.after)}}function xi(e,t){return void 0===t&&(t=["u","i","b"]),e.reduce((e,r)=>(r.split("\n").forEach(r=>{e.push(function(e,t){void 0===t&&(t=["u","i","b"]);const r=new RegExp("<(/)?("+t.join("|")+")>");return(e=e.replace(Hv,"")).replace(xv,e=>{if(e.match(r))return e;return""})}(r,t))}),e),[])}function Hi(e,t){return Object(cc.a)(t).reduce((e,r)=>Li(e,r,t[r]),e)}function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bi(){return(Bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yi(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Ki(e,t){if(!Object(Kv.a)(e,t))return e;return function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,[t].map(Yi))}function Gi(e,t){return function(r,n){return function(e,t,r,n){return Li(e,t,n(e,r))}(r,e,n,t)}}function Wi(){return(Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xi(e,t){const r=function(e,t){const{featuresEnabled:r}=e.controller;return{}}(e),n={},i=Object(cc.a)(r).length?ft(r):()=>n;return ft({controller:(c=e.controller,ye({},c).on(nh,ki("engine")).on(Ih,ki("fragmentDuration")).on(Nh,ki("dvrStartTime")).on(wh,ki("dvrDuration")).on(oh,ki("startStage")).on(Ch,ki("programDateTime")).on(eh,ki("lastKnownBandwidthEstimate")).on(ch,Hi).on(dh,ki("requireUserGestureToUnmute")).on(uh,ki("autoplayImpossible")).on(hh,ki("userVolume")).on(bp,Mi("wasVolumeChanged",!0)).on(ph,ki("duration")).on(fh,Hi).on(Eh,ki("videoType")).on(ih,ki("autoplay")).on(ah,ki("preload")).on(Ah,ki("playingState")).on(vh,ki("currentTime")).on(yh,ki("currentTimeLowGranularity")).on(gh,ki("from")).on(mh,ki("stream")).on(Th,ki("sourceParams")).on(Rh,e=>ji({},e,{sourceId:e.sourceId+1})).on(_h,ki("streams")).on(Oh,ki("streamsWithSupportInfo")).on(Ph,ki("startPosition")).on(Vh,ki("bufferingRanges")).on(sh,ki("encoderState")).on(xh,(e,t)=>Li(Li(e,"isAbrEnabled",e.isAbrEnabled&&t),"isAbrSupported",t)).on(Hh,(e,t)=>Li(e,"isAbrEnabled",t&&e.isAbrSupported)).on(Xh,ki("videoTagReadyState")).on(jh,(e,t)=>{let{videoTrackValue:r,isAbrEnabled:n}=t;return Hi(e,{videoTrackValue:r,isAbrEnabled:n&&e.isAbrSupported})}).on(Yh,(e,t)=>{let{name:r,height:n}=t;return Hi(e,{userVideoTrackName:r,userVideoTrackHeight:n})}).on(Bh,ki("videoTracks")).on(Kh,ki("audioTrackValue")).on(Gh,ki("audioTracks")).on(Wh,(e,t)=>{let{name:r,lang:n}=t;return Li(Li(e,"userAudioTrackName",r),"userAudioTrackLang",n)}).on(Qh,ki("textTrackEnabled")).on(zh,ki("nativeTextTrackVisible")).on(Jh,ki("textTrackValue")).on(qh,ki("textTracks")).on($h,(e,t)=>{let{enabled:r,name:n,lang:i}=t;return Hi(e,{userTextTrackEnabled:r,userTextTrackName:n,userTextTrackLang:i})}).on(tp,(e,t)=>Li(e,"subtitles",xi(t))).on(Sh,ki("videoInfo")).on(rp,ki("isFullscreen")).on(np,ki("isPip")).on(ip,ki("isVisible")).on(op,ki("isDocumentVisible")).on(ap,ki("pausedCauseVisibilityChange")).on(sp,ki("expectedStalled")).on(Uh,(e,t)=>{return!t||(r=t,!Object(cc.a)(r).length)||t.error&&t.error.isFatal?ji({},e,{errorInfo:t}):e;var r}).on(Fh,ki("lastRecoverPosition")).on(bh,ki("isOnline")).on(lp,ki("preview")).on(cp,ki("watchedTime")).on(kp,ki("featuresParams")).on(Mh,ki("playbackRate")).on(hp,ki("tileMetaInfo")).on(Cp,ki("videoElementStyle")).on(wp,(e,t)=>{if(void 0===e.sourceParams)return e;const{promoConfig:r}=e.sourceParams;return ji({},e,{sourceParams:ji({},e.sourceParams,{promoConfig:(n=r,i=t,void 0===n?i:void 0===i?n:{intro:Ui(n.intro,i.intro),preroll:Fi(n.preroll,i.preroll),midroll:Fi(n.midroll,i.midroll),postroll:Fi(n.postroll,i.postroll),inroll:Fi(n.inroll,i.inroll)})})});var n,i}).on(Dp,ki("networkScore"))),ad:(l=e.ad,ye({},l).on(th,ki("inStreamPlayingState")).on(Bu,ki("adConfig")).on(up,ki("adSessionWatchedTime")).on(Ku,ki("adInfo")).on(rh,ki("nextAdInfo")).on(Gu,ki("originalBroadcastAdCueId")).on(Xu,ki("originalBroadcastAdCues")).on(Wu,ki("adblockDetected")).on(zu,ki("hasPreroll")).on(Ju,ki("adSyncInit")).on(dp,ki("watchedTimeSinceAd")).on(Zu,ki("nativeAdControlsVisibility")).on(Qu,(e,t)=>{const r=GA(e.originalBroadcastAdCues);return delete r[t],Vi({},e,{originalBroadcastAdCues:r})})),skin:(s=e.skin,ye({},s).on(Ep,ki("hiddenControls")).on(Ap,ki("showPreloader")).on(Ip,ki("nativeControlsVisibility")).on(Tp,ki("logoConfig")).on(Op,ki("contextMenuPosition")).on(_p,Gi("contextMenuVisibility",(e,t)=>e.contextMenuVisibilityLock?e.contextMenuVisibility:t)).on(Rp,ki("contextMenuVisibilityLock")).on(Lh,ki("skinDVRStartTime")).on(kh,ki("skinDVRDuration")).on(Pp,(e,t)=>Wi({},e,{seekTapEvent:t})).on(SA,ki("useNativeSubtitles")).on(yp,ki("settingsVisible")).on(Sp,ki("settingsVisibilityBeforeDocumentClick")).on(gp,ki("settingsPage")).on(mp,e=>Wi({},e,{settingsVisible:!e.settingsVisible})).on(fA,(e,t)=>Li(e,"title",Hi(e.title,t))).on(fp,Hi).on(zE,Mi("volumeChanging",!0)).on(JE,Mi("volumeChanging",!1)).on(sA,ki("skinMouseHovered")).on(lA,ki("controlMouseHovered")).on(hA,ki("mobileBottomControlsVisibility")).on(pA,ki("mobileSkinTapped")).on(rp,Mi("controlMouseHovered",!1)).on(PA,Mi("startPositionConfirmation",void 0)).on(dA,ki("mouseMotionless")).on(eA,Mi("seeking",!0)).on(tA,Mi("seeking",!1)).on(uA,ki("mouseMotionlessTimeoutId")).on(cA,ki("skinVisibilityOnInit")).on(vA,ki("verticalTouchDistance")).on(yA,ki("horizontalTouchDistance")).on(gA,ki("timelineTouchStarted")).on(mA,(e,t)=>{let{url:r,state:n}=t;return Li(e,"timelinePreviewImages",Li(e.timelinePreviewImages,r,n))}).on(TA,(e,t)=>Li(e,"timelinePreviewImages",Ki(e.timelinePreviewImages,t))).on(RA,Mi("timelinePreviewImages",{})).on(CA,ki("logoWidget")).on(wA,(e,t)=>Li(e,"logoWidget",e.logoWidget?Li(e.logoWidget,"action",Li(e.logoWidget.action,"status",t)):void 0)).on(NA,(e,t)=>Li(e,"logoWidget",e.logoWidget?Li(e.logoWidget,"forceExpanded",t):void 0)).on(bA,ki("focusRestorationExpected"))),externalPlayback:(a=e.externalPlayback,ye({},a).on(CE,ki("externalPlayerConfig")).on(NE,ki("externalPlaybackPossible")).on(GE,ki("externalPlaybackActivatedPopupVisible")).on(VE,ki("playerListStatus")).on(kE,ki("playerCsrfToken")).on(KE,(e,t)=>{let{id:r,status:n}=t;return Li(e,"playerList",e.playerList.map(e=>e.id===r?Li(e,"status",n):e))}).on(HE,ki("playerList"))),sharing:(o=e.sharing,ye({},o).on(jv,e=>Hi(e,Bi({},Yv))).on(Bv,(e,t)=>Hi(e,t))),features:i});var o,a,s,l,c}function qi(e,t){const r=OE(),n=function(e){let t=null;return yt(e,Object(Gv.batchedSubscribe)(e=>{t||(t=Promise.resolve().then(()=>{t=null,e()}))}))}((window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||yt)(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return vt({},r,{dispatch:n=yt.apply(void 0,o)(r.dispatch)})}}}(r))),i=ht(Xi(t),n),o=wi(e,t);return r.run((function*(){for(;;)try{yield Lt(o)}catch(t){0,e.onError(new Ou(t,{code:Qd.SAGA_ERROR,isFatal:!1}))}})),i}function Qi(e){let{controller:{videoType:t,currentTime:r},skin:{skinDVRStartTime:n,skinDVRDuration:i}}=e;return function(e){let{videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i}=e;return t===Ed.VOD?Xv:i===1/0||r>n+i-Ov?Qv:t!==Ed.LIVE?Xv:n+(0===r?0:10)>r?qv:Xv}({videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i})}function zi(e){return lt(Hr(e))}function Ji(e){const t=Hr(e);return Boolean(t)&&!zi(e)}function $i(){return($i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function Zi(e,t,r){if(!function(e){return e===bu.preroll||e===bu.midroll||e===bu.postroll||e===bu.inroll}(e)||void 0===r)return t;let n=[],i=[],o=[];if(e===bu.preroll){const{intro:t=[]}=r;n=await xr(e,t)}if(t.length>0){const{[e]:{before:t=[],after:n=[]}={}}=r;i=await xr(e,t),o=await xr(e,n)}return[...Ur(n,bu.intro),...Ur(i,bu.jingle),...t,...Ur(o,bu.jingle)]}function eo(e,t){if(!e||!e.height||!e.width||!t)return"unknown";const r=t.getMaxCapAllowedVideoTrack();return r&&r.height&&r.width?r.width===e.width&&r.height===e.height?"same":r.width>e.width||r.height>e.height?"smaller":r.width<e.width||r.height<e.height?"larger":"unknown":"unknown"}function to(){return(to=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ro(e,t,r,n){void 0===n&&(n={}),Object(Yc.a)(()=>{const{additional:i={}}=n,o=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,["additional"]);window.Ya.Rum.sendTimeMark(e,t,r,to({},o,{"-additional":Fe(n)}))})}function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function io(e){const t=Be();return no({},t,{additional:no({},Object(kl.a)(t)?t.additional:void 0,e)})}function oo(e){const t=0===fy,r=Ey[e];return Ey[e]=!0,je()&&t&&!r}function ao(){oo("sourceStart")&&ro(oy.autoplayFalse)}function so(e){let{reason:t="unknown"}=e,r=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,["reason"]);oo("sourceStart")&&ro(oy.firstStartAdSDKFailed,void 0,void 0,no({reason:t},r))}function lo(){fy++,Ey.sourceStart=!1;const e=0===fy;e?ro(oy.firstLoadSource):rf=Object(gc.a)(document);try{!function(e){of=window.Ya.Rum.makeSubPage(e?"Init":"SetSource"),af++}(e);const r=Be();t=r.additional||{},Zp=t,tf=!1}catch(e){}var t}function co(e,t){if(!je()||Ey.sourceStart)return;const r=0===fy;We(r&&t?uy[e]:r?dy[e]:t?py[e]:hy[e])}function uo(e,t,r){const n=Ey.sourceStart;if(Ey.sourceStart=!0,!je()||n)return;if(0===fy){const n=r?uy[e]:dy[e];ro(r?sy[e]:ay[e],void 0,!1,{additional:t}),Xe(n,{additional:t})}else Xe(r?py[e]:hy[e],io(t))}function ho(e,t,r){oo("yaFirstFrameDecoded")&&(r&&"AD"!==e||ro(ly[e],void 0,!1,{additional:t}))}function po(e,t,r){oo("yaFirstFrameShown")&&(r&&"AD"!==e||ro(cy[e],void 0,!1,{additional:t}))}function fo(){return(fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Eo(e){return e.supported&&void 0!==e.engine}function Ao(e){return Eo(e.supportInfo)}function vo(e){return!(t=e.supportInfo).supported&&void 0!==t.noSupportReason;var t}function yo(){return(yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function So(e){const t=function(e){return e.filter(vo).map(e=>{let{supportInfo:t}=e;return t.noSupportReason})}(e),r={details:{streams:e},isFatal:!0};if(Uv(t,e=>e===Ty.NO_SUPPORTED_DRM))return new Ou(yo({},r,{code:Qd.NO_DRM}));if(Uv(t,e=>e===Ty.NO_CODECS))return new Ou(yo({},r,{code:Qd.NO_CODECS}));const n=Uv(t,e=>e===Ty.NO_MSE);return new Ou(yo({},r,n?my?{code:Qd.NO_PLAYABLE_STREAMS}:{code:Qd.NO_MSE}:{code:Qd.NO_PLAYABLE_STREAMS}))}function go(e){if(!Object(kl.a)(e))return!1;const{servers:t,advanced:r}=e;return Object(kl.a)(t)&&Object(Bl.a)(t["com.apple.fps.1_0"])&&Object(kl.a)(r)&&Object(kl.a)(r["com.apple.fps.1_0"])&&Object(Bl.a)(r["com.apple.fps.1_0"].processSPCPath)}function mo(e){return e.preferNative||Iy||Ld.a||wy.isSmartTV()&&!Rl||go(e.stream.drmConfig)?Cv.NATIVE:Cv.HLS}function To(e){const t=Object.values;if("function"===typeof t)return t(e);{const t=[];for(const r in e)Object(Kv.a)(e,r)&&t.push(e[r]);return t}}function Ro(){return(Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _o(e){if(!Vy(e))return!1;const t=Object(Qc.a)(e);if(t&&function(e){void 0===e&&(e=window);return/YandexSearch|YaSearchBrowser|YaApp_iOS|YaApp_Android/i.test(Object(Sl.a)(e))}(e))return!1;const r=function(e){return gi("YaBrowser",e)}(e);if(void 0===r)return!1;const[n,i,o,a]=r;if(n<18)return!0;if(18===n){if(i>4)return!1;if(t&&o<3)return!0;if(ne(e)&&(o<1||!a||a<=526))return!0}return!1}async function Oo(){const e=[],t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}];return await Promise.all(Yy.map(async r=>{try{await window.navigator.requestMediaKeySystemAccess(r,t),e.push(r)}catch(e){}})),e}function Po(){const e=[];return Yy.forEach(t=>{window.MSMediaKeys.isTypeSupported(t)&&e.push(t)}),e}function bo(e){let{video:t}=e;const r=[];return Yy.forEach(e=>{t.canPlayType("video/mp4",e)&&r.push(e)}),r}function Io(){const e=[];return[Vl,Ul].forEach(t=>{window.WebKitMediaKeys.isTypeSupported(t,"video/mp4")&&e.push(t)}),e}async function Co(e){return q(e.video)?{supportedDrmSystems:["com.microsoft.playready"],detectionMethod:Gy.Constant}:xy&&!(Fy||Uy||Hy||Tl)?{supportedDrmSystems:[],detectionMethod:Gy.YandexBrowserLinux}:_o()?{supportedDrmSystems:[],detectionMethod:Gy.OldYandexBrowser}:window.WebKitMediaKeys?{supportedDrmSystems:Io(),detectionMethod:Gy.WebKitMediaKeys}:"function"===typeof window.navigator.requestMediaKeySystemAccess?{supportedDrmSystems:await Oo(),detectionMethod:Gy.requestMediaKeySystemAccess}:"function"===typeof window.MSMediaKeys?{supportedDrmSystems:Po(),detectionMethod:Gy.MSMediaKeys}:e.video.webkitGenerateKeyRequest?{supportedDrmSystems:bo(e),detectionMethod:Gy.GenerateKeyRequest}:{supportedDrmSystems:[],detectionMethod:Gy.NotAvailable}}async function No(e,t){const{servers:r={}}=e,n=Object(cc.a)(r);if(0===n.length)return!1;const i=await zy({video:t});return Uv(n,e=>-1!==sc(i,e))}function wo(e){return Lo(e),$y[e]}function Do(e,t){const r=wo(e);return void 0===r?t:"true"===r||"1"===r||"false"!==r&&"0"!==r&&t}function Lo(e){if(Zy)return;const t=new Error(e?"Unexpected usage of player's flag "+e+" before any flag configuration":"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout(()=>{throw t})}async function ko(e){return!!function(e){try{return Boolean(e.yandexPlayerSupported)}catch(e){return!1}}(e.video)&&(!!Do("yandex_controller",!0)&&async function(e){try{return Object(Bc.a)(Vd.isYandexPlayerSupported)||await new Promise((e,t)=>{Vd.onYandexPlayerSupportedAvailable=e,setTimeout(t,5e3)}),Vd.isYandexPlayerSupported(e)}catch(e){return!1}}(e))}function Mo(){return(Mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function Vo(e){const{stream:t,video:r,preferNative:n}=e,{drmConfig:i,url:o}=t,a=jd(o),s=Hd(o),l=Bd(o);if(q(r,"orsay"))return function(e){let{streamUrl:t}=e;return X(t)||Hd(t)?{supported:!0,engine:Cv.NATIVE}:{supported:!1,noSupportReason:Ty.NO_SUPPORTED_FORMAT}}({streamUrl:o});if(l)return Jy.canPlayType('video/mp4;codecs="avc1.4D481F"')?{supported:!0,engine:Cv.MP4}:_y;if(!q(r)&&!a&&!s)return Py;let c;var d;if(q(r,"webos")?c=function(e){let{streamUrl:t}=e;return jd(t)||Hd(t)?{supported:!0,engine:Cv.NATIVE}:{supported:!1,noSupportReason:Ty.NO_SUPPORTED_FORMAT}}({streamUrl:o}):q(r,"avplay")?c=function(e){const t=Hd(e),r=jd(e),n=X(e);return t||n||r&&!Rl?{supported:!0,engine:Cv.NATIVE}:Py}(t.url):q(r)&&"playstation"===r.proxyElementType?(d=t.url,c=jd(d)||Hd(d)?{supported:!0,engine:Cv.NATIVE}:{supported:!1,noSupportReason:Ty.NO_SUPPORTED_FORMAT}):c=a?void 0===by?Ry:{supported:!0,engine:Cv.MPD}:function(e){return void 0===by?my?Dy:Ry:by.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')?my?{supported:!0,engine:mo(e)}:go(e.stream.drmConfig)?Oy:Ly:my?Dy:_y}({stream:t,preferNative:n}),!c.supported)return c;if(await ko({video:r,stream:t,playerVersion:"1.0-6810"})&&Eo(c))return Mo({},c,{engine:Cv.YANDEX});if(!Object(kl.a)(i))return c;return await No(i,r)?c:Oy}function Uo(e){const{mpd:t,m3u8:r,mss:n}=function(e){return{mpd:e.filter(e=>{let{stream:t}=e;return"mpd"===Object(Ll.c)(t.url)}),m3u8:e.filter(e=>{let{stream:t}=e;return"m3u8"===Object(Ll.c)(t.url)}),mss:e.filter(e=>{let{stream:t}=e;return!["mpd","m3u8"].includes(Object(Ll.c)(t.url))})}}(e),i=[...t,...n,...r];return i.find(e=>{let{stream:t}=e;return Object(kl.a)(t.drmConfig)})||i[0]}function Fo(e){const t=e.filter(Ao);if(0===t.length)return;if(wy.isSmartTV())return Uo(t);const r=t.find(e=>{let{stream:t}=e;return Object(kl.a)(t.drmConfig)});if(r)return r;const n=t.find(e=>{let{supportInfo:t}=e;return t.engine===Cv.NATIVE}),i=t.find(e=>{let{supportInfo:t}=e;return t.engine===Cv.MPD});if(Ld.a&&n)return n;if(i)return i;const o=t.find(e=>{let{supportInfo:t}=e;return t.engine!==Cv.MP4});return o||t[0]}async function xo(e){if(0===e.streams.length)return{status:"error",error:new Ou({code:Qd.NO_STREAMS,details:{},isFatal:!0}),streamsWithSupportInfo:[]};const t=await function(e){let{streams:t,video:r,preferNative:n}=e;return Promise.all(t.map(async e=>({stream:e,supportInfo:await Vo({stream:e,video:r,preferNative:n})})))}(e),r=Fo(t);return r?{status:"success",supportedStream:r,streamsWithSupportInfo:t}:{status:"error",error:So(t),streamsWithSupportInfo:t}}function Ho(e){return Object(Ll.a)(e,"t",String(Date.now()))}async function jo(e,t){const r=Jr(e);return async function(e,t){try{return await dt({url:e,withCredentials:t,method:"GET",checkStatus:e=>0!==e,retries:3}),!1}catch(e){return!0}}(r||Object(Ll.a)(Ho(e),"abd","1"),!Object(Bl.a)(r)&&t)}function Bo(){return(Bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yo(e){const{additionalParams:t=$v}=e;if(!Object(kl.a)(e.adConfig))return;const{partnerId:r,adBreaks:n}=e.adConfig;return r||n?Bo({},e.adConfig,{additionalParams:t}):void 0}function Ko(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<tS.length;t++)if(e<tS[t].end)return tS[t].name;return"unknown"}function Go(e,t){return t&&"boolean"===typeof t.withCredentials?t.withCredentials:!!Ar(e.url)||Zv.withCredentials}function Wo(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<rS.length;t++)if(e<rS[t].end)return rS[t].name;return"unknown"}function Xo(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;return Boolean(r.saveData)}function qo(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}function Qo(e,t,r){let n,i;if(e/=360,r/=100,0===(t/=100))return n=255*r,[n,n,n];i=r<.5?r*(1+t):r+t-r*t;const o=2*r-i,a=[0,0,0];let s;for(let t=0;t<3;t++)s=e+1/3*-(t-1),s<0&&s++,s>1&&s--,n=6*s<1?o+6*(i-o)*s:2*s<1?i:3*s<2?o+(i-o)*(2/3-s)*6:o,a[t]=255*n;return a}function zo(e,t,r){e/=255,t/=255,r/=255;const n=Math.max(e,t,r),i=Math.min(e,t,r),o=n-i;let a=0;n===i?a=0:e===n?a=(t-r)/o:t===n?a=2+(r-e)/o:r===n&&(a=4+(e-t)/o),a=Math.min(60*a,360),a<0&&(a+=360);const s=(i+n)/2;let l=0;return l=n===i?0:s<=.5?o/(n+i):o/(2-n-i),[a,100*l,100*s]}function Jo(e){return"0123456789abcdef".charAt(e/16<<0)+"0123456789abcdef".charAt(e%16)}function $o(e,t){let{r,g:n,b:i}=e;return void 0===t&&(t=127),function(e,t){return void 0===t&&(t=127),function(e){let[t,r,n]=e;return(299*t+587*r+114*n)/1e3}(e)>t}([r,n,i],t)}function Zo(e){return"string"===typeof e&&7===e.length&&"#"===e[0]&&function(e){for(let t=0;t<e.length;t++)if("0123456789abcdef".indexOf(e[t].toLowerCase())<0)return!1;return!0}(e.substr(1))}function ea(e){const[t,r,n]=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e);return{r:t,g:r,b:n}}function ta(e){let{r:t,g:r,b:n}=e;return function(e){let[t,r,n]=e;return"#"+Jo(t)+Jo(r)+Jo(n)}([t,r,n])}function ra(e,t){const[r,n,i]=function(e,t){let[r,n,i]=e;const[o,a]=zo(r,n,i);return Qo(o,a,t)}([e.r,e.g,e.b],100*t);return{r,g:n,b:i}}function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ia(e,t){try{e.details||(e.details={}),e.details.stage=t}catch(e){}}function oa(e,t){return Vy(e)?function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).match(/YaBrowser\/([\d.]+)/),r=t&&t[1]||"";return r?parseFloat(r):-1}(e)<18.6?"pip":"x-yandex-pip":"disablePictureInPicture"in t?"disablePictureInPicture":void 0}function aa(e,t,r){const n=oa(e,r);n&&(t?r.removeAttribute(n):r.setAttribute(n,"true"))}function sa(e,t){e!==t&&(t.volume=e.volume,t.muted=e.muted)}function la(e,t){return e.responseStart-t.responseStart}function ca(e){return e.responseStart-e.requestStart}function da(){if("undefined"===typeof window.performance)return NaN;const e=bS.reduce((e,t)=>OS()(e,function(e){try{return e.performance.getEntriesByType("resource").filter(e=>{let{name:t,transferSize:r,responseStart:n,requestStart:i}=e;return"string"===typeof t&&r>0&&n>0&&i>0})}catch(e){return[]}}(t),la),[]).filter(e=>{let{name:t}=e;return uS.test(t)});return 0===e.length?NaN:e.reduce((e,t)=>(1.3*e+.7*ca(t))/2,ca(e[0]))}function ua(e,t){if(void 0===t&&(t=!1),e===Qd.NO_CODECS&&DS&&LS>6)return{title:e+"_TITLE",message:e+"_MESSAGE",helpLink:"https://yandex.ru/support/video-player/player-issues.html#no-codecs",helpLinkButtonText:e+"_HELP_LINK"};const r=z(e);return t&&function(e){return[qd.NETWORK_PLAYER,qd.NETWORK_MEDIA,qd.NETWORK_TIMEOUT,qd.DRM].indexOf(e)>-1}(r)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/video-player/blocker-settings.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:function(e){return{title:e+"_ERROR_CATEGORY_TITLE",message:e===qd.REGIONAL?"":e+"_ERROR_CATEGORY_MESSAGE",helpLink:kS[e],helpLinkButtonText:ha(e)?e+"_ERROR_CATEGORY_HELP_LINK":"ERROR_SCREEN_DEFAULT_HELP_LINK"}}(r)}function ha(e){return[qd.UNSUPPORTED_ENV,qd.NO_CODECS].indexOf(e)>-1}function pa(e){if(e.type===Hls.ErrorTypes.NETWORK_ERROR)return e.networkDetails?e.networkDetails.status:void 0}function fa(e){if(e.type===Hls.ErrorTypes.NETWORK_ERROR)return e.networkDetails?e.networkDetails.readyState:void 0}function Ea(e){if(void 0===e)return;const{level:t,start:r,duration:n,url:i,relurl:o,sn:a,programDateTime:s,deltaPTS:l,dropped:c,endDTS:d,endPTS:u,startDTS:h,startPTS:p}=e;return{level:t,start:r,duration:n,url:i,relurl:o,sn:a,programDateTime:s,deltaPTS:l,dropped:c,endDTS:d,endPTS:u,startDTS:h,startPTS:p}}function Aa(){return(Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function va(e){try{return JSON.parse(Object(Ud.a)(Aa({},e,{networkDetails:void 0,frag:Ea(e.frag)})))}catch(e){return{message:Object(Yc.a)(()=>e.message)||"Cannot serialize hlsJsError"}}}function ya(){return(ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sa(e){let{details:t,networkDetails:r}=e;if(451===(r?r.status:NaN))switch(t){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:return Qd.REGIONAL_LIMITATION_MANIFEST;case Hls.ErrorDetails.LEVEL_LOAD_ERROR:return Qd.REGIONAL_LIMITATION_LEVEL;case Hls.ErrorDetails.FRAG_LOAD_ERROR:return Qd.REGIONAL_LIMITATION_SEGMENT;default:return}}function ga(e){let{details:t,networkDetails:r}=e;const n=r?r.status:NaN;if(MS.includes(n))switch(t){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:return Qd.SIGNATURE_EXPIRED_MANIFEST;case Hls.ErrorDetails.LEVEL_LOAD_ERROR:return Qd.SIGNATURE_EXPIRED_LEVEL;case Hls.ErrorDetails.FRAG_LOAD_ERROR:return Qd.SIGNATURE_EXPIRED_SEGMENT;default:return}}function ma(e){return void 0!==Sa(e)}function Ta(e){return void 0!==ga(e)}function Ra(e){const{details:t,fatal:r}=e;return t?!HS.includes(t)&&(!(!ma(e)&&!Ta(e))||Boolean(r)):Boolean(r)}function _a(e,t){return void 0===e.err||void 0===e.err.message?"MISSED_STACK__"+t:e.err.message}function Oa(e){if(void 0===e)return;const{details:t}=e;if(t===Hls.ErrorDetails.BUFFER_STALLED_ERROR)return;const r=Ra(e)&&!Pa(e),n=Sa(e)||ga(e)||t||Qd.DEFAULT_ERROR,{err:{stack:i=new Error(_a(e,n)).stack}={stack:void 0}}=e;return new Ou({code:n,isFatal:r,details:ya({},va(e),{networkErrorStatus:pa(e),xhrReadyState:fa(e)}),stack:i})}function Pa(e){return!ma(e)&&!Ta(e)&&(!!e.details&&US.includes(e.details))}function ba(e){const{details:t}=e;return!!t&&xS.includes(t)}function Ia(e){const t=e.split("x");if(t.length<2)return;const r={rows:parseInt(t[0],10),columns:parseInt(t[1],10)};return isNaN(r.rows)||isNaN(r.columns)?void 0:r}function Ca(e,t){const{rows:r,columns:n}=e;if(!r||!n)return null;const{width:i,height:o}=t;return{width:i/n,height:o/r}}function Na(e,t){return 0===e.rows||0===e.columns?Y(0):Y(t/(e.rows*e.columns))}function wa(e,t){if(0===Object.keys(e).length)return;const{uri:r,duration:n,resolution:i,tiles:o}=e;if([r,n,i,o].some(e=>!Boolean(e)))return void(t&&t("NonValidHLSThumbnailTileSessionData"));const a=Ia(o),s=function(e){if(""===e)return;const[t,r]=e.split("x"),n={width:parseInt(t,10),height:parseInt(r,10)};return isNaN(n.width)||isNaN(n.height)?void 0:n}(i),l=Y(parseFloat(n));if(void 0===a||void 0===s||isNaN(l))return void(t&&t("MapTileSessionDataParseError"));return{tiles:a,uriTemplate:r,spriteDuration:l,resolution:s,tileSize:Ca(a,s),tileDuration:Na(a,l)}}function Da(e,t,r){const n=t===jS.LOWRES?BS:YS,{VALUE:i=""}=e[n.tiles]||{},{VALUE:o=""}=e[n.duration]||{},{VALUE:a=""}=e[n.resolution]||{},{VALUE:s=""}=e[n.uri]||{},l=[i,o,a,s];if(!l.every(e=>""===e)){if(!l.some(e=>""===e))return{tiles:i,duration:o,resolution:a,uri:s};r&&r("NonValidHLSSessionData")}}function La(e){const t=e.match(KS);if(t)return{width:parseInt(t[1],10),height:parseInt(t[2],10),bitrate:parseInt(t[3],10)}}function ka(e){if(void 0!==e)return{name:e.name,value:String(e.id),lang:e.lang||""}}function Ma(e){if(void 0!==e)return{name:e.name,value:String(e.id),lang:e.lang||""}}function Va(e){let{width:t,height:r,bitrate:n}=e;return t+"x"+r+"@"+n}function Ua(e,t){const{attrs:r={},width:n,height:i}=e;if(!b(i))return"";const o=i+"p";if(!b(n))return o;const a=Va({width:n,height:i,bitrate:r["AVERAGE-BANDWIDTH"]?parseInt(r["AVERAGE-BANDWIDTH"],10):e.bitrate}),s=t.get(a);return void 0===s?o:s}function Fa(e,t){let{attrs:r}=e;if(!r)return!1;const{RESOLUTION:n,BANDWIDTH:i}=r,o=n+"@"+i;return t.has(o)}function xa(e,t,r){if(void 0===e)return;const{height:n,width:i,url:o,bitrate:a}=e;return Array.isArray(o)?{name:Ua(e,r),value:o[0],width:i,height:n,deepHD:Fa(e,t),bitrate:a?Sd(a,1e3):ty}:void 0}function Ha(e,t,r){const n=function(e,t,r){const n={};return e.filter(e=>Boolean(r(e))).forEach(e=>{const i=t(e);(!n[i]||r(n[i])<r(e))&&(n[i]=e)}),To(n)}(e,e=>{let{height:t}=e;return t},e=>{let{bitrate:t}=e;return t}),i=[];return n.forEach(e=>{const n=xa(e,t,r);n&&i.push(n)}),i}function ja(e,t){let{name:r,lang:n}=t;const i=r?e.find(e=>e.name===r):void 0;return i||(n?e.find(e=>e.lang===n):void 0)}function Ba(e,t,r){if(e.length<1)return;let[n]=e,i=t(n);for(let o=1;o<e.length;o++){const a=e[o],s=t(a);r(s,i)<0&&(n=a,i=s)}return n}function Ya(e,t){let{name:r,height:n}=t;const i=r?e.find(e=>e.name===r):void 0;if(i)return i;if(void 0===n)return;const o=e.filter(e=>{let{height:t}=e;return void 0!==t});return Ba(o,e=>{let{height:t}=e;return Math.abs(t-n)},(e,t)=>e-t)}function Ka(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function Ga(e){return void 0!==e&&b(e)&&e>=0}function Wa(e){const{type:t}=e;return t===Ed.VOD||!1===e.live?Ed.VOD:t===Ed.EVENT?Ed.EVENT:Ed.LIVE}function Xa(e){const t=function(e){let t;void 0===e&&(e=window);try{t=e.devicePixelRatio}catch(e){}return t||1}();return{width:(e.width||e.clientWidth||e.offsetWidth)*t,height:(e.height||e.clientHeight||e.offsetHeight)*t}}function qa(e,t,r){function n(){0!==a&&(clearTimeout(a),a=0)}let{threshold:i=QS,delay:o=zS}=void 0===r?{}:r,a=0,s=0,l=0;const c=d(e,"click",(function(e){0!==a&&(n(),t(e))}),{passive:!0}),u=d(e,"touchstart",(function(e){1===e.touches.length&&(s=e.changedTouches[0].screenX,l=e.changedTouches[0].screenY,n(),a=window.setTimeout(n,o))}),{passive:!0}),h=d(e,"touchend",(function(e){0!==a&&(n(),t(e))}),{passive:!0}),p=d(e,"touchmove",(function(e){if(0===a||!Object(kl.a)(e.touches)||1!==e.touches.length)return void n();const{screenX:t,screenY:r}=e.changedTouches[0];if(o=t,c=r,Math.abs(s-o)>i||Math.abs(l-c)>i)n();else var o,c}),{passive:!0});return()=>{c(),u(),h(),p()}}function Qa(e,t){void 0===t&&(t={});const{silent:r=!0,allowRelative:n=!1}=t;return n||qo(e)?new Promise((t,n)=>{const i=document.createElement("img");i.onload=()=>t(e),i.onerror=r?()=>t(null):()=>n(new Error("knockPixel failed to load image ["+e+"]")),i.src=e}):r?Promise.resolve(null):Promise.reject("["+e+"] is not an absolute url, to knock this pixel use { allowRelative: true } option")}function za(e){let{skin:{hiddenControls:t}}=e;return!t.includes(Od.TIMELINE)}function Ja(e){const{controller:{videoType:t}}=e;return t!==Ed.VOD&&kn(e)}function $a(e,t){void 0===t&&(t={});let r=0;const n=[],i=(t,i)=>{n.push(d(e,t,i,ng)),clearTimeout(r)},o=()=>Object(xc.a)(n),a=new Promise((n,o)=>{const a=t=>{e.paused&&o(t)},s=e.play();if(a(rg.VideoTagPaused),i("durationchange",()=>a(rg.VideoTagPausedAfterDurationChange)),i("error",()=>a(rg.VideoTagPausedAfterError)),i("pause",()=>o(rg.PauseEvent)),i("playing",()=>{n(rg.PlayingEvent)}),s)t.useProgressEvent&&i("progress",()=>{n(rg.ProgressEvent)}),s.then(()=>n(rg.PromiseResolve)).catch(e=>o(function(e){return e?rg.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":rg.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(r=window.setTimeout(()=>{o(rg.Timeout)},t.timeoutForNonPromisePlay))}});return a.then(o,o),a}function Za(e){let{kind:t}=e;return"subtitles"===t}function es(e){const t=[];for(let r=0;r<e.length;r++)Za(e[r])&&t.push(e[r]);return t}function ts(e){return e?"showing":"hidden"}function rs(e){if(isNaN(e))return;const t={bandwidthEstimate:Math.floor(e),time:Object(dg.a)()};My.a.setItem("videolayer-bandwidth-estimate",JSON.stringify(t))}function ns(e,t){return e.responseEnd-t.responseEnd}function is(){if("undefined"===typeof window.performance)return NaN;const e=bS.reduce((e,t)=>OS()(e,function(e){try{return e.performance.getEntriesByType("resource").filter(e=>{let{duration:t,responseEnd:r,transferSize:n}=e;return t>0&&r>0&&n>1024})}catch(e){return[]}}(t),ns),[]).filter(e=>{let{name:t}=e;return uS.test(t)});if(0===e.length)return NaN;const t=new pg;return e.forEach(e=>{let{transferSize:r,duration:n}=e;return t.sample(n,r)}),t.getEstimate()}function os(e,t){let{paused:r}=e;return t&&!r?fd.BUFFERING:r?fd.PAUSE:fd.PLAY}function as(){return(as=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ss(e){if("function"===typeof e.getVideoPlaybackQuality){const{droppedVideoFrames:t,corruptedVideoFrames:r,totalVideoFrames:n}=e.getVideoPlaybackQuality();return{droppedVideoFrames:t,corruptedVideoFrames:r,totalVideoFrames:n}}const t=e;return"number"===typeof t.webkitDroppedFrameCount&&"number"===typeof t.webkitDecodedFrameCount?as({},fg,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):fg}function ls(e,t){Fy&&AS<81&&AS>77&&Y(e.duration)-t<Ag&&(t=vd(Y(e.duration),Ag)),e.currentTime=t}function cs(){return(cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ds(){return(ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function us(e,t){if(void 0===t)return e;return void 0!==function(e){const t=function(e,t){return hv.href=e,((hv.hash||"").slice(1).split("&").map(e=>e.split("=")).map(e=>{let[t,r]=e;return[t,void 0===r?"":r]}).find(e=>{let[r]=e;return r===t})||[])[1]}(e,"t");return void 0===t?t:Y(Number(t))}(e)?function(e,t,r){return e=Qr(e,t),void 0===r?e:Xr(e,t,r)}(e,"t",t):Xr(e,"t",String(t))}function hs(e){if(mg(e.message))return Qd[e.message];if(mg(e.code))return Qd[e.code];const t=Dl[e.code];return mg(t)?Qd[t]:Qd.DEFAULT_ERROR}function ps(e){if(void 0===e)return;const{id:t,label:r,language:n}=e;return{name:r||n,value:t,lang:n||""}}function fs(e){const t=Object(jl.a)(e.audioTracks).find(e=>e.enabled);return t?ps(t):void 0}function Es(e){if(void 0===e)return;const{id:t,label:r,language:n,bitrate:i=ty,deepHD:o=!1,height:a=0,width:s=0}=e;return{name:r||n,value:t,deepHD:o,bitrate:i,height:a,width:s}}function As(e){const t=Object(jl.a)(e.videoTracks).find(e=>e.selected);return t?Es(t):void 0}function vs(e){return"subtitles"===e.kind&&"StreamPlayerJs TextTrack"!==e.label}function ys(e,t){if(void 0===e)return;const{id:r,label:n,language:i}=e;return{name:n||i,value:"undefined"!==typeof r&&""!==r?r:"index:"+t,lang:i||""}}function Ss(e){const t=[];return Object(jl.a)(e).forEach(e=>{const r=ps(e);r&&t.push(r)}),t}function gs(e){const t=[];return Object(jl.a)(e).forEach((e,r)=>{if(!vs(e))return;const n=ys(e,r);n&&t.push(n)}),t}function ms(e){const t=[];return Object(jl.a)(e).forEach(e=>{const r=Es(e);r&&t.push(r)}),t.filter(e=>{let{value:t}=e;return"auto"!==t})}function Ts(e,t){return t.code!==e.util.Error.Code.BAD_HTTP_STATUS?0:t.data[1]||0}function Rs(){return(Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _s(e){return{error:String(e.error)||"",isFatal:Boolean(e.isFatal)}}function Os(e){if("string"===typeof e)try{return _s(JSON.parse(e))}catch(t){return Rs({},Pg,{error:e})}return"object"===typeof e?_s(e):Pg}function Ps(e){return new Ou({isFatal:e.isFatal,code:e.error===Ig.EXPIRED_SIGNATURE?Qd.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:Qd.DRM_PROXY_ERROR,details:{drmProxyError:e.error}})}function bs(e,t){if(!t)return;const{code:r,severity:n,category:i,data:o}=t;let a="shaka."+function(e,t){let r;for(r in e.util.Error.Code)if(e.util.Error.Code.hasOwnProperty(r)&&t.code===e.util.Error.Code[r])return r;return"ERROR"}(e,t)+"_"+r,s=o,l=n===e.util.Error.Severity.CRITICAL;switch(i){case e.util.Error.Category.NETWORK:s.networkErrorStatus=Ts(e,t);const n=function(e,t){if(t.code!==e.util.Error.Code.BAD_HTTP_STATUS)return;if(451!==Ts(e,t))return;switch(t.data[t.data.length-1]){case e.net.NetworkingEngine.RequestType.MANIFEST:return Qd.REGIONAL_LIMITATION_MANIFEST;case e.net.NetworkingEngine.RequestType.SEGMENT:return Qd.REGIONAL_LIMITATION_SEGMENT;default:return}}(e,t)||function(e,t){if(t.code!==e.util.Error.Code.BAD_HTTP_STATUS)return;const r=Ts(e,t);if(!MS.includes(r))return;switch(t.data[t.data.length-1]){case e.net.NetworkingEngine.RequestType.MANIFEST:return Qd.SIGNATURE_EXPIRED_MANIFEST;case e.net.NetworkingEngine.RequestType.SEGMENT:return Qd.SIGNATURE_EXPIRED_SEGMENT;default:return}}(e,t);void 0===n?a+=function(e,t){switch(t.code){case e.util.Error.Code.BAD_HTTP_STATUS:case e.util.Error.Code.HTTP_ERROR:case e.util.Error.Code.TIMEOUT:const r=function(e,t){const{RequestType:r}=e.net.NetworkingEngine;switch(t){case r.APP:return"APP";case r.LICENSE:return"LICENSE";case r.MANIFEST:return"MANIFEST";case r.SEGMENT:return"SEGMENT";case r.TIMING:return"TIMING";default:return}}(e,t.data[t.data.length-1]);return void 0===r?"_UNKNOWN":"_"+r;default:return""}}(e,t):a=n;break;case e.util.Error.Category.DRM:const i=o[0];if(!i||!Og(i))break;const c=Ps(bg(i));a=c.code,s=c.details,l=l||c.isFatal;break;case e.util.Error.Category.PLAYER:if(r===e.util.Error.Code.LOAD_INTERRUPTED)return;break;case e.util.Error.Category.CAST:case e.util.Error.Category.STORAGE:}return new Ou({code:a,isFatal:l,details:s})}function Is(e){return e?function(e){let t="",r=0;const n=e.length;let i=0,o=0,a=0;for(;r<n;)switch(i=e[r++],i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=e[r++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[r++],a=e[r++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t}(new Uint8Array(Array.from(e))):""}function Cs(e,t){return function(e,t){const r=t===jS.HIGHRES?wg:Dg,n=e.querySelector(r.version);if(!n||"2"!==n.getAttribute("value"))return;const i=e.querySelector(r.tiles),o=e.querySelector(r.uriTemplate),a=e.querySelector(r.spriteDuration),s=e.querySelector(r.resolution);if(!i||!o||!a||!s)return;const l=i.getAttribute("value"),c=o.getAttribute("value"),d=Y(parseFloat(a.getAttribute("value")||"")),u=s.getAttribute("value");if(!l||!u||!c||isNaN(d))return;const h=function(e){const t=e.split("x");if(t.length<2)return;const r={width:parseInt(t[0],10),height:parseInt(t[1],10)};return isNaN(r.width)||isNaN(r.height)?void 0:r}(u);if(!h)return;const p=Ia(l);if(!p)return;const f=Ca(p,h),E=Na(p,d);return{tiles:p,uriTemplate:c,spriteDuration:d,resolution:h,tileSize:f,tileDuration:E}}(e,t)||function(e,t){const r=Object(jl.a)(e.querySelectorAll('AdaptationSet[mimeType="image/jpeg"]'));let n=r[0];if(!n)return;if(t===jS.LOWRES){let e;if(r.forEach(t=>{t.querySelector('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:type"][value="'+jS.LOWRES+'"]')&&(e=t)}),!e)return;n=e}const i=n.querySelector("SegmentTemplate"),o=n.querySelector("Representation"),a=n.querySelector("EssentialProperty");if(!i||!o||!a)return;const s=a.getAttribute("value"),l=i.getAttribute("media"),c=Y(parseFloat(i.getAttribute("duration")||"")),d=parseFloat(o.getAttribute("width")||""),u=parseFloat(o.getAttribute("height")||""),h={width:d,height:u};if(!s||!l||!c||!d||!u)return;const p=Ia(s);if(!p)return;const f=Ca(p,h),E=Na(p,c);return{tiles:p,uriTemplate:l,spriteDuration:c,resolution:h,tileSize:f,tileDuration:E}}(e,t)}function Ns(e){const t=[],r=Object.create(null),n=Object.create(null);return e.forEach(e=>{const{video:i,audio:o}=e;i&&i.height&&i.width&&i.originalId&&o&&o.bandwidth?(void 0===r[i.originalId]&&(r[i.originalId]=[],n[i.originalId]=i),r[i.originalId].push(e)):t.push(e)}),Object(hc.a)(r,(e,r)=>{const i=n[r];if(function(e){let{width:t,height:r}=e;const n=Math.max(t,r),i=Math.min(t,r);if(n<=0)return 0;let o=Hg[0];for(let e=0;e<Hg.length;e++){const t=Hg[e],r=jg[t];if(n>=1.3*Math.floor(16*r/9)||i>=1.3*r)return o;o=t}return Hg[Hg.length-1]}({width:i.width,height:i.height})<=360)t.push(...e);else{const r=Ba(e,e=>{var t;return(null==(t=e.audio)?void 0:t.bandwidth)||0},(e,t)=>t-e);t.push(r)}}),t}function ws(e,t){const r=Math.pow(10,t);return Math.round((e+Yg)*r)/r}function Ds(e,t){const r=function(e,t){let{stream:r}=e,{audio:n=Y(0),video:i=Y(0)}=t;if(!r||!Kg())return;const{type:o}=r;switch(o){case"audio":return ws(n,3);case"video":return ws(i,3);default:return}}(e,t);void 0!==r&&(e.uris=e.uris.map(e=>function(e,t){const{hostname:r}=Object(Ll.g)(e);return r.match(Gg)?Object(Ll.a)(e,"bufsize",String(t)):e}(e,r)))}function Ls(e){return(e.getAttribute("id")||"")+"@"+(e.getAttribute("width")||"")+"x"+(e.getAttribute("height")||"")+";"}function ks(e){return Object(jl.a)(e.querySelectorAll("Representation")).map(Ls).sort()}function Ms(e,t){return e.getAll().find(e=>e.pathname===t)}function Vs(e){return/init-.*\.mp4/.test(e)}function Us(e,t,r){void 0===e&&(e=[]);const n=e.find(e=>{var n,i;const o=(null==(n=e.video)?void 0:n.originalId)===t,a=(null==(i=e.audio)?void 0:i.originalId)===r;return o&&a});if(void 0!==n)return n.id;const i=function(e,t,r){void 0===t&&(t=e=>Boolean(e));void 0===r&&(r=e.length-1);for(let n=r;n>=0;n--)if(t(e[n],n,e))return n;return-1}(e,e=>{var r;return(null==(r=e.video)?void 0:r.originalId)===t});return-1===i?void 0:e[i].id}function Fs(e,t){if(!t||!e)return;const r='AdaptationSet > Representation[id="'+t+'"]',n=e.querySelector(r);if(!n)return;const i=n.parentElement;if(!i)return;const o=i.getAttribute("lang");return o?o.toLowerCase():void 0}function xs(e){if(void 0===e)return;const t=e.getManifest();if(!t)return;const r=e.getMediaElement();if(!r)return;const{currentTime:n}=r,{periods:i=[]}=t;for(let e=0;e<i.length-1;e++)if(i[e].startTime<n&&n<i[e+1].startTime)return i[e];return i[i.length-1]}function Hs(e){try{return e.getVariantTracks().find(Qg)}catch(e){return}}function js(e){const t=Hs(e);if(!t)return;const r=xs(e);return r?r.variants.find(e=>t.id===e.id):void 0}function Bs(e,t){const r=js(e);if(!r||!r.video)return null;try{const e=r.video.findSegmentPosition(t);return b(e)?r.video.getSegmentReference(e):null}catch(e){return null}}function Ys(e){return void 0!==e&&null!==e.getManifest()}function Ks(e,t){let r=Y(0);if(!Ys(e))return r;if(void 0===t){const n=e.getMediaElement();if(!n)return r;t=Y(n.currentTime)}const n=Bs(e,t);if(n){const{startTime:e,endTime:t}=n;r=vd(t,e)}return r}function Gs(e){const t=function(){if(void 0!==Qy)return Qy.supportedDrmSystems}();return void 0!==e&&Object(kl.a)(e.servers)&&void 0!==t&&t.filter(t=>Object(Kv.a)(e.servers,t)).map(e=>{for(const t in By)if(Object(Kv.a)(By,t)&&By[t].includes(e))return t;return!1}).filter(Boolean).join("|")||"none"}function Ws(e){if(!Ys(e))return;if(!e.isLive())return Ed.VOD;const t=function(e){const t=js(e);if(t&&t.video)return t.video.presentationTimeOffset}(e);return void 0===t?void 0:0===t?Ed.LIVE:Ed.EVENT}function Xs(e,t){if(void 0===e)return;if(Ws(e)===Ed.LIVE)return Y(0);if(void 0===t)return;const r=t.documentElement.getAttribute("publishTime");if(!r)return;const n=Date.parse(r);return isNaN(n)?void 0:Y(n/1e3)}function qs(e,t){if(void 0===e)return;const r=Xs(e,t);if(void 0===r)return;const n=e.getMediaElement();return n?Ad(r,Y(n.currentTime)):void 0}function Qs(e,t){let{bandwidth:r,width:n,height:i,label:o}=e;if("deephd"===o)return!0;if(!b(n)||!b(i)||!b(r))return!1;const a=Va({width:n,height:i,bitrate:r});return t.has(a)}function zs(e,t){let{width:r,height:n,bandwidth:i}=e;if(!b(n))return"";const o=n+"p";if(!b(r)||!b(i))return o;const a=Va({width:r,height:n,bitrate:i}),s=t.get(a);return void 0===s?o:s}function Js(e){try{if(!navigator.requestMediaKeySystemAccess)return;const r=(t=e)&&s(t)||window;if(r===window)return;if(!r.navigator.requestMediaKeySystemAccess)return;navigator.requestMediaKeySystemAccess=function(){return r.navigator.requestMediaKeySystemAccess(...arguments)}}catch(e){}var t}function $s(){return($s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Zs(){return(Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function el(e){return String.fromCharCode(...Array.from(e))}function tl(e){return e.charCodeAt(0)}function rl(e){return Array.from(e,tl)}function nl(e){return!!Object(Bc.a)(Vd.isYandexPlayerFeatureEnabled)&&Vd.isYandexPlayerFeatureEnabled(e)}function il(e){let{id:t,method:r,params:n}=e;return JSON.stringify({jsonrpc:"2.0",id:t,method:r,params:n})}function ol(e){if(!("params"in e))return[];if(!Array.isArray(e.params))throw new Error("Expect #params to be and array if present in "+JSON.stringify(e));return e.params}function al(e){return sl(e)}function sl(e){if(b(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in "+JSON.stringify(e));return e.id}if(Object(Bl.a)(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in "+JSON.stringify(e))}function ll(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response "+JSON.stringify(e));return sl(e)}function cl(e){if("object"!==typeof e.error||null===e.error)throw new Error("Expect #error to be an object in "+JSON.stringify(e));const t=e.error;if(!b(t.code))throw new Error("Expect #error#code to be an number in "+JSON.stringify(e));if(!Object(Bl.a)(t.message))throw new Error("Expect #error#message to be an string in "+JSON.stringify(e));return"data"in t?{code:t.code,message:t.message,data:t.data}:{code:t.code,message:t.message}}function dl(e){const t=function(e){const t=Object(Yc.a)(()=>JSON.parse(e));if(!Object(kl.a)(t))throw new Error("Can't parse \""+e+'" as object');return t}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect "+e+" to be and json-rpc v2 message");if(Object(Bl.a)(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:ol(e),id:al(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:ol(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:ll(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:cl(e),id:ll(e)}}(t);throw new Error("Expect "+e+" to be and json-rpc v2 message")}function ul(e){if(e in pm)return pm[e];const t=document.createElement("link");return t.rel="preload",t.as="script",pm[e]=new Promise((r,n)=>{t.onload=r,t.onerror=n,t.href=e,t.crossOrigin="anonymous",hm.appendChild(t)}).then(()=>{pm[e]=Promise.resolve()}).catch(()=>{delete pm[e],hm.removeChild(t)}),pm[e]}function hl(){return(hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pl(e){return"videoplayer-iframe-api-raa-cache-"+e.autoplay+"-"+e.allowMuted+"-"+e.muted}function fl(e){return Object(Yc.a)(()=>{const t=JSON.parse(My.a.getItem(pl(e))),{time:r}=t,n=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["time"]);return Date.now()-r<Em?n:null})||null}function El(){return(El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Al(e){return o({preferNative:e})?function(){let e=!1;return it({src:"./js/avplay_proxy_controller.js",checkLoad:()=>void 0!==Vd.avplayProxyController,onBeforeLoad:()=>{e=!0,We("int.avplay")},onLoad:()=>{e&&Xe("int.avplay")}})}():a({preferNative:e})?function(){let e=!1;return it({src:"./js/webos_controller.js",checkLoad:()=>void 0!==Vd.webOSController,onBeforeLoad:()=>{e=!0,We("int.webos")},onLoad:()=>{e&&Xe("int.webos")}})}():Pl?function(){let e=!1;return it({src:"./js/orsay_video_element.js",checkLoad:()=>void 0!==Vd.orsayVideoElement,onBeforeLoad:()=>{e=!0,We("int.orsay")},onLoad:()=>{e&&Xe("int.orsay")}})}():Cl?function(){let e=!1;return it({src:"./js/playstation_video_element.js",checkLoad:()=>void 0!==Vd.playstationVideoElement,onBeforeLoad:()=>{e=!0,We("int.playstation")},onLoad:()=>{e&&Xe("int.playstation")}})}():Promise.resolve()}r.r(t),r.d(t,"createJsPlayer",(function(){return vm}));var vl={};r.r(vl),r.d(vl,"add",(function(){return se})),r.d(vl,"remove",(function(){return le})),r.d(vl,"has",(function(){return ce})),r.d(vl,"check",(function(){return de})),r.d(vl,"all",(function(){return ue})),r.d(vl,"clear",(function(){return he})),r.d(vl,"enableChecking",(function(){return pe})),r.d(vl,"disableChecking",(function(){return fe}));var yl={};r.r(yl),r.d(yl,"actionTransformer",(function(){return Se})),r.d(yl,"logger",(function(){return xu}));var Sl=r(4);const gl=function(e){return void 0===e&&(e=window),Object(Sl.a)(e).toLowerCase().indexOf("tizen")>-1},ml=function(e){void 0===e&&(e=window);const t=n(e);return 2===t.major&&3===t.minor},Tl=gl(),Rl=ml(),_l=function(e){void 0===e&&(e=window);const t=n(e);return 2===t.major&&4===t.minor}(),Ol=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase();return t.indexOf("maple2012")>-1&&t.indexOf("smarttv")>-1},Pl=Ol(),bl=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase();return t.indexOf("playstation")>-1&&t.indexOf("webmaf")>-1},Il=bl(),Cl=Il,Nl=function(e){return void 0===e&&(e=window),Object(Sl.a)(e).toLowerCase().indexOf("web0s")>-1},wl=Nl();var Dl,Ll=r(2),kl=r(1);!function(e){e[e.MEDIA_ERR_CUSTOM=0]="MEDIA_ERR_CUSTOM",e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED"}(Dl||(Dl={}));class Ml{constructor(e){this.code=0,this.message="",this.details=void 0,"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Object(kl.a)(e)&&("number"===typeof e.code&&(this.code=e.code),"string"===typeof e.message&&(this.message=e.message),this.details=e.details),this.message||(this.message=Dl[this.code]||"")}}const Vl="com.apple.fps.1_0",Ul="com.apple.fps.2_0",Fl=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e);let r=-1,n=-1,i=-1;return Nl(e)&&(-1!==t.indexOf("537.41")?(r=1,n=0,i=2014):-1!==t.indexOf("538.2")?(i=2015,r=2,n=0):-1!==t.indexOf("QtWebEngine/5.2.1")?(i=2016,r=3,n=0):-1!==t.indexOf("Chrome/53.0.2785.34")?(i=2018,r=4,n=0):-1!==t.indexOf("Chrome/68.0.3440.106")&&(i=2020,r=5,n=0)),{major:r,minor:n,year:i}}(),xl=1===Fl.major,Hl=2===Fl.major;var jl=r(6);var Bl=r(8);let Yl;const Kl=(void 0===(Gl=window)&&(Gl=window),Yl||(Yl=Gl.document.createElement("div")),Yl);var Gl;const Wl=(e,t)=>{const r="undefined"!==typeof Kl.style[e];if(r&&t&&Object(Bl.a)(t))try{Kl.style.cssText=e+": "+t+";";const r=Boolean(Kl.style.cssText);return Kl.style.cssText="",r}catch(e){return!1}return r};var Xl=r(30);const ql={},Ql=function(e){return void 0===e&&(e=""),ql[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let r=0;r<Xl.b.length;r++){const n=Xl.b[r],i=n?""+n+t:e;if(Wl(i))return ql[e]=i}return ql[e]=e}(e)};var zl=r(26);const Jl=function(e){return void 0===e&&(e=window),-1!==Object(zl.a)(e)}(),$l=function(e){return void 0===e&&(e=window),Object(Sl.a)(e).indexOf("SamsungBrowser")>-1}();var Zl=r(32);let ec=function(e,t,r){e.attachEvent("on"+t,r)},tc=function(e,t,r){e.detachEvent("on"+t,r)};Object(Zl.a)(document,"addEventListener")&&Object(Zl.a)(document,"removeEventListener")&&(ec=function(e,t,r,n){const i=e&&Object(Zl.a)(e,"addEventListener");i&&i.call(e,t,r,n)},tc=function(e,t,r,n){const i=e&&Object(Zl.a)(e,"removeEventListener");i&&i.call(e,t,r,n)});var rc=r(0);let nc=!1,ic=!1,oc=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>nc=!0}),Object.defineProperty(t,"passive",{get:()=>ic=!0}),Object.defineProperty(t,"capture",{get:()=>oc=!0}),ec(e,"click",rc.a,t)}}catch(e){}var ac=r(41);const sc=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=lc);for(let i=r;i<e.length;i++)if(n(e[i],t))return i;return-1},lc=(e,t)=>e===t;var cc=r(10);const dc=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const{resolver:n,preparers:i}=u(t);let o,a=null,s=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a&&a.every((e,r)=>t[r]===e))return o;const l=i.map(e=>e(...t));if(s&&s.every((e,t)=>l[t]===e))return a=t,o;const c=n(...l);return a=t,s=l,o=c,c}};var uc=r(9),hc=r(11);const pc={xml:"http://www.w3.org/XML/1998/namespace",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},fc={};Object(hc.a)({xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type"},(function(e,t){const r=e.split(":"),n=pc[r[0]];n&&(fc[t]=n)}));const Ec="classList"in document.documentElement,Ac=dc(e=>e.classList&&e.classList.add,uc.a),vc=(dc(e=>e.classList&&e.classList.remove,uc.a),dc(e=>e.classList&&e.classList.toggle,uc.a),(()=>{const e=document.createElement("p");return!!Ec&&(e.classList.add("c1","c2"),!!e.classList.contains("c2")&&(e.classList.toggle("c3",!1),!e.classList.contains("c3")))})()),yc=((()=>{const e=document.createElement("p");!!Ec&&(e.classList.toggle("a",!1),e.classList.contains("a"))})(),e=>e.split(" ").filter(e=>Boolean(e))),Sc=vc?(e,t)=>{const r=yc(t);e.classList.add(...r)}:(e,t)=>{const r=yc(t);for(let t=0;t<r.length;t++)e.classList.add(r[t])};var gc=r(17),mc=r(42);const Tc=15,Rc=1500,_c=["beforeunload","pagehide","unload"],Oc=e=>{try{const{left:t,right:r,top:n,bottom:i}=e.getBoundingClientRect();return{left:t,right:r,top:n,bottom:i,width:r-t,height:i-n}}catch(e){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},Pc=S(window),bc=Pc.requestAnimationFrame,Ic=Pc.cancelAnimationFrame;var Cc=r(23),Nc=(r(52),r(33)),wc=r(49);Object(wc.a)({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class Dc{constructor(){this._isDestroyed=!1,this.destroyHandlers=[]}onDestroy(e){this._addDestroyHandler(e)}addDestroyListener(e){this._addDestroyHandler(e)}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=n,this.destroyHandlers.forEach(e=>e(...t)),this.destroyHandlers.length=0)}getIsDestroyed(){return this._isDestroyed}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}ignoreAfterDestroy(e){var t=this;let r=e;return function(){t.isDestroyed&&(r=rc.a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];r.apply(t,n)}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}class Lc{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],m(this.on,e),m(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}class kc extends Lc{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(r=>{e(r)&&g(t,r)})}subscribeValueConditionOnce(e,t){const r=this.subscribeValueCondition(e,e=>{r(),g(t,e)});return r}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}let Mc=0;const Vc=[];class Uc extends Dc{constructor(e,t){let{lazy:r=!1}=void 0===t?{}:t;super(),this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:r}}]=e;this.onResize.dispatch({width:t,height:r})};const n=r?{width:NaN,height:NaN}:Oc(e);if(this.onResize=new kc({width:n.width,height:n.height},(e,t)=>{let{width:r,height:n}=t;return e.width===r&&e.height===n}),r){const t=bc(()=>{const{width:t,height:r}=Oc(e);this.onResize.dispatch({width:t,height:r})});this.addDestroyHandler(()=>{Ic(t)})}if(this.addDestroyHandler(()=>{this.onResize.removeAll()}),"undefined"!==typeof ResizeObserver&&Object(uc.a)(ResizeObserver))try{const t=new ResizeObserver(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler(()=>{t.disconnect()})}catch(t){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return R({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;if(!r)return;const n=()=>{const t=Oc(e);this.onResize.dispatch({width:t.width,height:t.height})};this.addDestroyHandler(d(r,"resize",n,{passive:!0})),this.addDestroyHandler(T(n))}}const Fc=[{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}];var xc=r(12),Hc=r(7),jc=r(25),Bc=r(3),Yc=r(5);const Kc=e=>(e=>e instanceof Promise||"Promise"===Object(jc.a)(e)&&Boolean(Object(Yc.a)(()=>Object(uc.a)(e.constructor))))(e)||(e=>Boolean(Object(Yc.a)(()=>Object(Bc.a)(e.then)&&Object(Bc.a)(e.catch))))(e);var Gc=r(31);const Wc=e=>{let t=0;return{promise:new Promise(r=>{t=window.setTimeout(r,e)}),clear(){clearTimeout(t)},timeoutId:t}};var Xc=r(51);const qc=Object(zl.a)();var Qc=r(27);const zc=function(e){if(void 0===e&&(e=window),Object(Qc.a)(e)&&e.navigator){const{platform:t}=e.navigator;if(t&&/iP(hone|od|ad)/.test(t)){const t=e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return parseInt(t[1],10)}}return-1}(),Jc=Object(Qc.a)();var $c=r(15);const Zc=document.createElement("video"),ed="function"===typeof Zc.load,td=ed?function(e,t){return void 0===t&&(t=Zc),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1,rd=td("video/webm")?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=";var nd=r(43);const id=e=>{const t=(e=>{const{muted:t}=e;return()=>{e.muted=t}})(e),r=(e=>{const{volume:t}=e;return()=>{e.volume=t}})(e),n=(e=>{const{paused:t}=e;return()=>{t&&e.pause(),!t&&e.paused&&P(L(e))}})(e);return()=>{t(),r(),n()}};var od,ad;!function(e){e.AutomaticallyGenerated="AutomaticallyGenerated",e.HardcodedParams="HardcodedParams",e.IOS9OrLess="IOS9OrLess",e.HTML5VideoIsNotSupported="HTML5VideoIsNotSupported",e.WindowHasBeenActive="WindowHasBeenActive",e.RAAStopped="RAAStopped",e.OldIE="OldIE",e.MediaError="MediaError",e.NotRecognized="NotRecognized",e.YaBroAllowedToPlay="YaBroAllowedToPlay",e.TizenSmartTVModern="TizenSmartTVModern",e.Tizen23SmartTV="Tizen23SmartTV",e.WebOSSmartTV="WebOSSmartTV",e.TizenAVPlay="TizenAVPlay",e.OrsaySmartTV="OrsaySmartTV",e.PlayStationSmartTV="PlayStationSmartTV"}(od||(od={})),function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(ad||(ad={}));const sd={once:!0,passive:!0};let ld=!1;const cd=-1<qc&&qc<=16,dd=F({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:od.AutomaticallyGenerated}),ud=F({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:od.AutomaticallyGenerated});class hd{constructor(e,t){let{checkSoundEnabled:r,promise:n}=t;if(this.video=e,this.stop=rc.a,this.isStopped=!1,this.revertVideoState=rc.a,this.getIsActiveWindow())return this.promise=Promise.resolve(U({},ud,{detectionMethod:od.WindowHasBeenActive})),this;if(n)return this.promise=n,this;const i=document.createElement("div");i.style.display="none";const o=id(e),a=V(e,()=>function(e,t){const r={};return Object(cc.a)(t).forEach(t=>{r[t]=e.getAttribute(t)}),N(e,t),Object(Hc.a)(()=>{N(e,r)})}(e,{src:rd}));let s;this.revertVideoState=Object(Hc.a)(()=>{a(),e.load(),o(),Object($c.a)(i)}),this.promise=new Promise(async(e,t)=>{let n,i,o;if(s=t,r){const e=await this.requestAutoplayAbilityByMuted(!1);i=e.autoplayAbility,n=e.detectionMethod}else i=!1;if(!this.isStopped){if(i)o=!0;else{const e=await this.requestAutoplayAbilityByMuted(!0);o=e.autoplayAbility,n=n&&n!==e.detectionMethod?"DifferentDetectionMethods unmuted=["+n+"] muted=["+e.detectionMethod+"]":e.detectionMethod}this.isStopped||(this.revertVideoState(),this.isStopped=!0,e(F({canPlayUnMuted:i,canPlayMuted:o,detectionMethod:n||od.NotRecognized})))}}),this.stop=()=>{this.isStopped||(this.isStopped=!0,s(new Error("requestAutoplayAbility has been stopped")),this.revertVideoState())}}async requestAutoplayAbilityByMuted(e){const{video:t}=this;if(V(t,()=>{t.load()}),await(async(e,t)=>{let r;try{await new Promise((n,i)=>{t&&t.then(n,i),r=window.setTimeout(n,e)})}finally{window.clearTimeout(r)}})(0),this.isStopped)return{autoplayAbility:!1,detectionMethod:od.RAAStopped};t.muted=e,t.volume=e?0:1;const r=await new Promise(e=>{M(t,{useProgressEvent:!0,timeoutForNonPromisePlay:500}).then(t=>{e({autoplayAbility:!0,detectionMethod:t})}).catch(r=>{const n=k(t);n&&n.code===Dl.MEDIA_ERR_DECODE?setTimeout(()=>{e({autoplayAbility:!0,detectionMethod:od.MediaError})},0):e({autoplayAbility:!1,detectionMethod:r})})});return this.isStopped?{autoplayAbility:!1,detectionMethod:od.RAAStopped}:r}getIsActiveWindow(){const e=s(this.video);if(!e)return!1;const t=w(e);return Boolean(t&&t.hasBeenActive)}}var pd,fd,Ed;!function(e){e.AutoplayDisabled="AutoplayDisabled",e.RASAborted="RASAborted"}(pd||(pd={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(fd||(fd={})),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(Ed||(Ed={}));const Ad=function(e){let t=e;for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e++)t+=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];return t},vd=function(e){let t=e;for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e++)t-=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];return t},yd=function(e){let t=e;for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e++)t*=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];return t},Sd=function(e){let t=e;for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e++)t/=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];return t};var gd=r(19),md=r.n(gd),Td=r(39),Rd=r.n(Td);const _d=1e3;let Od;!function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.START_POSITION_CONFIRM="startPositionConfirm",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="title",e.SHARE="share",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.BRAND_LOGO_BUTTON="brandLogoButton",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.DEEP_HD="deepHd",e.SKIPPABLE_FRAGMENTS="skippableFragments",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.NON_STOP="nonStop",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.LOGO_WIDGET="logoWidget",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons"}(Od||(Od={}));const Pd=Object(cc.a)(Od).map(e=>Od[e]);let bd,Id;!function(e){e.TestFeature="TestFeature",e.NativeUI="NativeUI",e.SkippableFragments="SkippableFragments",e.NonStop="NonStop",e.Recommendations="Recommendations",e.CloseButton="CloseButton"}(bd||(bd={})),function(e){e.CLOSED="closed",e.IDLE="idle",e.LOADING="loading",e.UNKNOWN_USER="unknownUser",e.ACCESS_ERROR="accessError",e.ERROR="error"}(Id||(Id={}));const Cd={externalPlaybackPossible:!1,externalPlaybackActivatedPopupVisible:!1,externalPlayerConfig:void 0,playerList:[],playerListStatus:Id.CLOSED,playerCsrfToken:void 0};let Nd,wd;!function(e){e.SEEK_TO_LIVE="SEEK_TO_LIVE",e.TIMELINE="TIMELINE",e.KEYBOARD="KEYBOARD",e.DOUBLE_TAP="DOUBLE_TAP",e.MOBILE_UI="MOBILE_UI"}(Nd||(Nd={})),function(e){e.DEFAULT="DEFAULT",e.PROGRESS="PROGRESS",e.COMPLETED="COMPLETED"}(wd||(wd={}));const Dd=e=>Pd.every(t=>e.includes(t));var Ld=r(21);const kd=Ld.a?"":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let Md;!function(e){e.USER_VOLUME="yandexJSPlayerApiSavedUserAdjustedVolume",e.VOLUME="yandexJSPlayerApiSavedUserVolume",e.MUTED="yandexJSPlayerApiSavedUserMuted",e.SINGLE_VIDEO_SESSION_WATCHED_TIME_SINCE_AD="yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAd",e.SINGLE_VIDEO_SESSION_WATCHED_TIME_SINCE_AD_UTC_TIMESTAMP="yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAdUtcTimestamp"}(Md||(Md={}));const Vd=K(window);r(56),r(40);var Ud=r(20);const Fd=[];class xd{static enableConsole(){xd.consoleEnabled=!0,xd.log("YA PLAYER VERSION: 1.0-6810")}static log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xd.consoleEnabled&&console.log(G(...t)),xd.addToHistory("log",t)}static warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xd.consoleEnabled&&console.warn(G(...t)),xd.addToHistory("warn",t)}static error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xd.consoleEnabled&&console.error(G(...t)),xd.addToHistory("error",t)}static getHistory(){return[...Fd]}static addToHistory(e,t){Fd.length>=150&&Fd.shift(),Fd.push("["+e+"]["+Date.now()+"] "+t.map(e=>{try{return Object(Ud.a)(e)}catch(e){return JSON.stringify(["stringify_error",e.stack])}}).join())}}xd.consoleEnabled=void 0;const Hd=e=>"m3u8"===Object(Ll.c)(e.toLocaleLowerCase()),jd=e=>"mpd"===Object(Ll.c)(e.toLocaleLowerCase()),Bd=e=>"mp4"===Object(Ll.c)(e.toLocaleLowerCase()),Yd=Y(5);var Kd=r(36);let Gd;!function(e){e.play="play",e.pause="pause",e.seek="seek",e.setSource="setSource",e.sendPosition="sendPosition",e.getPosition="getPosition",e.setVolume="setVolume",e.setMuted="setMuted",e.setFullscreen="setFullscreen",e.setPlaybackRate="setPlaybackRate",e.setVideoTrack="setVideoTrack",e.setAudioTrack="setAudioTrack",e.setTextTrack="setTextTrack",e.setNativeTextTrackVisibility="setNativeTextTrackVisibility",e.setNativeAdControlsVisibility="setNativeAdControlsVisibility",e.setHiddenControls="setHiddenControls",e.setVideoStyle="setVideoStyle",e.setPictureInPictureEnabled="setPictureInPictureEnabled",e.setExternalVisualState="setExternalVisualState",e.getExternalVisualState="getExternalVisualState",e.getConfig="getConfig",e.sendDebugInfo="sendDebugInfo",e.requestDebugInfo="requestDebugInfo",e.callFeatureAction="callFeatureAction",e.setTitleSettings="setTitleSettings",e.xhrRequest="xhrRequest",e.stopAd="stopAd",e.playInrollAd="playInrollAd",e.skipAdPod="skipAdPod",e.destroy="destroy",e.setLogoWidgetExpanded="setLogoWidgetExpanded",e.setLogoWidgetActionCompleted="setLogoWidgetActionCompleted",e.addPromoConfig="addPromoConfig",e.logDelta="logDelta",e.insertIntoCalled="insertIntoCalled"}(Gd||(Gd={}));let Wd=0;var Xd=r(16);let qd,Qd,zd;!function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS"}(qd||(qd={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.YANDEX_RPC_ERROR="YANDEX_RPC_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_LOADER_INIT_ERROR="AD_LOADER_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.PUBLIC_API_CALL_ERROR="PUBLIC_API_CALL_ERROR",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.MPD_SHAKA_INIT_ERROR="MPD_SHAKA_INIT_ERROR",e.MPD_NOT_SUPPORTED_ERROR="MPD_NOT_SUPPORTED_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.HLS_JS_INVALID_MANIFEST_URL="HLS_JS_INVALID_MANIFEST_URL",e.HLS_CONTROLLER_SCRIPT_LOAD_ERROR="HLS_CONTROLLER_SCRIPT_LOAD_ERROR",e.MPD_CONTROLLER_SCRIPT_LOAD_ERROR="MPD_CONTROLLER_SCRIPT_LOAD_ERROR",e.YANDEX_CONTROLLER_SCRIPT_LOAD_ERROR="YANDEX_CONTROLLER_SCRIPT_LOAD_ERROR",e.MP4_CONTROLLER_SCRIPT_LOAD_ERROR="MP4_CONTROLLER_SCRIPT_LOAD_ERROR",e.REFRESH_SUBTITLES_ERROR="REFRESH_SUBTITLES_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.AD_CANNOT_FIND_CONTAINER_TO_PLAY="AD_CANNOT_FIND_CONTAINER_TO_PLAY",e.RAA_TAKING_2SEC="RAA_TAKING_2SEC",e.RAA_TAKING_10SEC="RAA_TAKING_10SEC",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.PREROLL_ERROR="PREROLL_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.UNEXPECTED_FEATURE_NAME="UNEXPECTED_FEATURE_NAME",e.UNEXPECTED_FEATURE_ACTION_NAME="UNEXPECTED_FEATURE_ACTION_NAME",e.NO_PARAMS_IN_FEATURE_ACTION="NO_PARAMS_IN_FEATURE_ACTION",e.FEATURE_ACTION_DISPATCH_ERROR="FEATURE_ACTION_DISPATCH_ERROR",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REQUIRED_FEATURE_IS_NOT_IN_BUNDLE="REQUIRED_FEATURE_IS_NOT_IN_BUNDLE",e.TANKER_KEY_ERROR="TANKER_KEY_ERROR",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.SHAKA_FILTER_ERROR="SHAKA_FILTER_ERROR",e.SHAKA_CONFIGURE_ERROR="SHAKA_CONFIGURE_ERROR",e.AVPLAY_ERROR_PLAYER_ERROR_NONE="AVPLAY_ERROR_PLAYER_ERROR_NONE",e.AVPLAY_ERROR_PLAYER_ERROR_INVALID_PARAMETER="AVPLAY_ERROR_PLAYER_ERROR_INVALID_PARAMETER",e.AVPLAY_ERROR_PLAYER_ERROR_NO_SUCH_FILE="AVPLAY_ERROR_PLAYER_ERROR_NO_SUCH_FILE",e.AVPLAY_ERROR_PLAYER_ERROR_INVALID_OPERATION="AVPLAY_ERROR_PLAYER_ERROR_INVALID_OPERATION",e.AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FILE="AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FILE",e.AVPLAY_ERROR_PLAYER_ERROR_SEEK_FAILED="AVPLAY_ERROR_PLAYER_ERROR_SEEK_FAILED",e.AVPLAY_ERROR_PLAYER_ERROR_INVALID_STATE="AVPLAY_ERROR_PLAYER_ERROR_INVALID_STATE",e.AVPLAY_ERROR_PLAYER_ERROR_INVALID_URI="AVPLAY_ERROR_PLAYER_ERROR_INVALID_URI",e.AVPLAY_ERROR_PLAYER_ERROR_CONNECTION_FAILED="AVPLAY_ERROR_PLAYER_ERROR_CONNECTION_FAILED",e.AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FORMAT="AVPLAY_ERROR_PLAYER_ERROR_NOT_SUPPORTED_FORMAT",e.AVPLAY_ERROR_PLAYER_ERROR_GENERIC="AVPLAY_ERROR_PLAYER_ERROR_GENERIC",e.AVPLAY_DRM_ERROR="AVPLAY_DRM_ERROR",e.AVPLAY_ERROR_UNKNOWN_ERROR="AVPLAY_ERROR_UNKNOWN_ERROR",e.AVPLAY_ERROR_PREPARE_ASYNC_TIMEOUT="AVPLAY_ERROR_PREPARE_ASYNC_TIMEOUT",e.AVPLAY_ERROR_SEEK_TO_TIMEOUT="AVPLAY_ERROR_SEEK_TO_TIMEOUT",e.WEBOS_ERROR_UNKNOWN_ERROR="WEBOS_ERROR_UNKNOWN_ERROR",e.WEBOS_DRM_ERROR_DRM_TYPE_NOT_SUPPORTED="WEBOS_DRM_ERROR_DRM_TYPE_NOT_SUPPORTED",e.WEBOS_DRM_ERROR_RESULT_OF_SEND_DRM_MESSAGE_EMPTY="WEBOS_DRM_ERROR_RESULT_OF_SEND_DRM_MESSAGE_EMPTY",e.WEBOS_DRM_ERROR_UNEXPECTED_ERROR="WEBOS_DRM_ERROR_UNEXPECTED_ERROR",e.PLAYSTATION_STREAMING_ERROR_CONNECTION_FAILED="PLAYSTATION_STREAMING_ERROR_CONNECTION_FAILED",e.PLAYSTATION_STREAMING_ERROR_HTTP_STATUS_FAIL="PLAYSTATION_STREAMING_ERROR_HTTP_STATUS_FAIL",e.PLAYSTATION_STREAMING_ERROR_UNEXPECTED_ERROR="PLAYSTATION_STREAMING_ERROR_UNEXPECTED_ERROR",e.PLAYSTATION_PLAYER_ERROR_VIDEO_ERROR="PLAYSTATION_PLAYER_ERROR_VIDEO_ERROR",e.PLAYSTATION_PLAYER_ERROR_DRM_ERROR="PLAYSTATION_PLAYER_ERROR_DRM_ERROR",e.PLAYSTATION_PLAYER_ERROR_UNEXPECTED_ERROR="PLAYSTATION_PLAYER_ERROR_UNEXPECTED_ERROR",e.ORSAY_ERROR_UNKNOWN_ERROR="ORSAY_ERROR_UNKNOWN_ERROR",e.ORSAY_ERROR_UNSUPPORTED_CONTAINER="ORSAY_ERROR_UNSUPPORTED_CONTAINER",e.ORSAY_ERROR_UNSUPPORTED_VIDEO_CODEC="ORSAY_ERROR_UNSUPPORTED_VIDEO_CODEC",e.ORSAY_ERROR_UNSUPPORTED_AUDIO_CODEC="ORSAY_ERROR_UNSUPPORTED_AUDIO_CODEC",e.ORSAY_ERROR_UNSUPPORTED_VIDEO_RESOLUTION="ORSAY_ERROR_UNSUPPORTED_VIDEO_RESOLUTION",e.ORSAY_ERROR_UNSUPPORTED_VIDEO_FRAMERATE="ORSAY_ERROR_UNSUPPORTED_VIDEO_FRAMERATE",e.ORSAY_ERROR_CORRUPTED_STREAM="ORSAY_ERROR_CORRUPTED_STREAM",e.ORSAY_ERROR_UNEXPECTED_ERROR="ORSAY_ERROR_UNEXPECTED_ERROR",e.ORSAY_ERROR_AUTHENTICATION_FAILED="ORSAY_ERROR_AUTHENTICATION_FAILED",e.ORSAY_ERROR_NETWORK_DISCONNECTED="ORSAY_ERROR_NETWORK_DISCONNECTED",e.ORSAY_ERROR_CONNECTION_FAILED="ORSAY_ERROR_CONNECTION_FAILED",e.ORSAY_ERROR_STREAM_NOT_FOUND="ORSAY_ERROR_STREAM_NOT_FOUND",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(Qd||(Qd={})),function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.SHAKA_VIDEO_ERROR_3016="shaka.VIDEO_ERROR_3016",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032="shaka.CONTENT_UNSUPPORTED_BY_BROWSER_4032",e.BUFFER_APPEND_ERROR="bufferAppendError",e.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015="shaka.MEDIA_SOURCE_OPERATION_THREW_3015",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.SHAKA_DASH_INVALID_XML_4001="shaka.DASH_INVALID_XML_4001",e.SHAKA_QUOTA_EXCEEDED_ERROR_3017="shaka.QUOTA_EXCEEDED_ERROR_3017",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014="shaka.MEDIA_SOURCE_OPERATION_FAILED_3014",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012="shaka.RESTRICTIONS_CANNOT_BE_MET_4012",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST="shaka.BAD_HTTP_STATUS_1001_MANIFEST",e.SHAKA_HTTP_ERROR_1002_SEGMENT="shaka.HTTP_ERROR_1002_SEGMENT",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.SHAKA_HTTP_ERROR_1002_MANIFEST="shaka.HTTP_ERROR_1002_MANIFEST",e.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT="shaka.BAD_HTTP_STATUS_1001_SEGMENT",e.SHAKA_UNSUPPORTED_SCHEME_1000="shaka.UNSUPPORTED_SCHEME_1000",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.SHAKA_TIMEOUT_1003_SEGMENT="shaka.TIMEOUT_1003_SEGMENT",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.SHAKA_TIMEOUT_1003_MANIFEST="shaka.TIMEOUT_1003_MANIFEST",e.SHAKA_TIMEOUT_1003_LICENSE="shaka.TIMEOUT_1003_LICENSE",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.SHAKA_OPERATION_ABORTED_7001="shaka.OPERATION_ABORTED_7001",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.SHAKA_REQUEST_FILTER_ERROR_1006="shaka.REQUEST_FILTER_ERROR_1006",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.SHAKA_NO_LICENSE_SERVER_GIVEN_6012="shaka.NO_LICENSE_SERVER_GIVEN_6012",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.SHAKA_FAILED_TO_CREATE_CDM_6002="shaka.FAILED_TO_CREATE_CDM_6002",e.SHAKA_HTTP_ERROR_1002_LICENSE="shaka.HTTP_ERROR_1002_LICENSE",e.SHAKA_LICENSE_REQUEST_FAILED_6007="shaka.LICENSE_REQUEST_FAILED_6007",e.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006="shaka.FAILED_TO_GENERATE_LICENSE_REQUEST_6006",e.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001="shaka.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001",e.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003="shaka.FAILED_TO_ATTACH_TO_VIDEO_6003",e.SHAKA_LICENSE_RESPONSE_REJECTED_6008="shaka.LICENSE_RESPONSE_REJECTED_6008",e.SHAKA_INVALID_SERVER_CERTIFICATE_6004="shaka.INVALID_SERVER_CERTIFICATE_6004",e.SHAKA_EXPIRED_6014="shaka.EXPIRED_6014",e.SHAKA_BAD_HTTP_STATUS_1001_LICENSE="shaka.BAD_HTTP_STATUS_1001_LICENSE",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM"}(zd||(zd={}));const Jd=r(50);class $d extends Error{constructor(e,t){const r="object"===typeof e?e:{message:String(e)};if(super(String(r.message)),this.message=void 0,this.messageDetails=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.vsid=void 0,Jd(this,$d.prototype),this.message=r.message||this.message,this.messageDetails=r.messageDetails,this.code=r.code||0,this.category=z(this.code),this.details=r.details,this.isFatal=void 0===r.isFatal||r.isFatal,this.stack=r.stack&&"?:?:?"!==r.stack?r.stack:this.details&&this.details.stack||((e,t)=>{const{url:r,line:n,col:i,fileName:o,columnNumber:a,lineNumber:s}=e;return String(t||(r||o||"?")+":"+(n||s||"?")+":"+(i||a||"?"))})(r,this.stack),!this.stack||this.stack===Xd.a.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack||Xd.a.stack}this.vsid=t||r.vsid}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid};return J({},e,{raw:JSON.stringify(e)})}}var Zd=r(18);const eu=e=>e instanceof Date||"Date"===Object(jc.a)(e),tu=e=>{let t=e;return Object(Zd.a)(e)?[].concat(e).map(e=>tu(e)):eu(e)?new Date(e.getTime()):(!Object(Bc.a)(e)&&Object(kl.a)(e)&&(t={},Object(hc.a)(e,(e,r)=>{t[r]=tu(e)})),t)};class ru{static getDataFromPostMessageEvent(e){let{data:t}=e;if("object"!==typeof t)throw new $d("IFrameMessageEvent must be an object");const{id:r,batch:n}=t;if("string"!==typeof r||0===r.length)throw new $d('message must have "id" parameter');if(!n||!Array.isArray(n))throw new $d("#batch value must be an array");return{id:r,batch:n}}constructor(e){let{id:t,sender:r,receiver:n,syncMode:i=!1,internal:o=!1}=e;this.onCommand=new Lc,this.onAnswer=new Lc,this.onEvent=new Lc,this.onError=new Lc,this.id=void 0,this.key=void 0,this.abortRequestMap=Object.create(null),this.sender=void 0,this.receiver=void 0,this.sendPromise=void 0,this.messagesBatch=[],this.receiverCallback=void 0,this.id=t,this.key=void 0,this.sender=r,this.receiver=n;const a=e=>{const{id:t,batch:r}=e;t===this.id&&r.forEach(e=>{let{answer:t,command:r,event:n}=e;if(t&&void 0!==t.requestId&&this.onAnswer.dispatch(t),n&&this.onEvent.dispatch(n),!r)return;const a=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(r,["requestId"]),s=$({},o&&i?tu(a):a,{sendAnswer:e=>{this.sendAnswer(e,r.requestId)}});this.onCommand.dispatch(s)})};this.receiverCallback=e=>{let t;try{t=ru.getDataFromPostMessageEvent(e)}catch(e){return}a(t)},this.key&&(n[this.key]=a),n.addEventListener("message",this.receiverCallback)}sendEvent(e,t){let{data:r,sourceId:n}=t;const i={eventName:e,data:r,sourceId:n};this.sendPostMessage({event:i})}sendCommand(e,t){const r={commandName:e,params:t};this.sendPostMessage({command:r})}sendRequest(e,t,r){void 0===r&&(r=6e4);const n={commandName:e,params:t,requestId:Wd++},i=this.waitForAnswer(n,r);return this.sendPostMessage({command:n}),i}destroy(){this.receiver.removeEventListener("message",this.receiverCallback),this.onCommand.removeAll(),this.onAnswer.removeAll(),this.onEvent.removeAll(),this.onError.removeAll(),Object(hc.a)(this.abortRequestMap,e=>e())}waitForAnswer(e,t){let r,n=rc.a;const i=()=>{clearTimeout(r),n(),delete this.abortRequestMap[e.requestId]};return new Promise(o=>{r=window.setTimeout(()=>{const t=this.abortRequestMap[e.requestId];"function"===typeof t&&t()},t),n=this.onAnswer.add(t=>{t.requestId===e.requestId&&(i(),o(t.data))}),this.abortRequestMap[e.requestId]=i})}sendAnswer(e,t){void 0===t&&(t=-1);const r={data:e,requestId:t};this.sendPostMessage({answer:r})}sendPostMessage(e){let{event:t,command:r,answer:n}=e;this.messagesBatch.push({event:t,answer:n,command:r}),this.planRealSend()}safeSendClonedData(e,t){try{this.sender.postMessage(JSON.parse(JSON.stringify(e)),t)}catch(e){this.onError.dispatch(e)}}sendPostMessageBatch(){const e={id:this.id,batch:this.messagesBatch};try{this.sender.postMessage(e,"*")}catch(t){this.safeSendClonedData(e,"*")}}planRealSend(){void 0===this.sendPromise&&(this.sendPromise=Promise.resolve().then(()=>{this.sendPostMessageBatch(),this.sendPromise=void 0,this.messagesBatch=[]}).catch(()=>{this.sendPromise=void 0,this.messagesBatch=[]}))}}const nu=Object(Ll.g)(window.location.href).hostname.split(".").reverse()[0];class iu{static performRealRequest(e){const t=function(e){let t,r=rc.a,n=0;const i=e=>{n=e.status,t=e.response};return{promise:new Promise((t,n)=>{Object(Kd.a)(Q({},e,{onSuccess:e=>{i(e),t(e)},onError:(e,t)=>{i(t),n(e)},onAbort:n,onSetup:e=>{let{abort:t}=e;return r=t}}))}),abort:e=>r(e),getStatus:()=>n,getResponse:()=>t}}(Z({},e,{url:(r=e.url,r.replace(/<tld>/g,nu))}));var r;return{promise:t.promise.then(e=>e.responseText).catch(e=>{throw e.status=t.getStatus(),e}),abort:t.abort}}constructor(e){let{sender:t,receiver:r}=e;this.postMessenger=void 0,this.postMessenger=new ru({id:"external-request-controller",sender:t,receiver:r}),this.attachListeners()}destroy(){this.postMessenger.destroy()}request(e){return this.postMessenger.sendRequest(Gd.xhrRequest,e).then(e=>{let{success:t,error:r,data:n}=e;if(r)throw n;return n})}attachListeners(){this.postMessenger.onCommand.add(e=>{e.commandName===Gd.xhrRequest&&iu.performRealRequest(e.params).promise.then(t=>{e.sendAnswer({success:!0,data:t})}).catch(t=>{const r={message:t.message,stack:t.stack,status:t.status};e.sendAnswer({error:!0,data:r})})})}}const ou=NaN;let au;!function(e){e[e.XS=340]="XS",e[e.S=440]="S",e[e.M=980]="M",e[e.L=1e5]="L"}(au||(au={}));const su=ne();var lu=r(37);const cu=function(e){void 0===e&&(e=window);const{platform:t=""}=e.navigator||{};return function(e){void 0===e&&(e=window);const{vendor:t=""}=e.navigator||{};return 0===t.indexOf("Google")}(e)&&!ne(e)&&0===t.indexOf("Linux ")&&Object(lu.a)(e)}(),du=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,uu=cu||su||Jc||du;let hu;!function(e){e.Space="Space",e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowRight="ArrowRight",e.ArrowLeft="ArrowLeft",e.KeyF="KeyF",e.Tab="Tab",e.Escape="Escape",e.Enter="Enter"}(hu||(hu={}));const pu={9:hu.Tab,13:hu.Enter,27:hu.Escape,32:hu.Space,37:hu.ArrowLeft,38:hu.ArrowUp,39:hu.ArrowRight,40:hu.ArrowDown,70:hu.KeyF},fu=["keyup","keydown"],Eu=["mousemove","click","dblclick","mouseenter","mouseleave","contextmenu"],Au=["touchstart","touchend","longtouch"];class vu extends Dc{constructor(){super(...arguments),this.onEvent=new Lc}}class yu extends vu{constructor(e){super(),this.clickElement=e,this.createKeyboardEventHandler=e=>t=>{const r="code"in(n=t)&&n.code?n.code in hu?n.code:void 0:pu[n.which||n.keyCode];var n;void 0!==r&&(r!==hu.Tab&&t.preventDefault(),this.onEvent.dispatch({type:e,event:{keyName:r,preventDefault:rc.a}}))},this.createMouseEventHandler=e=>"contextmenu"===e?e=>this.handleContextMenuMouseEvent(e):t=>this.handleMouseEvent(e,t),this.handleMouseEvent=(e,t)=>{if(!(r=t.target)||r.ownerDocument&&r.ownerDocument.compareDocumentPosition(r)&r.DOCUMENT_POSITION_DISCONNECTED)return;var r;const{clientX:n,clientY:i}=function(e,t){const{top:r,left:n}=e.getBoundingClientRect();return{clientX:t.clientX-n,clientY:t.clientY-r}}(this.clickElement,t);this.onEvent.dispatch({type:e,event:{clientX:n,clientY:i,preventDefault:rc.a}})},this.handleContextMenuMouseEvent=e=>{e.ctrlKey||e.altKey||(e.preventDefault(),this.handleMouseEvent("contextmenu",e))},this.handleLongTouch=e=>{const t=[{clientX:0,clientY:0}],r={touches:e&&"touches"in e?e.touches:t,changedTouches:e&&"changedTouches"in e?e.changedTouches:t,cancelable:!1,preventDefault:rc.a};this.handleTouchEvent("longtouch",r)},this.createTouchEventHandler=e=>t=>this.handleTouchEvent(e,t),this.handleTouchEvent=(e,t)=>{const{touches:r,changedTouches:n}=function(e,t){const{top:r,left:n}=e.getBoundingClientRect();return{touches:Array.from(t.touches).map(e=>{let{clientX:t,clientY:i}=e;return{clientX:t-n,clientY:i-r}}),changedTouches:Array.from(t.changedTouches).map(e=>{let{clientX:t,clientY:i}=e;return{clientX:t-n,clientY:i-r}})}}(this.clickElement,t);this.onEvent.dispatch({type:e,event:{touches:r,changedTouches:n,preventDefault:()=>{try{if(!t.cancelable)return;t.preventDefault()}catch(e){}}}})},Eu.forEach(t=>{"contextmenu"===t&&uu||this.addDestroyHandler(d(e,t,this.createMouseEventHandler(t)))}),Au.forEach(t=>{"longtouch"!==t?this.addDestroyHandler(d(e,t,this.createTouchEventHandler(t),{capture:!0,passive:!1})):this.addDestroyHandler(v(e,this.handleLongTouch,{touchesCount:2,handleContextmenu:!1}))}),fu.forEach(t=>{this.addDestroyHandler(d(e,t,this.createKeyboardEventHandler(t)))})}}let Su;!function(e){e.Click="click",e.DoubleClick="dblclick",e.MouseMove="mousemove",e.MouseEnter="mouseenter",e.MouseLeave="mouseleave",e.ContextMenu="contextmenu"}(Su||(Su={}));const gu=Sd(300,3/4);class mu extends Dc{static calculateEventSlop(e,t){let{event:r}=e,{event:n}=t;const i=r.touches[0]||r.changedTouches[0],o=n.touches[0]||n.changedTouches[0],a=Math.abs(i.clientX-o.clientX),s=Math.abs(i.clientY-o.clientY);return a*a+s*s}constructor(e){super(),this.params=e,this.onEvent=new Lc,this.timeoutId=void 0,this.firstTouchStartEvent=void 0,this.firstTouchStopEvent=void 0,this.secondTouchStartEvent=void 0,this.skipNextClick=!1,this.handleClickerEvent=e=>{if(function(e){return Eu.includes(e.type)}(e)&&this.handleMouseEvent(e),function(e){return Au.includes(e.type)}(e))switch(e.timeStamp=Date.now(),e.type){case"touchstart":this.handleTouchStart(e);break;case"touchend":this.handleTouchEnd(e);break;case"longtouch":this.dispatchEvent(ie({},e,{type:Su.ContextMenu,event:ie({},e.event,oe(e))}))}},this.handleTouchEnd=e=>{this.firstTouchStartEvent&&(this.firstTouchStopEvent||(this.firstTouchStopEvent=e))},this.handleTouchStart=e=>{if(this.skipNextClick=!0,this.firstTouchStartEvent||this.timeoutId){if(this.secondTouchStartEvent)return;{this.secondTouchStartEvent=e;const t=this.isConsideredDoubleTap();this.reset(),t&&this.dispatchEvent(ie({},e,{type:Su.DoubleClick,event:ie({},e.event,oe(e))}))}}else this.firstTouchStartEvent=e,this.timeoutId=window.setTimeout(this.handleTimeout,300)},this.handleTimeout=()=>{const e=Boolean(this.firstTouchStartEvent&&this.firstTouchStopEvent&&!this.secondTouchStartEvent),t=this.areFirstTapsInSameBox(),r=e&&this.firstTouchStopEvent.timeStamp-this.firstTouchStartEvent.timeStamp<=gu,n=e&&t&&r,i=this.firstTouchStopEvent;this.reset(),n&&this.dispatchEvent(ie({},i,{type:Su.Click,event:ie({},i.event,oe(i))}))};const{eventListener:t}=e;this.addDestroyHandler(()=>this.reset()),this.addDestroyHandler(t.onEvent.add(this.handleClickerEvent))}handleMouseEvent(e){this.skipNextClick?e.type===Su.Click&&(this.skipNextClick=!1):this.dispatchEvent(e)}dispatchEvent(e){-1!==e.event.clientX&&-1!==e.event.clientY&&this.onEvent.dispatch(e)}areFirstTapsInSameBox(){if(!this.firstTouchStartEvent||!this.firstTouchStopEvent)return!1;return mu.calculateEventSlop(this.firstTouchStartEvent,this.firstTouchStopEvent)<=32}isConsideredDoubleTap(){if(!this.firstTouchStartEvent||!this.firstTouchStopEvent||!this.secondTouchStartEvent)return!1;if(!this.areFirstTapsInSameBox())return!1;if(!(mu.calculateEventSlop(this.firstTouchStartEvent,this.secondTouchStartEvent)<=300))return!1;return!(this.secondTouchStartEvent.timeStamp-this.firstTouchStartEvent.timeStamp>300)}reset(){window.clearTimeout(this.timeoutId),this.timeoutId=void 0,this.firstTouchStartEvent=void 0,this.firstTouchStopEvent=void 0,this.secondTouchStartEvent=void 0}}class Tu extends Dc{constructor(e){super(),this.clickElement=e;const t=new yu(this.clickElement);this.addDestroyHandler(()=>t.destroy());const r=new mu({eventListener:t});this.addDestroyHandler(()=>r.destroy()),this.addDestroyHandler(r.onEvent.add(e=>{e.type===Su.DoubleClick&&e.event.preventDefault()}))}}var Ru;!function(e){e.AdStarted="AdStarted",e.AdStartRejected="AdStartRejected",e.AdPlayingStateChange="AdPlayingStateChange",e.AdPodStarted="AdPodStarted",e.AdPodImpression="AdPodImpression",e.AdPodVideoFirstQuartile="AdPodVideoFirstQuartile",e.AdPodVideoMidpoint="AdPodVideoMidpoint",e.AdPodVideoThirdQuartile="AdPodVideoThirdQuartile",e.AdRemainingTimeChange="AdRemainingTimeChange",e.AdPodSkipped="AdPodSkipped",e.AdClickThru="AdClickThru",e.AdPodStopped="AdPodStopped",e.AdPodComplete="AdPodComplete",e.AdPodClose="AdPodClose",e.AdPodError="AdPodError",e.AdStopped="AdStopped",e.AllAdPodVideoComplete="AllAdPodVideoComplete",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeChange="AdVolumeChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange",e.AdContentSizeChange="AdContentSizeChange",e.AdPodCloseStateChange="AdPodCloseStateChange",e.AdTuneStateChange="AdTuneStateChange",e.AdInteraction="AdInteraction",e.AdMediaStateChange="AdMediaStateChange"}(Ru||(Ru={}));class _u extends Cc.a{constructor(e,t){super(e,t),this.category=void 0,this.toJSON=void 0,this.category=z(this.code),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:Object(Yc.a)(()=>Object(Bl.a)(this.details)?this.details:JSON.stringify(this.details))||this.details,stack:this.stack,category:this.category})}}class Ou extends _u{constructor(e,t){super(e,t)}}let Pu,bu,Iu;!function(e){e.BroadcastAdReceived="BroadcastAdReceived",e.BroadcastAdInit="BroadcastAdInit",e.StreamPlayerReceivedMetadata="StreamPlayerReceivedMetadata",e.StreamPlayerChooseMetadata="StreamPlayerChooseMetadata",e.PlayWithoutRAAResults="PlayWithoutRAAResults",e.CanPlay="CanPlay",e.ContentImpression="ContentImpression",e.WaitForPlayCompleted="WaitForPlayCompleted",e.DrmSystemsSupportDetected="DrmSystemsSupportDetected",e.InrollAdStart="InrollAdStart",e.InrollAdPodStart="InrollAdPodStart",e.InrollAdPodEnd="InrollAdPodEnd",e.InrollAdEnd="InrollAdEnd",e.PlayAdViewers="PlayAdViewers",e.AdStart="AdStart",e.AdPodLoading="AdPodLoading",e.AdPodError="AdPodError",e.AdPodEnd="AdPodEnd",e.AdEnd="AdEnd",e.AdClickThru="AdClickThru",e.NoAdPodsToPlayAd="NoAdPodsToPlayAd",e.Stalled="Stalled",e.LoadSource="LoadSource",e.PrerollInit="PrerollInit",e.WaitForUserGesture="WaitForUserGesture",e.WaitForDocumentVisibility="WaitForDocumentVisibility",e.CallPublicApiAfterDestroy="CallPublicApiAfterDestroy",e.HiddenAutoplayPrevented="HiddenAutoplayPrevented",e.PlayVideoOnVisibilityChange="PlayVideoOnVisibilityChange",e.PauseVideoOnVisibilityChange="PauseVideoOnVisibilityChange",e.StreamStopWhileLoadingMultiroll="StreamStopWhileLoadingMultiroll",e.StreamStopWhileChoosingStream="StreamStopWhileChoosingStream",e.StreamStopWhileDestroyVideoController="StreamStopWhileDestroyVideoController",e.StreamStopDuringDefineAutoplaySettings="StreamStopDuringDefineAutoplaySettings",e.StreamStopWhileWaitingForPlay="StreamStopWhileWaitingForPlay",e.StreamStopWhileWaitingForDocumentVisibility="StreamStopWhileWaitingForDocumentVisibility",e.StreamStopWhileLoadingPreroll="StreamStopWhileLoadingPreroll",e.StreamStopWhilePreloadingPreroll="StreamStopWhilePreloadingPreroll",e.SkippableFragmentWidgetDrawn="SkippableFragmentWidgetDrawn",e.SkippableFragmentWidgetHidden="SkippableFragmentWidgetHidden",e.HlsJsLoadSourceCalledTwice="HlsJsLoadSourceCalledTwice",e.PreloadSource="PreloadSource",e.UsePreloadedHlsJs="UsePreloadedHlsJs",e.PlayAfterWaitingForDocumentVisibility="PlayAfterWaitingForDocumentVisibility",e.ResourcesIdle="ResourcesIdle",e.HlsJsForceCappingStart="HlsJsForceCappingStart",e.CanRenderSkinCalledBeforeSkinIsReady="CanRenderSkinCalledBeforeSkinIsReady",e.ExternalPlaybackOpenButtonClick="ExternalPlaybackOpenButtonClick",e.ExternalPlaybackCloseButtonClick="ExternalPlaybackCloseButtonClick",e.ExternalPlayerListVisibleStatusChange="ExternalPlayerListVisibleStatusChange",e.ExternalPlaybackPlayerCsrfFetching="ExternalPlaybackPlayerCsrfFetching",e.ExternalPlaybackPlayerCsrfFetchSuccess="ExternalPlaybackPlayerCsrfFetchSuccess",e.ExternalPlaybackPlayerCsrfFetchError="ExternalPlaybackPlayerCsrfFetchError",e.ExternalPlaybackPlayerListHasAnyDevice="ExternalPlaybackPlayerListHasAnyDevice",e.ExternalPlaybackPlayerListFetching="ExternalPlaybackPlayerListFetching",e.ExternalPlaybackPlayerListFetchSuccess="ExternalPlaybackPlayerListFetchSuccess",e.ExternalPlaybackPlayerListFetchError="ExternalPlaybackPlayerListFetchError",e.ExternalPlaybackPlayerListAboutInfoClick="ExternalPlaybackPlayerListAboutInfoClick",e.ExternalPlaybackPlayerListRefresh="ExternalPlaybackPlayerListRefresh",e.ExternalPlaybackPlayerActivate="ExternalPlaybackPlayerActivate",e.ExternalPlaybackPlayerActivateSucceed="ExternalPlaybackPlayerActivateSucceed",e.ExternalPlaybackPlayerActivateFailed="ExternalPlaybackPlayerActivateFailed",e.ExternalPlaybackCsrfTokenExpired="ExternalPlaybackCsrfTokenExpired",e.YandexRpcError="YandexRpcError",e.YandexAndroidVsidChanged="YandexAndroidVsidChanged",e.Seek="Seek",e.RecommendationsSetParams="RecommendationsSetParams",e.RecommendationSelect="RecommendationSelect",e.RecommendationsWidgetVisibilityChange="RecommendationsWidgetVisibilityChange",e.RepresentationsChange="RepresentationsChange",e.MediaInternalsHistoryOnFatal="MediaInternalsHistoryOnFatal",e.PlayInrollAd="PlayInrollAd",e.ShareButtonClick="ShareButtonClick",e.FPSControllerRestrictions="FPSControllerRestrictions"}(Pu||(Pu={})),function(e){e.preroll="preroll",e.midroll="midroll",e.overlay="overlay",e.postroll="postroll",e.notReplaced="notReplaced",e.inroll="inroll",e.inrollOverlay="inroll-overlay",e.intro="intro",e.jingle="jingle",e.overlaySelfPromo="overlaySelfPromo"}(bu||(bu={})),function(e){e.AdCompleted="AdCompleted",e.LoadSource="LoadSource",e.PlayerDestroy="PlayerDestroy",e.CutOff="CutOff",e.PlayerError="PlayerError",e.AdTypeChange="AdTypeChange",e.InsertIntoCalled="InsertIntoCalled"}(Iu||(Iu={}));const Cu={play:fd.PLAY,pause:fd.PAUSE,end:fd.END,idle:fd.PAUSE};class Nu extends Dc{constructor(e){super(),this.params=e,this.destroyPromise=new Promise(e=>{this.addDestroyHandler(()=>{e()})}),this.currentAdPlaybackController=void 0,this.playbackQueue=[],this.logAdStart=Object(Hc.a)(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;r({event:Pu.AdStart,params:{adPodsCount:t,adType:e}}),e===bu.inroll&&r({event:Pu.InrollAdStart,params:{adPodsCount:t}})}),this.logAdEnd=Object(Hc.a)(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;e===bu.inroll&&r({event:Pu.InrollAdEnd,params:{adPodsCount:t}}),r({event:Pu.AdEnd,params:{stopAdReason:this.destroyReason||Iu.AdCompleted,adPodsCount:t,adType:e}})}),this.adPodIndex=0,this.startPlayingAd=Object(Hc.a)(async()=>{for(this.logAdStart();this.adPodIndex<this.playbackQueue.length&&!this.isDestroyed;)await this.playAdPod(this.playbackQueue[this.adPodIndex]),this.adPodIndex++;this.logAdEnd(),this.destroy(Iu.AdCompleted)}),this.dispatchOnFirstAdPodStarted=Object(Hc.a)(()=>{this.params.onFirstAdPodStarted()}),this.updateAdPodCloseState=e=>{this.params.onAdPodCloseStateChange(e.getAdPodCloseState())},this.updateAdVolumeAvailabilityStateChange=e=>{this.params.onAdVolumeAvailabilityStateChange(e.getAdVolumeAvailabilityState())},this.updateAdPodTimeToSkip=e=>{const t=e.getAdPodTimeToSkip();this.params.onAdPodTimeToSkipChange(b(t)?Y(Math.ceil(t)):void 0)},this.playAdPod=async e=>{let{adType:t,adViewer:r,additionalData:n,adDisplayConfig:i,adElementsSet:o}=e;if(0===r.getAdPodsCount())return void xd.log("AdViewer is empty");const{logEvent:a}=this.params;if(a({event:Pu.AdPodLoading,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}}),t===bu.inroll){const{cueId:e}=n;a({event:Pu.InrollAdPodStart,params:{adPodsCount:this.playbackQueue.length,cueId:e}}),r.setStatsRootFields({cueid:e})}const s=r.createPlaybackController(o.videoSlotElement,o.adSlotElement,ae({videoSlotCanAutoPlay:!0,controlsSettings:this.params.getControlsSettings()},i));this.currentAdPlaybackController=s,this.updateAdPodDuration(s),this.params.onAdPodCurrentTimeChange(Y(0)),this.params.onAdSkippableStateChange(s.getAdSkippableState()),this.updateAdPodCloseState(s),this.updateAdVolumeAvailabilityStateChange(s),s.subscribe(Ru.AdPlayingStateChange,()=>{this.updateAdPodPlayingStateChange()}),s.subscribe(Ru.AdRemainingTimeChange,()=>{const e=s.getAdPodRemainingTime(),t=this.updateAdPodDuration(s);this.params.onAdPodCurrentTimeChange(Y(t-e)),this.updateAdPodTimeToSkip(s),this.updateAdPodPlayingStateChange()}),s.subscribe(Ru.AdInteraction,()=>{this.params.onAdInteraction()}),s.subscribe(Ru.AdSkippableStateChange,e=>{this.updateAdPodTimeToSkip(s),this.params.onAdSkippableStateChange(e.skippableState)}),s.subscribe(Ru.AdPodStarted,()=>{a({event:"AdPodStart",params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}}),this.dispatchOnFirstAdPodStarted(),this.params.onAdPodStarted({adElementsSet:o}),this.updateAdPodPlayingStateChange(),this.updateAdPodDuration(s)});const l=()=>{this.params.onAdPodDurationChange(void 0),this.params.onAdPodCurrentTimeChange(void 0),this.params.onAdSkippableStateChange(!1),this.params.onAdPodTimeToSkipChange(void 0),this.params.onAdPodCloseStateChange(void 0)};s.subscribe(Ru.AdPodStopped,()=>{l(),this.params.onAdPodStopped()}),s.subscribe(Ru.AdPodSkipped,l),s.subscribe(Ru.AdContentSizeChange,()=>{const e=s.getAdContentSize();if(void 0===e)return;const{width:t,height:r}=e;this.params.onAdSizeChange({width:b(t)?t:NaN,height:b(r)?r:NaN})}),s.subscribe(Ru.AdPodImpression,()=>{this.params.onAdPodImpression(),a({event:"AdPodImpression",params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}})}),s.subscribe(Ru.AdPodError,e=>{a({event:"AdPodError",params:ae({},e,{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n})})}),s.subscribe(Ru.AdClickThru,()=>{this.params.onAdClickThru(),a({event:"AdClickThru",params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}})}),s.subscribe(Ru.AdPodCloseStateChange,()=>{this.updateAdPodCloseState(s)}),s.subscribe(Ru.AdVolumeAvailabilityStateChange,()=>{this.updateAdVolumeAvailabilityStateChange(s)}),await new Promise(e=>{s.subscribe(Ru.AdStopped,e),s.playAd(),this.params.onAdPodPlayingStateChange(fd.BUFFERING)}),this.currentAdPlaybackController=void 0,a({event:Pu.AdPodEnd,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}}),t===bu.inroll&&(a({event:Pu.InrollAdPodEnd,params:{adPodsCount:this.playbackQueue.length,cueId:n.cueId}}),r.setStatsRootFields({cueid:void 0}))},this.addDestroyHandler(()=>{this.currentAdPlaybackController&&(this.currentAdPlaybackController.stopAd(),this.currentAdPlaybackController=void 0)})}playAdViewers(e){this.isDestroyed||(this.playbackQueue.push(e),this.addDestroyHandler(()=>{e.adViewer.destroy()}),this.startPlayingAd())}resumeAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.resumeAd(),this.updateAdPodPlayingStateChange())}pauseAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.pauseAd(),this.updateAdPodPlayingStateChange())}skipAdPod(){this.currentAdPlaybackController&&this.currentAdPlaybackController.skipAd()}setVolume(e){this.currentAdPlaybackController&&this.currentAdPlaybackController.setAdVolume(e)}getDestroyPromise(){return this.destroyPromise}getAdTypeForLogs(){const[e]=this.playbackQueue;return e?e.adType:(this.params.onError(new Ou({code:Qd.AD_TYPE_IS_NOT_RECOGNIZED,isFatal:!1})),"unrecognized")}updateAdPodPlayingStateChange(){if(!this.currentAdPlaybackController)return;const e=this.currentAdPlaybackController.getAdPlayingState();this.params.onAdPodPlayingStateChange(Cu[e])}updateAdPodDuration(e){const t=Y(e.getAdPodDuration());return this.params.onAdPodDurationChange(t),t}}var wu={},Du={checkExisting:!0},Lu=0,ku=function(e){return e},Mu=function(e){return e&&"function"===typeof e.dispatch?e.dispatch:e},Vu=function(e){return Array.isArray(e)?e.map(Mu):Mu(e)},Uu=Ee("Batch",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])?t[0]:t})),Fu=Uu.getType(),xu={},Hu=function(e){"function"===typeof console[e]&&(xu[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.pop();Array.isArray(i)&&i.type===Fu?i.forEach((function(t){console[e].apply(console,[].concat(r,[t]))})):(r.push(i),console[e].apply(console,r))})};for(var ju in console)Hu(ju);const Bu=Ee("STORE_AD_CONFIG"),Yu=Ee("STORE_UPDATE_AD_INFO"),Ku=Ee("STORE_PUT_AD_INFO"),Gu=Ee("STORE_PUT_IS_ORIGINAL_BROADCAST_AD_CUE_ID"),Wu=Ee("STORE_PUT_ADBLOCK_DETECTED"),Xu=Ee("STORE_PUT_ORIGINAL_BROADCAST_AD_CUES"),qu=Ee("STORE_REFRESH_CUE"),Qu=Ee("STORE_REMOVE_CUE"),zu=Ee("STORE_PUT_HAS_PREROLL"),Ju=Ee("STORE_PUT_AD_SYNC_INIT"),$u=Ee("STORE_UPDATE_ORIGINAL_AD_STATE"),Zu=Ee("STORE_PUT_NATIVE_AD_CONTROLS_VISIBILITY"),eh=Ee("STORE_PUT_LAST_KNOWN_BANDWIDTH_ESTIMATE"),th=Ee("STORE_AD_PUT_IN_STREAM_PLAYING_STATE"),rh=Ee("STORE_PUT_NEXT_AD_INFO"),nh=Ee("STORE_PUT_ENGINE"),ih=Ee("STORE_PUT_AUTOPLAY"),oh=Ee("STORE_PUT_START_STAGE"),ah=Ee("STORE_PUT_PRELOAD"),sh=Ee("STORE_PUT_ENCODER_STATE"),lh=Ee("STORE_ENCODER_ATTACHED"),ch=Ee("STORE_PUT_VOLUME_INFO"),dh=Ee("STORE_PUT_REQUIRE_USER_GESTURE_TO_UNMUTE"),uh=Ee("STORE_PUT_AUTOPLAY_IMPOSSIBLE"),hh=Ee("STORE_PUT_USER_VOLUME"),ph=Ee("STORE_PUT_DURATION"),fh=Ee("STORE_PUT_VIDEO_SIZES"),Eh=Ee("STORE_PUT_VIDEO_TYPE"),Ah=Ee("STORE_PUT_PLAYING_STATE"),vh=Ee("STORE_PUT_CURRENT_TIME"),yh=Ee("STORE_PUT_CURRENT_TIME_LOW_QUALITY"),Sh=Ee("STORE_PUT_VIDEO_INFO"),gh=Ee("STORE_PUT_FROM"),mh=Ee("STORE_PUT_STREAM"),Th=Ee("STORE_PUT_SOURCE_PARAMS"),Rh=Ee("STORE_UPDATE_SOURCE_ID"),_h=Ee("STORE_PUT_STREAMS"),Oh=Ee("STORE_PUT_STREAMS_WITH_SUPPORT_INFO"),Ph=Ee("STORE_PUT_START_POSITION"),bh=Ee("STORE_PUT_IS_ONLINE"),Ih=Ee("STORE_PUT_FRAGMENT_DURATION"),Ch=Ee("STORE_PUT_PROGRAM_DATE_TIME"),Nh=Ee("STORE_PUT_DVR_START_TIME"),wh=Ee("STORE_PUT_DVR_DURATION"),Dh=Ee("STORE_PUT_INIT_TIME"),Lh=Ee("STORE_PUT_SKIN_DVR_START_TIME"),kh=Ee("STORE_PUT_SKIN_DVR_DURATION"),Mh=Ee("STORE_PUT_PLAYBACK_RATE"),Vh=Ee("STORE_PUT_BUFFERING_RANGES"),Uh=Ee("STORE_PUT_ERROR_INFO"),Fh=Ee("STORE_PUT_LAST_RECOVER_POSITION"),xh=Ee("STORE_PUT_IS_ABR_SUPPORTED"),Hh=Ee("STORE_PUT_IS_ABR_ENABLED"),jh=Ee("STORE_PUT_VIDEO_TRACK"),Bh=Ee("STORE_PUT_VIDEO_TRACKS",e=>[...e].sort(ge)),Yh=Ee("STORE_PUT_USER_VIDEO_TRACK_PARAMS"),Kh=Ee("STORE_PUT_AUDIO_TRACK_VALUE"),Gh=Ee("STORE_PUT_AUDIO_TRACKS"),Wh=Ee("STORE_PUT_USER_AUDIO_TRACK_PARAMS"),Xh=Ee("STORE_PUT_VIDEO_TAG_READY_STATE"),qh=Ee("STORE_PUT_TEXT_TRACKS"),Qh=Ee("STORE_PUT_TEXT_TRACK_ENABLED"),zh=Ee("STORE_PUT_NATIVE_TEXT_TRACK_VISIBILITY"),Jh=Ee("STORE_PUT_TEXT_TRACK_VALUE"),$h=Ee("STORE_PUT_USER_TEXT_TRACK_PARAMS"),Zh=Ee("STORE_CHANGE_TEXT_TRACK_PARAMETERS"),ep=Ee("ENABLE_TEXT_TRACK"),tp=Ee("STORE_PUT_SUBTITLES"),rp=Ee("STORE_PUT_IS_FULLSCREEN"),np=Ee("STORE_PUT_IS_PIP"),ip=Ee("STORE_PUT_IS_VISIBLE"),op=Ee("STORE_PUT_IS_DOCUMENT_VISIBLE"),ap=Ee("STORE_PUT_PAUSED_CAUSE_VISIBILITY_CHANGE"),sp=Ee("STORE_PUT_EXPECTED_STALLED"),lp=Ee("STORE_PUT_PREVIEW"),cp=Ee("STORE_PUT_WATCHED_TIME"),dp=Ee("STORE_PUT_WATCHED_TIME_SINCE_AD"),up=Ee("STORE_PUT_AD_SESSION_WATCHED_TIME"),hp=Ee("STORE_PUT_TILE_META_INFO"),pp=Ee("STORE_PUT_RESOURCES_IDLE"),fp=Ee("STORE_PUT_SKIN_SIZE"),Ep=Ee("STORE_PUT_HIDDEN_CONTROLS"),Ap=Ee("STORE_PUT_SHOW_PRELOADER"),vp=Ee("STORE_PUT_SHOW_ERROR_SCREEN"),yp=Ee("SKIN_PUT_SETTINGS_VISIBILITY"),Sp=Ee("SKIN_PUT_SETTINGS_VISIBILITY_BEFORE_SKIN_CLICK"),gp=Ee("SKIN_PUT_SETTINGS_PAGE"),mp=Ee("SKIN_TOGGLE_SETTINGS_VISIBILITY"),Tp=Ee("SKIN_PUT_LOGO_CONFIG"),Rp=Ee("STORE_PUT_CONTEXT_MENU_VISIBILITY_LOCK"),_p=Ee("STORE_PUT_CONTEXT_MENU_VISIBILITY"),Op=Ee("STORE_PUT_CONTEXT_MENU_POSITION"),Pp=Ee("STORE_PUT_SEEK_TAP_EVENT"),bp=Ee("STORE_PUT_WAS_VOLUME_CHANGED"),Ip=Ee("STORE_PUT_NATIVE_CONTROLS_VISIBILITY"),Cp=Ee("STORE_PUT_VIDEO_ELEMENT_STYLE"),Np=Ee("STORE_ON_VIDEO_TAG_PLAYING_STATE_CHANGE"),wp=Ee("STORE_ADD_PROMO_CONFIG"),Dp=Ee("STORE_PUT_NETWORK_SCORE"),Lp=Ee("STORE_LOG_EVENT"),kp=Ee("STORE_PUT_FEATURES_PARAMS"),Mp=Ee("FEATURE_DISPATCH_ACTION"),Vp=(Ee("FEATURE_DISPATCH_EVENT"),Y(900));let Up;!function(e){e.original="original"}(Up||(Up={}));class Fp{constructor(e,t){this.parent=e,this.element=document.createElement("div");const{style:r}=this.element;r.backgroundColor=function(e){switch(e){case Up.original:return"rgba(0, 255, 0, 0.5)";default:throw new Error("Unexpected BroadcastAdType ["+e+"]")}}(t),r.width="10px",r.height="10px",r.cssFloat="left",r.marginRight="1px"}setVisibility(e){e?this.show():this.hide()}show(){this.parent.appendChild(this.element)}hide(){Object($c.a)(this.element)}}class xp{constructor(e){this.element=document.createElement("div"),e.appendChild(this.element);const{style:t}=this.element;t.position="absolute",t.bottom="1px",t.left="1px"}createIndicator(e){return new Fp(this.element,e)}}const Hp=6e5;let jp;!function(e){e.INVALID_INROLL_FRAME="INVALID_INROLL_FRAME",e.INVALID_START="INVALID_START",e.CROSSED_BY_INVALID="CROSSED_BY_INVALID",e.MAX_DURATION="MAX_DURATION"}(jp||(jp={}));const Bp=5e3,Yp=1e4,Kp=Ad(Hp,yd(Yp,3)),Gp=-Hp;class Wp{constructor(){this.onInvalidAdInterval=new Lc,this.onAdIntervalUpdated=new Lc,this.adIntervals=[]}handleInrollFrame(e){if(!function(e){if(e.offset<Gp||e.offset>Kp)return!1;if(void 0===e.cutoff)return!0;if(e.cutoff<Gp||e.cutoff>Kp)return!1;const t=e.cutoff-e.offset;return t>=Bp&&t<=Hp}(e))return xd.warn("invalid inroll frame:",e),void this.handleInvalidInrollFrame(e,jp.INVALID_INROLL_FRAME);const t=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(!t)return this.addAdIntervalByFastFrame(e);this.updateAdIntervalByInrollFrame(t,e)}validateAdIntervalsByTimestamp(e){for(let t=0;t<this.adIntervals.length;t++){const r=this.adIntervals[t];if(r.start>e)return;if(!r.isValid||r.isEndReceived)continue;if(e-r.start>Hp){this.invalidateAdInterval(r,jp.MAX_DURATION);continue}const n=this.adIntervals[t+1];if(!n)return;n.start<=e&&this.invalidateAdInterval(r,jp.CROSSED_BY_INVALID)}}handleInvalidInrollFrame(e,t){const r=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(r)return this.invalidateAdInterval(r,t),void this.updateAdIntervalByInrollFrame(r,e);const n=Pe(e);this.invalidateAdInterval(n,t),this.pushAdInterval(n)}addAdIntervalByFastFrame(e){const t=Pe(e);return this.pushAdInterval(t),t.isValid?t:void 0}updateAdIntervalByInrollFrame(e,t){const r=t.pts+t.offset;if(Math.abs(e.start-r)>1e3)return void this.invalidateAdInterval(e,jp.INVALID_START);if(e.isEndReceived)return;const n=void 0!==t.cutoff,i=n?Ad(t.pts,t.cutoff):Oe(t.pts,e.start);e.isEndReceived=n,e.end=i,this.handleUpdatedAdInterval(e)}findCrossedAdIntervals(e){return this.adIntervals.filter(t=>e!==t&&(e.start<t.start?e.end>t.start:t.end>e.start))}pushAdInterval(e){const t=this.findCrossedAdIntervals(e);t.length&&this.invalidateAdInterval(e,jp.CROSSED_BY_INVALID),this.adIntervals.push(e),this.adIntervals.sort((e,t)=>{let{start:r}=e,{start:n}=t;return r-n}),this.invalidate(t,jp.CROSSED_BY_INVALID),e.isValid&&this.onAdIntervalUpdated.dispatch(e)}handleUpdatedAdInterval(e){const t=this.findCrossedAdIntervals(e);if(t.length)return t.push(e),void this.invalidate(t,jp.CROSSED_BY_INVALID);e.isValid&&this.onAdIntervalUpdated.dispatch(e)}invalidate(e,t){e.forEach(e=>{this.invalidateAdInterval(e,t)})}invalidateAdInterval(e,t){e.isValid&&(e.isValid=!1,e.invalidateReason=t,this.onInvalidAdInterval.dispatch({reason:t,cueId:e.cueId}))}}const Xp=Y(15);class qp{constructor(e){this.adType=e,this.ads=[],this.postAdsIds=[]}add(e){if(this.postAdsIds.indexOf(e.cueId)>-1)return;const t=this.findById(e.cueId);t?t.startTime=e.startTime:this.ads.push(Ie({},e,{adViewers:e.adViewers.reduce((e,t)=>e.concat(t.separateAdPods()),[])}))}getAdViewers(e,t){const[r,n]=be(this.ads,r=>{let{startTime:n,endTime:i,cueId:o,adViewers:a}=r;if(o!==t)return!1;if(e<n)return!1;if(i-1e3*Xp<e)return!1;for(const t of a){if(e+1e3*t.getAdDuration()<i)return!0}return!1});if(0===r.length)return[];this.postAdsIds.push(...r.map(e=>{let{cueId:t}=e;return t})),this.ads=n,r.sort((e,t)=>e.startTime-t.startTime);let i=Y(0);const o=[];for(const{adViewers:t,endTime:n,cueId:a}of r)for(const r of t){const t=Ad(e,yd(i,1e3));if(n-1e3*Xp<t)break;n<Ad(t,yd(r.getAdDuration(),1e3))||(o.push({adViewer:r,additionalData:{cueId:a},adType:this.adType}),i=Ad(i,Y(r.getAdDuration())))}return o}findById(e){return this.ads.find(t=>{let{cueId:r}=t;return r===e})}}class Qp{constructor(e,t,r,n,i){let o;this.video=e,this.slot=t,this.store=r,this.playerApi=n,this.onError=i,this.onInrollAdPlayRequest=new Lc,this.onOverlayAdPlayRequest=new Lc,this.onAdIntervalUpdated=new Lc,this.onAdIntervalRemoved=new Lc,this.adIntervalStorage=new Wp,this.isEnabled=!0,this.adIndicators=void 0,this.inrolls=new qp(bu.inroll),this.overlays=new qp(bu.inrollOverlay),this.adIndicators=new xp(t);const a=this.adIndicators.createIndicator(Up.original);e.addEventListener("timeupdate",()=>{const t=this.store.getState(),r=Re(t);if(o!==r){const e=void 0!==r;a.setVisibility(e),o=r}const n=_e(t);n&&(this.adIntervalStorage.validateAdIntervalsByTimestamp(n),this.isEnabled&&!e.paused&&(this.store.dispatch($u()),this.handleInrolls(),this.handleOverlays()))}),this.adIntervalStorage.onAdIntervalUpdated.add(e=>{this.onAdIntervalUpdated.dispatch({cueId:e.cueId,start:e.start,end:e.end})}),this.adIntervalStorage.onInvalidAdInterval.add(e=>{let{cueId:t,reason:r}=e;xd.warn("invalid ad interval: [cueId="+t+"] [reason="+r+"]"),this.onError(new Ou({code:Qd.INVALID_METADATA,details:{cueId:t,reason:r},isFatal:!1})),this.onAdIntervalRemoved.dispatch(t)})}handleInrollFrame(e){const t=this.adIntervalStorage.handleInrollFrame(e);if(!t)return Promise.resolve();const{cueId:r,start:n,end:i,isEndReceived:o}=t,a=o?i+1e3*Xp:n+Hp,s="overlay"===e.ad_type;return this.addInroll(r,n,a,{isOverlay:s,inrollFrame:e})}setEnabled(e){this.isEnabled=e}async addInroll(e,t,r,n){let{isOverlay:i,inrollFrame:o}=n;const a=i?bu.inrollOverlay:bu.inroll;this.playerApi.logEvent({event:Pu.BroadcastAdReceived,params:{cueId:e,podStart:t,adType:a}});const s=this.playerApi.publicApi.getMultiroll(),l=i?await s.inrollOverlay.loadViewers(Ne({},o)):await s.inroll.loadViewers(Ne({},o));if(0===l.length)return;const c=Ce(l);this.playerApi.logEvent({event:Pu.BroadcastAdInit,params:{cueId:e,podStart:t,duration:c,adPodsCount:l.length,adType:a}}),(i?this.overlays:this.inrolls).add({adViewers:l,cueId:e,startTime:t,endTime:r})}handleInrolls(){const e=this.store.getState(),t=_e(e);if(!t)return;const r=Re(e);if(!r)return;const n=this.inrolls.getAdViewers(t,r);if(!n.length)return;const{ad:{adInfo:i}}=e;i&&i.adType===bu.overlay&&this.playerApi.publicApi.stopAd({stopAdReason:Iu.AdTypeChange,data:{loadPositionAfterAd:{},adType:bu.inroll}}),this.onInrollAdPlayRequest.dispatch(n)}handleOverlays(){const e=this.store.getState(),{ad:{adInfo:t}}=e;if(Boolean(t))return;const r=_e(e);if(!r)return;const n=Re(e);if(!n)return;const i=this.overlays.getAdViewers(r,n);i.length&&this.onOverlayAdPlayRequest.dispatch(i)}}const zp=[bu.midroll,bu.inroll];class Jp{constructor(){this.stopReasonInternal=void 0}stop(e){this.stopReasonInternal=e}get stopReason(){return this.stopReasonInternal}}let $p={},Zp={},ef="",tf=!1,rf=Object(gc.a)(document);E(document,e=>{e||(rf=e)});const nf=Math.random()<=.1;let of,af=-1;const sf={subpageIndex:Ye(),deltas:{}};var lf;!function(e){e.LOAD_SCRIPT_ERROR="LOAD_SCRIPT_ERROR",e.STATS_SENSOR_NAME_ERROR="STATS_SENSOR_NAME_ERROR",e.STATS_LABEL_KEY_ERROR="STATS_LABEL_KEY_ERROR",e.STATS_LABEL_VALUE_ERROR="STATS_LABEL_VALUE_ERROR"}(lf||(lf={}));var cf=r(22);const df="utf-8",uf=e=>!0,hf=window;hf.Ya||(hf.Ya={}),hf.Ya.streamPlayer||(hf.Ya.streamPlayer={});window.Ya.streamPlayer,window.Ya.streamPlayer;const pf=window;pf.Ya||(pf.Ya={}),pf.Ya.playerApi||(pf.Ya.playerApi={});window.Ya.playerApi;const ff=window.Ya.playerApi,Ef="https://yastatic.net/yandex-video-player-iframe-api-bundles/hlsjs/0.12.2-1761-1846-1976_tmp-2080-2095-2146-2171-2-2172-2232_tmp-2427-2498/hls.min.js",Af="https://yastatic.net/yandex-video-player-iframe-api-bundles/shaka/2.5.17-yandex-patched-custom-build-prev-segment2-vod-cmaf-ll-2/shaka-player.compiled.js";"undefined"===typeof WEBPACK_IS_CI||WEBPACK_IS_CI;const vf=function(e){void 0===e&&(e=window);const t=e;if("undefined"!==typeof t.ya&&t.ya.videoAd&&t.ya.videoAd.loadModule)return t.ya.videoAd.loadModule},yf="https://strm.yandex.net/int/enc/srvr.xml",Sf=-1===yf.indexOf("int/enc/srvr.xml"),gf=e=>{let{callback:t}=e;return t(),rc.a};var mf=r(53),Tf=function(){return Math.random().toString(36).substring(7).split("").join(".")},Rf={INIT:"@@redux/INIT"+Tf(),REPLACE:"@@redux/REPLACE"+Tf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tf()}};var _f=function(e){return"@@redux-saga/"+e},Of=_f("CANCEL_PROMISE"),Pf=_f("CHANNEL_END"),bf=_f("IO"),If=_f("MATCH"),Cf=_f("MULTICAST"),Nf=_f("SAGA_ACTION"),wf=_f("SELF_CANCELLATION"),Df=_f("TASK"),Lf=_f("TASK_CANCEL"),kf=_f("TERMINATE"),Mf=_f("LOCATION"),Vf=function(e){return null===e||void 0===e},Uf=function(e){return null!==e&&void 0!==e},Ff=function(e){return"function"===typeof e},xf=function(e){return"string"===typeof e},Hf=Array.isArray,jf=function(e){return e&&Ff(e.then)},Bf=function(e){return e&&Ff(e.next)&&Ff(e.throw)},Yf=function e(t){return t&&(xf(t)||Wf(t)||Ff(t)||Hf(t)&&t.every(e))},Kf=function(e){return e&&Ff(e.take)&&Ff(e.close)},Gf=function(e){return Ff(e)&&e.hasOwnProperty("toString")},Wf=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Xf=function(e,t){var r;void 0===t&&(t=!0);var n=new Promise((function(n){r=setTimeout(n,e,t)}));return n[Of]=function(){clearTimeout(r)},n},qf=function(e){return function(){return e}}(!0),Qf=function(){};var zf,Jf=function(e){return e},$f=("function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator,function(e,t){St(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(r){e[r]=t[r]}))}),Zf=function(e){throw e},eE=function(e){return{value:e,done:!0}},tE=function(e){return Array.apply(null,new Array(e))},rE=function(e){return function(t){return e(Object.defineProperty(t,Nf,{value:!0}))}},nE=function(e){return e===kf},iE=function(e){return e===Lf},oE=function(e){return nE(e)||iE(e)},aE=function(e){return bt(e,4)},sE=function(e,t){var r;return(r={})[bf]=!0,r.combinator=!1,r.type=e,r.payload=t,r},lE=Lt.bind(null,Xf),cE=Ft,dE=[],uE=0,hE=function(e){return function(t){return e.some((function(e){return Gt(e)(t)}))}},pE=function(e){return function(t){return e(t)}},fE=function(e){return function(t){return t.type===String(e)}},EE=function(e){return function(t){return t.type===e}},AE=function(){return qf},vE={type:Pf},yE=function(e){return e&&e.type===Pf},SE=0,gE=function(){return++SE},mE=((zf={}).TAKE=function(e,t,r){var n=t.channel,i=void 0===n?e.channel:n,o=t.pattern,a=t.maybe,s=function(e){e instanceof Error?r(e,!0):!yE(e)||a?r(e):r(kf)};try{i.take(s,Uf(o)?Gt(o):null)}catch(e){return void r(e,!0)}r.cancel=s.cancel},zf.PUT=function(e,t,r){var n=t.channel,i=t.action,o=t.resolve;Ht((function(){var t;try{t=(n?n.put:e.dispatch)(i)}catch(e){return void r(e,!0)}o&&jf(t)?qt(t,r):r(t)}))},zf.ALL=function(e,t,r,n){var i=n.digestEffect,o=SE,a=Object.keys(t);if(0!==a.length){var s=_t(t,r);a.forEach((function(e){i(t[e],o,s[e],e)}))}else r(Hf(t)?[]:{})},zf.RACE=function(e,t,r,n){var i=n.digestEffect,o=SE,a=Object.keys(t),s=Hf(t)?tE(a.length):{},l={},c=!1;a.forEach((function(e){var t=function(t,n){c||(n||oE(t)?(r.cancel(),r(t,n)):(r.cancel(),c=!0,s[e]=t,r(s)))};t.cancel=Qf,l[e]=t})),r.cancel=function(){c||(c=!0,a.forEach((function(e){return l[e].cancel()})))},a.forEach((function(e){c||i(t[e],o,l[e],e)}))},zf.CALL=function(e,t,r,n){var i=t.context,o=t.fn,a=t.args,s=n.task;try{var l=o.apply(i,a);if(jf(l))return void qt(l,r);if(Bf(l))return void er(e,l,s.context,SE,Ot(o),!1,r);r(l)}catch(e){r(e,!0)}},zf.CPS=function(e,t,r){var n=t.context,i=t.fn,o=t.args;try{var a=function(e,t){Vf(e)?r(t):r(e,!0)};i.apply(n,o.concat(a)),a.cancel&&(r.cancel=a.cancel)}catch(e){r(e,!0)}},zf.FORK=function(e,t,r,n){var i=t.context,o=t.fn,a=t.args,s=t.detached,l=n.task,c=function(e){var t=e.context,r=e.fn,n=e.args;try{var i=r.apply(t,n);if(Bf(i))return i;var o=!1;return Tt((function(e){return o?{value:e,done:!0}:(o=!0,{value:i,done:!jf(i)})}))}catch(e){return Tt((function(){throw e}))}}({context:i,fn:o,args:a}),d=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Ot(t)}(c,o);jt((function(){var t=er(e,c,l.context,SE,d,s,void 0);s?r(t):t.isRunning()?(l.queue.addTask(t),r(t)):t.isAborted()?l.queue.abort(t.error()):r(t)}))},zf.JOIN=function(e,t,r,n){var i=n.task,o=function(e,t){if(e.isRunning()){var r={task:i,cb:t};t.cancel=function(){e.isRunning()&&gt(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Hf(t)){if(0===t.length)return void r([]);var a=_t(t,r);t.forEach((function(e,t){o(e,a[t])}))}else o(t,r)},zf.CANCEL=function(e,t,r,n){var i=n.task;t===wf?Qt(i):Hf(t)?t.forEach(Qt):Qt(t),r()},zf.SELECT=function(e,t,r){var n=t.selector,i=t.args;try{r(n.apply(void 0,[e.getState()].concat(i)))}catch(e){r(e,!0)}},zf.ACTION_CHANNEL=function(e,t,r){var n=t.pattern,i=Wt(t.buffer),o=Gt(n),a=function t(r){yE(r)||e.channel.take(t,o),i.put(r)},s=i.close;i.close=function(){a.cancel(),s()},e.channel.take(a,o),r(i)},zf.CANCELLED=function(e,t,r,n){r(n.task.isCancelled())},zf.FLUSH=function(e,t,r){t.flush(r)},zf.GET_CONTEXT=function(e,t,r,n){r(n.task.context[t])},zf.SET_CONTEXT=function(e,t,r,n){var i=n.task;$f(i.context,t),r()},zf),TE=null,RE=[],_E=function(){TE=null,RE.length=0},OE=function(e){function t(e){var t=e.getState,n=e.dispatch;return r=tr.bind(null,St({},c,{context:o,channel:s,dispatch:n,getState:t,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var r=e(t);return s.put(t),r}}}var r,n=void 0===e?{}:e,i=n.context,o=void 0===i?{}:i,a=n.channel,s=void 0===a?Xt():a,l=n.sagaMonitor,c=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,["context","channel","sagaMonitor"]);return t.run=function(){return r.apply(void 0,arguments)},t.setContext=function(e){$f(o,e)},t},PE=function(e){return{done:!0,value:e}},bE={};const IE=Ee("DELAYED_ACTION"),CE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYBACK_CONFIG"),NE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYBACK_POSSIBLE"),wE=Ee("EXTERNAL_PLAYBACK_CLICK_EXTERNAL_PLAYBACK"),DE=Ee("EXTERNAL_PLAYBACK_TOUCH_EXTERNAL_PLAYER_LIST"),LE=Ee("EXTERNAL_PLAYBACK_REQUEST_EXTERNAL_PLAYER_CSRF_TOKEN"),kE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYER_CSRF"),ME=Ee("EXTERNAL_PLAYBACK_START_EXTERNAL_PLAYER_CSRF_EXPIRATION"),VE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYER_LIST_STATUS"),UE=Ee("EXTERNAL_PLAYBACK_REQUEST_EXTERNAL_PLAYER_LIST"),FE=Ee("EXTERNAL_PLAYBACK_CLICK_EXTERNAL_PLAYER_LIST_REFRESH_BUTTON"),xE=Ee("EXTERNAL_PLAYBACK_CLICK_EXTERNAL_PLAYER_LIST_CLOSE_BUTTON"),HE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYER_LIST"),jE=Ee("EXTERNAL_PLAYBACK_CLICK_EXTERNAL_PLAYER_BUTTON"),BE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYER_ACTIVATION"),YE=Ee("EXTERNAL_PLAYBACK_CLOSE_EXTERNAL_PLAYER_LIST_EVENTUALLY"),KE=Ee("EXTERNAL_PLAYBACK_PUT_EXTERNAL_PLAYER_STATUS"),GE=Ee("EXTERNAL_PLAYBACK_ACTIVATED_POPUP_VISIBILITY"),WE=Ee("EXTERNAL_PLAYBACK_REFRESH_EXTERNAL_PLAYER_LIST_ON_DOCUMENT_VISIBLE"),XE=Ee("NATIVE_SKIN_CLICK_VIDEO"),qE=Ee("PING_STRM_AND_RECOVER_BY_ONLINE"),QE=Ee("SKIN_CHANGE_VOLUME"),zE=Ee("SKIN_START_CHANGE_VOLUME"),JE=Ee("SKIN_FINISH_CHANGE_VOLUME"),$E=Ee("SKIN_TOGGLE_MUTED"),ZE=(Ee("SKIN_CLICK_PLAY_BUTTON"),Ee("SKIN_CLICK_REPORT_BUTTON"),Ee("SKIN_CLICK_BRAND_LOGO_BUTTON"),Ee("SKIN_CLICK_DEBUG_DOWNLOAD_BUTTON"),Ee("SKIN_SEEK_TO_LIVE"),Ee("SKIN_SEEK")),eA=(Ee("SKIN_SEEK_BY_STEP"),Ee("SKIN_SEEK_START")),tA=Ee("SKIN_SEEK_END"),rA=(Ee("SKIN_SEEK_MOVE"),Ee("SKIN_HANDLE_KEY_DOWN")),nA=Ee("SKIN_HANDLE_KEY_UP"),iA=(Ee("SKIN_CHANGE_VIDEO_TRACK_VALUE"),Ee("SKIN_CHANGE_AUDIO_TRACK_VALUE"),Ee("SKIN_TOGGLE_TEXT_TRACK"),Ee("SKIN_CHANGE_TEXT_TRACK_VALUE"),Ee("SKIN_TOGGLE_FULLSCREEN")),oA=Ee("SKIN_CLICK_CONTEXT_MENU"),aA=(Ee("SKIN_SEEK_EVENT_DIRECTION_CHANGE"),Ee("SKIN_CHANGE_PLAYBACK_RATE"),Ee("SKIN_MOUSE_MOTIONLESS")),sA=Ee("SKIN_MOUSE_HOVER_CHANGE"),lA=Ee("SKIN_CONTROLS_MOUSE_HOVER_CHANGE"),cA=Ee("SKIN_PUT_VISIBILITY_ON_INIT"),dA=Ee("SKIN_PUT_MOUSE_MOTIONLESS"),uA=Ee("SKIN_PUT_MOUSE_MOTIONLESS_TIMER_ID"),hA=Ee("PUT_MOBILE_BOTTOM_CONTROLS_VISIBILITY"),pA=(Ee("SHOW_MOBILE_BOTTOM_CONTROLS"),Ee("MOBILE_SKIN_TAPPED_CHANGE")),fA=(Ee("SKIN_CLICK_LOGO"),Ee("SKIN_DOCUMENT_FOCUS_OUT"),Ee("SKIN_PUT_TITLE_SETTINGS")),EA=Ee("SKIN_TOGGLE_PLAY_PAUSE"),AA=Ee("SKIN_LOG_SEEK_EVENT"),vA=(Ee("SKIN_TOUCH_START"),Ee("SKIN_TOUCH_END"),Ee("SKIN_TOUCH_MOVE"),Ee("SKIN_PUT_VERTICAL_TOUCH_DISTANCE")),yA=Ee("SKIN_PUT_HORIZONTAL_TOUCH_DISTANCE"),SA=Ee("SKIN_PUT_USE_NATIVE_SUBTITLES"),gA=(Ee("SKIN_TIMELINE_TOUCH_START"),Ee("SKIN_TIMELINE_TOUCH_END"),Ee("SKIN_PUT_TIMELINE_TOUCH_STARTED")),mA=(Ee("SKIN_LOAD_TIMELINE_HI_RES_PREVIEW_IMAGE"),Ee("SKIN_LOAD_TIMELINE_LOW_RES_PREVIEW_IMAGE_INTERNAL"),Ee("SKIN_LOAD_TIMELINE_HI_RES_PREVIEW_IMAGE_INTERNAL"),Ee("SKIN_LOAD_TIMELINE_LOW_RES_PREVIEW_IMAGE"),Ee("SKIN_PUT_TIMELINE_PREVIEW_IMAGE")),TA=Ee("SKIN_CLEAR_TIMELINE_PREVIEW_IMAGE"),RA=Ee("SKIN_CLEAR_TIMELINE_PREVIEW_IMAGES"),_A=Ee("SKIN_CONFIRM_START_POSITION"),OA=Ee("SKIN_CANCEL_START_POSITION"),PA=Ee("SKIN_DISABLE_START_POSITION_CONFIRMATION"),bA=Ee("SKIN_SET_FOCUS_RESTORATION_EXPECTED"),IA=(Ee("SHOW_SKIN"),Ee("HANDLE_POINTER_EVENT"),Ee("HANDLE_SCREEN_CLICK"),Ee("HANDLE_SCREEN_DOUBLE_CLICK"),Ee("HANDLE_SCREEN_MOUSE_MOVE")),CA=(Ee("HANDLE_SCREEN_MOUSE_ENTER"),Ee("HANDLE_SCREEN_MOUSE_LEAVE"),Ee("SET_LOGO_WIDGET_SETTINGS")),NA=Ee("SET_LOGO_WIDGET_FORCE_EXPANDED"),wA=Ee("SET_LOGO_WIDGET_ACTION_STATUS"),DA=(Ee("CALL_LOGO_WIDGET_ACTION"),Ee("DOCUMENT_CAPTURE_CLICK")),LA=(Ee("SKIN_SHARE_BUTTON_CLICK"),Y(3600)),kA={inStreamPlayingState:void 0,adConfig:void 0,adSessionWatchedTime:Y(0),adInfo:void 0,originalBroadcastAdCueId:void 0,originalBroadcastAdCues:{},adblockDetected:!1,hasPreroll:!1,adSyncInit:!1,watchedTimeSinceAd:LA,nextAdInfo:void 0,nativeAdControlsVisibility:!0},MA=Y(0),VA=j(Y(5)),UA=Y(30),FA="0000000000000000000000000000000000000000000000000000000000000000";let xA,HA,jA,BA;!function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(xA||(xA={})),function(e){e.Detached="Detached",e.Attaching="Attaching",e.Attached="Attached"}(HA||(HA={})),function(e){e.Init="Init",e.SetSource="SetSource",e.AdEnd="AdEnd",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge"}(jA||(jA={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(BA||(BA={}));const YA={autoplay:!1,initialAutoplay:!1,allowMuted:!0,requireUserGestureToUnmute:!1,autoplayImpossible:!1,startStage:xA.init,preload:!0,from:void 0,encoderState:HA.Detached,vsid:FA,streams:[],stream:void 0,sourceParams:void 0,sourceId:0,volume:1,muted:!1,wasVolumeChanged:!1,userVolume:NaN,duration:Y(NaN),currentTime:MA,currentTimeLowGranularity:MA,watchedTime:Y(0),startPosition:{},programDateTime:void 0,fragmentDuration:VA,dvrStartTime:Y(0),dvrDuration:Y(NaN),videoType:void 0,playingState:fd.PAUSE,bufferingRanges:[],preview:kd,isFullscreen:!1,isPip:!1,isVisible:void 0,pausedCauseVisibilityChange:!0,togglePlaybackOnVisibilityChangeSetting:void 0,errorInfo:{},lastRecoverPosition:void 0,isOnline:!0,isDocumentVisible:!0,lastKnownBandwidthEstimate:NaN,videoTagReadyState:BA.HAVE_NOTHING,isAbrSupported:!1,isAbrEnabled:!1,videoTrackValue:void 0,videoTracks:[],userVideoTrackName:void 0,userVideoTrackHeight:void 0,audioTrackValue:void 0,audioTracks:[],userAudioTrackName:void 0,userAudioTrackLang:void 0,textTrackEnabled:!1,nativeTextTrackVisible:void 0,textTrackValue:void 0,textTracks:[],userTextTrackEnabled:void 0,userTextTrackLang:void 0,userTextTrackName:void 0,subtitles:[],playbackRate:1,expectedStalled:ur(jA.Init,void 0),liveOffset:UA,featuresParams:{},featuresEnabled:[],tileMetaInfo:void 0,videoWidth:0,videoHeight:0,initTime:Y(0),videoInfo:{},networkScore:void 0},KA=function(e,t){let r=e[t];if(!Object(uc.a)(r)){const n=r;try{delete e[t],r=e[t],e[t]=n}catch(e){}}return r}(Object,"create")?Object.create:function(e,t){function r(){}if(r.prototype=e,Object(kl.a)(t))for(const e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return new r},GA=function e(t,r){void 0===r&&(r={preserveConstructors:!0});let n=t;if(Object(Zd.a)(t)){return t.map(t=>e(t,r))}return eu(t)?new Date(t.getTime()):(!Object(Bc.a)(t)&&Object(kl.a)(t)&&(n=r.preserveConstructors?KA(t):{},Object(hc.a)(t,(t,i)=>{n[i]=e(t,r)})),n)};let WA,XA;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(WA||(WA={})),function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(XA||(XA={}));const qA=5e3,QA=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net"],zA=Y(300);let JA=Y(0);const $A=5e3,ZA=1e4,ev=6e4;let tv;!function(e){e.OFFLINE="offline",e.IDLE="idle",e.ATTEMPT="attempt",e.PLAYING="playing",e.ERROR="error"}(tv||(tv={}));const rv=e=>({promise:e.request({method:"GET",url:"https://frontend.vh.yandex.ru/csrf_token",retries:3,withCredentials:!0}).then(e=>{try{return{token:e}}catch(e){return{token:""}}}),abort:rc.a}),nv=e=>({promise:e.request({method:"GET",url:"https://cloud-api.yandex.ru/videoplayer/v1/personality/profile/yandex_io/devices/",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(e){return[]}}),abort:rc.a}),iv=e=>({promise:e.request({method:"GET",url:"https://quasar.yandex.<tld>/devices_online_stats",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(e){return[]}}),abort:rc.a}),ov=(e,t,r)=>{const n={msg:Cr({},t.config,{start_position:t.startPosition}),device:t.externalPlayerId};return{promise:e.request({method:"POST",url:"https://yandex.ru/video/station",headers:{"X-CSRF-TOKEN":r},data:JSON.stringify(n),retries:3,withCredentials:!0}).then(e=>{const t=JSON.parse(e);if("play"!==t.status)throw new Error("ExternalPlaybackError: "+t.msg)}),abort:rc.a}},av={[bu.overlaySelfPromo]:"overlay",[bu.preroll]:"preroll",[bu.midroll]:"midroll",[bu.postroll]:"postroll",[bu.inroll]:"midroll"};const sv={[bu.preroll]:"preroll",[bu.midroll]:"midroll",[bu.overlay]:"overlay",[bu.postroll]:"postroll",[bu.notReplaced]:"notReplaced",[bu.inroll]:"inroll",[bu.inrollOverlay]:"inroll-overlay",[bu.intro]:"preroll",[bu.jingle]:"midroll",[bu.overlaySelfPromo]:"overlay"},lv=e=>sv[e],cv=new class{constructor(){this.nextIndex=void 0,this.lastEndTime=void 0,this.prevWatchedTime=void 0,this.waitingForCreativeFinish=void 0,this.reset()}requestCreative(e){let{watchedTime:t,promoConfig:r}=e;if(this.updateWatchedTime(t),void 0===r.overlaySelfPromo)return;if(this.waitingForCreativeFinish)return;if(this.nextIndex>=r.overlaySelfPromo.length)return;const n=r.overlaySelfPromo[this.nextIndex];return t-this.lastEndTime>=n.offset?(this.waitingForCreativeFinish=!0,this.nextIndex++,n):void 0}onCreativeFinished(e){this.updateWatchedTime(e),this.lastEndTime=e,this.waitingForCreativeFinish=!1}reset(){this.nextIndex=0,this.lastEndTime=0,this.prevWatchedTime=0,this.waitingForCreativeFinish=!1}updateWatchedTime(e){e<this.prevWatchedTime&&this.reset(),this.prevWatchedTime=e}};let dv;!function(e){e.PLAY="play",e.PAUSE="pause",e.REPLAY="replay"}(dv||(dv={}));const uv=2e3,hv=document.createElement("a"),pv={},fv=1e3,Ev={reason:"recoverStreamByReturnToOnline",delay:0,rawData:0};class Av{static internalToPublic(e){return Math.round(100*e)}static publicToInternal(e){return e/100}}let vv;!function(e){e.DOWNLOAD_DEBUG="DOWNLOAD_DEBUG",e.CLOSE_CONTEXT_MENU="CLOSE_CONTEXT_MENU",e.COPY_LINK="COPY_LINK",e.COPY_LINK_WITH_TIME="COPY_LINK_WITH_TIME",e.COPY_VSID="COPY_VSID",e.COPY_HTML="COPY_HTML"}(vv||(vv={}));var yv=r(28),Sv=r.n(yv);let gv;!function(e){e.LOGO_WATERMARK="player_watermark",e.BRAND_LOGO="yandex_logo",e.CONTEXT_MENU="player_context_menu",e.SHARE_BUTTON="player_share_button",e.RECOMMENDATIONS="player_recommendations"}(gv||(gv={}));Y(10),Y(10);const mv=Y(5);let Tv;!function(e){e.INDEX="INDEX",e.PLAYBACK_RATE="PLAYBACK_RATE",e.VIDEO_TRACK="VIDEO_TRACK",e.AUDIO_TRACK="AUDIO_TRACK",e.TEXT_TRACK="TEXT_TRACK"}(Tv||(Tv={}));const Rv=3e3,_v=1500,Ov=Y(10),Pv=[bu.midroll,bu.postroll,bu.preroll];let bv,Iv,Cv;!function(e){e.NATIVE="NATIVE",e.HLS="HLS",e.MPD="MPD",e.MP4="MP4",e.YANDEX="YANDEX"}(Cv||(Cv={}));var Nv=r(58);const wv=["ts","m4s","m4f"],Dv=e=>{let{fragDuration:t,downloadTime:r}=e;return r>.9*t};let Lv;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(Lv||(Lv={}));const kv=e=>{let{fragDuration:t,timings:r}=e;const n=r.filter(e=>{const{name:t,duration:r,encodedBodySize:n,decodedBodySize:i,transferSize:o}=e;if(void 0===t||void 0===r)return!1;const a=Number(n||i||o);return!(isNaN(a)||a<1024)&&-1!==wv.indexOf(Object(Ll.c)(t).toLowerCase())}).slice(-5).map(e=>{let{duration:t}=e;return t});if(0===n.length)return Lv.UNKNOWN;const i=(a=.33,0===(o=n).length?0:o.reduce((e,t)=>Ad(yd(e,a),yd(t,1-a)),o[0]));var o,a;return Dv({fragDuration:t,downloadTime:i})?Lv.SLOW:Lv.OK},Mv=Y(1);let Vv;!function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(Vv||(Vv={}));const Uv=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},Fv=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent,r=t.indexOf("Android");return-1===r?-1:parseFloat(t.slice(r+8))}(),xv=(function(e){void 0===e&&(e=window);const{major:t,minor:r}=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).match(/AppleWebKit\/(\d+)\.(\d+)/);if(!t)return{major:-1,minor:-1};const[,r,n]=t;return{major:parseInt(r,10),minor:parseInt(n,10)}}(e),n=mi(e),i=ne(e)}(window),/<\s*\w+?[^>]*>|<\s*\/\s*\w+?>/g),Hv=/<script[\d\D]*?>([\d\D]*?<\/script\s*>)?/gm,jv=Ee("SHARING_RESET"),Bv=Ee("SHARING_PUT"),Yv={link:void 0,html:void 0,title:void 0,text:void 0,showShareButtonInFullscreenOnly:!1};var Kv=r(14);var Gv=r(59);const Wv={size:au.XS,width:0,height:0,hiddenControls:[],useNativeControls:!1,useNativeFullscreen:!1,useNativeSubtitles:!1,nativeControlsVisibility:!0,contextMenuPosition:void 0,contextMenuVisibility:!1,contextMenuVisibilityLock:!1,showReportButton:!1,showBrandLogo:!1,showUnmuteButtonForAll:!1,showStartScreen:!0,isMobileSkin:!1,showPreloader:!1,seeking:!1,volumeChanging:!1,settingsVisible:!1,settingsVisibilityBeforeDocumentClick:!1,mouseMotionlessTimeoutId:0,skinMouseHovered:!1,controlMouseHovered:!1,mouseMotionless:!0,skinVisibilityOnInit:!0,mobileBottomControlsVisibility:!1,mobileSkinTapped:!1,seekTapEvent:void 0,startPositionConfirmation:void 0,primaryColor:"#FFCC00",secondaryColor:"#EEEEEE",title:{isVisible:!1,visibleWithSkinOnly:!1,name:null,description:null},skinDVRStartTime:Y(0),skinDVRDuration:Y(0),verticalTouchDistance:0,horizontalTouchDistance:0,timelineTouchStarted:!1,timelinePreviewImages:{},logoWidget:void 0,focusRestorationExpected:!1,handleVideoTagClickWhenHidingNativeControls:!0,adInteractionActive:!1},Xv={min:0,max:1/0},qv={min:1,max:1/0},Qv={min:0,max:1};let zv;!function(e){e.ApiPlay="ApiPlay",e.VolumeChange="VolumeChange",e.MuteChange="MuteChange"}(zv||(zv={}));const Jv="other",$v={from:Jv,reqid:void 0,hash:void 0,vsid:FA,adsid:void 0},Zv={startPosition:{},additionalParams:$v,adConfig:void 0,withCredentials:!1,loop:!1,preview:"",logoConfig:void 0,shareConfig:void 0,videoInfo:{}},ey=(Av.internalToPublic(0),Av.internalToPublic(1),Av.internalToPublic(1),{2:Qd.RAA_TAKING_2SEC,10:Qd.RAA_TAKING_10SEC}),ty=-1,ry={name:"\u0410\u0432\u0442\u043e",value:"auto",bitrate:ty};let ny,iy,oy;!function(e){e.VideoIsNotPausedOnInit="VideoIsNotPausedOnInit",e.DetectByInterval="DetectByInterval",e.VideoPlayEvent="VideoPlayEvent",e.PlayCallback="PlayCallback"}(ny||(ny={})),function(e){e.firstNetworkAdSDK="first.network.adsdk",e.firstNetworkHls="first.network.hls",e.firstNetworkMpd="first.network.mpd",e.firstNetworkMp4="first.network.mp4",e.firstNetworkNative="first.network.native",e.firstNetworkYandex="first.network.yandex",e.firstNetworkAdSDKHls="first.network.adsdk.hls",e.firstNetworkAdSDKMpd="first.network.adsdk.mpd",e.firstNetworkAdSDKMp4="first.network.adsdk.mp4",e.firstNetworkAdSDKNative="first.network.adsdk.native",e.firstNetworkAdSDKYandex="first.network.adsdk.yandex",e.setSourceNetworkAdSDK="setsource.network.adsdk",e.setSourceNetworkHls="setsource.network.hls",e.setSourceNetworkMpd="setsource.network.mpd",e.setSourceNetworkMp4="setsource.network.mp4",e.setSourceNetworkNative="setsource.network.native",e.setSourceNetworkYandex="setsource.network.yandex",e.setSourceNetworkAdSDKHls="setsource.network.adsdk.hls",e.setSourceNetworkAdSDKMpd="setsource.network.adsdk.mpd",e.setSourceNetworkAdSDKMp4="setsource.network.adsdk.mp4",e.setSourceNetworkAdSDKNative="setsource.network.adsdk.native",e.setSourceNetworkAdSDKYandex="setsource.network.adsdk.yandex"}(iy||(iy={})),function(e){e.firstLoadSource="firstloadsource",e.yaFirstFrameDecodedMp4="ya.firstframedecoded.mp4",e.yaFirstFrameDecodedMpd="ya.firstframedecoded.mpd",e.yaFirstFrameDecodedHls="ya.firstframedecoded.hls",e.yaFirstFrameDecodedYandex="ya.firstframedecoded.yandex",e.yaFirstFrameDecodedNative="ya.firstframedecoded.native",e.yaFirstFrameDecodedAdSDK="ya.firstframedecoded.adsdk",e.yaFirstFrameShownMp4="ya.firstframeshown.mp4",e.yaFirstFrameShownMPD="ya.firstframeshown.mpd",e.yaFirstFrameShownHls="ya.firstframeshown.hls",e.yaFirstFrameShownYandex="ya.firstframeshown.yandex",e.yaFirstFrameShownNative="ya.firstframeshown.native",e.yaFirstFrameShownAdSDK="ya.firstframeshown.adsdk",e.autoplayFalse="autoplayfalse",e.firstStartAdSDKFailed="firststart.adsdk.failed",e.firstStartAdSDK="firststart.adsdk",e.firstStartYandex="firststart.yandex",e.firstStartHls="firststart.hls",e.firstStartMp4="firststart.mp4",e.firstStartMpd="firststart.mpd",e.firstStartNative="firststart.native",e.firstStartAdSDKYandex="firststart.adsdk.yandex",e.firstStartAdSDKHls="firststart.adsdk.hls",e.firstStartAdSDKMpd="firststart.adsdk.mpd",e.firstStartAdSDKMp4="firststart.adsdk.mp4",e.firstStartAdSDKNative="firststart.adsdk.native"}(oy||(oy={}));const ay={[Cv.HLS]:oy.firstStartHls,[Cv.MPD]:oy.firstStartMpd,[Cv.MP4]:oy.firstStartMp4,[Cv.NATIVE]:oy.firstStartNative,[Cv.YANDEX]:oy.firstStartYandex,AD:oy.firstStartAdSDK},sy={[Cv.HLS]:oy.firstStartAdSDKHls,[Cv.MPD]:oy.firstStartAdSDKMpd,[Cv.MP4]:oy.firstStartAdSDKMp4,[Cv.NATIVE]:oy.firstStartAdSDKNative,[Cv.YANDEX]:oy.firstStartAdSDKYandex,AD:oy.firstStartAdSDK},ly={[Cv.HLS]:oy.yaFirstFrameDecodedHls,[Cv.MPD]:oy.yaFirstFrameDecodedMpd,[Cv.MP4]:oy.yaFirstFrameDecodedMp4,[Cv.NATIVE]:oy.yaFirstFrameDecodedNative,[Cv.YANDEX]:oy.yaFirstFrameDecodedYandex,AD:oy.yaFirstFrameDecodedAdSDK},cy={[Cv.HLS]:oy.yaFirstFrameShownHls,[Cv.MPD]:oy.yaFirstFrameShownMPD,[Cv.MP4]:oy.yaFirstFrameShownMp4,[Cv.NATIVE]:oy.yaFirstFrameShownNative,[Cv.YANDEX]:oy.yaFirstFrameShownYandex,AD:oy.yaFirstFrameShownAdSDK},dy={[Cv.HLS]:iy.firstNetworkHls,[Cv.MPD]:iy.firstNetworkMpd,[Cv.MP4]:iy.firstNetworkMp4,[Cv.NATIVE]:iy.firstNetworkNative,[Cv.YANDEX]:iy.firstNetworkYandex,AD:iy.firstNetworkAdSDK},uy={[Cv.HLS]:iy.firstNetworkAdSDKHls,[Cv.MPD]:iy.firstNetworkAdSDKMpd,[Cv.MP4]:iy.firstNetworkAdSDKMp4,[Cv.NATIVE]:iy.firstNetworkAdSDKNative,[Cv.YANDEX]:iy.firstNetworkAdSDKYandex,AD:iy.firstNetworkAdSDK},hy={[Cv.HLS]:iy.setSourceNetworkHls,[Cv.MPD]:iy.setSourceNetworkMpd,[Cv.MP4]:iy.setSourceNetworkMp4,[Cv.NATIVE]:iy.setSourceNetworkNative,[Cv.YANDEX]:iy.setSourceNetworkYandex,AD:iy.setSourceNetworkAdSDK},py={[Cv.HLS]:iy.setSourceNetworkAdSDKHls,[Cv.MPD]:iy.setSourceNetworkAdSDKMpd,[Cv.MP4]:iy.setSourceNetworkAdSDKMp4,[Cv.NATIVE]:iy.setSourceNetworkAdSDKNative,[Cv.YANDEX]:iy.setSourceNetworkAdSDKYandex,AD:iy.setSourceNetworkAdSDK};let fy=-1;const Ey={sourceStart:!1,yaFirstFrameDecoded:!1,yaFirstFrameShown:!1},Ay={onCurrentTimeChange:rc.a,onDurationChange:rc.a,onVolumeChange:rc.a,onStateChange:rc.a,onSeek:rc.a,onAdStateChange:rc.a,onAdPodStart:rc.a,onFullScreenChange:rc.a,onErrorScreenVisibilityChange:rc.a,onError:rc.a,onRecover:rc.a,onUserAction:rc.a,onVideoTrackChange:rc.a,onAudioTrackChange:rc.a,onTextTrackChange:rc.a,onThumbnailTileGeneralMetaInfoChange:rc.a,onVideoTracksChange:rc.a,onAudioTracksChange:rc.a,onTextTracksChange:rc.a,onSubtitlesChange:rc.a,onVideoTypeChange:rc.a,onPlaybackRateChange:rc.a,onOriginalBroadcastAdStateChange:rc.a,onAdblockDetected:rc.a,onChangeStream:rc.a,onSetSourceRequest:rc.a,onFeatureEvent:rc.a,onSkinReady:rc.a,onContentImpression:rc.a,onResourcesIdle:rc.a,onVisualStateChange:rc.a,onSaveDataOutsideIframe:rc.a,onBufferingRangesChange:rc.a,onStartStageChange:rc.a,onVideoSizeChange:rc.a,onVideoReadyStateChange:rc.a,onVideoClickerEvent:rc.a,onLogoWidgetActionCall:rc.a,logEvent:rc.a,onNextAdRemainingTimeChange:rc.a,onAdSDKVersionDefined:rc.a,onStreamsWithSupportInfoChange:rc.a,onEngineChange:rc.a,onNetworkScoreChange:rc.a,onNetworkStatusChange:rc.a,onAdSkippableStateChange:rc.a,onAdPodCloseStateChange:rc.a,onAdPodDurationChange:rc.a,onAdPodCurrentTimeChange:rc.a,onAdPodTimeToSkipChange:rc.a,onAdVolumeAvailabilityStateChange:rc.a,onAdInteraction:rc.a},vy=function(e,t){void 0===t&&(t={});let r=e;return fo({publicApi:function(e,t){const r={};return Object(cc.a)(e).forEach(n=>{r[n]=t(e[n],n)}),r}(r,(e,n)=>function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];if(void 0===r){console.warn("Unable to call ["+n+"] after player was destroyed");const{logEvent:e=rc.a}=t;e({event:Pu.CallPublicApiAfterDestroy,params:{args:i,method:n}})}else try{return r[n](...i)}catch(e){const{onError:r=rc.a}=t;r(new Ou(e,{code:Qd.PUBLIC_API_CALL_ERROR,isFatal:!1,details:{args:i,methodName:n}}))}})},Ay,t,{destroyApi:()=>{r=void 0}})};let yy,Sy,gy;!function(e){e.ON="ON",e.OFF="OFF"}(yy||(yy={})),function(e){e.setSource="setSource",e.destroy="destroy",e.end="end"}(Sy||(Sy={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(gy||(gy={}));const my=td("application/vnd.apple.mpegurl")||Fv>=4.4;let Ty;!function(e){e.NO_MSE="NO_MSE",e.NO_CODECS="NO_CODECS",e.NO_SUPPORTED_DRM="NO_SUPPORTED_DRM",e.NO_SUPPORTED_FORMAT="NO_SUPPORTED_FORMAT"}(Ty||(Ty={}));const Ry={supported:!1,noSupportReason:Ty.NO_MSE},_y={supported:!1,noSupportReason:Ty.NO_CODECS},Oy={supported:!1,noSupportReason:Ty.NO_SUPPORTED_DRM},Py={supported:!1,noSupportReason:Ty.NO_SUPPORTED_FORMAT},by=function(e){void 0===e&&(e=window);const t=e.MediaSource||e.WebKitMediaSource;return t&&Object(Bc.a)(t.isTypeSupported)&&!function(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;return!!t&&!(t.prototype&&Object(Bc.a)(t.prototype.appendBuffer)&&Object(Bc.a)(t.prototype.remove))}(e)?t:void 0}(),Iy=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase();return/yandexstation.*yandexio/.test(t)||/station.*crosswalk/.test(t)}();var Cy=r(46);const Ny=Object(Cy.a)();class wy{static isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}static isSafariDesktop(){return Ny&&!Jc}static setDeviceType(e){this.deviceType=e}static isSmartTV(){return"SMART_TV"===this.deviceType||/Smart.?TV|PlayStation/i.test(navigator.userAgent)}static canPlayHlsOnNative(){return this.isSmartTV()||my}}wy.deviceType=void 0;const Dy={supported:!0,engine:Cv.NATIVE},Ly={supported:!0,engine:Cv.HLS};var ky=r(13),My=r.n(ky);const Vy=function(e){return void 0===e&&(e=window),/YaBrowser/.test(Object(Sl.a)(e))},Uy=function(e){return void 0===e&&(e=window),/Chrome/.test(e.navigator.userAgent)&&/Google Inc/.test(e.navigator.vendor)&&!Vy(e)}(),Fy=function(e){return void 0===e&&(e=window),/firefox/.test(e.navigator.userAgent.toLowerCase())}(),xy=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase();return/linux/.test(t)&&!ne(e)}(),Hy=Vy();let jy;!function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine"}(jy||(jy={}));const By={[jy.fairplay]:["com.apple.fairplay",Vl,Ul],[jy.widevine]:["com.widevine.alpha"],[jy.playready]:["com.microsoft.playready"]},Yy=(Ky=To(By),[].concat.apply([],Ky));var Ky;let Gy,Wy;!function(e){e.YandexBrowserLinux="YandexBrowserLinux",e.OldYandexBrowser="OldYandexBrowser",e.WebKitMediaKeys="WebKitMediaKeys",e.requestMediaKeySystemAccess="requestMediaKeySystemAccess",e.MSMediaKeys="MSMediaKeys",e.GenerateKeyRequest="GenerateKeyRequest",e.Constant="Constant",e.NotAvailable="NotAvailable",e.LiteMode="LiteMode"}(Gy||(Gy={}));const Xy=[],qy=2592e5;let Qy;const zy=Object(Hc.a)(async e=>{let{video:t}=e;const r=function(){try{const e=My.a.getItem("videoplayer-supported-drm-systems");if(null===e)return;const{value:t,time:r,version:n}=JSON.parse(e);if(Date.now()-r>qy)return void My.a.removeItem("videoplayer-supported-drm-systems");if("e893acf4cba9ed314d6f7caace0cad53"!==n)return void My.a.removeItem("videoplayer-supported-drm-systems");if(0===t.supportedDrmSystems.length)return;return t}catch(e){return}}();We("detect.drm");const n=r||await async function(e){void 0===Wy&&(Wy=Co(e));const t=await Wy;return Ro({},t,{supportedDrmSystems:[...t.supportedDrmSystems]})}({video:t});return Xy.forEach(e=>e(n)),Xy.length=0,Qy=n,void 0===r&&function(e){if(0!==e.supportedDrmSystems.length)try{My.a.setItem("videoplayer-supported-drm-systems",JSON.stringify({value:e,time:Date.now(),version:"e893acf4cba9ed314d6f7caace0cad53"}))}catch(e){}}(n),Xe("detect.drm"),n.supportedDrmSystems}),Jy=document.createElement("video");let $y={},Zy=!1;K(window).flags=$y;const eS={destroy:rc.a,setStatsRootFields:rc.a,updateAdConfig:rc.a,getNextAdInfo:()=>{},preroll:{loadViewers:()=>Promise.resolve([])},midroll:{loadViewers:()=>Promise.resolve([])},inroll:{loadViewers:()=>Promise.resolve([]),schedule:rc.a},inrollOverlay:{loadViewers:()=>Promise.resolve([])},overlay:{loadViewers:()=>Promise.resolve([])},postroll:{loadViewers:()=>Promise.resolve([])}},tS=[{end:0,name:"invalid"},{end:750,name:"750)"},{end:1250,name:"[750-1250)"},{end:2e3,name:"[1250-2000)"},{end:3500,name:"[2000-3500)"},{end:5500,name:"[3500-5500)"},{end:9e3,name:"[5500-9000)"},{end:1e6,name:"[9000"},{end:1/0,name:"infinity"}],rS=[{end:0,name:"invalid"},{end:100,name:"100"},{end:250,name:"250"},{end:500,name:"500"},{end:750,name:"750"},{end:1e3,name:"1000"},{end:1500,name:"1500"},{end:2500,name:"2500"},{end:5e3,name:"5000"},{end:1/0,name:"infinity"}],nS=window;class iS{constructor(e){this.length=e,this.list=[]}push(e){this.list.length>=this.length&&this.list.shift(),this.list.push(e)}getAll(){return this.list}clear(){this.list.length=0}}class oS extends Dc{constructor(e){super(),this.history=new iS(100),this.addDestroyHandler(d(e,"logposted",e=>{xd.log("chrome://media-internals event",e.data),this.history.push(e.data)})),this.addDestroyHandler(()=>{this.history=null})}getHistory(){return this.history?[...this.history.getAll()]:["MediaInternalsHistory is destroyed"]}}class aS{constructor(){this.onOnline=new Lc,this.onOffline=new Lc,this.onDestroy=new Lc,this.onDestroy.addOne(d(window,"online",()=>{this.onOnline.dispatch(void 0)})),this.onDestroy.addOne(d(window,"offline",()=>{this.onOffline.dispatch(void 0)}))}destroy(){this.onDestroy.dispatch(void 0)}}const sS={primaryColor:"#FFCC00",secondaryColor:"#EEEEEE"},lS={setItem(e,t){try{sessionStorage.setItem(e,t)}catch(e){}},getItem(e){try{return sessionStorage.getItem(e)}catch(e){return null}},removeItem(e){try{sessionStorage.removeItem(e)}catch(e){}}},cS=["start","end"];class dS{constructor(){this.playbackProgressKey="",this.lastProgress=void 0,this.enabled=!1}setEnabled(e){void 0===e&&(e=!1),this.enabled=e}setKey(e){this.lastProgress=void 0,this.playbackProgressKey=e}clearKey(){this.lastProgress=void 0,this.playbackProgressKey=""}setKeyByStream(e){let{url:t}=e;if(!t)return void this.clearKey();const r=Object(Ll.g)(t),n=Object(Ll.f)(r.search),i=cS.reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{});this.setKey(Object(Ll.b)(Object(Ll.h)(na({},r,{search:""})),i))}getProgress(){if(!this.enabled||!this.playbackProgressKey)return;const e=(t=this.playbackProgressKey,Number(lS.getItem(t)||r));var t,r;return isNaN(e)?void 0:Y(e)}saveProgress(e){var t,r;this.enabled&&this.playbackProgressKey&&("number"===typeof this.lastProgress&&Math.abs(this.lastProgress-e)<1||(this.lastProgress=e,t=this.playbackProgressKey,r=e,lS.setItem(t,String(r))))}}const uS=new RegExp("^https?:\\/\\/([^\\/]+\\.)?("+["strm-ott\\.akamaized\\.net","akamai\\.strm\\.yandex\\.net","(an|strm)\\.yandex\\.(ru|net)","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru"].join("|")+")\\/(?!log|perf|jstracer)"),hS={perfLogUrl:"https://log.strm.yandex.ru/perf",updateInterval:3e4,urlRegexp:uS};class pS{static clearResourceTimings(){"function"===typeof performance.clearResourceTimings?performance.clearResourceTimings():"function"===typeof performance.webkitClearResourceTimings&&performance.webkitClearResourceTimings()}constructor(e){let{perfLogUrl:t=hS.perfLogUrl,updateInterval:r=hS.updateInterval,urlRegexp:n=hS.urlRegexp}=void 0===e?{}:e;this.timeoutId=void 0,this.history=[],this.reportUrl=void 0,this.updateInterval=void 0,this.urlRegexp=void 0,this.reportUrl=t,this.updateInterval=r,this.urlRegexp="string"===typeof n?new RegExp(n):n,pS.isSupported&&this.loop()}destroy(){clearTimeout(this.timeoutId)}async updateInfo(){if(!pS.isSupported)return;const e=this.getCurrentResourcesTimings();if(pS.clearResourceTimings(),0===e.length)return;this.history.push(...e),this.history.length>200&&this.history.splice(0,this.history.length-200);const t=Object(Ll.b)(this.reportUrl,{perfnow:String(Date.now()),navstart:String(void 0!==performance.timeOrigin?performance.timeOrigin:performance.timing.navigationStart)},{saveOriginalPath:!0});try{await dt({method:"POST",data:JSON.stringify(e),url:t})}catch(e){}}getCurrentResourcesTimings(){if(!pS.isSupported)return[];return performance.getEntriesByType("resource").filter(e=>{let{name:t}=e;return this.urlRegexp.test(t)&&t!==this.reportUrl})}getLastResourcesTimings(){return this.history}getAllResourcesTimings(){return[...this.getLastResourcesTimings(),...this.getCurrentResourcesTimings()]}loop(){this.updateInterval<=0||(this.timeoutId=window.setTimeout(async()=>{await this.updateInfo(),this.loop()},this.updateInterval))}}pS.isSupported=window.performance&&"function"===typeof window.performance.getEntriesByType&&("function"===typeof performance.clearResourceTimings||"function"===typeof performance.webkitClearResourceTimings);var fS=r(60),ES=r.n(fS);mi(window);const AS=function(e){const t=Object(Sl.a)(e).match(/Firefox\/([0-9]+)\./);return t&&parseInt(t[1],10)||-1}(window);var vS=r(44);Object(vS.a)();var yS=r(45);Object(yS.a)();class SS{constructor(e){let{parentElement:t,ignorePointerEvents:r,visibleOnInit:n}=e;this.slotWrapper=void 0,this.slotElement=void 0,this.ignorePointerEvents=void 0,this.ignorePointerEvents=r,this.slotWrapper=t.ownerDocument.createElement("div"),f(this.slotWrapper,Rd.a.player__slot),this.setVisible(n),r&&(this.slotWrapper.style.pointerEvents="none"),this.slotElement=t.ownerDocument.createElement("div"),f(this.slotElement,Rd.a.player__slot),this.slotWrapper.appendChild(this.slotElement),t.appendChild(this.slotWrapper)}setVisible(e){this.slotWrapper.style.opacity=e?"1":"0",this.slotWrapper.style.pointerEvents=e&&!this.ignorePointerEvents?"auto":"none"}remove(){Object($c.a)(this.slotWrapper)}getElement(){return this.slotElement}}const gS=Object(uc.a)(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):e=>e.__proto__||Object.prototype,mS=r(50);class TS extends SS{constructor(e){super(e),this.videoElement=void 0;const{videoElement:t}=e;this.videoElement=t;const r=function(e){const t=gS(e);return t?()=>{gS(e)!==t&&mS(e,t)}:rc.a}(t);this.slotElement.appendChild(t),r()}getVideoElement(){return this.videoElement}}class RS{constructor(e){this.parentElement=void 0,this.adElement=void 0,this.useNativeControls=void 0,this.forceUsingSeamlessAd=void 0,this.originalVideoSlot=void 0,this.skinSlot=void 0,this.adElementsSetObjects=[],this.visibleSlotsSet=void 0;const{parentElement:t,adElement:r,originalVideoElement:n,useNativeControls:i,forceUsingSeamlessAd:o}=e;this.useNativeControls=i,this.forceUsingSeamlessAd=o,this.parentElement=t,this.adElement=r,this.originalVideoSlot=new TS({videoElement:n,parentElement:t,ignorePointerEvents:!1,visibleOnInit:!0}),this.skinSlot=new SS({parentElement:t,ignorePointerEvents:i,visibleOnInit:!0}),this.showSkinAndOriginalVideo()}getSkinElement(){return this.skinSlot.getElement()}clearAdSlots(){this.adElementsSetObjects.forEach(e=>{let{adSlot:t,videoSlot:r}=e;t.remove(),r!==this.originalVideoSlot&&r.remove()}),this.adElementsSetObjects.length=0}showSkinAndOriginalVideo(){this.setVisibleSlotsSet({videoSlot:this.originalVideoSlot,htmlSlot:this.skinSlot}),this.clearAdSlots()}showAdElementsSet(e){const t=this.adElementsSetObjects.find(t=>t.adElementsSet===e);t&&this.setVisibleSlotsSet({videoSlot:t.videoSlot,htmlSlot:t.adSlot})}createAdElementsSet(e){let{useSeamlessAdIfPossible:t,adType:r}=e;const{parentElement:n}=this;let i;i=!1;const o=n.ownerDocument,a=i?new TS({videoElement:o.createElement("video"),parentElement:n,ignorePointerEvents:!1,visibleOnInit:!1}):void 0,s=r===bu.overlay,l=s&&!this.useNativeControls?o.getElementById(ES.a.overlapAdContainer):this.adElement;if(!l)return;const c=new SS({parentElement:l,ignorePointerEvents:s,visibleOnInit:s}),d=a||this.originalVideoSlot;sa(this.originalVideoSlot.getVideoElement(),d.getVideoElement());const u={videoSlotElement:d.getVideoElement(),isOriginalVideoSlot:!a,adSlotElement:c.getElement()};return this.adElementsSetObjects.push({videoSlot:d,adSlot:c,adElementsSet:u}),u}setVisibleSlotsSet(e){let{videoSlot:t,htmlSlot:r}=e;this.visibleSlotsSet&&(r!==this.visibleSlotsSet.htmlSlot&&this.visibleSlotsSet.htmlSlot.setVisible(!1),t!==this.visibleSlotsSet.videoSlot&&this.visibleSlotsSet.videoSlot.setVisible(!1),sa(this.visibleSlotsSet.videoSlot.getVideoElement(),t.getVideoElement())),t.setVisible(!0),r.setVisible(!0),this.visibleSlotsSet={videoSlot:t,htmlSlot:r}}}var _S=r(47),OS=r.n(_S),PS=r(24);const bS=Object(PS.a)(window);var IS=r(48),CS=r.n(IS);const{isSupported:NS}=r(77),wS=NS(),DS=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase();return/windows/.test(t)}(),LS=function(e){void 0===e&&(e=window);const t=Object(Sl.a)(e).toLowerCase(),r=/windows nt (\d+\.\d+)/.exec(t);if(r){const e=Number(r[1]);return e>0?e:-1}return-1}(),kS={[qd.DEFAULT]:void 0,[qd.MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[qd.NETWORK_MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[qd.NETWORK_PLAYER]:"https://yandex.ru/support/video-player/player-issues.html",[qd.NETWORK_TIMEOUT]:"https://yandex.ru/support/video-player/player-issues.html",[qd.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[qd.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[qd.CANNOT_PLAY]:void 0,[qd.EXCEPTION]:"https://yandex.ru/support/video-player/loading-issues.html",[qd.CONFIG]:void 0,[qd.REGIONAL]:void 0,[qd.DRM]:"https://yandex.ru/support/video-player/drm.html",[qd.ADS]:void 0,[qd.ACCESS]:void 0},MS=[401,403],{ErrorDetails:VS}=r(74),US=[VS.FRAG_LOAD_ERROR,VS.FRAG_LOAD_TIMEOUT,VS.FRAG_PARSING_ERROR,VS.BUFFER_APPEND_ERROR,VS.INTERNAL_EXCEPTION,VS.LEVEL_LOAD_TIMEOUT,VS.MANIFEST_LOAD_ERROR,VS.MANIFEST_LOAD_TIMEOUT],FS=[VS.FRAG_LOAD_ERROR,VS.FRAG_LOAD_TIMEOUT,VS.FRAG_PARSING_ERROR,VS.LEVEL_LOAD_TIMEOUT],xS=[VS.MANIFEST_LOAD_ERROR,VS.MANIFEST_LOAD_TIMEOUT],HS=[VS.FRAG_DECRYPT_ERROR,VS.FRAG_PARSING_ERROR,VS.BUFFER_STALLED_ERROR,VS.BUFFER_NUDGE_ON_STALL];let jS;!function(e){e.LOWRES="lowres",e.HIGHRES="highres"}(jS||(jS={}));const BS={tiles:"com.yandex.video.thumbnail.lowres.tiles",duration:"com.yandex.video.thumbnail.lowres.duration",resolution:"com.yandex.video.thumbnail.lowres.resolution",uri:"com.yandex.video.thumbnail.lowres.uri"},YS={tiles:"com.yandex.video.thumbnail.tiles",duration:"com.yandex.video.thumbnail.duration",resolution:"com.yandex.video.thumbnail.resolution",uri:"com.yandex.video.thumbnail.uri"},KS=/^(\d+)x(\d+)@(\d+)$/;let GS;!function(e){e.WAS_WORKER_INTERNAL_ERROR="YANDEX_PLAYER_HLS_WAS_WORKER_INTERNAL_ERROR"}(GS||(GS={}));let WS;!function(e){e.HasAd="HasAd",e.NoAd="NoAd",e.NoData="NoData"}(WS||(WS={}));const XS=e=>{const t=e.match(/\?/g);return!t||t.length<2},qS=function(){const{volume:e}=Zc;Zc.volume=0===e?1:0;const t=Zc.volume!==e;return Zc.volume=e,t}(),QS=15,zS=1e3;var JS,$S;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(JS||(JS={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}($S||($S={}));const ZS=null===Zc.onwaiting,eg=(e,t)=>{let r=!1;const n=d(e,"waiting",()=>{r||(r=!0,t(!0))},{passive:!0}),i=d(e,"playing",()=>{r&&(r=!1,t(!1))},{passive:!0}),o=d(e,"canplay",()=>{r&&(r=!1,t(!1))},{passive:!0});return()=>{n(),i(),o()}},tg=!ZS||Jl||Ld.a?(e,t)=>{let r=0,n=!1;return T(()=>{const i=e.currentTime,o=e.duration;if(!e.paused){const e=r+.004;n?i>e&&(t(!1),n=!1):i<e&&i!==o&&(t(!0),n=!0)}r=i})}:eg;let rg;!function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(rg||(rg={}));const ng={once:!0,passive:!0};class ig{constructor(e){this.props=e,this.currentAttempt=0,this.recovering=!1,this.plannedTaskPromise=void 0,this.resetTimeoutId=0}get allowed(){return this.currentAttempt<this.props.maxAttempts}get started(){return this.currentAttempt>0}get attempt(){return this.currentAttempt}getState(){return this.started?yy.ON:yy.OFF}planTask(e,t){let r,{reason:n,delay:i,force:o,rawData:a}=t;if(this.recovering&&!o)return this.log("Can't plan task cause is in process of recover"),void this.props.onConcurrentRecover({reason:n,rawData:a});this.clearPlannedTask("new task planned"),this.clearResetTimeout("new task planned"),"number"===typeof i?(r=Wc(i).promise.then(rc.a),this.log("#"+this.currentAttempt+", PLAN task, "+i+"ms, ["+n+"]",a)):(r=i,this.log("#"+this.currentAttempt+", PLAN async task, ["+n+"]",a)),P(r),r.then(()=>{if(r===this.plannedTaskPromise)return this.recovering=!0,this.currentAttempt++,this.props.onRunTask({reason:n,delay:i,rawData:a,attempt:this.currentAttempt}),this.log("#"+this.currentAttempt+", RUN task, ["+n+"]",a),this.clearPlannedTask(),e()}).catch(e=>{this.log("Error while recover",e),this.props.onRecoverError({reason:n,rawData:a},e)}).then(()=>{this.recovering=!1}),this.plannedTaskPromise=r}isRecovering(){return this.recovering}planReset(e){let{reason:t,delay:r}=e;this.log("plan RESET, "+r+"ms, if ["+t+"]"),this.clearResetTimeout("new reset planned"),this.resetTimeoutId=window.setTimeout(()=>{this.reset(t)},r)}destroy(){this.reset("destroy")}reset(e){this.props.onReset(),this.log("RESET because of ["+e+"]"),this.clearPlannedTask(),this.clearResetTimeout(),this.currentAttempt=0}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xd.log("RecoverHelper:",...t)}clearPlannedTask(e){e&&this.log("CLEAR planned TASKS because of ["+e+"]"),this.plannedTaskPromise=void 0}clearResetTimeout(e){e&&this.log("CLEAR planned RESET because of ["+e+"]"),0!==this.resetTimeoutId&&(clearTimeout(this.resetTimeoutId),this.resetTimeoutId=0)}}const og=Y(30),ag=Y(5);var sg=r(29),lg=r.n(sg);class cg{constructor(e,t,r,n){this.win=e,this.callback=t,this.minDiff=r,this.maxDiff=n,this.animationFrameFunctions=void 0,this.getDiff=I(),this.id=0,this.maxDiffTimeoutId=0,this.started=!1,this.worksOnShort=!1,this.loopShort=()=>{this.worksOnShort=!0;const e=this.getDiff();if(e>=this.minDiff&&(this.getDiff=I(),this.callback(e)),!this.started)return this.clearLong(),void this.clearShort();this.startShort()},this.loopLong=()=>{if(!this.worksOnShort){const e=this.getDiff();e>=this.minDiff&&(this.getDiff=I(),this.callback(e))}if(!this.started)return this.clearLong(),void this.clearShort();this.worksOnShort=!1,this.startLong()},this.animationFrameFunctions=S(e)}start(){this.started||(this.started=!0,this.getDiff=I(),this.startShort(),this.startLong())}stop(){this.started&&(this.started=!1,this.clearShort(),this.clearLong())}startShort(){this.id=this.animationFrameFunctions.requestAnimationFrame(this.loopShort)}startLong(){this.maxDiffTimeoutId=this.win.setTimeout(this.loopLong,this.maxDiff/2)}clearShort(){this.animationFrameFunctions.cancelAnimationFrame(this.id)}clearLong(){this.win.clearTimeout(this.maxDiffTimeoutId)}}var dg=r(38);const ug=Object(lu.a)()?9e5:864e5;class hg{constructor(e){this.alpha=void 0,this.estimate=void 0,this.totalWeight=void 0,this.alpha=e?Math.exp(Math.log(.5)/e):0,this.estimate=0,this.totalWeight=0}sample(e,t){const r=Math.pow(this.alpha,e);this.estimate=t*(1-r)+r*this.estimate,this.totalWeight+=e}getTotalWeight(){return this.totalWeight}getEstimate(){if(this.alpha){const e=1-Math.pow(this.alpha,this.totalWeight);return this.estimate/e}return this.estimate}}class pg{constructor(){this.minWeight=void 0,this.minDelayMs=void 0,this.slow=void 0,this.fast=void 0,this.minWeight=.001,this.minDelayMs=50,this.slow=new hg(9),this.fast=new hg(3)}sample(e,t){const r=(e=Math.max(e,this.minDelayMs))/1e3,n=8*t/r;this.fast.sample(r,n),this.slow.sample(r,n)}getEstimate(){return this.canEstimate()?Math.min(this.fast.getEstimate(),this.slow.getEstimate()):NaN}canEstimate(){const e=this.fast;return e&&e.getTotalWeight()>=this.minWeight}}const fg={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0};class Eg{constructor(e){void 0===e&&(e={}),this.timeMeasurer=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.totalDecodedFrames=0,this.totalDroppedFrames=0,this.lastVideoWidth=void 0,this.lastVideoHeight=void 0,this.maxWidth=1/0,this.maxHeight=1/0,this.props=void 0,this.props=e}setRestrictions(e,t){var r,n;e>=this.maxWidth&&t>=this.maxHeight||t<360||(this.maxWidth=e,this.maxHeight=t,xd.warn("FPSController changed restrictions: "+e+"\xd7"+t+"."),null==(r=(n=this.props).onRestrictionsChange)||r.call(n,{decodedFrames:this.totalDecodedFrames,droppedFrames:this.totalDroppedFrames,maxWidth:e,maxHeight:t}))}getRestrictions(){return{maxWidth:this.maxWidth,maxHeight:this.maxHeight}}update(e){if(!e.videoWidth||!e.videoHeight)return;const t=ss(e);this.checkFPS(e.videoWidth,e.videoHeight,t.totalVideoFrames,t.droppedVideoFrames)}checkFPS(e,t,r,n){!this.timeMeasurer||!r||this.lastVideoWidth!==e||this.lastVideoHeight!==t||r<this.lastDecodedFrames?(this.timeMeasurer=I(),this.totalDecodedFrames=0,this.totalDroppedFrames=0):(this.totalDroppedFrames+=n-this.lastDroppedFrames,this.totalDecodedFrames+=r-this.lastDecodedFrames,this.timeMeasurer()>5e3&&this.totalDroppedFrames>.25*this.totalDecodedFrames&&this.setRestrictions(e,t)),this.lastDecodedFrames=r,this.lastDroppedFrames=n,this.lastVideoWidth=e,this.lastVideoHeight=t}}const Ag=Y(.5),vg=Y(0);class yg{get state(){return this.playerStore.getState()}get fragDuration(){return this.getFragmentsData().fragmentDuration}constructor(e){var t;this.props=e,this.engine=void 0,this.recoverHelper=void 0,this.video=void 0,this.wasPausedAfterQualityChanged=!1,this.currentTextTrack=void 0,this.onDestroy=new Lc,this.onDetach=new Lc,this.onCurrentTimeChange=void 0,this.onLoadedData=void 0,this.onCanPlay=void 0,this.onContentImpression=void 0,this.videoTrackValueSignal=void 0,this.audioTrackValueSignal=void 0,this.textTrackValueSignal=void 0,this.onPlayingStateChange=new Lc,this.onPlayingStateChangeInternal=new Lc,this.onVideoTypeChange=new Lc,this.withCredentials=!1,this.playerStore=void 0,this.currentState=fd.PAUSE,this.deepHDTracks=new Set,this.videoTrackLabels=new Map,this.previousScreenshotBlobUrl=void 0,this.destroy=Object(Hc.a)(()=>this.destroyUnsafe()),this.animationFramesController=void 0,this.fpsController=new Eg({onRestrictionsChange:e=>{this.props.logEvent({event:"FPSControllerRestrictions",params:e})}}),this.currentSubtitles=[],this.bandwidthEstimateUpdateInterval=null,this.preventPauseState=void 0,this.restoreUserTracks=()=>{this.restoreUserTextTrack(),this.restoreUserAudioTrack(),this.restoreUserVideoTrack()},this.refreshSubtitles=()=>{try{if(!this.video)return;const e=this.getCurrentTextTrack(),t=e?Object(jl.a)(e.activeCues).filter(e=>e&&e.text).map(e=>{let{text:t}=e;return t}):[];md()(this.currentSubtitles,t)||(this.currentSubtitles=t,this.playerStore.dispatch(tp(t)))}catch(e){this.props.onError(new Ou(e,{code:Qd.REFRESH_SUBTITLES_ERROR,isFatal:!1}))}},this.disableSubtitlesNative=()=>{this.video&&es(this.video.textTracks).forEach(e=>{e&&(e.mode="disabled")})},this.emptySubtitles=()=>{this.currentSubtitles.length>0&&(this.currentSubtitles=[],this.playerStore.dispatch(tp([])))},this.handleConcurrentRecover=e=>{this.props.logEvent({event:"ConcurrentRecoverCalled",params:e})},this.handleRecoverError=(e,t)=>{this.props.onError(new Ou({code:Qd.RECOVER_TASK_ERROR,isFatal:!1,details:e,stack:t.stack}))},this.recoverHelper=new ig({maxAttempts:null!=(t=e.maxRecoverAttempts)?t:10,onRunTask:this.props.onRecover,onReset:()=>this.playerStore.dispatch(Fh(void 0)),onConcurrentRecover:this.handleConcurrentRecover,onRecoverError:this.handleRecoverError}),this.onDestroy.add(()=>this.recoverHelper.destroy());const{video:r,playerStore:n,sourceParams:i}=this.props;this.video=r,this.playerStore=n,this.onPlayingStateChange=this.props.onPlayingStateChange,this.onCurrentTimeChange=this.props.onCurrentTimeChange,this.videoTrackValueSignal=this.props.videoTrackValueSignal,this.audioTrackValueSignal=this.props.audioTrackValueSignal,this.textTrackValueSignal=this.props.textTrackValueSignal,this.onVideoTypeChange=this.props.onVideoTypeChange,this.onCanPlay=this.props.onCanPlay,this.onLoadedData=this.props.onLoadedData,this.onContentImpression=this.props.onContentImpression,this.setLoop(Boolean(e.sourceParams.loop)),this.withCredentials=Boolean(e.sourceParams.withCredentials),this.withCredentials&&Qa("https://strm.yandex.net/cmatch"),this.setPoster(i.preview),this.updateNativeControlsVisibility();const o=this.playerStore.getState().controller.preload||Jc;r.setAttribute("preload",o?"auto":"none"),this.animationFramesController=new cg(window,e=>{try{this.onTick(e)}catch(e){this.props.onError(new Ou(e,{code:Qd.ON_TICK_ERROR,isFatal:!1}))}},1e3/60*4,250),this.onDestroy.add(()=>this.animationFramesController.stop()),Promise.resolve().then(()=>{this.initInternalSubscribe()})}initInternalSubscribe(){this.onPlayingStateChange.add(e=>{if(e!==fd.END||Br(this.state)){if(e===fd.PLAY&&!On(this.state)){const e=this.fragDuration<=2*VA?1e3*this.fragDuration:1e3*VA;this.recoverHelper.planReset({delay:e,reason:"no new errors for "+e+"ms"})}}else this.recoverHelper.reset("onPlayingStateChange ["+fd.END+"]")}),this.onPlayingStateChangeInternal.add(e=>{if(!this.state.controller.wasVolumeChanged)return;if(this.engine===Cv.NATIVE||this.engine===Cv.MP4)return;const t=this.getMuted();this.setMuted(!t),this.setMuted(t)}),this.onPlayingStateChangeInternal.add(e=>{const{encoderState:t}=this.state.controller;(t===HA.Attaching||t===HA.Attached)&&this.currentState!==e&&(this.isBufferingOnPreload(e)||this.currentState===fd.END&&this.video.paused||(this.currentState=e,this.onPlayingStateChange.dispatch(e)))}),this.onCurrentTimeChange.add(e=>{const t=this.getDuration(),{videoType:r}=this.state.controller;e>=t&&t>0&&r===Ed.VOD&&!this.props.sourceParams.loop&&this.onPlayingStateChangeInternal.dispatch(fd.END)}),this.subscribeYabroRum(),this.addVideoEventListener(null===this.video.onplaying?"playing":"play",()=>{this.wasPausedAfterQualityChanged=!1,this.onPlayingStateChangeInternal.dispatch(fd.PLAY)}),this.addVideoEventListener("loadedmetadata",()=>{this.props.onDurationChange.dispatch(this.getDuration())}),this.addVideoEventListener("seeking",()=>{this.playerStore.dispatch(Xh(this.video.readyState))}),this.addVideoEventListener("seeked",()=>{this.playerStore.dispatch(Xh(this.video.readyState))}),this.addVideoEventListener("ratechange",()=>{if(On(this.state))return;const e=this.video.playbackRate;0!==e&&e!==this.state.controller.playbackRate&&(this.recoverHelper.isRecovering()||this.playerStore.dispatch(Mh(e)))}),this.addVideoEventListener("pause",()=>{this.wasPausedAfterQualityChanged||this.video.ended||this.getCurrentTime()>=this.getDuration()||this.onPlayingStateChangeInternal.dispatch(fd.PAUSE)}),this.addVideoEventListener("volumechange",()=>{let e=this.getMuted(),t=this.getVolume();On(this.state)&&(e=0===t||this.getMuted(),t=this.playerStore.getState().controller.volume,this.setMuted(e),this.setVolume(this.playerStore.getState().controller.volume)),this.playerStore.dispatch(ch({volume:t,muted:e,changeReason:Vv.VolumeChangeEvent}))}),this.addVideoEventListener("progress",()=>{this.props.onChangeBufferingRanges.dispatch(function(e){const t=[];for(let r=0;r<e.buffered.length;r++)t.push({start:Y(e.buffered.start(r)),end:Y(e.buffered.end(r))});return function(e){const t=e.map(e=>{let{start:t,end:r}=e;return{start:t,end:r}}).sort((e,t)=>e.start-t.start);if(t.length<=1)return t;const r=[t[0]];return t.slice(1).forEach((e,t)=>{const n=r[r.length-1];n.end<e.start?r.push(e):n.end<e.end&&(n.end=e.end)}),r}(t)}(this.props.video))}),this.addVideoEventListener("canplay",()=>{this.onCanPlay.dispatch(void 0),this.restorePlaybackRateIfNeeded()}),this.addVideoEventListener("ended",()=>{const{videoType:e}=this.playerStore.getState().controller;e===Ed.VOD||void 0===e?this.onPlayingStateChangeInternal.dispatch(fd.END):this.video.paused&&xd.warn('Pause stream after "ended" event on LIVE stream')}),this.addVideoEventListener("loadeddata",()=>{this.playerStore.dispatch(Xh(this.video.readyState)),this.onLoadedData.dispatch(void 0)}),this.addVideoEventListener("error",e=>this.onVideoTagError(e)),this.state.skin.useNativeControls&&this.onDestroy.add(qa(this.video,()=>{this.playerStore.dispatch(XE())})),this.handleSubtitles()}async play(){if(this.preventPauseState)return this.preventPauseState=cs({},this.preventPauseState,{shouldPlayAfterEnd:!0}),void xd.log("play method call during preventPauseAsync operation");const e=$a(this.video);e.catch(e=>{-1!==e.toString().indexOf("no supported sources")&&this.props.onError(new Ou({code:Qd.UNSUPPORTED_MEDIA_TYPE}))}),await e}getFragmentsData(){return{totalDuration:this.getDuration(),fragmentDuration:VA,startTime:Y(0)}}getUtcStartTime(){return vg}getUtcPosition(){return vg}async attachEncoder(){this.animationFramesController.start(),this.bandwidthEstimateUpdateInterval=window.setInterval(()=>{this.playerStore.dispatch(eh(this.getBandwidthEstimate())),rs(this.getBandwidthEstimate())},5e3)}insertIntoCalled(){}captureScreenshot(e){return Promise.resolve(void 0)}clearScreenshot(){this.previousScreenshotBlobUrl&&(URL.revokeObjectURL(this.previousScreenshotBlobUrl),this.previousScreenshotBlobUrl=void 0)}seek(e){if(!this.canSeek())return void this.playerStore.dispatch(Ph({videoTime:e}));this.playerStore.dispatch(Fh(void 0));const{start:t,end:r}=this.getSeekableRange(),{currentTime:n,bufferingRanges:i}=this.state.controller,o=l(e,t,r);void 0===ei(i,o)&&this.playerStore.dispatch(sp(ur(jA.Seek,{oldPosition:n,newPosition:o}))),ls(this.video,Y(o)),this.onCurrentTimeChange.dispatch(this.getCurrentTime())}setPlaybackRate(e){const t=this.video.playbackRate;if(t===e)return;this.video.playbackRate=e;const r=this.video.playbackRate;r!==t&&this.playerStore.dispatch(Mh(r))}getUtcEndTime(){return Y(0)}updateNativeControlsVisibility(){const e=Ri(this.state)&&!Dd(this.state.skin.hiddenControls)&&(this.state,!0);this.playerStore.dispatch(Ip(e)),N(this.video,{controls:e?"controls":null}),this.video.classList.toggle(lg.a.video_hiddenControls,!e),this.setNativeTimeControlVisibility(za(this.state)),this.setNativeTimelineControlVisibility(za(this.state))}async detachEncoder(){if(this.animationFramesController.stop(),this.state.controller.encoderState===HA.Attached){const e=this.getBandwidthEstimate();this.playerStore.dispatch(eh(e)),rs(e)}null!==this.bandwidthEstimateUpdateInterval&&clearInterval(this.bandwidthEstimateUpdateInterval),this.videoTrackValueSignal.dispatch(void 0),this.audioTrackValueSignal.dispatch(void 0),this.textTrackValueSignal.dispatch(void 0),this.onDetach.dispatch(void 0)}async preloadSource(){xd.log("preloadSource() is not implemented for "+this.engine)}setLoop(e){const{video:t}=this.props,{loop:r}=this.video;e!==r&&(t.loop=e)}isPaused(){return this.props.video.paused}pause(){this.recoverHelper.reset("pause"),this.props.video.pause()}getDuration(){return Y(this.video.duration)}getCurrentTime(){return Sd(Math.floor(yd(Y(this.props.video.currentTime),1e3)),1e3)}getVideoWidth(){return this.video.videoWidth}getVideoHeight(){return this.video.videoHeight}setVolume(e){!function(e){return"number"===typeof e&&0<=e&&e<=1}(e)?xd.warn("setVolume wrong value"):qS?this.video.volume=e:xd.warn("cannot change video volume")}getVolume(){return this.video.volume}setMuted(e){this.video.muted=e}getMuted(){return this.video.muted}setPoster(e){this.state.skin.nativeControlsVisibility&&(this.removePoster(),this.props.video.setAttribute("poster",e||kd))}removePoster(){this.props.video.removeAttribute("poster")}getConnectionQuality(){return kv({fragDuration:yd(this.fragDuration,1e3),timings:this.props.resourceTimingsMonitor.getAllResourcesTimings()})}isDvrEnabled(){return!0}toggleNativeSubtitles(e){const t=this.state.skin.useNativeSubtitles;if(t===e)return;const r=ts(t),n=ts(e);this.playerStore.dispatch(SA(e)),es(this.video.textTracks).forEach((e,t)=>{e&&(e.mode=r===e.mode?n:"disabled")})}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}getRecoverHelperState(){return this.recoverHelper.getState()}getCapSizes(){var e;const t=null!=(e=this.props.getPipWindowSize())?e:{width:this.getVideoElementWidth(),height:this.getVideoElementHeight()},r=this.fpsController.getRestrictions();return{height:Math.min(...[r.maxHeight-1,yd(t.height,devicePixelRatio),Xo()?360:void 0].filter(b)),width:Math.min(yd(t.width,devicePixelRatio),r.maxWidth-1)}}getMaxCapAllowedVideoTrack(){}getRemainingBufferedTime(){return{total:ri(this.state)||Y(0)}}getBandwidthEstimate(){const{controller:{lastKnownBandwidthEstimate:e}}=this.playerStore.getState();if(isFinite(e))return e;if(this.props.slowConnection)return 1e5;const t=function(){try{const e=My.a.getItem("videolayer-bandwidth-estimate");if(!e)return NaN;const{bandwidthEstimate:t,time:r}=JSON.parse(e);return Object(dg.a)()-r<ug?t:NaN}catch(e){return NaN}}();if(!isNaN(t)&&t>0)return t;const r=is();if(!isNaN(r)&&r>0)return r;const n=function(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;if("number"===typeof r.downlink)return r.downlink;if("number"===typeof r.downlinkMax)return r.downlinkMax;if("string"===typeof r.type||"number"===typeof r.type)switch(r.type){case $S.BLUETOOTH:return 3;case JS.CELL_2G:return.384;case JS.CELL_3G:case $S.CELLULAR:return 2;case $S.WIMAX:return 37;case $S.NONE:return 0;case JS.ETHERNET:case $S.ETHERNET:case JS.WIFI:case $S.WIFI:case $S.MIXED:return 10;case JS.UNKNOWN:case $S.UNKNOWN:case $S.OTHER:}return-1}(window);return-1===n?1e6:yd(yd(n,1e3),1e3)}async recoverStream(){const e=this.getPositionToRecover();this.playerStore.dispatch(Ph(e)),await this.detachEncoder(),await this.attachEncoder()}getLiveLatency(){}getPlayingState(){return this.currentState}subscribeVideoBuffering(){const{video:e}=this,t=this.getVideoBufferingSubscriber()(e,t=>{const r=os(e,t);this.onPlayingStateChangeInternal.dispatch(r)});this.onDestroy.add(t)}getVideoBufferingSubscriber(){return tg}getPositionToRecover(){const{programDateTime:e,currentTime:t,startPosition:r}=this.state.controller,n={utc:void 0===e?void 0:Ad(Sd(e,1e3),t),videoTime:t};return t?n:r}subscribeContentImpression(){this.onDetach.add(function(e,t){const r=d(e,"timeupdate",()=>{e.currentTime>0&&!e.paused&&(i(),t())}),n=d(e,"playing",()=>{e.duration>0&&(i(),t())}),i=()=>{r(),n()};return i}(this.video,()=>{this.onContentImpression.dispatch(void 0)}))}onTick(e){if(this.state.skin.seeking)return;this.dispatchOnDurationChange();const t=this.getCurrentTime();t===this.state.controller.currentTime&&0!==t||this.onCurrentTimeChange.dispatch(this.getCurrentTime()),this.state.controller.videoTagReadyState!==this.video.readyState&&this.playerStore.dispatch(Xh(this.video.readyState)),this.video.paused&&this.currentState===fd.PLAY&&!this.wasPausedAfterQualityChanged&&this.state.controller.playingState!==fd.PAUSE&&this.onPlayingStateChangeInternal.dispatch(fd.PAUSE),this.setPlaybackRateCatchup(),Ji(this.state)||this.state.controller.playingState===fd.PAUSE||this.fpsController.update(this.video)}addVideoEventListener(e,t,r){let{once:n}=void 0===r?{}:r,i=t;const{video:o}=this,a=()=>{o.removeEventListener(e,i)};return n&&(i=e=>{this.onDestroy.remove(a),a(),t.call(o,e)}),this.onDestroy.add(a),this.video.addEventListener(e,i),a}addEventListener(e,t,r,n){const i=d(e,t,r,n);this.onDestroy.addOne(i)}getSeekableRange(){return{start:Y(0),end:this.getDuration()||Y(0)}}setNativeTimeControlVisibility(e){this.state.skin.useNativeControls&&this.video.classList.toggle(lg.a.video_hiddenTime,!e)}setNativeTimelineControlVisibility(e){this.state.skin.useNativeControls&&this.video.classList.toggle(lg.a.video_hiddenTimeline,!e)}getVisibleTextTrackMode(){return ts(this.state.skin.useNativeSubtitles)}getHiddenTextTrackMode(){return"disabled"}getCurrentTextTrack(){if(!this.video)return;const e=this.getVisibleTextTrackMode();return es(this.video.textTracks).find(t=>void 0!==t&&t.mode===e)}restoreUserTextTrack(){const{userTextTrackEnabled:e}=this.state.controller;if(void 0!==e)if(e){const e=function(e){const{userTextTrackName:t,userTextTrackLang:r,textTracks:n}=e.controller;return Rn(n,{name:t,lang:r})}(this.state);e&&this.setTextTrack(e)}else this.disableTextTrack()}restoreUserAudioTrack(){if(q(this.video))return;const e=function(e){const{userAudioTrackName:t,userAudioTrackLang:r,audioTracks:n}=e.controller;return ja(n,{name:t,lang:r})}(this.playerStore.getState());e&&(xd.log("Set audio track by user params audioTrack=["+JSON.stringify(e)+"]"),this.setAudioTrack(e))}restoreUserVideoTrack(){const e=function(e){const{videoTracks:t,userVideoTrackName:r,userVideoTrackHeight:n}=e.controller;return Ya(t,{name:r,height:n})}(this.playerStore.getState());e&&(xd.log("Set video track by user params videoTrack=["+JSON.stringify(e)+"]"),this.setVideoTrack(e))}updateSkinDvrParameters(e){const t=Sd(e,1e3),{skin:{skinDVRStartTime:r,skinDVRDuration:n},controller:{videoType:i,dvrDuration:o,duration:a}}=this.state;if(i===Ed.LIVE){const e=Y(Math.min(Ad(r,t),a||Y(0)));this.playerStore.dispatch(Lh(e))}else if(i===Ed.EVENT){const e=Y(Math.min(Ad(n,t),o));this.playerStore.dispatch(kh(e))}}checkPositionAndReturnToLive(){const{controller:{videoType:e},skin:{useNativeControls:t}}=this.state;if(e!==Ed.LIVE||t||On(this.state)||!this.canSeek())return;const r=this.getCurrentTime(),{startTime:n,fragmentDuration:i}=this.getFragmentsData();if(r<n){const e=Ad(n,yd(i,1));xd.log("checkPositionAndReturnToLive: return to dvr at "+e),this.seek(e)}}async destroyUnsafe(){this.onDestroy.dispatch(void 0),await this.detachEncoder();const{error:e}=this.state.controller.errorInfo;e&&e.isFatal&&this.video.src&&(this.video.src=""),this.playerStore.dispatch(Vh(YA.bufferingRanges))}async preventPauseAsync(e,t){const{paused:r}=e,n=t();this.preventPauseState||(this.preventPauseState={promises:[],shouldPlayAfterEnd:!r}),this.preventPauseState.promises.push(n);const i=await n;if(this.preventPauseState){const t=this.preventPauseState.promises.length;Promise.all(this.preventPauseState.promises).catch(rc.a).then(()=>{this.preventPauseState&&t===this.preventPauseState.promises.length&&(this.preventPauseState.shouldPlayAfterEnd&&P(e.play()),this.preventPauseState=void 0)})}return i}getVideoOwnerDocument(){return this.video.ownerDocument||document}logLoadToRum(){co(this.engine,this.state.ad.adSyncInit)}subscribeYabroRum(){this.onDetach.addOne(this.addVideoEventListener("firstframedecoded",()=>{ho(this.engine,{},this.state.ad.adSyncInit)},{once:!0})),this.onDetach.addOne(this.addVideoEventListener("firstframeshown",()=>{po(this.engine,{},this.state.ad.adSyncInit)},{once:!0}))}getStreamUrl(){return this.props.stream.url}shouldUseLowBuffer(){const{startStage:e,autoplay:t,preload:r}=this.state.controller;return e!==xA.started&&!t&&r}isBufferingOnPreload(e){return e===fd.BUFFERING&&(!!this.state.controller.preload&&(this.state.controller.startStage!==xA.started&&this.state.controller.startStage!==xA.starting))}getMaxBufferLength(){if(this.shouldUseLowBuffer())return ag;const{maxBufferLength:e=og}=this.props;return e}setPlaybackRateCatchup(){const e=void this.state;void 0!==e&&this.setPlaybackRate(e)}getVideoElementHeight(){const{video:e}=this;return e.height||e.clientHeight||e.offsetHeight}getVideoElementWidth(){const{video:e}=this;return e.width||e.clientWidth||e.offsetWidth}handleSubtitles(){const{textTracks:e}=this.video;e&&"function"===typeof e.addEventListener&&(this.onDestroy.add(d(e,"addtrack",e=>{const t=e.track;t&&"subtitles"===t.kind&&this.onDestroy.add(d(t,"cuechange",this.refreshSubtitles))})),this.textTrackValueSignal.add(e=>{void 0===e?this.emptySubtitles():this.refreshSubtitles()}),this.onDestroy.add(T(this.refreshSubtitles)),this.onDetach.add(this.disableSubtitlesNative))}restorePlaybackRateIfNeeded(){if(Br(this.state))return;const e=this.state.controller.playbackRate;e!==this.video.playbackRate&&this.setPlaybackRate(e)}dispatchOnDurationChange(){const e=this.getDuration();isNaN(e)||this.state.controller.duration!==e&&this.props.onDurationChange.dispatch(e)}}class Sg extends yg{initInternalSubscribe(){super.initInternalSubscribe(),this.onPlayingStateChange.add(e=>{e===fd.PLAY?this.recoverHelper.reset("play"):e===fd.END?this.stopLoad():e===fd.BUFFERING&&this.tryRecoverOnBuffering()}),this.subscribeVideoBuffering()}constructor(e){super(e),this.props=e,this.engine=Cv.HLS,this.preloadSourceHLSEncoder=void 0,this.preloadSourceHandlers=[],this.preloadPosition={},this.HLSEncoder=void 0,this.lastKnownLevelDetails=void 0,this.HLSEncoderAttachTime=1/0,this.loadStarted=!1,this.recoverOnBufferingReason=null,this.initHlsEncoderPromise=void 0,this.maxHeightCapping=void 0,this.levelForcingInterval=void 0,this.lastFragRequest=void 0,this.restoreUserTracksWhenPossible=()=>{const{HLSEncoder:e}=this;if(!e)return;if(!e.levels||0===e.levels.length)return void e.once(Hls.Events.MANIFEST_LOADED,this.restoreUserTracksWhenPossible);b(this.HLSEncoderAttachTime)?this.restoreUserTracks():e.once(Hls.Events.MEDIA_ATTACHED,this.restoreUserTracks)},this.onLevelUpdated=()=>{this.onVideoTypeChange.dispatch(this.getVideoType()),this.checkPositionAndReturnToLive();const e=this.getHlsEncoderLevelDetails();if(e&&e.fragments&&e.fragments.length>0){const[t]=e.fragments;t.programDateTime&&this.props.onProgramDateTimeChange.dispatch(yd(this.getUtcStartTime(),1e3))}},this.onSubtitleTracksUpdated=()=>{this.HLSEncoder&&this.props.onTextTracksChange.dispatch(function(e){const t=[];return Array.isArray(e)&&e.forEach(e=>{const r=Ma(e);r&&t.push(r)}),t}(this.HLSEncoder.subtitleTracks))},this.onAudioTracksUpdated=()=>{const{HLSEncoder:e}=this;if(!e)return;const{audioTracks:t}=e;e.config.maxBufferSize=t.length>0?12e6:Hls.DefaultConfig.maxBufferSize,this.props.onAudioTracksChange.dispatch(function(e){const t=[];return Array.isArray(e)?(e.forEach(e=>{const r=ka(e);r&&t.push(r)}),t):[]}(t))},ot(),this.playerStore.dispatch(xh(!0))}getEngine(){return Cv.HLS}getFragmentsData(){const e=this.getHlsEncoderLevelDetails();if(!e)return super.getFragmentsData();const{totalduration:t,targetduration:r,fragments:n}=e,[i]=n;return i?{totalDuration:Y(Math.min(t,this.getDuration())),fragmentDuration:Y(r),startTime:Y(i.start)}:super.getFragmentsData()}onOnline(){this.startLoadOnce(this.video.currentTime)}onOffline(){this.stopLoad()}play(){return this.startLoadOnce(),super.play()}getUtcStartTime(){const e=this.getHlsEncoderLevelDetails();if(!e||!e.hasProgramDateTime)return Y(0);const[t]=e.fragments;return t&&t.programDateTime?vd(Sd(t.programDateTime,1e3),Y(t.start)):Y(0)}getUtcPosition(){const e=this.getUtcStartTime();return e>0?Ad(e,this.getCurrentTime()):super.getUtcPosition()}setVideoTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const{levels:r}=t;if(void 0===r)return;const n=e.value===ry.value?-1:r.findIndex(t=>t.url.some(t=>t===e.value));-1===n?this.startLevelForcingWithSizeCap():this.stopLevelForcingWithSizeCap();const i=this.isPaused();t.currentLevel=n,!i&&this.isPaused()&&(this.wasPausedAfterQualityChanged=!0,this.onPlayingStateChangeInternal.dispatch(fd.BUFFERING))}setAudioTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const r=t.audioTracks.find(t=>e.value===String(t.id));r&&(t.audioTrack=Number(r.id))}setTextTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const r=this.getHlsTextTrack(e);r&&(this.textTrackValueSignal.dispatch(e&&e.value),t.subtitleTrack=r.id)}disableTextTrack(){this.textTrackValueSignal.dispatch(void 0)}toggleNativeSubtitles(e){super.toggleNativeSubtitles(e);const{HLSEncoder:t}=this;void 0!==t&&(t.subtitleDisplay=e)}async preloadSource(){this.props.logEvent({event:Pu.PreloadSource,params:{}});let e=!1;const t=()=>{e=!0};this.onDestroy.addOne(t),this.onDetach.addOne(t);try{await ot()}catch(e){return void this.props.onError(new Ou(e,{code:Qd.SCRIPT_INIT_ERROR,isFatal:!1}))}if(e||this.HLSEncoder||this.initHlsEncoderPromise||this.preloadSourceHLSEncoder)return;const r=ds({},this.getHlsJsConfig(),{liveSyncDuration:VA}),n=window.hls=this.preloadSourceHLSEncoder=new Hls(r),i=(e,t)=>{this.preloadSourceHandlers.push([e,t]),n.once(e,t)};((e,t)=>{this.preloadSourceHandlers.push([e,t]),n.on(e,t)})(Hls.Events.ERROR,(e,t)=>{if(!t)return;const r=Ra(t),i=Oa(t);void 0!==i&&(this.props.onError(new Ou(i,{isFatal:!1})),r&&(this.props.onError(new Ou({code:Qd.PRELOAD_SOURCE_FAILED,isFatal:!1,details:{reason:i}})),this.unsubscribePreloadSourceHandlers(),n.destroy(),this.clearPreloadSourceHlsEncoder()))});const o=()=>{this.preloadPosition=this.state.controller.startPosition,n.config.startFragPrefetch=!0,this.loadStarted=!0};i(Hls.Events.MANIFEST_PARSED,(e,t)=>{let{levels:r=[],audioTracks:a=[]}=t;const s=this.getStartVideoLevelIndex(r);n.startLevel=s,this.state.controller.isAbrEnabled||(n.loadLevel=s);this.getStartAudioTrackIndex(a)>-1&&(n.audioTrack=this.getStartAudioTrackIndex(a));const l=this.getStartLoadPosition();i(Hls.Events.LEVEL_UPDATED,(e,t)=>{let{details:r}=t;const i=this.getStartLoadPosition(r);l!==i&&void 0!==i&&n.streamController.startLoad(i),o()}),n.startLoad(l)}),n.loadSource(this.getStreamUrl())}async attachEncoder(){if(await super.attachEncoder(),!wS){const e=Qd.HLS_JS_NOT_SUPPORTED_ERROR;return this.props.onError(new Ou({code:e})),Promise.reject(ua(e,this.state.ad.adblockDetected))}return this.initHlsEncoderPromise=this.initHlsEncoder(),await this.initHlsEncoderPromise,this.initHlsEncoderPromise=void 0,this.subscribeContentImpression(),this.startLevelForcingWithSizeCap(),this.attachMedia()}async destroyUnsafe(){await super.destroyUnsafe(),this.preloadSourceHLSEncoder&&this.preloadSourceHLSEncoder.destroy(),this.HLSEncoder&&this.HLSEncoder.destroy()}canSeek(){return void 0!==this.HLSEncoder&&Boolean(this.HLSEncoder.media)&&super.canSeek()}async detachEncoder(){if(Object(jl.a)(this.video.textTracks).forEach(Ka),this.stopLevelForcingWithSizeCap(),await super.detachEncoder(),this.loadStarted=!1,this.preloadSourceHLSEncoder&&(this.preloadSourceHLSEncoder.destroy(),this.clearPreloadSourceHlsEncoder()),!this.HLSEncoder){if(!this.initHlsEncoderPromise)return;await this.initHlsEncoderPromise}const{video:e,HLSEncoder:t}=this;if(void 0!==t)return this.recoverOnBufferingReason=null,new Promise(r=>{Boolean(t.media)?t.once(Hls.Events.MEDIA_DETACHED,()=>{this.HLSEncoderAttachTime=1/0,r()}):r(),this.lastKnownLevelDetails=void 0,V(e,()=>{t.destroy(),this.HLSEncoder=void 0})})}getConnectionQuality(){if(void 0===this.lastFragRequest)return super.getConnectionQuality();const{fragDuration:e,getElapsedTime:t}=this.lastFragRequest,r={fragDuration:e,downloadTime:t()};return Dv(r)?Lv.SLOW:super.getConnectionQuality()}getMaxCapAllowedVideoTrack(){const{HLSEncoder:e}=this;if(!e||!e.levels||!e.autoLevelEnabled)return;const t=e.levels[e.autoLevelCapping];return t?this.state.controller.videoTracks.find(e=>{let{value:r}=e;return r===t.url[0]}):void 0}onVideoTagError(e){if(!this.video.error||On(this.state))return;const t=k(this.video);if(t.code!==Dl.MEDIA_ERR_DECODE&&t.code!==Dl.MEDIA_ERR_SRC_NOT_SUPPORTED)return;const r=t.code===Dl.MEDIA_ERR_SRC_NOT_SUPPORTED,n=new Ou({code:Dl[t.code],details:t,isFatal:r});if(this.props.onError(n),r)return;const i="VideoTagError MEDIA_ERR_DECODE";xd.log(i),this.playerStore.dispatch(sp(ur(jA.MediaError,void 0))),this.isPaused()&&this.recoverHelper.planTask(()=>this.recoverCurrentFrag(),{reason:i,delay:1e3})}onTick(e){super.onTick(e),this.updateSkinDvrParameters(e)}getStreamUrl(){const e=super.getStreamUrl(),t={session_data:"1",preview:"1"};return Object(Ll.b)(e,t,{saveOriginalPath:!0})}getBandwidthEstimate(){if(!this.HLSEncoder)return super.getBandwidthEstimate();const e=Object(Yc.a)(()=>this.HLSEncoder.abrController._bwEstimator.getEstimate());return b(e)?e:super.getBandwidthEstimate()}getUtcEndTime(){const e=this.getUtcStartTime();return e?Ad(e,this.getDuration()):Y(0)}stopLoad(){this.HLSEncoder&&(this.HLSEncoder.stopLoad(),this.loadStarted=!1)}tryRecoverOnBuffering(){if(!this.recoverOnBufferingReason)return;const{type:e,url:t,details:r,frag:n}=this.recoverOnBufferingReason,{controller:{bufferingRanges:i,fragmentDuration:o}}=this.state,a=this.getCurrentTime();if(i.some(e=>{let{start:t,end:r}=e;return t+o<a&&r-o>a}))return void xd.log("skip recover",{currentTime:a,bufferingRanges:i});const{recoverHelper:s}=this;s.planTask(()=>this.recoverCurrentFrag(),{reason:"HlsJs "+e,rawData:{details:r,type:e,url:t,isFatal:!0,frag:Ea(n)},delay:100})}getHlsJsConfig(){const e="true"!==My.a.getItem(GS.WAS_WORKER_INTERNAL_ERROR);return{manifestLoadingTimeOut:8e3,levelLoadingTimeOut:1e4,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:5,debug:this.props.debug,enableWorker:e,autoStartLoad:!1,capLevelToPlayerSize:!1,liveSyncDuration:this.props.liveOffset,levelLoadingMaxRetry:25,levelLoadingMaxRetryTimeout:100,enableCEA708Captions:!1,xhrSetup:(e,t)=>{this.withCredentials&&(e.withCredentials=!0);const r=Object(Ll.c)(t);("m3u8"===r||"ts"===r)&&e.open("GET",Ho(t),!0)},fetchSetup:(e,t)=>(this.withCredentials&&(t.credentials="include"),new Request(e.url,t)),maxMaxBufferLength:this.getMaxBufferLength()}}preparePreloadSourceHlsEncoderToAttach(){const e=this.preloadSourceHLSEncoder;if(!e)return;this.HLSEncoder=e;const{preloadPosition:t}=this;if(this.unsubscribePreloadSourceHandlers(),this.clearPreloadSourceHlsEncoder(),e.config.liveSyncDuration=this.props.liveOffset,!e.levels||0===e.levels.length)return e;this.onLevelsUpdated(),this.onLevelUpdated(),this.updateThumbnailTileMeta(),this.onAudioTracksUpdated(),this.onAudioTrackUpdated(e.audioTrack),this.onSubtitleTracksUpdated();const{videoTime:r,utc:n}=this.state.controller.startPosition;if(!(t.utc!==n||t.videoTime!==r))return e;const i=this.getStartLoadPosition(this.getHlsEncoderLevelDetails());return void 0!==i&&e.streamController.startLoad(i),e}async initHlsEncoder(){if(this.HLSEncoder)return;if(this.HLSEncoder=this.preparePreloadSourceHlsEncoderToAttach(),this.HLSEncoder)this.props.logEvent({event:Pu.UsePreloadedHlsJs,params:{}});else{try{await ot()}catch(e){const t=new Ou(e,{code:Qd.SCRIPT_INIT_ERROR});throw this.props.onError(t),t}this.HLSEncoder=new Hls(this.getHlsJsConfig())}const{HLSEncoder:e}=this;window.hls=e,this.subscribeHlsEncoderEvents(e),this.restoreUserTracksWhenPossible(),this.onPlayingStateChange.addOne(()=>{e.config.maxMaxBufferLength=this.getMaxBufferLength()})}subscribeHlsEncoderEvents(e){e.subtitleDisplay=this.state.skin.useNativeSubtitles;const t=t=>{if(!e.levels)return;const r=e.levels[t];if(!r)return;const n=xa(r,this.deepHDTracks,this.videoTrackLabels);n&&this.videoTrackValueSignal.dispatch(n.value)};e.on(Hls.Events.LEVEL_SWITCHING,(e,r)=>{t(r.level)}),e.on(Hls.Events.LEVEL_SWITCHED,(e,r)=>{t(r.level)}),e.on(Hls.Events.LEVEL_LOADED,(e,t)=>{let{details:r,networkDetails:n}=t;this.validateLevelManifestUrl(n),this.validateLevels(n)}),e.on(Hls.Events.STREAM_STATE_TRANSITION,(e,t)=>{let{nextState:r}=t;"FRAG_LOADING"!==r&&(this.lastFragRequest=void 0)}),e.on(Hls.Events.FRAG_LOADING,(e,t)=>{let{frag:{duration:r}}=t;this.lastFragRequest={fragDuration:1e3*r,getElapsedTime:I()}}),e.levels&&0!==e.levels.length||e.on(Hls.Events.MANIFEST_PARSED,(r,n)=>{let{levels:i=[],audioTracks:o=[]}=n;this.onLevelsUpdated(),this.updateThumbnailTileMeta();const a=this.getStartVideoLevelIndex(i);e.startLevel=a,this.state.controller.isAbrEnabled||(e.loadLevel=a);this.getStartAudioTrackIndex(o)>-1&&(e.audioTrack=this.getStartAudioTrackIndex(o)),e.once(Hls.Events.LEVEL_LOADED,(e,r)=>{let{level:n}=r;t(n)})}),e.on(Hls.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated),e.on(Hls.Events.AUDIO_TRACK_SWITCHING,(e,t)=>{this.onAudioTrackUpdated(t.id)}),e.on(Hls.Events.AUDIO_TRACK_SWITCHED,(e,t)=>{this.onAudioTrackUpdated(t.id)}),e.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated),e.on(Hls.Events.SUBTITLE_TRACK_SWITCH,(t,r)=>{const{subtitleTrack:n}=e;if(n>-1){const t=Ma(e.subtitleTracks.find(e=>e.id===r.id));if(!t)return;this.textTrackValueSignal.dispatch(t.value)}else this.textTrackValueSignal.dispatch(void 0)}),e.on(Hls.Events.FRAG_PARSING_METADATA,async(e,t)=>{const{samples:r,frag:n}=t;if(r){const{length:e}=r;if(e){const e=(await Promise.all(r.map(e=>CS.a.parse(e.data).then(e=>{let{writer:t}=e;return t})))).filter(e=>void 0!==e),{data:t,index:i,reason:o}=function(e){const[t,r]=e.reduce((e,t)=>{let[r,n]=e;try{return!function(e){return"object"===typeof e&&e.id&&"number"===typeof e.offset&&(void 0===e.cutoff||"number"===typeof e.cutoff)}(JSON.parse(t))?n.push(t):r.push(t),[r,n]}catch(e){return[r,n]}},[[],[]]);if(t.length>0){const r=t[t.length-1];return{data:r,index:e.indexOf(r),reason:WS.HasAd}}if(r.length>0){const t=r[r.length-1];return{data:t,index:e.indexOf(t),reason:WS.NoAd}}return{data:"",index:-1,reason:WS.NoData}}(e);xd.log("choose metadata: ",t,i,o);Math.random()<.01&&this.props.logEvent({event:Pu.StreamPlayerChooseMetadata,params:{fragmentMetadataArray:t,chosenIndex:i,chosenReason:o}}),this.props.onMetadata.dispatch({fragmentMetadataArray:[t],fragmentStart:Y(n.start),fragmentDuration:Y(n.duration),src:n?n.url:this.getStreamUrl()})}}}),e.on(Hls.Events.MANIFEST_LOADED,(e,t)=>{let{levels:r,audioTracks:n,subtitles:i,url:o,networkDetails:a}=t;this.validateLevels(a),this.onLevelsUpdated(),this.forceLevel(),this.onAudioTracksUpdated(),this.onSubtitleTracksUpdated()}),e.on(Hls.Events.LEVEL_UPDATED,this.onLevelUpdated),e.on(Hls.Events.ERROR,(e,t)=>{t&&this.onEncoderError(t)}),e.on(Hls.Events.FRAG_PARSED,(e,t)=>this.handleFragParsed(e,t)),this.state.skin.useNativeControls&&this.onPlayingStateChange.add(e=>{"play"!==e&&"buffering"!==e||this.startLoadOnce()})}getStartVideoLevelIndex(e){const{userVideoTrackHeight:t,userVideoTrackName:r}=this.playerStore.getState().controller,n=Ya(e,{name:r,height:t});if(n){const t=e.indexOf(n);return xd.log("User level found, start loading by index=["+t+"]"),t}return function(e){let{video:t,maxHeightCapping:r,levels:n=[],bandwidth:i}=e;const o=n.slice().filter(Boolean).sort((e,t)=>t.bitrate-e.bitrate);if(0===o.length)return-1;const{width:a,height:s}=Xa(t),[l]=o.filter(e=>!(i&&e.bitrate>i)&&(!(r&&e.height>r)&&(e.width<=a||e.height<=s)));return void 0===l?n.indexOf(o.pop()):n.indexOf(l)}({levels:e,maxHeightCapping:this.maxHeightCapping,video:this.video,bandwidth:this.state.controller.isAbrEnabled?this.getBandwidthEstimate():1/0})}getStartAudioTrackIndex(e){const{userAudioTrackName:t,userAudioTrackLang:r}=this.playerStore.getState().controller,n=ja(e,{name:t,lang:r});if(!n)return-1;const i=e.indexOf(n);return xd.log("User audio track found, start loading by index=["+i+"]"),i}handleFragParsed(e,t){let{frag:r}=t;const{duration:n}=r;if(0===n&&this.state.controller.videoType===Ed.VOD){const e=this.getHlsEncoderLevelDetails(),t=e?e.fragments:[];if(t[t.length-1]===r)return}(n<=0||n>=2*this.fragDuration)&&this.props.logEvent({event:"InvalidFragDuration",params:Ea(r)})}startLoadOnce(e){const{HLSEncoder:t}=this;!this.loadStarted&&void 0!==t&&this.state.controller.isOnline&&(t.levels&&t.levels.length>0?(t.startLoad(e),this.loadStarted=!0):t.once(Hls.Events.MANIFEST_PARSED,()=>{this.startLoadOnce(e)}))}getHlsEncoderLevelDetails(){const{HLSEncoder:e}=this;if(void 0===e)return;const{currentLevel:t,levels:r}=e;if(!r)return;const n=r[t];if(n&&n.details)return this.lastKnownLevelDetails=n.details,this.lastKnownLevelDetails;const i=r.find(e=>{let{details:t}=e;return Boolean(t)});if(i){const{details:e}=i;this.lastKnownLevelDetails=e}return this.lastKnownLevelDetails}computeRecoverJumpGap(){const{controller:{bufferingRanges:e}}=this.state,t=this.getCurrentTime();return Math.max(...e.map(e=>{let{end:t}=e;return t}))+1.1*this.fragDuration<t?(xd.log("use 0 as recoverJumpGap",{currentTime:t,bufferingRanges:e}),Y(0)):yd(this.fragDuration,1.1)}computeRecoverPositionFromStartPosition(){const{startPosition:e}=this.state.controller,t={},r=this.computeRecoverJumpGap();return void 0!==e.utc&&e.utc>0&&(t.utc=Ad(e.utc,r)),t.videoTime=Ad(e.videoTime||Y(0),r),t}computeRecoverPositionFromCurrentTime(){const e={},{lastRecoverPosition:t}=this.state.controller,r=this.getCurrentTime(),n=this.getUtcPosition(),i=this.computeRecoverJumpGap(),{utc:o=0,videoTime:a=0}=t||{};return(n>0||o>0)&&(e.utc=Ad(Y(Math.max(n,o)),i)),e.videoTime=Ad(Y(Math.max(r,a)),i),e}async recoverCurrentFrag(){const{lastRecoverPosition:e}=this.state.controller,t=this.getDuration()>0||void 0!==e?this.computeRecoverPositionFromCurrentTime():this.computeRecoverPositionFromStartPosition();this.playerStore.dispatch(Fh(t)),this.playerStore.dispatch(Ph(t)),await this.detachEncoder(),await this.attachEncoder()}attachMedia(){xd.log("attachMedia"),this.logLoadToRum();const{video:e,HLSEncoder:t}=this;if(void 0===t){const e=new Ou({code:Qd.NO_HLS_JS_INSTANCE,isFatal:!1});return this.props.onError(e),Promise.reject(e)}const r=new Promise(e=>{t.once(Hls.Events.MEDIA_ATTACHED,()=>{window.performance&&Object(Bc.a)(performance.now)&&(this.HLSEncoderAttachTime=performance.now()),t.url||t.loadSource(this.getStreamUrl()),e()})});t.once(Hls.Events.MANIFEST_PARSED,()=>{if(this.loadStarted)return;const e=this.getStartLoadPosition();t.startLoad(e),this.loadStarted=!0,t.once(Hls.Events.LEVEL_UPDATED,(r,n)=>{let{details:i}=n;const o=this.getStartLoadPosition(i);o!==e&&void 0!==o&&t.streamController.startLoad(o)})});const n=t.levels&&t.levels.length>0?Promise.resolve():new Promise(e=>{t.once(Hls.Events.MANIFEST_PARSED,()=>{e()})});return V(this.video,()=>{t.attachMedia(e)}),Promise.all([r,n]).then(()=>{})}onAudioTrackUpdated(e){const{HLSEncoder:t}=this;if(!t)return;const r=ka(t.audioTracks.find(t=>t.id===e));r&&this.audioTrackValueSignal.dispatch(r.value)}getVideoType(){const e=this.getHlsEncoderLevelDetails();if(e)return Wa(e);return(this.HLSEncoder&&this.HLSEncoder.levels||[]).some(e=>{let{details:t}=e;return Boolean(t&&t.live)})||this.getDuration()===1/0?Ed.LIVE:Ed.VOD}onLevelsUpdated(){const{sessionData:e={},levels:t=[]}=this.HLSEncoder||{};this.deepHDTracks=function(e){const{VALUE:t=""}=e["com.yandex.video.levels.deephd"]||{},r=t.split(",").filter(e=>void 0!==La(e));return new Set(r)}(e),this.videoTrackLabels=function(e){const{VALUE:t=""}=e["com.yandex.video.labels.quality"]||{};return t.split(",").filter(Boolean).reduce((e,t)=>{const[r,n]=t.split(":");return void 0!==La(r)&&n&&e.set(r,n),e},new Map)}(e),this.maxHeightCapping=function(e){const{VALUE:t=""}=e["com.yandex.video.capping.maxheight"]||{},r=parseInt(t,10);return r>0?r:void 0}(e),this.props.onVideoTracksChange.dispatch(Ha(t,this.deepHDTracks,this.videoTrackLabels))}updateThumbnailTileMeta(){const{sessionData:e={}}=this.HLSEncoder||{},t=e=>{this.props.logEvent({event:e,params:void 0})},r=Da(e,jS.LOWRES,t),n=Da(e,jS.HIGHRES,t);if(void 0===n)return;const i=r?wa(r,t):void 0,o=wa(n,t),a={version:function(e){const{VALUE:t=""}=e["com.yandex.video.thumbnail.version"]||{};return parseFloat(t)||0}(e),lowRes:i,highRes:o};this.playerStore.dispatch(hp(a))}onEncoderError(e){const{details:t,type:r,url:n,frag:i}=e;if(!t)return;if((o=e).networkDetails&&423===o.networkDetails.status&&o.details===Hls.ErrorDetails.LEVEL_LOAD_ERROR){this.props.logEvent({event:Pu.HlsJsForceCappingStart,params:{}});const{recoverHelper:i}=this;return void i.planTask(()=>this.recoverCurrentFrag(),{force:ba(e),reason:"HlsJs "+r,rawData:{details:t,type:r,url:n,isFatal:!1},delay:0})}var o;const a=Ra(e),s=Oa(e);if(void 0!==s&&(a||r===Hls.ErrorTypes.MEDIA_ERROR))if(this.recoverHelper.allowed&&!s.isFatal){if(this.props.onError(s),Pa(e)){if(this.currentState!==fd.BUFFERING&&function(e){const{details:t}=e;return!!t&&FS.includes(t)}(e))return void(this.recoverOnBufferingReason=e);let o;e.details===Hls.ErrorDetails.INTERNAL_EXCEPTION&&"demuxerWorker"===e.event?(My.a.setItem(GS.WAS_WORKER_INTERNAL_ERROR,"true"),o=()=>this.recoverStream()):o=()=>this.recoverCurrentFrag(),this.recoverHelper.planTask(o,{force:ba(e),reason:"HlsJs "+r,rawData:{details:t,type:r,url:n,isFatal:a,frag:Ea(i)},delay:1e3})}}else this.props.onError(new Ou(s,{isFatal:!0}))}getHlsTextTrack(e){if(this.HLSEncoder)return this.HLSEncoder.subtitleTracks.find(t=>e.value===String(t.id))}unsubscribePreloadSourceHandlers(){const{preloadSourceHLSEncoder:e}=this;e&&(this.preloadSourceHandlers.forEach(t=>{let[r,n]=t;e.off(r,n)}),this.preloadSourceHandlers.length=0)}clearPreloadSourceHlsEncoder(){this.preloadSourceHLSEncoder=void 0,this.preloadPosition={}}validateLevelManifestUrl(e){let{responseText:t,responseURL:r}=e;r&&(XS(r)||this.props.onError(new Ou({},{code:Qd.HLS_JS_INVALID_MANIFEST_URL,details:{networkDetailsResponseText:t,networkDetailsResponseUrl:r},isFatal:!1})))}validateLevels(e){const{levels:t=[]}=this.HLSEncoder||{},r=t.filter(e=>e.url.some(e=>!XS(e)));r.length>0&&this.props.onError(new Ou({},{code:Qd.HLS_JS_INVALID_MANIFEST_URL,isFatal:!1,details:{levels:r,networkDetailsResponseText:e.responseText,networkDetailsResponseUrl:e.responseURL}}))}getStartLoadPosition(e){const{startPosition:t}=this.state.controller,{liveOffset:r}=this.props;return function(e){let{details:t,startPosition:r,liveOffset:n}=e,{videoTime:i}=r;if(void 0===t)return i;if(t.hasProgramDateTime&&Ga(r.utc)){const e=Sd(Y(t.fragments[0].programDateTime),1e3);i=vd(r.utc,e)}if(!Ga(i))return;const o=Wa(t)===Ed.VOD?0:n,[a]=t.fragments;return Y(l(i,void 0===a?0:a.start,t.totalduration-o))}({details:e,startPosition:t,liveOffset:r})}startLevelForcingWithSizeCap(){clearInterval(this.levelForcingInterval),this.levelForcingInterval=window.setInterval(()=>{this.forceLevel()},1e3)}stopLevelForcingWithSizeCap(){clearInterval(this.levelForcingInterval)}forceLevel(){if(!this.HLSEncoder||!this.HLSEncoder.autoLevelEnabled||!this.HLSEncoder.levels||!this.HLSEncoder.levels.length)return;const{width:e,height:t}=this.getCapSizes(),r=Math.min(...[this.maxHeightCapping,t].filter(b)),{levels:n}=this.HLSEncoder,i=n.reduce((t,i,o)=>{if((i.height<t.smallestLevel.height||i.width<t.smallestLevel.width)&&(t.smallestLevel=i,t.smallestLevelIndex=o),i.height>r||i.width>e)return t;const a=(n[t.index]||{}).height||0;return i.height>a?ds({},t,{index:o}):t},{index:-1,smallestLevel:n[0],smallestLevelIndex:0});this.HLSEncoder.autoLevelCapping=-1===i.index?i.smallestLevelIndex:i.index}}class gg{static fromXHR(e){return new gg(e)}constructor(e){this.status=void 0,this.status=e.status}isFatalError(){return this.isRegionLimitationError()||this.isSignatureExpiredError()}toPlayerError(){return new Ou({code:this.getErrorCode(),isFatal:this.isFatalError(),details:JSON.parse(Object(Ud.a)(this))})}isRegionLimitationError(){return 451===this.status}isSignatureExpiredError(){return MS.includes(this.status)}getErrorCode(){return this.isRegionLimitationError()?Qd.REGIONAL_LIMITATION_MANIFEST:this.isSignatureExpiredError()?Qd.SIGNATURE_EXPIRED_MANIFEST:Qd.DEFAULT_ERROR}}const mg=e=>Object(Bl.a)(e)&&Object(Kv.a)(Qd,e);class Tg extends yg{initInternalSubscribe(){super.initInternalSubscribe(),this.subscribeVideoBuffering();const{videoTracks:e,audioTracks:t,textTracks:r}=this.props.video,n=Object(Hc.a)(()=>{this.props.onVideoTracksChange.dispatch(ms(e)),this.props.onAudioTracksChange.dispatch(Ss(t)),this.props.onTextTracksChange.dispatch(gs(r));const n=As(this.video);n&&this.videoTrackValueSignal.dispatch(n.value),this.setFirstAudioTrack()});this.initTextTracks(),this.onDestroy.addOne(this.onCanPlay.addOne(n)),e&&(this.addEventListener(e,"addtrack",()=>{this.props.onVideoTracksChange.dispatch(ms(e)),this.restoreUserVideoTrack()}),this.addEventListener(e,"removetrack",()=>{this.props.onVideoTracksChange.dispatch(ms(e))}),this.addEventListener(e,"change",()=>{const e=As(this.video);this.videoTrackValueSignal.dispatch(e&&e.value)})),t&&(this.addEventListener(t,"addtrack",e=>{this.props.onAudioTracksChange.dispatch(Ss(t)),this.actualizeNativeAudioTrack(),this.restoreUserAudioTrack()}),this.addEventListener(t,"removetrack",()=>{this.props.onAudioTracksChange.dispatch(Ss(t)),this.actualizeNativeAudioTrack()}),this.addEventListener(t,"change",e=>{this.actualizeNativeAudioTrack(),this.saveUserAudioTrack(e)})),r&&this.addEventListener(r,"addtrack",()=>{this.props.onTextTracksChange.dispatch(gs(r))}),this.subscribeCueChange(),this.subscribeToLogTelemetry()}constructor(e){super(e),this.props=e,this.isRecoverablePlaylistHTTPStatus=!0,this.checkPlaylistHTTPStatusPromise=void 0,this.applyStartPosition=()=>{if(!this.canSeek())return;const e=this.getCurrentTime(),t=this.getStartPosition();b(t)&&e!==t&&this.seekInternal(t)},this.saveUserAudioTrack=e=>{if(!e.isTrusted)return;const t=fs(this.video);t&&this.playerStore.dispatch(Wh({name:t.name||void 0,lang:t.lang||void 0}))},this.actualizeNativeAudioTrack=()=>{const e=fs(this.video);this.audioTrackValueSignal.dispatch(e&&e.value)},this.notifyTextTracksChanged=()=>{const e=function(e,t){const{textTracks:r=[]}=e;for(let e=0;e<r.length;e++){const n=r[e];if(n&&vs(n)&&n.mode===t)return ys(n,e)}}(this.video,this.getVisibleTextTrackMode());this.textTrackValueSignal.dispatch(e&&e.value)},this.playerStore.dispatch(xh(!0)),this.playerStore.dispatch(Hh(!0))}setAudioTrack(e){if(""===e.value)return;const t=Object(jl.a)(this.props.video.audioTracks),r=t.find(t=>t.id===e.value);r&&(q(this.video)&&(this.video.preferredAudioLang=r.id),t.forEach(e=>e.enabled=e.id===r.id))}setTextTrack(e){""!==e.value&&this.renderTextTrack(e.value)}disableTextTrack(){q(this.video)&&(this.video.preferredTextLang=void 0),this.renderTextTrack(void 0)}insertIntoCalled(){q(this.video)&&(this.video.insertIntoCalled=!0)}renderTextTrack(e){es(this.video.textTracks).forEach((t,r)=>{t&&(ys(t,r).value===e?(q(this.video)&&(this.video.preferredTextLang=t.language),t.mode=this.getVisibleTextTrackMode()):t.mode=this.getHiddenTextTrackMode())})}seekInternal(e){ls(this.video,Y(l(e,0,this.getDuration()||0)))}getFragmentsData(){if(!this.isDvrEnabled()||!this.video||!this.video.seekable.length)return super.getFragmentsData();const e=this.video.seekable,t=Y(e.start(0)),r=Y(e.end(e.length-1));return{totalDuration:vd(r,t),fragmentDuration:VA,startTime:t}}shouldSkipVideoTagError(e){return e.code!==Dl.MEDIA_ERR_DECODE&&e.code!==Dl.MEDIA_ERR_ENCRYPTED&&e.code!==Dl.MEDIA_ERR_SRC_NOT_SUPPORTED||On(this.state)}async onVideoTagError(){const e=k(this.video);if(this.shouldSkipVideoTagError(e))return;this.video.poster=kd,this.checkPlaylistHTTPStatus();const t=!this.recoverHelper.allowed||!this.isRecoverablePlaylistHTTPStatus,r=new Ou({code:hs(e),details:e,isFatal:t});if(!t)return this.props.onError(r),void this.recoverHelper.planTask(()=>this.recoverStream(),{delay:500,reason:"VideoTagError ["+e.code+"]["+e.message+"]"});const n=await this.checkPlaylistHTTPStatusPromise;n&&n.isFatalError()?this.props.onError(n.toPlayerError()):this.props.onError(r)}onTick(e){super.onTick(e),this.isDvrEnabled()&&(this.updateSkinDvrParameters(e),this.checkPositionAndReturnToLive())}async attachEncoder(){await super.attachEncoder();const e=e=>(this.props.onError(e),Promise.reject(ua(e.code,this.state.ad.adblockDetected)));if(!("mp4"===Object(Ll.c)(Object(Ll.d)(this.getStreamUrl().toLowerCase())))&&!wy.canPlayHlsOnNative())return e(new Ou({code:Qd.NATIVE_HLS_NOT_SUPPORTED_ERROR}));const{video:t}=this;this.subscribeContentImpression();try{await this.initDrm(this.props.stream.drmConfig)}catch(t){return e(t)}this.setProxyElementAttributes(),this.applyStartPositionEventually(),this.initVideoTypeQualifier(),this.logLoadToRum(),V(t,()=>t.src=this.getStreamUrl())}getStreamUrl(){const e=this.getStartPosition();return us(super.getStreamUrl(),e)}onOnline(){}onOffline(){}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}setProxyElementAttributes(){}getStartPosition(){const{videoTime:e,utc:t}=this.state.controller.startPosition;if(!b(e)&&!b(t))return;const r=this.getUtcStartTime();return r>0&&b(t)&&t>0?t-r:b(e)?e:void 0}checkPlaylistHTTPStatus(){this.checkPlaylistHTTPStatusPromise||(this.checkPlaylistHTTPStatusPromise=this.loadPlaylistInfo().then(gg.fromXHR).then(e=>(this.isRecoverablePlaylistHTTPStatus=!e.isFatalError(),e)).catch(()=>{}))}initTextTracks(){let e=!1,t=!1;const{textTracks:r}=this.video;if(!r)return;const n=Object(Hc.a)(()=>{this.castTextTracksModeOnInit(),this.addEventListener(r,"change",this.notifyTextTracksChanged),this.notifyTextTracksChanged()}),i=()=>{e&&t&&n()};this.addEventListener(this.video,"loadedmetadata",()=>{e=!0,i()}),this.addEventListener(r,"addtrack",function(e,t,r,n){function i(){null!==o&&clearTimeout(o),o=null}3===arguments.length&&"boolean"!==typeof r&&(n=r,r=!1);let o=null;const a=function(){const a=arguments;n=n||this,r&&null===o&&e.apply(n,a),i(),o=window.setTimeout((function(){r||e.apply(n,a),o=null}),t)};return a.cancel=i,a}(()=>{t=!0,i()},0))}setFirstAudioTrack(){if(q(this.video))return;this.restoreUserAudioTrack();const e=fs(this.video);e&&this.audioTrackValueSignal.dispatch(e.value)}loadPlaylistInfo(){return dt({method:"HEAD",url:this.getStreamUrl(),timeout:3e3,checkStatus:()=>!0})}subscribeCueChange(){const{textTracks:e}=this.video;if(!e||"function"!==typeof e.addEventListener)return;const t=e=>{const t=e.track;t&&"metadata"===t.kind&&(t.mode="hidden",this.addEventListener(t,"cuechange",e=>{const{activeCues:t}=e.target,{length:r}=t;if(!r)return;const n=t[r-1];if(!n)return;const{value:i,startTime:o,endTime:a}=n;if(!i)return;const s="number"===typeof a&&isFinite(a)?vd(a,o):VA,l=Object(jl.a)(t).map(e=>{if(e&&e.value){const{data:t}=e.value;if("string"===typeof t)return t}return""});this.props.onMetadata.dispatch({fragmentMetadataArray:l,fragmentStart:o,fragmentDuration:s,src:this.video.src})}))};e.addEventListener("addtrack",t),this.onDestroy.add(()=>e.removeEventListener("addtrack",t))}castTextTracksModeOnInit(){if(this.state.skin.useNativeSubtitles)return;void 0!==es(this.video.textTracks).find(e=>Boolean(e&&"disabled"===e.mode))||es(this.video.textTracks).forEach(e=>{e&&(e.mode="showing"===e.mode?this.getVisibleTextTrackMode():this.getHiddenTextTrackMode())})}subscribeToLogTelemetry(){this.addVideoEventListener("telemetryEvent",e=>{this.props.logEvent({event:e.eventName,params:e.params})})}}class Rg extends Tg{constructor(e){super(e),this.props=e,this.engine=Cv.MP4;const t=Object(Hc.a)(()=>{this.props.onVideoTracksChange.dispatch(function(e){const{videoWidth:t,videoHeight:r}=e;var n;return[{name:(n=r,n?n+"p":""),value:"0",bitrate:ty,width:t,height:r}]}(e.video))});this.onDestroy.addOne(this.onCanPlay.addOne(t))}async attachEncoder(){await super.attachEncoder(),xd.log("mp4 native mode")}applyStartPositionEventually(){const e=this.addVideoEventListener("durationchange",()=>{this.canSeek()&&(this.applyStartPosition(),e(),this.onDetach.remove(e))});this.onDetach.addOne(e)}initVideoTypeQualifier(){this.props.onVideoTypeChange.dispatch(Ed.VOD)}initDrm(){return Promise.resolve()}setVideoTrack(){}}const _g=Y(5*Math.random()),Og=e=>!!e.data&&418===e.data[1],Pg={error:"",isFatal:!1},bg=e=>{try{return Os(e.data[2])}catch(e){return Pg}};let Ig;!function(e){e.EXPIRED_SIGNATURE="EXPIRED_SIGNATURE"}(Ig||(Ig={}));class Cg{static convertToTextTrackCue(e){return shaka&&VTTCue?e.startTime>=e.endTime?null:new VTTCue(e.startTime,e.endTime,e.payload):null}static removeWhere(e,t){const r=e.mode;e.mode="hidden";const n=e.cues||[];for(let r=n.length-1;r>=0;r--){const i=n[r];i&&t(i)&&e.removeCue(i)}e.mode=r}constructor(e,t){this.useNativeSubtitles=t,this.textTrack=void 0,Object(jl.a)(e.textTracks).forEach(e=>{e.mode="disabled","StreamPlayerJs TextTrack"===e.label&&(this.textTrack=e)}),this.textTrack||(this.textTrack=e.addTextTrack("subtitles","StreamPlayerJs TextTrack")),this.textTrack.mode=this.hiddenMode()}remove(e,t){if(!this.textTrack||!shaka)return!1;return Cg.removeWhere(this.textTrack,r=>r.startTime<t&&r.endTime>e),!0}append(e){if(!shaka||!this.isTextVisible()||!this.textTrack)return;const t=[];e.forEach(e=>{const r=Cg.convertToTextTrackCue(e);r&&t.push(r)});t.slice().sort((e,r)=>e.startTime!==r.startTime?e.startTime-r.startTime:e.endTime!==r.endTime?e.endTime-r.startTime:t.indexOf(r)-t.indexOf(e)).forEach(e=>{this.textTrack.addCue(e)})}destroy(){if(this.textTrack){const e=e=>!0;Cg.removeWhere(this.textTrack,e)}return this.textTrack=void 0,Promise.resolve()}isTextVisible(){return!!this.textTrack&&this.textTrack.mode!==this.hiddenMode()}setTextVisibility(e){this.textTrack&&(this.textTrack.mode=e?this.showingMode():this.hiddenMode())}hiddenMode(){return"disabled"}showingMode(){return ts(this.useNativeSubtitles())}}let Ng=!1;const wg={version:'Period>SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:version"]',uriTemplate:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:uri"]',tiles:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:tiles"]',spriteDuration:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:duration"]',resolution:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:resolution"]'},Dg={version:wg.version,uriTemplate:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:uri"]',tiles:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:tiles"]',spriteDuration:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:duration"]',resolution:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:resolution"]'},Lg=document.createElement("canvas"),kg=Lg.getContext("2d");class Mg extends Dc{constructor(){super(),this.blacklist=[],this.checkLoopTimeoutId=void 0,this.startLoop()}destroy(){this.stopLoop(),super.destroy()}addHostname(e){QA.indexOf(e)>-1||this.blacklist.indexOf(e)>-1||this.blacklist.push(e)}isBlacklisted(e){return this.blacklist.indexOf(e)>-1}async checkBlacklistedHosts(){const e=[];await Promise.all(this.blacklist.map(async t=>{try{await Kr(Jn(t)),e.push(t)}catch(e){}})),this.blacklist=this.blacklist.filter(t=>!(e.indexOf(t)>-1))}startLoop(){this.getIsDestroyed()||(this.checkLoopTimeoutId=window.setTimeout(async()=>{this.stopLoop(),await this.checkBlacklistedHosts(),this.startLoop()},3e4))}stopLoop(){clearTimeout(this.checkLoopTimeoutId)}}const Vg=e=>void 0!==e.width&&void 0!==e.height,Ug=(e,t,r)=>{const n=e.filter(Vg);return n.sort((e,t)=>e.width>t.width&&e.height>t.height?-1:1).find(e=>{let{width:n,height:i}=e;return n<=t&&i<=r})||n[n.length-1]};class Fg{constructor(e){this.alpha=void 0,this.estimate=0,this.totalWeight=0,this.alpha=Math.exp(Math.log(.5)/e)}sample(e,t){const r=Math.pow(this.alpha,e),n=t*(1-r)+r*this.estimate;isNaN(n)||(this.estimate=n,this.totalWeight+=e)}getEstimate(){const e=1-Math.pow(this.alpha,this.totalWeight);return this.estimate/e}}class xg{constructor(e,t){void 0===e&&(e=2),void 0===t&&(t=5),this.fast=void 0,this.slow=void 0,this.bytesSampled=0,this.minTotalBytes=128e3,this.minBytes=16e3,this.fast=new Fg(e),this.slow=new Fg(t)}sample(e,t){if(e<=0||t<this.minBytes)return;const r=8e3*t/e,n=e/1e3;this.bytesSampled+=t,this.fast.sample(n,r),this.slow.sample(n,r)}getBandwidthEstimate(e){return this.hasGoodEstimate()?Math.min(this.fast.getEstimate(),this.slow.getEstimate()):e}hasGoodEstimate(){return this.bytesSampled>=this.minTotalBytes}}const Hg=[4320,2880,2160,1440,1080,720,480,360,240,144,0],jg=Hg.reduce((e,t)=>(e[t]=t,e),Object.create(null));class Bg{constructor(e){this.bandwidthEstimator=new xg,this.config=void 0,this.enabled=!1,this.lastTimeChosen=void 0,this.originalShakaVariants=[],this.props=void 0,this.startupComplete=!1,this.switchCallback=rc.a,this.variants=[],this.props=e}init(e){this.switchCallback=e}configure(e){this.config=e}stop(){this.enabled=!1,this.lastTimeChosen=void 0,this.switchCallback=rc.a,this.variants=[]}getBandwidthEstimate(){return Ad(this.bandwidthEstimator.getBandwidthEstimate(this.config.defaultBandwidthEstimate),this.props.bandwidthEstimateOffset)}enable(){this.enabled=!0}disable(){this.enabled=!1}getVariants(){return this.variants}setVariants(e){md()(e,this.originalShakaVariants)||(this.originalShakaVariants=e,this.variants=Ns([...e].sort((e,t)=>e.bandwidth-t.bandwidth)))}chooseVariant(){this.lastTimeChosen=Object(Gc.a)();const{preloadedVariant:e,restrictions:t}=this.props.getFilterParams(this.variants);if(e)return e;const r=function(e,t){const{maxWidth:r=1/0,maxHeight:n=1/0}=t;return e.filter(e=>{const t=e.video;return!!(t&&t.width&&t.height)&&!(t.width>r||t.height>n)})}(this.variants,t),n=this.getBandwidthEstimate();return this.chooseVariantByBandwidth(r,n)||this.variants[0]||null}segmentDownloaded(e,t){this.bandwidthEstimator.sample(e,t),void 0!==this.lastTimeChosen&&this.enabled&&this.suggestStreams()}suggestStreams(){if(this.startupComplete){if(void 0!==this.lastTimeChosen){if(Object(Gc.a)()-this.lastTimeChosen<8e3)return}}else{if(!this.bandwidthEstimator.hasGoodEstimate())return;this.startupComplete=!0}const e=this.chooseVariant();this.switchCallback(e)}chooseVariantByBandwidth(e,t){let r=e[0];const n=Math.max(this.props.getPlaybackRate(),1);for(let i=1;i<e.length;i++){const o=e[i],a=e[i+1]||{bandwidth:1/0},s=o.bandwidth/.95*n,l=a.bandwidth/.85*n;t>=s&&t<=l&&(r=o)}return r}}const Yg=Number.EPSILON||Math.pow(2,-52),Kg=Object(Hc.a)(()=>{const e=gi("Chrome");if(void 0===e)return!0;const[t]=e;return t>70}),Gg=/^(ext-)?strm[^\.]+\.strm\.yandex\.net$/,Wg=og/VA*2*2;class Xg{constructor(){this.initSegments=new iS(10),this.segments=new iS(Wg)}set(e,t){const{pathname:r}=Object(Ll.g)(e),n={pathname:r,response:t};Vs(e)?this.initSegments.push(n):this.segments.push(n)}get(e){const{pathname:t}=Object(Ll.g)(e),r=Vs(e)?Ms(this.initSegments,t):Ms(this.segments,t);return void 0===r?void 0:r.response}clear(){this.initSegments.clear(),this.segments.clear()}hasCachedData(){return this.initSegments.getAll().length>0||this.segments.getAll().length>0}}class qg{constructor(){this.segmentCache=new Xg,this.useLastLoadedManifest=!0,this.lastLoadedManifest=void 0,this.shaka=void 0,this.strmSession=void 0,this.serverTimestamp=void 0,this.getElapsedTimeFromServerDate=()=>0}setup(e,t){if(void 0!==this.shaka)return;this.shaka=e;const r=this.customNetPluginFactory(e,t);e.net.NetworkingEngine.registerScheme("http",r),e.net.NetworkingEngine.registerScheme("https",r)}useCachedManifest(){this.useLastLoadedManifest=!0}destroy(){this.segmentCache.clear(),void 0!==this.shaka&&(this.shaka.net.NetworkingEngine.unregisterScheme("http"),this.shaka.net.NetworkingEngine.unregisterScheme("https"),this.shaka=void 0)}hasCachedSegments(){return this.segmentCache.hasCachedData()}hasCachedData(){return this.useLastLoadedManifest&&void 0!==this.lastLoadedManifest||this.hasCachedSegments()}getServerTime(){if(void 0!==this.serverTimestamp)return this.serverTimestamp+this.getElapsedTimeFromServerDate()}cacheResponse(e,t,r,n){switch(r){case e.net.NetworkingEngine.RequestType.MANIFEST:this.lastLoadedManifest=n,this.useLastLoadedManifest=!1;break;case e.net.NetworkingEngine.RequestType.SEGMENT:this.segmentCache.set(t,n)}}getCachedResponse(e,t,r){switch(r){case e.net.NetworkingEngine.RequestType.MANIFEST:const{useLastLoadedManifest:r,lastLoadedManifest:n}=this;return r&&void 0!==n?(this.useLastLoadedManifest=!1,n):void 0;case e.net.NetworkingEngine.RequestType.SEGMENT:const i=this.segmentCache.get(t);return void 0===i?void 0:i;default:return}}customNetPluginFactory(e,t){return(r,n,i,o)=>{const a=this.getCachedResponse(e,r,i);if(void 0!==a)return new e.util.AbortableOperation(Promise.resolve(a),rc.a);switch(i){case e.net.NetworkingEngine.RequestType.MANIFEST:void 0===this.strmSession?r=Ho(r):(n.headers["x-strm-session"]=this.strmSession,n.headers["x-client-timestamp"]=String(Date.now()),r=qr(r,"t"));break;case e.net.NetworkingEngine.RequestType.SEGMENT:r=Ho(r)}const s=function(e){return e.net.HttpFetchPlugin.isSupported()?e.net.HttpFetchPlugin:e.net.HttpXHRPlugin}(e)(r,n,i,o);return new e.util.AbortableOperation(s.promise.then(t=>(i===e.net.NetworkingEngine.RequestType.MANIFEST&&(this.strmSession=t.headers["x-strm-session"]),this.parseDateHeader(t),this.cacheResponse(e,r,i,t),t)).catch(r=>{throw r&&r.code!==e.util.Error.Code.OPERATION_ABORTED&&t(i,r),r}),()=>s.abort())}}parseDateHeader(e){let{headers:t,timeMs:r=0}=e;if(void 0!==this.serverTimestamp)return;if(void 0===t.date||null===t.date)return;const n=new Date(t.date).getTime();b(n)&&(this.serverTimestamp=n+r,this.getElapsedTimeFromServerDate=I())}}const Qg=e=>e.active,zg={timeout:5e3,maxAttempts:10,baseDelay:100,backoffFactor:2,fuzzFactor:.5},Jg=$s({},zg,{timeout:1e4,maxAttempts:3}),$g=Y(.001);class Zg extends yg{initInternalSubscribe(){super.initInternalSubscribe(),this.onDestroy.addOne(()=>this.chunkHostnameBlacklist.destroy()),this.onDestroy.addOne(()=>this.stopShakaConfigAutoUpdate()),this.onDestroy.addOne(()=>this.networkingEngine.destroy()),this.onDestroy.addOne(()=>this.cancelPreloadSource()),this.onDestroy.addOne(this.textTrackValueSignal.add(e=>{Ys(this.shakaPlayer)&&this.shakaPlayer.setTextTrackVisibility(Boolean(e))})),this.addEventListener(this.video,"play",this.updateBufferingState)}constructor(e){var t;super(e),t=this,this.engine=Cv.MPD,this.shakaPlayer=void 0,this.preloadShakaPlayer=void 0,this.chunkHostnameBlacklist=new Mg,this.shakaConfigAutoUpdateInterval=void 0,this.manifestXML=void 0,this.initMpdEncoderPromise=void 0,this.detachMpdEncoderCalled=!1,this.useNativeSubtitles=!1,this.networkingEngine=new qg,this.lastTrackBeforeDetach=void 0,this.abrManager=void 0,this.tryToInjectWidevineCert=Object(Hc.a)(async()=>{const{drmConfig:e={}}=this.props.stream;if(Tl)return;if(!e)return;const t=e.advanced;if(t&&t["com.widevine.alpha"])try{const{serverCertificateUrl:e}=t["com.widevine.alpha"];if(!e)return;const{response:r}=await dt({method:"get",responseType:"arraybuffer",url:e,withCredentials:this.withCredentials});t["com.widevine.alpha"].serverCertificate=new Uint8Array(r)}catch(e){const t=new Ou(e,{isFatal:!1,code:Qd.MPD_WIDEVINE_CERT_LOAD_ERROR});this.props.onError(t)}}),this.shakaHTTPRequestFilter=(e,t)=>Object(Yc.a)(()=>this.shakaHTTPRequestFilterInternal(e,t),this.onShakaFilterError),this.shakaHTTPRequestFilterInternal=(e,t)=>{if("undefined"!==typeof shaka)switch(t.allowCrossSiteCredentials=this.withCredentials,e){case shaka.net.NetworkingEngine.RequestType.LICENSE:const{stream:e}=this.props,{drmConfig:r}=e;if(!r)return;const{requestParams:n}=r;if(n){const{StringUtils:e,Uint8ArrayUtils:r}=shaka.util,i=$s({rawLicenseRequestBase64:r.toBase64(new Uint8Array(t.body||new ArrayBuffer(0)))},n);t.body=e.toUTF8(JSON.stringify(i)),t.headers=$s({},t.headers,{"Content-Type":"application/json"})}r.headers&&(t.headers=$s({},t.headers,r.headers));break;case shaka.net.NetworkingEngine.RequestType.SEGMENT:Ds(t,this.getRemainingBufferedTime());const{uris:i}=t,o=i.filter(e=>{const{hostname:t}=Object(Ll.g)(e);return!this.chunkHostnameBlacklist.isBlacklisted(t)});if(0===o.length)break;t.uris=o}},this.shakaPreviewsHTTPResponseFilter=(e,t)=>Object(Yc.a)(()=>this.shakaPreviewsHTTPResponseFilterInternal(e,t),this.onShakaFilterError),this.shakaPreviewsHTTPResponseFilterInternal=(e,t)=>{if("undefined"===typeof shaka)return;if(e!==shaka.net.NetworkingEngine.RequestType.MANIFEST)return;if(!t.data)return;const r=function(e){if(!e)return null;try{const t=(new DOMParser).parseFromString(e,"application/xml");return null===t.querySelector("parsererror")?t:null}catch(e){return null}}(Is(new Uint8Array(t.data)));if(!r)return;this.manifestXML&&this.checkRepresentationChange(this.manifestXML,r),this.manifestXML=r,this.videoTrackLabels=function(e){const t=new Map,r=e.querySelectorAll('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:labels:quality"]');return Object(jl.a)(r).forEach(e=>{const r=e.getAttribute("value");if(!r)return;r.split(",").filter(Boolean).forEach(e=>{const[r,n]=e.split(":");void 0!==La(r)&&n&&t.set(r,n)})}),t}(r),this.deepHDTracks=function(e){const t=Object(jl.a)(e.querySelectorAll('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:labels:deephd"]')),r=new Set;return t.forEach(e=>{const t=e.getAttribute("value");t&&t.split(",").filter(e=>void 0!==La(e)).forEach(e=>r.add(e))}),r}(r);const n=Cs(r,jS.LOWRES),i=Cs(r,jS.HIGHRES),o={version:function(e){const t=e.querySelector('AdaptationSet[mimeType="image/jpeg"] SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:version"]');return t?parseFloat(t.getAttribute("value")||""):0}(r),lowRes:n,highRes:i};o.highRes&&this.playerStore.dispatch(hp(o))},this.updateBufferingState=()=>{if(Ji(this.state))return;const{shakaPlayer:e,video:t}=this;if(void 0===e)return;if(function(e){if(!e.isBuffering())return!1;const t=Ws(e);if(!(t===Ed.LIVE||t===Ed.EVENT))return!1;const r=e.getMediaElement();if(!r)return!1;const{currentTime:n}=r,i=Ks(e);if(0===i)return!1;const o=n+i/2,a=Bs(e,Y(n)),s=Bs(e,Y(o));return Boolean(a&&!s)}(e)){const e=ur(jA.LiveEdge,void 0);this.playerStore.dispatch(sp(e))}const r=os(t,e.isBuffering());this.onPlayingStateChangeInternal.dispatch(r)},this.onShakaAdaptationEvent=()=>{this.actualizeAvailableVariantTracks(),this.actualizeActiveVariantTrack()},this.onShakaEmsgEvent=e=>{if(xd.log("-> Shaka EmsgEvent",e),!Object(kl.a)(e)||!Object(kl.a)(e.detail)||!Object(kl.a)(e.detail.messageData))return;const{startTime:r,messageData:n}=e.detail;CS.a.parse(n).then((function(e){let{writer:n}=void 0===e?{}:e;n&&t.props.onMetadata.dispatch({fragmentMetadataArray:[n],fragmentStart:r,fragmentDuration:Ks(t.shakaPlayer,r),src:t.getStreamUrl()})}))},this.reportLargeGap=e=>{xd.log("-> Shaka LargeGapEvent",e),this.props.logEvent({event:"MpdLargeGap",params:{currentTime:e.currentTime,gapSize:e.gapSize}})},this.actualizeTracks=()=>{Ys(this.shakaPlayer)&&(this.actualizeAvailableTracks(),this.actualizeActiveTracks())},this.onShakaErrorEvent=e=>{if(!shaka||!e)return;const{detail:t}=e;this.onShakaError(t);const r=bs(shaka,t);r&&r.isFatal&&this.shakaPlayer&&this.shakaPlayer.destroy()},this.onShakaError=e=>{if(!shaka)return;xd.error("-> onShakaError",e);const t=function(e,t,r){let{code:n}=t;return n===e.util.Error.Code.VIDEO_ERROR&&r.controller.watchedTime>0}(shaka,e,this.state)&&this.recoverHelper.allowed;t&&(e.severity=shaka.util.Error.Severity.RECOVERABLE);const r=bs(shaka,e);r&&(t&&this.recoverHelper.planTask(()=>this.recoverStream(),{delay:0,reason:r.code}),this.checkDeadChunkServer(e),this.props.onError(r))},this.onShakaFilterError=e=>{if(shaka){if(xd.error("-> onShakaFilterError",e),t=e,Object(kl.a)(t)&&b(t.severity)&&b(t.category)&&b(t.code)&&Object(Zd.a)(t.data))return this.onShakaError(e);var t;this.props.onError(new Ou({code:Qd.SHAKA_FILTER_ERROR,message:e.message,isFatal:!1,stack:e.stack}))}},this.onShakaNetworkError=(e,t)=>{if("undefined"===typeof shaka||void 0===this.shakaPlayer)return;if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&Og(t)){if(bg(t).isFatal||t.severity===shaka.util.Error.Severity.CRITICAL)return void(t.severity=shaka.util.Error.Severity.CRITICAL)}const r=Ts(shaka,t);451===r||MS.includes(r)?t.severity=shaka.util.Error.Severity.CRITICAL:this.onShakaError(t)},this.parseTextTrack=e=>{let{label:t,language:r,originalTextId:n}=e;const i=Fs(this.manifestXML,n)||r;return{name:t||i||n,value:n,lang:i}},this.parseAudioTrack=e=>{let{label:t,language:r,originalId:n,bandwidth:i}=e;const o=Fs(this.manifestXML,n)||r;return{name:t||o||n,value:n,lang:o,bitrate:i?i/1e3:ty}},this.setStartPosition=()=>{if(!this.video)return;const e=this.calcStartPosition();b(e)&&(this.canSeek()?ls(this.video,Y(l(e,this.getUtcStartTime(),this.getDuration()))):this.onDetach.add(this.addVideoEventListener("loadeddata",()=>this.setStartPosition(),{once:!0})))},Js(this.video),at(),this.video.classList.add(lg.a.video_hiddenSubtitlesBtn),this.playerStore.dispatch(xh(!0)),function(){if(!Ng&&(Ng=!0,window.MediaKeySession)){const{prototype:e}=window.MediaKeySession,{close:t}=e;e.close=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Promise.race([t.call(this,r),Wc(200).promise])}}}(),this.useNativeSubtitles=this.state.skin.useNativeSubtitles}getMaxCapAllowedVideoTrack(){const{maxHeight:e=1/0,maxWidth:t=1/0}=this.getAbrRestrictions(),{videoTracks:r}=this.state.controller;return Ug(r,t,e)}getFragmentsData(){const{start:e=Y(0),end:t=Y(0)}=void 0===this.shakaPlayer?{}:this.shakaPlayer.seekRange();return{totalDuration:vd(t,e),fragmentDuration:Ks(this.shakaPlayer),startTime:e}}onOnline(){}onOffline(){}getUtcStartTime(){const e=Xs(this.shakaPlayer,this.manifestXML);return void 0===e?super.getUtcStartTime():e}getUtcPosition(){const e=qs(this.shakaPlayer,this.manifestXML);return void 0===e?super.getUtcPosition():e}setVideoTrack(e){var t;let{value:r}=e;if(void 0===this.shakaPlayer)return;if("auto"===r)return void this.setAbrEnabled(!0);const n=Hs(this.shakaPlayer);if(void 0===n)return;const i=Us(null==(t=this.abrManager)?void 0:t.getVariants(),r,n.originalAudioId),o=this.shakaPlayer.getVariantTracks().find(e=>e.id===i);void 0!==o&&(this.setAbrEnabled(!1),this.setVariantTrack(o))}setAudioTrack(e){let{lang:t,value:r}=e;if(void 0===this.shakaPlayer)return;const n=Hs(this.shakaPlayer);if(void 0===n)return;const i=this.shakaPlayer.getVariantTracks().find(e=>{const t=e.originalAudioId===r,i=e.originalVideoId===n.originalVideoId;return t&&i});if(!n||!i)return void this.shakaPlayer.selectAudioLanguage(t);const{height:o,videoBandwidth:a}=n,{language:s}=i;this.setVariantTrack(this.shakaPlayer.getVariantTracks().find(e=>e.height===o&&e.videoBandwidth===a&&e.language===s))}setTextTrack(e){let{value:t}=e;if(!this.shakaPlayer)return;const r=this.shakaPlayer.getTextTracks().find(e=>{let{originalTextId:r}=e;return r===t});r&&(this.shakaPlayer.selectTextTrack(r),this.textTrackValueSignal.dispatch(t))}disableTextTrack(){this.shakaPlayer&&this.textTrackValueSignal.dispatch(void 0)}toggleNativeSubtitles(e){super.toggleNativeSubtitles(e),this.useNativeSubtitles=e}captureScreenshot(e){return(e=>kg?(Lg.width=e.videoWidth,Lg.height=e.videoHeight,kg.drawImage(e,0,0,e.videoWidth,e.videoHeight),new Promise((e,t)=>{try{Lg.toBlob(t=>{e(t)},"image/jpeg")}catch(e){t(e)}})):Promise.reject())(e).then(e=>{this.previousScreenshotBlobUrl=URL.createObjectURL(e)}).catch(()=>{this.previousScreenshotBlobUrl=void 0}).then(()=>this.previousScreenshotBlobUrl)}onVideoTagError(e){xd.log("-> onVideoTagError",e)}getDuration(){return Ys(this.shakaPlayer)?this.shakaPlayer.seekRange().end:Y(NaN)}async preloadSource(){this.tryToInjectWidevineCert(),await at();if(this.detachMpdEncoderCalled||void 0!==this.preloadShakaPlayer||void 0!==this.initMpdEncoderPromise||void 0!==this.shakaPlayer||!shaka.Player.isBrowserSupported()||this.networkingEngine.hasCachedData())return;this.networkingEngine.setup(shaka,this.onShakaNetworkError);const e=document.createElement("video"),t=()=>{this.captureScreenshot(e).then(()=>{this.props.setPlayerBackgroundImage(this.previousScreenshotBlobUrl),this.props.setPlayerBackgroundVisibility(!1)})};e.addEventListener("canplay",t),this.onContentImpression.addOne(()=>{e.removeEventListener("canplay",t)});const r=this.preloadShakaPlayer=new shaka.Player(e);const n=r.getNetworkingEngine();n.registerRequestFilter(this.shakaHTTPRequestFilter),n.registerRequestFilter(e=>{if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)return new Promise((e,t)=>{r.addEventListener("unloading",t)})}),n.registerResponseFilter(this.shakaPreviewsHTTPResponseFilter);const i=this.getInitialShakaConfig();i.streaming.bufferingGoal=ag,i.abr.enabled=!1,this.configureShaka(r,i),r.addEventListener("manifestparsed",()=>{this.onManifestParsed(r)}),P(this.loadShakaSource(r))}getSeekableRange(){const{start:e,end:t}=Ys(this.shakaPlayer)?this.shakaPlayer.seekRange():{start:Y(0),end:Y(0)};return{start:e,end:Y(Math.min(t,vd(this.getDuration(),$g)||0))}}canSeek(){return Ys(this.shakaPlayer)&&super.canSeek()}onTick(e){const t=Ws(this.shakaPlayer);t!==this.state.controller.videoType&&(this.onVideoTypeChange.dispatch(t),void 0!==this.shakaPlayer&&this.setShakaAvailabilityWindowOverride(this.shakaPlayer)),super.onTick(e);const{shakaPlayer:r}=this;if(void 0===r)return;const n=Xs(this.shakaPlayer,this.manifestXML),i=void 0===n?void 0:yd(n,1e3);i!==this.state.controller.programDateTime&&this.props.onProgramDateTimeChange.dispatch(i);const o=t===Ed.VOD;this.setNativeTimeControlVisibility(o),this.setNativeTimelineControlVisibility(o)}getStreamUrl(){const e=super.getStreamUrl(),t={audio_mbr:"1",mburl:"1",preview:"1"};return Object(Ll.b)(e,t,{saveOriginalPath:!0})}getMaxBufferLength(){const e=Ws(this.shakaPlayer);return(e===Ed.LIVE||e===Ed.EVENT)&&!this.shouldUseLowBuffer()?this.props.liveOffset:super.getMaxBufferLength()}async detachEncoder(){this.detachMpdEncoderCalled=!0;const e=Hs(this.shakaPlayer);this.lastTrackBeforeDetach=e||void 0,await super.detachEncoder(),this.manifestXML=void 0,this.networkingEngine.useCachedManifest();const{video:t,shakaPlayer:r}=this;t.classList.remove(lg.a.video_hiddenSubtitlesBtn),this.stopShakaConfigAutoUpdate(),void 0!==r&&await this.preventPauseAsync(t,()=>(this.shakaPlayer=void 0,r.destroy())),Object(uc.a)(window.VTTCue)||delete window.VTTCue}async attachEncoder(){this.detachMpdEncoderCalled=!1,await super.attachEncoder(),this.initMpdEncoderPromise=this.initMpdEncoder(),await this.initMpdEncoderPromise,this.initMpdEncoderPromise=void 0}getBandwidthEstimate(){const e=this.preloadShakaPlayer||this.shakaPlayer;if(!e)return super.getBandwidthEstimate();const{estimatedBandwidth:t}=e.getStats();return t||super.getBandwidthEstimate()}getLiveLatency(){const{state:e}=this;if(!Ja(e)||Ji(e))return;if(this.video.playbackRate<1)return;const{controller:{playingState:t,currentTime:r,duration:n}}=e;if(!(t===fd.PLAY||t===fd.BUFFERING))return;if(0===r||!n)return;const i=this.getUtcPosition(),o=this.networkingEngine.getServerTime();return i>0&&void 0!==o?Y(Math.max(o/1e3-i,0)):void 0}getRemainingBufferedTime(){if(!Ys(this.shakaPlayer))return super.getRemainingBufferedTime();const{currentTime:e}=this.state.controller,{audio:t,video:r,total:n}=this.shakaPlayer.getBufferedInfo();return{total:ti(n,e)||Y(0),video:ti(r,e)||Y(0),audio:ti(t,e)||Y(0)}}getUtcEndTime(){if(Ws(this.shakaPlayer)===Ed.LIVE)return this.getSeekableRange().end;const e=this.getUtcStartTime();return e?Ad(e,this.getDuration()):Y(0)}async recoverStream(){return 1===this.recoverHelper.attempt&&this.captureScreenshot(this.props.video).then(()=>{this.handleBackgroundBeforeRecover()}),super.recoverStream()}handleBackgroundBeforeRecover(){this.props.setPlayerBackgroundImage(this.previousScreenshotBlobUrl),this.onCanPlay.addOne(()=>{this.props.setPlayerBackgroundImage(),this.clearScreenshot()})}async initMpdEncoder(){this.tryToInjectWidevineCert(),He("drm",Gs(this.props.stream.drmConfig));try{await at(),this.networkingEngine.setup(shaka,this.onShakaNetworkError)}catch(e){const t=new Ou(e,{code:Qd.MPD_SHAKA_INIT_ERROR});throw this.props.onError(t),t}if(this.detachMpdEncoderCalled)return;if(!shaka.Player.isBrowserSupported()){const e=new Ou({code:Qd.MPD_NOT_SUPPORTED_ERROR});throw this.props.onError(e),e}const e=V(this.video,()=>new shaka.Player(this.video));this.shakaPlayer=e,this.subscribeContentImpression(),this.attachShakaEventListeners(e);const t=e.getNetworkingEngine();t.registerRequestFilter(this.shakaHTTPRequestFilter),t.registerResponseFilter(this.shakaPreviewsHTTPResponseFilter);const r=this.getInitialShakaConfig(),{video:n}=this,i=()=>this.useNativeSubtitles;r.textDisplayFactory=function(){return new Cg(n,i)},this.configureShaka(e,r),void 0!==this.preloadShakaPlayer&&this.networkingEngine.useCachedManifest(),this.logLoadToRum();try{if(await this.preventPauseAsync(this.video,()=>this.loadShakaSource(e)),this.cancelPreloadSource(),this.detachMpdEncoderCalled)return;this.initShakaConfigAutoUpdate(),this.lastTrackBeforeDetach=void 0}catch(e){this.onShakaError(e)}}loadShakaSource(e){const t=this.calcStartPosition();return e.load(this.getStreamUrl(),b(t)?t:void 0).then(b(t)?rc.a:this.setStartPosition)}findPreloadedVariant(e){const t=this.networkingEngine.hasCachedSegments()?Hs(this.preloadShakaPlayer)||this.lastTrackBeforeDetach:void 0;if(void 0!==t)return e.find(e=>{let{video:r,audio:n}=e;const i=!r||r.originalId===t.originalVideoId,o=!n||n.originalId===t.originalAudioId;return i&&o})}getPlaybackRate(){return this.state.controller.playbackRate}getInitialShakaConfig(){var e;const{stream:t}=this.props,r=this.getBandwidthEstimate(),n=this.abrManager=new Bg({getPlaybackRate:this.getPlaybackRate.bind(this),bandwidthEstimateOffset:null!=(e=this.props.bandwidthEstimateOffset)?e:0,getSegmentDuration:()=>Ks(this.shakaPlayer),getFilterParams:e=>({preloadedVariant:this.findPreloadedVariant(e),remainingBufferedTime:this.getRemainingBufferedTime(),restrictions:this.getAbrRestrictions()})});return{abr:$s({enabled:this.state.controller.isAbrEnabled},r?{defaultBandwidthEstimate:r}:{}),abrFactory:function(){return n},drm:$s({retryParameters:Jg},t.drmConfig),manifest:{availabilityWindowOverride:1/0,retryParameters:$s({},zg,{timeout:8e3,maxAttempts:5}),dash:{ignoreMinBufferTime:!0}},streaming:{rebufferingGoal:.4,bufferingGoal:this.getMaxBufferLength(),jumpLargeGaps:!0,retryParameters:$s({},zg,{timeout:1e4})}}}attachShakaEventListeners(e){e.addEventListener("buffering",this.updateBufferingState),e.addEventListener("error",this.onShakaErrorEvent),e.addEventListener("adaptation",this.onShakaAdaptationEvent),e.addEventListener("trackschanged",this.actualizeTracks),e.addEventListener("emsg",this.onShakaEmsgEvent),e.addEventListener("largegap",this.reportLargeGap),e.addEventListener("manifestparsed",()=>{this.onManifestParsed(e),this.updateShakaConfig();const t=this.getBandwidthEstimate();b(t)&&(He("bandwidthEstimate",Ko(Sd(t,1e3))),this.configureShaka(e,{abr:{defaultBandwidthEstimate:t}}))}),e.addEventListener("trackschanged",Object(Hc.a)(this.restoreUserTracks))}onManifestParsed(e){this.setShakaAvailabilityWindowOverride(e),this.setPresentationTimelineDelay(e)}setPresentationTimelineDelay(e){const t=e.getManifest();t&&t.presentationTimeline.setDelay(this.props.liveOffset+_g)}setShakaAvailabilityWindowOverride(e){const t=Ws(e);if(void 0===t)return;const r=t===Ed.EVENT?1/0:NaN,{manifest:{availabilityWindowOverride:n}}=e.getConfiguration();r===n||isNaN(r)&&isNaN(n)||this.configureShaka(e,{manifest:{availabilityWindowOverride:r}})}setVariantTrack(e){void 0!==this.shakaPlayer&&void 0!==e&&(this.shakaPlayer.selectVariantTrack(e,!0),this.actualizeTracks())}setAbrEnabled(e){void 0!==this.shakaPlayer&&(this.configureShaka(this.shakaPlayer,{abr:{enabled:e}}),this.updateShakaConfig())}actualizeActiveTracks(){this.actualizeActiveVariantTrack(),this.actualizeActiveTextTrack()}actualizeActiveVariantTrack(){const e=Hs(this.shakaPlayer);if(void 0===e)return;const{originalAudioId:t,originalVideoId:r}=e;this.videoTrackValueSignal.dispatch(r),this.audioTrackValueSignal.dispatch(t)}actualizeActiveTextTrack(){if(void 0===this.shakaPlayer)return;const{controller:{textTrackEnabled:e}}=this.state,t=this.getCurrentInternalTextTrack();this.textTrackValueSignal.dispatch(void 0!==t&&e?this.parseTextTrack(t).value:void 0)}actualizeAvailableTracks(){this.actualizeAvailableTextTracks(),this.actualizeAvailableVariantTracks()}actualizeAvailableTextTracks(){const e=this.getAvailableTextTracks();this.video.classList.toggle(lg.a.video_hiddenSubtitlesBtn,0===e.length),this.props.onTextTracksChange.dispatch(e)}getAvailableTextTracks(){return this.shakaPlayer?this.shakaPlayer.getTextTracks().map(this.parseTextTrack):[]}actualizeAvailableVariantTracks(){const e=Hs(this.shakaPlayer);if(!e)return;const t=xs(this.shakaPlayer);if(!t)return;const r=t.variants;if(!Array.isArray(r))return;const n={},i={};r.forEach(t=>{const r=t.video,o=t.audio;if(!o||o.originalId===e.originalAudioId){const t=((e,t,r)=>{const{bandwidth:n,width:i,height:o,originalId:a}=e;return{name:zs(e,r),value:a,width:i,height:o,deepHD:Qs(e,t),bitrate:n?Sd(n,1e3):ty}})(r,this.deepHDTracks,this.videoTrackLabels),{name:i=String(t.height)||""}=t;(void 0===n[i]||t.value===e.originalVideoId||n[i].value!==e.originalAudioId&&n[i].bitrate<t.bitrate)&&(n[i]=t)}if(o&&r.originalId===e.originalVideoId){const t=this.parseAudioTrack(o),{name:r}=t;(void 0===i[r]||t.value===e.originalAudioId||i[r].value!==e.originalAudioId&&i[r].bitrate<t.bitrate)&&(i[r]=t)}}),this.props.onVideoTracksChange.dispatch(To(n)),this.props.onAudioTracksChange.dispatch(To(i))}getCurrentInternalTextTrack(){return void 0===this.shakaPlayer?void 0:this.shakaPlayer.getTextTracks().find(Qg)}checkDeadChunkServer(e){if(!shaka)return;if(!Ar(this.getStreamUrl()))return;if(this.state.controller.videoType!==Ed.VOD)return;const{code:t,data:r}=e;if(!(t===shaka.util.Error.Code.BAD_HTTP_STATUS||t===shaka.util.Error.Code.HTTP_ERROR||t===shaka.util.Error.Code.TIMEOUT))return;const[n]=r,i=r[r.length-1];if("string"===typeof n&&i===shaka.net.NetworkingEngine.RequestType.SEGMENT){const{hostname:e}=Object(Ll.g)(n);this.chunkHostnameBlacklist.addHostname(e)}}initShakaConfigAutoUpdate(){this.stopShakaConfigAutoUpdate(),this.shakaConfigAutoUpdateInterval=window.setInterval(()=>{this.updateShakaConfig()},1e3)}updateShakaConfig(){const{shakaPlayer:e}=this;if(void 0!==e)try{const t=this.getMaxBufferLength();if(e.getConfiguration().streaming.bufferingGoal===t)return;this.configureShaka(e,{streaming:{bufferingGoal:t}})}catch(e){}}stopShakaConfigAutoUpdate(){clearInterval(this.shakaConfigAutoUpdateInterval)}getAbrRestrictions(){if(!this.state.controller.isAbrEnabled)return{maxWidth:1/0,maxHeight:1/0};const{width:e,height:t}=this.getCapSizes(),r=function(e){if(void 0===e)return;const t=e.querySelector('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:capping:maxheight"]');if(!t)return;const r=parseInt(t.getAttribute("value")||"",10);return r>0?{maxHeight:r}:void 0}(this.manifestXML);return{maxWidth:e,maxHeight:Math.min(...[r&&r.maxHeight,t].filter(b))}}getPreloadedOrStartPosition(){const{preloadShakaPlayer:e}=this,{startPosition:t}=this.state.controller;if(!Ys(e))return t;const r=e.getBufferedInfo();if(0===r.audio.length&&0===r.video.length)return t;const n=e.getMediaElement();return{utc:qs(e,this.manifestXML)||t.utc||void 0,videoTime:n&&Y(n.currentTime)||t.videoTime||void 0}}calcStartPosition(){const{utc:e,videoTime:t}=this.getPreloadedOrStartPosition(),r=Xs(this.shakaPlayer,this.manifestXML);return b(e)&&void 0!==r?Math.max(e-r,0):t}configureShaka(e,t){try{e.configure(t)}catch(e){this.props.onError(new Ou(e,{isFatal:!1,code:Qd.SHAKA_CONFIGURE_ERROR}))}}checkRepresentationChange(e,t){(function(e,t){const r=ks(e),n=ks(t);return md()(r,n)})(e,t)||(this.playerStore.dispatch(sp(ur(jA.RepresentationsChange,void 0))),this.props.logEvent({event:Pu.RepresentationsChange,params:{}}),this.recoverStream())}cancelPreloadSource(){const{preloadShakaPlayer:e}=this;void 0!==e&&(e.destroy(),this.preloadShakaPlayer=void 0)}}class em extends Dc{constructor(e,t,r,n){var i;super(),i=this,this.drmConfig=t,this.errorCallback=r,this.withCredentials=n,this.certificate=void 0,this.video=void 0,this.keySessions={},this.onNeedKey=async function(e){let{initData:t}=void 0===e?{}:e;const{certificate:r,video:n}=i;if(!t||void 0===r||i.isDestroyed)return;const o=i.extractContentId(t);if(await i.waitForStalledEvent(),i.keySessions[o])return;n.webkitKeys||"function"!==typeof WebKitMediaKeys||n.webkitSetMediaKeys(new WebKitMediaKeys("com.apple.fps.1_0")),n.webkitKeys||i.onError(new Ou({code:Qd.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR}));const a=i.video.webkitKeys.createSession("video/mp4",i.getWebKitMediaKeySessionInitData(t,o));a||i.onError(new Ou({code:Qd.FAIRPLAY_CREATE_KEY_SESSION_ERROR})),i.keySessions[o]=a,i.addDestroyHandler(()=>a.close());i.addDestroyHandler(d(a,"webkitkeymessage",e=>{let{message:t}=e;if(i.isDestroyed)return;const r=t||new ArrayBuffer(0),n=Zs({"Content-Type":"application/json"},i.drmConfig.headers);dt({responseType:"json",method:"POST",url:i.drmConfig.advanced["com.apple.fps.1_0"].processSPCPath,data:JSON.stringify(Zs({assetId:o,spc:btoa(el(new Uint8Array(r)))},i.drmConfig.requestParams)),headers:n,retries:3,timeout:1e4,onRetry:i.onRequestRetry(e=>{i.onError(new Ou({isFatal:!1,code:Qd.FAIRPLAY_SPC_LOAD_ERROR,details:e}))}),withCredentials:i.withCredentials}).then(e=>{let{response:{ckc:t}}=e;const r=rl(atob(t));a.update(new Uint8Array(r))}).catch(e=>{i.onError(new Ou({isFatal:!0,code:Qd.FAIRPLAY_SPC_LOAD_ERROR,details:e}))})}));i.addDestroyHandler(d(a,"webkitkeyerror",e=>{let t;const{error:r}=a;if(r){const{code:e,systemCode:n}=r;t={code:e,systemCode:n}}i.onError(new Ou({code:Qd.FAIRPLAY_CREATE_KEY_ERROR,isFatal:!1,details:t}))}))},this.onError=e=>{this.errorCallback.call(this.errorCallback,e),e.isFatal&&this.destroy()},this.onRequestRetry=e=>(t,r)=>{if(418!==r.status)return e(t),!0;const n=Os(r.response);return this.onError(Ps(n)),!n.isFatal},this.clearKeySessions=()=>{this.keySessions={}},this.video=e,this.addDestroyHandler(d(e,"webkitneedkey",this.onNeedKey)),this.addDestroyHandler(this.clearKeySessions),this.addDestroyHandler(d(e,"emptied",this.clearKeySessions))}loadCertificate(){return dt({method:"GET",url:this.drmConfig.servers["com.apple.fps.1_0"],responseType:"arraybuffer",retries:3,timeout:1e4,onRetry:this.onRequestRetry(e=>{this.onError(new Ou({code:Qd.FAIRPLAY_CERT_LOAD_ERROR,isFatal:!1,details:e}))}),withCredentials:this.withCredentials}).then(e=>{let{response:t}=e;this.certificate=new Uint8Array(t)}).catch(e=>{this.onError(new Ou({isFatal:!0,code:Qd.FAIRPLAY_CERT_LOAD_ERROR,details:e}))})}getWebKitMediaKeySessionInitData(e,t){const{certificate:r=new Uint8Array(0)}=this,n=new Uint16Array(rl(t));let i=0;const o=e.byteLength+4+n.byteLength+4+r.byteLength,a=new ArrayBuffer(o),s=new DataView(a);new Uint8Array(a,i,e.byteLength).set(new Uint8Array(e)),i+=e.byteLength,s.setUint32(i,n.byteLength,!0),i+=4;const l=new Uint16Array(a,i,n.length);l.set(n),i+=l.byteLength,s.setUint32(i,r.byteLength,!0),i+=4;return new Uint8Array(a,i,r.byteLength).set(r),new Uint8Array(a,0,a.byteLength)}extractContentId(e){const t=new Uint8Array(e),r=el(new Uint16Array(t.buffer)),[,n]=r.split("//");return n||(this.onError(new Ou({isFatal:!1,code:Qd.FAIRPLAY_INVALID_CONTENT_ID})),"")}waitForStalledEvent(){return new Promise(e=>{this.addDestroyHandler(d(this.video,"stalled",()=>e(),{once:!0}))})}}em.IS_SUPPORTED="undefined"!==typeof WebKitMediaKeys&&Object(Bc.a)(WebKitMediaKeys.isTypeSupported)&&WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4");class tm{constructor(e){this.onVideoTypeChange=new kc(void 0),this.video=void 0,this.unsubscribers=[],this.isStrmCatchUpStream=!1,this.seekableEndFifo=new iS(2),this.destroy=()=>{Object(xc.a)(this.unsubscribers)},this.handleProgressEvent=()=>{if(!this.video||!this.video.seekable.length)return;const e=this.video.seekable,t=Y(e.end(e.length-1)),r=this.seekableEndFifo.getAll();t!==r[r.length-1]&&(this.seekableEndFifo.push(t),this.updateVideoType())},this.updateVideoType=()=>{this.onVideoTypeChange.dispatch(this.getVideoType())},this.isStrmCatchUpStream=function(e){if(!Ar(e))return!1;const t=Object(Ll.f)(Object(Ll.g)(e).search);return Boolean(t.start)}(e)}setHTMLVideoElement(e){this.destroy(),this.video=e,this.unsubscribers.push(d(e,"timeupdate",this.updateVideoType)),this.unsubscribers.push(d(e,"durationchange",this.updateVideoType)),this.unsubscribers.push(d(e,"progress",this.handleProgressEvent))}getVideoType(){if(!this.video||isFinite(this.video.duration))return Ed.VOD;if(this.isStrmCatchUpStream)return Ed.EVENT;const e=this.seekableEndFifo.getAll();if(!this.video.seekable.length||e.length<2)return Ed.LIVE;const t=this.video.seekable.start(0);return e[1]>e[0]&&t?Ed.LIVE:Ed.EVENT}}const rm=["loadstart","progress","durationchange","loadedmetadata","loadeddata","canplay","playing"];class nm extends Tg{initInternalSubscribe(){super.initInternalSubscribe(),this.recoverIosSleepMode(),this.activateVideoTagIosWorkaround()}constructor(e){super(e),this.props=e,this.engine=Cv.NATIVE,this.fairPlayController=void 0,q(this.video,"webos")&&this.video.loadDrmClient()}getUtcStartTime(){const e=this.video;if(!this.video.src||0===e.readyState||"function"!==typeof e.getStartDate)return super.getUtcPosition();const t=e.getStartDate();if(!t||"function"!==typeof t.getTime)return super.getUtcPosition();const r=t.getTime();return isNaN(r)?super.getUtcPosition():Sd(r,1e3)}getUtcPosition(){const e=this.getUtcStartTime();return e>0?Ad(e,this.getCurrentTime()):super.getUtcPosition()}async attachEncoder(){await super.attachEncoder(),xd.log("hls native mode")}shouldSkipVideoTagError(e){return super.shouldSkipVideoTagError(e)||Boolean(this.fairPlayController&&this.fairPlayController.isDestroyed)}getStartPosition(){const{videoTime:e,utc:t}=this.state.controller.startPosition;if(b(e)||b(t)){if(this.state.controller.videoType===Ed.LIVE){const e=this.getUtcStartTime();if(e>0&&b(t)&&t>0)return t-e}return b(e)?e:void 0}}applyStartPositionEventually(){rm.forEach(e=>{const t=this.addVideoEventListener(e,this.applyStartPosition,{once:!0});this.onDetach.addOne(t)})}isDvrEnabled(){if(wy.isSmartTV())return!1;if(wy.isSafariDesktop())return!0;const{controller:{isFullscreen:e},skin:{useNativeFullscreen:t,nativeControlsVisibility:r}}=this.state;return(!t||!e)&&!r}setVideoTrack(){xd.log("Unable to set video track on native encoder")}getBandwidthEstimate(){return NaN}async initDrm(){const{stream:{drmConfig:e}}=this.props;if(!q(this.video))return this.initFairPlay(e);this.video.drmConfig=e,He("drm",Boolean(e)?this.video.proxyElementType:"none")}setProxyElementAttributes(){if(!q(this.video))return;const{sourceParams:{subtitles:e}}=this.props,{state:{controller:{userAudioTrackLang:t,userTextTrackLang:r}}}=this;this.video.subtitles=e,this.video.preferredAudioLang=t,this.video.preferredTextLang=r}getVideoBufferingSubscriber(){return q(this.props.video)?eg:tg}getStreamUrl(){return Object(Ll.b)(super.getStreamUrl(),{audio_mbr:q(this.video)?void 0:"1"},{saveOriginalPath:!0})}initVideoTypeQualifier(){const e=new tm(this.getStreamUrl());this.onDetach.addOne(e.destroy),e.onVideoTypeChange.add(e=>{e&&this.props.onVideoTypeChange.dispatch(e)}),e.setHTMLVideoElement(this.video)}onTick(e){super.onTick(e),this.updateProgramDateTime()}async initFairPlay(e){if(!go(e))return void He("drm","none");if(He("drm","fairplay"),!em.IS_SUPPORTED)throw new Ou({code:Qd.FAIRPLAY_NOT_SUPPORTED});const{video:t,onError:r}=this.props,n=new em(t,e,r,this.withCredentials);this.fairPlayController=n,this.onDestroy.addOne(()=>n.destroy()),await n.loadCertificate()}recoverIosSleepMode(){if(!Jc)return;const e=E(this.getVideoOwnerDocument(),e=>{e&&(On(this.state)||this.canSeek()&&(this.video.currentTime-=.001))});this.onDestroy.addOne(e)}updateProgramDateTime(){const{videoType:e}=this.state.controller,t=this.getUtcStartTime(),r=(e===Ed.LIVE||e===Ed.EVENT)&&t?yd(t,1e3):void 0;this.props.onProgramDateTimeChange.dispatch(r)}activateVideoTagIosWorkaround(){Jc&&this.onDestroy.addOne(d(this.video,"touchstart",()=>{this.video.paused?this.video.pause():Promise.resolve(this.video.play()).catch(rc.a)},{once:!0}))}}const im=Y(180);class om{constructor(){this.onVideoTypeChange=new kc(void 0),this.video=void 0,this.previousDuration=0,this.unsubscribers=[],this.destroy=()=>{this.previousDuration=0,Object(xc.a)(this.unsubscribers)},this.updateVideoType=()=>{this.onVideoTypeChange.dispatch(this.getVideoType())}}setHTMLVideoElement(e){this.destroy(),this.video=e,this.unsubscribers.push(d(e,"timeupdate",this.updateVideoType)),this.unsubscribers.push(d(e,"durationchange",this.updateVideoType))}getVideoType(){return this.video&&this.video.duration?this.video.duration===1/0?Ed.LIVE:(0===this.previousDuration&&(this.previousDuration=this.video.duration),this.video.duration>this.previousDuration?Ed.EVENT:Ed.VOD):Ed.VOD}}let am;!function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(am||(am={}));const sm=r(50);class lm extends Error{constructor(e,t){void 0===t&&(t=am.UNKNOWN_ERROR),super(e),this.message=void 0,this.stack=void 0,this.code=void 0,sm(this,lm.prototype),this.message=e,this.code=t}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{code:this.code,message:this.message,data:this.stack}}}class cm{constructor(e){this.playingState=void 0,this.lastRpcRequestId=1,this.waiters=Object.create(null),this.video=void 0,this.onError=void 0,this.onRun=void 0,this.handleMessage=e=>{if(e&&Object(Bl.a)(e.data))try{const t=dl(e.data);"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(e){this.onError(e)}},this.video=e.video,this.onError=e.onError,this.onRun=e.onRun,this.playingState=e.playingState,this.video.addEventListener("yandexplayermessage",this.handleMessage)}destroy(){this.video.removeEventListener("yandexplayermessage",this.handleMessage),this.onError=rc.a,this.onRun=rc.a;for(const e in this.waiters)this.waiters[e](new Error("Stop on destroy"))}sendRequest(e,t){let{method:r,params:n}=e;if(void 0===t&&(t=3e4),this.playingState!==fd.PLAY&&this.playingState!==fd.BUFFERING)return Promise.reject(new Error("Can't send request while playingState is "+this.playingState));const i=this.getUniqueRpcRequestId();return this.sendMessage(il({id:i,method:r,params:n})),this.waitForResponse(i,t)}sendEvent(e){let{method:t,params:r}=e;return this.playingState!==fd.PLAY&&this.playingState!==fd.BUFFERING?Promise.reject(new Error("Can't send event while playingState is "+this.playingState)):(this.sendMessage(il({method:t,params:r})),Promise.resolve())}setPlayingState(e){this.playingState=e}getUniqueRpcRequestId(){return String(this.lastRpcRequestId++)}waitForResponse(e,t){const r=setTimeout(()=>{const r=this.waiters[e];void 0!==r&&r(new Error("Timeout fired ("+t+"ms) for id="+e+"."))},t),n=()=>{clearTimeout(r),delete this.waiters[e]};return new Promise((t,r)=>{this.waiters[e]=(e,i)=>(n(),null!==e?r(e):t(i))})}sendMessage(e){this.video.yandexPlayerSend(e)}handleRpcRequest(e){let{id:t,method:r,params:n}=e;this.onRun({method:r,params:n},(e,r)=>{t&&this.sendMessage(function(e){let{id:t,error:r,result:n}=e;return r?JSON.stringify({jsonrpc:"2.0",id:t,error:r.toJSON()}):JSON.stringify({jsonrpc:"2.0",id:t,result:void 0===n?null:n})}({id:t,error:e,result:r}))})}handleRpcResponse(e){const t=this.waiters[e.id];void 0!==t?"error"in e?t(e.error):t(null,e.result):xd.warn(new Error("Response for missed waiter for id="+JSON.stringify(e.id)))}}class dm{constructor(e){let{video:t,onError:r,playingState:n}=e;this.yandexRpcMessenger=void 0,this.handleRun=(e,t)=>{t(new lm("Not implemented",am.METHOD_NOT_FOUND))},this.yandexRpcMessenger=new cm({video:t,onError:r,onRun:this.handleRun,playingState:n})}setPlayingState(e){return this.yandexRpcMessenger.setPlayingState(e)}destroy(){return this.yandexRpcMessenger.destroy()}async setViewPortSize(e){let{width:t,height:r}=e;await this.yandexRpcMessenger.sendRequest({method:"setViewPortSize",params:{width:t,height:r}})}async getVsid(){const e=await this.yandexRpcMessenger.sendRequest({method:"getVsid",params:[]});if(!Object(Bl.a)(e))throw new Error("Unexpected result in getVsid: "+e);return e}async getPlayerVersion(){const e=await this.yandexRpcMessenger.sendRequest({method:"getPlayerVersion",params:[]});if(!Object(Bl.a)(e))throw new Error("Unexpected result in getPlayerVersion: "+e);return e}async getBandwidth(){const e=await this.yandexRpcMessenger.sendRequest({method:"getBandwidth",params:[]});if(!b(e))throw new Error("Unexpected result in getBandwidth: "+e);return e}async getStartDate(){const e=await this.yandexRpcMessenger.sendRequest({method:"getStartDate",params:[]});if(!b(e))throw new Error("Unexpected result in getStartDate: "+e);return e}}document.createElement("div"),document.createElement("div");class um extends Tg{constructor(){super(...arguments),this.engine=Cv.YANDEX,this.startDate=Y(vg),this.yandexRpc=void 0,this.wasSuspendedOnCurrentSource=!1,this.expectedStateAfterRestore=fd.PAUSE}async attachEncoder(){this.initYandexPlayer(),await super.attachEncoder(),this.restoreYandexPlayer(),this.initYandexRpc(),this.initStartDateUpdater(),this.initBandwidthEstimateUpdater(),this.initAndroidVsidUpdater(),this.initViewPortSizeUpdater(),this.isRecoverablePlaylistHTTPStatus=!1,xd.log("yandex native mode")}play(){return this.expectedStateAfterRestore=fd.PLAY,super.play()}pause(){return this.expectedStateAfterRestore=fd.PAUSE,super.pause()}checkPositionAndReturnToLive(){}async detachEncoder(){this.isRecoverablePlaylistHTTPStatus=!0,this.suspendYandexPlayer(),this.detachYandexPlayer(),await super.detachEncoder()}initInternalSubscribe(){super.initInternalSubscribe(),this.props.onPlayingStateChange.add(e=>{this.state.controller.encoderState===HA.Attached&&e===fd.PAUSE&&(this.playerStore.dispatch(Ph({videoTime:this.getCurrentTime(),utc:this.getUtcPosition()})),this.updateYandexPlayerConfig())}),this.onDestroy.addOne(()=>{this.dropDetachedYandexPlayer()})}setVideoTrack(e){const{videoTracks:t}=this.video;t[Array.from(t).findIndex(t=>t.id===e.value)].selected=!0}seekInternal(e){const{start:t,end:r}=this.getSeekableRange();ls(this.video,Y(l(e,t,r||0)))}getSeekableRange(){const{videoType:e}=this.state.controller;switch(e){case Ed.LIVE:return{start:this.getUtcStartTime(),end:this.getDuration()};default:return{start:Y(0),end:this.getDuration()}}}getDuration(){const{videoType:e}=this.state.controller;switch(e){case Ed.LIVE:return Ad(this.getUtcStartTime(),im);default:return Y(this.video.duration)}}getUtcStartTime(){return this.startDate}getUtcPosition(){const{videoType:e}=this.state.controller;switch(e){case Ed.LIVE:return this.getCurrentTime();default:return this.getUtcStartTime()?Ad(this.getUtcStartTime(),this.getCurrentTime()):super.getUtcPosition()}}getMaxCapAllowedVideoTrack(){const{videoTracks:e}=this.state.controller,t=this.getCapSizes();return Ug(e,t.width,t.height)}getFragmentsData(){if(!this.isDvrEnabled()||!this.video||!this.video.seekable.length)return super.getFragmentsData();const{start:e,end:t}=this.getSeekableRange();return{totalDuration:vd(t,e),fragmentDuration:VA,startTime:e}}onTick(e){super.onTick(e),this.updateAutoVideoTrackIfNeed()}isDvrEnabled(){return!0}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}initVideoTypeQualifier(){const e=new om;this.onDetach.addOne(e.destroy),e.onVideoTypeChange.add(e=>{e&&this.props.onVideoTypeChange.dispatch(e)}),e.setHTMLVideoElement(this.video)}applyStartPositionEventually(){const e=this.addVideoEventListener("durationchange",()=>{if(!this.canSeek())return;const t=this.getStartPosition(),r=this.getCurrentTime();var n,i,o;b(t)&&(n=t,i=r,void 0===(o=.5)&&(o=Yg),Math.abs(n-i)<=o)?e():(this.applyStartPosition(),e(),this.onDetach.remove(e))});this.onDetach.addOne(e)}initDrm(e){return He("drm",e?"android":"none"),Promise.resolve()}async onVideoTagError(){const e=k(this.video);if(this.state.controller.encoderState!==HA.Attached)return super.onVideoTagError();this.video.poster=kd,this.checkPlaylistHTTPStatus();const t=new Ou({code:Dl[e.code],details:e,isFatal:!0}),r=await this.checkPlaylistHTTPStatusPromise;r&&r.isFatalError()?this.props.onError(r.toPlayerError()):this.props.onError(t)}initYandexRpc(){const e=new dm({video:this.video,onError:e=>{this.props.onError(new Ou(e,{isFatal:!1,code:Qd.YANDEX_RPC_ERROR}))},playingState:this.state.controller.playingState});this.onPlayingStateChange.add(t=>{e.setPlayingState(t)}),this.yandexRpc=e,this.onDetach.addOne(()=>{e.destroy(),this.yandexRpc=void 0})}initStartDateUpdater(){const{yandexRpc:e}=this;if(!e)return;const t=setInterval(()=>{e.getStartDate().then(e=>{if(!(e>0))return void this.props.onProgramDateTimeChange.dispatch(void 0);this.startDate=Y(Math.floor(e/1e3));const{videoType:t}=this.state.controller;switch(t){case Ed.LIVE:return this.props.onProgramDateTimeChange.dispatch(0);default:return this.props.onProgramDateTimeChange.dispatch(e)}}).catch(rc.a)},5e3);this.onDetach.addOne(()=>{clearInterval(t)})}restoreYandexPlayer(){if(!nl({playerVersion:"1.0-6810",featureName:"suspend-on-ad"})||!Do("yandex_controller_detach_on_ad",!0))return;if(!this.wasSuspendedOnCurrentSource)return;const e=this.video;Object(Yc.a)(()=>{Object(Bc.a)(e.yandexReattachPlayer)&&(e.yandexReattachPlayer(!e.paused).then(()=>{switch(this.expectedStateAfterRestore){case fd.PLAY:return void super.play();case fd.PAUSE:return void super.pause()}}),xd.log("video.yandexReattachPlayer()"))})}initYandexPlayer(){this.updateYandexPlayerConfig()}updateYandexPlayerConfig(){const e=this.getStartPosition(),t=this.getBandwidthEstimate(),{drmConfig:r}=this.props.stream,{height:n,width:i}=this.getCapSizes(),o={drmConfig:r,bandwidthEstimate:b(t)?Math.floor(t):void 0,startPosition:b(e)?Y(e):void 0,viewPortHeight:b(n)?Math.floor(n):void 0,viewPortWidth:b(i)?Math.floor(i):void 0};this.video.setAttribute("yandexplayer",JSON.stringify(o)),xd.log("this.video.setAttribute('yandexplayer', "+JSON.stringify(o)+")")}initAndroidVsidUpdater(){function e(){t.getVsid().then(e=>{i!==e&&r({event:"YandexAndroidVsidChanged",params:{androidVsid:e}}),i=e}).catch(()=>{n=window.setTimeout(e,1e3)})}const t=this.yandexRpc,{props:{logEvent:r}}=this;let n=0,i="";this.onDetach.addOne(this.onPlayingStateChange.add(t=>{t===fd.PLAY&&e()})),e(),this.onDetach.addOne(()=>clearTimeout(n))}suspendYandexPlayer(){if(!nl({playerVersion:"1.0-6810",featureName:"suspend-on-ad"})||!Do("yandex_controller_detach_on_ad",!0))return;const e=this.video;Object(Bc.a)(e.yandexDetachPlayer)&&(e.yandexDetachPlayer(),xd.log("video.yandexDetachPlayer()"),this.wasSuspendedOnCurrentSource=!0)}dropDetachedYandexPlayer(){const e=this.video;Object(Bc.a)(e.yandexDropDetachedPlayer)&&(xd.log("video.yandexDropDetachedPlayer()"),e.yandexDropDetachedPlayer())}detachYandexPlayer(){this.video.removeAttribute("yandexplayer"),xd.log("this.video.removeAttribute('yandexplayer')")}updateAutoVideoTrackIfNeed(){const{videoTracks:e,videoWidth:t,videoHeight:r}=this.video,n=Es(function(e){let{videoTracks:t=[],videoHeight:r,videoWidth:n}=e;const i=Object(jl.a)(t),o=i.find(e=>{let{selected:t}=e;return t});return o&&"auto"!==o.id?o:i.sort((e,t)=>{const{width:i=0,height:o=0}=e,{width:a=0,height:s=0}=t;return Math.abs(o-r)-Math.abs(s-r)||Math.abs(i-n)-Math.abs(a-n)})[0]}({videoTracks:e,videoWidth:t,videoHeight:r}));this.videoTrackValueSignal.dispatch(n?n.value:void 0)}initBandwidthEstimateUpdater(){const{yandexRpc:e}=this;if(!e)return;const t=setInterval(()=>{e.getBandwidth().then(e=>{this.playerStore.dispatch(eh(e))}).catch(rc.a)},6e4);this.onDetach.addOne(()=>{clearInterval(t)})}async updateViewPortSize(e){let{width:t,height:r}=e;const{yandexRpc:n}=this;return n?n.setViewPortSize({width:Math.floor(t),height:Math.floor(r)}).then(()=>({width:t,height:r})).catch(()=>({width:NaN,height:NaN})):{width:NaN,height:NaN}}initViewPortSizeUpdater(){const{yandexRpc:e}=this;if(!e)return;let t=NaN,r=NaN;this.updateViewPortSize(this.getCapSizes()).then(e=>{let{width:n,height:i}=e;t=n,r=i});const n=setInterval(()=>{const{width:e,height:n}=this.getCapSizes();e===t&&n===r||this.updateViewPortSize({width:e,height:n}).then(e=>{let{width:n,height:i}=e;t=n,r=i})},1e3);this.onDetach.addOne(()=>{clearInterval(n)})}}const hm=Je(window),pm={};r(75);class fm extends Dc{constructor(e){super(),this.video=void 0,this.playbackQuality=fg,this.persistedPlaybackQuality=fg,this.accumulatedPlaybackQuality=fg,this.video=e,this.addDestroyHandler(()=>{this.reset(),this.video=void 0})}update(){if(!this.video)return;const e=ss(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=fg)}persist(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=fg)}reset(){this.playbackQuality=fg,this.persistedPlaybackQuality=fg,this.accumulatedPlaybackQuality=fg}getPlaybackQuality(){return this.persistedPlaybackQuality.totalVideoFrames>0?fg:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}const Em=2592e5;class Am{constructor(e,t,r,n){var i=this;this.api=void 0,this.destroySkin=void 0,this.videoController=void 0,this.maxBufferLength=void 0,this.multiroll=eS,this.visibilityDetectPromise=void 0,this.defineAutoplaySettingsPromise=void 0,this.abortRequestAutoplaySettings=rc.a,this.clearRequestAutoplaySettingsTimeout=rc.a,this.onlineMonitor=new aS,this.resourceTimingsMonitor=void 0,this.playbackProgressStorage=new dS,this.visualState=void 0,this.debug=!1,this.container=void 0,this.video=void 0,this.div=void 0,this.adDiv=void 0,this.slotsController=void 0,this.sizeSensor=void 0,this.playbackQualityController=void 0,this.videoTrackValueSignal=new kc(void 0),this.onControllerVideoTracksChange=new Lc,this.audioTrackValueSignal=new kc(void 0),this.onControllerAudioTracksChange=new Lc,this.textTrackValueSignal=new kc(void 0),this.onControllerTextTracksChange=new Lc,this.onVideoDurationChange=new kc(YA.duration),this.onVideoCurrentTimeChange=new kc(Y(NaN)),this.onVideoProgramDateTimeChange=new kc(YA.programDateTime),this.onVisualStateChange=new kc(void 0,md.a),this.onVideoPlayingStateChange=new Lc,this.onVideoTypeChange=new Lc,this.onChangeBufferingRanges=new Lc,this.onLoadedData=new Lc,this.onCanPlay=new Lc,this.onContentImpression=new Lc,this.onMetadata=new Lc,this.onDestroy=new Lc,this.playerStore=void 0,this.externalRequestController=void 0,this.unsubscribeSignalsOnSetSource=[],this.broadcastAd=void 0,this.playCallbacks=[],this.preferNative=void 0,this.config=void 0,this.mediaInternalsHistory=void 0,this.forceUsingSeamlessAd=void 0,this.currentAdPlaybackQueue=void 0,this.stopLoadSource=rc.a,this.onApiReady=void 0,this.canRenderSkin=()=>{this.api.logEvent({event:"CanRenderSkinCalledBeforeSkinIsReady",params:{}})},this.handleSizeSensorUpdate=e=>{let{width:t,height:r}=e;this.onVisualStateChange.dispatch(El({},this.visualState.getState(),{width:t,height:r}))},this.defineAutoplaySettingsAndLoadSource=()=>{const e=this.config.source,t=this.playerStore.getState(),{initialAutoplay:r,allowMuted:n,muted:o,volume:a,togglePlaybackOnVisibilityChangeSetting:s}=t.controller;this.defineAutoplaySettings(this.video,{autoplay:r,muted:o||0===a,allowMuted:!(!s||!s.forceAutoplay)||n}),this.playerStore.dispatch(Dh(Date.now())),this.loadSource(e,{adSessionIdConfig:{keepAdSession:this.config.adSessionConfig.keepAdSession,adSessionWatchedTime:this.config.adSessionConfig.adSessionWatchedTime,countableNonLinearInAdSession:this.config.adSessionConfig.countableNonLinearInAdSession},shouldSaveProgress:!1}).catch(e=>{xd.error("load source error",e),ia(e,XA.INIT),this.onError(e)}).then(()=>{this.onApiReady(this.api.publicApi),this.store.controller.autoplay||this.playerStore.dispatch(pp(!0)),this.canRenderSkin()}).then(()=>{void 0!==e.params.adConfig&&(Sf?dt({method:"GET",url:yf,retries:2,checkStatus:e=>e>=200&&e<400}).then(e=>{if(-1===e.responseText.trim().indexOf('<VAST version="3.0">'))throw new Error("Invalid XML in response from ["+yf+"]")}):Promise.resolve()).catch((function(e){let{message:t}=void 0===e?{}:e;i.playerStore.dispatch(Wu(!0)),i.onError(new Ou({code:Qd.STRM_ABD_INVALID_RESPONSE,isFatal:!0,details:{reason:t}}))}))})},this.subscribeHandlers=()=>{this.onlineMonitor.onOnline.add(()=>{this.playerStore.dispatch(bh(!0)),On(this.store)||this.videoController&&this.videoController.onOnline(),this.playerStore.dispatch(sp(ur(jA.Offline,void 0)))}),this.onlineMonitor.onOffline.add(()=>{this.playerStore.dispatch(bh(!1)),this.videoController&&this.videoController.onOffline()}),this.onVideoTypeChange.add(e=>{this.playerStore.dispatch(Eh(e))}),this.onVideoDurationChange.add(e=>{this.playerStore.dispatch(ph(e)),this.updateVideoInfo()}),this.onVideoProgramDateTimeChange.add(e=>{this.playerStore.dispatch(Ch(e))});const e=C(()=>{this.saveDataToStorage()},1e3*Yd);this.onVideoCurrentTimeChange.add(e),this.onVideoCurrentTimeChange.add(this.handleVideoControllerCurrentTimeChange),this.onChangeBufferingRanges.add(e=>{this.playerStore.dispatch(Vh(e))}),this.videoTrackValueSignal.add(e=>{this.playerStore.dispatch(jh({videoTrackValue:e,isAbrEnabled:this.store.controller.isAbrEnabled}))}),this.onControllerVideoTracksChange.add(e=>{this.playerStore.dispatch(Bh(e))}),this.audioTrackValueSignal.add(e=>{this.playerStore.dispatch(Kh(e))}),this.onControllerAudioTracksChange.add(e=>{this.playerStore.dispatch(Gh(e))}),this.textTrackValueSignal.add(e=>{this.playerStore.dispatch(Zh({enabled:void 0!==e,textTrackValue:e}))}),this.onControllerTextTracksChange.add(e=>{this.playerStore.dispatch(qh(e))}),this.onVideoPlayingStateChange.add(e=>{this.playerStore.dispatch(Np(e))}),this.unsubscribeSignalsOnSetSource.push(this.onCanPlay.addOne(this.logCanPlay(XA.INIT))),this.unsubscribeSignalsOnSetSource.push(this.onLoadedData.addOne(this.logLoadStartHavingCurrentData(XA.INIT))),this.onDestroy.addOne(()=>{this.onContentImpression.removeAll()});const t=E(this.getContainerDocument(),e=>{this.playerStore.dispatch(op(e))});var r;this.onDestroy.addOne(t),this.onDestroy.addOne((r=e=>{this.api.logEvent({event:Pu.DrmSystemsSupportDetected,params:e})},void 0===Qy?(Xy.push(r),()=>{const e=Xy.indexOf(r);-1!==e&&Xy.splice(e,1)}):(r(Qy),rc.a)))},this.showContextMenu=e=>{const{contextMenuVisibility:t,hiddenControls:r,isMobileSkin:n,useNativeControls:i}=this.store.skin;if(r.includes(Od.CONTEXT_MENU))return;if(void 0!==e){if(e.ctrlKey||e.altKey)return;e.preventDefault()}if(this.playerStore.dispatch(_p(!0)),t&&(n||i))return;const o={x:0,y:0},{left:a,top:s}=this.container.getBoundingClientRect();e&&("touches"in e?(o.x=e.touches[0].clientX-a,o.y=e.touches[0].clientY-s):(o.x=e.clientX-a,o.y=e.clientY-s)),this.playerStore.dispatch(Op(o))},this.setBackgroundImage=e=>{this.div.style.backgroundImage=e?"url('"+e+"')":""},this.setBackgroundVisibility=e=>{this.div.style.backgroundSize=e?"contain":"0  0"},this.shouldCaptureScreenshot=()=>this.videoController&&this.videoController.engine===Cv.MPD&&this.store.controller.videoType===Ed.VOD,this.stopAd=()=>Promise.resolve(),this.playAdViewers=async(e,t,r)=>{Qe("player.adsdk.empty."+e),Qe("player.adsdk.start."+e),Qe("player.adsdk.fail."+e);try{await this.playAdViewersInternal(e,t,r)}catch(n){Qe("player.adsdk.fail."+e),so({reason:"PLAY_AD_VIEWERS_ERROR",adSdkVersion:De(),adSdkLoaderVersion:we(),adblockDetected:this.store.ad.adblockDetected,adType:e,bandwidth:Ko(void 0)}),this.onError(new Ou(n,{code:Qd.PLAY_AD_VIEWERS_ERROR,isFatal:!1,details:{adType:e,adViewersWithData:t,adDisplayConfig:r}}))}},this.playAdViewersInternal=async(e,t,r)=>{const{ad:{adInfo:n,adSyncInit:i},controller:{isFullscreen:o,isPip:a,sourceParams:{promoConfig:s={}}={}}}=this.store,l=o&&function(e,t){const r=O(e,t);if(!r)return null;let n=e.document[r.element];return t&&t[r.element]&&(n=t),n||null}(this.getContainerDocument().defaultView,this.video)===this.video,c=l||a,u=c?t.filter(e=>{const{adViewer:t}=e;return t.filterAdPodsIndependentOnHtmlControls("StreamPlayer can't play CPC ads: ["+(a?"PiP":l?"FullScreen":"unknown")+"] mode"),t.getAdPodsCount()>0}):t,h=c?u:await Zi(e,u,s),p=h.map(e=>{let{adViewer:t}=e;return t}),f=function(e){return e.reduce((e,t)=>Ad(e,B(t.getAdPodsCount())),B(0))}(p),E=Ce(p);if(0===f)return ze("player.adsdk.empty."+e),so({reason:"NO_AD_PODS_TO_PLAY_AD",adSdkVersion:De(),adSdkLoaderVersion:we(),adblockDetected:this.store.ad.adblockDetected,adType:e,bandwidth:Ko(void 0)}),void this.api.logEvent({event:"NoAdPodsToPlayAd",params:void 0});n&&this.onError(new Ou({code:Qd.AD_IS_ALREADY_PLAYING,isFatal:!1,details:{currentAdType:n.adType,adType:e}})),this.prepareBeforeOrAfterAd(!1,e);const A=zp.includes(e),v=this.slotsController.createAdElementsSet({adType:e,useSeamlessAdIfPossible:A});if(!v)return this.onError(new Ou({code:Qd.AD_CANNOT_FIND_CONTAINER_TO_PLAY,isFatal:!1})),void ze("player.adsdk.failed."+e);const y="boolean"===typeof this.forceUsingSeamlessAd?this.forceUsingSeamlessAd:!v.isOriginalVideoSlot;this.api.logEvent({event:"PlayAdViewers",params:{adType:e,adPodsCount:f,useSeamlessAd:y,forceUsingSeamlessAd:this.forceUsingSeamlessAd}});const S=e===bu.inroll?{cueId:this.store.ad.originalBroadcastAdCueId,startProgramDateTime:Y(this.store.controller.programDateTime/1e3),startVideoTime:Y(this.videoController?this.videoController.getCurrentTime():this.store.controller.currentTime),startTimestamp:Y(Date.now()/1e3)}:{},g=()=>{this.playerStore.dispatch(Yu({adType:e,params:S})),e!==bu.overlay&&this.slotsController.showAdElementsSet(v)};let m={},T=!1;const R=Object(Hc.a)(async t=>{let{data:r,stopAdReason:n}=t;this.shouldCaptureScreenshot()&&(this.resetPosterFitStyle(),this.setBackgroundVisibility(!0),this.onCanPlay.addOne(()=>{this.setBackgroundImage(),this.videoController.clearScreenshot()}));const i=this.store.ad.inStreamPlayingState;if(e===bu.overlay&&n===Iu.AdTypeChange){const t=lv(r.adType);p.forEach(r=>{r.preventPlaying("PriorityAdWillBePlaying",{adTypeBefore:lv(e),adTypeAfter:t})})}T=!0,this.currentAdPlaybackQueue&&(this.currentAdPlaybackQueue.destroy(n),this.currentAdPlaybackQueue=void 0),e===bu.postroll||lt(e)||(xd.log("videoController.play()"),i!==fd.PAUSE&&P(this.videoController.play())),this.playerStore.dispatch(Yu(void 0)),e===bu.overlay?this.slotsController.clearAdSlots():this.slotsController.showSkinAndOriginalVideo(),this.playerStore.dispatch(sp(ur(jA.AdEnd,{adType:e}))),this.setMuted(this.store.controller.muted),this.setVolume(this.store.controller.volume),this.prepareBeforeOrAfterAd(!0,e);const o=async()=>{e!==bu.overlay&&(Qe("encoder.attach"),await this.attachEncoder(),ze("encoder.attach",{additional:{engine:this.store.controller.engine}}))};if(n===Iu.InsertIntoCalled)return o();const{loadPositionAfterAd:a}=r;if(a){if(y)return this.seek(a),xd.log("use videoController.play()"),void this.videoController.play();this.playerStore.dispatch(Ph(a)),await o()}});if(this.stopAd=R,!y&&(m=this.getSeekPositionAfterAd({adType:e,adViewersDuration:E}),this.playerStore.dispatch(Ph(m)),e!==bu.overlay&&(e!==bu.preroll&&Qe("encoder.detach"),this.shouldCaptureScreenshot()&&this.videoController.captureScreenshot(this.video).then(e=>{e&&(this.setBackgroundImage(e),this.setBackgroundVisibility(!1))}),await this.detachEncoder(),e!==bu.preroll&&ze("encoder.detach",{additional:{engine:this.store.controller.engine}})),g(),T))return;const _=[d(this.video,"firstframedecoded",()=>{ho("AD",{},i)},{once:!0}),d(this.video,"firstframeshown",()=>{po("AD",{},i)},{once:!0})];let b=!1;const I=new Nu({onAdSkippableStateChange:e=>{this.api.onAdSkippableStateChange(e)},onAdPodCloseStateChange:e=>{this.api.onAdPodCloseStateChange(e)},onAdVolumeAvailabilityStateChange:e=>{this.api.onAdVolumeAvailabilityStateChange(e)},onAdPodDurationChange:e=>{this.api.onAdPodDurationChange(e)},onAdPodCurrentTimeChange:e=>{this.api.onAdPodCurrentTimeChange(e)},onAdPodTimeToSkipChange:e=>{this.api.onAdPodTimeToSkipChange(e)},onAdInteraction:()=>{this.api.onAdInteraction()},onFirstAdPodStarted:()=>{uo("AD",{adblockDetected:this.store.ad.adblockDetected,adType:e,bandwidth:Ko(void 0)},this.store.ad.adSyncInit),ze("player.adsdk.start."+e),this.hidePoster(),y?(m=this.getSeekPositionAfterAd({adType:e,adViewersDuration:E}),this.seek(m,!0),this.videoController.pause(),g()):!this.videoController||e===bu.postroll&&e===bu.overlay||this.videoController.preloadSource()},onAdPodStarted:()=>{this.playerStore.dispatch(pp(!0)),this.api.onAdPodStart(),b&&ze("adsdk.creative.switch."+e)},onAdPodStopped:()=>{Object(xc.a)(_),zi(this.store)||(b=!0,Qe("adsdk.creative.switch."+e),this.playerStore.dispatch(th(void 0)))},onAdPodImpression:()=>{this.api.onSaveDataOutsideIframe({[Md.SINGLE_VIDEO_SESSION_WATCHED_TIME_SINCE_AD]:0}),(this.config.adSessionConfig.countableNonLinearInAdSession||Ji(this.store))&&this.playerStore.dispatch(dp(Y(0)))},onAdPodPlayingStateChange:e=>{Hr(this.store)!==bu.overlay&&this.playerStore.dispatch(th(e))},onAdClickThru:()=>{e===bu.overlay&&this.pause()},onAdSizeChange:e=>{this.playerStore.dispatch(fh({videoWidth:void 0===e.width?NaN:e.width,videoHeight:void 0===e.height?NaN:e.height}))},getControlsSettings:()=>function(e){const{ad:{nativeAdControlsVisibility:t}}=e;return{controlsVisibility:{}}}(this.playerStore.getState()),logEvent:this.api.logEvent,onError:e=>this.onError(e)});this.currentAdPlaybackQueue=I,h.forEach(t=>{let{adViewer:n,additionalData:i,adType:o}=t;I.playAdViewers({adType:e,adPodType:o,adViewer:n,additionalData:i,adDisplayConfig:r,adElementsSet:v})}),await I.getDestroyPromise(),Qe("adsdk.player.start."+e),this.onContentImpression.addOne(()=>{ze("adsdk.player.start."+e)}),T||await R({stopAdReason:Iu.AdCompleted,data:{loadPositionAfterAd:m}})},this.handleVideoControllerCurrentTimeChange=e=>{this.playerStore.dispatch(vh(e)),this.playerStore.getState().ad.adInfo||this.playbackProgressStorage.saveProgress(e),this.updateVideoInfo()},this.handleVisualStateChange=e=>{let{isPip:t,isFullScreen:r,isVisible:n}=e;this.playerStore.dispatch(rp(r));const{isSupportedPipMode:i,isYandexPipMode:o,isVisibilitySupported:a}=this.visualState;this.onVisualStateChange.dispatch(El({isPip:t,isVisible:n,isFullScreen:r,isSupportedPipMode:i,isYandexPipMode:o,isVisibilitySupported:a},this.sizeSensor.getSize())),i&&!o&&(this.playerStore.dispatch(np(t)),a&&this.playerStore.dispatch(ip(n)))},this.setHiddenControls=e=>{e.indexOf(Od.ALL)>-1?this.playerStore.dispatch(Ep(Pd)):this.playerStore.dispatch(Ep(e)),this.videoController&&!this.playerStore.getState().ad.adInfo&&this.videoController.updateNativeControlsVisibility()},this.seekToLive=()=>{if(!this.videoController||!this.videoController.isDvrEnabled())return;const{skinDVRStartTime:e,skinDVRDuration:t}=this.store.skin,r=Ad(e,t);this.seek({videoTime:r}),this.playerStore.dispatch(AA({reason:Nd.SEEK_TO_LIVE,step:Y(0),videoPosition:r}))},this.setPlaybackRate=e=>{const{max:t,min:r}=Qi(this.store);this.videoController.setPlaybackRate(l(e,r,t))},this.seek=function(e,t){let{videoTime:r,utc:n}=e;if(void 0===t&&(t=!1),"number"===typeof n){const e=i.videoController.getUtcStartTime(),r=vd(n,e);i.seekToVideoPosition(r,t)}else"number"===typeof r&&i.seekToVideoPosition(r,t)},this.getDebugInfo=()=>{const{resourceTimingsMonitor:e}=this,t=this.videoController;return{recoverHelperState:t?t.getRecoverHelperState():yy.OFF,logHistory:xd.getHistory(),state:this.store,remainingBufferedTime:ri(this.store),resourceTimings:e.getAllResourcesTimings(),connectionQuality:t?t.getConnectionQuality():Lv.UNKNOWN,mediaInternalsHistory:this.mediaInternalsHistory.getHistory()}},this.setVolume=e=>{if(!this.videoController)return this.playerStore.dispatch(ch({muted:this.store.controller.muted,volume:e,changeReason:Vv.SetVolume})),void this.abortRequestAutoplaySettings(zv.VolumeChange);const{muted:t,volume:r}=this.store.controller;let n=e,i=t;if(0===e){const{userVolume:e}=this.store.controller;n=e||r||1,i=!0}this.playerStore.dispatch(ch({volume:n,muted:i,changeReason:Vv.SetVolume})),this.currentAdPlaybackQueue&&Ji(this.store)?this.currentAdPlaybackQueue.setVolume(e):this.videoController&&(this.videoController.setVolume(n),this.videoController.setMuted(i))},this.setMuted=e=>{const t={volume:this.store.controller.volume,muted:e,changeReason:Vv.SetMuted};if(!this.videoController)return this.playerStore.dispatch(ch(t)),void this.abortRequestAutoplaySettings(zv.MuteChange);this.playerStore.dispatch(ch(t)),this.currentAdPlaybackQueue&&Ji(this.store)?this.currentAdPlaybackQueue.setVolume(e?0:this.store.controller.volume):this.videoController&&this.videoController.setMuted(e)},this.onRecover=e=>{const t=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(this.getDebugInfo(),["resourceTimings"]);this.api.onRecover(El({},e,t)),this.playerStore.dispatch(sp(ur(jA.Recover,{recoverReason:e.reason})))},this.logLoadStartHavingCurrentData=e=>()=>{$l||(this.video.readyState<gy.HAVE_CURRENT_DATA?this.unsubscribeSignalsOnSetSource.push(this.onLoadedData.addOne(this.logLoadStartHavingCurrentData(e))):this.isCanPlayAndStartHavingCurrentDataLog()&&this.onContentImpression.dispatch(void 0))},this.logCanPlay=e=>()=>{$l||this.isCanPlayAndStartHavingCurrentDataLog()&&(this.api.logEvent({event:Pu.CanPlay,params:{stage:e}}),this.onContentImpression.dispatch(void 0))},this.isCanPlayAndStartHavingCurrentDataLog=()=>!this.store.ad.hasPreroll&&this.store.controller.preload,this.startStream=()=>this.store.controller.encoderState===HA.Attached?Promise.resolve():this.attachEncoder().catch(xd.error),this.playInrollAd=e=>{this.multiroll.inroll.schedule(El({},e,{timeOffset:(null==e?void 0:e.timeOffset)||0}))},this.container=e,this.preferNative=!0===t.preferNative,this.config=t;{const e=Object(Xc.getHardcodedParam)(window,"videoplayer-seamless-ad");"true"===e?this.forceUsingSeamlessAd=!0:"false"===e?this.forceUsingSeamlessAd=!1:"boolean"===typeof t.forceUsingSeamlessAd&&(this.forceUsingSeamlessAd=t.forceUsingSeamlessAd)}this.onApiReady=Object(Hc.a)(n);const s=t.source,{params:u}=s,{additionalParams:h}=u;var p;p={vsid:h.vsid,contentPlayerVersion:"1.0-6810"},nS.ya||(nS.ya={}),nS.ya.videoAd||(nS.ya.videoAd={}),nS.ya.videoAd.statsRootParams=p;const A=t.volume,{skinConfig:v,togglePlaybackOnVisibilityChange:y}=t;this.api=vy({play:()=>this.play(),pause:()=>this.pause(),seek:this.seek,seekToLive:this.seekToLive,stop:()=>this.stop(),destroy:()=>this.destroy(),recoverStream:()=>this.videoController?this.videoController.recoverStream():Promise.resolve(),getRecoverHelper:()=>{if(this.videoController)return this.videoController.recoverHelper},setPlaybackRate:this.setPlaybackRate,getPlaybackRate:()=>this.store.controller.playbackRate,getState:()=>this.store.controller.playingState,getDuration:()=>this.store.controller.duration,getCurrentTime:()=>this.store.controller.currentTime,getWatchedTime:()=>this.store.controller.watchedTime,getAdSessionWatchedTime:()=>this.store.ad.adSessionWatchedTime,getCurrentStream:()=>this.store.controller.stream,getVideoPlaybackQuality:()=>this.playbackQualityController.getPlaybackQuality(),setTitleSettings:e=>{this.playerStore.dispatch(fA(e))},setSource:function(e,t){let{adSessionIdConfig:r={},shouldSaveProgress:n=!1}=void 0===t?{}:t;i.loadSource(e,{shouldSaveProgress:n,adSessionIdConfig:r}).catch(e=>{ia(e,XA.SET_SOURCE),i.onError(e)}),i.saveDataToStorage(),Object(xc.a)(i.unsubscribeSignalsOnSetSource),i.unsubscribeSignalsOnSetSource=[],i.unsubscribeSignalsOnSetSource.push(i.onCanPlay.addOne(i.logCanPlay(XA.SET_SOURCE))),i.unsubscribeSignalsOnSetSource.push(i.onLoadedData.addOne(i.logLoadStartHavingCurrentData(XA.SET_SOURCE))),i.updateExternalPlayerConfig(e.params.externalPlayerConfig),i.updateLogoWidgetConfig(e)},getUtcPosition:()=>this.getUtcPosition(),getLiveLatency:()=>void 0===this.videoController?void 0:this.videoController.getLiveLatency(),setVolume:this.setVolume,getVolume:()=>this.store.controller.volume,setMuted:this.setMuted,getMuted:()=>this.store.controller.muted,setFullscreen:e=>this.setFullscreen(e),setHiddenControls:this.setHiddenControls,setVideoStyle:e=>{this.playerStore.dispatch(Cp(e)),c(this.video,e)},setPictureInPictureEnabled:e=>aa(window,e,this.video),getVideoTrack:()=>Ei(this.store),getVideoTracks:()=>this.store.controller.videoTracks,setVideoTrack:e=>this.onApiVideoTrackChange(e),getMaxCapAllowedVideoTrack:()=>{if(this.videoController)return this.videoController.getMaxCapAllowedVideoTrack()},getAudioTrack:()=>Cn(this.store),getAudioTracks:()=>this.store.controller.audioTracks,setAudioTrack:e=>this.onApiAudioTrackChange(e),getTextTrack:()=>function(e){const{textTrackEnabled:t}=e.controller;if(t)return Pi(e)}(this.store),getTextTracks:()=>this.store.controller.textTracks,setTextTrack:e=>this.onApiTextTrackChange(e),getDebugInfo:this.getDebugInfo,getExpectedStalled:()=>this.store.controller.expectedStalled,getRemainingBufferedTime:()=>this.videoController?this.videoController.getRemainingBufferedTime():{total:Y(0)},getConnectionQuality:()=>this.videoController?this.videoController.getConnectionQuality():Lv.UNKNOWN,toggleNativeSubtitles:e=>{this.videoController&&this.videoController.toggleNativeSubtitles(e)},setNativeTextTrackVisibility:e=>{this.playerStore.dispatch(zh(e))},dispatchFeatureAction:e=>{try{this.playerStore.dispatch(Mp(e))}catch(t){this.onError(new Ou(t,{code:Qd.FEATURE_ACTION_DISPATCH_ERROR,details:{featureAction:e},isFatal:!1}))}},getMultiroll:()=>this.multiroll,playAdViewers:(e,t,r)=>this.playAdViewers(e,t,r),stopAd:e=>this.stopAd(e),playInrollAd:this.playInrollAd,skipAdPod:()=>this.skipAdPod(),setNativeAdControlsVisibility:e=>{this.playerStore.dispatch(Zu(e))},setExternalRequestController:e=>{this.externalRequestController&&this.externalRequestController.destroy(),this.externalRequestController=e},getExternalRequestController:()=>(this.externalRequestController||(this.externalRequestController=new iu({sender:window,receiver:window})),this.externalRequestController),updateVideoControllerNativeControlsVisibility:()=>{this.videoController&&this.videoController.updateNativeControlsVisibility()},getTimelineInfo:()=>{const{controller:{duration:e,currentTime:t},skin:{skinDVRStartTime:r,skinDVRDuration:n}}=this.store;return{currentTime:t,duration:e,utcStartTime:this.getUtcStartTime(),dvrStartTime:r,dvrDuration:n}},setLogoWidgetExpanded:e=>{this.playerStore.dispatch(NA(e))},setLogoWidgetActionCompleted:e=>{this.playerStore.dispatch(wA(e?wd.COMPLETED:wd.DEFAULT))},getSourceId:()=>this.playerStore.getState().controller.sourceId,addPromoConfig:e=>{let{promoConfig:t}=e;this.playerStore.dispatch(wp(t))},getBandwidthEstimate:()=>(void 0===this.videoController?this.store.controller.lastKnownBandwidthEstimate:this.videoController.getBandwidthEstimate())||void 0,insertIntoCalled:()=>{var e;return null==(e=this.videoController)?void 0:e.insertIntoCalled()}},t.callbacks),this.maxBufferLength=t.maxBufferLength,this.resourceTimingsMonitor=new pS(t.resourceTimingsMonitor),this.playbackProgressStorage.setEnabled(t.restoreTabSessionPlaybackProgress);const{primaryColor:S,secondaryColor:g}=function(e){if(void 0===e||!Object(kl.a)(e))return sS;const t=Zo(e.primaryColor)?e.primaryColor:void 0,r=Zo(e.secondaryColor)?e.secondaryColor:void 0;if(void 0===t&&void 0===r)return sS;if(void 0===r&&"string"===typeof t){const e=ea(t);return{primaryColor:t,secondaryColor:$o(e)?ta(ra(e,97/255)):t}}if(void 0===t&&"string"===typeof r){const e=ea(r);return{primaryColor:$o(e)?r:ta(ra(e,157/255)),secondaryColor:r}}return{primaryColor:t,secondaryColor:r}}(v),{autoplay:m}=t,T=t.hidden;this.debug=Boolean(t.debug),this.debug&&xd.enableConsole(),this.div=document.createElement("div"),this.div.className="StreamPlayer",this.adDiv=document.createElement("div"),this.adDiv.className="StreamPlayer_ui",this.div.tabIndex=-1,this.container.appendChild(this.div),this.container.appendChild(this.adDiv);const R=Boolean(t.allowMuted),_={controller:El({},YA,{autoplay:m,initialAutoplay:m,allowMuted:R,preload:t.preload,from:h.from,vsid:h.vsid,volume:t.volume,muted:t.muted,userVolume:void 0===t.volume?NaN:A,isFullscreen:!1,togglePlaybackOnVisibilityChangeSetting:y,isDocumentVisible:Object(gc.a)(this.getContainerDocument()),isOnline:!0,liveOffset:t.liveOffset,isAbrEnabled:t.autoQuality,preview:u.preview,featuresEnabled:t.featuresEnabled,videoInfo:u.videoInfo}),ad:El({},kA,{adSessionWatchedTime:t.adSessionConfig.adSessionWatchedTime,adblockDetected:Sf,watchedTimeSinceAd:t.adSessionConfig.watchedTimeSinceAd,nativeAdControlsVisibility:t.useNativeAdControls}),skin:El({},Wv,{hiddenControls:T,useNativeControls:!0,useNativeFullscreen:!0,useNativeSubtitles:!0,nativeControlsVisibility:!Dd(T),primaryColor:S,secondaryColor:g,isMobileSkin:!1,showReportButton:t.report,showBrandLogo:t.showBrandLogo,showUnmuteButtonForAll:t.showUnmuteButtonForAll,showPreloader:!1,logoConfig:u.logoConfig,startPositionConfirmation:t.startPositionConfirmation,handleVideoTagClickWhenHidingNativeControls:t.handleVideoTagClickWhenHidingNativeControls}),externalPlayback:El({},Cd,{externalPlaybackPossible:ee(u.externalPlayerConfig),externalPlayerConfig:u.externalPlayerConfig}),sharing:El({},Yv,{link:u.shareConfig&&u.shareConfig.link,html:u.shareConfig&&u.shareConfig.html}),features:{SkippableFragments:void 0,NonStop:void 0,Recommendations:void 0,CloseButton:void 0}};xd.log("initialState",_);const b=qi(this.api,_);this.playerStore=b,this.updateLogoWidgetConfig(s),this.updateRumInfo();const I=function(e){let{preferNative:t=!1,logger:r}=e;return o({preferNative:t})?Vd.avplayProxyController.createElement(r):null}({preferNative:this.preferNative,logger:xd})||(N=xd,Pl?Vd.orsayVideoElement.createElement(N):null)||function(e){let{preferNative:t,logger:r}=e;const{webOSController:n}=Vd;return a({preferNative:t})&&n?n.createElement(r):null}({preferNative:this.preferNative,logger:xd})||function(e){return Cl?Vd.playstationVideoElement.createElement(e):null}(xd)||this.container.getElementsByTagName("video")[0]||document.createElement("video");var N;this.video=I,I.poster||(I.poster=kd),this.playbackQualityController=new fm(I),this.mediaInternalsHistory=new oS(I),this.slotsController=new RS({parentElement:this.div,adElement:this.adDiv,originalVideoElement:I,useNativeControls:!0,forceUsingSeamlessAd:this.forceUsingSeamlessAd}),f(I,Rd.a.player__video),Object(Yc.a)(()=>window.Ya.Rum.sendHeroElement()),function(e){e.setAttribute("playsinline","playsinline"),e.setAttribute("webkit-playsinline","webkit-playsinline")}(I),this.destroySkin=gf({waitForPromise:new Promise(e=>{this.canRenderSkin=e}),playerStore:b,onError:e=>this.onError(e),skinContainer:this.slotsController.getSkinElement(),callback:this.api.onSkinReady});const w=this.video;this.visualState=r.visualState,this.visualState.setVideoElement(I),this.onVisualStateChange.add(e=>{e&&this.api.onVisualStateChange(e)});const D=C(e=>{let{height:t,width:r}=e;b.dispatch(fp({width:r,height:t,size:re(r)})),this.handleSizeSensorUpdate({height:t,width:r})},500);this.sizeSensor=new Uc(w),this.sizeSensor.onResize.add(e=>{let{width:t,height:r}=e;return D({width:t,height:r})}),D(this.sizeSensor.getSize()),this.onDestroy.addOne(()=>this.sizeSensor.destroy()),y&&this.visualState.isYandexPipMode&&aa(window,!1,this.video),this.visualState.observe(this.handleVisualStateChange),this.handleVisualStateChange(this.visualState.getState()),this.visibilityDetectPromise=Promise.resolve(this.visualState.getState()),this.defineAutoplaySettingsAndLoadSource(),Promise.resolve().then(()=>{this.initEventSubscribes(t,!0,I,!1)})}initEventSubscribes(e,t,r,n){this.onDestroy.addOne(d(this.getContainerDocument(),"click",e=>{this.playerStore.dispatch(DA())},{capture:!0})),this.onDestroy.addOne(d(this.getMainContainer(),"click",r=>{if(this.store.controller.watchedTime>0)return;if(void 0!==this.store.ad.inStreamPlayingState)return;if(this.store.skin.startPositionConfirmation&&this.store.skin.startPositionConfirmation.enabled)return;(void 0===e.shouldPlayOnFirstClick?!t:e.shouldPlayOnFirstClick)&&this.play()},{once:!0}));const i=t?r:this.div,o=t||n?v(i,this.showContextMenu,{touchesCount:2,handleContextmenu:!1}):d(this.div,"contextmenu",this.showContextMenu);this.onDestroy.addOne(o),y(()=>{this.saveDataToStorage()}),Jl&&this.onDestroy.addOne(y(()=>this.destroy())),this.onDestroy.addOne(d(this.div,"selectstart",e=>{e.preventDefault(),e.stopPropagation()})),this.onDestroy.addOne(T(()=>{this.playerStore.dispatch($u())})),this.onDestroy.addOne(d(this.getContainerDocument(),"click",e=>{this.playerStore.dispatch(DA())},{capture:!0})),this.onDestroy.addOne(d(this.getMainContainer(),"click",t=>{this.store.controller.watchedTime>0||void 0===this.store.ad.inStreamPlayingState&&(this.store.skin.startPositionConfirmation&&this.store.skin.startPositionConfirmation.enabled||e.shouldPlayOnFirstClick&&this.play())},{once:!0})),y(()=>{this.saveDataToStorage()}),Jl&&this.onDestroy.addOne(y(()=>this.destroy())),this.onDestroy.addOne(()=>{this.onVisualStateChange.removeAll()}),this.initClickerEventListener(this.div),this.initTouchZoomPreventor(this.div),this.subscribeHandlers()}initClickerEventListener(e){const t=new yu(e);this.onDestroy.addOne(()=>t.destroy()),t.onEvent.add(e=>{let{type:t,event:r}=e;const n=El({},r);n.preventDefault=void 0,this.api.onVideoClickerEvent({type:t,event:n})})}initTouchZoomPreventor(e){const t=new Tu(e);this.onDestroy.addOne(()=>t.destroy())}updateRumInfo(){const{controller:e}=this.store;xe({apiVersion:1,bundle:"modern",isMobile:this.config.isMobile,useFriendlyFrame:this.config.useFriendlyFrame,slowConnection:this.config.slowConnection,vsid:e.vsid,from:e.from,saveData:Xo()})}requestAutoplaySettings(e,t,r){return function(e){return void 0===e&&(e=window),Object(PS.a)(e).some(e=>{const{hasBeenActive:t}=Object(Yc.a)(()=>w(e))||{hasBeenActive:!1};return t})}(window)?{promise:Promise.resolve({autoplay:t.autoplay,muted:t.muted,detectionMethod:"ACTIVATED_WINDOW"}),abort:rc.a,skipCacheUpdate:!0}:H(El({},t,r,{videoSlot:e}))}defineAutoplaySettings(e,t){if(this.store.controller.autoplay&&!this.store.controller.isDocumentVisible)return this.playerStore.dispatch(oh(xA.waitForDocumentVisibility)),this.playerStore.dispatch(ih(!1)),void(this.defineAutoplaySettingsPromise=Promise.resolve());let r;We("detect.autoplay");const n=fl(t),{promise:i,skipCacheUpdate:o=!1,abort:a}=this.requestAutoplaySettings(e,t,n);i.then(()=>{Xe("detect.autoplay")});const{promise:s,clear:l}=Wc(500);this.clearRequestAutoplaySettingsTimeout=()=>{l()},s.then(()=>{this.playerStore.dispatch(oh(xA.waitForUserPlay))});const c=I();this.abortRequestAutoplaySettings=e=>{void 0===r&&this.api.logEvent({event:"PlayWithoutRAAResults",params:{delay:c(),reason:e}}),a()},this.runRequestAutoplaySettingsLogger(i,t,n),i.then(e=>{var r,i;o||(i=e,function(e,t){return!t||e.allowMuted!==t.allowMuted||e.autoplay!==t.autoplay||e.muted!==t.muted}(r=t,n)&&Object(Yc.a)(()=>{My.a.setItem(pl(r),JSON.stringify(hl({},i,{time:Date.now()})))}))}),this.defineAutoplaySettingsPromise=Promise.all([i,this.visibilityDetectPromise]).then(e=>{let[t]=e;r=t,this.clearRequestAutoplaySettingsTimeout();const{isVisible:n}=this.store.controller;xd.log("Autoplay settings defined",r);const{autoplay:i,muted:o,requireUserGestureToUnmute:a,autoplayImpossible:s,requireAllowMutedToAutoplay:l}=r;this.playerStore.dispatch(ch({muted:o,volume:this.store.controller.volume,changeReason:Vv.RequestAutoplaySettings}));const c=function(e){const{controller:{togglePlaybackOnVisibilityChangeSetting:t,muted:r}}=e;return!!t&&!(t.onlyMuted&&!r)}(this.store)&&!1===n;c&&this.api.logEvent({event:"HiddenAutoplayPrevented",params:{autoplaySettingsRequestResult:r}});const d=i&&!c;xd.log("autoplay status:",i),xd.log("isVisible",n),xd.log("preventHiddenAutoplay",c);const u=d?xA.starting:xA.waitForUserPlay;if(this.playerStore.dispatch(oh(u)),d?this.playerStore.dispatch(ah(!0)):ao(),this.playerStore.dispatch(ih(d)),this.playerStore.dispatch(dh(Boolean(a))),s){this.playerStore.dispatch(uh(!0)),this.api.logEvent({event:"AutoplayImpossible",params:{autoplaySettingsRequestResult:r}});try{console.warn("Cannot autoplay video"+(l?" with sound":"")+" in this environment."+(l?" Use autoplay={allowMuted: true} if you prefer mute video and enable autoplay.":""))}catch(e){}}})}createVideoController(e,t){let{stream:r,supportInfo:n}=e;const i={playerStore:this.playerStore,video:this.video,stream:r,sourceParams:t,debug:this.debug,liveOffset:this.store.controller.liveOffset,slowConnection:this.config.slowConnection,maxBufferLength:this.maxBufferLength,preferNative:this.preferNative,maxRecoverAttempts:this.config.maxRecoverAttempts,bandwidthEstimateOffset:this.config.bandwidthEstimateOffset,resourceTimingsMonitor:this.resourceTimingsMonitor,onMetadata:this.onMetadata,onPlayingStateChange:this.onVideoPlayingStateChange,onVideoTypeChange:this.onVideoTypeChange,onCurrentTimeChange:this.onVideoCurrentTimeChange,onDurationChange:this.onVideoDurationChange,onProgramDateTimeChange:this.onVideoProgramDateTimeChange,onChangeBufferingRanges:this.onChangeBufferingRanges,videoTrackValueSignal:this.videoTrackValueSignal,onVideoTracksChange:this.onControllerVideoTracksChange,audioTrackValueSignal:this.audioTrackValueSignal,onAudioTracksChange:this.onControllerAudioTracksChange,textTrackValueSignal:this.textTrackValueSignal,onTextTracksChange:this.onControllerTextTracksChange,setPlayerBackgroundImage:this.setBackgroundImage,setPlayerBackgroundVisibility:this.setBackgroundVisibility,onLoadedData:this.onLoadedData,onCanPlay:this.onCanPlay,onError:e=>this.onError(e),onRecover:this.onRecover,onContentImpression:this.onContentImpression,logEvent:this.api.logEvent,getPipWindowSize:()=>this.visualState.getPipWindowSize()},o=(a=n.engine,s=i,a===Cv.YANDEX?new um(s):a===Cv.HLS?new Sg(s):a===Cv.MPD?new Zg(s):a===Cv.MP4?new Rg(s):new nm(s));var a,s;const l=e=>{this.videoController=e,this.playerStore.dispatch(nh(n.engine)),this.api.onEngineChange(n.engine,this.playerStore.getState().controller.sourceId),He("engine",n.engine)};return Kc(o)?Promise.resolve().then(async()=>l(await o)):l(o)}getPreparedSourceParams(e,t){return El({},Zv,t,{startPosition:this.getInitialStartPosition(t),withCredentials:Go(e,t)})}getInitialStartPosition(e){const t=e&&e.startPosition||Zv.startPosition;if(t){if(Object(cc.a)(t).some(e=>b(t[e])))return t}const r=this.playbackProgressStorage.getProgress();return void 0===r?t:{videoTime:r}}async loadSource(e,t){let{adSessionIdConfig:r,shouldSaveProgress:n}=t;xd.log("loadSource start",e),this.api.onEngineChange(void 0,this.playerStore.getState().controller.sourceId);const i=n?"LoadSourceWithSaveProgress":"LoadSource";this.api.logEvent({event:i,params:{source:e}}),lo(),this.shouldCaptureScreenshot()&&(this.setBackgroundImage(),this.setBackgroundVisibility(!1),this.videoController.clearScreenshot()),this.stopAd({stopAdReason:Iu.LoadSource,data:{loadPositionAfterAd:void 0}}),this.stopLoadSource(Sy.setSource),this.playbackProgressStorage.clearKey(),this.playerStore.dispatch(Oh(void 0)),this.playerStore.dispatch(mh(void 0)),this.playerStore.dispatch(Th(void 0)),this.playerStore.dispatch(_h(e.streams)),this.playerStore.dispatch(pp(!1)),this.playerStore.dispatch(Sh(e.params.videoInfo||YA.videoInfo));const{preferredAudioLangs:o,preferredTextLangs:a}=e.params.preferredTracks;o.length>0&&this.playerStore.dispatch(Wh({lang:o[0],name:void 0})),a.length>0&&this.playerStore.dispatch($h({lang:a[0],name:void 0,enabled:!0}));const s=new Jp;this.stopLoadSource=e=>s.stop(e);try{this.multiroll.destroy()}catch(e){!function(e,t){Object(Yc.a)(()=>window.Ya.Rum.logError($i({},e,{additional:Fe()}),t))}({message:"Can not destroy multiroll instance",method:"loadSource",source:"multiroll",sourceMethod:"destroy",type:"logic"},e)}this.multiroll=eS;const l=!this.videoController,{streams:c}=e,d=xo({streams:c,video:this.video,preferNative:this.preferNative}),u=Yo(e.params),h=function(e,t,r){let{keepAdSession:n}=r;if(!Object(kl.a)(e))return!1;if(void 0!==t&&t.intro&&t.intro.length>0)return!1;const i=Boolean(n),o=!1===e.hasPreroll;return i||o}(u,e.params.promoConfig,r);this.playerStore.dispatch(Ju(Object(kl.a)(u)&&(!h||!1!==u.hasPreroll)));let p=h?null:this.initMultirollModule(u,r);He("hasPreroll",!h);const f=this.destroyVideoController(),E=await d;if(this.playerStore.dispatch(Oh(E.streamsWithSupportInfo)),"error"===E.status)throw E.error;const{supportedStream:A}=E;var v;(v=A).supportInfo.engine===Cv.MPD?ul(Af):v.supportInfo.engine===Cv.HLS&&ul(Ef);const{stream:y}=A;if(s.stopReason)return void this.api.logEvent({event:Pu.StreamStopWhileChoosingStream,params:void 0});this.playbackProgressStorage.setKeyByStream(y);const S=this.getPreparedSourceParams(y,e.params);if(await f,s.stopReason)return void this.api.logEvent({event:Pu.StreamStopWhileDestroyVideoController,params:void 0});if(!qo(y.url))throw new Ou({code:Qd.INVALID_STREAM_URL,details:{streamUrl:y.url},isFatal:!0});if(this.resetPlayerStore(y,S,{adSessionIdConfig:r,shouldSaveProgress:n,isFirstLoad:l}),await this.defineAutoplaySettingsPromise,s.stopReason)return void this.api.logEvent({event:Pu.StreamStopDuringDefineAutoplaySettings,params:void 0});const g=this.createVideoController(A,S);Kc(g)&&await g,this.store.ad.hasPreroll||!this.store.controller.preload&&!this.store.controller.autoplay||this.videoController.preloadSource(),He("bandwidthEstimate",Ko(Sd(this.videoController.getBandwidthEstimate(),1e3))),He("drm","none"),l?(Promise.resolve().then(()=>{this.initBroadcastAd()}),jo(y.url,Boolean(S.withCredentials)).then(e=>{this.playerStore.dispatch(Wu(e||Sf))}),this.setMuted(this.store.controller.muted),this.setVolume(this.store.controller.volume)):this.prepareNextSource(y,S),this.setPosterFitStyle(),this.unsubscribeSignalsOnSetSource.push(this.onContentImpression.addOne(()=>this.handleFirstContentImpression()));const m=async()=>{p||(p=this.initMultirollModule(u,r));const e=await p;if(s.stopReason)return this.api.logEvent({event:Pu.StreamStopWhileLoadingMultiroll,params:{streamStopReason:s.stopReason}}),void e.destroy();this.multiroll=e};h?Promise.all([this.onContentImpression.promise(),this.onVideoPlayingStateChange.promise()]).then(()=>{s.stopReason||m()}):await m(),this.startPrerollAndContent(s),S.shareConfig&&this.playerStore.dispatch(Bv(S.shareConfig))}async initMultirollModule(e,t){let r=eS;if(!e)return r;co("AD",!0);try{const{loadMultiroll:n}=await st(window),i={adSdkVersion:De(window),adSdkLoaderVersion:we(window)};He("adSdkVersion",i.adSdkVersion),He("adSdkLoaderVersion",i.adSdkLoaderVersion),this.api.onAdSDKVersionDefined(i),r=await n(El({},e,{secureMode:"Safe",getSTRMChunkHost:()=>{const e=Zn(this.resourceTimingsMonitor.getAllResourcesTimings());if(0===e.length)return;const{hostname:t,protocol:r}=Object(Ll.g)(e[0]);return r+"//"+t+"/"}}),{preroll:{shouldPreload:()=>{const{preload:e,startStage:t}=this.store.controller;return e&&(t===xA.waitForUserPlay||t===xA.waitForDocumentVisibility)}},midroll:{preloadOffset:20,preloadMinTime:Y(5)},postroll:{preloadOffset:20,preloadMinTime:Y(5)},getPreloadParams:()=>{const e={videoSlot:this.video};if(!this.videoController||!this.store.ad.nextAdInfo)return e;const t=this.videoController.getBandwidthEstimate();return t?El({},e,{desiredBitrate:t/1e3}):e},startWatchedTime:Boolean(t.keepAdSession)?this.store.ad.adSessionWatchedTime:kA.adSessionWatchedTime})}catch(t){so({reason:"MULTIROLL_INIT_ERROR",adSdkVersion:De(),adSdkLoaderVersion:we(),adblockDetected:this.store.ad.adblockDetected,bandwidth:Ko(void 0)}),this.onError(new Ou({isFatal:!1,code:Qd.MULTIROLL_INIT_ERROR,details:{error:t,adConfig:e}}))}return r}async startPrerollAndContent(e){xd.log("startPrerollAndContent");let t=[];const r=Object(Hc.a)(()=>this.startStream()),n=Object(Hc.a)(async()=>{this.multiroll!==eS&&Qe("adsdk.loadviewers.preroll"),t=await this.multiroll.preroll.loadViewers({}),this.multiroll!==eS&&ze("adsdk.loadviewers.preroll");const e=function(e){const{sourceParams:t}=e.controller;if(void 0===t)return{};const{promoConfig:r}=t;return void 0===r?{}:r}(this.store),r=t.length>0,n=void 0!==e.intro&&e.intro.length>0,i=r||n;this.playerStore.dispatch(zu(i)),i&&this.api.logEvent({event:Pu.PrerollInit,params:{}})}),{startStage:i,preload:o}=this.store.controller;if(i===xA.waitForUserPlay||i===xA.waitForDocumentVisibility){if(xd.log("Waiting for "+(i===xA.waitForUserPlay?"user gesture":"document visibility")),this.api.logEvent({event:i===xA.waitForUserPlay?Pu.WaitForUserGesture:Pu.WaitForDocumentVisibility,params:{preload:o}}),o){if(xd.log("Preload preroll in player"),await n(),e.stopReason)return void this.api.logEvent({event:Pu.StreamStopWhilePreloadingPreroll,params:{streamStopReason:e.stopReason}});this.store.ad.hasPreroll||(xd.log("No preroll, preload content"),r())}if(i===xA.waitForUserPlay?await this.waitForPlay():await function(e,t){return Object(gc.a)(e)===t?Promise.resolve():new Promise(r=>{E(e,e=>{e===t&&r()})})}(this.getContainerDocument(),!0),e.stopReason)return void this.api.logEvent({event:i===xA.waitForUserPlay?Pu.StreamStopWhileWaitingForPlay:Pu.StreamStopWhileWaitingForDocumentVisibility,params:{streamStopReason:e.stopReason}})}if(xd.log("Start playing"),this.playerStore.dispatch(ih(!0)),await n(),e.stopReason)this.api.logEvent({event:Pu.StreamStopWhileLoadingPreroll,params:{streamStopReason:e.stopReason}});else{if(!this.store.ad.hasPreroll)return await r(),this.playAfterWaitingForDocumentVisibility(),void this.performPlayCallbacks();this.playerStore.dispatch(ah(!0)),xd.log("Start preroll"),this.playAdViewers(bu.preroll,Ur(t,bu.preroll),{videoSlotCanAutoPlay:i!==xA.waitForDocumentVisibility||void 0})}}waitForPlay(){const e=I();return new Promise(t=>{let r=rc.a,n=0;const i=i=>{r(),clearInterval(n),this.api.logEvent({event:Pu.WaitForPlayCompleted,params:{reason:i,timeout:e()}}),this.playerStore.getState().controller.startStage!==xA.started&&this.playerStore.dispatch(oh(xA.starting)),t()};this.video.paused?(this.playCallbacks.push(()=>{i(ny.PlayCallback)}),r=d(this.video,"play",()=>{i(ny.VideoPlayEvent)}),n=window.setInterval(()=>{this.video.paused||i(ny.DetectByInterval)},250)):i(ny.VideoIsNotPausedOnInit)})}initBroadcastAd(){const{video:e,playerStore:t}=this;if(this.broadcastAd=new Qp(e,e.parentElement,t,this.api,e=>this.onError(e)),this.videoController&&this.videoController.engine===Cv.NATIVE){let t=0;e.addEventListener("timeupdate",()=>{const{currentTime:r}=e;this.isLive()&&r<t&&this.broadcastAd&&this.playerStore.dispatch(Xu({})),t=r})}this.onMetadata.add(e=>{const{fragmentMetadataArray:t,fragmentStart:r}=e;if(xd.log("receive metadata: ",t),!this.broadcastAd)return;const{programDateTime:n}=this.store.controller;if(void 0===n)return;const i=Ad(n,yd(r,1e3));let o;Math.random()<.01&&this.api.logEvent({event:Pu.StreamPlayerReceivedMetadata,params:e}),t.forEach(e=>{try{const t=JSON.parse(e);if(!function(e){return Object(kl.a)(e)&&Object(Bl.a)(e.cue_id)&&b(e.offset)}(t))return;o=El({},t,{pts:i})}catch(t){xd.log("metadata is not valid ["+e+"]")}}),o&&this.broadcastAd.handleInrollFrame(o).catch(e=>{xd.error(e),this.onError(new Ou(e,{code:Qd.BROADCAST_AD_BLOCK_INIT_ERROR,isFatal:!1,details:{code:e.code,message:e.message,id:e.id,details:e.details,stack:e.stack,metadata:{cueId:o.cue_id,podStart:i+o.offset}}}))})}),this.broadcastAd.onAdIntervalRemoved.add(e=>{this.playerStore.dispatch(Qu(e))}),this.broadcastAd.onAdIntervalUpdated.add(e=>{let{cueId:t,start:r,end:n}=e;this.playerStore.dispatch(qu({cueId:t,start:Sd(r,1e3),end:Sd(n,1e3)}))}),this.broadcastAd.onInrollAdPlayRequest.add(e=>{this.playAdViewers(bu.inroll,e,{skipDelay:0})}),this.broadcastAd.onOverlayAdPlayRequest.add(e=>{this.playAdViewers(bu.overlay,e,{skipDelay:0})})}prepareBeforeOrAfterAd(e,t){this.broadcastAd&&t!==bu.overlay&&t!==bu.inroll&&this.broadcastAd.setEnabled(e)}getSeekPositionAfterAd(e){let{adType:t,adViewersDuration:r}=e;const n=this.getUtcPosition();if(t===bu.inroll){const e=Ad(this.store.controller.currentTime,r);return{utc:n?Ad(n,r):void 0,videoTime:e}}return t===bu.preroll?this.store.controller.startPosition:t===bu.midroll?{utc:Y(n)||void 0,videoTime:Y(this.videoController.getCurrentTime())}:t===bu.postroll?{videoTime:Y(0)}:{}}updateVideoInfo(){const{startTime:e,fragmentDuration:t,totalDuration:r}=this.videoController.getFragmentsData();this.playerStore.dispatch(Ih(t)),this.playerStore.dispatch(Nh(e)),this.playerStore.dispatch(wh(r));const{videoWidth:n,videoHeight:i}=this.video;this.playerStore.dispatch(fh({videoWidth:n,videoHeight:i})),Ji(this.store)?this.playbackQualityController.persist():this.playbackQualityController.update()}getUtcPosition(){return this.videoController?this.videoController.getUtcPosition():vg}resetPlayerStore(e,t,r){let{adSessionIdConfig:n,shouldSaveProgress:i,isFirstLoad:o}=r;this.playerStore.dispatch(Rh()),this.playerStore.dispatch(mh(e)),this.playerStore.dispatch(Th(t));const a=this.getStartPositionForLoadSource(t,{shouldSaveProgress:i});if(this.playerStore.dispatch(Ph(a)),!o){const{additionalParams:e=$v}=t,{from:r=Jv}=e;this.playerStore.dispatch(gh(r)),this.playerStore.dispatch(lp(t.preview||Zv.preview)),this.playerStore.dispatch(Vh(YA.bufferingRanges)),i||this.playerStore.dispatch(cp(YA.watchedTime)),i||n.keepAdSession||this.playerStore.dispatch(up(kA.adSessionWatchedTime)),this.playerStore.dispatch(Eh(void 0)),this.playerStore.dispatch(Ch(void 0)),this.playerStore.dispatch(Tp(t.logoConfig)),this.playerStore.dispatch(Bh(YA.videoTracks)),this.playerStore.dispatch(Kh(YA.audioTrackValue)),this.playerStore.dispatch(Gh(YA.audioTracks)),this.playerStore.dispatch(Qh(YA.textTrackEnabled)),this.playerStore.dispatch(Jh(YA.textTrackValue)),this.playerStore.dispatch(qh(YA.textTracks)),this.playerStore.dispatch(tp([])),this.playerStore.dispatch(hp(void 0)),this.playerStore.dispatch(RA()),this.playerStore.dispatch(Xu({})),this.playerStore.dispatch(th(void 0)),this.playerStore.dispatch(zu(!1)),this.playerStore.dispatch(rh(void 0)),this.playerStore.dispatch(fA(Wv.title))}this.playerStore.dispatch(Bu(Yo(t))),this.playerStore.dispatch(kp(t.features||{}))}prepareNextSource(e,t){this.playerStore.dispatch(Uh({})),this.playerStore.dispatch(vp(!1)),this.onVideoDurationChange.dispatch(Y(NaN)),this.playerStore.dispatch(jv()),this.playerStore.dispatch(ah(!0)),this.playbackQualityController.reset(),this.playCallbacks=[],this.playerStore.dispatch(jh({videoTrackValue:YA.videoTrackValue,isAbrEnabled:this.store.controller.isAbrEnabled})),this.broadcastAd&&this.playerStore.dispatch(Xu({})),this.playerStore.dispatch(IE({delay:_d,condition:()=>this.store.controller.videoTrackValue===YA.videoTrackValue,action:Ap(!0)}));-1===[fd.PLAY,fd.BUFFERING].indexOf(this.store.controller.playingState)&&this.videoTrackValueSignal.addOne(()=>{this.playerStore.dispatch(Ap(!1))}),this.playerStore.dispatch(sp(ur(jA.SetSource,{stream:e,params:t})))}performPlayCallbacks(){this.playCallbacks.length>0&&(Object(xc.a)(this.playCallbacks),this.playCallbacks=[])}play(){if(this.performPlayCallbacks(),this.currentAdPlaybackQueue&&Hr(this.store)!==bu.overlay)return void this.currentAdPlaybackQueue.resumeAd();if(!this.videoController)return this.playerStore.dispatch(ih(!0)),void this.abortRequestAutoplaySettings(zv.ApiPlay);const e=this.videoController.getCurrentTime(),t=this.videoController.getDuration();t>0&&e>=t&&this.seek({videoTime:Y(0)}),xd.log("StreamPlayer.play() -> videoController.play()"),P(this.videoController.play())}pause(){ao(),this.playerStore.dispatch(pp(!0)),this.currentAdPlaybackQueue&&Hr(this.store)!==bu.overlay?this.currentAdPlaybackQueue.pauseAd():this.videoController&&this.videoController.pause()}stop(){this.seek({videoTime:Y(0)}),this.pause()}seekToVideoPosition(e,t){Number.isNaN(e)||(this.api.onSeek({newPosition:e,oldPosition:this.store.controller.currentTime}),On(this.store)&&!t?this.playerStore.dispatch(Ph({videoTime:e})):this.videoController.seek(e))}isLive(){return this.store.controller.videoType===Ed.LIVE}getStartPositionForLoadSource(e,t){let{shouldSaveProgress:r}=t;const{controller:{currentTime:n,watchedTime:i}}=this.store,o=this.getUtcStartTime(),a=void 0===o?void 0:Ad(o,n),s=Object(kl.a)(e.startPosition)?e.startPosition:{};return r&&i>0?{videoTime:n,utc:a}:s}getUtcStartTime(){const{controller:{programDateTime:e}}=this.store;return void 0===e?void 0:Sd(e,1e3)}onApiVideoTrackChange(e){this.playerStore.dispatch(Hh(e===ry.value));const t=e===ry.value&&this.store.controller.isAbrSupported?ry:this.store.controller.videoTracks.find(t=>t.value===String(e));if(this.playerStore.dispatch(Yh({name:t&&t.value!==ry.value&&t.name||void 0,height:t&&t.height?t.height:void 0})),!t)return;const r=this.api.publicApi.getVideoTrack();this.videoController.setVideoTrack(t),this.playerStore.dispatch(sp(ur(jA.VideoTrackChange,{newTrack:t,oldTrack:r}))),xd.log("SELECTED VIDEO TRACK: ",t)}onApiAudioTrackChange(e){const t=this.store.controller.audioTracks.find(t=>t.value===String(e));t&&(this.playerStore.dispatch(Wh({name:t.name||void 0,lang:t.lang||void 0})),this.videoController.setAudioTrack(t),xd.log("SELECTED AUDIO TRACK: ",t))}onApiTextTrackChange(e){const{textTracks:t,userTextTrackLang:r,userTextTrackName:n}=this.store.controller;if("auto"===e)return void this.playerStore.dispatch(ep());const i=void 0===e?void 0:t.find(t=>t.value===e),o={enabled:Boolean(i),lang:i?i.lang||void 0:r,name:i?i.name||void 0:n};this.playerStore.dispatch($h(o)),i?(this.videoController.setTextTrack(i),xd.log("SELECTED TEXT TRACK: ",i)):(this.videoController.disableTextTrack(),xd.log("DISABLE TEXT TRACK"))}setFullscreen(e){if(e)try{this.visualState.change({isFullScreen:!0})}catch(e){xd.error("Request fullscreen for element:",e)}else try{this.visualState.change({isFullScreen:!1})}catch(e){xd.error("Exit fullscreen for element:",e)}}onError(e){const t=e instanceof Ou?e:new Ou(e,{code:e.code||Qd.DEFAULT_ERROR});this.playerStore.dispatch(Uh({error:t})),t.isFatal&&(this.api.logEvent({event:"MediaInternalsHistoryOnFatal",params:{history:this.mediaInternalsHistory.getHistory()}}),!On(this.store)&&this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(Iu.PlayerError),this.playerStore.dispatch(Np(fd.PAUSE)),this.resourceTimingsMonitor.updateInfo(),this.destroyVideoController())}async detachEncoder(){this.videoController&&(await this.videoController.detachEncoder(),this.playerStore.dispatch(sh(HA.Detached)))}async attachEncoder(){this.store.controller.isOnline||await this.onlineMonitor.onOnline.promise(),this.playerStore.dispatch(sh(HA.Attaching));try{await this.videoController.attachEncoder()}catch(e){throw this.playerStore.dispatch(sh(HA.Detached)),e}this.playerStore.dispatch(sh(HA.Attached));const e=this.store.controller.playingState,t=this.videoController.getPlayingState();e!==t&&this.onVideoPlayingStateChange.dispatch(t)}async destroyVideoController(){this.videoController&&(await this.videoController.destroy(),this.playerStore.dispatch(sh(HA.Detached)))}async destroy(){this.saveDataToStorage(),this.stopAd({stopAdReason:Iu.PlayerDestroy,data:{loadPositionAfterAd:void 0}}),this.stopLoadSource(Sy.destroy),this.multiroll.destroy(),this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(Iu.PlayerDestroy),this.onlineMonitor.destroy(),this.visualState.destroy(),this.resourceTimingsMonitor.destroy(),q(this.video)&&"function"===typeof this.video.destroy&&this.video.destroy(),this.destroySkin(),this.mediaInternalsHistory.destroy(),this.playbackQualityController.destroy(),this.api.destroyApi(),this.onDestroy.dispatch(void 0),await this.destroyVideoController(),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(this.container),Object(xc.a)(this.unsubscribeSignalsOnSetSource)}runRequestAutoplaySettingsLogger(e,t,r){e.then(e=>{this.api.logEvent({event:e.autoplay?"AutoplayAllowed":"AutoplayDisabled",params:{autoplaySettingsRequestResult:e,initialAutoplayParams:t,cachedAutoplayParams:r}})}),Object(cc.a)(ey).forEach(r=>{const{promise:n,clear:i}=Wc(1e3*Number(r));e.then(i),n.then(()=>{const{isDocumentVisible:e}=this.store.controller;xd.log("requestAutoplaySettings taking ["+r+"]s, isDocumentVisible=["+e+"]"),e&&this.onError(new Ou({code:ey[r],details:{initialAutoplayParams:t},isFatal:!1}))})})}get store(){return this.playerStore.getState()}async playAfterWaitingForDocumentVisibility(){const{videoController:e}=this,{startStage:t,initialAutoplay:r}=this.store.controller;if(t===xA.waitForDocumentVisibility&&r&&e){this.api.logEvent({event:Pu.PlayAfterWaitingForDocumentVisibility,params:{}});try{this.performPlayCallbacks(),await e.play()}catch(t){const{allowMuted:r,muted:n}=this.store.controller;if(!(r&&!n))return;this.setMuted(!0),P(e.play())}}}updateExternalPlayerConfig(e){this.playerStore.dispatch(CE(e)),this.playerStore.dispatch(VE(Id.CLOSED))}getContainerDocument(){return this.container.ownerDocument||document}getMainContainer(){return this.config.useFriendlyFrame?this.container:document}saveDataToStorage(){this.api.onSaveDataOutsideIframe({[Md.SINGLE_VIDEO_SESSION_WATCHED_TIME_SINCE_AD]:this.store.ad.watchedTimeSinceAd,[Md.SINGLE_VIDEO_SESSION_WATCHED_TIME_SINCE_AD_UTC_TIMESTAMP]:Y(Date.now()/1e3)})}setPosterFitStyle(){c(this.video,El({objectFit:"cover"},this.playerStore.getState().controller.videoElementStyle))}resetPosterFitStyle(){c(this.video,El({objectFit:"contain"},this.playerStore.getState().controller.videoElementStyle))}hidePoster(){this.video.poster=kd}skipAdPod(){this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.skipAdPod()}updateLogoWidgetConfig(e){const{logoWidgetConfig:t}=e.params;this.playerStore.dispatch(CA(function(e){return void 0===e?e:{caption:e.caption,avatarSrc:e.avatarSrc,forceExpanded:!1,action:{status:e.action.completed?wd.COMPLETED:wd.DEFAULT,caption:e.action.caption,progressCaption:e.action.progressCaption,completedCaption:e.action.completedCaption,url:e.action.url}}}(t)))}handleFirstContentImpression(){this.resetPosterFitStyle();const{controller:e}=this.playerStore.getState(),t=e.videoTracks.find(t=>{let{value:r}=t;return r===e.videoTrackValue});xe({browserRtt:Wo(te()),calcRtt:Wo(da())}),uo(this.videoController.engine,{videoType:e.videoType,bandwidth:Ko(t&&t.bitrate),startWithCapping:eo(t,this.videoController)},this.store.ad.adSyncInit),this.api.logEvent({event:Pu.ContentImpression,params:{}}),this.api.onContentImpression({hasPreroll:this.store.ad.adSyncInit,engine:this.store.controller.engine}),this.playerStore.dispatch(pp(!0)),this.hidePoster()}}const vm=async(e,t,r)=>{(function(e){return void 0===e&&(e=window),Object(jl.a)(e.document.querySelectorAll("style[data-ya-player-style]"))})().forEach(t=>function(e,t){s(e)!==s(t)&&t.appendChild(e)}(t,e));const n=Al(t.preferNative);return new Promise((i,o)=>{n.then(()=>new Am(e,t,r,i)).catch(o)})};Vd.createJsPlayer=vm},function(e,t,r){"use strict";function n(){const e=function(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}r.r(t),r.d(t,"isSupported",(function(){return n}))}]);