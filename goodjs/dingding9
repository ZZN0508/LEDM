(function(f){if(f.__DD_SEM_TRACE){return}f.__DD_SEM_TRACE=true;var b=navigator.userAgent;var d=(/iPhone|iPad|iPod/i).test(b);var c=(/Android/i).test(b);var g;var a;var j;var i=document;var e="addEventListener" in document;var h={getParams:function(k){var l=new RegExp("(^|&)"+k+"=([^&]*)(&|$)");var m=window.location.search.substr(1).match(l);if(m!=null){return unescape(m[2])}return null},getParent:function(l){var k=l;while(k=k.parentNode){if(k.tagName.toLowerCase()==="a"){break}}return k},handleUrl:function(m){var l=m.target;var k;var n;if(l&&l.tagName.toLowerCase()!=="a"){l=h.getParent(l)}if(l){k=l.getAttribute("href");if(!k){return}if(k.indexOf("javascript:")>-1){return}if(k.substr(0,1)=="#"){return}n=l.getAttribute("dd-sem-id");if(n){return}l.setAttribute("dd-sem-id","1");k=h.lwfrom_updateHrefWithLWFrom(k,g);if(a){k=h.source_updateHrefWithSource(k,a)}h.lwfrom_writeHref(l,k)}},addMouseDownEvent:function(l,k){if(e){l&&l.addEventListener("mousedown",k)}else{try{l.attachEvent("mousedown",k)}catch(m){}}},addMobileEvent:function(l,k){l&&l.addEventListener("touchstart",k)},isContains:function(l,k){return l&&l.indexOf(k)>=0},source_updateHrefWithSource:function(n,m){var t=n;if(t.indexOf("keep_source=1")>-1){return t}if(!m){return n}if(n&&/&?\source=[^&#]*/.test(n)){n=n.replace(/&?\bsource=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")}var u;var q;var s;var r="&";var o;var l;var k;var p;if(n.indexOf("#")!=-1){s=n.split("#");n=s.shift();q=s.join("#")}o=n.split("?");l=o.length-1;s=o[0].split("//");s=s[s.length-1].split("/");k=s.length>1?s.pop():"";if(l>0){u=o.pop();n=o.join("?")}if(u&&l>1&&u.indexOf("&")==-1&&u.indexOf("%")!=-1){r="%26"}n=n+"?source="+m+(u?(r+u):"")+(q?("#"+q):"");p=this.isContains(k,".")?k.split(".").pop().toLowerCase():"";if(p){if(({"png":1,"jpg":1,"jpeg":1,"gif":1,"bmp":1,"swf":1,"dmg":1,"exe":1,}).hasOwnProperty(p)){return t}if(!u&&l<=1){if(!q&&!({"htm":1,"html":1,"php":1,"aspx":1}).hasOwnProperty(p)){n+="&file="+k}}}return n},lwfrom_updateHrefWithLWFrom:function(m,q){var t=m;if(t.indexOf("keep_lwfrom=1")>-1){return t}if(!q){return m}if(m&&/&?\blwfrom=[^&#]*/.test(m)){m=m.replace(/&?\blwfrom=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")}if(t.indexOf("keep_source=0")>-1){if(m&&/&?\bsource=[^&#]*/.test(m)){m=m.replace(/&?\bsource=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")}}var u;var p;var s;var r="&";var n;var l;var k;var o;if(m.indexOf("#")!=-1){s=m.split("#");m=s.shift();p=s.join("#")}n=m.split("?");l=n.length-1;s=n[0].split("//");s=s[s.length-1].split("/");k=s.length>1?s.pop():"";if(l>0){u=n.pop();m=n.join("?")}if(u&&l>1&&u.indexOf("&")==-1&&u.indexOf("%")!=-1){r="%26"}m=m+"?lwfrom="+q+(u?(r+u):"")+(p?("#"+p):"");o=this.isContains(k,".")?k.split(".").pop().toLowerCase():"";if(o){if(({"png":1,"jpg":1,"jpeg":1,"gif":1,"bmp":1,"swf":1,"dmg":1,"exe":1,}).hasOwnProperty(o)){return t}if(!u&&l<=1){if(!p&&!({"htm":1,"html":1,"php":1,"aspx":1}).hasOwnProperty(o)){m+="&file="+k}}}return m},lwfrom_writeHref:function(n,m){var k;var l=n.innerHTML;if(l&&l.indexOf("<")==-1){k=i.createElement("b");k.style.display="none";n.appendChild(k)}n.href=m;if(k){n.removeChild(k)}}};if(f.$){$(function(){j=i.getElementsByTagName("a");g=h.getParams("lwfrom");a=h.getParams("source");if(!g){return}if(d||c){for(var k=0;k<j.length;k++){h.addMobileEvent(j[k],h.handleUrl)}}else{for(var k=0;k<j.length;k++){h.addMouseDownEvent(j[k],h.handleUrl)}}})}})(window);