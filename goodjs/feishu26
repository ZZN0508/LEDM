/*! For license information please see core.d6c4f97e15bc7fd146da.js.LICENSE.txt */
(self.webpackJsonp_linkchat=self.webpackJsonp_linkchat||[]).push([[321],{9364:(e,t,n)=>{"use strict";n.d(t,{Il:()=>vo,r:()=>Or,Fw:()=>ur,ZP:()=>Zo});function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var o={};function i(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:o}var s=Object.assign,a=Object.getOwnPropertyDescriptor,c=Object.defineProperty,u=Object.prototype,l=[];Object.freeze(l);var f={};Object.freeze(f);var h="undefined"!=typeof Proxy,p=Object.toString();function d(){h||r("Proxy not available")}function v(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var y=function(){};function g(e){return"function"==typeof e}function m(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function _(e){return null!==e&&"object"==typeof e}function b(e){if(!_(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===p}function w(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function x(e,t,n){c(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function O(e,t,n){c(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function E(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return _(e)&&!0===e[n]}}function S(e){return e instanceof Map}function k(e){return e instanceof Set}var C=void 0!==Object.getOwnPropertySymbols;var I="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:C?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function P(e){return null===e?null:"object"==typeof e?""+e:e}function T(e,t){return u.hasOwnProperty.call(e,t)}var A=Object.getOwnPropertyDescriptors||function(e){var t={};return I(e).forEach((function(n){t[n]=a(e,n)})),t};function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),r)}var o,i}function R(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,D(e,t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U=Symbol("mobx-stored-annotations");function G(e){return Object.assign((function(t,n){H(t,n,e)}),e)}function H(e,t,n){T(e,U)||x(e,U,M({},e[U])),function(e){return e.annotationType_===Z}(n)||(e[U][t]=n)}var V=Symbol("mobx administration"),q=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e,this.batchId_=ct.inBatch?ct.batchId:NaN}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return dt(this)},t.reportChanged=function(){ct.inBatch&&this.batchId_===ct.batchId||(ct.stateVersion=ct.stateVersion<Number.MAX_SAFE_INTEGER?ct.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),ht(),vt(this),pt()},t.toString=function(){return this.name_},e}(),K=E("Atom",q);function z(e,t,n){void 0===t&&(t=y),void 0===n&&(n=y);var r,o=new q(e);return t!==y&&Ft(Dt,o,t,r),n!==y&&Nt(o,n),o}var W={identity:function(e,t){return e===t},structural:function(e,t){return or(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return or(e,t,1)}};function $(e,t,n){return Zt(e)?e:Array.isArray(e)?Ce.array(e,{name:n}):b(e)?Ce.object(e,void 0,{name:n}):S(e)?Ce.map(e,{name:n}):k(e)?Ce.set(e,{name:n}):"function"!=typeof e||jt(e)||$t(e)?e:w(e)?zt(e):At(n,e)}function Y(e){return e}var Z="override";function X(e,t){return{annotationType_:e,options_:t,make_:J,extend_:Q}}function J(e,t,n,r){var o;if(null!=(o=this.options_)&&o.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(jt(n.value))return 1;var i=ee(e,this,t,n,!1);return c(r,t,i),2}function Q(e,t,n,r){var o=ee(e,this,t,n);return e.defineProperty_(t,o,r)}function ee(e,t,n,r,o){var i,s,a,c,u,l,f,h;void 0===o&&(o=ct.safeDescriptors),h=r,t.annotationType_,h.value;var p,d=r.value;null!=(i=t.options_)&&i.bound&&(d=d.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Le(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),d,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:re}}function ne(e,t,n,r){var o;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(o=this.options_)&&o.bound&&(!T(e.target_,t)||!$t(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if($t(n.value))return 1;var i=oe(e,this,t,n,!1,!1);return c(r,t,i),2}function re(e,t,n,r){var o,i=oe(e,this,t,n,null==(o=this.options_)?void 0:o.bound);return e.defineProperty_(t,i,r)}function oe(e,t,n,r,o,i){var s;void 0===i&&(i=ct.safeDescriptors),s=r,t.annotationType_,s.value;var a,c=r.value;($t(c)||(c=zt(c)),o)&&((c=c.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:c,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ie(e,t){return{annotationType_:e,options_:t,make_:se,extend_:ae}}function se(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ae(e,t,n,r){return function(e,t,n,r){t.annotationType_,r.get;0}(0,this,0,n),e.defineComputedProperty_(t,M({},this.options_,{get:n.get,set:n.set}),r)}function ce(e,t){return{annotationType_:e,options_:t,make_:ue,extend_:le}}function ue(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function le(e,t,n,r){var o,i;return function(e,t,n,r){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(o=null==(i=this.options_)?void 0:i.enhancer)?o:$,r)}var fe="true",he=pe();function pe(e){return{annotationType_:fe,options_:e,make_:de,extend_:ve}}function de(e,t,n,r){var o,i,s,a;if(n.get)return Ae.make_(e,t,n,r);if(n.set){var u=Le(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!ct.safeDescriptors||e.isPlainObject_,set:u})?0:2:(c(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"==typeof n.value)return w(n.value)?(null!=(a=this.options_)&&a.autoBind?zt.bound:zt).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?At.bound:At).make_(e,t,n,r);var l,f=!1===(null==(o=this.options_)?void 0:o.deep)?Ce.ref:Ce;"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return f.make_(e,t,n,r)}function ve(e,t,n,r){var o,i,s;if(n.get)return Ae.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!ct.safeDescriptors||e.isPlainObject_,set:Le(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?Ce.ref:Ce).extend_(e,t,n,r)}var ye={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ge(e){return e||ye}Object.freeze(ye);var me=ce("observable"),_e=ce("observable.ref",{enhancer:Y}),be=ce("observable.shallow",{enhancer:function(e,t,n){return null==e||Fn(e)||xn(e)||Pn(e)||jn(e)?e:Array.isArray(e)?Ce.array(e,{name:n,deep:!1}):b(e)?Ce.object(e,void 0,{name:n,deep:!1}):S(e)?Ce.map(e,{name:n,deep:!1}):k(e)?Ce.set(e,{name:n,deep:!1}):void 0}}),we=ce("observable.struct",{enhancer:function(e,t){return or(e,t)?t:e}}),xe=G(me);function Oe(e){return!0===e.deep?$:!1===e.deep?Y:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:$;var t,n,r}function Ee(e,t,n){if(!m(t))return Zt(e)?e:b(e)?Ce.object(e,t,n):Array.isArray(e)?Ce.array(e,t):S(e)?Ce.map(e,t):k(e)?Ce.set(e,t):"object"==typeof e&&null!==e?e:Ce.box(e,t);H(e,t,me)}s(Ee,xe);var Se,ke,Ce=s(Ee,{box:function(e,t){var n=ge(t);return new He(e,Oe(n),n.name,!0,n.equals)},array:function(e,t){var n=ge(t);return(!1===ct.useProxies||!1===n.proxy?Jn:pn)(e,Oe(n),n.name)},map:function(e,t){var n=ge(t);return new In(e,Oe(n),n.name)},set:function(e,t){var n=ge(t);return new An(e,Oe(n),n.name)},object:function(e,t,n){return nr((function(){return Gt(!1===ct.useProxies||!1===(null==n?void 0:n.proxy)?Dn({},n):function(e,t){var n,r;return d(),e=Dn(e,t),null!=(r=(n=e[V]).proxy_)?r:n.proxy_=new Proxy(e,en)}({},n),e,t)}))},ref:G(_e),shallow:G(be),deep:xe,struct:G(we)}),Ie="computed",Pe=ie(Ie),Te=ie("computed.struct",{equals:W.structural}),Ae=function(e,t){if(m(t))return H(e,t,Pe);if(b(e))return G(ie(Ie,e));var n=b(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Ke(n)};Object.assign(Ae,Pe),Ae.struct=G(Te);var je,Re=0,Me=1,Be=null!=(Se=null==(ke=a((function(){}),"name"))?void 0:ke.configurable)&&Se,De={value:"action",configurable:!0,writable:!1,enumerable:!1};function Le(e,t,n,r){function o(){return Ne(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),o.isMobxAction=!0,Be&&(De.value=e,c(o,"name",De)),o}function Ne(e,t,n,o,i){var s=function(e,t,n,r){var o=!1,i=0;0;var s=ct.trackingDerivation,a=!t||!s;ht();var c=ct.allowStateChanges;a&&(et(),c=Fe(!0));var u=nt(!0),l={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:o,startTime_:i,actionId_:Me++,parentActionId_:Re};return Re=l.actionId_,l}(0,t);try{return n.apply(o,i)}catch(e){throw s.error_=e,e}finally{!function(e){Re!==e.actionId_&&r(30);Re=e.parentActionId_,void 0!==e.error_&&(ct.suppressReactionErrors=!0);Ue(e.prevAllowStateChanges_),rt(e.prevAllowStateReads_),pt(),e.runAsAction_&&tt(e.prevDerivation_);0;ct.suppressReactionErrors=!1}(s)}}function Fe(e){var t=ct.allowStateChanges;return ct.allowStateChanges=e,t}function Ue(e){ct.allowStateChanges=e}je=Symbol.toPrimitive;var Ge,He=function(e){function t(t,n,r,o,i){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=!0),void 0===i&&(i=W.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=i,s.value_=n(t,void 0,r),s}B(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==ct.UNCHANGED){0,this.setNewValue_(e)}},n.prepareNewValue_=function(e){if(Ze(this),tn(this)){var t=rn(this,{object:this,type:ln,newValue:e});if(!t)return ct.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?ct.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),on(this)&&an(this,{type:ln,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return nn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:ln,newValue:this.value_,oldValue:void 0}),sn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return P(this.get())},n[je]=function(){return this.valueOf()},t}(q);Ge=Symbol.toPrimitive;var Ve,qe,Ke=function(){function e(e){this.dependenciesState_=Ve.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new We(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||r(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Le("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?W.structural:W.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Ve.UP_TO_DATE_)return;e.lowestObserverState_=Ve.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&(e.dependenciesState_=Ve.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==ct.inBatch||0!==this.observers_.size||this.keepAlive_){if(dt(this),Ye(this)){var e=ct.trackingContext;this.keepAlive_&&!e&&(ct.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Ve.STALE_)return;e.lowestObserverState_=Ve.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ve.POSSIBLY_STALE_?t.dependenciesState_=Ve.STALE_:t.dependenciesState_===Ve.UP_TO_DATE_&&(e.lowestObserverState_=Ve.UP_TO_DATE_)}))}(this),ct.trackingContext=e}}else Ye(this)&&(this.warnAboutUntrackedRead_(),ht(),this.value_=this.computeValue_(!1),pt());var t=this.value_;if($e(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ve.NOT_TRACKING_,n=this.computeValue_(!0),r=t||$e(e)||$e(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Fe(!1);if(e)t=Xe(this,this.derivation,this.scope_);else if(!0===ct.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new We(e)}return Ue(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Je(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,o=void 0;return Rt((function(){var i=n.get();if(!r||t){var s=et();e({observableKind:"computed",debugObjectName:n.name_,type:ln,object:n,newValue:i,oldValue:o}),tt(s)}r=!1,o=i}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return P(this.get())},t[Ge]=function(){return this.valueOf()},e}(),ze=E("ComputedValue",Ke);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ve||(Ve={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(qe||(qe={}));var We=function(e){this.cause=void 0,this.cause=e};function $e(e){return e instanceof We}function Ye(e){switch(e.dependenciesState_){case Ve.UP_TO_DATE_:return!1;case Ve.NOT_TRACKING_:case Ve.STALE_:return!0;case Ve.POSSIBLY_STALE_:for(var t=nt(!0),n=et(),r=e.observing_,o=r.length,i=0;i<o;i++){var s=r[i];if(ze(s)){if(ct.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return tt(n),rt(t),!0}if(e.dependenciesState_===Ve.STALE_)return tt(n),rt(t),!0}}return ot(e),tt(n),rt(t),!1}}function Ze(e){}function Xe(e,t,n){var r=nt(!0);ot(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ct.runId;var o,i=ct.trackingDerivation;if(ct.trackingDerivation=e,ct.inBatch++,!0===ct.disableErrorBoundaries)o=t.call(n);else try{o=t.call(n)}catch(e){o=new We(e)}return ct.inBatch--,ct.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ve.UP_TO_DATE_,o=0,i=e.unboundDepsCount_,s=0;s<i;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,o!==s&&(n[o]=a),o++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=o,e.newObserving_=null,i=t.length;for(;i--;){var c=t[i];0===c.diffValue_&&lt(c,e),c.diffValue_=0}for(;o--;){var u=n[o];1===u.diffValue_&&(u.diffValue_=0,ut(u,e))}r!==Ve.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),rt(r),o}function Je(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)lt(t[n],e);e.dependenciesState_=Ve.NOT_TRACKING_}function Qe(e){var t=et();try{return e()}finally{tt(t)}}function et(){var e=ct.trackingDerivation;return ct.trackingDerivation=null,e}function tt(e){ct.trackingDerivation=e}function nt(e){var t=ct.allowStateReads;return ct.allowStateReads=e,t}function rt(e){ct.allowStateReads=e}function ot(e){if(e.dependenciesState_!==Ve.UP_TO_DATE_){e.dependenciesState_=Ve.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ve.UP_TO_DATE_}}var it=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},st=!0,at=!1,ct=function(){var e=i();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(st=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new it).version&&(st=!1),st?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new it):(setTimeout((function(){at||r(35)}),1),new it)}();function ut(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function lt(e,t){e.observers_.delete(t),0===e.observers_.size&&ft(e)}function ft(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,ct.pendingUnobservations.push(e))}function ht(){0===ct.inBatch&&(ct.batchId=ct.batchId<Number.MAX_SAFE_INTEGER?ct.batchId+1:Number.MIN_SAFE_INTEGER),ct.inBatch++}function pt(){if(0==--ct.inBatch){_t();for(var e=ct.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Ke&&n.suspend_())}ct.pendingUnobservations=[]}}function dt(e){var t=ct.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&ct.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&ct.inBatch>0&&ft(e),!1)}function vt(e){e.lowestObserverState_!==Ve.STALE_&&(e.lowestObserverState_=Ve.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ve.STALE_})))}var yt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ve.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qe.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ct.pendingReactions.push(this),_t())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ht(),this.isScheduled_=!1;var e=ct.trackingContext;if(ct.trackingContext=this,Ye(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}ct.trackingContext=e,pt()}},t.track=function(e){if(!this.isDisposed_){ht();0,this.isRunning_=!0;var t=ct.trackingContext;ct.trackingContext=this;var n=Xe(this,e,void 0);ct.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Je(this),$e(n)&&this.reportExceptionInDerivation_(n.cause),pt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(ct.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";ct.suppressReactionErrors||console.error(n,e),ct.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ht(),Je(this),pt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[V]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},e}();var gt=100,mt=function(e){return e()};function _t(){ct.inBatch>0||ct.isRunningReactions||mt(bt)}function bt(){ct.isRunningReactions=!0;for(var e=ct.pendingReactions,t=0;e.length>0;){++t===gt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction_()}ct.isRunningReactions=!1}var wt=E("Reaction",yt);var xt="action",Ot="autoAction",Et="<unnamed action>",St=X(xt),kt=X("action.bound",{bound:!0}),Ct=X(Ot,{autoAction:!0}),It=X("autoAction.bound",{autoAction:!0,bound:!0});function Pt(e){return function(t,n){return g(t)?Le(t.name||Et,t,e):g(n)?Le(t,n,e):m(n)?H(t,n,e?Ct:St):m(t)?G(X(e?Ot:xt,{name:t,autoAction:e})):void 0}}var Tt=Pt(!1);Object.assign(Tt,St);var At=Pt(!0);function jt(e){return g(e)&&!0===e.isMobxAction}function Rt(e,t){var n,r,o,i,s;void 0===t&&(t=f);var a,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new yt(c,(function(){this.track(h)}),t.onError,t.requiresObservable);else{var u=Bt(t),l=!1;a=new yt(c,(function(){l||(l=!0,u((function(){l=!1,a.isDisposed_||a.track(h)})))}),t.onError,t.requiresObservable)}function h(){e(a)}return null!=(o=t)&&null!=(i=o.signal)&&i.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(At,Ct),Tt.bound=G(kt),At.bound=G(It);var Mt=function(e){return e()};function Bt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Mt}var Dt="onBO",Lt="onBUO";function Nt(e,t,n){return Ft(Lt,e,t,n)}function Ft(e,t,n,r){var o="function"==typeof r?Qn(t,n):Qn(t),i=g(r)?r:n,s=e+"L";return o[s]?o[s].add(i):o[s]=new Set([i]),function(){var e=o[s];e&&(e.delete(i),0===e.size&&delete o[s])}}var Ut="always";function Gt(e,t,n,r){var o=A(t);return nr((function(){var t=Dn(e,r)[V];I(o).forEach((function(e){t.extend_(e,o[e],!n||(!(e in n)||n[e]))}))})),e}var Ht=0;function Vt(){this.message="FLOW_CANCELLED"}Vt.prototype=Object.create(Error.prototype);var qt=te("flow"),Kt=te("flow.bound",{bound:!0}),zt=Object.assign((function(e,t){if(m(t))return H(e,t,qt);var n=e,r=n.name||"<unnamed flow>",o=function(){var e,t=arguments,o=++Ht,i=Tt(r+" - runid: "+o+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function c(e){var t;s=void 0;try{t=Tt(r+" - runid: "+o+" - yield "+a++,i.next).call(i,e)}catch(e){return n(e)}l(t)}function u(e){var t;s=void 0;try{t=Tt(r+" - runid: "+o+" - yield "+a++,i.throw).call(i,e)}catch(e){return n(e)}l(t)}function l(e){if(!g(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return a.cancel=Tt(r+" - runid: "+o+" - cancel",(function(){try{s&&Wt(s);var t=i.return(void 0),n=Promise.resolve(t.value);n.then(y,y),Wt(n),e(new Vt)}catch(t){e(t)}})),a};return o.isMobXFlow=!0,o}),qt);function Wt(e){g(e.cancel)&&e.cancel()}function $t(e){return!0===(null==e?void 0:e.isMobXFlow)}function Yt(e,t){return!!e&&(void 0!==t?!!Fn(e)&&e[V].values_.has(t):Fn(e)||!!e[V]||K(e)||wt(e)||ze(e))}function Zt(e){return Yt(e)}function Xt(e,t,n,r){return g(n)?function(e,t,n,r){return er(e,t).observe_(n,r)}(e,t,n,r):function(e,t,n){return er(e).observe_(t,n)}(e,t,n)}function Jt(e,t){void 0===t&&(t=void 0),ht();try{return e.apply(t)}finally{pt()}}function Qt(e){return e[V]}zt.bound=G(Kt);var en={has:function(e,t){return Qt(e).has_(t)},get:function(e,t){return Qt(e).get_(t)},set:function(e,t,n){var r;return!!m(t)&&(null==(r=Qt(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!m(t)&&(null==(n=Qt(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Qt(e).defineProperty_(t,n))||r},ownKeys:function(e){return Qt(e).ownKeys_()},preventExtensions:function(e){r(13)}};function tn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function nn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function rn(e,t){var n=et();try{for(var o=[].concat(e.interceptors_||[]),i=0,s=o.length;i<s&&((t=o[i](t))&&!t.type&&r(14),t);i++);return t}finally{tt(n)}}function on(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function sn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function an(e,t){var n=et(),r=e.changeListeners_;if(r){for(var o=0,i=(r=r.slice()).length;o<i;o++)r[o](t);tt(n)}}var cn=Symbol("mobx-keys");var un="splice",ln="update",fn={get:function(e,t){var n=e[V];return t===V?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?T(dn,t)?dn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[V];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){r(15)}},hn=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new q(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return nn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),sn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&r("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),o=0;o<e-t;o++)n[o]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Xn(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var o=this.values_.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:null==t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=l),tn(this)){var i=rn(this,{object:this.proxy_,type:un,index:e,removedCount:t,added:n});if(!i)return l;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(o,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var o=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<i.length;a++)this.values_[e+n.length+a]=i[a];return o},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,o=on(this),i=o||r?{observableKind:"array",object:this.proxy_,type:ln,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),o&&an(this,i)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,o=on(this),i=o||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:un,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),o&&an(this,i)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&r(17,e,n.length),e<n.length){this.atom_;var o=n[e];if(tn(this)){var i=rn(this,{type:ln,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,o))!==o&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,o))}else{for(var s=new Array(e+1-n.length),a=0;a<s.length-1;a++)s[a]=void 0;s[s.length-1]=t,this.spliceWithArray_(n.length,0,s)}},e}();function pn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),d(),nr((function(){var o=new hn(n,t,r,!1);O(o.values_,V,o);var i=new Proxy(o.values_,fn);return o.proxy_=i,e&&e.length&&o.spliceWithArray_(0,0,e),i}))}var dn={clear:function(){return this.splice(0)},replace:function(e){var t=this[V];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=this[V];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[V].spliceWithArray_(e,t,n)},push:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[V].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return ct.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ct.trackingDerivation&&r(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[V],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function vn(e,t){"function"==typeof Array.prototype[e]&&(dn[e]=t(e))}function yn(e){return function(){var t=this[V];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function gn(e){return function(t,n){var r=this,o=this[V];return o.atom_.reportObserved(),o.dehanceValues_(o.values_)[e]((function(e,o){return t.call(n,e,o,r)}))}}function mn(e){return function(){var t=this,n=this[V];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),o=arguments[0];return arguments[0]=function(e,n,r){return o(e,n,r,t)},r[e].apply(r,arguments)}}vn("concat",yn),vn("flat",yn),vn("includes",yn),vn("indexOf",yn),vn("join",yn),vn("lastIndexOf",yn),vn("slice",yn),vn("toString",yn),vn("toLocaleString",yn),vn("every",gn),vn("filter",gn),vn("find",gn),vn("findIndex",gn),vn("flatMap",gn),vn("forEach",gn),vn("map",gn),vn("some",gn),vn("reduce",mn),vn("reduceRight",mn);var _n,bn,wn=E("ObservableArrayAdministration",hn);function xn(e){return _(e)&&wn(e[V])}var On={},En="add",Sn="delete";_n=Symbol.iterator,bn=Symbol.toStringTag;var kn,Cn,In=function(){function e(e,t,n){var o=this;void 0===t&&(t=$),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[V]=On,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,g(Map)||r(18),nr((function(){o.keysAtom_=z("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,e&&o.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!ct.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new He(this.has_(e),Y,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Nt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(tn(this)){var r=rn(this,{type:n?ln:En,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,tn(this))&&!rn(this,{type:Sn,object:this,name:e}))return!1;if(this.has_(e)){var n=on(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Sn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Jt((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&an(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==ct.UNCHANGED){var r=on(this),o=r?{observableKind:"map",debugObjectName:this.name_,type:ln,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&an(this,o)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Jt((function(){var r,o=new He(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,o),t=o.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=on(this),o=r?{observableKind:"map",debugObjectName:this.name_,type:En,object:this,name:e,newValue:t}:null;r&&an(this,o)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return ar({next:function(){var n=t.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:e.get(o)}}})},t.entries=function(){var e=this,t=this.keys();return ar({next:function(){var n=t.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:[o,e.get(o)]}}})},t[_n]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=F(this);!(n=r()).done;){var o=n.value,i=o[0],s=o[1];e.call(t,s,i,this)}},t.merge=function(e){var t=this;return Pn(e)&&(e=new Map(e)),Jt((function(){b(e)?function(e){var t=Object.keys(e);if(!C)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return u.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):S(e)?(e.constructor!==Map&&r(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&r(20,e)})),this},t.clear=function(){var e=this;Jt((function(){Qe((function(){for(var t,n=F(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return Jt((function(){for(var n,o=function(e){if(S(e)||Pn(e))return e;if(Array.isArray(e))return new Map(e);if(b(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return r(21,e)}(e),i=new Map,s=!1,a=F(t.data_.keys());!(n=a()).done;){var c=n.value;if(!o.has(c))if(t.delete(c))s=!0;else{var u=t.data_.get(c);i.set(c,u)}}for(var l,f=F(o.entries());!(l=f()).done;){var h=l.value,p=h[0],d=h[1],v=t.data_.has(p);if(t.set(p,d),t.data_.has(p)){var y=t.data_.get(p);i.set(p,y),v||(s=!0)}}if(!s)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),m=i.keys(),_=g.next(),w=m.next();!_.done;){if(_.value!==w.value){t.keysAtom_.reportChanged();break}_=g.next(),w=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return sn(this,e)},t.intercept_=function(e){return nn(this,e)},R(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:bn,get:function(){return"Map"}}]),e}(),Pn=E("ObservableMap",In);var Tn={};kn=Symbol.iterator,Cn=Symbol.toStringTag;var An=function(){function e(e,t,n){var o=this;void 0===t&&(t=$),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[V]=Tn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,g(Set)||r(22),this.enhancer_=function(e,r){return t(e,r,n)},nr((function(){o.atom_=z(o.name_),e&&o.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Jt((function(){Qe((function(){for(var t,n=F(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=F(this);!(n=r()).done;){var o=n.value;e.call(t,o,o,this)}},t.add=function(e){var t=this;if((this.atom_,tn(this))&&!rn(this,{type:En,object:this,newValue:e}))return this;if(!this.has(e)){Jt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,r=on(this),o=r?{observableKind:"set",debugObjectName:this.name_,type:En,object:this,newValue:e}:null;n,r&&an(this,o)}return this},t.delete=function(e){var t=this;if(tn(this)&&!rn(this,{type:Sn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=on(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Sn,object:this,oldValue:e}:null;return Jt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&an(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return ar({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return ar({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return jn(e)&&(e=new Set(e)),Jt((function(){Array.isArray(e)||k(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&r("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return sn(this,e)},t.intercept_=function(e){return nn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[kn]=function(){return this.values()},R(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Cn,get:function(){return"Set"}}]),e}(),jn=E("ObservableSet",An),Rn=Object.create(null),Mn="remove",Bn=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=he),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new q("ObservableObject.keys"),this.isPlainObject_=b(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Ke)return n.set(t),!0;if(tn(this)){var r=rn(this,{type:ln,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==ct.UNCHANGED){var o=on(this),i=o?{type:ln,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),o&&an(this,i)}return!0},t.get_=function(e){return ct.trackingDerivation&&!T(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),T(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!ct.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new He(e in this.target_,Y,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Gn(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[U])&&n[e])return;r(1,t.annotationType_,this.name_+"."+e.toString())}for(var o=this.target_;o&&o!==u;){var i=a(o,e);if(i){var s=t.make_(this,e,i,o);if(0===s)return;if(1===s)break}o=Object.getPrototypeOf(o)}Un(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);Gn(this,n,e);var o=n.extend_(this,e,t,r);return o&&Un(this,n,e),o},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{ht();var r=this.delete_(e);if(!r)return r;if(tn(this)){var o=rn(this,{object:this.proxy_||this.target_,name:e,type:En,newValue:t.value});if(!o)return null;var i=o.newValue;t.value!==i&&(t=M({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else c(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{pt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{ht();var o=this.delete_(e);if(!o)return o;if(tn(this)){var i=rn(this,{object:this.proxy_||this.target_,name:e,type:En,newValue:t});if(!i)return null;t=i.newValue}var s=Nn(e),a={configurable:!ct.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else c(this.target_,e,a);var u=new He(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{pt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{ht();var r=this.delete_(e);if(!r)return r;if(tn(this))if(!rn(this,{object:this.proxy_||this.target_,name:e,type:En,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var o=Nn(e),i={configurable:!ct.safeDescriptors||this.isPlainObject_,enumerable:!1,get:o.get,set:o.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else c(this.target_,e,i);this.values_.set(e,new Ke(t)),this.notifyPropertyAddition_(e,void 0)}finally{pt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!T(this.target_,e))return!0;if(tn(this)&&!rn(this,{object:this.proxy_||this.target_,name:e,type:Mn}))return null;try{var n,r;ht();var o,i=on(this),s=this.values_.get(e),c=void 0;if(!s&&i)c=null==(o=a(this.target_,e))?void 0:o.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof He&&(c=s.value_),vt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),i){var u={type:Mn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:e};0,i&&an(this,u)}}finally{pt()}return!0},t.observe_=function(e,t){return sn(this,e)},t.intercept_=function(e){return nn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,o=on(this);if(o){var i=o?{type:En,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,o&&an(this,i)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),I(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Dn(e,t){var n;if(T(e,V))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",o=new Bn(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:pe(e):void 0}(t));return x(e,V,o),e}var Ln=E("ObservableObjectAdministration",Bn);function Nn(e){return Rn[e]||(Rn[e]={get:function(){return this[V].getObservablePropValue_(e)},set:function(t){return this[V].setObservablePropValue_(e,t)}})}function Fn(e){return!!_(e)&&Ln(e[V])}function Un(e,t,n){var r;null==(r=e.target_[U])||delete r[n]}function Gn(e,t,n){}var Hn,Vn,qn=Yn(0),Kn=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),zn=0,Wn=function(){};Hn=Wn,Vn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Hn.prototype,Vn):void 0!==Hn.prototype.__proto__?Hn.prototype.__proto__=Vn:Hn.prototype=Vn;var $n=function(e,t,n){function r(t,n,r,o){var i;return void 0===r&&(r="ObservableArray"),void 0===o&&(o=!1),i=e.call(this)||this,nr((function(){var e=new hn(r,n,o,!0);e.proxy_=L(i),O(L(i),V,e),t&&t.length&&i.spliceWithArray(0,0,t),Kn&&Object.defineProperty(L(i),"0",qn)})),i}B(r,e);var o=r.prototype;return o.concat=function(){this[V].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return xn(e)?e.slice():e})))},o[n]=function(){var e=this,t=0;return ar({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},R(r,[{key:"length",get:function(){return this[V].getArrayLength_()},set:function(e){this[V].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Wn,Symbol.toStringTag,Symbol.iterator);function Yn(e){return{enumerable:!1,configurable:!0,get:function(){return this[V].get_(e)},set:function(t){this[V].set_(e,t)}}}function Zn(e){c($n.prototype,""+e,Yn(e))}function Xn(e){if(e>zn){for(var t=zn;t<e+100;t++)Zn(t);zn=e}}function Jn(e,t,n){return new $n(e,t,n)}function Qn(e,t){if("object"==typeof e&&null!==e){if(xn(e))return void 0!==t&&r(23),e[V].atom_;if(jn(e))return e.atom_;if(Pn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||r(25,t,tr(e)),n}if(Fn(e)){if(!t)return r(26);var o=e[V].values_.get(t);return o||r(27,t,tr(e)),o}if(K(e)||ze(e)||wt(e))return e}else if(g(e)&&wt(e[V]))return e[V];r(28)}function er(e,t){return e||r(29),void 0!==t?er(Qn(e,t)):K(e)||ze(e)||wt(e)||Pn(e)||jn(e)?e:e[V]?e[V]:void r(24,e)}function tr(e,t){var n;if(void 0!==t)n=Qn(e,t);else{if(jt(e))return e.name;n=Fn(e)||Pn(e)||jn(e)?er(e):Qn(e)}return n.name_}function nr(e){var t=et(),n=Fe(!0);ht();try{return e()}finally{pt(),Ue(n),tt(t)}}Object.entries(dn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&x($n.prototype,t,n)})),Xn(1e3);var rr=u.toString;function or(e,t,n){return void 0===n&&(n=-1),ir(e,t,n)}function ir(e,t,n,r,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var s=rr.call(e);if(s!==rr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=sr(e),t=sr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(g(c)&&c instanceof c&&g(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),o=o||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return o[l]===t;if(r.push(e),o.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!ir(e[l],t[l],n-1,r,o))return!1}else{var f,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!T(t,f=h[l])||!ir(e[f],t[f],n-1,r,o))return!1}return r.pop(),o.pop(),!0}function sr(e){return xn(e)?e.slice():S(e)||Pn(e)||k(e)||jn(e)?Array.from(e.entries()):e}function ar(e){return e[Symbol.iterator]=cr,e}function cr(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===i()[e]&&r("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:tr},$mobx:V});var ur=function(e){return e.APP_WILL_MOUNT="appWillMount",e.CREATE_DIALOG_ING="createDialogIng",e.CREATE_DIALOG_SUCCESS="createDialogSuccess",e.APP_DID_MOUNT="appDidMount",e.APP_CONTEXT_CHANGE="appContextChange",e.CHANNEL_WILL_MOUNT="channelWillMount",e.CHANNEL_DID_MOUNT="channelDidMount",e.MESSAGE_CHANGE="messageChange",e.DIALOG_CHANGE="dialogChange",e.MESSAGES_CHANGE="messagesChange",e.APP_DESTROY="appDestroy",e.APP_ON_ERROR="appError",e}({});function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function fr(){fr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==lr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(lr(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function hr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dr(r.key),r)}}function dr(e){var t=function(e,t){if("object"!==lr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lr(t)?t:String(t)}var vr=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="enventMap",r=new Map,(n=dr(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r,o,i;return t=e,n=[{key:"subscribe",value:function(e,t){var n=this.enventMap.get(e);n?(n.push(t),this.enventMap.set(e,n)):this.enventMap.set(e,[t])}},{key:"unsubscribe",value:function(e){this.enventMap.delete(e)}},{key:"publish",value:(o=fr().mark((function e(t){var n,r,o,i,s,a=this,c=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=c[o];if(i=this.enventMap.get(t),e.prev=2,!i){e.next=7;break}return s=null==i?void 0:i.map((function(e){return e.call.apply(e,[a].concat(r))})),e.next=7,Promise.all(s);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,9]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function s(e){hr(i,n,r,s,a,"next",e)}function a(e){hr(i,n,r,s,a,"throw",e)}s(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"destroy",value:function(){this.enventMap.clear()}}],n&&pr(t.prototype,n),r&&pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xr(r.key),r)}}function mr(e,t){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mr(e,t)}function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wr(e);if(t){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return br(e)}(this,n)}}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}function xr(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}const Or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(i,e);var t,n,r,o=_r(i);function i(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e=o.call.apply(o,[this].concat(a)),t=br(e),r=void 0,(n=xr(n="instance"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=i,n=[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.publish.apply(this,[e].concat(n))}},{key:"emitMessageChange",value:function(e){return this.publish(ur.MESSAGE_CHANGE,e)}},{key:"emitMessagesChange",value:function(e){return this.publish(ur.MESSAGES_CHANGE,e)}},{key:"emitDialogChange",value:function(e){return this.publish(ur.DIALOG_CHANGE,e)}},{key:"emitInitSuccsess",value:function(e,t){return this.publish(ur.CHANNEL_DID_MOUNT,{instance:e,dialog:t})}}],n&&gr(t.prototype,n),r&&gr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(vr);var Er="cmd",Sr="render",kr="exec";function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Ir(){Ir=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Cr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Cr(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mr(r.key),r)}}function Rr(e,t,n){return(t=Mr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e){var t=function(e,t){if("object"!==Cr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cr(t)?t:String(t)}const Br=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rr(this,"appContext",void 0),Rr(this,"cache",[]),t.cmd=this,this.appContext=t}var t,n,r,o,i;return t=e,n=[{key:"send",value:(o=Ir().mark((function e(){var t,n,r,o=arguments;return Ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},this.cache.push(Tr({timeStmp:Date.now()},t)),e.prev=2,e.t0=t.code,e.next=e.t0===kr?6:e.t0===Sr?10:12;break;case 6:if(null==t||!t.data||"function"!=typeof t.data){e.next=9;break}return e.next=9,t.data(this.appContext,t);case 9:case 12:return e.abrupt("break",13);case 10:return t.data&&(null===(n=this.appContext)||void 0===n||null===(n=n.$refs)||void 0===n?void 0:n.$ghost)&&(null===(r=this.appContext)||void 0===r||null===(r=r.$refs)||void 0===r||null===(r=r.$ghost)||void 0===r||r.current.render(t.data)),e.abrupt("break",13);case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(2),e.t1;case 18:case"end":return e.stop()}}),e,this,[[2,15]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function s(e){Ar(i,n,r,s,a,"next",e)}function a(e){Ar(i,n,r,s,a,"throw",e)}s(void 0)}))},function(){return i.apply(this,arguments)})}],n&&jr(t.prototype,n),r&&jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Dr={array:function(e){return Array.isArray(e)},object:function(e){return"[object Object]"===Object.prototype.toString.call(e)},map:function(e){return"[object Map]"===Object.prototype.toString.call(e)},func:function(e){return"[object Function]"===Object.prototype.toString.call(e)},file:function(e){return"[object File]"===Object.prototype.toString.call(e)},fileList:function(e){return"[object FileList]"===Object.prototype.toString.call(e)},empty:function(e){return void 0===e||"[object Null]"===Object.prototype.toString.call(e)},emptyObject:function(e){return 0===Object.keys(e).length}};function Lr(e){var t=document.createElement("link"),n=e.url,r="function"==typeof e.callback?e.callback:function(){},o=e.id,i="onload"in t,s=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536;function a(e,t,n){var r,o,i=null===(r=e)||void 0===r?void 0:r.sheet;if((n+=1)>3e5)return o=!0,e=null,void t();if(s)i&&(o=!0);else if(i)try{i.cssRules&&(o=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(o=!0)}setTimeout((function(){o?t():a(e,t,n)}),20)}function c(){t.onload=t.onerror=t.onreadystatechange=null,t=null,r()}t.rel="stylesheet",t.type="text/css",t.href=n,void 0!==o&&(t.id=o),document.getElementsByTagName("head")[0].appendChild(t),!s&&i?i?(t.onload=c,t.onerror=function(){c()}):t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&c()}:setTimeout((function(){a(t,r,0)}),1)}function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Fr(){Fr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Nr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Nr(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ur(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Gr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Ur(i,r,o,s,a,"next",e)}function a(e){Ur(i,r,o,s,a,"throw",e)}s(void 0)}))}}new Map;var Hr=2,Vr=new Map,qr=function(){var e=Gr(Fr().mark((function e(t){var n;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vr.get(t)){e.next=5;break}n=new Promise((function(e,n){Lr({url:t,id:t,callback:function(){e(t)}})})),e.next=8;break;case 5:return e.next=7,n;case 7:n=e.sent;case 8:return Vr.set(t,n),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Kr(e,t){return new Promise((function(n,r){var o=[t].join("_");if(window[o])return n(window[o]);var i=document.createElement("script");i.src=e,i.crossOrigin="anonymous",i.onload=function(){if(window[o])return n(window[o]);r("mount js error: ".concat(e," load error"))},i.onerror=function(e){r(e)},document.body.appendChild(i)}))}function zr(e){return Wr.apply(this,arguments)}function Wr(){return(Wr=Gr(Fr().mark((function e(t){var n,r,o,i,s,a;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.loadTimes,r=void 0===n?0:n,o=t.url,(i=t.moduleName)||o){e.next=3;break}throw new Error("moduleName".concat(i," or url").concat(o," is none"));case 3:if(e.prev=3,!(r<Hr)){e.next=16;break}return e.next=7,Kr(o,i);case 7:if(s=e.sent,!Dr.func(s)){e.next=10;break}return e.abrupt("return",s);case 10:if(null==s||!s.default){e.next=12;break}return e.abrupt("return",null!==(a=s.default)&&void 0!==a&&a.default?s.default.default:s.default);case 12:if(!Dr.object(s)){e.next=14;break}throw new Error("mount js error: ".concat(o," no return func"));case 14:e.next=17;break;case 16:throw new Error("mount js error: ".concat(o," load error"));case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),!(e.t0&&r<Hr)){e.next=27;break}return e.next=24,zr({moduleName:i,url:o,loadTimes:++r});case 24:return e.abrupt("return",e.sent);case 27:throw e.t0;case 28:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}function $r(){$r=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Qr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Qr(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Jr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Xr(i,r,o,s,a,"next",e)}function a(e){Xr(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,to(r.key),r)}}function to(e){var t=function(e,t){if("object"!==Qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qr(t)?t:String(t)}window._jarvis_loader_=Kr;var no=function(){return null},ro=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="libMap",r=new Map,(n=to(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r,o,i;return t=e,n=[{key:"assertRemoteComponent",value:function(e){var t=e.component;if("object"===Qr(t)&&"string"==typeof t.js)return!0;throw new Error("load lib type error: ".concat(JSON.stringify(e)))}},{key:"installRemoteComponent",value:(i=Jr($r().mark((function e(t,n){var r,o,i;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([zr({moduleName:n,url:t.js}),(s=null==t?void 0:t.css,s&&s.indexOf(".css")>-1&&qr(t.css))]);case 3:return r=e.sent,o=Yr(r,1),i=o[0],e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}var s}),e,null,[[0,9]])}))),function(e,t){return i.apply(this,arguments)})},{key:"registerComponent",value:function(e,t){this.libMap.set(e,t)}},{key:"clearComponent",value:function(e){this.libMap.delete&&this.libMap.delete(e)}},{key:"getComponent",value:(o=Jr($r().mark((function e(t){var n,r,o,i,s,a;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.version,r=t.code,o=[r],n&&o.push(n),i=o.join("_"),!(a=this.libMap.get(i))){e.next=15;break}if(s=a||no,!t.isRemote){e.next=13;break}return e.next=10,s;case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=s;case 14:return e.abrupt("return",e.t0);case 15:if(!t.isRemote){e.next=31;break}return e.prev=16,this.assertRemoteComponent(t),s=this.installRemoteComponent(t.component,i),this.registerComponent(i,s),e.next=22,s;case 22:return e.abrupt("return",e.sent);case 25:return e.prev=25,e.t1=e.catch(16),this.clearComponent(i),e.abrupt("return",no);case 29:e.next=33;break;case 31:return this.registerComponent(i,t.component),e.abrupt("return",t.component||no);case 33:case"end":return e.stop()}}),e,this,[[16,25]])}))),function(e){return o.apply(this,arguments)})}],n&&eo(t.prototype,n),r&&eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),oo=function(e){return e.zh="zh-CN",e.es="es",e}({});function io(e){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(e)}function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fo(r.key),r)}}function uo(e,t,n){return t&&co(e.prototype,t),n&&co(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lo(e,t,n){return(t=fo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fo(e){var t=function(e,t){if("object"!==io(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===io(t)?t:String(t)}!function(e){!0===e.isolateGlobalState&&function(){if((ct.pendingReactions.length||ct.inBatch||ct.isRunningReactions)&&r(36),at=!0,st){var e=i();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),ct=new it}}();var t,n,o=e.useProxies,s=e.enforceActions;if(void 0!==o&&(ct.useProxies=o===Ut||"never"!==o&&"undefined"!=typeof Proxy),"ifavailable"===o&&(ct.verifyProxies=!0),void 0!==s){var a=s===Ut?Ut:"observed"===s;ct.enforceActions=a,ct.allowStateChanges=!0!==a&&a!==Ut}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(ct[t]=!!e[t])})),ct.allowStateReads=!ct.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=mt,mt=function(e){return t((function(){return n(e)}))})}({enforceActions:"never"});var ho=document.documentElement.clientWidth,po=uo((function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lo(this,"$refs",{$app:null}),lo(this,"libraray",new ro),lo(this,"userInfo",{}),lo(this,"renderConfig",{}),lo(this,"watchOfflineForm",{}),lo(this,"appStatus",ur.APP_WILL_MOUNT),lo(this,"dialogInfo",{}),lo(this,"appLoading",!0),lo(this,"replyMessage",{}),lo(this,"watchAppDidMount",{}),lo(this,"utils",{}),lo(this,"uiConfig",{}),lo(this,"dialog",{}),lo(this,"messages",[]),lo(this,"ext",{}),lo(this,"query",{isPc:ho>=440}),lo(this,"themes",{}),lo(this,"eventBus",new vr),lo(this,"triggerEvent",void 0),lo(this,"lang",oo.zh),lo(this,"mountId",void 0),lo(this,"autoComplete",{}),lo(this,"cmd",new Br(this)),lo(this,"input",{setRenderStatus:function(e){var t;null===(t=i.$refs)||void 0===t||null===(t=t.$app)||void 0===t||null===(t=t.current)||void 0===t||t.setRender("appBottom",e)}}),t&&(this.query=ao(ao({},this.query),t)),n=this,r={$refs:Ce.ref,renderConfig:Ce,messages:Ce.ref,dialog:Ce.ref,userInfo:Ce.ref,themes:Ce,lang:Ce,watchAppDidMount:Ce,ext:Ce.deep,utils:Ce.ref,autoComplete:Ce,uiConfig:Ce,eventBus:Ce.ref,dialogInfo:Ce,appLoading:Ce,appStatus:Ce,replyMessage:Ce},o={autoBind:!0},b(n)?Gt(n,n,r,o):nr((function(){var e=Dn(n,o)[V];if(!n[cn]){var t=Object.getPrototypeOf(n),i=new Set([].concat(I(n),I(t)));i.delete("constructor"),i.delete(V),x(t,cn,i)}n[cn].forEach((function(t){return e.make_(t,!r||!(t in r)||r[t])}))}))}));const vo=po;function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function go(){go=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==yo(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(yo(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function mo(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function _o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){mo(i,r,o,s,a,"next",e)}function a(e){mo(i,r,o,s,a,"throw",e)}s(void 0)}))}}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wo(r.key),r)}}function wo(e){var t=function(e,t){if("object"!==yo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yo(t)?t:String(t)}var xo=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=[],(n=wo(n="middlewareList"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,n=[{key:"use",value:function(e){if("function"!=typeof e)throw new TypeError("middleware must be a function");this.middlewareList.push(e)}},{key:"useSome",value:function(e){var t=this;e.forEach((function(e){return t.use(e)}))}},{key:"compose",value:function(){var e=this;return function(){var t=_o(go().mark((function t(n){var r,o;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=0,o=function(){var t=_o(go().mark((function t(i){var s;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.middlewareList[i]){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,t.next=6,s(n,function(){var e=_o(go().mark((function e(){return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r++,e.prev=1,e.next=4,o(i+1);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}());case 6:t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(3),"第".concat(r,"个--").concat(e.middlewareList[r].name||"未知","中间件出错了,").concat(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),t.prev=2,t.next=5,o(0);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),t.t0;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()}}],n&&bo(t.prototype,n),r&&bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ko(r.key),r)}}function So(e,t,n){return(t=ko(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oo(t)?t:String(t)}var Co=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),So(this,"app",void 0),So(this,"ctx",void 0),So(this,"handlePlugin",(function(e){e.apply(r.app,r.ctx),r.app.processHandler(e)})),this.app=t,this.ctx=n}var t,n,r;return t=e,(n=[{key:"registerPlugins",value:function(e){e&&e.length&&e.forEach(this.handlePlugin)}}])&&Eo(t.prototype,n),r&&Eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Io=n(6486);function Po(e){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(e)}function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){Ro(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mo(r.key),r)}}function Ro(e,t,n){return(t=Mo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mo(e){var t=function(e,t){if("object"!==Po(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Po(t)?t:String(t)}var Bo=function(e){try{return JSON.stringify(e)}catch(t){return e.toString()}},Do=function(e){return e.InitSuccess="InitSuccess",e.ChannelWillMount="ChannelWillMount",e.ChannelDidMount="ChannelDidMount",e.ChanneInitSuccess="ChanneInitSuccess",e.DialogChange="DialogChange",e.MessagesChange="MessagesChange",e.AppWillMount="AppWillMount",e.AppDidMount="AppDidMount",e.AppDestory="AppDestory",e}({}),Lo=function(e){return e.InitError="InitError",e.AppCtxListenError="AppCtxListenError",e.ChannelInitError="ChannelInitError",e.ChannelWillMountError="ChannelWillMountError",e.ChannelDidMountError="ChannelDidMountError",e.ChannelSubEventError="ChannelSubEventError",e.MessagesChangeError="MessagesChangeError",e.DialogChangeError="DialogChangeError",e.AppMountError="AppMountError",e.AppDestoryError="AppDestoryError",e.MiddleWareError="MiddleWareError",e.MiddleWareRsError="MiddleWareRsError",e.GetComponentError="GetComponentError",e}({}),No="info",Fo=function(){function e(t){var n=this,r=t.logInstance,o=t.traceInstance,i=t.errorReport,s=t.nameSpace,a=void 0===s?"LinkchatCore":s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ro(this,"logInstance",void 0),Ro(this,"errorReport",void 0),Ro(this,"traceInstance",void 0),Ro(this,"debug",void 0),Ro(this,"nameSpace",void 0),Ro(this,"app",Math.random().toString(32).slice(2)),Ro(this,"error",(function(e){var t=e.title,r=e.info,o=e.extra;if(n.debug)return n.console({info:Ao(Ao({},r),{},{extra:o}),title:t});try{var i;null===(i=n.errorReport)||void 0===i||i.call(n,{type:n.nameSpace+t,info:Bo(r||"no info content"),extra:o})}catch(e){}})),Ro(this,"info",(function(e){var t=e.level,r=void 0===t?No:t,o=e.info,i=e.title,s=e.tag,a=e.extra;if(n.debug)return n.console({info:Ao(Ao({},o),{},{extra:a}),title:s||i});try{n.logInstance&&n.logInstance({type:n.nameSpace+i,level:r,info:Bo(o||"no info content"),extra:a})}catch(e){}})),Ro(this,"trace",(function(e,t,r){if(n.debug)return n.console({info:Ao({},r),title:e});try{n.traceInstance&&n.traceInstance({type:n.nameSpace+e,content:t||1,extra:Ao({},r)})}catch(e){}})),Ro(this,"assert",(function(e,t){(0,Io.isEqual)(e,t)||n.error({info:{a:e,b:t},title:"assert error"})})),this.logInstance=r,this.traceInstance=o,this.errorReport=i,this.nameSpace=a}var t,n,r;return t=e,n=[{key:"report",get:function(){return this.logInstance}},{key:"setConfig",value:function(e){var t=e||{},n=t.debug,r=void 0===n||n,o=t.logInstance,i=t.traceInstance,s=t.errorReport,a=t.nameSpace,c=void 0===a?"LinkchatCore":a;return window.__CHAT_APP_ID=this.app,this.debug=r,this.logInstance=o,this.traceInstance=i,this.errorReport=s,this.nameSpace=c,this}},{key:"console",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.info,n=e.title;console.group("%c%s %c%s","color: red;","[".concat(this.nameSpace,"]"),"color: violet",n),t&&console.info("%c%s %c%s","color: orange","object"===Po(t)?JSON.stringify(t):t,"color: cyan",(new Date).toLocaleString()),console.groupEnd()}))}],n&&jo(t.prototype,n),r&&jo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();new Fo({});function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){Wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vo(){Vo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Uo(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Uo(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function qo(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Ko(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){qo(i,r,o,s,a,"next",e)}function a(e){qo(i,r,o,s,a,"throw",e)}s(void 0)}))}}function zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$o(r.key),r)}}function Wo(e,t,n){return(t=$o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){var t=function(e,t){if("object"!==Uo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uo(t)?t:String(t)}var Yo=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wo(this,"appContext",void 0),Wo(this,"baseConfig",void 0),Wo(this,"sendExecuter",new xo),Wo(this,"receiveExecuter",new xo),Wo(this,"spectator",new vr),Wo(this,"appContextListener",function(){var e=Ko(Vo().mark((function e(t){var n;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.spectator.publish(ur.APP_CONTEXT_CHANGE,t);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),null===(n=t.logger)||void 0===n||n.error(Lo.AppCtxListenError,{error:e.t0}),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.appContext=n||new vo(t.query),Xt(this.appContext,(function(e){r.appContextListener(e.object)})),this.appContext.logger=t.logger,this.baseConfig=t,this.init()}var t,n,r,o,i,s,a,c;return t=e,n=[{key:"init",value:function(){var e=this.baseConfig,t=new Co(this,this.appContext);this.processHandler(e),t.registerPlugins(e.plugins)}},{key:"run",value:(c=Ko(Vo().mark((function e(){var t,n,r,o,i,s,a,c,u,l,f,h,p=this;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.baseConfig,e.next=3,this.spectator.publish(ur.APP_WILL_MOUNT,this.appContext).then((function(){var e;null===(e=p.appContext.logger)||void 0===e||e.info(ur.APP_WILL_MOUNT)})).catch((function(e){var t;throw null===(t=p.appContext.logger)||void 0===t||t.error(Lo.InitError,{error:e}),e}));case 3:return this.appContext.appLoading=!0,this.appContext.appStatus=ur.CREATE_DIALOG_ING,null===(t=n.createDialog)||void 0===t||t.call(n,this.appContext).then((function(e){if(p.spectator.publish(ur.CREATE_DIALOG_SUCCESS,p.appContext).then((function(){p.appContext.appLoading=!1})).catch((function(){p.appContext.appLoading=!1})),e)return p.appContext.appStatus=ur.APP_DID_MOUNT,p.spectator.publish(ur.APP_DID_MOUNT,p.appContext)})).catch((function(e){var t;throw p.appContext.appLoading=!1,null===(t=p.appContext.logger)||void 0===t||t.error(Lo.InitError,{error:e}),e})),e.prev=6,this.appContext.appStatus=ur.CHANNEL_WILL_MOUNT,e.next=10,this.spectator.publish(ur.CHANNEL_WILL_MOUNT,this.appContext);case 10:null===(r=this.appContext.logger)||void 0===r||r.info(Do.ChannelWillMount),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(6),null===(o=this.appContext.logger)||void 0===o||o.error(Lo.ChannelWillMountError,{error:e.t0}),e.t0;case 17:return e.prev=17,e.next=20,null===(i=n.makeChannel)||void 0===i?void 0:i.call(n,this.appContext);case 20:f=e.sent,this.appContext.channel=f,null===(s=this.appContext.logger)||void 0===s||s.info(Do.ChanneInitSuccess),null==f||null===(a=f.subscribe)||void 0===a||a.call(f,ur.MESSAGE_CHANGE,(function(e){var t;p.spectator.publish(ur.MESSAGE_CHANGE,p.appContext,e),e.type===Er&&(null===(t=p.appContext.cmd)||void 0===t||t.send(e.content))})),null==f||null===(c=f.subscribe)||void 0===c||c.call(f,ur.DIALOG_CHANGE,function(){var e=Ko(Vo().mark((function e(t){var n;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p.appContext.dialog=t,e.next=4,p.spectator.publish(ur.DIALOG_CHANGE,p.appContext,t);case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),null===(n=p.appContext.logger)||void 0===n||n.error(Lo.DialogChangeError,{error:e.t0}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),null==f||null===(u=f.subscribe)||void 0===u||u.call(f,ur.MESSAGES_CHANGE,Ko(Vo().mark((function e(){var t,n,r,o,i=arguments;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[],e.prev=1,n=t.filter((function(e){return e.type!==Er})),e.next=5,Promise.all(n.map((function(e){return p.messageCtxChannel(e)})));case 5:return r=e.sent,p.appContext.messages=r,e.next=9,p.spectator.publish(ur.MESSAGES_CHANGE,p.appContext,t);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(1),null===(o=p.appContext.logger)||void 0===o||o.error(Lo.MessagesChangeError,{error:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))),null==f||null===(l=f.subscribe)||void 0===l||l.call(f,ur.CHANNEL_DID_MOUNT,function(){var e=Ko(Vo().mark((function e(t){var n;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.spectator.publish(ur.CHANNEL_DID_MOUNT,p.appContext,t);case 3:p.appContext.appStatus=ur.CHANNEL_DID_MOUNT,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),null===(n=p.appContext.logger)||void 0===n||n.error(Lo.ChannelDidMountError,{error:e.t0}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),f&&f.init(this.appContext).then(Ko(Vo().mark((function e(){var t,n,r;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=p.appContext.logger)||void 0===t||t.info(Do.ChannelDidMount),e.prev=1,e.next=4,p.spectator.publish(ur.APP_DID_MOUNT,p.appContext);case 4:p.appContext.appStatus=ur.APP_DID_MOUNT,null===(n=p.appContext.logger)||void 0===n||n.info(Do.AppDidMount),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),null===(r=p.appContext.logger)||void 0===r||r.error(Lo.AppMountError,{error:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).catch((function(e){var t;throw null===(t=p.appContext.logger)||void 0===t||t.error(Lo.ChannelInitError,{error:e}),e})),e.next=34;break;case 30:throw e.prev=30,e.t1=e.catch(17),null===(h=this.appContext.logger)||void 0===h||h.error(Lo.ChannelSubEventError,{error:e.t1}),e.t1;case 34:case"end":return e.stop()}}),e,this,[[6,13],[17,30]])}))),function(){return c.apply(this,arguments)})},{key:"addSingleton",value:function(e,t){this.appContext[e]=t,t.appContext=this.appContext}},{key:"processHandler",value:function(e){this.registerRuntime(e.layout),this.registerComponent(e.components),this.registerLifecycle(e.lifecycle),this.registerJsbrige(e.jsBrige),this.registerUtils(e.utils),this.connectMiddleware(e.middleware),this.appContext.themes=Ho(Ho({},this.appContext.themes||{}),e.themes),this.appContext.lang=e.lang,this.appContext.autoComplete=this.appContext.autoComplete?Object.assign(this.appContext.autoComplete,e.autoComplete):e.autoComplete}},{key:"destroy",value:(a=Ko(Vo().mark((function e(t){var n,r;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.spectator.publish(ur.APP_DESTROY,this.appContext);case 3:if(e.t0=null===(n=this.appContext.channel)||void 0===n?void 0:n.destroy,!e.t0){e.next=7;break}return e.next=7,null===(r=this.appContext.channel)||void 0===r?void 0:r.destroy();case 7:e.next=12;break;case 9:throw e.prev=9,e.t1=e.catch(0),e.t1;case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return a.apply(this,arguments)})},{key:"messageCtxChannel",value:(s=Ko(Vo().mark((function e(t){var n,r;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.receiveExecuter.compose()({appContext:this.appContext,message:t});case 3:return n=e.sent,e.abrupt("return",n.message);case 7:throw e.prev=7,e.t0=e.catch(0),null===(r=this.appContext.logger)||void 0===r||r.error(Lo.MiddleWareError,{error:e.t0}),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return s.apply(this,arguments)})},{key:"initSocket",value:(i=Ko(Vo().mark((function e(t){var n,r=this;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=18;break}return e.prev=1,e.next=4,t(this.appContext);case 4:if(!(n=e.sent)){e.next=11;break}this.appContext.channel=n,this.appContext.sendMessage=function(){var e=Ko(Vo().mark((function e(t){var o,i,s,a,c=arguments;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.sendExecuter.compose()({appContext:r.appContext,message:t});case 3:if(null==(o=e.sent)||!o.message||!n.sendMessage){e.next=8;break}for(i=c.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=c[a];return e.next=8,n.sendMessage.apply(n,[o.appContext,o.message].concat(s));case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.appContext.sendFile=function(){var e=Ko(Vo().mark((function e(t){var o,i,s,a=arguments;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||null==n||!n.sendFile){e.next=5;break}for(o=a.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=a[s];return e.next=5,n.sendFile.apply(n,[r.appContext,t].concat(i));case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=12;break;case 11:throw new Error("未初始化找到通道的实例方法");case 12:return e.abrupt("return",n);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(e){return i.apply(this,arguments)})},{key:"connectMiddleware",value:(o=Ko(Vo().mark((function e(t){var n,r;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(null!=t&&t.send)try{this.sendExecuter.useSome(null==t?void 0:t.send)}catch(e){null===(n=this.appContext.logger)||void 0===n||n.error(Lo.MiddleWareRsError,{error:e})}if(null!=t&&t.receive)try{this.receiveExecuter.useSome(null==t?void 0:t.receive)}catch(e){null===(r=this.appContext.logger)||void 0===r||r.error(Lo.MiddleWareRsError,{error:e})}case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"registerLifecycle",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){t.spectator.subscribe(n,e[n])}))}},{key:"registerRuntime",value:function(e){this.appContext.renderConfig=Object.assign(this.appContext.renderConfig,e)}},{key:"registerUtils",value:function(e){this.appContext.utils=Object.assign(this.appContext.utils,e)}},{key:"registerJsbrige",value:function(e){this.appContext.jsBrige=Object.assign({openWindow:window.open},this.appContext.jsBrige,e)}},{key:"registerComponent",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){t.appContext.libraray.registerComponent(n,e[n])}))}}],n&&zo(t.prototype,n),r&&zo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Zo=Yo},8031:(e,t,n)=>{"use strict";var r,o;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{XY:()=>c});var a=function(e){return e.cn="cn",e.sg="sg",e}({}),c=(s(r={},a.cn,"https://ngcc-boe.bytedance.net"),s(r,a.sg,"https://ngcc-cloud-oversea-boe.bytedance.net"),s(o={},a.cn,{appId:1402,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",fpId:89,service:2,apiUrl:"https://imapi-boe.bytedance.net/",frontierUrl:"wss://frontier-boe.bytedance.net/ws/v2",uploadRegion:"boe",videoDomain:"https://staging-openapi-boe.byted.org",imageDomain:"https://staging-openapi-boe.byted.org"}),s(o,a.sg,{appId:4946,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",fpId:89,service:2,method:1,apiUrl:"http://imapi-boei18n.byted.org",frontierUrl:"wss://frontier-boei18n.bytedance.net/ws/v2",uploadRegion:"boei18n",videoDomain:"https://vas-boei18n.bytedance.net",imageDomain:"https://vas-boei18n.bytedance.net"}),o)},2914:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>o,V$:()=>r});var r=function(e){return e[e.MESSAGE_TYPE_TEXT=10001]="MESSAGE_TYPE_TEXT",e[e.MESSAGE_ONLY_USER_CAN_SEE=40006]="MESSAGE_ONLY_USER_CAN_SEE",e[e.MESSAGE_TYPE_IMAGE=10003]="MESSAGE_TYPE_IMAGE",e[e.MESSAGE_TYPE_VIDEO=10004]="MESSAGE_TYPE_VIDEO",e[e.MESSAGE_TYPE_FILE=10005]="MESSAGE_TYPE_FILE",e[e.WEN_WEN_ROBOT_TYPE=30001]="WEN_WEN_ROBOT_TYPE",e[e.MESSAGE_TYPE_WELCOME=40001]="MESSAGE_TYPE_WELCOME",e[e.MESSAGE_TYPE_END=40002]="MESSAGE_TYPE_END",e[e.MESSAGE_TYPE_TRANSFERING=40004]="MESSAGE_TYPE_TRANSFERING",e[e.MESSAGE_TYPE_TRANSFERED=40003]="MESSAGE_TYPE_TRANSFERED",e[e.CREATE_CONVERSATION_TYPE=40005]="CREATE_CONVERSATION_TYPE",e[e.SYSTEM_TIME_TYPE=40007]="SYSTEM_TIME_TYPE",e[e.VIRTUAL_AGENT_ID=40009]="VIRTUAL_AGENT_ID",e[e.QUESTION_CARD_TYPE=41001]="QUESTION_CARD_TYPE",e[e.ROBOT_KNOWDGE_CARD=41005]="ROBOT_KNOWDGE_CARD",e[e.ROBOT_INTERCEPT_CARD=41017]="ROBOT_INTERCEPT_CARD",e[e.ROBOT_KEEP_GUIDE=41003]="ROBOT_KEEP_GUIDE",e[e.ROBOT_TRANSFER_PEOPLE=41004]="ROBOT_TRANSFER_PEOPLE",e[e.KEEP_GUIDE_AFTER_CANCEL_DIALOG_QUEUE=41011]="KEEP_GUIDE_AFTER_CANCEL_DIALOG_QUEUE",e[e.ROBOT_TRANSFER_PEOPLE_BY_KEYWORD=41006]="ROBOT_TRANSFER_PEOPLE_BY_KEYWORD",e[e.ROBOT_THUMBS_TYPE=41002]="ROBOT_THUMBS_TYPE",e[e.ORDER_CARD_TYPE=42001]="ORDER_CARD_TYPE",e[e.JARVIS_TYPE=40008]="JARVIS_TYPE",e[e.CUSTOM_VIDEO_TYPE=43001]="CUSTOM_VIDEO_TYPE",e[e.SPECIAL_MESSAGE=44001]="SPECIAL_MESSAGE",e}({}),o=function(e){return e[e.DIALOG_CREATED=1]="DIALOG_CREATED",e[e.OFFLINE_FORM=2]="OFFLINE_FORM",e}({})},7533:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,y:()=>o});var r=function(e){return e.zh="zh",e.es="es",e}({}),o=function(e){return e.cn="cn",e.sg="sg",e}({})},2403:(e,t,n)=>{"use strict";n.d(t,{Mc:()=>r,My:()=>o,i4:()=>i,iy:()=>a,tP:()=>s});var r=function(e){return e[e.PENDING=0]="PENDING",e[e.ENDING=1]="ENDING",e[e.QUEUEING=2]="QUEUEING",e[e.PREDONE=3]="PREDONE",e[e.TRANSFERING=4]="TRANSFERING",e[e.HOLDON=5]="HOLDON",e}({}),o=function(e){return e[e.AGENT=0]="AGENT",e[e.TRANING=1]="TRANING",e[e.ROBOT=2]="ROBOT",e[e.OFFLINE=3]="OFFLINE",e}({}),i=function(e){return e.USER="0",e.AGENT="1",e.ESCROW_AGENT="2",e.ROBOT_AGENT="3",e.SYSTEM="4",e}({}),s=function(e){return e.AGENT_TO_SKILL="0",e.ROBOT_TO_AGENT="1",e.ROBOT_TO_OFFLINE="2",e.OFFLINE_TO_AGENT="3",e.TRANSFER_SPECIFY_AGENT="4",e.CLASSIFICATION_TRANSFER="5",e.ROBOT_TO_SKILL="6",e.KEY_WORD_TRANSFER="7",e.ROBOT_TO_NOTE="8",e}({}),a=function(e){return e[e.Online=0]="Online",e[e.Leave=1]="Leave",e}({})},4754:(e,t,n)=>{"use strict";n.d(t,{Mc:()=>Wr.Mc,My:()=>Wr.My,Vi:()=>Va,QS:()=>cs,Tv:()=>Fu.Tv,b3:()=>Fu.b3,oc:()=>as.oc,V$:()=>Gs.V$,yp:()=>Fa.y,i4:()=>Wr.i4,oI:()=>Nu,P0:()=>ls,iy:()=>Wr.iy,ZP:()=>Uu,me:()=>Fu.me,YU:()=>as.YU,yd:()=>as.yd,jH:()=>fs});var r={};n.r(r),n.d(r,{canDisplayRobotButton:()=>Ma,cancelDialogQueue:()=>ba,createDialog:()=>da,deleteDialog:()=>xa,douPlusOrderList:()=>Pa,faqTransfer:()=>Ta,getBaseConfig:()=>ha,getDialogQueue:()=>_a,getFastButtonConfig:()=>ja,getImConfig:()=>Ia,getJarvisComponentList:()=>Aa,getMessageInfo:()=>Sa,getTokenApi:()=>pa,keepGuide:()=>ya,modifyMessage:()=>Ea,postFeishuUnread:()=>Ra,postThumbAction:()=>va,sendJarvisCard:()=>ka,sendRobotMessage:()=>Oa,setClientHeartbeat:()=>wa,transferPeopleApi:()=>ga,transferPeopleDmcApi:()=>ma,triggerJarvisEvent:()=>Ca});var o=n(9364),i=n(7031),s=n(6207);const a=[];for(let e=0;e<256;++e)a[e]=(e+256).toString(16).substr(1);const c=new Array(16);function u(){const e=function(){for(let e=0,t=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),c[e]=t>>>((3&e)<<3)&255;return c}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){let t=0;const n=a;return[n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]]].join("")}(c)}var l,f;!function(e){e.CoreInstance="coreInstance",e.NetworkManager="netManager",e.ConversationManager="conversationManger",e.MessageManager="messageManager",e.ParticipantManager="participantManager",e.EventBus="eventBus",e.Monitor="montior",e.DbProxy="dbProxy",e.CoreApi="coreApi",e.InboxType="inboxType",e.ExtensionPlugin="extensionPlugin",e.ExtensionApi="extensionApi",e.BroadcastManager="broadcastManager",e.EmojiPlugin="emojiPlugin",e.MetricsPlugin="metricsPlugin",e.MetricsApi="metricsApi",e.MultimediaPlugin="multimediaPlugin",e.MultimediaApi="multimediaApi",e.RtcPlugin="rtcPlugin",e.RtcManager="rtcManager",e.RtcApi="rtcApi",e.RtcController="rtcController",e.SharkPlugin="sharkPlugin",e.StoragePlugin="storagePlugin",e.StorageApi="storageApi",e.StrangerPlugin="strangerPlugin",e.StrangerApi="strangerApi",e.SecurityPlugin="securityPlugin",e.AuthManager="AuthManager"}(l||(l={}));class h{constructor(){this.services=new Map,this.plugins=new Map}register(e,t,n){this.services.has(e)||this.services.set(e,new Map),this.services.get(e).set(t,n)}resolve(e,t){var n;return null===(n=this.services.get(e))||void 0===n?void 0:n.get(t)}get instanceCount(){return this.services.size}}h.Instance=new h;class p{constructor(){this.initResult=0,this.cachedToken="",this.id="",this.id=u()}get plugin(){var e;return null!==(e=h.Instance.plugins.get(this.id))&&void 0!==e?e:[]}set plugin(e){h.Instance.plugins.set(this.id,e)}register(e,t){let n=t;return"function"==typeof t&&(n=new t(this)),h.Instance.register(this.id,e,n),n}resolve(e){return h.Instance.resolve(this.id,e)}}class d{constructor(e){this.__internal_ctx=e}get ctx(){return this.getContext()}bindContext(e){this.__internal_ctx=e}getContext(){return this.__internal_ctx}resolve(e){return this.getContext().resolve(e)}register(e,t){return this.getContext().register(e,t)}}!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.none=4]="none"}(f||(f={}));const v={[f.info]:"#1890ff",[f.debug]:"#19be6b",[f.warn]:"#ff9900",[f.error]:"#ed4014"},y={debug:f.debug,info:f.info,warn:f.warn,error:f.error,none:f.none};class g{static get isBrowser(){return"undefined"!=typeof navigator}static log(e,t,...n){t&&t.resolve(l.Monitor).emitLog(y[e],n),(null==t?void 0:t.option.debug)&&"none"!==e&&this.level<=f[e]&&(t&&h.Instance.instanceCount>1?g.isBrowser?console[e](`%c [Byted IM SDK][${t.id}] [${e}]:`,`color: ${v[f[e]]}; font-weight: 700`,...n):console[e](`[Byted IM SDK][${t.id}] [${e}]:`,...n):g.isBrowser?console[e](`%c [Byted IM SDK] [${e}]:`,`color: ${v[f[e]]}; font-weight: 700`,...n):console[e](`[Byted IM SDK] [${e}]:`,...n))}static debug(...e){this.log("debug",void 0,...e)}static info(...e){this.log("info",void 0,...e)}static warn(...e){this.log("warn",void 0,...e)}static error(...e){this.log("error",void 0,...e)}static ctxDebug(e,...t){this.log("debug",e,...t)}static ctxInfo(e,...t){this.log("info",e,...t)}static ctxWarn(e,...t){this.log("warn",e,...t)}static ctxError(e,...t){this.log("error",e,...t)}}var m,_;g.level=f.debug,function(e){e.CreateConversation="create.conv",e.SendMessage="send.msg",e.ReceiveMessage="recieve.msg",e.WsConnect="ws.connect",e.NetworkRequest="network.request",e.FrontierOpen="frontier.open",e.FrontierClose="frontier.close",e.FrontierError="frontier.error",e.FrontierReceive="frontier.receive",e.FrontierLive="frontier.live",e.WebSocketConnectFirst="ws.connect.first",e.WebSocketConnectAfterClose="ws.connect.afterclose",e.WebSocketConnectNoHeartbeat="ws.connect.noheartbeat",e.BizApiInvoke="api.invoke",e.MessageAck="message.ack",e.SuccessSuffix=".success",e.ErrorSuffix=".error",e.BizSdkInit="init",e.BizRefreshToken="refresh.token",e.BizSdkError="error",e.GetMessagesByConversation="message.get.byconversation",e.GetMessagesByTicker="message.get.ticker"}(m||(m={}));class b extends d{static get avgDelta(){return 0===this.putDeltaTimes?0:this.totalDelta/this.putDeltaTimes}static putTimeDelta(e,t,n,r){if(void 0===n||void 0===r)return;const o=r-((t-e-(n-r))/2+e);b.putDeltaTimes++,b.totalDelta+=o}get avgDelta(){return b.avgDelta}static performanceNow(){return"object"==typeof performance&&"function"==typeof performance.now&&"number"==typeof performance.timeOrigin?performance.now()+performance.timeOrigin:Date.now()}invoke(e,...t){if(void 0===this.ctx.option.monitor)return!1;let n=this.ctx.option.monitor;Array.isArray(n)||(n=[n]),n.forEach((n=>{const r=n[e];return"function"==typeof r&&setTimeout((()=>{r.apply(n,t)}),0)}))}fillKv(e){const t=Object.assign(Object.assign(Object.assign({},e),this.ctx.option.monitorTagKv),{sdk_version:i.HF.sdkVersion,sdk_type:"im-web-sdk",build_number:i.HF.buildNumber,app_id:this.ctx.option.appId.toString(),user_id:this.ctx.option.userId});return this.ctx.option.versionCode&&(t.version_code=this.ctx.option.versionCode),t}emitMetrics(e,t={},n={}){const r=`imsdk.${e}`;this.invoke("emitMetrics",r,t,this.fillKv(n))}emitCounter(e,t=1,n={}){if(0===t)return;const r=`imsdk.${e}`;this.invoke("emitMetrics",r,{count:t},this.fillKv(n))}emitDuration(e,t,n={}){const r=b.performanceNow()-t,o=`imsdk.${e}`;return this.invoke("emitMetrics",o,{duration:r},this.fillKv(n)),r}emitLatencyDuration(e,t,n={}){const r=this.ctx.option.timeCalibration?this.avgDelta:0,o=b.performanceNow()+r-t;o<0||this.invoke("emitMetrics",e,{duration:o},this.fillKv(n))}emitError(e){this.invoke("emitError",e,this.fillKv({}))}emitNetwork(e,t,n={}){this.invoke("emitNetwork",e,t,this.fillKv(n))}emitEvent(e,t,n){this.invoke("emitEvent",e,t,n)}emitLog(e,...t){this.invoke("emitLog",e,t[0])}emitTracker(e,t){this.invoke("emitTracker",e,this.fillKv(t))}}b.putDeltaTimes=0,b.totalDelta=0;class w extends Error{constructor(e){var t,n,r,o;super(`${e&&e.logid?`[${e.logid}] `:""}${e&&e.msg?'message: "'+e.msg+'"':""}${e&&e.innerError?`, inner error: "${e.innerError}"`:""}`),this.ctx=e.ctx,Object.assign(this,e),Object.setPrototypeOf(this,w.prototype),(null===(t=this.innerError)||void 0===t?void 0:t.logid)&&(this.logid=this.innerError.logid);try{"string"==typeof(null===(n=this.innerError)||void 0===n?void 0:n.stack)&&(this.stack=this.innerError.stack+"\n"+(null===(r=this.stack)||void 0===r?void 0:r.split("\n").slice(2).join("\n")))}catch(e){g.ctxWarn(this.ctx,`concat trace fail=${e}, current stack=${this.stack}, inner stack=${null===(o=this.innerError)||void 0===o?void 0:o.stack}`)}this.ctx&&(e.ignoreEvent||this.resolve(l.EventBus).emit(i.c5.Error,e.sender,this),this.resolve(l.Monitor).emitError(this),this.resolve(l.Monitor).emitCounter(m.BizSdkError,1,{type:e.type?`${e.type}:${i.NI[e.type]}`:"unknown"}))}getContext(){return this.ctx}resolve(e){return this.ctx.resolve(e)}}class x{constructor(){this.constructors=new Map}setAdapter(e,t){this.constructors.set(e,t)}setDynamicAdapter(e){for(const t of Object.keys(e))this.setAdapter(t,e[t])}getConstructor(e,t){if(!this.constructors.has(t))throw new w({ctx:e,type:i.NI.NoAdapter,msg:`adapter not exist for ${t}`,sender:this});return this.constructors.get(t)}static setAdapter(e,t){return this.Instance.setAdapter(e,t)}static getConstructor(e,t){return this.Instance.getConstructor(e,t)}static setDynamicAdapter(e){return this.Instance.setDynamicAdapter(e)}}x.Instance=new x,function(e){e.NetApi="net",e.HttpClient="http",e.WebSocketClient="ws",e.MediaUploader="mediaUploader",e.RtcApi="rtc"}(_||(_={}));var O=n(1523),E=n.n(O),S=n(2243),k=n(4546);class C{constructor(e,t,n){this.index=e,this.subject=t,this.handler=n}unsubscribe(){this.subject.unsubscribe(this)}}class I extends d{constructor(){super(...arguments),this.subscriptions=new Map,this.idx=0}subscribe(e){const t=this.subscriptions.values();for(const n of t)if(e===n.handler)return g.ctxDebug(this.ctx,"ignore duplicate handler:",e),n;const n=new C(this.idx,this,e);return this.subscriptions.set(this.idx,n),this.idx++,n}nextEmpty(e){for(const t of this.subscriptions.values())if(t&&t.handler)try{t.handler({},e)}catch(e){g.ctxWarn(this.ctx,"error in event handler:",e)}}next(e,t){for(const n of this.subscriptions.values())if(n&&n.handler)try{n.handler(e,t)}catch(e){g.ctxWarn(this.ctx,"error in event handler:",e)}}unsubscribe(e){e&&this.subscriptions.delete(e.index)}unsubscribeAll(){this.subscriptions.clear()}}var P=n(5468),T=n(4457),A=n.n(T),j=function(e){var t=this;this.isSupport=function(){var e,n=t.config.storage;try{e=window[n],t.storage=e;var r="__storage_test__";return e.setItem(r,r),e.removeItem(r),!0}catch(e){return t.storage=void 0,!1}},this._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},this.quotaExceedHandler=function(e,n,r,o){if(console.warn("Quota exceeded!"),r&&!0===r.force){t.deleteAllExpired();try{r.force=!1,t.set(e,n,r)}catch(e){console.warn(e)}}},this._getExpiredDate=function(e){var n,r=new Date;if("number"==typeof e)n=0===e?t._defaultExpired:new Date(r.getTime()+1e3*e);else if("string"==typeof e)n=new Date(e);else{if(e&&!t._isValidDate(e))throw new Error("expire should be a normal date");n=t._defaultExpired}return n},this._warpStorageKey=function(e){return"security-sdk/".concat(e)},this.set=function(e,n,r){if(!t.storage)throw new Error("browser is not support storage");var o=t._warpStorageKey(e);if(void 0!==n){var i=n,s=t._cacheItemProcess(o,i,r);try{t.storage.setItem(o,JSON.stringify(s))}catch(e){t._checkQuotaExceeded(e)?t.quotaExceedHandler(o,i,r,e):console.error(e)}}else t.delete(o)},this._checkQuotaExceeded=function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"!==e.name&&"QuotaExceededError"!==e.name||(t=!0)}else-2147024882===e.number&&(t=!0);return t},this._cacheItemProcess=function(e,n,r){var o=(r||{}).expire||t.config.expire;return{key:e,data:n,createTime:(new Date).getTime(),expireTime:t._getExpiredDate(o).getTime()}},this._checkCacheItemIsEffective=function(e){var t=(new Date).getTime();return e.expireTime>t},this._checkCacheItem=function(e){return"object"==typeof e&&!!(e&&"data"in e&&"expireTime"in e&&"createTime"in e&&"key"in e)},this.get=function(e){var n,r,o=t._warpStorageKey(e);try{r=null===(n=t.storage)||void 0===n?void 0:n.getItem(o)}catch(e){return null}if(r&&(r=JSON.parse(r)),t._checkCacheItem(r)){if(t._checkCacheItemIsEffective(r))return null==r?void 0:r.data;t.delete(e)}return null},this.delete=function(e){var n,r=t._warpStorageKey(e);null===(n=t.storage)||void 0===n||n.removeItem(r)},this.deleteAllExpired=function(){for(var e,n,r,o=(null===(e=t.storage)||void 0===e?void 0:e.length)||0,i=[],s=0;s<o;s++){var a=(null===(n=t.storage)||void 0===n?void 0:n.key(s))||"",c=null;try{c=(c=null===(r=t.storage)||void 0===r?void 0:r.getItem(a))&&JSON.parse(c)}catch(e){}c&&void 0!==c.createTime&&(new Date).getTime()>=c.createTime&&i.push(a)}return i.forEach((function(e){t.delete(e)})),i},this.clear=function(){var e;null===(e=t.storage)||void 0===e||e.clear()},this.config=e||{storage:"localStorage"};var n=new Date("Fri, 31 Dec 2099 23:59:59 UTC");this._defaultExpired=n};const R=j;var M=n(7271),B=function(e){return M.utf8tob64(e)},D=function(e){return M.hextob64(e)},L=function(e){return M.b64toutf8(e)},N=function(e){var t=this;this.getKeys=function(){return{publicKey:t._public_key,privateKey:t._private_key}},this.sign=function(e){var n=M.KEYUTIL.getKey(t._private_key||""),r=new M.KJUR.crypto.Signature({alg:"ECDSA"===t.cryptType?"SHA256withECDSA":"SHA256withRSA"});return r.init(n),r.signString(e)},this.verify=function(e,t){var n=new M.KJUR.crypto.Signature({alg:"SHA256withECDSA"});return n.init(t),n.verify(e)},this.encrypt=function(e){var n=M.KEYUTIL.getKey(t._public_key||"");return M.KJUR.crypto.Cipher.encrypt(e,n,"RSAOAEP256")},this.decrypt=function(e){var n=M.KEYUTIL.getKey(t._private_key||"");return M.KJUR.crypto.Cipher.decrypt(e,n,"RSAOAEP256")},this.getCSR=function(){return new M.KJUR.asn1.csr.CertificationRequest({subject:{str:"/C=CN/CN=bd_ticket_guard"},sbjpubkey:t._public_key||"",sigalg:"ECDSA"===t.cryptType?"SHA256withECDSA":"SHA256withRSA",extreq:[{extname:"subjectAltName",array:[{dns:window.location.hostname}]}],sbjprvkey:t._private_key||""}).getPEM()};var n=e.type,r=void 0===n?"ECDSA":n,o=e.privateKey,i=e.publicKey;if(this.cryptType=r,"RSA"===r&&i&&!o)this._public_key=i;else if(o&&i)this._public_key=i,this._private_key=o;else if("RSA"===r){var s=M.KEYUTIL.generateKeypair("RSA",1024),a=s.prvKeyObj,c=s.pubKeyObj;this._public_key=M.KEYUTIL.getPEM(c),this._private_key=M.KEYUTIL.getPEM(a,"PKCS8PRV")}else{var u=M.KEYUTIL.generateKeypair("EC","secp256r1");a=u.prvKeyObj,c=u.pubKeyObj,this._public_key=M.KEYUTIL.getPEM(c),this._private_key=M.KEYUTIL.getPEM(a,"PKCS8PRV")}};const F=N;var U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},U.apply(this,arguments)},G=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},H=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},V=function(e,t,n,r,o){return G(void 0,void 0,void 0,(function(){var i,s,a,c,u;return H(this,(function(l){switch(l.label){case 0:return[4,t.getCertificate()];case 1:if(i=l.sent(),s=t.getCertSignRequest(),a=(null==e?void 0:e.headers["bd-ticket-client-data"])||"",c=t.sign(a),u="header"!==o||c?{"bd-ticket-guard-client-cert":i||""}:{"bd-ticket-guard-client-csr":s||""},"header"===r)e.headers=U(U(U({},null==e?void 0:e.headers),u),{"bd-ticket-guard-version":n||"1"}),c&&(e.headers=U(U({},null==e?void 0:e.headers),{"bd-ticket-guard-client-data":c}));return[2,e]}}))}))},q=n(9669),K=n.n(q);function z(e){var t,n=new RegExp("(^| )".concat(e,"=([^;]*)(;|$)"));return(t=document.cookie.match(n))?unescape(t[2]):""}var W,$,Y,Z=function(){return Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z.apply(this,arguments)},X=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},J=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Q=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r,o,i,s,a,c;return J(this,(function(u){var l,f;return null==e?void 0:e.url,n=(null==e?void 0:e.method)||"get",r=(null==e?void 0:e.data)||{},o={"x-tt-passport-csrf-token":z("passport_csrf_token")||z("passport_csrf_token_default")||""},i=Object.assign({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, text/javascript"},e.headers||{},o),e.headers=i,e.params=Z(Z({},e.params),t||{}),s={},Object.keys(r).filter((function(e){return void 0!==r[e]})).forEach((function(e){s[e]=r[e]})),["post","POST"].includes(n)&&(a=Z({},(null==e?void 0:e.params)||{}),e.params=Z({},a),f=r,"undefined"!=typeof FormData&&f instanceof FormData?e.data=r:e.data=(l=s,Object.keys(l).map((function(e){var t=l[e];return"object"==typeof t?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(JSON.stringify(t))):"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))})).join("&"))),["get","GET"].includes(n)&&(c=Z(Z({},s),e.params),e.params=Z({},c)),[2,e]}))}))},ee=function(e,t){var n=(e||{}).baseURL,r=K().create({baseURL:n||window.location.origin,withCredentials:!0});return r.interceptors.request.use((function(e){return Q(e,t||{})}),void 0),r.interceptors.response.use((function(e){return function(e){var t=(null==e?void 0:e.data)||{};if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return"success"===(null==t?void 0:t.message)?Promise.resolve(null==t?void 0:t.data):Promise.reject(t)}(e)}),void 0),r},te=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},ne=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},re="s_sdk_pub_key",oe="s_sdk_pri_key",ie="s_sdk_cert_key",se="s_sdk_sign_data_key",ae=null;const ce=function(e){var t=this;this._checkCryptKeys=function(){return te(t,void 0,void 0,(function(){var e,t,n,r,o,i,s,a,c,u,l,f,h;return ne(this,(function(p){switch(p.label){case 0:return e=null===(a=this._cacheSDK)||void 0===a?void 0:a.get(re),t=null===(c=this._cacheSDK)||void 0===c?void 0:c.get(oe),n=null===(u=this._cacheSDK)||void 0===u?void 0:u.get(ie),r=null===(l=this._cacheSDK)||void 0===l?void 0:l.get("".concat(se,"/").concat(this._scene)),e&&t&&n?(this._private_key=t,this._public_key=e,this._certificate=n,this._sign_data=r,this.cryptoSDK=new F({type:"ECDSA",privateKey:t,publicKey:e}),[2,!0]):"header"===this._certType?(o=this._getCertificatePem(),i=o.ec_privateKey,s=o.ec_publicKey,this._public_key=s,this._private_key=i,null===(f=this._cacheSDK)||void 0===f||f.set(re,this._public_key),null===(h=this._cacheSDK)||void 0===h||h.set(oe,this._private_key),[2,!0]):[4,this.refresh(!0)];case 1:return[2,p.sent()]}}))}))},this.getCertificate=function(){return te(t,void 0,void 0,(function(){return ne(this,(function(e){switch(e.label){case 0:return[4,this.checkCryptStatus];case 1:return[2,!!e.sent()&&B(this._certificate||"")]}}))}))},this.getCertificateV2=function(){return!!t._certificate&&B(t._certificate)},this.getCertSignRequest=function(){var e=t._getCertificatePem().certification;return B(e)},this.setSignValue=function(e){var n,r,o=e||{},i=(o.ts_sign,o.ticket),s=o.client_cert;s&&"header"===t._certType&&(t._certificate=s,null===(n=t._cacheSDK)||void 0===n||n.set(ie,s));try{var a=JSON.stringify(e);return t._sign_data=a,null===(r=t._cacheSDK)||void 0===r||r.set("".concat(se,"/").concat(t._scene),a),i}catch(e){return!1}},this.setSignValueV2=function(e){var n,r,o=L(e);try{t._sign_data=o;var i=o&&JSON.stringify(o)||{},s=(i.ts_sign,i.ticket),a=i.client_cert;return a&&"header"===t._certType&&(t._certificate=a,null===(n=t._cacheSDK)||void 0===n||n.set(ie,a)),null===(r=t._cacheSDK)||void 0===r||r.set("".concat(se,"/").concat(t._scene),o),s}catch(e){return!1}},this.sign=function(e){var n,r,o=t._sign_data;o||(o=(null===(n=t._cacheSDK)||void 0===n?void 0:n.get("".concat(se,"/").concat(t._scene)))||"");try{var i=JSON.parse(o||""),s=i.ticket,a=i.ts_sign;if(!e&&!s)return"";var c=null===(r=t.cryptoSDK)||void 0===r?void 0:r.sign(e||s),u={ts_sign:a,req_content:e||s,req_sign:D(c||"")};return B(JSON.stringify(u))}catch(e){return""}},this.signV2=function(e,n){var r,o,i=t._sign_data;i||(i=(null===(r=t._cacheSDK)||void 0===r?void 0:r.get("".concat(se,"/").concat(t._scene)))||"");try{var s=JSON.parse(i||""),a=s.ticket,c=s.ts_sign;if(!n&&!a)return"";var u=null===(o=t.cryptoSDK)||void 0===o?void 0:o.sign(n||a),l={ts_sign:c,req_content:e||a,req_sign:D(u||"")};return B(JSON.stringify(l))}catch(e){return""}},this.getTsSign=function(){var e,n=t._sign_data;n||(n=(null===(e=t._cacheSDK)||void 0===e?void 0:e.get("".concat(se,"/").concat(t._scene)))||"");try{return JSON.parse(n||"").ts_sign}catch(e){return!1}},this.getPublicKey=function(){return{publicKey:t._public_key||""}},this._getCertificatePem=function(){var e,n;if(Y&&$&&W)return{ec_privateKey:$||"",ec_publicKey:W||"",certification:Y||""};t.cryptoSDK=new F({type:"ECDSA"});var r=(null===(e=t.cryptoSDK)||void 0===e?void 0:e.getKeys())||{},o=r.publicKey,i=r.privateKey,s=null===(n=t.cryptoSDK)||void 0===n?void 0:n.getCSR();return Y=s,$=i,W=o,{ec_privateKey:i||"",ec_publicKey:o||"",certification:s||""}},this.refresh=function(e){return te(t,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u;return ne(this,(function(l){switch(l.label){case 0:e||(ae=null,Y="",$="",W=""),t=this._getCertificatePem(),n=t.ec_privateKey,r=t.ec_publicKey,o=t.certification,l.label=1;case 1:return l.trys.push([1,3,,4]),ae||(ae=this._request({url:"/passport/ticket_guard/get_client_cert/",method:"POST",data:{csr:B(o)}})),[4,ae];case 2:return i=l.sent(),(s=(i||{}).cert)&&(this._certificate=s,null===(a=this._cacheSDK)||void 0===a||a.set(ie,s)),this._public_key=r,this._private_key=n,null===(c=this._cacheSDK)||void 0===c||c.set(re,this._public_key),null===(u=this._cacheSDK)||void 0===u||u.set(oe,this._private_key),[2,!0];case 3:return l.sent(),[2,!1];case 4:return[2]}}))}))};var n=e.aid,r=e.scene,o=e.cacheSDK,i=e.certType,s=void 0===i?"header":i;this._cacheSDK=o,this._certType=s,this._scene=r||"token",this._request=ee({},{aid:n}),this.checkCryptStatus=this._checkCryptKeys()};var ue={};function le(e,t){ue[e]=t}function fe(e){return ue[e]}var he="__xhr",pe=["load","loadend","timeout","error","readystatechange","abort"];function de(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}var ve=pe[0],ye=pe[1],ge=pe[2],me=pe[3],_e=pe[4],be=pe[5],we="prototype";function xe(e,t){if((t=t||window).__xhr)throw"Ajax is already hooked.";return function(e,t){var n=e.onRequest,r=e.onResponse,o=e.onError;function i(e,t){var n=new Ie(e),o={response:t.response||t.responseText,status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=function(e){return e.replace(/^\s+|\s+$/g,"")}(n.join(":")),e}),{})};if(!r)return n.resolve(o);r(o,n)}function s(e,t,n,r){var i=new Pe(e);n={config:e.config,error:n,type:r},o?o(n,i):i.next(n)}function a(){return!0}function c(e){return function(t,n){return s(t,this,n,e),!0}}function u(e,t){return 4===e.readyState&&0!==e.status?i(e,t):4!==e.readyState&&Ee(e,_e),!0}return function(e,t){function n(t){return function(){var n=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],r=(e[t]||{}).getter;return r&&r(n,this)||n}}function r(t){return function(n){var r=this.xhr,o=this,i=e[t];if("on"===t.substring(0,2))o[t+"_"]=n,r[t]=function(i){i=de(i,o),e[t]&&e[t].call(o,r,i)||n.call(o,i)};else{var s=(i||{}).setter;n=s&&s(n,o)||n,this[t+"_"]=n;try{r[t]=n}catch(e){}}}}function o(t){return function(){var n=[].slice.call(arguments);if(e[t]){var r=e[t].call(this,n,this.xhr);if(r)return r}return this.xhr[t].apply(this.xhr,n)}}return(t=t||window)[he]=t[he]||t.XMLHttpRequest,t.XMLHttpRequest=function(){for(var e=new t[he],i=0;i<pe.length;++i){var s="on"+pe[i];void 0===e[s]&&(e[s]=null)}for(var a in e){var c="";try{c=typeof e[a]}catch(e){}"function"===c?this[a]=o(a):Object.defineProperty(this,a,{get:n(a),set:r(a),enumerable:!0})}var u=this;e.getProxy=function(){return u},this.xhr=e},Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t[he]}({onload:a,onloadend:a,onerror:c(me),ontimeout:c(ge),onabort:c(be),onreadystatechange:function(e){return u(e,this)},open:function(e,t){var r=this,o=t.config={headers:{}};o.method=e[0],o.url=e[1],o.async=e[2],o.user=e[3],o.password=e[4],o.xhr=t;var i="on"+_e;if(t[i]||(t[i]=function(){return u(t,r)}),n)return!0},send:function(e,t){var r=t.config;if(r.withCredentials=t.withCredentials,r.body=e[0],n){var o=function(){n(r,new Ce(t))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(e,t){if(t.config.headers[e[0].toLowerCase()]=e[1],n)return!0},addEventListener:function(e,t){var n=this;if(-1!==pe.indexOf(e[0])){var r=e[1];return Oe(t).addEventListener(e[0],(function(t){var o=de(t,n);o.type=e[0],o.isTrusted=!0,r.call(n,o)})),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}},t)}(e,t)}function Oe(e){return e.watcher||(e.watcher=document.createElement("a"))}function Ee(e,t){var n,r=e.getProxy(),o="on"+t+"_",i=de({type:t},r);r[o]&&r[o](i),"function"==typeof Event?n=new Event(t,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(t,!1,!0),Oe(e).dispatchEvent(n)}function Se(e){this.xhr=e,this.xhrProxy=e.getProxy()}function ke(e){function t(e){Se.call(this,e)}return t[we]=Object.create(Se[we]),t[we].next=e,t}Se[we]=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,Ee(n,_e),Ee(n,ve),Ee(n,ye)},reject:function(e){this.xhrProxy.status=0,Ee(this.xhr,e.type),Ee(this.xhr,ye)}});var Ce=ke((function(e){var t=this.xhr;for(var n in e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)})),Ie=ke((function(e){this.resolve(e)})),Pe=ke((function(e){this.reject(e)}));var Te=n(9875),Ae=n.n(Te),je=n(2109),Re=n.n(je),Me=function(e,t){var n=e.split("?"),r=n&&n.length>1?n[1]:"";return Re().parse(r)||{}},Be="proxyHookList",De=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ne=function(e){var t=fe(Be),n=e.url,r=!1,o=null;if(!t||!Array.isArray(t))return{needProxy:!1,proxyConfig:null};for(var i=0;i<t.length&&(!r||!o);i++){var s=t[i],a=s.proxy,c=s.proxyPathList,u=void 0===c?[]:c;if("boolean"==typeof a&&a)for(var l=0;l<u.length;l++){var f=u[l],h=new RegExp(f);if(n.match(h)){r=!0,o=s;break}}else if("function"==typeof a){if(a(e)){r=!0,o=s;break}}}return{needProxy:r,proxyConfig:o}},Fe=function(e,t){return De(void 0,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l,f,h;return Le(this,(function(p){return n=Ne(e),r=n.needProxy,o=n.proxyConfig,i=(o||{}).crypt,r&&i?(a=(s=o||{}).signDataType,c=void 0===a?"header":a,u=s.requestMiddleware,s.responseDataType,s.signDataKey,l=s.certType,f=void 0===l?"header":l,u?(h=u(e,i),d=h.url,v=(null==h?void 0:h.params)||{},y=d.split("?"),g=y&&y[0],m=Re().stringify(v),[2,{url:"".concat(g,"?").concat(m),body:null==h?void 0:h.body,headers:null==h?void 0:h.headers,method:null==h?void 0:h.method,params:null==h?void 0:h.params}]):[2,V(e,i,t,c,f)]):[2,e];var d,v,y,g,m}))}))},Ue=function(e){var t=Ne(null==e?void 0:e.config),n=t.needProxy,r=t.proxyConfig||{},o=r.responseMiddleware,i=r.crypt;if(n&&i){if(!o)return function(e,t){var n=(null==e?void 0:e.headers["bd-ticket-guard-server-data"])||"",r=n&&L(n);try{var o=r&&JSON.parse(r),i=(o||{}).ticket;i&&(e.headers=U(U({},e.headers),{"bd-ticket-guard-value":i}),t.setSignValue(o))}catch(e){}return e}(e,i);var s=o(e,i);e.headers=null==s?void 0:s.headers,e.response=null==s?void 0:s.response}return e},Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ge.apply(this,arguments)},He=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Ve=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},qe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ke=!1,ze=function(e,t){try{Ke?We(e):(We(e),Ke=!0,n=t||"1",xe({onRequest:function(e,t){var r=e.headers,o=e.url,i=e.body,s=e.method,a=Me(o);Fe({headers:r,url:o,body:i,method:s,params:a},n).then((function(n){t.next(Ge(Ge({},e),{url:null==n?void 0:n.url,body:null==n?void 0:n.body,headers:null==n?void 0:n.headers}))}))},onError:function(e,t){t.next(e)},onResponse:function(e,t){var n=null==e?void 0:e.config,r=n.headers,o=n.url,i={headers:r,url:o,body:n.body,method:n.method,params:Me(o)},s={headers:null==e?void 0:e.headers,config:i,response:null==e?void 0:e.response},a=Ue(s);t.next(Ge(Ge({},e),{headers:null==a?void 0:a.headers,response:null==a?void 0:a.response}))}}),Ae().register({request:function(e,t){return He(this,void 0,void 0,(function(){var r,o,i,s,a;return Ve(this,(function(c){switch(c.label){case 0:return r=t.headers,o=t.body,i=t.method,s=Me(e),[4,Fe({headers:r,url:e,body:o,method:i,params:s},n)];case 1:return a=c.sent(),[2,[e,Ge(Ge({},t),{url:null==a?void 0:a.url,body:null==a?void 0:a.body,headers:null==a?void 0:a.headers})]]}}))}))},requestError:function(e){return Promise.reject(e)},response:function(e){var t=null==e?void 0:e.request,n=t.headers,r=t.url,o={headers:n,url:r,body:t.body,method:t.method,params:Me(r)},i={headers:null==e?void 0:e.headers,config:o,response:e},s=Ue(i);return Ge(Ge({},e),{headers:null==s?void 0:s.headers})},responseError:function(e){return Promise.reject(e)}}))}catch(e){throw new Error("init proxt fail, please check security sdk!")}var n},We=function(e){var t=fe(Be);t&&Array.isArray(t)?le(Be,qe(qe([],t,!0),[e],!1)):le(Be,[e])},$e=function(){return $e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$e.apply(this,arguments)},Ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Ze=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Xe=function(e){var t=this;this.refresh=function(){return Ye(t,void 0,void 0,(function(){return Ze(this,(function(e){return[2,this.cryptoSDK.refresh()]}))}))};var n,r=e.aid,o=e.scene,i=e.certType,s=void 0===i?"header":i;this._cacheSDK=new R,this._cacheSDK.isSupport()&&(n={get:this._cacheSDK.get,set:this._cacheSDK.set,delete:this._cacheSDK.delete}),this.cryptoSDK=new ce({aid:r,scene:o,cacheSDK:n,certType:s});var a=e.proxy;("boolean"==typeof a&&a||"function"==typeof a)&&ze($e($e({},e),{crypt:this.cryptoSDK}),"1")};const Je=Xe;var Qe,et;!function(e){e.Image="image",e.Video="video",e.Audio="audio",e.CommonFile="object"}(Qe||(Qe={})),function(e){e.Uploader="multimedia.uploader"}(et||(et={}));class tt extends d{constructor(e,t){super(e),this.onComplete=new I(e),this.onFail=new I(e),this.options=t}performAddFile(e){return this.fileOption=this.addFile(e),this.fileOption}performUpload(){var e,t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=b.performanceNow();try{const t=yield this.upload();return this.resolve(l.Monitor).emitDuration(et.Uploader+m.SuccessSuffix,n,{type:null!==(e=this.fileOption.rawType)&&void 0!==e?e:"unknown"}),t}catch(e){throw this.resolve(l.Monitor).emitDuration(et.Uploader+m.ErrorSuffix,n,{type:null!==(t=this.fileOption.rawType)&&void 0!==t?t:"unknown"}),e}}))}genOption(e){return{file:e.fileHandler,path:e.filePath,stsToken:this.options.stsToken,size:e.fileSize,rawType:e.type,type:e.type===Qe.Audio?Qe.Video:e.type}}}class nt extends tt{constructor(e,t){super(e,t),this.uploader=new(E())({userId:t.userId,appId:t.appId,useFileExtension:!0,useServerCurrentTime:!0,videoConfig:t.videoConfig,imageConfig:t.imageConfig,region:t.region,videoHost:t.videoHost,imageHost:t.imageHost})}addFile(e){const t=this.genOption(e);return this.fileKey=this.uploader.addFile(t),t}upload(){let e,t;return this.uploader.start(this.fileKey),this.uploader.on("progress",(e=>{var t,n;null===(n=(t=this.options).onUploadProcess)||void 0===n||n.call(t,e)})),this.uploader.on("complete",(t=>{e(t),this.onComplete.next(t,this)})),this.uploader.on("error",(e=>{var n;const r=new w({ctx:this.ctx,msg:"upload error",type:i.NI.MPUploadError,sender:this,innerError:null===(n=null==e?void 0:e.extra)||void 0===n?void 0:n.message});this.onFail.next(r,this),t(r)})),new Promise(((n,r)=>{e=n,t=r}))}}var rt,ot=n(7447),it=n.n(ot);!function(e){e.MultimediaMessageUpload="imsdk_upload_msg",e.InitHandler="imsdk_init_handler",e.Exception="imsdk_exception",e.SaveMessageError="imsdk_save_msg_error",e.IntegrityCheckConversation="imsdk_puller_check_conv_and",e.MessageAck="imsdk_message_ack",e.RtcStartCall="imsdk_rtc_start_call",e.RtcSwitch="imsdk_rtc_switch",e.RtcReceiveRing="imsdk_rtc_receive_ring",e.RtcAcceptCall="imsdk_rtc_accept_call",e.RtcDenyCall="imsdk_rtc_deny_call",e.RtcTerminate="imsdk_rtc_terminate",e.RtcEnd="imsdk_rtc_end"}(rt||(rt={}));class st extends d{get instance(){return this.resolve(l.CoreInstance)}constructor(e){super(e)}init(){return(0,S.mG)(this,void 0,void 0,(function*(){}))}sendPacket(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e}))}receivePacket(e){return(0,S.mG)(this,void 0,void 0,(function*(){}))}ticker(){return(0,S.mG)(this,void 0,void 0,(function*(){}))}extendFunc(e){return e.bind(this)}dispose(){return(0,S.mG)(this,void 0,void 0,(function*(){}))}}class at{get isExpired(){return Date.now()-this.saveTime>this.ttl}}class ct{constructor(e){this.cache=new Map,this.globalTtl=e}set(e,t,n){const r=new at;r.key=e,r.value=t,r.saveTime=Date.now(),r.ttl=null!=n?n:this.globalTtl,this.cache.set(e,r)}get(e){const t=this.cache.get(e);if(t){if(!t.isExpired)return t.value;this.delete(e)}}delete(e){this.cache.delete(e)}has(e){return void 0!==this.get(e)}prune(){this.cache.forEach((e=>{e.isExpired&&this.delete(e.key)}))}}const ut={[s.m.IMCMD.SEND_MESSAGE]:"v1/message/send",200:"v1/message/get_by_user",203:"v2/message/get_by_user_init",300:"v1/conversation/get_list",301:"v1/message/get_by_conversation",400:"v1/account/online",401:"v1/account/offline",410:"v1/client/user_action",411:"v1/client/input_status",603:"v1/conversation/delete",608:"v2/conversation/get_info",609:"v2/conversation/create",610:"v2/conversation/get_info_list",611:"v2/conversation/get_by_favorite",612:"v2/conversation/get_by_top",614:"v1/conversation/dissolve",605:"v1/conversation/participants_list",650:"v1/conversation/add_participants",651:"v1/conversation/remove_participants",652:"v1/conversation/leave",655:"v1/conversation/update_participant",701:"v1/message/delete",702:"v1/message/recall",705:"v1/message/set_property",902:"v1/conversation/set_core_info",904:"v1/conversation/upsert_core_ext_info",921:"v1/conversation/set_setting_info",922:"v1/conversation/upsert_settings_ext",1001:"v1/stranger/get_conversation_list",1002:"v1/stranger/get_messages",1003:"v1/stranger/delete_message",1004:"v1/stranger/delete_conversation",1005:"v1/stranger/delete_all_conversations",1006:"v1/stranger/mark_read_conversation",1007:"v1/stranger/mark_read_all_conversations",2e3:"v3/conversation/get_read_index",2001:"v3/conversation/get_min_index",2002:"v3/conversation/mark_read",2003:"v1/media/get_upload_token",2004:"v1/media/get_urls",2006:"v1/conversation/list",2007:"v1/broadcast/send_message",2008:"v1/broadcast/recv_message",2009:"v1/broadcast/user_counter",2010:"v1/client/ack",2011:"v1/voip/create",2012:"v1/voip/call",2013:"v1/voip/update",2014:"v1/channel/heartbeat",2015:"v1/profile/get_info",2016:"v1/client/report_metrics",2017:"v1/config/get",[s.m.IMCMD.GET_MESSAGE_BY_INIT]:"v1/message/get_message_by_init",[s.m.IMCMD.MODIFY_MESSAGE_EXT]:"v1/message/modify_ext",[s.m.IMCMD.UNREAD_COUNT_REPORT]:"v1/client/unread_count",[s.m.IMCMD.SEND_MESSAGE_P2P]:"v1/send_message/p2p",[s.m.IMCMD.BATCH_GAT_CONVERSATION_PARTICIPANTS_READINDEX]:"v1/conversation/batch_get_conversation_participants_readindex",[s.m.IMCMD.GET_CONVERSATIONS_CHECKINFO]:"v1/conversation/get_checkinfo",[s.m.IMCMD.GET_MESSAGES_CHECKINFO_IN_CONVERSATION]:"v1/message/get_checkinfo",[s.m.IMCMD.MARK_MESSAGE]:"v1/message/mark",[s.m.IMCMD.PULL_MARK_MESSAGE]:"v1/message/pull_mark",[s.m.IMCMD.GET_CONVERSATION_CORE_INFO]:"v1/conversation/get_core_info",[s.m.IMCMD.GET_UNREAD_COUNT]:"v1/client/get_unread_count",[s.m.IMCMD.BLOCK_MEMBERS]:"v1/conversation/block_member",[s.m.IMCMD.BLOCK_CONVERSATION]:"v1/conversation/block_conversation",[s.m.IMCMD.CHECK_IN_BLOCKLIST]:"v1/blocklist/check",[s.m.IMCMD.SET_BLOCKLIST]:"v1/blocklist/set",[s.m.IMCMD.GET_BLOCKLIST]:"v1/blocklist/get",[s.m.IMCMD.BATCH_UNMARK_MESSAGE]:"v1/message/batch_unmark",[s.m.IMCMD.MARK_MSG_UNREAD_COUNT_REPORT]:"v1/message/report_mark_count",[s.m.IMCMD.MARK_MSG_GET_UNREAD_COUNT]:"v1/message/get_mark_count",[s.m.IMCMD.GET_MESSAGE_INFO_BY_SERVER_ID]:"v1/message/get_by_id",[s.m.IMCMD.CLIENT_BATCH_ACK]:"v1/client/batch_ack",[s.m.IMCMD.AUDIO_RECOGNITION]:"v1/message/audio_recognition"};var lt;!function(e){e[e.RequestCreate=0]="RequestCreate",e[e.RequestSerialize=1]="RequestSerialize",e[e.BeforeSend=2]="BeforeSend",e[e.BeforeSendSingleFlight=3]="BeforeSendSingleFlight",e[e.AfterSendSingleFlight=4]="AfterSendSingleFlight",e[e.AfterSend=5]="AfterSend",e[e.ResponseDeserialize=6]="ResponseDeserialize",e[e.SendMethod=7]="SendMethod"}(lt||(lt={}));const ft=function(){let e=1e4;return()=>(e+=1,e)}();class ht extends d{constructor(e,t,n,r){super(e),this.retryTimes=0,this.seqId=null!=r?r:ft(),this.reqBody=n,this.cmd=t;const o=function(e){var t;return null!==(t=ut[e])&&void 0!==t?t:""}(t);let i=this.ctx.option.apiUrl;i.endsWith("/")||(i+="/"),this.url=i+o}get logid(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.log_id)&&void 0!==t?t:""}prepareRequest(e){return(0,S.mG)(this,void 0,void 0,(function*(){let t=s.m.Request.create({body:this.reqBody,cmd:this.cmd,sequence_id:k.fromNumber(this.seqId),refer:i.HF.refer,token:this.ctx.cachedToken,headers:this.ctx.option.headers,device_id:this.ctx.option.deviceId,sdk_version:i.HF.sdkVersion,build_number:i.HF.buildNumber,inbox_type:e,device_platform:this.ctx.option.devicePlatform,channel:this.ctx.option.channel,device_type:this.ctx.option.deviceType,os_version:this.ctx.option.osVersion,version_code:this.ctx.option.versionCode,auth_type:this.ctx.option.authType,biz:this.ctx.option.biz,access:i.HF.requestAccessName});for(const e of this.ctx.plugin)t=yield e.sendPacket(t);this.request=t}))}}class pt extends d{constructor(e){super(e)}send(e,t,n={}){return(0,S.mG)(this,void 0,void 0,(function*(){return(yield this.sendWithRawBody(e,t,n)).body}))}sendWithRawBody(e,t,n={}){var r,o,a,c,u,f,h,p,d,v,y,_,x,O,E,k,C,I,P,T,A,j,R,M,B,D,L,N;return(0,S.mG)(this,void 0,void 0,(function*(){const S=b.performanceNow(),F=this.getReqTrackerContext(e);let U;try{if(void 0===n.inboxType&&(n.inboxType=this.resolve(l.InboxType).getDefaultInboxWithoutCheck()),this.ctx.option.webSocketLevel===i._.PushOnly&&(n.forceHttp=!0),this.ctx.option.webSocketLevel===i._.All&&(n.forceHttp=!1),U=new ht(this.ctx,t,e),yield U.prepareRequest(n.inboxType),yield this.resolve(l.NetworkManager).send(U,{maxHttpRetryTimes:!0===n.forceHttp?n.maxRetryTimes:void 0,maxWsRetryTimes:!0===n.forceHttp?0:n.maxRetryTimes,useBeacon:n.useBeacon}),n.useBeacon||void 0===U.response)return s.m.Response.create({});const I=U.response;if(0!==I.status_code){const x=I.status_code;switch(x){case i.NI.Degradation:throw new w({ctx:this.ctx,msg:"server degradation",type:i.NI.Degradation,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}});case i.NI.InvalidTicket:if(t===s.m.IMCMD.SEND_MESSAGE){const r=e.send_message_body.conversation_id,o=this.resolve(l.ConversationManager).get(r),s=o.ticket;yield this.resolve(l.ConversationManager).refreshTicket(o.id);if(s===o.ticket||n.isRetryReq)throw new w({ctx:this.ctx,msg:`invalid ticket for conv: ${r}`,type:i.NI.InvalidTicket,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}});return g.ctxDebug(this.ctx,"refresh ticket due to invalid"),this.sendWithRawBody(e,t,Object.assign(Object.assign({},n),{isRetryReq:!0}))}break;case i.NI.InvalidToken:case i.NI.ExpiredToken:const O=this.ctx.cachedToken;try{if(this.resolve(l.NetworkManager).closeWs(!0),""===O||this.ctx.option.authType===s.m.AuthType.SESSION_AUTH){if(n.isRetryReq)throw new w({ctx:this.ctx,msg:"invalid session",type:i.NI.TokenFuncError,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}});return g.ctxDebug(this.ctx,"http retry due to invalid session"),this.sendWithRawBody(e,t,Object.assign(Object.assign({},n),{isRetryReq:!0,forceHttp:!0}))}{yield this.resolve(l.AuthManager).refreshToken();const r=this.ctx.cachedToken;if(O===r||n.isRetryReq)throw new w({ctx:this.ctx,msg:`token refresh fail: ${r}`,type:i.NI.TokenFuncError,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}});return g.ctxDebug(this.ctx,"refresh token due to invalid"),this.sendWithRawBody(e,t,Object.assign(Object.assign({},n),{isRetryReq:!0}))}}catch(t){throw void 0!==t.type?(t.args=Object.assign(Object.assign({},t.args),{req:e,resp:I}),t):new w({ctx:this.ctx,msg:"token refresh func error",type:i.NI.TokenFuncError,innerError:t,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}})}default:if(n.ignoreBizError)return this.resolve(l.Monitor).emitMetrics(m.NetworkRequest,{duration:b.performanceNow()-S,retry_times:null!==(r=null==U?void 0:U.retryTimes)&&void 0!==r?r:0},{imsdk_cmd:t.toString(),imsdk_result:"0",seq_id:null!==(o=null==U?void 0:U.seqId.toString())&&void 0!==o?o:"",conversation_id:F.conversationId,uuid:F.uuid,error_msg:null!==(c=null===(a=null==U?void 0:U.response)||void 0===a?void 0:a.error_desc)&&void 0!==c?c:"",error_code:null!==(h=null===(f=null===(u=null==U?void 0:U.response)||void 0===u?void 0:u.status_code)||void 0===f?void 0:f.toString())&&void 0!==h?h:"",url_path:null!==(p=null==U?void 0:U.url)&&void 0!==p?p:"",net_type:null!==(v=null===(d=null==U?void 0:U.method)||void 0===d?void 0:d.toString())&&void 0!==v?v:"",logid:null!==(y=null==U?void 0:U.logid)&&void 0!==y?y:"",is_retry_req:n.isRetryReq?"1":"0"}),I;throw new w({ctx:this.ctx,msg:`${null!==(_=i.NI[x])&&void 0!==_?_:"unknown"}:${I.error_desc}`,type:x,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}})}}if(I.body)return this.resolve(l.Monitor).emitMetrics(m.NetworkRequest,{duration:b.performanceNow()-S,retry_times:null!==(x=U.retryTimes)&&void 0!==x?x:0},{imsdk_cmd:t.toString(),imsdk_result:"1",seq_id:U.seqId.toString(),conversation_id:F.conversationId,uuid:F.uuid,error_msg:"",error_code:"0",url_path:null!==(O=U.url)&&void 0!==O?O:"",net_type:null!==(k=null===(E=U.method)||void 0===E?void 0:E.toString())&&void 0!==k?k:"",logid:null!==(C=I.log_id)&&void 0!==C?C:"",is_retry_req:n.isRetryReq?"1":"0"}),I;throw new w({ctx:this.ctx,msg:"no response body",type:i.NI.Unknown,sender:this,logid:null==I?void 0:I.log_id,args:{req:e,resp:I}})}catch(r){if(this.resolve(l.Monitor).emitMetrics(m.NetworkRequest,{duration:b.performanceNow()-S,retry_times:null!==(I=null==U?void 0:U.retryTimes)&&void 0!==I?I:0},{imsdk_cmd:t.toString(),imsdk_result:"0",seq_id:null!==(P=null==U?void 0:U.seqId.toString())&&void 0!==P?P:"",conversation_id:F.conversationId,uuid:F.uuid,error_msg:null!==(A=null===(T=null==U?void 0:U.response)||void 0===T?void 0:T.error_desc)&&void 0!==A?A:"",error_code:null!==(M=null===(R=null===(j=null==U?void 0:U.response)||void 0===j?void 0:j.status_code)||void 0===R?void 0:R.toString())&&void 0!==M?M:"",url_path:null!==(B=null==U?void 0:U.url)&&void 0!==B?B:"",net_type:null!==(L=null===(D=null==U?void 0:U.method)||void 0===D?void 0:D.toString())&&void 0!==L?L:"",logid:null!==(N=null==U?void 0:U.logid)&&void 0!==N?N:"",is_retry_req:n.isRetryReq?"1":"0"}),void 0===r)throw new w({ctx:this.ctx,msg:"unknown error",type:i.NI.Unknown,sender:this,args:{req:e}});throw void 0!==r.type?(r.args=Object.assign(Object.assign({},r.args),{req:e}),r):new w({ctx:this.ctx,msg:"request unknown error",type:i.NI.Unknown,innerError:r,sender:this,args:{req:e}})}}))}getReqTrackerContext(e){var t,n,r,o;for(const i of Object.keys(e)){const s=e[i];if(void 0!==s)return{conversationId:null!==(n=null===(t=s.conversation_id)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",uuid:null!==(o=null===(r=s.client_message_id)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}}return{conversationId:"",uuid:""}}}var dt=n(5579);class vt extends pt{GetMediaUploadToken(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_upload_token_body:{vsdk_version:dt.oQ.vsdkVersion,token_type:e}});return(yield this.send(t,s.m.IMCMD.GET_MEDIA_UPLOAD_TOKEN)).get_upload_token_body}))}GetMediaUrls(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_media_urls_body:{source_appid:e.sourceAppId,uri:e.uri,media_type:e.mediaType,encrypted:e.encrypted,img_options:e.imgOptions?e.imgOptions.map((e=>s.m.ImgOption.create({tplv:e.tplv,params:e.params,format:e.format,urls:e.urls}))):void 0,video_options:e.videoOptions?e.videoOptions.map((e=>s.m.VideoOption.create({vid:e.vid,cover_uri:e.coverUri,urls:e.urls,cover_urls:e.coverUrls}))):void 0,audio_options:e.audioOptions?e.audioOptions.map((e=>s.m.AudioOption.create({vid:e.vid,urls:e.urls}))):void 0,file_options:e.fileOptions?e.fileOptions.map((e=>s.m.FileOption.create({urls:e.urls}))):void 0,read_url_from:e.mediaType===s.m.MediaType.IMG?s.m.ReadURLFrom.URL_IMAGEX:s.m.ReadURLFrom.URL_VSDK,encrypted_uri:e.encryptedUri}});return this.sendWithRawBody(t,s.m.IMCMD.GET_MEDIA_URLS)}))}}function yt(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle)try{const r={name:"AES-GCM",iv:n},o=yield window.crypto.subtle.importKey("raw",t,r,!1,["decrypt"]);return crypto.subtle.decrypt(r,o,e)}catch(e){return}}))}const gt="aes-256-gcm",mt=[gt];function _t(e,t,n,r){return(0,S.mG)(this,void 0,void 0,(function*(){let o;const s=new Uint8Array(r.match(/[\da-f]{2}/gi).map((e=>parseInt(e,16)))),a=t(n.slice(12),s.buffer,n.slice(0,12));if(a instanceof Promise)o=yield a;else{if(!(a instanceof ArrayBuffer))throw new w({ctx:e,msg:"invalid provided decryptor",type:i.NI.MPNotSupportCipher,sender:this});o=a}return o}))}var bt,wt,xt,Ot=n(6722);class Et extends st{constructor(e){super(e),this.initAdapter()}refreshFileUrl(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=this.parseContent({message:e.message});if(!t.ext[dt.I.Type])throw new w({ctx:this.ctx,msg:"this is not a file message",type:i.NI.MPNotFileMsg,sender:this});return this.refreshCache.has(e.message.clientId)&&!e.ignoreCache?(g.ctxDebug(this.ctx,`refresh hit cache: ${e.message.clientId}`),e.message):(yield this.__internal_getFileUrl(t),e.message.content=JSON.stringify({__files:{[t.displayType]:t}}),this.resolve(l.MessageManager).upsert(e.message),this.refreshCache.set(e.message.clientId,!0),e.message)}))}createFileMessage(e){var t,n,r,o,a,c;return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.type)switch(e.fileInfo.type){case dt.Tv.Video:e.type=s.m.MessageType.MESSAGE_TYPE_VIDEO;break;case dt.Tv.Image:e.type=s.m.MessageType.MESSAGE_TYPE_IMAGE;break;case dt.Tv.Audio:e.type=s.m.MessageType.MESSAGE_TYPE_AUDIO;break;default:e.type=s.m.MessageType.MESSAGE_TYPE_FILE}const u=yield this.instance.createMessage({conversation:e.conversation,content:"",ext:e.ext,mentionedUsers:e.mentionedUsers,type:e.type,insert:e.insert,clientId:e.clientId,referenceMessage:e.referenceMessage,referenceHint:e.referenceHint});if(u.sendFunc=this.__internal_sendFileMessage.bind(this),!e.fileInfo.fileHandler&&!e.fileInfo.filePath)throw new w({ctx:this.ctx,msg:"send file with empty file handler or path",type:i.NI.MPInvalidArgument,sender:this});return e.fileInfo.fileName=null!==(t=e.fileInfo.fileName)&&void 0!==t?t:null===(n=e.fileInfo.fileHandler)||void 0===n?void 0:n.name,e.fileInfo.length=null!==(r=e.fileInfo.length)&&void 0!==r?r:null===(o=e.fileInfo.fileHandler)||void 0===o?void 0:o.size,e.fileInfo.mime=null!==(a=e.fileInfo.mime)&&void 0!==a?a:null===(c=e.fileInfo.fileHandler)||void 0===c?void 0:c.type,u.fileInfo=e.fileInfo,u}))}parseContent(e){const t=JSON.parse(e.message.content).__files;if(!t)throw new w({ctx:this.ctx,msg:"this is not a file message",type:i.NI.MPNotFileMsg,sender:this});const n=Object.keys(t);if(n.length<1)throw new w({ctx:this.ctx,msg:"this is not a file message",type:i.NI.MPNotFileMsg,sender:this});return t[n[0]]}decryptMedia(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=this.parseContent({message:e.message}),n="1"===t.ext[dt.I.NeedEncrypt];e.fetchIndex||(e.fetchIndex=0);let r="",o="";switch(e.fetchIndex){case 0:r=t.encryptUrl,o=t.remoteURL;break;case 1:r=t.ext[dt.I.ImgPreviewEncryptUrl],o=t.ext[dt.I.ImgPreviewUrl];break;case 2:r=t.ext[dt.I.ImgThumbEncryptUrl],o=t.ext[dt.I.ImgThumbUrl]}if(n&&r){const n=yield this.resolve(l.NetworkManager).sendByHttpTo(r,"GET"),o=t.algorithm,s=t.secretKey,a=function(e,t){if(!mt.includes(t))throw new w({ctx:e,msg:`not support cipher algorithm: ${t}`,sender:this,type:i.NI.MPNotSupportCipher});switch(t){case gt:return yt;case"aes-256-gcm-chunks":case"cenc-aes-ctr":throw new w({ctx:e,msg:`not support: ${t}`,sender:this,type:i.NI.MPNotSupportCipher});default:throw new w({ctx:e,msg:`not found suitable decrpytor for algorithm: ${t}`,sender:this,type:i.NI.MPNotSupportCipher})}}(this.ctx,o);g.ctxDebug(this.ctx,`decrypt msg with algorithm: ${o}, key:${s}`);let c=yield _t(this.ctx,a,n,s);if(!c&&e.decrpytor&&(c=yield _t(this.ctx,e.decrpytor,n,s)),!c)throw new w({ctx:this.ctx,msg:"fail to decrypt",type:i.NI.MPNotSupportCipher,sender:this});return c}return this.resolve(l.NetworkManager).sendByHttpTo(o,"GET")}))}install(){this.instance.refreshFileUrl=this.extendFunc(this.refreshFileUrl),this.instance.createFileMessage=this.extendFunc(this.createFileMessage),this.instance.decryptMedia=this.extendFunc(this.decryptMedia),this.instance.parseContent=this.extendFunc(this.parseContent),this.instance.getImageResizeUrls=this.extendFunc(this.getImageResizeUrls),this.api=this.register(l.MultimediaApi,vt),this.register(l.MultimediaPlugin,this),this.refreshCache=new ct(3e6),this.sendQueue=new Ot.Z({concurrency:this.ctx.option.serialSendFileMessage?1:1/0})}__internal_sendFileMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){let n;e.flightStatus=i.b3.Preparing;try{const t=this.__internal_getFileUrlWithUpload(e,e.fileInfo);n=yield this.sendQueue.add((()=>t))}catch(n){return e.flightStatus=i.b3.Failed,this.resolve(l.MessageManager).upsert(e),{success:!1,payload:e,innerError:n,statusCode:null!==(t=n.type)&&void 0!==t?t:i.NI.MPUploadError}}if(!n)return e.flightStatus=i.b3.Failed,this.resolve(l.MessageManager).upsert(e),{success:!1,payload:e,statusMsg:"unknown error when send file",statusCode:i.NI.MPUploadError};const r={[n.displayType]:n};return e.content=JSON.stringify({__files:r}),this.refreshCache.set(e.clientId,!0),this.sendQueue.add((()=>this.instance.__internal_sendMessageObject.apply(this.instance,[e])))}))}getImageResizeUrls(e){var t,n,r,o,a,c;return(0,S.mG)(this,void 0,void 0,(function*(){const u=yield this.api.GetMediaUrls({sourceAppId:this.ctx.option.appId,mediaType:s.m.MediaType.IMG,uri:e.uri,imgOptions:[{tplv:dt.R0.Obj,format:null!==(t=e.format)&&void 0!==t?t:dt.Qq},{tplv:dt.R0.Resize,format:null!==(n=e.format)&&void 0!==n?n:dt.Qq,params:[String(e.width),String(e.height)]}]}),l=null===(c=null===(a=null===(o=null===(r=u.body)||void 0===r?void 0:r.get_media_urls_body)||void 0===o?void 0:o.img_options)||void 0===a?void 0:a[1])||void 0===c?void 0:c.urls;if(!Array.isArray(l))throw new w({ctx:this.ctx,msg:"respsone image url from server error",type:i.NI.MPServerUrlError,sender:this,logid:u.log_id});return l}))}__internal_getFileUrl(e){var t,n,r,o,a,c,u,l;return(0,S.mG)(this,void 0,void 0,(function*(){const f=e.ext[dt.I.Type];if(!f)throw new w({ctx:this.ctx,msg:"invalid request of get media url",type:i.NI.MPInvalidArgument,sender:this});const h="1"===e.ext[dt.I.NeedEncrypt],p={sourceAppId:this.ctx.option.appId,uri:e.ext[dt.I.Uri],mediaType:s.m.MediaType.OTHER,encrypted:h,imgOptions:[{}],videoOptions:[{}],audioOptions:[{}],fileOptions:[{}],encryptedUri:h?e.ext[dt.I.EncryptUri]:void 0};switch(f){case dt.L3.Image:p.mediaType=s.m.MediaType.IMG,p.imgOptions=[{tplv:dt.R0.Obj,format:null!==(t=e.ext[dt.I.ImgSuffix])&&void 0!==t?t:dt.Qq}],void 0!==e.ext[dt.I.ImgPreviewWidth]&&void 0!==e.ext[dt.I.ImgPreviewHeight]&&p.imgOptions.push({tplv:dt.R0.Resize,format:null!==(n=e.ext[dt.I.ImgSuffix])&&void 0!==n?n:dt.Qq,params:[e.ext[dt.I.ImgPreviewWidth],e.ext[dt.I.ImgPreviewHeight]]}),void 0!==e.ext[dt.I.ImgThumbWidth]&&void 0!==e.ext[dt.I.ImgThumbHeight]&&p.imgOptions.push({tplv:dt.R0.Resize,format:null!==(r=e.ext[dt.I.ImgSuffix])&&void 0!==r?r:dt.Qq,params:[e.ext[dt.I.ImgThumbWidth],e.ext[dt.I.ImgThumbHeight]]});break;case dt.L3.Video:p.mediaType=s.m.MediaType.VIDEO,p.videoOptions=[{vid:e.ext[dt.I.Vid],coverUri:e.ext[dt.I.VideoCoverUri]}];break;case dt.L3.Audio:p.mediaType=s.m.MediaType.AUDIO,p.audioOptions=[{vid:e.ext[dt.I.Vid]}];break;default:p.mediaType=s.m.MediaType.FILE,p.fileOptions=[{urls:[]}]}const d=yield this.api.GetMediaUrls(p),v=d.body.get_media_urls_body;switch(f){case dt.L3.Image:const t=v.img_options;if(0===(null===(o=v.encrypted_urls)||void 0===o?void 0:o.length)&&(!t||t.length<3))throw new w({ctx:this.ctx,msg:"respsone image url from server error",type:i.NI.MPServerUrlError,sender:this,logid:d.log_id});h&&0!==(null===(a=v.encrypted_urls)||void 0===a?void 0:a.length)&&(e.encryptUrl=v.encrypted_urls[0],e.ext[dt.I.ImgPreviewEncryptUrl]=v.encrypted_urls[1],e.ext[dt.I.ImgThumbEncryptUrl]=v.encrypted_urls[2]),0!==t.length&&(e.remoteURL=t[0].urls[0],e.ext[dt.I.ImgPreviewUrl]=null===(c=t[1])||void 0===c?void 0:c.urls[0],e.ext[dt.I.ImgThumbUrl]=null===(u=t[2])||void 0===u?void 0:u.urls[0]);break;case dt.L3.Video:const n=v.video_options;if(!n||n.length<1)throw new w({ctx:this.ctx,msg:"respsone video url from server error",type:i.NI.MPServerUrlError,sender:this,logid:d.log_id});e.remoteURL=n[0].urls[0];const r=(yield this.api.GetMediaUrls({sourceAppId:this.ctx.option.appId,uri:e.ext[dt.I.VideoCoverUri],mediaType:s.m.MediaType.IMG,imgOptions:[{tplv:dt.R0.Obj,format:null!==(l=e.ext[dt.I.ImgSuffix])&&void 0!==l?l:dt.Qq}]})).body.get_media_urls_body.img_options;if(!r||r.length<1)throw new w({ctx:this.ctx,msg:"respsone video cover url from server error",type:i.NI.MPServerUrlError,sender:this,logid:d.log_id});e.ext[dt.I.VideoCoverUrl]=r[0].urls[0];break;case dt.L3.Audio:const f=v.audio_options;if(!f||f.length<1)throw new w({ctx:this.ctx,msg:"respsone audio url from server error",type:i.NI.MPServerUrlError,sender:this,logid:d.log_id});e.remoteURL=f[0].urls[0];break;default:const p=v.file_options;if(!p||p.length<1)throw new w({ctx:this.ctx,msg:"respsone file url from server error",type:i.NI.MPServerUrlError,sender:this,logid:d.log_id});e.remoteURL=p[0].urls[0]}return{image:v.img_options,video:v.video_options,audio:v.audio_options,file:v.file_options}}))}__internal_getToken(e){return(0,S.mG)(this,void 0,void 0,(function*(){const{ctx:t}=this;return this.__internal_memoizedTokenFunc||(this.__internal_memoizedTokenFunc=it()(this.api.GetMediaUploadToken.bind(this.api),{isPromise:!0,maxSize:2,maxAge:72e4,onCacheAdd(){g.ctxDebug(t,`cache media upload token with type: ${s.m.MediaTokenType[e]}`)},onCacheHit(){g.ctxDebug(t,`media upload token cache with type: ${s.m.MediaTokenType[e]} hit`)},onExpire(e){g.ctxDebug(t,`media upload token with type: ${s.m.MediaTokenType[e]} expired`)}})),this.__internal_memoizedTokenFunc(e)}))}__internal_scaleImage(e,t){var n,r;if(void 0===t[0]&&void 0===t[1])return e;const o=Math.min(Number(null!==(n=t[0])&&void 0!==n?n:Number.MAX_SAFE_INTEGER)/e[0],Number(null!==(r=t[1])&&void 0!==r?r:Number.MAX_SAFE_INTEGER)/e[1]);return o>1?e:[e[0]*o,e[1]*o]}__internal_getFileUrlWithUpload(e,t){var n,r,o,s,a,c,u,f,h,p,d,v,y,m,_,b,x,O,E,k,C,I,P,T,A,j,R;return(0,S.mG)(this,void 0,void 0,(function*(){const{encryptOption:S,infor:M}=yield this.attemptUploadFile(t,e);let B;if(t.type===dt.Tv.Video&&t.videoCoverHandler){const{infor:n}=yield this.attemptUploadFile({fileHandler:t.videoCoverHandler,type:dt.Tv.Image,displayType:"media"},e);B=null==n?void 0:n.oid}if("success"!==M.type)throw new w({ctx:this.ctx,msg:"uplaod file to video-cloud error",type:i.NI.MPUploadError,sender:this});const D={displayType:t.displayType,mime:t.mime,length:t.length,fileName:t.fileName,type:null===(n=t.fileName)||void 0===n?void 0:n.slice(t.fileName.lastIndexOf(".")+1),ext:Object.assign({[dt.I.AppId]:this.ctx.option.appId.toString(),[dt.I.NeedEncrypt]:"0",[dt.I.FileName]:t.fileName},t.ext)};if(g.ctxDebug(this.ctx,"upload:",M),void 0!==S&&(D.ext[dt.I.NeedEncrypt]="1",D.algorithm=null===(o=null===(r=null==M?void 0:M.uploadResult)||void 0===r?void 0:r.Encryption)||void 0===o?void 0:o.Algorithm,D.secretKey=null===(a=null===(s=null==M?void 0:M.uploadResult)||void 0===s?void 0:s.Encryption)||void 0===a?void 0:a.SecretKey,D.md5=null===(u=null===(c=null==M?void 0:M.uploadResult)||void 0===c?void 0:c.Encryption)||void 0===u?void 0:u.SourceMd5,D.ext[dt.I.EncryptUri]=null===(h=null===(f=null==M?void 0:M.uploadResult)||void 0===f?void 0:f.Encryption)||void 0===h?void 0:h.Uri),void 0!==t.encrypt&&"both"!==t.encrypt||(g.ctxDebug(this.ctx,"save encrypted file only:",t.encrypt,", keep original file"),D.remoteURL="",D.ext[dt.I.Uri]=M.oid),void 0===t.mime&&t.type===dt.Tv.Image&&(t.mime=(null===(d=null===(p=M.image)||void 0===p?void 0:p.meta)||void 0===d?void 0:d.format)?`image/${M.image.meta.format}`:void 0,t.mime=M.uploadResult.ImageFormat?`image/${M.uploadResult.ImageFormat}`:void 0,D.mime=t.mime,g.ctxDebug(this.ctx,"calculate mime:",t.mime)),t.type===dt.Tv.Image&&(null===(v=null==M?void 0:M.uploadResult)||void 0===v?void 0:v.ImageHeight)&&(null===(y=null==M?void 0:M.uploadResult)||void 0===y?void 0:y.ImageWidth)){const e=Number.parseInt(null!==(_=null===(m=null==M?void 0:M.uploadResult)||void 0===m?void 0:m.ImageHeight.toString())&&void 0!==_?_:"",10),n=Number.parseInt(null!==(x=null===(b=null==M?void 0:M.uploadResult)||void 0===b?void 0:b.ImageWidth.toString())&&void 0!==x?x:"",10);if(void 0===t.imageThumbHeight||void 0===t.imageThumbWidth){void 0===t.imageThumbHeight&&void 0===t.imageThumbWidth&&(t.imageThumbHeight=100,t.imageThumbWidth=100);const[r,o]=this.__internal_scaleImage([n,e],[t.imageThumbWidth,t.imageThumbHeight]);t.imageThumbHeight=Math.round(o),t.imageThumbWidth=Math.round(r)}if(void 0===t.imagePreviewHeight||void 0===t.imagePreviewWidth){void 0===t.imagePreviewHeight&&void 0===t.imagePreviewWidth&&(t.imagePreviewHeight=500,t.imagePreviewWidth=500);const[r,o]=this.__internal_scaleImage([n,e],[t.imagePreviewWidth,t.imagePreviewHeight]);t.imagePreviewWidth=Math.round(r),t.imagePreviewHeight=Math.round(o)}}switch(t.type){case dt.Tv.Image:D.ext[dt.I.Type]=dt.L3.Image,D.ext[dt.I.ImgHeight]=null!==(O=(null==M?void 0:M.uploadResult).ImageHeight.toString())&&void 0!==O?O:"",D.ext[dt.I.ImgWidth]=null!==(E=(null==M?void 0:M.uploadResult).ImageWidth.toString())&&void 0!==E?E:"",D.ext[dt.I.ImgThumbHeight]=null===(k=t.imageThumbHeight)||void 0===k?void 0:k.toString(),D.ext[dt.I.ImgThumbWidth]=null===(C=t.imageThumbWidth)||void 0===C?void 0:C.toString(),D.ext[dt.I.ImgPreviewWidth]=null===(I=t.imagePreviewWidth)||void 0===I?void 0:I.toString(),D.ext[dt.I.ImgPreviewHeight]=null===(P=t.imagePreviewHeight)||void 0===P?void 0:P.toString(),D.ext[dt.I.ImgUseImageX]="1",D.ext[dt.I.ImgSuffix]=t.imageSuffix;break;case dt.Tv.Video:D.ext[dt.I.Type]=dt.L3.Video,D.ext[dt.I.Vid]=M.uploadResult.Vid,D.ext[dt.I.VideoCoverUri]=null!=B?B:(null==M?void 0:M.uploadResult).PosterUri,D.ext[dt.I.VideoDuration]=(null==M?void 0:M.uploadResult).VideoMeta.Duration.toString(),D.ext[dt.I.VideoHeight]=(null==M?void 0:M.uploadResult).VideoMeta.Height.toString(),D.ext[dt.I.VideoWidth]=(null==M?void 0:M.uploadResult).VideoMeta.Width.toString();break;case dt.Tv.Audio:D.ext[dt.I.Type]=dt.L3.Audio,D.ext[dt.I.Vid]=M.uploadResult.Vid,D.ext[dt.I.AudioDuration]=(null===(T=null==t?void 0:t.audioDuration)||void 0===T?void 0:T.toString())||(null===(R=null===(j=null===(A=M.uploadResult)||void 0===A?void 0:A.VideoMeta)||void 0===j?void 0:j.Duration)||void 0===R?void 0:R.toString());break;default:D.ext[dt.I.Type]=dt.L3.File}const L={[D.displayType]:D};return e.content=JSON.stringify({__files:L}),this.resolve(l.MessageManager).upsert(e),yield this.__internal_getFileUrl(D),D}))}attemptUploadFile(e,t){var n,r,o,a,c,u;return(0,S.mG)(this,void 0,void 0,(function*(){const f=b.performanceNow(),h=e.type===dt.Tv.Image?s.m.MediaTokenType.IMAGEX_V5:s.m.MediaTokenType.VSDK_V5,p=yield this.__internal_getToken(h),d={CurrentTime:p.current_time,ExpiredTime:p.expire_time,SessionToken:p.token,AccessKeyId:p.access_key,SecretAccessKey:null==p?void 0:p.secret_access_key},v={spaceName:p.space_name,processAction:[{name:"Snapshot",input:{SnapshotTime:0,SkipBlackDetect:!0}}]},y={serviceId:p.service_id,processAction:[]};let g;if(e.encrypt){let t=!0===e.encrypt?"cipher_v2":"both";"both"!==e.encrypt&&"cipher_v2"!==e.encrypt||(t=e.encrypt),g={name:"Encryption",input:{Config:{copies:t}}}}g&&y.processAction.push(g);const m=null!==(r=null===(n=this.ctx.option)||void 0===n?void 0:n.uploadRegion)&&void 0!==r?r:dt.oQ.uploadRegion,O=null===(o=this.ctx.option)||void 0===o?void 0:o.videoDomain,E=null===(a=this.ctx.option)||void 0===a?void 0:a.imageDomain,S=new(x.getConstructor(this.ctx,_.MediaUploader))(this.ctx,{appId:null===(c=this.ctx.option)||void 0===c?void 0:c.appId,userId:null===(u=this.ctx.option)||void 0===u?void 0:u.userId,stsToken:d,videoConfig:v,imageConfig:y,region:m,videoHost:O,imageHost:E,onUploadProcess:e.onUploadProcess});let k;S.performAddFile(e);try{k=yield S.performUpload();const e=b.performanceNow();this.resolve(l.Monitor).emitTracker(rt.MultimediaMessageUpload,{conversation_id:t.conversationId,result:"1",msg_type:t.type.toString(),upload_cost_time:e-f,error_msg:"",error_code:"0"})}catch(e){const n=b.performanceNow();throw this.resolve(l.Monitor).emitTracker(rt.MultimediaMessageUpload,{conversation_id:t.conversationId,result:"0",msg_type:t.type.toString(),upload_cost_time:n-f,error_msg:e,error_code:""}),new w({ctx:this.ctx,msg:"uplaod file to video-cloud error",type:i.NI.MPUploadError,sender:this,innerError:e})}return{encryptOption:g,infor:k}}))}initAdapter(){}}class St extends Et{initAdapter(){x.setAdapter(_.MediaUploader,nt)}}class kt extends d{constructor(e,t){var n,r;super(e.ctx),this.version=k.ZERO,this.parent=e,void 0!==t&&(this.desc=t.desc,this.ext=t.ext,this.icon=t.icon,this.name=t.name,this.notice=t.notice,this.owner=null!==(r=null===(n=t.owner)||void 0===n?void 0:n.toString())&&void 0!==r?r:"",this.version=t.info_version,this.secOwner=t.sec_owner,this.inboxType=t.inbox_type),void 0===this.inboxType&&(this.inboxType=this.resolve(l.InboxType).getDefaultInboxWithoutCheck())}get conversationId(){return this.parent.id}get ext(){return this.innerExt||(this.innerExt={}),this.innerExt}set ext(e){this.innerExt=null!=e?e:{}}mergeCore(e){return e.version.lt(this.version)?(g.ctxDebug(this.ctx,"core info version local > online, local: ",this.version.toString(),"new: ",e.version.toString()),this):e.conversationId!==this.conversationId?(g.ctxDebug(this.ctx,"core info conversation not match, local:",this.conversationId.toString(),"new: ",e.conversationId.toString()),this):(this.version=e.version,this.name=e.name,this.desc=e.desc,this.icon=e.icon,this.notice=e.notice,this.owner=e.owner,this.secOwner=e.owner,this.innerExt=Object.assign(Object.assign({},this.innerExt),e.innerExt),this.inboxType=e.inboxType,this)}}class Ct extends d{constructor(e,t){var n;super(e.ctx),this.version=k.ZERO,this.minIndex=k.ZERO,this._readIndex=k.ZERO,this.parent=e,void 0!==t&&(this.ext=t.ext,this.favor=t.favorite,this.mute=t.mute,this.stickTop=t.stick_on_top,this.version=k.fromValue(null!==(n=t.setting_version)&&void 0!==n?n:k.ZERO),this.readIndex=t.read_index,this.minIndex=t.min_index,this.setFavoriteTime=t.set_favorite_time,this.setTopTime=t.set_top_time,this.pushStatus=t.push_status)}get conversationId(){return this.parent.id}get pushStatus(){return this._pushStatus}set pushStatus(e){[i.Bs.Allow,i.Bs.PartAllow,i.Bs.Disable].includes(e)?this._pushStatus=e:this._pushStatus=i.Bs.Unknown}get readIndex(){return this._readIndex}set readIndex(e){if(void 0===e)return;const t=k.fromValue(e);void 0!==this._readIndex?t.gt(this._readIndex)&&(this._readIndex=t):this._readIndex=t}get ext(){return this.innerExt||(this.innerExt={}),this.innerExt}set ext(e){this.innerExt=null!=e?e:{}}mergeSetting(e){return e.version.lt(this.version)?(g.ctxDebug(this.ctx,"setting info version local > online, local: ",this.version.toString(),"new: ",e.version.toString()),this):e.conversationId!==this.conversationId?(g.ctxDebug(this.ctx,"setting info conversation not match, local:",this.conversationId.toString(),"new: ",e.conversationId.toString()),this):(this.stickTop=e.stickTop,this.setTopTime=e.setTopTime,this.mute=e.mute,this.favor=e.favor,this.setFavoriteTime=e.setFavoriteTime,this.innerExt=Object.assign(Object.assign({},this.innerExt),e.ext),this.readIndex=e.readIndex,this.minIndex=e.minIndex,this.version=e.version,this.pushStatus=e.pushStatus,this)}get weakMuteInfo(){var e,t,n;const r={whiteUids:[],whiteMsgTypes:[]};if(!this.innerExt[i.v9.PushPartDisableConfig])return r;try{const r=P.parse(this.innerExt[i.v9.PushPartDisableConfig]),o=null==r?void 0:r[i.O9],s=null!==(t=null===(e=null==o?void 0:o.white_uids)||void 0===e?void 0:e.map(k.fromValue))&&void 0!==t?t:[];return{whiteUids:s,whiteMsgTypes:null!==(n=null==o?void 0:o.white_msg_types)&&void 0!==n?n:[]}}catch(e){return g.ctxWarn(this.ctx,"conversation setting weak mute info parse error: ",e),r}}}function It(e,t){return e.length>t?[e.slice(0,t),...It(e.slice(t),t)]:[e]}function Pt(e,t){const n={};for(const r of e){const e=t(r);void 0===n[e]&&(n[e]=[]),n[e].push(r)}return n}function Tt(e,t){return Array.isArray(e)?e:void 0!==e?[e]:void 0!==t?[t]:[]}function At(e){return k.fromNumber(e.charCodeAt(0)).add(k.fromNumber(e.charCodeAt(1)).shiftLeft(8)).add(k.fromNumber(e.charCodeAt(2)).shiftLeft(16)).add(k.fromNumber(e.charCodeAt(3)).shiftLeft(24)).add(k.fromNumber(e.charCodeAt(4)).shiftLeft(32)).add(k.fromNumber(e.charCodeAt(5)).shiftLeft(40)).add(k.fromNumber(e.charCodeAt(6)).shiftLeft(48)).add(k.fromNumber(e.charCodeAt(7)).shiftLeft(56))}function jt(e,t){return void 0!==e&&void 0!==t&&("true"===e[t]||"1"===e[t])}class Rt extends d{constructor(){super(...arguments),this.isMember=!0,this.__internal_pullCursor=k.MAX_VALUE,this.cacheUnreadCountCalc=void 0,this.cacheUnreadCountWithWhiteListCalc=void 0}get type(){return 15&this.bizType}set type(e){this.bizType=e}get inboxType(){return this.coreInfo.inboxType}get mode(){return 0}get isStrangerConversation(){return 0!==this.mode}get isMuted(){return this.pushStatus!==i.Bs.Unknown?this.pushStatus===i.Bs.Disable:void 0!==this.settingInfo&&this.settingInfo.mute===i.I7.On}get pushStatus(){var e;return null!==(e=this.settingInfo.pushStatus)&&void 0!==e?e:i.Bs.Unknown}get weakMuteInfo(){return this.settingInfo.weakMuteInfo}get isStickOnTop(){return void 0!==this.settingInfo&&this.settingInfo.stickTop===i.uX.On}get isFavorite(){return void 0!==this.settingInfo&&this.settingInfo.favor===i.Lk.On}get ext(){let e={};return this.coreInfo&&this.coreInfo.ext&&(e=Object.assign(e,this.coreInfo.ext)),this.settingInfo&&this.settingInfo.ext&&(e=Object.assign(e,this.settingInfo.ext)),e}get rankScore(){var e,t,n,r,o;return this.isStickOnTop?(null!==(e=this.settingInfo.setTopTime)&&void 0!==e?e:k.ZERO).add(8e15).toNumber():null!==(o=null===(r=null===(n=null===(t=this.lastPopVisibleMessage)||void 0===t?void 0:t.createdAt)||void 0===n?void 0:n.getTime)||void 0===r?void 0:r.call(n))&&void 0!==o?o:-1}get lastMessage(){return this.filterLastMessage()}get lastVisibleMessage(){return this.filterLastMessage((e=>e.visible))}get lastPopVisibleMessage(){return this.filterLastMessage((e=>!e.unpop))}get firstMessage(){return this.filterFirstMessage()}get readIndex(){return this.settingInfo.readIndex}get minIndex(){return this.settingInfo.minIndex}get version(){return this.coreInfo.version}get unreadCount(){var e,t,n;return void 0===this.cacheUnreadCountCalc&&(this.cacheUnreadCountCalc=it()((e=>this.unreadMessageList.length),{maxSize:1})),this.cacheUnreadCountCalc(`${null===(t=null===(e=this.updatedAt)||void 0===e?void 0:e.getTime)||void 0===t?void 0:t.call(e)}:${null===(n=this.readIndex)||void 0===n?void 0:n.toString()}`)}get unreadCountWithWhiteList(){var e,t,n;return void 0===this.cacheUnreadCountWithWhiteListCalc&&(this.cacheUnreadCountWithWhiteListCalc=it()((e=>this.unreadMessageListWithWhiteList.length),{maxSize:1})),this.cacheUnreadCountWithWhiteListCalc(`${null===(t=null===(e=this.updatedAt)||void 0===e?void 0:e.getTime)||void 0===t?void 0:t.call(e)}:${null===(n=this.readIndex)||void 0===n?void 0:n.toString()}`)}forceRefreshUnreadCount(){var e;const t=this.unreadMessageList.length;t!==this.unreadCount&&void 0!==this.cacheUnreadCountCalc&&void 0!==this.cacheUnreadCountCalc.clear&&(g.ctxDebug(this.ctx,`force refresh unread count: ${this.id}, value: ${t}`),null===(e=this.cacheUnreadCountCalc)||void 0===e||e.clear())}get unreadMessageList(){if(!this.readIndex)return[];return this.resolve(l.MessageManager).getList(this.id).filter((e=>e.indexInConversation.gt(this.readIndex)&&e.indexInConversation.gt(this.minIndex)&&e.increaseUnread))}get unreadMessageListWithWhiteList(){return this.unreadMessageList.filter((e=>{var t,n,r;return(null===(t=e.ext)||void 0===t?void 0:t[i.v9.MustNotify])||(null===(n=this.settingInfo.weakMuteInfo.whiteUids)||void 0===n?void 0:n.find((t=>t.toString()===e.sender)))||(null===(r=this.settingInfo.weakMuteInfo.whiteMsgTypes)||void 0===r?void 0:r.find((t=>t===e.type)))}))}get updatedAt(){return this.lastMessage?this.lastMessage.createdAt:new Date(0)}get firstMessageIndex(){var e,t;return null!==(t=null===(e=this.filterFirstMessage((e=>e.indexInConversation&&e.indexInConversation.gt(0))))||void 0===e?void 0:e.indexInConversation)&&void 0!==t?t:k.ZERO}get lastMessageIndex(){var e,t;return null!==(t=null===(e=this.filterLastMessage((e=>e.indexInConversation&&e.indexInConversation.gt(0))))||void 0===e?void 0:e.indexInConversation)&&void 0!==t?t:k.ZERO}get lastMessageOrder(){var e,t;return null!==(t=null===(e=this.filterLastMessage((e=>e.orderInConversation&&e.orderInConversation.gt(0))))||void 0===e?void 0:e.orderInConversation)&&void 0!==t?t:k.ZERO}getMessageList(e=(e=>e.visible)){return this.resolve(l.MessageManager).getList(this.id).filter(e)}get toParticipantUserId(){if(this.type===s.m.ConversationType.GROUP_CHAT)return;const e=this.id.split(":");return e[2]===this.ctx.option.userId?e[3]:e[2]}get isBlocked(){return jt(this.ext,i.v9.RelationIsMuted)}get isBlockNormalOnly(){return this.isBlocked&&jt(this.ext,i.v9.RelationNormalOnly)}static fromServerConversation(e,t,n){const r=new Rt(e);r.id=t.conversation_id,r.shortId=t.conversation_short_id.toString(),r.type=t.conversation_type,r.ticket=t.ticket,r.participantCount=t.participants_count,r.isMember=t.is_participant,r.isOffline=!1,r.firstPageParticipant=t.first_page_participants,r.coreInfo=new kt(r,t.conversation_core_info),r.settingInfo=new Ct(r,t.conversation_setting_info);const o=Object.keys(r.coreInfo.ext);for(const e of Object.keys(r.settingInfo.ext))o.includes(e)&&g.ctxDebug(r.ctx,`conversation: ${r.shortId} ext duplicate key: ${e}`);return void 0!==n&&r.ctx.option.debug&&(r.coreInfo.ext[i.v9.LocalLogId]=n),r}filterLastMessage(e){const t=this.getMessageList((()=>!0));let n=null;if(0===t.length)return null;if(void 0===e)return t[t.length-1];for(let r=t.length-1;r>=0;r--)if(e(t[r])){n=t[r];break}return n}filterFirstMessage(e){const t=this.getMessageList((()=>!0));let n=null;if(0===t.length)return null;if(void 0===e)return t[0];for(const r of t)if(e(r)){n=r;break}return n}}!function(e){e[e.Sending=0]="Sending",e[e.Success=1]="Success",e[e.Failed=2]="Failed"}(bt||(bt={}));class Mt extends d{constructor(){super(...arguments),this.indexInConversation=k.ZERO,this.orderInConversation=k.ZERO,this.property={},this.source=i.v$.Unknown}get conversationType(){return 15&this.conversationBizType}set conversationType(e){this.conversationBizType=e}get clientId(){var e;return this.ext&&null!==(e=this.ext[i.v9.ClientMessageId])&&void 0!==e?e:""}set clientId(e){this.ext||(this.ext={}),this.ext[i.v9.ClientMessageId]=e}static createClientMessage(e,t){var n;const r=new Mt(e);r.conversationId=t.conversationId,r.type=t.type,r.conversationType=t.conversationType,r.conversationShortId=t.conversationShortId,r.sender=e.option.userId,r.content=t.content,r.createdAt=new Date(Date.now());const o=Object.assign({},t.ext);for(const e of Object.keys(o))e.startsWith("s:")&&(g.ctxDebug(r.ctx,`delete s: prefix ext key: '${e}: ${o[e]}'`),delete o[e]);if(r.ext=o,r.mentionedUsers=t.mentionedUsers,r.clientId=t.id,r.version=k.ZERO,r.serverStatus=i.P6.Enable,r.isOffline=!0,t.referenceMessage){let e=s.m.MessageStatus.AVAILABLE;t.referenceMessage.isRecalled?e=s.m.MessageStatus.RECALLED:t.referenceMessage.visible||(e=s.m.MessageStatus.INVISIBLE),r.referenceInfo={referenced_message_id:k.fromValue(t.referenceMessage.serverId),hint:null!==(n=t.referenceHint)&&void 0!==n?n:"",ref_message_type:k.fromValue(t.referenceMessage.type),referenced_message_status:e},void 0!==t.referenceMessage.referenceInfo?(r.referenceInfo.root_message_id=t.referenceMessage.referenceInfo.root_message_id,r.referenceInfo.root_message_conv_index=t.referenceMessage.referenceInfo.root_message_conv_index):(r.referenceInfo.root_message_id=k.fromValue(t.referenceMessage.serverId),r.referenceInfo.root_message_conv_index=t.referenceMessage.indexInConversation)}return r.ctx.option.secUid&&(r.secSender=r.ctx.option.secUid),r}static fromServerMessage(e,t,n){const r=new Mt(e);return r.serverId=t.server_message_id.toString(),r.type=t.message_type,r.ext=Object.assign({},t.ext),r.conversationId=t.conversation_id,r.content=t.content,r.sender=t.sender.toString(),r.createdAt=new Date(t.create_time.toNumber()),r.indexInConversation=t.index_in_conversation,r.orderInConversation=t.order_in_conversation,r.serverStatus=t.status,r.conversationShortId=t.conversation_short_id.toString(),r.conversationType=t.conversation_type,r.version=t.version,r.secSender=t.sec_sender,r.isOffline=!1,r.property=Mt.fromServerProperty(t),t.reference_info&&(r.referenceInfo=t.reference_info),void 0!==n&&r.ctx.option.debug&&(r.ext[i.v9.LocalLogId]=n),r}static fromServerProperty(e){const t={};if(!e.property_list)return t;for(const n of Object.keys(e.property_list)){const r=e.property_list[n];r&&r.Items&&(t[n]=r.Items.map((t=>{var r,o,s,a,c;return{messageId:null!==(r=e.ext[i.v9.ClientMessageId])&&void 0!==r?r:"",conversationId:e.conversation_id,key:n,userId:null===(o=t.uid)||void 0===o?void 0:o.toString(),secUid:null!==(s=t.sec_uid)&&void 0!==s?s:"",createTime:new Date(1e3*(null!==(c=null===(a=t.create_time)||void 0===a?void 0:a.toNumber())&&void 0!==c?c:0)),idempotentId:t.idempotent_id,value:t.value,version:e.version,status:bt.Success}})))}return t}merge(e){if(e&&this.type===e.type){if(e.ext=Object.assign(this.ext||{},e.ext),""===e.content&&this.content&&(g.ctxDebug(this.ctx,"ignore empty content replace:",e),e.content=this.content),e.clientId===this.clientId&&e.indexInConversation.lt(this.indexInConversation))return this.indexInConversation=e.indexInConversation,this;Object.assign(this,e)}return this}get isNormalMsg(){return this.type<5e4}get isCommandMsg(){return this.type===s.m.MessageType.MESSAGE_TYPE_COMMAND}get isSpecialMessage(){return this.type>=5e4}get visible(){return this.serverStatus!==i.P6.Disable&&(!this.isSpecialMessage&&(!this.ctx.option.userId||!this.ext||(this.ext[i.v9.MessageVisible]&&this.ext[i.v9.MessageVisible].length>0?-1!==this.ext[i.v9.MessageVisible].split(",").indexOf(this.ctx.option.userId):!(this.ext[i.v9.MessageInvisible]&&this.ext[i.v9.MessageInvisible].length>0)||-1===this.ext[i.v9.MessageInvisible].split(",").indexOf(this.ctx.option.userId))))}get unpop(){return!!this.ext&&!(this.visible&&!jt(this.ext,i.v9.DoNotPopConversation))}get increaseUnread(){return!(this.isFromMe||!this.visible||this.isSpecialMessage||this.isRecalled)&&!jt(this.ext,i.v9.DoNotIncreaseUnread)}get isFromMe(){return this.sender===this.ctx.option.userId}get isRecalled(){return this.ext&&!!this.ext[i.v9.IsRecalled]}get isMentioned(){return this.visible&&(this.mentionedUsers.includes(this.ctx.option.userId)||this.mentionedUsers.includes("0")&&!this.isFromMe)}get mentionedUsers(){return this.ext&&this.ext[i.v9.MentionedUser]?this.ext[i.v9.MentionedUser].split(","):[]}set mentionedUsers(e){this.ext||(this.ext={}),this.ext[i.v9.MentionedUser]=e.join(",")}get isStrangerMessage(){return!this.ext||["1","2","3"].includes(this.ext[i.v9.MessageMode])}get isRootReference(){return!!this.ext&&jt(this.ext,i.v9.IsRootReference)}get moveReadIndex(){return!this.ext||!(!this.visible||this.isFromMe||this.isSpecialMessage)&&!jt(this.ext,i.v9.DoNotMoveReadIndex)}get updateLastMessage(){return!(!this.visible||this.isSpecialMessage)&&!jt(this.ext,i.v9.DoNotUpdateLastMessage)}}class Bt extends d{constructor(){super(...arguments),this.minIndex=k.ZERO,this._readIndex=k.ZERO,this._readOrder=k.ZERO}get readIndex(){return this._readIndex}set readIndex(e){e&&e.gt(this._readIndex)&&(this._readIndex=e)}get readOrder(){return this._readOrder}set readOrder(e){e&&e.gt(this._readOrder)&&(this._readOrder=e)}get isSelf(){return this.userId===this.ctx.option.userId}get ext(){return this.innerExt||(this.innerExt={}),this.innerExt}set ext(e){this.innerExt=e}static featLocalParticipant(e,t){return e.userId!==t.userId||(e.secUid=t.secUid,e.role=t.role,e.alias=t.alias,e.sortOrder=t.sortOrder,e.blocked=t.blocked,e.leftBlockTime=t.leftBlockTime,e.readIndex=t.readIndex,e.readOrder=t.readOrder,e.ext=Object.assign(e.ext,t.ext)),e}static fromServerParticipant(e,t,n,r){var o,a,c,u;const l=new Bt(e);return l.userId=t.user_id.toString(),l.secUid=t.sec_uid,l.role=null!==(o=t.role)&&void 0!==o?o:void 0,l.alias=null!==(a=t.alias)&&void 0!==a?a:void 0,l.sortOrder=null!==(c=t.sort_order)&&void 0!==c?c:void 0,l.blocked=t.blocked===s.m.BlockStatus.BLOCK,l.leftBlockTime=null!==(u=t.left_block_time)&&void 0!==u?u:void 0,l.conversationId=n.id,l.conversationType=n.type,void 0!==r&&l.ctx.option.debug&&(l.ext[i.v9.LocalLogId]=r),l}static fakeParticipant(e,t,n){const r=new Bt(e);return r.conversationId=n.id,r.conversationType=n.type,r.readIndex=k.ZERO,r.minIndex=k.ZERO,r.userId=t,r}}class Dt{static fromOp(e,t){var n;const r=new Dt;return r.conversationId=e.conversationId,r.messageId=e.clientId,r.key=t.key,r.userId=e.ctx.option.userId,r.secUid=e.ctx.option.secUid,r.createTime=new Date(Date.now()),r.idempotentId=t.idempotentId,r.value=null!==(n=t.value)&&void 0!==n?n:"",r.version=e.version,r.status=bt.Sending,r}static mergeOperationToCurrent(e,t){var n;const r=Pt(t,(e=>e.key));for(const t of Object.keys(r))for(const o of r[t]){e.property[t]||(e.property[t]=[]);const r=null===(n=e.property[t])||void 0===n?void 0:n.findIndex((e=>e.idempotentId===o.idempotentId));switch(o.operation){case s.m.OPERATION_TYPE.ADD_PROPERTY_ITEM:-1===r&&e.property[t].push(Dt.fromOp(e,o));break;case s.m.OPERATION_TYPE.REMOVE_PROPERTY_ITEM:-1!==r&&e.property[t].splice(r,1),0===e.property[t].length&&delete e.property[t];break;case s.m.OPERATION_TYPE.SET_PROPERTY:e.property[t]=[Dt.fromOp(e,o)];break;case s.m.OPERATION_TYPE.DEL_PROPERTY:delete e.property[t]}}}}class Lt extends pt{LeaveConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({leave_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,s.m.IMCMD.LEAVE_CONVERSATION,{inboxType:e.inboxType})}))}DeleteMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({delete_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,message_id:e.serverId}});return this.send(t,s.m.IMCMD.DELETE_MESSAGE,{inboxType:e.inboxType})}))}GetMessageByServerId(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_message_by_id_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId}});return this.sendWithRawBody(t,s.m.IMCMD.GET_MESSAGE_INFO_BY_SERVER_ID,{inboxType:e.inboxType})}))}MarkConversationDelete(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({delete_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,last_message_index:e.lastPullIndex}});return this.send(t,s.m.IMCMD.MARK_CONVERSATION_DELETE,{inboxType:e.inboxType})}))}AddConversationParticipants(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({conversation_add_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,participants:e.participants,biz_ext:e.bizExt}});return(yield this.send(t,s.m.IMCMD.ADD_CONVERSATION_PARTICIPANTS,{inboxType:e.inboxType})).conversation_add_participants_body}))}GetConversationInfoListByFavoriteV2(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_conversation_info_list_by_favorite_v2_body:{cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,s.m.IMCMD.GET_CONVERSATION_INFO_LIST_BY_FAVORITE_V2,{inboxType:e.inboxType})}))}GetConversationInfoListByTopV2(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_conversation_info_list_by_top_v2_body:{cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,s.m.IMCMD.GET_CONVERSATION_INFO_LIST_BY_TOP_V2,{inboxType:e.inboxType})}))}UpdateConversationParticipant(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({update_conversation_participant_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,user_id:e.userId,role:e.role,alias:e.alias,biz_ext:e.bizExt,is_alias_set:Boolean(e.alias)}});return this.sendWithRawBody(t,s.m.IMCMD.UPDATE_CONVERSATION_PARTICIPANT,{inboxType:e.inboxType})}))}SetConversationCoreInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({set_conversation_core_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,name:e.name,desc:e.desc,icon:e.icon,notice:e.notice,ext:e.ext,biz_ext:e.bizExt}});return(yield this.send(t,s.m.IMCMD.SET_CONVERSATION_CORE_INFO,{inboxType:e.inboxType})).set_conversation_core_info_body}))}RemoveConversationParticipants(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({conversation_remove_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,participants:e.participants,biz_ext:e.bizExt}});return(yield this.send(t,s.m.IMCMD.REMOVE_CONVERSATION_PARTICIPANTS,{inboxType:e.inboxType})).conversation_remove_participants_body}))}UpsertConversationCoreExtInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({upsert_conversation_core_ext_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,ext:e.ext}});return(yield this.send(t,s.m.IMCMD.UPSERT_CONVERSATION_CORE_EXT_INFO,{inboxType:e.inboxType})).upsert_conversation_core_ext_info_body}))}SetConversationSettingInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({set_conversation_setting_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,set_stick_on_top:e.stickOnTop,set_mute:e.mute,set_favorite:e.favorite,push_status:e.pushStatus}});return(yield this.send(t,s.m.IMCMD.SET_CONVERSATION_SETTING_INFO,{inboxType:e.inboxType})).set_conversation_setting_info_body}))}UpsertConversationSettingExtInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({upsert_conversation_setting_ext_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,ext:e.ext}});return(yield this.send(t,s.m.IMCMD.UPSERT_CONVERSATION_SETTING_EXT_INFO,{inboxType:e.inboxType})).upsert_conversation_setting_ext_info_body}))}GetConversationParticipantsReadIndexV3(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({participants_read_index_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return(yield this.send(t,s.m.IMCMD.GET_CONVERSATION_PARTICIPANTS_READ_INDEX_V3,{inboxType:e.inboxType})).participants_read_index_body}))}GetConversationParticipantsMinIndexV3(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({participants_min_index_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return(yield this.send(t,s.m.IMCMD.GET_CONVERSATION_PARTICIPANTS_MIN_INDEX_V3,{inboxType:e.inboxType})).participants_min_index_body}))}GetConversationParticipantsList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,s.m.IMCMD.CONVERSATION_PARTICIPANTS_LIST,{inboxType:e.inboxType})}))}SendUserAction(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({send_user_action_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,action_type:e.actionType,extra:e.extra}});return this.send(t,s.m.IMCMD.SEND_USER_ACTION,{inboxType:e.inboxType})}))}SendInputStatus(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({send_input_status_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,status:e.status,extra:e.extra}});return this.send(t,s.m.IMCMD.SEND_INPUT_STATUS,{inboxType:e.inboxType})}))}DissolveConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({dissolve_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,s.m.IMCMD.DISSOLVE_CONVERSATION,{inboxType:e.inboxType})}))}ModifyMessageExt(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({modify_message_ext_body:{conversation_short_id:e.conversationShortId,message_id:e.messageId,ticket:e.ticket,ext:e.ext}});return this.send(t,s.m.IMCMD.MODIFY_MESSAGE_EXT,{inboxType:e.inboxType})}))}GetUserConversationList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_conversation_list_body:{con_type:e.type,cursor:e.cursor,limit:e.limit,sort_type:e.sortType,include_role:e.includeRole,exclude_role:e.excludeRole,with_cold:e.withCold,push_status:e.pushStatus}});return this.sendWithRawBody(t,s.m.IMCMD.GET_USER_CONVERSATION_LIST,{inboxType:e.inboxType})}))}UnreadCountReport(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({unread_count_report_body:{conv_unread_count:e.conv.map((e=>({conv_short_id:e.shortId,conversation_type:e.type,unread_count:e.count}))),total_unread_count:e.total}});return this.send(t,s.m.IMCMD.UNREAD_COUNT_REPORT,{inboxType:e.inboxType})}))}BlockConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({block_conversation_body:{conversation_id:e.conversationId,conv_short_id:e.conversationShortId,conversation_type:e.conversationType,block_status:e.status,block_normal_only:e.normalOnly}});return this.send(t,s.m.IMCMD.BLOCK_CONVERSATION,{inboxType:e.inboxType})}))}BlockMember(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({block_members_body:{conversation_id:e.conversationId,conv_short_id:e.conversationShortId,conversation_type:e.conversationType,block_time:e.time,block_status:e.status,biz_ext:e.bizExt}});return(yield this.send(t,s.m.IMCMD.BLOCK_MEMBERS,{inboxType:e.inboxType})).block_members_body}))}GetBlockList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_blocklist_body:{cursor:e.cursor,limit:e.limit}});return(yield this.send(t,s.m.IMCMD.GET_BLOCKLIST,{inboxType:e.inboxType})).get_blocklist_body}))}SetBlockList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({set_blocklist_body:{set_block_list:e.applySet,blocklist:e.blocklist}});return this.send(t,s.m.IMCMD.SET_BLOCKLIST,{inboxType:e.inboxType})}))}CheckInBlockList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({check_in_blocklist_body:{user_to_check:e.userToCheck}});return(yield this.send(t,s.m.IMCMD.CHECK_IN_BLOCKLIST,{inboxType:e.inboxType})).check_in_blocklist_body}))}BroadcastSendMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({broadcast_send_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,ticket:e.ticket,message_type:e.type,content:e.content,client_message_id:e.clientId,mentioned_users:e.mentionedUsers,ext:e.ext}});return this.sendWithRawBody(t,s.m.IMCMD.BROADCAST_SEND_MESSAGE,{inboxType:e.inboxType})}))}BroadcastReceiveMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({broadcast_recv_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit,reverse:e.reverse,pull_type:e.pullType}});return this.sendWithRawBody(t,s.m.IMCMD.BROADCAST_RECV_MESSAGE,{inboxType:e.inboxType})}))}BroadcastUserCounter(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({broadcast_user_counter_body:{conversations:e.conversations.map((e=>({conversation_short_id:e.shortId,conversation_type:e.type})))}});return(yield this.send(t,s.m.IMCMD.BROADCAST_USER_COUNTER)).broadcast_user_counter_body}))}SendP2PMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({send_message_p2p_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,send_type:e.sendType,message_type:e.msgType,content:e.content,client_message_id:e.clientId,ext:e.ext,visible_user:e.visibleUser,invisible_user:e.invisibleUser}});return this.send(t,s.m.IMCMD.SEND_MESSAGE_P2P,{useBeacon:!0,maxRetryTimes:1})}))}ModifyMessageProperty(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({modify_message_property_body:{property_list:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId,client_message_id:e.clientId,modify_property_content:e.modifyContent.map((e=>({operation:e.operation,key:e.key,value:e.value,idempotent_id:e.idempotentId})))},ticket:e.ticket}});return(yield this.send(t,s.m.IMCMD.SET_MESSAGE_PROPERTY,{inboxType:e.inboxType})).modify_message_property_body}))}GetUnreadCount(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_unread_count_body:{get_total:e.total,conv_short_id:e.shortIds}});return(yield this.send(t,s.m.IMCMD.GET_UNREAD_COUNT,{inboxType:e.inboxType})).get_unread_count_body}))}MarkMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({mark_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverMessageId,do_action:e.doAction,action_type:e.actionType,sort_time:e.sortTime,tag:e.tag}});return this.send(t,s.m.IMCMD.MARK_MESSAGE,{inboxType:e.inboxType})}))}PullMarkMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({pull_mark_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit,asc:e.asc,action_type:e.actionType,tag:e.tag}});return this.sendWithRawBody(t,s.m.IMCMD.PULL_MARK_MESSAGE,{inboxType:e.inboxType})}))}GetConversationCoreInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_conversation_core_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,s.m.IMCMD.GET_CONVERSATION_CORE_INFO,{inboxType:e.inboxType})}))}BatchUnmarkMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({batch_unmark_message:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_ids:e.serverMessageIds,action_type:e.actionType,tag:e.tag}});return(yield this.send(t,s.m.IMCMD.BATCH_UNMARK_MESSAGE)).batch_unmark_message}))}MarkMsgUnreadCountReport(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({mark_msg_unread_count_report:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,total_unread_count:e.totalUnreadCount,tag_unread_count:e.tagUnreadCount}});return(yield this.send(t,s.m.IMCMD.MARK_MSG_UNREAD_COUNT_REPORT)).mark_msg_unread_count_report}))}MarkMsgGetUnreadCount(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({mark_msg_get_unread_count:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,get_total:e.getTotal,tags:e.tags}});return(yield this.send(t,s.m.IMCMD.MARK_MSG_GET_UNREAD_COUNT)).mark_msg_get_unread_count}))}ConvertVoiceToText(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({audio_recognition_body:{audio:{content:e.content,uid:e.uid,server_message_id:e.server_message_id,audio_option:e.audioOptions,conv_short_id:e.conv_short_id}}});return this.send(t,s.m.IMCMD.AUDIO_RECOGNITION)}))}BatchGetConversationParticipantsReadIndex(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({batch_get_conversation_participants_readindex:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,request_from:e.request_from,min_index_required:e.min_index_required}});return(yield this.send(t,s.m.IMCMD.BATCH_GAT_CONVERSATION_PARTICIPANTS_READINDEX)).batch_get_conversation_participants_readindex}))}}class Nt extends Rt{constructor(){super(...arguments),this.localIndex=k.ZERO}get isMuted(){return!1}get isStickOnTop(){return!1}get isFavorite(){return!1}get toParticipantUserId(){}static fromServerConversation(e,t,n){const r=new Nt(e);return r.id=t.conversation_id,r.shortId=t.conversation_short_id.toString(),r.type=t.conversation_type,r.isOffline=!1,r.coreInfo=new kt(r,t),r}setConversationCursor(e){e>this.localIndex&&(this.localIndex=e),this.localIndex=e}getMessageList(e=(e=>e.visible)){return this.resolve(l.BroadcastManager).getList(this.id).filter(e)}get unreadCount(){return 0}}class Ft extends d{constructor(e){super(e),this.messages=new Map,this.conversation=new Map}upsertOnline(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=(yield this.resolve(l.ExtensionApi).GetConversationCoreInfo({conversationId:e.id,conversationShortId:k.fromString(e.shortId),conversationType:e.type,inboxType:e.inboxType})).get_conversation_core_info_body;if(!t||!t.conversation_core_info)throw new w({ctx:this.ctx,type:i.NI.ConversationNotExist,msg:`local conversation: ${e.id} not found online`,sender:this,args:{conversationId:e.id}});const n=Nt.fromServerConversation(this.ctx,t.conversation_core_info);return this.conversation.set(e.id,n),n}))}getWithOnline(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){let r=this.conversation.get(e);if(!r||r.isOffline){if(!t||!n)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"no shortId and type provided",sender:this});r||(r=new Nt(this.ctx),r.id=e,r.shortId=t,r.type=s.m.ConversationType.BROADCAST_CHAT,r.isOffline=!0,r.coreInfo=new kt(r)),r=yield this.upsertOnline(r)}return r}))}upsert(e){const t=this.getConversationMsgs(e.conversationId),n=t.msgs.findIndex((t=>t&&t.clientId===e.clientId));let r;n>=0&&(r=t.msgs[n]),r?r.type===e.type?(e=r.merge(e),t.msgs[n]=e):(g.ctxWarn(this.ctx,"try to merge different msg:",r,e),t.msgs[n]=e):this.insertMsg(t,e),this.resolve(l.EventBus).emit(i.c5.MessageUpsert,this,e)}getList(e){const t=this.getConversationMsgs(e),n=t.tail;if(t.front<n)return t.msgs.slice(t.front,n);const r=t.msgs.slice(0,n);return t.msgs.slice(t.front,Ft.MaxMsgSize).concat(r)}insertMsg(e,t){const n=e.tail;e.tail=(e.tail+1)%Ft.MaxMsgSize,e.tail===e.front&&(e.front=(e.front+1)%Ft.MaxMsgSize),e.msgs[n]=t}get(e,t){const n=this.getRaw(e,t);if(!n)throw new w({ctx:this.ctx,type:i.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return n}getConversation(e){const t=this.conversation.get(e);if(!t)throw new w({ctx:this.ctx,msg:`broadcast conversation ${e} not exist in local`,type:i.NI.ConversationNotExist,sender:this,args:{conversationId:e}});return t}getRaw(e,t){const n=this.getConversationMsgs(e),r=n.msgs.findIndex((e=>e&&e.clientId===t));let o;return r>=0&&(o=n.msgs[r]),o}getByServerId(e,t){const n=this.getConversationMsgs(e),r=n.msgs.findIndex((e=>e&&e.serverId===t));if(r<0)throw new w({ctx:this.ctx,type:i.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return n.msgs[r]}getConversationMsgs(e){let t=this.messages.get(e);return t||(t={msgs:new Array(Ft.MaxMsgSize),front:0,tail:0},this.messages.set(e,t)),t}processNewMessagesFromPull(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){for(const n of e)n.ext||(n.ext={}),yield this.processNewMessage(n,t)}))}processNewMessage(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){if(e.ext||(e.ext={}),e.source=t,e.type>=0)return this.processTextMessage(e);throw new w({ctx:this.ctx,type:i.NI.UnknownMessageType,msg:`unknown message type: ${e.type} for msg:${e.clientId}`,sender:this})}))}dispose(){this.conversation.clear(),this.messages.clear()}processTextMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.isNormalMsg)return e;const t=void 0!==e.source&&(e.source===i.v$.Online||e.source===i.v$.BroadcastLoadMore),n=this.getRaw(e.conversationId,e.clientId),r=void 0!==(null==n?void 0:n.flightStatus)&&t;this.upsert(e);const o=this.getRaw(e.conversationId,e.clientId);return n?r&&o.flightStatus!==i.b3.Received&&(o.flightStatus=i.b3.Received,this.resolve(l.EventBus).emit(i.c5.ReceiveBroadcastSelfMessage,this,o),this.upsert(o)):t&&(e.sender!==this.ctx.option.userId?this.resolve(l.EventBus).emit(i.c5.ReceiveBroadcastNewMessage,this,e):this.resolve(l.EventBus).emit(i.c5.ReceiveBroadcastSelfMessage,this,e)),e}))}}Ft.MaxMsgSize=1001;class Ut extends d{execute(e){return(0,S.mG)(this,void 0,void 0,(function*(){let t=e;return t=yield this.before(t),t=yield this.process(t),t=yield this.after(t),t}))}before(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e}))}after(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e}))}}class Gt extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.data.type===s.m.MessageType.MESSAGE_TYPE_UPDATE_MESSAGE_PROPERTY&&(e.needContinue=!1,yield this.handlePropertyCmd(e.data)),e}))}handlePropertyCmd(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=this.resolve(l.MessageManager).getRaw(e.conversationId,e.clientId);t?(t.version=e.version,g.ctxDebug(this.ctx,"merge property, local:",t.property,"server:",e.property),t.property=e.property,this.resolve(l.MessageManager).upsert(t),this.resolve(l.EventBus).emit(i.c5.MessagePropertyUpsert,this,t)):g.ctxDebug(this.ctx,"modify property cmd msg not exist in local",e)}))}}!function(e){e[e.BlockUser=1]="BlockUser",e[e.BlockConvNormalOnly=2]="BlockConvNormalOnly",e[e.BlockConvAll=3]="BlockConvAll"}(wt||(wt={}));class Ht extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.data.type===s.m.MessageType.MESSAGE_TYPE_BLOCK_COMMAND&&(e.needContinue=!1,this.handleBlockCmd(e.data,e.conv)),e}))}handleBlockCmd(e,t){const n=P.parse(e.content),r=n.block_status;if(n.type===wt.BlockUser){const{userID:o}=n;if(null==o||0===o.length)return;const s=this.resolve(l.ParticipantManager).getMapRaw(t.id);if(!s)return;for(const a of o){const o=null==a?void 0:a.toString();if(!s.has(o))continue;const c=s.get(o);c.blocked=Boolean(r);const u=n.blockTime[o];c.leftBlockTime=u?k.fromValue(u):void 0,this.resolve(l.ParticipantManager).upsert(t.id,c),this.resolve(l.EventBus).emit(i.c5.ParticipantBlock,this,{participant:c,message:e})}}else this.resolve(l.ConversationManager).refreshAsync(t).then((t=>{t.map((t=>this.resolve(l.EventBus).emit(i.c5.ConversationBlock,this,{conversation:t,message:e})))}))}}class Vt extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.data.type===s.m.MessageType.MESSAGE_TYPE_MARK_COMMAND?(e.needContinue=!1,this.handlePinCmd(e.data,e.conv)):e.data.type===s.m.MessageType.MESSAGE_TYPE_BATCH_UNMARK_COMMAND&&(e.needContinue=!1,this.handleBatchUnmarkCmd(e.data,e.conv)),e}))}handlePinCmd(e,t){const n=P.parse(e.content).server_message_id.toString(),r=this.resolve(l.MessageManager).getByServerIdRaw(t.id,n);r?r.version.gt(e.version)?g.ctxWarn(this.ctx,"server message is older, localMsg=",r,"serverMsg=",e):(r.ext=e.ext,r.version=e.version,this.resolve(l.MessageManager).upsert(r)):g.ctxWarn(this.ctx,"local message not exist, serverMsg=",e)}handleBatchUnmarkCmd(e,t){var n,r;const o=P.parse(null!==(r=null===(n=null==e?void 0:e.ext)||void 0===n?void 0:n[i.v9.MarkMessageNewExt])&&void 0!==r?r:"{}");for(const n of Object.keys(o)){const r=this.resolve(l.MessageManager).getByServerIdRaw(t.id,n.toString());r?(r.ext=Object.assign(r.ext,o[n]),r.version=e.version,this.resolve(l.MessageManager).upsert(r)):g.ctxWarn(this.ctx,"local message not exist, serverMsg=",e)}}}class qt{}class Kt extends st{leaveConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.api.LeaveConversation({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType}),this.resolve(l.ParticipantManager).delete(e.conversation.id,[this.ctx.option.userId])}))}deleteMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.message.serverId)throw new w({ctx:this.ctx,type:i.NI.MessageNotReady,msg:`message ${e.message} is not ready`,reachServer:!1,sender:this});try{if(this.resolve(l.MessageManager).delete(e.message.conversationId,e.message.serverId),e.localOnly)return;const t=this.resolve(l.ConversationManager).get(e.message.conversationId);yield this.api.DeleteMessage({conversationId:e.message.conversationId,conversationShortId:k.fromString(e.message.conversationShortId),conversationType:e.message.conversationType,serverId:k.fromString(e.message.serverId),inboxType:t.inboxType})}catch(e){g.ctxWarn(this.ctx,"delete message error, may lost server operation",e)}}))}deleteConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){try{if(this.resolve(l.ConversationManager).delete(e.conversation.id),e.localOnly)return;const t=e.conversation.lastMessageIndex;yield this.api.MarkConversationDelete({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,lastPullIndex:t,inboxType:e.conversation.inboxType})}catch(e){g.ctxWarn(this.ctx,"delete conversation error, may lost server operation",e)}}))}getConversationListByTop(e={}){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox());let o=[];const i=yield this.api.GetConversationInfoListByTopV2({cursor:k.fromValue(null!==(t=e.cursor)&&void 0!==t?t:"0"),limit:null!==(n=e.limit)&&void 0!==n?n:10,inboxType:e.inboxType}),s=null===(r=i.body)||void 0===r?void 0:r.get_conversation_info_list_by_top_v2_body,a=s.conversation_info_list.map((e=>Rt.fromServerConversation(this.ctx,e,i.log_id))).map((e=>this.resolve(l.ConversationManager).upsert(e)));return o=o.concat(a),{conversation:o,hasMore:null==s?void 0:s.has_more,cursor:null==s?void 0:s.next_cursor}}))}getConversationListByFavorite(e={}){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox());let o=[];const i=yield this.api.GetConversationInfoListByFavoriteV2({cursor:k.fromValue(null!==(t=e.cursor)&&void 0!==t?t:"0"),limit:null!==(n=e.limit)&&void 0!==n?n:10,inboxType:e.inboxType}),s=null===(r=i.body)||void 0===r?void 0:r.get_conversation_info_list_by_favorite_v2_body,a=(null==s?void 0:s.conversation_info_list).map((e=>Rt.fromServerConversation(this.ctx,e,i.log_id))).map((e=>this.resolve(l.ConversationManager).upsert(e)));return o=o.concat(a),{conversation:o,hasMore:null==s?void 0:s.has_more,cursor:null==s?void 0:s.next_cursor}}))}addParticipants(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=Array.isArray(e.participant)?e.participant:[e.participant],o=yield this.api.AddConversationParticipants({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,participants:r.map((e=>k.fromValue(e))),bizExt:e.bizExt,inboxType:e.conversation.inboxType});if(0!==(null==o?void 0:o.status))return{success:!1,failedParticipant:r,payload:e.conversation,checkCode:o.check_code,checkMsg:o.check_message,statusCode:o.status,statusMsg:o.extra_info};return{success:!0,failedParticipant:null!==(n=null===(t=o.failed_participants)||void 0===t?void 0:t.map((e=>e.toString())))&&void 0!==n?n:[],payload:e.conversation,checkCode:o.check_code,checkMsg:o.check_message,statusCode:o.status,statusMsg:o.extra_info}}))}removeParticipants(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){Array.isArray(e.participant)||(e.participant=[e.participant]);const r=e.participant.map((e=>k.fromString("string"==typeof e?e:e.userId))),o=yield this.api.RemoveConversationParticipants({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,participants:r,bizExt:e.bizExt,inboxType:e.conversation.inboxType});if(0!==(null==o?void 0:o.status))return{success:!1,failedParticipant:r.map((e=>e.toString())),body:o,payload:e.conversation,checkCode:o.check_code,checkMsg:o.check_message,statusCode:o.status,statusMsg:o.extra_info};const i=[],s=null!==(n=null===(t=o.failed_participants)||void 0===t?void 0:t.map((e=>e.toString())))&&void 0!==n?n:[];return r.forEach((e=>{s.includes(e.toString())||i.push(e.toString())})),{success:!0,body:o,failedParticipant:s,payload:e.conversation,checkCode:o.check_code,checkMsg:o.check_message,statusCode:o.status,statusMsg:o.extra_info}}))}updateParticipant(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=yield this.api.UpdateConversationParticipant({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,role:e.role,alias:e.alias,bizExt:e.bizExt,inboxType:e.conversation.inboxType,userId:k.fromValue(e.userId)}),o=null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.update_conversation_participant_body;if(0===(null==r?void 0:r.status_code)&&(null===(n=null==o?void 0:o.participant)||void 0===n?void 0:n.user_id)&&(null==r?void 0:r.log_id)){return{success:!0,payload:Bt.fromServerParticipant(this.ctx,o.participant,e.conversation,r.log_id),checkCode:o.check_code,checkMsg:o.check_message,statusCode:r.status_code,statusMsg:o.extra_info,body:o}}return{success:!1,payload:null,checkCode:o.check_code,checkMsg:o.check_message,statusCode:r.status_code,statusMsg:o.extra_info,body:o}}))}setConversationSettingInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.api.SetConversationSettingInfo({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,stickOnTop:e.stickOnTop,mute:e.mute,favorite:e.favorite,inboxType:e.conversation.inboxType,pushStatus:e.pushStatus});return 0!==(null==t?void 0:t.status)?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(l.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})}))}setConversationCoreInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.api.SetConversationCoreInfo({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,name:e.name,desc:e.desc,icon:e.icon,notice:e.notice,ext:e.ext,bizExt:e.bizExt,inboxType:e.conversation.inboxType});return 0!==(null==t?void 0:t.status)?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(l.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})}))}upsertConversationSettingExtInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.api.UpsertConversationSettingExtInfo({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,ext:e.ext,inboxType:e.conversation.inboxType});return 0!==(null==t?void 0:t.status)?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(l.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})}))}setConversationWeakMuteConfig(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=P.stringify({[i.O9]:{white_uids:null!==(t=e.config.whiteUids)&&void 0!==t?t:[],white_msg_types:null!==(n=e.config.whiteMsgTypes)&&void 0!==n?n:[]}});return this.upsertConversationSettingExtInfo({conversation:e.conversation,ext:{[i.v9.PushPartDisableConfig]:r}})}))}upsertConversationCoreExtInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.api.UpsertConversationCoreExtInfo({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,ext:e.ext,inboxType:e.conversation.inboxType});return 0!==(null==t?void 0:t.status)?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(l.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})}))}getMessageReadReceipt(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(e.message.isRecalled||!e.message.isFromMe||e.message.isOffline)return{finishedParticipantIds:[],expectedParticipantIds:[]};const t=this.resolve(l.ConversationManager).get(e.message.conversationId);let n=this.resolve(l.ParticipantManager).getRaw(t.id);if((e.syncFromServer||0===n.length)&&(t.type===s.m.ConversationType.ONE_TO_ONE_CHAT&&0===n.length&&(yield this.getConversationParticipants({conversation:t})),t.type===s.m.ConversationType.GROUP_CHAT&&(0===n.length?yield this.getConversationParticipants({conversation:t}):this.getConversationParticipants({conversation:t})),yield this.updateConversationReadReceipt({conversation:t,batchFetch:Boolean(e.batchFetch)})),n=this.resolve(l.ParticipantManager).getRaw(t.id),0===n.length)return{finishedParticipantIds:[],expectedParticipantIds:[]};if(!e.message.indexInConversation)return{finishedParticipantIds:[],expectedParticipantIds:n.filter((e=>e.userId!==this.ctx.option.userId)).map((e=>e.userId))};const r=[],o=[];return n.forEach((t=>{t.minIndex.gt(e.message.indexInConversation)||(t.userId!==this.ctx.option.userId&&o.push(t.userId.toString()),(t.readOrder.gte(e.message.orderInConversation)||t.readIndex.gte(e.message.indexInConversation))&&t.userId!==this.ctx.option.userId&&r.push(t.userId.toString()))})),{finishedParticipantIds:r,expectedParticipantIds:o}}))}getConversationParticipants(e){return this.resolve(l.ParticipantManager).getParticipant(e.conversation)}getConversationParticipantsAsync(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){let r=!0,o=k.ZERO;for(;r;){const i=yield this.getConversationParticipantsByPage({cursor:o,limit:50,conversation:e.conversation});r=null!==(t=null==i?void 0:i.hasMore)&&void 0!==t&&t,o=null!==(n=null==i?void 0:i.cursor)&&void 0!==n?n:k.ZERO}return this.resolve(l.ParticipantManager).get(e.conversation.id)}))}getConversationParticipantsByPage(e){var t,n,r,o,i,s;return(0,S.mG)(this,void 0,void 0,(function*(){let a=null!==(t=e.cursor)&&void 0!==t?t:k.ZERO;const c=null!==(n=e.limit)&&void 0!==n?n:50,u=yield this.api.GetConversationParticipantsList({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,cursor:a?k.fromValue(a):k.ZERO,limit:c,inboxType:e.conversation.inboxType}),f=null===(o=null===(r=u.body)||void 0===r?void 0:r.conversation_participants_body)||void 0===o?void 0:o.participants_page,h=null!==(i=null==f?void 0:f.has_more)&&void 0!==i&&i;a=null!==(s=null==f?void 0:f.cursor)&&void 0!==s?s:k.ZERO;const p=[];return null==f||f.participants.forEach((t=>{p.push(Bt.fromServerParticipant(this.ctx,t,e.conversation,u.log_id))})),this.resolve(l.ParticipantManager).upsertBatch(e.conversation.id,p),this.resolve(l.ConversationManager).upsert(e.conversation),{participants:p,hasMore:h,cursor:a}}))}updateConversationReadReceipt(e){return(0,S.mG)(this,void 0,void 0,(function*(){const{readIndexs:t,minIndexs:n}=yield this.getReadReceipt({conversation:e.conversation,batchFetch:e.batchFetch}),r=this.resolve(l.ParticipantManager).getRaw(e.conversation.id);let o=!1;t.forEach((e=>{const t=r.filter((t=>t.userId===e.user_id.toString()))[0];t&&(t.readIndex.equals(e.index)||(o=!0),t.readIndex=e.index)})),n.forEach((e=>{const t=r.filter((t=>t.userId===e.user_id.toString()))[0];t&&(t.minIndex.equals(e.index)||(o=!0),t.minIndex=e.index)})),o&&(this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,e.conversation),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),r.forEach((t=>this.resolve(l.ParticipantManager).upsert(e.conversation.id,t))))}))}sendUserAction(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.api.SendUserAction({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,extra:e.ext,actionType:e.actionType,inboxType:e.conversation.inboxType})}))}sendInputStatus(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.api.SendInputStatus({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,extra:e.ext,status:e.status,inboxType:e.conversation.inboxType})}))}sendP2PMessage(e){var t,n,r,o,i;return(0,S.mG)(this,void 0,void 0,(function*(){yield this.api.SendP2PMessage({conversationId:e.conversation.id,conversationShortId:k.fromValue(e.conversation.shortId),conversationType:e.conversation.type,sendType:e.sendType,msgType:e.msgType,content:e.content,clientId:u(),ext:null!==(t=e.ext)&&void 0!==t?t:{},visibleUser:null!==(r=null===(n=e.visibleUser)||void 0===n?void 0:n.map((e=>k.fromValue(e))))&&void 0!==r?r:[],invisibleUser:null!==(i=null===(o=e.invisibleUser)||void 0===o?void 0:o.map((e=>k.fromValue(e))))&&void 0!==i?i:[],inboxType:e.conversation.inboxType})}))}dissolveConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.api.DissolveConversation({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType}),this.resolve(l.ConversationManager).delete(e.conversation.id),this.resolve(l.EventBus).emit(i.c5.ConversationDissolve,this,e.conversation),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this)}))}upsertMessageExt(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.message.serverId)throw new w({ctx:this.ctx,type:i.NI.MessageOffline,msg:"message is offline",reachServer:!1,sender:this});for(const t of Object.keys(e.ext))t.startsWith("s:")&&delete e.ext[t];const t=this.resolve(l.ConversationManager).get(e.message.conversationId);return yield this.api.ModifyMessageExt({conversationShortId:k.fromValue(e.message.conversationShortId),messageId:k.fromValue(e.message.serverId),ext:e.ext,ticket:t.ticket,inboxType:t.inboxType}),e.message.ext=Object.assign(e.message.ext,e.ext),this.resolve(l.MessageManager).upsert(e.message),e.message}))}getUserConversationList(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){if(void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox()),e.type!==s.m.ConversationType.GROUP_CHAT&&(void 0!==e.includeRole||void 0!==e.excludeRole))throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"role filter only available in group chat",sender:this,reachServer:!1});if(void 0!==e.includeRole&&void 0!==e.excludeRole)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"conflict include and exclude",sender:this,reachServer:!1});const r=yield this.api.GetUserConversationList({type:e.type,cursor:e.cursor?k.fromValue(e.cursor):k.ZERO,limit:e.limit?k.fromValue(e.limit):k.fromNumber(20),sortType:null!==(t=e.sortType)&&void 0!==t?t:s.m.SortType.JOIN_TIME,includeRole:e.includeRole,excludeRole:e.excludeRole,withCold:e.withCold,inboxType:e.inboxType}),o=null===(n=r.body)||void 0===n?void 0:n.get_conversation_list_body,a=o.list.map((e=>Rt.fromServerConversation(this.ctx,e,r.log_id)));return a.forEach((e=>this.resolve(l.ConversationManager).upsert(e))),{conversation:a,hasMore:null==o?void 0:o.has_more,cursor:null==o?void 0:o.next_cursor}}))}unreadCountReport(){return(0,S.mG)(this,void 0,void 0,(function*(){if(!this.ctx.option.unreadCountReport)throw new w({ctx:this.ctx,msg:"unread count report not enabled",sender:this,type:i.NI.InvalidParam,reachServer:!1});const e=Pt(this.resolve(l.ConversationManager).getConversationArray(),(e=>e.inboxType.toString()));for(const t of Object.keys(e)){const n=e[t],r=[];let o=0;n.forEach((e=>{const t=this.getNormalMsgUnreadCount(e);o+=t,r.push({shortId:k.fromString(e.shortId),count:k.fromNumber(t),type:e.type})}));const i=It(r,30);for(const e of i)try{yield this.api.UnreadCountReport({total:k.fromValue(o),conv:e,inboxType:Number.parseInt(t,10)})}catch(e){g.ctxWarn(this.ctx,"report unread error:",e,"conv:",n)}}}))}getServerUnreadCountByUser(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox());const r=yield this.api.GetUnreadCount({total:!0,inboxType:e.inboxType,shortIds:[]});return null!==(n=null===(t=null==r?void 0:r.total_unread_count)||void 0===t?void 0:t.toNumber())&&void 0!==n?n:0}))}getServerUnreadCountByConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=new Map,n=Pt(e.conversation,(e=>e.inboxType.toString()));for(const e of Object.keys(n)){const r=n[e].map((e=>k.fromString(e.shortId))),o=new Map(n[e].map((e=>[e.shortId,e]))),i=yield this.api.GetUnreadCount({total:!1,shortIds:r,inboxType:Number.parseInt(e,10)});for(const[e,n]of Object.entries(i.conv_unread_count)){const r=At(e).toString();o.has(r)&&t.set(o.get(r),n.toNumber())}}return t}))}blockConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){return void 0===e.normalOnly&&(e.normalOnly=!1),yield this.api.BlockConversation({conversationId:e.conversation.id,conversationShortId:k.fromValue(e.conversation.shortId),conversationType:e.conversation.type,status:e.block?s.m.BlockStatus.BLOCK:s.m.BlockStatus.UNBLOCK,normalOnly:e.normalOnly,inboxType:e.conversation.inboxType}),yield this.resolve(l.ConversationManager).refreshAsync(e.conversation),e.conversation}))}blockMember(e){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){const o={};void 0!==e.blockDuration&&Object.keys(e.blockDuration).forEach((t=>{o[t]=k.fromValue(e.blockDuration[t])}));const i=yield this.api.BlockMember({conversationId:e.conversation.id,conversationShortId:k.fromValue(e.conversation.shortId),conversationType:e.conversation.type,status:e.block?s.m.BlockStatus.BLOCK:s.m.BlockStatus.UNBLOCK,time:o,bizExt:null!==(t=e.bizExt)&&void 0!==t?t:{},inboxType:e.conversation.inboxType}),a=this.resolve(l.ParticipantManager).getMap(e.conversation.id);for(const t of Object.keys(null!==(n=e.blockDuration)&&void 0!==n?n:{}))if(!(null===(r=null==i?void 0:i.failed_members)||void 0===r?void 0:r.find((e=>k.fromValue(t).eq(e))))&&a.has(t)){const n=a.get(t);n.blocked=e.block,this.resolve(l.ParticipantManager).upsert(e.conversation.id,n)}return e.conversation}))}getBlockList(e={}){var t;return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox());const n=yield this.api.GetBlockList({cursor:e.cursor?k.fromValue(e.cursor):k.ZERO,limit:null!==(t=e.limit)&&void 0!==t?t:20,inboxType:e.inboxType});return{blockList:n.user_info.map((e=>({userId:e.user_id.toString(),createTime:e.create_time.toString()}))),hasMore:null==n?void 0:n.has_more,cursor:null==n?void 0:n.next_cursor}}))}setBlockList(e){return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox()),yield this.api.SetBlockList({applySet:e.value,blocklist:e.userId.map((e=>k.fromValue(e))),inboxType:e.inboxType})}))}checkInBlockList(e){return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.inboxType&&(e.inboxType=this.resolve(l.InboxType).getDefaultInbox());return(yield this.api.CheckInBlockList({userToCheck:k.fromValue(e.userId),inboxType:e.inboxType})).in_blocklist}))}broadcastCreateMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=Object.assign({},e.ext),n=Mt.createClientMessage(this.ctx,{type:e.type,content:e.content,ext:t,id:u(),conversationId:e.conversation.id,mentionedUsers:e.mentionedUsers||[],conversationShortId:e.conversation.shortId,conversationType:e.conversation.type});return n.flightStatus=i.b3.Created,n.indexInConversation=e.conversation.lastMessageIndex.add(1),n.orderInConversation=e.conversation.lastMessageOrder.add(1),(void 0===e.insert||e.insert)&&(yield this.resolve(l.BroadcastManager).processNewMessage(n,i.v$.Offline)),n.sendFunc=this.broadcastSendMessage.bind(this),n}))}broadcastReceiveMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.broadcastReceiveMessageWithType(e);return{msgs:t.msgs,hasMore:t.hasMore,cursor:t.cursor}}))}broadcastUserCounter(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=e.conversation.map((e=>({shortId:k.fromString(e.shortId),type:e.type}))),n=yield this.api.BroadcastUserCounter({conversations:t}),r={};for(const e of n.infos)r[e.conversation_short_id.toString()]=e.counter;return r}))}broadcastGetConversationOnline(e){return(0,S.mG)(this,void 0,void 0,(function*(){return this.resolve(l.BroadcastManager).getWithOnline(e.conversationId,e.conversationId,s.m.ConversationType.BROADCAST_CHAT)}))}broadcastGetConversation(e){return this.resolve(l.BroadcastManager).getConversation(e.conversationId)}modifyMessageProperty(e){var t,n,r,o;return(0,S.mG)(this,void 0,void 0,(function*(){const a={success:!1,payload:e.message},c=this.resolve(l.ConversationManager).getRaw(e.message.conversationId);if(!c)return a;for(const r of e.modifyContent){const o=null!==(n=null===(t=e.message.property[r.key])||void 0===t?void 0:t.findIndex((e=>{var t;return e.idempotentId===(null!==(t=r.idempotentId)&&void 0!==t?t:this.ctx.option.userId)})))&&void 0!==n?n:-1;r.operation||(r.operation=-1===o?s.m.OPERATION_TYPE.ADD_PROPERTY_ITEM:s.m.OPERATION_TYPE.REMOVE_PROPERTY_ITEM)}const u=e.modifyContent.map((e=>{var t;return Object.assign(Object.assign({},e),{idempotentId:null!==(t=e.idempotentId)&&void 0!==t?t:this.ctx.option.userId,operation:e.operation})}));let f;Dt.mergeOperationToCurrent(e.message,u),this.resolve(l.MessageManager).upsert(e.message),this.resolve(l.EventBus).emit(i.c5.MessagePropertyUpsert,this,e.message);try{f=yield this.api.ModifyMessageProperty({conversationId:c.id,conversationShortId:k.fromValue(c.shortId),conversationType:c.type,serverId:k.fromValue(e.message.serverId),clientId:e.message.clientId,ticket:c.ticket,modifyContent:u,inboxType:c.inboxType})}catch(t){a.success=!1,a.statusCode=null==f?void 0:f.status,a.statusMsg=t.msg,a.body=f;for(const t of e.modifyContent){const n=null!==(o=null===(r=e.message.property[t.key])||void 0===r?void 0:r.findIndex((e=>{var n;return e.idempotentId===(null!==(n=t.idempotentId)&&void 0!==n?n:this.ctx.option.userId)})))&&void 0!==o?o:-1;-1!==n&&(e.message.property[t.key][n].status=bt.Failed)}return this.resolve(l.MessageManager).upsert(e.message),this.resolve(l.EventBus).emit(i.c5.MessagePropertyUpsert,this,e.message),a}return[s.m.ModifyMessagePropertyStatus.MODIFY_PROPERTY_SUCCESS,s.m.ModifyMessagePropertyStatus.MODIFY_PROPERTY_REPEAT_REQUEST].includes(null==f?void 0:f.status)&&(a.success=!0),e.message.version=null==f?void 0:f.version,this.resolve(l.MessageManager).upsert(e.message),this.resolve(l.EventBus).emit(i.c5.MessagePropertyUpsert,this,e.message),a.checkCode=k.ZERO,a.checkMsg="",a.statusCode=f.status,a.statusMsg="",a.body=f,a}))}markMessage(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=this.resolve(l.ConversationManager).get(e.message.conversationId);if(e.message.isOffline)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,sender:this,msg:"offline message cant be marked",reachServer:!1});yield this.api.MarkMessage({conversationId:e.message.conversationId,conversationShortId:k.fromValue(e.message.conversationShortId),conversationType:e.message.conversationType,serverMessageId:k.fromValue(e.message.serverId),actionType:e.actionType,doAction:null===(t=e.doAction)||void 0===t||t,sortTime:k.fromValue(null!==(n=e.sortTime)&&void 0!==n?n:k.ZERO),tag:void 0!==e.tag?k.fromValue(e.tag):void 0,inboxType:r.inboxType})}))}pullMarkMessage(e){var t,n,r,o,i,s,a,c;return(0,S.mG)(this,void 0,void 0,(function*(){const u=yield this.api.PullMarkMessage({conversationId:null===(t=e.conversation)||void 0===t?void 0:t.id,conversationShortId:void 0===(null===(n=e.conversation)||void 0===n?void 0:n.shortId)?void 0:k.fromValue(e.conversation.shortId),conversationType:null===(r=e.conversation)||void 0===r?void 0:r.type,cursor:k.fromValue(null!==(o=e.cursor)&&void 0!==o?o:k.ZERO),asc:null!==(i=e.ascending)&&void 0!==i&&i,limit:k.fromValue(null!==(s=e.limit)&&void 0!==s?s:50),actionType:e.actionType,tag:void 0!==e.tag?k.fromValue(e.tag):void 0,inboxType:null!==(c=null===(a=e.conversation)||void 0===a?void 0:a.inboxType)&&void 0!==c?c:0}),l=u.body.pull_mark_message_body,f=[];return l.messages.forEach((e=>{const t=Mt.fromServerMessage(this.ctx,e,u.log_id);f.push(t)})),{message:f,hasMore:l.has_more,cursor:l.next_cursor}}))}batchUnmarkMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){if(void 0===e.messages||0===e.messages.length)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"invalid message list",sender:this});const n=yield this.api.BatchUnmarkMessage({conversationId:e.messages[0].conversationId,conversationShortId:k.fromValue(e.messages[0].conversationShortId),conversationType:e.messages[0].conversationType,serverMessageIds:e.messages.map((e=>k.fromValue(e.serverId))),actionType:e.actionType,tag:void 0!==e.tag?k.fromValue(e.tag):void 0});return{success:0===n.status,checkCode:n.check_code,checkMsg:n.check_message,statusCode:null!==(t=n.status)&&void 0!==t?t:-1,body:n,payload:e.messages}}))}markMessageUnreadCountReport(e){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){const o={};if(void 0!==e.tagUnreadCount)for(const t of Object.keys(e.tagUnreadCount))o[t]=k.fromNumber(e.tagUnreadCount[t]);const i=yield this.api.MarkMsgUnreadCountReport({conversationId:null===(t=null==e?void 0:e.conversation)||void 0===t?void 0:t.id,conversationShortId:void 0===(null===(n=null==e?void 0:e.conversation)||void 0===n?void 0:n.shortId)?void 0:k.fromValue(null==e?void 0:e.conversation.shortId),conversationType:null===(r=null==e?void 0:e.conversation)||void 0===r?void 0:r.type,totalUnreadCount:void 0!==e.totalUnreadCount?k.fromNumber(e.totalUnreadCount):void 0,tagUnreadCount:o});return{setTotalStatus:i.set_total_status,failedTagList:i.failed_tag_list}}))}markMessageGetUnreadCount(e){var t,n,r,o,i,s;return(0,S.mG)(this,void 0,void 0,(function*(){const a=yield this.api.MarkMsgGetUnreadCount({conversationId:null===(t=null==e?void 0:e.conversation)||void 0===t?void 0:t.id,conversationShortId:void 0===(null===(n=null==e?void 0:e.conversation)||void 0===n?void 0:n.shortId)?void 0:k.fromValue(null==e?void 0:e.conversation.shortId),conversationType:null===(r=null==e?void 0:e.conversation)||void 0===r?void 0:r.type,getTotal:null!==(o=e.getTotal)&&void 0!==o&&o,tags:null===(i=e.tags)||void 0===i?void 0:i.map((e=>k.fromValue(e)))}),c=null!==(s=a.tag_unread_count)&&void 0!==s?s:{},u={};for(const e of Object.keys(c))u[At(e).toString()]=c[e].toNumber();return{tagUnreadCount:u,totalCount:a.total_count,failedTagList:a.failed_tag_list}}))}getMessageByServerId(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=this.resolve(l.MessageManager).getByServerIdRaw(e.conversation.id,e.serverMessageId);if(r)return r;try{const r=yield this.api.GetMessageByServerId({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,serverId:k.fromString(e.serverMessageId),inboxType:e.conversation.inboxType}),o=null===(n=null===(t=r.body)||void 0===t?void 0:t.get_message_by_id_body)||void 0===n?void 0:n.msg_info;return o.body?Mt.fromServerMessage(this.ctx,o.body,r.log_id):null}catch(e){return null}}))}getMessageReferenceList(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){let r;if(e.message.isRootReference)r=e.message;else{const o=this.resolve(l.ConversationManager).get(e.message.conversationId),i=null===(n=null===(t=e.message.referenceInfo)||void 0===t?void 0:t.root_message_id)||void 0===n?void 0:n.toString();if(void 0===i)return[];const s=yield this.getMessageByServerId({conversation:o,serverMessageId:i});if(!s)return[];r=s}const o=[r];return o.push(...this.resolve(l.MessageManager).getList(r.conversationId).filter((e=>{var t,n;return(null===(n=null===(t=e.referenceInfo)||void 0===t?void 0:t.root_message_id)||void 0===n?void 0:n.toString())===r.serverId}))),o}))}convertVoiceToText(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.serverId))throw new w({ctx:this.ctx,type:i.NI.MPInvalidArgument,msg:"message is offline",reachServer:!1,sender:this});if((null==e?void 0:e.type)!==s.m.MessageType.MESSAGE_TYPE_AUDIO)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"message is not audio",reachServer:!1,sender:this});const n=null===(t=JSON.parse(null==e?void 0:e.content))||void 0===t?void 0:t.__files,r=Object.keys(n),{type:o,ext:a}=n[r[0]];if("wav"!==o)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"audio content is not wav",reachServer:!1,sender:this});if(a[i.v9.FileExtKeyAudioAsrText])return e;try{const t=yield this.api.ConvertVoiceToText({content:null==e?void 0:e.content,uid:k.fromValue(this.ctx.option.userId),server_message_id:k.fromValue(null==e?void 0:e.serverId),audioOptions:{vid:a[dt.I.Vid]},conv_short_id:k.fromValue(null==e?void 0:e.conversationShortId)}),{audio:n,check_code:r,check_message:o}=null==t?void 0:t.audio_recognition_body;return r&&o&&(e.ext[i.v9.RecognitionResponseCheckCode]=null==r?void 0:r.toString(),e.ext[i.v9.RecognitionResponseCheckMsg]=null==o?void 0:o.toString()),e.content=null==n?void 0:n.content,this.resolve(l.MessageManager).upsert(e),e}catch(e){throw new w({ctx:this.ctx,type:i.NI.ServerError,msg:"Voice conversion failed",reachServer:!1,sender:this})}}))}install(){this.api=new Lt(this.getContext()),this.ctx.register(l.BroadcastManager,new Ft(this.ctx)),this.ctx.register(l.ExtensionApi,this.api),this.ctx.register(l.ExtensionPlugin,this),this.instance.deleteConversation=this.extendFunc(this.deleteConversation),this.instance.deleteMessage=this.extendFunc(this.deleteMessage),this.instance.leaveConversation=this.extendFunc(this.leaveConversation),this.instance.getMessageReadReceipt=this.extendFunc(this.getMessageReadReceipt),this.instance.getConversationListByTop=this.extendFunc(this.getConversationListByTop),this.instance.getConversationListByFavorite=this.extendFunc(this.getConversationListByFavorite),this.instance.addParticipants=this.extendFunc(this.addParticipants),this.instance.removeParticipants=this.extendFunc(this.removeParticipants),this.instance.updateParticipant=this.extendFunc(this.updateParticipant),this.instance.setConversationSettingInfo=this.extendFunc(this.setConversationSettingInfo),this.instance.setConversationCoreInfo=this.extendFunc(this.setConversationCoreInfo),this.instance.upsertConversationSettingExtInfo=this.extendFunc(this.upsertConversationSettingExtInfo),this.instance.upsertConversationCoreExtInfo=this.extendFunc(this.upsertConversationCoreExtInfo),this.instance.setConversationWeakMuteConfig=this.extendFunc(this.setConversationWeakMuteConfig),this.instance.getConversationParticipants=this.extendFunc(this.getConversationParticipants),this.instance.getConversationParticipantsAsync=this.extendFunc(this.getConversationParticipantsAsync),this.instance.getConversationParticipantsByPage=this.extendFunc(this.getConversationParticipantsByPage),this.instance.updateConversationReadReceipt=this.extendFunc(this.updateConversationReadReceipt),this.instance.sendUserAction=this.extendFunc(this.sendUserAction),this.instance.sendInputStatus=this.extendFunc(this.sendInputStatus),this.instance.upsertMessageExt=this.extendFunc(this.upsertMessageExt),this.instance.dissolveConversation=this.extendFunc(this.dissolveConversation),this.instance.modifyMessageProperty=this.extendFunc(this.modifyMessageProperty),this.instance.unreadCountReport=this.extendFunc(this.unreadCountReport),this.instance.getServerUnreadCountByConversation=this.extendFunc(this.getServerUnreadCountByConversation),this.instance.getServerUnreadCountByUser=this.extendFunc(this.getServerUnreadCountByUser),this.instance.getUserConversationList=this.extendFunc(this.getUserConversationList),this.instance.blockConversation=this.extendFunc(this.blockConversation),this.instance.blockMember=this.extendFunc(this.blockMember),this.instance.sendP2PMessage=this.extendFunc(this.sendP2PMessage),this.instance.setBlockList=this.extendFunc(this.setBlockList),this.instance.getBlockList=this.extendFunc(this.getBlockList),this.instance.checkInBlockList=this.extendFunc(this.checkInBlockList),this.instance.broadcastCreateMessage=this.extendFunc(this.broadcastCreateMessage),this.instance.broadcastReceiveMessage=this.extendFunc(this.broadcastReceiveMessage),this.instance.broadcastUserCounter=this.extendFunc(this.broadcastUserCounter),this.instance.broadcastGetConversationOnline=this.extendFunc(this.broadcastGetConversationOnline),this.instance.broadcastGetConversation=this.extendFunc(this.broadcastGetConversation),this.instance.markMessage=this.extendFunc(this.markMessage),this.instance.pullMarkMessage=this.extendFunc(this.pullMarkMessage),this.instance.getMessageByServerId=this.extendFunc(this.getMessageByServerId),this.instance.batchUnmarkMessage=this.extendFunc(this.batchUnmarkMessage),this.instance.markMessageUnreadCountReport=this.extendFunc(this.markMessageUnreadCountReport),this.instance.markMessageGetUnreadCount=this.extendFunc(this.markMessageGetUnreadCount),this.instance.getMessageReferenceList=this.extendFunc(this.getMessageReferenceList),this.instance.convertVoiceToText=this.extendFunc(this.convertVoiceToText),this.addEventHandler(),this.resolve(l.MessageManager).injectProcessor(new Gt(this.ctx)),this.resolve(l.MessageManager).injectProcessor(new Ht(this.ctx)),this.resolve(l.MessageManager).injectProcessor(new Vt(this.ctx))}receivePacket(e){return(0,S.mG)(this,void 0,void 0,(function*(){e.cmd===s.m.IMCMD.NEW_BROADCAST_MSG_NOTIFY&&(yield this.receiveBroadcastPacket(e)),e.cmd===s.m.IMCMD.NEW_P2P_MSG_NOTIFY&&(yield this.receiveP2PMessage(e))}))}receiveP2PMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){if(null===(t=e.body)||void 0===t?void 0:t.has_new_p2p_message_notify){const t=e.body.has_new_p2p_message_notify,n=new qt;n.sendType=t.send_type,n.sender=t.sender.toString(),n.secSender=t.sec_sender,n.conversationId=t.conversation_id,n.conversationShortId=t.conversation_short_id.toString(),n.conversationType=t.conversation_type,n.type=t.message_type,n.content=t.content,n.ext=t.ext,n.createTime=new Date(t.create_time.toNumber()),this.resolve(l.EventBus).emit(i.c5.ReceiveNewP2PMessage,this,n)}}))}receiveBroadcastPacket(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=e.body.has_new_message_notify,r=n.message,o=Mt.fromServerMessage(this.ctx,r,e.log_id);o.ext||(o.ext={}),yield this.resolve(l.BroadcastManager).processNewMessage(o,i.v$.Online);const s=this.resolve(l.BroadcastManager).getConversation(o.conversationId),a=s.localIndex;if(s.setConversationCursor(n.next_cursor),a.gt(k.ZERO)&&(null===(t=n.previous_cursor)||void 0===t?void 0:t.gt(a))){let e=!0,t=a,n=0;const r=5;for(;e&&n<r;){const r=yield this.broadcastReceiveMessageWithType({conversation:s,cursor:t,limit:50,reverse:!1,pullType:1});e=r.hasMore,t=r.cursor,yield this.resolve(l.BroadcastManager).processNewMessagesFromPull(r.msgs,i.v$.BroadcastLoadMore,r.log_id),n++}}}))}dispose(){return(0,S.mG)(this,void 0,void 0,(function*(){this.resolve(l.ParticipantManager).dispose(),this.resolve(l.BroadcastManager).dispose()}))}addEventHandler(){this.ctx.option.autoReadIndex&&this.resolve(l.EventBus).subscribe(i.c5.MessageUpsert,(e=>(0,S.mG)(this,void 0,void 0,(function*(){if(e.flightStatus===i.b3.Inflight)return;const t=this.resolve(l.ConversationManager).getRaw(e.conversationId);if(!t)return;if(0===this.resolve(l.ParticipantManager).getRaw(t.id).length)return;const n=this.resolve(l.ParticipantManager).getByUserIdRaw(t.id,e.sender);n&&e.moveReadIndex&&(n.readIndex=e.indexInConversation,n.readOrder=e.orderInConversation,this.resolve(l.ParticipantManager).upsert(t.id,n),g.ctxDebug(this.ctx,`auto readindex with read:${n.readIndex.toString()} & order:${n.readOrder.toString()}`))})))),this.resolve(l.EventBus).subscribe(i.c5.ReceiveNewP2PMessage,(e=>(0,S.mG)(this,void 0,void 0,(function*(){if(e.type===s.m.MessageType.MESSAGE_TYPE_READ_COMMAND){const t=this.resolve(l.ConversationManager).getWithShortIdRaw(e.conversationShortId);if(!t)return;const n=P.parse(e.content),r=k.fromValue(n.P2PSender).toString(),o=this.resolve(l.ParticipantManager).getByUserIdRaw(t.id,r);if(!o)return;const s=o.readIndex,a=k.fromValue(n.P2PSenderReadIndex);if(s.gte(a))return;o.readIndex=a,this.resolve(l.ParticipantManager).upsert(t.id,o),this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,t),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),g.ctxDebug(this.ctx,`p2p update ${o.userId} readindex: ${s.toString()} to ${a.toString()}`)}}))))}broadcastReceiveMessageWithType(e){var t,n,r,o,s;return(0,S.mG)(this,void 0,void 0,(function*(){const a=yield this.api.BroadcastReceiveMessage({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,cursor:e.cursor?k.fromValue(e.cursor):e.conversation.localIndex,limit:e.limit?k.fromValue(e.limit):k.fromNumber(20),reverse:null!==(t=e.reverse)&&void 0!==t&&t,pullType:null!==(n=e.pullType)&&void 0!==n?n:0,inboxType:e.conversation.inboxType}),c=null===(r=a.body)||void 0===r?void 0:r.broadcast_recv_message_body,u=null!==(s=null===(o=c.messages)||void 0===o?void 0:o.map((e=>Mt.fromServerMessage(this.ctx,e,a.log_id))))&&void 0!==s?s:[];return yield this.resolve(l.BroadcastManager).processNewMessagesFromPull(u,i.v$.BroadcastLoadMore,a.log_id),c.next_cursor&&e.conversation.setConversationCursor(c.next_cursor),{msgs:u,hasMore:c.has_more,cursor:c.next_cursor,log_id:a.log_id}}))}broadcastSendMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=this.resolve(l.BroadcastManager).getConversation(e.conversationId),r={success:!1,payload:e};e.flightStatus=i.b3.Inflight;try{const o=yield this.api.BroadcastSendMessage({conversationId:e.conversationId,conversationShortId:k.fromString(e.conversationShortId),conversationType:e.conversationType,clientId:e.clientId,content:e.content,ticket:n.ticket,ext:e.ext,type:e.type,mentionedUsers:e.mentionedUsers.map((e=>k.fromString(e))),inboxType:n.inboxType}),a=null===(t=o.body)||void 0===t?void 0:t.broadcast_send_message_body;if(r.body=a,r.checkCode=a.check_code,r.checkMsg=a.check_message,r.statusCode=a.status,r.statusMsg=a.extra_info,this.ctx.option.debug&&(e.ext[i.v9.LocalLogId]=o.log_id),0===a.status){const t=a.server_message_id.toString();e.serverId=t,e.flightStatus=i.b3.Succeeded,r.success=!0,e.isOffline=!1}else e.flightStatus=i.b3.Rejected,a.status===s.m.SendMessageStatus.CHECK_MSG_NOT_PASS_BUT_SELF_VISIBLE&&(e.flightStatus=i.b3.SelfVisible)}catch(t){e.flightStatus=i.b3.Failed}return r}))}getReadReceipt(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(e.batchFetch){const{conversation:t}=e,n=(yield this.api.BatchGetConversationParticipantsReadIndex({conversationId:[t.id],conversationShortId:[k.fromString(t.shortId)],min_index_required:!0})).conversationParticipantsReadIndex,r=(null==n?void 0:n[0].participantReadIndex)||[],o=[],i=[];return r.forEach((e=>{e.index&&o.push({user_id:k.fromString(e.user_id.toString()),index:k.fromString(e.index.toString())}),i.push({user_id:k.fromString(e.user_id.toString()),index:k.fromString(e.index_min.toString())})})),{readIndexs:o,minIndexs:i}}{const t=yield this.api.GetConversationParticipantsReadIndexV3({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType}),n=yield this.api.GetConversationParticipantsMinIndexV3({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType});return{readIndexs:(null==t?void 0:t.indexes)||[],minIndexs:n.indexes}}}))}getNormalMsgUnreadCount(e){return e.isMuted?0:e.pushStatus===i.Bs.PartAllow?e.unreadCountWithWhiteList:e.unreadCount}}class zt{constructor(e){this.slardar=e}emitError(e,t){"function"==typeof this.slardar.captureException&&e.type!==i.NI.NetworkError&&this.slardar.captureException(e,Object.assign(Object.assign({},t),{type:`${e.type}:${i.NI[e.type]}`,msg:e.msg,logid:e.logid,args:e.args}))}emitNetwork(e,t,n){void 0!==t&&0!==t.status_code&&this.slardar.sendLog({level:"error",content:`Response Error:${t.status_code}, cmd: ${t.cmd} msg: ${t.error_desc}, logid: ${t.log_id}`,extra:Object.assign({cmd:`${t.cmd}`},n)})}emitEvent(e,t,n){}emitLog(e,t){if(e===f.debug)return;const n={};t.forEach(((e,t)=>{n[t]=e})),this.slardar.sendLog({level:f[e],content:t.join(","),extra:Object.assign({},n)})}emitTracker(e,t){this.slardar.sendLog({level:"debug",content:e,extra:t})}emitMetrics(e,t={},n={}){}}class Wt{constructor(e){this.slardar=e}emitError(e,t){e.type!==i.NI.NetworkError&&this.slardar("captureException",e,t)}emitNetwork(e,t,n){void 0!==t&&0!==t.status_code&&this.slardar("emit","log",{value:`Response Error:${t.status_code}, cmd: ${t.cmd} msg: ${t.error_desc}, logid: ${t.log_id}`,level:"error",tags:Object.assign({cmd:`${t.cmd}`},n)})}emitEvent(e,t,n){}emitLog(e,t){if(e===f.debug)return;const n={};t.forEach(((e,t)=>{n[t]=e})),this.slardar("emit","log",{value:t.join(","),level:f[e],tags:n})}emitTracker(e,t){this.slardar("emit","log",{value:e,level:"debug",tags:t})}emitMetrics(e,t={},n={}){}}class $t extends st{constructor(){super(...arguments),this.ignoreMethods=["getStrangerTotalUnread","getLocalStrangerConversation","checkRtcRequirements","parseContent","unreadCountReport","getMessageReferencedInfo","initAdapter","getConversationParticipants","broadcastGetConversation","createMessage","createTextMessage","createFileMessage","sendMessage","getMessageReadReceipt","createConversation","getConversationOnline","getConversationListOnline","getStrangerPreview","emojify","randomEmoji","getAllEmoji","constructor","getUserCursor","setUserCursor","init","getConversation","getConversationList","dispose","intervalFunc","receivePacket","messageFilter","sendMessageObject","tickerUpdate","prepareHistoryForInbox","prepareToken","clearCache","resolve","getContext","processInitMessage","processInitConversation","patchMessage","clientAck"]}beforeHook(e,t){if(this.ctx.option.aspectBefore)return this.ctx.option.aspectBefore({name:e,params:t})}afterHook(e,t,n,r){const o=this.resolve(l.Monitor).emitDuration(m.BizApiInvoke+m.SuccessSuffix,n,{name:e});this.ctx.option.aspectAfter&&this.ctx.option.aspectAfter({name:e,params:t,duration:o,result:r})}errorHook(e,t,n,r){const o=this.resolve(l.Monitor).emitDuration(m.BizApiInvoke+m.ErrorSuffix,r,{name:e,error:n.type?`${n.type}:${i.NI[n.type]}`:"unknown"});if(this.ctx.option.aspectError){const r=this.ctx.option.aspectError({name:e,params:t,duration:o,error:n});return void 0===r||Boolean(r)}return!0}wrapMetricsAsync(e,t){let n=0;return r=>(0,S.mG)(this,void 0,void 0,(function*(){try{if(!1===this.beforeHook(e,r))return;n=b.performanceNow();const o=yield t.call(this.instance,r);return this.afterHook(e,r,n,o),o}catch(t){if(this.errorHook(e,r,t,n))throw t}}))}getFuncs(){let e=[];const{instance:t}=this,n=Object.getOwnPropertyNames(t);e=e.concat(n);const r=Object.getPrototypeOf(t),o=Object.getOwnPropertyNames(r);e=e.concat(o);const i=Object.getOwnPropertyNames(Object.getPrototypeOf(r));return e=e.concat(i),e.filter((e=>"function"==typeof this.instance[e]&&!this.ignoreMethods.includes(e)&&!e.startsWith("__internal")))}install(){this.register(l.MetricsPlugin,this),void 0===this.ctx.option.timeCalibration&&(this.ctx.option.timeCalibration=!0),this.ctx.option.monitor=this.unifyMonitorConfig();const e=this.initMetricsMonitor();void 0!==e&&(g.ctxDebug(this.ctx,"install metrics monitor:",e),this.ctx.option.monitor.push(e));const t=this.instance,n=this.getFuncs();for(const e of n){const n=t[e];g.ctxDebug(this.ctx,`wrapping metrics for ${e}`),t[e]=this.wrapMetricsAsync(e,n)}this.subscribeTrackerEvent()}receivePacket(e){return(0,S.mG)(this,void 0,void 0,(function*(){}))}subscribeTrackerEvent(){this.resolve(l.EventBus).subscribe(i.c5.Error,(e=>{this.resolve(l.Monitor).emitTracker(rt.Exception,{error_stack:e.stack})})),this.resolve(l.EventBus).subscribe(i.c5.InitFinish,(e=>{const t=this.instance.getConversationList(),n=t.map((e=>e.getMessageList().length)).reduce(((e,t)=>e+t),0);this.resolve(l.Monitor).emitTracker(rt.InitHandler,{conv_count:t.length,total_msg_count:n,is_success:"1"})}))}unifyMonitorConfig(){const e=this.ctx.option.monitor;return Array.isArray(e)?e:void 0!==e?(this.ctx.option.monitor=[e],this.ctx.option.monitor):(this.ctx.option.monitor=[],this.ctx.option.monitor)}initMetricsMonitor(){if("function"==typeof this.ctx.option.metrics){const e=this.ctx.option.metrics;return"function"==typeof e.sendEvent&&"function"==typeof e.sendLog?(g.ctxDebug(this.ctx,"use provided @slardar/web instance",this.ctx.option.metrics),new zt(this.ctx.option.metrics)):(g.ctxDebug(this.ctx,"use provided @slardar/sdk instance",this.ctx.option.metrics),new Wt(this.ctx.option.metrics))}}}class Yt extends pt{GetMessagesCheckInfoInConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_messages_checkinfo_in_conversation_body:{conversation_id:e.conversationId,conversation_short_id:k.fromValue(e.conversationShortId),conversation_type:e.conversationType,cursor_reverse_begin:k.fromValue(e.cursorReverseBegin),cursor_reverse_end:k.fromValue(e.cursorReverseEnd),expect_msg_total_count:e.expectedTotalMessageCount}});return(yield this.send(t,s.m.IMCMD.GET_MESSAGES_CHECKINFO_IN_CONVERSATION,{inboxType:e.inboxType})).get_messages_checkinfo_in_conversation_body}))}GetConversationsCheckInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({});return(yield this.send(t,s.m.IMCMD.GET_CONVERSATIONS_CHECKINFO,{inboxType:e.inboxType})).get_conversations_checkinfo_body}))}}!function(e){e.SdkVersion="sdk.version",e.DbVersion="sdk.db.version",e.DbLastOpen="sdk.db.last_open",e.DbEncyption="sdk.db.encryption",e.UserToken="user.token"}(xt||(xt={}));class Zt extends d{}var Xt,Jt,Qt=function(e,t){return t.some((function(t){return e instanceof t}))};var en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakMap;var sn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function an(e){sn=e(sn)}function cn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(fn(this),n),ln(en.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(e.apply(fn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=e.call.apply(e,[fn(this),t].concat(r));return nn.set(i,t.sort?t.sort():[t]),ln(i)}}function un(e){return"function"==typeof e?cn(e):(e instanceof IDBTransaction&&function(e){if(!tn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));tn.set(e,t)}}(e),Qt(e,Xt||(Xt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,sn):e)}function ln(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",o),t.removeEventListener("error",i)},o=function(){e(ln(t.result)),r()},i=function(){n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}))).then((function(e){e instanceof IDBCursor&&en.set(e,t)})).catch((function(){})),on.set(n,t),n;var t,n;if(rn.has(e))return rn.get(e);var r=un(e);return r!==e&&(rn.set(e,r),on.set(r,e)),r}var fn=function(e){return on.get(e)};function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==hn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(){yn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==hn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(hn(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function gn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}var mn=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],bn=new Map;function wn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(bn.get(t))return bn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,o=_n.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(o||mn.includes(n))){var i=function(){var e,t=(e=yn().mark((function e(t){var i,s,a,c,u,l,f=arguments;return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,o?"readwrite":"readonly"),a=s.store,c=f.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=f[l];return r&&(a=a.index(u.shift())),e.next=6,Promise.all([(i=a)[n].apply(i,u),o&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){gn(i,r,o,s,a,"next",e)}function a(e){gn(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();return bn.set(t,i),i}}}function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(){kn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==xn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(xn(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Cn(e){return new Pn(e,0)}function In(e){var t,n;function r(t,n){try{var i=e[t](n),s=i.value,a=s instanceof Pn;Promise.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}o(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,s){var a={key:e,arg:o,resolve:i,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Pn(e,t){this.v=e,this.k=t}an((function(e){return dn(dn({},e),{},{get:function(t,n,r){return wn(t,n)||e.get(t,n,r)},has:function(t,n){return!!wn(t,n)||e.has(t,n)}})})),In.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},In.prototype.next=function(e){return this._invoke("next",e)},In.prototype.throw=function(e){return this._invoke("throw",e)},In.prototype.return=function(e){return this._invoke("return",e)};var Tn=["continue","continuePrimaryKey","advance"],An={},jn=new WeakMap,Rn=new WeakMap,Mn={get:function(e,t){if(!Tn.includes(t))return e[t];var n=An[t];return n||(n=An[t]=function(){var e;jn.set(this,(e=Rn.get(this))[t].apply(e,arguments))}),n}};function Bn(){return Dn.apply(this,arguments)}function Dn(){var e;return e=kn().mark((function e(){var t,n,r,o=arguments;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this)instanceof IDBCursor){e.next=5;break}return e.next=4,Cn((n=t).openCursor.apply(n,o));case 4:t=e.sent;case 5:if(t){e.next=7;break}return e.abrupt("return");case 7:r=new Proxy(t,Mn),Rn.set(r,t),on.set(r,fn(t));case 11:if(!t){e.next=20;break}return e.next=14,r;case 14:return e.next=16,Cn(jn.get(r)||t.continue());case 16:t=e.sent,jn.delete(r),e.next=11;break;case 20:case"end":return e.stop()}}),e,this)})),Dn=function(){return new In(e.apply(this,arguments))},Dn.apply(this,arguments)}function Ln(e,t){return t===Symbol.asyncIterator&&Qt(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&Qt(e,[IDBIndex,IDBObjectStore])}an((function(e){return En(En({},e),{},{get:function(t,n,r){return Ln(t,n)?Bn:e.get(t,n,r)},has:function(t,n){return Ln(t,n)||e.has(t,n)}})}));class Nn{static toStore(e){var t,n,r,o,i,s,a,c,u,l,f;const h=new Nn;return h.coreInfo={conversationId:e.coreInfo.conversationId,version:null===(t=e.coreInfo.version)||void 0===t?void 0:t.toString(),name:e.coreInfo.name,desc:e.coreInfo.desc,icon:e.coreInfo.icon,notice:e.coreInfo.notice,owner:e.coreInfo.owner,secOwner:e.coreInfo.secOwner,innerExt:e.coreInfo.ext,inboxType:e.coreInfo.inboxType},h.firstPageParticipant={cursor:null===(r=null===(n=e.firstPageParticipant)||void 0===n?void 0:n.cursor)||void 0===r?void 0:r.toString(),hasMore:null===(o=e.firstPageParticipant)||void 0===o?void 0:o.has_more,participants:null===(s=null===(i=e.firstPageParticipant)||void 0===i?void 0:i.participants)||void 0===s?void 0:s.map((e=>{var t,n,r;return{userId:null===(t=e.user_id)||void 0===t?void 0:t.toString(),secUid:e.sec_uid,sortOrder:null===(n=e.sort_order)||void 0===n?void 0:n.toString(),role:e.role,alias:e.alias,blocked:e.blocked,leftBlockTime:null===(r=e.left_block_time)||void 0===r?void 0:r.toString()}}))},h.id=e.id,h.isMember=e.isMember,h.isOffline=e.isOffline,h.participantCount=e.participantCount,h.settingInfo={conversationId:e.settingInfo.conversationId,version:null===(a=e.settingInfo.version)||void 0===a?void 0:a.toString(),stickTop:e.settingInfo.stickTop,mute:e.settingInfo.mute,favor:e.settingInfo.favor,innerExt:e.settingInfo.ext,minIndex:null===(c=e.settingInfo.minIndex)||void 0===c?void 0:c.toString(),readIndex:null===(u=e.settingInfo.readIndex)||void 0===u?void 0:u.toString(),setTopTime:null===(l=e.settingInfo.setTopTime)||void 0===l?void 0:l.toString(),setFavoriteTime:null===(f=e.settingInfo.setFavoriteTime)||void 0===f?void 0:f.toString(),pushStatus:e.settingInfo.pushStatus},h.shortId=e.shortId,h.ticket=e.ticket,h.type=e.bizType,h}static fromStore(e,t){var n,r,o,i,a,c,u,l,f,h,p,d;const v=new Rt(e),y=new kt(v);y.version=k.fromValue(null!==(r=null===(n=t.coreInfo)||void 0===n?void 0:n.version)&&void 0!==r?r:0),y.name=t.coreInfo.name,y.desc=t.coreInfo.desc,y.icon=t.coreInfo.icon,y.notice=t.coreInfo.notice,y.owner=t.coreInfo.owner,y.secOwner=t.coreInfo.secOwner,y.ext=t.coreInfo.innerExt,y.inboxType=t.coreInfo.inboxType;const g=new Ct(v);return g.version=k.fromValue(null!==(i=null===(o=t.settingInfo)||void 0===o?void 0:o.version)&&void 0!==i?i:0),g.stickTop=t.settingInfo.stickTop,g.mute=t.settingInfo.mute,g.favor=t.settingInfo.favor,g.ext=t.settingInfo.innerExt,g.readIndex=k.fromValue(null!==(a=t.settingInfo.readIndex)&&void 0!==a?a:0),g.minIndex=k.fromValue(null!==(c=t.settingInfo.minIndex)&&void 0!==c?c:0),g.setTopTime=k.fromValue(null!==(u=t.settingInfo.setTopTime)&&void 0!==u?u:0),g.setFavoriteTime=k.fromValue(null!==(l=t.settingInfo.setFavoriteTime)&&void 0!==l?l:0),g.pushStatus=t.settingInfo.pushStatus,v.coreInfo=y,v.settingInfo=g,v.firstPageParticipant=s.m.ParticipantsPage.create({cursor:(null===(f=t.firstPageParticipant)||void 0===f?void 0:f.cursor)?k.fromValue(t.firstPageParticipant.cursor):void 0,has_more:null===(h=t.firstPageParticipant)||void 0===h?void 0:h.hasMore,participants:null===(d=null===(p=t.firstPageParticipant)||void 0===p?void 0:p.participants)||void 0===d?void 0:d.map((e=>({user_id:e.userId?k.fromValue(e.userId):void 0,sec_uid:e.secUid,sort_order:e.sortOrder?k.fromValue(e.sortOrder):void 0,role:e.role,alias:e.alias,blocked:e.blocked,left_block_time:e.leftBlockTime?k.fromValue(e.leftBlockTime):void 0})))}),v.id=t.id,v.isMember=t.isMember,v.isOffline=t.isOffline,v.participantCount=t.participantCount,v.shortId=t.shortId,v.ticket=t.ticket,v.bizType=t.type,v}}class Fn{static formatMessageKey(e){return`${e.conversationId}:${e.clientId}`}static convertPropertyStore(e){return e.map((e=>({messageId:e.messageId,conversationId:e.conversationId,key:e.key,userId:e.userId,secUid:e.secUid,createTime:e.createTime,idempotentId:e.idempotentId,value:e.value,version:e.version.toString(),status:e.status})))}static fromPropertyStore(e){return e.map((e=>{const t=new Dt;return t.messageId=e.messageId,t.conversationId=e.conversationId,t.key=e.key,t.userId=e.userId,t.secUid=e.secUid,t.createTime=new Date(e.createTime),t.idempotentId=e.idempotentId,t.value=e.value,t.version=k.fromValue(e.version),t.status=e.status,t}))}static toStore(e){var t,n;const r=new Fn;r.clientId=e.clientId,r.content=e.content,r.conversationId=e.conversationId,r.conversationShortId=e.conversationShortId,r.conversationType=e.conversationBizType,r.createdAt=e.createdAt,r.ext=e.ext,r.indexInConversation=e.indexInConversation.toString(),r.orderInConversation=e.orderInConversation.toString(),r.secSender=e.secSender,r.sender=e.sender,r.serverId=e.serverId,r.serverStatus=e.serverStatus,r.type=e.type,r.version=e.version.toString(),r.property={},r.isOffline=e.isOffline,r.source=e.source,"number"==typeof e.flightStatus&&(r.flightStatus=e.flightStatus);for(const t of Object.keys(e.property))r.property[t]=Fn.convertPropertyStore(e.property[t]);return"number"==typeof e.flightStatus&&(r.flightStatus=e.flightStatus),e.referenceInfo&&(r.referenceInfo={referenceMessageId:e.referenceInfo.referenced_message_id.toString(),hint:e.referenceInfo.hint,refMessageType:e.referenceInfo.ref_message_type.toString(),referenceMessageStatus:e.referenceInfo.referenced_message_status,rootMessageId:null===(t=e.referenceInfo.root_message_id)||void 0===t?void 0:t.toString(),rootMessageConvIndex:null===(n=e.referenceInfo.root_message_conv_index)||void 0===n?void 0:n.toString()}),r}static fromStore(e,t){const n=new Mt(e);n.clientId=t.clientId,n.content=t.content,n.conversationId=t.conversationId,n.conversationShortId=t.conversationShortId,n.conversationBizType=t.conversationType,n.createdAt=new Date(t.createdAt),n.ext=t.ext,n.indexInConversation=k.fromValue(t.indexInConversation),n.orderInConversation=k.fromValue(t.orderInConversation),n.secSender=t.secSender,n.sender=t.sender,n.serverId=t.serverId,n.serverStatus=t.serverStatus,n.type=t.type,n.version=k.fromValue(t.version),n.isOffline=t.isOffline,n.source=t.source,"number"==typeof n.flightStatus&&(t.flightStatus=n.flightStatus),n.property={};for(const e of Object.keys(t.property))n.property[e]=Fn.fromPropertyStore(t.property[e]);return"number"==typeof t.flightStatus&&(n.flightStatus=t.flightStatus),t.referenceInfo&&(n.referenceInfo={referenced_message_id:k.fromValue(t.referenceInfo.referenceMessageId),hint:t.referenceInfo.hint,ref_message_type:k.fromValue(t.referenceInfo.refMessageType),referenced_message_status:t.referenceInfo.referenceMessageStatus,root_message_id:t.referenceInfo.rootMessageId?k.fromValue(t.referenceInfo.rootMessageId):void 0,root_message_conv_index:t.referenceInfo.rootMessageConvIndex?k.fromValue(t.referenceInfo.rootMessageConvIndex):void 0}),n}}class Un{static formatParticipantKey(e){return`${e.conversationId}:${e.userId}`}static toStore(e){var t,n;const r=new Un;return r.userId=e.userId,r.secUid=e.secUid,r.sortOrder=null===(t=e.sortOrder)||void 0===t?void 0:t.toString(),r.role=e.role,r.alias=e.alias,r.conversationId=e.conversationId,r.conversationType=e.conversationType,r.blocked=e.blocked,r.leftBlockTime=null===(n=e.leftBlockTime)||void 0===n?void 0:n.toString(),r.readIndex=e.readIndex.toString(),r.readOrder=e.readOrder.toString(),r.minIndex=e.minIndex.toString(),r}static fromStore(e,t){var n,r,o;const i=new Bt(e);return i.userId=t.userId,i.secUid=t.secUid,i.sortOrder=t.sortOrder?k.fromValue(t.sortOrder):void 0,i.role=t.role,i.alias=t.alias,i.conversationId=t.conversationId,i.conversationType=t.conversationType,i.blocked=t.blocked,i.leftBlockTime=t.leftBlockTime?k.fromValue(t.leftBlockTime):void 0,i.readIndex=k.fromValue(null!==(n=t.readIndex)&&void 0!==n?n:0),i.readOrder=k.fromValue(null!==(r=t.readOrder)&&void 0!==r?r:0),i.minIndex=k.fromValue(null!==(o=t.minIndex)&&void 0!==o?o:0),i}}var Gn,Hn=n(4990);function Vn(e,t,n){const r=n.value;return n.value=function(...e){return(0,S.mG)(this,void 0,void 0,(function*(){let n=0;try{n=b.performanceNow();const o=yield r.call(this,...e);return this.resolve(l.Monitor).emitDuration(Gn.ProxyInvoke+m.SuccessSuffix,n,{name:t}),o}catch(e){throw this.resolve(l.Monitor).emitDuration(Gn.ProxyInvoke+m.ErrorSuffix,n,{name:t}),g.ctxError(this.ctx,`db proxy op: ${t} error:`,e),new w({ctx:this.ctx,type:i.NI.DbOpError,innerError:e,sender:r,msg:`db proxy op: ${t} error`})}}))},n}function qn(e,t,n){var r,o;return(0,S.mG)(this,void 0,void 0,(function*(){try{const e=Hn.lW.from(window.crypto.getRandomValues(new Uint8Array(16)),0,16),i=yield null===(o=null===(r=window.crypto)||void 0===r?void 0:r.subtle)||void 0===o?void 0:o.encrypt({name:"AES-CTR",counter:e,length:128},t,Hn.lW.from(JSON.stringify(n)));return{ciphertext:Hn.lW.from(i).toString("hex"),iv:e.toString("hex")}}catch(t){return g.ctxWarn(e,"encrypt error, using fallback hex, error:",t,"data:",n),e.resolve(l.Monitor).emitCounter(Gn.EncryptError),{ciphertext:Hn.lW.from(JSON.stringify(n)).toString("hex")}}}))}function Kn(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){try{let r;if(n.iv){const e=Hn.lW.from(n.ciphertext,"hex"),o=Hn.lW.from(n.iv,"hex"),i=yield window.crypto.subtle.decrypt({name:"AES-CTR",counter:o,length:128},t,e);r=JSON.parse(Hn.lW.from(new Uint8Array(i)).toString())}else{if(!n.ciphertext)throw new w({ctx:e,type:i.NI.StorageCryptoError,sender:n,msg:"unhandled decrypted data"});r=JSON.parse(Hn.lW.from(n.ciphertext).toString())}return r}catch(t){if(e.resolve(l.Monitor).emitCounter(Gn.DecryptError),t instanceof w)throw t;throw new w({ctx:e,type:i.NI.StorageCryptoError,sender:n,msg:"decryption failed"})}}))}!function(e){e.ProxyInvoke="storage.proxy.invoke",e.IntegrityConversationCheckBefore="storage.integrity.conversation.before",e.IntegrityConversationCheckFix="storage.integrity.conversation.fix",e.CacheInit="storage.cache.init",e.CachePrune="storage.cache.prune",e.CacheRetention="storage.cache.retention",e.PassphraseError="storage.passphrase.error",e.EncryptError="storage.encrypt.error",e.DecryptError="storage.decrypt.error"}(Gn||(Gn={}));class zn extends Zt{init(e){return(0,S.mG)(this,void 0,void 0,(function*(){this.currentUserId=e,this.db=yield function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,o=n.upgrade,i=n.blocking,s=n.terminated,a=indexedDB.open(e,t),c=ln(a);return o&&a.addEventListener("upgradeneeded",(function(e){o(ln(a.result),e.oldVersion,e.newVersion,ln(a.transaction))})),r&&a.addEventListener("blocked",(function(){return r()})),c.then((function(e){s&&e.addEventListener("close",(function(){return s()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),c}(`${zn.DbNamePrefix}:${this.ctx.option.boe?"boe":"prod"}:${this.ctx.option.appId}:${e}`,zn.DbVersion,{upgrade(e,t,n,r){e.createObjectStore("config"),e.createObjectStore("conversation",{keyPath:"id",autoIncrement:!1}),e.createObjectStore("message",{autoIncrement:!1}).createIndex("__index_con_id","conversationId"),e.createObjectStore("participant",{autoIncrement:!1}).createIndex("__index_con_id","conversationId"),e.createObjectStore("cursor")}});let t=void 0!==(yield this.db.get("config",xt.DbVersion));const n="true"===(yield this.db.get("config",xt.DbEncyption));if(this.ctx.option.encryption?(this.encryptionEnabled=!0,g.ctxDebug(this.ctx,"storage encryption enabled")):(yield this.deleteConfig(xt.DbEncyption),this.encryptionEnabled=!1),this.encryptionEnabled){const e=yield function(e,t){var n,r,o,i;return(0,S.mG)(this,void 0,void 0,(function*(){const s=yield null===(r=null===(n=window.crypto)||void 0===n?void 0:n.subtle)||void 0===r?void 0:r.digest("SHA-256",Hn.lW.from(t));return null===(i=null===(o=window.crypto)||void 0===o?void 0:o.subtle)||void 0===i?void 0:i.importKey("raw",s,"AES-CTR",!1,["encrypt","decrypt"]).catch((t=>{e.resolve(l.Monitor).emitCounter(Gn.PassphraseError),g.ctxWarn(e,"generateKeyFromPassPhrase error",t)}))}))}(this.ctx,this.currentUserId);e?this._key=e:(g.ctxError(this.ctx,"load encryption key failed"),this.encryptionEnabled=!1)}return t&&!n&&this.encryptionEnabled&&(yield this.clear(!0),g.ctxWarn(this.ctx,"try to load unencrypted data but encryption enabled, clear local data"),t=!1),t&&n&&!this.encryptionEnabled&&(yield this.clear(!0),g.ctxWarn(this.ctx,"try to load encrpyted data but not enabled, clear local data"),t=!1),yield this.db.put("config",zn.DbVersion.toString(),xt.DbVersion),yield this.db.put("config",Date.now().toString(),xt.DbLastOpen),yield this.db.put("config",this.encryptionEnabled.toString(),xt.DbEncyption),t}))}loadConversation(){var e,t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=yield this.db.getAll("conversation");if(this.encryptionEnabled){const r=n.map((e=>Kn(this.ctx,this._key,e))),o=yield Promise.allSettled(r),i=[];for(const n of o)if("fulfilled"===n.status)i.push(Nn.fromStore(this.ctx,n.value));else{const{id:r}=null===(e=n.reason)||void 0===e?void 0:e.sender;g.ctxWarn(this.ctx,`decrypt conversation ${r} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("conversation",r)}return i}return n.map((e=>Nn.fromStore(this.ctx,e)))}))}loadMessage(){var e,t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=yield this.db.getAll("message");if(this.encryptionEnabled){const r=n.map((e=>Kn(this.ctx,this._key,e))),o=yield Promise.allSettled(r),i=[];for(const n of o)if("fulfilled"===n.status)i.push(Fn.fromStore(this.ctx,n.value));else{const{clientId:r,conversationId:o}=null===(e=n.reason)||void 0===e?void 0:e.sender;g.ctxWarn(this.ctx,`decrypt message ${r} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("message",Fn.formatMessageKey({clientId:r,conversationId:o}))}return i}return n.map((e=>Fn.fromStore(this.ctx,e)))}))}loadParticipants(){var e,t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=yield this.db.getAll("participant");if(this.encryptionEnabled){const r=n.map((e=>Kn(this.ctx,this._key,e))),o=yield Promise.allSettled(r),i=[];for(const n of o)if("fulfilled"===n.status)i.push(Un.fromStore(this.ctx,n.value));else{const{conversationId:r,userId:o}=null===(e=n.reason)||void 0===e?void 0:e.sender;g.ctxWarn(this.ctx,`decrypt participant ${o} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("participant",Un.formatParticipantKey({conversationId:r,userId:o}))}return i}return n.map((e=>Un.fromStore(this.ctx,e)))}))}upsertMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=Fn.toStore(e);if(this.encryptionEnabled){const n=yield qn(this.ctx,this._key,t),r=Object.assign({conversationId:t.conversationId,clientId:t.clientId},n);yield this.db.put("message",r,Fn.formatMessageKey(e))}else yield this.db.put("message",t,Fn.formatMessageKey(e))}))}upsertConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=Nn.toStore(e);if(this.encryptionEnabled){const n=yield qn(this.ctx,this._key,Nn.toStore(e)),r=Object.assign({id:t.id},n);yield this.db.put("conversation",r)}else yield this.db.put("conversation",t)}))}upsertParticipant(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=Un.toStore(e);if(this.encryptionEnabled){const e=yield qn(this.ctx,this._key,t),n=Object.assign({conversationId:t.conversationId,userId:t.userId},e);yield this.db.put("participant",n,Un.formatParticipantKey(n))}else yield this.db.put("participant",t,Un.formatParticipantKey(t))}))}deleteMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.db.delete("message",Fn.formatMessageKey(e))}))}deleteConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.clearConversation(e),yield this.db.delete("conversation",e.id)}))}deleteParticipant(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.db.delete("participant",Un.formatParticipantKey(e))}))}clearConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield Promise.all([(()=>(0,S.mG)(this,void 0,void 0,(function*(){var t,n;const r=this.db.transaction("message","readwrite"),o=r.store.index("__index_con_id");try{for(var i,s=(0,S.KL)(o.iterate(e.id));!(i=yield s.next()).done;){const t=i.value;t.value.conversationId===e.id&&(yield t.delete())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&(yield n.call(s))}finally{if(t)throw t.error}}yield r.done})))(),(()=>(0,S.mG)(this,void 0,void 0,(function*(){var t,n;const r=this.db.transaction("participant","readwrite"),o=r.store.index("__index_con_id");try{for(var i,s=(0,S.KL)(o.iterate(e.id));!(i=yield s.next()).done;){const t=i.value;t.value.conversationId===e.id&&(yield t.delete())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&(yield n.call(s))}finally{if(t)throw t.error}}yield r.done})))()])}))}clear(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield Promise.all([this.db.clear("config"),this.db.clear("conversation"),this.db.clear("cursor"),this.db.clear("message"),this.db.clear("participant")]),e||(yield function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(function(){return t()})),ln(n).then((function(){}))}(zn.DbNamePrefix+this.currentUserId))}))}loadUserCursor(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.db.get("cursor",e);return void 0!==t?k.fromValue(t):void 0}))}saveUserCursor(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.db.put("cursor",t.toString(),e)}))}saveConfig(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.db.put("config",t,e)}))}loadConfig(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){return null!==(t=yield this.db.get("config",e))&&void 0!==t?t:""}))}deleteConfig(e){return(0,S.mG)(this,void 0,void 0,(function*(){yield this.db.delete("config",e)}))}}zn.DbNamePrefix="imsdk",zn.DbVersion=1;class Wn extends Zt{constructor(e,t){super(e),this.installed=!1,this.maxConversationCount=1e3,this.minMessageCount=200,this.driver=t}init(e){return(0,S.mG)(this,void 0,void 0,(function*(){this.installed=!0;const t=b.performanceNow();try{const n=yield this.driver.init(e);return n&&(yield this.fillData(),g.ctxDebug(this.ctx,`load data from cache for user: ${e}`)),this.resolve(l.Monitor).emitDuration(Gn.CacheInit+m.SuccessSuffix,t),n}catch(e){return g.ctxError(this.ctx,"init db error:",e),this.resolve(l.MessageManager).clearAll(),this.resolve(l.ConversationManager).clearAll(),this.resolve(l.ParticipantManager).clearAll(),this.resolve(l.Monitor).emitDuration(Gn.CacheInit+m.ErrorSuffix,t),!1}}))}clear(){return this.driver.clear()}loadMessage(){return this.driver.loadMessage()}loadConversation(){return this.driver.loadConversation()}loadParticipants(){return this.driver.loadParticipants()}upsertMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){try{yield this.driver.upsertMessage(e)}catch(n){throw void 0!==n&&this.resolve(l.Monitor).emitTracker(rt.SaveMessageError,{error_msg:n.message,error_stack:n.stack,msg_source:Number.parseInt(null!==(t=e.source.toString())&&void 0!==t?t:"-1",10)}),n}}))}upsertConversation(e){return this.driver.upsertConversation(e)}upsertParticipant(e){return this.driver.upsertParticipant(e)}deleteMessage(e){return this.driver.deleteMessage(e)}deleteConversation(e){return this.driver.deleteConversation(e)}deleteParticipant(e){return this.driver.deleteParticipant(e)}clearConversation(e){return this.driver.clearConversation(e)}loadUserCursor(e){return(0,S.mG)(this,void 0,void 0,(function*(){return this.driver.loadUserCursor(e)}))}saveUserCursor(e,t){return this.driver.saveUserCursor(e,t)}saveConfig(e,t){return this.driver.saveConfig(e,t)}loadConfig(e){return this.driver.loadConfig(e)}isOlderThan(e,t){return e.getTime()+86400*t*1e3<Date.now()}fillData(){return(0,S.mG)(this,void 0,void 0,(function*(){const e=yield this.driver.loadConversation(),t=e.filter((e=>this.resolve(l.InboxType).isValidInbox(e.inboxType)));this.resolve(l.ConversationManager).applyLocal(t),e.length!==t.length&&0!==e.length&&g.ctxWarn(this.ctx,`skip ${e.length-t.length} conversation for invalid inbox`);const n=yield this.driver.loadMessage(),r=n.filter((e=>t.some((t=>t.id===e.conversationId))));if(this.resolve(l.MessageManager).applyLocal(r),n.length!==r.length&&0!==n.length&&g.ctxWarn(this.ctx,`skip ${n.length-r.length} message for invalid inbox`),this.resolve(l.ParticipantManager)){const e=yield this.driver.loadParticipants(),n=e.filter((e=>t.some((t=>t.id===e.conversationId))));e.length!==n.length&&0!==e.length&&g.ctxWarn(this.ctx,`skip ${e.length-n.length} participant for invalid inbox`),this.resolve(l.ParticipantManager).applyLocal(n)}this.pruneData();let o=-1;"number"==typeof this.ctx.option.retention?o=this.ctx.option.retention:!0===this.ctx.option.retention&&(o=0),o>=0&&this.retention(o,r)}))}pruneData(){const e=b.performanceNow(),t=this.resolve(l.ConversationManager).getConversationArray((()=>!0)),n=this.resolve(l.MessageManager).getRawMap(),r=t.map((e=>e.id)).reduce(((e,t)=>(e[t]=!0,e)),{}),o=[];n.forEach(((e,t)=>{void 0===r[t]&&o.push(t)})),o.length>0&&(g.ctxWarn(this.ctx,"prune conversations:",o),setTimeout((()=>(0,S.mG)(this,void 0,void 0,(function*(){for(const e of o)yield this.deleteConversation({id:e})}))),0)),this.resolve(l.Monitor).emitDuration(Gn.CachePrune,e)}retention(e,t){const n=b.performanceNow(),r=this.resolve(l.ConversationManager).getConversationArray((()=>!0));if(r.length>this.maxConversationCount){const e=[];for(;r.length>this.maxConversationCount;)e.push(r.pop());e.length>0&&(setTimeout((()=>(0,S.mG)(this,void 0,void 0,(function*(){for(const t of e)yield this.deleteConversation(t)})))),g.ctxWarn(this.ctx,`retention ${e.length} overflow conversations`))}const o=[];if(e>=0&&void 0!==t&&t.length>0){const n=Pt(t,(e=>e.conversationId));for(const t of Object.keys(n)){const r=n[t];if(r.length<=this.minMessageCount)continue;let i=r.length;for(const t of r){if(i<=this.minMessageCount)break;this.isOlderThan(t.createdAt,e)&&(o.push(t),i--)}}o.length>0&&(setTimeout((()=>(0,S.mG)(this,void 0,void 0,(function*(){for(const e of o)yield this.deleteMessage(e)}))),0),g.ctxWarn(this.ctx,`retention ${o.length} overflow messages`))}this.resolve(l.Monitor).emitDuration(Gn.CacheRetention,n)}}(0,S.gn)([Vn],Wn.prototype,"clear",null),(0,S.gn)([Vn],Wn.prototype,"loadMessage",null),(0,S.gn)([Vn],Wn.prototype,"loadConversation",null),(0,S.gn)([Vn],Wn.prototype,"loadParticipants",null),(0,S.gn)([Vn],Wn.prototype,"upsertMessage",null),(0,S.gn)([Vn],Wn.prototype,"upsertConversation",null),(0,S.gn)([Vn],Wn.prototype,"upsertParticipant",null),(0,S.gn)([Vn],Wn.prototype,"deleteMessage",null),(0,S.gn)([Vn],Wn.prototype,"deleteConversation",null),(0,S.gn)([Vn],Wn.prototype,"deleteParticipant",null),(0,S.gn)([Vn],Wn.prototype,"clearConversation",null),(0,S.gn)([Vn],Wn.prototype,"loadUserCursor",null),(0,S.gn)([Vn],Wn.prototype,"saveUserCursor",null),(0,S.gn)([Vn],Wn.prototype,"saveConfig",null),(0,S.gn)([Vn],Wn.prototype,"loadConfig",null);class $n extends st{install(){if(this.instance.clearCache=this.extendFunc(this.clearCache),!0===this.ctx.option.storage){const e=this.selectDriver();if(!e)return void g.ctxWarn(this.ctx,"no support driver found, disable db integration");this.driver=new Wn(this.ctx,e),this.register(l.DbProxy,this.driver),void 0===this.ctx.option.integrityCheck&&(this.ctx.option.integrityCheck=!0)}this.api=this.register(l.StorageApi,Yt),this.register(l.StoragePlugin,this)}clearCache(){return(0,S.mG)(this,void 0,void 0,(function*(){return yield this.dispose(),this.driver.clear()}))}selectDriver(){return void 0!==this.ctx.option.driver?this.ctx.option.driver:function(){if("undefined"==typeof window)return!1;for(const e of["indexedDB","IDBDatabase","IDBObjectStore","IDBTransaction","IDBIndex","IDBCursor","IDBKeyRange","IDBRequest"])if(!window.hasOwnProperty(e)||!window[e])return!1;return!0}()?new zn(this.ctx):void 0}init(){return(0,S.mG)(this,void 0,void 0,(function*(){if(this.driver&&this.ctx.option.integrityCheck)try{yield this.checkConversation()}catch(e){g.ctxWarn(this.ctx,"conversation integrity check err, be careful for conversation missing:",e)}}))}checkConversation(){return(0,S.mG)(this,void 0,void 0,(function*(){const e=this.resolve(l.ConversationManager).getConversationArray((e=>!e.isOffline)).length,t=[];for(const e of this.resolve(l.InboxType).getInboxTypeArray()){if(void 0===this.driver.loadUserCursor(e))continue;(yield this.api.GetConversationsCheckInfo({inboxType:e})).conversation_checkinfo_list.forEach((e=>{const n=this.resolve(l.ConversationManager).getRaw(e.conversation_id);void 0!==n&&0!==n.getMessageList().length||t.push(e)}))}let n=0;if(0!==t.length){g.ctxWarn(this.ctx,"conversation missing:",t);const e=t.map((e=>this.resolve(l.ConversationManager).getWithCreateLocal(e.conversation_id,e.conversation_short_id.toString(),e.conversation_type))),r=yield this.resolve(l.ConversationManager).refreshAsync(e);for(const e of r)try{yield this.resolve(l.CoreInstance).getMessagesByConversation({conversation:e})}catch(e){g.ctxError(this.ctx,"pulling integrity check message error:",e)}n=e.map((e=>this.resolve(l.ConversationManager).getRaw(e.id))).map((e=>void 0!==e&&0!==e.getMessageList().length)).filter((e=>!e)).length}this.resolve(l.Monitor).emitTracker(rt.IntegrityCheckConversation,{is_pre_check:"1",leak_count:t.length,link_mode:0,bad_check:0===n?"false":"true"}),this.resolve(l.Monitor).emitCounter(Gn.IntegrityConversationCheckBefore,e),this.resolve(l.Monitor).emitCounter(Gn.IntegrityConversationCheckFix,t.length),yield this.resolve(l.ConversationManager).refreshLocalAsync()}))}}const Yn=s.m.Request,Zn=s.m.Response,Xn=s.m.Frame;function Jn(e){return"undefined"!=typeof btoa?btoa(String.fromCharCode.apply(null,new Uint8Array(e))):""}function Qn(e){const t=Yn.encode(e).finish();return new Uint8Array(t)}function er(e,t){const n=new Uint8Array(t);try{return Zn.decode(n)}catch(t){const r=Jn(n);throw g.ctxWarn(e,"decode response error: ",t),g.ctxDebug(e,"hex dump: ",r),r}}class tr extends d{constructor(e){super(e),this.option=e.option}sendByBeacon(e,t){return!1}sendBeacon(e,t){setTimeout((()=>{this.sendByBeacon(e,Qn(t))||this.sendRequest(e,t)}),0)}sendRequest(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){const n=yield this.send(e,"POST",this.encode(t));return this.decode(n)}))}encode(e){return Qn(e).buffer}decode(e){return s.m.Response.create(er(this.ctx,e))}get headers(){return Object.assign({Accept:this.mime,"Content-Type":this.mime},this.option.httpHeaders)}get mime(){return"application/x-protobuf"}get dataType(){return"arraybuffer"}get method(){return"POST"}}class nr extends tr{constructor(e){super(e),this.instance=K().create({timeout:this.option.timeout,withCredentials:!!this.option.withCredentials,headers:this.headers,responseType:this.dataType,method:this.method})}send(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){return(yield this.instance.request({url:e,data:n,method:t})).data}))}sendByBeacon(e,t){return void 0!==navigator.sendBeacon&&navigator.sendBeacon(e,t)}}var rr,or;!function(e){e[e.Unknown=0]="Unknown",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(rr||(rr={})),function(e){e[e.Unknown=0]="Unknown",e[e.Cellular_2G=1]="Cellular_2G",e[e.Cellular_3G=2]="Cellular_3G",e[e.Cellular_4G=3]="Cellular_4G",e[e.Cellular_5G=4]="Cellular_5G",e[e.Wifi=5]="Wifi",e[e.Other=6]="Other",e[e.None=7]="None"}(or||(or={}));class ir extends d{}class sr extends ir{getConnectionStatus(){return(0,S.mG)(this,void 0,void 0,(function*(){return"undefined"!=typeof navigator&&void 0!==navigator.onLine?navigator.onLine?rr.Connected:rr.Disconnected:rr.Unknown}))}getNetworkType(){return(0,S.mG)(this,void 0,void 0,(function*(){if((yield this.getConnectionStatus())===rr.Disconnected)return or.None;if("undefined"==typeof navigator||!navigator.connection||!navigator.connection.type)return or.Unknown;switch(navigator.connection.type){case"cellular":if(!navigator.connection.effectiveType)return or.Unknown;switch(navigator.connection.effectiveType){case"2g":case"slow-2g":return or.Cellular_2G;case"3g":return or.Cellular_3G;case"4g":return or.Cellular_4G;case"5g":return or.Cellular_5G;default:return or.Unknown}case"wifi":return or.Wifi;case"other":return or.Other;case"none":return or.None;default:return or.Unknown}}))}}class ar extends d{constructor(e){super(e),this.openTime=0,this.createTime=0,this.option=e.option,this.url=this.option.frontierUrl,this.onClose=new I(e),this.onOpen=new I(e),this.onError=new I(e),this.onMessage=new I(e),this.onOpen.subscribe((()=>{var e;this.openTime=b.performanceNow(),this.resolve(l.Monitor).emitMetrics(m.FrontierOpen,{duration:this.openTime-this.createTime},{url:null!==(e=this.url)&&void 0!==e?e:"unknown"})})),this.onClose.subscribe((e=>{var t,n,r,o;"undefined"!=typeof CloseEvent&&e instanceof CloseEvent?this.resolve(l.Monitor).emitMetrics(m.FrontierClose,{count:1},{url:null!==(t=this.url)&&void 0!==t?t:"unknown",code:null===(n=e.code)||void 0===n?void 0:n.toString(),reason:e.reason}):this.resolve(l.Monitor).emitMetrics(m.FrontierClose,{count:1},{url:null!==(r=this.url)&&void 0!==r?r:"unknown"}),0===this.openTime||Number.isNaN(this.openTime)||this.resolve(l.Monitor).emitMetrics(m.FrontierLive,{duration:b.performanceNow()-this.openTime},{url:null!==(o=this.url)&&void 0!==o?o:"unknown"}),this.openTime=0})),this.onMessage.subscribe((e=>{var t;"hi"!==e.toString()&&this.resolve(l.Monitor).emitMetrics(m.FrontierReceive,{count:1},{url:null!==(t=this.url)&&void 0!==t?t:"unknown"})})),this.onError.subscribe((()=>{var e;this.resolve(l.Monitor).emitMetrics(m.FrontierError,{count:1},{url:null!==(e=this.url)&&void 0!==e?e:"unknown"})}))}get paramUrl(){var e,t;const n=void 0!==(null===(t=null===(e=this.option)||void 0===e?void 0:e.headers)||void 0===t?void 0:t[i.HF.envKey])?{[i.HF.envKey.toLowerCase()]:this.option.headers[i.HF.envKey]}:{},r=Object.assign(Object.assign({token:this.ctx.cachedToken,sid:this.option.sessionId,aid:this.option.appId,fpid:this.option.fpId,device_id:this.option.deviceId,access_key:A()(`${this.option.fpId+this.option.appKey+this.option.deviceId}f8a69f1719916z`),device_platform:this.option.devicePlatform,version_code:this.option.versionCode},this.option.extended),n);if(this.ctx.option.authType===s.m.AuthType.CERT_AUTH){const e=this.resolve(l.AuthManager);r.sdk_cert=encodeURIComponent(e.getCert()),r.ts_sign=encodeURIComponent(e.getTsSign())}return`${this.url}?${function(e){const t=[];for(const n of Object.keys(e))void 0!==e[n]&&""!==e[n]&&t.push(`${n}=${e[n]}`);return t.join("&")}(r)}`}performOpen(){let e=!1;this.createTime=b.performanceNow();const t=new Promise(((t,n)=>{setTimeout((()=>{e||n(new w({ctx:this.ctx,msg:"frontier connect timeout",type:i.NI.NetworkError,sender:this}))}),this.ctx.option.timeout)}));return Promise.race([t,(()=>(0,S.mG)(this,void 0,void 0,(function*(){try{yield this.open()}catch(e){throw new w({ctx:this.ctx,msg:"ws connect error",innerError:e,sender:this,type:i.NI.NetworkError})}finally{e=!0}})))()])}dispose(){this.onOpen.unsubscribeAll(),this.onClose.unsubscribeAll(),this.onError.unsubscribeAll(),this.onMessage.unsubscribeAll()}}class cr extends ar{registerEvents(){this.ws.onclose=e=>{this.onClose.next(e,this)},this.ws.onopen=()=>{this.onOpen.nextEmpty(this)},this.ws.onmessage=e=>{this.onMessage.next(e.data,this)},this.ws.onerror=e=>{this.onError.next(e,this)}}open(){if(this.isOpen())return g.ctxWarn(this.ctx,"ws already open, close first"),Promise.resolve(!0);let e,t;this.ws=new WebSocket(this.paramUrl,i.HF.wsProtocols),this.ws.binaryType="arraybuffer",this.registerEvents();const n=this.onOpen.subscribe((()=>{e(!0),this.onOpen.unsubscribe(n)})),r=this.onError.subscribe((e=>{t(e),this.onError.unsubscribe(r)}));return new Promise(((n,r)=>{e=n,t=r}))}close(){this.ws&&(this.ws.onmessage=null,this.ws.close()),this.ws=void 0}send(e){this.ws.send(e)}isOpen(){return void 0!==this.ws&&this.ws.readyState===WebSocket.OPEN}}class ur extends pt{SendMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({send_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,content:e.content,mentioned_users:e.mentionedUsers,client_message_id:e.clientId,ticket:e.ticket,message_type:e.messageType,ext:e.ext,ref_msg_info:e.referenceInfo}});return this.sendWithRawBody(t,s.m.IMCMD.SEND_MESSAGE,{inboxType:e.inboxType,maxRetryTimes:this.ctx.option.maxSendMsgRetryTimes})}))}GetMessagesByUser(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({messages_per_user_body:{cursor:e.cursor,limit:e.limit}});try{return yield this.sendWithRawBody(t,s.m.IMCMD.GET_MESSAGES_BY_USER,{inboxType:e.inboxType,maxRetryTimes:1})}catch(t){return g.ctxWarn(this.ctx,`pull user error:${t}, ignore`),s.m.Response.create({body:s.m.ResponseBody.create({messages_per_user_body:s.m.MessagesPerUserResponseBody.create({next_cursor:e.cursor,has_more:!1,messages:[]})})})}}))}GetMessagesByUserInitV2(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({messages_per_user_init_v2_body:{cursor:e.cursor,init_sub_type:e.initSubType,conv_limit:e.convLimit,msg_limit:e.msgLimit}});return this.sendWithRawBody(t,s.m.IMCMD.GET_MESSAGES_BY_USER_INIT_V2,{inboxType:e.inboxType,forceHttp:!0,maxRetryTimes:10})}))}GetMessagesByInit(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({message_by_init:{version:e.version,page:e.page,conv_limit:e.convLimit,msg_limit:e.msgLimit}});return this.sendWithRawBody(t,s.m.IMCMD.GET_MESSAGE_BY_INIT,{inboxType:e.inboxType,forceHttp:!0,maxRetryTimes:10})}))}GetMessagesByConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({messages_in_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,anchor_index:e.anchorIndex,limit:e.limit,direction:e.direction}});return this.sendWithRawBody(t,s.m.IMCMD.GET_MESSAGES_BY_CONVERSATION,{inboxType:e.inboxType,forceHttp:!0})}))}CreateConversationV2(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({create_conversation_v2_body:{conversation_type:e.type,participants:e.participants,persistent:e.persistent,idempotent_id:e.idempotentId,name:e.name,avatar_url:e.avatarUrl,description:e.desc,biz_ext:e.bizExt}});return this.sendWithRawBody(t,s.m.IMCMD.CREATE_CONVERSATION_V2,{inboxType:e.inboxType})}))}GetConversationInfoListV2(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_conversation_info_list_v2_body:{conversation_info_list:e.conversations.map((e=>({conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType})))}});return this.sendWithRawBody(t,s.m.IMCMD.GET_CONVERSATION_INFO_LIST_V2,{inboxType:e.inboxType})}))}MarkConversationReadV3(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({mark_conversation_read_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,read_message_index:e.readIndex,conv_unread_count:e.unreadCount,total_unread_count:e.totalUnreadCount}});return this.send(t,s.m.IMCMD.MARK_CONVERSATION_READ_V3,{inboxType:e.inboxType,maxRetryTimes:1})}))}RecallMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({recall_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId}});return this.sendWithRawBody(t,s.m.IMCMD.RECALL_MESSAGE,{inboxType:e.inboxType})}))}GetTicket(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({get_ticket_body:{ticket_type:i.HF.ticketType,conversation_type:e.conversationType,conversation_short_id:e.shortId,to_id:e.toId,ext:e.ext}});return(yield this.send(t,s.m.IMCMD.GET_TICKET,{inboxType:e.inboxType})).get_ticket_body}))}GetConversationParticipantsList(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,s.m.IMCMD.CONVERSATION_PARTICIPANTS_LIST,{inboxType:e.inboxType})}))}GetConversationParticipantByUserId(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=s.m.RequestBody.create({mget_conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,participants:e.participants}});return this.sendWithRawBody(t,s.m.IMCMD.MGET_CONVERSATION_PARTICIPANTS,{inboxType:e.inboxType})}))}ClientAck(e){return(0,S.mG)(this,void 0,void 0,(function*(){try{const t=s.m.RequestBody.create({client_ack_body:{start_time_stamp:e.startTimeStamp,cmd:e.cmd,network_type:e.NetworkType,logid:e.logid,client_time_stamp:e.clientTimeStamp,server_message_id:e.serverId,type:e.type}});yield this.send(t,s.m.IMCMD.CLIENT_ACK,{useBeacon:!0,inboxType:e.inboxType})}catch(e){g.ctxWarn(this.ctx,`send ack error: ${e}, ignore`)}}))}ClientBatchAck(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){try{const r=null===(t=null==e?void 0:e.map)||void 0===t?void 0:t.call(e,(e=>({start_time_stamp:e.startTimeStamp,cmd:e.cmd,network_type:e.NetworkType,logid:e.logid,client_time_stamp:e.clientTimeStamp,server_message_id:e.serverId,type:e.type}))),o=s.m.RequestBody.create({client_batch_ack_body:{ack_list:r}});yield this.send(o,s.m.IMCMD.CLIENT_BATCH_ACK,{useBeacon:!0,inboxType:null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.inboxType})}catch(e){g.ctxWarn(this.ctx,`send batch ack error: ${e}, ignore`)}}))}}function lr(e,t,n=!1){let r,o,i,s=0;const a=function(){e.apply(o,i),s=Date.now()};return function(){const e=Date.now();if(o=this,i=arguments,r&&(clearTimeout(r),r=null),n&&0===s)return r=setTimeout((()=>{a()}),t),a();const c=t-(e-s);if(c>0)r=setTimeout((()=>{a()}),c);else{if(n)return a();r=setTimeout((()=>{a()}),t)}}}class fr extends d{constructor(){super(...arguments),this.subscriptions=new Map}subscribe(e,t){var n;if(!Object.values(i.c5).includes(e))throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:`unknown event: ${e}`,sender:this});this.subscriptions.has(e)||this.subscriptions.set(e,new I(this.ctx));const r=this.subscriptions.get(e),o="number"==typeof this.ctx.option.throttle?this.ctx.option.throttle:100,s=null!==(n=this.ctx.option.triggerStrategy)&&void 0!==n?n:{};if(!1===this.ctx.option.throttle)return r.subscribe(t);if(void 0===s[e])return r.subscribe(t);switch(g.ctxDebug(this.ctx,`apply strategy: ${i.zn[s[e]]} to event: ${e}`),s[e]){case i.zn.Throttle:return r.subscribe(function(e,t,n){let r,o;return function(){const i=this,s=+new Date,a=arguments;clearTimeout(r),o||(o=s),s-o>=n?(e.apply(i,a),o=s):r=setTimeout((()=>{e.apply(i,a)}),t)}}(t,o,o));case i.zn.Debounce:return r.subscribe(lr(t,o));case i.zn.ThrottleWithArgs:return r.subscribe(function(e,t,n){const r={},o={},i=new Map;let s=0;return function(){const a=this,c=+new Date,u=arguments,l=u[0];let f=i.get(l);i.has(l)||(f=s++,i.set(l,f)),clearTimeout(r[f]),o[f]||(o[f]=c),c-o[f]>=n?(o[f]=c,e.apply(a,u)):r[f]=setTimeout((()=>{e.apply(a,u),delete o[f],delete r[f],i.delete(l)}),t)}}(t,o,o));case i.zn.DebounceWithArgs:return r.subscribe(function(e,t){const n=new Map,r={},o={};let i=0;return function(){const s=Date.now(),a=arguments,c=a[0];let u=n.get(c);n.has(c)||(u=i++,n.set(c,u));const l=()=>{e.apply(this,a),delete o[u],delete r[u],n.delete(c)};void 0===o[u]&&(o[u]=0),r[u]&&(clearTimeout(r[u]),delete r[u]);const f=s-o[u],h=t-f;r[u]=h>0?setTimeout((()=>{l()}),h):setTimeout((()=>{l()}),t)}}(t,o));case i.zn.Immediate:default:return r.subscribe(t)}}unsubscribe(e,t){this.subscriptions.has(e)&&this.subscriptions.get(e).unsubscribe(t)}unsubscribeAll(){for(const e of Object.values(this.subscriptions))e.unsubscribeAll();this.subscriptions.clear()}emitEmpty(e,t){return this.emit(e,t,void 0)}emit(e,t,n){this.resolve(l.Monitor).emitEvent(e,t,n);const r=this.subscriptions.get(e);r&&(n?g.ctxDebug(this.ctx,`emit event "${e}" with sender:`,t,", eventArgs:",n):g.ctxDebug(this.ctx,`emit event "${e}" with sender:`,t),r.next(n,t))}}function hr(e,t,n,r){let o=n=n||0,i=r=r||e.length-n,s=0;for(o=n,i=r;o<i;){const n=e[o++];let r=n>>4;if(r>0){let n=r+240;for(;255===n;)n=e[o++],r+=n;const a=o+r;for(;o<a;)t[s++]=e[o++];if(o===i)return s}const a=e[o++]|e[o++]<<8;if(0===a||a>s)return-(o-2);let c=15&n,u=c+240;for(;255===u;)u=e[o++],c+=u;let l=s-a;const f=s+c+4;for(;s<f;)t[s++]=t[l++]}return s}Math.imul||(Math.imul=function(e,t){const n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0});var pr=setInterval,dr=setTimeout,vr=clearInterval,yr=clearTimeout;try{var gr,mr=function(){do{xr===Or?xr=0:xr++}while(xr in wr);return xr},_r=new Blob(["var fakeIdToID={};addEventListener(\"message\",function(event){try{var{data={}}=event;var{action,fakeId,time}=data;switch(action){case'setInterval':fakeIdToID[fakeId]=setInterval(function(){postMessage({fakeId});},time);break;case'clearInterval':if(fakeIdToID.hasOwnProperty(fakeId)){clearInterval(fakeIdToID[fakeId]);delete fakeIdToID[fakeId];}\nbreak;case'setTimeout':fakeIdToID[fakeId]=setTimeout(function(){postMessage({fakeId});if(fakeIdToID.hasOwnProperty(fakeId)){delete fakeIdToID[fakeId];}},time);break;case'clearTimeout':if(fakeIdToID.hasOwnProperty(fakeId)){clearTimeout(fakeIdToID[fakeId]);delete fakeIdToID[fakeId];}\nbreak;default:break;}}catch(error){postMessage({error})}})"]),br=window.URL.createObjectURL(_r),wr={},xr=0,Or=2147483647;window.HACK_TIMER_WORKER&&"setIntervalWarp"in window.HACK_TIMER_WORKER&&"setTimeoutWarp"in window.HACK_TIMER_WORKER&&"clearIntervalWarp"in window.HACK_TIMER_WORKER&&"clearTimeoutWarp"in window.HACK_TIMER_WORKER?(pr=window.HACK_TIMER_WORKER.setIntervalWarp,dr=window.HACK_TIMER_WORKER.setTimeoutWarp,vr=window.HACK_TIMER_WORKER.clearIntervalWarp,yr=window.HACK_TIMER_WORKER.clearTimeoutWarp):window.Worker?(gr=new Worker(br),pr=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"function"!=typeof e)throw new Error("cb must be a function");for(var r=mr(),o=arguments.length,i=new Array(o>3?o-3:0),s=3;s<o;s++)i[s-3]=arguments[s];return wr[r]={cb:e,param:i,keepAlive:!!n,type:"setInterval"},gr.postMessage({action:"setInterval",fakeId:r,time:t}),r},vr=function(e){"number"==typeof e&&e in wr&&(delete wr[e],gr.postMessage({action:"clearInterval",fakeId:e}))},dr=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"function"!=typeof e)throw new Error("cb must be a function");for(var r=mr(),o=arguments.length,i=new Array(o>3?o-3:0),s=3;s<o;s++)i[s-3]=arguments[s];return wr[r]={cb:e,param:i,keepAlive:!!n,type:"setTimeout"},gr.postMessage({action:"setTimeout",fakeId:r,time:t}),r},yr=function(e){"number"==typeof e&&e in wr&&(delete wr[e],gr.postMessage({action:"clearTimeout",fakeId:e}))},gr.addEventListener("message",(function(e){var t=e.data.fakeId;if(t in wr){var n=wr[t]||{},r=n.cb,o=n.param,i=n.keepAlive;if("setInterval"!==n.type&&delete wr[t],!i&&document.hidden)return;if("function"==typeof r)try{r.apply(window,o)}catch(e){console.error("Error when parse callback function, code %s",e)}}})),gr.addEventListener("error",(function(e){console.error(e)}))):console.error("the env not support web worker, fallback to unWarp function!")}catch(e){console.error("work 执行失败",e)}const Er={setIntervalWarp:pr,setTimeoutWarp:dr,clearIntervalWarp:vr,clearTimeoutWarp:yr},{setIntervalWarp:Sr,clearIntervalWarp:kr,setTimeoutWarp:Cr,clearTimeoutWarp:Ir}=Er;var Pr;!function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running"}(Pr||(Pr={}));class Tr extends d{constructor(e,t,n){return super(e),this.state=Pr.Stopped,this.refreshRate=0,this.doneDuration=0,this.refreshRate=t,this.doneDuration=n,this.onTick=new I(this.ctx),this.onDone=new I(this.ctx),this.onStop=new I(this.ctx),this}get duration(){return this.state===Pr.Stopped&&0!==this.lastStopTime?this.lastStopTime-this.startTime:this.state===Pr.Running?Date.now()-this.startTime:0}start(){this.state!==Pr.Running&&this.restart()}restart(){this.tickTimer&&this.stop(),this.state=Pr.Running;const{enableHackTimer:e}=this.ctx.option,t=e?Sr:setInterval,n=e?Cr:setTimeout;this.tickTimer=t((()=>{this.update()}),this.refreshRate),void 0!==this.doneDuration&&(this.doneTimer=n((()=>{this.done()}),this.doneDuration)),this.startTime=Date.now(),this.lastStopTime=0,this.update()}stop(){if(this.state===Pr.Stopped)return;const{enableHackTimer:e}=this.ctx.option,t=e?kr:clearInterval,n=e?Ir:clearTimeout;t(this.tickTimer),n(this.doneTimer),this.state=Pr.Stopped,this.lastStopTime=Date.now(),this.onStop.nextEmpty()}getTickTimer(){return this.tickTimer}update(){this.onTick.nextEmpty(this)}done(){this.stop(),this.onDone.nextEmpty()}}class Ar extends d{constructor(e){super(e),this.wsLastReceiveTime=0,this.reqMap=new Map,this.manuallyClosed=!1;const{webSocketLevel:t,heartbeatInterval:n,maxHeartbeatEmptyWindow:r}=this.ctx.option;this.heartbeatInterval=null!=n?n:i.HF.heartbeatInterval,this.maxEmptyWindow=null!=r?r:i.HF.maxHeartbeatEmptyWindow,this.net=new(x.getConstructor(e,_.NetApi))(this.ctx),this.http=new(x.getConstructor(e,_.HttpClient))(this.ctx),t!==i._.Disable&&(this.ws=new(x.getConstructor(e,_.WebSocketClient))(this.ctx),this.prepareWs()),this.onMessage=new I(e)}inSignCommandList(e){return[s.m.IMCMD.SEND_MESSAGE,s.m.IMCMD.CREATE_CONVERSATION_V2,s.m.IMCMD.CALL_VOIP,s.m.IMCMD.ADD_CONVERSATION_PARTICIPANTS,s.m.IMCMD.REMOVE_CONVERSATION_PARTICIPANTS,s.m.IMCMD.UPDATE_CONVERSATION_PARTICIPANT,s.m.IMCMD.SET_CONVERSATION_SETTING_INFO,s.m.IMCMD.SET_CONVERSATION_CORE_INFO,s.m.IMCMD.UPSERT_CONVERSATION_CORE_EXT_INFO,s.m.IMCMD.UPSERT_CONVERSATION_SETTING_EXT_INFO,s.m.IMCMD.DISSOLVE_CONVERSATION,s.m.IMCMD.MARK_MESSAGE,s.m.IMCMD.BATCH_UNMARK_MESSAGE,s.m.IMCMD.SET_MESSAGE_PROPERTY,s.m.IMCMD.MODIFY_MESSAGE_EXT].includes(e)}frontierSign(e){const t={"X-MS-STUB":A()(e)};if("undefined"!=typeof window&&void 0!==window.byted_acrawler&&"function"==typeof window.byted_acrawler.frontierSign){const e=window.byted_acrawler.frontierSign(t);return null!=e?e:{}}return{}}sendByBeacon(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.method="beacon",g.ctxDebug(this.ctx,`Beacon Request SeqId -> ${e.seqId}`,e.request),this.http.sendBeacon(e.url,e.request),e}))}sendByHttp(e){return(0,S.mG)(this,void 0,void 0,(function*(){e.method="http",g.ctxDebug(this.ctx,`Http Request SeqId -> ${e.seqId}`,e.request);try{this.reqMap.set(e.seqId,e);const t=yield this.http.sendRequest(e.url,e.request);return e.response=t,0!==t.status_code?g.ctxError(this.ctx,`Http Response SeqId -> ${e.seqId}`,e.response):g.ctxDebug(this.ctx,`Http Response SeqId -> ${e.seqId}`,e.response),e}catch(e){throw new w({ctx:this.ctx,msg:"network error",type:i.NI.NetworkError,innerError:e,allowRetry:!0,sender:this,ignoreEvent:!0})}finally{this.reqMap.delete(e.seqId)}}))}sendByWs(e){return(0,S.mG)(this,void 0,void 0,(function*(){e.method="ws";const t=Qn(e.request),n=this.inSignCommandList(e.cmd)?this.frontierSign(t):{},r=Object.assign(Object.assign({},n),this.ctx.option.headers),o=s.m.Frame.create({service:this.ctx.option.service,method:this.ctx.option.method,headers:Object.entries(r).map((([e,t])=>({key:e,value:t}))),seqid:k.fromNumber(e.seqId),logid:k.fromNumber(Date.now()),payload_type:"pb",payload:t});e.frame=o;try{this.reqMap.set(e.seqId,e),g.ctxDebug(this.ctx,`WS Request SeqId -> ${e.seqId}`,e.request),this.ws.send(function(e){const t=Xn.encode(e).finish();return new Uint8Array(t)}(o))}catch(t){throw this.reqMap.delete(e.seqId),new w({ctx:this.ctx,msg:"network error",type:i.NI.NetworkError,innerError:t,allowRetry:!0,sender:this})}return new Promise(((t,n)=>{e.wsPromise={resolve:t,reject:n}}))}))}receiveRaw(e){if(this.resetWsHeartbeat(),"hi"!==e.toString())try{const t=function(e,t){const n=new Uint8Array(t);try{return Xn.decode(n)}catch(t){const r=Jn(n);throw g.ctxWarn(e,"decode frame error: ",t),g.ctxDebug(e,"hex dump: ",r),r}}(this.ctx,e);if(t.service!==this.ctx.option.service&&!this.ctx.option.acceptIncorrectFrame)return g.ctxDebug(this.ctx,`WS Response dropped, local serviceId=${this.ctx.option.service}, message=${t.service}`),void this.resolve(l.EventBus).emit(i.c5.WebSocketReceiveUnexpectedFrame,this,t);let{payload:n}=t;if(null==n)return void g.ctxWarn(this.ctx,"payload undefined or null");if("__lz4"===t.payload_encoding){let e=new Uint8Array(10*n.length),t=0;if(t=hr(n,e),(t<0||t>e.length||t<n.length)&&(g.ctxDebug(this.ctx,"WS response with lz4 compress, but first time decompressed failed, try second time"),e=new Uint8Array(1024e3),t=hr(n,e),t<0||t>e.length||t<n.length))return void g.ctxWarn(this.ctx,"WS response with lz4 compress, try second time fail.");n=e.slice(0,t)}try{const e=er(this.ctx,n),r=s.m.Response.create(e);if(!this.resolve(l.InboxType).isValidInbox(r.inbox_type)&&r.sequence_id.eq(0))return void g.ctxWarn(this.ctx,`WS Push dropped, local inboxType=${this.ctx.option.inboxType}, message=${r.inbox_type}`,"resp:",r);const o=r.sequence_id.toNumber();let i=this.reqMap.get(o);i?(0!==r.status_code?g.ctxError(this.ctx,`WS Response SeqId -> ${r.sequence_id}`,r):g.ctxDebug(this.ctx,`WS Response SeqId -> ${r.sequence_id}`,r),i.response=r,i.wsPromise.resolve(i),this.reqMap.delete(o)):r.sequence_id.eq(0)?(g.ctxDebug(this.ctx,"WS Push",r),i=new ht(this.ctx,r.cmd),i.frame=t,i.response=r,i.seqId=r.sequence_id.toNumber(),this.receive(i)):g.ctxWarn(this.ctx,"WS Response dropped, no handler",r)}catch(e){g.ctxWarn(this.ctx,"WS Response dropped, IM Response deserialize fail, hex dump:",e,"frame:",t)}}catch(e){g.ctxWarn(this.ctx,"WS Response dropped, Frame deserialize fail, hex dump: ",e)}}send(e,t){var n,r,o,a,c,u,f,h,p,d;return(0,S.mG)(this,void 0,void 0,(function*(){if(t.useBeacon)return yield this.sendByBeacon(e),e.response=s.m.Response.create({}),e;let v=null!==(n=t.maxWsRetryTimes)&&void 0!==n?n:3,y=0===v?null!==(r=t.maxHttpRetryTimes)&&void 0!==r?r:3:(null!==(o=t.maxHttpRetryTimes)&&void 0!==o?o:null===(a=this.ws)||void 0===a?void 0:a.isOpen())?1:3;0===y&&(y=1);b.performanceNow()-this.wsLastReceiveTime-1.5*this.heartbeatInterval>this.maxEmptyWindow&&(null===(c=this.ws)||void 0===c?void 0:c.isOpen())&&(v=0,y=null!==(u=t.maxHttpRetryTimes)&&void 0!==u?u:3,g.ctxWarn(this.ctx,"ws idle too long, fallback to http"));let m=0,_=0;const x=()=>{let t=!1;const n=new Promise(((n,r)=>{setTimeout((()=>{t||(this.reqMap.delete(e.seqId),r(new w({ctx:this.ctx,msg:"request timeout",type:i.NI.NetworkError,allowRetry:!0,ignoreEvent:!0,sender:this})))}),this.ctx.option.timeout)}));return Promise.race([n,(()=>(0,S.mG)(this,void 0,void 0,(function*(){var n;let r,o=!1;if(m<v&&(null===(n=this.ws)||void 0===n?void 0:n.isOpen())&&(o=!0),0!==v&&m>=v&&0===_&&void 0!==this.ws&&(g.ctxWarn(this.ctx,"fallback to http"),o=!1),_>=y)throw new w({ctx:this.ctx,msg:"http retry times limit exceeded",type:i.NI.NetworkError,sender:this,args:{cmd:e.cmd,seqId:e.seqId}});o?(m++,r=this.sendByWs(e)):(_++,r=this.sendByHttp(e));try{const n=yield r;t=!0,this.reqMap.delete(e.seqId);const{request:o,response:s}=n;if(this.resolve(l.Monitor).emitNetwork(o,s),s.status_code===i.NI.ResourceExhausted)throw new w({ctx:this.ctx,msg:"demotion enabled",type:i.NI.ResourceExhausted,allowRetry:!1,sender:this,logid:null==s?void 0:s.log_id});if(s.status_code===i.NI.InternalError&&(s.error_desc.includes("i/o timeout")||s.error_desc.includes("rpc timeout")||s.error_desc.includes("RPC timeout"))||s.error_desc.includes("connection timeout")||s.error_desc.includes("request timeout"))throw new w({ctx:this.ctx,msg:"request timeout",type:i.NI.NetworkError,allowRetry:!0,ignoreEvent:!0,sender:this,logid:null==s?void 0:s.log_id});return n.retryTimes=m+_,n}catch(e){throw e.type?e:new w({ctx:this.ctx,msg:"request error",type:i.NI.NetworkError,allowRetry:e.allowRetry,innerError:e,sender:this})}finally{this.reqMap.delete(e.seqId)}})))()])};let O;for(;;){if(e.retryTimes++,e.retryTimes>=10){e.error=new w({ctx:this.ctx,msg:"too much retry",type:i.NI.NetworkError,sender:this});break}try{if(e.startTime=Date.now(),O=yield x(),e.endTime=Date.now(),"function"==typeof(null===(h=null===(f=null==O?void 0:O.response)||void 0===f?void 0:f.server_execution_end_time)||void 0===h?void 0:h.toNumber)&&"function"==typeof(null===(d=null===(p=null==O?void 0:O.response)||void 0===p?void 0:p.request_arrived_time)||void 0===d?void 0:d.toNumber)&&b.putTimeDelta(e.startTime,e.endTime,O.response.server_execution_end_time.toNumber(),O.response.request_arrived_time.toNumber()),void 0!==O)break}catch(t){if(e.error=t,!0===(null==t?void 0:t.allowRetry)){let n=500+100*e.retryTimes+100*Math.random();n>2e3&&(n=2e3),g.ctxDebug(this.ctx,`req ${e.seqId} failed, retrying @ attempt ${e.retryTimes}, inner err:`,t),yield new Promise((e=>setTimeout(e,n)));continue}break}}if(void 0===O)throw void 0===e.error&&(e.error=new w({ctx:this.ctx,msg:"unknown error",type:i.NI.NetworkError,sender:this})),e.error;return O}))}sendByHttpTo(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){return"undefined"!=typeof fetch?(yield fetch(e)).arrayBuffer():this.http.send(e,t,n)}))}receive(e){this.resolve(l.Monitor).emitNetwork(null,e.response),this.onMessage.next(e.response,this)}onWsClose(){return(0,S.mG)(this,void 0,void 0,(function*(){g.ctxDebug(this.ctx,"ws closed"),this.resolve(l.EventBus).emit(i.c5.WebSocketDisconnected,this,this.ws)}))}prepareWs(){this.ctx.option.webSocketLevel!==i._.Disable&&(this.ws.onMessage.subscribe((e=>this.receiveRaw(e))),this.ws.onClose.subscribe((()=>this.onWsClose())),this.ws.onError.subscribe((()=>this.onWsClose())),this.ws.onOpen.subscribe((()=>{g.ctxDebug(this.ctx,"ws connected"),this.resolve(l.EventBus).emit(i.c5.WebSocketConnected,this,this.ws),this.manuallyClosed=!1})),this.wsCheckTicker=new Tr(this.ctx,this.heartbeatInterval),this.wsCheckTicker.onTick.subscribe((()=>(0,S.mG)(this,void 0,void 0,(function*(){var e,t,n,r,o;const i=b.performanceNow()-this.wsLastReceiveTime+this.heartbeatInterval/1.5;if((yield this.net.getConnectionStatus())!==rr.Disconnected)if(null===(e=this.ws)||void 0===e?void 0:e.isOpen())if(i>this.maxEmptyWindow){g.ctxDebug(this.ctx,"not receive any packet in window, ws close connection"),this.resolve(l.Monitor).emitMetrics(m.WebSocketConnectNoHeartbeat,{count:1},{url:null!==(o=null===(r=this.ws)||void 0===r?void 0:r.url)&&void 0!==o?o:"unknown"});try{yield this.connectWs(!0)}catch(e){g.ctxWarn(this.ctx,"ws ticker window connect err:",e)}}else i>this.heartbeatInterval&&this.sendWsHeartbeat();else{g.ctxDebug(this.ctx,"ws ticker try connect if closed"),this.resolve(l.Monitor).emitMetrics(m.WebSocketConnectAfterClose,{count:1},{url:null!==(n=null===(t=this.ws)||void 0===t?void 0:t.url)&&void 0!==n?n:"unknown"});try{yield this.connectWs(!0)}catch(e){g.ctxWarn(this.ctx,"ws ticker try connect err:",e)}}else g.ctxDebug(this.ctx,"network disconnected, skip ws check")})))))}closeWs(e){var t,n;this.ctx.option.webSocketLevel!==i._.Disable&&(null===(t=this.ws)||void 0===t||t.close(),this.manuallyClosed=!e,this.manuallyClosed&&(null===(n=this.wsCheckTicker)||void 0===n||n.stop()))}connectWs(e){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){if(this.ctx.option.webSocketLevel===i._.Disable)return;if(this.manuallyClosed&&e)return void g.ctxDebug(this.ctx,"ignore connect since manually closed");this.closeWs(!0);const o=b.performanceNow();try{yield this.ws.performOpen(),this.resolve(l.Monitor).emitMetrics(m.WsConnect,{ws_cost:b.performanceNow()-o},{error_code:"0",url:null!==(t=this.ws.option.frontierUrl)&&void 0!==t?t:"unknown"}),this.resetWsHeartbeat(),null===(n=this.wsCheckTicker)||void 0===n||n.start()}catch(e){throw this.resolve(l.Monitor).emitMetrics(m.WsConnect,{ws_cost:b.performanceNow()-o},{error_code:"1",url:null!==(r=this.ws.option.frontierUrl)&&void 0!==r?r:"unknown"}),e}}))}sendWsHeartbeat(){var e;(null===(e=this.ws)||void 0===e?void 0:e.isOpen())?this.ws.send("hi"):g.ctxWarn(this.ctx,"ws not connect but try to send heartbeat")}resetWsHeartbeat(){this.wsLastReceiveTime=b.performanceNow()}}const jr={appId:0,token:"",deviceId:"",userId:"",biz:"",apiUrl:"",frontierUrl:"",fpId:89,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",service:2,method:1,authType:s.m.AuthType.TOKEN_AUTH,inboxType:[0],headers:{},httpHeaders:{},devicePlatform:"web",timeout:2e3,pullInterval:3e4,throttle:100,triggerStrategy:{[i.c5.ConversationChange]:i.zn.Debounce,[i.c5.MessageUpsert]:i.zn.Debounce,[i.c5.ConversationUpsert]:i.zn.ThrottleWithArgs},maxMessageCount:1e3};function Rr(e,t,n){for(const r of Object.keys(n))"string"!=typeof n[r]&&g.ctxError(e,`${t}[${r}] is not a string!`)}class Mr extends d{constructor(e){super(e),this.refreshBuffer=[],this.refreshDebounce=lr((()=>{this.triggerRefresh()}),1e3,!0),this.conversations=new Map}applyLocal(e){e.forEach((e=>{this.conversations.set(e.id,e)}))}clearAll(){this.conversations.clear()}getWithCreateLocal(e,t,n,r){let o=this.getRaw(e);if(!o){const i=new Rt(this.ctx);i.coreInfo=new kt(i),i.settingInfo=new Ct(i),i.id=e,i.shortId=t,i.type=n,i.isOffline=!0,o=i,void 0!==r?i.coreInfo.inboxType=r:void 0===r&&n===s.m.ConversationType.ONE_TO_ONE_CHAT&&4===e.split(":").length&&(i.coreInfo.inboxType=Number.parseInt(e.split(":")[0],10)),g.ctxDebug(this.ctx,"create local conv:",i),this.upsert(o)}return o}upsert(e){var t;if(void 0===e)throw new w({ctx:this.ctx,msg:"upsert undefined conv",type:i.NI.InvalidParam,sender:this});if(!this.resolve(l.InboxType).isValidInbox(e.inboxType))throw new w({ctx:this.ctx,msg:`invalid inbox: ${e.inboxType}`,type:i.NI.InvalidParam,sender:this});let n=this.conversations.get(e.id);if(n&&e.isOffline&&(g.ctxDebug(this.ctx,`local exist, try to use offline upsert, ignore, short id: ${n.shortId} with offline:${e.shortId}`),!n.isOffline))return g.ctxDebug(this.ctx,"local is online, ignore update"),n;if(n){g.ctxDebug(this.ctx,`merge conversation local=${n.version.toString()}:`,n,`new=${e.version.toString()}:`,e);const t=n.coreInfo||new kt(n),r=n.settingInfo||new Ct(n);n=Object.assign(n,e),n.coreInfo=t.mergeCore(e.coreInfo),n.settingInfo=r.mergeSetting(e.settingInfo),n.forceRefreshUnreadCount()}return this.conversations.set(e.id,null!=n?n:e),null===(t=this.resolve(l.DbProxy))||void 0===t||t.upsertConversation(null!=n?n:e),this.ctx.initResult===i.rb.Succeeded&&(this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,null!=n?n:e),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this)),e}refreshLocalAsync(){return(0,S.mG)(this,void 0,void 0,(function*(){const e=this.getConversationArray().filter((e=>e.isOffline));if(0!==e.length)return this.refreshAsync(e)}))}refreshLocal(){const e=this.getConversationArray().filter((e=>e.isOffline));0!==e.length&&this.refresh(e)}triggerRefresh(){if(0===this.refreshBuffer.length)return;g.ctxDebug(this.ctx,"clear refresh buffer:",this.refreshBuffer);const e=[...this.refreshBuffer];this.refreshBuffer=[],this.refreshAsync(e)}refresh(e){var t;const n=Tt(e),r=[];if(0===this.refreshBuffer.length)r.push(...n);else{const e={};this.refreshBuffer.forEach((t=>e[t.id]=!0)),n.forEach((t=>{e[t.id]||r.push(t)}))}r.length>0&&this.refreshBuffer.push(...r);const o=null!==(t=this.ctx.option.conversationRefreshCount)&&void 0!==t?t:i.HF.conversationRefreshCount;this.refreshBuffer.length>=o?this.triggerRefresh():this.refreshDebounce()}refreshAsync(e){var t,n,r;return(0,S.mG)(this,void 0,void 0,(function*(){const o=null!==(t=Tt(e))&&void 0!==t?t:this.refreshBuffer;if(0===o.length)return[];g.ctxDebug(this.ctx,"refresh conv: ",o);const s=[],a=Pt(o,(e=>e.inboxType.toString()));for(const e of Object.keys(a)){const t=It(a[e],5);for(const o of t)try{const t=yield this.resolve(l.CoreApi).GetConversationInfoListV2({conversations:o.map((e=>({conversationId:e.id,conversationShortId:k.fromString(e.shortId),conversationType:e.type}))),inboxType:Number.parseInt(e,10)}),r=(null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.get_conversation_info_list_v2_body).conversation_info_list;o.forEach((e=>{0===r.filter((t=>t.conversation_id===e.id)).length&&(g.ctxDebug(this.ctx,"delete local conv, may not exist online: ",e),this.delete(e.id))})),r.forEach((e=>{const n=this.upsert(Rt.fromServerConversation(this.ctx,e,null==t?void 0:t.log_id));s.push(n)}))}catch(e){e&&(null==e?void 0:e.type)===i.NI.InternalError&&(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.includes("request.MGet empty"))?o.forEach((e=>{g.ctxDebug(this.ctx,"delete local conv, may not exist online: ",e),this.delete(e.id)})):g.ctxError(this.ctx,"unknown refresh error:",e)}}return s}))}get(e){const t=this.getRaw(e);if(!t)throw new w({ctx:this.ctx,msg:`conversation ${e} not exist in local`,type:i.NI.ConversationNotExist,sender:this,args:{conversationId:e}});return t}getWithShortIdRaw(e){for(const t of this.conversations.values())if(t.shortId===e)return t;return null}getWithOnline(e,t,n){return(0,S.mG)(this,void 0,void 0,(function*(){let r=this.getRaw(e);if(!r||r.isOffline){if(!t||!n)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"no shortId and type provided",sender:this});r=this.getWithCreateLocal(e,t,n)}return yield this.refreshAsync(r),this.get(e)}))}getRaw(e){return this.conversations.get(e)}getConversationArray(e=Mr.conversationFilter){return Array.from(this.conversations.values()).filter(e).map((e=>({conv:e,rankScore:e.rankScore}))).sort(Mr.conversationComparator).map((e=>e.conv))}withConversation(e){return t=>t(this.get(e))}delete(e,t=!1){var n;const r=this.getRaw(e);r&&(t||this.getContext().resolve(l.MessageManager).clearConversation(e),this.conversations.delete(e),null===(n=this.resolve(l.DbProxy))||void 0===n||n.deleteConversation(r),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),this.resolve(l.EventBus).emit(i.c5.ConversationDelete,this,r))}markRead(e,t){const n=this.get(e);return n.settingInfo.readIndex.gt(t)?n:(n.settingInfo.readIndex=t,this.upsert(n))}leave(e){var t;const n=this.get(e);n&&(n.isMember=!1,null===(t=this.resolve(l.DbProxy))||void 0===t||t.upsertConversation(n),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),this.resolve(l.EventBus).emit(i.c5.ConversationLeave,this,n))}refreshTicket(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=this.get(e),n=yield this.resolve(l.CoreApi).GetTicket({conversationType:t.type,shortId:k.fromString(t.shortId),toId:k.fromString(t.type===s.m.ConversationType.ONE_TO_ONE_CHAT?t.toParticipantUserId:t.shortId),inboxType:t.inboxType});t.ticket=null==n?void 0:n.ticket,this.upsert(t),g.ctxDebug(this.ctx,"refresh ticket for conv:",t)}))}static conversationFilter(e){return 0===e.mode&&e.isMember}dispose(){this.clearAll()}}var Br;Mr.conversationComparator=(e,t)=>t.rankScore-e.rankScore,function(e){e[e.MarkConversationRead=1]="MarkConversationRead",e[e.DeleteMessage=2]="DeleteMessage",e[e.DeleteConversation=3]="DeleteConversation",e[e.SettingInfoUpdate=4]="SettingInfoUpdate",e[e.CoreInfoUpdate=6]="CoreInfoUpdate",e[e.ParticipantUpdate=7]="ParticipantUpdate",e[e.FirstMessage=8]="FirstMessage"}(Br||(Br={}));class Dr extends Mt{static fromMessage(e){const t=e;return t.contentObj=P.parse(e.content),t.commandSubType=t.contentObj.command_type,t}}class Lr extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.data.isCommandMsg&&(e.needContinue=!1,yield this.parseCommand(e.data)),e}))}parseCommand(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=Dr.fromMessage(e);switch(t.contentObj.command_type){case Br.DeleteConversation:this.handleDeleteConversationCMD(t);break;case Br.DeleteMessage:this.handleDeleteMessageCMD(t);break;case Br.MarkConversationRead:this.handleMarkConversationRead(t);break;case Br.SettingInfoUpdate:yield this.handleUpdateSettingInfo(t);break;case Br.CoreInfoUpdate:yield this.handleUpdateCoreInfo(t);break;case Br.ParticipantUpdate:yield this.handleUpdateParticipant(t)}this.resolve(l.EventBus).emit(i.c5.ReceiveCommandMessage,this,t)}))}handleDeleteConversationCMD(e){const{conversation_id:t}=e.contentObj;this.resolve(l.ConversationManager).delete(t)}handleDeleteMessageCMD(e){const{conversation_id:t,message_id:n}=e.contentObj;this.resolve(l.MessageManager).delete(t,n.toString())}handleMarkConversationRead(e){if(this.ctx.initResult===i.rb.Succeeded){const{conversation_id:t,read_index:n}=e.contentObj;this.resolve(l.ConversationManager).markRead(t,k.fromValue(n))}}handleUpdateSettingInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(this.ctx.initResult===i.rb.Succeeded){const{conversation_version:t}=e.contentObj,n=k.fromValue(null!=t?t:k.MAX_VALUE),r=this.resolve(l.ConversationManager).getWithCreateLocal(e.conversationId,e.conversationShortId.toString(),e.conversationType);r.settingInfo.version.lte(n)?this.resolve(l.ConversationManager).refresh(r):g.ctxWarn(this.ctx,"ignore online update setting info cmd, local version: ",r.settingInfo.version.toString(),"online: ",n.toString())}}))}handleUpdateCoreInfo(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(this.ctx.initResult===i.rb.Succeeded){const{group_version:t}=e.contentObj,n=k.fromValue(t),r=this.resolve(l.ConversationManager).getWithCreateLocal(e.conversationId,e.conversationShortId.toString(),e.conversationType);r.coreInfo.version.lte(n)?this.resolve(l.ConversationManager).refresh(r):g.ctxWarn(this.ctx,"ignore online update core info cmd, local version: ",r.coreInfo.version.toString(),"online: ",t.toString())}}))}handleUpdateParticipant(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(this.ctx.initResult===i.rb.Succeeded){const{added_participant:t,modified_participant:n,removed_participant:r}=e.contentObj;if((null==t?void 0:t.length)>0){const n=t.map(String),r=[];n.forEach((t=>{const n=Bt.fakeParticipant(this.ctx,t,{type:e.conversationType,id:e.conversationId});r.push(n)})),this.resolve(l.ParticipantManager).addBatch(e.conversationId,r)}if((null==n?void 0:n.length)>0){const t=this.resolve(l.ConversationManager).get(e.conversationId),r=n.map(String);this.resolve(l.ParticipantManager).updateWithUserIdAsync(t,r)}if((null==r?void 0:r.length)>0){const t=r.map(String);t.includes(this.ctx.option.userId)&&this.resolve(l.ConversationManager).leave(e.conversationId),this.resolve(l.ParticipantManager).delete(e.conversationId,t)}}}))}}class Nr extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=e.data.conversationId;if(!t)return g.ctxWarn(this.ctx,"no conversation provided in message, ignore",e.data),e.needContinue=!1,e;const n=this.resolve(l.ConversationManager).getRaw(t);if(e.data.type===s.m.MessageType.MESSAGE_TYPE_CONVERSATION_DESTROY&&n)return this.resolve(l.ConversationManager).delete(t),this.resolve(l.EventBus).emit(i.c5.ConversationDissolve,this,n),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),e.needContinue=!1,e;if(!e.data.isNormalMsg&&void 0===n)return e.needContinue=!1,this.ctx.initResult===i.rb.Succeeded&&g.ctxDebug(this.ctx,`ignore process, conv: ${e.data.conversationId} not exist for cmd msg`,e.data),e;const r=e.data,o=this.resolve(l.ConversationManager).getWithCreateLocal(r.conversationId,r.conversationShortId,r.conversationType);return e.conv=o,e}))}}class Fr extends Ut{process(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.data.isNormalMsg)return e;const n=this.resolve(l.MessageManager).getRaw(null===(t=e.conv)||void 0===t?void 0:t.id,e.data.clientId),r=void 0!==e.data.source&&(e.data.source===i.v$.Online||e.data.source===i.v$.UserInbox),o=void 0!==(null==n?void 0:n.flightStatus)&&r;this.resolve(l.MessageManager).upsert(e.data);const s=this.resolve(l.MessageManager).getRaw(e.data.conversationId,e.data.clientId);return n?o&&s.flightStatus!==i.b3.Received&&(s.flightStatus=i.b3.Received,this.ctx.initResult===i.rb.Succeeded&&this.resolve(l.EventBus).emit(i.c5.ReceiveSelfMessage,this,s),this.resolve(l.MessageManager).upsert(s)):r&&!e.data.isStrangerMessage&&(e.data.sender!==this.ctx.option.userId?this.ctx.initResult===i.rb.Succeeded&&this.resolve(l.EventBus).emit(i.c5.ReceiveNewMessage,this,s):this.ctx.initResult===i.rb.Succeeded&&this.resolve(l.EventBus).emit(i.c5.ReceiveSelfMessage,this,s)),e}))}}class Ur extends Ut{process(e){return(0,S.mG)(this,void 0,void 0,(function*(){return e.data.type===s.m.MessageType.MESSAGE_TYPE_UPDATE_MESSAGE_EXT&&(e.needContinue=!1,this.handleUpdateExt(e)),e}))}handleUpdateExt(e){var t,n,r,o;const a=null===(t=e.data)||void 0===t?void 0:t.ext[i.v9.ServerMessageId];if(!a)throw new w({ctx:this.ctx,type:i.NI.InvalidServerId,msg:`message ${e.data} has no s:server_message_id`,sender:this});const c=this.resolve(l.MessageManager).getByServerIdRaw(null===(n=e.conv)||void 0===n?void 0:n.id,a);if(c)if(c.version.gt(e.data.version))g.ctxWarn(this.ctx,`local msg version: ${c.version.toString()} > online msg version: ${e.data.version.toString()}, ignore, local msg:`,c,"online msg:",e.data);else{if(c.ext=e.data.ext,c.version=e.data.version,this.resolve(l.MessageManager).upsert(c),!c.visible){const t=this.resolve(l.MessageManager).getList(e.conv.id);for(const e of t)(null===(o=null===(r=e.referenceInfo)||void 0===r?void 0:r.referenced_message_id)||void 0===o?void 0:o.toString())===c.serverId&&(e.referenceInfo.referenced_message_status=s.m.MessageStatus.INVISIBLE,this.resolve(l.MessageManager).upsert(e))}this.resolve(l.EventBus).emit(i.c5.ReceiveNewUpdateExtMessage,this,e.data),"true"===e.data.ext[i.v9.IsRecalled]&&this.resolve(l.MessageManager).markRecalled(e.conv.id,c.serverId)}}}class Gr extends d{constructor(e){super(e),this.messages=new Map,this.processors=[new Nr(this.ctx),new Lr(this.ctx),new Ur(this.ctx),new Fr(this.ctx)]}applyLocal(e){e.forEach((e=>{this.messages.has(e.conversationId)||this.messages.set(e.conversationId,new Map);this.messages.get(e.conversationId).set(e.clientId,e)}))}clearAll(){this.messages.clear()}get(e,t){const n=this.getRaw(e,t);if(!n)throw new w({ctx:this.ctx,type:i.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return n}getRaw(e,t){return this.getConversationMap(e).get(t)}getRawMap(){return this.messages}getByServerIdRaw(e,t){const n=this.getConversationMap(e),r=Array.from(n.values()).filter((e=>e.serverId===t));if(0!==r.length)return this.get(e,r[0].clientId)}getByServerId(e,t){const n=this.getConversationMap(e),r=Array.from(n.values()).filter((e=>e.serverId===t));if(0===r.length)throw new w({ctx:this.ctx,type:i.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return this.get(e,r[0].clientId)}getList(e){const t=this.getConversationMap(e);return Array.from(t.values()).sort(Gr.messageComparator)}upsert(e){var t;if(e.isSpecialMessage)return void g.ctxWarn(this.ctx,"unexpected special message to upsert:",e);const n=this.getConversationMap(e.conversationId);if(this.ctx.option.maxMessageCount){const e=Math.max(200,Math.min(this.ctx.option.maxMessageCount,2e3));if(n.size>=e){let t=~~(e/5);for(const e of n.keys()){if(t<=0)break;n.delete(e),t--}}}const r=n.get(e.clientId);if(r&&r.type===e.type){["referenceInfo"].forEach((t=>{void 0===e[t]&&delete r[t]})),e=r.merge(e)}else r&&r.type!==e.type&&g.ctxWarn(this.ctx,"try to merge different msg:",r,e);if(n.set(e.clientId,e),null===(t=this.resolve(l.DbProxy))||void 0===t||t.upsertMessage(e),this.resolve(l.EventBus).emit(i.c5.MessageUpsert,this,e),this.ctx.initResult===i.rb.Succeeded){this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this);const t=this.getContext().resolve(l.ConversationManager).getRaw(e.conversationId);this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,t),void 0!==r&&(null==t||t.forceRefreshUnreadCount())}}getConversationMap(e){let t=this.messages.get(e);return t||(t=new Map,this.messages.set(e,t)),t}processNewMessage(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){if(e.ext||(e.ext={}),e.source=t,e.type>=0)return this.processMessage(e);throw new w({ctx:this.ctx,type:i.NI.UnknownMessageType,msg:`unknown message type: ${e.type} for msg:${e.clientId}`,sender:this})}))}processNewMessagesFromPull(e,t,n){var r;return(0,S.mG)(this,void 0,void 0,(function*(){const o=e.map((e=>Mt.fromServerMessage(this.ctx,e,n))),i=new Map;for(const e of o){e.ext||(e.ext={});const n=null===(r=i.get(e.conversationShortId))||void 0===r?void 0:r.indexInConversation;n&&!e.indexInConversation.lt(n)||i.set(e.conversationShortId,e),yield this.processNewMessage(e,t)}return{msgs:o,conMap:i}}))}delete(e,t){var n,r,o;const a=this.getConversationMap(e),c=Array.from(a.values()).filter((e=>e.serverId===t));if(0===c.length)return void g.ctxDebug(this.ctx,`delete not exist msg: ${e}::${t}`);a.delete(c[0].clientId),null===(n=this.resolve(l.DbProxy))||void 0===n||n.deleteMessage(c[0]);const u=this.getList(e);for(const e of u)(null===(o=null===(r=e.referenceInfo)||void 0===r?void 0:r.referenced_message_id)||void 0===o?void 0:o.toString())===t&&(e.referenceInfo.referenced_message_status=s.m.MessageStatus.DELETED,this.upsert(e));const f=this.getContext().resolve(l.ConversationManager).get(e);this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,f),this.resolve(l.EventBus).emit(i.c5.MessageUpsert,this,c[0]),this.resolve(l.EventBus).emit(i.c5.MessageDelete,this,c[0])}markRecalled(e,t,n){var r,o;const a=this.getByServerId(e,t);a.ext||(a.ext={}),a.ext[i.v9.IsRecalled]="true",n&&this.ctx.option.debug&&(a.ext[i.v9.LocalLogId]=n),this.upsert(a);const c=this.getList(e);for(const e of c)(null===(o=null===(r=e.referenceInfo)||void 0===r?void 0:r.referenced_message_id)||void 0===o?void 0:o.toString())===t&&(e.referenceInfo.referenced_message_status=s.m.MessageStatus.RECALLED,this.upsert(e));const u=this.getContext().resolve(l.ConversationManager).get(e);this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,u),this.resolve(l.EventBus).emit(i.c5.MessageUpsert,this,a),this.resolve(l.EventBus).emit(i.c5.MessageRecall,this,a)}clearConversation(e){var t;const n=this.getContext().resolve(l.ConversationManager).get(e);this.messages.set(e,new Map),null===(t=this.resolve(l.DbProxy))||void 0===t||t.clearConversation(n),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this),this.resolve(l.EventBus).emit(i.c5.ConversationUpsert,this,n)}injectProcessor(e){this.processors.push(e)}processMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){let t={needContinue:!0,data:e};for(const e of this.processors)if(t=yield e.process(t),!t.needContinue)break;return t.data}))}dispose(){this.messages.clear(),this.processors=[]}}Gr.messageComparator=(e,t)=>e.orderInConversation.gt(t.orderInConversation)?1:-1;class Hr extends d{constructor(e){super(e),this.participants=new Map}applyLocal(e){e.forEach((e=>{this.participants.has(e.conversationId)||this.participants.set(e.conversationId,new Map);this.participants.get(e.conversationId).set(e.userId.toString(),e)}))}forceApplyLocal(e){var t;const n=new Map;e.forEach((e=>{n.set(e.userId.toString(),e)})),this.participants.set(null===(t=e[0])||void 0===t?void 0:t.conversationId,n)}clearAll(){this.participants.clear()}updateWithUserIdAsync(e,t){var n,r,o,i;return(0,S.mG)(this,void 0,void 0,(function*(){const s=t.map((e=>k.fromValue(e))),a=yield this.resolve(l.CoreApi).GetConversationParticipantByUserId({conversationId:e.id,conversationShortId:k.fromString(e.shortId),conversationType:e.type,inboxType:e.inboxType,participants:s}),c=null!==(i=null===(o=null===(r=null===(n=null==a?void 0:a.body)||void 0===n?void 0:n.mget_conversation_participants_body)||void 0===r?void 0:r.participants)||void 0===o?void 0:o.map((t=>Bt.fromServerParticipant(this.ctx,t,e,a.log_id))))&&void 0!==i?i:[];this.upsertBatch(e.id,c)}))}upsert(e,t,n=!1){var r;let o=this.participants.get(e.toString());o||(o=new Map);let s=t;return s.userId=s.userId.toString(),o.has(t.userId.toString())&&(s=Bt.featLocalParticipant(o.get(t.userId.toString()),s)),o.set(t.userId.toString(),s),this.participants.set(e,o),n||this.resolve(l.EventBus).emit(i.c5.ParticipantUpsert,this,s),null===(r=this.resolve(l.DbProxy))||void 0===r||r.upsertParticipant(s),Array.from(o.values())}upsertBatch(e,t,n=!1){return t.forEach((t=>this.upsert(e,t,n))),this.get(e)}addBatch(e,t){const n=this.participants.get(e);return t.forEach((t=>{if(!(null==n?void 0:n.has(t.userId.toString()))&&(this.resolve(l.EventBus).emit(i.c5.ParticipantJoin,this,t),t.userId.toString()===this.ctx.option.userId.toString())){const t=this.getContext().resolve(l.ConversationManager).get(e);this.resolve(l.EventBus).emit(i.c5.ConversationJoin,this,t)}this.upsert(e,t)})),this.get(e)}delete(e,t){const n=this.participants.get(e);n&&t.forEach((e=>{var t;const r=n.get(e.toString());void 0!==r&&(n.delete(e.toString()),this.resolve(l.EventBus).emit(i.c5.ParticipantLeave,this,r),null===(t=this.resolve(l.DbProxy))||void 0===t||t.deleteParticipant(r))}))}get(e){const t=this.participants.get(e);if(t)return Array.from(t.values());throw new w({ctx:this.ctx,type:i.NI.ConversationNotExist,msg:`conversation ${e} participants is not loaded`,sender:this,args:{conversationId:e}})}getParticipant(e){var t,n,r,o,a;const c=[],u=this.getRaw(e.id);if((null==u?void 0:u.length)>0)return u;if(Number(null===(n=null===(t=null==e?void 0:e.firstPageParticipant)||void 0===t?void 0:t.participants)||void 0===n?void 0:n.length)>0)((null===(r=null==e?void 0:e.firstPageParticipant)||void 0===r?void 0:r.participants)||[]).forEach((t=>{c.push(Bt.fromServerParticipant(this.ctx,t,e,e.ext[i.v9.LocalLogId]))}));else if(e.type===s.m.ConversationType.ONE_TO_ONE_CHAT){g.ctxDebug(this.ctx,"no first page participant found, fallback to local");[e.toParticipantUserId,this.ctx.option.userId].forEach((t=>{if(t){const n=Bt.fakeParticipant(this.ctx,t,e);c.push(n)}}))}return this.upsertBatch(e.id,c,!0),(null===(o=e.firstPageParticipant)||void 0===o?void 0:o.has_more)&&this.resolve(l.CoreApi).GetConversationParticipantsList({conversationId:e.id,conversationShortId:k.fromString(e.shortId),conversationType:e.type,cursor:null!==(a=e.firstPageParticipant.cursor)&&void 0!==a?a:k.ZERO,limit:50,inboxType:e.inboxType}).then((t=>{var n,r;const o=null===(r=null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.conversation_participants_body)||void 0===r?void 0:r.participants_page;null==o||o.participants.forEach((n=>{c.push(Bt.fromServerParticipant(this.ctx,n,e,null==t?void 0:t.log_id))})),this.upsertBatch(e.id,c,!0)})),c}getMap(e){const t=this.participants.get(e);if(t)return t;throw new w({ctx:this.ctx,type:i.NI.ConversationNotExist,msg:`conversation ${e} participants is not loaded`,sender:this,args:{conversationId:e}})}getMapRaw(e){return this.participants.get(e)}getRaw(e){const t=this.participants.get(e);return t?Array.from(t.values()):[]}getByUserIdRaw(e,t){const n=this.participants.get(e);if(n)return n.get(t.toString())}dispose(){this.clearAll()}}class Vr extends d{isValidInbox(e){return void 0!==e&&(!!this.getContext().option.acceptIncorrectInboxType||this.getInboxTypeArray().includes(e))}needSpecifyInbox(){const e=this.ctx.option.inboxType;return!(void 0===e||"number"==typeof e&&e>=0)&&!!(Array.isArray(e)&&e.length>2)}getDefaultInboxWithoutCheck(){return this.getInboxTypeArray()[0]}getDefaultInbox(){if(this.needSpecifyInbox())throw new w({ctx:this.ctx,msg:"no available inboxType is provided",type:i.NI.InvalidInboxType,sender:this});return this.getDefaultInboxWithoutCheck()}getInboxTypeArray(){const e=this.ctx.option.inboxType;return Array.isArray(e)?e:void 0!==e?[e]:[0]}}class qr extends d{constructor(e){super(e),this.isCertAuth&&(this.securitySdk=new Je({aid:this.ctx.option.appId}))}get isCertAuth(){return this.ctx.option.authType===s.m.AuthType.CERT_AUTH}prepareToken(){var e;return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield null===(e=this.resolve(l.DbProxy))||void 0===e?void 0:e.loadConfig(xt.UserToken);!t||this.isCertAuth&&!1===this.getCert()?yield this.refreshToken():this.ctx.cachedToken=t}))}refreshToken(){var e,t;return(0,S.mG)(this,void 0,void 0,(function*(){const n=this.ctx.option.token;if("function"==typeof n){const t=b.performanceNow();let r,o=null;if(this.isCertAuth?o=yield this.handleCertAuthToken(n):(r=n(),o=r instanceof Promise?yield r:r),null!==o)return this.ctx.cachedToken=o,yield null===(e=this.resolve(l.DbProxy))||void 0===e?void 0:e.saveConfig(xt.UserToken,o),this.resolve(l.Monitor).emitDuration(m.BizRefreshToken,t),g.ctxDebug(this.ctx,"token cached from function: ",this.ctx.cachedToken),o;throw new w({ctx:this.ctx,msg:"token is null",type:i.NI.TokenFuncError,sender:this})}return this.ctx.cachedToken=n,g.ctxDebug(this.ctx,"token cached from const: ",this.ctx.cachedToken),yield null===(t=this.resolve(l.DbProxy))||void 0===t?void 0:t.saveConfig(xt.UserToken,this.ctx.cachedToken),n}))}sign(e){const t=this.securitySdk.cryptoSDK.sign(e),n=L(t);try{return JSON.parse(n)}catch(e){throw new w({ctx:this.ctx,msg:"Failed to JSON.parse signString",type:i.NI.AuthSignError,sender:this})}}getCert(){return this.securitySdk.cryptoSDK.getCertificateV2()}getTsSign(){return this.securitySdk.cryptoSDK.getTsSign()}handleCertAuthToken(e){return(0,S.mG)(this,void 0,void 0,(function*(){const t=yield this.securitySdk.cryptoSDK.getCertSignRequest(),{tsSign:n,token:r,sdkCert:o}=yield e(t),i={ts_sign:n,ticket:r,client_cert:o};return this.securitySdk.cryptoSDK.setSignValue(i),r}))}}class Kr{constructor(e,t){this.disposed=!1,this.plugins=[],this.innerCursor=[],this.ticker=void 0,this.isProcessing=!1;const n=new p;var r;if(this.ctx=n,n.register(l.Monitor,b),n.register(l.CoreInstance,this),e.headers||(e.headers={}),e.httpHeaders||(e.httpHeaders={}),e.extended||(e.extended={}),e.boe?(r=e,"string"==typeof(e=Object.assign(Object.assign(Object.assign({debug:!0,boe:!0},jr),r),{triggerStrategy:Object.assign(Object.assign({},jr.triggerStrategy),r.triggerStrategy)})).boe&&(e.headers[i.HF.envKey]=e.boe,e.headers[i.HF.boeHeaderKey]="1",e.httpHeaders[i.HF.envKey]=e.boe,e.httpHeaders[i.HF.boeHeaderKey]="1"),"boolean"==typeof e.boe&&(e.headers[i.HF.boeHeaderKey]="1",e.httpHeaders[i.HF.boeHeaderKey]="1")):(e=function(e){return Object.assign(Object.assign(Object.assign({},jr),e),{triggerStrategy:Object.assign(Object.assign({},jr.triggerStrategy),e.triggerStrategy)})}(e),"string"==typeof e.ppe?(e.headers[i.HF.envKey]=e.ppe,e.headers[i.HF.ppeHeaderKey]="1",e.httpHeaders[i.HF.envKey]=e.ppe,e.httpHeaders[i.HF.ppeHeaderKey]="1"):e.canary&&(e.headers[i.HF.envKey]="canary",e.httpHeaders[i.HF.envKey]="canary")),n.option=e,function(e,t){"number"!=typeof t.appId&&g.ctxError(e,"opt.appId is not a number! did you pass a string?"),"string"!=typeof t.deviceId&&g.ctxError(e,"opt.deviceId is not a string! did you pass a number?"),"string"!=typeof t.userId&&g.ctxError(e,"opt.userId is not a string! did you pass a number?"),"string"==typeof t.apiUrl&&0!==t.apiUrl.length||g.ctxError(e,"opt.apiUrl invalid"),"string"==typeof t.frontierUrl&&0!==t.frontierUrl.length||g.ctxError(e,"opt.frontierUrl invalid"),"object"==typeof t.headers&&Rr(e,"opt.headers",t.headers),"object"==typeof t.httpHeaders&&Rr(e,"opt.httpHeaders",t.httpHeaders),"object"==typeof t.monitorTagKv&&Rr(e,"opt.monitorTagKv",t.monitorTagKv),(Array.isArray(t.inboxType)&&(0===t.inboxType.length||t.inboxType.some((e=>e<0)))||"number"==typeof t.inboxType&&t.inboxType<0)&&g.ctxError(e,"opt.inboxType invalid"),"number"==typeof t.pullInterval&&t.pullInterval<5e3&&g.ctxDebug(e,"opt.pullInterval too short")}(this.ctx,e),e.adapter?(g.ctxDebug(this.ctx,"install adapter:",e.adapter),x.setDynamicAdapter(e.adapter)):this.initAdapter(),n.register(l.ConversationManager,Mr),n.register(l.MessageManager,Gr),n.register(l.ParticipantManager,Hr),n.register(l.EventBus,fr),n.register(l.NetworkManager,Ar),n.register(l.CoreApi,ur),n.register(l.InboxType,Vr),n.register(l.AuthManager,qr),e.debug){let t="undefined"!=typeof window?window:e.injectContext,r=`__imsdk_context_${this.ctx.id.split("-")[0]}`;if("object"==typeof e.injectContext&&(t=e.injectContext,e.injectContext=!0),"string"==typeof e.injectContext&&(r=e.injectContext,e.injectContext=!0),void 0===e.injectContext&&(e.injectContext=!0),"boolean"==typeof e.injectContext&&e.injectContext)try{Object.defineProperty(t,r,{enumerable:!1,configurable:!0,get:()=>n})}catch(e){g.ctxDebug(n,"inject ctx:",n,`with name: ${r} to`,t,"failed: ",e)}}Array.isArray(t)&&(t.forEach((e=>{const t=new e(n);t.install(),this.plugins.push(t)})),this.ctx.plugin=this.plugins),g.ctxDebug(this.ctx,"loaded plugin:",this.plugins),e.boe?g.ctxDebug(this.ctx,`using boe env: ${!0===e.boe?"default":e.boe}`):e.ppe&&g.ctxDebug(this.ctx,`using ppe env: ${e.ppe}`),this.network.onMessage.subscribe((e=>this.receivePacket(e))),Object.seal&&(Object.seal(this),Object.seal(n),Object.seal(Kr.prototype))}getContext(){return this.ctx}resolve(e){return this.ctx.resolve(e)}get initResult(){return this.ctx.initResult}set initResult(e){this.ctx.initResult=e}get event(){return this.resolve(l.EventBus)}get api(){return this.resolve(l.CoreApi)}get network(){return this.resolve(l.NetworkManager)}get auth(){return this.resolve(l.AuthManager)}get inboxType(){return this.resolve(l.InboxType)}get id(){return this.ctx.id}get option(){return this.ctx.option}getUserCursor(e){var t;return null!==(t=this.innerCursor[null!=e?e:this.inboxType.getDefaultInbox()])&&void 0!==t?t:k.ZERO}setUserCursor(e,t){var n;return(0,S.mG)(this,void 0,void 0,(function*(){const r=null!=t?t:this.inboxType.getDefaultInbox(),o=this.innerCursor[r];o&&!o.lt(e)||(g.ctxDebug(this.ctx,`update cursor for inbox:${r} from ${null==o?void 0:o.toString()} to ${e.toString()}`),this.innerCursor[r]=e,yield null===(n=this.resolve(l.DbProxy))||void 0===n?void 0:n.saveUserCursor(r,e))}))}init(e){var t,n,r,o,s,a,c,u;return(0,S.mG)(this,void 0,void 0,(function*(){const f=b.performanceNow();this.initResult=i.rb.Start;const h=null!==(n=yield null===(t=this.resolve(l.DbProxy))||void 0===t?void 0:t.init(this.ctx.option.userId))&&void 0!==n&&n;try{yield this.auth.prepareToken()}catch(e){return this.initResult=i.rb.Error,g.ctxError(this.ctx,"prepare token error:",e),this.resolve(l.Monitor).emitDuration(m.BizSdkInit+m.ErrorSuffix,f,{use_db:null!==(r=h.toString())&&void 0!==r?r:"unknown",reason:"token"}),this.initResult}for(const t of this.inboxType.getInboxTypeArray()){if(!(yield this.prepareHistoryForInbox({inboxType:t,convLimit:null==e?void 0:e.convLimit,msgLimit:null==e?void 0:e.msgLimit,mode:null==e?void 0:e.mode,convTotal:null==e?void 0:e.convTotal})))return this.initResult=i.rb.Error,g.ctxError(this.ctx,"init history error for inbox",t),this.resolve(l.Monitor).emitDuration(m.BizSdkInit+m.ErrorSuffix,f,{use_db:null!==(o=h.toString())&&void 0!==o?o:"unknown",reason:"history"}),this.initResult}yield this.resolve(l.ConversationManager).refreshLocalAsync(),this.resolve(l.EventBus).emitEmpty(i.c5.ConversationChange,this);try{for(const e of this.plugins)yield e.init()}catch(e){return this.initResult=i.rb.Error,g.ctxError(this.ctx,"init plugin error:",e),this.resolve(l.Monitor).emitDuration(m.BizSdkInit+m.ErrorSuffix,f,{use_db:null!==(s=h.toString())&&void 0!==s?s:"unknown",reason:"plugin"}),this.initResult}if(this.ctx.option.webSocketLevel!==i._.Disable)try{this.resolve(l.Monitor).emitCounter(m.WebSocketConnectFirst,1,{url:null!==(c=null===(a=this.network.ws)||void 0===a?void 0:a.url)&&void 0!==c?c:"unknown"}),yield this.network.connectWs(!0)}catch(e){g.ctxWarn(this.ctx,"skip websocket, init open fail:",e)}const p=!1===this.ctx.option.pullInterval||void 0===this.ctx.option.pullInterval?3e4:this.ctx.option.pullInterval;return g.ctxDebug(this.ctx,"use ticker interval:",p),this.ticker=new Tr(this.ctx,p),this.ticker.onTick.subscribe((()=>{this.tickerUpdate()})),this.ticker.restart(),this.initResult=i.rb.Succeeded,this.resolve(l.Monitor).emitDuration(m.BizSdkInit+m.SuccessSuffix,f,{use_db:null!==(u=h.toString())&&void 0!==u?u:"unknown"}),this.resolve(l.EventBus).emit(i.c5.InitFinish,this,this.initResult),this.initResult}))}getMessagesByUserInit(e={}){var t,n,r,o,s,a,c,u;return(0,S.mG)(this,void 0,void 0,(function*(){const f=null!==(t=e.inboxType)&&void 0!==t?t:this.inboxType.getDefaultInbox(),h=null!==(n=e.cursor)&&void 0!==n?n:k.ZERO,p=e.page;if(!this.inboxType.isValidInbox(f))throw new w({ctx:this.ctx,msg:"invalid inbox",type:i.NI.InvalidInboxType,sender:this});let d,v,y,m,_,b=k.ZERO,x=k.ZERO;if(e.mode===i.k5.AwemeMode){const t=yield this.api.GetMessagesByInit({inboxType:f,convLimit:e.convLimit,msgLimit:e.msgLimit,page:p,version:e.version}),n=null===(r=t.body)||void 0===r?void 0:r.message_by_init;d=null===(o=n.messages)||void 0===o?void 0:o.map((e=>e.conversations)),v=[],null===(s=n.messages)||void 0===s||s.forEach((e=>e.messages&&(null==v?void 0:v.push(...e.messages)))),y=null==n?void 0:n.user_cursor,m=n.has_more,x=n.next_init_version,_=t.log_id}else{const t=yield this.api.GetMessagesByUserInitV2({cursor:k.fromValue(h),inboxType:f,initSubType:e.initSubType,convLimit:e.convLimit,msgLimit:e.msgLimit}),n=null===(a=t.body)||void 0===a?void 0:a.messages_per_user_init_v2_body;d=n.conversations,v=n.messages,y=null==n?void 0:n.per_user_cursor,m=n.has_more,b=n.next_cursor,_=t.log_id}return this.processInitConversation(d,_),yield this.processInitMessage(v,_),this.getUserCursor(f).neq(k.ZERO)&&(null==y?void 0:y.neq(k.ZERO))&&(null===(c=this.getUserCursor(f))||void 0===c?void 0:c.neq(y))&&(g.ctxWarn(this.ctx,`cursor not match: before:${null===(u=this.getUserCursor(f))||void 0===u?void 0:u.toString()}, after:${null==y?void 0:y.toString()}, pull user, logid:${_}`),yield this.getMessagesByUser({inboxType:f})),y&&(yield this.setUserCursor(y,f)),this.resolve(l.EventBus).emitEmpty(i.c5.InitLoadPage,this),{hasMore:m,cursor:b,page:(null!=p?p:0)+1,version:x}}))}processInitMessage(e,t){return(0,S.mG)(this,void 0,void 0,(function*(){e&&(yield this.resolve(l.MessageManager).processNewMessagesFromPull(e,i.v$.Init,t))}))}processInitConversation(e,t){e&&e.map((e=>Rt.fromServerConversation(this.ctx,e,t))).forEach((e=>this.resolve(l.ConversationManager).upsert(e)))}getMessagesByUser(e={}){var t,n,r,o;return(0,S.mG)(this,void 0,void 0,(function*(){if(e.cursor instanceof Date&&(e.cursor=`${e.cursor.getTime()}000`),void 0===e.inboxType&&(e.inboxType=this.inboxType.getDefaultInbox()),!this.inboxType.isValidInbox(e.inboxType))throw new w({ctx:this.ctx,msg:"invalid inbox",type:i.NI.InvalidInboxType,sender:this});if(!0===this.ctx.option.disableInitPull&&0===this.getConversationList().length&&this.getUserCursor(e.inboxType).eq(k.ZERO)&&void 0===e.cursor)return void g.ctxWarn(this.ctx,"try to pull history from 0, preventing");let s=!0,a=void 0!==e.cursor?k.fromValue(e.cursor):this.getUserCursor(e.inboxType);for(;s;){const c=yield this.api.GetMessagesByUser({cursor:a,limit:null!==(t=e.limit)&&void 0!==t?t:50,inboxType:e.inboxType}),u=null===(n=c.body)||void 0===n?void 0:n.messages_per_user_body;s=u.has_more,a=u.next_cursor;const f=new Map;null===(r=u.hasmore_message_conv_list)||void 0===r||r.forEach((e=>{const t=e.toString(),n=this.resolve(l.ConversationManager).getWithShortIdRaw(t);f.set(t,null==n?void 0:n.lastMessageIndex)}));const{conMap:h}=yield this.resolve(l.MessageManager).processNewMessagesFromPull(u.messages,i.v$.UserInbox,c.log_id);null===(o=u.hasmore_message_conv_list)||void 0===o||o.forEach((e=>{const t=e.toString(),n=h.get(t);if(n){const e=this.resolve(l.ConversationManager).getRaw(n.conversationId);this.patchMessage({cursor:n,conversation:e,limitindex:f.get(t)})}else g.ctxWarn(this.ctx,`not found message of conversation in hasmore_message_conv_list, conversationid:${t}, logid:${c.log_id}`)})),this.initResult===i.rb.Start&&this.resolve(l.EventBus).emitEmpty(i.c5.InitLoadPage,this)}yield this.setUserCursor(a,e.inboxType),this.resolve(l.ConversationManager).refreshLocal()}))}getMessagesByConversation(e){var t,n,r,o;return(0,S.mG)(this,void 0,void 0,(function*(){let{cursor:a}=e;const{direction:c}=e;a instanceof Mt&&(a=a.indexInConversation),void 0===a&&(a=e.conversation.firstMessageIndex,e.conversation.firstMessageIndex.gt(null!==(t=e.conversation.__internal_pullCursor)&&void 0!==t?t:k.ZERO)&&(a=e.conversation.__internal_pullCursor,g.ctxDebug(this.ctx,`using internal cursor: ${a.toString()} < ${e.conversation.firstMessageIndex.toString()} for conversation:`,e.conversation)));const u=yield this.api.GetMessagesByConversation({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,anchorIndex:k.fromValue(a),direction:c||s.m.MessageDirection.OLDER,limit:null!==(n=e.limit)&&void 0!==n?n:20,inboxType:e.conversation.inboxType});this.resolve(l.Monitor).emitMetrics(m.GetMessagesByConversation,{count:1},{log_id:u.log_id,from:"user",conversation_id:e.conversation.shortId,cursor:k.fromValue(a).toString()});const f=null===(r=u.body)||void 0===r?void 0:r.messages_in_conversation_body;e.conversation.__internal_pullCursor=null!==(o=f.next_cursor)&&void 0!==o?o:e.conversation.__internal_pullCursor;const{msgs:h}=yield this.resolve(l.MessageManager).processNewMessagesFromPull(f.messages,i.v$.LoadMore,u.log_id);return{messages:h,hasMore:null==f?void 0:f.has_more,cursor:null==f?void 0:f.next_cursor}}))}markConversationRead(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){let r,o,{readIndex:i}=e;if(void 0===i?i=e.conversation.lastMessageIndex:i instanceof Mt&&(i=i.indexInConversation),!k.fromValue(i).lte(e.conversation.readIndex)){if(this.resolve(l.ConversationManager).markRead(e.conversation.id,k.fromValue(i)),this.ctx.option.unreadCountReport){const i=this.getConversationList({filter:t=>t.inboxType===e.conversation.inboxType&&t.isMember&&0===t.mode}).reduce(((e,t)=>e+t.unreadCount),0);o=null!==(t=e.totalUnreadCount)&&void 0!==t?t:i,r=null!==(n=e.convUnreadCount)&&void 0!==n?n:e.conversation.unreadCount}yield this.api.MarkConversationReadV3({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,readIndex:k.fromValue(i),inboxType:e.conversation.inboxType,unreadCount:void 0!==r?k.fromValue(r):void 0,totalUnreadCount:void 0!==o?k.fromValue(o):void 0})}}))}recallMessage(e){return(0,S.mG)(this,void 0,void 0,(function*(){if(!e.message.serverId)throw new w({ctx:this.ctx,type:i.NI.MessageNotReady,msg:`message ${e.message} is not ready`,sender:this});const t=this.resolve(l.ConversationManager).get(e.message.conversationId),n=yield this.api.RecallMessage({conversationId:e.message.conversationId,conversationShortId:k.fromString(e.message.conversationShortId),conversationType:e.message.conversationType,serverId:k.fromString(e.message.serverId),inboxType:t.inboxType});this.resolve(l.MessageManager).markRecalled(e.message.conversationId,e.message.serverId,n.log_id)}))}createConversation(e){var t,n,r,o,a;return(0,S.mG)(this,void 0,void 0,(function*(){const c=b.performanceNow();let u=[];const f={success:!1,payload:null};if(void 0===e.inboxType&&(e.inboxType=this.inboxType.getDefaultInbox()),!this.inboxType.isValidInbox(e.inboxType))throw new w({ctx:this.ctx,msg:"invalid inbox",type:i.NI.InvalidInboxType,sender:this});if(void 0===e.type&&(Array.isArray(e.participants)?e.participants.length<=1?e.type=s.m.ConversationType.ONE_TO_ONE_CHAT:e.type=s.m.ConversationType.GROUP_CHAT:e.type=s.m.ConversationType.ONE_TO_ONE_CHAT),u=Array.isArray(e.participants)?-1===e.participants.indexOf(this.ctx.option.userId)?e.participants.concat(this.ctx.option.userId):e.participants:[e.participants,this.ctx.option.userId],u.length>2&&e.type===s.m.ConversationType.ONE_TO_ONE_CHAT)return f.statusCode=i.NI.InvalidParam,f.statusMsg="one to one chat can only has 2 participants",f;void 0===e.persistent&&void 0!==e.idempotentId&&e.idempotentId.length>0&&(e.persistent=!0);try{const t=yield this.api.CreateConversationV2({type:e.type,participants:u.map((e=>k.fromValue(e))),persistent:e.persistent,idempotentId:e.idempotentId,name:e.name,avatarUrl:e.avatarUrl,desc:e.desc,bizExt:e.bizExt,inboxType:e.inboxType}),n=t.body.create_conversation_v2_body;if(f.checkCode=n.check_code,f.checkMsg=n.check_message,f.statusCode=n.status,f.statusMsg=n.extra_info,f.body=n,0===(null==n?void 0:n.status)){const e=Rt.fromServerConversation(this.ctx,null==n?void 0:n.conversation,t.log_id);this.resolve(l.ConversationManager).upsert(e),yield this.resolve(l.ConversationManager).refreshAsync(e),f.success=!0,f.payload=e}}catch(e){f.statusCode=null!==(t=e.type)&&void 0!==t?t:i.NI.NetworkError,f.innerError=e}return this.resolve(l.Monitor).emitMetrics(m.CreateConversation,{create_cost:b.performanceNow()-c},{type:null!==(r=null===(n=e.type)||void 0===n?void 0:n.toString())&&void 0!==r?r:"unknown",error_code:null!==(a=null===(o=f.statusCode)||void 0===o?void 0:o.toString())&&void 0!==a?a:"unknown"}),f}))}getConversation(e){return this.resolve(l.ConversationManager).get(e.conversationId)}getConversationOnline(e){return(0,S.mG)(this,void 0,void 0,(function*(){return this.resolve(l.ConversationManager).getWithOnline(e.conversationId,e.shortId,e.type)}))}getConversationList(e={}){return this.resolve(l.ConversationManager).getConversationArray(e.filter)}getConversationListOnline(e={}){return(0,S.mG)(this,void 0,void 0,(function*(){return yield this.resolve(l.ConversationManager).refreshLocalAsync(),this.getConversationList({filter:e.filter})}))}createMessage(e){var t;return(0,S.mG)(this,void 0,void 0,(function*(){void 0===e.insert&&(e.insert=!0);const n=Object.assign({},e.ext),r=Mt.createClientMessage(this.ctx,{type:e.type,content:e.content,ext:n,id:null!==(t=e.clientId)&&void 0!==t?t:u(),conversationId:e.conversation.id,mentionedUsers:e.mentionedUsers||[],conversationShortId:e.conversation.shortId,conversationType:e.conversation.type,referenceMessage:e.referenceMessage,referenceHint:e.referenceHint});return r.flightStatus=i.b3.Created,r.sendFunc=this.__internal_sendMessageObject.bind(this),r.indexInConversation=e.conversation.lastMessageIndex.add(1),r.orderInConversation=e.conversation.lastMessageOrder.add(1),e.insert&&(yield this.resolve(l.MessageManager).processNewMessage(r,i.v$.Offline)),r}))}sendMessage(e){var t,n,r,o;return(0,S.mG)(this,void 0,void 0,(function*(){const{message:s}=e,a=Date.now(),c=yield s.sendFunc(s);this.resolve(l.EventBus).emit(i.c5.MessageSend,this,s);try{const e=Date.now(),i=this.resolve(l.ConversationManager).get(s.conversationId);this.resolve(l.Monitor).emitMetrics(m.SendMessage,{con_member_count:i.participantCount-1,send_cost_time:e-a},{con_type:s.conversationType.toString(),conversation_id:s.conversationId,msg_uuid:s.serverId,msg_type:s.type.toString(),send_start_time:a.toString(),send_end_time:e.toString(),error_code:null!==(n=null===(t=c.statusCode)||void 0===t?void 0:t.toString())&&void 0!==n?n:"unknown",is_ws:(null===(r=this.network.ws)||void 0===r?void 0:r.isOpen())?"1":"0",logid:null!==(o=c.logid)&&void 0!==o?o:""})}catch(e){g.ctxWarn(this.ctx,"Fail to report data after send message",e)}return c}))}fetchConversation(e){return(0,S.mG)(this,void 0,void 0,(function*(){let t=null;if(void 0!==e.shortId){const t=this.resolve(l.ConversationManager).getWithShortIdRaw(e.shortId);if(null!==t&&!t.isOffline)return t}if(void 0===e.inboxType&&(e.inboxType=this.inboxType.getDefaultInbox()),!this.inboxType.isValidInbox(e.inboxType))throw new w({ctx:this.ctx,msg:"invalid inbox",type:i.NI.InvalidInboxType,sender:this});if(void 0!==e.idempotentId&&void 0===e.participantId){const n=yield this.createConversation({type:s.m.ConversationType.GROUP_CHAT,participants:[],inboxType:e.inboxType,idempotentId:e.idempotentId});n.success&&(t=n.payload,null!==t&&(yield this.getConversationOnline({conversationId:t.id,shortId:t.shortId,type:s.m.ConversationType.ONE_TO_ONE_CHAT})))}else if(void 0!==e.participantId){const n=yield this.createConversation({type:s.m.ConversationType.ONE_TO_ONE_CHAT,participants:e.participantId,inboxType:e.inboxType});n.success&&(t=n.payload,null!==t&&(yield this.resolve(l.ConversationManager).refreshAsync(t)))}else{if(void 0===e.shortId)throw new w({ctx:this.ctx,type:i.NI.InvalidParam,msg:"no valid param provided",reachServer:!1,sender:this});t=yield this.getConversationOnline({conversationId:e.shortId,shortId:e.shortId,type:s.m.ConversationType.GROUP_CHAT})}if(null===t||t.isOffline)throw new w({ctx:this.ctx,type:i.NI.ConversationNotExist,msg:"fetch failed, conv is null or offline",reachServer:!1,sender:this});return yield this.getMessagesByConversation({conversation:t}),t}))}dispose(){var e,t;this.resolve(l.EventBus).unsubscribeAll(),null===(e=this.ticker)||void 0===e||e.stop(),this.network.closeWs(),null===(t=this.network.ws)||void 0===t||t.dispose(),this.network.onMessage.unsubscribeAll();for(const e of this.plugins)e.dispose();this.plugins.forEach((e=>e.dispose())),this.plugins.length=0,this.resolve(l.ConversationManager).dispose(),this.resolve(l.MessageManager).dispose(),this.ctx.option.monitor=void 0,this.ctx.option.aspectBefore=()=>(g.ctxError(this.ctx,"do not invoke a disposed instance"),!1),this.disposed=!0,g.ctxDebug(this.ctx,"sdk unloaded, do not invoke this instance")}initAdapter(){}prepareHistoryForInbox({inboxType:e,convLimit:t,msgLimit:n,mode:r,convTotal:o}){var s,a,c;return(0,S.mG)(this,void 0,void 0,(function*(){try{const u=yield null===(s=this.resolve(l.DbProxy))||void 0===s?void 0:s.loadUserCursor(e);if(void 0!==u)return g.ctxDebug(this.ctx,`load history for inbox ${e} by db`),yield this.setUserCursor(u,e),yield this.getMessagesByUser({inboxType:e,cursor:u}),!0;if(this.ctx.option.disableInitPull){let o;if(g.ctxDebug(this.ctx,`load history for inbox ${e} by disable init`),r===i.k5.AwemeMode){const r=yield this.api.GetMessagesByInit({inboxType:e,convLimit:t,msgLimit:n});o=(null===(a=r.body)||void 0===a?void 0:a.message_by_init).user_cursor}else{const r=yield this.api.GetMessagesByUserInitV2({inboxType:e,convLimit:t,msgLimit:n,cursor:k.ZERO});o=(null===(c=r.body)||void 0===c?void 0:c.messages_per_user_init_v2_body).per_user_cursor}return yield this.setUserCursor(o,e),!0}g.ctxDebug(this.ctx,`load history for inbox ${e} by full init`);let f={hasMore:!0,cursor:k.ZERO,page:0,version:void 0};for(;f.hasMore&&(f=yield this.getMessagesByUserInit(Object.assign({inboxType:e,initSubType:this.ctx.option.initSubType,convLimit:t,msgLimit:n,mode:r},f)),!(o&&this.resolve(l.ConversationManager).getConversationArray().length>=o)););return!0}catch(t){return g.ctxError(this.ctx,`load history failed for inbox:${e}`,t),!1}}))}patchMessage(e){var t,n;return(0,S.mG)(this,void 0,void 0,(function*(){let{cursor:r}=e;if(!e.limitindex)return;r instanceof Mt&&(r=r.indexInConversation),void 0===r&&(r=e.conversation.firstMessageIndex);const o=yield this.api.GetMessagesByConversation({conversationId:e.conversation.id,conversationShortId:k.fromString(e.conversation.shortId),conversationType:e.conversation.type,anchorIndex:k.fromValue(r),direction:s.m.MessageDirection.OLDER,limit:null!==(t=e.limit)&&void 0!==t?t:20,inboxType:e.conversation.inboxType});this.resolve(l.Monitor).emitMetrics(m.GetMessagesByConversation,{count:1},{log_id:o.log_id,from:"patch",conversationId:e.conversation.shortId,cursor:k.fromValue(r).toString()});const a=null===(n=o.body)||void 0===n?void 0:n.messages_in_conversation_body,{conMap:c}=yield this.resolve(l.MessageManager).processNewMessagesFromPull(a.messages,i.v$.UserInbox,o.log_id),u=c.get(e.conversation.shortId);(null==a?void 0:a.has_more)&&u&&!e.limitindex.gt((null==u?void 0:u.indexInConversation)||k.ZERO)?this.patchMessage({conversation:e.conversation,limit:e.limit||20,cursor:null==a?void 0:a.next_cursor,limitindex:e.limitindex}):e.conversation.forceRefreshUnreadCount()}))}tickerUpdate(){return(0,S.mG)(this,void 0,void 0,(function*(){if((yield this.network.net.getConnectionStatus())!==rr.Disconnected&&this.initResult===i.rb.Succeeded){if(this.ctx.option.pullInterval&&!this.isProcessing)for(const e of this.inboxType.getInboxTypeArray())try{yield this.getMessagesByUser({inboxType:e}),this.resolve(l.Monitor).emitMetrics(m.GetMessagesByTicker,{count:1},{tick_timer:this.ticker.getTickTimer(),cursor:this.getUserCursor(e).toString(),time:Math.round(Date.now()/100).toString(),inbox:e.toString()})}catch(e){g.ctxWarn(this.ctx,"ticker running in pull user err:",e)}for(const e of this.plugins)try{yield e.ticker()}catch(e){g.ctxWarn(this.ctx,"ticker running in plugin err:",e)}}}))}__internal_sendMessageObject(e){var t,n,r,o,a;return(0,S.mG)(this,void 0,void 0,(function*(){const c={success:!1,payload:e};if(e.serverId)return c.statusCode=0,c;const u=this.resolve(l.ConversationManager).getRaw(e.conversationId);if(void 0===u)return c.statusCode=i.NI.ConversationNotExist,c.statusMsg=`conversation ${e.conversationId} not exist in local`,c;e.flightStatus=i.b3.Inflight,yield this.resolve(l.MessageManager).processNewMessage(e,i.v$.Offline);try{u.ticket||(yield this.resolve(l.ConversationManager).refreshTicket(u.id))}catch(n){return e.flightStatus=i.b3.Failed,c.statusCode=null!==(t=n.type)&&void 0!==t?t:i.NI.InvalidTicket,c.innerError=n,this.resolve(l.MessageManager).upsert(e),c}try{const t=yield this.api.SendMessage({conversationType:u.type,conversationId:u.id,conversationShortId:k.fromString(u.shortId),content:e.content,ticket:u.ticket,ext:e.ext,messageType:e.type,clientId:e.clientId,mentionedUsers:e.mentionedUsers.map((e=>k.fromString(e))),inboxType:u.inboxType,referenceInfo:e.referenceInfo}),a=null===(n=t.body)||void 0===n?void 0:n.send_message_body;if(e.ext[i.v9.SendResponseCheckCode]=null!==(r=null==a?void 0:a.check_code.toString())&&void 0!==r?r:"",e.ext[i.v9.SendResponseCheckMessage]=null==a?void 0:a.check_message,e.ext[i.v9.SendResponseExtraInfo]=null==a?void 0:a.extra_info,e.ext[i.v9.SendResponseStatus]=null!==(o=null==a?void 0:a.status.toString())&&void 0!==o?o:"",this.ctx.option.debug&&(e.ext[i.v9.LocalLogId]=t.log_id),c.body=a,c.checkCode=a.check_code,c.checkMsg=a.check_message,c.statusCode=a.status,c.statusMsg=a.extra_info,c.logid=t.log_id,0===a.status){const t=a.server_message_id.toString();e.serverId=t,e.flightStatus=i.b3.Succeeded,e.isOffline=!1,yield this.resolve(l.MessageManager).processNewMessage(e,i.v$.Offline),c.success=!0}else e.flightStatus!==i.b3.Received?(e.flightStatus=i.b3.Rejected,a.status===s.m.SendMessageStatus.CHECK_MSG_NOT_PASS_BUT_SELF_VISIBLE&&(e.flightStatus=i.b3.SelfVisible)):c.success=!0}catch(t){e.flightStatus!==i.b3.Received&&(e.flightStatus=i.b3.Failed),c.innerError=t,c.statusCode=null!==(a=t.type)&&void 0!==a?a:i.NI.NetworkError}return this.resolve(l.MessageManager).upsert(e),c}))}receivePacket(e){var t,n,r,o,a,c,u,f;return(0,S.mG)(this,void 0,void 0,(function*(){if(this.isProcessing=!0,this.initResult!==i.rb.Succeeded)return;let h=!1;const p=this.getUserCursor(e.inbox_type);if(e.cmd===s.m.IMCMD.NEW_MSG_NOTIFY){const d=null===(t=e.body)||void 0===t?void 0:t.has_new_message_notify;if(d){const t=this.resolve(l.ConversationManager).getRaw(d.conversation_id);yield this.clientAck({packet:e,inboxType:null!==(n=null==t?void 0:t.inboxType)&&void 0!==n?n:null==e?void 0:e.inbox_type,type:s.m.MsgReportType.MSG_RECEIVE_BY_WS})}if(d)if(p.lt(null!==(r=d.previous_cursor)&&void 0!==r?r:k.ZERO)||(null===(o=d.previous_cursor)||void 0===o?void 0:o.eq(k.ZERO)))h=!0,g.ctxWarn(this.ctx,`push cursour is greater than local cursor, push:${null!==(a=d.previous_cursor)&&void 0!==a?a:k.ZERO}, local:${p.toString()}, msgid:${null===(c=d.message)||void 0===c?void 0:c.server_message_id}, logid:${e.log_id}`);else if(null===(u=d.previous_cursor)||void 0===u?void 0:u.eq(p)){const t=d.message;if(t){this.reportMessageDelayTime(t,e.log_id);const n=Mt.fromServerMessage(this.ctx,t,e.log_id);n.ext||(n.ext={}),this.ctx.option.debug&&(n.ext[i.v9.LocalLogId]=e.log_id),yield this.resolve(l.MessageManager).processNewMessage(n,i.v$.Online),yield this.setUserCursor(d.next_cursor,e.inbox_type)}else g.ctxWarn(this.ctx,"msg body is empty:",d)}else h=!0,g.ctxWarn(this.ctx,`push cursour is less than local cursor, push:${d.previous_cursor}, local:${p}, msgid:${null===(f=d.message)||void 0===f?void 0:f.server_message_id}, logid:${e.log_id}`);else h=!0,g.ctxWarn(this.ctx,`push body is missing, logid:${e.log_id}`)}h&&(yield this.getMessagesByUser({inboxType:e.inbox_type,cursor:p})),this.resolve(l.ConversationManager).refreshLocal();for(const t of this.plugins)yield t.receivePacket(e);this.isProcessing=!1}))}clientAck({packet:e,inboxType:t,type:n}){var r,o,i,a,c,u;return(0,S.mG)(this,void 0,void 0,(function*(){if(!(null===(r=e.body)||void 0===r?void 0:r.has_new_message_notify)||!e.start_time_stamp||e.start_time_stamp.lte(0))return;let f;switch(yield this.network.net.getNetworkType()){case or.Cellular_2G:f=s.m.NetworkType.MOBILE_2G;break;case or.Cellular_3G:f=s.m.NetworkType.MOBILE_3G;break;case or.Cellular_4G:f=s.m.NetworkType.MOBILE_4G;break;case or.Cellular_5G:f=s.m.NetworkType.MOBILE_5G;break;case or.Wifi:f=s.m.NetworkType.WIFI;break;default:f=s.m.NetworkType.UNKNOWN}this.resolve(l.Monitor).emitMetrics(m.MessageAck,{count:1},{start_timestamp:e.start_time_stamp.toString(),cmd:e.cmd.toString(),network_type:f.toString(),logid:e.log_id,client_timestamp:(new Date).getTime().toString(),server_message_id:null!==(a=null===(i=null===(o=e.body.has_new_message_notify.message)||void 0===o?void 0:o.server_message_id)||void 0===i?void 0:i.toString())&&void 0!==a?a:"0",report_net_type:n.toString()}),yield this.api.ClientAck({startTimeStamp:e.start_time_stamp,cmd:e.cmd,NetworkType:f,logid:e.log_id,clientTimeStamp:k.fromNumber((new Date).getTime()),serverId:null!==(u=null===(c=e.body.has_new_message_notify.message)||void 0===c?void 0:c.server_message_id)&&void 0!==u?u:k.ZERO,inboxType:t,type:n})}))}reportMessageDelayTime(e,t){var n,r,o,i,s,a,c,u;const f=null===(n=e.create_time)||void 0===n?void 0:n.toNumber();if(!f)return;const h=this.ctx.option.timeCalibration?this.resolve(l.Monitor).avgDelta:0,p=Date.now(),d=p+h-f;d<=0?g.ctxDebug(this.ctx,`message reception delay is less than 0, serverId:${e.server_message_id}, current:${p}, createTime:${f}, timeDelta:${h}`):this.resolve(l.Monitor).emitMetrics(m.ReceiveMessage,{recieve_cost_time:d},{con_type:null!==(o=null===(r=e.conversation_type)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",conversation_id:null!==(i=e.conversation_id)&&void 0!==i?i:"",msg_uuid:null!==(a=null===(s=e.server_message_id)||void 0===s?void 0:s.toString())&&void 0!==a?a:"",recieve_end_time:p.toString(),recieve_start_time:f.toString(),time_delta:h.toString(),msg_type:null!==(u=null===(c=e.message_type)||void 0===c?void 0:c.toString())&&void 0!==u?u:"",error_code:"0",ntp_ready:this.ctx.option.timeCalibration?"1":"0",is_ws:"1",logid:t})}}class zr extends Kr{initAdapter(){x.setAdapter(_.HttpClient,nr),x.setAdapter(_.WebSocketClient,cr),x.setAdapter(_.NetApi,sr)}}var Wr=n(2403);var $r=n(6486),Yr=function(e){return e[e.print=-1]="print",e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.fatal=4]="fatal",e[e.none=5]="none",e}({}),Zr="metrics_category",Xr=n(2391),Jr=n.n(Xr),Qr=n(2725),eo=n.n(Qr),to=function(e){return"[object Object]"===Object.prototype.toString.call(e)},no=function(e){return"[object Map]"===Object.prototype.toString.call(e)};function ro(e){return function(e){if(Array.isArray(e))return so(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||io(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||io(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){if(e){if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ao=new Map;const co=function(e){return ao.get(e)},uo=function(){return eo()(ao)},lo=function(e){if(to(e)){var t=Object.entries(e);return t.forEach((function(e){var t=oo(e,2),n=t[0],r=t[1];ao.set(n,r)})),t.length}return!!no(e)&&(ro(e.entries()).forEach((function(e){var t=oo(e,2),n=t[0],r=t[1];ao.set(n,r)})),e.size)};function fo(e){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(e)}function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,go(r.key),r)}}function yo(e,t,n){return(t=go(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function go(e){var t=function(e,t){if("object"!==fo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fo(t)?t:String(t)}var mo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=arguments.length>2?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yo(this,"name",void 0),yo(this,"extraInfoProcess",void 0),yo(this,"getAvgDelta",(function(){return 0})),yo(this,"getLatestResourceEntryByName",(function(e){var t,n,r;return null===(t=performance)||void 0===t||null===(n=t.getEntriesByName)||void 0===n||null===(n=n.call(t,e,"resource"))||void 0===n||null===(r=n.pop)||void 0===r?void 0:r.call(n)})),this.name=t,this.extraInfoProcess=n,"function"==typeof r&&(this.getAvgDelta=r)}var t,n,r;return t=e,n=[{key:"formatExtraInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r={ocic_sdk_name:"linkchat-sdk",ocic_sdk_version:"unknown",ocic_user_id:String(co("userId"))||"unknown",ocic_businessLine_id:"".concat(co("businessLineId")||"unknown")};for(var o in this.name&&(r[Zr]=this.name),this.extraInfoProcess(e)){var i=(0,$r.snakeCase)(o);"number"==typeof e[o]?n[i]=e[o]:r[i]="string"==typeof e[o]?e[o]:Jr()(e[o])}return t?{metrics:n,categories:r}:{extra:po(po({},n),r)}}},{key:"performanceNow",value:function(){return"object"===("undefined"==typeof performance?"undefined":fo(performance))&&"function"==typeof performance.now&&"number"==typeof performance.timeOrigin?performance.now()+performance.timeOrigin:Date.now()}},{key:"emitHttp",value:function(t){var n;null===(n=e.slardar)||void 0===n||n.call(e,"report",{ev_type:"http",payload:t})}},{key:"emitEvent",value:function(t,n){var r;null===(r=e.slardar)||void 0===r||r.call(e,"sendEvent",po({name:this.name?"".concat(this.name,".").concat(t):t},this.formatExtraInfo(n,!0)))}},{key:"emitLog",value:function(t,n,r){var o;t!==Yr.none&&t!==Yr.print&&e.level<=t&&(null===(o=e.slardar)||void 0===o||o.call(e,"sendLog",po({level:Yr[t],content:n},this.formatExtraInfo(r))))}},{key:"emitError",value:function(t,n){var r,o;null===(r=e.slardar)||void 0===r||r.call(e,"captureException",t,null===(o=this.formatExtraInfo(n))||void 0===o?void 0:o.extra)}},{key:"emitCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(0!==t){var r=e+".counter";this.emitEvent(r,po(po({},n),{},{count:t}))}}},{key:"emitDuration",value:function(e,t){var n=this,r=this.performanceNow(),o=e+".duration",i=0;return function(e){if(!i)return i=n.performanceNow()-r,n.emitEvent(o,po(po(po({},t),e),{},{duration:i})),i}}},{key:"emitLatencyDuration",value:function(e,t,n,r){var o=e+".duration",i=n-t+this.getAvgDelta();i>0&&this.emitEvent(o,po(po({},r),{},{duration:i}))}},{key:"emitDelay",value:function(e,t,n){var r=e+".delay";this.emitEvent(r,po(po({},n),{},{delay:t}))}}],n&&vo(t.prototype,n),r&&vo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();yo(mo,"level",Yr.info),yo(mo,"slardar",void 0);const _o=new mo;var bo;function wo(e){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){So(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ko(r.key),r)}}function So(e,t,n){return(t=ko(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e){var t=function(e,t){if("object"!==wo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wo(t)?t:String(t)}var Co=(So(bo={},Yr.print,"#19be6b"),So(bo,Yr.debug,"#6db4f6"),So(bo,Yr.info,"#1890ff"),So(bo,Yr.warn,"#ff9900"),So(bo,Yr.error,"#ed4014"),So(bo,Yr.fatal,"#ff0000"),bo),Io=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),So(this,"name",void 0),So(this,"monitor",void 0),So(this,"print",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.print].concat(t))})),So(this,"debug",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.debug].concat(t))})),So(this,"info",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.info].concat(t))})),So(this,"warn",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.warn].concat(t))})),So(this,"error",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.error].concat(t))})),So(this,"fatal",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.log.apply(n,[Yr.fatal].concat(t))})),this.name=t,this.monitor=r}var t,n,r;return t=e,(n=[{key:"log",value:function(t,n,r){if(this.monitor.emitLog(t,n,this.name?Oo(Oo({},r),{},So({},Zr,this.name)):r),t!==Yr.none&&e.level<=t){var o,i=function(){};switch(t){case Yr.print:i=console.info.bind(console);break;case Yr.debug:case Yr.info:i=console.debug.bind(console);break;case Yr.warn:i=console.warn.bind(console);break;case Yr.error:case Yr.fatal:i=console.error.bind(console)}null===(o=i)||void 0===o||o("%c%s","color: ".concat(Co[t],"; font-weight: 700"),"[LINKCHAT_SDK]".concat(this.name?"-[".concat(this.name,"]"):"","-[").concat(Yr[t],"]:"),n,null!=r?r:"")}}}])&&Eo(t.prototype,n),r&&Eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();So(Io,"level",Yr.none);const Po=new Io;function To(e){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(e)}function Ao(e,t){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ao(e,t)}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mo(e);if(t){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===To(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ro(e)}(this,n)}}function Ro(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mo(e)}function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Go(r.key),r)}}function Fo(e,t,n){return t&&No(e.prototype,t),n&&No(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uo(e,t,n){return(t=Go(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e){var t=function(e,t){if("object"!==To(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==To(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===To(t)?t:String(t)}var Ho=function(){function e(t){Lo(this,e),Uo(this,"slardar",void 0),Uo(this,"errorTypeBlacklist",[i.NI.NetworkError]),this.slardar=t}return Fo(e,[{key:"emitError",value:function(e,t){var n;if("function"==typeof(null===(n=this.slardar)||void 0===n?void 0:n.captureException)&&!this.errorTypeBlacklist.includes(e.type))try{var r;null===(r=this.slardar)||void 0===r||r.captureException(e,Do(Do({},t),{},{type:"".concat(e.type,":").concat(i.NI[e.type]),msg:e.msg,logid:e.logid,args:e.args}))}catch(e){}}},{key:"emitNetwork",value:function(e,t,n){if(void 0!==t&&0!==t.status_code)try{var r;null===(r=this.slardar)||void 0===r||r.call(this,"sendLog",{level:"error",content:"Response Error:".concat(t.status_code,", cmd: ").concat(t.cmd," msg: ").concat(t.error_desc,", logid: ").concat(t.log_id),extra:Do({cmd:"".concat(t.cmd)},n)})}catch(e){}}},{key:"emitEvent",value:function(e,t,n){}},{key:"emitLog",value:function(e,t){if(e!==f.debug){var n={};t.forEach((function(e,t){n[t]=e}));try{var r;null===(r=this.slardar)||void 0===r||r.call(this,"sendLog",{level:f[e],content:t.join(","),extra:Do({},n)})}catch(e){}}}},{key:"emitTracker",value:function(e,t){try{var n;null===(n=this.slardar)||void 0===n||n.call(this,"sendLog",{level:"debug",content:e,extra:t})}catch(e){}}},{key:"emitMetrics",value:function(e){}}]),e}(),Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ao(e,t)}(n,e);var t=jo(n);function n(e){var r;return Lo(this,n),Uo(Ro(r=t.call(this,e)),"customSlardar",void 0),r.customSlardar=e,r}return Fo(n,[{key:"emitMetrics",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!["imsdk.network.request","imsdk.frontier.receive"].includes(e))try{var r;null===(r=this.customSlardar)||void 0===r||r.call(this,"sendEvent",{name:e,metrics:t,categories:n})}catch(e){}}}]),n}(Ho);function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$o(r.key),r)}}function zo(e,t,n){return t&&Ko(e.prototype,t),n&&Ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wo(e,t,n){return(t=$o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){var t=function(e,t){if("object"!==qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qo(t)?t:String(t)}var Yo=zo((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wo(this,"monitor",void 0),Wo(this,"logger",void 0);var o=new mo(t,n,r);return{monitor:o,logger:new Io(t,o)}})),Zo=function(e){return e.Init="linkchat.sdk.initProps",e.ImcloudConfig="imcloud.init.config",e.GetToken="linkchat.sdk.getToken",e.AuthError="linkchat.sdk.authError",e.CreateDialogAsync="linkchat.sdk.CreateDialogAsync",e.CreateDialogError="linkchat.sdk.CreateDialogError",e.CreateDialogLow="linkchat.sdk.CreateDialogLow",e}({}),Xo=function(e){return e.SendMessage="send.text.message",e.SendFileMessage="send.file.message",e}({}),Jo=function(e){return e.CreateDialog="http.create.dialog",e.TransferAgent="http.transfer.agent",e}({}),Qo=function(e){return e.SdkInitSuccess="imcloud.sdk.init.success",e.SdkInitFail="imcloud.sdk.init.fail",e.WebSocketDisconnected="imcloud.sdk.ws.WebSocketDisconnected",e.WebSocketConnected="imcloud.sdk.ws.WebSocketConnected",e.ConversationChange="imcloud.sdk.ws.ConversationChange",e.WsError="imcloud.sdk.ws.Error",e.ReceiveNewMessage="imcloud.sdk.ReceiveNewMessage",e.SendMessageError="imcloud.sdk.SendMessageError",e.SendFileMessageError="imcloud.sdk.SendFileMessageError",e.MessageRender="imcloud.sdk.MessageRenderDur",e.InitLoadPage="imcloud.sdk.InitLoadPage",e}({}),ei=["initDialogInfo","filterAgentMessage","initLoadSize"],ti=["dialogId","type","status"],ni=["id"],ri=["content","conversationId","conversationShortId","conversationType","createdAt","isFromMe","sender","clientId","serverId","type","flightStatus","isRecalled","ext"];function oi(e){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(e)}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ai(){ai=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==oi(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(oi(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach((function(t){_i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function li(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function fi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){li(i,r,o,s,a,"next",e)}function a(e){li(i,r,o,s,a,"throw",e)}s(void 0)}))}}function hi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bi(r.key),r)}}function di(){return di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},di.apply(this,arguments)}function vi(e,t){return vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vi(e,t)}function yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mi(e);if(t){var o=mi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gi(e)}(this,n)}}function gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(e){return mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mi(e)}function _i(e,t,n){return(t=bi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e){var t=function(e,t){if("object"!==oi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oi(t)?t:String(t)}var wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vi(e,t)}(a,e);var t,n,r,o=yi(a);function a(e){e.initDialogInfo;var t,n=e.filterAgentMessage,r=e.initLoadSize,c=hi(e,ei);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),_i(gi(t=o.call(this)),"initLoadSize",void 0),_i(gi(t),"cursor",void 0),_i(gi(t),"imcloudConfig",void 0),_i(gi(t),"appContext",void 0),_i(gi(t),"instance",void 0),_i(gi(t),"loading",!1),_i(gi(t),"filterAgentMessage",!1),_i(gi(t),"messageRenderDur",_o.emitDuration(Qo.MessageRender)),_i(gi(t),"pullMessages",fi(ai().mark((function e(){var n,r,o,i=arguments;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},t.loading=!0,t.conversationInfo){e.next=4;break}return e.abrupt("return",{hasMore:!1,messages:[]});case 4:return e.prev=4,e.next=7,null===(r=t.instance)||void 0===r?void 0:r.getMessagesByConversation(ui({conversation:t.conversationInfo,cursor:t.cursor,limit:20},n));case 7:return o=e.sent,t.cursor=null==o?void 0:o.cursor,t.loading=!1,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(4),t.loading=!1,e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))),_i(gi(t),"pullHistoryMessages",fi(ai().mark((function e(){var n,r;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.conversationInfo){e.next=2;break}return e.abrupt("return",{hasMore:!1,messages:[]});case 2:return e.prev=2,e.next=5,null===(n=t.instance)||void 0===n?void 0:n.getMessagesByConversation({conversation:t.conversationInfo,cursor:t.cursor||"0",limit:20});case 5:return r=e.sent,t.cursor=null==r?void 0:r.cursor,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),_i(gi(t),"read",(function(e){var n;if(t.conversationInfo)return null===(n=t.instance)||void 0===n?void 0:n.markConversationRead({conversation:t.conversationInfo,readIndex:e})})),_i(gi(t),"getMessages",(function(){var e,n;return(null===(e=t.conversationInfo)||void 0===e||null===(n=e.getMessageList)||void 0===n?void 0:n.call(e,(function(e){return e.visible&&(void 0===t.cursor||e.indexInConversation.gte(t.cursor))})))||[]})),_i(gi(t),"sendMessage",function(){var e=fi(ai().mark((function e(t,n){var r,o,i;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.fileInfo)||void 0===r||!r.fileHandler){e.next=4;break}return e.abrupt("return",null===(o=t.utils)||void 0===o?void 0:o.sendFile(n));case 4:return e.abrupt("return",null===(i=t.utils)||void 0===i?void 0:i.sendMessage(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_i(gi(t),"recallMessage",function(){var e=fi(ai().mark((function e(n){var r,o,i;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.messageList,!(o=r.find((function(e){return e.serverId===n})))){e.next=7;break}return e.next=5,t.instance.recallMessage({message:o});case 5:return i=e.sent,e.abrupt("return",i);case 7:throw"no message";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_i(gi(t),"refreshFileUrl",function(){var e=fi(ai().mark((function e(n,r){var o,i,s;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=6;break}if(36e5,o=(new Date).getTime(),!(36e5+r>o)){e.next=6;break}return e.abrupt("return");case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.next=12,t.instance.getMessageByServerId({conversation:t.conversationInfo,serverMessageId:n});case 12:if(!(i=e.sent)){e.next=18;break}return e.next=16,t.instance.refreshFileUrl({message:i});case 16:return s=e.sent,e.abrupt("return",s);case 18:throw"no message";case 19:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()),_i(gi(t),"resendMessage",function(){var e=fi(ai().mark((function e(n){var r,o,i;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.messageList,!(o=r.find((function(e){return e.clientId===n})))){e.next=7;break}return e.next=5,t.instance.sendMessage({message:o});case 5:return i=e.sent,e.abrupt("return",i);case 7:throw"no message";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_i(gi(t),"transformDialog",(function(){var e,n,r,o,i,s,a=(null===(e=t.dialog)||void 0===e?void 0:e.ext)||{},c=a.dialogId,u=a.type,l=a.status,f=hi(a,ti),h=(null===(n=t.appContext)||void 0===n?void 0:n.dialogInfo)||{},p=h.id,d=c<p?p:c;return ui(ui({},hi(h,ni)),{},{dialogId:d,id:t.dialog.id,shortId:t.dialog.shortId,conversationId:t.dialog.id,conversationShortId:t.dialog.shortId,unreadCount:t.dialog.unreadCount,firstPageParticipant:t.dialog.firstPageParticipant,participants:t.dialog.participants,lastMessage:t.dialog.lastMessage,lastMessageIndex:t.dialog.lastMessageIndex,lastMessageId:(null===(r=t.dialog)||void 0===r||null===(r=r.lastMessage)||void 0===r?void 0:r.clientId)||(null===(o=t.dialog)||void 0===o||null===(o=o.lastMessage)||void 0===o?void 0:o.serverId),customerId:null===(i=t.dialog.coreInfo)||void 0===i?void 0:i.owner,customerName:null===(s=t.dialog.coreInfo)||void 0===s?void 0:s.name,ext:ui(ui({},f),{},{dialogId:d,type:(0,$r.isUndefined)(u)?null:Number(u),status:(0,$r.isUndefined)(l)?null:Number(l)})})})),_i(gi(t),"transMessage",(function(e){var t=e.content,n=e.conversationId,r=e.conversationShortId,o=e.conversationType,i=e.createdAt,s=e.isFromMe,a=e.sender,c=e.clientId,u=e.serverId,l=e.type,f=e.flightStatus,h=e.isRecalled,p=e.ext;return ui(ui({},hi(e,ri)),{},{_id:c||u,content:t,conversationId:n,conversationShortId:r,conversationType:o,createdAt:i,createdTime:i.getTime(),isFromMe:s,sender:String(a),senderType:p.senderType,clientId:c,serverId:u,type:l,flightStatus:f,isRecalled:h,recalled:h,recall:h,ext:ui({},p)})})),_i(gi(t),"emitChange",(function(){!t.loading&&t.filterAgentMessage&&t.emitDialogRefresh()})),_i(gi(t),"getMessageById",function(){var e=fi(ai().mark((function e(n){var r;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.instance.getMessageByServerId({conversation:t.dialog,serverMessageId:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_i(gi(t),"emitDialogRefresh",(function(){var e=t.instance.getConversationList();if(Array.isArray(e)&&e.length>0){var n=ii(e,1)[0],r=n.getMessageList();if(r.length&&(t.messageRenderDur&&t.messageRenderDur({length:r.length}),t.messageRenderDur=null),t.emitDialogChange(t.transformDialog()),t.filterAgentMessage){var o,i,s,a,c,u,l,f,h,p;if(null!==(o=t.appContext)&&void 0!==o&&null!==(o=o.dialogInfo)&&void 0!==o&&o.id)i=null===(c=t.appContext.dialogInfo)||void 0===c?void 0:c.id,s=null===(u=t.appContext.dialogInfo)||void 0===u?void 0:u.type,a=null===(l=t.appContext.dialogInfo)||void 0===l?void 0:l.status;else i=null===(f=n.ext)||void 0===f?void 0:f.dialogId,s=null===(h=n.ext)||void 0===h?void 0:h.type,a=null===(p=n.ext)||void 0===p?void 0:p.status;t.emitMessagesChange(r.map(t.transMessage).filter((function(e){var t;return+(null===(t=e.ext)||void 0===t?void 0:t.dialogId)==+i&&(+s==+Wr.My.AGENT||+s==+Wr.My.OFFLINE||+a===Wr.Mc.QUEUEING)})))}else t.emitMessagesChange(r.map(t.transMessage))}else t.emitDialogChange(t.transformDialog()),t.emitMessagesChange([])})),_i(gi(t),"init",function(){var e=fi(ai().mark((function e(n){var r;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.instance){e.next=2;break}return e.abrupt("return");case 2:return t.appContext=n,t.emitDialogChange(n.dialog),t.instance.event.subscribe(i.c5.InitLoadPage,(function(){Po.info(Qo.InitLoadPage,{dialogExt:JSON.stringify(t.dialog.ext)}),t.emitInitSuccsess(t.instance,t.dialog),t.emitDialogRefresh()})),t.instance.event.subscribe(i.c5.MessageSend,fi(ai().mark((function e(){return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emitDialogRefresh();case 1:case"end":return e.stop()}}),e)})))),t.instance.event.subscribe(i.c5.ReceiveNewMessage,function(){var e=fi(ai().mark((function e(n){var r,o,i;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Date.now()-(null==n||null===(r=n.createdAt)||void 0===r?void 0:r.getTime())>1e3&&_o.emitDelay(Qo.ReceiveNewMessage,Date.now()-(null==n||null===(o=n.createdAt)||void 0===o?void 0:o.getTime()),ui(ui({},n.ext),{},{now:Date.now(),created:null==n||null===(i=n.createdAt)||void 0===i?void 0:i.getTime()})),t.emitMessageChange(n),t.emitDialogRefresh();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.instance.event.subscribe(i.c5.ConversationChange,fi(ai().mark((function e(){var n;return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Po.info(Qo.ConversationChange,{dialogExt:JSON.stringify(t.dialog.ext),conversationId:t.dialog.id,lastMsgId:null===(n=t.dialog)||void 0===n||null===(n=n.lastMessage)||void 0===n?void 0:n.serverId}),t.emitDialogRefresh();case 2:case"end":return e.stop()}}),e)})))),t.instance.event.subscribe(i.c5.WebSocketConnected,(function(e){var n;t.instance.getMessagesByUser().catch((function(){})),_o.emitCounter(Qo.WebSocketConnected),Po.info(Qo.WebSocketConnected,{socketurl:null==e||null===(n=e.ws)||void 0===n?void 0:n.url})})),t.instance.event.subscribe(i.c5.WebSocketDisconnected,(function(e){var n;_o.emitCounter(Qo.WebSocketDisconnected),Po.info(Qo.WebSocketDisconnected,{socketurl:null==e||null===(n=e.ws)||void 0===n?void 0:n.url,config:t.imcloudConfig})})),t.instance.event.subscribe(i.c5.Error,(function(e){_o.emitCounter(Qo.WsError),Po.error(Qo.WsError,e)})),e.prev=11,r=t.instance.init({msgLimit:t.initLoadSize}),e.next=15,r;case 15:if(e.sent===i.rb.Succeeded){e.next=18;break}throw new Error("BytedIM instance init error");case 18:return _o.emitCounter(Qo.SdkInitSuccess),t.instance.getUserConversationList({type:s.m.ConversationType.GROUP_CHAT}),e.abrupt("return",r);case 23:throw e.prev=23,e.t0=e.catch(11),_o.emitCounter(Qo.SdkInitFail),Po.error("BytedIM instance init error",{error:e.t0,config:t.imcloudConfig}),e.t0;case 28:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(t){return e.apply(this,arguments)}}()),t.initLoadSize=r||20,t.imcloudConfig=c,t.filterAgentMessage=n||!1;var u=[St,Kt,$t];return function(){if("undefined"==typeof window)return!1;for(var e=0,t=["indexedDB","IDBDatabase","IDBObjectStore","IDBTransaction","IDBIndex","IDBCursor","IDBKeyRange","IDBRequest"];e<t.length;e++){var n=t[e];if(!window.hasOwnProperty(n)||!window[n])return!1}return!0}()&&c.storage&&u.push($n),t.instance=new zr(c,u),t}return t=a,(n=[{key:"byteIM",get:function(){return this.instance}},{key:"messageList",get:function(){return this.getMessages()}},{key:"conversationInfo",get:function(){var e;return null===(e=this.instance.getConversationList())||void 0===e?void 0:e[0]}},{key:"dialog",get:function(){var e,t;return(null===(e=this.instance.getConversationList())||void 0===e?void 0:e[0])||(null===(t=this.appContext)||void 0===t?void 0:t.dialog)||{}}},{key:"destory",value:function(){this.instance.dispose(),di(mi(a.prototype),"destroy",this).call(this)}}])&&pi(t.prototype,n),r&&pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.r);const xi=wi;function Oi(e){return"function"==typeof e}function Ei(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Si=Ei((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function ki(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ci=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=(0,S.XA)(i),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var c=this.initialTeardown;if(Oi(c))try{c()}catch(e){o=e instanceof Si?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=(0,S.XA)(u),f=l.next();!f.done;f=l.next()){var h=f.value;try{Ti(h)}catch(e){o=null!=o?o:[],e instanceof Si?o=(0,S.ev)((0,S.ev)([],(0,S.CR)(o)),(0,S.CR)(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new Si(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Ti(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ki(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ki(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Ii=Ci.EMPTY;function Pi(e){return e instanceof Ci||e&&"closed"in e&&Oi(e.remove)&&Oi(e.add)&&Oi(e.unsubscribe)}function Ti(e){Oi(e)?e():e.unsubscribe()}var Ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ji={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=ji.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,S.ev)([e,t],(0,S.CR)(n))):setTimeout.apply(void 0,(0,S.ev)([e,t],(0,S.CR)(n)))},clearTimeout:function(e){var t=ji.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ri(){}var Mi=Bi("C",void 0,void 0);function Bi(e,t,n){return{kind:e,value:t,error:n}}var Di=null;function Li(e){if(Ai.useDeprecatedSynchronousErrorHandling){var t=!Di;if(t&&(Di={errorThrown:!1,error:null}),e(),t){var n=Di,r=n.errorThrown,o=n.error;if(Di=null,r)throw o}}else e()}var Ni=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Pi(t)&&t.add(n)):n.destination=Ki,n}return(0,S.ZT)(t,e),t.create=function(e,t,n){return new Hi(e,t,n)},t.prototype.next=function(e){this.isStopped?qi(function(e){return Bi("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?qi(Bi("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?qi(Mi,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ci),Fi=Function.prototype.bind;function Ui(e,t){return Fi.call(e,t)}var Gi=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Vi(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Vi(e)}else Vi(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Vi(e)}},e}(),Hi=function(e){function t(t,n,r){var o,i,s=e.call(this)||this;Oi(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&Ai.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&Ui(t.next,i),error:t.error&&Ui(t.error,i),complete:t.complete&&Ui(t.complete,i)}):o=t;return s.destination=new Gi(o),s}return(0,S.ZT)(t,e),t}(Ni);function Vi(e){var t;Ai.useDeprecatedSynchronousErrorHandling?(t=e,Ai.useDeprecatedSynchronousErrorHandling&&Di&&(Di.errorThrown=!0,Di.error=t)):function(e){ji.setTimeout((function(){var t=Ai.onUnhandledError;if(!t)throw e;t(e)}))}(e)}function qi(e,t){var n=Ai.onStoppedNotification;n&&ji.setTimeout((function(){return n(e,t)}))}var Ki={closed:!0,next:Ri,error:function(e){throw e},complete:Ri},zi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Wi(e){return e}function $i(e){return 0===e.length?Wi:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Yi=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof Ni||function(e){return e&&Oi(e.next)&&Oi(e.error)&&Oi(e.complete)}(r)&&Pi(r)?e:new Hi(e,t,n);return Li((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Zi(t))((function(t,r){var o=new Hi({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[zi]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $i(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Zi(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Zi(e){var t;return null!==(t=null!=e?e:Ai.Promise)&&void 0!==t?t:Promise}var Xi=Ei((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Ji=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,S.ZT)(t,e),t.prototype.lift=function(e){var t=new Qi(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Xi},t.prototype.next=function(e){var t=this;Li((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,S.XA)(t.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(e)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Li((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Li((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?Ii:(this.currentObservers=null,i.push(e),new Ci((function(){t.currentObservers=null,ki(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new Yi;return e.source=this,e},t.create=function(e,t){return new Qi(e,t)},t}(Yi),Qi=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,S.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Ii},t}(Ji);function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,os(r.key),r)}}function ns(e,t,n){return t&&ts(e.prototype,t),n&&ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rs(e,t,n){return(t=os(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function os(e){var t=function(e,t){if("object"!==es(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===es(t)?t:String(t)}var is=function(e){return e.Ready="Ready",e.Pending="Pending",e.Ending="Ending",e}(is||{});const ss=new(ns((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rs(this,"status",is.Ready),rs(this,"heart",0),rs(this,"errorTimes",0),rs(this,"run",(function(e){t.status!==is.Pending&&(t.status=is.Pending,t.start(e))})),rs(this,"start",(function(e){t.heart&&window.clearInterval(t.heart),t.heart=window.setInterval((function(){var n;t.errorTimes>10||null===(n=e.utils.services)||void 0===n||null===(n=n.apis)||void 0===n||n.setClientHeartbeat({userId:co("userId"),secretUserId:encodeURIComponent(decodeURIComponent(e.userInfo.secretUserId))}).then((function(){t.errorTimes=0})).catch((function(e){t.errorTimes++}))}),e.ext.heartTime||3e4)})),rs(this,"stop",(function(){t.heart&&window.clearInterval(t.heart),t.status=is.Ending}))})));var as=n(6751),cs=function(e){return e.AUTH_ERROR="AUTH_ERROR",e.GET_CONFIG_ERROR="GET_CONFIG_ERROR",e.GET_TOKEN_ERROR="GET_TOKEN_ERROR",e.SEND_IN_CLOSE_DIALOG_ERROR="SEND_IN_CLOSE_DIALOG_ERROR",e.SEND_FILE_MESSAGE_ERROR="SEND_FILE_MESSAGE_ERROR",e.SEND_MESSAGE_ERROR="SEND_MESSAGE_ERROR",e.CREATE_DIALOG_ERROR="CREATE_DIALOG_ERROR",e.QUEUE_ERROR="QUEUE_ERROR",e.CLEAR_QUEUE_ERROR="CLEAR_QUEUE_ERROR",e.HEART_ERROR="HEART_ERROR",e.CREATE_IMCLOUD_ERROR="CREATE_IMCLOUD_ERROR",e.DIALOG_NOT_IN_LOCAL="DIALOG_NOT_IN_LOCAL",e.SOCKET_CONNECT_DIS="SOCKET_CONNECT_DIS",e.IMSDK_ERROR="IMSDK_ERROR",e.IMCLOUD_NO_PUSH="IMCLOUD_NO_PUSH",e.NET_ERROR="NET_ERROR",e.NET_ERROR_401="NET_ERROR_401",e}({}),us=function(e){return e.TransferEventCode="transferEventCode",e.TriggerJarvisEventCode="triggerJarvisEventCode",e.CreateDialogEventCode="CreateDialogEventCode",e.EndDialogEventCode="EndDialogEventCode",e}({}),ls={SYS:1e6},fs=new Ji;function hs(e){return hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(e)}function ps(){ps=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==hs(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(hs(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){bs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function gs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){ys(i,r,o,s,a,"next",e)}function a(e){ys(i,r,o,s,a,"throw",e)}s(void 0)}))}}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ws(r.key),r)}}function _s(e,t,n){return t&&ms(e.prototype,t),n&&ms(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bs(e,t,n){return(t=ws(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ws(e){var t=function(e,t){if("object"!==hs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hs(t)?t:String(t)}var xs=function(e){return e.Ready="Ready",e.Pending="Pending",e.End="End",e}({}),Os=_s((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bs(this,"queueTimeout",0),bs(this,"cacheQueueNumber",0),bs(this,"queueStatus",xs.Ready),bs(this,"run",(function(e){co("debug")&&console.debug("run queue",t.queueStatus,e.dialog),t.queueStatus!==xs.Pending&&(t.queueStatus=xs.Pending,t.startQueue(e,!0),t.queueTimeout=window.setInterval((function(){t.startQueue(e)}),5e3))})),bs(this,"startQueue",function(){var e=gs(ps().mark((function e(n,r){var o,i,s,a,c,u,l,f,h,p,d;return ps().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(o=n.utils.services)||void 0===o||null===(o=o.apis)||void 0===o?void 0:o.getDialogQueue({businessLineId:(null===(i=n.userInfo)||void 0===i?void 0:i.businessLineId)&&String(null===(s=n.userInfo)||void 0===s?void 0:s.businessLineId),skillId:0,userId:"0",secretUserId:decodeURIComponent(null===(a=n.userInfo)||void 0===a?void 0:a.secretUserId),jarvisEventCode:null===(c=n.ext)||void 0===c||null===(c=c.dialogEventCode)||void 0===c?void 0:c[us.TransferEventCode]});case 3:if(u=e.sent,t.queueStatus!==xs.End){e.next=6;break}return e.abrupt("return");case 6:if(u){e.next=8;break}throw new Error(as.oc.t("no_queued_data_return",{},"无排队数据返回"));case 8:if(630004!==u.result&&630005!==u.result){e.next=10;break}throw new Error(u.description||as.oc.t("queuing_timeout",{},"排队超时"));case 10:if(l=u.data,f=(null==l?void 0:l.waitingNumber)||0,h=(null==l?void 0:l.showWaitingNumber)||!1,(!t.cacheQueueNumber||f<=t.cacheQueueNumber)&&(t.cacheQueueNumber=f,p=vs(vs({},n.ext),{},{waitingNumber:f,showWaitingNumber:h}),r&&(p.inWaiting=!0),n.ext=p),Number(l.toUserId)===ls.SYS){e.next=17;break}return t.cacheQueueNumber=0,e.abrupt("return");case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),401==+(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)&&t.stopQueue(),fs.next({type:cs.QUEUE_ERROR,error:e.t0});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}()),bs(this,"stopQueue",(function(){t.queueTimeout&&clearInterval(t.queueTimeout),t.queueStatus=xs.End,t.cacheQueueNumber=0})),bs(this,"clearQueue",function(){var e=gs(ps().mark((function e(n){var r,o,i,s;return ps().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopQueue(),n.ext.waitingNumber=0,n.ext.inWaiting=!1,n.ext=vs(vs({},n.ext),{},{waitingNumber:0,inWaiting:!1}),e.prev=4,e.next=7,null===(r=n.utils.services)||void 0===r||null===(r=r.apis)||void 0===r?void 0:r.cancelDialogQueue({businessLineId:String(null===(o=n.userInfo)||void 0===o?void 0:o.businessLineId),skillId:0,userId:"0",secretUserId:decodeURIComponent(null===(i=n.userInfo)||void 0===i?void 0:i.secretUserId)});case 7:return s=e.sent,e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(4),fs.next({type:cs.CLEAR_QUEUE_ERROR,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}())}));const Es=new Os;function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ss(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ss(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ss(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Is=new Yo("",(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(n),!0).forEach((function(t){Cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})),Ps=Is.logger,Ts=Is.monitor;function As(e){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},As(e)}function js(){js=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==As(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(As(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Rs(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){Ds(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ds(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==As(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==As(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===As(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ls=!1,Ns=!1,Fs=function(){var e,t=(e=js().mark((function e(t){var n,r,o,i,s,a,c,u,l,f,h,p,d,v;return js().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Number(null===(n=t.dialog)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.status),u=Number(null===(r=t.dialog)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.type),co("debug")&&console.debug("dialogChange",t.dialog),+(null===(o=t.dialog)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.dialogId)>=+(null===(i=t.dialogInfo)||void 0===i?void 0:i.id)&&(t.dialogInfo=Bs(Bs({},t.dialogInfo),{},{type:Number(null===(l=t.dialog)||void 0===l||null===(l=l.ext)||void 0===l?void 0:l.type),status:Number(null===(f=t.dialog)||void 0===f||null===(f=f.ext)||void 0===f?void 0:f.status),id:null===(h=t.dialog)||void 0===h||null===(h=h.ext)||void 0===h?void 0:h.dialogId})),u===Wr.My.AGENT&&c===Wr.Mc.PENDING?(Ls||(Ps.info("linkchat.transferAgentSuccess",{dialogExt:null===(p=t.dialog)||void 0===p?void 0:p.ext}),Ls=!0),Ns||(y=t.messages,g=void 0,g=null==y?void 0:y.map((function(e){return Bs({},e)})).reverse(),null!=(d=null==g?void 0:g.find((function(e){var t;return!e.isFromMe&&(null===(t=e.ext)||void 0===t?void 0:t.senderType)===Wr.i4.AGENT})))&&d.serverId&&(Ns=!0,Ps.info("linkchat.getFirstAgentMessage",{dialogExt:null===(v=t.dialog)||void 0===v?void 0:v.ext,message:Bs(Bs({},d),{},{_id:null==d?void 0:d.serverId})})))):(Ns=!1,Ls=!1),c!==Wr.Mc.ENDING&&(null===(s=t.ext)||void 0===s?void 0:s.userStatus)!==Wr.iy.Leave&&null!==(a=t.dialog)&&void 0!==a&&a.dialogId?null==ss||ss.run(t):null==ss||ss.stop(),c===Wr.Mc.QUEUEING?null==Es||Es.run(t):(null==Es||Es.stopQueue(),t.ext=Bs(Bs({},t.ext),{},{waitingNumber:0,inWaiting:!1}));case 7:case"end":return e.stop()}var y,g}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Rs(i,r,o,s,a,"next",e)}function a(e){Rs(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();const Us=Fs;var Gs=n(2914),Hs=["referencedMessageId","ext"];function Vs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Ks(){Ks=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==qs(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(qs(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function zs(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Ws(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){zs(i,r,o,s,a,"next",e)}function a(e){zs(i,r,o,s,a,"throw",e)}s(void 0)}))}}function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach((function(t){Zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==qs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qs(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xs=0,Js=!1,Qs=1000001,ea=function(e,t){var n,r,o,i,s,a,c,u,l,f,h,p,d,v=e.dialog,y=e.dialogInfo,g={};t||y?g=t||y:g=Ys(Ys({},v.ext),{},{conversationTitle:co("userName"),id:null===(c=v.ext)||void 0===c?void 0:c.dialogId,dialogId:null===(u=v.ext)||void 0===u?void 0:u.dialogId,businessLineId:null===(l=v.ext)||void 0===l?void 0:l.businessLineId,type:null===(f=v.ext)||void 0===f?void 0:f.type});return{senderName:(null===(n=g)||void 0===n?void 0:n.conversationTitle)||"",conversationTitle:(null===(r=g)||void 0===r?void 0:r.conversationTitle)||"",businessLineId:String(null===(o=g)||void 0===o?void 0:o.businessLineId),dialogId:String(null===(i=g)||void 0===i?void 0:i.id),participants:(h=v,(null===(p=h.firstPageParticipant)||void 0===p||null===(p=p.participants)||void 0===p||null===(d=p.map)||void 0===d?void 0:d.call(p,(function(e){return e.user_id})).filter(Boolean).join(","))||""),senderType:Wr.i4.USER,dialogScene:"1",dialogType:void 0===(null===(s=g)||void 0===s?void 0:s.type)?"":String(null===(a=g)||void 0===a?void 0:a.type)}};function ta(e,t){return na.apply(this,arguments)}function na(){return(na=Ws(Ks().mark((function e(t,n){var r,o,i,s,a;return Ks().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.referencedMessageId,o=t.ext,i=Vs(t,Hs),!r){e.next=8;break}return e.next=4,n({conversation:t.conversation,serverMessageId:r});case 4:if(!(s=e.sent)){e.next=8;break}return a=JSON.stringify({serverId:s.serverId,type:s.type,senderName:s.ext.senderName,senderType:s.ext.senderType,createdTime:s.createdAt.getTime(),content:s.content}),e.abrupt("return",Ys(Ys({},i),{},{referenceMessage:s,ext:Ys(Ys({},o),{},{referencedMessage:a})}));case 8:return e.abrupt("return",Ys(Ys({},i),{},{ext:o}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ra=function(){var e=Ws(Ks().mark((function e(t){var n,r,o,i,s;return Ks().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(+(null===(n=t.dialog)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.status)===Wr.Mc.ENDING&&!Js){e.next=2;break}return e.abrupt("return",!1);case 2:if(!(Xs>=3)){e.next=4;break}throw new Error(as.oc.t("the_session_has_ended__reconnection_failed__click_try_again",{},"会话已结束，重新连接失败，点击再次尝试"));case 4:return Js=!0,e.prev=5,Xs+=1,e.next=9,null===(r=t.utils)||void 0===r||null===(r=r.services)||void 0===r?void 0:r.createDialog();case 9:return o=e.sent,i=o.dialog,s=void 0===i?{}:i,Xs=0,Js=!1,e.abrupt("return",s);case 17:throw e.prev=17,e.t0=e.catch(5),Js=!1,Ps.error(Zo.CreateDialogError,{error:e.t0}),e.t0;case 22:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),oa=function(e){return function(){var t=Ws(Ks().mark((function t(n){var r,o,i,s,a,c,u,l,f,h,p,d,v,y,g,m,_,b,w,x,O;return Ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Ts.emitDuration(Xo.SendFileMessage),f=(null===(r=e.channel)||void 0===r?void 0:r.conversationInfo)||{},f.id&&e.channel){t.next=5;break}throw new TypeError(as.oc.t("non_existent_session_id",{},"不存在的会话ID"));case 5:if(h=n.type,p=n.content,d=n.ext,v=void 0===d?{originWidth:"",originHeight:""}:d,y=n.referencedMessageId,g=!1,n.noCreateDialogOnEndStatus){t.next=11;break}return t.next=10,ra(e);case 10:g=t.sent;case 11:return m=p,_=Ys(Ys({},ea(e,g)),v),b={conversation:null===(o=e.channel)||void 0===o?void 0:o.conversationInfo,type:h,fileInfo:m,referencedMessageId:y||(null==e||null===(i=e.replyMessage)||void 0===i?void 0:i.serverId),ext:_},t.next=16,ta(b,null===(s=e.channel)||void 0===s?void 0:s.instance.getMessageByServerId);case 16:return w=t.sent,t.next=19,null===(a=e.channel)||void 0===a?void 0:a.instance.createFileMessage(w);case 19:if(x=t.sent,t.t0=x,!t.t0){t.next=25;break}return t.next=24,null===(c=e.channel)||void 0===c||null===(c=c.instance)||void 0===c?void 0:c.sendMessage({message:x});case 24:t.t0=t.sent;case 25:return O=t.t0,null!=e&&null!==(u=e.replyMessage)&&void 0!==u&&u.serverId&&(e.replyMessage={}),l(),t.abrupt("return",O);case 31:throw t.prev=31,t.t1=t.catch(0),Ps.error(Qo.SendFileMessageError,{error:t.t1}),t.t1;case 35:case"end":return t.stop()}}),t,null,[[0,31]])})));return function(e){return t.apply(this,arguments)}}()},ia=function(e){return function(){var t=Ws(Ks().mark((function t(n){var r,o,i,s,a,c,u,l,f,h,p,d,v,y,g,m,_,b,w,x,O;return Ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.type,o=void 0===r?Gs.V$.MESSAGE_TYPE_TEXT:r,i=n.content,s=n.ext,a=void 0===s?{}:s,c=n.referencedMessageId,u=n.noCreateDialogOnEndStatus,t.prev=1,i){t.next=4;break}return t.abrupt("return");case 4:if(y=Ts.emitDuration(Xo.SendMessage),g=(null===(l=e.channel)||void 0===l?void 0:l.conversationInfo)||{},g.id&&e.channel){t.next=8;break}throw new TypeError(as.oc.t("non_existent_session_id",{},"不存在的会话ID"));case 8:if(m=!1,u){t.next=13;break}return t.next=12,ra(e);case 12:m=t.sent;case 13:return _=Ys(Ys({},ea(e,m)),a),b={conversation:e.channel.conversationInfo,type:o,content:i,ext:_,referencedMessageId:c||(null==e||null===(f=e.replyMessage)||void 0===f?void 0:f.serverId)},t.next=17,ta(b,null===(h=e.channel)||void 0===h?void 0:h.instance.getMessageByServerId);case 17:return w=t.sent,t.next=20,null===(p=e.channel)||void 0===p?void 0:p.instance.createMessage(w);case 20:if(x=t.sent,t.t0=x,!t.t0){t.next=26;break}return t.next=25,null===(d=e.channel)||void 0===d||null===(d=d.instance)||void 0===d?void 0:d.sendMessage({message:x});case 25:t.t0=t.sent;case 26:return O=t.t0,null!=e&&null!==(v=e.replyMessage)&&void 0!==v&&v.serverId&&(e.replyMessage={}),y(),t.abrupt("return",O);case 32:throw t.prev=32,t.t1=t.catch(1),Ps.error(Qo.SendMessageError,{error:t.t1}),t.t1;case 36:case"end":return t.stop()}}),t,null,[[1,32]])})));return function(e){return t.apply(this,arguments)}}()},sa=["dialogId"];function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function ca(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==aa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===aa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ha=function(e){return function(t){return e("/im-session/user/config",{method:"POST",data:{tags:["imCloudConfig","user"]}})}},pa=function(e){return function(t,n){return e("".concat(n||"","/api/im-session/im-c/user/token/client"),{method:"POST",data:t})}},da=function(e){return function(t){return e("/im-robot/robot/dialog/v2",{method:"POST",data:t})}},va=function(e){return function(t){return e("/im-robot/robot/faq/action",{method:"POST",data:t})}},ya=function(e){return function(t){return e("/im-robot/robot/guide-card",{method:"POST",data:t})}},ga=function(e){return function(t){return e("/im-session/dialog/transfer",{method:"POST",data:t})}},ma=function(e){return function(t){return e("/im-robot/robot/dialog/transfer",{method:"POST",data:t})}},_a=function(e){return function(t){return e("/im-session/dialog/queue",{method:"POST",data:t,notCheckService:!0})}},ba=function(e){return function(t){return e("/im-session/dialog/queue",{method:"PUT",data:t})}},wa=function(e){return function(t){return e("/im-session/user/clientHeartbeat",{method:"PUT",data:t,isTrain:!0,notCheckService:!0})}},xa=function(e){return function(t){return e("/im-session/dialog",{method:"DELETE",data:la(la({},t),{},{endType:4})})}},Oa=function(e){return function(t){return e("/im-session/message/imc-message",{method:"POST",data:{dialogId:t.dialogId,dialogScene:1,message:{content:t.content,extMap:la({},t.ext),msgType:t.type||Gs.V$.MESSAGE_TYPE_TEXT,sender:Qs}}})}},Ea=function(e){return function(t){return e("/im-session/message/modify",{method:"POST",data:t})}},Sa=function(e){return function(t){return e("/im-message/message/getMessageById/".concat(t.messageId),{})}},ka=function(e){return function(t){var n=t.dialogId,r=ca(t,sa);return e("/im-session/message/jarvisEvent",{method:"POST",data:{dialogId:n,dialogScene:1,jarvisEventInfo:r,sender:Qs}})}},Ca=function(e){return function(t){return e("/im-session/message/jarvisEvent",{method:"POST",data:t})}},Ia=function(e){return function(t){return e("/im-business/configure/business-config/".concat(t),{method:"GET"})}},Pa=function(e){return function(t){return e("/im-session/dou-order/paid-order-list",{method:"POST",data:t})}},Ta=function(e){return function(t){return e("/im-robot/robot/faq/transfer",{method:"POST",data:t})}},Aa=function(e){return function(t){var n=t.dialogId,r=t.eventCode;return e("/api/im-session/jarvis/getJarvisComponentList?dialogId=".concat(n,"&eventCode=").concat(r),{method:"GET"})}},ja=function(e){return function(t){return e("/im-robot/dmc-config/fast-button-config",{method:"GET",params:{uniqueId:t}})}},Ra=function(e){return function(t){return e("/im-session/dialog/unread",{method:"GET",params:{dialogId:t}})}},Ma=function(e){return function(t,n){return e("/im-session/satisfaction/canDisplayRobotButton",{method:"GET",params:{dialogId:t,robotSatisfactionConfigId:n}})}};const Ba=function(e){var t=Object.keys(r),n={};return t.forEach((function(t){n[t]=r[t](e)})),n};var Da,La,Na,Fa=n(7533);function Ua(e){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ua(e)}function Ga(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ua(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ua(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ha,Va=function(e){return e.PROD="PROD",e.PPE="ppe",e.BOE="boe",e.LOCAL="local",e.TEST="TEST",e.Tob="tob",e}({}),qa=(Ga(Da={},Fa.y.cn,{PROD:{appId:1402,fpId:89,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",apiUrl:"https://imapi-oth.zijieapi.com/",frontierUrl:"wss://im-ws.zijieapi.com/ws/v2",service:2,uploadRegion:"cn-north-1",videoDomain:"https://vod.bytedanceapi.com",imageDomain:"https://imagex.bytedanceapi.com"},PPE:{appId:1402,fpId:89,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",apiUrl:"https://imapi-oth.zijieapi.com/",frontierUrl:"wss://im-ws.zijieapi.com/ws/v2",service:2,uploadRegion:"cn-north-1",videoDomain:"https://vod.bytedanceapi.com",imageDomain:"https://imagex.bytedanceapi.com"}}),Ga(Da,Fa.y.sg,{PROD:{appId:4946,fpId:89,method:1,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",apiUrl:"https://imapi2.isnssdk.com",frontierUrl:"wss://frontier.byteoversea.com/ws/v2",service:2,uploadRegion:"ap-singapore-1",videoDomain:"https://vod-ap-singapore-1.bytevcloudapi.com",imageDomain:"https://imagex-ap-singapore-1.bytevcloudapi.com"},PPE:{appId:4946,fpId:89,method:1,appKey:"e0f82475ab9dbf5717d18b4a9c0d7fd0",apiUrl:"https://imapi2.snssdk.com/",frontierUrl:"wss://frontier.snssdk.com/ws/v2",service:2,uploadRegion:"ap-singapore-1",videoDomain:"https://vod-ap-singapore-1.bytevcloudapi.com",imageDomain:"https://imagex-ap-singapore-1.bytevcloudapi.com"}}),Da),Ka=(Ga(La={},Va.BOE,"https://vas-boei18n.bytedance.net"),Ga(La,Va.PROD,"https://vas-alisg16.byteoversea.com"),La),za=(Ga(Na={},Va.BOE,"https://log.snssdk.com"),Ga(Na,Va.PROD,"https://log.isnssdk.com"),Na);function Wa(e){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wa(e)}function $a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Wa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ya=($a(Ha={},Fa.y.cn,{BOE:"https://ngcc-boe.bytedance.com",PROD:"https://ngcc.bytedance.com",TEST:"https://ngcc-test.bytedance.com",PPE:"https://ngcc.bytedance.com"}),$a(Ha,Fa.y.sg,{BOE:"https://ngcc-cloud-oversea-boe.bytedance.net",PROD:"https://ngcc.byteoversea.com",TEST:"https://ngcc-cloud-oversea-boe.bytedance.net",PPE:"https://ngcc.byteoversea.com"}),Ha),Za=function(e){return""===e||null==e||Array.isArray(e)&&!e.length},Xa=function(e,t){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];Object.keys(e).forEach((function(t){var r=e[t];Za(r)||n.push("".concat(t,"=").concat(r))})),n.length&&(t?"?".concat(n.join("&")):n.join("&"))}(t);return"".concat(function(e){var t=e.indexOf("api")>0?"":"/api",n=co("apiOrigin"),r=co("region"),o=co("env")||"BOE";return void 0!==n?"".concat(n).concat(t):"PROD"===o.toUpperCase()?"".concat(Ya[r].PROD).concat(t):"PPE"===o.toUpperCase()?"".concat(Ya[r].PPE).concat(t):"BOE"===o.toUpperCase()?"".concat(Ya[r].BOE).concat(t):void 0}(e)).concat(e)};function Ja(e){return Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ja(e)}var Qa=["headers"],ec=["headers"];function tc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(n),!0).forEach((function(t){rc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ja(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ja(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oc(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ic={401:as.oc.t("sdk_authentication_failed",{},"登录失效"),403:as.oc.t("the_resource_you_requested_is_denied_access",{},"您所请求的资源被禁止访问"),404:as.oc.t("the_resource_you_requested_does_not_exist",{},"您所请求的资源并不存在"),405:as.oc.t("illegal_requests_will_be_banned",{},"非法请求会被禁止"),413:as.oc.t("the_amount_of_data_you_are_requesting_is_too_large",{},"您所请求的数据量太大"),504:as.oc.t("sorry__the_gateway_timed_out",{},"很抱歉，网关超时了")};function sc(e){var t=e.status;if(t>=400&&t<600){var n=t<500?ic[t]||"".concat(as.oc.t("sorry__there_is_a_problem_with_the_program_({status})",{status:t},"很抱歉，程序出了一点问题（{status}）")):ic[t]||"".concat(as.oc.t("server_deserted_({status})",{status:t},"服务器开小差了（{status}）")),r=new Error(n);return r.response=e,fs.next({type:cs.NET_ERROR,error:r}),Promise.reject(r)}return e}function ac(e){if(null==e||!e.config)return e;var t=e||{},n=t.data,r=void 0===n?{}:n,o=t.config,i=r.result,s=r.description,a=r.code;if(0===i||0===a||null!=o&&o.notCheckService)return r;var c=new Error(s);return c.data=r,c.response=r,Promise.reject(c)}const cc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.interceptors,c=t.baseOptions,u=void 0===c?{}:c,l=null!==(r=null==a?void 0:a.request)&&void 0!==r?r:function(e){return e},f=null!==(o=null==a?void 0:a.response)&&void 0!==o?o:function(e){return e},h=u.headers,p=void 0===h?{}:h,d=oc(u,Qa),v=i.headers,y=void 0===v?{}:v,g=oc(i,ec),m=nc(nc(nc({},d),g),{},{headers:nc(nc({"Content-Type":"application/json",lang:co("lang")},p),y)}),_=co("env");_===Va.BOE&&co("envTag")&&(m.headers["x-tt-env"]=co("envTag")),_===Va.PPE&&co("envTag")&&(m.headers["x-use-ppe"]=1,m.headers["x-tt-env"]=co("envTag")),(m.body||m.data)&&(m.body=JSON.stringify(function(e){if(!e||!to(e))return e;var t={};return Object.keys(e).forEach((function(n){var r=e[n];Za(r)||(t[n]=r)})),t}(m.body||m.data)));var b=m.origin||n.indexOf("/jarvis/")>-1?n:Xa(n,m.params);return s?Promise.resolve(l(m)).then((function(t){return e(b,t)})):Promise.resolve(l(m)).then((function(t){return e(b,t).then(sc).then(ac).then(f).catch((function(e){throw e.response&&e.response.description,e&&e.message&&e.message.indexOf("401")>-1&&(null==t||!t.isTrain)&&fs.next({type:cs.NET_ERROR_401,error:e}),e}))}))}};function uc(e){return uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(e)}function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){yc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hc(){hc=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==uc(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(uc(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function pc(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function dc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){pc(i,r,o,s,a,"next",e)}function a(e){pc(i,r,o,s,a,"throw",e)}s(void 0)}))}}function vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gc(r.key),r)}}function yc(e,t,n){return(t=gc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gc(e){var t=function(e,t){if("object"!==uc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===uc(t)?t:String(t)}var mc=function(){function e(t){var n=this,r=t.createDialogExt,o=t.appContext,i=t.request,s=i.instance,a=i.baseOptions,c=void 0===a?{}:a,u=i.interceptors,l=void 0===u?{}:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yc(this,"request",void 0),yc(this,"apis",void 0),yc(this,"createDialogExt",void 0),yc(this,"appContext",void 0),yc(this,"_cache",{createDialogParams:{}}),yc(this,"createDialog",(function(e){var t,r,o,i,s,a,c;Po.info(Jo.CreateDialog,e),e&&(n._cache.createDialogParams=e);var u=n.store.channel,l=(null===(t=n.appContext)||void 0===t?void 0:t.query)||{},f=l.conversationTitle,h=l.openId,p=l.referenceUserType,d=l.uid,v=l.uname,y=l.useDmc,g=l.featureKey,m=(null===(r=n.appContext)||void 0===r?void 0:r.userInfo)||{},_=m.userId,b=m.businessLineId;return n.apis.createDialog({openId:h,businessLineName:null===(o=n.appContext)||void 0===o?void 0:o.userInfo.businessLineName,secretFromUserId:decodeURIComponent(null===(i=n.appContext)||void 0===i?void 0:i.userInfo.secretUserId),referenceUserId:(null===(s=n.appContext)||void 0===s||null===(s=s.userInfo)||void 0===s?void 0:s.referenceUserId)&&decodeURIComponent(null===(a=n.appContext)||void 0===a||null===(a=a.userInfo)||void 0===a?void 0:a.referenceUserId),businessLineId:b,channel:void 0===u?1:u,entryId:n.store.entryId,channelId:n.store.entryId,mobile:n.store.mobile,fromUserId:d||_||"0",fromUserName:v||n.store.userName,referenceUserType:p,referenceExtraMap:JSON.stringify(null===(c=n._cache.createDialogParams)||void 0===c?void 0:c.ext),conversationTitle:f||n.store.userName,useDmc:y,externalMessageSummary:null==e?void 0:e.externalMessage,skillId:null==e?void 0:e.skillId,lang:n.store.lang,timeZone:n.store.timeZone,featureKey:g}).then(function(){var e=dc(hc().mark((function e(t){var r,o,i,s,a;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(null==t?void 0:t.data)||{},o=r.resultType,i=r.dialogVo,s=r.offlineFormVo,i&&(n.appContext.dialogInfo=i),a={dialog:i,type:o,offlineForm:s},o!==Gs.Nq.OFFLINE_FORM){e.next=6;break}return e.next=6,n.appContext.utils.jumpToOfflineForm(n.appContext,{useDmc:null==i?void 0:i.useDmc,jarvisId:s.jarvisComponentId});case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),yc(this,"transferAgent",(function(e){var t,r,o,i;return Po.info(Jo.TransferAgent,{params:e}),null!==(t=n.appContext.dialog)&&void 0!==t&&null!==(t=t.ext)&&void 0!==t&&t.dialogId&&Number(null===(r=n.appContext.dialog)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.status)!==Wr.Mc.ENDING?n.apis.transferPeopleApi(fc({id:null===(o=n.appContext.dialog)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.dialogId,transferType:(null==e?void 0:e.type)||Wr.tP.ROBOT_TO_AGENT,secretFromUserId:decodeURIComponent(null===(i=n.appContext)||void 0===i||null===(i=i.userInfo)||void 0===i?void 0:i.secretUserId),skillId:null==e?void 0:e.skillId},e)).then((function(e){var t,r;return n.appContext.dialogInfo=fc(fc({},null===(t=n.appContext)||void 0===t?void 0:t.dialogInfo),e.data),e&&1===(null===(r=e.data)||void 0===r?void 0:r.transferJumpType)?fc({type:Wr.My.OFFLINE},e):e})):n.createDialog(fc(fc({},e),{},{ext:n.createDialogExt}))})),yc(this,"transferAgentWithDmc",(function(e){var t,r,o,i;return Po.info(Jo.TransferAgent,{params:e}),null!==(t=n.appContext.dialog)&&void 0!==t&&null!==(t=t.ext)&&void 0!==t&&t.dialogId&&Number(null===(r=n.appContext.dialog)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.status)!==Wr.Mc.ENDING?n.apis.transferPeopleDmcApi(fc({id:null===(o=n.appContext.dialog)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.dialogId,transferType:Wr.tP.ROBOT_TO_AGENT,secretFromUserId:decodeURIComponent(null===(i=n.appContext)||void 0===i||null===(i=i.userInfo)||void 0===i?void 0:i.secretUserId)},e)).then((function(e){var t,r;return n.appContext.dialogInfo=fc(fc({},null===(t=n.appContext)||void 0===t?void 0:t.dialogInfo),null===(r=e.data)||void 0===r?void 0:r.transferDialogInfo),e})):n.createDialog({ext:n.createDialogExt})})),yc(this,"transferAgentWithNoRobot",(function(e){return Po.info(Jo.TransferAgent,{params:e}),n.createDialog(fc(fc({},e),{},{ext:n.createDialogExt}))})),yc(this,"transferAgentSimply",(function(e){var t,r;return Po.info(Jo.TransferAgent,{params:e}),n.apis.transferPeopleApi(fc({id:null===(t=n.appContext.dialog)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.dialogId,transferType:(null==e?void 0:e.type)||Wr.tP.ROBOT_TO_AGENT,secretFromUserId:decodeURIComponent(null===(r=n.appContext)||void 0===r||null===(r=r.userInfo)||void 0===r?void 0:r.secretUserId),skillId:null==e?void 0:e.skillId},e)).then((function(e){var t,r;return n.appContext.dialogInfo=fc(fc({},null===(t=n.appContext)||void 0===t?void 0:t.dialogInfo),e.data),e&&1===(null===(r=e.data)||void 0===r?void 0:r.transferJumpType)?fc({type:Wr.My.OFFLINE},e):e}))})),yc(this,"cancelQueue",(function(){return Es.clearQueue(n.appContext)})),yc(this,"keepGuide",function(){var e=dc(hc().mark((function e(t){var r,o;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.apis.keepGuide(fc({businessLineId:String(n.appContext.userInfo.businessLineId),dialogId:null===(r=n.appContext.dialogInfo)||void 0===r?void 0:r.id},t)),e.abrupt("return",o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yc(this,"closeAgentDialog",dc(hc().mark((function e(){var t,r,o;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Number(null===(t=n.appContext.dialog.ext)||void 0===t?void 0:t.type)!==Wr.My.AGENT){e.next=2;break}return e.abrupt("return",n.apis.deleteDialog({dialogId:Number(null===(r=n.appContext.dialogInfo)||void 0===r?void 0:r.id),jarvisEventCode:null===(o=n.appContext.ext)||void 0===o?void 0:o[us.EndDialogEventCode]}));case 2:throw new Error(as.oc.t("the_current_session_is_not_in_progress",{},"当前会话不在进行中"));case 3:case"end":return e.stop()}}),e)})))),yc(this,"closeDialog",(function(e){var t,r;return n.apis.deleteDialog(fc({dialogId:Number(null===(t=n.appContext.dialogInfo)||void 0===t?void 0:t.id),jarvisEventCode:null===(r=n.appContext.ext)||void 0===r?void 0:r[us.EndDialogEventCode]},e))})),yc(this,"sendRobotMessage",function(){var e=dc(hc().mark((function e(t){var r;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apis.sendRobotMessage(fc({dialogId:null===(r=n.appContext.dialogInfo)||void 0===r?void 0:r.id},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yc(this,"sendJarvisCard",function(){var e=dc(hc().mark((function e(t){var r;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apis.sendJarvisCard(fc({dialogId:null===(r=n.appContext.dialogInfo)||void 0===r?void 0:r.id},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yc(this,"modifyMessage",function(){var e=dc(hc().mark((function e(t){var r;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.serverId&&n.apis.modifyMessage(fc({dialogId:null===(r=n.appContext.dialogInfo)||void 0===r?void 0:r.id},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.request=cc(s,{interceptors:fc({},l),baseOptions:c}),this.apis=Ba(this.request),this.createDialogExt=r||{},this.appContext=o}var t,n,r;return t=e,(n=[{key:"store",get:function(){return uo()}}])&&vc(t.prototype,n),r&&vc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const _c=mc;var bc,wc=n(9507),xc=n.n(wc),Oc=new Uint8Array(16);function Ec(){if(!bc&&!(bc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bc(Oc)}const Sc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const kc=function(e){return"string"==typeof e&&Sc.test(e)};for(var Cc=[],Ic=0;Ic<256;++Ic)Cc.push((Ic+256).toString(16).substr(1));const Pc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Cc[e[t+0]]+Cc[e[t+1]]+Cc[e[t+2]]+Cc[e[t+3]]+"-"+Cc[e[t+4]]+Cc[e[t+5]]+"-"+Cc[e[t+6]]+Cc[e[t+7]]+"-"+Cc[e[t+8]]+Cc[e[t+9]]+"-"+Cc[e[t+10]]+Cc[e[t+11]]+Cc[e[t+12]]+Cc[e[t+13]]+Cc[e[t+14]]+Cc[e[t+15]]).toLowerCase();if(!kc(n))throw TypeError("Stringified UUID is invalid");return n};const Tc=function(e,t,n){var r=(e=e||{}).random||(e.rng||Ec)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Pc(r)};function Ac(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rc=function(e){return""===e||null==e||Array.isArray(e)&&!e.length};function Mc(e){return Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(e)}function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){$c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yc(r.key),r)}}function Nc(e,t,n){return t&&Lc(e.prototype,t),n&&Lc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zc(e,t)}function Gc(e){var t=Kc();return function(){var n,r=Wc(e);if(t){var o=Wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hc(e)}(this,n)}}function Hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vc(e){var t="function"==typeof Map?new Map:void 0;return Vc=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return qc(e,arguments,Wc(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),zc(n,e)},Vc(e)}function qc(e,t,n){return qc=Kc()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&zc(o,n.prototype),o},qc.apply(null,arguments)}function Kc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zc(e,t){return zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zc(e,t)}function Wc(e){return Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wc(e)}function $c(e,t,n){return(t=Yc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yc(e){var t=function(e,t){if("object"!==Mc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mc(t)?t:String(t)}var Zc=function(e){Uc(n,e);var t=Gc(n);function n(e){var r;Fc(this,n);var o=e.description,i=e.path,s=e.logId,a=e.response;return $c(Hc(r=t.call(this,o)),"originInfo",void 0),$c(Hc(r),"response",void 0),Po.warn("[Code非0][状态码]:".concat(a.status,",[路径]:").concat(i,",[logId]:").concat(s,",des:").concat(o)),r.originInfo=Dc({},e),r.response=a,r}return Nc(n)}(Vc(Error)),Xc=function(e){Uc(n,e);var t=Gc(n);function n(e){var r;Fc(this,n);var o=e.status,i=e.path,s=e.logId,a=e.response,c=e.description;return $c(Hc(r=t.call(this,c||ic[o])),"originInfo",void 0),$c(Hc(r),"response",void 0),$c(Hc(r),"status",void 0),Po.error("[HTTP错误][状态码]:".concat(a.status).concat(c,",[路径]:").concat(i,",[logId]:").concat(s)),r.originInfo=Dc({},e),r.response=a,r.status=o,r}return Nc(n)}(Vc(Error)),Jc=["businessUserId","getSign","contactType","businessLineId","channelGroupId","isTob","isDev","curEnv","region","apiOrigin","baseURL","lang","onError"];function Qc(e){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(e)}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function nu(){nu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Qc(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Qc(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ru(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function ou(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){ru(i,r,o,s,a,"next",e)}function a(e){ru(i,r,o,s,a,"throw",e)}s(void 0)}))}}function iu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Qc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var su=function(e){return e[e.VISITOR=0]="VISITOR",e[e.PHONENUMBER=1]="PHONENUMBER",e[e.EMAIL=2]="EMAIL",e[e.AID_UID=3]="AID_UID",e[e.WECHAT=4]="WECHAT",e}({}),au=function(e){return e[e.SIGN_EXPIRED=5362]="SIGN_EXPIRED",e[e.TOKEN_ERROR=100012]="TOKEN_ERROR",e[e.REQUEST_ERROR=10001]="REQUEST_ERROR",e[e.DUP_REQ_ERROR=10098]="DUP_REQ_ERROR",e[e.TIME_STMP_ERROR=10099]="TIME_STMP_ERROR",e}({}),cu=[au.TOKEN_ERROR,au.REQUEST_ERROR,au.DUP_REQ_ERROR,au.SIGN_EXPIRED,au.TIME_STMP_ERROR],uu=iu({},au.TIME_STMP_ERROR,as.oc.t("please_check_the_current_device_time__the_current_device_time_is_more_than_15_mi",{},"请检查当前设备时间，当前设备时间与本地时间相差超过15分钟。")),lu=function(e){var t={};Object.keys(e).sort().forEach((function(n){Rc(e[n])||(t[n]=e[n])}));var n=Re().stringify(t,{arrayFormat:"comma",encode:!1});return xc()(n).toString().toUpperCase()},fu=function(e){var t,n=e.getSign,r=e.businessUserId,o=e.contactType;return t="function"==typeof n?n:function(){return K().get(n,{withCredentials:!0,headers:{"x-customer-contact-type":o,"x-customer-business-user-id":r}}).then((function(e){var t=e.data,n=t.result,r=t.data,o=t.description;return 0===n&&r?r:Promise.reject({response:e,message:"getSign error,".concat(o)})}))},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=new Map;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var a,c,u,l=Ac(r.keys());try{for(l.s();!(u=l.n()).done;){var f=u.value;if((0,$r.isEqual)(i,f)){a=r.get(f),c=f;break}}}catch(e){l.e(e)}finally{l.f()}if(a&&c){var h=Date.now();t&&h-a.timestamp>t&&(a=void 0,r.delete(c))}if(!a){if((a={value:e.apply(void 0,i),timestamp:Date.now()}).value instanceof Promise&&a.value.catch((function(){r.delete(i)})),r.size>=n){var p,d,v,y=Ac(r.keys());try{for(y.s();!(v=y.n()).done;){var g=v.value,m=r.get(g).timestamp;(!d||m<d)&&(d=m,p=g)}}catch(e){y.e(e)}finally{y.f()}p&&r.delete(p)}r.set(i,a)}return a.value}}(t,5e3)},hu=function(){var e=ou(nu().mark((function e(t){var n,r=arguments;return nu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,t();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),Po.error("".concat("[OCIC-User-Auth]","：recursionGetSign err"),e.t0),3!==n){e.next=12;break}throw e.t0;case 12:return e.abrupt("return",hu(t,n+1));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),pu=/\/im-[a-z0-9]+\//;const du=function(e){var t=e.businessUserId,n=e.getSign,r=e.contactType,o=e.businessLineId,i=e.channelGroupId,s=(e.isTob,e.isDev,e.curEnv),a=(void 0===s&&Va.PROD,e.region),c=(void 0===a&&Fa.y.cn,e.apiOrigin,e.baseURL),u=e.lang,l=e.onError,f=tu(e,Jc),h=1;if(Rc(t)||Rc(o)||Rc(r)||Rc(n))throw new Error(as.oc.t("businessuserid_businesslineid__contacttype__getsign_cannot_be_empty!",{},"businessUserId、businessLineId、contactType、getSign都不能为空！"));var p=fu({getSign:n,businessUserId:t,contactType:r}),d=new Map,v=K().create(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({timeout:1e4,baseURL:c,withCredentials:!0},f));return v.interceptors.request.use(function(){var e=ou(nu().mark((function e(n){var s,a,c,l,f,h,v,y,g,m;return nu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.url&&-1===n.url.indexOf("/im-c")&&(c=null===(s=n.url)||void 0===s?void 0:s.match(pu),n.url=null===(a=n.url)||void 0===a?void 0:a.replace(pu,(null==c?void 0:c[0])+"im-c/")),d.has("sign")){e.next=6;break}return e.next=4,hu(p);case 4:l=e.sent,d.set("sign",l);case 6:return f=(new Date).getTime(),h=Tc(),v=lu({timestamp:f,contactType:r,businessLineId:o,businessUserId:t,nonce:h,sign:d.get("sign")}),y=n.headers,(g=void 0===y?{}:y)["x-customer-token"]=v,g["x-customer-nonce"]=h,g["x-customer-timestamp"]=f,g["x-customer-contact-type"]=r,g["x-customer-business-user-id"]=t,g["x-customer-business-line-id"]=o,g["im-client-mark"]="im_client",Rc(i)||(g["x-customer-channel-group-id"]=i),(m="undefined"!=typeof window&&(u||localStorage.getItem("lang")))&&(g.lang=m),Po.info("request_start",{path:n.url,sign:d.get("sign")}),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v.interceptors.response.use((function(e){var t,n=e.data,r=n.result,o=n.description,i=n.code;if(r===au.SIGN_EXPIRED&&h<4)return h++,d.delete("sign"),v(e.config);if(h=1,e.config.pure)return e.data;if(0===r||0===i||null!==(t=e.config)&&void 0!==t&&t.notCheckService)return e.data;if(cu.includes(r)){var s,a,c=new Xc({description:uu[r]||o,status:401,path:null==e||null===(s=e.config)||void 0===s?void 0:s.url,logId:null==e||null===(a=e.headers)||void 0===a?void 0:a["x-tt-logid"],response:e});throw l&&l(c),c}throw new Zc({description:o,path:e.config.url,logId:e.headers["x-tt-logid"],response:e.data||{}})}),(function(e){var t,n,r,o,i,s=(null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||e.message||(null===(n=e.response)||void 0===n?void 0:n.statusText),a=new Xc({description:s,status:null===(r=e.response)||void 0===r?void 0:r.status,path:null===(o=e.response)||void 0===o||null===(o=o.config)||void 0===o?void 0:o.url,logId:null===(i=e.response)||void 0===i||null===(i=i.headers)||void 0===i?void 0:i["x-tt-logid"],response:e.response});throw l&&l(a),e})),v};function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function yu(){yu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==vu(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(vu(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function gu(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function mu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){gu(i,r,o,s,a,"next",e)}function a(e){gu(i,r,o,s,a,"throw",e)}s(void 0)}))}}function _u(e,t){return bu.apply(this,arguments)}function bu(){return(bu=mu(yu().mark((function e(t,n){return yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.message._id=t.message.clientId||t.message.serverId,e.next=3,n();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(e,t){return xu.apply(this,arguments)}function xu(){return(xu=mu(yu().mark((function e(t,n){var r;return yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(r=t.message)&&void 0!==r&&r.user||(t.message.user={}),e.next=3,n();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ou=["env","debug","region","lang","timeZone","envTag","apiOrigin","chatProps","imCloudConfig","getSign","getUserInfo","onNetError","metrics","useNewAuth","linkchatInfo"],Eu=["conversationId","id","conversationShortId","conversationTitle","createdTime","type","status"];function Su(e){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(e)}function ku(){ku=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Su(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Su(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Cu(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Iu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Cu(i,r,o,s,a,"next",e)}function a(e){Cu(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach((function(t){Ru(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Au(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mu(r.key),r)}}function Ru(e,t,n){return(t=Mu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mu(e){var t=function(e,t){if("object"!==Su(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Su(t)?t:String(t)}var Bu=!1,Du=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ru(this,"messageListChange",new Ji),Ru(this,"dialogChange",new Ji),Ru(this,"appContextChange",new Ji),Ru(this,"_appContext",void 0),Ru(this,"_instance",void 0),Ru(this,"appConfig",void 0),Ru(this,"imCloudConfig",void 0),Ru(this,"getSign",void 0),Ru(this,"getUserInfo",void 0),Ru(this,"onNetError",void 0),Ru(this,"envConfig",void 0),Ru(this,"metrics",void 0),Ru(this,"service",void 0),Ru(this,"inNewAuthRole",void 0);var s,a=t||{},c=a.env,u=void 0===c?Va.BOE:c,l=a.debug,f=void 0!==l&&l,h=a.region,p=void 0===h?Fa.y.cn:h,d=a.lang,v=void 0===d?Fa.U.zh:d,y=a.timeZone,g=a.envTag,m=a.apiOrigin,_=a.chatProps,b=a.imCloudConfig,w=a.getSign,x=a.getUserInfo,O=a.onNetError,E=a.metrics,S=a.useNewAuth,k=a.linkchatInfo,C=void 0===k?{initWithCreateDialog:!0,initDialogInfo:{}}:k,I=Au(a,Ou);f&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr.none;Io.level=e}(Yr.info),Ps.info(Zo.Init,t),(s=E)&&(mo.slardar=s),this.getSign=w,this.getUserInfo=x,this.onNetError=O,this.inNewAuthRole=S,this.imCloudConfig=b,this.metrics=E,this.envConfig=Tu({lang:v,region:p,env:u,debug:f,envTag:g,apiOrigin:m,timeZone:y},I),this.appConfig=C,this._appContext=new o.Il(null===(n=this.appConfig)||void 0===n?void 0:n.query),this._appContext.ext.dialogEventCode=this.appConfig.eventCode||{},this._appContext.dialog=null===(r=this.appConfig)||void 0===r?void 0:r.initDialogInfo,this._appContext.dialogInfo=null===(i=this.appConfig)||void 0===i?void 0:i.initDialogInfo,lo(Tu(Tu({},C),this.envConfig)),this.runLinkchat(_)}var t,n,r,i;return t=e,n=[{key:"appContext",get:function(){return this._appContext}},{key:"core",get:function(){return this._instance}},{key:"propsConfig",get:function(){return{envConfig:this.envConfig,linkchatInfo:this.appConfig,imCloudConfig:this.imCloudConfig}}},{key:"byteImService",get:function(){var e,t,n=this.envConfig.region,r=void 0===n?Fa.y.cn:n;return(null===(e=this.appContext)||void 0===e||null===(e=e.ext)||void 0===e?void 0:e.imCloudConfig)||this.imCloudConfig||(null===(t=qa[r])||void 0===t?void 0:t.PROD)}},{key:"channelInstance",get:function(){return this._appContext.channel}},{key:"apis",get:function(){return Tu(Tu({},this.service),{},{sendMessage:ia(this.appContext),sendFile:oa(this.appContext)})}},{key:"fetchLib",get:function(){var e;return null===(e=this.service)||void 0===e?void 0:e.request}},{key:"chatConfig",get:function(){var e,t,n,r=this;return{lang:this.envConfig.lang,lifecycle:(e={},Ru(e,o.Fw.CHANNEL_DID_MOUNT,(function(e){e.utils.sendMessage=ia(e),e.utils.sendFile=oa(e)})),Ru(e,o.Fw.MESSAGES_CHANGE,(function(e,t){r.messageListChange.next(t)})),Ru(e,o.Fw.DIALOG_CHANGE,(function(e,t){var n,o,i;Us(e),r.dialogChange.next(Tu(Tu({},t),{},{type:null==t||null===(n=t.ext)||void 0===n?void 0:n.type,status:null==t||null===(o=t.ext)||void 0===o?void 0:o.status,id:(null==t?void 0:t.dialogId)||(null==t||null===(i=t.ext)||void 0===i?void 0:i.dialogId)}))})),Ru(e,o.Fw.APP_CONTEXT_CHANGE,(function(e){return r.appContextChange.next(e)})),e),createDialog:(n=Iu(ku().mark((function e(t){var n,o,i,s,a,c,u,l,f,h,p,d,v,y;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userInfo,t.ext=Tu(Tu(Tu(Tu({},t.ext),n),r.appConfig),{},{authed:n,userName:r.appConfig.userName,userId:n.imUserId}),t.watchOfflineForm=r.appConfig.initOfflineForm,e.prev=3,!r.appConfig.initWithCreateDialog||null!==(o=t.dialog)&&void 0!==o&&o.dialogId&&0!=(null===(i=t.dialog)||void 0===i?void 0:i.dialogId)){e.next=20;break}return Ps.info(Zo.CreateDialogLow,Tu(Tu({},t.dialog),{},{initWithCreateDialog:r.appConfig.initWithCreateDialog})),e.next=8,null===(s=t.utils.services)||void 0===s?void 0:s.createDialog({ext:r.appConfig.ext});case 8:if(a=e.sent,c=a.type,u=a.dialog,l=a.offlineForm,c!==Gs.Nq.OFFLINE_FORM){e.next=16;break}return e.next=15,null===(f=r.appContext.utils)||void 0===f?void 0:f.jumpToOfflineForm(r.appContext,{useDmc:!0,useOfflineForm:!0,jarvisId:(null==l?void 0:l.jarvisComponentId)||""});case 15:return e.abrupt("return",!0);case 16:return u&&(h=u.conversationId,p=u.id,u.conversationShortId,u.conversationTitle,u.createdTime,d=u.type,v=u.status,y=Au(u,Eu),t.dialog.id=h,t.dialog.ext=Tu({dialogId:String(p),type:Number(d),status:Number(v)},y)),e.abrupt("return",!!r.appConfig.breakInitChannel);case 20:return Ps.info(Zo.CreateDialogAsync,Tu(Tu({},t.dialog),{},{initWithCreateDialog:r.appConfig.initWithCreateDialog,initOfflineForm:r.appConfig.initOfflineForm})),e.abrupt("return",!!r.appConfig.breakInitChannel);case 22:e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(3),Ps.error(Zo.CreateDialogError,Tu(Tu({},t.dialog),{},{initWithCreateDialog:r.appConfig.initWithCreateDialog,error:e.t0})),fs.next({type:cs.CREATE_DIALOG_ERROR,error:e.t0}),r.envConfig.debug){e.next=30;break}throw e.t0;case 30:case"end":return e.stop()}}),e,null,[[3,24]])}))),function(e){return n.apply(this,arguments)}),makeChannel:(t=Iu(ku().mark((function e(t){var n,o,i,a,c,u,l,f,h,p,d,v,y,g,m,_,b;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uo(),o=n.filterAgentMessage,i=r.envConfig.env,a=t.userInfo,c=a.businessLineId,u=a.token,l=a.imUserId,f=a.userId,h=l||f,Ps.info("useWsConfig",Tu({},r.byteImService)),p=Tu(Tu({pullInterval:3e4,timeout:1e4,throttle:1e3,storage:!1,retention:3,encryption:!0,compression:!0},r.byteImService),{},{userId:h,authType:s.m.AuthType.TOKEN_AUTH,token:u,debug:r.envConfig.debug,deviceId:"".concat(c).concat(null==h?void 0:h.slice(-6)),monitor:[new Vo(r.metrics)],isOversea:r.envConfig.isOversea,initLoadSize:r.appConfig.initLoadSize}),r.envConfig.region===Fa.y.sg&&(p.vasDomain=i===Va.BOE?Ka[Va.BOE]:Ka[Va.PROD],p.logDomain=i===Va.BOE?za[Va.BOE]:za[Va.PROD]),r.envConfig.envTag&&i===Va.BOE&&(p.boe=r.envConfig.envTag),r.envConfig.envTag&&i===Va.PPE&&(p.ppe=r.envConfig.envTag),i!==Va.PPE&&i!==Va.PROD||(m=r.envConfig.region,_=void 0===m?Fa.y.cn:m,b=null===(d=qa[_])||void 0===d?void 0:d.PROD,p.uploadRegion=(null===(v=r.byteImService)||void 0===v?void 0:v.uploadRegion)||(null==b?void 0:b.uploadRegion),p.imageDomain=(null===(y=r.byteImService)||void 0===y?void 0:y.imageDomain)||(null==b?void 0:b.imageDomain),p.videoDomain=(null===(g=r.byteImService)||void 0===g?void 0:g.videoDomain)||(null==b?void 0:b.videoDomain)),o&&(p.filterAgentMessage=!0),Ps.info(Zo.ImcloudConfig,p),e.abrupt("return",new xi(p));case 13:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),middleware:{receive:[_u,wu],send:[]},plugins:[],utils:{_monitor:Ts,services:this.service,fetch:function(e,t,n){var o,i;return n?null===(o=r.service)||void 0===o?void 0:o.request(e,t):null===(i=r.service)||void 0===i?void 0:i.request(e,t).then((function(e){return e.data}))},cancelHeart:function(){return r.appContext.ext=Tu(Tu({},r.appContext.ext),{},{userStatus:Wr.iy.Leave}),null==ss?void 0:ss.stop()},startHeart:function(){return r.appContext.ext=Tu(Tu({},r.appContext.ext),{},{userStatus:Wr.iy.Online}),null==ss?void 0:ss.run(r.appContext)}},logger:Ps}}},{key:"dialogStatus",value:function(){var e,t=null===(e=this.appContext.dialog)||void 0===e||null===(e=e.ext)||void 0===e?void 0:e.status;return t?Number(t):null}},{key:"dialogType",value:function(){var e,t=null===(e=this.appContext.dialog)||void 0===e||null===(e=e.ext)||void 0===e?void 0:e.type;return t?Number(t):null}},{key:"inAgent",value:function(){return this.dialogType()===Wr.My.AGENT&&(this.dialogStatus()===Wr.Mc.PENDING||this.dialogStatus()===Wr.Mc.HOLDON)}},{key:"inOffline",value:function(){return this.dialogType()===Wr.My.OFFLINE}},{key:"inQueuing",value:function(){return this.dialogStatus()===Wr.Mc.QUEUEING}},{key:"inBot",value:function(){return!this.inAgent()&&!this.inQueuing()}},{key:"pullHistoryMessages",value:function(){var e;return null===(e=this.appContext.channel)||void 0===e?void 0:e.pullHistoryMessages()}},{key:"runLinkchat",value:(i=Iu(ku().mark((function e(t){var n,r,i,s,a,c,u,l,f=this;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,e.prev=1,this.inNewAuthRole){e.next=13;break}return e.next=5,this.getUserInfo();case 5:return r=e.sent,e.next=8,this.getSign(r);case 8:i=e.sent,n=K().create({timeout:1e4,timeoutErrorMessage:"request timeout",headers:{"im-client-mark":"im_client","im-user-id":i.imUserId,"im-user-token":i.token,"secret-str":i.secretStr,sign:i.sign,timestamp:i.timestamp,businessLineId:r.businessLineId,lang:co("lang")}}),this.appContext.userInfo=Tu(Tu({},r),i),e.next=26;break;case 13:return e.next=15,this.getUserInfo();case 15:if(s=e.sent,this.appContext.userInfo=s,null!=s&&s.userId){e.next=19;break}return e.abrupt("return");case 19:return n=du({businessLineId:null==s?void 0:s.businessLineId,businessUserId:null==s?void 0:s.userId,channelGroupId:this.appConfig.channelGroupId,contactType:su.VISITOR,curEnv:this.envConfig.env,region:this.envConfig.region||Fa.y.cn,getSign:function(){var e=Iu(ku().mark((function e(){var t,n;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bu){e.next=5;break}return Bu=!0,e.abrupt("return",s.sign);case 5:return e.next=7,f.getUserInfo();case 7:return t=e.sent,n=t.sign,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:this.onNetError}),a=pa(n),e.next=23,a({contactType:su.VISITOR,channelId:this.appConfig.channel,entryId:this.appConfig.entryId},this.envConfig.apiOrigin);case 23:c=e.sent,u=c.data,this.appContext.userInfo=Tu(Tu({},this.appContext.userInfo),u);case 26:this.service=new _c({createDialogExt:this.appConfig.ext,appContext:this._appContext,request:{instance:n,interceptors:{}}}),l=(0,$r.mergeWith)(this.chatConfig,t,(function(e,t){if((0,$r.isArray)(e))return e.concat(t)})),this._instance=new o.ZP(l,this._appContext),this._instance.run(),e.next=38;break;case 32:throw e.prev=32,e.t0=e.catch(1),Ps.error("init linkchat error",Tu({},this.envConfig)),this.appContext.appStatus=o.Fw.APP_ON_ERROR,this.appContext.appLoading=!1,e.t0;case 38:case"end":return e.stop()}}),e,this,[[1,32]])}))),function(e){return i.apply(this,arguments)})},{key:"destroy",value:function(){var e;null===(e=this.channelInstance)||void 0===e||e.byteIM.event.unsubscribeAll()}}],n&&ju(t.prototype,n),r&&ju(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ru(Du,"onErrorSubject",fs);const Lu=/^(3|39|626)$/.test(n.j)?null:Du;Date.now();var Nu=function(e){return e[e.H5=1]="H5",e[e.Web=0]="Web",e}({});if(!/^(3|39|626)$/.test(n.j))var Fu=n(724);const Uu=/^(3|39|626)$/.test(n.j)?null:Lu},6751:(e,t,n)=>{"use strict";n.d(t,{oc:()=>de,YU:()=>me,yd:()=>_e});var r=n(2017),o=n(8665),i=n(2243),s=n(3695);function a(e,t){var n=t&&t.cache?t.cache:v,r=t&&t.serializer?t.serializer:h;return(t&&t.strategy?t.strategy:f)(e,{cache:n,serializer:r})}function c(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=t.get(i);return void 0===s&&(s=e.call(this,r),t.set(i,s)),s}function u(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function l(e,t,n,r,o){return n.bind(t,e,r,o)}function f(e,t){return l(e,this,1===e.length?c:u,t.cache.create(),t.serializer)}var h=function(){return JSON.stringify(arguments)};function p(){this.cache=Object.create(null)}p.prototype.has=function(e){return e in this.cache},p.prototype.get=function(e){return this.cache[e]},p.prototype.set=function(e,t){this.cache[e]=t};var d,v={create:function(){return new p}},y={variadic:function(e,t){return l(e,this,u,t.cache.create(),t.serializer)},monadic:function(e,t){return l(e,this,c,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(d||(d={}));var g,m=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.code=n,o.originalMessage=r,o}return(0,i.ZT)(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),_=function(e){function t(t,n,r,o){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',d.INVALID_VALUE,o)||this}return(0,i.ZT)(t,e),t}(m),b=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,d.INVALID_VALUE,r)||this}return(0,i.ZT)(t,e),t}(m),w=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',d.MISSING_VALUE,n)||this}return(0,i.ZT)(t,e),t}(m);function x(e){return"function"==typeof e}function O(e,t,n,r,o,i,a){if(1===e.length&&(0,s.O4)(e[0]))return[{type:g.literal,value:e[0].value}];for(var c=[],u=0,l=e;u<l.length;u++){var f=l[u];if((0,s.O4)(f))c.push({type:g.literal,value:f.value});else if((0,s.yx)(f))"number"==typeof i&&c.push({type:g.literal,value:n.getNumberFormat(t).format(i)});else{var h=f.value;if(!o||!(h in o))throw new w(h,a);var p=o[h];if((0,s.VG)(f))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),c.push({type:"string"==typeof p?g.literal:g.object,value:p});else if((0,s.rp)(f)){var v="string"==typeof f.style?r.date[f.style]:(0,s.Ii)(f.style)?f.style.parsedOptions:void 0;c.push({type:g.literal,value:n.getDateTimeFormat(t,v).format(p)})}else if((0,s.pe)(f)){v="string"==typeof f.style?r.time[f.style]:(0,s.Ii)(f.style)?f.style.parsedOptions:void 0;c.push({type:g.literal,value:n.getDateTimeFormat(t,v).format(p)})}else if((0,s.uf)(f)){(v="string"==typeof f.style?r.number[f.style]:(0,s.Wh)(f.style)?f.style.parsedOptions:void 0)&&v.scale&&(p*=v.scale||1),c.push({type:g.literal,value:n.getNumberFormat(t,v).format(p)})}else{if((0,s.HI)(f)){var y=f.children,E=f.value,S=o[E];if(!x(S))throw new b(E,"function",a);var k=S(O(y,t,n,r,o,i).map((function(e){return e.value})));Array.isArray(k)||(k=[k]),c.push.apply(c,k.map((function(e){return{type:"string"==typeof e?g.literal:g.object,value:e}})))}if((0,s.Wi)(f)){if(!(C=f.options[p]||f.options.other))throw new _(f.value,p,Object.keys(f.options),a);c.push.apply(c,O(C.value,t,n,r,o))}else if((0,s.Jo)(f)){var C;if(!(C=f.options["="+p])){if(!Intl.PluralRules)throw new m('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',d.MISSING_INTL_API,a);var I=n.getPluralRules(t,{type:f.pluralType}).select(p-(f.offset||0));C=f.options[I]||f.options.other}if(!C)throw new _(f.value,p,Object.keys(f.options),a);c.push.apply(c,O(C.value,t,n,r,o,p-(f.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===g.literal&&t.type===g.literal?n.value+=t.value:e.push(t),e}),[])}(c)}function E(e,t){return t?Object.keys(e).reduce((function(n,r){var o,s;return n[r]=(o=e[r],(s=t[r])?(0,i.pi)((0,i.pi)((0,i.pi)({},o||{}),s||{}),Object.keys(o).reduce((function(e,t){return e[t]=(0,i.pi)((0,i.pi)({},o[t]),s[t]||{}),e}),{})):o),n}),(0,i.pi)({},e)):e}function S(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(g||(g={}));const k=function(){function e(t,n,r,o){var s,c=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=c.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===g.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return O(c.ast,c.locales,c.formatters,c.formats,e,void 0,c.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(c.locales)[0]}},this.getAst=function(){return c.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==o?void 0:o.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=E(e.formats,r),this.locales=n,this.formatters=o&&o.formatters||(void 0===(s=this.formatterCache)&&(s={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:a((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,i.ev)([void 0],t)))}),{cache:S(s.number),strategy:y.variadic}),getDateTimeFormat:a((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,i.ev)([void 0],t)))}),{cache:S(s.dateTime),strategy:y.variadic}),getPluralRules:a((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,i.ev)([void 0],t)))}),{cache:S(s.pluralRules),strategy:y.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=s.Qc,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();var C,I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)};function P(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var s=r(i.shift());!e[s]&&n&&(e[s]=new n),e=e[s]}return o()?{}:{obj:e,k:r(i.shift())}}!function(e){e.keepRaw="keepRaw",e.replaceAnyway="replaceAnyway"}(C||(C={}));C.replaceAnyway;var T={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:C.replaceAnyway},A=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var o={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(o=t.options.i18nFormat),o.onParseError=t.options.onParseError,o.missingInterpolationHandler=t.options.missingInterpolationHandler,o.icuConfig=t.options.icuConfig,o.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(T,n,o),this.formats=this.options.formats,t){var i=this.options,s=i.bindI18n,a=i.bindI18nStore,c=i.memoize;t.IntlMessageFormat=k,this.IntlMessageFormat=k,t.ICU=this,c&&(s&&t.on(s,(function(){return r.clearCache()})),a&&t.store.on(a,(function(){return r.clearCache()})))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach((function(e){return r.addLocaleData(e)})):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach((function(e){e&&e.locale&&k.__addLocaleData(e)}))},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?I(I({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,r,o){if(!1===(this.options.icuConfig||{}).strict)return n;for(var i={},s=0,a=e;s<a.length;s++){var c=a[s];if(1===c.type){var u=c.value;if(null===n[u]||void 0===n[u]){if("function"==typeof this.options.missingInterpolationHandler){var l=this.options.missingInterpolationHandler({key:o,text:t,locale:r,interpolation:{key:u,val:n[u]}});if("string"==typeof l){i[u]=l;continue}}switch(this.options.onParseError){case C.keepRaw:throw new Error;case C.replaceAnyway:i[u]="{"+u+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var f=this.options.onParseError(t,u,r,this.IntlMessageFormat);if(!0===f)throw new Error;i[u]="string"==typeof f?f:"{"+u+"}"}else this.options.ignoreWarning||console.warn('[Starling ICU Warning] The interpolation parameter "{'+u+'}" is missing in the translation text "'+t+'" for the key "'+o+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),i[u]="{"+u+"}"}}}return Object.assign({},n,i)},e.prototype.parse=function(e,t,n,r,o,i){var s,a,c,u,l=i&&i.resolved&&i.resolved.res,f=this.options.memoize&&n+"."+r+"."+o.replace(/\./g,"###");!l&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memoize&&(s=function(e,t){var n=P(e,t),r=n.obj,o=n.k;if(r)return r[o]}(this.mem,f));try{return s||(s=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!i||l)&&(a=this.mem,c=s,(u=P(a,f,Object)).obj[u.k]=c)),s.format(this.checkMissingInterpolation(s.getAst(),e,t||{},n,o))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,o){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}(),j=(A.name,function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},j.apply(this,arguments)}),R=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/;"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=j({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var M={name:"inContext",type:"postProcessor",process:function(e,t,n,r){if(window&&document.getElementById("INCONTEXT-KEY-MATCH")&&!n.__STARLING_INCONTEXT_FLAG__){window.__STARLING_INCONTEXT_GLOBAL_I18N__||(window.__STARLING_INCONTEXT_GLOBAL_I18N__=r),delete n.keySeparator,delete n.lngs;var o=0;if(t=t.toString(),R.test(t))(i=t.match(R))[0],o=i[1],t=i[2];if(R.test(e)){var i;(i=e.match(R))[0];i[1];e=i[2]}if(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]){var s=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].findIndex((function(e){return JSON.stringify(e.options)===JSON.stringify(n)}));s>-1?(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t][s].default=e,o=s):o=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].push({options:n,default:e})-1}else window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]=[{options:n,default:e}],o=0;return"[[__starling_"+o+"_"+t+"__]]"}return e}};function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var G=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],H={},V=0;V<G.length;V++)H[G[V]]={style:"currency",currency:G[V]};var q={number:H},K="languageTransformer";function z(e){return function(t){return t.type===e}}function W(e,t){var n=e;return(t||[]).map((function(t){n=t.process(e)||n})),n}var $,Y={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},Z=[A,M],X=function(){function e(t,n){B(this,e),this._waitingToAddResourceBundle=[],null!=t&&t.copiedI18nextInstance?this.instance=t.copiedI18nextInstance:(this._handlePlugins(n),this._handleConfigs(t),this.instance=o.Z.createInstance(),this.instance.isInitialized=!1)}return L(e,[{key:"_handlePlugins",value:function(e){var t,n;!1===(null===(t=this.config)||void 0===t||null===(n=t.icuConfig)||void 0===n?void 0:n.open)&&Z.shift(),this.plugins=Array.isArray(e)?e.concat(Z):Z}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},Y,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise((function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map((function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),e.instance.use(t)}));var r=e.config;e.config.formats=Object.assign({},e.config.formats,q);var o=W(r.lng,e.plugins.filter(z(K)));e.instance.init(Object.assign({},r,{lng:o,i18nFormat:{formats:e.config.formats}}),(function(r,o){try{var i,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e._waitingToAddResourceBundle);try{for(s.s();!(i=s.n()).done;){var a,c=i.value;(a=e.instance).addResourceBundle.apply(a,N(c))}}catch(r){s.e(r)}finally{s.f()}e._waitingToAddResourceBundle=[]}catch(r){}r||(e._updateLanguages(),t({t:o,err:r})),e.init=!0,n({t:o,err:r})}))}))}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(N(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,(function(e,r){e||n._updateLanguages(),t&&t(e,r)}))}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise((function(n,r){t.config.lng=e,t.instance.changeLanguage(e,(function(e,o){e&&r({err:e,t:o}),t._updateLanguages(),n({err:e,t:o})}))}))}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"t",value:function(e,t,n){var r=Array.isArray(e)?Array.from(e).map((function(){return" "})).join(""):Array(e.length).fill(" "),o=Object.assign({keySeparator:r,nsSeparator:r},t);return"thirdParamFallback"in this.config&&this.config.thirdParamFallback&&(o.thirdParamFallback=!0),this.instance.t(e,n,o)}},{key:"addResourceBundle",value:function(e,t,n,r,o){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,o):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!o]),this.instance)}},{key:"cloneInstance",value:function(t,n){var r=this.instance.cloneInstance(t,n),o=new e({copiedI18nextInstance:r});return o.t=this.t.bind(o),o.config=this.config,o.plugins=this.plugins,o.languages=this.languages,o.init=r.isInitialized||Boolean(this.init),o.userLng=this.userLng,r.on("initialized",(function(){o.init=!0})),o}}]),e}(),J="Starling_intl:",Q=function(){for(var e,t="".concat(J," [WARNING]"),n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).warn.apply(e,[t].concat(r))},ee=function(){for(var e,t="".concat(J," [ERROR]"),n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).error.apply(e,[t].concat(r))};function te(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ne(){}function re(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}!function(e){e.intl3rdParty="intl3rdParty",e.backend="backend",e.logger="logger",e.languageDetector="languageDetector",e.postProcessor="postProcessor",e.i18nFormat="i18nFormat",e["3rdParty"]="3rdParty"}($||($={}));var oe=function(){function e(t){var n;B(this,e),this.plugins=[],this.i18nInstance=null!==(n=null==t?void 0:t.i18nInstance)&&void 0!==n?n:new X}return L(e,[{key:"use",value:function(e){return this.plugins.includes(e)?(Q("Plugin: ".concat(e.name," has beeninit installed.")),this):(this.plugins.push(e),this)}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),te(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return te(n.i18nInstance.createInstance(),(function(e){var r,o=e.err,i=e.t,s=n.plugins.filter((function(e){return e.type===$.intl3rdParty}));return te((r=s.map(re((function(e){if(e&&"function"==typeof e.init)return function(e,t){if(!t)return e&&e.then?e.then(ne):Promise.resolve()}((e.init instanceof Promise?e.init:re((function(t){return Promise.resolve(e.init(t))})))(n))}))),new Promise((function(e,t){if(Array.isArray(r)||(r=Array.from(r)),r.length<=0)return e([]);var n=[];r=r.map((function(o,i){return function(){("function"==typeof o?new Promise(o):Promise.resolve(o)).then((function(t){n[i]=t,i===r.length-1?e(n):r[i+1]()}),t)}})),r[0]()}))),(function(){return"function"==typeof t&&t(o,i),{err:o,t:i}}))}))}),(function(e){return ee("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}})))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=W(e,this.plugins.filter(z(K)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=W(e,this.plugins.filter(z(K)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"t",value:function(e,t,n){return this.ignoreWarning||this.i18nInstance&&this.i18nInstance.init?!e||"string"==typeof e&&!e.trim()?"":this.i18nInstance.t(e,t,n):(ee("The instance has not been initialized: i18n.t('".concat(e,"'").concat(t?","+JSON.stringify(t):"",");")),null!=n?n:Array.isArray(e)?e[0]:e)}},{key:"addResourceBundle",value:function(e,t,n,r,o){return this.i18nInstance.addResourceBundle(e,t,n,r,o)}},{key:"cloneInstance",value:function(t){var n=this.i18nInstance.cloneInstance(t),r=new e({i18nInstance:n});return r.t=this.t.bind(r),r.plugins=this.plugins,r.ignoreWarning=this.ignoreWarning,r}}]),e}(),ie=(new oe,oe);var se=n(7533);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ce(){ce=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ae(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ae(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ue(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function le(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){ue(i,r,o,s,a,"next",e)}function a(e){ue(i,r,o,s,a,"throw",e)}s(void 0)}))}}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ae(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=new ie;function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zh",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return new Promise((function(o,i){de.setLang(e),new r.Z(he(he({},n),{},{api_key:"9f75a950f9b411eb95980d5a80016f56",namespace:"linkchat-pro-sdk",locale:e,zoneHost:t?"https://starling-oversea.byteoversea.com":"https://starling.zijieapi.com",TEAChannelDomain:t?"https://sgali-mcs.byteoversea.com":"https://mcs.zijieapi.com",timeout:4e3,mode:"normal"})).load((function(t){de.addResourceBundle(e,"translation",t,!0,!0),o(t)}),(function(e){i(e)}))}))}de.init({lng:se.U.zh,resources:{en:{translation:{failed_to_create_session:"Failed to create session",failed_to_send_file_type_message:"Failed to send file type message",failed_to_send_message:"Failed to send message",illegal_requests_will_be_banned:"Illegal requests will be banned",linkchat_initialization_failed:"LINKCHAT initialization failed",no_queued_data_return:"No queued data return",no_session_created:"No session created",no_token:"No token",non_existent_session_id:"Non-existent session ID",queuing_timeout:"Queuing timeout",sdk_authentication_failed:"SDK authentication failed","server_deserted_({status})":"Server deserted ({status})",session_reconnection_failed:"Session reconnection failed",sorry__the_gateway_timed_out:"Sorry, the gateway timed out","sorry__there_is_a_problem_with_the_program_({status})":"Sorry, there is a problem with the program ({status})",the_amount_of_data_you_are_requesting_is_too_large:"The amount of data you are requesting is too large",the_current_session_is_not_in_progress:"The current session is not in progress",the_resource_you_requested_does_not_exist:"The resource you requested does not exist",the_resource_you_requested_is_denied_access:"The resource you requested is denied access",the_session_has_ended__reconnection_failed__click_try_again:"The session has ended, reconnection failed, click Try again",unrecognized_authentication_token:"Unrecognized authentication token",input_placeholder:"Please enter the question~",cancel_queue:"Failed to cancel the queue. Please refresh the page and try again~",queue_header:"You are at the top of the queue and will be connected to ~",queue_before:"In the queue, there are",queue_after:"people in front of you. Please wait!",queue_close:"Exit queue",operation_failed:"Operation Failed!",message_wrong:"The message is wrong",message_read:"read",message_unread:"unread",fail_to_end_session:"Failed to end session",close_session:"Close session",close_session_tip:"This session will end after closing. Are you sure you want to close it?",pc_title:"Online Service",not_support_message:"The current client does not support this type of message",order_card_error:"Order card analysis error",message_recalled:"This message has been recalled",guess_you_want_to_ask:"Guess you want to ask",customer_service:"customer service",customer_service2:"customer service",loading:"loading",uploading:"uploading",downloading:"downloading",sending:"sending"}},zh:{translation:{failed_to_create_session:"创建会话失败",failed_to_send_file_type_message:"发送文件类型消息失败",failed_to_send_message:"发送消息失败",illegal_requests_will_be_banned:"非法请求会被禁止",linkchat_initialization_failed:"LINKCHAT初始化失败",no_queued_data_return:"无排队数据返回",no_session_created:"未创建会话",no_token:"未获取到token",non_existent_session_id:"不存在的会话ID",queuing_timeout:"排队超时",sdk_authentication_failed:"SDK 鉴权失败","server_deserted_({status})":"服务器开小差了（{status}）",session_reconnection_failed:"会话重连失败",sorry__the_gateway_timed_out:"很抱歉，网关超时了","sorry__there_is_a_problem_with_the_program_({status})":"很抱歉，程序出了一点问题（{status}）",the_amount_of_data_you_are_requesting_is_too_large:"您所请求的数据量太大",the_current_session_is_not_in_progress:"当前会话不在进行中",the_resource_you_requested_does_not_exist:"您所请求的资源并不存在",the_resource_you_requested_is_denied_access:"您所请求的资源被禁止访问",the_session_has_ended__reconnection_failed__click_try_again:"会话已结束，重新连接失败，点击再次尝试",unrecognized_authentication_token:"未识别的鉴权token",input_placeholder:"请输入您想咨询的问题~",cancel_queue:"取消排队失败, 请刷新页面重试~","queue_number_({number})":"排队中，您前面还有（{number}）人在排队，请稍候!",queue_header:"您已排在队列最前面，即将为您接入～",queue_close:"退出排队",operation_failed:"操作失败！",message_wrong:"消息有误",message_read:"已读",message_unread:"未读",fail_to_end_session:"结束会话失败",close_session:"关闭会话窗口",close_session_tip:"关闭后将结束本次会话，是否确认关闭？",pc_title:"在线客服",not_support_message:"当前客户端不支持该类型消息",order_card_error:"订单卡片解析出错",message_recalled:"此消息已撤回",guess_you_want_to_ask:"猜您还想了解以下问题",customer_service:"转人工",customer_service2:"我要转人工",loading:"加载中",uploading:"上传中",downloading:"下载中",sending:"发送中"}}},fallbackLng:["en","zh"],thirdParamFallback:!0});var ye,ge,me=/^3(|9)$/.test(n.j)?null:(ye=le(ce().mark((function e(){var t,n,r,o=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"zh",n=o.length>1?o[1]:void 0,e.prev=2,e.next=5,ve(t,n);case 5:r=e.sent,de.addResourceBundle(t,"translation",r,!0,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0;case 12:return e.next=14,de.setLang(t);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(){return ye.apply(this,arguments)}),_e=993==n.j?(ge=le(ce().mark((function e(){var t,n,r,o=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"zh",n=o.length>1?o[1]:void 0,e.prev=2,e.next=5,ve(t,n,{lazyUpdate:!0});case 5:r=e.sent,de.addResourceBundle(t,"translation",r,!0,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0;case 12:return e.next=14,de.setLang(t);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(){return ge.apply(this,arguments)}):null},4512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(1024),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(s,e);var t,n,r,i=l(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(f(e=i.call.apply(i,[this].concat(n))),"state",{hasError:!1}),e}return t=s,r=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){var n,r,o=this.props.appContext;console.error(e,t),null==o||null===(n=o.logger)||void 0===n||null===(r=n.error)||void 0===r||r.call(n,"ErrorBoundaryError",{info:a(a({},e),t)})}},{key:"render",value:function(){var e=this.props,t=e.errorRender,n=e.children;return this.state.hasError?t||o().createElement(o().Fragment,null):n}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component)},1564:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Check:()=>s,Close:()=>c,CloseOne:()=>l,Delete:()=>h,DoubleDown:()=>d,DoubleUp:()=>y,Down:()=>m,Emotion:()=>b,Folder:()=>x,IdCard:()=>E,Keyboard:()=>k,Left:()=>I,Loading:()=>T,Logout:()=>me,Minus:()=>j,More:()=>M,Open:()=>D,Photo:()=>N,Pic:()=>be,Picture:()=>U,PictureMore:()=>H,Play:()=>xe,Plus:()=>q,Refresh:()=>z,Right:()=>$,Robot:()=>Z,Search:()=>J,Send:()=>ee,Spin:()=>ne,ThumbsDown:()=>oe,ThumbsDownFill:()=>se,ThumbsUp:()=>ce,ThumbsUpFill:()=>le,Up:()=>he,Video:()=>de,Voice:()=>ye,Warn:()=>Ee});var r=n(1024),o=n.n(r);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const s=function(e){return o().createElement("svg",i({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5303 6.46967C20.8232 6.76256 20.8232 7.23744 20.5303 7.53033L10.5303 17.5303C10.2374 17.8232 9.76256 17.8232 9.46967 17.5303L4.46967 12.5303C4.17678 12.2374 4.17678 11.7626 4.46967 11.4697C4.76256 11.1768 5.23744 11.1768 5.53033 11.4697L10 15.9393L19.4697 6.46967C19.7626 6.17678 20.2374 6.17678 20.5303 6.46967Z",fill:"currentColor"}))};function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const c=function(e){return o().createElement("svg",a({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53033 6.46967C7.23744 6.17678 6.76256 6.17678 6.46967 6.46967C6.17678 6.76256 6.17678 7.23744 6.46967 7.53033L10.9393 12L6.46967 16.4697C6.17678 16.7626 6.17678 17.2374 6.46967 17.5303C6.76256 17.8232 7.23744 17.8232 7.53033 17.5303L12 13.0607L16.4697 17.5303C16.7626 17.8232 17.2374 17.8232 17.5303 17.5303C17.8232 17.2374 17.8232 16.7626 17.5303 16.4697L13.0607 12L17.5303 7.53033C17.8232 7.23744 17.8232 6.76256 17.5303 6.46967C17.2374 6.17678 16.7626 6.17678 16.4697 6.46967L12 10.9393L7.53033 6.46967Z",fill:"currentColor"}))};function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const l=function(e){return o().createElement("svg",u({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.40426C6.70042 2.40426 2.40426 6.70042 2.40426 12C2.40426 17.2996 6.70042 21.5957 12 21.5957C17.2996 21.5957 21.5957 17.2996 21.5957 12C21.5957 6.70042 17.2996 2.40426 12 2.40426ZM1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM15.305 8.69501C15.5792 8.96921 15.5792 9.41377 15.305 9.68797L12.993 12L15.305 14.312C15.5792 14.5862 15.5792 15.0308 15.305 15.305C15.0308 15.5792 14.5862 15.5792 14.312 15.305L12 12.993L9.68797 15.305C9.41377 15.5792 8.96921 15.5792 8.69501 15.305C8.42081 15.0308 8.42081 14.5862 8.69501 14.312L11.007 12L8.69501 9.68797C8.42081 9.41377 8.42081 8.96921 8.69501 8.69501C8.96921 8.42081 9.41377 8.42081 9.68797 8.69501L12 11.007L14.312 8.69501C14.5862 8.42081 15.0308 8.42081 15.305 8.69501Z",fill:"currentColor"}))};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const h=function(e){return o().createElement("svg",f({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.73656 1.37082C5.84902 1.1437 6.08054 1 6.33398 1H9.66732C9.92269 1 10.1556 1.14588 10.2671 1.37562L11.2171 3.33333H14.0007C14.3688 3.33333 14.6673 3.63181 14.6673 4C14.6673 4.36819 14.3688 4.66667 14.0007 4.66667H13.0007V14.3333C13.0007 14.7015 12.7022 15 12.334 15H3.66732C3.29913 15 3.00065 14.7015 3.00065 14.3333V4.66667H2.00065C1.63246 4.66667 1.33398 4.36819 1.33398 4C1.33398 3.63181 1.63246 3.33333 2.00065 3.33333H4.76473L5.73656 1.37082ZM6.25259 3.33333H9.73505L9.24981 2.33333H6.74778L6.25259 3.33333ZM7.33398 7C7.33398 6.63181 7.03551 6.33333 6.66732 6.33333C6.29913 6.33333 6.00065 6.63181 6.00065 7V11C6.00065 11.3682 6.29913 11.6667 6.66732 11.6667C7.03551 11.6667 7.33398 11.3682 7.33398 11V7ZM10.0007 7C10.0007 6.63181 9.70217 6.33333 9.33398 6.33333C8.96579 6.33333 8.66732 6.63181 8.66732 7V11C8.66732 11.3682 8.96579 11.6667 9.33398 11.6667C9.70217 11.6667 10.0007 11.3682 10.0007 11V7Z",fill:"currentColor"}))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}const d=function(e){return o().createElement("svg",p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M18 6L12 12L6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{d:"M18 12L12 18L6 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const y=function(e){return o().createElement("svg",v({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M6 12L12 6L18 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{d:"M6 18L12 12L18 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const m=function(e){return o().createElement("svg",g({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M18.5 9L12.5 15L6.5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}const b=function(e){return o().createElement("svg",_({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM2.40426 12C2.40426 6.70041 6.70041 2.40426 12 2.40426C17.2996 2.40426 21.5957 6.70041 21.5957 12C21.5957 17.2996 17.2996 21.5957 12 21.5957C6.70041 21.5957 2.40426 17.2996 2.40426 12ZM7.90686 15.1352C8.24197 14.9437 8.66844 15.0587 8.86212 15.3918L8.86487 15.3963C8.86884 15.4027 8.87678 15.4152 8.88878 15.433C8.91282 15.4687 8.95292 15.5252 9.0099 15.5956C9.12422 15.7368 9.304 15.9311 9.55558 16.1267C10.0523 16.5131 10.8401 16.915 11.9999 16.915C13.1596 16.915 13.9475 16.5131 14.4442 16.1267C14.6958 15.9311 14.8756 15.7368 14.9899 15.5956C15.0469 15.5252 15.087 15.4687 15.111 15.433C15.123 15.4152 15.1309 15.4027 15.1349 15.3963L15.1377 15.3918C15.3313 15.0587 15.7578 14.9437 16.0929 15.1352C16.4296 15.3276 16.5466 15.7565 16.3542 16.0932L15.7446 15.7448C16.3542 16.0932 16.354 16.0935 16.3538 16.0938L16.3534 16.0945L16.3525 16.0961L16.3504 16.0997L16.345 16.109C16.3408 16.116 16.3354 16.1249 16.3289 16.1354C16.3159 16.1564 16.2982 16.1841 16.2757 16.2175C16.2308 16.2842 16.1664 16.374 16.0813 16.4791C15.9115 16.689 15.6566 16.9628 15.3063 17.2352C14.5994 17.785 13.5149 18.3193 11.9999 18.3193C10.4849 18.3193 9.40039 17.785 8.69345 17.2352C8.3432 16.9628 8.08832 16.689 7.91845 16.4791C7.83334 16.374 7.76895 16.2842 7.72404 16.2175C7.70156 16.1841 7.68389 16.1564 7.67088 16.1354C7.66438 16.1249 7.65903 16.116 7.65482 16.109L7.64936 16.0997L7.64727 16.0961L7.64638 16.0945L7.64597 16.0938C7.64578 16.0935 7.64559 16.0932 8.25521 15.7448L7.64559 16.0932C7.4532 15.7565 7.57018 15.3276 7.90686 15.1352ZM15.7447 8.48936C16.1325 8.48936 16.4468 8.80372 16.4468 9.19149V11.0638C16.4468 11.4516 16.1325 11.766 15.7447 11.766C15.3569 11.766 15.0426 11.4516 15.0426 11.0638V9.19149C15.0426 8.80372 15.3569 8.48936 15.7447 8.48936ZM8.95745 9.19149C8.95745 8.80372 8.64309 8.48936 8.25532 8.48936C7.86755 8.48936 7.55319 8.80372 7.55319 9.19149V11.0638C7.55319 11.4516 7.86755 11.766 8.25532 11.766C8.64309 11.766 8.95745 11.4516 8.95745 11.0638V9.19149Z",fill:"currentColor"}))};function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const x=function(e){return o().createElement("svg",w({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 4.64851C1 3.73806 1.7754 3 2.73191 3H9.42553C9.63391 3 9.83151 3.0881 9.96491 3.24047L12.3289 5.9406H21.2681C22.2246 5.9406 23 6.67864 23 7.58911V19.3515C23 20.262 22.2246 21 21.2681 21H2.73191C1.77541 21 1 20.262 1 19.3515V4.64851ZM2.40424 11.6881V19.3515C2.40424 19.5238 2.55094 19.6634 2.73191 19.6634H21.2681C21.4491 19.6634 21.5958 19.5238 21.5958 19.3515V11.6881H2.40424ZM21.5958 10.3515H2.40424V4.64851C2.40424 4.47626 2.55094 4.33662 2.73191 4.33662H9.09667L11.4606 7.03675C11.594 7.18912 11.7916 7.27722 12 7.27722H21.2681C21.4491 7.27722 21.5958 7.41684 21.5958 7.58911V10.3515Z",fill:"currentColor"}))};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}const E=function(e){return o().createElement("svg",O({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.93662 4C1.86706 4 1 4.77194 1 5.72419V18.2763C1 19.2285 1.86705 20.0005 2.93662 20.0005H21.0634C22.133 20.0005 23 19.2285 23 18.2763V5.72419C23 4.77194 22.133 4 21.0634 4H2.93662ZM13.0845 8.41392C13.0845 7.95684 13.5007 7.58631 14.0141 7.58631H18.0422C18.5556 7.58631 18.9718 7.95684 18.9718 8.41392V12.0002C18.9718 12.4573 18.5556 12.8278 18.0422 12.8278H14.0141C13.5007 12.8278 13.0845 12.4573 13.0845 12.0002V8.41392ZM5.95772 14.7588C5.44433 14.7588 5.02814 15.1293 5.02814 15.5864C5.02814 16.0435 5.44433 16.414 5.95772 16.414H18.0422C18.5556 16.414 18.9718 16.0435 18.9718 15.5864C18.9718 15.1293 18.5556 14.7588 18.0422 14.7588H5.95772ZM5.0282 8.41393C5.0282 7.95685 5.44439 7.58632 5.95778 7.58632H8.97891C9.4923 7.58632 9.90849 7.95685 9.90849 8.41393C9.90849 8.871 9.4923 9.24154 8.97891 9.24154H5.95778C5.44439 9.24154 5.0282 8.871 5.0282 8.41393ZM5.95772 11.1725C5.44433 11.1725 5.02814 11.543 5.02814 12.0001C5.02814 12.4572 5.44433 12.8277 5.95772 12.8277H8.97885C9.49224 12.8277 9.90843 12.4572 9.90843 12.0001C9.90843 11.543 9.49224 11.1725 8.97885 11.1725H5.95772Z",fill:"currentColor"}))};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}const k=function(e){return o().createElement("svg",S({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM2.40426 12C2.40426 6.70041 6.70041 2.40426 12 2.40426C17.2996 2.40426 21.5957 6.70041 21.5957 12C21.5957 17.2996 17.2996 21.5957 12 21.5957C6.70041 21.5957 2.40426 17.2996 2.40426 12ZM8.65324 8.1383C8.65324 8.84921 8.07692 9.42553 7.366 9.42553C6.65509 9.42553 6.07877 8.84921 6.07877 8.1383C6.07877 7.42738 6.65509 6.85106 7.366 6.85106C8.07692 6.85106 8.65324 7.42738 8.65324 8.1383ZM7.366 13.5446C8.07692 13.5446 8.65324 12.9683 8.65324 12.2574C8.65324 11.5464 8.07692 10.9701 7.366 10.9701C6.65509 10.9701 6.07877 11.5464 6.07877 12.2574C6.07877 12.9683 6.65509 13.5446 7.366 13.5446ZM13.2872 8.1383C13.2872 8.84921 12.7109 9.42553 12 9.42553C11.2891 9.42553 10.7128 8.84921 10.7128 8.1383C10.7128 7.42738 11.2891 6.85106 12 6.85106C12.7109 6.85106 13.2872 7.42738 13.2872 8.1383ZM12 13.5446C12.7109 13.5446 13.2872 12.9683 13.2872 12.2574C13.2872 11.5464 12.7109 10.9701 12 10.9701C11.2891 10.9701 10.7128 11.5464 10.7128 12.2574C10.7128 12.9683 11.2891 13.5446 12 13.5446ZM17.9212 8.1383C17.9212 8.84921 17.3449 9.42553 16.634 9.42553C15.9231 9.42553 15.3468 8.84921 15.3468 8.1383C15.3468 7.42738 15.9231 6.85106 16.634 6.85106C17.3449 6.85106 17.9212 7.42738 17.9212 8.1383ZM16.634 13.5446C17.3449 13.5446 17.9212 12.9683 17.9212 12.2574C17.9212 11.5464 17.3449 10.9701 16.634 10.9701C15.9231 10.9701 15.3468 11.5464 15.3468 12.2574C15.3468 12.9683 15.9231 13.5446 16.634 13.5446ZM8.39577 15.9321C8.00799 15.9321 7.69364 16.2465 7.69364 16.6342C7.69364 17.022 8.00799 17.3364 8.39577 17.3364H15.6043C15.9921 17.3364 16.3064 17.022 16.3064 16.6342C16.3064 16.2465 15.9921 15.9321 15.6043 15.9321H8.39577Z",fill:"currentColor"}))};function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}const I=function(e){return o().createElement("svg",C({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("g",{clipPath:"url(#clip0)"},o().createElement("path",{d:"M24 24L24 0L0 -1.04907e-06L-1.04907e-06 24L24 24Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M15 18.5L9 12.5L15 6.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),o().createElement("defs",null,o().createElement("clipPath",{id:"clip0"},o().createElement("rect",{width:"24",height:"24",fill:"white",transform:"translate(24) rotate(90)"}))))};function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}const T=function(e){return o().createElement("svg",P({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M11.9253 1.33301V5.56941",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.6",d:"M11.9253 18.2783V22.5147",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.9",d:"M4.4375 4.43652L7.43476 7.43378",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.5",d:"M16.4141 16.415L19.4113 19.4123",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.8",d:"M1.33325 11.9241H5.56966",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.4",d:"M18.2791 11.9241H22.5155",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.7",d:"M4.4375 19.4123L7.43476 16.415",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{opacity:"0.3",d:"M16.4141 7.43378L19.4113 4.43652",stroke:"currentColor",strokeWidth:"2.26667",strokeLinecap:"round",strokeLinejoin:"round"}))};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}const j=function(e){return o().createElement("svg",A({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 12C4.5 11.5858 4.83579 11.25 5.25 11.25H19.25C19.6642 11.25 20 11.5858 20 12C20 12.4142 19.6642 12.75 19.25 12.75L5.25 12.75C4.83579 12.75 4.5 12.4142 4.5 12Z",fill:"currentColor"}))};function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}const M=function(e){return o().createElement("svg",R({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M6 13.5C6.82843 13.5 7.5 12.8284 7.5 12C7.5 11.1716 6.82843 10.5 6 10.5C5.17157 10.5 4.5 11.1716 4.5 12C4.5 12.8284 5.17157 13.5 6 13.5Z",fill:"currentColor"}),o().createElement("path",{d:"M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5Z",fill:"currentColor"}),o().createElement("path",{d:"M18 13.5C18.8284 13.5 19.5 12.8284 19.5 12C19.5 11.1716 18.8284 10.5 18 10.5C17.1716 10.5 16.5 11.1716 16.5 12C16.5 12.8284 17.1716 13.5 18 13.5Z",fill:"currentColor"}))};function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const D=function(e){return o().createElement("svg",B({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.40426C6.70042 2.40426 2.40426 6.70042 2.40426 12C2.40426 17.2996 6.70042 21.5957 12 21.5957C17.2996 21.5957 21.5957 17.2996 21.5957 12C21.5957 6.70042 17.2996 2.40426 12 2.40426ZM1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 7.5533C12.3878 7.5533 12.7021 7.86765 12.7021 8.25543V11.2978H15.7447C16.1325 11.2978 16.4468 11.6121 16.4468 11.9999C16.4468 12.3877 16.1325 12.702 15.7447 12.702H12.7021V15.7448C12.7021 16.1326 12.3878 16.4469 12 16.4469C11.6122 16.4469 11.2979 16.1326 11.2979 15.7448V12.702H8.25532C7.86754 12.702 7.55319 12.3877 7.55319 11.9999C7.55319 11.6121 7.86754 11.2978 8.25532 11.2978H11.2979V8.25543C11.2979 7.86765 11.6122 7.5533 12 7.5533Z",fill:"currentColor"}))};function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}const N=function(e){return o().createElement("svg",L({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M21.6763 6.18281H17.717C16.4456 6.18281 15.9463 3.5 14.6372 3.5H8.91872C8.03919 3.5 7.59797 6.18281 6.28012 6.18281H2.32075C1.59216 6.18281 1 6.7849 1 7.52569V19.1571C1 19.8979 1.59216 20.5 2.32075 20.5H21.6792C22.4078 20.5 23 19.8979 23 19.1571V7.52569C22.9971 6.7849 22.4078 6.18281 21.6763 6.18281ZM11.9985 18.2628C9.08128 18.2628 6.71843 15.8604 6.71843 12.8943C6.71843 9.92812 9.08128 7.52569 11.9985 7.52569C14.9158 7.52569 17.2787 9.92812 17.2787 12.8943C17.2787 15.8575 14.9129 18.2628 11.9985 18.2628ZM18.3788 8.86858C18.0131 8.86858 17.7199 8.56753 17.7199 8.19861C17.7199 7.82674 18.016 7.52865 18.3788 7.52865C18.7446 7.52865 19.0377 7.82969 19.0377 8.19861C19.0377 8.56753 18.7417 8.86858 18.3788 8.86858ZM5.39768 4.84288C5.39768 4.59497 5.20029 4.39427 4.95646 4.39427H3.6357C3.39187 4.39427 3.19448 4.59497 3.19448 4.84288V5.29149H5.39477C5.39768 5.28854 5.39768 5.08785 5.39768 4.84288ZM11.9985 8.86858C9.81277 8.86858 8.03919 10.6719 8.03919 12.8943C8.03919 15.1167 9.81277 16.92 11.9985 16.92C14.1843 16.92 15.9579 15.1167 15.9579 12.8943C15.9579 10.6689 14.1843 8.86858 11.9985 8.86858Z",fill:"currentColor"}))};function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}const U=function(e){return o().createElement("svg",F({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M1 6.15065V17.8865C1 18.9809 1.23021 19.1902 2.35126 19.1902H17.6555C18.7666 19.1902 19.0068 18.9903 19.0068 17.8856V6.15065C19.0068 5.0817 18.7946 4.84698 17.6555 4.84698H2.35126C1.23422 4.84604 1 5.03268 1 6.14971V6.15065ZM16.8858 16.1473H3.12998C4.63339 14.0302 7.30588 10.5009 7.98651 10.5009C8.64412 10.5009 10.8762 13.3524 11.8841 14.3563C11.8841 14.3563 13.1813 12.6831 13.861 12.6831C14.5536 12.6831 16.8638 16.1304 16.8858 16.1473ZM12.844 8.75799C12.844 7.87191 13.5867 7.15456 14.5046 7.15456C15.4224 7.15456 16.1661 7.87097 16.1661 8.75799C16.1661 9.64407 15.4224 10.3614 14.5046 10.3614C13.5867 10.3614 12.843 9.64501 12.843 8.75893L12.844 8.75799ZM9.44487 4.05988L6.81242 3.57725C5.9376 3.417 5.59128 3.47356 5.37808 4.05988H9.44487ZM21.8484 6.33164L19.7865 5.95458C19.7885 6.00266 19.7885 6.05073 19.7885 6.09881V17.9007C19.7885 18.4483 19.7515 19.0686 19.3031 19.4937C18.8666 19.9056 18.2351 19.9405 17.6765 19.9405H16.4344L19.0788 20.425C20.1699 20.6249 20.4441 20.4722 20.6573 19.3872L22.9234 7.85683C23.1296 6.80579 22.9665 6.53713 21.8484 6.33258V6.33164Z",fill:"currentColor"}))};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const H=function(e){return o().createElement("svg",G({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.40427 4.41112C2.40427 4.20023 2.57523 4.02927 2.78612 4.02927H21.2139C21.4248 4.02927 21.5957 4.20023 21.5957 4.41112V15.9987L13.5105 9.8159C13.2145 9.58959 12.7934 9.63383 12.5509 9.91671L9.74065 13.1953L7.56069 11.4514C7.28131 11.2279 6.87857 11.2502 6.62558 11.5031L2.40427 15.7245V4.41112ZM2.40427 17.7104V19.5869C2.40427 19.7978 2.57523 19.9688 2.78612 19.9688H21.2139C21.4248 19.9688 21.5957 19.7978 21.5957 19.5869V17.7665L13.185 11.3348L10.3651 14.6245C10.1188 14.9119 9.68898 14.9523 9.39341 14.7159L7.17418 12.9405L2.40427 17.7104ZM1 17.4196V4.41112C1 3.42467 1.79967 2.625 2.78612 2.625H21.2139C22.2003 2.625 23 3.42467 23 4.41112V17.4196V19.5869V19.5875C23 20.574 22.2003 21.3737 21.2139 21.3737H2.78612C1.79967 21.3737 1 20.574 1 19.5875V19.5869V17.4196ZM5.33589 7.93467C5.33589 7.09789 6.01424 6.41955 6.85102 6.41955C7.6878 6.41955 8.36614 7.09789 8.36614 7.93467C8.36614 8.77145 7.6878 9.4498 6.85102 9.4498C6.01424 9.4498 5.33589 8.77145 5.33589 7.93467Z",fill:"currentColor"}))};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const q=function(e){return o().createElement("svg",V({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7803 5.00098C12.7808 4.58677 12.4455 4.25054 12.0313 4.25C11.617 4.24946 11.2808 4.58481 11.2803 4.99902L11.2721 11.2498H5C4.58579 11.2498 4.25 11.5856 4.25 11.9998C4.25 12.414 4.58579 12.7498 5 12.7498H11.2701L11.262 18.999C11.2614 19.4132 11.5968 19.7494 12.011 19.75C12.4252 19.7505 12.7614 19.4152 12.762 19.001L12.7701 12.7498H19C19.4142 12.7498 19.75 12.414 19.75 11.9998C19.75 11.5856 19.4142 11.2498 19 11.2498H12.7721L12.7803 5.00098Z",fill:"currentColor"}))};function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const z=function(e){return o().createElement("svg",K({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.01778 2.99006C9.16838 2.51295 10.4294 2.25 11.75 2.25C15.2236 2.25 18.273 4.06653 20 6.80147V4C20 3.58579 20.3358 3.25 20.75 3.25C21.1642 3.25 21.5 3.58579 21.5 4V12C21.5 12.4142 21.1642 12.75 20.75 12.75C20.3358 12.75 20 12.4142 20 12C20 7.44365 16.3063 3.75 11.75 3.75C10.63 3.75 9.564 3.97275 8.59234 4.37566C8.09043 4.58379 7.61334 4.84014 7.16686 5.13903C6.71687 5.44027 6.29805 5.78469 5.91637 6.16637C5.53469 6.54805 5.19027 6.96687 4.88903 7.41686C4.6586 7.76107 4.19277 7.8533 3.84857 7.62287C3.50436 7.39245 3.41213 6.92662 3.64256 6.58241C3.99844 6.05081 4.40515 5.55627 4.85571 5.10571C5.30627 4.65515 5.80081 4.24844 6.33241 3.89256C6.8599 3.53943 7.42395 3.2363 8.01778 2.99006ZM2.75 11.25C3.16421 11.25 3.5 11.5858 3.5 12C3.5 16.5563 7.19365 20.25 11.75 20.25C12.87 20.25 13.936 20.0272 14.9077 19.6243C15.4096 19.4162 15.8867 19.1599 16.3331 18.861C16.7831 18.5597 17.202 18.2153 17.5836 17.8336C17.9653 17.452 18.3097 17.0331 18.611 16.5831C18.8414 16.2389 19.3072 16.1467 19.6514 16.3771C19.9956 16.6076 20.0879 17.0734 19.8574 17.4176C19.5016 17.9492 19.0949 18.4437 18.6443 18.8943C18.1937 19.3449 17.6992 19.7516 17.1676 20.1074C16.6401 20.4606 16.0761 20.7637 15.4822 21.0099C14.3316 21.487 13.0706 21.75 11.75 21.75C8.27635 21.75 5.22697 19.9335 3.5 17.1985V20C3.5 20.4142 3.16421 20.75 2.75 20.75C2.33579 20.75 2 20.4142 2 20V12C2 11.5858 2.33579 11.25 2.75 11.25Z",fill:"currentColor"}))};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const $=function(e){return o().createElement("svg",W({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("g",{clipPath:"url(#clip0)"},o().createElement("path",{d:"M24 24L24 0L0 -1.04907e-06L-1.04907e-06 24L24 24Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M9 6.5L15 12.5L9 18.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),o().createElement("defs",null,o().createElement("clipPath",{id:"clip0"},o().createElement("rect",{width:"24",height:"24",fill:"white",transform:"translate(24) rotate(90)"}))))};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const Z=function(e){return o().createElement("svg",Y({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M12.1187 22.0006C7.67998 22.0006 3.59434 19.0508 2.38378 14.6011C1.67762 12.0012 2.0307 9.35141 3.39258 7.00156C4.75446 4.7017 6.92338 3.05181 9.49582 2.35185C12.1187 1.6519 14.792 2.00187 17.1627 3.35179C19.4829 4.70171 21.1475 6.85157 21.8536 9.40141C22.2067 10.7513 22.3076 12.1512 22.0554 13.5512C21.9545 14.1011 21.4501 14.4511 20.8953 14.4011C20.3404 14.3011 19.9873 13.8011 20.0378 13.2512C20.2395 12.1512 20.1891 11.0013 19.8865 9.90138C19.3316 7.85151 18.0202 6.10162 16.1539 5.05168C14.2876 4.00175 12.1187 3.70177 10.0507 4.25173C5.76326 5.40166 3.19082 9.75139 4.35094 14.0511C5.51106 18.3009 9.89934 20.8507 14.2372 19.7008C14.792 19.5508 15.3469 19.9008 15.4477 20.4007C15.5991 20.9507 15.246 21.5007 14.7416 21.6006C13.8337 21.9006 12.9762 22.0006 12.1187 22.0006Z",fill:"currentColor"}),o().createElement("path",{d:"M2.5 10.1816C1.65 10.1816 1 10.8908 1 11.8181V13.9999C1 14.9272 1.65 15.6364 2.5 15.6364C3.35 15.6364 4 14.9272 4 13.9999V11.8181C4 10.9453 3.35 10.1816 2.5 10.1816ZM21.5 10.1816C20.65 10.1816 20 10.8908 20 11.8181V13.9999C20 14.9272 20.65 15.6364 21.5 15.6364C22.35 15.6364 23 14.9272 23 13.9999V11.8181C23 10.9453 22.35 10.1816 21.5 10.1816Z",fill:"currentColor"}),o().createElement("path",{d:"M7.52881 11.0917C7.52881 11.7413 7.87824 12.3415 8.44548 12.6663C9.01271 12.9911 9.71157 12.9911 10.2788 12.6663C10.846 12.3415 11.1955 11.7413 11.1955 11.0917C11.1955 10.0875 10.3747 9.27344 9.36214 9.27344C8.34962 9.27344 7.52881 10.0875 7.52881 11.0917Z",fill:"currentColor"}),o().createElement("path",{d:"M13.0288 11.0917C13.0288 12.0959 13.8496 12.9099 14.8621 12.9099C15.8747 12.9099 16.6955 12.0959 16.6955 11.0917C16.6955 10.0875 15.8747 9.27344 14.8621 9.27344C13.8496 9.27344 13.0288 10.0875 13.0288 11.0917Z",fill:"currentColor"}))};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}const J=function(e){return o().createElement("svg",X({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2.75C6.21979 2.75 2.75 6.21979 2.75 10.5C2.75 14.7802 6.21979 18.25 10.5 18.25C14.7802 18.25 18.25 14.7802 18.25 10.5C18.25 6.21979 14.7802 2.75 10.5 2.75ZM1.25 10.5C1.25 5.39137 5.39137 1.25 10.5 1.25C15.6086 1.25 19.75 5.39137 19.75 10.5C19.75 12.7843 18.922 14.8752 17.5497 16.489L21.3839 20.3233C21.6768 20.6162 21.6768 21.091 21.3839 21.3839C21.091 21.6768 20.6162 21.6768 20.3233 21.3839L16.489 17.5497C14.8753 18.922 12.7843 19.75 10.5 19.75C5.39137 19.75 1.25 15.6086 1.25 10.5ZM7.1413 6.64124C8.00006 5.78248 9.18859 5.25 10.5001 5.25C11.8115 5.25 13.0001 5.78248 13.8588 6.64124C14.1517 6.93414 14.1517 7.40901 13.8588 7.7019C13.5659 7.9948 13.091 7.9948 12.7982 7.7019C12.2092 7.11295 11.3977 6.75 10.5001 6.75C9.60239 6.75 8.79092 7.11295 8.20196 7.7019C7.90907 7.9948 7.43419 7.9948 7.1413 7.7019C6.84841 7.40901 6.84841 6.93414 7.1413 6.64124Z",fill:"currentColor"}))};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}const ee=function(e){return o().createElement("svg",Q({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("circle",{cx:"12",cy:"12",r:"11",fill:"currentColor"}),o().createElement("path",{d:"M4.18323 11.9408L17.6514 6.0218C17.8418 5.93836 18.0476 6.10793 17.9902 6.30173L14.8822 16.7588C14.8416 16.8975 14.682 16.9688 14.5462 16.9096L11.2939 15.5207C11.1651 15.4655 11.0139 15.526 10.9635 15.6539L10.1081 17.8463C10.0213 18.0697 9.6853 18.0428 9.6363 17.8099L8.99789 14.7428C8.98109 14.6647 9.00769 14.5853 9.06509 14.5288L14.0954 9.69322C14.1416 9.64881 14.0772 9.58017 14.0268 9.6192L8.04728 13.6876C7.84568 13.8249 7.58527 13.8532 7.35707 13.7617L4.18323 12.4885C3.93962 12.3822 3.93822 12.0484 4.18323 11.9408Z",fill:"white"}))};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}const ne=function(e){return o().createElement("svg",te({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C11.5762 1 11.2326 1.3436 11.2326 1.76744C11.2326 2.19129 11.5762 2.53488 12 2.53488C17.2274 2.53488 21.4651 6.77256 21.4651 12C21.4651 17.2274 17.2274 21.4651 12 21.4651C6.77256 21.4651 2.53488 17.2274 2.53488 12C2.53488 11.5762 2.19129 11.2326 1.76744 11.2326C1.3436 11.2326 1 11.5762 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM12 5.09302C8.18538 5.09302 5.09302 8.18538 5.09302 12C5.09302 15.8146 8.18538 18.907 12 18.907C12.4238 18.907 12.7674 18.5634 12.7674 18.1395C12.7674 17.7157 12.4238 17.3721 12 17.3721C9.03308 17.3721 6.62791 14.9669 6.62791 12C6.62791 9.03308 9.03308 6.62791 12 6.62791C14.9669 6.62791 17.3721 9.03308 17.3721 12C17.3721 12.4238 17.7157 12.7674 18.1395 12.7674C18.5634 12.7674 18.907 12.4238 18.907 12C18.907 8.18538 15.8146 5.09302 12 5.09302Z",fill:"currentColor"}))};function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},re.apply(this,arguments)}const oe=function(e){return o().createElement("svg",re({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4186 2.00012H5.65123C4.40144 1.98765 3.39623 2.95665 3.22282 4.18177L2.0265 12.5536C1.92388 13.2791 2.12147 14.0234 2.5811 14.5905C3.04168 15.1589 3.72447 15.4959 4.45498 15.4885H8.95488V18.5117C8.95488 20.3911 10.3861 22 12.2533 22H12.7195L16.1873 13.6276H18.6966C20.2911 13.6484 21.7511 12.5604 21.9908 11.0987L22 11.0427V4.48292L21.9908 4.42686C21.7446 2.9252 20.2443 1.97997 18.6966 2.00032H16.4186V2.00012ZM4.60444 4.37703C4.69032 3.76935 5.16212 3.38976 5.63918 3.39542L15.0232 3.39547V12.7916L11.8111 20.5466C10.9989 20.3309 10.3502 19.5344 10.3502 18.5117V14.0932L4.45111 14.0931L4.44264 14.0932C4.15757 14.0967 3.8712 13.9663 3.66517 13.712C3.4573 13.4555 3.3582 13.1028 3.4081 12.749L4.60444 4.37703ZM18.7116 3.3956C19.7501 3.38044 20.4721 3.98546 20.6046 4.60402V10.922C20.4656 11.5815 19.7057 12.2467 18.7116 12.2322H16.4186V3.39567L18.7014 3.39575L18.7116 3.3956Z",fill:"currentColor"}))};function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}const se=function(e){return o().createElement("svg",ie({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M10.1899 14.7002V18.3002C10.1899 19.7914 11.3987 21.0002 12.8899 21.0002L16.4899 12.9002V3.00011H6.03188C5.13432 2.99008 4.36646 3.64276 4.23188 4.53023L2.98988 12.6302C2.91063 13.1524 3.06467 13.683 3.41121 14.0815C3.75774 14.48 4.2618 14.7062 4.78988 14.7002H10.1899Z",fill:"currentColor",fillOpacity:"0.2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.03571 2.25011H16.4899C16.9041 2.25011 17.2399 2.5859 17.2399 3.00011V12.9002C17.2399 13.0052 17.2179 13.1089 17.1752 13.2048L13.5752 21.3048C13.4549 21.5757 13.1863 21.7502 12.8899 21.7502C10.9845 21.7502 9.43988 20.2056 9.43988 18.3002V15.4502H4.7938C4.04736 15.4573 3.33518 15.137 2.84526 14.5736C2.35433 14.009 2.1361 13.2574 2.24838 12.5177L3.49036 4.41778C3.4904 4.41756 3.49033 4.418 3.49036 4.41778C3.68108 3.16236 4.76644 2.23816 6.03571 2.25011ZM6.0235 3.75007C5.49984 3.74422 5.05191 4.12501 4.97341 4.64268L3.73139 12.7428C3.73137 12.7429 3.73141 12.7426 3.73139 12.7428C3.68532 13.0472 3.77512 13.357 3.97716 13.5893C4.17931 13.8218 4.47335 13.9538 4.78139 13.9503L4.78988 13.9502L10.1899 13.9502C10.6041 13.9502 10.9399 14.286 10.9399 14.7002V18.3002C10.9399 19.2177 11.5735 19.9872 12.427 20.195L15.7399 12.7411V3.75011L6.0235 3.75007Z",fill:"currentColor"}),o().createElement("path",{d:"M16.4897 3.00033H18.8927C19.9471 2.98168 20.8484 3.75534 20.9897 4.80033V11.1003C20.8484 12.1453 19.9471 13.019 18.8927 13.0003H16.4897V3.00033Z",fill:"currentColor",fillOpacity:"0.2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.2397 4.85642C20.1304 4.21104 19.565 3.73856 18.906 3.75021L18.8927 3.75045L17.2397 3.75033V12.2503H18.906C19.5182 12.2612 20.1235 11.7406 20.2397 11.0446V4.85642ZM18.8866 2.25033C20.3182 2.22857 21.541 3.28019 21.733 4.6998C21.7375 4.73312 21.7397 4.76671 21.7397 4.80033V11.1003C21.7397 11.134 21.7375 11.1675 21.733 11.2009C21.5477 12.5703 20.3667 13.7726 18.8867 13.7503H16.4897C16.0755 13.7503 15.7397 13.4145 15.7397 13.0003V3.00033C15.7397 2.58612 16.0755 2.25033 16.4897 2.25033H18.8866Z",fill:"currentColor"}))};function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}const ce=function(e){return o().createElement("svg",ae({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.58142 21.9999L18.3488 21.9999C19.5986 22.0124 20.6038 21.0434 20.7772 19.8182L21.9735 11.4464C22.0761 10.7209 21.8785 9.97662 21.4189 9.40945C20.9583 8.8411 20.2755 8.50407 19.545 8.5115L15.0451 8.5115L15.0451 5.48831C15.0451 3.6089 13.6139 2 11.7467 2L11.2805 2L7.81271 10.3724L5.3034 10.3724C3.7089 10.3516 2.24888 11.4396 2.00921 12.9013L2.00002 12.9573L2.00002 19.5171L2.00921 19.5731C2.25543 21.0748 3.75569 22.02 5.30345 21.9997L7.58142 21.9997L7.58142 21.9999ZM19.3956 19.623C19.3097 20.2306 18.8379 20.6102 18.3608 20.6046L8.97676 20.6045L8.97677 11.2084L12.1889 3.45336C13.0011 3.66911 13.6498 4.46556 13.6498 5.48831L13.6498 9.90685L19.5489 9.9069L19.5574 9.9068C19.8424 9.90333 20.1288 10.0337 20.3348 10.288C20.5427 10.5445 20.6418 10.8972 20.5919 11.251L19.3956 19.623ZM5.28844 20.6044C4.24987 20.6196 3.52789 20.0145 3.39537 19.396L3.39537 13.078C3.53441 12.4185 4.29429 11.7533 5.28844 11.7678L7.58141 11.7678L7.58141 20.6043L5.29862 20.6043L5.28844 20.6044Z",fill:"currentColor"}))};function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=function(e){return o().createElement("svg",ue({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M13.8001 9.29977V5.69977C13.8001 4.2086 12.5913 2.99977 11.1001 2.99977L7.50011 11.0998V20.9999H17.9581C18.8557 21.0099 19.6235 20.3572 19.7581 19.4698L21.0001 11.3698C21.0794 10.8476 20.9253 10.317 20.5788 9.91853C20.2323 9.52002 19.7282 9.29379 19.2001 9.29977H13.8001Z",fill:"currentColor",fillOpacity:"0.2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.9543 21.7499H7.50011C7.08589 21.7499 6.75011 21.4141 6.75011 20.9999V11.0998C6.75011 10.9948 6.77213 10.8911 6.81475 10.7952L10.4147 2.69517C10.5351 2.42432 10.8037 2.24977 11.1001 2.24977C13.0055 2.24977 14.5501 3.79439 14.5501 5.69977V8.54977H19.1962C19.9426 8.54265 20.6548 8.86298 21.1447 9.4264C21.6357 9.99096 21.8539 10.7426 21.7416 11.4823L20.4996 19.5822C20.4996 19.5824 20.4997 19.582 20.4996 19.5822C20.3089 20.8377 19.2236 21.7618 17.9543 21.7499ZM17.9665 20.2499C18.4902 20.2558 18.9381 19.875 19.0166 19.3573L20.2586 11.2572C20.2586 11.2571 20.2586 11.2574 20.2586 11.2572C20.3047 10.9528 20.2149 10.643 20.0128 10.4107C19.8107 10.1782 19.5166 10.0462 19.2086 10.0497L19.2001 10.0498L13.8001 10.0498C13.3859 10.0498 13.0501 9.71398 13.0501 9.29977V5.69977C13.0501 4.78229 12.4165 4.0128 11.563 3.80503L8.25011 11.2589V20.2499L17.9665 20.2499Z",fill:"currentColor"}),o().createElement("path",{d:"M7.5 11.0003H5.097C4.04266 10.9816 3.14135 11.855 3 12.9V19.2C3.14135 20.245 4.04266 21.0186 5.097 21H7.5V11.0003Z",fill:"currentColor",fillOpacity:"0.2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 12.9557C3.8662 12.2599 4.47135 11.7394 5.08374 11.7502L5.097 11.7504L6.75 11.7503V20.25H5.08374C4.42478 20.2616 3.85934 19.7893 3.75 19.1439V12.9557ZM5.10309 10.2503C3.62322 10.2281 2.44203 11.4298 2.25677 12.7994C2.25226 12.8328 2.25 12.8663 2.25 12.9V19.2C2.25 19.2336 2.25226 19.2672 2.25677 19.3005C2.44879 20.7201 3.6715 21.7717 5.10313 21.75H7.5C7.91421 21.75 8.25 21.4142 8.25 21V11.0003C8.25 10.5861 7.91421 10.2503 7.5 10.2503H5.10309Z",fill:"currentColor"}))};function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}const he=function(e){return o().createElement("svg",fe({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M24 0H0V24H24V0Z",fill:"white",fillOpacity:"0.01"}),o().createElement("path",{d:"M6.5 15L12.5 9L18.5 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}const de=function(e){return o().createElement("svg",pe({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M14.7337 19H3.15286C1.96508 19 1 18.0319 1 16.766V7.23403C1 6.04256 1.96508 5 3.15286 5H14.8079C15.9957 5 16.9608 5.96809 16.9608 7.23403V16.8404C16.8865 18.0319 15.9215 19 14.7337 19ZM5.37996 8.0532C4.63759 8.20212 4.04368 8.79788 3.82098 9.61703C3.52403 11.0319 4.71181 12.2979 6.12231 12C6.86467 11.8511 7.45854 11.1809 7.68127 10.3617C8.05245 8.87235 6.86469 7.68085 5.37996 8.0532ZM21.9497 17.2371L18.8738 15.4362C18.2736 15.061 17.8235 14.7609 17.8235 14.1606V10.0336C17.8235 9.43333 18.2736 9.13319 18.8738 8.83305L21.9497 7.03216C22.5499 6.65696 23 6.9571 23 7.55741V16.7869C22.925 17.3871 22.4748 17.6123 21.9497 17.2371Z",fill:"currentColor"}))};function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}const ye=function(e){return o().createElement("svg",ve({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.40426 12C2.40426 6.70042 6.70042 2.40426 12 2.40426C17.2996 2.40426 21.5957 6.70042 21.5957 12C21.5957 17.2996 17.2996 21.5957 12 21.5957C6.70042 21.5957 2.40426 17.2996 2.40426 12ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM10.4086 7.74043C10.4086 6.86147 11.1211 6.14894 12 6.14894C12.879 6.14894 13.5915 6.86147 13.5915 7.74043V12C13.5915 12.879 12.879 13.5915 12 13.5915C11.1211 13.5915 10.4086 12.879 10.4086 12V7.74043ZM12 4.74468C10.3455 4.74468 9.0043 6.08592 9.0043 7.74043V12C9.0043 13.6545 10.3455 14.9957 12 14.9957C13.6545 14.9957 14.9958 13.6545 14.9958 12V7.74043C14.9958 6.08592 13.6545 4.74468 12 4.74468ZM7.78723 11.6722C7.78723 11.2845 7.47288 10.9701 7.08511 10.9701C6.69733 10.9701 6.38298 11.2845 6.38298 11.6722C6.38298 14.5367 8.52706 16.9003 11.2979 17.2458V18.5531C11.2979 18.9409 11.6122 19.2552 12 19.2552C12.3878 19.2552 12.7021 18.9409 12.7021 18.5531V17.2458C15.4729 16.9003 17.617 14.5367 17.617 11.6722C17.617 11.2845 17.3027 10.9701 16.9149 10.9701C16.5271 10.9701 16.2128 11.2845 16.2128 11.6722C16.2128 13.9985 14.3272 15.8844 12.0011 15.885H12C9.67335 15.885 7.78723 13.9989 7.78723 11.6722Z",fill:"currentColor"}))};function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}const me=function(e){return o().createElement("svg",ge({},e,{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M12 0H0V12H12V0Z",fill:"white","fill-opacity":"0.01"}),o().createElement("path",{d:"M5.99792 1.5H1.5V10.5H6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"}),o().createElement("path",{d:"M8.25 8.25L10.5 6L8.25 3.75",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"}),o().createElement("path",{d:"M4 5.99792H10.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"}))};function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}const be=function(e){return o().createElement("svg",_e({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("path",{d:"M19.5 3H4.5C3.67158 3 3 3.67158 3 4.5V19.5C3 20.3285 3.67158 21 4.5 21H19.5C20.3285 21 21 20.3285 21 19.5V4.5C21 3.67158 20.3285 3 19.5 3Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{d:"M9.00098 11.501C10.3817 11.501 11.501 10.3817 11.501 9.00098C11.501 7.62028 10.3817 6.50098 9.00098 6.50098C7.62028 6.50098 6.50098 7.62028 6.50098 9.00098C6.50098 10.3817 7.62028 11.501 9.00098 11.501Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o().createElement("path",{d:"M13.896 13.1095C14.3042 12.5632 15.1274 12.5767 15.5174 13.136L19.9048 19.4278C20.3671 20.0908 19.8927 20.9998 19.0845 20.9998H8.00098L13.896 13.1095Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}const xe=function(e){return o().createElement("svg",we({},e,{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("circle",{cx:"20",cy:"20",r:"16",fill:"currentColor",fillOpacity:"0.1"}),o().createElement("path",{d:"M19.98 2.55505C10.3234 2.55505 2.49512 10.3836 2.49512 20.0399C2.49512 29.6974 10.3233 37.5251 19.98 37.5251C29.6368 37.5251 37.4651 29.6974 37.4651 20.0399C37.4652 10.3836 29.6368 2.55505 19.98 2.55505ZM19.978 35.1966C11.6069 35.1966 4.82064 28.4107 4.82064 20.0392C4.82064 11.6684 11.6069 4.88161 19.978 4.88161C28.3493 4.88161 35.1354 11.6684 35.1354 20.0392C35.1354 28.4107 28.3494 35.1966 19.978 35.1966ZM14.8988 27.3407L26.8724 20.4601L14.8988 13.5799V27.3407Z",fill:"currentColor"}))};function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}const Ee=function(e){return o().createElement("svg",Oe({},e,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o().createElement("rect",{opacity:"0.01",width:"24",height:"24",fill:"#D8D8D8"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12C24 18.6274 18.6274 24 12 24ZM10.9482 17.8854C10.9482 17.3055 11.4183 16.8354 11.9982 16.8354C12.5781 16.8354 13.0482 17.3055 13.0482 17.8854C13.0482 18.2606 12.8481 18.6072 12.5232 18.7948C12.1984 18.9823 11.7981 18.9823 11.4732 18.7948C11.1484 18.6072 10.9482 18.2606 10.9482 17.8854ZM12.0059 4.99951C11.349 4.99951 10.8221 5.54243 10.8418 6.19897L11.0789 14.0999C11.0939 14.6011 11.5045 14.9995 12.0058 14.9995C12.5072 14.9995 12.9178 14.6011 12.9328 14.0999L13.1699 6.19897C13.1896 5.54243 12.6627 4.99951 12.0059 4.99951Z",fill:"currentColor"}),o().createElement("mask",{id:"mask0",type:"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12C24 18.6274 18.6274 24 12 24ZM10.9482 17.8854C10.9482 17.3055 11.4183 16.8354 11.9982 16.8354C12.5781 16.8354 13.0482 17.3055 13.0482 17.8854C13.0482 18.2606 12.8481 18.6072 12.5232 18.7948C12.1984 18.9823 11.7981 18.9823 11.4732 18.7948C11.1484 18.6072 10.9482 18.2606 10.9482 17.8854ZM12.0059 4.99951C11.349 4.99951 10.8221 5.54243 10.8418 6.19897L11.0789 14.0999C11.0939 14.6011 11.5045 14.9995 12.0058 14.9995C12.5072 14.9995 12.9178 14.6011 12.9328 14.0999L13.1699 6.19897C13.1896 5.54243 12.6627 4.99951 12.0059 4.99951Z",fill:"white"})),o().createElement("g",{mask:"url(#mask0)"}))}},5267:(e,t,n)=>{"use strict";n.d(t,{J:()=>v});var r=n(8904),o=n(1024),i=n.n(o),s=n(1564);var a,c=(a=s,Object.keys(a));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=["type","className","spin","name","size","fill"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v=function(e){var t=e.type,n=e.className,o=e.spin,a=e.name,u=e.size,f=e.fill,p=d(e,l),v="string"==typeof a?{"aria-label":a}:{"aria-hidden":!0};return i().createElement(function(e){if(!(c.indexOf(e)>-1))throw new Error("".concat(e," is not a valid icon type name"));return s[e]}(t),h(h(h({},v),p),{},{className:(0,r.Z)("jarvis-icon",{"is-spin":o},n),style:{fontSize:u,color:f}}))}},6105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(1024),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=function(e){var t=e.style,n=void 0===t?{}:t,i=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},n)}),[n]);return o().createElement("svg",{style:i,width:"48",height:"48",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},o().createElement("defs",null,o().createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},o().createElement("stop",{"stop-color":"#2A55E5","stop-opacity":"0",offset:"0%"}),o().createElement("stop",{"stop-color":"#2A55E5","stop-opacity":".631",offset:"63.146%"}),o().createElement("stop",{"stop-color":"#2A55E5",offset:"100%"}))),o().createElement("g",{fill:"none","fill-rule":"evenodd"},o().createElement("g",{transform:"translate(1 1)"},o().createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:"url(#a)","stroke-width":"2"},o().createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),o().createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:"1"},o().createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))}},8197:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.inputOnFocus="inputOnFocus",e.inputOnBlur="inputOnBlur",e.toolsOnOpen="toolsOnOpen",e.toolsOnClose="toolsOnClose",e.emojiOnOpen="emojiOnOpen",e.emojiOnClose="emojiOnClose",e.toolPanelClick="toolPanelClick",e}({})},1047:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var r=function(e){return e.Card="card",e.Chat="chat",e}({})},7417:(e,t,n)=>{"use strict";n.d(t,{JO:()=>a.J,ZP:()=>c,nD:()=>i.n,q5:()=>o.Z,wO:()=>s.w});var r=n(6064),o=n(6105),i=(n(1990),n(8197)),s=n(1047),a=n(5267);const c=/^(3|39|626)$/.test(n.j)?null:r.Z},1990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(2872),o=n(1024),i=n.n(o),s=n(4512),a=n(6064);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=["config","appContext","fallback","ref"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v={code:"default"};const y=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t=e.config,n=e.appContext,c=(e.fallback,e.ref),f=d(e,u);try{if(!t.isRemote){var p=[t.code];t.version&&p.push(t.version);var y=p.join("_"),g=(null==n?void 0:n.libraray.libMap.get(y))||t.component,m=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(g));return i().createElement(m,h(h({},f),{},{defaultConfig:t,ref:c}))}}catch(e){return null}var _=(0,o.useContext)(a.v).getRemoteComponent,b=(0,o.useMemo)((function(){try{return(0,o.lazy)((function(){return _(t||v)}))}catch(r){var e;null==n||null===(e=n.logger)||void 0===e||e.error("LazyComponentError_".concat(t.code),{error:r})}}),[JSON.stringify(t)]),w=function(){var e,n;if("card"!==(null===(e=t.meta)||void 0===e?void 0:e.componentType))return null;var r="none"===(null==t||null===(n=t.meta)||void 0===n?void 0:n.avatar);return i().createElement("div",{className:"lazyLoading ".concat(r&&"lazyLoadingMid")},i().createElement("div",{className:"lazyLoading_line lazyLoading_line_short"}),i().createElement("div",{className:"lazyLoading_line"}),i().createElement("div",{className:"lazyLoading_line"}))};return i().createElement(s.Z,{errorRender:i().createElement(i().Fragment,null)},i().createElement(o.Suspense,{fallback:f.loadIcon||i().createElement(w,null)},i().createElement(b,l({appContext:n},f,{ref:c,defaultConfig:t}))))})))},721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4754),o=n(1024),i=n.n(o),s=n(2872),a=n(1836),c=n(1990),u=n(4971),l=n(2403),f=n(4936);const h=(0,s.f3)((function(e){return{appContext:e.appContext}}))((0,s.Pi)((function(e){var t,n,s=e.appContext,h=e.message,p=e.index,d=(null==h||null===(t=h.ext)||void 0===t?void 0:t.senderType)===l.i4.USER;try{if(Number(h.type)===f.V$.JARVIS_TYPE&&h.content){var v,y,g=JSON.parse(h.content),m=g.componentMeta,_=void 0===m?"{}":m,b=g.componentConfig,w=void 0===b?"{}":b,x=JSON.parse(w)||{},O=JSON.parse(_)||{},E=O.name,S=O.version,k=null==E||null===(v=E.replace)||void 0===v?void 0:v.call(E,/@/g,""),C="//sf1-cdn-tos.toutiaostatic.com/obj/unpkg";if(h.component={code:O.componentCode,version:S,isRemote:!0,meta:O,config:x,component:{js:"".concat(C,"/").concat(k,"/").concat(S,"/lib/index.js"),css:"".concat(C,"/").concat(k,"/").concat(S,"/lib/index.css")}},"jarvis-component-auto-answer-react"===O.componentCode&&(h.component.code="jarvis-component-auto-answer-react",h.component.version="",h.component.isRemote=!1,h.expansion=(h.expansion||[]).filter((function(e){return"thumbs-up-down"!==e.code})),h.expansion.push({code:"thumbs-up-down",version:"",meta:{},config:{transferAfterHate:x.transferAfterHate}})),null!=h&&null!==(y=h.ext)&&void 0!==y&&y.jarvis_data)try{var I;h.jarvisData=JSON.parse(null==h||null===(I=h.ext)||void 0===I?void 0:I.jarvis_data)}catch(e){h.jarvisData={}}try{var P=JSON.parse(null==g?void 0:g.cdn);h.component.component=window.$isOversea?{js:"//".concat(P.sg.js),css:"//".concat(P.sg.css)}:{js:"//".concat(P.cn.js),css:"//".concat(P.cn.css)}}catch(e){h.hide=!0}}}catch(e){h.hide=!0,console.warn(e)}var T,A,j,R,M,B,D,L,N=(0,o.useMemo)((function(){var e,t,n=(h.user||{}).avatarType,r=void 0===n?"key":n;if(null!=s&&null!==(e=s.renderConfig)&&void 0!==e&&e.hideAvatar)return null;var o=null==s||null===(t=s.renderConfig)||void 0===t?void 0:t.avatars,u=d?"sender":"revicer";switch(r){case"key":return o&&o[u]?i().createElement(a.Avatar,{src:o[u],className:"avatarSpanReply"}):null;case"url":return i().createElement(a.Avatar,{src:u,className:"avatarSpanReply",style:{width:"24px"}});default:return i().createElement(c.Z,{className:"avatarSpanReply",message:h,config:u})}}),[]);return i().createElement("div",{className:"replyContainer"},i().createElement("div",{className:"emptyMask"}),i().createElement("div",{className:"avatarNameTime"},N,i().createElement("div",{className:"messageName"},d?r.oc.t("i",{},"我"):r.oc.t("[customer_service]",{},"【客服】")),i().createElement("div",{className:"messageTime"},(T=h.createdAt,A=Date.now(),(j=new Date(T)).getFullYear(),R=j.getMonth(),M=j.getDate(),B=j.getHours(),D=j.getMinutes(),L=function(e){return e>9?e:"0".concat(e)},A-T<864e5?"".concat(L(B),":").concat(L(D)):"".concat(L(R+1),"-").concat(L(M)," ").concat(L(B),":").concat(L(D))))),i().createElement("div",{className:"messageWrapper"},Number(h.type)===f.V$.JARVIS_TYPE&&h.component?i().createElement(c.Z,{appContext:s,config:h.component,message:h}):null!=h&&null!==(n=h.ext)&&void 0!==n&&n["s:invisible"]?i().createElement("div",{style:{color:"#999"}},r.oc.t("you_deleted_a_message",{},"你删除了一条消息")):i().createElement(u.Z,{appContext:s,message:h})),0===p&&i().createElement("div",{className:"line"}))})))},5111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>X});var r=n(8788),o=n(5995),i=n(7097),s=n(1158),a=n(4754),c=n(2872),u=n(1024),l=n.n(u),f=n(1836),h=n(7856),p=n.n(h),d=/((?:http:\/\/|https:\/\/|sslocal:\/\/)(?:(?:\w|=|\?|\.|\/|&|-|%|@|#)+))/;function v(e){var t=document.createElement("div");t.innerHTML=p().sanitize(e,{ADD_ATTR:["target"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx|lark|sslocal|aweme):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return function e(t){[].forEach.call(t,(function(t){if(t.hasChildNodes())e(t.childNodes);else if(t.nodeType===Node.TEXT_NODE&&t.textContent){var n;if(d.test(t.textContent)&&"a"!==(null===(n=t.parentNode)||void 0===n||null===(n=n.nodeName)||void 0===n?void 0:n.toLocaleLowerCase())){var r=t.textContent.split(d),o=document.createDocumentFragment();r.filter(Boolean).forEach((function(e){var t;d.test(e)?((t=document.createElement("a")).setAttribute("href",e),t.setAttribute("target","__blank"),t.innerHTML=e):t=document.createTextNode(e),o.appendChild(t)})),t.replaceWith(o)}}}))}(t.childNodes),t.innerHTML}var y={微笑:1,爱慕:2,惊呆:3,酷拽:4,抠鼻:5,流泪:6,发怒:7,呲牙:8,鼾睡:9,害羞:10,可爱:11,晕:12,衰:13,闭嘴:14,机智:15,来看我:16,灵光一闪:17,耶:18,捂脸:19,打脸:20,大笑:21,哈欠:22,震惊:23,送心:24,困:25,what:26,泣不成声:27,小鼓掌:28,大金牙:29,偷笑:30,石化:31,思考:32,吐血:33,可怜:34,嘘:35,撇嘴:36,黑线:37,笑哭:38,雾霾:39,奸笑:40,得意:41,憨笑:42,抓狂:43,泪奔:44,钱:45,吻:46,恐惧:47,笑:48,快哭了:49,翻白眼:50,互粉:51,赞:52,鼓掌:53,祈祷:54,kiss:55,去污粉:56,666:57,玫瑰:58,胡瓜:59,啤酒:60,我想静静:61,委屈:62,舔屏:63,鄙视:64,飞吻:65,再见:66,紫薇别走:67,听歌:68,求抱抱:69,周冬雨的凝视:70,马思纯的微笑:71,吐舌:72,呆无辜:73,看:74,白眼:75,熊吉:76,骷髅:77,黑脸:78,吃瓜群众:79,绿帽子:80,汗:81,摸头:82,皱眉:83,擦汗:84,红脸:85,尬笑:86,做鬼脸:87,强:88,如花:89,吐:90,惊喜:91,敲打:92,奋斗:93,吐彩虹:94,大哭:95,比心:96,加油:97,碰拳:98,ok:99,击掌:100,左上:101,握手:102,"18禁":103,刀:104,V5:105,给力:106,心:107,伤心:108,屎:109,礼物:110,蛋糕:111,撒花:112,不看:113,炸弹:114},g=Object.keys(y).reduce((function(e,t){return e["[".concat(t,"]")]=y[t],e}),{}),m=(Object.keys(y).reduce((function(e,t){return e[y[t]]="[".concat(t,"]"),e}),{}),function(e,t){var n=e.indexOf(t);return{firstWord:e.substring(0,n),lastWord:e.substring(n+t.length,e.length)}}),_=function(e,t){return'<img src="'.concat(t,'" style="height: ').concat(e,"px; width: ").concat(e,'px; margin: 0 2px; vertical-align: text-top;"/>')},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;if(!e)return"";var n=e.match(/\[\S+?\]/g);if(!n)return e;for(var r,o=[],i=0;i<n.length;i++){var s=n[i];if(g[s]){var a=m(e,s);a.firstWord&&o.push(a.firstWord);var c=(r=g[s],window.$isOversea?"https://lf16-oversea.goofy-cdn.com/obj/goofy-sg/cg/ngcc/linkchat_static/emoji/im_mobile_emoji_icon_".concat(r,".png"):"https://lf3-cdn-tos.bytegoofy.com/obj/goofy/cg/ngcc/linkchat_static/emoji/im_mobile_emoji_icon_".concat(r,".png"));o.push(_(t,c)),e=a.lastWord}}return e&&o.push(e),o.join("")};const w="notice-bar_ntOPr",x="notice-bar-pc_KBLJX",O="left-notice-icon_lSN2J",E="vertical-title_wF+r4",S="notice-bar-swiper_mIqpc",k="detail-btn_28HSv",C="close_htbKD",I="list-content_Xihjm",P="list-content-title_xgWDG",T="list-content-close_wAdhU",A="list_HFr5X",j="items_vceUn",R="items-title_FiKK2",M="items-icon_WiRK1",B="items-divider_43-zK",D="detail-content_Kj5K2",L="detail-content-title_0Nc4E",N="detail-content-close_5lYAr",F="detail-content-right_5QFGD",U="container_l7SYv",G="contentTitle_cQfWQ";function H(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=(0,n(7609).dD)(),W=z.bid,$=z.channel,Y=z.channelId,Z=z["secret-str"];const X=(0,c.f3)((function(e){return{appContext:e.appContext}}))((0,c.Pi)((function(e){var t,n,c,h,p,d=e.appContext,y=e.comStyles,g=e.fetchApi,m=e.track,_=V((0,u.useState)(!1),2),q=_[0],K=_[1],z=V((0,u.useState)(!1),2),X=z[0],J=z[1],Q=V((0,u.useState)(!1),2),ee=Q[0],te=Q[1],ne=V((0,u.useState)(),2),re=ne[0],oe=ne[1],ie=V((0,u.useState)({data:[]}),2),se=ie[0],ae=ie[1],ce=V((0,u.useState)(y),2),ue=ce[0],le=ce[1],fe=(0,u.useRef)(!1),he=(0,u.useRef)(null),pe=null==d?void 0:d.dialog,de=location.href.includes("help.html"),ve=se.data.map((function(e,t){return l().createElement(f.Swiper.Item,{key:t},l().createElement("div",{className:E},e.title))})),ye=(0,u.useCallback)((function(e){try{var t,n=e.target||e.srcElement;if(n&&n.getAttribute&&"img"===(null===(t=n.nodeName)||void 0===t?void 0:t.toLocaleLowerCase())){var r,o=(null==n?void 0:n.getAttribute("src"))||"";null!=d&&null!==(r=d.query)&&void 0!==r&&r.isPc?window.parent.postMessage({action:"previewImg",imgUrl:o},"*"):f.ImageViewer.show({image:o})}}catch(e){}}),[]);(0,u.useEffect)((function(){try{var e,t=Number(null==d||null===(e=d.dialogInfo)||void 0===e?void 0:e.id);fe.current||(de||t&&(null==d||!d.appLoading))&&function(){try{var e,t,n,r,o=3,i=Number(null==d||null===(e=d.dialogInfo)||void 0===e?void 0:e.type);de||(i===a.My.ROBOT&&(o=1),[a.My.AGENT,a.My.TRANING,a.My.OFFLINE].includes(i)&&(o=2));var s=null!=g?g:null==d||null===(t=d.utils)||void 0===t?void 0:t.fetch;s&&s("/api/im-session/im-post-config/query",{method:"GET",params:{scene:o,businessLineId:W,secretReferenceUserId:(null==d||null===(n=d.userInfo)||void 0===n?void 0:n.secretStr)||Z,channelId:$,entryId:Y,dialogId:(null==d||null===(r=d.dialogInfo)||void 0===r?void 0:r.id)||""}}).then((function(e){null!=e&&e.length&&ae({data:H(e)}),K(!(null==e||!e.length))}))}catch(e){}}()}catch(e){}}),[Number(null==d||null===(t=d.dialogInfo)||void 0===t?void 0:t.id),null==d?void 0:d.appLoading]),(0,u.useEffect)((function(){var e;if(!de){var t,n,r=Number(null==pe||null===(e=pe.ext)||void 0===e?void 0:e.status);r===a.Mc.ENDING&&(fe.current=!1),t=Number(r===a.Mc.QUEUEING),le({top:null!=d&&null!==(n=d.query)&&void 0!==n&&n.isPc?[50,80][t]:[12,42][t]})}}),[Number(null==pe||null===(n=pe.ext)||void 0===n?void 0:n.status)]);var ge=(0,u.useCallback)((function(e){var t;if(null!=e&&e.content||1===(null==se||null===(t=se.data)||void 0===t?void 0:t.length)){var n,r,o,i,s;oe(null!=e?e:se.data[0]),te(!0);var a={noticeName:null!==(n=null==e?void 0:e.title)&&void 0!==n?n:se.data[0].title,channelDetailID:Y,businessLineId:W,channelID:$,userId:null==d||null===(r=d.ext)||void 0===r?void 0:r.userId,dialogId:null==d||null===(o=d.dialog)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.dialogId,createTime:String(Date.now())};location.href.indexOf("help.html")>-1&&delete a.dialogId,null===(i=null!=m?m:null==d||null===(s=d.utils)||void 0===s?void 0:s.$track)||void 0===i||i({event:"botNotificationClicks",params:a})}else J(!0)}),[se]),me=(0,u.useCallback)((function(){K(!1),fe.current=!0}),[]);return q?l().createElement("div",{className:null!=d&&null!==(c=d.query)&&void 0!==c&&c.isPc?x:w,style:ue},l().createElement(s.Z,{className:de?O:"",theme:"filled",size:"15",fill:"#338AFF"}),l().createElement(f.Swiper,{className:S,direction:"vertical",loop:!0,style:{"--height":"40px","--width":"65%"},indicator:function(){return null},autoplay:(null==se||null===(h=se.data)||void 0===h?void 0:h.length)>1},ve),l().createElement("div",{className:k,onClick:function(){return ge()}},a.oc.t("details",{},"详情")),l().createElement("div",{className:C,onClick:me},l().createElement(i.Z,{theme:"outline",size:"12",fill:"#333"})),l().createElement(f.Popup,{visible:X,onMaskClick:function(){J(!1)},bodyStyle:{maxHeight:"86vh",borderRadius:"12px 12px 0 0"}},l().createElement("div",{ref:he,className:I},l().createElement("div",{className:P},a.oc.t("announcement",{},"公告")),l().createElement(i.Z,{onClick:function(){return J(!1)},className:T,theme:"outline",size:"16",fill:"#333",strokeWidth:5}),l().createElement("div",{className:A},se.data.length&&se.data.map((function(e,t){return l().createElement("div",{className:j,onClick:function(){ge(e)}},l().createElement("div",{className:R},e.title),l().createElement(o.Z,{className:M,theme:"outline",size:"18",fill:"#969AA0",strokeWidth:3}),t!==se.data.length-1&&l().createElement("div",{className:B}))}))))),l().createElement(f.Popup,{visible:ee,onMaskClick:function(){te(!1)},bodyStyle:{minHeight:"".concat((null==he||null===(p=he.current)||void 0===p?void 0:p.clientHeight)||0,"px"),maxHeight:"86vh",borderRadius:"12px 12px 0 0"}},l().createElement("div",{className:D},l().createElement("div",{className:L},a.oc.t("announcement",{},"公告")),l().createElement(r.Z,{onClick:function(){return te(!1)},className:F,theme:"outline",size:"23",fill:"#333",strokeWidth:4}),l().createElement(i.Z,{onClick:function(){J(!1),te(!1)},className:N,theme:"outline",size:"16",fill:"#333",strokeWidth:5}),l().createElement("div",{onClick:ye,className:U},l().createElement("div",{className:G},null==re?void 0:re.title),l().createElement(f.RichText,{content:v(b(null==re?void 0:re.content,14)),options:{ADD_ATTR:["target"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx|lark|sslocal|aweme):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}}))))):null})))},6064:(e,t,n)=>{"use strict";n.d(t,{v:()=>Vr,Z:()=>qr});var r=n(2872),o=n(1024),i=n.n(o),s=n(9364),a=n(4754),c=n(1836);const u="linkchat-pro-";var l=n(8197),f=n(8322);const h=(0,r.f3)((function(e){return{themes:e.appContext.themes}}))((0,r.Pi)((function(e){var t=e.themes,n=(0,o.useRef)(document.createElement("style")),r=(0,o.useMemo)((function(){var e="";t&&Object.keys(t).forEach((function(n){e+="--".concat(n,": ").concat(t[n],";")}));return":root:root{".concat(e,"}")}),[t]);return(0,o.useEffect)((function(){n.current.id="linkchat-pro-in-styles",n.current.type="text/css"}),[]),(0,o.useEffect)((function(){return n.current.innerText=r,document.head.appendChild(n.current),function(){try{n.current.innerText="",document.head.removeChild(n.current)}catch(e){}}}),[r]),null})));var p=n(8904);const d={"[微笑]":1,"[爱慕]":2,"[惊呆]":3,"[酷拽]":4,"[抠鼻]":5,"[流泪]":6,"[发怒]":7,"[呲牙]":8,"[鼾睡]":9,"[害羞]":10,"[可爱]":11,"[晕]":12,"[衰]":13,"[闭嘴]":14,"[机智]":15,"[来看我]":16,"[灵光一闪]":17,"[耶]":18,"[捂脸]":19,"[打脸]":20,"[大笑]":21,"[哈欠]":22,"[震惊]":23,"[送心]":24,"[困]":25,"[what]":26,"[泣不成声]":27,"[小鼓掌]":28,"[大金牙]":29,"[偷笑]":30,"[石化]":31,"[思考]":32,"[吐血]":33,"[可怜]":34,"[嘘]":35,"[撇嘴]":36,"[黑线]":37,"[笑哭]":38,"[雾霾]":39,"[奸笑]":40,"[得意]":41,"[憨笑]":42,"[抓狂]":43,"[泪奔]":44,"[钱]":45,"[吻]":46,"[恐惧]":47,"[笑]":48,"[快哭了]":49,"[翻白眼]":50,"[互粉]":51,"[赞]":52,"[鼓掌]":53,"[祈祷]":54,"[kiss]":55,"[去污粉]":56,"[666]":57,"[玫瑰]":58,"[胡瓜]":59,"[啤酒]":60,"[我想静静]":61,"[委屈]":62,"[舔屏]":63,"[鄙视]":64,"[飞吻]":65,"[再见]":66,"[紫薇别走]":67,"[听歌]":68,"[求抱抱]":69,"[周冬雨的凝视]":70,"[马思纯的微笑]":71,"[吐舌]":72,"[呆无辜]":73,"[看]":74,"[白眼]":75,"[熊吉]":76,"[骷髅]":77,"[黑脸]":78,"[吃瓜群众]":79,"[绿帽子]":80,"[汗]":81,"[摸头]":82,"[皱眉]":83,"[擦汗]":84,"[红脸]":85,"[尬笑]":86,"[做鬼脸]":87,"[强]":88,"[如花]":89,"[吐]":90,"[惊喜]":91,"[敲打]":92,"[奋斗]":93,"[吐彩虹]":94,"[大哭]":95,"[比心]":96,"[加油]":97,"[碰拳]":98,"[ok]":99,"[击掌]":100,"[左上]":101,"[握手]":102,"[18禁]":103,"[刀]":104,"[V5]":105,"[给力]":106,"[心]":107,"[伤心]":108,"[屎]":109,"[礼物]":110,"[蛋糕]":111,"[撒花]":112,"[不看]":113,"[炸弹]":114};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){if(d.hasOwnProperty(e)){var t=d[e];return"emoji-icon__".concat(t)}},m=["type"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const w=function(e){var t=e.type,n=b(e,m);return i().createElement("i",_({className:(0,p.Z)("emoji-icon",t)},n))};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=[19,21,8,2,6,10,17,7,5,4,18,11,15,20,38,61,44,52,54,58,1,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,9,39,40,41,42,43,3,45,46,47,48,49,50,51,83,84,85,87,86,81,90,91,82,16,62,63,64,65,67,94,68,69,70,71,92,80,66,79,88,89,93,13,14,12,95,101,53,102,96,97,98,99,100,55,56,57,59,112,60,107,108,109,103,72,73,74,75,76,113,78,77,114,111,110,104,105,106],C=function(){for(var e=[],t=0,n=Object.entries(d);t<n.length;t++){var r=v(n[t],2),o=r[0];e[r[1]-1]={key:o,emoji:g(o)}}return e}();const I=function(e){var t,n=e.onClick,r=e.quickHidden,o=e.style,s=void 0===o?{}:o,c=e.query,l=void 0===c?{}:c,h=function(e){if("function"==typeof n){var t=e.replace(/\[(\S+?)\]/,"$1");n("[".concat(a.oc.t(t,{},t),"]"))}};return i().createElement("div",{className:(0,f.er)((t={},S(t,"".concat(u,"EmojiPanel"),!0),S(t,"hasQuickBtnGroup",!r),t),l.isPc),style:E({},s)},k.map((function(e){var t=e-1,n=C[t];return i().createElement("div",{key:t,onClick:function(){return h(n.key)},className:"emojiItem"},i().createElement(w,{type:n.emoji,alt:n.key}))})),Array.from({length:30}).map((function(e,t){return i().createElement("i",{key:"place-".concat(t)})})))};var P=n(1990);function T(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=i().forwardRef((function(e,t){var n=(0,o.useRef)([]),r=A((0,o.useState)(0),2),s=r[0],a=r[1];(0,o.useImperativeHandle)(t,(function(){return{render:function(e){n.current=[].concat(T(n.current),[e]),a(n.current.length)}}}),[]);var c=(0,o.useMemo)((function(){return n.current.map((function(e,t){return i().createElement(P.Z,{key:"".concat(e.code,"__").concat(t),config:e})}))}),[s]),u=(0,o.useMemo)((function(){return{position:"fixed",zIndex:100}}),[]);return i().createElement("div",{style:u},c)}));const B=M;var D=n(7977),L=n(1855),N=n(5267),F=function(e){return e.chatPro="chatProRender",e.lazyComponent="lazyComponent",e.inputWrapper="inputWrapper",e.autoComplete="autoComplete",e}({}),U="input",G="quickButton",H=n(7609),V={passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e},smoothScroll:function(){return"scrollBehavior"in document.documentElement.style},touch:function(){return"ontouchstart"in window},mouse:function(){return"onmousedown"in window}};function q(e){return V[e]()}var K=n(7763),z=n.n(K);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function $(){$=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==W(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(W(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===W(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){J(i,r,o,s,a,"next",e)}function a(e){J(i,r,o,s,a,"throw",e)}s(void 0)}))}}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ne=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t,n,r=e.keywords,s=e.appContext,a=e.onChange,c=(0,o.useRef)(r),l=(0,o.useRef)(0),h=ee((0,o.useState)({}),2),p=h[0],d=h[1],v=(0,o.useCallback)(function(){var e=Q($().mark((function e(t){var n,o,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=s&&null!==(n=s.autoComplete)&&void 0!==n&&n.getData){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,s.autoComplete.getData(t,s);case 5:o=e.sent,p&&r===t&&d(Z({keywords:t},o)),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),null==s||null===(i=s.logger)||void 0===i||i.error(F.autoComplete,{title:F.autoComplete,info:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[r,s]),y=function(e){var t,n;return null!=s&&null!==(t=s.autoComplete)&&void 0!==t&&t.labelKey?e[null==s||null===(n=s.autoComplete)||void 0===n?void 0:n.labelKey]:null},g=(0,o.useCallback)((function(e){return Q($().mark((function t(){var n,o,i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null==s||null===(n=s.autoComplete)||void 0===n?void 0:n.onClick,!t.t0){t.next=5;break}return t.next=4,null==s||null===(o=s.autoComplete)||void 0===o?void 0:o.onClick(s,Z(Z({},e),{},{robotMessageType:14}));case 4:t.t0=t.sent;case 5:t.t0?a():((i=y(e))&&a(i),c.current=r),d({list:[]});case 8:case"end":return t.stop()}}),t)})))}),[a,s,r]);return(0,o.useEffect)((function(){l.current&&clearTimeout(l.current),c.current!==r&&(r?l.current=window.setTimeout((function(){return v(r)}),400):d({}))}),[r]),null!==(t=p.list)&&void 0!==t&&t.length&&r?i().createElement("div",{className:(0,f.er)(X({},"".concat(u,"AutoComplete"),!0),null==s||null===(n=s.query)||void 0===n?void 0:n.isPc)},p.list.map((function(e,t){var n;return i().createElement("li",{className:"AutoCompleteLine",key:y(e)||t,onClick:g(e)},i().createElement(z(),{highlightClassName:"AutoCompleteLineLight",searchWords:(null===(n=p.keywords)||void 0===n?void 0:n.split(""))||[""],autoEscape:!0,textToHighlight:y(e)}))}))):null})));function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie,se,ae,ce=(ie=[],se="",ae=function(e){se=e,ie.forEach((function(e){e(se)}))},function(){var e=re((0,o.useState)(""),2)[1];return(0,o.useEffect)((function(){ie.push(e)}),[]),[se,ae]}),ue=n(466),le=n(1158),fe=n(6810),he=n(416),pe=n(7584),de=n.n(pe);n(1568),n(7538),n(185),n(4545);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(){ge=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ve(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ve(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function me(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){me(i,r,o,s,a,"next",e)}function a(e){me(i,r,o,s,a,"throw",e)}s(void 0)}))}}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=0,Oe=null,Ee=function(){var e=be((0,o.useState)(10),2),t=e[0],n=e[1];return(0,o.useEffect)((function(){var e=window.setInterval((function(){n((function(e){return e>1?e-1:e}))}),1e3);return function(){window.clearInterval(e)}}),[]),i().createElement("span",null,a.oc.t("{count}_seconds_left",{count:t},"还剩 {count} 秒"))},Se=window.navigator.userAgent,ke=function(){try{var e=Se.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(!e)return!0;var t=e[1].replace(/_/g,".");return/Safari/.test(Se)||t>="14.3"&&"16.0.2"!==t}catch(e){return!0}},Ce=function(){try{return!/ManyHouseF101/.test(Se)||Se.match(/ManyHouseF101\/(.*?)\s/)[1]>="3.8.0"}catch(e){return!0}};const Ie=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t,n=e.appContext,r=(0,o.useRef)(!1),s=be((0,o.useState)(r.current),2),l=s[0],h=s[1],p=(0,o.useCallback)((function(e){h(e),r.current=e}),[]),d=(0,o.useRef)(null),v=be((0,o.useState)(null),2),y=v[0],g=v[1],m=be((0,o.useState)(!1),2),_=m[0],b=m[1],w=(0,o.useRef)(null),x=(0,o.useRef)(null),O=be((0,o.useState)(!1),2),E=O[0],S=O[1],k=(0,o.useRef)(!1),C=(0,o.useRef)(!1),I=be((0,o.useState)(!1),2),P=I[0],T=I[1],A=be((0,o.useState)("0:00"),2),j=A[0],R=A[1],M=(0,o.useRef)(0),B=(0,o.useCallback)((function(){M.current>=D.current||(M.current+=1,z({width:"".concat(M.current/D.current*100,"%")}),W(M.current,!1))}),[M]),D=(0,o.useRef)(0),L=be((0,o.useState)("0:00"),2),N=L[0],F=L[1],U=be((0,o.useState)(!0),2),G=U[0],H=U[1],V=(0,o.useRef)(null),q=be((0,o.useState)({width:"0px"}),2),K=q[0],z=q[1],W=function(e,t){t&&(D.current=Math.floor(e));var n=Math.floor(e/60),r=Math.floor(e%60),o="".concat(n,":").concat(r>=10?r:"0"+r);t?F(o):R(o)},$=function(){J(!0),W(0,!1),z({width:"0px"}),M.current=0},Y=null,Z=function(){var e=_e(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke()){e.next=3;break}return c.Toast.show(a.oc.t("the_current_ios_system_does_not_support_voice_sending_function__please_upgrade_t",{},"当前iOS系统暂不支持语音发送功能，请升级系统版本")),e.abrupt("return");case 3:if(Ce()){e.next=6;break}return c.Toast.show(a.oc.t("the_current_app_version_does_not_support_voice_sending_function__please_upgrade_",{},"当前App版本不支持语音发送功能，请升级至最新版本")),e.abrupt("return");case 6:if(t.preventDefault(),!d.current){e.next=9;break}return e.abrupt("return");case 9:xe=(new Date).getTime(),C.current=!0,n=de()({type:"wav",sampleRate:16e3,bitRate:16,onProcess:function(e,t,n,r){Y&&Y.input(e[e.length-1],t,r)}}),d.current=n,n.open((function(){if(k.current=!0,!C.current&&d.current)return d.current.close(),d.current=null,void p(!1);p(!0),setTimeout((function(){Y=de().FrequencyHistogramView({elem:".ripple-container-content",position:0,linear:[0,"#338AFF"],stripeEnable:!1,lineCount:50,mirrorEnable:!0})}),300),d.current.start();var e=60,t=setInterval((function(){--e<0||!r.current?(X(),clearInterval(t),clearInterval(y),g(null)):e<=10&&b(!0)}),1e3);g(t)}),(function(e,t){if(t){if(k.current=!1,Oe)return;Oe=c.Dialog.alert({content:a.oc.t("the_recording_permission_is_not_turned_on__please_go_to_the_settings_page_to_tur",{},"录音权限未开启，请前往设置页面开启"),onConfirm:(r=_e(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.close(),d.current=null,p(!1),Oe=null;case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})})}var r}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){e&&e.preventDefault(),clearInterval(y),g(null),b(!1),C.current=!1;var t=(new Date).getTime();if(d.current&&k.current){if(t-xe<1e3&&d)return c.Toast.show(a.oc.t("the_recording_time_is_too_short__please_re_record",{},"录音时间太短，请重新录制")),null==d||d.current.close(),d.current=null,void p(!1);var n;if(r.current)p(!1),null===(n=d.current)||void 0===n||n.stop(function(){var e=_e(ge().mark((function e(t,n){var r,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.current.close(),d.current=null,r=new File([t],"audio_".concat((new Date).getTime()),{type:t.type}),!(n<1e3)){e.next=6;break}return c.Toast.show(a.oc.t("the_recording_time_is_too_short__please_re_record",{},"录音时间太短，请重新录制")),e.abrupt("return");case 6:w.current=r,S(!0),(o=new Audio).src=(window.URL||webkitURL).createObjectURL(t),W(Number(n)/1e3,!0),x.current=o,o.ondurationchange=function(){W(o.duration,!0)},o.onended=function(){setTimeout((function(){$()}),500)};case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),(function(e){d.current.close(),d.current=null}))}},J=function(e){T(!e&&!P),P||e?(x.current.pause(),clearInterval(V.current),V.current=null):(x.current.play(),V.current=window.setInterval((function(){B()}),1e3))},Q=function(){x.current.muted=!!G,H(!G)},ee=(0,o.useRef)();return(0,o.useEffect)((function(){var e;_?ee.current=c.Toast.show({content:i().createElement(Ee,null),duration:1e4}):null===(e=ee.current)||void 0===e||e.close()}),[_]),(0,o.useEffect)((function(){return document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",function(){document.body.style.userSelect="",document.body.style.webkitUserSelect=""}}),[]),i().createElement(i().Fragment,null,i().createElement("div",{className:(0,f.er)(ye({},"".concat(u,"AudioWrapper"),!0),null==n||null===(t=n.query)||void 0===t?void 0:t.isPc)},i().createElement("div",{className:"recorder-btn",onMouseDown:Z,onMouseUp:X,onMouseLeave:X,onTouchStart:Z,onTouchEnd:X,onTouchCancel:X},i().createElement("div",{className:"recorder-btn-trigger"}),i().createElement("div",{className:l?"pull-up":"pull-down"})),l&&i().createElement("div",{className:"ripple-container ".concat(l?"":"ripple-container-no")},i().createElement("p",{className:"ripple-container-tip"},a.oc.t("please_speak",{},"请说话")),i().createElement("div",{className:"ripple-container-content"})),E&&i().createElement("div",{className:"record-done-container"},i().createElement("p",{className:"ripple-container-tip"},a.oc.t("whether_to_send",{},"是否发送")),i().createElement("div",{className:"record-play"},i().createElement("img",{onClick:function(){return J()},className:"audio-icon",src:P?he.Z:fe.Z}),i().createElement("p",{className:"time-container"},i().createElement("span",null,j),"/",i().createElement("span",null,N)),i().createElement("div",{className:"time-line"},i().createElement("div",{className:"played-line",style:K})),G?i().createElement(le.Z,{onClick:Q,theme:"filled",size:"14",fill:"#666"}):i().createElement(ue.Z,{onClick:Q,theme:"filled",size:"14",fill:"#666"})),i().createElement("div",{className:"btn-container"},i().createElement(c.Button,{onClick:function(){$(),S(!1)},className:"cancel-btn",color:"default"},a.oc.t("close_dialog_cancel_text",{},"取消")),i().createElement(c.Button,{onClick:function(){$();var e=c.Toast.show({content:a.oc.t("voice_sending___",{},"语音发送中..."),duration:3e4}),t=new FormData;t.append("file",w.current),t.append("userId",n.ext.imUserId),n.utils.fetch("/api/im-message/file/uploadMedia",{method:"POST",transformRequest:[function(e,t){return delete t.post["Content-Type"],e}],data:t}).then(function(){var t=_e(ge().mark((function t(r){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==r||!r.vid){t.next=5;break}return t.next=3,n.triggerEvent("send-audio-message",{vid:null==r?void 0:r.vid,filename:null==r?void 0:r.fileName,duration:D.current});case 3:t.next=6;break;case 5:c.Toast.show(a.oc.t("voice_sending_failed__please_try_again_later",{},"语音发送失败，请稍后重试"));case 6:e.close();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.close(),c.Toast.show(a.oc.t("voice_sending_failed__please_try_again_later",{},"语音发送失败，请稍后重试"))})),S(!1)},className:"send-btn",color:"default"},a.oc.t("send_voice",{},"发送语音"))))))})));function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Te(){Te=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Pe(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Pe(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ae(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Ae(i,r,o,s,a,"next",e)}function a(e){Ae(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){return["doc","docx"].some((function(t){return e.indexOf(t)>-1}))},De=function(e){return["pdf"].some((function(t){return e.indexOf(t)>-1}))},Le=function(e){return["xls","xlsx","csv"].some((function(t){return e.indexOf(t)>-1}))},Ne=function(e){return["ppt","pptx"].some((function(t){return e.indexOf(t)>-1}))},Fe=function(e){return["txt"].some((function(t){return e.indexOf(t)>-1}))},Ue=function(e){return["png","jpg","jpeg","apng","gif","webp","mp4","mp3","mov","avi","webm","mkv","wav"].some((function(t){return e.indexOf(t)>-1}))},Ge=function(e){var t=e.name;if(!t)return"Folder";var n=t.split(".")[1]||"";return Be(n)?"doc":De(n)?"pdf":Le(n)?"xls":Ne(n)?"ppt":Fe(n)?"txt":Ue(n)?"img":"Folder"};const He=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t=e.files,n=e.appContext,r=e.show,s=e.onHandler,u=Re((0,o.useState)(!1),2),l=u[0],f=u[1],h=Re((0,o.useState)(r),2),p=h[0],d=h[1],v=Re((0,o.useState)([]),2),y=v[0],g=v[1],m=Re((0,o.useState)(a.oc.t("linkchat_file_tile",{},"发送文件")),2),_=m[0],b=m[1],w=(0,o.useRef)();w.current=function(){E()};var x=(0,o.useCallback)((function(e){var t;13===(e||window.event).keyCode&&(w&&(null==w||null===(t=w.current)||void 0===t||t.call(w)))}),[]),O=function(){var e=je(Te().mark((function e(t){var n,r,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.Tv.CommonFile,t.type.includes("image")&&(n=a.Tv.Image),t.type.includes("video")&&(n=a.Tv.Video),t.subType=n,t.ext=Ge(t),t.invokeSrc=URL.createObjectURL(t),e.t0=t.subType,e.next=e.t0===a.Tv.Image?9:e.t0===a.Tv.Video?27:45;break;case 9:if(t.headerTitle=a.oc.t("send_photo",{},"发送照片"),!(t.size>314572800)){e.next=13;break}return t.errorMessage=a.oc.t("sending_pictures_supports_a_maximum_of_300m__exceeding_the_limit!",{},"发送图片最大支持300M，超出限制！"),e.abrupt("return",t);case 13:return e.next=15,(0,H.Dk)(t);case 15:if(!(r=e.sent).isError){e.next=23;break}return t.errorMessage=a.oc.t("abnormal_image_loading",{},"图片加载异常"),URL.revokeObjectURL(t.invokeSrc),t.invokeSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAMAAACYaRRsAAAC91BMVEUAAAD4+P/X2+Lw9PXt7vHy9PXt7/Ho6e/X2+Lw8/Xw8vXx9Pfd4unX2+LX2+LX3OPZ3ePk6uzw8/X/NkAjGBXY3eT/PkvX2+LX2+Lx8vXX2+LX3OLY2+Pa3eT/RFTKSFTW2uHX2+L/NkD/N0D/NkHX2+LY2+LY2+PY3OTc4OfX2+IkGRbX2+Lw8/UkGBXw8/XX3OLY3OP/OELw9Pfy+Pjv8fbw8/Tw8/XX2+L/NkDw8/Xw8/XX2+IjGBXw8/T/NkD/N0HX3OPw8/YlGhbx9fX/OUX/OkNHPz0lGRf/N0DW2+HX2+L/N0HX2+L/N0DW2+LX2+Lw8/X/NkHw9Pb/N0HX2+Pw8/X/N0L/OEMjGBXW2+L/NkDX2uHW2uLX2+IjGRbw8/XY3OL/NkHX2+L/N0H/NkL/OEH/OET/OEbw8/QkGRYlGhclHRY4MC9GPTz2oafv8vVJQT/Excvw8vTx8/YlGRYkGRfkp68kGRbv8vTW2uH/NkAAXf8jGBX////9/f7z9fbu8fPa3uTf4+j6+/zp7O/k5+snHRr4+fr19vjY3OPc4OYxKCbs7/Lm6e3i5eosIR/2+PmioKLBw8i0tLg/NjTr7vDo6u6/wMKHhISVk5SCfoD+Rk/HyM2ur7KcmpyMiYv/O0X//PzS1tzx1tmRj5F9eXr+TFVSSkr/QElFPTw4LizMztJvamtqZGRXUE9OR0XP0tl7dnZmYGBJQT/n6evg4uPT1NW5ub3/r7Oqqq+npqj8goj6eYB1cXH8Ymv+W2NiWlptofqLtPjc3uD/293yur9eV1X/7e7yy8/zwMT3i5L+dHr+Z2/+VV4Uaf4DX/670vbv6+3/4+TY2dv/u7/1qa//naL2mqD/kZb/ipD+bXRNRUQmdf00fvxFift8q/n/9/jw3+P/09X0sbX/oqf3jpRLREIdcP1RkPuqx/fU4vXS4fXO3vXj6/Tbxs7/qq+tq6v/lpzxbXZjm/qdv/fv5+nY0dn/y87dvsbdu8PftbzmmKGbpBoSAAAAeXRSTlMABP6bHF0gD/jb3loX8qaSQQr59Ns4EOzTn5yLWCgIBP79/MOkg19QSi/Mxbm2fHVxZmREJRfw5NzY0sfHt6aYbmtVODMuKRP16+jk0L+ysK2VkIaFfmVNQvDh4NjDs6mDenh3YFc7Nh7qmkgi69LQsaWSjG5oZF1bi9jcFAAAC9BJREFUeNrs2VtIU3EcB/D/zEq6qIViV9KHLLMsqSgqgzIoiiiIHoqu9NSV7vT/4V8353Y2t+ncxdtwDsZEnKamlhgEVtBjBT12eyuCgqDeO2er/ju7/v/ueFrRB/awtz+//f7n9/2dof/+cdka9PfILs0tgkL0d5i9Km8rSFaizKfJX7mjBH7agTLc8g2n5kOEnNkoc20uzd0P0VahzDR7dd4iiCcPZR5N4dGTOZDACZRhlu86NB+SmYcyx7xlSw5AKqUoMyxYvXQRsMhFf56m8OzBHGC0H/1hsyoPzwceZUhl8qY9Drw2oD9jQf7SNVkwBWuR+jRl59bmwBTNVztiZleKMTEd+UgVNCamg0bMFUh06eLtitNVVVXl5SuQcmhMXFMCaaERs/rCseqKqmNEtK9AghRWtoE2bbpK9lYUEFJOyLGqijvVexGl5G6jnP6efaSg4hKqqKZtoGjTngAl+T1WcvkiUhzdbZQ13kfc3VuRwuaV0t1GUcUdguApBshWfFWgu42S/JPE7QJRpQqrggKGe8ldP0hyVVgV0tfVR+5BWJHyq4Ly/EPEB7+UpbkqZMH0u0s89Mu5tFYFVfjICFBTipizdh0uArU4hVE/UDmaNFYFVUwSF0TK514V1DVBBkBmKUc4yAH1Ddn7QWYNe32Xg/qc0QWGktmI2QFQnYeMQ5RliNkSUJ27D6ItQcyWgdr85C5E44iY80Bt43QoU7MQs0Wgsm4y0e8c93pdrvZhCOOKmEtBTf3ewCCxk1+s7sGeCenYhxGz1aAaZ8cokbx+5PF1dgZ8noHJ11ZChF5HcRHHqFNpdHT5XhMSHAh4u4kDIrR3jthJMMARJw4Co/omff2UiztCiHVgolg6IekBueFONylEzM4Co2aMsc5g1DfyV3dAIJPiacOCvRDN33NlL2JVCIyaMMZmU50Z25qa67M4LtojgQy6IsK7fRhikALmE2sYl7csbKqrra2ta8EhzKWeCJIhL0RwkI54D7vTiNVhSE46l6VNWycetqFFiyPY2potKU5d3EOsDpDrs8Yp8TVSjRhVQhL61pY6o65BLG2DyYzjaU12F52vSW8XRHHQa0dd33eBeTuCeGhZzeJH21RvxAkkuYsOu/RuJ0YveQjRFpWXI1bH4/XBz7LqjI1g0IPIgFOIvYvdQtALcXQFrc6YK1JewB8xaR+Y60JltQClwywiS91J3F0Ql0twt4Ocf99pvohJx0OoD1pa9SBTj9nQu+gjfTHnpbW3eqMb+xZ7xKQ/ZKvpVx9E02M+rT4y2g8Jea1CACj/sNu6FzFbA79o67RtlgRjg0836TUmm4tONxly/W6RD4Okc/lUImbiCdaKubQLo2Px7iI13GMnfR0TTqcrlDjvwS7ELJ9lzoWEp3MdTuWV1fpK1iDxSu18FCQh9hFnB8AhRSOmBUu0LQ2hgafFyY2NCu1x72J91LFd3R5P4KEfRFx/iq5liWrmcJYwaXFKI8SRcMaIkzFB43FEzHNJiwuQ1WwOH9aMWQTIPbYnn9xRxKwMEhAHckOtgQYfJg+EIRumkg10WbEPIlaaIoiV1Rx+KGNjrUmnxex0vUI/ZtcqtTZIchYgVrmJco/BIpWZa2p0Eh/mpTOAaDViVinPPVjKPSZb8+8uM2JmD+wfbJifUW9pzEMUe8K0tEilxU2yjGvAzAaFLjxFC6+e2b1Jg5hspa0r9oEeougwK3H/wWlZuH3GzY3zUCp5QE8MVHRSo8MuwS0cC7oNWAFb1h2ZW5as2KtSTY0wOuzMOC4feYgVs3Db4vUbN6O4ZpekWvAlWnND8ifyU/sQVtr5dTdm7tHESZhJ2LDIbEo97B6RdqwoWuyd6zdmowgrIRFLU+Pv0JNiMj8VnuHplDphNjbrxGlnZp3MPTwFTvPAmtiEqTeEV9E21tBz3z6Ip1WShFnfhH+uollSC7PpION4WqFIG4Cy/Uw9jeHDM44Ng/UDnlZzEibMFrqKcuzLDtKNp9ViJFMEslWUf18eshsxn8+P33588+7JF8xmZrKIyb8vO8kA5mJ7/KIm5Pl3zGQWkilNuC+z4B8atnc1vz3BzC1MZSfcl5kYrH2Yy+Ma6sUnzNzC1ImUyUcrTudE4+MrCWAen8V+oN5wtjCNmLHasCj1K4lJ4T7m8b5GhqWF2SJmltbE8krivjCCubytkXnJ0MIMEdMS2vBZXkk4iBdz+Vgj8569hakdsa8kpL82tCzBZ9I+hrm8qZH5xt/C8oipb6kN76Jsw2DMPoL5vKuReczfwvKIWf+jejsLbSII4wA+krba+KSBgIgppH0VpV5UwQtbqIjiLYgi4vnko4yfuxBFBVGUqnjFI6Ea4009g4mJ2sbWHlpr7QWi1goeeIL3g43XpHGPmf3WZf1BHwp9mC7/75v5spPULMo/MO+UyqiYG2sZnk7s1HvFuFloYK6QKqmYV7fXpnn2UiDCzEKlgZnL8fNU1PO1zO2XIhFmhiptGzwqpQoq7MadP+ttpCIRZgYZfbVRud/IbNT44FceXlBdTqJossLA/C81Prx+/cYLymEA56eYm6lNsAhrHzHXU5vI4bzFtpHag5P3FtsGag8swjpHTB+1h2zOW2zrqE3kEBW9+9iy5pxE1YKMbcMeBhBVszMmfHvI5rjFxiZ8X+qnPNlaG43VxaK1rclyy0sxR/cWG5vwa2r9Na3xAKQL1LfWYBZ9b//BSirASTRM63FUS8ZBRehpOTXqoCRJJ84ducy7LTmIhglrmGQCtMRvUYO2XT58LXVX4vipQwfY8Uo/wtpHzNfvQU/iFjXu3tv9Z7ZL0vZjR69coppyuL4o8S0AHGKPKYbvZNnV85skaQvV4OS5xfbxPfAJ36dYu/fsO31z786LVIWD4xbb6xBwi92leLskSdp1et+eC/Rv2fq32L74QUDDY4p3cefem6kL8eevlp30Ua4IsyPm1zAICZVTc1y6cvRYqg7P7KW6EWYGfg6DIH8NNc3WA4dOHT9GdSPMrPaDML/AM77As2rKHWHimQIGhPhzvKW7uHbojjL8ER4HhsR9lM+Gn8V1tqJMa7vgj/BSMKiWihRXxdnUdqHaffkj7C4Fo5JUyIYd+07/7r67qbpsRCC0hdgGItx9y4xGuNgLDCoUYgE5QNXkEk1TAcGL3T/EI1wCKDGKIx7hAsDBPWLxCLtdgBOlGOIRLgSkMGsUlkQ4H7CeUH74CLu9gNVBTZZFNMwFtMBdKyM8A/BuWRnhKYD31MIIExfgxS2M8Aowgd/CCM8DM3ywLsJzwQw11kV4CYDd2kQW0TIeutlqr8slFiz4vmURJoW2W3BfnXnZdpHIIhZ0iaRlESbFdusSDqLN44UU+0xJfYmO+aAhUB9t64pE3rRE42GtP/OZHWHxGT8EUN/VGZT/CHa2NICKBpMjLN6IQ5HguyZZlqsi7bH6RCJe1xapSv3aHkBM+ogI61RduOuR3CQHm+v8kMYf/RSUq9sCiDaMiTBTChnqquXq9kCbX+HBv+n+T+oQNYeIsOqMFG6Wgy2qFeaPBOVmP/QUsiLCzPKe9dMkVyVAQ6JTru4Qn5DwEWaKgOl4JEcCoK0lKL+zoAtznX8agsEo6KqvlpsDac/cmoME40nbO9o7gEOoqiot5atWWhBh5Jk4nFZ3RXlkePb00f0tinCKpwgQCskP/WaOtCLC+NF5Sh75bdKiXAsijP1MexlJN3zIGFSEebnng0HjSKYRcwb3R0SY03IvGFLkJgp6Txw7Eh/hfzE9u4qJil7Dpo9CRJjDLESHyMCKcDQqwuYX3iyiQbwIHURI3jhEwTHKRYiPMD4UM4giRBFmEUFLXMBvMVGCqEEnEVdSBJxcS4mwSTNHIxKszDPDy7cflxBxrAbxCWaK80GXd5aHKMHVYBYxaK7ekvOVHy+yBkcR4+YVuDSWO48oQxahg2C4C6cq11rBMoLGihARYZ73d66pS9zEVLn4CDN5yxYX5JfCT6X5BYuX5xEN2K6RS8zhca8oWeHWbwroruEg/5FU1+hL/i+9+hE13wE+6ocKWJL2wAAAAABJRU5ErkJggg==",e.abrupt("return",t);case 23:t.height=r.height,t.width=r.width;case 25:return t.getIcon=i().createElement("div",{className:"media-content"},i().createElement("img",{src:t.invokeSrc,style:{width:"100%"}})),e.abrupt("break",50);case 27:if(t.headerTitle=a.oc.t("send_video",{},"发送视频"),t.getIcon=i().createElement("div",{className:"media-content"},i().createElement("video",{src:t.invokeSrc,style:{width:"100%"}})),!(t.size>314572800)){e.next=32;break}return t.errorMessage=a.oc.t("beyond_the_sending_limit__the_maximum_support_is_300m~",{},"超出发送限制，最大支持发送300M~"),e.abrupt("return",t);case 32:return e.prev=32,e.next=35,(0,H.bs)(t);case 35:o=e.sent,t.height=o.height,t.width=o.width,e.next=44;break;case 40:return e.prev=40,e.t1=e.catch(32),t.errorMessage=a.oc.t("abnormal_video_loading",{},"视频加载异常"),e.abrupt("return",t);case 44:return e.abrupt("break",50);case 45:if(t.headerTitle=a.oc.t("linkchat_file_tile",{},"发送文件"),!(t.size>314572800)){e.next=49;break}return t.errorMessage=a.oc.t("beyond_the_sending_limit__the_maximum_support_is_300m~",{},"超出发送限制，最大支持发送300M~"),e.abrupt("return",t);case 49:return e.abrupt("break",50);case 50:return e.abrupt("return",t);case 51:case"end":return e.stop()}}),e,null,[[32,40]])})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){p?Promise.all(t.map((function(e){return O(e)}))).then((function(e){var t;1===e.length?b((null===(t=e[0])||void 0===t?void 0:t.headerTitle)||a.oc.t("linkchat_file_tile",{},"发送文件")):b(a.oc.t("linkchat_file_tile",{},"发送文件"));return g(e)})):g([]),S(p)}),[p]);var E=(0,o.useCallback)((function(){if(!l&&p){f(!0);var e=y.filter((function(e){return!e.errorMessage}));e&&e.length?e.forEach(function(){var e=je(Te().mark((function e(t){var r,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.V$.MESSAGE_TYPE_FILE,o=[t],t.subType!==a.Tv.Image){e.next=9;break}return r=a.V$.MESSAGE_TYPE_IMAGE,e.next=6,(0,H.Lk)([t]);case 6:o=e.sent,e.next=10;break;case 9:t.subType===a.Tv.Video&&(r=a.V$.MESSAGE_TYPE_VIDEO);case 10:null==n||n.sendMessage({type:r,fileArr:o,isPasteFile:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):c.Toast.show(a.oc.t("no_documents/videos/photos_to_send",{},"无可发送的文件/视频/照片")),k()}}),[y,l]),S=(0,o.useCallback)((function(e){document[e?"addEventListener":"removeEventListener"]("keydown",x)}),[]);(0,o.useEffect)((function(){d(r)}),[r]);var k=(0,o.useCallback)((function(){"function"==typeof s&&s(),f(!1),d(!1),g([])}),[]);return i().createElement(c.Modal,{className:"file-modal",header:i().createElement("div",{className:"file-modal-title"},_),showCloseButton:!0,visible:p,getContainer:document.getElementsByTagName("body")[0],onClose:k,bodyClassName:"modal-body",content:i().createElement(i().Fragment,null,i().createElement("div",{className:"files-content"},y.map((function(e){return i().createElement("div",{className:"file-item"},i().createElement(c.FileCard,{icon:e.getIcon,file:e,extension:e.ext}),e.errorMessage&&i().createElement("div",{className:"error-message"},e.errorMessage))}))),i().createElement("div",{className:"bottom-btn"},i().createElement(c.Button,{size:"small",onClick:k,style:{marginRight:8,width:100,border:"1px solid #eee"}},a.oc.t("close_dialog_cancel_text",{},"取消")),i().createElement(c.Button,{size:"small",loading:l,onClick:E,color:"primary",style:{width:100}},a.oc.t("close_dialog_confirm_text",{},"确认"))))})})));function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(){ze=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ve(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ve(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function We(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){We(i,r,o,s,a,"next",e)}function a(e){We(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=function(e){try{var t=e.charAt(e.length-1);return/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g.test(t)}catch(e){}return!1},Qe=i().forwardRef((function(e,t){var n,r,s,l,h,p=e.appContext,d=e.onChange,v=e.onFocus,y=e.onBlur,g=e.onSend,m=e.rightButtonList,_=e.children,b=Ye(ce(),2),w=b[0],x=(b[1],(p||{}).query),O=void 0===x?{}:x,E=Ye((0,o.useState)(""),2),S=E[0],k=E[1],C=(0,o.useRef)(null),I=(0,o.useRef)(!1),P=(0,o.useMemo)((function(){return"enterKeyHint"in document.createElement("input")}),[]),T=Ye((0,o.useState)(!1),2),A=T[0],j=T[1],R=Ye((0,o.useState)([]),2),M=R[0],B=R[1],G=(0,o.useCallback)((function(e){e.stopPropagation(),j(!A)}),[A,j]),V=(0,o.useCallback)((function(e){k(e),d&&d(e)}),[S]),K=(0,o.useCallback)((function(e){!e.target.value&&S&&V("")}),[S]),z=(0,o.useCallback)($e(ze().mark((function e(){var t,n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:if(g&&g(S),V(""),w&&"keyboard"!==w||null===(t=C.current)||void 0===t||t.focus(),e.prev=5,e.t0=null==p?void 0:p.sendMessage,!e.t0){e.next=10;break}return e.next=10,null==p?void 0:p.sendMessage({content:S,origin:U},{messageType:"-1"});case 10:e.next=16;break;case 12:throw e.prev=12,e.t1=e.catch(5),null==p||null===(n=p.logger)||void 0===n||n.error(F.inputWrapper,{error:e.t1}),e.t1;case 16:Je(S)&&(null===(r=C.current)||void 0===r||r.blur());case 17:case"end":return e.stop()}}),e,null,[[5,12]])}))),[V,g]);(0,o.useImperativeHandle)(t,(function(){return{replace:function(e){return V(e)},getValue:function(){return S},getEle:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.getEle()},focus:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.focus()},blur:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.blur()},input:function(e){var t;return null===(t=C.current)||void 0===t?void 0:t.input(e)},isFocus:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.isFocus()}}}));var W=(0,o.useCallback)((function(e){13===e.keyCode&&(e.shiftKey||e.ctrlKey)||(q("touch")?P&&13===e.keyCode&&C.current&&(z(),e.preventDefault()):13===e.keyCode&&C.current&&(z(),e.preventDefault()))}),[z]),$=(0,o.useCallback)(function(){var e=$e(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}if(e.t0=null==p?void 0:p.sendMessage,!e.t0){e.next=6;break}return e.next=6,null==p?void 0:p.sendMessage({content:t});case 6:k(""),e.next=11;break;case 9:e.prev=9,e.t1=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[null==p?void 0:p.sendMessage]),Y=(0,o.useCallback)(function(){var e=$e(ze().mark((function e(t){var n,r,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target!==(null===(n=C.current)||void 0===n?void 0:n.getEle())||I.current||(r=t.clipboardData||window.clipboardData,(o=r.files).length&&(t.preventDefault(),B(Ke(o))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[null==O?void 0:O.isPc]),Z=(0,o.useCallback)((function(){B([])}),[]);return i().createElement(i().Fragment,null,(null==p||null===(n=p.renderConfig)||void 0===n?void 0:n.openAudio)&&(null==p||null===(r=p.dialog)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.type)===a.My.AGENT&&i().createElement("div",{className:"recorder-container",onClick:G},i().createElement("img",{className:"recorder",src:A?D.Z:L.Z})),A?i().createElement(Ie,{appContext:p}):i().createElement("div",{className:(0,f.er)(qe({},"".concat(u,"InputWrapper"),!0),null==p||null===(s=p.query)||void 0===s?void 0:s.isPc)},i().createElement(ne,{onChange:$,keywords:S}),i().createElement("div",{className:(0,f.er)(qe({},"".concat(u,"Input"),!0),null==p||null===(l=p.query)||void 0===l?void 0:l.isPc),onPaste:Y},i().createElement(c.DialogInput,{onBlur:y,onFocus:v,onInput:K,onChange:V,onKeyDown:W,value:S,ref:C,onRowChange:function(){var e;null==p||null===(e=p.$refs)||void 0===e||null===(e=e.$scroller)||void 0===e||null===(e=e.current)||void 0===e||e.scrollToBottom(!1)},autoSize:!0,placeholder:(0,H.KH)()?a.oc.t("enter_content_or_paste_after_screenshot_using_feishu_shortcut",{},"输入内容或使用飞书快捷键截图后粘贴"):a.oc.t("input_placeholder",{},"请输入您想咨询的问题~")}),_)),m,i().createElement("div",{className:"buttonGroup buttonGroup__right",style:{display:null!=S&&S.length?"flex":"none"}},i().createElement(N.J,{type:"Send",className:(0,f.er)({SendMessageButton:!0},null==p||null===(h=p.query)||void 0===h?void 0:h.isPc),onClick:z})),i().createElement(He,{appContext:p,files:M,show:Boolean(M.length),onHandler:Z}))}));const et=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(Qe));var tt=n(5980),nt=n(1901),rt=n(314),ot=n(4512),it=(n(5672),n(1455)),st=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),at="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ct=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),ut="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ct):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var lt=["top","right","bottom","left","width","height","size","weight"],ft="undefined"!=typeof MutationObserver,ht=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&a()}function s(){ut(i)}function a(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){at&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ft?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){at&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;lt.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),pt=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},dt=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ct},vt=wt(0,0,0,0);function yt(e){return parseFloat(e)||0}function gt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+yt(e["border-"+n+"-width"])}),0)}function mt(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return vt;var r=dt(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=yt(i)}return t}(r),i=o.left+o.right,s=o.top+o.bottom,a=yt(r.width),c=yt(r.height);if("border-box"===r.boxSizing&&(Math.round(a+i)!==t&&(a-=gt(r,"left","right")+i),Math.round(c+s)!==n&&(c-=gt(r,"top","bottom")+s)),!function(e){return e===dt(e).document.documentElement}(e)){var u=Math.round(a+i)-t,l=Math.round(c+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(l)&&(c-=l)}return wt(o.left,o.top,a,c)}var _t="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof dt(e).SVGGraphicsElement}:function(e){return e instanceof dt(e).SVGElement&&"function"==typeof e.getBBox};function bt(e){return at?_t(e)?function(e){var t=e.getBBox();return wt(0,0,t.width,t.height)}(e):mt(e):vt}function wt(e,t,n,r){return{x:e,y:t,width:n,height:r}}var xt=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=wt(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=bt(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Ot=function(e,t){var n,r,o,i,s,a,c,u=(r=(n=t).x,o=n.y,i=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),pt(c,{x:r,y:o,width:i,height:s,top:o,right:r+i,bottom:s+o,left:r}),c);pt(this,{target:e,contentRect:u})},Et=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new st,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof dt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new xt(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof dt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Ot(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),St="undefined"!=typeof WeakMap?new WeakMap:new st,kt=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ht.getInstance(),r=new Et(t,n,this);St.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){kt.prototype[e]=function(){var t;return(t=St.get(this))[e].apply(t,arguments)}}));const Ct=void 0!==ct.ResizeObserver?ct.ResizeObserver:kt;var It=n(9137),Pt=n(6261);const Tt=function(){return i().createElement("div",{className:(0,p.Z)("jarvis-ScrollView__DefaultLoading")},i().createElement("div",{className:"jarvis-ScrollView__DefaultLoading--spinner"},i().createElement("div",null),i().createElement("div",null),i().createElement("div",null),i().createElement("div",null),i().createElement("div",null),i().createElement("div",null),i().createElement("div",null),i().createElement("div",null)))};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function jt(){jt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==At(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(At(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Rt(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dt=!!q("passiveListener")&&{passive:!1},Lt=function(e){var t=e.ref,n=e.disabled,r=e.handler,i=e.loadingDistance,s=void 0===i?40:i,a=e.distanceRatio,c=void 0===a?2:a,u=Mt((0,o.useState)("pending"),2),l=u[0],h=u[1],p=Mt((0,o.useState)(!1),2),d=p[0],v=p[1],y=Mt((0,o.useState)(n),2),g=y[0],m=y[1],_=(0,o.useRef)({startY:0,handler:r});return(0,o.useEffect)((function(){if(t.current&&!g){var e=function(e){t.current&&(0,f.B2)(t.current,"translate3d(0px,".concat(e,"px,0px)"))},n=function(e){"loading"!==l&&(_.current.startY=e.touches[0].clientY,h("pull"),v(!1))},r=function(t){var n=t.touches[0].clientY;if(!(n<_.current.startY||"loading"===l)){var r=(n-_.current.startY)/c;r>0&&(t.cancelable&&t.preventDefault(),t.stopPropagation(),e(r),h(r>=s?"active":"pull"))}},o=function(){var t,n=(t=jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("active"!==l){t.next=11;break}return h("loading"),v(!0),e(s),t.prev=4,t.next=7,_.current.handler();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:h("pending"),e(0);case 12:case"end":return t.stop()}}),t,null,[[4,9]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(e){Rt(i,r,o,s,a,"next",e)}function a(e){Rt(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return t.current.addEventListener("touchstart",n),t.current.addEventListener("touchmove",r,Dt),t.current.addEventListener("touchend",o),t.current.addEventListener("touchcancel",o),function(){t.current&&(t.current.removeEventListener("touchstart",n),t.current.removeEventListener("touchmove",r),t.current.removeEventListener("touchend",o),t.current.removeEventListener("touchcancel",o))}}}),[t,n,r,l,d,g]),[{status:l,dropped:d,disabled:g},m,function(e){_.current.handler=e}]};function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ut=function(e){var t=e.disabled,n=e.handler,r=e.children,s=e.Loading,a=void 0===s?Tt:s,c=(0,o.useRef)(null),u=Nt(Lt({ref:c,disabled:t,handler:n}),3),l=u[0],f=u[1],h=u[2];return(0,o.useEffect)((function(){f(t)}),[t]),(0,o.useEffect)((function(){h(n)}),[n]),i().createElement("div",{className:(0,p.Z)("jarvis-PullToRefresh",{PullToRefresh__transition:l.dropped}),ref:c},("active"===l.status||"loading"===l.status)&&i().createElement("div",{className:"jarvis-PullToRefresh__loading"},i().createElement(a,null)),i().Children.only(r))};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Ht(){Ht=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Gt(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Gt(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Vt(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Vt(i,r,o,s,a,"next",e)}function a(e){Vt(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wt=function(e){if(0===e.length)return!1;return function e(t,n,r){if(null==r&&(r=t.length-1),null==n&&(n=0),n>=r)return!1;var o=Math.floor((n+r)/2),i=t[o].getBoundingClientRect(),s=i.top,a=i.bottom;return s<=0&&a>=0?t[o]:s>0?e(t,n,o-1):e(t,o+1,r)}(e)};const $t=i().forwardRef((function(e,t){var n,r=e.enableOnScrollToTop,s=void 0===r||r,a=e.onScrollToTop,c=e.ScrollToTopLoading,u=void 0===c?Tt:c,l=e.enableOnScrollToBottom,f=void 0===l||l,h=e.onScrollToBottom,d=e.ScrollToBottomLoading,v=void 0===d?Tt:d,y=e.onScroll,g=e.onScrollThrottleWait,m=void 0===g?60:g,_=e.enableOnPullToRefresh,b=void 0===_||_,w=e.onPullToRefresh,x=e.PullToRefreshLoading,O=void 0===x?Tt:x,E=e.children,S=e.onScrollStart,k=(0,o.useRef)(null),C=(0,o.useRef)(null),I=(0,o.useRef)((null===(n=i().Children.toArray(E))||void 0===n?void 0:n.length)||0),P=(0,o.useRef)(0),T=(0,o.useRef)(null),A=(0,o.useRef)(null),j=(0,o.useRef)({el:null,theDistanceToTheTop:0,isScrollingToBottom:!1}),R=Kt((0,o.useState)(!1),2),M=R[0],B=R[1],D=Kt((0,o.useState)(!1),2),L=D[0],N=D[1],F=Kt((0,o.useState)(!1),2),U=F[0],G=F[1],H=(0,o.useRef)({onScrollToTop:!1,onScrollToBottom:!1,onScroll:!1,onPullToRefresh:!1}),V=function(e){H.current[e]=!0,"onScrollToTop"===e?B(!1):"onScrollToBottom"===e?G(!1):"onPullToRefresh"===e&&N(!1)},K=(0,o.useRef)({}),z=function(){var e=qt(Ht().mark((function e(t,n){var r;return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K.current[t]){e.next=4;break}return e.next=3,K.current[t];case 3:return e.abrupt("return",e.sent);case 4:return K.current[t]=n(),e.next=7,K.current[t];case 7:return r=e.sent,K.current[t]=null,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function e(t){if(A.current)return t?(j.current.isScrollingToBottom=!0,(0,It.Z)(A.current,{behavior:"smooth"}).finally((function(){Y(10)&&(j.current.isScrollingToBottom=!1),j.current.isScrollingToBottom&&e(t)}))):void A.current.scrollIntoView()},$=function(e){T.current&&(e?(0,It.Z)(T.current,{behavior:"smooth"}):T.current.scrollIntoView())},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!k.current||k.current.scrollHeight-(k.current.scrollTop+k.current.clientHeight)<=e},Z=(0,o.useCallback)((function(){return z("handleOnScrollToTop",qt(Ht().mark((function e(){return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof a){e.next=8;break}return e.prev=1,e.next=4,a((function(){V("onScrollToTop"),a===w&&V("onPullToRefresh")}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))))}),[a,w]),X=(0,o.useCallback)((function(){return z("handleOnPullToRefresh",qt(Ht().mark((function e(){return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof w){e.next=8;break}return e.prev=1,e.next=4,w((function(){V("onPullToRefresh"),w===a&&V("onScrollToTop")}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))))}),[w,a]),J=(0,o.useCallback)((function(){return z("handleOnScrollToBottom",qt(Ht().mark((function e(){return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof h){e.next=3;break}return e.next=3,h((function(){V("onScrollToBottom")}));case 3:case"end":return e.stop()}}),e)}))))}),[h]),Q=(0,it.Z)((function(e){"function"==typeof y&&y(e)}),{wait:m,leading:!0}).run;(0,o.useImperativeHandle)(t,(function(){return{scrollIntoView:It.Z,scrollToBottom:W,scrollToTop:$,checkScrolledToBottom:Y}}));var ee=function(){j.current.isScrollingToBottom||(k.current&&j.current.el?P.current!==I.current&&k.current&&j.current.el&&(k.current.scrollTop=k.current.scrollTop+(j.current.el.getBoundingClientRect().bottom-j.current.theDistanceToTheTop),(0,Pt.z)((function(e){k.current&&j.current.el&&j.current.el.getBoundingClientRect().bottom!==j.current.theDistanceToTheTop?k.current.scrollTop=k.current.scrollTop+(j.current.el.getBoundingClientRect().bottom-j.current.theDistanceToTheTop):"function"==typeof e&&e()}),50)):W(!0),P.current=I.current)},te=(0,o.useRef)();return(0,o.useEffect)((function(){var e,t,n=!1;(te.current=new IntersectionObserver((function(e,t){var r=t.root;n?r&&r.clientHeight&&r.scrollHeight&&r.clientHeight<r.scrollHeight&&e.forEach((function(e){var t=e.target,n=e.intersectionRatio;M&&t===T.current&&n>=.8&&Z(),U&&t===A.current&&n>=.8&&J()})):n=!0}),{root:k.current,rootMargin:"0px",threshold:.8}),M&&T.current)&&(null===(e=te.current)||void 0===e||e.observe(T.current));U&&A.current&&(null===(t=te.current)||void 0===t||t.observe(A.current));return function(){var e;null===(e=te.current)||void 0===e||e.disconnect()}}),[M,U,Z,J]),(0,o.useEffect)((function(){var e=new Ct((function(e){Array.isArray(e)&&e.length&&e.forEach((function(e){var t=e.target,n=e.contentRect;t===C.current&&k.current&&(n.height>k.current.clientHeight?(B(!H.current.onScrollToTop&&s),G(!H.current.onScrollToBottom&&f),N(!1)):(B(!1),G(!1),N(!H.current.onPullToRefresh&&b)),ee())}))}));return C.current&&k.current&&e.observe(C.current),function(){e.disconnect()}}),[]),(0,o.useMemo)((function(){var e;I.current=null===(e=i().Children.toArray(E))||void 0===e?void 0:e.length,function(){if(Y(10)||j.current.isScrollingToBottom)j.current.el=null;else if(j.current.el&&j.current.el===Wt([j.current.el]))j.current.el=j.current.el;else{var e,t=Array.from((null===(e=C.current)||void 0===e?void 0:e.children)||[]);j.current.el=Wt(t)||t[0]||null}j.current.el?j.current.el.getBoundingClientRect().bottom>0&&(j.current.theDistanceToTheTop=j.current.el.getBoundingClientRect().bottom):j.current.theDistanceToTheTop=0}()}),[E]),i().createElement(Ut,{handler:X,disabled:!L,Loading:O},i().createElement("div",{onTouchStart:S,ref:k,onScroll:Q,className:(0,p.Z)("jarvis-ScrollView")},i().createElement("div",{ref:T,className:(0,p.Z)("jarvis-ScrollView__topAnchor")},M&&i().createElement(u,null)),i().createElement("div",{ref:C,className:(0,p.Z)("jarvis-ScrollView__content",{"no-touch":!q("touch")})},E),i().createElement("div",{ref:A,className:(0,p.Z)("jarvis-ScrollView__bottomAnchor")},U&&i().createElement(v,null))))}));var Yt=n(6486),Zt=function(e){var t=e.fill;return!t&&(t="#333333"),i().createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M7.3335 11L4.00016 13V11H2.00016C1.63197 11 1.3335 10.7015 1.3335 10.3333V1.66667C1.3335 1.29848 1.63197 1 2.00016 1H14.0002C14.3684 1 14.6668 1.29848 14.6668 1.66667V10.3333C14.6668 10.7015 14.3684 11 14.0002 11H7.3335Z",fill:t,stroke:t,"stroke-width":"1.33333","stroke-linejoin":"round"}),i().createElement("path",{d:"M4.6665 5.5V6.5",stroke:"white","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),i().createElement("path",{d:"M8 5.5V6.5",stroke:"white","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),i().createElement("path",{d:"M11.3335 5.5V6.5",stroke:"white","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}))},Xt=function(e){var t=e.fill;return!t&&(t="#333333"),i().createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.73607 0.370822C4.84854 0.143704 5.08006 0 5.3335 0H8.66683C8.9222 0 9.15513 0.145876 9.26661 0.375625L10.2166 2.33333H13.0002C13.3684 2.33333 13.6668 2.63181 13.6668 3C13.6668 3.36819 13.3684 3.66667 13.0002 3.66667H12.0002V13.3333C12.0002 13.7015 11.7017 14 11.3335 14H2.66683C2.29864 14 2.00016 13.7015 2.00016 13.3333V3.66667H1.00016C0.631973 3.66667 0.333496 3.36819 0.333496 3C0.333496 2.63181 0.631973 2.33333 1.00016 2.33333H3.76424L4.73607 0.370822ZM5.2521 2.33333H8.73456L8.24932 1.33333H5.74729L5.2521 2.33333ZM6.3335 6C6.3335 5.63181 6.03502 5.33333 5.66683 5.33333C5.29864 5.33333 5.00016 5.63181 5.00016 6V10C5.00016 10.3682 5.29864 10.6667 5.66683 10.6667C6.03502 10.6667 6.3335 10.3682 6.3335 10V6ZM9.00016 6C9.00016 5.63181 8.70169 5.33333 8.3335 5.33333C7.96531 5.33333 7.66683 5.63181 7.66683 6V10C7.66683 10.3682 7.96531 10.6667 8.3335 10.6667C8.70169 10.6667 9.00016 10.3682 9.00016 10V6Z",fill:t}))},Jt=n(7219);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}var en=["children"];function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Qt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},on.apply(this,arguments)}function sn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var un="#333",ln="rgba(47, 136, 255, 1)",fn={MESSAGE_TYPE_WELCOME:40001,MESSAGE_TYPE_END:40002,MESSAGE_TYPE_TRANSFERING:40004,MESSAGE_TYPE_TRANSFERED:40003,CREATE_CONVERSATION_TYPE:40005,SYSTEM_TIME_TYPE:40007,VIRTUAL_AGENT_ID:40009},hn=function(e){var t,n,r,s=e.appContext,l=e.message,h=e.avatarsConfig,p=e.style,d=void 0,v=an((0,o.useState)(!1),2),y=v[0],g=v[1],m=an((0,o.useState)(!1),2),_=m[0],b=m[1],w=an((0,o.useState)(!1),2),x=w[0],O=w[1],E=an((0,o.useState)(un),2),S=E[0],k=E[1],C=an((0,o.useState)(un),2),I=C[0],T=C[1],A=an((0,o.useState)(!1),2),j=A[0],R=A[1],M=an((0,o.useState)(""),2),B=M[0],D=M[1],L=l.component,N=void 0===L?{}:L,F=l.content,U=l.type,G=l.flightStatus,H=l.ext,V=void 0===H?{}:H,q=(0,o.useMemo)((function(){var e,t=l.user||{},n=t.avatarType,r=void 0===n?"key":n,o=t.avatar;if(!o||null!=s&&null!==(e=s.renderConfig)&&void 0!==e&&e.hideAvatar)return null;switch(r){case"key":return h&&h[o]?i().createElement(c.Avatar,{src:h[o],className:"avatarSpan"}):null;case"url":return i().createElement(c.Avatar,{src:o,className:"avatarSpan"});default:return i().createElement(P.Z,{className:"avatarSpan",message:l,config:o})}}),[JSON.stringify(l.user),h]),K=(0,o.useCallback)((function(){var e,t,n,r;(null!=s&&null!==(e=s.renderConfig)&&void 0!==e&&e.messageDelete||null!=s&&null!==(t=s.ext)&&void 0!==t&&null!==(t=t.userDefaultConfig)&&void 0!==t&&t.openReply&&(null==s||null===(n=s.renderConfig)||void 0===n||!n.hideReply))&&!y&&(k(un),b(!1),T(un),O(!1),null!==(r=s.query)&&void 0!==r&&r.isPc&&g(!0))}),[y]),z=(0,o.useCallback)((function(e){window.clearTimeout(d),"delete"===e?(k(ln),b(!0)):(T(ln),O(!0))}),[]),W=(0,o.useCallback)((function(){b(!1),k(un),O(!1),T(un)}),[]),$=(0,o.useCallback)((function(){var e,t,n,r;(null!=s&&null!==(e=s.renderConfig)&&void 0!==e&&e.messageDelete||null!=s&&null!==(t=s.ext)&&void 0!==t&&null!==(t=t.userDefaultConfig)&&void 0!==t&&t.openReply&&(null==s||null===(n=s.renderConfig)||void 0===n||!n.hideReply))&&null!==(r=s.query)&&void 0!==r&&r.isPc&&(window.clearTimeout(d),d=window.setTimeout((function(){g(!1)}),200))}),[y]),Y=(0,o.useRef)(),Z=(0,o.useCallback)((function(e){var t;if(null==s||null===(t=s.query)||void 0===t||!t.isPc)try{var n,r,o;null==s||null===(n=s.logger)||void 0===n||n.info(e,{dialogId:null==s||null===(r=s.dialogInfo)||void 0===r?void 0:r.id,userId:null===(o=s.ext)||void 0===o?void 0:o.userId})}catch(e){}}),[]),X=function(){Z("onLongPress"),g(!0)},J=(0,o.useCallback)((function(e){var t,n,r,o,i,a,c,u,f;if(null!=s&&null!==(t=s.renderConfig)&&void 0!==t&&t.messageDelete||null!=s&&null!==(n=s.ext)&&void 0!==n&&null!==(n=n.userDefaultConfig)&&void 0!==n&&n.openReply&&(null==s||null===(r=s.renderConfig)||void 0===r||!r.hideReply)){var h,p=(null==s||null===(o=s.messages)||void 0===o||null===(o=o.slice(-1))||void 0===o||null===(o=o[0])||void 0===o?void 0:o.clientId)===l.clientId;if(R(p),null!=s&&null!==(i=s.renderConfig)&&void 0!==i&&i.messageDelete&&null!=s&&null!==(a=s.renderConfig)&&void 0!==a&&a.hideAvatar&&null!=s&&null!==(c=s.ext)&&void 0!==c&&null!==(c=c.userDefaultConfig)&&void 0!==c&&c.openReply&&(null==s||null===(u=s.renderConfig)||void 0===u||!u.hideReply)){var d,v=document.body.getBoundingClientRect().width,y=(null==e||null===(d=e.currentTarget)||void 0===d?void 0:d.getBoundingClientRect())||{},g=y.x,m=y.width;(l.isFromMe&&v-g<120||!l.isFromMe&&m+g<120)&&D(l.isFromMe?"deleteBtnNoAvatar":"deleteBtnNoAvatarAgrent")}if(null===(f=s.query)||void 0===f||!f.isPc)Y.current=null===(h=window)||void 0===h?void 0:h.setTimeout((function(){X()}),600)}}),[X,600]),Q=(0,o.useCallback)((function(){var e,t,n,r;(null!=s&&null!==(e=s.renderConfig)&&void 0!==e&&e.messageDelete||null!=s&&null!==(t=s.ext)&&void 0!==t&&null!==(t=t.userDefaultConfig)&&void 0!==t&&t.openReply&&(null==s||null===(n=s.renderConfig)||void 0===n||!n.hideReply))&&(null!==(r=s.query)&&void 0!==r&&r.isPc||(Y.current&&window.clearTimeout(Y.current),Y.current=null))}),[]),ee=(0,o.useCallback)((function(e){e.stopPropagation(),c.Dialog.confirm({title:a.oc.t("message_delete_title",{},"删除确认"),content:a.oc.t("message_delete_content",{},"是否删除该条消息？"),confirmText:a.oc.t("close_dialog_confirm_text",{},"确认"),cancelText:a.oc.t("close_dialog_cancel_text",{},"取消"),onConfirm:function(){var e,t,n,r;null==s||null===(e=s.utils)||void 0===e||null===(e=e.services)||void 0===e||null===(e=e.apis)||void 0===e||null===(t=e.modifyMessage)||void 0===t||t.call(e,{dialogId:null===(n=s.dialog)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.dialogId,serverId:l.serverId,extMap:{"s:invisible":null===(r=s.dialog)||void 0===r?void 0:r.customerId}})}}),Z("messageDelete")}),[l]),te=(0,o.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),O(!1),T(un),l.serverId){var t,n=l.senderType,r=l.type,o=l.recalled,i=l.content,a=l.serverId;s.replyMessage={type:r,senderType:n,content:i,serverId:a,recalled:o},null==s||null===(t=s.$refs)||void 0===t||null===(t=t.$input)||void 0===t||null===(t=t.current)||void 0===t||t.focus(),Z("messageReply")}g(!1)}),[g,l]);(0,o.useEffect)((function(){if(y){var e=function(e){var t,n,r;null!=e&&null!==(t=e.target)&&void 0!==t&&t.className&&(null==e||null===(n=e.target)||void 0===n||null===(n=n.className)||void 0===n||null===(r=n.indexOf)||void 0===r?void 0:r.call(n,"viewer"))>-1||g(!1)};document.addEventListener("touchstart",e),document.addEventListener("mousedown",e)}}),[y]);var ne=function(e){var t=e.children,n=sn(e,en),r=(0,o.useRef)(null);return(0,o.useEffect)((function(){return r.current.addEventListener("touchstart",te,!1),r.current.addEventListener("mousedown",te,!1),function(){r.current.removeEventListener("touchstart",te,!1),r.current.removeEventListener("mousedown",te,!1)}}),[]),i().createElement("div",on({},n,{ref:r}),t)},re=(0,o.useMemo)((function(){var e,t,n,r,o,c,u,f,h;return l.isRecalled?i().createElement(Jt.Z,{appContext:s,message:l}):i().createElement("div",{className:"messageComponent",onMouseOver:K,onMouseLeave:$,onMouseDown:J,onMouseUp:Q,onTouchStart:J,onTouchEnd:Q,"data-rootMessageId":l.ext.rootMessageId,"data-serverId":l.serverId},N?i().createElement(P.Z,{config:N,message:l}):null,y&&!Object.values(fn).includes(l.type)&&(null==l||null===(e=l.user)||void 0===e?void 0:e.avatar)&&(null===(t=s.query)||void 0===t?void 0:t.isPc)&&i().createElement("div",{className:"opBtnPc ".concat(l.isFromMe?"opBtnPcMe":"")},!(null!=s&&null!==(n=s.renderConfig)&&void 0!==n&&n.hideReply)&&(null==s||null===(r=s.ext)||void 0===r||null===(r=r.userDefaultConfig)||void 0===r?void 0:r.openReply)&&i().createElement("div",{className:"deleteBtnPc",onMouseOver:function(){z("reply")},onMouseLeave:W,onMouseDown:te},i().createElement(Zt,{fill:I}),x&&i().createElement("div",{className:"tipWrap tipWrapUp"},i().createElement("div",null,a.oc.t("reply",{},"回复")),i().createElement("div",{className:"arrowDown arrowDownPc"}))),(null==s||null===(o=s.renderConfig)||void 0===o?void 0:o.messageDelete)&&i().createElement("div",{className:"deleteBtnPc",onMouseOver:function(){z("delete")},onMouseLeave:W,onMouseDown:ee},i().createElement(Xt,{fill:S}),_&&i().createElement("div",{className:"tipWrap tipWrapUp"},i().createElement("div",null,a.oc.t("delete_tip",{},"删除")),i().createElement("div",{className:"arrowDown arrowDownPc"})))),y&&!(null!=s&&null!==(c=s.query)&&void 0!==c&&c.isPc)&&!Object.values(fn).includes(l.type)&&i().createElement(i().Fragment,null,i().createElement("div",{className:"".concat(j?"arrowDown":"arrow")}),i().createElement("div",{className:"deleteBtn ".concat(j?"deleteBtnUp":""," ").concat(B)},!(null!=s&&null!==(u=s.renderConfig)&&void 0!==u&&u.hideReply)&&(null==s||null===(f=s.ext)||void 0===f||null===(f=f.userDefaultConfig)||void 0===f?void 0:f.openReply)&&i().createElement(ne,{className:"op-btn"},i().createElement(Zt,null),i().createElement("div",{className:"text"},a.oc.t("reply",{},"回复"))),(null==s||null===(h=s.renderConfig)||void 0===h?void 0:h.messageDelete)&&i().createElement("div",{className:"op-btn",onTouchStart:ee,onMouseDown:ee},i().createElement(Xt,null),i().createElement("div",{className:"text"},a.oc.t("delete_tip",{},"删除"))))))}),[JSON.stringify(N),F,U,G,JSON.stringify(V),y,S,I]);return i().createElement("div",{className:(0,f.er)((t={},rn(t,"".concat(u,"messageContainer"),!0),rn(t,"typeSetRight","right"===l.position),t)),style:nn({justifyContent:"center"===l.position?"center":"flex-start"},p),"data-kid":l._id,"data-sid":null===(n=l.indexInConversation)||void 0===n?void 0:n.toString()},q,i().createElement("div",{className:"messageContent"},re,l.bottomComponent?i().createElement(P.Z,{config:l.bottomComponent,message:l,appContext:s,key:null===(r=l.bottomComponent)||void 0===r?void 0:r.code}):null),l.expansion&&l.expansion.length?i().createElement("div",{className:(0,f.er)({extDiv:!0,typeSetRight:"right"===l.position})},l.expansion&&l.expansion.map((function(e){return i().createElement(P.Z,{config:e,message:l,"data-react-key":e.code,key:e.code})}))):null)};const pn=i().memo(hn,(function(e,t){var n=e.message,r=e.avatarsConfig,o=t.message,i=t.avatarsConfig;try{return i===r&&(0,Yt.isEqual)(n,o)}catch(e){return!1}}));function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function vn(){vn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==dn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(dn(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function yn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==dn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xn=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Fixed="fixed",e.Auto="auto",e.ToMessageList="to-messagelist",e.SingleToMessageListCard="single-to-messagelist",e}(xn||{}),On=[xn.Auto,xn.Fixed,xn.ToMessageList,xn.SingleToMessageListCard],En=performance.now(),Sn=i().forwardRef((function(e,t){var n,r,s=e.appContext,c=(e.config,bn((0,o.useState)([]),2)),l=c[0],h=c[1],p=bn((0,o.useState)(!1),2),d=p[0],v=p[1];(0,nt.EH)((function(){return h((null==s?void 0:s.messages)||[])}),{delay:60,name:"messages",requiresObservable:!0});var y=(0,o.useRef)(null),g=bn((0,o.useState)(!0),2),m=g[0],_=g[1],b=(0,o.useRef)(null),w=(0,o.useRef)({}),x=(0,o.useCallback)((function(e){return function(t){e&&(w.current=mn(mn({},w.current),{},_n({},e,t||!1)))}}),[]),O=(0,o.useCallback)((function(e){return function(){return e._id&&"boolean"==typeof w.current[e._id]?w.current[e._id]:e.isNew}}),[]),E=(0,o.useCallback)((function(e){var t,n,r;if(null==e||!e.component||!e.position)return null;switch(e.position){case xn.SingleToMessageListCard:return M(e);case xn.Auto:return i().createElement(P.Z,{fallback:!1,key:e._id,"data-kid":e._id,"data-sid":null===(t=e.indexInConversation)||void 0===t?void 0:t.toString(),setIsNew:x(e._id),getIsNew:O(e),config:e.component,message:e});case xn.ToMessageList:return b.current&&(0,rt.createPortal)(i().createElement(P.Z,{fallback:!1,key:e._id,"data-kid":e._id,"data-sid":null===(n=e.indexInConversation)||void 0===n?void 0:n.toString(),config:e.component,message:e,setIsNew:x(e._id),getIsNew:O(e)}),b.current);default:return(0,rt.createPortal)(i().createElement(P.Z,{fallback:!1,key:e._id,"data-kid":e._id,"data-sid":null===(r=e.indexInConversation)||void 0===r?void 0:r.toString(),config:e.component,message:e,setIsNew:x(e._id),getIsNew:O(e)}),(null==s?void 0:s.mountId)||document.body)}}),[null==s?void 0:s.$refs]),S=(0,o.useRef)((function(){setTimeout((function(){I(!1),T()}),0),S.current=null})),k=(0,tt.Z)((function(){var e;null!==(e=y.current)&&void 0!==e&&e.checkScrolledToBottom&&_(y.current.checkScrolledToBottom(58))}),{wait:300}).run,C=(0,o.useCallback)((function(){var e,t;null===(e=I())||void 0===e||null===(t=e.then)||void 0===t||t.call(e,(function(){return _(!0)}))}),[]),I=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null===(e=y.current)||void 0===e?void 0:e.scrollToBottom(t)},T=function(){var e;l.length&&(null==s||null===(e=s.channel)||void 0===e||e.read())},A=function(){var e,t=(e=vn().mark((function e(t){var n,r,o,i,a;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==s||null===(n=s.channel)||void 0===n||!n.pullMessages){e.next=10;break}return e.next=4,null===(r=s.channel)||void 0===r?void 0:r.pullMessages({});case 4:o=e.sent,i=o.hasMore,a=o.messages,v(!i),i||t(),a&&a.length&&a.every((function(e){return e.content&&e.content.indexOf("fixed-message-list-card")>-1}))&&A(t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),v(!1),t();case 16:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){yn(i,r,o,s,a,"next",e)}function a(e){yn(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();(0,o.useImperativeHandle)(t,(function(){return{scrollToBottom:I}}));var j=(0,o.useRef)(),R=(0,o.useRef)(0),M=(0,o.useCallback)((function(e){var t,n=((null==s?void 0:s.messages)||[]).filter((function(t){var n,r;return(null===(n=t.component)||void 0===n?void 0:n.code)===(null===(r=e.component)||void 0===r?void 0:r.code)}));return n.length&&n[n.length-1]&&n[n.length-1]._id===e._id&&b.current?(0,rt.createPortal)(i().createElement(P.Z,{fallback:!1,key:e._id,"data-kid":e._id,"data-sid":null===(t=e.indexInConversation)||void 0===t?void 0:t.toString(),config:e.component,message:e,setIsNew:x(e._id),getIsNew:O(e)}),b.current):null}),[]);return(0,o.useEffect)((function(){var e,t;null!=l&&l.length&&S.current&&(null==s||null===(e=s.utils)||void 0===e||null===(e=e._monitor)||void 0===e||e.emitDelay("messageListRender",Number((performance.now()-En).toFixed(2)),{msglength:l.length,firstId:null===(t=l[0])||void 0===t?void 0:t.serverId}),S.current());return R.current&&window.clearTimeout(R.current),R.current=window.setTimeout((function(){var e;null===(e=j.current)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),j.current=[];var t=document.querySelectorAll("div[data-sid]"),n=Array.prototype.slice.call(t,-3);n&&n.length&&n.forEach((function(e){var t,n=new IntersectionObserver((function(t){if(t&&t.length){var r,o,i=t[0].intersectionRatio;if(i>.3&&i<=1)(null==s||null===(r=s.channel)||void 0===r?void 0:r.read)&&(null===(o=s.channel)||void 0===o||o.read(e.dataset.sid)),n&&n.disconnect()}}),{threshold:.3});n.observe(e),null===(t=j.current)||void 0===t||t.push(n)}))}),300),function(){var e;null===(e=j.current)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),j.current=[]}}),[l.length]),i().createElement("div",{className:(0,f.er)(_n({},"".concat(u,"MessageWrapper"),!0),null==s||null===(n=s.query)||void 0===n?void 0:n.isPc),ref:b},i().createElement($t,{ref:y,enableOnScrollToTop:!d,onScrollToTop:A,onPullToRefresh:A,enableOnScrollToBottom:!0,enableOnPullToRefresh:!0,ScrollToBottomLoading:function(){return null},onScrollToBottom:T,onScroll:k,onScrollStart:function(){var e;S.current||(null==s||null===(e=s.$refs.$usePanel)||void 0===e||null===(e=e.current)||void 0===e||e.toggle(!1))}},l&&l.map((function(e){var t;return e.hide?null:e.position&&On.indexOf(e.position)>-1?E(e):i().createElement(ot.Z,{key:e._id||e.clientId},i().createElement(pn,{avatarsConfig:null==s||null===(t=s.renderConfig)||void 0===t?void 0:t.avatars,key:e._id||e.clientId,message:e,appContext:s}))}))),m?null:null!=s&&null!==(r=s.dialog)&&void 0!==r&&r.unreadCount?i().createElement("span",{onClick:C,className:"scrollToBottom scrollToBottom__newMsg"},i().createElement(N.J,{className:"scrollToBottomIcon",type:"DoubleDown"}),a.oc.t("linkchat_new_message",{},"新消息")):i().createElement("span",{onClick:C,className:"scrollToBottom"},i().createElement(N.J,{className:"scrollToBottomIcon",type:"DoubleDown"}),a.oc.t("linkchat_go_back",{},"回到最后")))}));const kn=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(Sn));function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function In(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pn=i().forwardRef((function(e,t){var n=e.config;return i().createElement("div",{className:(0,f.er)(In({},"".concat(u,"Navbar"),!0)),ref:t},i().createElement(P.Z,{config:n}))}));var Tn=function(e){return e.hidden="hidden",e.show="show",e}({}),An=function(e){return e.cmd="cmd",e.url="url",e.message="message",e}({}),jn=function(e){return e.cmd="cmd",e.url="url",e}({}),Rn=n(4783),Mn=n(388),Bn=n(2914),Dn=n(2403),Ln=n(7258),Nn=n(7099);function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Un(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Fn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vn=function(e){return e.hidden="hidden",e.show="show",e}(Vn||{}),qn=i().forwardRef((function(e,t){var n,r,s,h,p,d=e.children,v=e.config,y=e.toolPanelList,g=e.appContext,m=Gn(ce(),1)[0],_=Gn((0,o.useState)(Vn.show),2),b=_[0],w=_[1],x=function(){var e;null==g||null===(e=g.$refs)||void 0===e||null===(e=e.$usePanel)||void 0===e||null===(e=e.current)||void 0===e||e.toggle("keyboard")},O=function(){var e,t,n,r;return"emoji"!==m?(null==g||null===(n=g.eventBus)||void 0===n||n.publish(l.n.emojiOnOpen),null==g||null===(r=g.$refs)||void 0===r||null===(r=r.$usePanel)||void 0===r||null===(r=r.current)||void 0===r?void 0:r.toggle("emoji")):(null==g||null===(e=g.eventBus)||void 0===e||e.publish(l.n.emojiOnClose),null==g||null===(t=g.$refs)||void 0===t||null===(t=t.$usePanel)||void 0===t||null===(t=t.current)||void 0===t?void 0:t.toggle(!1))},E=function(){var e,t;null==g||null===(e=g.eventBus)||void 0===e||e.publish(l.n.toolsOnOpen),null==g||null===(t=g.$refs)||void 0===t||null===(t=t.$usePanel)||void 0===t||null===(t=t.current)||void 0===t||t.toggle("tool")},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t,n;switch(e.type){case jn.cmd:null==g||null===(t=g.cmd)||void 0===t||t.send(e.data);break;case jn.url:null==g||null===(n=g.jsBrige)||void 0===n||n.openWindow(e.data);break;default:e.data&&"function"==typeof e.data&&e.data(g,e)}}},k=(0,o.useMemo)((function(){var e,t;if(null==g||null===(e=g.replyMessage)||void 0===e||!e.serverId)return"";var n=(null==g?void 0:g.replyMessage)||{},r=n.senderType,o=n.content;if(n.recalled)return a.oc.t("message_recalled",{},"此消息已撤回");switch(Number(null==g||null===(t=g.replyMessage)||void 0===t?void 0:t.type)){case Bn.V$.MESSAGE_TYPE_IMAGE:return a.oc.t("[picture]",{},"[图片]");case Bn.V$.MESSAGE_TYPE_FILE:return a.oc.t("[file]",{},"[文件]");case Bn.V$.ROBOT_THUMBS_TYPE:return a.oc.t("[rich_text]",{},"[富文本]");case Bn.V$.CUSTOM_VIDEO_TYPE:case Bn.V$.MESSAGE_TYPE_VIDEO:return a.oc.t("[video]",{},"[视频]");case Bn.V$.MESSAGE_TYPE_TEXT:return(0,Ln.Z)(r===Dn.i4.USER?o:(0,Nn.Z)(o),{email:{disable:!0},url:{disable:!0},emoji:{size:14}});default:return a.oc.t("[card]",{},"[卡片]")}}),[null==g?void 0:g.replyMessage]);(0,o.useImperativeHandle)(t,(function(){return{toggleStatus:function(e){e&&w(e)}}}));var C=(0,o.useMemo)((function(){var e,t,n,r;return null!=g&&null!==(e=g.query)&&void 0!==e&&e.isPc?i().createElement(c.Popover,{placement:"top",content:a.oc.t("expression",{},"表情")},i().createElement(N.J,{className:(0,f.er)({EmjioToolIcon:!0,toolItem:!0,"toolItem--hover":"emoji"!==m},(null==g||null===(r=g.query)||void 0===r?void 0:r.isPc)||!1),key:"Emotion",type:"Emotion",onClick:O})):i().createElement(o.Fragment,null,i().createElement(N.J,{className:(0,f.er)({toolItem:!0,EmjioToolIcon:!0,hidden:"emoji"!==m},(null==g||null===(t=g.query)||void 0===t?void 0:t.isPc)||!1),key:"Keyboard",type:"Keyboard",onClick:x}),i().createElement(N.J,{className:(0,f.er)({toolItem:!0,EmjioToolIcon:!0,hidden:"emoji"===m},(null==g||null===(n=g.query)||void 0===n?void 0:n.isPc)||!1),key:"Emotion",type:"Emotion",onClick:O}))}),[null==g||null===(n=g.query)||void 0===n?void 0:n.isPc,O,E,m]);return b!==Vn.hidden?i().createElement("div",{className:(0,f.er)((r={},Un(r,"".concat(u,"OptionalDiv"),!0),Un(r,"hasSafeBottom",!m),r),null==g||null===(s=g.query)||void 0===s?void 0:s.isPc)},k&&i().createElement("div",{className:"replyMessageContainer"},i().createElement("div",{className:"replyClose"},i().createElement(N.J,{className:"replyCloseIcon",onClick:function(){g.replyMessage={}},type:"Close",fill:"#999",size:18})),i().createElement("div",{className:"replyLine"}),i().createElement("div",{className:"replyContent"},i().createElement("div",{className:"replyTitle"},a.oc.t("reply",{},"回复"),":"),i().createElement("div",{className:"replyElement"},k))),i().createElement("div",{className:"buttonInputTools"},i().createElement("div",{className:"buttonGroup buttonGroup__left"},v&&v.length&&null!=y&&y.length?y.map((function(e,t){return v.indexOf(e.label)>-1?i().createElement("div",{className:"toolItem",key:"".concat(e.label,"--").concat(t),onClick:S(e)},"string"==typeof(null==e?void 0:e.icon)?i().createElement(N.J,{key:"".concat(e.label,"--").concat(t),className:"toolItemIcon",type:e.icon}):i().createElement(P.Z,{className:"toolItem",key:"".concat(e.label,"--").concat(t),config:e.icon,data:e.data})):null})):null),d&&i().cloneElement(d,{children:C,rightButtonList:i().createElement("div",{className:"buttonGroup buttonGroup__right"},i().createElement(i().Fragment,null,i().createElement("img",{onClick:function(){var e,t;null==g||null===(e=g.eventBus)||void 0===e||e.publish(l.n.toolsOnClose),null==g||null===(t=g.$refs)||void 0===t||null===(t=t.$usePanel)||void 0===t||null===(t=t.current)||void 0===t||t.toggle(!1)},className:(0,f.er)({toolItem:!0,hidden:"tool"!==m},(null==g||null===(h=g.query)||void 0===h?void 0:h.isPc)||!1),src:Rn.Z}),i().createElement("img",{onClick:E,className:(0,f.er)({toolItem:!0,hidden:"tool"===m},(null==g||null===(p=g.query)||void 0===p?void 0:p.isPc)||!1),src:Mn.Z})))}))):null}));const Kn=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(qn));var zn=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),Wn=/(Android)/i.test(navigator.userAgent),$n=function(e){var t=e.onKeyboardUp,n=e.onKeyboardDown,r=window.innerHeight;if(!zn&&!Wn)return"function"==typeof t&&t(0),void("function"==typeof n&&n(0));(0,Pt.z)((function(e){"function"==typeof e?(r>window.innerHeight&&("function"==typeof t&&t(r-window.innerHeight),e()),r<window.innerHeight&&("function"==typeof n&&(zn?setTimeout((function(){n(window.innerHeight-r)}),80):n(window.innerHeight-r)),e())):("function"==typeof t&&t(0),"function"==typeof n&&n(0))}))},Yn=function(e){var t=e.input,n=e.onKeyboardUp,r=e.onKeyboardDown;if(t){var o=function(){return $n({onKeyboardUp:n})},i=function(){return $n({onKeyboardDown:r})};return t.addEventListener("focus",o,!1),t.addEventListener("blur",i,!1),function(){t.removeEventListener("focus",o),t.removeEventListener("blur",i)}}$n({onKeyboardUp:n,onKeyboardDown:r})};function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jn=i().forwardRef((function(e,t){var n=e.inputRef,r=e.panels,s=e.appContext,a=Zn((0,o.useState)("250px"),2),c=a[0],u=(a[1],Zn(ce(),2)),l=u[0],f=u[1],h=(0,o.useRef)(l),p=function(e){f(e),h.current=e},d=(0,o.useCallback)((function(e){var t,n;if(!1===e)return p(""),void(null==s||null===(t=s.$refs)||void 0===t||null===(t=t.$input)||void 0===t||null===(t=t.current)||void 0===t||t.blur());"keyboard"!==e?"keyboard"===h.current?Yn({onKeyboardDown:function(){p(e)}}):p(e):null==s||null===(n=s.$refs)||void 0===n||null===(n=n.$input)||void 0===n||null===(n=n.current)||void 0===n||n.focus()}),[]);(0,o.useImperativeHandle)(t,(function(){return{toggle:d,getCur:function(){return l}}})),(0,o.useEffect)((function(){var e;window.scrollTo(0,document.body.scrollHeight),null==s||null===(e=s.$refs)||void 0===e||null===(e=e.$scroller)||void 0===e||null===(e=e.current)||void 0===e||e.scrollToBottom(!1)}),[l]),(0,o.useEffect)((function(){var e,t;if(null!=n&&null!==(e=n.current)&&void 0!==e&&e.getEle&&null!=n&&null!==(t=n.current)&&void 0!==t&&t.getEle()){var r=Yn({input:n.current.getEle(),onKeyboardUp:function(e){p("keyboard")},onKeyboardDown:function(e){"keyboard"===h.current&&p("")}});return function(){"function"==typeof r&&r()}}}),[null==n?void 0:n.current]);(0,o.useMemo)((function(){var e;return null===(e=r.find((function(e){return e.name===l})))||void 0===e?void 0:e.panel}),[l,r]);var v=(0,o.useMemo)((function(){return r.some((function(e){return e.name===l}))?"block":"none"}),[l,r]);return i().createElement("div",{style:{height:c,display:v,overflow:"auto",paddingBottom:"var(--safe-bottom)",backgroundColor:"var(--tool-panel-bg)"}},r.map((function(e){var t=e.name,n=e.panel;return i().cloneElement(n,{style:t===l?{}:{display:"none"}})})))}));const Qn=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(Jn));function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==er(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===er(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var or=i().forwardRef((function(e,t){var n,r=e.panels,s=e.appContext,a=nr(ce(),2),c=a[0],l=a[1];(0,o.useImperativeHandle)(t,(function(){return{toggle:h,getCur:function(){return c}}}));var h=function(e){var t;!1!==e?"keyboard"!==e?l(e):null==s||null===(t=s.$refs)||void 0===t||null===(t=t.$input)||void 0===t||null===(t=t.current)||void 0===t||t.focus():l("")},p=(0,o.useMemo)((function(){return r.some((function(e){return e.name===c}))?"block":"none"}),[c,r]);return i().createElement("div",{style:{display:p,overflow:"auto"},className:(0,f.er)(tr({},"".concat(u,"PCPanelWrapper"),!0),null==s||null===(n=s.query)||void 0===n?void 0:n.isPc)},r.map((function(e){var t=e.name,n=e.panel;return i().cloneElement(n,{style:t===c?{}:{display:"none"}})})))}));const ir=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(or));function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}var ar=["func"];function cr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){fr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==sr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dr=(0,Yt.debounce)((function(e){e&&(null==e||e.click())}),300),vr=i().forwardRef((function(e,t){var n,r,s,l,h,p,d,v,y=e.config,g=void 0===y?[]:y,m=e.appContext,_=hr((0,o.useState)(!1),2),b=_[0],w=_[1],x=hr((0,o.useState)(!1),2),O=x[0],E=x[1],S=(0,o.useRef)(null),k=(0,o.useRef)(null),C=Number(null==m||null===(n=m.dialog)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.type),I=Number(null==m||null===(r=m.dialog)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.status);(0,o.useEffect)((function(){var e;null!=m&&null!==(e=m.dialogInfo)&&void 0!==e&&e.id&&!b&&w(!0)}),[null==m||null===(s=m.dialogInfo)||void 0===s?void 0:s.id]);var T=function(e){return function(t){var n,r;switch(e.type){case An.cmd:null==m||null===(n=m.cmd)||void 0===n||n.send(e.data);break;case An.url:null==m||null===(r=m.jsBrige)||void 0===r||r.openWindow(e.data);break;case An.message:(null==m?void 0:m.sendMessage)&&m.sendMessage(lr(lr({},e.data),{},{origin:G}));break;default:var o=e.func,i=cr(e,ar);o&&"function"==typeof o&&o(m,i)}}},A=(0,o.useCallback)((function(){k.current&&S.current&&k.current.scroll({left:k.current.scrollLeft-k.current.offsetWidth<=0?0:k.current.scrollLeft-k.current.offsetWidth,behavior:"smooth"})}),[]),j=(0,o.useCallback)((function(){k.current&&S.current&&k.current.scroll({left:k.current.scrollLeft+k.current.offsetWidth,behavior:"smooth"})}),[]),R=(0,o.useCallback)((function(e){try{var t=e.target;if(e.nativeEvent.isTrusted&&e.stopPropagation(),!e.nativeEvent.isTrusted)return;dr(t)}catch(e){}}),[]);(0,o.useImperativeHandle)(t,(function(){return{getQuickBtnsHeight:function(){var e;return null==k||null===(e=k.current)||void 0===e?void 0:e.clientHeight}}})),(0,o.useEffect)((function(){var e,t;if(null!=k&&null!==(e=k.current)&&void 0!==e&&e.offsetWidth&&null!=S&&null!==(t=S.current)&&void 0!==t&&t.children.length){var n,r,o,i=null==S||null===(n=S.current)||void 0===n?void 0:n.children,s=Array.from(i).reduce((function(e,t){return e+(null==t?void 0:t.offsetWidth)}),0);E((null==m||null===(r=m.query)||void 0===r?void 0:r.isPc)&&M.length&&s+8*i.length>(null===(o=k.current)||void 0===o?void 0:o.offsetWidth))}else E(!1)}),[null===(l=S.current)||void 0===l||null===(l=l.children)||void 0===l?void 0:l.length,k.current]);var M=(0,o.useMemo)((function(){var e;return g&&Array.isArray(g)?null==g||null===(e=g.filter)||void 0===e?void 0:e.call(g,(function(e){var t,n,r;return!("default"===(null==e||null===(t=e.data)||void 0===t?void 0:t.display)&&!(C===a.My.AGENT&&null!=e&&null!==(n=e.data)&&void 0!==n&&n.agentActive||[a.My.ROBOT,a.My.TRANING,a.My.OFFLINE].includes(C)&&null!=e&&null!==(r=e.data)&&void 0!==r&&r.robotActive)||I===a.Mc.ENDING)})):[]}),[C,I,g]);return M.length?i().createElement("div",{className:(0,f.er)((p={},fr(p,"".concat(u,"quickButtons"),!0),fr(p,"quickButtonsDisabled",!b),fr(p,"quickButtonsHidden",!(null!=k&&null!==(h=k.current)&&void 0!==h&&h.clientHeight)),p),(null==m||null===(d=m.query)||void 0===d?void 0:d.isPc)||!1)},O?i().createElement("div",{className:"actionIcon prevAction",onClick:A},i().createElement(N.J,{type:"Left",size:14})):null,i().createElement("div",{className:"quickBtnsWrapper",ref:k},i().createElement("div",{className:(0,f.er)((v={},fr(v,"quickBtnsContent",!0),fr(v,"contentNoPrevNext",!O),v)),ref:S,onClickCapture:R},M.map((function(e,t){return"string"==typeof(null==e?void 0:e.label)?i().createElement("div",{className:"quickButtonItems",onClick:T(e),key:"".concat(null==e?void 0:e.label,"_").concat(t)},i().createElement(c.Button,{size:"small",className:"quickButton"},e.label)):i().createElement(i().Fragment,null,null!=e&&e.label?i().createElement(P.Z,{fallback:!1,key:"".concat(e.label.code,"--").concat(t),config:e.label,data:e.data}):null)})))),O?i().createElement("div",{className:"actionIcon nextAction",onClick:j},i().createElement(N.J,{type:"Right",size:14})):null):null}));const yr=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(vr));var gr=n(7417),mr=["icon"];function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){Or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Or(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Er=i().forwardRef((function(e,t){var n,r=e.config,s=e.appContext,a=e.quickHidden,c=e.style,l=(0,o.useContext)(Vr).getRemoteComponent;(0,o.useEffect)((function(){null==r||r.map((function(e){null!=e&&e.icon&&"string"!=typeof e.icon&&l(e.icon)}))}),[r]);var h=function(e){return function(t){var n,r,o;switch(t.stopPropagation(),null==s||null===(n=s.eventBus)||void 0===n||n.publish(gr.nD.toolPanelClick,e),e.type){case jn.cmd:null==s||null===(r=s.cmd)||void 0===r||r.send(e.data);break;case jn.url:null==s||null===(o=s.jsBrige)||void 0===o||o.openWindow(e.data);break;default:e.data&&"function"==typeof e.data&&e.data(s,e)}}};return i().createElement("div",{className:(0,f.er)((n={},Or(n,"".concat(u,"ToolPanel"),!0),Or(n,"hasQuickBtnGroup",!a),n),!1),style:c,ref:t},null!=r&&r.length?r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.icon,r=xr(e,mr);return n&&i().createElement("div",{className:"toolItem",key:"".concat(r.label,"--").concat(t),onClick:h(wr({icon:n},r))},"string"==typeof n?i().createElement(i().Fragment,null,i().createElement("div",{className:"toolItemIconWrapper"},i().createElement(N.J,{key:"".concat(r.label,"--").concat(t),className:"toolItemIcon",type:n})),i().createElement("span",{className:"toolItemLabel"},r.label)):i().createElement(P.Z,{className:"toolItemIconWrapper",key:"".concat(r.label,"--").concat(t),config:n,layoutConfig:r,extraData:{previewLikeH5:1}}))})):null,Array.from({length:10}).map((function(e,t){return i().createElement("i",{key:"place-".concat(t)})})))}));const Sr=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(Er));var kr=n(5111),Cr=n(6105),Ir=n(4367);function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){jr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Pr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Br=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t,n,r,p,d,v,y,g,m,_,b,w,x=e.appContext,O=void 0===x?{}:x,E=e.style,S=void 0===E?{}:E,k=e.className,C=O||{},T=C.renderConfig,A=C.query,j=void 0===A?{}:A,R=Rr((0,o.useState)({appBottom:null}),2),M=R[0],D=R[1],L=(0,o.useContext)(Vr).getRemoteComponent,N=(0,o.useRef)(null),F=(0,o.useRef)(null),U=(0,o.useRef)(),G=(0,o.useRef)(null),H=(0,o.useRef)(null),V=(0,o.useRef)(null),q=(0,o.useRef)(null),K=(0,o.useRef)(null),z=(0,o.useRef)(null),W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n=(0,o.useRef)(null);return(0,o.useEffect)((function(){var r=function(t){var r=n.current;r&&!r.contains(t.target)&&e&&e(t)};return document.addEventListener(t,r),function(){document.removeEventListener(t,r)}}),[e,t]),n}((function(){var e;null===(e=K.current)||void 0===e||e.toggle(!1)}),"click");(0,o.useImperativeHandle)(N,(function(){return{setRender:function(e,t){D(Ar(Ar({},M),{},jr({},e,t)))}}}),[M]),(0,o.useEffect)((function(){var e;null==T||null===(e=T.toolPanel)||void 0===e||e.map((function(e){null!=e&&e.icon&&"string"!=typeof e.icon&&L(e.icon)}))}),[T]),(0,o.useEffect)((function(){O.$refs.$app=N,O.$refs.$optional=G,O.$refs.$quickButtons=V,O.$refs.$input=H,O.$refs.$toolPanel=q,O.$refs.$usePanel=K,O.$refs.$scroller=U,O.$refs.$ghost=z}),[]);var $=(0,o.useMemo)((function(){return{position:"fixed",top:j.isPc&&null!=T&&T.navbar&&!Ir.xK?38:0,background:"transparent",width:"100%",zIndex:2}}),[j.isPc,null==T?void 0:T.navbar]),Y=(0,o.useCallback)((function(){var e;null!=j&&j.isPc&&(null===(e=K.current)||void 0===e||e.toggle(!1))}),[j.isPc]);return O.appStatus===s.Fw.APP_ON_ERROR?i().createElement(c.ErrorBlock,{title:a.oc.t("there_are_some_small_problems_with_the_page_",{},"页面遇到一些小问题"),description:a.oc.t("you_can_try_to_refresh_it_",{},"可以尝试刷新试试"),fullPage:!0,status:"default"}):O.appLoading?i().createElement(Cr.Z,null):i().createElement(i().Fragment,null,null!=O&&null!==(t=O.watchOfflineForm)&&void 0!==t&&t.renderReactForm?i().createElement(P.Z,{fallback:!0,config:null==O||null===(n=O.watchOfflineForm)||void 0===n?void 0:n.formRenderData,extraData:null==O||null===(r=O.watchOfflineForm)||void 0===r?void 0:r.extraData}):i().createElement("div",{className:(0,f.er)((p={},jr(p,"".concat(u,"JarvisApp"),!0),jr(p,"".concat(k||""),!0),p),null==O||null===(d=O.query)||void 0===d?void 0:d.isPc),style:S},j.isPc&&null!=T&&T.navbar?i().createElement(Pn,{ref:F,config:null==T?void 0:T.navbar}):null,i().createElement(kr.Z,{appContext:O}),(null==T?void 0:T.headerFix)&&i().createElement("div",{className:"FixTopDiv",style:$},i().createElement(P.Z,{config:null==T?void 0:T.headerFix})),i().createElement(kn,{config:null==T?void 0:T.avatars,ref:U}),(null==M?void 0:M.appBottom)!==Tn.hidden?i().createElement("div",{className:"JarvisAppBottom",ref:W},null!=T&&T.quickButtons&&null!=T&&T.quickButtons.length?i().createElement(yr,{config:null==T?void 0:T.quickButtons,ref:V}):null,i().createElement(Kn,{toolPanelList:null==T?void 0:T.toolPanel,config:null==T?void 0:T.inputExt,ref:G},i().createElement(et,{onBlur:function(){var e;null==O||null===(e=O.eventBus)||void 0===e||e.publish(l.n.inputOnBlur)},onFocus:function(){var e;null==O||null===(e=O.eventBus)||void 0===e||e.publish(l.n.inputOnFocus)},ref:H,onSend:Y})),j.isPc?i().createElement(ir,{ref:K,inputRef:H,panels:[{name:"emoji",panel:i().createElement(I,{query:O.query,quickHidden:!(null!==(v=V.current)&&void 0!==v&&v.getQuickBtnsHeight()),onClick:function(e){var t;null===(t=H.current)||void 0===t||t.input(e)}})},{name:"tool",panel:i().createElement(Sr,{quickHidden:!(null!=T&&null!==(y=T.quickButtons)&&void 0!==y&&y.length),config:null==T?void 0:T.toolPanel,ref:q})}]}):i().createElement(Qn,{ref:K,inputRef:H,panels:[{name:"emoji",panel:i().createElement(I,{query:O.query,onClick:function(e){var t;null===(t=H.current)||void 0===t||t.input(e)}})},{name:"tool",panel:i().createElement(Sr,{config:null==T?void 0:T.toolPanel,ref:q})}]})):null,i().createElement(c.Popup,{visible:null===(g=O.renderConfig.popConfig)||void 0===g?void 0:g.visible,position:"right",bodyStyle:{width:"100vw"}},null!==(m=O.renderConfig.popConfig)&&void 0!==m&&m.visible?i().createElement(P.Z,{fallback:!0,loadIcon:i().createElement(Cr.Z,null),inCardRender:!0,config:null===(_=O.renderConfig.popConfig)||void 0===_?void 0:_.componentConfig,extraData:null===(b=O.renderConfig.popConfig)||void 0===b?void 0:b.componentData,message:null===(w=O.renderConfig.popConfig)||void 0===w?void 0:w.message}):null),i().createElement(h,null),i().createElement(B,{ref:z})))})));var Dr=n(1047);const Lr=(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)((function(e){var t,n,r,o,u,l=e.appContext;return null!=l&&null!==(t=l.renderConfig)&&void 0!==t&&null!==(t=t.card)&&void 0!==t&&t.componentConfig||(null==l?void 0:l.appStatus)!==s.Fw.CHANNEL_DID_MOUNT?(null==l?void 0:l.appStatus)===s.Fw.APP_ON_ERROR?i().createElement(c.ErrorBlock,{title:a.oc.t("there_are_some_small_problems_with_the_page_",{},"页面遇到一些小问题"),description:a.oc.t("you_can_try_to_refresh_it_",{},"可以尝试刷新试试"),fullPage:!0,status:"default"}):null!=l&&null!==(n=l.renderConfig)&&void 0!==n&&null!==(n=n.card)&&void 0!==n&&n.componentConfig?i().createElement(P.Z,{message:null==l||null===(r=l.renderConfig)||void 0===r?void 0:r.card.message,appContext:l,config:null==l||null===(o=l.renderConfig)||void 0===o?void 0:o.card.componentConfig,extraData:null==l||null===(u=l.renderConfig)||void 0===u?void 0:u.card.componentData,inCardRender:!0}):i().createElement(Cr.Z,null):i().createElement(c.ErrorBlock,{fullPage:!0,status:"default",title:a.oc.t("invalid_card",{},"无效的卡片"),description:null})})));function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}var Fr=["onUnmount","appContext","viewMode"];function Ur(){Ur=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),a=new T(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function _(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,s)&&(b=x);var O=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Nr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,s){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Nr(t)+" is not iterable")}return m.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Gr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Hr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Vr=i().createContext({});const qr=function(e){var t=e.onUnmount,n=e.appContext,s=e.viewMode,a=Hr(e,Fr);(0,o.useEffect)((function(){return function(){t&&t()}}),[]);var c=function(){var e,t=(e=Ur().mark((function e(t){var o,i,s;return Ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(o=n.libraray)||void 0===o?void 0:o.getComponent(t);case 3:return i=e.sent,e.abrupt("return",{default:(0,r.f3)((function(e){return{appContext:e.appContext}}))((0,r.Pi)(i))});case 7:throw e.prev=7,e.t0=e.catch(0),null===(s=n.logger)||void 0===s||s.error("getRemoteComponentError_".concat(t.code),{error:e.t0}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Gr(i,r,o,s,a,"next",e)}function a(e){Gr(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();return i().createElement(Vr.Provider,{value:{appContext:n,getRemoteComponent:c}},i().createElement(r.zt,{appContext:n},s===Dr.w.Card?i().createElement(Lr,null):i().createElement(Br,a)))}},7609:(e,t,n)=>{"use strict";n.d(t,{Dk:()=>p,KH:()=>v,Lk:()=>h,bs:()=>d,dD:()=>a});var r=n(4754);function o(){o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),a=new j(r||[]);return i(s,"_invoke",{value:I(e,n,a)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function _(){}function b(){}function w(){}var x={};f(x,c,(function(){return this}));var O=Object.getPrototypeOf,E=O&&O(O(R([])));E&&E!==n&&r.call(E,c)&&(x=E);var S=w.prototype=_.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(o,i,a,c){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var o=d;return function(i,s){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=P(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?g:v,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=w,i(S,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(C.prototype),f(C.prototype,u,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new C(h(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(S),f(S,l,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function i(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(){var e=window.location.search;if(!e)return{};var t={},n=e.substring(e.indexOf("?")+1,e.length).split("&");for(var r in n){var o=n[r].split("=");t[o[0]]=o[1]}return t}var c,u,l=function(e){return new Promise((function(t,n){var o=new FileReader;o.addEventListener("load",(function(){var i=new Image;i.src=o.result,i.onload=function(){t({name:e.name,src:o.result,height:"".concat(i.height),width:"".concat(i.width)}||null)},i.onerror=function(){n(r.oc.t("image_type_is_wrong_",{},"图片类型有误"))}})),o.addEventListener("error",(function(e){n(e)})),o.readAsDataURL(e)}))},f=function(e,t){return Math.round(e*t)/t},h=/^(3|39|626)$/.test(n.j)?null:(c=o().mark((function e(t){var n,i,s,a,c,u,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=0;case 2:if(!(i<t.length)){e.next=27;break}return s=t[i],e.prev=4,e.next=7,l(s);case 7:a=e.sent,c=a.src,u=a.width,h=a.height,s.status=1,s.tempUrl=c,s.showSize=(o=s.size,(o=Number(o))<1e6?f(o/1e3,100)+"K":f(o/1e6,100)+"M"),s.imageSize={width:u,height:h},s.size>314572800&&(s.status=0,s.errorMessage=r.oc.t("sending_pictures_supports_a_maximum_of_300m__exceeding_the_limit!",{},"发送图片最大支持300M，超出限制！")),n.push(s),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(4),s.status=0,s.errorMessage=r.oc.t("image_loading_failed",{},"图片加载失败"),n.push(s);case 24:i++,e.next=2;break;case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}var o}),e,null,[[4,19]])})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=c.apply(e,t);function s(e){i(o,n,r,s,a,"next",e)}function a(e){i(o,n,r,s,a,"throw",e)}s(void 0)}))},function(e){return u.apply(this,arguments)}),p=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){var r=new Image;r.src=n.result,r.onload=function(){t({name:e.name,src:n.result,height:r.height,width:r.width,instance:e})},r.onerror=function(){t({name:e.name,instance:e,isError:!0})}})),n.readAsDataURL(e)}))},d=function(e){return new Promise((function(t,n){var o=document.createElement("video");o.preload="metadata",o.src=URL.createObjectURL(e);var i=setTimeout((function(){n(new Error(r.oc.t("loading_video_timed_out",{},"加载视频超时")))}),1e3);o.addEventListener("loadeddata",(function(){window.URL.revokeObjectURL(o.src),clearTimeout(i),t({height:o.videoHeight,width:o.videoWidth})})),o.addEventListener("error",(function(){window.URL.revokeObjectURL(o.src),clearTimeout(i),n(new Error(r.oc.t("error_loading_video",{},"加载视频出错")))}))}))},v=function(){return!!navigator.userAgent.match(/(Lark)\/([\d.]+)/)}},6261:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=void 0;t=window.requestAnimationFrame((function o(i){void 0===r&&(r=i),i-r<n?(t=window.requestAnimationFrame(o),e((function(){window.cancelAnimationFrame(t)}))):e()}))}},8322:(e,t,n)=>{"use strict";if(n.d(t,{B2:()=>c,er:()=>u}),!/^(3|39|626)$/.test(n.j))var r=n(8904);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){e.style.transform=t,e.style.webkitTransform=t},u=function(e,t){return(0,r.Z)(s(s({},e),{},{__linkchat_pc_render__:t||!1}))}},7031:(e,t,n)=>{"use strict";n.d(t,{NI:()=>b,Lk:()=>y,b3:()=>w,c5:()=>_,v9:()=>c,k5:()=>S,rb:()=>g,v$:()=>m,I7:()=>d,O9:()=>u,Bs:()=>v,HF:()=>s,P6:()=>l,uX:()=>p,zn:()=>E,_:()=>a});var r=n(6207);const o="release/0.7.5",i="263f279",s={sdkVersion:"0.7.5",refer:r.m.Refer.PC,buildNumber:`${i}:${o}`,wsProtocols:["binary","base64","pbbp2"],ticketType:r.m.TicketType.TICKET_TYPE_WEB,envKey:"X-Tt-Env",boeHeaderKey:"X-Use-Boe",ppeHeaderKey:"X-Use-Ppe",requestAccessName:"web_sdk",heartbeatInterval:15e3,maxHeartbeatEmptyWindow:3e4,conversationRefreshCount:10};var a,c;!function(e){e[e.Default=0]="Default",e[e.PushOnly=1]="PushOnly",e[e.All=2]="All",e[e.Disable=3]="Disable"}(a||(a={})),function(e){e.MessageMode="s:mode",e.SendResponseStatus="s:send_response_status",e.SendResponseExtraInfo="s:send_response_extra_info",e.SendResponseCheckCode="s:send_response_check_code",e.SendResponseCheckMessage="s:send_response_check_msg",e.ClientMessageId="s:client_message_id",e.MentionedUser="s:mentioned_users",e.DoNotIncreaseUnread="s:do_not_increase_unread",e.DoNotPopConversation="s:do_not_pop_conversation",e.IsRecalled="s:is_recalled",e.ServerMessageId="s:server_message_id",e.LocalLogId="s:local_logid",e.MessageVisible="s:visible",e.MessageInvisible="s:invisible",e.RelationIsMuted="s:relation_is_muted",e.RelationNormalOnly="s:relation_normal_only",e.RelationMuteTime="s:relation_mute_time",e.RelationMuteExt="s:relation_mute_ext",e.MessageSourceAppId="s:biz_aid",e.ConversationSourceAppId="s:s_aid",e.MarkActionType="s:action_type",e.IsRootReference="s:is_root_ref",e.MarkMessageNewExt="s:mark_message_new_ext",e.AckSampling="s:is_ack_sampling",e.AckSamplingShow="s:is_ack_sampling_show",e.DoNotUpdateLastMessage="s:do_not_update_last_msg",e.DoNotMoveReadIndex="s:do_not_move_read_index",e.FileExtKeyAudioAsrText="s:file_ext_key_audio_asr_text",e.RecognitionResponseCheckCode="s:recognition_response_check_code",e.RecognitionResponseCheckMsg="s:recognition_response_check_msg",e.PushPartDisableConfig="s:push_part_disable_config",e.MustNotify="s:must_notify"}(c||(c={}));const u="mute_wl";var l,f,h,p,d,v,y,g,m,_,b,w,x,O,E,S;!function(e){e[e.Enable=0]="Enable",e[e.Disable=1]="Disable"}(l||(l={})),function(e){e[e.SingleChat=1]="SingleChat",e[e.GroupChat=2]="GroupChat",e[e.LiveChat=3]="LiveChat"}(f||(f={})),function(e){e[e.Normal=0]="Normal",e[e.Dissolved=1]="Dissolved"}(h||(h={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(p||(p={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(d||(d={})),function(e){e[e.Unknown=0]="Unknown",e[e.Allow=1]="Allow",e[e.Disable=2]="Disable",e[e.PartAllow=3]="PartAllow"}(v||(v={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(y||(y={})),function(e){e[e.NotAvailable=0]="NotAvailable",e[e.Start=1]="Start",e[e.Error=2]="Error",e[e.Succeeded=3]="Succeeded"}(g||(g={})),function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.LoadMore=2]="LoadMore",e[e.Init=3]="Init",e[e.UserInbox=4]="UserInbox",e[e.BroadcastLoadMore=5]="BroadcastLoadMore",e[e.Offline=6]="Offline"}(m||(m={})),function(e){e.Error="error",e.WebSocketConnected="websocket-connected",e.WebSocketDisconnected="websocket-disconnected",e.WebSocketReceiveUnexpectedFrame="websocket-receive-unexpected-frame",e.ReceiveNewMessage="receive-new-message",e.ReceiveSelfMessage="receive-self-message",e.ReceiveCommandMessage="receive-command-message",e.ReceiveBroadcastNewMessage="receive-broadcast-new-message",e.ReceiveBroadcastSelfMessage="receive-broadcast-self-message",e.ReceiveNewUpdateExtMessage="receive-new-update-ext-message",e.ReceiveNewP2PMessage="receive-new-p2p-message",e.MessageUpsert="message-upsert",e.ConversationChange="conversation-change",e.ConversationUpsert="conversation-upsert",e.ConversationDissolve="conversation-dissolve",e.ConversationBlock="conversation-block",e.ParticipantUpsert="participant-upsert",e.ParticipantJoin="participant-join",e.ParticipantLeave="participant-leave",e.ParticipantBlock="participant-block",e.MessageSend="message-send",e.MessageRecall="message-recall",e.MessageDelete="message-delete",e.ConversationDelete="conversation-delete",e.ConversationLeave="conversation-leave",e.ConversationCreate="conversation-create",e.ConversationJoin="conversation-join",e.ReceiveNewStrangerMessage="receive-new-stranger-message",e.StrangerUpgrade="stranger-upgrade",e.ReceiveRtc="receive-rtc",e.MessagePropertyUpsert="message-property-upsert",e.InitLoadPage="init-load-page",e.InitFinish="init-finish"}(_||(_={})),function(e){e[e.Unknown=-1]="Unknown",e[e.Success=0]="Success",e[e.InvalidToken=1]="InvalidToken",e[e.InvalidTicket=2]="InvalidTicket",e[e.InvalidRequest=4]="InvalidRequest",e[e.InvalidCommand=5]="InvalidCommand",e[e.ServerError=6]="ServerError",e[e.UserForbidden=11]="UserForbidden",e[e.MessageTargetConversationNotExist=15]="MessageTargetConversationNotExist",e[e.Degradation=16]="Degradation",e[e.RecallTimeout=17]="RecallTimeout",e[e.CallbackDeny=19]="CallbackDeny",e[e.ExpiredToken=100]="ExpiredToken",e[e.InvalidParam=400]="InvalidParam",e[e.ResourceExhausted=429]="ResourceExhausted",e[e.InternalError=500]="InternalError",e[e.InvalidInboxType=1e3]="InvalidInboxType",e[e.ConversationNotExist=1001]="ConversationNotExist",e[e.MessageNotExist=1002]="MessageNotExist",e[e.MessageOffline=1003]="MessageOffline",e[e.UnknownMessageType=1004]="UnknownMessageType",e[e.InvalidServerId=1005]="InvalidServerId",e[e.MessageNotReady=1006]="MessageNotReady",e[e.TokenFuncError=1007]="TokenFuncError",e[e.NetworkError=1008]="NetworkError",e[e.AlreadyDispose=1009]="AlreadyDispose",e[e.NoAdapter=1010]="NoAdapter",e[e.ComponentNotFound=1011]="ComponentNotFound",e[e.NotImplemented=1012]="NotImplemented",e[e.MPInvalidArgument=10001]="MPInvalidArgument",e[e.MPServerUrlError=10002]="MPServerUrlError",e[e.MPNotFileMsg=10003]="MPNotFileMsg",e[e.MPUploadError=10004]="MPUploadError",e[e.MPNotSupportCipher=10005]="MPNotSupportCipher",e[e.RtcUnknown=10100]="RtcUnknown",e[e.RtcCreateRoomFail=10101]="RtcCreateRoomFail",e[e.RtcStartCallFail=10102]="RtcStartCallFail",e[e.RtcAlreadyCalling=10103]="RtcAlreadyCalling",e[e.RtcAlreadyOnTheCall=10104]="RtcAlreadyOnTheCall",e[e.RtcNotCalling=10105]="RtcNotCalling",e[e.RtcNotOnTheCall=10106]="RtcNotOnTheCall",e[e.RtcNotRinging=10107]="RtcNotRinging",e[e.RtcAcceptFail=10108]="RtcAcceptFail",e[e.RtcCheckStatusFail=10109]="RtcCheckStatusFail",e[e.RtcInvalidParam=10110]="RtcInvalidParam",e[e.RtcNotInit=10111]="RtcNotInit",e[e.RtcNoClient=10112]="RtcNoClient",e[e.RtcNoInfo=10113]="RtcNoInfo",e[e.RtcNoStream=10114]="RtcNoStream",e[e.RtcSdkError=10115]="RtcSdkError",e[e.RtcNotSupported=10116]="RtcNotSupported",e[e.DbOpError=2e4]="DbOpError",e[e.StorageCryptoError=20001]="StorageCryptoError",e[e.AuthSignError=10201]="AuthSignError"}(b||(b={})),function(e){e[e.Created=0]="Created",e[e.Preparing=1]="Preparing",e[e.Inflight=2]="Inflight",e[e.Succeeded=3]="Succeeded",e[e.Received=4]="Received",e[e.Failed=-1]="Failed",e[e.Rejected=-2]="Rejected",e[e.SelfVisible=-3]="SelfVisible"}(w||(w={})),function(e){e[e.Succeeded=0]="Succeeded",e[e.UserNotInConversation=1]="UserNotInConversation",e[e.CheckConversationNotPass=2]="CheckConversationNotPass",e[e.CheckMessageNotPass=3]="CheckMessageNotPass",e[e.CheckMessageNotPassButSelfVisible=4]="CheckMessageNotPassButSelfVisible",e[e.UserHasBeenBlock=5]="UserHasBeenBlock"}(x||(x={})),function(e){e[e.Succeeded=0]="Succeeded",e[e.Rejected=1]="Rejected",e[e.PartialRejected=2]="PartialRejected"}(O||(O={})),function(e){e[e.Immediate=0]="Immediate",e[e.Throttle=1]="Throttle",e[e.Debounce=2]="Debounce",e[e.ThrottleWithArgs=3]="ThrottleWithArgs",e[e.DebounceWithArgs=4]="DebounceWithArgs"}(E||(E={})),function(e){e[e.Default=0]="Default",e[e.AwemeMode=1]="AwemeMode"}(S||(S={}))},724:(e,t,n)=>{"use strict";if(n.d(t,{Tv:()=>i.Tv,b3:()=>o.b3,me:()=>r.m}),!/^(3|39|626)$/.test(n.j))var r=n(6207);if(!/^(3|39|626)$/.test(n.j))var o=n(7031);if(!/^(3|39|626)$/.test(n.j))var i=n(5579)},5579:(e,t,n)=>{"use strict";var r,o,i,s;n.d(t,{I:()=>o,L3:()=>i,Qq:()=>a,R0:()=>s,Tv:()=>r,oQ:()=>c}),function(e){e.Image="image",e.Video="video",e.Audio="audio",e.CommonFile="object"}(r||(r={})),function(e){e.Uri="s:file_ext_key_uri",e.Type="s:file_ext_key_type",e.AppId="s:file_ext_key_source_app_id",e.NeedEncrypt="s:file_ext_key_need_encrypt",e.EncryptUri="s:file_ext_key_encrypt_uri",e.Vid="s:file_ext_key_vid",e.FileName="s:file_ext_key_file_name",e.ImgHeight="s:file_ext_key_original_height",e.ImgWidth="s:file_ext_key_original_width",e.ImgThumbHeight="s:file_ext_key_thumb_height",e.ImgThumbWidth="s:file_ext_key_thumb_width",e.ImgThumbUrl="s:file_ext_key_thumb_url",e.ImgPreviewUrl="s:file_ext_key_preview_url",e.ImgPreviewHeight="s:file_ext_key_preview_height",e.ImgPreviewWidth="s:file_ext_key_preview_width",e.ImgPreviewEncryptUrl="s:file_ext_key_preview_encrypt_url",e.ImgThumbEncryptUrl="s:file_ext_key_thumb_encrypt_url",e.ImgUseImageX="s:file_ext_key_use_imagex",e.ImgSuffix="s:file_ext_key_img_suffix",e.VideoCoverUri="s:file_ext_key_video_cover_uri",e.VideoCoverUrl="s:file_ext_key_video_cover_url",e.VideoDuration="s:file_ext_key_video_duration",e.VideoWidth="s:file_ext_key_video_width",e.VideoHeight="s:file_ext_key_video_height",e.AudioDuration="s:file_ext_key_audio_duration"}(o||(o={})),function(e){e.Image="file_ext_value_type_image",e.Video="file_ext_value_type_video",e.Audio="file_ext_value_type_audio",e.Object="file_ext_value_type_object",e.File="file_ext_value_type_file"}(i||(i={})),function(e){e.Obj="tplv-obj",e.Resize="tplv-resize"}(s||(s={}));const a="image",c={vsdkVersion:"v5",uploadRegion:"cn-north-1"}},6207:(e,t,n)=>{"use strict";n.d(t,{m:()=>l});var r=n(4183),o=n(4546),i=n.n(o);r.util.Long=i(),r.configure();const s=r.Reader,a=r.Writer,c=r.util,u=r.roots.default||(r.roots.default={}),l=u.im_proto=(()=>{const e={};return e.Frame=function(){function e(e){if(this.headers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seqid=c.Long?c.Long.fromBits(0,0,!0):0,e.prototype.logid=c.Long?c.Long.fromBits(0,0,!0):0,e.prototype.service=0,e.prototype.method=0,e.prototype.headers=c.emptyArray,e.prototype.payload_encoding="",e.prototype.payload_type="",e.prototype.payload=c.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),t.uint32(8).uint64(e.seqid),t.uint32(16).uint64(e.logid),t.uint32(24).int32(e.service),t.uint32(32).int32(e.method),null!=e.headers&&e.headers.length)for(var n=0;n<e.headers.length;++n)u.im_proto.Frame.ExtendedEntry.encode(e.headers[n],t.uint32(42).fork()).ldelim();return null!=e.payload_encoding&&Object.hasOwnProperty.call(e,"payload_encoding")&&t.uint32(50).string(e.payload_encoding),null!=e.payload_type&&Object.hasOwnProperty.call(e,"payload_type")&&t.uint32(58).string(e.payload_type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.Frame;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.seqid=e.uint64();break;case 2:r.logid=e.uint64();break;case 3:r.service=e.int32();break;case 4:r.method=e.int32();break;case 5:r.headers&&r.headers.length||(r.headers=[]),r.headers.push(u.im_proto.Frame.ExtendedEntry.decode(e,e.uint32()));break;case 6:r.payload_encoding=e.string();break;case 7:r.payload_type=e.string();break;case 8:r.payload=e.bytes();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("seqid"))throw c.ProtocolError("missing required 'seqid'",{instance:r});if(!r.hasOwnProperty("logid"))throw c.ProtocolError("missing required 'logid'",{instance:r});if(!r.hasOwnProperty("service"))throw c.ProtocolError("missing required 'service'",{instance:r});if(!r.hasOwnProperty("method"))throw c.ProtocolError("missing required 'method'",{instance:r});return r},e.ExtendedEntry=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(10).string(e.key),t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.Frame.ExtendedEntry;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("key"))throw c.ProtocolError("missing required 'key'",{instance:r});if(!r.hasOwnProperty("value"))throw c.ProtocolError("missing required 'value'",{instance:r});return r},e}(),e}(),e.IMCMD=function(){const e={},t=Object.create(e);return t[e[100]="SEND_MESSAGE"]=100,t[e[200]="GET_MESSAGES_BY_USER"]=200,t[e[203]="GET_MESSAGES_BY_USER_INIT_V2"]=203,t[e[211]="GET_MESSAGE_INFO_BY_SERVER_ID"]=211,t[e[301]="GET_MESSAGES_BY_CONVERSATION"]=301,t[e[302]="GET_MESSAGES_CHECKINFO_IN_CONVERSATION"]=302,t[e[410]="SEND_USER_ACTION"]=410,t[e[411]="SEND_INPUT_STATUS"]=411,t[e[500]="NEW_MSG_NOTIFY"]=500,t[e[504]="NEW_P2P_MSG_NOTIFY"]=504,t[e[505]="NEW_BROADCAST_MSG_NOTIFY"]=505,t[e[603]="MARK_CONVERSATION_DELETE"]=603,t[e[609]="CREATE_CONVERSATION_V2"]=609,t[e[610]="GET_CONVERSATION_INFO_LIST_V2"]=610,t[e[611]="GET_CONVERSATION_INFO_LIST_BY_FAVORITE_V2"]=611,t[e[612]="GET_CONVERSATION_INFO_LIST_BY_TOP_V2"]=612,t[e[614]="DISSOLVE_CONVERSATION"]=614,t[e[615]="GET_CONVERSATIONS_CHECKINFO"]=615,t[e[605]="CONVERSATION_PARTICIPANTS_LIST"]=605,t[e[650]="ADD_CONVERSATION_PARTICIPANTS"]=650,t[e[651]="REMOVE_CONVERSATION_PARTICIPANTS"]=651,t[e[652]="LEAVE_CONVERSATION"]=652,t[e[654]="MGET_CONVERSATION_PARTICIPANTS"]=654,t[e[655]="UPDATE_CONVERSATION_PARTICIPANT"]=655,t[e[701]="DELETE_MESSAGE"]=701,t[e[702]="RECALL_MESSAGE"]=702,t[e[705]="SET_MESSAGE_PROPERTY"]=705,t[e[901]="GET_CONVERSATION_CORE_INFO"]=901,t[e[902]="SET_CONVERSATION_CORE_INFO"]=902,t[e[904]="UPSERT_CONVERSATION_CORE_EXT_INFO"]=904,t[e[921]="SET_CONVERSATION_SETTING_INFO"]=921,t[e[922]="UPSERT_CONVERSATION_SETTING_EXT_INFO"]=922,t[e[1001]="GET_STRANGER_CONVERSATION_LIST"]=1001,t[e[1002]="GET_STRANGER_MESSAGES_IN_CONVERSATION"]=1002,t[e[1003]="DELETE_STRANGER_MESSAGE"]=1003,t[e[1004]="DELETE_STRANGER_CONVERSATION"]=1004,t[e[1005]="DELETE_ALL_STRANGER_CONVERSATIONS"]=1005,t[e[1006]="MARK_STRANGER_CONVERSATION_READ"]=1006,t[e[1007]="MARK_ALL_STRANGER_CONVERSATIONS_READ"]=1007,t[e[1099]="STRANGER_NEW_MSG_NOTIFY"]=1099,t[e[2e3]="GET_CONVERSATION_PARTICIPANTS_READ_INDEX_V3"]=2e3,t[e[2001]="GET_CONVERSATION_PARTICIPANTS_MIN_INDEX_V3"]=2001,t[e[2002]="MARK_CONVERSATION_READ_V3"]=2002,t[e[2003]="GET_MEDIA_UPLOAD_TOKEN"]=2003,t[e[2004]="GET_MEDIA_URLS"]=2004,t[e[2005]="GET_TICKET"]=2005,t[e[2006]="GET_USER_CONVERSATION_LIST"]=2006,t[e[2007]="BROADCAST_SEND_MESSAGE"]=2007,t[e[2008]="BROADCAST_RECV_MESSAGE"]=2008,t[e[2009]="BROADCAST_USER_COUNTER"]=2009,t[e[2010]="CLIENT_ACK"]=2010,t[e[2011]="CREATE_VOIP"]=2011,t[e[2012]="CALL_VOIP"]=2012,t[e[2013]="UPDATE_VOIP"]=2013,t[e[2014]="HEARTBEAT_CHANNEL"]=2014,t[e[2015]="PROFILE_GET_INFO"]=2015,t[e[2016]="REPORT_CLIENT_METRICS"]=2016,t[e[2017]="GET_CONFIGS"]=2017,t[e[2021]="MODIFY_MESSAGE_EXT"]=2021,t[e[2018]="UNREAD_COUNT_REPORT"]=2018,t[e[2019]="BLOCK_MEMBERS"]=2019,t[e[2020]="BLOCK_CONVERSATION"]=2020,t[e[2030]="GET_UNREAD_COUNT"]=2030,t[e[2031]="SEND_MESSAGE_P2P"]=2031,t[e[2032]="GET_BLOCKLIST"]=2032,t[e[2033]="SET_BLOCKLIST"]=2033,t[e[2034]="CHECK_IN_BLOCKLIST"]=2034,t[e[2036]="MARK_MESSAGE"]=2036,t[e[2037]="PULL_MARK_MESSAGE"]=2037,t[e[2038]="BATCH_GAT_CONVERSATION_PARTICIPANTS_READINDEX"]=2038,t[e[2043]="GET_MESSAGE_BY_INIT"]=2043,t[e[2054]="MARK_MSG_UNREAD_COUNT_REPORT"]=2054,t[e[2055]="MARK_MSG_GET_UNREAD_COUNT"]=2055,t[e[2056]="BATCH_UNMARK_MESSAGE"]=2056,t[e[2057]="CLIENT_BATCH_ACK"]=2057,t[e[2059]="AUDIO_RECOGNITION"]=2059,t}(),e.StatusCode=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1]="INVALID_TOKEN"]=1,t[e[100]="EXPIRED_TOKEN"]=100,t[e[2]="INVALID_TICKET"]=2,t[e[4]="INVALID_REQUEST"]=4,t[e[5]="INVALID_CMD"]=5,t[e[6]="SERVER_ERR"]=6,t[e[11]="USER_FORBIDDEN"]=11,t[e[500]="INTERNAL_ERROR"]=500,t[e[15]="MESSAGE_TARGET_CONVERSATION_NOT_EXIST"]=15,t[e[16]="DEGRADATION_ERROR"]=16,t[e[17]="RECALL_TIMEOUT"]=17,t[e[19]="CALLBACK_DENY"]=19,t}(),e.SendMessageStatus=function(){const e={},t=Object.create(e);return t[e[0]="SEND_SUCCEED"]=0,t[e[1]="USER_NOT_IN_CONVERSATION"]=1,t[e[2]="CHECK_CONV_NOT_PASS"]=2,t[e[3]="CHECK_MSG_NOT_PASS"]=3,t[e[4]="CHECK_MSG_NOT_PASS_BUT_SELF_VISIBLE"]=4,t}(),e.Refer=function(){const e={},t=Object.create(e);return t[e[1]="ANDROID"]=1,t[e[2]="IOS"]=2,t[e[3]="PC"]=3,t[e[4]="SERVER"]=4,t}(),e.ConversationType=function(){const e={},t=Object.create(e);return t[e[1]="ONE_TO_ONE_CHAT"]=1,t[e[2]="GROUP_CHAT"]=2,t[e[3]="LIVE_CHAT"]=3,t[e[4]="BROADCAST_CHAT"]=4,t}(),e.MessageType=function(){const e={},t=Object.create(e);return t[e[1]="LEGACY_MESSAGE_TYPE_SYSTEM"]=1,t[e[2]="LEGACY_MESSAGE_TYPE_IMAGE"]=2,t[e[3]="LEGACY_MESSAGE_TYPE_AUDIO"]=3,t[e[4]="LEGACY_MESSAGE_TYPE_VIDEO"]=4,t[e[5]="LEGACY_MESSAGE_TYPE_EMOJI"]=5,t[e[6]="LEGACY_MESSAGE_TYPE_FILE"]=6,t[e[7]="LEGACY_MESSAGE_TYPE_TEXT"]=7,t[e[8]="LEGACY_MESSAGE_TYPE_USER_CARD"]=8,t[e[9]="LEGACY_MESSAGE_TYPE_TOAST"]=9,t[e[10]="LEGACY_MESSAGE_TYPE_GROUP_CARD"]=10,t[e[10001]="MESSAGE_TYPE_TEXT"]=10001,t[e[10002]="MESSAGE_TYPE_STICKER"]=10002,t[e[10003]="MESSAGE_TYPE_IMAGE"]=10003,t[e[10004]="MESSAGE_TYPE_VIDEO"]=10004,t[e[10005]="MESSAGE_TYPE_FILE"]=10005,t[e[10006]="MESSAGE_TYPE_AUDIO"]=10006,t[e[10007]="MESSAGE_TYPE_LOCATION"]=10007,t[e[10008]="MESSAGE_TYPE_SYSTEM"]=10008,t[e[10009]="MESSAGE_TYPE_LINK"]=10009,t[e[50001]="MESSAGE_TYPE_COMMAND"]=50001,t[e[50002]="MESSAGE_TYPE_UPDATE_MESSAGE_EXT"]=50002,t[e[50010]="MESSAGE_TYPE_MODE_CHANGE"]=50010,t[e[50003]="MESSAGE_TYPE_UPDATE_MIN_INDEX"]=50003,t[e[50004]="MESSAGE_TYPE_USER_ACTION"]=50004,t[e[50005]="MESSAGE_TYPE_CONVERSATION_DESTROY"]=50005,t[e[50011]="MESSAGE_TYPE_BLOCK_COMMAND"]=50011,t[e[50012]="MESSAGE_TYPE_MARK_COMMAND"]=50012,t[e[50013]="MESSAGE_TYPE_READ_COMMAND"]=50013,t[e[50016]="MESSAGE_TYPE_BATCH_UNMARK_COMMAND"]=50016,t[e[60001]="MESSAGE_TYPE_NOTIFY_COMMAND"]=60001,t[e[70001]="MESSAGE_TYPE_MESSAGE_PROPERTY"]=70001,t[e[70002]="MESSAGE_TYPE_UPDATE_MESSAGE_PROPERTY"]=70002,t[e[80001]="MESSAGE_TYPE_VOIP_COMMAND"]=80001,t[e[80002]="MESSAGE_TYPE_VOIP_CARD_COMMAND"]=80002,t[e[80003]="MESSAGE_TYPE_VOIP_SINGLE_CHAT_STATUS_COMMAND"]=80003,t[e[80004]="MESSAGE_TYPE_VOIP_CALLEE_LIST_UPDATE_NOTIFY"]=80004,t}(),e.GroupRole=function(){const e={},t=Object.create(e);return t[e[0]="ORDINARY"]=0,t[e[1]="OWNER"]=1,t[e[2]="MANAGER"]=2,t[e[3]="VISITOR"]=3,t}(),e.TicketType=function(){const e={},t=Object.create(e);return t[e[1]="TICKET_TYPE_APP"]=1,t[e[2]="TICKET_TYPE_PC"]=2,t[e[3]="TICKET_TYPE_WEB"]=3,t}(),e.MuteMessageType=function(){const e={},t=Object.create(e);return t[e[1]="TYPE_MENTION"]=1,t[e[2]="TYPE_SEND_BY_GROUP_OWNER"]=2,t[e[3]="TYPE_AUTO_SEND_BY_SERVER"]=3,t[e[4]="TYPE_MENTION_AND_SEND_BY_GROUP_OWNER"]=4,t}(),e.MuteBadgeCountInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.message_type=1,e.prototype.badge_count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int32(e.message_type),t.uint32(16).int32(e.badge_count),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MuteBadgeCountInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.message_type=e.int32();break;case 2:r.badge_count=e.int32();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("message_type"))throw c.ProtocolError("missing required 'message_type'",{instance:r});if(!r.hasOwnProperty("badge_count"))throw c.ProtocolError("missing required 'badge_count'",{instance:r});return r},e}(),e.PropertyItem=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.idempotent_id="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.uid&&Object.hasOwnProperty.call(e,"uid")&&t.uint32(8).int64(e.uid),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(24).int64(e.create_time),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(42).string(e.value),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.PropertyItem;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.uid=e.int64();break;case 2:r.sec_uid=e.string();break;case 3:r.create_time=e.int64();break;case 4:r.idempotent_id=e.string();break;case 5:r.value=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.PropertyItemList=function(){function e(e){if(this.Items=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Items=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.Items&&e.Items.length)for(var n=0;n<e.Items.length;++n)u.im_proto.PropertyItem.encode(e.Items[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.PropertyItemList;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.Items&&r.Items.length||(r.Items=[]),r.Items.push(u.im_proto.PropertyItem.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.MessageBody=function(){function e(e){if(this.ext={},this.property_list={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.message_type=0,e.prototype.sender=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.status=0,e.prototype.order_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_sender="",e.prototype.property_list=c.emptyObject,e.prototype.reference_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(24).int64(e.server_message_id),null!=e.index_in_conversation&&Object.hasOwnProperty.call(e,"index_in_conversation")&&t.uint32(32).int64(e.index_in_conversation),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(48).int32(e.message_type),null!=e.sender&&Object.hasOwnProperty.call(e,"sender")&&t.uint32(56).int64(e.sender),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(66).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(74).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();if(null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(80).int64(e.create_time),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(88).int64(e.version),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(96).int32(e.status),null!=e.order_in_conversation&&Object.hasOwnProperty.call(e,"order_in_conversation")&&t.uint32(104).int64(e.order_in_conversation),null!=e.sec_sender&&Object.hasOwnProperty.call(e,"sec_sender")&&t.uint32(114).string(e.sec_sender),null!=e.property_list&&Object.hasOwnProperty.call(e,"property_list"))for(n=Object.keys(e.property_list),r=0;r<n.length;++r)t.uint32(122).fork().uint32(10).string(n[r]),u.im_proto.PropertyItemList.encode(e.property_list[n[r]],t.uint32(18).fork()).ldelim().ldelim();return null!=e.reference_info&&Object.hasOwnProperty.call(e,"reference_info")&&u.im_proto.ReferenceInfo.encode(e.reference_info,t.uint32(146).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.MessageBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.server_message_id=e.int64();break;case 4:i.index_in_conversation=e.int64();break;case 5:i.conversation_short_id=e.int64();break;case 6:i.message_type=e.int32();break;case 7:i.sender=e.int64();break;case 8:i.content=e.string();break;case 9:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){switch((f=e.uint32())>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 10:i.create_time=e.int64();break;case 11:i.version=e.int64();break;case 12:i.status=e.int32();break;case 13:i.order_in_conversation=e.int64();break;case 14:i.sec_sender=e.string();break;case 15:i.property_list===c.emptyObject&&(i.property_list={});l=e.uint32()+e.pos;for(n="",r=null;e.pos<l;){var f;switch((f=e.uint32())>>>3){case 1:n=e.string();break;case 2:r=u.im_proto.PropertyItemList.decode(e,e.uint32());break;default:e.skipType(7&f)}}i.property_list[n]=r;break;case 18:i.reference_info=u.im_proto.ReferenceInfo.decode(e,e.uint32());break;default:e.skipType(7&a)}}return i},e}(),e.ReferenceInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.referenced_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hint="",e.prototype.ref_message_type=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.referenced_message_status=0,e.prototype.root_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.root_message_conv_index=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int64(e.referenced_message_id),t.uint32(18).string(e.hint),t.uint32(24).int64(e.ref_message_type),t.uint32(32).int32(e.referenced_message_status),null!=e.root_message_id&&Object.hasOwnProperty.call(e,"root_message_id")&&t.uint32(40).int64(e.root_message_id),null!=e.root_message_conv_index&&Object.hasOwnProperty.call(e,"root_message_conv_index")&&t.uint32(48).int64(e.root_message_conv_index),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ReferenceInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.referenced_message_id=e.int64();break;case 2:r.hint=e.string();break;case 3:r.ref_message_type=e.int64();break;case 4:r.referenced_message_status=e.int32();break;case 5:r.root_message_id=e.int64();break;case 6:r.root_message_conv_index=e.int64();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("referenced_message_id"))throw c.ProtocolError("missing required 'referenced_message_id'",{instance:r});if(!r.hasOwnProperty("hint"))throw c.ProtocolError("missing required 'hint'",{instance:r});if(!r.hasOwnProperty("ref_message_type"))throw c.ProtocolError("missing required 'ref_message_type'",{instance:r});if(!r.hasOwnProperty("referenced_message_status"))throw c.ProtocolError("missing required 'referenced_message_status'",{instance:r});return r},e}(),e.ParticipantRole=function(){const e={},t=Object.create(e);return t[e[0]="PARTICIPANT_ROLE_NORMAL"]=0,t[e[1]="PARTICIPANT_ROLE_OWNER"]=1,t[e[2]="PARTICIPANT_ROLE_ADMIN"]=2,t[e[3]="PARTICIPANT_ROLE_VISITOR"]=3,t}(),e.Participant=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sort_order=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.role=0,e.prototype.alias="",e.prototype.sec_uid="",e.prototype.blocked=0,e.prototype.left_block_time=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sort_order&&Object.hasOwnProperty.call(e,"sort_order")&&t.uint32(16).int64(e.sort_order),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).int32(e.role),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(34).string(e.alias),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(42).string(e.sec_uid),null!=e.blocked&&Object.hasOwnProperty.call(e,"blocked")&&t.uint32(48).int32(e.blocked),null!=e.left_block_time&&Object.hasOwnProperty.call(e,"left_block_time")&&t.uint32(56).int64(e.left_block_time),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.Participant;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_id=e.int64();break;case 2:r.sort_order=e.int64();break;case 3:r.role=e.int32();break;case 4:r.alias=e.string();break;case 5:r.sec_uid=e.string();break;case 6:r.blocked=e.int32();break;case 7:r.left_block_time=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ParticipantsPage=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants=c.emptyArray,e.prototype.has_more=!1,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(24).int64(e.cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ParticipantsPage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.participants&&r.participants.length||(r.participants=[]),r.participants.push(u.im_proto.Participant.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationInfoV2=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.ticket="",e.prototype.first_page_participants=null,e.prototype.participants_count=0,e.prototype.is_participant=!1,e.prototype.inbox_type=0,e.prototype.user_info=null,e.prototype.conversation_core_info=null,e.prototype.conversation_setting_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(34).string(e.ticket),null!=e.first_page_participants&&Object.hasOwnProperty.call(e,"first_page_participants")&&u.im_proto.ParticipantsPage.encode(e.first_page_participants,t.uint32(50).fork()).ldelim(),null!=e.participants_count&&Object.hasOwnProperty.call(e,"participants_count")&&t.uint32(56).int32(e.participants_count),null!=e.is_participant&&Object.hasOwnProperty.call(e,"is_participant")&&t.uint32(64).bool(e.is_participant),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(72).int32(e.inbox_type),null!=e.user_info&&Object.hasOwnProperty.call(e,"user_info")&&u.im_proto.Participant.encode(e.user_info,t.uint32(162).fork()).ldelim(),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(402).fork()).ldelim(),null!=e.conversation_setting_info&&Object.hasOwnProperty.call(e,"conversation_setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.conversation_setting_info,t.uint32(410).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationInfoV2;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.ticket=e.string();break;case 6:r.first_page_participants=u.im_proto.ParticipantsPage.decode(e,e.uint32());break;case 7:r.participants_count=e.int32();break;case 8:r.is_participant=e.bool();break;case 9:r.inbox_type=e.int32();break;case 20:r.user_info=u.im_proto.Participant.decode(e,e.uint32());break;case 50:r.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 51:r.conversation_setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.ConversationCoreInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.info_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.name="",e.prototype.desc="",e.prototype.icon="",e.prototype.inbox_type=0,e.prototype.notice="",e.prototype.ext=c.emptyObject,e.prototype.owner=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_owner="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.info_version&&Object.hasOwnProperty.call(e,"info_version")&&t.uint32(32).int64(e.info_version),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(42).string(e.name),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&t.uint32(50).string(e.desc),null!=e.icon&&Object.hasOwnProperty.call(e,"icon")&&t.uint32(58).string(e.icon),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(64).int32(e.inbox_type),null!=e.notice&&Object.hasOwnProperty.call(e,"notice")&&t.uint32(74).string(e.notice),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(90).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&t.uint32(96).int64(e.owner),null!=e.sec_owner&&Object.hasOwnProperty.call(e,"sec_owner")&&t.uint32(106).string(e.sec_owner),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationCoreInfo;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.info_version=e.int64();break;case 5:i.name=e.string();break;case 6:i.desc=e.string();break;case 7:i.icon=e.string();break;case 8:i.inbox_type=e.int32();break;case 9:i.notice=e.string();break;case 11:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 12:i.owner=e.int64();break;case 13:i.sec_owner=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.ConversationSettingInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.min_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.mute=0,e.prototype.stick_on_top=0,e.prototype.inbox_type=0,e.prototype.ext=c.emptyObject,e.prototype.setting_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.favorite=0,e.prototype.set_top_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.set_favorite_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.min_index&&Object.hasOwnProperty.call(e,"min_index")&&t.uint32(32).int64(e.min_index),null!=e.read_index&&Object.hasOwnProperty.call(e,"read_index")&&t.uint32(40).int64(e.read_index),null!=e.mute&&Object.hasOwnProperty.call(e,"mute")&&t.uint32(48).int32(e.mute),null!=e.stick_on_top&&Object.hasOwnProperty.call(e,"stick_on_top")&&t.uint32(56).int32(e.stick_on_top),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(64).int32(e.inbox_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(74).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return null!=e.setting_version&&Object.hasOwnProperty.call(e,"setting_version")&&t.uint32(80).int64(e.setting_version),null!=e.favorite&&Object.hasOwnProperty.call(e,"favorite")&&t.uint32(88).int32(e.favorite),null!=e.set_top_time&&Object.hasOwnProperty.call(e,"set_top_time")&&t.uint32(96).int64(e.set_top_time),null!=e.set_favorite_time&&Object.hasOwnProperty.call(e,"set_favorite_time")&&t.uint32(104).int64(e.set_favorite_time),null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(240).int32(e.push_status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationSettingInfo;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.min_index=e.int64();break;case 5:i.read_index=e.int64();break;case 6:i.mute=e.int32();break;case 7:i.stick_on_top=e.int32();break;case 8:i.inbox_type=e.int32();break;case 9:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 10:i.setting_version=e.int64();break;case 11:i.favorite=e.int32();break;case 12:i.set_top_time=e.int64();break;case 13:i.set_favorite_time=e.int64();break;case 30:i.push_status=e.int32();break;default:e.skipType(7&a)}}return i},e}(),e.MessagesPerUserRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=50,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesPerUserRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MessagesPerUserResponseBody=function(){function e(e){if(this.messages=[],this.conversation_badge_count=[],this.hasmore_message_conv_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.prototype.next_interval=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_conversation_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_badge_count=c.emptyArray,e.prototype.next_cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hasmore_message_conv_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();if(null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(16).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(24).bool(e.has_more),null!=e.next_interval&&Object.hasOwnProperty.call(e,"next_interval")&&t.uint32(32).int64(e.next_interval),null!=e.next_conversation_version&&Object.hasOwnProperty.call(e,"next_conversation_version")&&t.uint32(40).int64(e.next_conversation_version),null!=e.conversation_badge_count&&e.conversation_badge_count.length)for(n=0;n<e.conversation_badge_count.length;++n)u.im_proto.ConversationBadgeCountInfo.encode(e.conversation_badge_count[n],t.uint32(50).fork()).ldelim();if(null!=e.next_cmd_index&&Object.hasOwnProperty.call(e,"next_cmd_index")&&t.uint32(56).int64(e.next_cmd_index),null!=e.hasmore_message_conv_list&&e.hasmore_message_conv_list.length)for(n=0;n<e.hasmore_message_conv_list.length;++n)t.uint32(64).int64(e.hasmore_message_conv_list[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesPerUserResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:r.next_cursor=e.int64();break;case 3:r.has_more=e.bool();break;case 4:r.next_interval=e.int64();break;case 5:r.next_conversation_version=e.int64();break;case 6:r.conversation_badge_count&&r.conversation_badge_count.length||(r.conversation_badge_count=[]),r.conversation_badge_count.push(u.im_proto.ConversationBadgeCountInfo.decode(e,e.uint32()));break;case 7:r.next_cmd_index=e.int64();break;case 8:if(r.hasmore_message_conv_list&&r.hasmore_message_conv_list.length||(r.hasmore_message_conv_list=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.hasmore_message_conv_list.push(e.int64());else r.hasmore_message_conv_list.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.ConversationBadgeCountInfo=function(){function e(e){if(this.mute_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.badge_count=0,e.prototype.conversation_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.mute_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),t.uint32(8).int64(e.conversation_short_id),t.uint32(16).int32(e.badge_count),t.uint32(24).int64(e.conversation_index_v2),t.uint32(34).string(e.conversation_id),null!=e.mute_badge_count_infos&&e.mute_badge_count_infos.length)for(var n=0;n<e.mute_badge_count_infos.length;++n)u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_infos[n],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationBadgeCountInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.badge_count=e.int32();break;case 3:r.conversation_index_v2=e.int64();break;case 4:r.conversation_id=e.string();break;case 5:r.mute_badge_count_infos&&r.mute_badge_count_infos.length||(r.mute_badge_count_infos=[]),r.mute_badge_count_infos.push(u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("conversation_short_id"))throw c.ProtocolError("missing required 'conversation_short_id'",{instance:r});if(!r.hasOwnProperty("badge_count"))throw c.ProtocolError("missing required 'badge_count'",{instance:r});if(!r.hasOwnProperty("conversation_index_v2"))throw c.ProtocolError("missing required 'conversation_index_v2'",{instance:r});if(!r.hasOwnProperty("conversation_id"))throw c.ProtocolError("missing required 'conversation_id'",{instance:r});return r},e}(),e.MessagesPerUserInitV2RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.new_user=0,e.prototype.init_sub_type=0,e.prototype.conv_limit=0,e.prototype.msg_limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.new_user&&Object.hasOwnProperty.call(e,"new_user")&&t.uint32(16).int32(e.new_user),null!=e.init_sub_type&&Object.hasOwnProperty.call(e,"init_sub_type")&&t.uint32(24).int32(e.init_sub_type),null!=e.conv_limit&&Object.hasOwnProperty.call(e,"conv_limit")&&t.uint32(32).int32(e.conv_limit),null!=e.msg_limit&&Object.hasOwnProperty.call(e,"msg_limit")&&t.uint32(40).int32(e.msg_limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesPerUserInitV2RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.new_user=e.int32();break;case 3:r.init_sub_type=e.int32();break;case 4:r.conv_limit=e.int32();break;case 5:r.msg_limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MessagesPerUserInitV2ResponseBody=function(){function e(e){if(this.messages=[],this.conversations=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.conversations=c.emptyArray,e.prototype.per_user_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();if(null!=e.conversations&&e.conversations.length)for(n=0;n<e.conversations.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversations[n],t.uint32(18).fork()).ldelim();return null!=e.per_user_cursor&&Object.hasOwnProperty.call(e,"per_user_cursor")&&t.uint32(24).int64(e.per_user_cursor),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(32).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(40).bool(e.has_more),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesPerUserInitV2ResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:r.conversations&&r.conversations.length||(r.conversations=[]),r.conversations.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 3:r.per_user_cursor=e.int64();break;case 4:r.next_cursor=e.int64();break;case 5:r.has_more=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.MessageDirection=function(){const e={},t=Object.create(e);return t[e[1]="OLDER"]=1,t[e[2]="NEWER"]=2,t[e[3]="FROM_LATEST"]=3,t}(),e.MessagesInConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.direction=1,e.prototype.anchor_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=50,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(32).int32(e.direction),null!=e.anchor_index&&Object.hasOwnProperty.call(e,"anchor_index")&&t.uint32(40).int64(e.anchor_index),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(48).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesInConversationRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.direction=e.int32();break;case 5:r.anchor_index=e.int64();break;case 6:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MessagesInConversationResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(16).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(24).bool(e.has_more),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesInConversationResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:r.next_cursor=e.int64();break;case 3:r.has_more=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.CreateConversationV2RequestBody=function(){function e(e){if(this.participants=[],this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.prototype.persistent=!1,e.prototype.idempotent_id="",e.prototype.name="",e.prototype.avatar_url="",e.prototype.description="",e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(8).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(16).int64(e.participants[n]);if(null!=e.persistent&&Object.hasOwnProperty.call(e,"persistent")&&t.uint32(24).bool(e.persistent),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(50).string(e.name),null!=e.avatar_url&&Object.hasOwnProperty.call(e,"avatar_url")&&t.uint32(58).string(e.avatar_url),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(66).string(e.description),null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext")){var r=Object.keys(e.biz_ext);for(n=0;n<r.length;++n)t.uint32(90).fork().uint32(10).string(r[n]).uint32(18).string(e.biz_ext[r[n]]).ldelim()}return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.CreateConversationV2RequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_type=e.int32();break;case 2:if(i.participants&&i.participants.length||(i.participants=[]),2==(7&a))for(var l=e.uint32()+e.pos;e.pos<l;)i.participants.push(e.int64());else i.participants.push(e.int64());break;case 3:i.persistent=e.bool();break;case 4:i.idempotent_id=e.string();break;case 6:i.name=e.string();break;case 7:i.avatar_url=e.string();break;case 8:i.description=e.string();break;case 11:i.biz_ext===c.emptyObject&&(i.biz_ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.CreateConversationV2ResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation=null,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.prototype.status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation&&Object.hasOwnProperty.call(e,"conversation")&&u.im_proto.ConversationInfoV2.encode(e.conversation,t.uint32(10).fork()).ldelim(),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(16).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(26).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(34).string(e.extra_info),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(40).int32(e.status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CreateConversationV2ResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation=u.im_proto.ConversationInfoV2.decode(e,e.uint32());break;case 2:r.check_code=e.int64();break;case 3:r.check_message=e.string();break;case 4:r.extra_info=e.string();break;case 5:r.status=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.UserActionType=function(){const e={},t=Object.create(e);return t[e[1]="ENTER_CONVERSATION"]=1,t[e[2]="EXIT_CONVERSATION"]=2,t}(),e.SendUserActionRequestBody=function(){function e(e){if(this.extra={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.action_type=1,e.prototype.extra=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(32).int32(e.action_type),null!=e.extra&&Object.hasOwnProperty.call(e,"extra"))for(var n=Object.keys(e.extra),r=0;r<n.length;++r)t.uint32(42).fork().uint32(10).string(n[r]).uint32(18).string(e.extra[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.SendUserActionRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.action_type=e.int32();break;case 5:i.extra===c.emptyObject&&(i.extra={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.extra[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.InputStatus=function(){const e={},t=Object.create(e);return t[e[3]="TYPING"]=3,t[e[4]="CLEAR_INPUT"]=4,t}(),e.SendInputStatusRequestBody=function(){function e(e){if(this.extra={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.status=3,e.prototype.extra=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(32).int32(e.status),null!=e.extra&&Object.hasOwnProperty.call(e,"extra"))for(var n=Object.keys(e.extra),r=0;r<n.length;++r)t.uint32(42).fork().uint32(10).string(n[r]).uint32(18).string(e.extra[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.SendInputStatusRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.status=e.int32();break;case 5:i.extra===c.emptyObject&&(i.extra={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.extra[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.DeleteConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.last_message_index=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.last_message_index&&Object.hasOwnProperty.call(e,"last_message_index")&&t.uint32(32).int64(e.last_message_index),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DeleteConversationRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.last_message_index=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.DissolveConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DissolveConversationRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.DeleteMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.message_id&&Object.hasOwnProperty.call(e,"message_id")&&t.uint32(32).int64(e.message_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DeleteMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.message_id=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.MarkConversationReadRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.read_message_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conv_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.read_message_index&&Object.hasOwnProperty.call(e,"read_message_index")&&t.uint32(32).int64(e.read_message_index),null!=e.conv_unread_count&&Object.hasOwnProperty.call(e,"conv_unread_count")&&t.uint32(40).int64(e.conv_unread_count),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(48).int64(e.total_unread_count),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkConversationReadRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.read_message_index=e.int64();break;case 5:r.conv_unread_count=e.int64();break;case 6:r.total_unread_count=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationParticipantsReadIndexV3RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.conversation_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(26).string(e.conversation_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationParticipantsReadIndexV3RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_id=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationParticipantsReadIndexV3ResponseBody=function(){function e(e){if(this.indexes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.indexes=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.indexes&&e.indexes.length)for(var n=0;n<e.indexes.length;++n)u.im_proto.ParticipantReadIndex.encode(e.indexes[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.indexes&&r.indexes.length||(r.indexes=[]),r.indexes.push(u.im_proto.ParticipantReadIndex.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.ParticipantReadIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_min=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&t.uint32(24).int64(e.index),null!=e.index_v2&&Object.hasOwnProperty.call(e,"index_v2")&&t.uint32(32).int64(e.index_v2),null!=e.index_min&&Object.hasOwnProperty.call(e,"index_min")&&t.uint32(40).int64(e.index_min),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ParticipantReadIndex;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_id=e.int64();break;case 2:r.sec_uid=e.string();break;case 3:r.index=e.int64();break;case 4:r.index_v2=e.int64();break;case 5:r.index_min=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.BatchGetConversationParticipantsReadIndexRequestBody=function(){function e(e){if(this.conversation_id=[],this.conversation_short_id=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id=c.emptyArray,e.prototype.conversation_short_id=c.emptyArray,e.prototype.request_from="",e.prototype.min_index_required=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&e.conversation_id.length)for(var n=0;n<e.conversation_id.length;++n)t.uint32(10).string(e.conversation_id[n]);if(null!=e.conversation_short_id&&e.conversation_short_id.length)for(n=0;n<e.conversation_short_id.length;++n)t.uint32(16).int64(e.conversation_short_id[n]);return null!=e.request_from&&Object.hasOwnProperty.call(e,"request_from")&&t.uint32(26).string(e.request_from),null!=e.min_index_required&&Object.hasOwnProperty.call(e,"min_index_required")&&t.uint32(32).bool(e.min_index_required),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id&&r.conversation_id.length||(r.conversation_id=[]),r.conversation_id.push(e.string());break;case 2:if(r.conversation_short_id&&r.conversation_short_id.length||(r.conversation_short_id=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.conversation_short_id.push(e.int64());else r.conversation_short_id.push(e.int64());break;case 3:r.request_from=e.string();break;case 4:r.min_index_required=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.BatchGetConversationParticipantsReadIndexResponseBody=function(){function e(e){if(this.conversationParticipantsReadIndex=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversationParticipantsReadIndex=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversationParticipantsReadIndex&&e.conversationParticipantsReadIndex.length)for(var n=0;n<e.conversationParticipantsReadIndex.length;++n)u.im_proto.ConversationParticipantReadIndex.encode(e.conversationParticipantsReadIndex[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversationParticipantsReadIndex&&r.conversationParticipantsReadIndex.length||(r.conversationParticipantsReadIndex=[]),r.conversationParticipantsReadIndex.push(u.im_proto.ConversationParticipantReadIndex.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.ConversationParticipantReadIndex=function(){function e(e){if(this.participantReadIndex=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.participantReadIndex=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.participantReadIndex&&e.participantReadIndex.length)for(var n=0;n<e.participantReadIndex.length;++n)u.im_proto.ParticipantReadIndex.encode(e.participantReadIndex[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationParticipantReadIndex;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.participantReadIndex&&r.participantReadIndex.length||(r.participantReadIndex=[]),r.participantReadIndex.push(u.im_proto.ParticipantReadIndex.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationParticipantsMinIndexV3RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.conversation_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(26).string(e.conversation_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationParticipantsMinIndexV3RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_id=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationParticipantsMinIndexV3ResponseBody=function(){function e(e){if(this.indexes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.indexes=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.indexes&&e.indexes.length)for(var n=0;n<e.indexes.length;++n)u.im_proto.ParticipantMinIndex.encode(e.indexes[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.indexes&&r.indexes.length||(r.indexes=[]),r.indexes.push(u.im_proto.ParticipantMinIndex.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.ParticipantMinIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.index=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&t.uint32(24).int64(e.index),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ParticipantMinIndex;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_id=e.int64();break;case 2:r.sec_uid=e.string();break;case 3:r.index=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.SendMessageRequestBody=function(){function e(e){if(this.ext={},this.mentioned_users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.message_type=0,e.prototype.ticket="",e.prototype.client_message_id="",e.prototype.mentioned_users=c.emptyArray,e.prototype.ref_msg_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(34).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(42).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();if(null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(48).int32(e.message_type),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(58).string(e.ticket),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(66).string(e.client_message_id),null!=e.mentioned_users&&e.mentioned_users.length)for(r=0;r<e.mentioned_users.length;++r)t.uint32(72).int64(e.mentioned_users[r]);return null!=e.ref_msg_info&&Object.hasOwnProperty.call(e,"ref_msg_info")&&u.im_proto.ReferencedMessageInfo.encode(e.ref_msg_info,t.uint32(90).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.SendMessageRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.content=e.string();break;case 5:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 6:i.message_type=e.int32();break;case 7:i.ticket=e.string();break;case 8:i.client_message_id=e.string();break;case 9:if(i.mentioned_users&&i.mentioned_users.length||(i.mentioned_users=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.mentioned_users.push(e.int64());else i.mentioned_users.push(e.int64());break;case 11:i.ref_msg_info=u.im_proto.ReferencedMessageInfo.decode(e,e.uint32());break;default:e.skipType(7&a)}}return i},e}(),e.ReferencedMessageInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.referenced_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hint="",e.prototype.root_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.root_message_conv_index=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int64(e.referenced_message_id),t.uint32(18).string(e.hint),null!=e.root_message_id&&Object.hasOwnProperty.call(e,"root_message_id")&&t.uint32(24).int64(e.root_message_id),null!=e.root_message_conv_index&&Object.hasOwnProperty.call(e,"root_message_conv_index")&&t.uint32(32).int64(e.root_message_conv_index),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ReferencedMessageInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.referenced_message_id=e.int64();break;case 2:r.hint=e.string();break;case 3:r.root_message_id=e.int64();break;case 4:r.root_message_conv_index=e.int64();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("referenced_message_id"))throw c.ProtocolError("missing required 'referenced_message_id'",{instance:r});if(!r.hasOwnProperty("hint"))throw c.ProtocolError("missing required 'hint'",{instance:r});return r},e}(),e.SendMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.extra_info="",e.prototype.status=0,e.prototype.client_message_id="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(18).string(e.extra_info),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(34).string(e.client_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SendMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.server_message_id=e.int64();break;case 2:r.extra_info=e.string();break;case 3:r.status=e.int32();break;case 4:r.client_message_id=e.string();break;case 5:r.check_code=e.int64();break;case 6:r.check_message=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.NewMessageNotifyType=function(){const e={},t=Object.create(e);return t[e[1]="PER_USER"]=1,t[e[2]="PER_CONVERSATION"]=2,t}(),e.NewMessageNotify=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.notify_type=1,e.prototype.message=null,e.prototype.previous_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ref_msg_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(18).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.notify_type&&Object.hasOwnProperty.call(e,"notify_type")&&t.uint32(32).int32(e.notify_type),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&u.im_proto.MessageBody.encode(e.message,t.uint32(42).fork()).ldelim(),null!=e.previous_cursor&&Object.hasOwnProperty.call(e,"previous_cursor")&&t.uint32(48).int64(e.previous_cursor),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(56).int64(e.next_cursor),null!=e.index_in_conversation&&Object.hasOwnProperty.call(e,"index_in_conversation")&&t.uint32(64).int64(e.index_in_conversation),null!=e.ref_msg_info&&Object.hasOwnProperty.call(e,"ref_msg_info")&&u.im_proto.ReferenceInfo.encode(e.ref_msg_info,t.uint32(122).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.NewMessageNotify;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.conversation_id=e.string();break;case 3:r.conversation_type=e.int32();break;case 4:r.notify_type=e.int32();break;case 5:r.message=u.im_proto.MessageBody.decode(e,e.uint32());break;case 6:r.previous_cursor=e.int64();break;case 7:r.next_cursor=e.int64();break;case 8:r.index_in_conversation=e.int64();break;case 15:r.ref_msg_info=u.im_proto.ReferenceInfo.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.ConversationsPerUserByFavoriteV2RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=500,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationsPerUserByFavoriteV2RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationsPerUserByTopV2RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=500,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationsPerUserByTopV2RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationInfoV2RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationInfoV2RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationInfoListV2RequestBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.GetConversationInfoV2RequestBody.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationInfoListV2RequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_info_list&&r.conversation_info_list.length||(r.conversation_info_list=[]),r.conversation_info_list.push(u.im_proto.GetConversationInfoV2RequestBody.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.GetConversationInfoListV2ResponseBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationInfoListV2ResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_info_list&&r.conversation_info_list.length||(r.conversation_info_list=[]),r.conversation_info_list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.GetConversationInfoListByFavoriteV2ResponseBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationInfoListByFavoriteV2ResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_info_list&&r.conversation_info_list.length||(r.conversation_info_list=[]),r.conversation_info_list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationInfoListByTopV2ResponseBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationInfoListByTopV2ResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_info_list&&r.conversation_info_list.length||(r.conversation_info_list=[]),r.conversation_info_list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.RecallMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.RecallMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.server_message_id=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationAddParticipantsRequestBody=function(){function e(e){if(this.participants=[],this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(32).int64(e.participants[n]);if(null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext")){var r=Object.keys(e.biz_ext);for(n=0;n<r.length;++n)t.uint32(42).fork().uint32(10).string(r[n]).uint32(18).string(e.biz_ext[r[n]]).ldelim()}return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationAddParticipantsRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:if(i.participants&&i.participants.length||(i.participants=[]),2==(7&a))for(var l=e.uint32()+e.pos;e.pos<l;)i.participants.push(e.int64());else i.participants.push(e.int64());break;case 5:i.biz_ext===c.emptyObject&&(i.biz_ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.SecUidPair=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.uid&&Object.hasOwnProperty.call(e,"uid")&&t.uint32(8).int64(e.uid),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SecUidPair;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.uid=e.int64();break;case 2:r.sec_uid=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationAddParticipantsResponseBody=function(){function e(e){if(this.success_participants=[],this.failed_participants=[],this.sec_success_participants=[],this.sec_failed_participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.success_participants=c.emptyArray,e.prototype.failed_participants=c.emptyArray,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.sec_success_participants=c.emptyArray,e.prototype.sec_failed_participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.success_participants&&e.success_participants.length)for(var n=0;n<e.success_participants.length;++n)t.uint32(8).int64(e.success_participants[n]);if(null!=e.failed_participants&&e.failed_participants.length)for(n=0;n<e.failed_participants.length;++n)t.uint32(16).int64(e.failed_participants[n]);if(null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(34).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),null!=e.sec_success_participants&&e.sec_success_participants.length)for(n=0;n<e.sec_success_participants.length;++n)u.im_proto.SecUidPair.encode(e.sec_success_participants[n],t.uint32(58).fork()).ldelim();if(null!=e.sec_failed_participants&&e.sec_failed_participants.length)for(n=0;n<e.sec_failed_participants.length;++n)u.im_proto.SecUidPair.encode(e.sec_failed_participants[n],t.uint32(66).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationAddParticipantsResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.success_participants&&r.success_participants.length||(r.success_participants=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.success_participants.push(e.int64());else r.success_participants.push(e.int64());break;case 2:if(r.failed_participants&&r.failed_participants.length||(r.failed_participants=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.failed_participants.push(e.int64());else r.failed_participants.push(e.int64());break;case 3:r.status=e.int32();break;case 4:r.extra_info=e.string();break;case 5:r.check_code=e.int64();break;case 6:r.check_message=e.string();break;case 7:r.sec_success_participants&&r.sec_success_participants.length||(r.sec_success_participants=[]),r.sec_success_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;case 8:r.sec_failed_participants&&r.sec_failed_participants.length||(r.sec_failed_participants=[]),r.sec_failed_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.ConversationRemoveParticipantsRequestBody=function(){function e(e){if(this.participants=[],this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(32).int64(e.participants[n]);if(null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext")){var r=Object.keys(e.biz_ext);for(n=0;n<r.length;++n)t.uint32(42).fork().uint32(10).string(r[n]).uint32(18).string(e.biz_ext[r[n]]).ldelim()}return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationRemoveParticipantsRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:if(i.participants&&i.participants.length||(i.participants=[]),2==(7&a))for(var l=e.uint32()+e.pos;e.pos<l;)i.participants.push(e.int64());else i.participants.push(e.int64());break;case 5:i.biz_ext===c.emptyObject&&(i.biz_ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.ConversationRemoveParticipantsResponseBody=function(){function e(e){if(this.failed_participants=[],this.failed_sec_participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_participants=c.emptyArray,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.failed_sec_participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.failed_participants&&e.failed_participants.length)for(var n=0;n<e.failed_participants.length;++n)t.uint32(8).int64(e.failed_participants[n]);if(null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),null!=e.failed_sec_participants&&e.failed_sec_participants.length)for(n=0;n<e.failed_sec_participants.length;++n)u.im_proto.SecUidPair.encode(e.failed_sec_participants[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationRemoveParticipantsResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.failed_participants&&r.failed_participants.length||(r.failed_participants=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_participants.push(e.int64());else r.failed_participants.push(e.int64());break;case 2:r.status=e.int32();break;case 3:r.extra_info=e.string();break;case 4:r.check_code=e.int64();break;case 5:r.check_message=e.string();break;case 6:r.failed_sec_participants&&r.failed_sec_participants.length||(r.failed_sec_participants=[]),r.failed_sec_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.ConversationLeaveRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationLeaveRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationParticipantsListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=100,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(32).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationParticipantsListRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.cursor=e.int64();break;case 5:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationParticipantsListResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants_page=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.participants_page&&Object.hasOwnProperty.call(e,"participants_page")&&u.im_proto.ParticipantsPage.encode(e.participants_page,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationParticipantsListResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.participants_page=u.im_proto.ParticipantsPage.decode(e,e.uint32());else e.skipType(7&o)}return r},e}(),e.MgetConversationParticipantsRequestBody=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(32).int64(e.participants[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MgetConversationParticipantsRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:if(r.participants&&r.participants.length||(r.participants=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.participants.push(e.int64());else r.participants.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.MgetConversationParticipantsResponseBody=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MgetConversationParticipantsResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.participants&&r.participants.length||(r.participants=[]),r.participants.push(u.im_proto.Participant.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.UpdateConversationParticipantRequestBody=function(){function e(e){if(this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.role=0,e.prototype.alias="",e.prototype.is_alias_set=!1,e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(32).int64(e.user_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).int32(e.role),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(50).string(e.alias),null!=e.is_alias_set&&Object.hasOwnProperty.call(e,"is_alias_set")&&t.uint32(56).bool(e.is_alias_set),null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext"))for(var n=Object.keys(e.biz_ext),r=0;r<n.length;++r)t.uint32(90).fork().uint32(10).string(n[r]).uint32(18).string(e.biz_ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.UpdateConversationParticipantRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.user_id=e.int64();break;case 5:i.role=e.int32();break;case 6:i.alias=e.string();break;case 7:i.is_alias_set=e.bool();break;case 11:i.biz_ext===c.emptyObject&&(i.biz_ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.UpdateConversationParticipantResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participant=null,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.participant&&Object.hasOwnProperty.call(e,"participant")&&u.im_proto.Participant.encode(e.participant,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UpdateConversationParticipantResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.participant=u.im_proto.Participant.decode(e,e.uint32());break;case 2:r.status=e.int32();break;case 3:r.extra_info=e.string();break;case 4:r.check_code=e.int64();break;case 5:r.check_message=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationCoreInfoRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationCoreInfoRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationCoreInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_core_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationCoreInfoResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());else e.skipType(7&o)}return r},e}(),e.SetConversationCoreInfoRequestBody=function(){function e(e){if(this.ext={},this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.name="",e.prototype.desc="",e.prototype.icon="",e.prototype.notice="",e.prototype.is_name_set=!1,e.prototype.is_desc_set=!1,e.prototype.is_icon_set=!1,e.prototype.is_notice_set=!1,e.prototype.ext=c.emptyObject,e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(34).string(e.name),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&t.uint32(42).string(e.desc),null!=e.icon&&Object.hasOwnProperty.call(e,"icon")&&t.uint32(50).string(e.icon),null!=e.notice&&Object.hasOwnProperty.call(e,"notice")&&t.uint32(58).string(e.notice),null!=e.is_name_set&&Object.hasOwnProperty.call(e,"is_name_set")&&t.uint32(64).bool(e.is_name_set),null!=e.is_desc_set&&Object.hasOwnProperty.call(e,"is_desc_set")&&t.uint32(72).bool(e.is_desc_set),null!=e.is_icon_set&&Object.hasOwnProperty.call(e,"is_icon_set")&&t.uint32(80).bool(e.is_icon_set),null!=e.is_notice_set&&Object.hasOwnProperty.call(e,"is_notice_set")&&t.uint32(88).bool(e.is_notice_set),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(98).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();if(null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext"))for(n=Object.keys(e.biz_ext),r=0;r<n.length;++r)t.uint32(186).fork().uint32(10).string(n[r]).uint32(18).string(e.biz_ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.SetConversationCoreInfoRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.name=e.string();break;case 5:i.desc=e.string();break;case 6:i.icon=e.string();break;case 7:i.notice=e.string();break;case 8:i.is_name_set=e.bool();break;case 9:i.is_desc_set=e.bool();break;case 10:i.is_icon_set=e.bool();break;case 11:i.is_notice_set=e.bool();break;case 12:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){switch((f=e.uint32())>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 23:i.biz_ext===c.emptyObject&&(i.biz_ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f;switch((f=e.uint32())>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.SetConversationCoreInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_core_info=null,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SetConversationCoreInfoResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 2:r.status=e.int32();break;case 3:r.extra_info=e.string();break;case 4:r.check_code=e.int64();break;case 5:r.check_message=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.UpsertConversationCoreExtInfoRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.UpsertConversationCoreExtInfoRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.UpsertConversationCoreExtInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.core_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.core_info&&Object.hasOwnProperty.call(e,"core_info")&&u.im_proto.ConversationCoreInfo.encode(e.core_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UpsertConversationCoreExtInfoResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 2:r.status=e.int32();break;case 3:r.check_code=e.int64();break;case 4:r.check_message=e.string();break;case 5:r.extra_info=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.SetConversationSettingInfoRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.set_stick_on_top=!1,e.prototype.set_mute=!1,e.prototype.set_favorite=!1,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.set_stick_on_top&&Object.hasOwnProperty.call(e,"set_stick_on_top")&&t.uint32(32).bool(e.set_stick_on_top),null!=e.set_mute&&Object.hasOwnProperty.call(e,"set_mute")&&t.uint32(40).bool(e.set_mute),null!=e.set_favorite&&Object.hasOwnProperty.call(e,"set_favorite")&&t.uint32(48).bool(e.set_favorite),null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(56).int32(e.push_status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SetConversationSettingInfoRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.set_stick_on_top=e.bool();break;case 5:r.set_mute=e.bool();break;case 6:r.set_favorite=e.bool();break;case 7:r.push_status=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.SetConversationSettingInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.setting_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.setting_info&&Object.hasOwnProperty.call(e,"setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.setting_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SetConversationSettingInfoResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;case 2:r.status=e.int32();break;case 3:r.check_code=e.int64();break;case 4:r.check_message=e.string();break;case 5:r.extra_info=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.UpsertConversationSettingExtInfoRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.UpsertConversationSettingExtInfoRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.UpsertConversationSettingExtInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.setting_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.setting_info&&Object.hasOwnProperty.call(e,"setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.setting_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UpsertConversationSettingExtInfoResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;case 2:r.status=e.int32();break;case 3:r.check_code=e.int64();break;case 4:r.check_message=e.string();break;case 5:r.extra_info=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.StrangerConversation=function(){function e(e){if(this.participants=[],this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.unread=0,e.prototype.last_message=null,e.prototype.conversation_id="",e.prototype.participants=c.emptyArray,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.unread&&Object.hasOwnProperty.call(e,"unread")&&t.uint32(16).int32(e.unread),null!=e.last_message&&Object.hasOwnProperty.call(e,"last_message")&&u.im_proto.MessageBody.encode(e.last_message,t.uint32(26).fork()).ldelim(),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(34).string(e.conversation_id),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(42).fork()).ldelim();if(null!=e.ext&&Object.hasOwnProperty.call(e,"ext")){var r=Object.keys(e.ext);for(n=0;n<r.length;++n)t.uint32(58).fork().uint32(10).string(r[n]).uint32(18).string(e.ext[r[n]]).ldelim()}return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.StrangerConversation;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_short_id=e.int64();break;case 2:i.unread=e.int32();break;case 3:i.last_message=u.im_proto.MessageBody.decode(e,e.uint32());break;case 4:i.conversation_id=e.string();break;case 5:i.participants&&i.participants.length||(i.participants=[]),i.participants.push(u.im_proto.Participant.decode(e,e.uint32()));break;case 7:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.GetStrangerConversationListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.count=c.Long?c.Long.fromBits(50,0,!1):50,e.prototype.show_total_unread=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(16).int64(e.count),null!=e.show_total_unread&&Object.hasOwnProperty.call(e,"show_total_unread")&&t.uint32(24).bool(e.show_total_unread),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetStrangerConversationListRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.count=e.int64();break;case 3:r.show_total_unread=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.GetStrangerConversationListResponseBody=function(){function e(e){if(this.conversation_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.prototype.total_unread=0,e.prototype.conversation_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(8).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.total_unread&&Object.hasOwnProperty.call(e,"total_unread")&&t.uint32(24).int32(e.total_unread),null!=e.conversation_list&&e.conversation_list.length)for(var n=0;n<e.conversation_list.length;++n)u.im_proto.StrangerConversation.encode(e.conversation_list[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetStrangerConversationListResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.next_cursor=e.int64();break;case 2:r.has_more=e.bool();break;case 3:r.total_unread=e.int32();break;case 4:r.conversation_list&&r.conversation_list.length||(r.conversation_list=[]),r.conversation_list.push(u.im_proto.StrangerConversation.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.GetStrangerMessagesRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.reset_unread_count=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.reset_unread_count&&Object.hasOwnProperty.call(e,"reset_unread_count")&&t.uint32(16).bool(e.reset_unread_count),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetStrangerMessagesRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.reset_unread_count=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.GetStrangerMessagesResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetStrangerMessagesResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==3)r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.DeleteStrangerMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DeleteStrangerMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.server_message_id=e.int64();break;case 2:r.conversation_short_id=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.DeleteStrangerConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DeleteStrangerConversationRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_short_id=e.int64();else e.skipType(7&o)}return r},e}(),e.DeleteStrangerAllConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.DeleteStrangerAllConversationRequestBody;e.pos<n;){var o=e.uint32();e.skipType(7&o)}return r},e}(),e.MarkStrangerConversationReadRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkStrangerConversationReadRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_short_id=e.int64();else e.skipType(7&o)}return r},e}(),e.MarkStrangerAllConversationReadRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkStrangerAllConversationReadRequestBody;e.pos<n;){var o=e.uint32();e.skipType(7&o)}return r},e}(),e.OPERATION_TYPE=function(){const e={},t=Object.create(e);return t[e[0]="ADD_PROPERTY_ITEM"]=0,t[e[1]="REMOVE_PROPERTY_ITEM"]=1,t[e[2]="SET_PROPERTY"]=2,t[e[3]="DEL_PROPERTY"]=3,t}(),e.ModifyPropertyContent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.prototype.key="",e.prototype.value="",e.prototype.idempotent_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(18).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(26).string(e.value),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ModifyPropertyContent;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.operation=e.int32();break;case 2:r.key=e.string();break;case 3:r.value=e.string();break;case 4:r.idempotent_id=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.ModifyPropertyBody=function(){function e(e){if(this.modify_property_content=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.client_message_id="",e.prototype.modify_property_content=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(42).string(e.client_message_id),null!=e.modify_property_content&&e.modify_property_content.length)for(var n=0;n<e.modify_property_content.length;++n)u.im_proto.ModifyPropertyContent.encode(e.modify_property_content[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ModifyPropertyBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.server_message_id=e.int64();break;case 5:r.client_message_id=e.string();break;case 6:r.modify_property_content&&r.modify_property_content.length||(r.modify_property_content=[]),r.modify_property_content.push(u.im_proto.ModifyPropertyContent.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.ModifyMessagePropertyRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.property_list=null,e.prototype.ticket="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.property_list&&Object.hasOwnProperty.call(e,"property_list")&&u.im_proto.ModifyPropertyBody.encode(e.property_list,t.uint32(10).fork()).ldelim(),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(18).string(e.ticket),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ModifyMessagePropertyRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.property_list=u.im_proto.ModifyPropertyBody.decode(e,e.uint32());break;case 2:r.ticket=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.ModifyMessagePropertyStatus=function(){const e={},t=Object.create(e);return t[e[0]="MODIFY_PROPERTY_SUCCESS"]=0,t[e[1]="MODIFY_PROPERTY_REPEAT_REQUEST"]=1,t[e[2]="MODIFY_PROPERTY_INVALID_LENGTH"]=2,t[e[3]="MODIFY_PROPERTY_INVALID_REQUEST"]=3,t[e[4]="MODIFY_PROPERTY_CALLBACK_ERROR"]=4,t[e[500]="MODIFY_PROPERTY_INTERNAL_ERROR"]=500,t}(),e.ModifyMessagePropertyResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ModifyMessagePropertyResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.status=e.int32();break;case 2:r.version=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.MediaType=function(){const e={},t=Object.create(e);return t[e[1]="IMG"]=1,t[e[2]="VIDEO"]=2,t[e[3]="AUDIO"]=3,t[e[4]="FILE"]=4,t[e[10]="OTHER"]=10,t}(),e.MediaTokenType=function(){const e={},t=Object.create(e);return t[e[1]="VSDK"]=1,t[e[2]="IMAGEX"]=2,t[e[3]="VSDK_V5"]=3,t[e[4]="IMAGEX_V5"]=4,t}(),e.GetUploadTokenRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.vsdk_version="",e.prototype.token_type=1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.vsdk_version&&Object.hasOwnProperty.call(e,"vsdk_version")&&t.uint32(10).string(e.vsdk_version),null!=e.token_type&&Object.hasOwnProperty.call(e,"token_type")&&t.uint32(16).int32(e.token_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetUploadTokenRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.vsdk_version=e.string();break;case 2:r.token_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetUploadTokenResponseBody=function(){function e(e){if(this.hosts=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.access_key="",e.prototype.hosts=c.emptyArray,e.prototype.token="",e.prototype.token_type=1,e.prototype.secret_access_key="",e.prototype.space_name="",e.prototype.service_id="",e.prototype.expire_time="",e.prototype.current_time="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.access_key&&Object.hasOwnProperty.call(e,"access_key")&&t.uint32(10).string(e.access_key),null!=e.hosts&&e.hosts.length)for(var n=0;n<e.hosts.length;++n)t.uint32(18).string(e.hosts[n]);return null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(26).string(e.token),null!=e.token_type&&Object.hasOwnProperty.call(e,"token_type")&&t.uint32(32).int32(e.token_type),null!=e.secret_access_key&&Object.hasOwnProperty.call(e,"secret_access_key")&&t.uint32(42).string(e.secret_access_key),null!=e.space_name&&Object.hasOwnProperty.call(e,"space_name")&&t.uint32(50).string(e.space_name),null!=e.service_id&&Object.hasOwnProperty.call(e,"service_id")&&t.uint32(58).string(e.service_id),null!=e.expire_time&&Object.hasOwnProperty.call(e,"expire_time")&&t.uint32(66).string(e.expire_time),null!=e.current_time&&Object.hasOwnProperty.call(e,"current_time")&&t.uint32(74).string(e.current_time),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetUploadTokenResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.access_key=e.string();break;case 2:r.hosts&&r.hosts.length||(r.hosts=[]),r.hosts.push(e.string());break;case 3:r.token=e.string();break;case 4:r.token_type=e.int32();break;case 5:r.secret_access_key=e.string();break;case 6:r.space_name=e.string();break;case 7:r.service_id=e.string();break;case 8:r.expire_time=e.string();break;case 9:r.current_time=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.ImgOption=function(){function e(e){if(this.params=[],this.urls=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tplv="",e.prototype.params=c.emptyArray,e.prototype.format="",e.prototype.urls=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.tplv&&Object.hasOwnProperty.call(e,"tplv")&&t.uint32(10).string(e.tplv),null!=e.params&&e.params.length)for(var n=0;n<e.params.length;++n)t.uint32(18).string(e.params[n]);if(null!=e.format&&Object.hasOwnProperty.call(e,"format")&&t.uint32(26).string(e.format),null!=e.urls&&e.urls.length)for(n=0;n<e.urls.length;++n)t.uint32(802).string(e.urls[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ImgOption;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tplv=e.string();break;case 2:r.params&&r.params.length||(r.params=[]),r.params.push(e.string());break;case 3:r.format=e.string();break;case 100:r.urls&&r.urls.length||(r.urls=[]),r.urls.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.VideoOption=function(){function e(e){if(this.urls=[],this.cover_urls=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.vid="",e.prototype.cover_uri="",e.prototype.urls=c.emptyArray,e.prototype.cover_urls=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(10).string(e.vid),null!=e.cover_uri&&Object.hasOwnProperty.call(e,"cover_uri")&&t.uint32(18).string(e.cover_uri),null!=e.urls&&e.urls.length)for(var n=0;n<e.urls.length;++n)t.uint32(802).string(e.urls[n]);if(null!=e.cover_urls&&e.cover_urls.length)for(n=0;n<e.cover_urls.length;++n)t.uint32(810).string(e.cover_urls[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.VideoOption;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.vid=e.string();break;case 2:r.cover_uri=e.string();break;case 100:r.urls&&r.urls.length||(r.urls=[]),r.urls.push(e.string());break;case 101:r.cover_urls&&r.cover_urls.length||(r.cover_urls=[]),r.cover_urls.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.AudioOption=function(){function e(e){if(this.urls=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.vid="",e.prototype.urls=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(10).string(e.vid),null!=e.urls&&e.urls.length)for(var n=0;n<e.urls.length;++n)t.uint32(802).string(e.urls[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.AudioOption;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.vid=e.string();break;case 100:r.urls&&r.urls.length||(r.urls=[]),r.urls.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.FileOption=function(){function e(e){if(this.urls=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.urls=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.urls&&e.urls.length)for(var n=0;n<e.urls.length;++n)t.uint32(802).string(e.urls[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.FileOption;e.pos<n;){var o=e.uint32();if(o>>>3==100)r.urls&&r.urls.length||(r.urls=[]),r.urls.push(e.string());else e.skipType(7&o)}return r},e}(),e.ReadURLFrom=function(){const e={},t=Object.create(e);return t[e[1]="URL_VSDK"]=1,t[e[2]="URL_IMAGEX"]=2,t}(),e.GetMediaUrlsRequestBody=function(){function e(e){if(this.img_options=[],this.video_options=[],this.audio_options=[],this.file_options=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.source_appid=0,e.prototype.uri="",e.prototype.media_type=0,e.prototype.encrypted=!1,e.prototype.img_options=c.emptyArray,e.prototype.video_options=c.emptyArray,e.prototype.audio_options=c.emptyArray,e.prototype.file_options=c.emptyArray,e.prototype.encrypted_uri="",e.prototype.read_url_from=1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.source_appid&&Object.hasOwnProperty.call(e,"source_appid")&&t.uint32(8).int32(e.source_appid),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(18).string(e.uri),null!=e.media_type&&Object.hasOwnProperty.call(e,"media_type")&&t.uint32(24).int32(e.media_type),null!=e.encrypted&&Object.hasOwnProperty.call(e,"encrypted")&&t.uint32(32).bool(e.encrypted),null!=e.img_options&&e.img_options.length)for(var n=0;n<e.img_options.length;++n)u.im_proto.ImgOption.encode(e.img_options[n],t.uint32(42).fork()).ldelim();if(null!=e.video_options&&e.video_options.length)for(n=0;n<e.video_options.length;++n)u.im_proto.VideoOption.encode(e.video_options[n],t.uint32(50).fork()).ldelim();if(null!=e.audio_options&&e.audio_options.length)for(n=0;n<e.audio_options.length;++n)u.im_proto.AudioOption.encode(e.audio_options[n],t.uint32(58).fork()).ldelim();if(null!=e.file_options&&e.file_options.length)for(n=0;n<e.file_options.length;++n)u.im_proto.FileOption.encode(e.file_options[n],t.uint32(66).fork()).ldelim();return null!=e.encrypted_uri&&Object.hasOwnProperty.call(e,"encrypted_uri")&&t.uint32(74).string(e.encrypted_uri),null!=e.read_url_from&&Object.hasOwnProperty.call(e,"read_url_from")&&t.uint32(80).int32(e.read_url_from),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMediaUrlsRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.source_appid=e.int32();break;case 2:r.uri=e.string();break;case 3:r.media_type=e.int32();break;case 4:r.encrypted=e.bool();break;case 5:r.img_options&&r.img_options.length||(r.img_options=[]),r.img_options.push(u.im_proto.ImgOption.decode(e,e.uint32()));break;case 6:r.video_options&&r.video_options.length||(r.video_options=[]),r.video_options.push(u.im_proto.VideoOption.decode(e,e.uint32()));break;case 7:r.audio_options&&r.audio_options.length||(r.audio_options=[]),r.audio_options.push(u.im_proto.AudioOption.decode(e,e.uint32()));break;case 8:r.file_options&&r.file_options.length||(r.file_options=[]),r.file_options.push(u.im_proto.FileOption.decode(e,e.uint32()));break;case 9:r.encrypted_uri=e.string();break;case 10:r.read_url_from=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetMediaUrlsResponseBody=function(){function e(e){if(this.img_options=[],this.video_options=[],this.audio_options=[],this.file_options=[],this.encrypted_urls=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri="",e.prototype.media_type=0,e.prototype.img_options=c.emptyArray,e.prototype.video_options=c.emptyArray,e.prototype.audio_options=c.emptyArray,e.prototype.file_options=c.emptyArray,e.prototype.encrypted_urls=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(10).string(e.uri),null!=e.media_type&&Object.hasOwnProperty.call(e,"media_type")&&t.uint32(16).int32(e.media_type),null!=e.img_options&&e.img_options.length)for(var n=0;n<e.img_options.length;++n)u.im_proto.ImgOption.encode(e.img_options[n],t.uint32(26).fork()).ldelim();if(null!=e.video_options&&e.video_options.length)for(n=0;n<e.video_options.length;++n)u.im_proto.VideoOption.encode(e.video_options[n],t.uint32(34).fork()).ldelim();if(null!=e.audio_options&&e.audio_options.length)for(n=0;n<e.audio_options.length;++n)u.im_proto.AudioOption.encode(e.audio_options[n],t.uint32(42).fork()).ldelim();if(null!=e.file_options&&e.file_options.length)for(n=0;n<e.file_options.length;++n)u.im_proto.FileOption.encode(e.file_options[n],t.uint32(50).fork()).ldelim();if(null!=e.encrypted_urls&&e.encrypted_urls.length)for(n=0;n<e.encrypted_urls.length;++n)t.uint32(58).string(e.encrypted_urls[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMediaUrlsResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.uri=e.string();break;case 2:r.media_type=e.int32();break;case 3:r.img_options&&r.img_options.length||(r.img_options=[]),r.img_options.push(u.im_proto.ImgOption.decode(e,e.uint32()));break;case 4:r.video_options&&r.video_options.length||(r.video_options=[]),r.video_options.push(u.im_proto.VideoOption.decode(e,e.uint32()));break;case 5:r.audio_options&&r.audio_options.length||(r.audio_options=[]),r.audio_options.push(u.im_proto.AudioOption.decode(e,e.uint32()));break;case 6:r.file_options&&r.file_options.length||(r.file_options=[]),r.file_options.push(u.im_proto.FileOption.decode(e,e.uint32()));break;case 7:r.encrypted_urls&&r.encrypted_urls.length||(r.encrypted_urls=[]),r.encrypted_urls.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.GetTicketRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ticket_type=1,e.prototype.conversation_type=1,e.prototype.to_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.ticket_type&&Object.hasOwnProperty.call(e,"ticket_type")&&t.uint32(8).int32(e.ticket_type),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.to_id&&Object.hasOwnProperty.call(e,"to_id")&&t.uint32(32).int64(e.to_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(82).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.GetTicketRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.ticket_type=e.int32();break;case 2:i.conversation_type=e.int32();break;case 4:i.to_id=e.int64();break;case 5:i.conversation_short_id=e.int64();break;case 10:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.GetTicketResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ticket="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(10).string(e.ticket),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetTicketResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.ticket=e.string();else e.skipType(7&o)}return r},e}(),e.SortType=function(){const e={},t=Object.create(e);return t[e[1]="JOIN_TIME"]=1,t[e[2]="CREATED_TIME"]=2,t[e[3]="GROUP_NAME"]=3,t[e[4]="ACTIVE_TIME"]=4,t}(),e.GetUserConversationListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sort_type=1,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.con_type=1,e.prototype.limit=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.include_role=0,e.prototype.exclude_role=0,e.prototype.with_cold=!1,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(8).int32(e.sort_type),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(16).int64(e.cursor),null!=e.con_type&&Object.hasOwnProperty.call(e,"con_type")&&t.uint32(24).int32(e.con_type),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(32).int64(e.limit),null!=e.include_role&&Object.hasOwnProperty.call(e,"include_role")&&t.uint32(40).int32(e.include_role),null!=e.exclude_role&&Object.hasOwnProperty.call(e,"exclude_role")&&t.uint32(48).int32(e.exclude_role),null!=e.with_cold&&Object.hasOwnProperty.call(e,"with_cold")&&t.uint32(64).bool(e.with_cold),null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(80).int32(e.push_status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetUserConversationListRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.sort_type=e.int32();break;case 2:r.cursor=e.int64();break;case 3:r.con_type=e.int32();break;case 4:r.limit=e.int64();break;case 5:r.include_role=e.int32();break;case 6:r.exclude_role=e.int32();break;case 8:r.with_cold=e.bool();break;case 10:r.push_status=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetUserConversationListResponseBody=function(){function e(e){if(this.list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.list=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.list&&e.list.length)for(var n=0;n<e.list.length;++n)u.im_proto.ConversationInfoV2.encode(e.list[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetUserConversationListResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.list&&r.list.length||(r.list=[]),r.list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ModifyMessageExtRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ticket="",e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),t.uint32(8).int64(e.conversation_short_id),t.uint32(16).int64(e.message_id),t.uint32(26).string(e.ticket),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ModifyMessageExtRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_short_id=e.int64();break;case 2:i.message_id=e.int64();break;case 3:i.ticket=e.string();break;case 4:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("conversation_short_id"))throw c.ProtocolError("missing required 'conversation_short_id'",{instance:i});if(!i.hasOwnProperty("message_id"))throw c.ProtocolError("missing required 'message_id'",{instance:i});if(!i.hasOwnProperty("ticket"))throw c.ProtocolError("missing required 'ticket'",{instance:i});return i},e}(),e.RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_message_body=null,e.prototype.messages_per_user_body=null,e.prototype.messages_per_user_init_v2_body=null,e.prototype.get_message_by_id_body=null,e.prototype.messages_in_conversation_body=null,e.prototype.get_messages_checkinfo_in_conversation_body=null,e.prototype.send_user_action_body=null,e.prototype.send_input_status_body=null,e.prototype.delete_conversation_body=null,e.prototype.mark_conversation_read_body=null,e.prototype.conversation_participants_body=null,e.prototype.dissolve_conversation_body=null,e.prototype.create_conversation_v2_body=null,e.prototype.get_conversation_info_list_v2_body=null,e.prototype.get_conversation_info_list_by_favorite_v2_body=null,e.prototype.get_conversation_info_list_by_top_v2_body=null,e.prototype.conversation_add_participants_body=null,e.prototype.conversation_remove_participants_body=null,e.prototype.leave_conversation_body=null,e.prototype.mget_conversation_participants_body=null,e.prototype.update_conversation_participant_body=null,e.prototype.delete_message_body=null,e.prototype.recall_message_body=null,e.prototype.modify_message_property_body=null,e.prototype.audio_recognition_body=null,e.prototype.get_conversation_core_info_body=null,e.prototype.set_conversation_core_info_body=null,e.prototype.upsert_conversation_core_ext_info_body=null,e.prototype.set_conversation_setting_info_body=null,e.prototype.upsert_conversation_setting_ext_info_body=null,e.prototype.get_stranger_conversation_body=null,e.prototype.get_stranger_messages_body=null,e.prototype.delete_stranger_message_body=null,e.prototype.delete_stranger_conversation_body=null,e.prototype.delete_stranger_all_conversation_body=null,e.prototype.mark_stranger_conversation_read_body=null,e.prototype.mark_stranger_all_conversation_read_body=null,e.prototype.participants_read_index_body=null,e.prototype.participants_min_index_body=null,e.prototype.get_upload_token_body=null,e.prototype.get_media_urls_body=null,e.prototype.get_ticket_body=null,e.prototype.get_conversation_list_body=null,e.prototype.broadcast_send_message_body=null,e.prototype.broadcast_recv_message_body=null,e.prototype.broadcast_user_counter_body=null,e.prototype.client_ack_body=null,e.prototype.create_voip_body=null,e.prototype.call_voip_body=null,e.prototype.update_voip_body=null,e.prototype.channel_heartbeat_body=null,e.prototype.profile_get_info=null,e.prototype.report_client_metrics_body=null,e.prototype.get_configs_body=null,e.prototype.modify_message_ext_body=null,e.prototype.unread_count_report_body=null,e.prototype.block_members_body=null,e.prototype.block_conversation_body=null,e.prototype.get_unread_count_body=null,e.prototype.send_message_p2p_body=null,e.prototype.get_blocklist_body=null,e.prototype.set_blocklist_body=null,e.prototype.check_in_blocklist_body=null,e.prototype.mark_message_body=null,e.prototype.pull_mark_message_body=null,e.prototype.batch_get_conversation_participants_readindex=null,e.prototype.message_by_init=null,e.prototype.mark_msg_unread_count_report=null,e.prototype.mark_msg_get_unread_count=null,e.prototype.batch_unmark_message=null,e.prototype.client_batch_ack_body=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.send_message_body&&Object.hasOwnProperty.call(e,"send_message_body")&&u.im_proto.SendMessageRequestBody.encode(e.send_message_body,t.uint32(802).fork()).ldelim(),null!=e.messages_per_user_body&&Object.hasOwnProperty.call(e,"messages_per_user_body")&&u.im_proto.MessagesPerUserRequestBody.encode(e.messages_per_user_body,t.uint32(1602).fork()).ldelim(),null!=e.messages_per_user_init_v2_body&&Object.hasOwnProperty.call(e,"messages_per_user_init_v2_body")&&u.im_proto.MessagesPerUserInitV2RequestBody.encode(e.messages_per_user_init_v2_body,t.uint32(1626).fork()).ldelim(),null!=e.get_message_by_id_body&&Object.hasOwnProperty.call(e,"get_message_by_id_body")&&u.im_proto.GetMessageByIdRequestBody.encode(e.get_message_by_id_body,t.uint32(1690).fork()).ldelim(),null!=e.messages_in_conversation_body&&Object.hasOwnProperty.call(e,"messages_in_conversation_body")&&u.im_proto.MessagesInConversationRequestBody.encode(e.messages_in_conversation_body,t.uint32(2410).fork()).ldelim(),null!=e.get_messages_checkinfo_in_conversation_body&&Object.hasOwnProperty.call(e,"get_messages_checkinfo_in_conversation_body")&&u.im_proto.GetMessagesCheckInfoInConversationRequestBody.encode(e.get_messages_checkinfo_in_conversation_body,t.uint32(2418).fork()).ldelim(),null!=e.send_user_action_body&&Object.hasOwnProperty.call(e,"send_user_action_body")&&u.im_proto.SendUserActionRequestBody.encode(e.send_user_action_body,t.uint32(3282).fork()).ldelim(),null!=e.send_input_status_body&&Object.hasOwnProperty.call(e,"send_input_status_body")&&u.im_proto.SendInputStatusRequestBody.encode(e.send_input_status_body,t.uint32(3290).fork()).ldelim(),null!=e.delete_conversation_body&&Object.hasOwnProperty.call(e,"delete_conversation_body")&&u.im_proto.DeleteConversationRequestBody.encode(e.delete_conversation_body,t.uint32(4826).fork()).ldelim(),null!=e.mark_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_conversation_read_body")&&u.im_proto.MarkConversationReadRequestBody.encode(e.mark_conversation_read_body,t.uint32(4834).fork()).ldelim(),null!=e.conversation_participants_body&&Object.hasOwnProperty.call(e,"conversation_participants_body")&&u.im_proto.ConversationParticipantsListRequestBody.encode(e.conversation_participants_body,t.uint32(4842).fork()).ldelim(),null!=e.create_conversation_v2_body&&Object.hasOwnProperty.call(e,"create_conversation_v2_body")&&u.im_proto.CreateConversationV2RequestBody.encode(e.create_conversation_v2_body,t.uint32(4874).fork()).ldelim(),null!=e.get_conversation_info_list_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_v2_body")&&u.im_proto.GetConversationInfoListV2RequestBody.encode(e.get_conversation_info_list_v2_body,t.uint32(4882).fork()).ldelim(),null!=e.get_conversation_info_list_by_favorite_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_by_favorite_v2_body")&&u.im_proto.ConversationsPerUserByFavoriteV2RequestBody.encode(e.get_conversation_info_list_by_favorite_v2_body,t.uint32(4890).fork()).ldelim(),null!=e.get_conversation_info_list_by_top_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_by_top_v2_body")&&u.im_proto.ConversationsPerUserByTopV2RequestBody.encode(e.get_conversation_info_list_by_top_v2_body,t.uint32(4898).fork()).ldelim(),null!=e.dissolve_conversation_body&&Object.hasOwnProperty.call(e,"dissolve_conversation_body")&&u.im_proto.DissolveConversationRequestBody.encode(e.dissolve_conversation_body,t.uint32(4914).fork()).ldelim(),null!=e.conversation_add_participants_body&&Object.hasOwnProperty.call(e,"conversation_add_participants_body")&&u.im_proto.ConversationAddParticipantsRequestBody.encode(e.conversation_add_participants_body,t.uint32(5202).fork()).ldelim(),null!=e.conversation_remove_participants_body&&Object.hasOwnProperty.call(e,"conversation_remove_participants_body")&&u.im_proto.ConversationRemoveParticipantsRequestBody.encode(e.conversation_remove_participants_body,t.uint32(5210).fork()).ldelim(),null!=e.leave_conversation_body&&Object.hasOwnProperty.call(e,"leave_conversation_body")&&u.im_proto.ConversationLeaveRequestBody.encode(e.leave_conversation_body,t.uint32(5218).fork()).ldelim(),null!=e.mget_conversation_participants_body&&Object.hasOwnProperty.call(e,"mget_conversation_participants_body")&&u.im_proto.MgetConversationParticipantsRequestBody.encode(e.mget_conversation_participants_body,t.uint32(5234).fork()).ldelim(),null!=e.update_conversation_participant_body&&Object.hasOwnProperty.call(e,"update_conversation_participant_body")&&u.im_proto.UpdateConversationParticipantRequestBody.encode(e.update_conversation_participant_body,t.uint32(5242).fork()).ldelim(),null!=e.delete_message_body&&Object.hasOwnProperty.call(e,"delete_message_body")&&u.im_proto.DeleteMessageRequestBody.encode(e.delete_message_body,t.uint32(5610).fork()).ldelim(),null!=e.recall_message_body&&Object.hasOwnProperty.call(e,"recall_message_body")&&u.im_proto.RecallMessageRequestBody.encode(e.recall_message_body,t.uint32(5618).fork()).ldelim(),null!=e.modify_message_property_body&&Object.hasOwnProperty.call(e,"modify_message_property_body")&&u.im_proto.ModifyMessagePropertyRequestBody.encode(e.modify_message_property_body,t.uint32(5642).fork()).ldelim(),null!=e.get_conversation_core_info_body&&Object.hasOwnProperty.call(e,"get_conversation_core_info_body")&&u.im_proto.GetConversationCoreInfoRequestBody.encode(e.get_conversation_core_info_body,t.uint32(7210).fork()).ldelim(),null!=e.set_conversation_core_info_body&&Object.hasOwnProperty.call(e,"set_conversation_core_info_body")&&u.im_proto.SetConversationCoreInfoRequestBody.encode(e.set_conversation_core_info_body,t.uint32(7218).fork()).ldelim(),null!=e.upsert_conversation_core_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_core_ext_info_body")&&u.im_proto.UpsertConversationCoreExtInfoRequestBody.encode(e.upsert_conversation_core_ext_info_body,t.uint32(7234).fork()).ldelim(),null!=e.set_conversation_setting_info_body&&Object.hasOwnProperty.call(e,"set_conversation_setting_info_body")&&u.im_proto.SetConversationSettingInfoRequestBody.encode(e.set_conversation_setting_info_body,t.uint32(7370).fork()).ldelim(),null!=e.upsert_conversation_setting_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_setting_ext_info_body")&&u.im_proto.UpsertConversationSettingExtInfoRequestBody.encode(e.upsert_conversation_setting_ext_info_body,t.uint32(7378).fork()).ldelim(),null!=e.get_stranger_conversation_body&&Object.hasOwnProperty.call(e,"get_stranger_conversation_body")&&u.im_proto.GetStrangerConversationListRequestBody.encode(e.get_stranger_conversation_body,t.uint32(8002).fork()).ldelim(),null!=e.get_stranger_messages_body&&Object.hasOwnProperty.call(e,"get_stranger_messages_body")&&u.im_proto.GetStrangerMessagesRequestBody.encode(e.get_stranger_messages_body,t.uint32(8010).fork()).ldelim(),null!=e.delete_stranger_message_body&&Object.hasOwnProperty.call(e,"delete_stranger_message_body")&&u.im_proto.DeleteStrangerMessageRequestBody.encode(e.delete_stranger_message_body,t.uint32(8018).fork()).ldelim(),null!=e.delete_stranger_conversation_body&&Object.hasOwnProperty.call(e,"delete_stranger_conversation_body")&&u.im_proto.DeleteStrangerConversationRequestBody.encode(e.delete_stranger_conversation_body,t.uint32(8026).fork()).ldelim(),null!=e.delete_stranger_all_conversation_body&&Object.hasOwnProperty.call(e,"delete_stranger_all_conversation_body")&&u.im_proto.DeleteStrangerAllConversationRequestBody.encode(e.delete_stranger_all_conversation_body,t.uint32(8034).fork()).ldelim(),null!=e.mark_stranger_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_stranger_conversation_read_body")&&u.im_proto.MarkStrangerConversationReadRequestBody.encode(e.mark_stranger_conversation_read_body,t.uint32(8042).fork()).ldelim(),null!=e.mark_stranger_all_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_stranger_all_conversation_read_body")&&u.im_proto.MarkStrangerAllConversationReadRequestBody.encode(e.mark_stranger_all_conversation_read_body,t.uint32(8050).fork()).ldelim(),null!=e.participants_read_index_body&&Object.hasOwnProperty.call(e,"participants_read_index_body")&&u.im_proto.GetConversationParticipantsReadIndexV3RequestBody.encode(e.participants_read_index_body,t.uint32(16002).fork()).ldelim(),null!=e.participants_min_index_body&&Object.hasOwnProperty.call(e,"participants_min_index_body")&&u.im_proto.GetConversationParticipantsMinIndexV3RequestBody.encode(e.participants_min_index_body,t.uint32(16010).fork()).ldelim(),null!=e.get_upload_token_body&&Object.hasOwnProperty.call(e,"get_upload_token_body")&&u.im_proto.GetUploadTokenRequestBody.encode(e.get_upload_token_body,t.uint32(16026).fork()).ldelim(),null!=e.get_media_urls_body&&Object.hasOwnProperty.call(e,"get_media_urls_body")&&u.im_proto.GetMediaUrlsRequestBody.encode(e.get_media_urls_body,t.uint32(16034).fork()).ldelim(),null!=e.get_ticket_body&&Object.hasOwnProperty.call(e,"get_ticket_body")&&u.im_proto.GetTicketRequestBody.encode(e.get_ticket_body,t.uint32(16042).fork()).ldelim(),null!=e.get_conversation_list_body&&Object.hasOwnProperty.call(e,"get_conversation_list_body")&&u.im_proto.GetUserConversationListRequestBody.encode(e.get_conversation_list_body,t.uint32(16050).fork()).ldelim(),null!=e.broadcast_send_message_body&&Object.hasOwnProperty.call(e,"broadcast_send_message_body")&&u.im_proto.BroadcastSendMessageRequestBody.encode(e.broadcast_send_message_body,t.uint32(16058).fork()).ldelim(),null!=e.broadcast_recv_message_body&&Object.hasOwnProperty.call(e,"broadcast_recv_message_body")&&u.im_proto.BroadcastRecvMessageRequestBody.encode(e.broadcast_recv_message_body,t.uint32(16066).fork()).ldelim(),null!=e.broadcast_user_counter_body&&Object.hasOwnProperty.call(e,"broadcast_user_counter_body")&&u.im_proto.BroadcastUserCounterRequestBody.encode(e.broadcast_user_counter_body,t.uint32(16074).fork()).ldelim(),null!=e.client_ack_body&&Object.hasOwnProperty.call(e,"client_ack_body")&&u.im_proto.ClientACKRequestBody.encode(e.client_ack_body,t.uint32(16082).fork()).ldelim(),null!=e.create_voip_body&&Object.hasOwnProperty.call(e,"create_voip_body")&&u.im_proto.CreateVoipRequestBody.encode(e.create_voip_body,t.uint32(16090).fork()).ldelim(),null!=e.call_voip_body&&Object.hasOwnProperty.call(e,"call_voip_body")&&u.im_proto.CallVoipRequestBody.encode(e.call_voip_body,t.uint32(16098).fork()).ldelim(),null!=e.update_voip_body&&Object.hasOwnProperty.call(e,"update_voip_body")&&u.im_proto.UpdateVoipRequestBody.encode(e.update_voip_body,t.uint32(16106).fork()).ldelim(),null!=e.channel_heartbeat_body&&Object.hasOwnProperty.call(e,"channel_heartbeat_body")&&u.im_proto.ChannelHeartBeatRequestBody.encode(e.channel_heartbeat_body,t.uint32(16114).fork()).ldelim(),null!=e.profile_get_info&&Object.hasOwnProperty.call(e,"profile_get_info")&&u.im_proto.ProfileGetInfoRequestBody.encode(e.profile_get_info,t.uint32(16122).fork()).ldelim(),null!=e.report_client_metrics_body&&Object.hasOwnProperty.call(e,"report_client_metrics_body")&&u.im_proto.ReportClientMetricsRequestBody.encode(e.report_client_metrics_body,t.uint32(16130).fork()).ldelim(),null!=e.get_configs_body&&Object.hasOwnProperty.call(e,"get_configs_body")&&u.im_proto.GetConfigsRequestBody.encode(e.get_configs_body,t.uint32(16138).fork()).ldelim(),null!=e.unread_count_report_body&&Object.hasOwnProperty.call(e,"unread_count_report_body")&&u.im_proto.UnReadCountReportRequestBody.encode(e.unread_count_report_body,t.uint32(16146).fork()).ldelim(),null!=e.block_members_body&&Object.hasOwnProperty.call(e,"block_members_body")&&u.im_proto.BlockMembersRequestBody.encode(e.block_members_body,t.uint32(16154).fork()).ldelim(),null!=e.block_conversation_body&&Object.hasOwnProperty.call(e,"block_conversation_body")&&u.im_proto.BlockConversationRequestBody.encode(e.block_conversation_body,t.uint32(16162).fork()).ldelim(),null!=e.modify_message_ext_body&&Object.hasOwnProperty.call(e,"modify_message_ext_body")&&u.im_proto.ModifyMessageExtRequestBody.encode(e.modify_message_ext_body,t.uint32(16170).fork()).ldelim(),null!=e.get_unread_count_body&&Object.hasOwnProperty.call(e,"get_unread_count_body")&&u.im_proto.GetUnreadCountRequestBody.encode(e.get_unread_count_body,t.uint32(16242).fork()).ldelim(),null!=e.send_message_p2p_body&&Object.hasOwnProperty.call(e,"send_message_p2p_body")&&u.im_proto.SendMessageP2PRequestBody.encode(e.send_message_p2p_body,t.uint32(16250).fork()).ldelim(),null!=e.get_blocklist_body&&Object.hasOwnProperty.call(e,"get_blocklist_body")&&u.im_proto.GetBlockListRequestBody.encode(e.get_blocklist_body,t.uint32(16258).fork()).ldelim(),null!=e.set_blocklist_body&&Object.hasOwnProperty.call(e,"set_blocklist_body")&&u.im_proto.SetBlocklistRequestBody.encode(e.set_blocklist_body,t.uint32(16266).fork()).ldelim(),null!=e.check_in_blocklist_body&&Object.hasOwnProperty.call(e,"check_in_blocklist_body")&&u.im_proto.CheckInBlockListRequestBody.encode(e.check_in_blocklist_body,t.uint32(16274).fork()).ldelim(),null!=e.mark_message_body&&Object.hasOwnProperty.call(e,"mark_message_body")&&u.im_proto.MarkMessageRequestBody.encode(e.mark_message_body,t.uint32(16290).fork()).ldelim(),null!=e.pull_mark_message_body&&Object.hasOwnProperty.call(e,"pull_mark_message_body")&&u.im_proto.PullMarkMessageRequestBody.encode(e.pull_mark_message_body,t.uint32(16298).fork()).ldelim(),null!=e.batch_get_conversation_participants_readindex&&Object.hasOwnProperty.call(e,"batch_get_conversation_participants_readindex")&&u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody.encode(e.batch_get_conversation_participants_readindex,t.uint32(16306).fork()).ldelim(),null!=e.message_by_init&&Object.hasOwnProperty.call(e,"message_by_init")&&u.im_proto.MessageByInitRequestBody.encode(e.message_by_init,t.uint32(16346).fork()).ldelim(),null!=e.mark_msg_unread_count_report&&Object.hasOwnProperty.call(e,"mark_msg_unread_count_report")&&u.im_proto.MarkMsgUnreadCountReportRequestBody.encode(e.mark_msg_unread_count_report,t.uint32(16434).fork()).ldelim(),null!=e.mark_msg_get_unread_count&&Object.hasOwnProperty.call(e,"mark_msg_get_unread_count")&&u.im_proto.MarkMsgGetUnreadCountRequestBody.encode(e.mark_msg_get_unread_count,t.uint32(16442).fork()).ldelim(),null!=e.batch_unmark_message&&Object.hasOwnProperty.call(e,"batch_unmark_message")&&u.im_proto.BatchUnmarkMessageRequestBody.encode(e.batch_unmark_message,t.uint32(16450).fork()).ldelim(),null!=e.client_batch_ack_body&&Object.hasOwnProperty.call(e,"client_batch_ack_body")&&u.im_proto.ClientBatchACKRequestBody.encode(e.client_batch_ack_body,t.uint32(16458).fork()).ldelim(),null!=e.audio_recognition_body&&Object.hasOwnProperty.call(e,"audio_recognition_body")&&u.im_proto.AudioRecognitionRequestBody.encode(e.audio_recognition_body,t.uint32(16474).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.RequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 100:r.send_message_body=u.im_proto.SendMessageRequestBody.decode(e,e.uint32());break;case 200:r.messages_per_user_body=u.im_proto.MessagesPerUserRequestBody.decode(e,e.uint32());break;case 203:r.messages_per_user_init_v2_body=u.im_proto.MessagesPerUserInitV2RequestBody.decode(e,e.uint32());break;case 211:r.get_message_by_id_body=u.im_proto.GetMessageByIdRequestBody.decode(e,e.uint32());break;case 301:r.messages_in_conversation_body=u.im_proto.MessagesInConversationRequestBody.decode(e,e.uint32());break;case 302:r.get_messages_checkinfo_in_conversation_body=u.im_proto.GetMessagesCheckInfoInConversationRequestBody.decode(e,e.uint32());break;case 410:r.send_user_action_body=u.im_proto.SendUserActionRequestBody.decode(e,e.uint32());break;case 411:r.send_input_status_body=u.im_proto.SendInputStatusRequestBody.decode(e,e.uint32());break;case 603:r.delete_conversation_body=u.im_proto.DeleteConversationRequestBody.decode(e,e.uint32());break;case 604:r.mark_conversation_read_body=u.im_proto.MarkConversationReadRequestBody.decode(e,e.uint32());break;case 605:r.conversation_participants_body=u.im_proto.ConversationParticipantsListRequestBody.decode(e,e.uint32());break;case 614:r.dissolve_conversation_body=u.im_proto.DissolveConversationRequestBody.decode(e,e.uint32());break;case 609:r.create_conversation_v2_body=u.im_proto.CreateConversationV2RequestBody.decode(e,e.uint32());break;case 610:r.get_conversation_info_list_v2_body=u.im_proto.GetConversationInfoListV2RequestBody.decode(e,e.uint32());break;case 611:r.get_conversation_info_list_by_favorite_v2_body=u.im_proto.ConversationsPerUserByFavoriteV2RequestBody.decode(e,e.uint32());break;case 612:r.get_conversation_info_list_by_top_v2_body=u.im_proto.ConversationsPerUserByTopV2RequestBody.decode(e,e.uint32());break;case 650:r.conversation_add_participants_body=u.im_proto.ConversationAddParticipantsRequestBody.decode(e,e.uint32());break;case 651:r.conversation_remove_participants_body=u.im_proto.ConversationRemoveParticipantsRequestBody.decode(e,e.uint32());break;case 652:r.leave_conversation_body=u.im_proto.ConversationLeaveRequestBody.decode(e,e.uint32());break;case 654:r.mget_conversation_participants_body=u.im_proto.MgetConversationParticipantsRequestBody.decode(e,e.uint32());break;case 655:r.update_conversation_participant_body=u.im_proto.UpdateConversationParticipantRequestBody.decode(e,e.uint32());break;case 701:r.delete_message_body=u.im_proto.DeleteMessageRequestBody.decode(e,e.uint32());break;case 702:r.recall_message_body=u.im_proto.RecallMessageRequestBody.decode(e,e.uint32());break;case 705:r.modify_message_property_body=u.im_proto.ModifyMessagePropertyRequestBody.decode(e,e.uint32());break;case 2059:r.audio_recognition_body=u.im_proto.AudioRecognitionRequestBody.decode(e,e.uint32());break;case 901:r.get_conversation_core_info_body=u.im_proto.GetConversationCoreInfoRequestBody.decode(e,e.uint32());break;case 902:r.set_conversation_core_info_body=u.im_proto.SetConversationCoreInfoRequestBody.decode(e,e.uint32());break;case 904:r.upsert_conversation_core_ext_info_body=u.im_proto.UpsertConversationCoreExtInfoRequestBody.decode(e,e.uint32());break;case 921:r.set_conversation_setting_info_body=u.im_proto.SetConversationSettingInfoRequestBody.decode(e,e.uint32());break;case 922:r.upsert_conversation_setting_ext_info_body=u.im_proto.UpsertConversationSettingExtInfoRequestBody.decode(e,e.uint32());break;case 1e3:r.get_stranger_conversation_body=u.im_proto.GetStrangerConversationListRequestBody.decode(e,e.uint32());break;case 1001:r.get_stranger_messages_body=u.im_proto.GetStrangerMessagesRequestBody.decode(e,e.uint32());break;case 1002:r.delete_stranger_message_body=u.im_proto.DeleteStrangerMessageRequestBody.decode(e,e.uint32());break;case 1003:r.delete_stranger_conversation_body=u.im_proto.DeleteStrangerConversationRequestBody.decode(e,e.uint32());break;case 1004:r.delete_stranger_all_conversation_body=u.im_proto.DeleteStrangerAllConversationRequestBody.decode(e,e.uint32());break;case 1005:r.mark_stranger_conversation_read_body=u.im_proto.MarkStrangerConversationReadRequestBody.decode(e,e.uint32());break;case 1006:r.mark_stranger_all_conversation_read_body=u.im_proto.MarkStrangerAllConversationReadRequestBody.decode(e,e.uint32());break;case 2e3:r.participants_read_index_body=u.im_proto.GetConversationParticipantsReadIndexV3RequestBody.decode(e,e.uint32());break;case 2001:r.participants_min_index_body=u.im_proto.GetConversationParticipantsMinIndexV3RequestBody.decode(e,e.uint32());break;case 2003:r.get_upload_token_body=u.im_proto.GetUploadTokenRequestBody.decode(e,e.uint32());break;case 2004:r.get_media_urls_body=u.im_proto.GetMediaUrlsRequestBody.decode(e,e.uint32());break;case 2005:r.get_ticket_body=u.im_proto.GetTicketRequestBody.decode(e,e.uint32());break;case 2006:r.get_conversation_list_body=u.im_proto.GetUserConversationListRequestBody.decode(e,e.uint32());break;case 2007:r.broadcast_send_message_body=u.im_proto.BroadcastSendMessageRequestBody.decode(e,e.uint32());break;case 2008:r.broadcast_recv_message_body=u.im_proto.BroadcastRecvMessageRequestBody.decode(e,e.uint32());break;case 2009:r.broadcast_user_counter_body=u.im_proto.BroadcastUserCounterRequestBody.decode(e,e.uint32());break;case 2010:r.client_ack_body=u.im_proto.ClientACKRequestBody.decode(e,e.uint32());break;case 2011:r.create_voip_body=u.im_proto.CreateVoipRequestBody.decode(e,e.uint32());break;case 2012:r.call_voip_body=u.im_proto.CallVoipRequestBody.decode(e,e.uint32());break;case 2013:r.update_voip_body=u.im_proto.UpdateVoipRequestBody.decode(e,e.uint32());break;case 2014:r.channel_heartbeat_body=u.im_proto.ChannelHeartBeatRequestBody.decode(e,e.uint32());break;case 2015:r.profile_get_info=u.im_proto.ProfileGetInfoRequestBody.decode(e,e.uint32());break;case 2016:r.report_client_metrics_body=u.im_proto.ReportClientMetricsRequestBody.decode(e,e.uint32());break;case 2017:r.get_configs_body=u.im_proto.GetConfigsRequestBody.decode(e,e.uint32());break;case 2021:r.modify_message_ext_body=u.im_proto.ModifyMessageExtRequestBody.decode(e,e.uint32());break;case 2018:r.unread_count_report_body=u.im_proto.UnReadCountReportRequestBody.decode(e,e.uint32());break;case 2019:r.block_members_body=u.im_proto.BlockMembersRequestBody.decode(e,e.uint32());break;case 2020:r.block_conversation_body=u.im_proto.BlockConversationRequestBody.decode(e,e.uint32());break;case 2030:r.get_unread_count_body=u.im_proto.GetUnreadCountRequestBody.decode(e,e.uint32());break;case 2031:r.send_message_p2p_body=u.im_proto.SendMessageP2PRequestBody.decode(e,e.uint32());break;case 2032:r.get_blocklist_body=u.im_proto.GetBlockListRequestBody.decode(e,e.uint32());break;case 2033:r.set_blocklist_body=u.im_proto.SetBlocklistRequestBody.decode(e,e.uint32());break;case 2034:r.check_in_blocklist_body=u.im_proto.CheckInBlockListRequestBody.decode(e,e.uint32());break;case 2036:r.mark_message_body=u.im_proto.MarkMessageRequestBody.decode(e,e.uint32());break;case 2037:r.pull_mark_message_body=u.im_proto.PullMarkMessageRequestBody.decode(e,e.uint32());break;case 2038:r.batch_get_conversation_participants_readindex=u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody.decode(e,e.uint32());break;case 2043:r.message_by_init=u.im_proto.MessageByInitRequestBody.decode(e,e.uint32());break;case 2054:r.mark_msg_unread_count_report=u.im_proto.MarkMsgUnreadCountReportRequestBody.decode(e,e.uint32());break;case 2055:r.mark_msg_get_unread_count=u.im_proto.MarkMsgGetUnreadCountRequestBody.decode(e,e.uint32());break;case 2056:r.batch_unmark_message=u.im_proto.BatchUnmarkMessageRequestBody.decode(e,e.uint32());break;case 2057:r.client_batch_ack_body=u.im_proto.ClientBatchACKRequestBody.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.Request=function(){function e(e){if(this.headers={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cmd=0,e.prototype.sequence_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sdk_version="",e.prototype.token="",e.prototype.refer=1,e.prototype.inbox_type=0,e.prototype.build_number="",e.prototype.body=null,e.prototype.device_id="",e.prototype.channel="",e.prototype.device_platform="",e.prototype.device_type="",e.prototype.os_version="",e.prototype.version_code="",e.prototype.headers=c.emptyObject,e.prototype.config_id=0,e.prototype.token_info=null,e.prototype.auth_type=0,e.prototype.biz="",e.prototype.access="",e.prototype.ts_sign="",e.prototype.sdk_cert="",e.prototype.reuqest_sign="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(8).int32(e.cmd),null!=e.sequence_id&&Object.hasOwnProperty.call(e,"sequence_id")&&t.uint32(16).int64(e.sequence_id),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(26).string(e.sdk_version),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(34).string(e.token),null!=e.refer&&Object.hasOwnProperty.call(e,"refer")&&t.uint32(40).int32(e.refer),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(48).int32(e.inbox_type),null!=e.build_number&&Object.hasOwnProperty.call(e,"build_number")&&t.uint32(58).string(e.build_number),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.RequestBody.encode(e.body,t.uint32(66).fork()).ldelim(),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(74).string(e.device_id),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(82).string(e.channel),null!=e.device_platform&&Object.hasOwnProperty.call(e,"device_platform")&&t.uint32(90).string(e.device_platform),null!=e.device_type&&Object.hasOwnProperty.call(e,"device_type")&&t.uint32(98).string(e.device_type),null!=e.os_version&&Object.hasOwnProperty.call(e,"os_version")&&t.uint32(106).string(e.os_version),null!=e.version_code&&Object.hasOwnProperty.call(e,"version_code")&&t.uint32(114).string(e.version_code),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(var n=Object.keys(e.headers),r=0;r<n.length;++r)t.uint32(122).fork().uint32(10).string(n[r]).uint32(18).string(e.headers[n[r]]).ldelim();return null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(128).int32(e.config_id),null!=e.token_info&&Object.hasOwnProperty.call(e,"token_info")&&u.im_proto.TokenInfo.encode(e.token_info,t.uint32(138).fork()).ldelim(),null!=e.auth_type&&Object.hasOwnProperty.call(e,"auth_type")&&t.uint32(144).int32(e.auth_type),null!=e.biz&&Object.hasOwnProperty.call(e,"biz")&&t.uint32(170).string(e.biz),null!=e.access&&Object.hasOwnProperty.call(e,"access")&&t.uint32(178).string(e.access),null!=e.ts_sign&&Object.hasOwnProperty.call(e,"ts_sign")&&t.uint32(186).string(e.ts_sign),null!=e.sdk_cert&&Object.hasOwnProperty.call(e,"sdk_cert")&&t.uint32(194).string(e.sdk_cert),null!=e.reuqest_sign&&Object.hasOwnProperty.call(e,"reuqest_sign")&&t.uint32(202).string(e.reuqest_sign),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.Request;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.cmd=e.int32();break;case 2:i.sequence_id=e.int64();break;case 3:i.sdk_version=e.string();break;case 4:i.token=e.string();break;case 5:i.refer=e.int32();break;case 6:i.inbox_type=e.int32();break;case 7:i.build_number=e.string();break;case 8:i.body=u.im_proto.RequestBody.decode(e,e.uint32());break;case 9:i.device_id=e.string();break;case 10:i.channel=e.string();break;case 11:i.device_platform=e.string();break;case 12:i.device_type=e.string();break;case 13:i.os_version=e.string();break;case 14:i.version_code=e.string();break;case 15:i.headers===c.emptyObject&&(i.headers={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.headers[n]=r;break;case 16:i.config_id=e.int32();break;case 17:i.token_info=u.im_proto.TokenInfo.decode(e,e.uint32());break;case 18:i.auth_type=e.int32();break;case 21:i.biz=e.string();break;case 22:i.access=e.string();break;case 23:i.ts_sign=e.string();break;case 24:i.sdk_cert=e.string();break;case 25:i.reuqest_sign=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.AuthType=function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_AUTH"]=0,t[e[1]="SESSION_AUTH"]=1,t[e[2]="TOKEN_AUTH"]=2,t[e[3]="CERT_AUTH"]=3,t}(),e.TokenType=function(){const e={},t=Object.create(e);return t[e[0]="DEFAULT_TOKEN"]=0,t[e[1]="APP_TOKEN"]=1,t[e[2]="SERVER_TOKEN"]=2,t}(),e.TokenInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.mark_id=0,e.prototype.type=0,e.prototype.app_id=0,e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.timestamp=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.mark_id&&Object.hasOwnProperty.call(e,"mark_id")&&t.uint32(8).int32(e.mark_id),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(24).int32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(32).int64(e.user_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(40).int64(e.timestamp),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.TokenInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.mark_id=e.int32();break;case 2:r.type=e.int32();break;case 3:r.app_id=e.int32();break;case 4:r.user_id=e.int64();break;case 5:r.timestamp=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.SendType=function(){const e={},t=Object.create(e);return t[e[0]="BY_CONVERSATION"]=0,t[e[1]="BY_USER"]=1,t}(),e.NewP2PMessageNotify=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_type=0,e.prototype.sender=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_sender="",e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.message_type=0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.send_type&&Object.hasOwnProperty.call(e,"send_type")&&t.uint32(8).int32(e.send_type),null!=e.sender&&Object.hasOwnProperty.call(e,"sender")&&t.uint32(16).int64(e.sender),null!=e.sec_sender&&Object.hasOwnProperty.call(e,"sec_sender")&&t.uint32(26).string(e.sec_sender),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(34).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(48).int32(e.conversation_type),null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(56).int32(e.message_type),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(66).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(74).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();return null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(80).int64(e.create_time),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.NewP2PMessageNotify;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.send_type=e.int32();break;case 2:i.sender=e.int64();break;case 3:i.sec_sender=e.string();break;case 4:i.conversation_id=e.string();break;case 5:i.conversation_short_id=e.int64();break;case 6:i.conversation_type=e.int32();break;case 7:i.message_type=e.int32();break;case 8:i.content=e.string();break;case 9:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 10:i.create_time=e.int64();break;default:e.skipType(7&a)}}return i},e}(),e.MessageInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.body=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.MessageBody.encode(e.body,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessageInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.status=e.int32();break;case 2:r.body=u.im_proto.MessageBody.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.GetMessageByIdRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMessageByIdRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.server_message_id=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.GetMessageByIdResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.msg_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&u.im_proto.MessageInfo.encode(e.msg_info,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMessageByIdResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.msg_info=u.im_proto.MessageInfo.decode(e,e.uint32());else e.skipType(7&o)}return r},e}(),e.ResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_message_body=null,e.prototype.messages_per_user_body=null,e.prototype.messages_per_user_init_v2_body=null,e.prototype.get_message_by_id_body=null,e.prototype.messages_in_conversation_body=null,e.prototype.get_messages_checkinfo_in_conversation_body=null,e.prototype.has_new_message_notify=null,e.prototype.has_new_p2p_message_notify=null,e.prototype.get_conversations_checkinfo_body=null,e.prototype.create_conversation_v2_body=null,e.prototype.get_conversation_info_list_v2_body=null,e.prototype.get_conversation_info_list_by_favorite_v2_body=null,e.prototype.get_conversation_info_list_by_top_v2_body=null,e.prototype.conversation_participants_body=null,e.prototype.conversation_add_participants_body=null,e.prototype.conversation_remove_participants_body=null,e.prototype.mget_conversation_participants_body=null,e.prototype.update_conversation_participant_body=null,e.prototype.modify_message_property_body=null,e.prototype.audio_recognition_body=null,e.prototype.get_conversation_core_info_body=null,e.prototype.set_conversation_core_info_body=null,e.prototype.upsert_conversation_core_ext_info_body=null,e.prototype.set_conversation_setting_info_body=null,e.prototype.upsert_conversation_setting_ext_info_body=null,e.prototype.get_stranger_conversation_body=null,e.prototype.get_stranger_messages_body=null,e.prototype.participants_read_index_body=null,e.prototype.participants_min_index_body=null,e.prototype.get_upload_token_body=null,e.prototype.get_media_urls_body=null,e.prototype.batch_get_conversation_participants_readindex=null,e.prototype.get_ticket_body=null,e.prototype.get_conversation_list_body=null,e.prototype.broadcast_send_message_body=null,e.prototype.broadcast_recv_message_body=null,e.prototype.broadcast_user_counter_body=null,e.prototype.create_voip_body=null,e.prototype.call_voip_body=null,e.prototype.update_voip_body=null,e.prototype.profile_get_info=null,e.prototype.get_configs_body=null,e.prototype.unread_count_report_body=null,e.prototype.block_members_body=null,e.prototype.get_unread_count_body=null,e.prototype.send_message_p2p_body=null,e.prototype.get_blocklist_body=null,e.prototype.set_blocklist_body=null,e.prototype.check_in_blocklist_body=null,e.prototype.mark_message_body=null,e.prototype.pull_mark_message_body=null,e.prototype.message_by_init=null,e.prototype.mark_msg_unread_count_report=null,e.prototype.mark_msg_get_unread_count=null,e.prototype.batch_unmark_message=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.send_message_body&&Object.hasOwnProperty.call(e,"send_message_body")&&u.im_proto.SendMessageResponseBody.encode(e.send_message_body,t.uint32(802).fork()).ldelim(),null!=e.messages_per_user_body&&Object.hasOwnProperty.call(e,"messages_per_user_body")&&u.im_proto.MessagesPerUserResponseBody.encode(e.messages_per_user_body,t.uint32(1602).fork()).ldelim(),null!=e.messages_per_user_init_v2_body&&Object.hasOwnProperty.call(e,"messages_per_user_init_v2_body")&&u.im_proto.MessagesPerUserInitV2ResponseBody.encode(e.messages_per_user_init_v2_body,t.uint32(1626).fork()).ldelim(),null!=e.get_message_by_id_body&&Object.hasOwnProperty.call(e,"get_message_by_id_body")&&u.im_proto.GetMessageByIdResponseBody.encode(e.get_message_by_id_body,t.uint32(1690).fork()).ldelim(),null!=e.messages_in_conversation_body&&Object.hasOwnProperty.call(e,"messages_in_conversation_body")&&u.im_proto.MessagesInConversationResponseBody.encode(e.messages_in_conversation_body,t.uint32(2410).fork()).ldelim(),null!=e.get_messages_checkinfo_in_conversation_body&&Object.hasOwnProperty.call(e,"get_messages_checkinfo_in_conversation_body")&&u.im_proto.GetMessagesCheckInfoInConversationResponseBody.encode(e.get_messages_checkinfo_in_conversation_body,t.uint32(2418).fork()).ldelim(),null!=e.has_new_message_notify&&Object.hasOwnProperty.call(e,"has_new_message_notify")&&u.im_proto.NewMessageNotify.encode(e.has_new_message_notify,t.uint32(4002).fork()).ldelim(),null!=e.has_new_p2p_message_notify&&Object.hasOwnProperty.call(e,"has_new_p2p_message_notify")&&u.im_proto.NewP2PMessageNotify.encode(e.has_new_p2p_message_notify,t.uint32(4034).fork()).ldelim(),null!=e.conversation_participants_body&&Object.hasOwnProperty.call(e,"conversation_participants_body")&&u.im_proto.ConversationParticipantsListResponseBody.encode(e.conversation_participants_body,t.uint32(4842).fork()).ldelim(),null!=e.create_conversation_v2_body&&Object.hasOwnProperty.call(e,"create_conversation_v2_body")&&u.im_proto.CreateConversationV2ResponseBody.encode(e.create_conversation_v2_body,t.uint32(4874).fork()).ldelim(),null!=e.get_conversation_info_list_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_v2_body")&&u.im_proto.GetConversationInfoListV2ResponseBody.encode(e.get_conversation_info_list_v2_body,t.uint32(4882).fork()).ldelim(),null!=e.get_conversation_info_list_by_favorite_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_by_favorite_v2_body")&&u.im_proto.GetConversationInfoListByFavoriteV2ResponseBody.encode(e.get_conversation_info_list_by_favorite_v2_body,t.uint32(4890).fork()).ldelim(),null!=e.get_conversation_info_list_by_top_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_by_top_v2_body")&&u.im_proto.GetConversationInfoListByTopV2ResponseBody.encode(e.get_conversation_info_list_by_top_v2_body,t.uint32(4898).fork()).ldelim(),null!=e.get_conversations_checkinfo_body&&Object.hasOwnProperty.call(e,"get_conversations_checkinfo_body")&&u.im_proto.GetConversationsCheckInfoResponseBody.encode(e.get_conversations_checkinfo_body,t.uint32(4922).fork()).ldelim(),null!=e.conversation_add_participants_body&&Object.hasOwnProperty.call(e,"conversation_add_participants_body")&&u.im_proto.ConversationAddParticipantsResponseBody.encode(e.conversation_add_participants_body,t.uint32(5202).fork()).ldelim(),null!=e.conversation_remove_participants_body&&Object.hasOwnProperty.call(e,"conversation_remove_participants_body")&&u.im_proto.ConversationRemoveParticipantsResponseBody.encode(e.conversation_remove_participants_body,t.uint32(5210).fork()).ldelim(),null!=e.mget_conversation_participants_body&&Object.hasOwnProperty.call(e,"mget_conversation_participants_body")&&u.im_proto.MgetConversationParticipantsResponseBody.encode(e.mget_conversation_participants_body,t.uint32(5234).fork()).ldelim(),null!=e.update_conversation_participant_body&&Object.hasOwnProperty.call(e,"update_conversation_participant_body")&&u.im_proto.UpdateConversationParticipantResponseBody.encode(e.update_conversation_participant_body,t.uint32(5242).fork()).ldelim(),null!=e.modify_message_property_body&&Object.hasOwnProperty.call(e,"modify_message_property_body")&&u.im_proto.ModifyMessagePropertyResponseBody.encode(e.modify_message_property_body,t.uint32(5642).fork()).ldelim(),null!=e.get_conversation_core_info_body&&Object.hasOwnProperty.call(e,"get_conversation_core_info_body")&&u.im_proto.GetConversationCoreInfoResponseBody.encode(e.get_conversation_core_info_body,t.uint32(7210).fork()).ldelim(),null!=e.set_conversation_core_info_body&&Object.hasOwnProperty.call(e,"set_conversation_core_info_body")&&u.im_proto.SetConversationCoreInfoResponseBody.encode(e.set_conversation_core_info_body,t.uint32(7218).fork()).ldelim(),null!=e.upsert_conversation_core_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_core_ext_info_body")&&u.im_proto.UpsertConversationCoreExtInfoResponseBody.encode(e.upsert_conversation_core_ext_info_body,t.uint32(7234).fork()).ldelim(),null!=e.set_conversation_setting_info_body&&Object.hasOwnProperty.call(e,"set_conversation_setting_info_body")&&u.im_proto.SetConversationSettingInfoResponseBody.encode(e.set_conversation_setting_info_body,t.uint32(7370).fork()).ldelim(),null!=e.upsert_conversation_setting_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_setting_ext_info_body")&&u.im_proto.UpsertConversationSettingExtInfoResponseBody.encode(e.upsert_conversation_setting_ext_info_body,t.uint32(7378).fork()).ldelim(),null!=e.get_stranger_conversation_body&&Object.hasOwnProperty.call(e,"get_stranger_conversation_body")&&u.im_proto.GetStrangerConversationListResponseBody.encode(e.get_stranger_conversation_body,t.uint32(8002).fork()).ldelim(),null!=e.get_stranger_messages_body&&Object.hasOwnProperty.call(e,"get_stranger_messages_body")&&u.im_proto.GetStrangerMessagesResponseBody.encode(e.get_stranger_messages_body,t.uint32(8010).fork()).ldelim(),null!=e.participants_read_index_body&&Object.hasOwnProperty.call(e,"participants_read_index_body")&&u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody.encode(e.participants_read_index_body,t.uint32(16002).fork()).ldelim(),null!=e.participants_min_index_body&&Object.hasOwnProperty.call(e,"participants_min_index_body")&&u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody.encode(e.participants_min_index_body,t.uint32(16010).fork()).ldelim(),null!=e.get_upload_token_body&&Object.hasOwnProperty.call(e,"get_upload_token_body")&&u.im_proto.GetUploadTokenResponseBody.encode(e.get_upload_token_body,t.uint32(16026).fork()).ldelim(),null!=e.get_media_urls_body&&Object.hasOwnProperty.call(e,"get_media_urls_body")&&u.im_proto.GetMediaUrlsResponseBody.encode(e.get_media_urls_body,t.uint32(16034).fork()).ldelim(),null!=e.get_ticket_body&&Object.hasOwnProperty.call(e,"get_ticket_body")&&u.im_proto.GetTicketResponseBody.encode(e.get_ticket_body,t.uint32(16042).fork()).ldelim(),null!=e.get_conversation_list_body&&Object.hasOwnProperty.call(e,"get_conversation_list_body")&&u.im_proto.GetUserConversationListResponseBody.encode(e.get_conversation_list_body,t.uint32(16050).fork()).ldelim(),null!=e.broadcast_send_message_body&&Object.hasOwnProperty.call(e,"broadcast_send_message_body")&&u.im_proto.BroadcastSendMessageResponseBody.encode(e.broadcast_send_message_body,t.uint32(16058).fork()).ldelim(),null!=e.broadcast_recv_message_body&&Object.hasOwnProperty.call(e,"broadcast_recv_message_body")&&u.im_proto.BroadcastRecvMessageResponseBody.encode(e.broadcast_recv_message_body,t.uint32(16066).fork()).ldelim(),null!=e.broadcast_user_counter_body&&Object.hasOwnProperty.call(e,"broadcast_user_counter_body")&&u.im_proto.BroadcastUserCounterResponseBody.encode(e.broadcast_user_counter_body,t.uint32(16074).fork()).ldelim(),null!=e.create_voip_body&&Object.hasOwnProperty.call(e,"create_voip_body")&&u.im_proto.CreateVoipResponseBody.encode(e.create_voip_body,t.uint32(16090).fork()).ldelim(),null!=e.call_voip_body&&Object.hasOwnProperty.call(e,"call_voip_body")&&u.im_proto.CallVoipResponseBody.encode(e.call_voip_body,t.uint32(16098).fork()).ldelim(),null!=e.update_voip_body&&Object.hasOwnProperty.call(e,"update_voip_body")&&u.im_proto.UpdateVoipResponseBody.encode(e.update_voip_body,t.uint32(16106).fork()).ldelim(),null!=e.profile_get_info&&Object.hasOwnProperty.call(e,"profile_get_info")&&u.im_proto.ProfileGetInfoResponseBody.encode(e.profile_get_info,t.uint32(16122).fork()).ldelim(),null!=e.get_configs_body&&Object.hasOwnProperty.call(e,"get_configs_body")&&u.im_proto.GetConfigsResponseBody.encode(e.get_configs_body,t.uint32(16138).fork()).ldelim(),null!=e.unread_count_report_body&&Object.hasOwnProperty.call(e,"unread_count_report_body")&&u.im_proto.UnReadCountReportResponseBody.encode(e.unread_count_report_body,t.uint32(16146).fork()).ldelim(),null!=e.block_members_body&&Object.hasOwnProperty.call(e,"block_members_body")&&u.im_proto.BlockMembersResponseBody.encode(e.block_members_body,t.uint32(16154).fork()).ldelim(),null!=e.get_unread_count_body&&Object.hasOwnProperty.call(e,"get_unread_count_body")&&u.im_proto.GetUnreadCountResponseBody.encode(e.get_unread_count_body,t.uint32(16242).fork()).ldelim(),null!=e.send_message_p2p_body&&Object.hasOwnProperty.call(e,"send_message_p2p_body")&&u.im_proto.SendMessageP2PResponseBody.encode(e.send_message_p2p_body,t.uint32(16250).fork()).ldelim(),null!=e.get_blocklist_body&&Object.hasOwnProperty.call(e,"get_blocklist_body")&&u.im_proto.GetBlockListResponseBody.encode(e.get_blocklist_body,t.uint32(16258).fork()).ldelim(),null!=e.set_blocklist_body&&Object.hasOwnProperty.call(e,"set_blocklist_body")&&u.im_proto.SetBlocklistResponseBody.encode(e.set_blocklist_body,t.uint32(16266).fork()).ldelim(),null!=e.check_in_blocklist_body&&Object.hasOwnProperty.call(e,"check_in_blocklist_body")&&u.im_proto.CheckInBlockListResponseBody.encode(e.check_in_blocklist_body,t.uint32(16274).fork()).ldelim(),null!=e.mark_message_body&&Object.hasOwnProperty.call(e,"mark_message_body")&&u.im_proto.MarkMessageResponseBody.encode(e.mark_message_body,t.uint32(16290).fork()).ldelim(),null!=e.pull_mark_message_body&&Object.hasOwnProperty.call(e,"pull_mark_message_body")&&u.im_proto.PullMarkMessageResponseBody.encode(e.pull_mark_message_body,t.uint32(16298).fork()).ldelim(),null!=e.batch_get_conversation_participants_readindex&&Object.hasOwnProperty.call(e,"batch_get_conversation_participants_readindex")&&u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody.encode(e.batch_get_conversation_participants_readindex,t.uint32(16306).fork()).ldelim(),null!=e.message_by_init&&Object.hasOwnProperty.call(e,"message_by_init")&&u.im_proto.MessageByInitResponseBody.encode(e.message_by_init,t.uint32(16346).fork()).ldelim(),null!=e.mark_msg_unread_count_report&&Object.hasOwnProperty.call(e,"mark_msg_unread_count_report")&&u.im_proto.MarkMsgUnreadCountReportResponseBody.encode(e.mark_msg_unread_count_report,t.uint32(16434).fork()).ldelim(),null!=e.mark_msg_get_unread_count&&Object.hasOwnProperty.call(e,"mark_msg_get_unread_count")&&u.im_proto.MarkMsgGetUnreadCountResponseBody.encode(e.mark_msg_get_unread_count,t.uint32(16442).fork()).ldelim(),null!=e.batch_unmark_message&&Object.hasOwnProperty.call(e,"batch_unmark_message")&&u.im_proto.BatchUnmarkMessageResponseBody.encode(e.batch_unmark_message,t.uint32(16450).fork()).ldelim(),null!=e.audio_recognition_body&&Object.hasOwnProperty.call(e,"audio_recognition_body")&&u.im_proto.AudioRecognitionResponseBody.encode(e.audio_recognition_body,t.uint32(16474).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 100:r.send_message_body=u.im_proto.SendMessageResponseBody.decode(e,e.uint32());break;case 200:r.messages_per_user_body=u.im_proto.MessagesPerUserResponseBody.decode(e,e.uint32());break;case 203:r.messages_per_user_init_v2_body=u.im_proto.MessagesPerUserInitV2ResponseBody.decode(e,e.uint32());break;case 211:r.get_message_by_id_body=u.im_proto.GetMessageByIdResponseBody.decode(e,e.uint32());break;case 301:r.messages_in_conversation_body=u.im_proto.MessagesInConversationResponseBody.decode(e,e.uint32());break;case 302:r.get_messages_checkinfo_in_conversation_body=u.im_proto.GetMessagesCheckInfoInConversationResponseBody.decode(e,e.uint32());break;case 500:r.has_new_message_notify=u.im_proto.NewMessageNotify.decode(e,e.uint32());break;case 504:r.has_new_p2p_message_notify=u.im_proto.NewP2PMessageNotify.decode(e,e.uint32());break;case 615:r.get_conversations_checkinfo_body=u.im_proto.GetConversationsCheckInfoResponseBody.decode(e,e.uint32());break;case 609:r.create_conversation_v2_body=u.im_proto.CreateConversationV2ResponseBody.decode(e,e.uint32());break;case 610:r.get_conversation_info_list_v2_body=u.im_proto.GetConversationInfoListV2ResponseBody.decode(e,e.uint32());break;case 611:r.get_conversation_info_list_by_favorite_v2_body=u.im_proto.GetConversationInfoListByFavoriteV2ResponseBody.decode(e,e.uint32());break;case 612:r.get_conversation_info_list_by_top_v2_body=u.im_proto.GetConversationInfoListByTopV2ResponseBody.decode(e,e.uint32());break;case 605:r.conversation_participants_body=u.im_proto.ConversationParticipantsListResponseBody.decode(e,e.uint32());break;case 650:r.conversation_add_participants_body=u.im_proto.ConversationAddParticipantsResponseBody.decode(e,e.uint32());break;case 651:r.conversation_remove_participants_body=u.im_proto.ConversationRemoveParticipantsResponseBody.decode(e,e.uint32());break;case 654:r.mget_conversation_participants_body=u.im_proto.MgetConversationParticipantsResponseBody.decode(e,e.uint32());break;case 655:r.update_conversation_participant_body=u.im_proto.UpdateConversationParticipantResponseBody.decode(e,e.uint32());break;case 705:r.modify_message_property_body=u.im_proto.ModifyMessagePropertyResponseBody.decode(e,e.uint32());break;case 2059:r.audio_recognition_body=u.im_proto.AudioRecognitionResponseBody.decode(e,e.uint32());break;case 901:r.get_conversation_core_info_body=u.im_proto.GetConversationCoreInfoResponseBody.decode(e,e.uint32());break;case 902:r.set_conversation_core_info_body=u.im_proto.SetConversationCoreInfoResponseBody.decode(e,e.uint32());break;case 904:r.upsert_conversation_core_ext_info_body=u.im_proto.UpsertConversationCoreExtInfoResponseBody.decode(e,e.uint32());break;case 921:r.set_conversation_setting_info_body=u.im_proto.SetConversationSettingInfoResponseBody.decode(e,e.uint32());break;case 922:r.upsert_conversation_setting_ext_info_body=u.im_proto.UpsertConversationSettingExtInfoResponseBody.decode(e,e.uint32());break;case 1e3:r.get_stranger_conversation_body=u.im_proto.GetStrangerConversationListResponseBody.decode(e,e.uint32());break;case 1001:r.get_stranger_messages_body=u.im_proto.GetStrangerMessagesResponseBody.decode(e,e.uint32());break;case 2e3:r.participants_read_index_body=u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody.decode(e,e.uint32());break;case 2001:r.participants_min_index_body=u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody.decode(e,e.uint32());break;case 2003:r.get_upload_token_body=u.im_proto.GetUploadTokenResponseBody.decode(e,e.uint32());break;case 2004:r.get_media_urls_body=u.im_proto.GetMediaUrlsResponseBody.decode(e,e.uint32());break;case 2038:r.batch_get_conversation_participants_readindex=u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody.decode(e,e.uint32());break;case 2005:r.get_ticket_body=u.im_proto.GetTicketResponseBody.decode(e,e.uint32());break;case 2006:r.get_conversation_list_body=u.im_proto.GetUserConversationListResponseBody.decode(e,e.uint32());break;case 2007:r.broadcast_send_message_body=u.im_proto.BroadcastSendMessageResponseBody.decode(e,e.uint32());break;case 2008:r.broadcast_recv_message_body=u.im_proto.BroadcastRecvMessageResponseBody.decode(e,e.uint32());break;case 2009:r.broadcast_user_counter_body=u.im_proto.BroadcastUserCounterResponseBody.decode(e,e.uint32());break;case 2011:r.create_voip_body=u.im_proto.CreateVoipResponseBody.decode(e,e.uint32());break;case 2012:r.call_voip_body=u.im_proto.CallVoipResponseBody.decode(e,e.uint32());break;case 2013:r.update_voip_body=u.im_proto.UpdateVoipResponseBody.decode(e,e.uint32());break;case 2015:r.profile_get_info=u.im_proto.ProfileGetInfoResponseBody.decode(e,e.uint32());break;case 2017:r.get_configs_body=u.im_proto.GetConfigsResponseBody.decode(e,e.uint32());break;case 2018:r.unread_count_report_body=u.im_proto.UnReadCountReportResponseBody.decode(e,e.uint32());break;case 2019:r.block_members_body=u.im_proto.BlockMembersResponseBody.decode(e,e.uint32());break;case 2030:r.get_unread_count_body=u.im_proto.GetUnreadCountResponseBody.decode(e,e.uint32());break;case 2031:r.send_message_p2p_body=u.im_proto.SendMessageP2PResponseBody.decode(e,e.uint32());break;case 2032:r.get_blocklist_body=u.im_proto.GetBlockListResponseBody.decode(e,e.uint32());break;case 2033:r.set_blocklist_body=u.im_proto.SetBlocklistResponseBody.decode(e,e.uint32());break;case 2034:r.check_in_blocklist_body=u.im_proto.CheckInBlockListResponseBody.decode(e,e.uint32());break;case 2036:r.mark_message_body=u.im_proto.MarkMessageResponseBody.decode(e,e.uint32());break;case 2037:r.pull_mark_message_body=u.im_proto.PullMarkMessageResponseBody.decode(e,e.uint32());break;case 2043:r.message_by_init=u.im_proto.MessageByInitResponseBody.decode(e,e.uint32());break;case 2054:r.mark_msg_unread_count_report=u.im_proto.MarkMsgUnreadCountReportResponseBody.decode(e,e.uint32());break;case 2055:r.mark_msg_get_unread_count=u.im_proto.MarkMsgGetUnreadCountResponseBody.decode(e,e.uint32());break;case 2056:r.batch_unmark_message=u.im_proto.BatchUnmarkMessageResponseBody.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.Response=function(){function e(e){if(this.headers={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cmd=0,e.prototype.sequence_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.status_code=0,e.prototype.error_desc="",e.prototype.inbox_type=0,e.prototype.body=null,e.prototype.log_id="",e.prototype.headers=c.emptyObject,e.prototype.start_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.request_arrived_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_execution_end_time=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(8).int32(e.cmd),null!=e.sequence_id&&Object.hasOwnProperty.call(e,"sequence_id")&&t.uint32(16).int64(e.sequence_id),null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.error_desc&&Object.hasOwnProperty.call(e,"error_desc")&&t.uint32(34).string(e.error_desc),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(40).int32(e.inbox_type),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.ResponseBody.encode(e.body,t.uint32(50).fork()).ldelim(),null!=e.log_id&&Object.hasOwnProperty.call(e,"log_id")&&t.uint32(58).string(e.log_id),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(var n=Object.keys(e.headers),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).string(e.headers[n[r]]).ldelim();return null!=e.start_time_stamp&&Object.hasOwnProperty.call(e,"start_time_stamp")&&t.uint32(72).int64(e.start_time_stamp),null!=e.request_arrived_time&&Object.hasOwnProperty.call(e,"request_arrived_time")&&t.uint32(80).int64(e.request_arrived_time),null!=e.server_execution_end_time&&Object.hasOwnProperty.call(e,"server_execution_end_time")&&t.uint32(88).int64(e.server_execution_end_time),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.Response;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.cmd=e.int32();break;case 2:i.sequence_id=e.int64();break;case 3:i.status_code=e.int32();break;case 4:i.error_desc=e.string();break;case 5:i.inbox_type=e.int32();break;case 6:i.body=u.im_proto.ResponseBody.decode(e,e.uint32());break;case 7:i.log_id=e.string();break;case 8:i.headers===c.emptyObject&&(i.headers={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.headers[n]=r;break;case 9:i.start_time_stamp=e.int64();break;case 10:i.request_arrived_time=e.int64();break;case 11:i.server_execution_end_time=e.int64();break;default:e.skipType(7&a)}}return i},e}(),e.BroadcastSendMessageRequestBody=function(){function e(e){if(this.ext={},this.mentioned_users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.message_type=0,e.prototype.ticket="",e.prototype.client_message_id="",e.prototype.mentioned_users=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(34).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),r=0;r<n.length;++r)t.uint32(42).fork().uint32(10).string(n[r]).uint32(18).string(e.ext[n[r]]).ldelim();if(null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(48).int32(e.message_type),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(58).string(e.ticket),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(66).string(e.client_message_id),null!=e.mentioned_users&&e.mentioned_users.length)for(r=0;r<e.mentioned_users.length;++r)t.uint32(72).int64(e.mentioned_users[r]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.BroadcastSendMessageRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.content=e.string();break;case 5:i.ext===c.emptyObject&&(i.ext={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 6:i.message_type=e.int32();break;case 7:i.ticket=e.string();break;case 8:i.client_message_id=e.string();break;case 9:if(i.mentioned_users&&i.mentioned_users.length||(i.mentioned_users=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.mentioned_users.push(e.int64());else i.mentioned_users.push(e.int64());break;default:e.skipType(7&a)}}return i},e}(),e.BroadcastSendMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.extra_info="",e.prototype.status=0,e.prototype.client_message_id="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(18).string(e.extra_info),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(34).string(e.client_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastSendMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.server_message_id=e.int64();break;case 2:r.extra_info=e.string();break;case 3:r.status=e.int32();break;case 4:r.client_message_id=e.string();break;case 5:r.check_code=e.int64();break;case 6:r.check_message=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.BroadcastRecvMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.reverse=!1,e.prototype.pull_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(32).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).int64(e.limit),null!=e.reverse&&Object.hasOwnProperty.call(e,"reverse")&&t.uint32(48).bool(e.reverse),null!=e.pull_type&&Object.hasOwnProperty.call(e,"pull_type")&&t.uint32(56).int32(e.pull_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastRecvMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.cursor=e.int64();break;case 5:r.limit=e.int64();break;case 6:r.reverse=e.bool();break;case 7:r.pull_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.BroadcastRecvMessageResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastRecvMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationRequest;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.BroadcastUserCounterRequestBody=function(){function e(e){if(this.conversations=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversations=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversations&&e.conversations.length)for(var n=0;n<e.conversations.length;++n)u.im_proto.ConversationRequest.encode(e.conversations[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastUserCounterRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversations&&r.conversations.length||(r.conversations=[]),r.conversations.push(u.im_proto.ConversationRequest.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.BroadcastUserInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.counter=0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.counter&&Object.hasOwnProperty.call(e,"counter")&&t.uint32(16).int32(e.counter),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastUserInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.counter=e.int32();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.BroadcastUserCounterResponseBody=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)u.im_proto.BroadcastUserInfo.encode(e.infos[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BroadcastUserCounterResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.infos&&r.infos.length||(r.infos=[]),r.infos.push(u.im_proto.BroadcastUserInfo.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.NetworkType=function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="WIFI"]=1,t[e[2]="MOBILE_2G"]=2,t[e[3]="MOBILE_3G"]=3,t[e[4]="MOBILE_4G"]=4,t[e[5]="MOBILE_5G"]=5,t}(),e.MsgReportType=function(){const e={},t=Object.create(e);return t[e[0]="NOT_USE"]=0,t[e[1]="MSG_RECEIVE_BY_WS"]=1,t[e[2]="MSG_RECEIVE_BY_USER"]=2,t[e[3]="MSG_RECEIVE_BY_INIT"]=3,t[e[4]="MSG_RECEIVE_BY_LOAD_HISTORY"]=4,t[e[5]="MSG_RECEIVE_BY_LOAD_NEWER"]=5,t[e[6]="MSG_RECEIVE_BY_CHECK_MSG_V1"]=6,t[e[7]="MSG_RECEIVE_BY_CHECK_MSG_V2"]=7,t[e[8]="MSG_RECEIVE_BY_STRANGER"]=8,t[e[9]="MSG_SHOW"]=9,t}(),e.ClientACKRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.start_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd=0,e.prototype.network_type=0,e.prototype.logid="",e.prototype.client_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int64(e.start_time_stamp),t.uint32(16).int32(e.cmd),null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(24).int32(e.network_type),null!=e.logid&&Object.hasOwnProperty.call(e,"logid")&&t.uint32(34).string(e.logid),null!=e.client_time_stamp&&Object.hasOwnProperty.call(e,"client_time_stamp")&&t.uint32(40).int64(e.client_time_stamp),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(48).int64(e.server_message_id),t.uint32(56).int32(e.type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ClientACKRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.start_time_stamp=e.int64();break;case 2:r.cmd=e.int32();break;case 3:r.network_type=e.int32();break;case 4:r.logid=e.string();break;case 5:r.client_time_stamp=e.int64();break;case 6:r.server_message_id=e.int64();break;case 7:r.type=e.int32();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("start_time_stamp"))throw c.ProtocolError("missing required 'start_time_stamp'",{instance:r});if(!r.hasOwnProperty("cmd"))throw c.ProtocolError("missing required 'cmd'",{instance:r});if(!r.hasOwnProperty("type"))throw c.ProtocolError("missing required 'type'",{instance:r});return r},e}(),e.ClientBatchACKRequestBody=function(){function e(e){if(this.ack_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ack_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.ack_list&&e.ack_list.length)for(var n=0;n<e.ack_list.length;++n)u.im_proto.ClientACKRequestBody.encode(e.ack_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ClientBatchACKRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.ack_list&&r.ack_list.length||(r.ack_list=[]),r.ack_list.push(u.im_proto.ClientACKRequestBody.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.VoipMode=function(){const e={},t=Object.create(e);return t[e[0]="VOIP_MODE_DOUBLE"]=0,t[e[1]="VOIP_MODE_MULTIPLAYER"]=1,t}(),e.VoipStatusCode=function(){const e={},t=Object.create(e);return t[e[0]="SUCCESS"]=0,t[e[4]="VOIP_PARAMS_ERROR"]=4,t[e[18]="VOIP_STATUS_ERROR"]=18,t[e[19]="VOIP_CANCEL_ERROR"]=19,t[e[20]="VOIP_OTHER_RESPONSE_ERROR"]=20,t[e[21]="VOIP_CALLBACK_ERROR"]=21,t}(),e.VoipStatus=function(){const e={},t=Object.create(e);return t[e[0]="IDLE"]=0,t[e[1]="CALLING"]=1,t[e[2]="RINGING"]=2,t[e[3]="ACCEPTED"]=3,t[e[4]="ONTHECALL"]=4,t[e[101]="TERMINATED"]=101,t[e[102]="OCCUPIED"]=102,t[e[103]="REFUSED"]=103,t[e[104]="CANCELLED"]=104,t[e[105]="UNAVAILABLE"]=105,t[e[106]="RTCERROR"]=106,t[e[107]="RTC_ENGINE_MISMATCH"]=107,t}(),e.VoipType=function(){const e={},t=Object.create(e);return t[e[0]="VOIP_TYPE_NOT_USED"]=0,t[e[1]="VOIP_TYPE_ALL"]=1,t[e[2]="VOIP_TYPE_VIDEOONLY"]=2,t[e[3]="VOIP_TYPE_AUDIOONLY"]=3,t}(),e.VoipInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.device_id="",e.prototype.channel_id="",e.prototype.token="",e.prototype.status=0,e.prototype.caller_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.created_time_ms=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.updated_time_ms=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.con_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.v_type=0,e.prototype.srv_msg_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(18).string(e.device_id),null!=e.channel_id&&Object.hasOwnProperty.call(e,"channel_id")&&t.uint32(26).string(e.channel_id),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(34).string(e.token),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(40).int32(e.status),null!=e.caller_id&&Object.hasOwnProperty.call(e,"caller_id")&&t.uint32(48).int64(e.caller_id),null!=e.created_time_ms&&Object.hasOwnProperty.call(e,"created_time_ms")&&t.uint32(56).int64(e.created_time_ms),null!=e.updated_time_ms&&Object.hasOwnProperty.call(e,"updated_time_ms")&&t.uint32(64).int64(e.updated_time_ms),null!=e.con_short_id&&Object.hasOwnProperty.call(e,"con_short_id")&&t.uint32(72).int64(e.con_short_id),null!=e.v_type&&Object.hasOwnProperty.call(e,"v_type")&&t.uint32(80).int32(e.v_type),null!=e.srv_msg_id&&Object.hasOwnProperty.call(e,"srv_msg_id")&&t.uint32(88).int64(e.srv_msg_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.VoipInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_id=e.int64();break;case 2:r.device_id=e.string();break;case 3:r.channel_id=e.string();break;case 4:r.token=e.string();break;case 5:r.status=e.int32();break;case 6:r.caller_id=e.int64();break;case 7:r.created_time_ms=e.int64();break;case 8:r.updated_time_ms=e.int64();break;case 9:r.con_short_id=e.int64();break;case 10:r.v_type=e.int32();break;case 11:r.srv_msg_id=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.CreateVoipRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.idempotent_id="",e.prototype.v_type=0,e.prototype.con_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.srv_msg_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ref_channel_id="",e.prototype.voip_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(10).string(e.idempotent_id),null!=e.v_type&&Object.hasOwnProperty.call(e,"v_type")&&t.uint32(16).int32(e.v_type),null!=e.con_short_id&&Object.hasOwnProperty.call(e,"con_short_id")&&t.uint32(24).int64(e.con_short_id),null!=e.srv_msg_id&&Object.hasOwnProperty.call(e,"srv_msg_id")&&t.uint32(32).int64(e.srv_msg_id),null!=e.ref_channel_id&&Object.hasOwnProperty.call(e,"ref_channel_id")&&t.uint32(42).string(e.ref_channel_id),null!=e.voip_mode&&Object.hasOwnProperty.call(e,"voip_mode")&&t.uint32(48).int32(e.voip_mode),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CreateVoipRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.idempotent_id=e.string();break;case 2:r.v_type=e.int32();break;case 3:r.con_short_id=e.int64();break;case 4:r.srv_msg_id=e.int64();break;case 5:r.ref_channel_id=e.string();break;case 6:r.voip_mode=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.CreateVoipResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.info=null,e.prototype.status_code=0,e.prototype.voip_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.info&&Object.hasOwnProperty.call(e,"info")&&u.im_proto.VoipInfo.encode(e.info,t.uint32(10).fork()).ldelim(),null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(16).int32(e.status_code),null!=e.voip_mode&&Object.hasOwnProperty.call(e,"voip_mode")&&t.uint32(24).int32(e.voip_mode),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CreateVoipResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.info=u.im_proto.VoipInfo.decode(e,e.uint32());break;case 2:r.status_code=e.int32();break;case 3:r.voip_mode=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.CallVoipRequestBody=function(){function e(e){if(this.callee_ids=[],this.ext={},this.ref_channel_users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.callee_ids=c.emptyArray,e.prototype.channel_id="",e.prototype.v_type=0,e.prototype.ext=c.emptyObject,e.prototype.ref_channel_users=c.emptyArray,e.prototype.con_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.callee_ids&&e.callee_ids.length)for(var n=0;n<e.callee_ids.length;++n)t.uint32(8).int64(e.callee_ids[n]);if(null!=e.channel_id&&Object.hasOwnProperty.call(e,"channel_id")&&t.uint32(18).string(e.channel_id),null!=e.v_type&&Object.hasOwnProperty.call(e,"v_type")&&t.uint32(24).int32(e.v_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext")){var r=Object.keys(e.ext);for(n=0;n<r.length;++n)t.uint32(34).fork().uint32(10).string(r[n]).uint32(18).string(e.ext[r[n]]).ldelim()}if(null!=e.ref_channel_users&&e.ref_channel_users.length)for(n=0;n<e.ref_channel_users.length;++n)t.uint32(40).int64(e.ref_channel_users[n]);return null!=e.con_id&&Object.hasOwnProperty.call(e,"con_id")&&t.uint32(50).string(e.con_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.CallVoipRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:if(i.callee_ids&&i.callee_ids.length||(i.callee_ids=[]),2==(7&a))for(var l=e.uint32()+e.pos;e.pos<l;)i.callee_ids.push(e.int64());else i.callee_ids.push(e.int64());break;case 2:i.channel_id=e.string();break;case 3:i.v_type=e.int32();break;case 4:i.ext===c.emptyObject&&(i.ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 5:if(i.ref_channel_users&&i.ref_channel_users.length||(i.ref_channel_users=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.ref_channel_users.push(e.int64());else i.ref_channel_users.push(e.int64());break;case 6:i.con_id=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.CallVoipResponseBody=function(){function e(e){if(this.callee_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.info=null,e.prototype.callee_ids=c.emptyArray,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.ref_channel_id="",e.prototype.voip_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.info&&Object.hasOwnProperty.call(e,"info")&&u.im_proto.VoipInfo.encode(e.info,t.uint32(10).fork()).ldelim(),null!=e.callee_ids&&e.callee_ids.length)for(var n=0;n<e.callee_ids.length;++n)t.uint32(16).int64(e.callee_ids[n]);return null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(34).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),null!=e.ref_channel_id&&Object.hasOwnProperty.call(e,"ref_channel_id")&&t.uint32(58).string(e.ref_channel_id),null!=e.voip_mode&&Object.hasOwnProperty.call(e,"voip_mode")&&t.uint32(64).int32(e.voip_mode),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CallVoipResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.info=u.im_proto.VoipInfo.decode(e,e.uint32());break;case 2:if(r.callee_ids&&r.callee_ids.length||(r.callee_ids=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.callee_ids.push(e.int64());else r.callee_ids.push(e.int64());break;case 3:r.status=e.int32();break;case 4:r.extra_info=e.string();break;case 5:r.check_code=e.int64();break;case 6:r.check_message=e.string();break;case 7:r.ref_channel_id=e.string();break;case 8:r.voip_mode=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.UpdateVoipRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channel_id="",e.prototype.status=0,e.prototype.v_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.channel_id&&Object.hasOwnProperty.call(e,"channel_id")&&t.uint32(10).string(e.channel_id),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.v_type&&Object.hasOwnProperty.call(e,"v_type")&&t.uint32(24).int32(e.v_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UpdateVoipRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.channel_id=e.string();break;case 2:r.status=e.int32();break;case 3:r.v_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.UpdateVoipResponseBody=function(){function e(e){if(this.callees=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.info=null,e.prototype.status_code=0,e.prototype.voip_mode=0,e.prototype.callees=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.info&&Object.hasOwnProperty.call(e,"info")&&u.im_proto.VoipInfo.encode(e.info,t.uint32(10).fork()).ldelim(),null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(16).int32(e.status_code),null!=e.voip_mode&&Object.hasOwnProperty.call(e,"voip_mode")&&t.uint32(24).int32(e.voip_mode),null!=e.callees&&e.callees.length)for(var n=0;n<e.callees.length;++n)t.uint32(32).int64(e.callees[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UpdateVoipResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.info=u.im_proto.VoipInfo.decode(e,e.uint32());break;case 2:r.status_code=e.int32();break;case 3:r.voip_mode=e.int32();break;case 4:if(r.callees&&r.callees.length||(r.callees=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.callees.push(e.int64());else r.callees.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.ChannelStatus=function(){const e={},t=Object.create(e);return t[e[0]="CHANNEL_STATUS_NOT_USED"]=0,t[e[1]="ONLINE"]=1,t[e[2]="OFFLINE"]=2,t}(),e.ChannelHeartBeatRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channel_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.channel_id&&Object.hasOwnProperty.call(e,"channel_id")&&t.uint32(10).string(e.channel_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ChannelHeartBeatRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.channel_id=e.string();else e.skipType(7&o)}return r},e}(),e.Profile=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.nick_name="",e.prototype.protrait="",e.prototype.basic_ext_info="",e.prototype.detail_ext_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(10).string(e.nick_name),null!=e.protrait&&Object.hasOwnProperty.call(e,"protrait")&&t.uint32(18).string(e.protrait),null!=e.basic_ext_info&&Object.hasOwnProperty.call(e,"basic_ext_info")&&t.uint32(26).string(e.basic_ext_info),null!=e.detail_ext_info&&Object.hasOwnProperty.call(e,"detail_ext_info")&&t.uint32(34).string(e.detail_ext_info),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.Profile;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.nick_name=e.string();break;case 2:r.protrait=e.string();break;case 3:r.basic_ext_info=e.string();break;case 4:r.detail_ext_info=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.ProfileGetInfoRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userid=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int64(e.userid),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ProfileGetInfoRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.userid=e.int64();else e.skipType(7&o)}if(!r.hasOwnProperty("userid"))throw c.ProtocolError("missing required 'userid'",{instance:r});return r},e}(),e.ProfileGetInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.profile=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.profile&&Object.hasOwnProperty.call(e,"profile")&&u.im_proto.Profile.encode(e.profile,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ProfileGetInfoResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.profile=u.im_proto.Profile.decode(e,e.uint32());else e.skipType(7&o)}return r},e}(),e.ClientMetricType=function(){const e={},t=Object.create(e);return t[e[0]="COUNTER"]=0,t[e[1]="TIMER"]=1,t}(),e.ClientMetric=function(){function e(e){if(this.tags={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metric_type=0,e.prototype.k="",e.prototype.v=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tags=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.metric_type&&Object.hasOwnProperty.call(e,"metric_type")&&t.uint32(8).int32(e.metric_type),null!=e.k&&Object.hasOwnProperty.call(e,"k")&&t.uint32(18).string(e.k),null!=e.v&&Object.hasOwnProperty.call(e,"v")&&t.uint32(24).int64(e.v),null!=e.tags&&Object.hasOwnProperty.call(e,"tags"))for(var n=Object.keys(e.tags),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]).uint32(18).string(e.tags[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.ClientMetric;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.metric_type=e.int32();break;case 2:i.k=e.string();break;case 3:i.v=e.int64();break;case 4:i.tags===c.emptyObject&&(i.tags={});var l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.tags[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.ReportClientMetricsRequestBody=function(){function e(e){if(this.report_metrics_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.report_metrics_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.report_metrics_list&&e.report_metrics_list.length)for(var n=0;n<e.report_metrics_list.length;++n)u.im_proto.ClientMetric.encode(e.report_metrics_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ReportClientMetricsRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.report_metrics_list&&r.report_metrics_list.length||(r.report_metrics_list=[]),r.report_metrics_list.push(u.im_proto.ClientMetric.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.GetConfigsRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConfigsRequestBody;e.pos<n;){var o=e.uint32();e.skipType(7&o)}return r},e}(),e.GetConfigsResponseBody=function(){function e(e){if(this.configs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.configs=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int32(e.version),null!=e.configs&&e.configs.length)for(var n=0;n<e.configs.length;++n)u.im_proto.Config.encode(e.configs[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConfigsResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.version=e.int32();break;case 2:r.configs&&r.configs.length||(r.configs=[]),r.configs.push(u.im_proto.Config.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.Config=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conf_name="",e.prototype.conf_value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conf_name&&Object.hasOwnProperty.call(e,"conf_name")&&t.uint32(10).string(e.conf_name),null!=e.conf_value&&Object.hasOwnProperty.call(e,"conf_value")&&t.uint32(18).string(e.conf_value),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.Config;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conf_name=e.string();break;case 2:r.conf_value=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.SendMessageP2PRequestBody=function(){function e(e){if(this.visible_user=[],this.invisible_user=[],this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_type=0,e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.visible_user=c.emptyArray,e.prototype.invisible_user=c.emptyArray,e.prototype.message_type=0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.client_message_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.send_type&&Object.hasOwnProperty.call(e,"send_type")&&t.uint32(8).int32(e.send_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(18).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(32).int64(e.conversation_short_id),null!=e.visible_user&&e.visible_user.length)for(var n=0;n<e.visible_user.length;++n)t.uint32(40).int64(e.visible_user[n]);if(null!=e.invisible_user&&e.invisible_user.length)for(n=0;n<e.invisible_user.length;++n)t.uint32(48).int64(e.invisible_user[n]);if(null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(56).int32(e.message_type),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(66).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext")){var r=Object.keys(e.ext);for(n=0;n<r.length;++n)t.uint32(74).fork().uint32(10).string(r[n]).uint32(18).string(e.ext[r[n]]).ldelim()}return null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(82).string(e.client_message_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.SendMessageP2PRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.send_type=e.int32();break;case 2:i.conversation_id=e.string();break;case 3:i.conversation_type=e.int32();break;case 4:i.conversation_short_id=e.int64();break;case 5:if(i.visible_user&&i.visible_user.length||(i.visible_user=[]),2==(7&a))for(var l=e.uint32()+e.pos;e.pos<l;)i.visible_user.push(e.int64());else i.visible_user.push(e.int64());break;case 6:if(i.invisible_user&&i.invisible_user.length||(i.invisible_user=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.invisible_user.push(e.int64());else i.invisible_user.push(e.int64());break;case 7:i.message_type=e.int32();break;case 8:i.content=e.string();break;case 9:i.ext===c.emptyObject&&(i.ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.ext[n]=r;break;case 10:i.client_message_id=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.SendMessageP2PResponseBody=function(){function e(e){if(this.failed_user=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_user=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.failed_user&&e.failed_user.length)for(var n=0;n<e.failed_user.length;++n)t.uint32(8).int64(e.failed_user[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SendMessageP2PResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)if(r.failed_user&&r.failed_user.length||(r.failed_user=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_user.push(e.int64());else r.failed_user.push(e.int64());else e.skipType(7&o)}return r},e}(),e.ConvCountReport=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conv_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conv_short_id&&Object.hasOwnProperty.call(e,"conv_short_id")&&t.uint32(8).int64(e.conv_short_id),null!=e.unread_count&&Object.hasOwnProperty.call(e,"unread_count")&&t.uint32(16).int64(e.unread_count),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConvCountReport;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conv_short_id=e.int64();break;case 2:r.unread_count=e.int64();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.UnReadCountReportRequestBody=function(){function e(e){if(this.conv_unread_count=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conv_unread_count=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(8).int64(e.total_unread_count),null!=e.conv_unread_count&&e.conv_unread_count.length)for(var n=0;n<e.conv_unread_count.length;++n)u.im_proto.ConvCountReport.encode(e.conv_unread_count[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UnReadCountReportRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.total_unread_count=e.int64();break;case 2:r.conv_unread_count&&r.conv_unread_count.length||(r.conv_unread_count=[]),r.conv_unread_count.push(u.im_proto.ConvCountReport.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.UnReadCountReportResponseBody=function(){function e(e){if(this.failed_conv_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.set_total_status=!1,e.prototype.failed_conv_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),t.uint32(8).bool(e.set_total_status),null!=e.failed_conv_list&&e.failed_conv_list.length)for(var n=0;n<e.failed_conv_list.length;++n)t.uint32(16).int64(e.failed_conv_list[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.UnReadCountReportResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.set_total_status=e.bool();break;case 2:if(r.failed_conv_list&&r.failed_conv_list.length||(r.failed_conv_list=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_conv_list.push(e.int64());else r.failed_conv_list.push(e.int64());break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("set_total_status"))throw c.ProtocolError("missing required 'set_total_status'",{instance:r});return r},e}(),e.GetUnreadCountRequestBody=function(){function e(e){if(this.conv_short_id=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.get_total=!1,e.prototype.conv_short_id=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.get_total&&Object.hasOwnProperty.call(e,"get_total")&&t.uint32(8).bool(e.get_total),null!=e.conv_short_id&&e.conv_short_id.length)for(var n=0;n<e.conv_short_id.length;++n)t.uint32(16).int64(e.conv_short_id[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetUnreadCountRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.get_total=e.bool();break;case 2:if(r.conv_short_id&&r.conv_short_id.length||(r.conv_short_id=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.conv_short_id.push(e.int64());else r.conv_short_id.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.GetUnreadCountResponseBody=function(){function e(e){if(this.conv_unread_count={},this.failed_conv_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conv_unread_count=c.emptyObject,e.prototype.failed_conv_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(8).int64(e.total_unread_count),null!=e.conv_unread_count&&Object.hasOwnProperty.call(e,"conv_unread_count"))for(var n=Object.keys(e.conv_unread_count),r=0;r<n.length;++r)t.uint32(18).fork().uint32(8).int64(n[r]).uint32(16).int64(e.conv_unread_count[n[r]]).ldelim();if(null!=e.failed_conv_list&&e.failed_conv_list.length)for(r=0;r<e.failed_conv_list.length;++r)t.uint32(24).int64(e.failed_conv_list[r]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.GetUnreadCountResponseBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.total_unread_count=e.int64();break;case 2:i.conv_unread_count===c.emptyObject&&(i.conv_unread_count={});var l=e.uint32()+e.pos;for(n=0,r=0;e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.int64();break;case 2:r=e.int64();break;default:e.skipType(7&f)}}i.conv_unread_count["object"==typeof n?c.longToHash(n):n]=r;break;case 3:if(i.failed_conv_list&&i.failed_conv_list.length||(i.failed_conv_list=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.failed_conv_list.push(e.int64());else i.failed_conv_list.push(e.int64());break;default:e.skipType(7&a)}}return i},e}(),e.GetBlockListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetBlockListRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cursor=e.int64();break;case 2:r.limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.BlockUserInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(16).int64(e.create_time),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BlockUserInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_id=e.int64();break;case 2:r.create_time=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.GetBlockListResponseBody=function(){function e(e){if(this.user_info=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_info=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.user_info&&e.user_info.length)for(var n=0;n<e.user_info.length;++n)u.im_proto.BlockUserInfo.encode(e.user_info[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetBlockListResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.user_info&&r.user_info.length||(r.user_info=[]),r.user_info.push(u.im_proto.BlockUserInfo.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.SetBlocklistRequestBody=function(){function e(e){if(this.blocklist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.set_block_list=!1,e.prototype.blocklist=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.set_block_list&&Object.hasOwnProperty.call(e,"set_block_list")&&t.uint32(8).bool(e.set_block_list),null!=e.blocklist&&e.blocklist.length)for(var n=0;n<e.blocklist.length;++n)t.uint32(16).int64(e.blocklist[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SetBlocklistRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.set_block_list=e.bool();break;case 2:if(r.blocklist&&r.blocklist.length||(r.blocklist=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.blocklist.push(e.int64());else r.blocklist.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.SetBlocklistResponseBody=function(){function e(e){if(this.failed_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.failed_list&&e.failed_list.length)for(var n=0;n<e.failed_list.length;++n)t.uint32(8).int64(e.failed_list[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.SetBlocklistResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)if(r.failed_list&&r.failed_list.length||(r.failed_list=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_list.push(e.int64());else r.failed_list.push(e.int64());else e.skipType(7&o)}return r},e}(),e.CheckInBlockListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_to_check=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.user_to_check&&Object.hasOwnProperty.call(e,"user_to_check")&&t.uint32(8).int64(e.user_to_check),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CheckInBlockListRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.user_to_check=e.int64();else e.skipType(7&o)}return r},e}(),e.CheckInBlockListResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.in_blocklist=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.in_blocklist&&Object.hasOwnProperty.call(e,"in_blocklist")&&t.uint32(8).bool(e.in_blocklist),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.CheckInBlockListResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.in_blocklist=e.bool();else e.skipType(7&o)}return r},e}(),e.BlockStatus=function(){const e={},t=Object.create(e);return t[e[0]="UNBLOCK"]=0,t[e[1]="BLOCK"]=1,t}(),e.BlockMembersRequestBody=function(){function e(e){if(this.block_time={},this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.block_status=0,e.prototype.block_time=c.emptyObject,e.prototype.conv_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.conversation_id="",e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.block_status&&Object.hasOwnProperty.call(e,"block_status")&&t.uint32(8).int32(e.block_status),null!=e.block_time&&Object.hasOwnProperty.call(e,"block_time"))for(var n=Object.keys(e.block_time),r=0;r<n.length;++r)t.uint32(18).fork().uint32(8).int64(n[r]).uint32(16).int64(e.block_time[n[r]]).ldelim();if(null!=e.conv_short_id&&Object.hasOwnProperty.call(e,"conv_short_id")&&t.uint32(24).int64(e.conv_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(32).int32(e.conversation_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(42).string(e.conversation_id),null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext"))for(n=Object.keys(e.biz_ext),r=0;r<n.length;++r)t.uint32(90).fork().uint32(10).string(n[r]).uint32(18).string(e.biz_ext[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.BlockMembersRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.block_status=e.int32();break;case 2:i.block_time===c.emptyObject&&(i.block_time={});var l=e.uint32()+e.pos;for(n=0,r=0;e.pos<l;){switch((f=e.uint32())>>>3){case 1:n=e.int64();break;case 2:r=e.int64();break;default:e.skipType(7&f)}}i.block_time["object"==typeof n?c.longToHash(n):n]=r;break;case 3:i.conv_short_id=e.int64();break;case 4:i.conversation_type=e.int32();break;case 5:i.conversation_id=e.string();break;case 11:i.biz_ext===c.emptyObject&&(i.biz_ext={});l=e.uint32()+e.pos;for(n="",r="";e.pos<l;){var f;switch((f=e.uint32())>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}i.biz_ext[n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.BlockMembersResponseBody=function(){function e(e){if(this.failed_members=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_members=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.failed_members&&e.failed_members.length)for(var n=0;n<e.failed_members.length;++n)t.uint32(8).int64(e.failed_members[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BlockMembersResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)if(r.failed_members&&r.failed_members.length||(r.failed_members=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_members.push(e.int64());else r.failed_members.push(e.int64());else e.skipType(7&o)}return r},e}(),e.BlockConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conv_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.block_status=0,e.prototype.block_normal_only=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conv_short_id&&Object.hasOwnProperty.call(e,"conv_short_id")&&t.uint32(16).int64(e.conv_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.block_status&&Object.hasOwnProperty.call(e,"block_status")&&t.uint32(32).int32(e.block_status),null!=e.block_normal_only&&Object.hasOwnProperty.call(e,"block_normal_only")&&t.uint32(40).bool(e.block_normal_only),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BlockConversationRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conv_short_id=e.int64();break;case 3:r.conversation_type=e.int32();break;case 4:r.block_status=e.int32();break;case 5:r.block_normal_only=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.GetMessagesCheckInfoInConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.cursor_reverse_begin=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cursor_reverse_end=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.expect_msg_total_count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.cursor_reverse_begin&&Object.hasOwnProperty.call(e,"cursor_reverse_begin")&&t.uint32(24).int64(e.cursor_reverse_begin),null!=e.expect_msg_total_count&&Object.hasOwnProperty.call(e,"expect_msg_total_count")&&t.uint32(32).int32(e.expect_msg_total_count),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(42).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(48).int32(e.conversation_type),null!=e.cursor_reverse_end&&Object.hasOwnProperty.call(e,"cursor_reverse_end")&&t.uint32(56).int64(e.cursor_reverse_end),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMessagesCheckInfoInConversationRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.conversation_short_id=e.int64();break;case 5:r.conversation_id=e.string();break;case 6:r.conversation_type=e.int32();break;case 3:r.cursor_reverse_begin=e.int64();break;case 7:r.cursor_reverse_end=e.int64();break;case 4:r.expect_msg_total_count=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MessagesCheckInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.head_msg_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tail_msg_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.msg_count=0,e.prototype.indexes_checksum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.head_msg_index&&Object.hasOwnProperty.call(e,"head_msg_index")&&t.uint32(8).int64(e.head_msg_index),null!=e.tail_msg_index&&Object.hasOwnProperty.call(e,"tail_msg_index")&&t.uint32(16).int64(e.tail_msg_index),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(24).int32(e.msg_count),null!=e.indexes_checksum&&Object.hasOwnProperty.call(e,"indexes_checksum")&&t.uint32(32).uint32(e.indexes_checksum),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessagesCheckInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.head_msg_index=e.int64();break;case 2:r.tail_msg_index=e.int64();break;case 3:r.msg_count=e.int32();break;case 4:r.indexes_checksum=e.uint32();break;default:e.skipType(7&o)}}return r},e}(),e.GetMessagesCheckInfoInConversationResponseBody=function(){function e(e){if(this.msgs_checkinfo_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.msgs_checkinfo_list=c.emptyArray,e.prototype.real_msg_total_count=0,e.prototype.cursor_reverse_next=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.msgs_checkinfo_list&&e.msgs_checkinfo_list.length)for(var n=0;n<e.msgs_checkinfo_list.length;++n)u.im_proto.MessagesCheckInfo.encode(e.msgs_checkinfo_list[n],t.uint32(10).fork()).ldelim();return null!=e.real_msg_total_count&&Object.hasOwnProperty.call(e,"real_msg_total_count")&&t.uint32(16).int32(e.real_msg_total_count),null!=e.cursor_reverse_next&&Object.hasOwnProperty.call(e,"cursor_reverse_next")&&t.uint32(32).int64(e.cursor_reverse_next),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetMessagesCheckInfoInConversationResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.msgs_checkinfo_list&&r.msgs_checkinfo_list.length||(r.msgs_checkinfo_list=[]),r.msgs_checkinfo_list.push(u.im_proto.MessagesCheckInfo.decode(e,e.uint32()));break;case 2:r.real_msg_total_count=e.int32();break;case 4:r.cursor_reverse_next=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.ConversationCheckInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(18).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationCheckInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_short_id=e.int64();break;case 2:r.conversation_id=e.string();break;case 3:r.conversation_type=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.GetConversationsCheckInfoResponseBody=function(){function e(e){if(this.conversation_checkinfo_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_checkinfo_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_checkinfo_list&&e.conversation_checkinfo_list.length)for(var n=0;n<e.conversation_checkinfo_list.length;++n)u.im_proto.ConversationCheckInfo.encode(e.conversation_checkinfo_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.GetConversationsCheckInfoResponseBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.conversation_checkinfo_list&&r.conversation_checkinfo_list.length||(r.conversation_checkinfo_list=[]),r.conversation_checkinfo_list.push(u.im_proto.ConversationCheckInfo.decode(e,e.uint32()));else e.skipType(7&o)}return r},e}(),e.ActionType=function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_ACTION"]=0,t[e[1]="FAVORITE"]=1,t[e[2]="PIN"]=2,t[e[3]="UNREAD"]=3,t}(),e.MarkMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.do_action=!1,e.prototype.action_type=0,e.prototype.sort_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tag=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),null!=e.do_action&&Object.hasOwnProperty.call(e,"do_action")&&t.uint32(40).bool(e.do_action),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(48).int32(e.action_type),null!=e.sort_time&&Object.hasOwnProperty.call(e,"sort_time")&&t.uint32(56).int64(e.sort_time),null!=e.tag&&Object.hasOwnProperty.call(e,"tag")&&t.uint32(64).int64(e.tag),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.server_message_id=e.int64();break;case 5:r.do_action=e.bool();break;case 6:r.action_type=e.int32();break;case 7:r.sort_time=e.int64();break;case 8:r.tag=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.MarkMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(16).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(26).string(e.check_message),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(32).int32(e.status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.server_message_id=e.int64();break;case 2:r.check_code=e.int64();break;case 3:r.check_message=e.string();break;case 4:r.status=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.PullMarkMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.asc=!1,e.prototype.action_type=0,e.prototype.tag=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.clear_unread_count=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(32).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).int64(e.limit),null!=e.asc&&Object.hasOwnProperty.call(e,"asc")&&t.uint32(48).bool(e.asc),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(56).int32(e.action_type),null!=e.tag&&Object.hasOwnProperty.call(e,"tag")&&t.uint32(64).int64(e.tag),null!=e.clear_unread_count&&Object.hasOwnProperty.call(e,"clear_unread_count")&&t.uint32(72).bool(e.clear_unread_count),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.PullMarkMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.cursor=e.int64();break;case 5:r.limit=e.int64();break;case 6:r.asc=e.bool();break;case 7:r.action_type=e.int32();break;case 8:r.tag=e.int64();break;case 9:r.clear_unread_count=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.PullMarkMessageResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.PullMarkMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_cursor=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.MessageByInitRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.page=0,e.prototype.conv_limit=0,e.prototype.msg_limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int64(e.version),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(16).int32(e.page),null!=e.conv_limit&&Object.hasOwnProperty.call(e,"conv_limit")&&t.uint32(24).int32(e.conv_limit),null!=e.msg_limit&&Object.hasOwnProperty.call(e,"msg_limit")&&t.uint32(32).int32(e.msg_limit),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessageByInitRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.version=e.int64();break;case 2:r.page=e.int32();break;case 3:r.conv_limit=e.int32();break;case 4:r.msg_limit=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MessageByInitResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_init_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.user_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.readconv_version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.ConversationMessage.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t.uint32(16).bool(e.has_more),t.uint32(24).int64(e.next_init_version),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(32).int64(e.version),null!=e.user_cursor&&Object.hasOwnProperty.call(e,"user_cursor")&&t.uint32(40).int64(e.user_cursor),null!=e.cmd_index&&Object.hasOwnProperty.call(e,"cmd_index")&&t.uint32(48).int64(e.cmd_index),null!=e.readconv_version&&Object.hasOwnProperty.call(e,"readconv_version")&&t.uint32(56).int64(e.readconv_version),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MessageByInitResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.ConversationMessage.decode(e,e.uint32()));break;case 2:r.has_more=e.bool();break;case 3:r.next_init_version=e.int64();break;case 4:r.version=e.int64();break;case 5:r.user_cursor=e.int64();break;case 6:r.cmd_index=e.int64();break;case 7:r.readconv_version=e.int64();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("has_more"))throw c.ProtocolError("missing required 'has_more'",{instance:r});if(!r.hasOwnProperty("next_init_version"))throw c.ProtocolError("missing required 'next_init_version'",{instance:r});return r},e}(),e.ConversationMessage=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversations=null,e.prototype.messages=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),u.im_proto.ConversationInfoV2.encode(e.conversations,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.ConversationMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversations=u.im_proto.ConversationInfoV2.decode(e,e.uint32());break;case 2:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("conversations"))throw c.ProtocolError("missing required 'conversations'",{instance:r});return r},e}(),e.MessageStatus=function(){const e={},t=Object.create(e);return t[e[0]="AVAILABLE"]=0,t[e[1]="NOT_EXIST"]=1,t[e[2]="INVISIBLE"]=2,t[e[3]="RECALLED"]=3,t[e[4]="DELETED"]=4,t}(),e.BatchUnmarkMessageRequestBody=function(){function e(e){if(this.server_message_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_ids=c.emptyArray,e.prototype.action_type=0,e.prototype.tag=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_ids&&e.server_message_ids.length)for(var n=0;n<e.server_message_ids.length;++n)t.uint32(32).int64(e.server_message_ids[n]);return null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(40).int32(e.action_type),null!=e.tag&&Object.hasOwnProperty.call(e,"tag")&&t.uint32(48).int64(e.tag),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BatchUnmarkMessageRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:if(r.server_message_ids&&r.server_message_ids.length||(r.server_message_ids=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.server_message_ids.push(e.int64());else r.server_message_ids.push(e.int64());break;case 5:r.action_type=e.int32();break;case 6:r.tag=e.int64();break;default:e.skipType(7&o)}}return r},e}(),e.BatchUnmarkMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(16).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(26).string(e.check_message),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(32).int32(e.status),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.BatchUnmarkMessageResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.server_message_id=e.int64();break;case 2:r.check_code=e.int64();break;case 3:r.check_message=e.string();break;case 4:r.status=e.int32();break;default:e.skipType(7&o)}}return r},e}(),e.MarkMsgUnreadCountReportRequestBody=function(){function e(e){if(this.tag_unread_count={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tag_unread_count=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(32).int64(e.total_unread_count),null!=e.tag_unread_count&&Object.hasOwnProperty.call(e,"tag_unread_count"))for(var n=Object.keys(e.tag_unread_count),r=0;r<n.length;++r)t.uint32(42).fork().uint32(8).int64(n[r]).uint32(16).int64(e.tag_unread_count[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.MarkMsgUnreadCountReportRequestBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.total_unread_count=e.int64();break;case 5:i.tag_unread_count===c.emptyObject&&(i.tag_unread_count={});var l=e.uint32()+e.pos;for(n=0,r=0;e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.int64();break;case 2:r=e.int64();break;default:e.skipType(7&f)}}i.tag_unread_count["object"==typeof n?c.longToHash(n):n]=r;break;default:e.skipType(7&a)}}return i},e}(),e.MarkMsgUnreadCountReportResponseBody=function(){function e(e){if(this.failed_tag_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.set_total_status=!1,e.prototype.failed_tag_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.set_total_status&&Object.hasOwnProperty.call(e,"set_total_status")&&t.uint32(8).bool(e.set_total_status),null!=e.failed_tag_list&&e.failed_tag_list.length)for(var n=0;n<e.failed_tag_list.length;++n)t.uint32(16).int64(e.failed_tag_list[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkMsgUnreadCountReportResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.set_total_status=e.bool();break;case 2:if(r.failed_tag_list&&r.failed_tag_list.length||(r.failed_tag_list=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.failed_tag_list.push(e.int64());else r.failed_tag_list.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.MarkMsgGetUnreadCountRequestBody=function(){function e(e){if(this.tags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.get_total=!1,e.prototype.tags=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.get_total&&Object.hasOwnProperty.call(e,"get_total")&&t.uint32(32).bool(e.get_total),null!=e.tags&&e.tags.length)for(var n=0;n<e.tags.length;++n)t.uint32(40).int64(e.tags[n]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.MarkMsgGetUnreadCountRequestBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.conversation_id=e.string();break;case 2:r.conversation_type=e.int32();break;case 3:r.conversation_short_id=e.int64();break;case 4:r.get_total=e.bool();break;case 5:if(r.tags&&r.tags.length||(r.tags=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.tags.push(e.int64());else r.tags.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.MarkMsgGetUnreadCountResponseBody=function(){function e(e){if(this.tag_unread_count={},this.failed_tag_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.total_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tag_unread_count=c.emptyObject,e.prototype.failed_tag_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.total_count&&Object.hasOwnProperty.call(e,"total_count")&&t.uint32(8).int64(e.total_count),null!=e.tag_unread_count&&Object.hasOwnProperty.call(e,"tag_unread_count"))for(var n=Object.keys(e.tag_unread_count),r=0;r<n.length;++r)t.uint32(18).fork().uint32(8).int64(n[r]).uint32(16).int64(e.tag_unread_count[n[r]]).ldelim();if(null!=e.failed_tag_list&&e.failed_tag_list.length)for(r=0;r<e.failed_tag_list.length;++r)t.uint32(24).int64(e.failed_tag_list[r]);return t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n,r,o=void 0===t?e.len:e.pos+t,i=new u.im_proto.MarkMsgGetUnreadCountResponseBody;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:i.total_count=e.int64();break;case 2:i.tag_unread_count===c.emptyObject&&(i.tag_unread_count={});var l=e.uint32()+e.pos;for(n=0,r=0;e.pos<l;){var f=e.uint32();switch(f>>>3){case 1:n=e.int64();break;case 2:r=e.int64();break;default:e.skipType(7&f)}}i.tag_unread_count["object"==typeof n?c.longToHash(n):n]=r;break;case 3:if(i.failed_tag_list&&i.failed_tag_list.length||(i.failed_tag_list=[]),2==(7&a))for(l=e.uint32()+e.pos;e.pos<l;)i.failed_tag_list.push(e.int64());else i.failed_tag_list.push(e.int64());break;default:e.skipType(7&a)}}return i},e}(),e.AudioRecognitionRequestInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.content="",e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.audio_option=null,e.prototype.conv_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(10).string(e.content),t.uint32(16).int64(e.uid),t.uint32(24).int64(e.server_message_id),u.im_proto.AudioOption.encode(e.audio_option,t.uint32(42).fork()).ldelim(),t.uint32(48).int64(e.conv_short_id),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.AudioRecognitionRequestInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.content=e.string();break;case 2:r.uid=e.int64();break;case 3:r.server_message_id=e.int64();break;case 5:r.audio_option=u.im_proto.AudioOption.decode(e,e.uint32());break;case 6:r.conv_short_id=e.int64();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("content"))throw c.ProtocolError("missing required 'content'",{instance:r});if(!r.hasOwnProperty("uid"))throw c.ProtocolError("missing required 'uid'",{instance:r});if(!r.hasOwnProperty("server_message_id"))throw c.ProtocolError("missing required 'server_message_id'",{instance:r});if(!r.hasOwnProperty("audio_option"))throw c.ProtocolError("missing required 'audio_option'",{instance:r});if(!r.hasOwnProperty("conv_short_id"))throw c.ProtocolError("missing required 'conv_short_id'",{instance:r});return r},e}(),e.AudioRecognitionRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audio=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),u.im_proto.AudioRecognitionRequestInfo.encode(e.audio,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.AudioRecognitionRequestBody;e.pos<n;){var o=e.uint32();if(o>>>3==1)r.audio=u.im_proto.AudioRecognitionRequestInfo.decode(e,e.uint32());else e.skipType(7&o)}if(!r.hasOwnProperty("audio"))throw c.ProtocolError("missing required 'audio'",{instance:r});return r},e}(),e.AudioRecognitionResponseInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.audio_text="",e.prototype.content="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int64(e.uid),t.uint32(16).int64(e.server_message_id),t.uint32(26).string(e.audio_text),t.uint32(34).string(e.content),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.AudioRecognitionResponseInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.uid=e.int64();break;case 2:r.server_message_id=e.int64();break;case 3:r.audio_text=e.string();break;case 4:r.content=e.string();break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("uid"))throw c.ProtocolError("missing required 'uid'",{instance:r});if(!r.hasOwnProperty("server_message_id"))throw c.ProtocolError("missing required 'server_message_id'",{instance:r});if(!r.hasOwnProperty("audio_text"))throw c.ProtocolError("missing required 'audio_text'",{instance:r});if(!r.hasOwnProperty("content"))throw c.ProtocolError("missing required 'content'",{instance:r});return r},e}(),e.AudioRecognitionResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.audio=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(8).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(18).string(e.check_message),u.im_proto.AudioRecognitionResponseInfo.encode(e.audio,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.im_proto.AudioRecognitionResponseBody;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.check_code=e.int64();break;case 2:r.check_message=e.string();break;case 3:r.audio=u.im_proto.AudioRecognitionResponseInfo.decode(e,e.uint32());break;default:e.skipType(7&o)}}if(!r.hasOwnProperty("audio"))throw c.ProtocolError("missing required 'audio'",{instance:r});return r},e}(),e})()},1523:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}y(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,o,{once:!0})}))},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i;return u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]),void 0===i?(i=o[t]=n,++e._eventsCount):("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(o=l(e))&&i.length>o&&!i.warned&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,function(e){console&&console.warn&&console.warn(e)}(r))),e}function h(e,t,n){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n}),t.listener=n,e.wrapFn=t}function p(e,t,n){return void 0===(e=e._events)||void 0===(e=e[t])?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(e):v(e,e.length)}function d(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if((s=0<t.length?t[0]:s)instanceof Error)throw s;throw(r=new Error("Unhandled error."+(s?" ("+s.message+")":""))).context=s,r}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)o(s,this,t);else{var a=s.length,c=v(s,a);for(n=0;n<a;++n)o(c[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,r,o,i,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},function(e,t,n){(function(t){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var r=n((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var a=o(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,u=e.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var f=r.splice(0,c);n.sigBytes-=u}return new s.init(f,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(o.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),n)})),o=n((function(e,t){var n;e.exports=(n=r,function(e){var t=n,r=t.lib,o=r.WordArray,i=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],f=n[6],h=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var d=u[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=u[p-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[p]=v+u[p-7]+g+u[p-16]}var m=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+c[p]+u[p];h=f,f=l,l=a,a=s+b|0,s=i,i=o,o=r,r=b+(_+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),n.SHA256)})),i=(n((function(e,t){var n,o,i;e.exports=(o=(n=r).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),n((function(e,t){e.exports=r.HmacSHA256}))),s=function(e,t){return i(t,e)},a=function(e){return o(e)},c=["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id"],u="aws4_request",l=function(e){try{return encodeURIComponent(e).replace(/[^A-Za-z0-9_.~\-%]+/g,escape).replace(/[*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}catch(e){return""}},f=function(e){return Object.keys(e).sort().map((function(t){var n=e[t];if(null!=n){var r=l(t);if(r)return Array.isArray(n)?"".concat(r,"=").concat(n.map(l).sort().join("&".concat(r,"="))):"".concat(r,"=").concat(l(n))}})).filter((function(e){return e})).join("&")};return function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.request=e,this.request.headers=e.headers||{},this.serviceName=n,r=r||{},this.signatureCache="boolean"!=typeof r.signatureCache||r.signatureCache,this.operation=r.operation,this.signatureVersion=r.signatureVersion}var n,r;return n=t,(r=[{key:"addAuthorization",value:function(e,t){var n=this.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.addHeaders(e,n),this.request.headers.Authorization=this.authorization(e,n)}},{key:"addHeaders",value:function(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.body&&(this.request.headers["X-Amz-Content-Sha256"]=a(JSON.stringify(this.request.body)).toString())}},{key:"authorization",value:function(e,t){var n=[],r=this.credentialString(t);return n.push("".concat("AWS4-HMAC-SHA256"," Credential=").concat(e.accessKeyId,"/").concat(r)),n.push("SignedHeaders=".concat(this.signedHeaders())),n.push("Signature=".concat(this.signature(e,t))),n.join(", ")}},{key:"signature",value:function(e,t){var n=this.getSigningKey(e,t.substr(0,8),this.request.region,this.serviceName,this.signatureCache);return s(n,this.stringToSign(t),"hex")}},{key:"stringToSign",value:function(e){var t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")}},{key:"canonicalString",value:function(){var e=[],t=this.request.pathname||"/";return e.push(this.request.method.toUpperCase()),e.push(t),e.push(f(this.request.params)||""),e.push("".concat(this.canonicalHeaders(),"\n")),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")}},{key:"canonicalHeaders",value:function(){var e=this,t=[];Object.keys(this.request.headers).forEach((function(n){t.push([n,e.request.headers[n]])})),t.sort((function(e,t){return e[0].toLowerCase()<t[0].toLowerCase()?-1:1}));var n=[];return t.forEach((function(t){var r=t[0].toLowerCase();if(e.isSignableHeader(r)){var o=t[1];if(null==o||"function"!=typeof o.toString)throw new Error("Header ".concat(r," contains invalid value"));n.push("".concat(r,":").concat(e.canonicalHeaderValues(o.toString())))}})),n.join("\n")}},{key:"canonicalHeaderValues",value:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}},{key:"signedHeaders",value:function(){var e=this,t=[];return Object.keys(this.request.headers).forEach((function(n){n=n.toLowerCase(),e.isSignableHeader(n)&&t.push(n)})),t.sort().join(";")}},{key:"credentialString",value:function(e){return this.createScope(e.substr(0,8),this.request.region,this.serviceName)}},{key:"hexEncodedHash",value:function(e){return a(e)}},{key:"hexEncodedBodyHash",value:function(){return this.request.headers["X-Amz-Content-Sha256"]?this.request.headers["X-Amz-Content-Sha256"]:this.request.body?this.hexEncodedHash(f(this.request.body)):this.hexEncodedHash("")}},{key:"isSignableHeader",value:function(e){return 0===e.toLowerCase().indexOf("x-amz-")||c.indexOf(e)<0}},{key:"iso8601",value:function(e){return void 0===e&&(e=new Date),e.toISOString().replace(/\.\d{3}Z$/,"Z")}},{key:"getSigningKey",value:function(e,t,n,r){var o=s("AWS4".concat(e.secretAccessKey),t),i=s(o,n),a=s(i,r);return s(a,u)}},{key:"createScope",value:function(e,t,n){return[e.substr(0,8),t,n,u].join("/")}}])&&e(n.prototype,r),t}()}()}).call(this,n(7))},function(e,t,n){e.exports=function(){return n(8)('!function(_){var t={};function __webpack_require__(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return _[e].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=_,__webpack_require__.c=t,__webpack_require__.d=function(e,r,_){__webpack_require__.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:_})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(r,e){if(1&e&&(r=__webpack_require__(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var _=Object.create(null);if(__webpack_require__.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)__webpack_require__.d(_,t,function(e){return r[e]}.bind(null,t));return _},__webpack_require__.n=function(e){var r=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,r){function dec2hex(e){if(void 0!==e)return function toEight(e){return e.length<8?toEight(e="0".concat(e)):e}(Number(e).toString(16))}self.onmessage=function(e){var e=e.data,r=e[0],_=e[1],e=e[2],t=function crc32(e,r){for(var _=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],t=("undefined"!=typeof Int32Array&&(_=new Int32Array(_)),-1^~~r),n=(e=new Uint8Array(e)).length,u=0;u<n;u++)t=_[255&(t^e[u])]^t>>>8;return(-1^t)>>>0}(r,0);postMessage([r,dec2hex(t),_,e],[r])}}]);',null)}},function(e,t,n){e.exports=function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var a=o(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,u=e.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var f=r.splice(0,c);n.sigBytes-=u}return new s.init(f,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(o.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e}()},function(e,t,n){var r;e.exports=(r=n(3),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],f=n[6],h=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var d=u[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=u[p-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[p]=v+u[p-7]+g+u[p-16]}var m=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+c[p]+u[p];h=f,f=l,l=a,a=s+b|0,s=i,i=o,o=r,r=b+(_+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){e.exports=function(e){return e.HmacSHA256}(n(3),(n(4),n(6)))},function(e,t,n){var r;e.exports=(r=n(3),void function(){var e=r,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return on})),t=n(0);var r=n.n(t),o={debug:!1,region:"cn-north-1",initUploadFileUrl:"{tosDomain}/{oid}?uploads",uploadChunkedUrl:"{tosDomain}/{oid}?partNumber={number}&uploadID={uploadId}",uploadMergeUrl:"{tosDomain}/{oid}?uploadID={uploadId}",getUploadListUrl:"{tosDomain}/{oid}?uploadID={uploadId}",directUploadFileUrl:"{tosDomain}/{oid}",external:{},getSliceFunc:null,uploadSliceCount:3,retryUploadTime:2,retryProcess:!0,retryProcessTime:3,retryTaskTime:2,progressMonitorTime:10,progressMonitorSpeed:50,schema:"https",replace:{}},i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}function a(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)}function c(e){return function(e,t){if("string"==typeof e&&"number"==typeof t){for(var n=[],r=(t=t<=25?t:t%25,String.fromCharCode(t+97)),o=e.split(r),i=0;i<o.length;i++){var s=64^+parseInt(o[i],t);s=String.fromCharCode(s),n.push(s)}return n.join("")}}(e,25)}function u(e){var t=document.createElement("a");return t.href=e,t}function l(e){var t={};try{u(e).search.slice(1).split("&").forEach((function(e){var n,r,o=e.split("=");o.length&&(n=o[0],r=o[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}}))}catch(e){}return t}function f(e){for(var t=0,n=0,r=(e+="").length,o=0;o<r;o++)(0x7fffffffffff<(t=31*t+e.charCodeAt(n++))||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t}function h(e,t){try{return g.get(e,{domain:t||document.domain})}catch(e){return""}}function p(e,t,n,r){try{var o=r||document.domain,i=+new Date+(n||6048e5);g.set(e,t,{expires:new Date(i),path:"/",domain:o})}catch(e){}}var d,v,y=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(o){t(o),n.off(e,r)}))},e.prototype.off=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&(t?-1!==(t=this._hooks[e].indexOf(t))&&this._hooks[e].splice(t,1):this._hooks[e]=[])},e.prototype.emit=function(e,t,n){n?e&&(-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))):this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&s(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),g=(d=+Date.now()+Number((""+Math.random()).slice(2,8)),(t={exports:{}}).exports=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(+new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a,c="";for(a in i)i[a]&&(c+="; "+a,!0!==i[a]&&(c+="="+i[a].split(";")[0]));return document.cookie=t+"="+n+c}}function s(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return s(e,!1)},o.getJSON=function(e){return s(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}(),t.exports),m=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return h(e,t)},e.prototype.setCookie=function(e,t,n,r){p(e,t,n,r)},e}(),_={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return h(e,t)},setCookie:function(e,t,n,r){p(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},b={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return h(e,t)},setCookie:function(e,t,n,r){p(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},w=function(){function e(e,t){this._storage=t&&"session"===t?b:!e&&_.isSupportLS?_:new m}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),x=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?u(n).hostname:"",o=l(window.location.href),i=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web",s=(this.utm=function(e,t,n,r){var o=new w(!1),i=new w(!1,"session"),s=e?"_tea_utm_cache_"+e:"_tea_utm_cache",a=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},u=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var f,h,p=!1;for(f in l)l[f]&&(-1!==u.indexOf(f)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[f]=l[f]):c[f]=l[f],p=!0);p?(i.setItem(a,"1"),o.setCookie(s,JSON.stringify(c),r,n)):(h=o.getCookie(s,n))&&(c=JSON.parse(h)),i.getItem(a)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e){return l}return c}(this.appid,o,this.domain,this.cookie_expire),o=this.browser(),this.os());return{browser:o.browser,browser_version:o.browser_version,platform:i,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",o="",i=location.hostname,s=!1;return e&&t&&i!==t&&(r=t,s=!0,(i=l(n=e)).keyword&&(o=i.keyword)),{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:o,isLast:s}},e.prototype.browser=function(){var e,t="",n=""+parseFloat(this.appVersion),r=this.userAgent;return-1!==r.indexOf("Edge")||-1!==r.indexOf("Edg")?(t="Microsoft Edge",n=-1!==r.indexOf("Edge")?(e=r.indexOf("Edge"),r.substring(e+5)):(e=r.indexOf("Edg"),r.substring(e+4))):-1!==(e=r.indexOf("MSIE"))?(t="Microsoft Internet Explorer",n=r.substring(e+5)):-1!==(e=r.indexOf("Lark"))?(t="Lark",n=r.substring(e+5,e+11)):-1!==(e=r.indexOf("MetaSr"))?(t="sougoubrowser",n=r.substring(e+7,e+10)):-1!==r.indexOf("MQQBrowser")||-1!==r.indexOf("QQBrowser")?(t="qqbrowser",-1!==r.indexOf("MQQBrowser")?(e=r.indexOf("MQQBrowser"),n=r.substring(e+11,e+15)):-1!==r.indexOf("QQBrowser")&&(e=r.indexOf("QQBrowser"),n=r.substring(e+10,e+17))):-1!==r.indexOf("Chrome")?-1!==(e=r.indexOf("MicroMessenger"))?(t="weixin",n=r.substring(e+15,e+20)):-1!==(e=r.indexOf("360"))?(t="360browser",n=r.substring(r.indexOf("Chrome")+7)):-1!==r.indexOf("baidubrowser")||-1!==r.indexOf("BIDUBrowser")?(-1!==r.indexOf("baidubrowser")?(e=r.indexOf("baidubrowser"),n=r.substring(e+13,e+16)):-1!==r.indexOf("BIDUBrowser")&&(e=r.indexOf("BIDUBrowser"),n=r.substring(e+12,e+15)),t="baidubrowser"):-1!==(e=r.indexOf("xiaomi"))?n=-1!==r.indexOf("openlanguagexiaomi")?(t="openlanguage xiaomi",r.substring(e+7,e+13)):(t="xiaomi",r.substring(e-7,e-1)):-1!==(e=r.indexOf("TTWebView"))?(t="TTWebView",n=r.substring(e+10,e+23)):-1===(e=r.indexOf("Chrome"))&&-1===(e=r.indexOf("Chrome"))||(t="Chrome",n=r.substring(e+7)):-1!==r.indexOf("Safari")?-1!==(e=r.indexOf("QQ"))?(t="qqbrowser",n=r.substring(e+10,e+16)):-1!==(e=r.indexOf("Safari"))&&(t="Safari",n=r.substring(e+7),-1!==(e=r.indexOf("Version"))&&(n=r.substring(e+8))):-1!==(e=r.indexOf("Firefox"))?(t="Firefox",n=r.substring(e+8)):-1!==(e=r.indexOf("MicroMessenger"))?(t="weixin",n=r.substring(e+15,e+20)):-1!==(e=r.indexOf("QQ"))&&(t="qqbrowser",n=r.substring(e+3,e+8)),{browser:t,browser_version:n=-1!==(r=(n=-1!==(r=(n=-1!==(r=n.indexOf(";"))?n.substring(0,r):n).indexOf(" "))?n.substring(0,r):n).indexOf(")"))?n.substring(0,r):n}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<n.length;r++){var o=n[r];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}function i(e,t){return(e=e.exec(t))&&e[1]?e[1]:""}function s(e,t){return(e=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t))?e.slice(1)[0]:""}var a,c;switch(/Windows/.test(e)&&(t=i(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":t=c=(c=i(/Android ([\.\_\d]+)/,a=this.userAgent))?c:i(/Android\/([\.\_\d]+)/,a),e="android";break;case"iOS":t=this.isNewIpad()?s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t,n,r="";try{"android"===e?navigator.userAgent.split(";").forEach((function(e){-1<e.indexOf("Build/")&&(r=e.slice(0,e.indexOf("Build/")))})):"ios"!==e&&"mac"!==e&&"windows"!==e||(r=this.isNewIpad()?"iPad":(n=(t=navigator.userAgent.replace("Mozilla/5.0 (","")).indexOf(";"),t.slice(0,n)))}catch(e){return r.trim()}return r.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&1<navigator.maxTouchPoints},e}(),O={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},E={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},S="5.0.29",k=(function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready"}(W=W||{}),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(v=v||{}),W),C=void 0,I=(t=(new Date).getTimezoneOffset(),parseInt(""+-t/60,10)),P=60*t,T=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e,e=new x(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init();var n="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new w(!1,"session"),this.localStorage=new w(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage),(t=this.localStorage.getItem(n))&&"1"===t?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(n,"1")),this.envInfo={user:{user_unique_id:C,user_type:C,user_id:C,user_is_auth:C,user_is_login:C,device_id:C,web_id:C,ip_addr_id:C,user_unique_id_type:C},header:{app_id:C,app_name:C,app_install_id:C,install_id:C,app_package:C,app_channel:C,app_version:C,os_name:e.os_name,os_version:e.os_version,device_model:e.device_model,ab_client:C,traffic_type:C,client_ip:C,device_brand:C,os_api:C,access:C,language:e.language,region:C,app_language:C,app_region:C,ab_version:C,creative_id:e.utm.creative_id,ad_id:e.utm.ad_id,campaign_id:e.utm.campaign_id,log_type:C,rnd:C,platform:e.platform,sdk_version:S,sdk_lib:"js",province:C,city:C,timezone:I,tz_offset:P,tz_name:C,sim_region:C,carrier:C,resolution:e.screen_width+"x"+e.screen_height,browser:e.browser,browser_version:e.browser_version,referrer:e.referrer,referrer_host:e.referrer_host,width:e.screen_width,height:e.screen_height,screen_width:e.screen_width,screen_height:e.screen_height,utm_term:e.utm.utm_term,utm_content:e.utm.utm_content,utm_source:e.utm.utm_source,utm_medium:e.utm.utm_medium,utm_campaign:e.utm.utm_campaign,tracer_data:JSON.stringify(e.utm.tracer_data),custom:{},wechat_unionid:C,wechat_openid:C}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.initDomain()}return e.prototype.initDomain=function(){var e=this.initConfig.channel_domain;e?this.domain=e:(e=this.initConfig.channel,this.domain=c(E[e]))},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){return this.domain},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbData=function(e){this.ab_data=e},e.prototype.getAbData=function(){return this.ab_data||{}},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||"/list";break;case"webid":t="/webid";break;case"tobid":t="/tobid"}return e="",this.initConfig.caller&&(e="?sdk_version=5.0.29&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+e},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){var r,o,s;void 0!==e[n]&&null!==e[n]||t.delete(n),"evtParams"===n?t.evtParams=i({},t.evtParams||{},e.evtParams||{}):"_staging_flag"===n?t.evtParams=i({},t.evtParams||{},{_staging_flag:e._staging_flag}):"reportErrorCallback"===n&&"function"==typeof e[n]?t.reportErrorCallback=e[n]:(s=o="",-1<n.indexOf(".")&&(o=(r=n.split("."))[0],s=r[1]),o?"user"===o||"header"===o?t.envInfo[o][s]=e[n]:t.envInfo.header.custom[s]=e[n]:t.envInfo.user.hasOwnProperty(n)?-1<["user_type","ip_addr_id"].indexOf(n)?t.envInfo.user[n]=e[n]&&Number(e[n]):-1<["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)?t.envInfo.user[n]=e[n]&&String(e[n]):-1<["user_is_auth","user_is_login"].indexOf(n)?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):t.envInfo.header.hasOwnProperty(n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n])}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:this.envInfo.user.hasOwnProperty(e)?this.envInfo.user[e]:this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t,n=this.storage.getItem(this.configKey)||{};n&&Object.keys(e).length&&(t=Object.assign(e,n),this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey);return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey);t&&t.hasOwnProperty(e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e}(),A=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&this.name},e.prototype.warn=function(e){this.isLog&&console.warn("[instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("[instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),j=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&!!AppLogBridge}catch(e){return!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){e?t(!0):n(!1)})):n(!1)}catch(e){JSON.stringify(e.stack),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e))}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge埋点上报",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),R={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function M(e,t,n,r,o,i,s,a,c){try{var u=new XMLHttpRequest,l=a||"POST";u.open(l,""+e,!0),u.setRequestHeader("Content-Type","application/json; charset=utf-8"),s&&u.setRequestHeader("X-MCS-AppKey",""+s),r&&(u.withCredentials=!0),u.onload=function(){if(o){var e=null;if(u.responseText){try{e=JSON.parse(u.responseText)}catch(t){e={}}o(e,t)}}},n&&(u.timeout=n,u.ontimeout=function(){i&&i(t,R.TIMEOUT)}),u.onerror=function(){u.abort(),i&&i(t,R.XHR_ON)},c?u.send(t):u.send(JSON.stringify(t))}catch(e){}}function B(e,t,n,r){try{var o=e.match(/\/v\d\//),i=o?o[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/",s=e.split(i)[0];if(!s)return void r(e,t,F);t.forEach((function(o){o=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&(n+="&"+t+"="+encodeURIComponent(JSON.stringify(e[t])));return"&"===n[0]?n.slice(1):n}(o);var i=new Image(1,1);i.onload=function(){i=null,n&&n()},i.onerror=function(){i=null,r&&r(e,t,U)},i.src=s+"/gif?"+o}))}catch(n){r&&r(e,t,G,n.message)}}function D(e,t,n,r,o,i,s,a){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(s)return window.navigator&&window.navigator.sendBeacon?void(window.navigator.sendBeacon(e,JSON.stringify(t))?o():i(e,t,4003)):void B(e,t,o,i)}else B(e,t,o,i);M(e,t,n,r,o,i,"","",a)}function L(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)}function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var F=4001,U=4e3,G=4002,H=function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;if(!(e=e[0]))return!1;var n=e.events;if(e=e.header,!n||!n.length)return!1;var r=!0;return n.forEach((function(e){t.checkEventName(e.event)||(r=!1,e.checkEvent="事件名不能以 $ or __开头"),t.checkEventParams(e.params)||(r=!1,e.checkParams="属性名不能以 $ or __开头")})),r=!!this.checkEventParams(e)&&r},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t,n=e;if("string"==typeof e&&(n=JSON.parse(n)),!Object.keys(n).length)return!0;for(t in n)return!(!this.calculate(t,"params")||"string"==typeof n[t]&&1024<n[t].length&&(console.warn("params: "+t+" can not over 1024 byte, please check;"),1));return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||(this.regStr.test(e)?!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start with $ or __, pleace check;"),!1):(console.warn(("event"===t?"event":"params")+" name: "+e+" is illegal, can not start with $ or __, pleace check;"),!1))},e}(),V=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new H(e,t),this.cacheStorgae=new w(!0),this.localStorage=new w(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.collect.on(k.Ready,(function(){n.reportAll(!1)})),this.collect.on(k.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(k.Event,(function(e){n.event(e)})),this.collect.on(k.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(k.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)}((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var n,r=s(e,this.cacheStorgae.getItem(this.eventKey)||[]);this.cacheStorgae.setItem(this.eventKey,r),this.reportTimeout&&clearTimeout(this.reportTimeout),r.length>=this.maxReport?this.report(!1):(n=this.reportTime,this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),n))}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e){e=s(e,this.cacheStorgae.getItem(this.beconKey)||[]),this.cacheStorgae.setItem(this.beconKey,e),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))},e.prototype.reportBecon=function(){var e;this.collect.destroyInstance||!this.collect.tokenManager.getReady()||!this.collect.sdkReady||(e=this.cacheStorgae.getItem(this.beconKey)||[])&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))},e.prototype.report=function(e){var t;this.collect.destroyInstance||!this.collect.tokenManager.getReady()||!this.collect.sdkReady||(t=this.cacheStorgae.getItem(this.eventKey)||[]).length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r=e.slice(n,n+this.eventLimit),o=this.split(this.merge(r));this.send(o,t)}else o=this.split(this.merge(e)),this.send(o,t)},e.prototype.merge=function(e,t){var n=this,r=(c=this.configManager.get()).header,o=c.user,s=(r.custom=JSON.stringify(r.custom),this.configManager.get("evtParams")),a=this.configManager.get("user_unique_id_type"),c=e.map((function(e){try{Object.keys(s).length&&!t&&(e.params=i({},s,e.params)),a&&(e.params.$user_unique_id_type=a);var r=n.localStorage.getItem(n.abKey);return r&&r.uuid&&r.uuid===o.user_unique_id&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(r){return n.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:r.message}),e}}));return((e=JSON.parse(JSON.stringify({events:c,user:o,header:r}))).local_time=Math.floor(Date.now()/1e3),e.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,c=[]).push(e),c},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e)),o=(n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!")),r||e);if(n.eventCheck.checkVerify(o),!o.length)return;n.collect.emit(k.SubmitBefore,o),n.collect.emit(k.SubmitVerify,o),D(n.reportUrl,o,n.timeout,n.enable_ttwebid,(function(e,t){e&&0!==e.e?(n.collect.emit(k.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_EVENT,info:"埋点上报失败",time:Date.now(),data:o,code:e.e,failType:"数据异常",status:"fail"})):(n.collect.emit(k.SubmitScuess,{eventData:t,res:e}),n.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_EVENT,info:"埋点上报成功",time:Date.now(),data:o,code:200,status:"success"}))}),(function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(k.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_EVENT,info:"埋点上报网络异常",time:Date.now(),data:o,code:t,failType:"网络异常",status:"fail"})}),t,!1),n.collect.emit(k.SubmitAfter,o)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}}))},e}(),q=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new w(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(k.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(k.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e,t=this;this.enableCookie?(e=this.storage.getCookie(this.tokenKey,this.cookieDomain),this.cacheToken=e&&"string"==typeof e?JSON.parse(e):{}):this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(k.CustomWebId,(function(){t.tokenReady=!0,t.collect.emit(k.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:L(),user_unique_id:this.configManager.get("user_unique_id")||L()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;return(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram"))&&!(!(e=l(window.location.href))||!e.Web_ID||(this.complete({web_id:""+e.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+e.Web_ID}),0))},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 发起WEBID请求",logType:"fetch",level:"info",time:Date.now(),data:n}),M(t,n,3e3,!1,(function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):(e.collect.emit(k.TokenError),console.warn("[]appid: "+e.config.app_id+" webid error, init error~")),e.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"WEBID请求成功",logType:"fetch",level:"info",time:Date.now(),data:t})}),(function(){e.collect.emit(k.TokenError),e.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"WEBID请求网络异常",logType:"fetch",level:"error",time:Date.now(),data:null}),console.warn("[]appid: "+e.config.app_id+", get webid error, init error~")}))},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(k.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(k.TokenComplete)},e.prototype.setUuid=function(e){var t,n;e&&-1===["null","undefined","Null","None"].indexOf(e)?(e=String(e),t=this.configManager.get("user_unique_id"),n=this.cacheToken&&this.cacheToken.user_unique_id,e===t&&e===n||(this.configManager.set({user_unique_id:e}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=e,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(k.TokenChange,"uuid"),this.collect.emit(k.SessionReset))):this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(k.TokenReset))},e.prototype.setWebId=function(e){var t,n;e&&!this.config.enable_ttwebid&&(this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now(),t=this.configManager.get("web_id"),(n=this.configManager.get("user_unique_id"))&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(k.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(k.TokenChange,"webid")),this.setStorage(this.cacheToken))},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise((function(n){M(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?n(e.tobid):n("")}),(function(){n("")}))}))},e}(),K=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new w(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(k.SessionReset,(function(){n.resetSessionId()})),this.collect.on(k.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e,t=this.storage.getItem(this.sessionKey);t&&t.sessionId&&(e=t.timestamp,Date.now()-e>this.expireTime?t={sessionId:N(),timestamp:Date.now()}:t.timestamp=Date.now(),this.storage.setItem(this.sessionKey,t),this.resetExpTime())},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:N(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return!this.disableSession&&e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:N(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:N(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),z=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=e,this.config=t,this.app_id=t.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],this.load()}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){},t.onload=function(){},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){e.message}},e.prototype.load=function(){try{this.loadBaseInfo(),this.loadHook();var e=l(window.location.href);if(!e.open_devtool_web||parseInt(e.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){e.message}},e.prototype.loadDevTool=function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"基本信息",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,上报域名:this.collect.configManager.getDomain(),SDK版本:S,SDK引入方式:"npm"}},{title:"用户信息",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"点击获取SSID"}},{title:"公共参数信息",type:2,infoName:{浏览器:this.collect.configManager.get("browser"),浏览器版本:this.collect.configManager.get("browser_version"),平台:this.collect.configManager.get("platform"),设备型号:this.collect.configManager.get("device_model"),操作系统:this.collect.configManager.get("os_name"),操作系统版本:this.collect.configManager.get("os_version"),屏幕分辨率:this.collect.configManager.get("os_version"),来源:this.collect.configManager.get("referrer"),自定义信息:""}},{title:"配置信息",type:3,infoName:{全埋点:!!this.config.autotrack,停留时长:!!this.config.enable_stay_duration}},{title:"A/B配置信息",type:4,infoName:{"A/B实验":!!this.config.enable_ab_test}},{title:"客户端信息",type:3,infoName:{打通开关:!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(k.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["自定义信息"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["已曝光VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B域名"]=e.config.ab_channel_domain||c(O[e.config.channel]),e.info[4].infoName["全部配置"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["是否打通"]=!!e.collect.bridgeReport)}))},e.prototype.loadHook=function(){var e=this;this.collect.on(v.DEBUGGER_MESSAGE,(function(t){switch(t.type){case v.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["已曝光VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["全部配置"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case v.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=(n=t.data[0]).events;if(!r.length)return;r.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"， msg: "+t.failType})})),e.updateEvent(n)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e,t=document.head||document.getElementsByTagName("head")[0];(e=document.createElement("style")).appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),t.appendChild(e),((t=document.createElement("div")).innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog调试</div>',e=document.createElement("div")).innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(t),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),W=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=e,this.hook=new y,this.remotePlugin=new Map,this.Types=k,this.adapters.fetch=M,this.adapters.storage=w}return e.usePlugin=function(t,n,r){if(n){for(var o=!1,i=0,s=e.plugins.length;i<s;i++)if(e.plugins[i].name===n){e.plugins[i].plugin=t,e.plugins[i].options=r||{},o=!0;break}o||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&(t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,r=this;this.inited?console.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):t&&a(t)?t.app_id&&"number"==typeof(n=t.app_id)&&!isNaN(n)?t.app_key&&"string"!=typeof t.app_key?console.warn("app_key param is error, must be string, please check!"):(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(console.warn("channel must be `cn`, `sg`,`va` !!!"),t.channel="cn"),this.logger=new A(this.name,t.log),this.appBridge=new j(this,t.Native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new T(this,t),this.debugger=new z(this,t),this.initConfig=t,this.emit(k.Init),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行INIT",data:t,level:"info",time:Date.now()}),t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new V,this.tokenManager=new q,this.sessionManager=new K,Promise.all([new Promise((function(e){r.once(k.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){r.once(k.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin;return t=t.options,t=Object.assign(r.initConfig,t),(n=new n).apply(r,t),e.push(n),e}),r.pluginInstances)}catch(e){e.message,r.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}r.sdkReady=!0,r.emit(k.Ready),r.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 初始化完成",time:Date.now(),level:"info",data:r.configManager.get("user")}),r.logger.info("appid: "+t.app_id+", userInfo:"+JSON.stringify(r.configManager.get("user"))),r.logger.info("appid: "+t.app_id+", sdk is ready, version is "+S+", you can report now !!!"),t.disable_auto_pv&&(r.disableAutoPageView=!0);try{(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){r.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}r.pageView(),r.on(k.TokenChange,(function(e){"webid"===e&&r.pageView(),r.logger.info("appid: "+t.app_id+" token change, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 设置了用户信息",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(k.TokenReset,(function(){r.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 重置了用户信息",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(k.RouteChange,(function(e){e.init||t.disable_route_report||r.pageView()}));try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0):console.warn("app_id param is error, must be number, please check!"):console.warn("init params error,please check")},e.prototype.config=function(e){var t,n;this.inited?e&&a(e)?this.bridgeReport?this.appBridge.setConfig(e):(e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv),t=i({},e),this.initConfig&&this.initConfig.configPersist&&((n=this.configManager.getStore())&&(t=Object.assign(n,e)),this.configManager.setStore(e)),t.web_id,t.user_unique_id,n=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]]);return n}(t,["web_id","user_unique_id"]),t.hasOwnProperty("web_id")&&this.emit(k.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(k.ConfigUuid,t.user_unique_id),this.configManager.set(n),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行CONFIG",level:"info",time:Date.now(),data:t})):console.warn("config params is error, please check"):console.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(k.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(k.Start),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行START",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(k.Ready)))},e.prototype.event=function(e,t){var n=this;try{if(this.initConfig&&this.initConfig.disable_track_event)return;var r=[];Array.isArray(e)?e.forEach((function(e){r.push(n.processEvent(e[0],e[1]||{}))})):r.push(this.processEvent(e,t)),this.bridgeReport?r.forEach((function(e){var t=e.event;e=e.params,n.appBridge.onEventV3(t,JSON.stringify(e))})):r.length&&(this.emit(k.Event,r),this.emit(k.SessionResetTime))}catch(e){console.warn("something error, please check"),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e,t){var n;this.initConfig&&this.initConfig.disable_track_event||(Array.isArray(e)?console.warn("beconEvent not support batch report, please check"):((n=[]).push(this.processEvent(e,t||{})),n.length&&(this.emit(k.BeconEvent,n),this.emit(k.SessionResetTime))))},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{var n=e,r=(/^event\./.test(e)&&(n=e.slice(6)),t),o=void((r="object"!=typeof r?{}:r).profile?delete r.profile:r.event_index=d+=1);return r.local_ms?(o=r.local_ms,delete r.local_ms):o=+new Date,{event:n,params:r,local_time_ms:o,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:n.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){void 0===e&&(e={});var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+this.configManager.is_first_time};t=i({},t,e),this.event("predefine_pageview",t)},e.prototype.clearEventCache=function(){this.emit(k.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){var t;e&&(t=f(e),this.config({web_id:""+t,wechat_unionid:e}),this.emit(k.CustomWebId))},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){var t;e&&(t=f(e),this.config({web_id:""+t,wechat_openid:e}),this.emit(k.CustomWebId))},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(k.ResetStay,{url_path:e,title:t,url:n},k.Stay)},e.prototype.resetStayParams=function(e,t,n){this.emit(k.SetStay,{url_path:e=void 0===e?"":e,title:t=void 0===t?"":t,url:n=void 0===n?"":n},k.Stay)},e.prototype.getToken=function(e,t){function n(t){var n;return!s&&(s=!0,n=o.configManager.get().user,t&&(n.tobid=t,n["diss".split("").reverse().join("")]=t),e(i({},n)))}function r(){o.tokenManager.getTobId().then((function(e){n(e)}))}var o=this,s=!1;this.sdkReady?r():(t&&setTimeout((function(){n()}),t),this.on(k.Ready,(function(){r()})))},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(k.ProfileSet,e,k.Profile),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(k.ProfileSetOnce,e,k.Profile),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(k.ProfileIncrement,e,k.Profile),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(k.ProfileUnset,e,k.Profile),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(k.ProfileAppend,e,k.Profile),this.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(k.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,k.Ab)},e.prototype.getVar=function(e,t,n){this.emit(k.AbVar,{name:e,defaultValue:t,callback:n},k.Ab)},e.prototype.getABconfig=function(e,t){this.emit(k.AbConfig,{params:e,callback:t},k.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(k.AbVersionChangeOn,e,k.Ab),function(){t.emit(k.AbVersionChangeOff,e,k.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(k.AbVersionChangeOff,e,k.Ab)},e.prototype.openOverlayer=function(){this.emit(k.AbOpenLayer,"",k.Ab)},e.prototype.closeOverlayer=function(){this.emit(k.AbCloseLayer,"",k.Ab)},e.prototype.getAllVars=function(e){this.emit(k.AbAllVars,e,k.Ab)},e.prototype.autoInitializationRangers=function(e){var t=e.app_id,n=e.channel,r=e.onTokenReady,o=(e=E[n]+"/webid",new w(!1)),i="__tea_cache_tokens_"+t;(n=o.getItem(i))&&n.web_id?r(n.web_id):D(e,{app_key:"",app_id:t,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(e){e&&0===e.e?(r(e.web_id),e={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()},o.setItem(i,e)):r("")}),(function(){r("")}),!0)},e.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(k.TokenComplete))},e.plugins=[],e}(),$=(t=function(){function e(){}return e.prototype.apply=function(e,t){var n=this,r=e.adapters.fetch;t.event_verify_url&&"string"==typeof t.event_verify_url&&(this.url=t.event_verify_url+"/v1/list_test",this.url&&(t=e.Types,e.on(t.SubmitBefore,(function(e){r(n.url,e,3e4)}))))},e}(),function(){function e(){}return e.prototype.apply=function(e,t){var n=this,r=(this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list",e.Types),o=e.adapters.fetch;this.eventCheck=new H(e,t),this.fetch=o,this.cache={},this.collect.on(r.ProfileSet,(function(e){n.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){n.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){n.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){n.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){n.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){n.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(Object.keys(n).length)for(var r in n)!function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))}(r)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[],r=(n.push(this.collect.processEvent(e,t)),this.collect.eventManager.merge(n));this.fetch(this.reportUrl,r),this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_EVENT,info:"埋点上报成功",time:Date.now(),data:r,code:200,status:"success"})}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.setProfile=function(e){(e=this.formatParams(e))&&Object.keys(e).length&&(this.pushCache(e),this.report("__profile_set",i({},e,{profile:!0})))},e.prototype.setOnceProfile=function(e){(e=this.formatParams(e,!0))&&Object.keys(e).length&&(this.pushCache(e),this.report("__profile_set_once",i({},e,{profile:!0})))},e.prototype.incrementProfile=function(e){e?this.report("__profile_increment",i({},e,{profile:!0})):console.warn("please check the params, must be object!!!")},e.prototype.unsetProfile=function(e){var t;e?((t={})[e]="1",this.report("__profile_unset",i({},t,{profile:!0}))):console.warn("please check the key, must be string!!!")},e.prototype.appendProfile=function(e){if(e){var t,n={};for(t in e)"string"==typeof e[t]||"Array"===Object.prototype.toString.call(e[t]).slice(8,-1)?n[t]=e[t]:console.warn("please check the value of param: "+t+", must be string or array !!!");Object.keys(n).length&&this.report("__profile_append",i({},n,{profile:!0}))}else console.warn("please check the params, must be object!!!")},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach((function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}}))},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void console.warn("please check the params type, must be object !!!");var r,o={};for(r in e)"string"==typeof e[r]||"number"==typeof e[r]||"Array"===Object.prototype.toString.call(e[r]).slice(8,-1)?o[r]=e[r]:console.warn("please check the value of params:"+r+", must be string,number,Array !!!");var i=Object.keys(o);if(!i.length)return;if(!this.eventCheck.checkEventParams(o))return;var s=Date.now();return i.filter((function(r){var o=n.cache[r];return t?!o:!(o&&n.compare(o.val,e[r])&&s-o.timestamp<n.duration)})).reduce((function(e,t){return e[t]=o[t],e}),{})}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){console.warn("sdk is not ready, please use this api after start")},e}()),Y=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n=Date.now()+t,r=window.setTimeout((function o(){var i=Date.now()-n;e(),n+=t,r=window.setTimeout(o,Math.max(0,t-i))}),t);return function(){window.clearTimeout(r)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;this.collect=e,t.disable_heartbeat||(this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval(),e=this.collect.Types,this.collect.on(e.SessionReset,(function(){n.process()})))},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Z=function(){function e(){}return e.prototype.apply=function(e,t){var n,r=this;this.collect=e,this.config=t,this.config.channel_domain||(n=e.adapters.fetch,this.fetch=n,t.disable_track_event||t.disable_sdk_monitor||(this.url=e.configManager.getUrl("event"),n=this.collect.Types,this.collect.on(n.Ready,(function(){r.sdkOnload()})),this.collect.on(n.SubmitError,(function(e){var t=e.type,n=e.eventData;e=e.errorCode,"f_data"===t&&r.sdkError(n,e)}))))},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,o=n.app_id,i=n.app_name,s=n.sdk_version,a=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:o,app_name:i||"",sdk_version:s,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC"}),local_time_ms:Date.now()}],user:{user_unique_id:a},header:{}};setTimeout((function(){e.fetch(e.url,[c],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],o=r.user,i=r.header,s=[],a=(e.forEach((function(e){e.events.forEach((function(e){s.push(e)}))})),{events:s.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:i.app_id,app_name:i.app_name||"",error_event:e.event,sdk_version:i.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(i),user:JSON.stringify(o)}),local_time_ms:Date.now()}})),user:{user_unique_id:o.user_unique_id},header:{}});setTimeout((function(){n.fetch(n.url,[a],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e}(),X=function(){function e(){this.verifyReady=!1,this.waitTime=5e3,this.cleanStatus=!1}return e.prototype.apply=function(e,t){var n=this;this.collector=e,this.config=t,t=e.adapters.storage,this.cacheStorgae=new t(!1,"session"),this.eventStorage=[],this.collector.on("submit-verify",(function(e){e&&e.length&&n.eventStore(e[0])})),this.checkCache()},e.prototype.checkCache=function(){var e=this,t=(this.verifyCookieKey="__applog_verify_set_"+this.config.app_id,this.cacheStorgae.getCookie(this.verifyCookieKey),this.cacheStorgae.getItem(this.verifyCookieKey)),n=(this.sign=t&&t.sign||"",this.origin=t&&t.origin||"*",setTimeout((function(){e.cleanVerify(),clearTimeout(n),e.collector.off("submit-verify")}),this.waitTime));window.addEventListener("message",(function(t){t&&t.data&&"simulator:verify"===t.data.type&&(clearTimeout(n),e.receMessage(t))}),!0)},e.prototype.receMessage=function(e){var t;this.cleanStatus||(t=e.data,this.verifyReady=!0,this.sign=t.sign,this.origin=e.origin,this.cacheStorgae.setItem(this.verifyCookieKey,JSON.stringify({sign:t.sign,origin:e.origin})),this.eventStorage.length&&this.postVerify(this.eventStorage,t.sign,e.origin))},e.prototype.eventStore=function(e){this.cleanStatus||(this.verifyReady?this.postVerify(e,this.sign,this.origin):this.eventStorage.push(e))},e.prototype.cleanVerify=function(){this.cleanStatus=!0,this.eventStorage=[]},e.prototype.postVerify=function(e,t,n){try{var r=[],o=(Array.isArray(e)?e.forEach((function(e){r.push(e)})):r.push(e),{type:"simulator:verify:event",sign:t,pageUrl:window.location.href,events:r});(window.opener||window.parent).postMessage(o,n)}catch(e){}},e}(),J={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/tracer.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/visual.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},Q="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,ee=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){var r,o;"sdk"===t?J.hasOwnProperty(n)?(r=J[n].object,o=""+J[n].src[e.channel],e.exist(n,r,o)):console.warn("your "+n+" is not exist，please check plugin name"):"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.exist=function(e,t,n){var r=this;Q[t]?this.process(e,Q[t]):this.loadPlugin(e,n,(function(){r.process(e,Q[t])}),(function(){}))},e.prototype.process=function(e,t,n){try{var r;n?(r=new t).apply&&r.apply(this.collect,this.config):t&&t(this.collect,this.config)}catch(t){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message}),t.message}},e.prototype.loadPlugin=function(e,t,n,r){var o=this;try{var i=document.createElement("script");i.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),i.onerror=function(){r(t)},i.onload=function(){o._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(i)}catch(e){this.collect.emit(v.DEBUGGER_MESSAGE,{type:v.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e}(),te=(W.usePlugin(ee,"extend"),W.usePlugin(X,"verify"),W.usePlugin(t,"et"),W.usePlugin($,"profile"),W.usePlugin(Y,"heartbeat"),W.usePlugin(Z,"monitor"),ee=new W("default")),ne={browserError:1e3,crc32:1e3,preUpload:1001,initUploadID:1002,process:1003,fileMerge:1004,complete:1005},re="video",oe="image",ie="object",se={video:"video_upload",image:"image_upload",object:"object_upload"},ae="vod",ce="imagex";function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=function(){function e(t,n){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.context=n,this.teaLog=te,this.tea_app_id=2562,this.tea_channel="cn",this.options.region){case"us-east-1":case"us-east-red":case"gcp":case"US-TTP":this.tea_app_id=2643,this.tea_channel="va";break;case"boei18n":case"ap-singapore-1":this.tea_app_id=2643,this.tea_channel="sg";break;default:this.tea_app_id=2562,this.tea_channel="cn"}this.teaLog.init({app_id:this.tea_app_id,channel:this.tea_channel,log:!1,disable_sdk_monitor:!0,disable_auto_pv:!0}),this.teaLog.config({evtParams:{sdk_version:"2.0.0-beta.17",line_app_id:this.options.appId},user_unique_id:this.options.userId}),this.teaLog.start()}return function(e,t,n){t&&le(e.prototype,t),n&&le(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"send",value:function(e){var t=this.context,n=e.key,r=(t=t.tasks[n],ne[e.stage]||999),o=(t=e.fileType||t.fileType,e.fileSize||0),i={log_type:se[t],stage:r,fk:n,fs:o,req:e.req,res:e.res,ts:Math.round(Date.now()/1e3),sst:e.stageStartTime,set:e.stageEndTime,dur:e.duration,tdur:e.totalDuration,durs:e.duration/1e3,tdurs:e.totalDuration/1e3},s=(n="error"===(n=e.type)||"retry"===n?n:r,"".concat("image"===t?"image":"video","_")+n);switch(r){case 1e3:this.teaLog.event(s,ue({},i,{type:e.type,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,crc32Array:e.crc32Array,isDirect:e.isDirect})}));break;case 1001:this.teaLog.event(s,ue({},i,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,sig:e.signature,stk:e.proxyStsToken})}));break;case 1002:this.teaLog.event(s,ue({},i,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,upid:e.uploadID})}));break;case 1003:e.isAllFinish||e.isDirect||(delete i.sst,delete i.set,delete i.dur),this.teaLog.event(s,ue({},i,{type:e.type,oid:e.oid,errc:e.extra&&e.extra.errorCode,upload_host:e.tosDomain,af:e.isAllFinish,cst:e.crc32StartTime,cet:e.crc32EndTime,cdur:e.crc32Duration,slst:e.sliceStartTime,slet:e.sliceEndTime,sldurs:e.sliceDuration&&e.sliceDuration/1e3,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,si:e.sliceIndex,af:e.isAllFinish})}));break;case 1004:default:this.teaLog.event(s,ue({},i,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message})}));break;case 1005:this.teaLog.event(s,ue({},i,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,speed:Math.round(o/(e.totalDuration/1e3)/1024),ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,vid:e.uploadResult&&e.uploadResult.Vid})}))}}},{key:"console",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this.options.debug}))}]),e}(),he=(X=n(5),n.n(X)),pe=(t=n(4),n.n(t)),de={urlTemplate:function(e,t){var n;return t=t||{},Object.keys(t).forEach((function(r){n=new RegExp("{".concat(r,"}"),"g"),e=e.replace(n,t[r])})),e},toQueryString:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},supportChunked:function(){var e=window.Blob||window.WebKitBlob;try{var t=e.prototype;return!(!FormData||!(t.slice||t.webkitSlice||t.mozSlice))}catch(e){return!1}},supportXhr:function(){return!!window.FormData||window.ProgressEvent&&window.FileReader},supportCrc32:function(){var e=window.FileReader&&window.FileReader.prototype.readAsBinaryString;return"undefined"!=typeof Int32Array&&e&&(blob.slice||blob.webkitSlice||blob.mozSlice)},storage:function(e){var t=e;e={removeItem:function(e){delete t.cache[e]},setItem:function(e,n){t.cache[e]=n},getItem:function(e){return t.cache[e]},clear:function(){delete t.cache,t.cache={}}};try{if(window.localStorage)return window.localStorage.setItem("",""),window.localStorage}catch(t){return e}return e},noop:function(){},getUnique:function(e){return"".concat(e,"_").concat((new Date).getTime(),"_").concat(parseInt(1e6*Math.random()))},getFileSliceLength:function(e,t){var n=e.size,r=1048576;return t&&"function"==typeof t?t(n)<2097152?2097152:t(n)||n:200*r<n?10*r:n<=200*r&&2*r<=n?5*r:e.size},getFileSuffix:function(e){if(e&&"[object String]"===Object.prototype.toString.call(e)){var t=e.lastIndexOf(".");if(0<t&&(e="."+e.substring(t+1)).length<=8)return e}},fileSlice:function(e,t,n){return(e.slice||e.webkitSlice||e.mozSlice).call(e,t,n)},getPathByURL:function(e){return/^(?:(https?\:)\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/.exec(e)[5]||"/"},crypto:{hmac:function(e,t){return he()(t,e)},sha256:function(e){return pe()(e)}},date:{iso8601:function(e){return(e=void 0===e?de.date.getDate():e).toISOString().replace(/\.\d{3}Z$/,"Z")}},Buffer:Uint8Array},ve=de,ye=function(e,t){for(var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],r=("undefined"!=typeof Int32Array&&(n=new Int32Array(n)),-1^~~t),o=(e=new Uint8Array(e)).length,i=0;i<o;i++)r=n[255&(r^e[i])]^r>>>8;return(-1^r)>>>0},ge=function(e){if(void 0!==e)return function e(t){return t.length<8?e(t="0".concat(t)):t}(Number(e).toString(16))};function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _e=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.successProcess=r,this.failProcess=o,this.sliceLength=n,this.retryTime=0,this.fileSize=t.size,this.crc32Array=[]}return function(e,t,n){t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"start",value:function(){this.readFileCrc32(this.file)}},{key:"readFileCrc32",value:function(e){var t=this,n=this.sliceLength,r=e.slice||e.webkitSlice||e.mozSlice,o=new FileReader,i=0,s=0,a=0;!function c(){s<e.size&&(s=Math.min(i+n,e.size),104857600<e.size&&e.size-s<=5242880&&(s=e.size)),o.readAsArrayBuffer(r.call(e,i,s)),o.onload=function(n){n=n.target.result,a=ye(n,0),t.crc32Array.push({start:i,end:s,crc32:ge(a),buffer:n}),(i=s)<e.size?c():t.success(t.crc32Array)}}()}},{key:"success",value:function(e){this.successProcess(e)}},{key:"fail",value:function(e,t,n,r){3<=this.retryTime?this.failProcess():(this.readFileCrc32(e,t,n,r),this.retryTime++)}}]),e}(),be=1000002,we=1000003,xe=1003e3,Oe="The format of stsToken is incorrect.";function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ce=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t.context,this.key=t.key,this.isDirect=t.isDirect,this.isImageBatchUpload=t.isImageBatchUpload,this.file=t.file,this.type=(this.isImageBatchUpload?this.file[0]:this.file).type||"",this.sliceLength=ve.getFileSliceLength(this.file,n.getSliceFunc),this.config=n}return function(e,t,n){t&&ke(e.prototype,t),n&&ke(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"start",value:function(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.crc32(this.file,this.sliceLength)}},{key:"crc32",value:function(e,t){var n=this;this.isImageBatchUpload?function(){for(var t=e.length,r=[],o=0;o<t;o++)new _e(e[o],e[o].size,(function(e){r.push(e[0]),r.length===t&&n.success(r)}),(function(e){n.fail(e)})).start()}():!e||!e.size||e.size<=0?this.fail({errorCode:we,message:"There is a problem with the input file or fileSize."}):this.isDirect?new _e(e,e.size,(function(e){n.success(e)}),(function(e){n.fail({errorCode:we,message:"get crc32 error: ".concat(e&&e.message)})})).start():this.sliceFile(e,t,(function(e){n.success(e)}),(function(e){n.fail(e)}))}},{key:"sliceFile",value:function(e,t,n,r){for(var o=[],i=t,s=e.size,a=e.slice||e.webkitSlice||e.mozSlice,c=0,u=0,l=0;u<s;)u=Math.min(c+i,s),o.push({start:c,end:u=104857600<s&&s-u<=5242880?s:u,crc32:0}),c=u;try{!function t(i){var c=new FileReader,u=o[i].start,f=o[i].end;c.readAsArrayBuffer(a.call(e,u,f)),c.onload=function(e){e=e.target.result,l=ge(ye(e,0)),o[i].crc32=l,f===s?n(o):t(o.length-1)},c.onerror=function(e){var t=e.target.error.name;e=e.target.error.message,r({crc32Array:o,errorCode:1000003,message:t+": "+e})}}(0)}catch(t){r({message:t&&t.toString()})}}},{key:"getCrc32Key",value:function(e,t){return t="[object Array]"===Object.prototype.toString.call(t)?function(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t):[t],t.push(e[0].crc32,e[e.length-1].crc32),this.config.instanceId&&t.push(this.config.instanceId),t.join("_")}},{key:"success",value:function(e){var t=this.context,n=this.key,r=[],o=[];if(this.isImageBatchUpload)for(var i=0;i<this.file.length;i++)r.push(this.file[i].size),o.push(this.file[i].name);else r=this.file.size,o=this.file.name;var s=this.getCrc32Key(e,r);(t=t.tasks[n])&&this.successProcess(Ee(t,{key:n,crc32Array:e,crc32Key:s,sdkVersion:"2.0.0-beta.17",sliceLength:this.sliceLength,extra:{message:"get crc32 success"},stage:"crc32",type:"success",fileSize:r,fileName:o,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st,isDirect:this.isDirect,isImageBatchUpload:this.isImageBatchUpload}))}},{key:"fail",value:function(e){var t=this.context,n=this.key,r=e&&e.message?e.message:"get crc32 error",o=e&&e.errorCode;e=e&&e.crc32Array,t=Ee(t.tasks[n],{crc32Array:e,extra:{message:r,errorCode:o},type:"error",stage:"crc32",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st}),this.failProcess(t)}}]),e}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=Ae(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=e.call(this)).xhr=new XMLHttpRequest,n._data=null,n}return function(e,t,n){t&&Pe(e.prototype,t),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"_ajax",value:function(e){var t=this,n=this.xhr;n.upload.onprogress=function(e){t.emit("progress",e)},n.onreadystatechange=function(r){4===n.readyState&&(n.upload.onprogress=ve.noop,n.onreadystatechange=ve.noop,n.params=e,t._data&&t._data.url&&(n.currentUrl=t._data.url),200<=n.status&&n.status<300?t.emit("complete",n):400<=n.status&&t.emit("error",n))},n.onerror=function(){n.errText="unknow net error",t.emit("error",n)},n.ontimeout=function(){n.errText="timeout",t.emit("error",n)},n.onabort=function(){n.errText="abort",t.emit("error",n)},n.send(e)}},{key:"send",value:function(e){var t=this;return this._data=e,this.xhr.open(e.method||"POST",e.url||"",!0),e.headers&&Object.keys(e.headers).forEach((function(n){t.xhr.setRequestHeader(n,e.headers[n])})),this.xhr.timeout=e.timeout||0,e.ontimeout&&(this.xhr.ontimeout=e.ontimeout),e.binary?this.sendAsBinary(e):e.custom?"object"===Ie(e.custom)?this.sendAsCustom(JSON.stringify(e.custom)):"none"===e.custom?(delete e.custom,this.sendAsCustom()):this.sendAsCustom(e.custom):this.sendAsFormData(e)}},{key:"sendAsBinary",value:function(e){return this.xhr.setRequestHeader("Content-Type","application/octet-stream"),this.xhr.setRequestHeader("Content-Disposition",'attachment; filename="'.concat(encodeURI(e.filename),'"')),this._ajax(e.file)}},{key:"sendAsFormData",value:function(e){t=(t=e.formData?"function"==typeof e.formData?e.formData():e.formData:t)||[];for(var t,n=new FormData,r=0,o=t.length;r<o;r++){var i=n[r];n.append(i.name,i.value)}return e.file&&n.append(e.field,e.file,e.name),this._ajax(n)}},{key:"sendAsCustom",value:function(e){return this._ajax(e)}},{key:"abort",value:function(){this.xhr.onreadystatechange=ve.noop,this.xhr.abort()}},{key:"getResponse",value:function(){return this.xhr.response}},{key:"getText",value:function(){return this.xhr.responseText}},{key:"getJson",value:function(){return JSON.parse(this.xhr.responseText)}}]),t}(),Re=($=n(1),n.n($)),Me=function(e){return!e||e.SessionToken&&e.SecretAccessKey&&(e.AccessKeyId||e.AccessKeyID)},Be=function(e,t){if(e===re)return ae;if(e===oe)return ce;if(e===ie){if(t.objectConfig&&t.objectConfig.spaceName)return ae;if(t.objectConfig&&t.objectConfig.serviceId)return ce;if(t.videoConfig&&t.videoConfig.spaceName)return ae;if(t.imageConfig&&t.imageConfig.serviceId)return ce}return ae};function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=He(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=e.call(this)).options=n,o.config=r,o.uploaderCtx=n.context,o.currFileCtx=n.context.tasks[n.key],o.systemTimeGap=0,o.retryTime=r.retryTaskTime||2,o.hasRetryTime=0,o.isImageBatchUpload=!!o.options.isImageBatchUpload,o.isDirect=o.options.isDirect,o}return function(e,t,n){t&&Ue(e.prototype,t),n&&Ue(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(e,t,n){this.failProcess=n,this.successProcess=t,this._st=Date.now(),t=(n=this.uploaderCtx._getCache(this.currFileCtx.crc32Key))?JSON.parse(n):{},!this.isDirect&&t.oid&&(t.uploadID||t.UploadID)?this.resumeFromCache(t):this.startPreUpload()}},{key:"startPreUpload",value:function(){var e=this,t=this.config.region,n=new je,r=(n.on("complete",(function(t){if(t.response)try{var n,r,o,i,s,a,c,u,l,f,h,p,d=JSON.parse(t.response);d.ResponseMetadata.Error?e.fail({xhr:t,errorCode:d.ResponseMetadata.Error.CodeN,error:d.ResponseMetadata.Error.Code,message:d.ResponseMetadata.Error.Message}):(n=Be(e.options.type,e.config),r=d.Result,i=(o=n===ce?r.UploadAddress:r.InnerUploadAddress.UploadNodes[0]).StoreInfos,s=o.UploadHosts,a=o.SessionKey,u=void 0===(c=o.UploadHeader)?{}:c,l=n===ce?s[0]:o.UploadHost,f=[],h=[],e.isImageBatchUpload&&1<i.length?i.forEach((function(e){f.push(e.Auth),h.push(e.StoreUri)})):(f=i[0].Auth,h=i[0].StoreUri),p=Fe(e.currFileCtx,{key:e.options.key,useBackupDomain:e.uploaderCtx.useBackupDomain,signature:f,type:"success",extra:{message:"prepare upload success"},stage:"preUpload",oid:h,systemTimeGap:e.systemTimeGap,tosDomain:"".concat(e.config.schema,"://").concat(l),xhr:t,UploadHeader:u,SessionKey:a,UploadID:i[0].UploadID,stageStartTime:e._st,stageEndTime:Date.now(),duration:Date.now()-e._st,totalDuration:Date.now()-e._st+e.currFileCtx.totalDuration}),e.successProcess&&e.successProcess(p))}catch(n){e.fail({error:"catch error: ".concat(n.toString()),xhr:t})}else e.fail({error:"request fail: ".concat(t.statusText||t.errText||"UNKNOWN"),xhr:t})})),n.on("error",(function(t){if((e.options.type===oe&&e.config.imageFallbackHost||e.options.type===re&&e.config.videoFallbackHost)&&!e.uploaderCtx.useBackupDomain)return e.hasRetryTime<e.retryTime-1?e.hasRetryTime++:e.uploaderCtx.useBackupDomain=!0,void e.startPreUpload();var n={error:"request fail: ".concat(t.statusText||t.errText||"UNKNOWN"),xhr:t};!t.response||(t=JSON.parse(t.response)).ResponseMetadata&&t.ResponseMetadata.Error&&(n.errorCode=t.ResponseMetadata.Error.CodeN,n.error=t.ResponseMetadata.Error.Code,n.message=t.ResponseMetadata.Error.Message),e.fail(n)})),""),o={},i=this.uploaderCtx.useBackupDomain,s=Be(this.options.type,this.config),a=(s===ce&&(r=i?this.config.imageFallbackHost:this.config.imageHost,o={Action:"ApplyImageUpload",Version:"2018-08-01"},this.options.type===oe&&(this.config.imageConfig&&this.config.imageConfig.serviceId?o.ServiceId=this.config.imageConfig.serviceId:o.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName),this.options.type===ie&&(o.ServiceId=this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),this.currFileCtx.fileSize&&1<this.currFileCtx.fileSize.length&&(o.UploadNum=this.currFileCtx.fileSize.length),this.options.storeKey&&(a=this.options.storeKey,"[object Array]"===Object.prototype.toString.call(a)?o.StoreKeys=a:"[object String]"===Object.prototype.toString.call(a)&&(o.StoreKeys=[a]))),s===ae&&(a=this.config.videoConfig&&this.config.videoConfig.spaceName,this.options.type===ie&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(a=this.config.objectConfig.spaceName),r=i?this.config.videoFallbackHost:this.config.videoHost,o={Action:"ApplyUploadInner",Version:"2020-11-19",SpaceName:a,FileType:this.options.type,IsInner:1},this.currFileCtx.fileSize&&(o.FileSize=this.currFileCtx.fileSize),this.config.enOID&&(o.EnOID=1),(this.options.testHost||this.config.testHost)&&(o.TestHost=this.options.testHost||this.config.testHost)),this.config.useFileExtension&&this.currFileCtx.fileName&&(this.options.type===ie||this.options.type===oe)&&(i=this.currFileCtx.fileName,(a=ve.getFileSuffix(i))&&(o.FileExtension=a)),this.config.accountId&&(o["X-Account-Id"]=this.config.accountId),this.options.type!==oe&&this.options.type!==ie||!this.config.bizType||(o.BizType=this.config.bizType,o.AppID=this.config.appId,o.UserID=this.config.userId),this.config.openExperiment&&(o.app_id=this.config.appId,o.user_id=this.config.userId),o.s=Math.random().toString(36).substr(2),this.options.fileSize&&(o.FileSize=this.options.fileSize),i=this.currFileCtx.proxyStsToken||this.config.stsToken,ve.toQueryString(o)),c=i.AccessKeyID,u=i.AccessKeyId,l=i.SecretAccessKey,f=i.SessionToken;i=i.CurrentTime,a={method:"GET",url:"".concat(r,"?").concat(a),timeout:this.config.gatewayTimeout||3e4,region:t,params:o,pathname:ve.getPathByURL(r)},t=new Re.a(a,s),this.config.useServerCurrentTime&&6e4<Math.abs(new Date(i)-new Date)&&(this.systemTimeGap=new Date(i)-new Date),o=this.systemTimeGap?new Date((new Date).getTime()+this.systemTimeGap):new Date,t.addAuthorization({accessKeyId:u||c,secretAccessKey:l,sessionToken:f},o),n.send(a)}},{key:"resumeFromCache",value:function(e){var t=this,n=this.options.key,r=new je,o=(r.on("complete",(function(r){try{var o,i,s,a=JSON.parse(r.response);0===a.success&&0<a.payload.partList.length?(o=t.confirmCache(a.payload.partList),i=e.hasMerge?5:o.isAllFinished?4:3,s=Fe(t.currFileCtx,e,{key:n,xhr:r,extra:{message:"prepare upload from cache success"},stage:"preUpload",type:"success",percent:0,cacheTask:i,proxyStsToken:t.options.stsToken,currentTask:1,status:1,isBreak:1,crc32Array:o.crc32Array,stageStartTime:t._st,stageEndTime:Date.now(),duration:Date.now()-t._st,totalDuration:Date.now()-t._st+t.currFileCtx.totalDuration}),t.successProcess&&t.successProcess(s)):t.startPreUpload()}catch(r){t.startPreUpload()}})),r.on("error",(function(e){400<=e.status?t.startPreUpload():t.fail({error:"request error",xhr:e})})),this.config.userId);r.send({method:"get",url:ve.urlTemplate(this.config.getUploadListUrl,{tosDomain:e.tosDomain,oid:e.oid,uploadId:e.uploadID||e.UploadID}),headers:Ne({Authorization:e.signature,"X-Storage-U":encodeURIComponent(o)},e.UploadHeader),timeout:3e4})}},{key:"confirmCache",value:function(e){var t=this.currFileCtx.crc32Array,n={},r=(e.forEach((function(e){void 0===n[e.partNumber-1]&&(n[e.partNumber-1]={tag:!0,crc32:e.crc32})})),!0);return e=t.map((function(e,t){return n[t]&&n[t].tag&&n[t].crc32?(e.crc32=n[t].crc32,e.finished=!0,e.loaded=e.end-e.start):r=!1,e})),{isAllFinished:r,crc32Array:e}}},{key:"fail",value:function(e){var t=e.xhr,n=e.errorCode||1001e3,r="prepare upload error: UNKNOWN";t&&(r=0===t.status?"prepare upload error: NETERROR":e.message||"prepare upload error: ".concat(t.status)),r=Fe(this.currFileCtx,{extra:{message:r,error:e.error,errorCode:n},type:"error",stage:"preUpload",xhr:t,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration}),this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(r)}}]),t}();function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ze(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);return function(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=Ze(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=e.call(this)).options=n,o.config=r,o.transport=new je,o.uploaderCtx=n.context,o.currFileCtx=n.context.tasks[n.key],o.eventInit(),o}return function(e,t,n){t&&$e(e.prototype,t),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"initUpload",value:function(){var e=this.options.context,t=this.options.key,n={oid:e.tasks[t].oid,tosDomain:e.tasks[t].tosDomain},r=(n=ve.urlTemplate(this.config.initUploadFileUrl,n),this.config.userId);this.transport.send({method:"post",url:n,headers:We({Authorization:e.tasks[t].signature,"X-Storage-U":encodeURIComponent(r)},this.currFileCtx.UploadHeader),timeout:3e4})}},{key:"start",value:function(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.initUpload()}},{key:"eventInit",value:function(){var e=this;this.transport.on("complete",(function(t){try{var n,r=JSON.parse(t.response),o=r.payload.uploadID;0===r.success&&o?(n=Ke(e.currFileCtx,{UploadID:o,percent:0,type:"success",extra:{message:"init upload id success"},stage:"initUploadID",xhr:t,stageStartTime:e._st,stageEndTime:Date.now(),duration:Date.now()-e._st,totalDuration:Date.now()-e._st+e.currFileCtx.totalDuration}),e.successProcess(n)):e.fail({error:"fail! res.success: ".concat(r.success,", uploadId:").concat(o),xhr:t})}catch(n){e.fail({error:"catch error: ".concat(JSON.stringify(n)),xhr:t})}})),this.transport.on("error",(function(t){e.fail({error:"request fail: ".concat(t.statusText||t.errText||"UNKNOWN"),xhr:t})}))}},{key:"fail",value:function(e){var t=this.options.context,n=this.options.key;t=Ke(t.tasks[n],{extra:{message:"init upload id error, ".concat(e.error),errorCode:1002e3},type:"error",stage:"initUploadID",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration}),this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(t)}}]),t}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);return function(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=rt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r,o=n.sliceItem,i=n.crc32,s=n.url,a=n.signature,c=n.uploadHeader,u=n.userId,l=n.retryTime,f=n.timeout;return n=void 0===(n=n.method)?"put":n,function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this)).fileSlice=o,r.crc32=i,r.uploadUrl=s,r.uploadHeader=c,r.signature=a,r.userId=u,r.retryTime=l||0,r.method=n,r.retryCount=0,r.timeout=f||18e5,r.ready=!1,r.cancel=!1,r.transport=new je,r.eventInit(),r}return function(e,t,n){t&&tt(e.prototype,t),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"upload",value:function(e,t){this.isParamsValid()&&(this._st=Date.now(),this.transport&&this.transport.send({method:this.method,url:this.uploadUrl,headers:et({Authorization:this.signature,"Content-CRC32":this.crc32,"X-Storage-U":encodeURIComponent(this.userId)},this.uploadHeader),file:this.fileSlice,binary:1,timeout:this.timeout}),e&&this.emit("retry",t))}},{key:"isParamsValid",value:function(){return this.fileSlice&&(this.fileSlice.size||this.fileSlice.byteLength)?this.crc32?!!this.uploadUrl||(this.emit("error",{message:"slice upload failed: NOURL",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCRC32",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCONTENT",crc32:this.crc32}),!1)}},{key:"eventInit",value:function(){var e=this;this.transport.on("complete",(function(t){e.success(t)})),this.transport.on("error",(function(t){e.fail(t)})),this.transport.on("progress",(function(t){e.process(t)}))}},{key:"success",value:function(e){this.ready=!0;var t=Date.now()-this._st,n=this.fileSlice.size||this.fileSlice.byteLength;this.emit("complete",{crc32:this.crc32,size:n,speed:n/t,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st})}},{key:"fail",value:function(e){var t=this;if(!this.cancel){var n={crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st};if(e&&401===e.status)this.emit("error",et({message:"slice upload failed: UNAUTHORIZED"},n));else{var r="slice upload failed: UNKNOWN";if(e&&(r=e.status?"slice upload failed: ".concat(e.status):"slice upload failed: NETERROR"),this.retryCount<this.retryTime)return setTimeout((function(){t.upload(!0,et({message:r},n))}),1e3),void this.retryCount++;this.emit("error",et({message:r},n))}}}},{key:"process",value:function(e){this.cancel||this.emit("progress",{crc32:this.crc32,loaded:e.loaded||0,total:e.total||0})}},{key:"abort",value:function(){this.transport&&(this.cancel=!0,this.transport.abort())}},{key:"destroy",value:function(){this.transport=null}}]),t}(),it=(Y=n(2),n.n(Y));function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ft(e);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=ft(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this)).file=n.file,r.context=n.context,r.key=n.key,r.config=o,r.finishArr=[],r.errorLength=0,r.finishSize=0,r.retryUploadTime=Number(o.retryUploadTime)||2,r.progressMonitorTime=Number(o.progressMonitorTime)||10,r.progressMonitorSpeed=Number(o.progressMonitorSpeed)||50,r.uploadSliceCount=Number(o.uploadSliceCount)||3,r.realtimeSpeedInterval=Number(o.realtimeSpeedInterval)||5,r.processRetry=0,r.lastFinishSize=-1,r.lastProcessPercent=-1,r.lastIntervalSize=-1,r.lastCalculateSpeedTime=-1,r.lastCalculateSpeedSize=0,r.uploadHandlers={},r}return function(e,t,n){t&&ut(e.prototype,t),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(e,t,n){this.failProcess=n,this.successProcess=t,this.errorLength=0,this.currentCtx=this.context.tasks[this.key],this.crc32Array=this.context.tasks[this.key].crc32Array,this.uploadSliceCount=this.uploadSliceCount>this.crc32Array.length?this.crc32Array.length:this.uploadSliceCount,this.lastIndex=0,this.uploading=[],this._uploadSize=this.crc32Array.reduce((function(e,t){return e+(t.finished?0:t.end-t.start)}),0),this._st=Date.now(),this._lastSaveTime=Date.now(),this.lastCalculateSpeedTime=this._st,this.initWorker(),this.setProgressMonitor(),this.threadUpload()}},{key:"initWorker",value:function(){var e,t=this;this.worker||(e=this.crc32Array,this.worker=new it.a,this.worker.onmessage=function(n){n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.data,4);var r=n[0],o=n[1],i=n[2],s=(n=n[3],(new Date).getTime()),a=e[i];a.crc32=o,a.crc32StartTime=n,a.crc32EndTime=s,a.crc32Duration=s-n,t.upload(a,r,i)})}},{key:"read",value:function(e,t){var n=this,r=this.file,o=r.slice||r.webkitSlice||r.mozSlice,i=new FileReader;i.onload=function(e){var r=(new Date).getTime();n.worker.postMessage([e.target.result,t,r],[e.target.result])},i.onerror=function(){n.stop(),n.fail({extra:{message:"An error occurred reading the file",errorCode:1003003}})},i.readAsArrayBuffer(o.call(r,e.start,e.end))}},{key:"threadUpload",value:function(){if(this.uploading.length<this.uploadSliceCount){var e=this.lastIndex,t=this.crc32Array[e];if(t){if(t.finished){if(-1===this.finishArr.indexOf(t.start)&&(this.finishArr.push(t.start),this.finishArr.length>=this.crc32Array.length))return this.stop(),void this.success()}else t.loaded=0,this.uploading.push(e),this.read(t,e);this.lastIndex++,this.threadUpload()}}}},{key:"stop",value:function(){var e=this;Object.keys(this.uploadHandlers).forEach((function(t){e.uploadHandlers[t].abort(),e.uploadHandlers[t].destroy()})),this.uploadHandlers={},this.worker&&this.worker.terminate(),this.worker=null,this.clearMonitor()}},{key:"setProgressMonitor",value:function(){var e=this;this.progressMonitorInterval=setInterval((function(){var t,n=e.finishSize;n-e.lastIntervalSize<e.progressMonitorTime*e.progressMonitorSpeed*1024?(t=at(e.currentCtx,{stage:"process",type:"warn",extra:{message:"percent are not updated in ".concat(e.progressMonitorTime," seconds")}}),e.context.logger.send(t),e.context._broadcast("slowProgress",t),e.clearMonitor()):e.lastIntervalSize=n}),1e3*this.progressMonitorTime)}},{key:"clearMonitor",value:function(){this.progressMonitorInterval&&clearInterval(this.progressMonitorInterval)}},{key:"upload",value:function(e,t,n){var r=this,o=e.crc32,i=(this.context._saveTask(this.key,{crc32Array:this.crc32Array}),{number:n+1,uploadId:this.currentCtx.UploadID||this.currentCtx.uploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain}),s=(i=ve.urlTemplate(this.config.uploadChunkedUrl,i),this.config.userId),a=this.config.uploadHttpMethod||"put",c=this.config.uploadTimeout;(o=new ot({sliceItem:ve.fileSlice(this.file,e.start,e.end),crc32:o,url:i,signature:this.currentCtx.signature,uploadHeader:this.currentCtx.UploadHeader,userId:s,method:a,retryTime:this.retryUploadTime,timeout:c})).on("complete",(function(t){1===r.currentCtx.status&&(t.start=e.start,t.crc32StartTime=e.crc32StartTime,t.crc32EndTime=e.crc32EndTime,t.crc32Duration=e.crc32Duration,t.index=n,r.fileSliceSuccess(t))})),o.on("error",(function(t){1===r.currentCtx.status&&(t.start=e.start,t.crc32StartTime=e.crc32StartTime,t.crc32EndTime=e.crc32EndTime,t.crc32Duration=e.crc32Duration,t.index=n,r.fail(t))})),o.on("progress",(function(t){1===r.currentCtx.status&&(t.start=e.start,t.index=n,r.process(t))})),o.on("retry",(function(t){1===r.currentCtx.status&&(t.start=e.start,t.index=n,r.retry(t))})),o.upload(),this.uploadHandlers[n]=o}},{key:"success",value:function(e){this.finishArr=[];var t=Date.now()-this._st;t=this._uploadSize/t,t=at(this.currentCtx,{type:"success",stage:"process",percent:100,extra:{message:"upload all success"},speed:t,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._lastSaveTime+this.currentCtx.totalDuration,isAllFinish:!0}),this.worker&&this.worker.terminate(),this.successProcess(t)}},{key:"fail",value:function(e){var t=this.errorFormat(e);t.type="error",void 0!==e.statusCode&&at(this.currentCtx,{statusCode:e.statusCode}),this.errorLength||(this.context.logger.send(at({},t)),this.stop(),this.context._broadcast("error",t),this.currentCtx.isBreak?this.context._cancel(this.key):this.context._pause(this.key),this.errorLength++)}},{key:"retry",value:function(e){e=this.errorFormat(e),this.context.logger.send(at({},e,{type:"retry"}))}},{key:"fileSliceSuccess",value:function(e){var t,n=e.index,r=Date.now(),o=(-1===this.finishArr.indexOf(e.start)&&this.finishArr.push(e.start),this.crc32Array[n].finished=!0,this.crc32Array[n].speed=e.speed,{message:"slice upload success"});if(e.xhr&&(t=e.xhr,o.currentUrl=t.currentUrl||"",at(this.currentCtx,{req:{url:t.currentUrl,param:t.params},res:{status:t.status,body:t.responseText,header:t.getAllResponseHeaders()}}),delete e.xhr),this.context.logger.send(at(this.currentCtx,{stage:"process",type:"success",sliceIndex:n,extra:o,totalDuration:r-this._lastSaveTime+this.currentCtx.totalDuration,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration})),this._lastSaveTime=r,this.context._saveTask(this.key),this.uploading.splice(this.uploading.indexOf(n),1),this.uploadHandlers[n]&&delete this.uploadHandlers[n],this.finishArr.length>=this.crc32Array.length)return this.stop(),void this.success(e.xhr);this.threadUpload()}},{key:"getFinishSize",value:function(e,t){var n=t.crc32,r=0;return e.forEach((function(e){e.crc32===n?(e.loaded=t.loaded,r+=t.loaded):(e.loaded||(e.loaded=0),r+=e.loaded)})),r}},{key:"process",value:function(e){var t=this.currentCtx.realtimeSpeed||0,n=this.currentCtx.fileSize,r=(this.finishSize=this.getFinishSize(this.crc32Array,e),this.finishSize>this.lastFinishSize&&((e=new Date).getTime()-this.lastCalculateSpeedTime>1e3*this.realtimeSpeedInterval&&(o=e.getTime()-this.lastCalculateSpeedTime,r=this.finishSize-this.lastCalculateSpeedSize,t=Math.floor(r/o),this.lastCalculateSpeedTime=e.getTime(),this.lastCalculateSpeedSize=this.finishSize),this.lastFinishSize=this.finishSize),Math.floor(this.finishSize/n*100*100)/100||0),o=at(this.currentCtx,{stage:"process",percent:r,realtimeSpeed:t});r>this.lastProcessPercent&&100!==r&&(this.lastProcessPercent=r,this.context._broadcast("progress",o))}},{key:"errorFormat",value:function(e){var t=this.currentCtx.totalDuration,n=Date.now()-this._st,r=e.index,o=((o=e.crc32?{message:e.message,data:e.crc32,size:e.size}:e.extra).errorCode=o.errorCode||xe,at(this.currentCtx,{extra:o,sliceIndex:r,stage:"process",req:{},res:{},totalDuration:n+t,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration}));return e.xhr&&(r=e.xhr,o.req={url:e.xhr.currentUrl},o.res={status:r.status,body:r.responseText,header:r.getAllResponseHeaders()},delete e.xhr),o}}]),t}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);return function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=_t(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=e.call(this)).options=n,o.config=r,o.transport=new je,o.eventInit(),o.errorCount=0,o.uploaderCtx=n.context,o.currFileCtx=n.context.tasks[n.key],o}return function(e,t,n){t&&gt(e.prototype,t),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"mergeFile",value:function(){for(var e={oid:this.currFileCtx.oid,uploadId:this.currFileCtx.UploadID||this.currFileCtx.uploadID,tosDomain:this.currFileCtx.tosDomain},t=this.currFileCtx.crc32Array,n="",r=0;r<t.length;r++)n=(n?"".concat(n,","):"").concat(r+1,":").concat(t[r].crc32);e=ve.urlTemplate(this.config.uploadMergeUrl,e);var o=this.config.userId;this.transport.send({method:"post",url:e,headers:yt({Authorization:this.currFileCtx.signature,"X-Storage-U":encodeURIComponent(o)},this.currFileCtx.UploadHeader),custom:n})}},{key:"start",value:function(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.mergeFile()}},{key:"eventInit",value:function(){var e=this,t=this.options.stage;this.transport.on("complete",(function(n){try{var r=JSON.parse(n.response);0===r.success&&r.payload.key?(dt(e.currFileCtx,{stage:t,type:"success",hasMerge:!0,extra:{message:"merge file success"},xhr:n,stageStartTime:e._st,stageEndTime:Date.now(),duration:Date.now()-e._st,totalDuration:Date.now()-e._st+e.currFileCtx.totalDuration}),e.successProcess(e.currFileCtx)):e.fail({error:"fail! result.success:".concat(r.success),xhr:n})}catch(r){e.fail({error:"response parse error: ".concat(JSON.stringify(r)),xhr:n})}})),this.transport.on("error",(function(t){e.fail({error:"request fail: ".concat(t.statusText||t.errText),xhr:t})}))}},{key:"getProcessIndex",value:function(e){var t=0;return e.forEach((function(e,n){"process"===e.stage&&(t=n)})),t}},{key:"fail",value:function(e){e=dt(this.currFileCtx,{extra:{message:"merge file error, ".concat(e.error),errorCode:1004e3},type:"error",stage:this.options.stage,xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration}),this.failProcess(e)}}]),t}();function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St(e);return function(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=St(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this)).options=n,r.file=n.file,r.context=n.context,r.key=n.key,r.config=o,r.finishArr=[],r.errorLength=0,r.finishSize=0,r.retryUploadTime=0,r.processRetry=0,r.lastFinishSize=-1,r.lastProcessPercent=-1,r.lastIntervalSize=-1,r}return function(e,t,n){t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(e,t,n){this.failProcess=n,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.crc32Array=this.context.tasks[this.key].crc32Array,this._uploadSize=this.file.size,this._st=Date.now(),this.upload()}},{key:"stop",value:function(){this.uploader&&(this.uploader.abort(),this.uploader.destroy())}},{key:"upload",value:function(){for(var e=this,t=this.crc32Array.length,n=0,r=0,o=0;o<t;o++){var i=(s=this.crc32Array[o]).buffer,s=s.crc32,a=this.currentCtx.oid,c=this.currentCtx.signature,u=(a={oid:"[object Array]"===Object.prototype.toString.call(a)?a[o]:a,tosDomain:this.currentCtx.tosDomain},a=ve.urlTemplate(this.config.directUploadFileUrl,a),this.config.userId),l=this.config.uploadHttpMethod||"put",f=this.config.uploadTimeout;(i=new ot({sliceItem:i,crc32:s,url:a,signature:"[object Array]"===Object.prototype.toString.call(c)?c[o]:c,uploadHeader:this.currentCtx.UploadHeader,userId:u,retryTime:this.retryUploadTime,method:l,timeout:f})).on("complete",(function(o){r+ ++n===t&&e.success(o.xhr)})),i.on("error",(function(n){++r===t&&e.fail(n.xhr)})),i.on("progress",(function(t){e.process(t)})),i.upload(),this.uploader=i}}},{key:"success",value:function(e){this.finishArr=[];var t=Date.now()-this._st;t=this._uploadSize/t,t=xt(this.currentCtx,{type:"success",stage:"process",percent:100,extra:{message:"direct upload success"},speed:t,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration}),this.successProcess(t)}},{key:"fail",value:function(e){e=xt(this.currentCtx,{extra:{message:"direct upload error: ".concat(e.errText),errorCode:xe},type:"error",stage:"process",xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration}),this.failProcess(e)}},{key:"process",value:function(e){var t=this.currentCtx.fileSize;this.finishSize=e.loaded,this.finishSize>this.lastFinishSize&&(this.lastFinishSize=this.finishSize),e=Math.floor(this.finishSize/t*100*100)/100||0,t=xt(this.currentCtx,{stage:"process",percent:e}),e>this.lastProcessPercent&&100!==e&&(this.lastProcessPercent=e,this.context._broadcast("progress",t))}}]),t}();function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(){return(It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);return function(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=At(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this)).options=n,r.file=n.file,r.context=n.context,r.key=n.key,r.config=o,r.errorLength=0,r.retryUploadTime=Number(o.retryUploadTime)||2,r.maxUploadSliceCount=Number(o.uploadSliceCount)||5,r.uploadQueue=[],r.crc32Array=[],r.uploadSliceCount=0,r.isCalcCrc32=!1,r.isFileReading=!1,r.hasStarted=!1,r.hasCompleteUpload=!1,r}return function(e,t,n){t&&Pt(e.prototype,t),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(e,t,n){this.failProcess=n,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.hasStarted=!0,this._st=Date.now(),this.initWorker()}},{key:"initWorker",value:function(){var e=this;this.worker||(this.worker=new it.a,this.worker.onmessage=function(t){e.isCalcCrc32=!1;var n=t.data[0],r=t.data[2],o=t.data[1];e.uploadQueue.forEach((function(t,i){t.index===r&&(e.uploadQueue[i].crc32=o,e.uploadQueue[i].fileSliceBuffer=n,e.crc32Array[r]={crc32:o})})),e.startUploadQueue()},this.startUploadQueue())}},{key:"addStreamSlice",value:function(e){var t=this,n=e.fileSlice,r=e.index;(this.isFileReading=!0,e=new FileReader).readAsArrayBuffer(n),e.onload=function(e){t.isFileReading=!1,e=e.target.result,t.uploadQueue.push({fileSliceBuffer:e,index:r}),t.hasStarted&&t.startUploadQueue()}}},{key:"completeStreamUpload",value:function(){this.hasCompleteUpload=!0,0!==this.uploadQueue.length||this.isFileReading||this.success()}},{key:"startUploadQueue",value:function(){var e;this.uploadSliceCount<=this.maxUploadSliceCount&&0<this.uploadQueue.length&&this.uploadQueue[0].crc32?(e=this.uploadQueue.shift(),this.uploadSliceCount++,this.upload({sliceItem:e.fileSliceBuffer,index:e.index,crc32:e.crc32})):0<this.uploadQueue.length&&!this.uploadQueue[0].crc32&&this.startCrc32Queue()}},{key:"startCrc32Queue",value:function(){if(!this.isCalcCrc32)for(var e=0;e<this.uploadQueue.length;e++){var t=this.uploadQueue[e];if(!t.crc32){this.isCalcCrc32=!0,this.worker.postMessage([t.fileSliceBuffer,t.index],[t.fileSliceBuffer]);break}}}},{key:"upload",value:function(e){var t=this,n=e.sliceItem,r=e.index,o=(e=e.crc32,this.currentCtx.signature),i={number:r+1,uploadId:this.currentCtx.UploadID||this.currentCtx.uploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain},s=(i=ve.urlTemplate(this.config.uploadChunkedUrl,i),this.config.userId);(n=new ot({sliceItem:n,crc32:e,url:i,signature:o,uploadHeader:this.currentCtx.UploadHeader,userId:s,retryTime:this.retryUploadTime,method:"put",timeout:this.config.uploadTimeout})).on("complete",(function(e){1===t.currentCtx.status&&(e.index=r,t.fileSliceSuccess(e))})),n.on("error",(function(e){1===t.currentCtx.status&&(e.index=r,t.fail(e))})),n.upload()}},{key:"fileSliceSuccess",value:function(e){var t=e.index,n=Date.now(),r={message:"stream slice upload success"},o=(e.xhr&&(o=e.xhr,r.currentUrl=o.currentUrl||"",It(this.currentCtx,{req:{url:o.currentUrl,param:o.params},res:{status:o.status,body:o.responseText,header:o.getAllResponseHeaders()}}),delete e.xhr),this.context.logger.send(It(this.currentCtx,{stage:"process",type:"success",sliceIndex:t,extra:r,totalDuration:n-this._lastSaveTime+this.currentCtx.totalDuration})),It(this.currentCtx,{uploadQueueLength:this.uploadQueue.length,sliceIndex:t}));this.context._broadcast("stream-progress",o),this.uploadSliceCount--,this.hasCompleteUpload&&0===this.uploadQueue.length?this.success(e.xhr):this.startUploadQueue()}},{key:"success",value:function(e){this.isAllSuccess||(e=It(this.currentCtx,{type:"success",stage:"process",percent:100,extra:{message:"all slice upload success"},crc32Array:this.crc32Array,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration}),this.successProcess(e))}},{key:"fail",value:function(e){var t=e.index;e=It(this.currentCtx,{extra:{message:"stream slice upload error"},type:"error",stage:"process",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration,sliceIndex:t}),this.context.logger.send(It({},e)),this.context._broadcast("error",e)}}]),t}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ut=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);return function(e,t){if(t&&("object"===Rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=Ft(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=e.call(this)).options=n,o.config=r,o.uploaderCtx=n.context,o.currFileCtx=n.context.tasks[n.key],o.isImageBatchUpload=!!o.options.isImageBatchUpload,o.transport=new je,o.eventInit(),o}return function(e,t,n){t&&Lt(e.prototype,t),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"commitUpload",value:function(){var e,t,n=this.options.key,r=(n=this.options.context.tasks[n],this.config.region),o="",i={},s=this.uploaderCtx.useBackupDomain,a=Be(this.options.type,this.config),c=(a===ce&&(o=s?this.config.imageFallbackHost:this.config.imageHost,i={Action:"CommitImageUpload",Version:"2018-08-01"},t={SessionKey:n.SessionKey},this.options.type===oe&&(this.config.imageConfig&&this.config.imageConfig.serviceId?i.ServiceId=this.config.imageConfig.serviceId:i.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName,e=this.config.imageConfig&&this.config.imageConfig.processAction,Array.isArray(e)&&0<e.length&&(t.Functions=e),this.config.skipMeta&&(i.SkipMeta=!0)),this.options.type===ie&&(i.ServiceId=this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),e=JSON.stringify(t)),a===ae&&(c=this.config.videoConfig&&this.config.videoConfig.spaceName,this.options.type===ie&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(c=this.config.objectConfig.spaceName),o=s?this.config.videoFallbackHost:this.config.videoHost,i={Action:"CommitUploadInner",Version:"2020-11-19",SpaceName:c},t={SessionKey:n.SessionKey,Functions:[]},s=this.config.videoConfig&&this.config.videoConfig.processAction,this.options.type===ie&&this.config.objectConfig&&this.config.objectConfig.processAction&&(s=this.config.objectConfig.processAction),Array.isArray(s)&&0<s.length&&(t.Functions=s),(this.config.videoConfig&&this.config.videoConfig.callbackArgs||this.options.callbackArgs)&&(t.CallbackArgs=this.options.callbackArgs||this.config.videoConfig.callbackArgs),this.options.type===re&&this.config.skipDownload&&(i.SkipDownload=!0),this.options.type===ie&&this.options.objectSync&&(t.ObjectSync=this.options.objectSync),this.options.type===re&&this.options.needExactFormat&&(t.needExactFormat=this.options.needExactFormat),e=JSON.stringify(t)),this.config.accountId&&(i["X-Account-Id"]=this.config.accountId),ve.toQueryString(i)),u=(s=this.currFileCtx.proxyStsToken||this.config.stsToken).AccessKeyID,l=s.AccessKeyId,f=s.SecretAccessKey;s=s.SessionToken,(c={method:"POST",url:"".concat(o,"?").concat(c),timeout:this.config.gatewayTimeout||3e4,region:r,params:i,headers:{},pathname:ve.getPathByURL(o)}).custom=e,c.body=t,a===ce&&(c.headers["Content-Type"]="application/json"),r=new Re.a(c,a),o=(i=n.systemTimeGap)?new Date((new Date).getTime()+i):new Date,r.addAuthorization({accessKeyId:l||u,secretAccessKey:f,sessionToken:s},o),this.transport.send(c)}},{key:"start",value:function(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now();try{this.commitUpload()}catch(e){this.fail({error:"catch error: ".concat(e.toString())})}}},{key:"eventInit",value:function(){var e=this;this.transport.on("complete",(function(t){try{var n,r,o,i,s,a,c=JSON.parse(t.response);c.ResponseMetadata.Error?e.fail({xhr:t,errorCode:c.ResponseMetadata.Error.CodeN,error:c.ResponseMetadata.Error.Code,message:c.ResponseMetadata.Error.Message}):(n=Be(e.options.type,e.config),r=c.Result,o={},n===ce?e.isImageBatchUpload?(i=r.Results,s=r.PluginResult||[],i.forEach((function(e,t){i[t]=Dt(Dt({},i[t]),s[t])})),o=i):Mt(o=r.Results[0],r.PluginResult&&r.PluginResult[0]):o=r.Results[0],a=Mt(e.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful"},uploadResult:o,xhr:t,stageStartTime:e._st,stageEndTime:Date.now(),duration:Date.now()-e._st,totalDuration:Date.now()-e._st+e.currFileCtx.totalDuration}),e.successProcess&&e.successProcess(a))}catch(n){e.fail({error:"catch error: ".concat(n.toString()),xhr:t})}})),this.transport.on("error",(function(t){var n={error:"request fail: ".concat(t.statusText||t.errText||"UNKNOWN"),xhr:t};!t.response||(t=JSON.parse(t.response)).ResponseMetadata&&t.ResponseMetadata.Error&&(n.errorCode=t.ResponseMetadata.Error.CodeN,n.error=t.ResponseMetadata.Error.Code,n.message=t.ResponseMetadata.Error.Message),e.fail(n)}))}},{key:"fail",value:function(e){var t=this.options.context,n=this.options.key,r=e.xhr,o=e.errorCode||1005e3,i="prepare upload error: UNKNOWN";r&&(i=0===r.status?"prepare upload error: NETERROR":e.message||"prepare upload error: ".concat(r.status)),t=Mt(t.tasks[n],{extra:{message:i,error:e.error,errorCode:o},type:"error",stage:"complete",xhr:r,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration}),this.failProcess(t)}}]),t}();function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);return function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=Kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0,s=3<arguments.length?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this,n)).tasks=n,r.config=o,r.key=s,r.uploaderCtx=i,r.current=0,r.length=r.tasks.length,r.taskError={},r.uploadList=[],r.retryTaskTime=o.retryTaskTime||2,r}return function(e,t,n){t&&Vt(e.prototype,t),n&&Vt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(){var e=this.tasks.shift();e&&(this.current=e.index,this.execTask(e))}},{key:"execTask",value:function(e){var t,n,r=this,o=e.key,i=this.uploaderCtx,s=i.tasks[o];s&&(t=s.cacheTask,n=i.taskList[o].length,t&&0<e.index&&e.index<t?this.start():(s.currentTask=e.index,1===s.status&&e&&e.func.call(e.context,e.arg,(function(t){var s;i.taskList[o]&&((s=i.taskList[o][e.index+1])&&0!==e.index?i._saveTask(o,{currentTask:s.index,stage:s.stage}):e.index===n-1&&i._removeTaskCache(o),0<r.tasks.length?r.start():i._queueSuccess(o),r.success(t))}),(function(t){var n;t.xhr&&400<=t.xhr.status?r.fail(t):!r.taskError[o]||r.taskError[o]<r.retryTaskTime?(r.taskError[o]?r.taskError[o]++:r.taskError[o]=1,n=r.errorFormat(t,!0),r.uploaderCtx.logger.send(n),r.execTask(e)):(t.key=o,r.fail(t))}))))}},{key:"addTask",value:function(e){this.tasks.push(e)}},{key:"success",value:function(e){var t;e.xhr&&(t=e.xhr,e.req={url:t.currentUrl,param:t.params},e.res={status:t.status,header:t.getAllResponseHeaders(),body:t.responseText},delete e.xhr),Ht(e,{type:"success"});try{this.uploaderCtx._broadcast(e.stage,e)}catch(e){console.error(e)}this.uploaderCtx.logger.send(e)}},{key:"fail",value:function(e){var t=this.uploaderCtx,n=e.key;e=this.errorFormat(e);try{t._broadcast("error",e)}catch(e){}t.tasks[n].isBreak?t._cancel(n):t._pause(n),t.logger.send(e)}},{key:"cancel",value:function(e){var t,n;e||(e=this.key,t=this.uploaderCtx.tasks[e].currentTask,this.uploaderCtx.taskList[e].forEach((function(e){t===e.index&&(n=e)})),this.tasks=[],n&&3===n.index&&n.context.stop(),this.uploaderCtx._removeTaskCache(e))}},{key:"restart",value:function(){this.uploadList.forEach((function(e){e.cancel=!1})),this.start()}},{key:"errorFormat",value:function(e,t){var n;return t={type:t?"retry":"error"},e.xhr&&(n=e.xhr,e.req={url:n.currentUrl,param:n.params},e.res={status:n.status,header:n.getAllResponseHeaders(),body:n.responseText},e.extra&&(e.extra.req=e.req,e.extra.res=e.res),delete e.xhr),Ht(e,t)}}]),t}();function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(t,r.a);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jt(e);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}(this,t?(n=Jt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this,n)).config=$t({},o),r._mergeOptions(r.config,n),r.tasks={},r.taskList={},r.cache={},r.storage=ve.storage(Xt(r)),r.logger=r.config.noLog?{send:function(){}}:new fe(r.config,Xt(r)),r}return function(e,t,n){t&&Yt(e.prototype,t),n&&Yt(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"_mergeOptions",value:function(e,t){t&&"object"===Wt(t)&&($t(e,t),Object.keys(t).forEach((function(n){"vodDomain"===n&&(e.replace[n]=t[n])})))}},{key:"_setCache",value:function(e,t){this.storage.setItem(e,t)}},{key:"_getCache",value:function(e){return this.storage.getItem(e)}},{key:"_removeCache",value:function(e){e?this.storage.removeItem(e):this.storage.clear()}},{key:"_addTask",value:function(e,t){var n=this.tasks,r=this.taskList;n[e]&&n[e].task?r[e].push(t):(r[e]=[],r[e].push(t),n[e]=n[e]||{},n[e].task=new zt([],this.config,this,e)),n[e].task.addTask(t)}},{key:"_broadcast",value:function(e,t){var n=this.tasks[t.key].status;if(1===n||0===n)try{this.emit(e,t)}catch(e){if(!(n=!("[object Error]"!==Object.prototype.toString.call(e)))||"Error"===e.name)throw e}}},{key:"_addCrc32ProcessTask",value:function(e,t){var n=(r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).isDirect,r=r.isImageBatchUpload;n={context:e=new Ce({file:e.file,context:this,key:t,isDirect:n,isImageBatchUpload:void 0!==r&&r},this.config),func:e.start,arg:{},key:t,index:0,stage:"crc32"},this._addTask(t,n)}},{key:"_addPreUploadTask",value:function(e,t){var n=(r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).isDirect,r=r.isImageBatchUpload;n={file:e.file,stsToken:e.stsToken,context:this,type:e.type||re,preUploadUriParams:e.preUploadUriParams||{},storeKey:e.storeKey,testHost:e.testHost,key:t,isDirect:n,isImageBatchUpload:void 0!==r&&r,fileSize:e.fileSize},e={context:r=new Ve(n,this.config),func:r.start,arg:{},key:t,index:1,stage:"preUpload"},this._addTask(t,e)}},{key:"_addDirectUploadTask",value:function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).isImageBatchUpload;n={context:e=new kt({file:e.file,context:this,key:t,isImageBatchUpload:void 0!==n&&n},this.config),func:e.start,arg:{},key:t,index:3,stage:"process"},this._addTask(t,n)}},{key:"_addInitUploadIDTask",value:function(e,t){e={context:e=new Xe({file:e.file,context:this,key:t},this.config),func:e.start,arg:{},key:t,index:2,stage:"initUploadID"},this._addTask(t,e)}},{key:"_addUploadProcessTask",value:function(e,t){e={context:e=new ht({file:e.file,context:this,key:t},this.config),func:e.start,arg:{},key:t,index:3,stage:"process"},this._addTask(t,e)}},{key:"_addStreamUploadTask",value:function(e,t){this.streamUploadTask=new jt({context:this,key:t},this.config);var n={context:this.streamUploadTask,func:this.streamUploadTask.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,n)}},{key:"_mergeFileTask",value:function(e,t){e={context:e=new bt({file:e.file,context:this,stage:"fileMerge",key:t},this.config),func:e.start,arg:{},key:t,index:4,stage:"fileMerge"},this._addTask(t,e)}},{key:"_getMetaInfoTask",value:function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).isImageBatchUpload;e={file:e.file,context:this,data:e.data,type:e.type||re,callbackArgs:e.callbackArgs,objectSync:e.objectSync,needExactFormat:e.needExactFormat,key:t,isImageBatchUpload:void 0!==n&&n},e={context:n=new Ut(e,this.config),func:n.start,arg:{},key:t,index:5,stage:"complete"},this._addTask(t,e)}},{key:"_addAllUploadProcess",value:function(e,t){var n=e.type===oe&&"[object Array]"===Object.prototype.toString.call(e.file),r=(this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||re,this.tasks[t].fileSize=e.file&&e.file.size,this.tasks[t].proxyStsToken=e.stsToken,e.file.size<=ve.getFileSliceLength(e.file)||n);e.useDirectUpload&&(r=!0),this._addCrc32ProcessTask(e,t,{isDirect:r,isImageBatchUpload:n}),this._addPreUploadTask(e,t,{isDirect:r,isImageBatchUpload:n}),r?this._addDirectUploadTask(e,t,{isImageBatchUpload:n}):(this._addInitUploadIDTask(e,t),this._addUploadProcessTask(e,t),this._mergeFileTask(e,t)),this._getMetaInfoTask(e,t,{isImageBatchUpload:n})}},{key:"_addAllStreamUploadProcess",value:function(e,t){this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||re,this.tasks[t].proxyStsToken=e.stsToken,this._addPreUploadTask(e,t),this._addInitUploadIDTask(e,t),this._addStreamUploadTask(e,t),this._mergeFileTask(e,t),this._getMetaInfoTask(e,t)}},{key:"_addStreamSlice",value:function(e){var t=e.fileSlice;e=e.index,this.streamUploadTask.addStreamSlice({fileSlice:t,index:e})}},{key:"_completeStreamUpload",value:function(){this.streamUploadTask.completeStreamUpload()}},{key:"_run",value:function(e){var t=this.tasks,n=navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/);if(n&&n[1]&&Number(n[1])<=9)return this._broadcast("error",$t(t[e],{key:e,status:0,stage:"browserError",extra:{message:"cannot support the browser below ie10"},type:"error"})),this.logger.send(t[e]),void this._cancel(e);t[e]?3===t[e].status?this._restart(e):(n=new Date,t[e].startTime=n.getTime(),t[e].task&&1!==t[e].status&&t[e].task.tasks.length&&(t[e].status=1,this.logger.send($t({},t[e],{extra:{message:"start upload"},type:"start",key:e})),t[e].task.start())):console.warn("".concat(e," is not exit in object tasks, stop running..."))}},{key:"_restart",value:function(e){var t,n,r=this,o=this.tasks;o[e]?(t=o[e].task,n=o[e].currentTask||0,this.taskList[e].forEach((function(o,i){o.index===n&&(t.tasks=r.taskList[e].slice(i))})),t&&1!==o[e].status&&t.tasks.length&&(o[e].status=1,t.restart())):console.warn("".concat(e," is not exit in object tasks"))}},{key:"_cancel",value:function(e){var t=this.tasks;t[e]?(t[e].status=2,t[e].task.cancel(),delete this.taskList[e]):console.warn("".concat(e," is not exit in object tasks"))}},{key:"_pause",value:function(e){var t=this.tasks;t[e]?(t[e].status=3,t[e].task.cancel(!0),this._saveTask(e)):console.warn("".concat(e," is not exit in object tasks"))}},{key:"_removeTaskCache",value:function(e){var t=this.tasks;t[e]?(t=t[e].crc32Key)&&this._removeCache(t):console.warn("".concat(e," is not exit in object tasks"))}},{key:"_saveTask",value:function(e,t){(t=(e=$t({},this.tasks[e],t||{})).crc32Key)&&(delete e.task,delete e.xhr,delete e.crc32Array,this._setCache(t,JSON.stringify(e)))}},{key:"_queueSuccess",value:function(e){var t,n=this.tasks;n[e]?(t=new Date,n[e].endTime=t.getTime(),n[e].time=n[e].endTime-n[e].startTime,n[e].status=0,this.taskList[e]=[]):console.warn("".concat(e," is not exit in object tasks"))}},{key:"_removeFile",value:function(e){delete this.tasks[e]}},{key:"_batchAction",value:function(e){var t=this.tasks;Object.keys(t).forEach((function(t){e&&e(t)}))}},{key:"_refreshSTSToken",value:function(e){var t=this,n=this.tasks;Object.keys(n).forEach((function(r){var o=$t({},r=n[r],{proxyStsToken:e}),i=(r.proxyStsToken=e,o.crc32Key);i&&(delete o.task,delete o.xhr,delete o.crc32Array,r.proxyStsToken=e,t._setCache(i,JSON.stringify(o)))}))}},{key:"_setOption",value:function(e){this._mergeOptions(this.config,e)}},{key:"_getOption",value:function(e){var t=$t({},this.config);return Object.keys(t).forEach((function(e){(-1<e.indexOf("Url")||"replace"===e||"log"===e)&&delete t[e]})),e?t[e]:t}},{key:"_userCancel",value:function(e){var t=this,n=this.tasks;e?(this._cancel(e),this.logger.send($t({},n[e],{type:"cancel"})),delete this.tasks[e]):Object.keys(n).forEach((function(e){t._cancel(e),t.logger.send($t({},n[e],{type:"cancel"})),delete t.tasks[e]}))}},{key:"_userPause",value:function(e){var t=this,n=this.tasks;e?(this._pause(e),this.logger.send($t({},n[e],{type:"pause"}))):Object.keys(n).forEach((function(e){t._pause(e),t.logger.send($t({},n[e],{type:"pause"}))}))}}]),t}();function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var on=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(t,Qt);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rn(e);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=rn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return function(e,t,n){t&&tn(e.prototype,t),n&&tn(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(e){this.abort=!1,e?this._run(e):this._batchAction(this._run.bind(this))}},{key:"addFile",value:function(e){return e&&Me(e.stsToken)?e.file?(t=ve.getUnique("file"),this._addAllUploadProcess(e,t),t):null:(this.emit("error",{extra:{message:Oe,errorCode:be}}),null);var t}},{key:"addImageFile",value:function(e){return e&&Me(e.stsToken)?e.file?(e.type=e.type||oe,t=ve.getUnique("file"),this._addAllUploadProcess(e,t),t):null:(this.emit("error",{extra:{message:Oe,errorCode:be}}),null);var t}},{key:"addStreamUploadTask",value:function(e){if(!e||!Me(e.stsToken))return this.emit("error",{extra:{message:Oe,errorCode:be}}),null;var t=ve.getUnique("file");return this._addAllStreamUploadProcess(e,t),t}},{key:"addStreamSlice",value:function(e){var t=e.fileSlice;e=e.index,this._addStreamSlice({fileSlice:t,index:e})}},{key:"completeStreamUpload",value:function(){this._completeStreamUpload()}},{key:"removeFile",value:function(e){e&&this._removeFile(e)}},{key:"cancel",value:function(e){e?this._userCancel(e):this._batchAction(this._userCancel.bind(this))}},{key:"pause",value:function(e){this._userPause(e)}},{key:"restart",value:function(e){e?this._restart(e):this._batchAction(this._restart.bind(this))}},{key:"refreshSTSToken",value:function(e){this._refreshSTSToken(e)}},{key:"setOption",value:function(e){this._setOption(e)}},{key:"getOption",value:function(e){return this._getOption(e)}}]),t}()}]).default},e.exports=t()},6964:e=>{"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,o=2,i=!0;for(;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,s(e))}}))}},676:(e,t)=>{"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var o,i=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:s[a++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:s[a++]=r[o|u>>6],s[a++]=r[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[o],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,i=n,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error(s);switch(a){case 0:r=u,a=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error(s);return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},1538:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},4418:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function s(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,s=8388607&r;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=s.bind(null,o),e.readFloatBE=s.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,o,i){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,o,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,i+n)}}}function s(e,t,n,r,o){var i=e(r,o+t),s=e(r,o+n),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=s.bind(null,o,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},3859:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},3513:e=>{"use strict";e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){if(n<1||n>o)return e(n);s+n>r&&(i=e(r),s=0);var a=t.call(i,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},1875:(e,t)=>{"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],s=0;t<n;)(r=e[t++])<128?i[s++]=r:r>191&&r<224?i[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.write=function(e,t,n){for(var r,o,i=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&o),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}},3273:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=a(e),s=i[0],c=i[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),l=0,f=c>0?s-4:s;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,u=r-o;a<u;a+=s)i.push(c(e,a,a+s>u?u:a+s));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},4990:(e,t,n)=>{"use strict";const r=n(3273),o=n(1244),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|v(e,t);let r=a(n);const o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const o=function(e){if(c.isBuffer(e)){const t=0|d(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Z(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|d(e))}function h(e){const t=e.length<0?0:0|d(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(o)return r?-1:z(e).length;t=(""+t).toLowerCase(),o=!0}}function y(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,o){let i,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let r=-1;for(i=n;i<a;i++)if(u(e,i)===u(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(u(e,i+r)!==u(t,r)){n=!1;break}if(n)return i}return-1}function b(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=t.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(Z(r))return s;e[n+s]=r}return s}function w(e,t,n,r){return $(z(t,e.length-n),e,n,r)}function x(e,t,n,r){return $(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return $(W(t),e,n,r)}function E(e,t,n,r){return $(function(e,t){let n,r,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(i=c));break;case 3:n=e[o+1],r=e[o+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return f(e)},c.allocUnsafeSlow=function(e){return f(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))o+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,o){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n);for(let e=0;e<a;++e)if(u[e]!==l[e]){i=u[e],s=l[e];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function I(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function P(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=t;r<n;++r)o+=X[e[r]];return o}function A(e,t,n){const r=e.slice(t,n);let o="";for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,o){H(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function B(e,t,n,r,o){H(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function D(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return t=+t,n>>>=0,i||D(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return t=+t,n>>>=0,i||D(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=J((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=J((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=J((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=J((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=J((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=J((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=J((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=J((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this};const F={};function U(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function H(e,t,n,r,o,i){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||q(t,e.length-(n+1))}(r,o,i)}function V(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=G(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=G(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function z(e,t){let n;t=t||1/0;const r=e.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function J(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},4898:(e,t,n)=>{"use strict";var r=n(9776),o=n(5330),i=o(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?o(n):n}},5330:(e,t,n)=>{"use strict";var r=n(1682),o=n(9776),i=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||r.call(s,i),c=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),l=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=a(r,s,arguments);c&&u&&(c(t,"length").configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))}));return t};var f=function(){return a(r,i,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},1529:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(3192)}catch(e){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),l=s.enc={},f=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var f=0;f<c;f+=s)this._doProcessBlock(o,f);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),v=(a.Hasher=d.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new v.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)},9507:function(e,t,n){var r;e.exports=(r=n(1529),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],f=n[6],h=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var d=u[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=u[p-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[p]=v+u[p-7]+g+u[p-16]}var m=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+c[p]+u[p];h=f,f=l,l=a,a=s+b|0,s=i,i=o,o=r,r=b+(_+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),r.SHA256)},370:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},3580:function(e,t){!function(e){"use strict";var t="function"==typeof WeakMap,n=Object.keys;function r(e,t){return e===t||e!=e&&t!=t}function o(e){return e.constructor===Object||null==e.constructor}function i(e){return!!e&&"function"==typeof e.then}function s(e){return!(!e||!e.$$typeof)}function a(){var e=[];return{delete:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t)return void e.splice(n,1)},get:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t)return e[n][1]},set:function(t,n){for(var r=0;r<e.length;++r)if(e[r][0]===t)return void(e[r][1]=n);e.push([t,n])}}}var c=t?function(){return new WeakMap}:a;function u(e){return function(t){var n=e||t;return function(e,t,r,o,i,s,a){void 0===a&&(a=c());var u=!!e&&"object"==typeof e,l=!!t&&"object"==typeof t;if(u!==l)return!1;if(!u&&!l)return n(e,t,a);var f=a.get(e);if(f&&a.get(t))return f===t;a.set(e,t),a.set(t,e);var h=n(e,t,a);return a.delete(e),a.delete(t),h}}}function l(e,t,n,r){var o=e.length;if(t.length!==o)return!1;for(;o-- >0;)if(!n(e[o],t[o],o,o,e,t,r))return!1;return!0}function f(e,t,n,r){var o=e.size===t.size;if(o&&e.size){var i={},s=0;e.forEach((function(a,c){if(o){var u=!1,l=0;t.forEach((function(o,f){u||i[l]||(u=n(c,f,s,l,e,t,r)&&n(a,o,c,f,e,t,r))&&(i[l]=!0),l++})),s++,o=u}}))}return o}var h="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function d(e,t,r,o){var i=n(e),a=i.length;if(n(t).length!==a)return!1;if(a)for(var c=void 0;a-- >0;){if((c=i[a])===h){var u=s(e),l=s(t);if((u||l)&&u!==l)return!1}if(!p(t,c)||!r(e[c],t[c],c,c,e,t,o))return!1}return!0}var v="g"===/foo/g.flags?function(e,t){return e.source===t.source&&e.flags===t.flags}:function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex};function y(e,t,n,r){var o=e.size===t.size;if(o&&e.size){var i={};e.forEach((function(s,a){if(o){var c=!1,u=0;t.forEach((function(o,l){c||i[u]||(c=n(s,o,a,l,e,t,r))&&(i[u]=!0),u++})),o=c}}))}return o}var g="function"==typeof Map,m="function"==typeof Set,_=Object.prototype.valueOf;function b(e){var t="function"==typeof e?e(n):function(e,t,r,o,i,s,a){return n(e,t,a)};function n(e,n,s){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(o(e)&&o(n))return d(e,n,t,s);var a=Array.isArray(e),c=Array.isArray(n);return a||c?a===c&&l(e,n,t,s):(a=e instanceof Date,c=n instanceof Date,a||c?a===c&&r(e.getTime(),n.getTime()):(a=e instanceof RegExp,c=n instanceof RegExp,a||c?a===c&&v(e,n):i(e)||i(n)?e===n:g&&(a=e instanceof Map,c=n instanceof Map,a||c)?a===c&&f(e,n,t,s):m&&(a=e instanceof Set,c=n instanceof Set,a||c)?a===c&&y(e,n,t,s):e.valueOf!==_||n.valueOf!==_?r(e.valueOf(),n.valueOf()):d(e,n,t,s)))}return e!=e&&n!=n}return n}var w=b(),x=b((function(){return r})),O=b(u()),E=b(u(r));e.circularDeepEqual=O,e.circularShallowEqual=E,e.createCustomEqual=b,e.deepEqual=w,e.sameValueZeroEqual=r,e.shallowEqual=x,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2391:e=>{e.exports=s,s.default=s,s.stable=l,s.stableStringify=l;var t="[...]",n="[Circular]",r=[],o=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(e,t,n,s){var a;void 0===s&&(s=i()),c(e,"",0,[],void 0,0,s);try{a=0===o.length?JSON.stringify(e,t,n):JSON.stringify(e,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var u=r.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function a(e,t,n,i){var s=Object.getOwnPropertyDescriptor(i,n);void 0!==s.get?s.configurable?(Object.defineProperty(i,n,{value:e}),r.push([i,n,t,s])):o.push([t,n,e]):(i[n]=e,r.push([i,n,t]))}function c(e,r,o,i,s,u,l){var f;if(u+=1,"object"==typeof e&&null!==e){for(f=0;f<i.length;f++)if(i[f]===e)return void a(n,e,r,s);if(void 0!==l.depthLimit&&u>l.depthLimit)return void a(t,e,r,s);if(void 0!==l.edgesLimit&&o+1>l.edgesLimit)return void a(t,e,r,s);if(i.push(e),Array.isArray(e))for(f=0;f<e.length;f++)c(e[f],f,f,i,e,u,l);else{var h=Object.keys(e);for(f=0;f<h.length;f++){var p=h[f];c(e[p],p,f,i,e,u,l)}}i.pop()}}function u(e,t){return e<t?-1:e>t?1:0}function l(e,t,n,s){void 0===s&&(s=i());var a,c=f(e,"",0,[],void 0,0,s)||e;try{a=0===o.length?JSON.stringify(c,t,n):JSON.stringify(c,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var u=r.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function f(e,o,i,s,c,l,h){var p;if(l+=1,"object"==typeof e&&null!==e){for(p=0;p<s.length;p++)if(s[p]===e)return void a(n,e,o,c);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==h.depthLimit&&l>h.depthLimit)return void a(t,e,o,c);if(void 0!==h.edgesLimit&&i+1>h.edgesLimit)return void a(t,e,o,c);if(s.push(e),Array.isArray(e))for(p=0;p<e.length;p++)f(e[p],p,p,s,e,l,h);else{var d={},v=Object.keys(e).sort(u);for(p=0;p<v.length;p++){var y=v[p];f(e[y],y,p,s,e,l,h),d[y]=e[y]}if(void 0===c)return d;r.push([c,o,e]),c[o]=d}s.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(o.length>0)for(var r=0;r<o.length;r++){var i=o[r];if(i[1]===t&&i[0]===n){n=i[2],o.splice(r,1);break}}return e.call(this,t,n)}}},9875:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=n(1),o="function"==typeof importScripts;e.exports=r(o?self:window)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=[];function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=o.reduce((function(e,t){return[t].concat(e)}),[]),a=Promise.resolve(n);return s.forEach((function(e){var t=e.request,n=e.requestError;(t||n)&&(a=a.then((function(e){return t.apply(void 0,r(e))}),n))})),a=a.then((function(t){var n=new(Function.prototype.bind.apply(Request,[null].concat(r(t))));return e(n).then((function(e){return e.request=n,e})).catch((function(e){return e.request=n,Promise.reject(e)}))})),s.forEach((function(e){var t=e.response,n=e.responseError;(t||n)&&(a=a.then(t,n))})),a}e.exports=function(e){if(!e.fetch)try{n(2)}catch(e){throw Error("No fetch available. Unable to register fetch-intercept")}return e.fetch=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.apply(void 0,[e].concat(n))}}(e.fetch),{register:function(e){return o.push(e),function(){var t=o.indexOf(e);t>=0&&o.splice(t,1)}},clear:function(){o=[]}}}},function(e,t){e.exports=n(6854)}])},2725:e=>{e.exports=function(e){return[...e].reduce(((e,[t,n])=>(e[t]=n,e)),{})}},7330:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var o=0;o<t.length;o+=1)n[o+e.length]=t[o];return n};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,s=function(e,t){for(var n=[],r=t||0,o=0;r<e.length;r+=1,o+=1)n[o]=e[r];return n}(arguments,1),a=n(0,o.length-s.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(i=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,r(s,arguments));return Object(t)===t?t:this}return o.apply(e,r(s,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},1682:(e,t,n)=>{"use strict";var r=n(7330);e.exports=Function.prototype.bind||r},9776:(e,t,n)=>{"use strict";var r,o=SyntaxError,i=Function,s=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new s},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,f=n(8251)(),h=n(3424)(),p=Object.getPrototypeOf||(h?function(e){return e.__proto__}:null),d={},v="undefined"!=typeof Uint8Array&&p?p(Uint8Array):r,y={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f&&p?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&p?p(p([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f&&p?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f&&p?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&p?p(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":l,"%TypedArray%":v,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(p)try{null.error}catch(e){var g=p(p(e));y["%Error.prototype%"]=g}var m=function e(t){var n;if("%AsyncFunction%"===t)n=a("async function () {}");else if("%GeneratorFunction%"===t)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=a("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&p&&(n=p(o.prototype))}return y[t]=n,n},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(1682),w=n(3227),x=b.call(Function.call,Array.prototype.concat),O=b.call(Function.apply,Array.prototype.splice),E=b.call(Function.call,String.prototype.replace),S=b.call(Function.call,String.prototype.slice),k=b.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,P=function(e,t){var n,r=e;if(w(_,r)&&(r="%"+(n=_[r])[0]+"%"),w(y,r)){var i=y[r];if(i===d&&(i=m(r)),void 0===i&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return E(e,C,(function(e,t,n,o){r[r.length]=n?E(o,I,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=P("%"+r+"%",t),a=i.name,u=i.value,l=!1,f=i.alias;f&&(r=f[0],O(n,x([0,1],f)));for(var h=1,p=!0;h<n.length;h+=1){var d=n[h],v=S(d,0,1),g=S(d,-1);if(('"'===v||"'"===v||"`"===v||'"'===g||"'"===g||"`"===g)&&v!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==d&&p||(l=!0),w(y,a="%"+(r+="."+d)+"%"))u=y[a];else if(null!=u){if(!(d in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&h+1>=n.length){var m=c(u,d);u=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[d]}else p=w(u,d),u=u[d];p&&!l&&(y[a]=u)}}return u}},3424:e=>{"use strict";var t={foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof n)}},8251:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,o=n(28);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},28:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},3227:e=>{"use strict";var t={}.hasOwnProperty,n=Function.prototype.call;e.exports=n.bind?n.bind(t):function(e,r){return n.call(t,e,r)}},1244:(e,t)=>{t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*v}},4457:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,o,i=0,s=e.length,a=this.blocks,c=this.buffer8;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)if(ARRAY_BUFFER)for(o=this.start;i<s&&o<64;++i)c[o++]=e[i];else for(o=this.start;i<s&&o<64;++i)a[o>>2]|=e[i]<<SHIFT[3&o++];else if(ARRAY_BUFFER)for(o=this.start;i<s&&o<64;++i)(r=e.charCodeAt(i))<128?c[o++]=r:r<2048?(c[o++]=192|r>>6,c[o++]=128|63&r):r<55296||r>=57344?(c[o++]=224|r>>12,c[o++]=128|r>>6&63,c[o++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),c[o++]=240|r>>18,c[o++]=128|r>>12&63,c[o++]=128|r>>6&63,c[o++]=128|63&r);else for(o=this.start;i<s&&o<64;++i)(r=e.charCodeAt(i))<128?a[o>>2]|=r<<SHIFT[3&o++]:r<2048?(a[o>>2]|=(192|r>>6)<<SHIFT[3&o++],a[o>>2]|=(128|63&r)<<SHIFT[3&o++]):r<55296||r>=57344?(a[o>>2]|=(224|r>>12)<<SHIFT[3&o++],a[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&r)<<SHIFT[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),a[o>>2]|=(240|r>>18)<<SHIFT[3&o++],a[o>>2]|=(128|r>>12&63)<<SHIFT[3&o++],a[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&r)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,o,i,s=this.blocks;this.first?t=((t=((e=((e=s[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+s[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+s[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+s[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+s[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+s[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+s[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+s[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+s[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+s[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+s[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+s[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+s[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+s[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+s[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+s[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+s[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+s[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+s[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+s[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+s[1]-165796510)<<5|e>>>27)+t<<0)^t))+s[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+s[11]+643717713)<<14|n>>>18)+r<<0)^r))+s[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+s[5]-701558691)<<5|e>>>27)+t<<0)^t))+s[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+s[15]-660478335)<<14|n>>>18)+r<<0)^r))+s[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+s[9]+568446438)<<5|e>>>27)+t<<0)^t))+s[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+s[3]-187363961)<<14|n>>>18)+r<<0)^r))+s[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+s[13]-1444681467)<<5|e>>>27)+t<<0)^t))+s[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+s[7]+1735328473)<<14|n>>>18)+r<<0)^r))+s[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((i=(r=((r+=((o=t^n)^(e=((e+=(o^r)+s[5]-378558)<<4|e>>>28)+t<<0))+s[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(i^t)+s[11]+1839030562)<<16|n>>>16)+r<<0))+s[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((i=(r=((r+=((o=t^n)^(e=((e+=(o^r)+s[1]-1530992060)<<4|e>>>28)+t<<0))+s[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(i^t)+s[7]-155497632)<<16|n>>>16)+r<<0))+s[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((i=(r=((r+=((o=t^n)^(e=((e+=(o^r)+s[13]+681279174)<<4|e>>>28)+t<<0))+s[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(i^t)+s[3]-722521979)<<16|n>>>16)+r<<0))+s[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((i=(r=((r+=((o=t^n)^(e=((e+=(o^r)+s[9]-640364487)<<4|e>>>28)+t<<0))+s[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(i^t)+s[15]+530742520)<<16|n>>>16)+r<<0))+s[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+s[0]-198630844)<<6|e>>>26)+t<<0)|~n))+s[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+s[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+s[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+s[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+s[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+s[10]-1051523)<<15|n>>>17)+r<<0)|~e))+s[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+s[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+s[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+s[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+s[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+s[4]-145523070)<<6|e>>>26)+t<<0)|~n))+s[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+s[2]+718787259)<<15|n>>>17)+r<<0)|~e))+s[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",o=this.array(),i=0;i<15;)e=o[i++],t=o[i++],n=o[i++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=o[i],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},5468:(e,t,n)=>{var r=n(4722).stringify,o=n(3481);e.exports=function(e){return{parse:o(e),stringify:r}},e.exports.parse=o(),e.exports.stringify=r},3481:(e,t,n)=>{var r=null;e.exports=function(e){"use strict";var t,o,i,s,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},u=function(e){return e&&e!==o&&c("Expected '"+e+"' instead of '"+o+"'"),o=i.charAt(t),t+=1,o},l=function(){var e,t=!1,i="";for("-"===o&&(i="-",u("-"));o>="0"&&o<="9";)i+=o,u();if("."===o)for(t=!0,i+=".";u()&&o>="0"&&o<="9";)i+=o;if("e"===o||"E"===o)for(t=!0,i+=o,u(),"-"!==o&&"+"!==o||(i+=o,u());o>="0"&&o<="9";)i+=o,u();if(e=+i,isFinite(e))return t||Number(i).toString()===i?e:(null==r&&(r=n(4546)),r.fromString(i));c("Bad number")},f=function(){var e,t,n,r="";if('"'===o)for(;u();){if('"'===o)return u(),r;if("\\"===o)if(u(),"u"===o){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof a[o])break;r+=a[o]}else r+=o}c("Bad string")},h=function(){for(;o&&o<=" ";)u()};return s=function(){switch(h(),o){case"{":return function(){var e,t={};if("{"===o){if(u("{"),h(),"}"===o)return u("}"),t;for(;o;){if(e=f(),h(),u(":"),Object.hasOwnProperty.call(t,e)&&c('Duplicate key "'+e+'"'),t[e]=s(),h(),"}"===o)return u("}"),t;u(","),h()}}c("Bad object")}();case"[":return function(){var e=[];if("["===o){if(u("["),h(),"]"===o)return u("]"),e;for(;o;){if(e.push(s()),h(),"]"===o)return u("]"),e;u(","),h()}}c("Bad array")}();case'"':return f();case"-":return l();default:return o>="0"&&o<="9"?l():function(){switch(o){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}c("Unexpected '"+o+"'")}()}},function(e,n){var r;return i=e+"",t=0,o=" ",r=s(),h(),o&&c("Syntax error"),"function"==typeof n?function e(t,r){var o,i=t[r];return i&&"object"==typeof i&&Object.keys(i).forEach((function(t){void 0!==(o=e(i,t))?i[t]=o:delete i[t]})),n.call(t,r,i)}({"":r},""):r}}},4722:(e,t,n)=>{var r=n(4546),o=e.exports;!function(){"use strict";var e,t,n,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function c(o,i){var s,u,l,f,h,p=e,d=i[o],v=null!=d&&(d instanceof r||r.isLong(d));switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(o)),"function"==typeof n&&(d=n.call(i,o,d)),typeof d){case"string":return a(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(v)return d.toString();if(e+=t,h=[],"[object Array]"===Object.prototype.toString.apply(d)){for(f=d.length,s=0;s<f;s+=1)h[s]=c(s,d)||"null";return l=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+p+"]":"["+h.join(",")+"]",e=p,l}if(n&&"object"==typeof n)for(f=n.length,s=0;s<f;s+=1)"string"==typeof n[s]&&(l=c(u=n[s],d))&&h.push(a(u)+(e?": ":":")+l);else Object.keys(d).forEach((function(t){var n=c(t,d);n&&h.push(a(t)+(e?": ":":")+n)}));return l=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+p+"}":"{"+h.join(",")+"}",e=p,l}}"function"!=typeof o.stringify&&(o.stringify=function(r,o,i){var s;if(e="",t="","number"==typeof i)for(s=0;s<i;s+=1)t+=" ";else"string"==typeof i&&(t=i);if(n=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return c("",{"":r})})}()},7271:(e,t)=>{var n,r,o,i,s,a,c,u,l,f,h,p={userAgent:!1},d={},v=v||(n=Math,o=(r={}).lib={},i=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=n.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*n.random()|0);return new s.init(t,e)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,o=t.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=e?n.ceil(a):n.max((0|a)-this._minBufferSize,0))*i,u=n.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var f=r.splice(0,c);t.sigBytes-=u}return new s.init(f,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),o.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),h=r.algo={},r);!function(e){var t,n=(t=v).lib,r=n.Base,o=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}})}(),v.lib.Cipher||function(e){var t=(p=v).lib,n=t.Base,r=t.WordArray,o=t.BufferedBlockAlgorithm,i=p.enc.Base64,s=p.algo.EvpKDF,a=t.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?d:h).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?d:h).decrypt(e,t,n,r)}}}});t.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},u=function(e,t,n){var r=this._iv;r?this._iv=undefined:r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;u.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),u.call(this,e,t,r),this._prevBlock=o}}),c=c.CBC=l,l=(p.pad={}).Pkcs7={pad:function(e,t){for(var n,o=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(o);n=r.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=a.extend({cfg:a.cfg.extend({mode:c,padding:l}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(c=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r);return t=o.finalize(t),o=o.cfg,f.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,o){return o||(o=r.random(8)),e=s.create({keySize:t+n}).compute(e,o),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:o})}},d=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=h.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,h.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=v,t=e.lib.BlockCipher,n=e.algo,r=[],o=[],i=[],s=[],a=[],c=[],u=[],l=[],f=[],h=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;var y=0,g=0;for(d=0;256>d;d++){var m=(m=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&m^99;r[y]=m,o[m]=y;var _=p[y],b=p[_],w=p[b],x=257*p[m]^16843008*m;i[y]=x<<24|x>>>8,s[y]=x<<16|x>>>16,a[y]=x<<8|x>>>24,c[y]=x,x=16843009*w^65537*b^257*_^16843008*y,u[m]=x<<24|x>>>8,l[m]=x<<16|x>>>16,f[m]=x<<8|x>>>24,h[m]=x,y?(y=_^p[p[p[w^_]]],g^=p[p[g]]):y=g=1}var O=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),o=this._keySchedule=[],i=0;i<n;i++)if(i<t)o[i]=e[i];else{var s=o[i-1];i%t?6<t&&4==i%t&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=O[i/t|0]<<24),o[i]=o[i-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,s=t%4?o[i]:o[i-4],e[t]=4>t||4>=i?s:u[r[s>>>24]]^l[r[s>>>16&255]]^f[r[s>>>8&255]]^h[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,s,a,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,l,f,h,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],p=4,d=1;d<c;d++){var v=r[u>>>24]^o[l>>>16&255]^i[f>>>8&255]^s[255&h]^n[p++],y=r[l>>>24]^o[f>>>16&255]^i[h>>>8&255]^s[255&u]^n[p++],g=r[f>>>24]^o[h>>>16&255]^i[u>>>8&255]^s[255&l]^n[p++];h=r[h>>>24]^o[u>>>16&255]^i[l>>>8&255]^s[255&f]^n[p++],u=v,l=y,f=g}v=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^n[p++],y=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^n[p++],g=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[p++],h=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[p++],e[t]=v,e[t+1]=y,e[t+2]=g,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n=v,r=(o=n.lib).WordArray,o=o.BlockCipher,i=n.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=s[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(e=this._subKeys=[],r=0;16>r;r++){var o=e[r]=[],i=c[r];for(n=0;24>n;n++)o[n/6|0]|=t[(a[n]-1+i)%28]<<31-n%6,o[4+(n/6|0)]|=t[28+(a[n+24]-1+i)%28]<<31-n%6;for(o[0]=o[0]<<1|o[0]>>>31,n=1;7>n;n++)o[n]>>>=4*(n-1)+3;o[7]=o[7]<<5|o[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,o){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var i=0;16>i;i++){for(var s=o[i],a=this._lBlock,c=this._rBlock,f=0,h=0;8>h;h++)f|=u[h][((c^s[h])&l[h])>>>0];this._lBlock=c,this._rBlock=a^f}o=this._lBlock,this._lBlock=this._rBlock,this._rBlock=o,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=o._createHelper(f),i=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(r.create(e.slice(0,2))),this._des2=f.createEncryptor(r.create(e.slice(2,4))),this._des3=f.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=o._createHelper(i)}(),function(){var e=v,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;4>s&&o+.75*s<n;s++)e.push(r.charAt(i>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(o=r.charAt(64))&&(-1!=(o=e.indexOf(o))&&(n=o));for(var o=[],i=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,c=r.indexOf(e.charAt(s))>>>6-s%4*2;o[i>>>2]|=(a|c)<<24-i%4*8,i++}return t.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,o,i,s){return((e=e+(t&n|~t&r)+o+s)<<i|e>>>32-i)+t}function n(e,t,n,r,o,i,s){return((e=e+(t&r|n&~r)+o+s)<<i|e>>>32-i)+t}function r(e,t,n,r,o,i,s){return((e=e+(t^n^r)+o+s)<<i|e>>>32-i)+t}function o(e,t,n,r,o,i,s){return((e=e+(n^(t|~r))+o+s)<<i|e>>>32-i)+t}for(var i=v,s=(c=i.lib).WordArray,a=c.Hasher,c=i.algo,u=[],l=0;64>l;l++)u[l]=4294967296*e.abs(e.sin(l+1))|0;c=c.MD5=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var s=0;16>s;s++){var a=e[c=i+s];e[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}s=this._hash.words;var c=e[i+0],l=(a=e[i+1],e[i+2]),f=e[i+3],h=e[i+4],p=e[i+5],d=e[i+6],v=e[i+7],y=e[i+8],g=e[i+9],m=e[i+10],_=e[i+11],b=e[i+12],w=e[i+13],x=e[i+14],O=e[i+15],E=t(E=s[0],C=s[1],k=s[2],S=s[3],c,7,u[0]),S=t(S,E,C,k,a,12,u[1]),k=t(k,S,E,C,l,17,u[2]),C=t(C,k,S,E,f,22,u[3]);E=t(E,C,k,S,h,7,u[4]),S=t(S,E,C,k,p,12,u[5]),k=t(k,S,E,C,d,17,u[6]),C=t(C,k,S,E,v,22,u[7]),E=t(E,C,k,S,y,7,u[8]),S=t(S,E,C,k,g,12,u[9]),k=t(k,S,E,C,m,17,u[10]),C=t(C,k,S,E,_,22,u[11]),E=t(E,C,k,S,b,7,u[12]),S=t(S,E,C,k,w,12,u[13]),k=t(k,S,E,C,x,17,u[14]),E=n(E,C=t(C,k,S,E,O,22,u[15]),k,S,a,5,u[16]),S=n(S,E,C,k,d,9,u[17]),k=n(k,S,E,C,_,14,u[18]),C=n(C,k,S,E,c,20,u[19]),E=n(E,C,k,S,p,5,u[20]),S=n(S,E,C,k,m,9,u[21]),k=n(k,S,E,C,O,14,u[22]),C=n(C,k,S,E,h,20,u[23]),E=n(E,C,k,S,g,5,u[24]),S=n(S,E,C,k,x,9,u[25]),k=n(k,S,E,C,f,14,u[26]),C=n(C,k,S,E,y,20,u[27]),E=n(E,C,k,S,w,5,u[28]),S=n(S,E,C,k,l,9,u[29]),k=n(k,S,E,C,v,14,u[30]),E=r(E,C=n(C,k,S,E,b,20,u[31]),k,S,p,4,u[32]),S=r(S,E,C,k,y,11,u[33]),k=r(k,S,E,C,_,16,u[34]),C=r(C,k,S,E,x,23,u[35]),E=r(E,C,k,S,a,4,u[36]),S=r(S,E,C,k,h,11,u[37]),k=r(k,S,E,C,v,16,u[38]),C=r(C,k,S,E,m,23,u[39]),E=r(E,C,k,S,w,4,u[40]),S=r(S,E,C,k,c,11,u[41]),k=r(k,S,E,C,f,16,u[42]),C=r(C,k,S,E,d,23,u[43]),E=r(E,C,k,S,g,4,u[44]),S=r(S,E,C,k,b,11,u[45]),k=r(k,S,E,C,O,16,u[46]),E=o(E,C=r(C,k,S,E,l,23,u[47]),k,S,c,6,u[48]),S=o(S,E,C,k,v,10,u[49]),k=o(k,S,E,C,x,15,u[50]),C=o(C,k,S,E,p,21,u[51]),E=o(E,C,k,S,b,6,u[52]),S=o(S,E,C,k,f,10,u[53]),k=o(k,S,E,C,m,15,u[54]),C=o(C,k,S,E,a,21,u[55]),E=o(E,C,k,S,y,6,u[56]),S=o(S,E,C,k,O,10,u[57]),k=o(k,S,E,C,d,15,u[58]),C=o(C,k,S,E,w,21,u[59]),E=o(E,C,k,S,h,6,u[60]),S=o(S,E,C,k,_,10,u[61]),k=o(k,S,E,C,l,15,u[62]),C=o(C,k,S,E,g,21,u[63]);s[0]=s[0]+E|0,s[1]=s[1]+C|0,s[2]=s[2]+k|0,s[3]=s[3]+S|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296);for(n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)o=n[r],n[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),function(){var e=v,t=(o=e.lib).WordArray,n=o.Hasher,r=[],o=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)r[u]=0|e[t+u];else{var l=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=l<<1|l>>>31}l=(o<<5|o>>>27)+c+r[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=o,o=l}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(o),e.HmacSHA1=n._createHmacHelper(o)}(),function(e){for(var t=v,n=(o=t.lib).WordArray,r=o.Hasher,o=t.algo,i=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},c=2,u=0;64>u;){var l;e:{l=c;for(var f=e.sqrt(l),h=2;h<=f;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(8>u&&(i[u]=a(e.pow(c,.5))),s[u]=a(e.pow(c,1/3)),u++),c++}var p=[];o=o.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],v=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+p[h-16]}d=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+s[h]+p[h],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=l,l=u,u=c,c=a+d|0,a=i,i=o,o=r,r=d+v|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(o),t.HmacSHA256=r._createHmacHelper(o)}(Math),function(){var e=v,t=e.lib.WordArray,n=(r=e.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)}(),function(){function e(){return r.create.apply(r,arguments)}for(var t=v,n=t.lib.Hasher,r=(i=t.x64).Word,o=i.WordArray,i=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],c=0;80>c;c++)a[c]=e();i=i.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(f=this._hash.words)[0],r=f[1],o=f[2],i=f[3],c=f[4],u=f[5],l=f[6],f=f[7],h=n.high,p=n.low,d=r.high,v=r.low,y=o.high,g=o.low,m=i.high,_=i.low,b=c.high,w=c.low,x=u.high,O=u.low,E=l.high,S=l.low,k=f.high,C=f.low,I=h,P=p,T=d,A=v,j=y,R=g,M=m,B=_,D=b,L=w,N=x,F=O,U=E,G=S,H=k,V=C,q=0;80>q;q++){var K=a[q];if(16>q)var z=K.high=0|e[t+2*q],W=K.low=0|e[t+2*q+1];else{z=((W=(z=a[q-15]).high)>>>1|($=z.low)<<31)^(W>>>8|$<<24)^W>>>7;var $=($>>>1|W<<31)^($>>>8|W<<24)^($>>>7|W<<25),Y=((W=(Y=a[q-2]).high)>>>19|(Z=Y.low)<<13)^(W<<3|Z>>>29)^W>>>6,Z=(Z>>>19|W<<13)^(Z<<3|W>>>29)^(Z>>>6|W<<26),X=(W=a[q-7]).high,J=(Q=a[q-16]).high,Q=Q.low;z=(z=(z=z+X+((W=$+W.low)>>>0<$>>>0?1:0))+Y+((W=W+Z)>>>0<Z>>>0?1:0))+J+((W=W+Q)>>>0<Q>>>0?1:0);K.high=z,K.low=W}X=D&N^~D&U,Q=L&F^~L&G,K=I&T^I&j^T&j;var ee=P&A^P&R^A&R,te=($=(I>>>28|P<<4)^(I<<30|P>>>2)^(I<<25|P>>>7),Y=(P>>>28|I<<4)^(P<<30|I>>>2)^(P<<25|I>>>7),(Z=s[q]).high),ne=Z.low;J=H+((D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9))+((Z=V+((L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9)))>>>0<V>>>0?1:0),H=U,V=G,U=N,G=F,N=D,F=L,D=M+(J=(J=(J=J+X+((Z=Z+Q)>>>0<Q>>>0?1:0))+te+((Z=Z+ne)>>>0<ne>>>0?1:0))+z+((Z=Z+W)>>>0<W>>>0?1:0))+((L=B+Z|0)>>>0<B>>>0?1:0)|0,M=j,B=R,j=T,R=A,T=I,A=P,I=J+(K=$+K+((W=Y+ee)>>>0<Y>>>0?1:0))+((P=Z+W|0)>>>0<Z>>>0?1:0)|0}p=n.low=p+P,n.high=h+I+(p>>>0<P>>>0?1:0),v=r.low=v+A,r.high=d+T+(v>>>0<A>>>0?1:0),g=o.low=g+R,o.high=y+j+(g>>>0<R>>>0?1:0),_=i.low=_+B,i.high=m+M+(_>>>0<B>>>0?1:0),w=c.low=w+L,c.high=b+D+(w>>>0<L>>>0?1:0),O=u.low=O+F,u.high=x+N+(O>>>0<F>>>0?1:0),S=l.low=S+G,l.high=E+U+(S>>>0<G>>>0?1:0),C=f.low=C+V,f.high=k+H+(C>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(i),t.HmacSHA512=n._createHmacHelper(i)}(),function(){var e=v,t=(o=e.x64).Word,n=o.WordArray,r=(o=e.algo).SHA512,o=o.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(o),e.HmacSHA384=r._createHmacHelper(o)}(),function(){var e=v,t=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,o=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=t.create([0,1518500249,1859775393,2400959708,2840853838]),u=t.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++){var r=e[b=t+n];e[b]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var l,f,h,p,d,v,y,g,m,_,b=this._hash.words,w=(r=c.words,u.words),x=o.words,O=i.words,E=s.words,S=a.words;v=l=b[0],y=f=b[1],g=h=b[2],m=p=b[3],_=d=b[4];var k;for(n=0;80>n;n+=1)k=l+e[t+x[n]]|0,k=16>n?k+((f^h^p)+r[0]):32>n?k+((f&h|~f&p)+r[1]):48>n?k+(((f|~h)^p)+r[2]):64>n?k+((f&p|h&~p)+r[3]):k+((f^(h|~p))+r[4]),k=(k=(k|=0)<<E[n]|k>>>32-E[n])+d|0,l=d,d=p,p=h<<10|h>>>22,h=f,f=k,k=v+e[t+O[n]]|0,k=16>n?k+((y^(g|~m))+w[0]):32>n?k+((y&m|g&~m)+w[1]):48>n?k+(((y|~g)^m)+w[2]):64>n?k+((y&g|~y&m)+w[3]):k+((y^g^m)+w[4]),k=(k=(k|=0)<<S[n]|k>>>32-S[n])+_|0,v=_,_=m,m=g<<10|g>>>22,g=y,y=k;k=b[1]+h+m|0,b[1]=b[2]+p+_|0,b[2]=b[3]+d+v|0,b[3]=b[4]+l+y|0,b[4]=b[0]+f+g|0,b[0]=k},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;5>n;n++)r=t[n],t[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.RIPEMD160=n._createHelper(r),e.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var e=v,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,o=4*r;n.sigBytes>o&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),a=i.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=v,n=(e=t.lib).Base,r=e.WordArray,o=(e=t.algo).HMAC,i=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,i=o.create(n.hasher,e),s=r.create(),a=r.create([1]),c=s.words,u=a.words,l=n.keySize;for(n=n.iterations;c.length<l;){var f=i.update(t).finalize(a);i.reset();for(var h=f.words,p=h.length,d=f,v=1;v<n;v++){d=i.finalize(d),i.reset();for(var y=d.words,g=0;g<p;g++)h[g]^=y[g]}s.concat(f),u[0]++}return s.sigBytes=4*l,s}});t.PBKDF2=function(e,t,n){return i.create(n).compute(e,t)}}();var y,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="=";function _(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=g.charAt(n>>6)+g.charAt(63&n);if(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=g.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=g.charAt(n>>2)+g.charAt((3&n)<<4)),m)for(;(3&r.length)>0;)r+=m;return r}function b(e){var t,n,r,o="",i=0;for(t=0;t<e.length&&e.charAt(t)!=m;++t)(r=g.indexOf(e.charAt(t)))<0||(0==i?(o+=I(r>>2),n=3&r,i=1):1==i?(o+=I(n<<2|r>>4),n=15&r,i=2):2==i?(o+=I(n),o+=I(r>>2),n=3&r,i=3):(o+=I(n<<2|r>>4),o+=I(15&r),i=0));return 1==i&&(o+=I(n<<2)),o}function w(e){var t,n=b(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function x(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function O(){return new x(null)}"Microsoft Internet Explorer"==p.appName?(x.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;--i>=0;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;o=((c=s*c+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*u+(o>>>30),n[r++]=1073741823&c}return o},y=30):"Netscape"!=p.appName?(x.prototype.am=function(e,t,n,r,o,i){for(;--i>=0;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},y=26):(x.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;--i>=0;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;o=((c=s*c+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*u,n[r++]=268435455&c}return o},y=28),x.prototype.DB=y,x.prototype.DM=(1<<y)-1,x.prototype.DV=1<<y;x.prototype.FV=Math.pow(2,52),x.prototype.F1=52-y,x.prototype.F2=2*y-52;var E,S,k="0123456789abcdefghijklmnopqrstuvwxyz",C=new Array;for(E="0".charCodeAt(0),S=0;S<=9;++S)C[E++]=S;for(E="a".charCodeAt(0),S=10;S<36;++S)C[E++]=S;for(E="A".charCodeAt(0),S=10;S<36;++S)C[E++]=S;function I(e){return k.charAt(e)}function P(e,t){var n=C[e.charCodeAt(t)];return null==n?-1:n}function T(e){var t=O();return t.fromInt(e),t}function A(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function j(e){this.m=e}function R(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(e,t){return e&t}function B(e,t){return e|t}function D(e,t){return e^t}function L(e,t){return e&~t}function N(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function F(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function U(){}function G(e){return e}function H(e){this.r2=O(),this.q3=O(),x.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}j.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},j.prototype.revert=function(e){return e},j.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},j.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},j.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},R.prototype.convert=function(e){var t=O();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(x.ZERO)>0&&this.m.subTo(t,t),t},R.prototype.revert=function(e){var t=O();return e.copyTo(t),this.reduce(t),t},R.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},R.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},x.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},x.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},x.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,i=0;--r>=0;){var s=8==n?255&e[r]:P(e,r);s<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=n)>=this.DB&&(i-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&x.ZERO.subTo(this,this)},x.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},x.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},x.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},x.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,o=this.DB-r,i=(1<<o)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>o|a,a=(this[n]&i)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},x.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},x.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},x.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;--o>=0;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&x.ZERO.subTo(t,t)},x.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},x.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=O());var i=O(),s=this.s,a=e.s,c=this.DB-A(r[r.t-1]);c>0?(r.lShiftTo(c,i),o.lShiftTo(c,n)):(r.copyTo(i),o.copyTo(n));var u=i.t,l=i[u-1];if(0!=l){var f=l*(1<<this.F1)+(u>1?i[u-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,d=1<<this.F2,v=n.t,y=v-u,g=null==t?O():t;for(i.dlShiftTo(y,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),x.ONE.dlShiftTo(u,g),g.subTo(i,i);i.t<u;)i[i.t++]=0;for(;--y>=0;){var m=n[--v]==l?this.DM:Math.floor(n[v]*h+(n[v-1]+d)*p);if((n[v]+=i.am(0,m,n,y,0,u))<m)for(i.dlShiftTo(y,g),n.subTo(g,n);n[v]<--m;)n.subTo(g,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&x.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&x.ZERO.subTo(n,n)}}},x.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},x.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},x.prototype.exp=function(e,t){if(e>4294967295||e<1)return x.ONE;var n=O(),r=O(),o=t.convert(this),i=A(e)-1;for(o.copyTo(n);--i>=0;)if(t.sqrTo(n,r),(e&1<<i)>0)t.mulTo(r,o,n);else{var s=n;n=r,r=s}return t.revert(n)},x.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(o=!0,i=I(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(o=!0),o&&(i+=I(n));return o?i:"0"},x.prototype.negate=function(){var e=O();return x.ZERO.subTo(this,e),e},x.prototype.abs=function(){return this.s<0?this.negate():this},x.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},x.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},x.prototype.mod=function(e){var t=O();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(x.ZERO)>0&&e.subTo(t,t),t},x.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new j(t):new R(t),this.exp(e,n)},x.ZERO=T(0),x.ONE=T(1),U.prototype.convert=G,U.prototype.revert=G,U.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},U.prototype.sqrTo=function(e,t){e.squareTo(t)},H.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=O();return e.copyTo(t),this.reduce(t),t},H.prototype.revert=function(e){return e},H.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},H.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},H.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var V=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],q=(1<<26)/V[V.length-1];function K(){this.i=0,this.j=0,this.S=new Array}x.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},x.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=T(n),o=O(),i=O(),s="";for(this.divRemTo(r,o,i);o.signum()>0;)s=(n+i.intValue()).toString(e).substr(1)+s,o.divRemTo(r,o,i);return i.intValue().toString(e)+s},x.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),o=!1,i=0,s=0,a=0;a<e.length;++a){var c=P(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(o=!0):(s=t*s+c,++i>=n&&(this.dMultiply(r),this.dAddOffset(s,0),i=0,s=0))}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),o&&x.ZERO.subTo(this,this)},x.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(x.ONE.shiftLeft(e-1),B,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(x.ONE.shiftLeft(e-1),this);else{var r=new Array,o=7&e;r.length=1+(e>>3),t.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}},x.prototype.bitwiseTo=function(e,t,n){var r,o,i=Math.min(e.t,this.t);for(r=0;r<i;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(o=e.s&this.DM,r=i;r<this.t;++r)n[r]=t(this[r],o);n.t=this.t}else{for(o=this.s&this.DM,r=i;r<e.t;++r)n[r]=t(o,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},x.prototype.changeBit=function(e,t){var n=x.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},x.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},x.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},x.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},x.prototype.multiplyLowerTo=function(e,t,n){var r,o=Math.min(this.t+e.t,t);for(n.s=0,n.t=o;o>0;)n[--o]=0;for(r=n.t-this.t;o<r;++o)n[o+this.t]=this.am(0,e[o],n,o,0,this.t);for(r=Math.min(e.t,t);o<r;++o)this.am(0,e[o],n,o,0,t-o);n.clamp()},x.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},x.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},x.prototype.millerRabin=function(e){var t=this.subtract(x.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>V.length&&(e=V.length);for(var o=O(),i=0;i<e;++i){o.fromInt(V[Math.floor(Math.random()*V.length)]);var s=o.modPow(r,this);if(0!=s.compareTo(x.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(x.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},x.prototype.clone=function(){var e=O();return this.copyTo(e),e},x.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},x.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},x.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},x.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},x.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,o=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[o++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(t[o++]=n);return t},x.prototype.equals=function(e){return 0==this.compareTo(e)},x.prototype.min=function(e){return this.compareTo(e)<0?this:e},x.prototype.max=function(e){return this.compareTo(e)>0?this:e},x.prototype.and=function(e){var t=O();return this.bitwiseTo(e,M,t),t},x.prototype.or=function(e){var t=O();return this.bitwiseTo(e,B,t),t},x.prototype.xor=function(e){var t=O();return this.bitwiseTo(e,D,t),t},x.prototype.andNot=function(e){var t=O();return this.bitwiseTo(e,L,t),t},x.prototype.not=function(){for(var e=O(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},x.prototype.shiftLeft=function(e){var t=O();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},x.prototype.shiftRight=function(e){var t=O();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},x.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+N(this[e]);return this.s<0?this.t*this.DB:-1},x.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=F(this[n]^t);return e},x.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},x.prototype.setBit=function(e){return this.changeBit(e,B)},x.prototype.clearBit=function(e){return this.changeBit(e,L)},x.prototype.flipBit=function(e){return this.changeBit(e,D)},x.prototype.add=function(e){var t=O();return this.addTo(e,t),t},x.prototype.subtract=function(e){var t=O();return this.subTo(e,t),t},x.prototype.multiply=function(e){var t=O();return this.multiplyTo(e,t),t},x.prototype.divide=function(e){var t=O();return this.divRemTo(e,t,null),t},x.prototype.remainder=function(e){var t=O();return this.divRemTo(e,null,t),t},x.prototype.divideAndRemainder=function(e){var t=O(),n=O();return this.divRemTo(e,t,n),new Array(t,n)},x.prototype.modPow=function(e,t){var n,r,o=e.bitLength(),i=T(1);if(o<=0)return i;n=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new j(t):t.isEven()?new H(t):new R(t);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=r.convert(this),n>1){var l=O();for(r.sqrTo(s[1],l);a<=u;)s[a]=O(),r.mulTo(l,s[a-2],s[a]),a+=2}var f,h,p=e.t-1,d=!0,v=O();for(o=A(e[p])-1;p>=0;){for(o>=c?f=e[p]>>o-c&u:(f=(e[p]&(1<<o+1)-1)<<c-o,p>0&&(f|=e[p-1]>>this.DB+o-c)),a=n;0==(1&f);)f>>=1,--a;if((o-=a)<0&&(o+=this.DB,--p),d)s[f].copyTo(i),d=!1;else{for(;a>1;)r.sqrTo(i,v),r.sqrTo(v,i),a-=2;a>0?r.sqrTo(i,v):(h=i,i=v,v=h),r.mulTo(v,s[f],i)}for(;p>=0&&0==(e[p]&1<<o);)r.sqrTo(i,v),h=i,i=v,v=h,--o<0&&(o=this.DB-1,--p)}return r.revert(i)},x.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return x.ZERO;for(var n=e.clone(),r=this.clone(),o=T(1),i=T(0),s=T(0),a=T(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(e,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&o.subTo(s,o),i.subTo(a,i)):(r.subTo(n,r),t&&s.subTo(o,s),a.subTo(i,a))}return 0!=r.compareTo(x.ONE)?x.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},x.prototype.pow=function(e){return this.exp(e,new U)},x.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var o=t.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return t;for(o<i&&(i=o),i>0&&(t.rShiftTo(i,t),n.rShiftTo(i,n));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n},x.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=V[V.length-1]){for(t=0;t<V.length;++t)if(n[0]==V[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<V.length;){for(var r=V[t],o=t+1;o<V.length&&r<q;)r*=V[o++];for(r=n.modInt(r);t<o;)if(r%V[t++]==0)return!1}return n.millerRabin(e)},x.prototype.square=function(){var e=O();return this.squareTo(e),e},K.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},K.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var z,W,$,Y=256;function Z(){!function(e){W[$++]^=255&e,W[$++]^=e>>8&255,W[$++]^=e>>16&255,W[$++]^=e>>24&255,$>=Y&&($-=Y)}((new Date).getTime())}if(null==W){var X;if(W=new Array,$=0,void 0!==d&&(void 0!==d.crypto||void 0!==d.msCrypto)){var J=d.crypto||d.msCrypto;if(J.getRandomValues){var Q=new Uint8Array(32);for(J.getRandomValues(Q),X=0;X<32;++X)W[$++]=Q[X]}else if("Netscape"==p.appName&&p.appVersion<"5"){var ee=d.crypto.random(32);for(X=0;X<ee.length;++X)W[$++]=255&ee.charCodeAt(X)}}for(;$<Y;)X=Math.floor(65536*Math.random()),W[$++]=X>>>8,W[$++]=255&X;$=0,Z()}function te(){if(null==z){for(Z(),(z=new K).init(W),$=0;$<W.length;++$)W[$]=0;$=0}return z.next()}function ne(){}function re(e,t){return new x(e,t)}function oe(e,t,n){for(var r="",o=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o]))),o+=1;return r}function ie(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function se(e,t,n){for(var r="",o=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o])),o+=1;return r}function ae(e,t){this.x=t,this.q=e}function ce(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?x.ONE:r,this.zinv=null}function ue(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new ce(this,null,null)}ne.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=te()},ie.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ie.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=re(e,16),this.e=parseInt(t,16)}},ie.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var o=e.charCodeAt(r--);o<128?n[--t]=o:o>127&&o<2048?(n[--t]=63&o|128,n[--t]=o>>6|192):(n[--t]=63&o|128,n[--t]=o>>6&63|128,n[--t]=o>>12|224)}n[--t]=0;for(var i=new ne,s=new Array;t>2;){for(s[0]=0;0==s[0];)i.nextBytes(s);n[--t]=s[0]}return n[--t]=2,n[--t]=0,new x(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},ie.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var o=fe.crypto.MessageDigest,i=fe.crypto.Util,s=null;if(n||(n="sha1"),"string"==typeof n&&(s=o.getCanonicalAlgName(n),r=o.getHashLength(s),n=function(e){return ke(i.hashHex(Ce(e),s))}),e.length+2*r+2>t)throw"Message too long for RSA";var a,c="";for(a=0;a<t-e.length-2*r-2;a+=1)c+="\0";var u=n("")+c+""+e,l=new Array(r);(new ne).nextBytes(l);var f=oe(l,u.length,n),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^f.charCodeAt(a);var p=oe(h,l.length,n),d=[0];for(a=0;a<l.length;a+=1)d[a+1]=l[a]^p.charCodeAt(a);return new x(d.concat(h))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var o=this.doPublic(r);if(null==o)return null;var i=o.toString(16);return 0==(1&i.length)?i:"0"+i},ie.prototype.type="RSA",ie.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},ie.prototype.setPrivate=function(e,t,n){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=n;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=re(e,16),this.e=parseInt(t,16),this.d=re(n,16)}},ie.prototype.setPrivateEx=function(e,t,n,r,o,i,s,a){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=re(e,16),this.e=parseInt(t,16),this.d=re(n,16),this.p=re(r,16),this.q=re(o,16),this.dmp1=re(i,16),this.dmq1=re(s,16),this.coeff=re(a,16)},ie.prototype.generate=function(e,t){var n=new ne,r=e>>1;this.e=parseInt(t,16);for(var o=new x(t,16),i=e/2-100,s=x.ONE.shiftLeft(i);;){for(;this.p=new x(e-r,1,n),0!=this.p.subtract(x.ONE).gcd(o).compareTo(x.ONE)||!this.p.isProbablePrime(10););for(;this.q=new x(r,1,n),0!=this.q.subtract(x.ONE).gcd(o).compareTo(x.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var c=this.q.subtract(this.p).abs();if(!(c.bitLength()<i||c.compareTo(s)<=0)){var u=this.p.subtract(x.ONE),l=this.q.subtract(x.ONE),f=u.multiply(l);if(0==f.gcd(o).compareTo(x.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=o.modInverse(f),this.dmp1=this.d.mod(u),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},ie.prototype.decrypt=function(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=re(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var o="";++r<n.length;){var i=255&n[r];i<128?o+=String.fromCharCode(i):i>191&&i<224?(o+=String.fromCharCode((31&i)<<6|63&n[r+1]),++r):(o+=String.fromCharCode((15&i)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return o}(n,this.n.bitLength()+7>>3)},ie.prototype.decryptOAEP=function(e,t,n){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=re(e,16),o=this.doPrivate(r);return null==o?null:function(e,t,n,r){var o=fe.crypto.MessageDigest,i=fe.crypto.Util,s=null;for(n||(n="sha1"),"string"==typeof n&&(s=o.getCanonicalAlgName(n),r=o.getHashLength(s),n=function(e){return ke(i.hashHex(Ce(e),s))}),e=e.toByteArray(),a=0;a<e.length;a+=1)e[a]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*r+2)throw"Cipher too short";var a,c=e.substr(1,r),u=e.substr(r+1),l=se(u,r,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^l.charCodeAt(a);var h=se(String.fromCharCode.apply(String,f),e.length-r,n),p=[];for(a=0;a<u.length;a+=1)p[a]=u.charCodeAt(a)^h.charCodeAt(a);if((p=String.fromCharCode.apply(String,p)).substr(0,r)!==n(""))throw"Hash mismatch";var d=(p=p.substr(r)).indexOf("");if((-1!=d?p.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return p.substr(d+1)}(o,this.n.bitLength()+7>>3,t,n)},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ae.prototype.toBigInteger=function(){return this.x},ae.prototype.negate=function(){return new ae(this.q,this.x.negate().mod(this.q))},ae.prototype.add=function(e){return new ae(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ae.prototype.subtract=function(e){return new ae(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ae.prototype.multiply=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ae.prototype.square=function(){return new ae(this.q,this.x.square().mod(this.q))},ae.prototype.divide=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},ae.prototype.sqrt=function(){return new ae(this.q,this.x.sqrt().mod(this.q))},ce.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ce.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ce.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO))},ce.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(x.ZERO)&&!this.y.toBigInteger().equals(x.ZERO)},ce.prototype.negate=function(){return new ce(this.curve,this.x,this.y.negate(),this.z)},ce.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(x.ZERO.equals(n))return x.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new x("3"),o=this.x.toBigInteger(),i=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),a=s.multiply(n),c=o.multiply(s),u=t.square().multiply(this.z),l=u.subtract(c.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.q),f=c.multiply(r).multiply(t).subtract(i.multiply(a)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),h=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ce(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(f),h)},ce.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new x("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),o=r.multiply(n).mod(this.curve.q),i=this.curve.a.toBigInteger(),s=t.square().multiply(e);x.ZERO.equals(i)||(s=s.add(this.z.square().multiply(i)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(o)).shiftLeft(1).multiply(r).mod(this.curve.q),c=s.multiply(e).multiply(t).subtract(o.shiftLeft(1)).shiftLeft(2).multiply(o).subtract(s.square().multiply(s)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ce(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(c),u)},ce.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),o=this.negate(),i=this,s=this.curve.q.subtract(e),a=s.multiply(new x("3")),c=new ce(this.curve,this.x,this.y),u=c.negate();for(t=r.bitLength()-2;t>0;--t){i=i.twice();var l=r.testBit(t);l!=n.testBit(t)&&(i=i.add(l?this:o))}for(t=a.bitLength()-2;t>0;--t){c=c.twice();var f=a.testBit(t);f!=s.testBit(t)&&(c=c.add(f?c:u))}return i},ce.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var o=this.curve.getInfinity(),i=this.add(t);r>=0;)o=o.twice(),e.testBit(r)?o=n.testBit(r)?o.add(i):o.add(this):n.testBit(r)&&(o=o.add(t)),--r;return o},ue.prototype.getQ=function(){return this.q},ue.prototype.getA=function(){return this.a},ue.prototype.getB=function(){return this.b},ue.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ue.prototype.getInfinity=function(){return this.infinity},ue.prototype.fromBigInteger=function(e){return new ae(this.q,e)},ue.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),n=(e.substr(2),this.fromBigInteger(new x(a,16))),r=this.getA(),o=this.getB(),i=n.square().add(r).multiply(n).add(o).sqrt();return"03"==t&&(i=i.negate()),new ce(this,n,i);case 4:case 6:case 7:var s=(e.length-2)/2,a=e.substr(2,s),c=e.substr(s+2,s);return new ce(this,this.fromBigInteger(new x(a,16)),this.fromBigInteger(new x(c,16)));default:return null}},ae.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ce.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),o=t(n,32);return e?r.isEven()?o.unshift(2):o.unshift(3):(o.unshift(4),o=o.concat(t(r,32))),o},ce.decodeFrom=function(e,t){t[0];var n=t.length-1,r=t.slice(1,1+n/2),o=t.slice(1+n/2,1+n);r.unshift(0),o.unshift(0);var i=new x(r),s=new x(o);return new ce(e,e.fromBigInteger(i),e.fromBigInteger(s))},ce.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),o=t.substr(2+n/2,n/2),i=new x(r,16),s=new x(o,16);return new ce(e,e.fromBigInteger(i),e.fromBigInteger(s))},ce.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),o=n.multiply(this.x.subtract(r)).subtract(this.y);return new ce(this.curve,r,o)},ce.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(x.valueOf(2)),t=this.curve.fromBigInteger(x.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),o=n.multiply(this.x.subtract(r)).subtract(this.y);return new ce(this.curve,r,o)},ce.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),o=this.negate(),i=this;for(t=r.bitLength()-2;t>0;--t){i=i.twice();var s=r.testBit(t);s!=n.testBit(t)&&(i=i.add2D(s?this:o))}return i},ce.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),o=this.curve.getQ(),i=t.multiply(t).mod(o),s=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(o);return i.equals(s)},ce.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ce.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(x.ONE)<0||t.compareTo(e.subtract(x.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(x.ONE)<0||n.compareTo(e.subtract(x.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var le=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var o=new String(""),i=Object.hasOwnProperty;return function(n,s){var a,c,u=n.match(e),l=u[0],f=!1;"{"===l?a={}:"["===l?a=[]:(a=[],f=!0);for(var h=[a],p=1-f,d=u.length;p<d;++p){var v;switch((l=u[p]).charCodeAt(0)){default:(v=h[0])[c||v.length]=+l,c=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(t,r)),v=h[0],!c){if(!(v instanceof Array)){c=l||o;break}c=v.length}v[c]=l,c=void 0;break;case 91:v=h[0],h.unshift(v[c||v.length]=[]),c=void 0;break;case 93:case 125:h.shift();break;case 102:(v=h[0])[c||v.length]=!1,c=void 0;break;case 110:(v=h[0])[c||v.length]=null,c=void 0;break;case 116:(v=h[0])[c||v.length]=!0,c=void 0;break;case 123:v=h[0],h.unshift(v[c||v.length]={}),c=void 0}}if(f){if(1!==h.length)throw new Error;a=a[0]}else if(h.length)throw new Error;if(s){var y=function(e,t){var n=e[t];if(n&&"object"==typeof n){var r=null;for(var o in n)if(i.call(n,o)&&n!==e){var a=y(n,o);void 0!==a?n[o]=a:(r||(r=[]),r.push(o))}if(r)for(var c=r.length;--c>=0;)delete n[r[c]]}return s.call(e,t,n)};a=y({"":a},"")}return a}}();void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),fe.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",o=0;o<n;o++)r+="f";t=new x(r,16).xor(e).add(x.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Ae(e,t)},this.newObject=function(e){var t=fe.asn1,n=t.ASN1Object,r=t.DERBoolean,o=t.DERInteger,i=t.DERBitString,s=t.DEROctetString,a=t.DERNull,c=t.DERObjectIdentifier,u=t.DEREnumerated,l=t.DERUTF8String,f=t.DERNumericString,h=t.DERPrintableString,p=t.DERTeletexString,d=t.DERIA5String,v=t.DERUTCTime,y=t.DERGeneralizedTime,g=t.DERVisibleString,m=t.DERBMPString,_=t.DERSequence,b=t.DERSet,w=t.DERTaggedObject,x=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var O=Object.keys(e);if(1!=O.length)throw new Error("key of param shall be only one.");var E=O[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":"))throw new Error("undefined key: "+E);if("bool"==E)return new r(e[E]);if("int"==E)return new o(e[E]);if("bitstr"==E)return new i(e[E]);if("octstr"==E)return new s(e[E]);if("null"==E)return new a(e[E]);if("oid"==E)return new c(e[E]);if("enum"==E)return new u(e[E]);if("utf8str"==E)return new l(e[E]);if("numstr"==E)return new f(e[E]);if("prnstr"==E)return new h(e[E]);if("telstr"==E)return new p(e[E]);if("ia5str"==E)return new d(e[E]);if("utctime"==E)return new v(e[E]);if("gentime"==E)return new y(e[E]);if("visstr"==E)return new g(e[E]);if("bmpstr"==E)return new m(e[E]);if("asn1"==E)return new n(e[E]);if("seq"==E){for(var S=e[E],k=[],C=0;C<S.length;C++){var I=x(S[C]);k.push(I)}return new _({array:k})}if("set"==E){for(S=e[E],k=[],C=0;C<S.length;C++){I=x(S[C]);k.push(I)}return new b({array:k})}if("tag"==E){var P=e[E];if("[object Array]"===Object.prototype.toString.call(P)&&3==P.length){var T=x(P[2]);return new w({tag:P[0],explicit:P[1],obj:T})}return new w(P)}},this.jsonToASN1HEX=function(e){return this.newObject(e).tohex()}},fe.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),o=2;o<e.length;o+=2){var i=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);if(r+=i.substr(1,7),"0"==i.substr(0,1))t=t+"."+new x(r,2).toString(10),r=""}return t},fe.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new x(e,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";r=i+r;for(s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",o=e.split("."),i=40*parseInt(o[0])+parseInt(o[1]);r+=t(i),o.splice(0,2);for(var s=0;s<o.length;s++)r+=n(o[s]);return r},fe.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+e.toString(16));return(128+n).toString(16)+t},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},fe.asn1.DERAbstractString=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Oe(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},tt(fe.asn1.DERAbstractString,fe.asn1.ASN1Object),fe.asn1.DERAbstractTime=function(e){fe.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,n){var r=this.zeroPadding,o=this.localDateToUTC(e),i=String(o.getFullYear());"utc"==t&&(i=i.substr(2,2));var s=i+r(String(o.getMonth()+1),2)+r(String(o.getDate()),2)+r(String(o.getHours()),2)+r(String(o.getMinutes()),2)+r(String(o.getSeconds()),2);if(!0===n){var a=o.getMilliseconds();if(0!=a){var c=r(String(a),3);s=s+"."+(c=c.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.setByParam=function(e){this.hV=null,this.hTLV=null,this.params=e},this.getString=function(){},this.setString=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=e},this.setByDate=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=e},this.setByDateValue=function(e,t,n,r,o,i){var s=new Date(Date.UTC(e,t-1,n,r,o,i,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},tt(fe.asn1.DERAbstractTime,fe.asn1.ASN1Object),fe.asn1.DERAbstractStructured=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},tt(fe.asn1.DERAbstractStructured,fe.asn1.ASN1Object),fe.asn1.DERBoolean=function(e){fe.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},tt(fe.asn1.DERBoolean,fe.asn1.ASN1Object),fe.asn1.DERInteger=function(e){fe.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},tt(fe.asn1.DERInteger,fe.asn1.ASN1Object),fe.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}fe.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0),e+="0000000".substr(0,t);for(var n="",r=0;r<e.length-1;r+=8){var o=e.substr(r,8),i=parseInt(o,2).toString(16);1==i.length&&(i="0"+i),n+=i}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},tt(fe.asn1.DERBitString,fe.asn1.ASN1Object),fe.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}fe.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},tt(fe.asn1.DEROctetString,fe.asn1.DERAbstractString),fe.asn1.DERNull=function(){fe.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},tt(fe.asn1.DERNull,fe.asn1.ASN1Object),fe.asn1.DERObjectIdentifier=function(e){fe.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=$e(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=fe.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},tt(fe.asn1.DERObjectIdentifier,fe.asn1.ASN1Object),fe.asn1.DEREnumerated=function(e){fe.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},tt(fe.asn1.DEREnumerated,fe.asn1.ASN1Object),fe.asn1.DERUTF8String=function(e){fe.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},tt(fe.asn1.DERUTF8String,fe.asn1.DERAbstractString),fe.asn1.DERNumericString=function(e){fe.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},tt(fe.asn1.DERNumericString,fe.asn1.DERAbstractString),fe.asn1.DERPrintableString=function(e){fe.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},tt(fe.asn1.DERPrintableString,fe.asn1.DERAbstractString),fe.asn1.DERTeletexString=function(e){fe.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},tt(fe.asn1.DERTeletexString,fe.asn1.DERAbstractString),fe.asn1.DERIA5String=function(e){fe.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},tt(fe.asn1.DERIA5String,fe.asn1.DERAbstractString),fe.asn1.DERVisibleString=function(e){fe.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},tt(fe.asn1.DERVisibleString,fe.asn1.DERAbstractString),fe.asn1.DERBMPString=function(e){fe.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},tt(fe.asn1.DERBMPString,fe.asn1.DERAbstractString),fe.asn1.DERUTCTime=function(e){fe.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{12}Z$/)&&!e.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+e);this.hV=me(e)}else if(null!=e.str)this.hV=me(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=me(this.formatDate(t,"utc",!0))}else if(null!=e.date&&e.date instanceof Date){var n=!0===e.millis;this.hV=me(this.formatDate(e.date,"utc",n))}else e instanceof Date&&(this.hV=me(this.formatDate(e,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=e&&this.setByParam(e)},tt(fe.asn1.DERUTCTime,fe.asn1.DERAbstractTime),fe.asn1.DERGeneralizedTime=function(e){fe.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{14}Z$/)&&!e.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+e);this.hV=me(e)}else if(null!=e.str)this.hV=me(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=me(this.formatDate(t,"gen",!0))}else if(null!=e.date&&e.date instanceof Date){var n=!0===e.millis;this.hV=me(this.formatDate(e.date,"gen",n))}else e instanceof Date&&(this.hV=me(this.formatDate(e,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=e&&this.setByParam(e)},tt(fe.asn1.DERGeneralizedTime,fe.asn1.DERAbstractTime),fe.asn1.DERSequence=function(e){fe.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].tohex()}return this.hV=e,this.hV}},tt(fe.asn1.DERSequence,fe.asn1.DERAbstractStructured),fe.asn1.DERSet=function(e){fe.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.tohex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},tt(fe.asn1.DERSet,fe.asn1.DERAbstractStructured),fe.asn1.DERTaggedObject=function(e){fe.asn1.DERTaggedObject.superclass.constructor.call(this);var t=fe.asn1,n=de,r=n.getV,o=(n.isASN1HEX,t.ASN1Util.newObject);this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(e,t,n){this.params={tag:t,explicit:e,obj:n}},this.getFreshValueHex=function(){var e=this.params;if(null==e.explicit&&(e.explicit=!0),null!=e.tage&&(e.tag=e.tage,e.explicit=!0),null!=e.tagi&&(e.tag=e.tagi,e.explicit=!1),null!=e.str)this.hV=Oe(e.str);else if(null!=e.hex)this.hV=e.hex;else{if(null==e.obj)throw new Error("str, hex nor obj not specified");var n;e.obj instanceof t.ASN1Object?n=e.obj.tohex():"object"==typeof e.obj&&(n=o(e.obj).tohex()),e.explicit?this.hV=n:this.hV=r(n,0)}return null==e.tag&&(e.tag="a0"),this.hT=e.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.DERTaggedObject,fe.asn1.ASN1Object);var fe,he,pe,de=new function(){};function ve(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ye(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function ge(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function me(e){return ge(ve(e))}function _e(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function be(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function we(e){return e.length%2==1&&(e="0"+e),_e(_(e))}function xe(e){return b(be(e))}function Oe(e){return Be(qe(e)).toLowerCase()}function Ee(e){try{return decodeURIComponent(De(e))}catch(e){return null}}function Se(e){return Ee(function(e){for(var t=e.match(/.{1,2}/g),n=[],r=0;r<t.length;r++){var o=parseInt(t[r],16);161<=o&&o<=191?(n.push("c2"),n.push(t[r])):192<=o&&o<=255?(n.push("c3"),n.push((o-64).toString(16))):n.push(t[r])}return n.join("")}(e))}function ke(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Ce(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Ie(e){return _(e)}function Pe(e){var t=Ie(e).replace(/(.{64})/g,"$1\r\n");return t=t.replace(/\r\n$/,"")}function Te(e){return b(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ae(e,t){return"-----BEGIN "+t+"-----\r\n"+Pe(e)+"\r\n-----END "+t+"-----\r\n"}function je(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Te(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Re(e){var t,n,r,o,i,s,a,c,u,l,f;if(f=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return c=f[1],t=parseInt(c),2===c.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(f[2])-1,r=parseInt(f[3]),o=parseInt(f[4]),i=parseInt(f[5]),s=parseInt(f[6]),a=0,""!==(u=f[7])&&(l=(u.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(t,n,r,o,i,s,a);throw new Error("unsupported zulu format: "+e)}function Me(e){return Math.round(Re(e)/1e3)}function Be(e){return e.replace(/%/g,"")}function De(e){return e.replace(/(..)/g,"%$1")}function Le(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),o=(e=e.replace("::",r)).split(":");if(8!=o.length)throw t;for(var i=0;i<8;i++)o[i]=("0000"+o[i]).slice(-4);return o.join("")}function Ne(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);var t=(e=e.toLowerCase()).match(/.{1,4}/g);t=t.map((function(e){return e.replace(/^0+/,"")})),t=t.map((function(e){return""==e?"0":e}));var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null==n)return e.slice(1,-1);var r=n.sort().slice(-1)[0];return"::"!=(e=e.replace(r.substr(0,r.length-1),":")).substr(0,2)&&(e=e.substr(1)),"::"!=e.substr(-2,2)&&(e=e.substr(0,e.length-1)),e}function Fe(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8==e.length){try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}else{if(16!=e.length){if(32==e.length)return Ne(e);if(64==e.length){try{return Ne(e.substr(0,32))+"/"+Ue(e.substr(32))}catch(e){throw t}return}return e}try{return Fe(e.substr(0,8))+"/"+Ue(e.substr(8))}catch(e){throw t}}}function Ue(e){var t,n=new Error("malformed mask");try{t=new x(e,16).toString(2)}catch(e){throw n}if(!t.match(/^1*0*$/))throw n;return t.replace(/0+$/,"").length}function Ge(e){var t=new Error("malformed IP address");if(!(e=e.toLowerCase(e)).match(/^[0-9a-f.:/]+$/))throw t;if(!e.match(/^[0-9.]+$/)){var n;if(e.match(/^[0-9.]+\/[0-9]+$/))return Ge((n=e.split("/"))[0])+He(parseInt(n[1]),32);if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Le(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==e.indexOf(":"))return Le((n=e.split("/"))[0])+He(parseInt(n[1]),128);throw t}var r=e.split(".");if(4!==r.length)throw t;var o="";try{for(var i=0;i<4;i++){o+=("0"+parseInt(r[i]).toString(16)).slice(-2)}return o}catch(e){throw t}}function He(e,t){return 32==t&&0==e?"00000000":128==t&&0==e?"00000000000000000000000000000000":new x(Array(e+1).join("1")+Array(t-e+1).join("0"),2).toString(16)}function Ve(e){var t=e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2),16);if(0==t&n<128)return String.fromCharCode(n);if(t<8){var r=128|63&n;return Ee((192|(7&t)<<3|(192&n)>>6).toString(16)+r.toString(16))}r=128|(15&t)<<2|(192&n)>>6;var o=128|63&n;return Ee((224|(240&t)>>4).toString(16)+r.toString(16)+o.toString(16))}));return t.join("")}function qe(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+me(t[r]);return n}function Ke(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function ze(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}function We(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}de.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},de.getL=function(e,t){var n=de.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},de.getVblen=function(e,t){var n;return""==(n=de.getL(e,t))?-1:("8"===n.substr(0,1)?new x(n.substr(2),16):new x(n,16)).intValue()},de.getVidx=function(e,t){var n=de.getLblen(e,t);return n<0?n:t+2*(n+1)},de.getV=function(e,t){var n=de.getVidx(e,t),r=de.getVblen(e,t);return e.substr(n,2*r)},de.getTLV=function(e,t){return e.substr(t,2)+de.getL(e,t)+de.getV(e,t)},de.getTLVblen=function(e,t){return 2+2*de.getLblen(e,t)+2*de.getVblen(e,t)},de.getNextSiblingIdx=function(e,t){return de.getVidx(e,t)+2*de.getVblen(e,t)},de.getChildIdx=function(e,t){var n,r,o,i=de,s=[];n=i.getVidx(e,t),r=2*i.getVblen(e,t),"03"==e.substr(t,2)&&(n+=2,r-=2),o=0;for(var a=n;o<=r;){var c=i.getTLVblen(e,a);if((o+=c)<=r&&s.push(a),a+=c,o>=r)break}return s},de.getNthChildIdx=function(e,t,n){return de.getChildIdx(e,t)[n]},de.getIdxbyList=function(e,t,n,r){var o,i,s=de;return 0==n.length?void 0!==r&&e.substr(t,2)!==r?-1:t:(o=n.shift())>=(i=s.getChildIdx(e,t)).length?-1:s.getIdxbyList(e,i[o],n,r)},de.getIdxbyListEx=function(e,t,n,r){var o,i,s=de;if(0==n.length)return void 0!==r&&e.substr(t,2)!==r?-1:t;o=n.shift(),i=s.getChildIdx(e,t);for(var a=0,c=0;c<i.length;c++){var u=e.substr(i[c],2);if("number"==typeof o&&!s.isContextTag(u)&&a==o||"string"==typeof o&&s.isContextTag(u,o))return s.getIdxbyListEx(e,i[c],n,r);s.isContextTag(u)||a++}return-1},de.getTLVbyList=function(e,t,n,r){var o=de,i=o.getIdxbyList(e,t,n,r);return-1==i||i>=e.length?null:o.getTLV(e,i)},de.getTLVbyListEx=function(e,t,n,r){var o=de,i=o.getIdxbyListEx(e,t,n,r);return-1==i?null:o.getTLV(e,i)},de.getVbyList=function(e,t,n,r,o){var i,s,a=de;return-1==(i=a.getIdxbyList(e,t,n,r))||i>=e.length?null:(s=a.getV(e,i),!0===o&&(s=s.substr(2)),s)},de.getVbyListEx=function(e,t,n,r,o){var i,s,a=de;return-1==(i=a.getIdxbyListEx(e,t,n,r))?null:(s=a.getV(e,i),"03"==e.substr(i,2)&&!1!==o&&(s=s.substr(2)),s)},de.getInt=function(e,t,n){null==n&&(n=-1);try{var r=e.substr(t,2);if("02"!=r&&"03"!=r)return n;var o=de.getV(e,t);return"02"==r?parseInt(o,16):Xe(o)}catch(e){return n}},de.getOID=function(e,t,n){null==n&&(n=null);try{return"06"!=e.substr(t,2)?n:Ye(de.getV(e,t))}catch(e){return n}},de.getOIDName=function(e,t,n){null==n&&(n=null);try{var r=de.getOID(e,t,n);if(r==n)return n;var o=fe.asn1.x509.OID.oid2name(r);return""==o?r:o}catch(e){return n}},de.getString=function(e,t,n){null==n&&(n=null);try{return ke(de.getV(e,t))}catch(e){return n}},de.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),o=parseInt(r,16);n[0]=new String(Math.floor(o/40)),n[1]=new String(o%40);for(var i=e.substr(2),s=[],a=0;a<i.length/2;a++)s.push(parseInt(i.substr(2*a,2),16));var c=[],u="";for(a=0;a<s.length;a++)128&s[a]?u+=t((127&s[a]).toString(2),7):(u+=t((127&s[a]).toString(2),7),c.push(new String(parseInt(u,2))),u="");var l=n.join(".");return c.length>0&&(l=l+"."+c.join(".")),l},de.dump=function(e,t,n,r){var o=de,i=o.getV,s=o.dump,a=o.getChildIdx,c=e;e instanceof fe.asn1.ASN1Object&&(c=e.tohex());var u=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l,f=t.ommit_long_octet;if("01"==(l=c.substr(n,2)))return"00"==(h=i(c,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l)return r+"INTEGER "+u(h=i(c,n),f)+"\n";if("03"==l){var h=i(c,n);if(o.isASN1HEX(h.substr(2))){var p=r+"BITSTRING, encapsulates\n";return p+=s(h.substr(2),t,0,r+"  ")}return r+"BITSTRING "+u(h,f)+"\n"}if("04"==l){h=i(c,n);if(o.isASN1HEX(h)){p=r+"OCTETSTRING, encapsulates\n";return p+=s(h,t,0,r+"  ")}return r+"OCTETSTRING "+u(h,f)+"\n"}if("05"==l)return r+"NULL\n";if("06"==l){var d=i(c,n),v=fe.asn1.ASN1Util.oidHexToInt(d),y=fe.asn1.x509.OID.oid2name(v),g=v.replace(/\./g," ");return""!=y?r+"ObjectIdentifier "+y+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0a"==l)return r+"ENUMERATED "+parseInt(i(c,n))+"\n";if("0c"==l)return r+"UTF8String '"+Ee(i(c,n))+"'\n";if("13"==l)return r+"PrintableString '"+Ee(i(c,n))+"'\n";if("14"==l)return r+"TeletexString '"+Ee(i(c,n))+"'\n";if("16"==l)return r+"IA5String '"+Ee(i(c,n))+"'\n";if("17"==l)return r+"UTCTime "+Ee(i(c,n))+"\n";if("18"==l)return r+"GeneralizedTime "+Ee(i(c,n))+"\n";if("1a"==l)return r+"VisualString '"+Ee(i(c,n))+"'\n";if("1e"==l)return r+"BMPString '"+Ve(i(c,n))+"'\n";if("30"==l){if("3000"==c.substr(n,4))return r+"SEQUENCE {}\n";p=r+"SEQUENCE\n";var m=t;if((2==(w=a(c,n)).length||3==w.length)&&"06"==c.substr(w[0],2)&&"04"==c.substr(w[w.length-1],2)){y=o.oidname(i(c,w[0]));var _=JSON.parse(JSON.stringify(t));_.x509ExtName=y,m=_}for(var b=0;b<w.length;b++)p+=s(c,m,w[b],r+"  ");return p}if("31"==l){p=r+"SET\n";var w=a(c,n);for(b=0;b<w.length;b++)p+=s(c,t,w[b],r+"  ");return p}if(0!=(128&(l=parseInt(l,16)))){var x=31&l;if(0!=(32&l)){for(p=r+"["+x+"]\n",w=a(c,n),b=0;b<w.length;b++)p+=s(c,t,w[b],r+"  ");return p}h=i(c,n);if(de.isASN1HEX(h)){var p=r+"["+x+"]\n";return p+=s(h,t,0,r+"  ")}return("68747470"==h.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==x)&&(h=Ee(h)),p=r+"["+x+"] "+h+"\n"}return r+"UNKNOWN("+l+") "+i(c,n)+"\n"},de.parse=function(e){var t=de,n=t.parse,r=t.isASN1HEX,o=t.getV,i=t.getTLV,s=t.getChildIdx,a=fe.asn1,c=a.ASN1Util.oidHexToInt,u=a.x509.OID.oid2name,l=Ee,f=Ve,h=Se,p={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},d=e.substr(0,2),v={},y=o(e,0);if("01"==d)return"0101ff"==e?{bool:!0}:{bool:!1};if("02"==d)return{int:{hex:y}};if("03"==d)try{if("00"!=y.substr(0,2))throw"not encap";var g=y.substr(2);if(!r(g))throw"not encap";return{bitstr:{obj:n(g)}}}catch(e){var m=null;return y.length<=10&&(m=Qe(y)),null==m?{bitstr:{hex:y}}:{bitstr:{bin:m}}}else if("04"==d)try{if(!r(y))throw"not encap";return{octstr:{obj:n(y)}}}catch(e){return{octstr:{hex:y}}}else{if("05"==d)return{null:""};if("06"==d){var _=c(y),b=u(_);return""==b?{oid:_}:{oid:b}}if("0a"==d)return y.length>4?{enum:{hex:y}}:{enum:parseInt(y,16)};if("30"==d||"31"==d)return v[p[d]]=function(e){for(var t=[],r=s(e,0),o=0;o<r.length;o++){var a=r[o],c=i(e,a),u=n(c);t.push(u)}return t}(e),v;if("14"==d){var w=h(y);return v[p[d]]={str:w},v}if("1e"==d){w=f(y);return v[p[d]]={str:w},v}if(-1!=":0c:12:13:16:17:18:1a:".indexOf(d)){w=l(y);return v[p[d]]={str:w},v}if(d.match(/^8[0-9]$/))return null==(w=l(y))|""==w||null!=w.match(/[\x00-\x1F\x7F-\x9F]/)||null!=w.match(/[\u0000-\u001F\u0080–\u009F]/)?{tag:{tag:d,explicit:!1,hex:y}}:{tag:{tag:d,explicit:!1,str:w}};if(!d.match(/^a[0-9]$/)){var x=new fe.asn1.ASN1Object;return x.hV=y,{asn1:{tlv:d+x.getLengthHexFromValue()+y}}}try{if(!r(y))throw new Error("not encap");return{tag:{tag:d,explicit:!0,obj:n(y)}}}catch(e){return{tag:{tag:d,explicit:!0,hex:y}}}}},de.isContextTag=function(e,t){var n,r;e=e.toLowerCase();try{n=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&n);try{return null!=t.match(/^\[[0-9]+\]$/)&&(!((r=parseInt(t.substr(1,t.length-1),10))>31)&&(128==(192&n)&&(31&n)==r))}catch(e){return!1}},de.isASN1HEX=function(e){var t=de;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),o=t.getL(e,0);return e.length-r.length-o.length==2*n},de.checkStrictDER=function(e,t,n,r,o){var i=de;if(void 0===n){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!fe.lang.String.isHex(e))throw new Error("not hex string");n=e.length,o=(r=e.length/2)<128?1:Math.ceil(r.toString(16))+1}if(i.getL(e,t).length>2*o)throw new Error("L of TLV too long: idx="+t);var s=i.getVblen(e,t);if(s>r)throw new Error("value of L too long than hex: idx="+t);var a=i.getTLV(e,t),c=a.length-2-i.getL(e,t).length;if(c!==2*s)throw new Error("V string length and L's value not the same:"+c+"/"+2*s);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var u=e.substr(t,2);if("02"===u){var l=i.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(u,16)){for(var f=i.getVblen(e,t),h=0,p=i.getChildIdx(e,t),d=0;d<p.length;d++){h+=i.getTLV(e,p[d]).length,i.checkStrictDER(e,p[d],n,r,o)}if(2*f!=h)throw new Error("sum of children's TLV length and L unmatch: "+2*f+"!="+h)}},de.oidname=function(e){var t=fe.asn1;fe.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.x509&&fe.asn1.x509||(fe.asn1.x509={}),fe.asn1.x509.Certificate=function(e){fe.asn1.x509.Certificate.superclass.constructor.call(this);var t=fe.asn1,n=t.DERBitString,r=t.DERSequence,o=t.x509,i=o.TBSCertificate,s=o.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.sigalg;null!=e.sigalg.name&&(t=e.sigalg.name);var n=e.tbsobj.tohex(),r=new fe.crypto.Signature({alg:t});r.init(e.cakey),r.updateHex(n),e.sighex=r.sign()},this.getPEM=function(){return Ae(this.tohex(),"CERTIFICATE")},this.tohex=function(){var e=this.params;if(null!=e.tbsobj&&null!=e.tbsobj||(e.tbsobj=new i(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new s({name:e.sigalg})),t.push(new n({hex:"00"+e.sighex})),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},tt(fe.asn1.x509.Certificate,fe.asn1.ASN1Object),fe.asn1.x509.TBSCertificate=function(e){fe.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=fe.asn1,n=t.x509,r=t.DERTaggedObject,o=t.DERInteger,i=t.DERSequence,s=n.AlgorithmIdentifier,a=n.Time,c=n.X500Name,u=n.Extensions,l=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=[],t=this.params;if(null!=t.version||1!=t.version){var n=2;null!=t.version&&(n=t.version-1);var f=new r({obj:new o({int:n})});e.push(f)}return e.push(new o(t.serial)),e.push(new s({name:t.sigalg})),e.push(new c(t.issuer)),e.push(new i({array:[new a(t.notbefore),new a(t.notafter)]})),e.push(new c(t.subject)),e.push(new l(nt.getKey(t.sbjpubkey))),void 0!==t.ext&&t.ext.length>0&&e.push(new r({tag:"a3",obj:new u(t.ext)})),new fe.asn1.DERSequence({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.TBSCertificate,fe.asn1.ASN1Object),fe.asn1.x509.Extensions=function(e){fe.asn1.x509.Extensions.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.x509;this.aParam=[],this.setByParam=function(e){this.aParam=e},this.tohex=function(){for(var e=[],t=0;t<this.aParam.length;t++){var o=this.aParam[t],i=o.extname,s=null;if(null!=o.extn)s=new r.PrivateExtension(o);else if("subjectKeyIdentifier"==i)s=new r.SubjectKeyIdentifier(o);else if("keyUsage"==i)s=new r.KeyUsage(o);else if("subjectAltName"==i)s=new r.SubjectAltName(o);else if("issuerAltName"==i)s=new r.IssuerAltName(o);else if("basicConstraints"==i)s=new r.BasicConstraints(o);else if("nameConstraints"==i)s=new r.NameConstraints(o);else if("cRLDistributionPoints"==i)s=new r.CRLDistributionPoints(o);else if("certificatePolicies"==i)s=new r.CertificatePolicies(o);else if("authorityKeyIdentifier"==i)s=new r.AuthorityKeyIdentifier(o);else if("extKeyUsage"==i)s=new r.ExtKeyUsage(o);else if("authorityInfoAccess"==i)s=new r.AuthorityInfoAccess(o);else if("cRLNumber"==i)s=new r.CRLNumber(o);else if("cRLReason"==i)s=new r.CRLReason(o);else if("ocspNonce"==i)s=new r.OCSPNonce(o);else if("ocspNoCheck"==i)s=new r.OCSPNoCheck(o);else if("adobeTimeStamp"==i)s=new r.AdobeTimeStamp(o);else{if("subjectDirectoryAttributes"!=i)throw new Error("extension not supported:"+JSON.stringify(o));s=new r.SubjectDirectoryAttributes(o)}null!=s&&e.push(s)}return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.x509.Extensions,fe.asn1.ASN1Object),fe.asn1.x509.Extension=function(e){fe.asn1.x509.Extension.superclass.constructor.call(this);var t=fe.asn1,n=t.DERObjectIdentifier,r=t.DEROctetString,o=(t.DERBitString,t.DERBoolean),i=t.DERSequence;this.tohex=function(){var e=new n({oid:this.oid}),t=new r({hex:this.getExtnValueHex()}),s=new Array;return s.push(e),this.critical&&s.push(new o),s.push(t),new i({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},tt(fe.asn1.x509.Extension,fe.asn1.ASN1Object),fe.asn1.x509.KeyUsage=function(e){fe.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,n={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var e=this.getBinValue();return this.asn1ExtnValue=new fe.asn1.DERBitString({bin:e}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var e=this.params;if("object"!=typeof e||"object"!=typeof e.names&&"string"!=typeof e.bin)throw new t("parameter not yet set");if(null!=e.names)return et(e.names,n);if(null!=e.bin)return e.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",void 0!==e&&(this.params=e)},tt(fe.asn1.x509.KeyUsage,fe.asn1.x509.Extension),fe.asn1.x509.BasicConstraints=function(e){fe.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERBoolean,r=t.DERInteger,o=t.DERSequence;this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new n),this.pathLen>-1&&e.push(new r({int:this.pathLen}));var t=new o({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},tt(fe.asn1.x509.BasicConstraints,fe.asn1.x509.Extension),fe.asn1.x509.CRLDistributionPoints=function(e){fe.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=fe.asn1,n=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(e){for(var r=[],o=0;o<e.length;o++)if(e[o]instanceof fe.asn1.ASN1Object)r.push(e[o]);else{var i=new n.DistributionPoint(e[o]);r.push(i)}this.asn1ExtnValue=new t.DERSequence({array:r})},this.setByOneURI=function(e){var t=new n.DistributionPoint({fulluri:e});this.setByDPArray([t])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},tt(fe.asn1.x509.CRLDistributionPoints,fe.asn1.x509.Extension),fe.asn1.x509.DistributionPoint=function(e){fe.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=fe.asn1,n=t.x509.DistributionPointName;this.tohex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var n=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(n)}return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.dpobj?this.asn1DP=e.dpobj:void 0!==e.dpname?this.asn1DP=new n(e.dpname):void 0!==e.fulluri&&(this.asn1DP=new n({full:[{uri:e.fulluri}]})))},tt(fe.asn1.x509.DistributionPoint,fe.asn1.ASN1Object),fe.asn1.x509.DistributionPointName=function(e){fe.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=fe.asn1,n=t.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e)if(t.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else{if(void 0===e.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new t.x509.GeneralNames(e.full)}},tt(fe.asn1.x509.DistributionPointName,fe.asn1.ASN1Object),fe.asn1.x509.CertificatePolicies=function(e){fe.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=fe.asn1,n=t.x509,r=t.DERSequence,o=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new o(this.params.array[t]));var n=new r({array:e});return this.asn1ExtnValue=n,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},tt(fe.asn1.x509.CertificatePolicies,fe.asn1.x509.Extension),fe.asn1.x509.PolicyInformation=function(e){fe.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,o=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new r(this.params.policyoid)];if(void 0!==this.params.array){for(var t=[],i=0;i<this.params.array.length;i++)t.push(new o(this.params.array[i]));t.length>0&&e.push(new n({array:t}))}return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},tt(fe.asn1.x509.PolicyInformation,fe.asn1.ASN1Object),fe.asn1.x509.PolicyQualifierInfo=function(e){fe.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERSequence,r=t.DERIA5String,o=t.DERObjectIdentifier,i=t.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new n({array:[new o({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]}).tohex():null!=this.params.unotice?new n({array:[new o({oid:"1.3.6.1.5.5.7.2.2"}),new i(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},tt(fe.asn1.x509.PolicyQualifierInfo,fe.asn1.ASN1Object),fe.asn1.x509.UserNotice=function(e){fe.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=fe.asn1.DERSequence,n=(fe.asn1.DERInteger,fe.asn1.x509.DisplayText),r=fe.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new r(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new n(this.params.exptext)),new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},tt(fe.asn1.x509.UserNotice,fe.asn1.ASN1Object),fe.asn1.x509.NoticeReference=function(e){fe.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=fe.asn1.DERSequence,n=fe.asn1.DERInteger,r=fe.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var e=[];if(void 0!==this.params.org&&e.push(new r(this.params.org)),void 0!==this.params.noticenum){for(var o=[],i=this.params.noticenum,s=0;s<i.length;s++)o.push(new n(i[s]));e.push(new t({array:o}))}if(0==e.length)throw new Error("parameter is empty");return new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},tt(fe.asn1.x509.NoticeReference,fe.asn1.ASN1Object),fe.asn1.x509.DisplayText=function(e){fe.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},tt(fe.asn1.x509.DisplayText,fe.asn1.DERAbstractString),fe.asn1.x509.NameConstraints=function(e){fe.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=fe.asn1,n=t.x509,r=t.ASN1Util.newObject,o=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[];if(null!=e.permit&&null!=e.permit.length){for(var n=[],i=0;i<e.permit.length;i++)n.push(new o(e.permit[i]));t.push({tag:{tagi:"a0",obj:{seq:n}}})}if(null!=e.exclude&&null!=e.exclude.length){var s=[];for(i=0;i<e.exclude.length;i++)s.push(new o(e.exclude[i]));t.push({tag:{tagi:"a1",obj:{seq:s}}})}return this.asn1ExtnValue=r({seq:t}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==e&&(this.params=e)},tt(fe.asn1.x509.NameConstraints,fe.asn1.x509.Extension),fe.asn1.x509.GeneralSubtree=function(e){fe.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=fe.asn1,n=t.x509.GeneralName,r=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,t=[new n(e)];return null!=e.min&&t.push({tag:{tagi:"80",obj:{int:e.min}}}),null!=e.max&&t.push({tag:{tagi:"81",obj:{int:e.max}}}),r({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.GeneralSubtree,fe.asn1.ASN1Object),fe.asn1.x509.ExtKeyUsage=function(e){fe.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=fe.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var n=0;n<e.length;n++){var r=new t.DERObjectIdentifier(e[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},tt(fe.asn1.x509.ExtKeyUsage,fe.asn1.x509.Extension),fe.asn1.x509.AuthorityKeyIdentifier=function(e){fe.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=fe,n=t.asn1,r=n.DERTaggedObject,o=n.x509.GeneralNames;t.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new r({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new r({explicit:!1,tag:"a1",obj:new o([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new r({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new n.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new fe.asn1.DEROctetString(e);else if("object"==typeof e&&fe.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN ")){var t=e;"string"==typeof e&&(t=nt.getKey(e));var n=nt.getKeyID(t);this.asn1KID=new fe.asn1.DEROctetString({hex:n})}},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new fe.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new fe.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){if(void 0!==e.str||void 0!==e.bigint||void 0!==e.hex)this.asn1CertSN=new fe.asn1.DERInteger(e);else if("string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")){var t=new st;t.readCertPEM(e);var n=t.getSerialNumberHex();this.asn1CertSN=new fe.asn1.DERInteger({hex:n})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},tt(fe.asn1.x509.AuthorityKeyIdentifier,fe.asn1.x509.Extension),fe.asn1.x509.SubjectKeyIdentifier=function(e){fe.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=fe.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new t(e);else if("object"==typeof e&&fe.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN")){var n=e;"string"==typeof e&&(n=nt.getKey(e));var r=nt.getKeyID(n);this.asn1KID=new fe.asn1.DEROctetString({hex:r})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},tt(fe.asn1.x509.SubjectKeyIdentifier,fe.asn1.x509.Extension),fe.asn1.x509.AuthorityInfoAccess=function(e){fe.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,n=fe.asn1,r=n.DERSequence,o=n.DERObjectIdentifier,i=n.x509.GeneralName,s=0;s<e.length;s++){var a,c=e[s];if(void 0!==c.ocsp)a=new r({array:[new o({oid:"1.3.6.1.5.5.7.48.1"}),new i({uri:c.ocsp})]});else{if(void 0===c.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(c));a=new r({array:[new o({oid:"1.3.6.1.5.5.7.48.2"}),new i({uri:c.caissuer})]})}t.push(a)}this.asn1ExtnValue=new r({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},tt(fe.asn1.x509.AuthorityInfoAccess,fe.asn1.x509.Extension),fe.asn1.x509.SubjectAltName=function(e){fe.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new fe.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},tt(fe.asn1.x509.SubjectAltName,fe.asn1.x509.Extension),fe.asn1.x509.IssuerAltName=function(e){fe.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new fe.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},tt(fe.asn1.x509.IssuerAltName,fe.asn1.x509.Extension),fe.asn1.x509.SubjectDirectoryAttributes=function(e){fe.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERSequence,r=t.ASN1Util.newObject,o=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++){var i=this.params.array[t],s={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==i.attr)s.seq[0].oid=o(i.attr),s.seq[1].set[0]={gentime:i.str};else if("placeOfBirth"==i.attr)s.seq[0].oid=o(i.attr),s.seq[1].set[0]={utf8str:i.str};else if("gender"==i.attr)s.seq[0].oid=o(i.attr),s.seq[1].set[0]={prnstr:i.str};else if("countryOfCitizenship"==i.attr)s.seq[0].oid=o(i.attr),s.seq[1].set[0]={prnstr:i.str};else{if("countryOfResidence"!=i.attr)throw new Error("unsupported attribute: "+i.attr);s.seq[0].oid=o(i.attr),s.seq[1].set[0]={prnstr:i.str}}e.push(new r(s))}var a=new n({array:e});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==e&&(this.params=e)},tt(fe.asn1.x509.SubjectDirectoryAttributes,fe.asn1.x509.Extension),fe.asn1.x509.PrivateExtension=function(e){fe.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=fe,n=t.lang.String.isHex,r=t.asn1,o=r.x509.OID.name2oid,i=r.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.oid=o(e.extname),this.params=e},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var e=this.params.extn;if("string"==typeof e&&n(e))return e;if("object"==typeof e)try{return i(e).tohex()}catch(e){}throw new Error("unsupported extn value")},null!=e&&this.setByParam(e)},tt(fe.asn1.x509.PrivateExtension,fe.asn1.x509.Extension),fe.asn1.x509.CRL=function(e){fe.asn1.x509.CRL.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.DERBitString,o=t.x509,i=o.AlgorithmIdentifier,s=o.TBSCertList;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=new s(this.params).tohex(),t=new fe.crypto.Signature({alg:this.params.sigalg});t.init(this.params.cakey),t.updateHex(e);var n=t.sign();this.params.sighex=n},this.getPEM=function(){return Ae(this.tohex(),"X509 CRL")},this.tohex=function(){var e=this.params;if(null==e.tbsobj&&(e.tbsobj=new s(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new i({name:e.sigalg})),t.push(new r({hex:"00"+e.sighex})),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},tt(fe.asn1.x509.CRL,fe.asn1.ASN1Object),fe.asn1.x509.TBSCertList=function(e){fe.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=fe.asn1,n=t.DERInteger,r=t.DERSequence,o=t.DERTaggedObject,i=(t.DERObjectIdentifier,t.x509),s=i.AlgorithmIdentifier,a=i.Time,c=i.Extensions,u=i.X500Name;this.params=null,this.setByParam=function(e){this.params=e},this.getRevCertSequence=function(){for(var e=[],t=this.params.revcert,o=0;o<t.length;o++){var i=[new n(t[o].sn),new a(t[o].date)];null!=t[o].ext&&i.push(new c(t[o].ext)),e.push(new r({array:i}))}return new r({array:e})},this.tohex=function(){var e=[],t=this.params;if(null!=t.version){var i=t.version-1,l=new n({int:i});e.push(l)}if(e.push(new s({name:t.sigalg})),e.push(new u(t.issuer)),e.push(new a(t.thisupdate)),null!=t.nextupdate&&e.push(new a(t.nextupdate)),null!=t.revcert&&e.push(this.getRevCertSequence()),null!=t.ext){var f=new c(t.ext);e.push(new o({tag:"a0",explicit:!0,obj:f}))}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.TBSCertList,fe.asn1.ASN1Object),fe.asn1.x509.CRLEntry=function(e){fe.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=fe.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.tohex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},tt(fe.asn1.x509.CRLEntry,fe.asn1.ASN1Object),fe.asn1.x509.CRLNumber=function(e){fe.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new fe.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=e&&(this.params=e)},tt(fe.asn1.x509.CRLNumber,fe.asn1.x509.Extension),fe.asn1.x509.CRLReason=function(e){fe.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new fe.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=e&&(this.params=e)},tt(fe.asn1.x509.CRLReason,fe.asn1.x509.Extension),fe.asn1.x509.OCSPNonce=function(e){fe.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new fe.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=e&&(this.params=e)},tt(fe.asn1.x509.OCSPNonce,fe.asn1.x509.Extension),fe.asn1.x509.OCSPNoCheck=function(e){fe.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new fe.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=e&&(this.params=e)},tt(fe.asn1.x509.OCSPNoCheck,fe.asn1.x509.Extension),fe.asn1.x509.AdobeTimeStamp=function(e){fe.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERInteger,r=t.DERBoolean,o=t.DERSequence,i=t.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[new n(1)];return t.push(new i({uri:e.uri})),null!=e.reqauth&&t.push(new r(e.reqauth)),this.asn1ExtnValue=new o({array:t}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.AdobeTimeStamp,fe.asn1.x509.Extension),fe.asn1.x509.X500Name=function(e){fe.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=fe.asn1,n=t.x509,r=n.RDN;this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var n=e.split("/");n.shift();for(var o=[],i=0;i<n.length;i++)if(n[i].match(/^[^=]+=.+$/))o.push(n[i]);else{var s=o.length-1;o[s]=o[s]+"/"+n[i]}for(i=0;i<o.length;i++)this.asn1Array.push(new r({str:o[i],rule:this.sRule}))},this.setByLdapString=function(e,t){void 0!==t&&(this.sRule=t);var r=n.X500Name.ldapToCompat(e);this.setByString(r,t)},this.setByObject=function(e,t){for(var n in void 0!==t&&(this.sRule=t),e)if(e.hasOwnProperty(n)){var o=new r({str:n+"="+e[n],rule:this.sRule});this.asn1Array?this.asn1Array.push(o):this.asn1Array=[o]}},this.setByParam=function(e){var t;(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.array)?this.paramArray=e.array:void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):void 0!==e.hex?this.hTLV=e.hex:void 0!==e.certissuer?((t=new st).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()):void 0!==e.certsubject?((t=new st).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex()):"object"==typeof e&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var n={array:this.paramArray[e]};"utf8"!=this.sRule&&(n.rule=this.sRule);var o=new r(n);this.asn1Array.push(o)}var i=new t.DERSequence({array:this.asn1Array});return this.hTLV=i.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.X500Name,fe.asn1.ASN1Object),fe.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),t=t.map((function(e){return e.replace(/,/,"\\,")})),t.join(",")},fe.asn1.x509.X500Name.onelineToLDAP=function(e){return fe.asn1.x509.X500Name.compatToLDAP(e)},fe.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),n=!1,r=[],o=0;t.length>0;o++){var i=t.shift();if(!0===n){var s=(r.pop()+","+i).replace(/\\,/g,",");r.push(s),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}return r=r.map((function(e){return e.replace("/","\\/")})),r.reverse(),"/"+r.join("/")},fe.asn1.x509.X500Name.ldapToOneline=function(e){return fe.asn1.x509.X500Name.ldapToCompat(e)},fe.asn1.x509.RDN=function(e){fe.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=fe.asn1.x509.AttributeTypeAndValue;this.setByParam=function(e){void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.str&&this.addByMultiValuedString(e.str),void 0!==e.array&&(this.paramArray=e.array)},this.addByString=function(e){this.asn1Array.push(new fe.asn1.x509.AttributeTypeAndValue({str:e,rule:this.sRule}))},this.addByMultiValuedString=function(e){for(var t=fe.asn1.x509.RDN.parseString(e),n=0;n<t.length;n++)this.addByString(t[n])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var n=this.paramArray[e];void 0!==n.rule&&"utf8"!=this.sRule&&(n.rule=this.sRule);var r=new t(n);this.asn1Array.push(r)}var o=new fe.asn1.DERSet({array:this.asn1Array});return this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.RDN,fe.asn1.ASN1Object),fe.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,r=[],o=0;t.length>0;o++){var i=t.shift();if(!0===n){var s=(r.pop()+"+"+i).replace(/\\\+/g,"+");r.push(s),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}var a=!1,c=[];for(o=0;r.length>0;o++){i=r.shift();if(!0===a){var u=c.pop();if(i.match(/"$/)){s=(u+"+"+i).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(s),a=!1}else c.push(u+"+"+i)}else c.push(i);i.match(/^[^=]+="/)&&(a=!0)}return c},fe.asn1.x509.AttributeTypeAndValue=function(e){fe.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=fe,n=t.asn1,r=n.DERSequence,o=n.DERUTF8String,i=n.DERPrintableString,s=n.DERTeletexString,a=n.DERIA5String,c=n.DERVisibleString,u=n.DERBMPString,l=t.lang.String.isMail,f=t.lang.String.isPrintable;this.setByParam=function(e){if(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.ds&&(this.dsType=e.ds),void 0===e.value&&void 0!==e.str){var t=e.str.match(/^([^=]+)=(.+)$/);if(!t)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=t[1],this.sValue=t[2]}else this.sType=e.type,this.sValue=e.value},this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var n=e.match(/^([^=]+)=(.+)$/);if(!n)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(n[1],n[2])},this._getDsType=function(){var e=this.sType,t=this.sValue,n=this.sRule;return"prn"===n?"CN"==e&&l(t)?"ia5":f(t)?"prn":"utf8":"utf8"===n?"CN"==e&&l(t)?"ia5":"C"==e?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(e,t,n){void 0!==n&&(this.sRule=n),this.sType=e,this.sValue=t},this.getValueObj=function(e,t){if("utf8"==e)return new o({str:t});if("prn"==e)return new i({str:t});if("tel"==e)return new s({str:t});if("ia5"==e)return new a({str:t});if("vis"==e)return new c({str:t});if("bmp"==e)return new u({str:t});throw new Error("unsupported directory string type: type="+e+" value="+t)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var e=fe.asn1.x509.OID.atype2obj(this.sType),t=this.getValueObj(this.dsType,this.sValue),n=new r({array:[e,t]});return this.TLV=n.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.AttributeTypeAndValue,fe.asn1.ASN1Object),fe.asn1.x509.SubjectPublicKeyInfo=function(e){fe.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=fe,n=t.asn1,r=n.DERInteger,o=n.DERBitString,i=n.DERObjectIdentifier,s=n.DERSequence,a=n.ASN1Util.newObject,c=n.x509.AlgorithmIdentifier,u=t.crypto;u.ECDSA,u.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var e=this.getASN1Object();return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(e){try{if(e instanceof ie){var t=a({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).tohex();this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new o({hex:"00"+t})}}catch(e){}try{if(e instanceof fe.crypto.ECDSA){var n=new i({name:e.curveName});this.asn1AlgId=new c({name:"ecPublicKey",asn1params:n}),this.asn1SubjPKey=new o({hex:"00"+e.pubKeyHex})}}catch(e){}try{if(e instanceof fe.crypto.DSA){n=new a({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]});this.asn1AlgId=new c({name:"dsa",asn1params:n});var s=new r({bigint:e.y});this.asn1SubjPKey=new o({hex:"00"+s.tohex()})}}catch(e){}},void 0!==e&&this.setPubKey(e)},tt(fe.asn1.x509.SubjectPublicKeyInfo,fe.asn1.ASN1Object),fe.asn1.x509.Time=function(e){fe.asn1.x509.Time.superclass.constructor.call(this);var t=fe.asn1,n=t.DERUTCTime,r=t.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(e){this.timeParams=e},this.setByParam=function(e){this.params=e},this.getType=function(e){return e.match(/^[0-9]{12}Z$/)?"utc":e.match(/^[0-9]{14}Z$/)?"gen":e.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":e.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var e=this.params,t=null;if("string"==typeof e&&(e={str:e}),null==e||!e.str||null!=e.type&&null!=e.type||(e.type=this.getType(e.str)),null!=e&&e.str?("utc"==e.type&&(t=new n(e.str)),"gen"==e.type&&(t=new r(e.str))):t="gen"==this.type?new r:new n,null==t)throw new Error("wrong setting for Time");return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},fe.asn1.x509.Time_bak=function(e){fe.asn1.x509.Time_bak.superclass.constructor.call(this);var t=fe.asn1,n=t.DERUTCTime,r=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.tohex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},tt(fe.asn1.x509.Time,fe.asn1.ASN1Object),fe.asn1.x509.AlgorithmIdentifier=function(e){fe.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=fe.asn1,n=t.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e=null;for(var r in n)r===this.nameAlg&&(e=n[r]);if(null!==e)return this.hTLV=e,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];null!==this.asn1Params&&o.push(this.asn1Params);var i=new t.DERSequence({array:o});return this.hTLV=i.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();"withdsa"!==r.substr(-7,7)&&"withecdsa"!==r.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},tt(fe.asn1.x509.AlgorithmIdentifier,fe.asn1.ASN1Object),fe.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},fe.asn1.x509.GeneralName=function(e){fe.asn1.x509.GeneralName.superclass.constructor.call(this);var t=fe.asn1,n=t.x509,r=n.X500Name,o=n.OtherName,i=t.DERIA5String,s=(t.DERPrintableString,t.DEROctetString),a=t.DERTaggedObject,c=t.ASN1Object,u=Error;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e,t,n=this.params,l=!1;if(void 0!==n.other)e="a0",t=new o(n.other);else if(void 0!==n.rfc822)e="81",t=new i({str:n.rfc822});else if(void 0!==n.dns)e="82",t=new i({str:n.dns});else if(void 0!==n.dn)e="a4",l=!0,t="string"==typeof n.dn?new r({str:n.dn}):n.dn instanceof fe.asn1.x509.X500Name?n.dn:new r(n.dn);else if(void 0!==n.ldapdn)e="a4",l=!0,t=new r({ldapstr:n.ldapdn});else if(void 0!==n.certissuer||void 0!==n.certsubj){var f,h;e="a4",l=!0;var p=null;if(void 0!==n.certsubj?(f=!1,h=n.certsubj):(f=!0,h=n.certissuer),h.match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(p=je(h)),null==p)throw new Error("certsubj/certissuer not cert");var d,v=new st;v.hex=p,d=f?v.getIssuerHex():v.getSubjectHex(),(t=new c).hTLV=d}else if(void 0!==n.uri)e="86",t=new i({str:n.uri});else{if(void 0===n.ip)throw new u("improper params");var y;e="87";var g=n.ip;try{if(g.match(/^[0-9a-f]+$/)){var m=g.length;if(8!=m&&16!=m&&32!=m&&64!=m)throw"err";y=g}else y=Ge(g)}catch(e){throw new u("malformed IP address: "+n.ip+":"+e.message)}t=new s({hex:y})}return new a({tag:e,explicit:l,obj:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.GeneralName,fe.asn1.ASN1Object),fe.asn1.x509.GeneralNames=function(e){fe.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=fe.asn1;this.setByParamArray=function(e){for(var n=0;n<e.length;n++){var r=new t.x509.GeneralName(e[n]);this.asn1Array.push(r)}},this.tohex=function(){return new t.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},tt(fe.asn1.x509.GeneralNames,fe.asn1.ASN1Object),fe.asn1.x509.OtherName=function(e){fe.asn1.x509.OtherName.superclass.constructor.call(this);var t=fe.asn1,n=t.DERObjectIdentifier,r=t.DERSequence,o=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null==e.oid||null==e.value)throw new Error("oid or value not specified");var t=new n({oid:e.oid}),i=o({tag:{tag:"a0",explicit:!0,obj:e.value}});return new r({array:[t,i]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.x509.OtherName,fe.asn1.ASN1Object),fe.asn1.x509.OID=new function(){var e=fe.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var n=this.name2oidList[t],r=new e({oid:n});return this.objCache[t]=r,r},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];var n;if(t.match(/^\d+\.\d+\.[0-9.]+$/))n=t;else if(void 0!==this.atype2oidList[t])n=this.atype2oidList[t];else{if(void 0===this.name2oidList[t])throw new Error("AttributeType name undefined: "+t);n=this.name2oidList[t]}var r=new e({oid:n});return this.objCache[t]=r,r},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var t in e)this.name2oidList[t]=e[t]},this.checkOIDs=function(e){try{var t=Object.keys(e);return 0!=t.length&&(t.map((function(e,t,n){if(!this[e].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")}),e),!0)}catch(e){return!1}}},fe.asn1.x509.OID.oid2name=function(e){var t=fe.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},fe.asn1.x509.OID.oid2atype=function(e){var t=fe.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e},fe.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=fe.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},fe.asn1.x509.X509Util={},fe.asn1.x509.X509Util.newCertPEM=function(e){var t=fe.asn1.x509;t.TBSCertificate;return new(0,t.Certificate)(e).getPEM()},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.cms&&fe.asn1.cms||(fe.asn1.cms={}),fe.asn1.cms.Attribute=function(e){var t=Error,n=fe.asn1,r=n.DERSequence,o=n.DERSet,i=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(e){this.params=e},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var e=new i({oid:this.typeOid}),t=new o({array:this.getValueArray()});return new r({array:[e,t]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},tt(fe.asn1.cms.Attribute,fe.asn1.ASN1Object),fe.asn1.cms.ContentType=function(e){var t=fe.asn1;t.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new t.DERObjectIdentifier(this.params.type)]},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.ContentType,fe.asn1.cms.Attribute),fe.asn1.cms.MessageDigest=function(e){var t=fe.asn1,n=t.DEROctetString;t.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new n(this.params)]},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.MessageDigest,fe.asn1.cms.Attribute),fe.asn1.cms.SigningTime=function(e){var t=fe.asn1;t.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new t.x509.Time(this.params)]},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SigningTime,fe.asn1.cms.Attribute),fe.asn1.cms.SigningCertificate=function(e){var t=Error,n=fe,r=n.asn1,o=r.DERSequence,i=r.cms,s=i.ESSCertID;n.crypto;i.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var n=this.params.array,r=[],i=0;i<n.length;i++){var a=n[i];0!=e.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!de.isASN1HEX(a)||(a={cert:a}),0!=a.hasis&&0==e.hasis&&(a.hasis=!1),r.push(new s(a))}var c=new o({array:r});return[new o({array:[c]})]},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SigningCertificate,fe.asn1.cms.Attribute),fe.asn1.cms.ESSCertID=function(e){fe.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,n=fe,r=n.asn1,o=r.DEROctetString,i=r.DERSequence,s=r.cms.IssuerSerial;this.params=null,this.getCertHash=function(e,r){if(null!=e.hash)return e.hash;if("string"==typeof e&&-1==e.indexOf("-----BEGIN")&&!de.isASN1HEX(e))return e;var o,i,s;if("string"==typeof e)o=e;else{if(null==e.cert)throw new t("hash nor cert unspecified");o=e.cert}if(i=-1!=o.indexOf("-----BEGIN")?je(o):o,"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?i=je(e):de.isASN1HEX(e)&&(i=e)),null!=e.alg)s=e.alg;else{if(null==r)throw new t("hash alg unspecified");s=r}return n.crypto.Util.hashHex(i,s)},this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha1"),n=[];return n.push(new o({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&n.push(new s(e)),new i({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.ESSCertID,fe.asn1.ASN1Object),fe.asn1.cms.SigningCertificateV2=function(e){var t=Error,n=fe,r=n.asn1,o=r.DERSequence,i=(r.x509,r.cms),s=i.ESSCertIDv2;n.crypto;i.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var n=this.params.array,r=[],i=0;i<n.length;i++){var a=n[i];null==e.alg&&0!=e.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!de.isASN1HEX(a)||(a={cert:a}),null==a.alg&&null!=e.alg&&(a.alg=e.alg),0!=a.hasis&&0==e.hasis&&(a.hasis=!1),r.push(new s(a))}var c=new o({array:r});return[new o({array:[c]})]},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SigningCertificateV2,fe.asn1.cms.Attribute),fe.asn1.cms.ESSCertIDv2=function(e){fe.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);Error;var t=fe.asn1,n=t.DEROctetString,r=t.DERSequence,o=t.cms.IssuerSerial,i=t.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha256"),s=[];return null!=e.alg&&"sha256"!=e.alg&&s.push(new i({name:e.alg})),s.push(new n({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&s.push(new o(e)),new r({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.ESSCertIDv2,fe.asn1.cms.ESSCertID),fe.asn1.cms.IssuerSerial=function(e){var t=Error,n=fe.asn1,r=n.DERInteger,o=n.DERSequence,i=n.cms,s=n.x509.GeneralNames,a=st;i.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.tohex=function(){var e,n,i=this.params;if("string"==typeof i&&-1!=i.indexOf("-----BEGIN")||null!=i.cert){var c;c=null!=i.cert?i.cert:i;var u=new a;u.readCertPEM(c),e=u.getIssuer(),n={hex:u.getSerialNumberHex()}}else{if(null==i.issuer||!i.serial)throw new t("cert or issuer and serial parameter not specified");e=i.issuer,n=i.serial}var l=new s([{dn:e}]),f=new r(n);return new o({array:[l,f]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.IssuerSerial,fe.asn1.ASN1Object),fe.asn1.cms.SignerIdentifier=function(e){var t=fe.asn1,n=(t.DERInteger,t.DERSequence,t.cms),r=n.IssuerAndSerialNumber,o=n.SubjectKeyIdentifier;t.x509.X500Name,Error;n.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("isssn"==e.type)return new r(e).tohex();if("skid"==e.type)return new o(e).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SignerIdentifier,fe.asn1.ASN1Object),fe.asn1.cms.IssuerAndSerialNumber=function(e){var t=fe.asn1,n=t.DERInteger,r=t.DERSequence,o=t.cms,i=t.x509.X500Name,s=st,a=Error;o.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e,t,o=this.params;if("string"==typeof o&&-1!=o.indexOf("-----BEGIN")||null!=o.cert){var c;c=null!=o.cert?o.cert:o;var u=new s;u.readCertPEM(c),e=u.getIssuer(),t={hex:u.getSerialNumberHex()}}else{if(null==o.issuer||!o.serial)throw new a("cert or issuer and serial parameter not specified");e=o.issuer,t=o.serial}var l=new i(e),f=new n(t);return new r({array:[l,f]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.IssuerAndSerialNumber,fe.asn1.ASN1Object),fe.asn1.cms.SubjectKeyIdentifier=function(e){var t=fe.asn1,n=(t.DERInteger,t.DERSequence,t.ASN1Util.newObject),r=t.cms,o=(r.IssuerAndSerialName,r.SubjectKeyIdentifier,t.x509.X500Name,st),i=Error;r.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var e,t=this.params;if(null==t.cert&&null==t.skid)throw new i("property cert nor skid undefined");null!=t.cert?e=new o(t.cert).getExtSubjectKeyIdentifier().kid.hex:null!=t.skid&&(e=t.skid);return n({tag:{tage:"a0",obj:{octstr:{hex:e}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SubjectKeyIdentifier,fe.asn1.ASN1Object),fe.asn1.cms.AttributeList=function(e){var t=Error,n=fe.asn1,r=n.DERSet,o=n.cms;o.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null!=this.hTLV)return this.hTLV;var n=!0;null!=e.sortflag&&(n=e.sortflag);for(var i=e.array,s=[],a=0;a<i.length;a++){var c=i[a],u=c.attr;if("contentType"==u)s.push(new o.ContentType(c));else if("messageDigest"==u)s.push(new o.MessageDigest(c));else if("signingTime"==u)s.push(new o.SigningTime(c));else if("signingCertificate"==u)s.push(new o.SigningCertificate(c));else if("signingCertificateV2"==u)s.push(new o.SigningCertificateV2(c));else if("signaturePolicyIdentifier"==u)s.push(new fe.asn1.cades.SignaturePolicyIdentifier(c));else{if("signatureTimeStamp"!=u&&"timeStampToken"!=u)throw new t("unknown attr: "+u);s.push(new fe.asn1.cades.SignatureTimeStamp(c))}}var l=new r({array:s,sortflag:n});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.AttributeList,fe.asn1.ASN1Object),fe.asn1.cms.SignerInfo=function(e){var t=Error,n=fe,r=n.asn1,o=r.DERInteger,i=r.DEROctetString,s=r.DERSequence,a=r.DERTaggedObject,c=r.cms,u=c.SignerIdentifier,l=c.AttributeList,f=(c.ContentType,c.EncapsulatedContentInfo,c.MessageDigest,c.SignedData,r.x509.AlgorithmIdentifier),h=n.crypto,p=nt;c.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var e=this.params,t=e.sigalg,n=new l(e.sattrs).tohex(),r=p.getKey(e.signkey),o=new h.Signature({alg:t});o.init(r),o.updateHex(n);var i=o.sign();e.sighex=i},this.tohex=function(){var e=this.params,n=[];if(n.push(new o({int:e.version})),n.push(new u(e.id)),n.push(new f({name:e.hashalg})),null!=e.sattrs){var r=new l(e.sattrs);try{n.push(new a({tag:"a0",explicit:!1,obj:r}))}catch(e){throw new t("si sattr error: "+e)}}if(null!=e.sigalgfield?n.push(new f({name:e.sigalgfield})):n.push(new f({name:e.sigalg})),null==e.sighex&&null!=e.signkey&&this.sign(),n.push(new i({hex:e.sighex})),null!=e.uattrs){r=new l(e.uattrs);try{n.push(new a({tag:"a1",explicit:!1,obj:r}))}catch(e){throw new t("si uattr error: "+e)}}return new s({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SignerInfo,fe.asn1.ASN1Object),fe.asn1.cms.EncapsulatedContentInfo=function(e){var t=fe.asn1,n=t.DERTaggedObject,r=t.DERSequence,o=t.DERObjectIdentifier,i=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];if(t.push(new o(e.type)),null!=e.content&&(null!=e.content.hex||null!=e.content.str)&&1!=e.isDetached){var s=new i(e.content),a=new n({tag:"a0",explicit:!0,obj:s});t.push(a)}return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.EncapsulatedContentInfo,fe.asn1.ASN1Object),fe.asn1.cms.ContentInfo=function(e){var t=fe.asn1,n=t.DERTaggedObject,r=t.DERSequence,o=t.DERObjectIdentifier;t.x509.OID.name2obj;fe.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];t.push(new o(e.type));var i=new n({tag:"a0",explicit:!0,obj:e.obj});return t.push(i),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.ContentInfo,fe.asn1.ASN1Object),fe.asn1.cms.SignedData=function(e){Error;var t=fe.asn1,n=(t.ASN1Object,t.DERInteger),r=t.DERSet,o=t.DERSequence,i=(t.DERTaggedObject,t.cms),s=i.EncapsulatedContentInfo,a=i.SignerInfo,c=i.ContentInfo,u=i.CertificateSet,l=i.RevocationInfoChoices,f=t.x509.AlgorithmIdentifier;fe.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var e=this.params;this._setDigestAlgs(e),this._setContentTypeByEContent(e),this._setMessageDigestByEContent(e),this._setSignerInfoVersion(e),this._setSignedDataVersion(e)},this._setDigestAlgs=function(e){for(var t={},n=e.sinfos,r=0;r<n.length;r++){t[n[r].hashalg]=1}e.hashalgs=Object.keys(t).sort()},this._setContentTypeByEContent=function(e){for(var t=e.econtent.type,n=e.sinfos,r=0;r<n.length;r++){var o=n[r];this._getAttrParamByName(o,"contentType").type=t}},this._setMessageDigestByEContent=function(e){var t=e.econtent,n=(e.econtent.type,t.content.hex);null==n&&"data"==t.type&&null!=t.content.str&&(n=Ce(t.content.str));for(var r=e.sinfos,o=0;o<r.length;o++){var i=r[o],s=i.hashalg,a=this._getAttrParamByName(i,"messageDigest"),c=fe.crypto.Util.hashHex(n,s);a.hex=c}},this._getAttrParamByName=function(e,t){for(var n=e.sattrs.array,r=0;r<n.length;r++)if(n[r].attr==t)return n[r]},this._setSignerInfoVersion=function(e){for(var t=e.sinfos,n=0;n<t.length;n++){var r=t[n],o=1;"skid"==r.id.type&&(o=3),r.version=o}},this._setSignedDataVersion=function(e){var t=this._getSignedDataVersion(e);e.version=t},this._getSignedDataVersion=function(e){if(null!=e.revinfos)for(var t=e.revinfos,n=0;n<t.length;n++){if(null!=t[n].ocsp)return 5}var r=e.sinfos;for(n=0;n<r.length;n++){if(3==e.sinfos[n].version)return 3}return"data"!=e.econtent.type?3:1},this.tohex=function(){var e=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=e.fixed&&this.checkAndFixParam();var t=[];t.push(new n({int:e.version}));for(var i=[],c=0;c<e.hashalgs.length;c++){var h=e.hashalgs[c];i.push(new f({name:h}))}t.push(new r({array:i})),t.push(new s(e.econtent)),null!=e.certs&&t.push(new u(e.certs)),null!=e.revinfos&&t.push(new l(e.revinfos));var p=[];for(c=0;c<e.sinfos.length;c++){var d=e.sinfos[c];p.push(new a(d))}return t.push(new r({array:p})),new o({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.SignedData,fe.asn1.ASN1Object),fe.asn1.cms.CertificateSet=function(e){fe.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,n=fe.asn1,r=n.DERTaggedObject,o=n.DERSet,i=n.ASN1Object;this.params=null,this.tohex=function(){var e,n=this.params,s=[];if(n instanceof Array)e=n;else{if(null==n.array)throw new t("cert array not specified");e=n.array}for(var a=0;a<e.length;a++){var c=je(e[a]),u=new i;u.hTLV=c,s.push(u)}var l={array:s};0==n.sortflag&&(l.sortflag=!1);var f=new o(l);return new r({tag:"a0",explicit:!1,obj:f}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.CertificateSet,fe.asn1.ASN1Object),fe.asn1.cms.RevocationInfoChoices=function(e){fe.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var t=[],n=0;n<e.length;n++)t.push(new fe.asn1.cms.RevocationInfoChoice(e[n]));return fe.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:t}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.RevocationInfoChoices,fe.asn1.ASN1Object),fe.asn1.cms.RevocationInfoChoice=function(e){fe.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null!=e.crl&&"string"==typeof e.crl){var t=e.crl;return-1!=e.crl.indexOf("-----BEGIN")&&(t=je(e.crl)),t}if(null!=e.ocsp)return fe.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new fe.asn1.cms.OtherRevocationFormat(e)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.RevocationInfoChoice,fe.asn1.ASN1Object),fe.asn1.cms.OtherRevocationFormat=function(e){fe.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,n=fe,r=n.asn1.ASN1Util.newObject,o=n.lang.String.isHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.ocsp)throw new t("property ocsp not specified");if(!o(e.ocsp)||!de.isASN1HEX(e.ocsp))throw new t("ocsp value not ASN.1 hex string");return r({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:e.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cms.OtherRevocationFormat,fe.asn1.ASN1Object),fe.asn1.cms.CMSUtil=new function(){},fe.asn1.cms.CMSUtil.newSignedData=function(e){return new fe.asn1.cms.SignedData(e)},fe.asn1.cms.CMSUtil.verifySignedData=function(e){var t=fe,n=t.asn1,r=n.cms,o=(r.SignerInfo,r.SignedData,r.SigningTime,r.SigningCertificate,r.SigningCertificateV2,n.cades.SignaturePolicyIdentifier,t.lang.String.isHex),i=de,s=i.getVbyList,a=i.getTLVbyList,c=i.getIdxbyList,u=i.getChildIdx,l=i.getTLV,f=i.oidname,h=t.crypto.Util.hashHex;void 0===e.cms&&o(e.cms);var p=e.cms,d=function(e,t){var n=t.idx;t.signerid_issuer1=a(e,n,[1,0],"30"),t.signerid_serial1=s(e,n,[1,1],"02"),t.hashalg=f(s(e,n,[2,0],"06"));var r=c(e,n,[3],"a0");t.idxSignedAttrs=r,v(e,t,r);var o=u(e,n).length;if(o<6)throw"malformed SignerInfo";t.sigalg=f(s(e,n,[o-2,0],"06")),t.sigval=s(e,n,[o-1],"04")},v=function(e,t,n){var r=u(e,n);t.signedAttrIdxList=r;for(var o=0;o<r.length;o++){var i,a=r[o],c=s(e,a,[0],"06");"2a864886f70d010905"===c?(i=Ee(s(e,a,[1,0])),t.saSigningTime=i):"2a864886f70d010904"===c&&(i=s(e,a,[1,0],"04"),t.saMessageDigest=i)}},y=function(e,t,n,r){n.verifyDetail={};var o=n.verifyDetail,i=t.parse.econtent,s=n.hashalg,a=n.saMessageDigest;o.validMessageDigest=!1,h(i,s)===a&&(o.validMessageDigest=!0),function(e,t,n,r){var o,i=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var s=u(e,i),a=0;a<s.length;a++){var c=l(e,s[a]),f=new st;f.readCertHex(c),o[a]=f,t.certkeys[a]=f.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=s.length,a=0;a<o.length;a++){var h=f.getIssuerHex(),p=f.getSerialNumberHex();n.signerid_issuer1===h&&n.signerid_serial1===p&&(n.certkey_idx=a)}}(e,t,n),o.validSignatureValue=!1;var c=n.sigalg,f="31"+l(e,n.idxSignedAttrs).substr(2);n.signedattrshex=f;var p=t.certs[n.certkey_idx].getPublicKey(),d=new fe.crypto.Signature({alg:c});d.init(p),d.updateHex(f);var v=d.verify(n.sigval);o.validSignatureValue_isValid=v,!0===v&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},g={isValid:!1,parse:{}};return function(e,t){if("2a864886f70d010702"!==s(e,0,[0],"06"))return t;t.cmsType="signedData",t.econtent=s(e,0,[1,0,2,1,0]),function(e,t){for(var n,r=3;r<6;r++)if(void 0!==(n=c(e,0,[1,0,r]))){var o=e.substr(n,2);"a0"===o&&(t.certsIdx=n),"a1"===o&&(t.revinfosIdx=n),"31"===o&&(t.signerinfosIdx=n)}}(e,t),t.signerInfos=[],function(e,t){var n=t.signerinfosIdx;if(void 0!==n){var r=u(e,n);t.signerInfoIdxList=r;for(var o=0;o<r.length;o++){var i={idx:r[o]};d(e,i),t.signerInfos.push(i)}}}(e,t)}(p,g.parse),function(e,t){for(var n=t.parse.signerInfos,r=n.length,o=!0,i=0;i<r;i++){var s=n[i];y(e,t,s,i),s.isValid||(o=!1)}t.isValid=o}(p,g),g},fe.asn1.cms.CMSParser=function(){var e=Error,t=st,n=new t,r=de,o=r.getV,i=r.getTLV,s=(r.getIdxbyList,r.getTLVbyList),a=r.getTLVbyListEx,c=r.getVbyList,u=r.getVbyListEx,l=r.getChildIdx;this.getCMSSignedData=function(e){var t=s(e,0,[1,0]);return this.getSignedData(t)},this.getSignedData=function(e){var t=l(e,0),n={},r=o(e,t[0]),s=parseInt(r,16);n.version=s;var c=i(e,t[1]);n.hashalgs=this.getHashAlgArray(c);var u=i(e,t[2]);n.econtent=this.getEContent(u);var f=a(e,0,["[0]"]);null!=f&&(n.certs=this.getCertificateSet(f));a(e,0,["[1]"]);var h=a(e,0,[3]);return n.sinfos=this.getSignerInfos(h),n},this.getHashAlgArray=function(e){for(var n=l(e,0),r=new t,o=[],s=0;s<n.length;s++){var a=i(e,n[s]),c=r.getAlgorithmIdentifierName(a);o.push(c)}return o},this.getEContent=function(e){var t={},n=c(e,0,[0]),r=c(e,0,[1,0]);return t.type=fe.asn1.x509.OID.oid2name(de.hextooidstr(n)),t.content={hex:r},t},this.getSignerInfos=function(e){for(var t=[],n=l(e,0),r=0;r<n.length;r++){var o=i(e,n[r]),s=this.getSignerInfo(o);t.push(s)}return t},this.getSignerInfo=function(e){var t={},o=l(e,0),s=r.getInt(e,o[0],-1);-1!=s&&(t.version=s);var c=i(e,o[1]),f=this.getIssuerAndSerialNumber(c);t.id=f;var h=i(e,o[2]),p=n.getAlgorithmIdentifierName(h);t.hashalg=p;var d=a(e,0,["[0]"]);if(null!=d){var v=this.getAttributeList(d);t.sattrs=v}var y=a(e,0,[3]),g=n.getAlgorithmIdentifierName(y);t.sigalg=g;var m=u(e,0,[4]);t.sighex=m;var _=a(e,0,["[1]"]);if(null!=_){var b=this.getAttributeList(_);t.uattrs=b}return t},this.getSignerIdentifier=function(e){if("30"==e.substr(0,2))return this.getIssuerAndSerialNumber(e);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(e){var t={type:"isssn"},r=l(e,0),s=i(e,r[0]);t.issuer=n.getX500Name(s);var a=o(e,r[1]);return t.serial={hex:a},t},this.getAttributeList=function(e){for(var t=[],n=l(e,0),r=0;r<n.length;r++){var o=i(e,n[r]),s=this.getAttribute(o);t.push(s)}return{array:t}},this.getAttribute=function(e){var t={},n=l(e,0),o=r.getOID(e,n[0]),s=fe.asn1.x509.OID.oid2name(o);t.attr=s;var a=i(e,n[1]),c=l(a,0);if(1==c.length)t.valhex=i(a,c[0]);else{for(var u=[],f=0;f<c.length;f++)u.push(i(a,c[f]));t.valhex=u}return"contentType"==s?this.setContentType(t):"messageDigest"==s?this.setMessageDigest(t):"signingTime"==s?this.setSigningTime(t):"signingCertificate"==s?this.setSigningCertificate(t):"signingCertificateV2"==s?this.setSigningCertificateV2(t):"signaturePolicyIdentifier"==s&&this.setSignaturePolicyIdentifier(t),t},this.setContentType=function(e){var t=r.getOIDName(e.valhex,0,null);null!=t&&(e.type=t,delete e.valhex)},this.setSigningTime=function(e){var t=Ee(o(e.valhex,0));e.str=t,delete e.valhex},this.setMessageDigest=function(e){var t=o(e.valhex,0);e.hex=t,delete e.valhex},this.setSigningCertificate=function(e){var t=l(e.valhex,0);if(t.length>0){for(var n=i(e.valhex,t[0]),r=l(n,0),o=[],s=0;s<r.length;s++){var a=i(n,r[s]),c=this.getESSCertID(a);o.push(c)}e.array=o}if(t.length>1){var u=i(e.valhex,t[1]);e.polhex=u}delete e.valhex},this.setSignaturePolicyIdentifier=function(e){var n=l(e.valhex,0);if(n.length>0){var s=r.getOID(e.valhex,n[0]);e.oid=s}if(n.length>1){var a=new t,c=l(e.valhex,n[1]),u=i(e.valhex,c[0]),f=a.getAlgorithmIdentifierName(u);e.alg=f;var h=o(e.valhex,c[1]);e.hash=h}delete e.valhex},this.setSigningCertificateV2=function(e){var t=l(e.valhex,0);if(t.length>0){for(var n=i(e.valhex,t[0]),r=l(n,0),o=[],s=0;s<r.length;s++){var a=i(n,r[s]),c=this.getESSCertIDv2(a);o.push(c)}e.array=o}if(t.length>1){var u=i(e.valhex,t[1]);e.polhex=u}delete e.valhex},this.getESSCertID=function(e){var t={},n=l(e,0);if(n.length>0){var r=o(e,n[0]);t.hash=r}if(n.length>1){var s=i(e,n[1]),a=this.getIssuerSerial(s);null!=a.serial&&(t.serial=a.serial),null!=a.issuer&&(t.issuer=a.issuer)}return t},this.getESSCertIDv2=function(t){var r={},s=l(t,0);if(s.length<1||3<s.length)throw new e("wrong number of elements");var a=0;if("30"==t.substr(s[0],2)){var c=i(t,s[0]);r.alg=n.getAlgorithmIdentifierName(c),a++}else r.alg="sha256";var u=o(t,s[a]);if(r.hash=u,s.length>a+1){var f=i(t,s[a+1]),h=this.getIssuerSerial(f);r.issuer=h.issuer,r.serial=h.serial}return r},this.getIssuerSerial=function(e){var t={},r=l(e,0),s=i(e,r[0]),a=n.getGeneralNames(s)[0].dn;t.issuer=a;var c=o(e,r[1]);return t.serial={hex:c},t},this.getCertificateSet=function(e){for(var t=l(e,0),n=[],r=0;r<t.length;r++){var o=i(e,t[r]);if("30"==o.substr(0,2)){var s=Ae(o,"CERTIFICATE");n.push(s)}}return{array:n,sortflag:!1}}},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.tsp&&fe.asn1.tsp||(fe.asn1.tsp={}),fe.asn1.tsp.TimeStampToken=function(e){var t=fe.asn1.tsp;t.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var e=new t.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=e.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.TimeStampToken,fe.asn1.cms.SignedData),fe.asn1.tsp.TSTInfo=function(e){Error;var t=fe.asn1,n=t.DERSequence,r=t.DERInteger,o=t.DERBoolean,i=t.DERGeneralizedTime,s=t.DERObjectIdentifier,a=t.DERTaggedObject,c=t.tsp,u=c.MessageImprint,l=c.Accuracy,f=(t.x509.X500Name,t.x509.GeneralName);if(c.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(e.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(e.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(e.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new n({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new s({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new u(e.messageImprint)),void 0!==e.serial&&(this.dSerial=new r(e.serial)),void 0!==e.genTime&&(this.dGenTime=new i(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new l(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new o),void 0!==e.nonce&&(this.dNonce=new r(e.nonce)),void 0!==e.tsa&&(this.dTsa=new a({tag:"a0",explicit:!0,obj:new f({dn:e.tsa})}))}},tt(fe.asn1.tsp.TSTInfo,fe.asn1.ASN1Object),fe.asn1.tsp.Accuracy=function(e){var t=fe.asn1,n=t.ASN1Util.newObject;t.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return null!=e.seconds&&"number"==typeof e.seconds&&t.push({int:e.seconds}),null!=e.millis&&"number"==typeof e.millis&&t.push({tag:{tagi:"80",obj:{int:e.millis}}}),null!=e.micros&&"number"==typeof e.micros&&t.push({tag:{tagi:"81",obj:{int:e.micros}}}),n({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.Accuracy,fe.asn1.ASN1Object),fe.asn1.tsp.MessageImprint=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DEROctetString,o=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=new o({name:e.alg}),i=new r({hex:e.hash});return new n({array:[t,i]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.tsp.MessageImprint,fe.asn1.ASN1Object),fe.asn1.tsp.TimeStampReq=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DERInteger,o=t.DERBoolean,i=(t.ASN1Object,t.DERObjectIdentifier),s=t.tsp,a=s.MessageImprint;s.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new r({int:1})),e.messageImprint instanceof fe.asn1.ASN1Object?t.push(e.messageImprint):t.push(new a(e.messageImprint)),null!=e.policy&&t.push(new i(e.policy)),null!=e.nonce&&t.push(new r(e.nonce)),1==e.certreq&&t.push(new o),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.TimeStampReq,fe.asn1.ASN1Object),fe.asn1.tsp.TimeStampResp=function(e){var t=fe.asn1,n=t.DERSequence,r=(t.ASN1Object,t.tsp),o=r.PKIStatusInfo;r.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,i=[];if(null!=e.econtent||null!=e.tst)if(null!=e.statusinfo?i.push(new o(e.statusinfo)):i.push(new o("granted")),null!=e.econtent)i.push(new r.TimeStampToken(e).getContentInfo());else{if(!(e.tst instanceof t.ASN1Object))throw new Error("improper member tst value");i.push(e.tst)}else{if(null==e.statusinfo)throw new Error("parameter for token nor statusinfo not specified");i.push(new o(e.statusinfo))}return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.TimeStampResp,fe.asn1.ASN1Object),fe.asn1.tsp.PKIStatusInfo=function(e){var t=Error,n=fe.asn1,r=n.DERSequence,o=n.tsp,i=o.PKIStatus,s=o.PKIFreeText,a=o.PKIFailureInfo;o.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,n=[];if("string"==typeof e)n.push(new i(e));else{if(null==e.status)throw new t("property 'status' unspecified");n.push(new i(e.status)),null!=e.statusstr&&n.push(new s(e.statusstr)),null!=e.failinfo&&n.push(new a(e.failinfo))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.PKIStatusInfo,fe.asn1.ASN1Object),fe.asn1.tsp.PKIStatus=function(e){var t=Error,n=fe.asn1,r=n.DERInteger;n.tsp.PKIStatus.superclass.constructor.call(this);var o={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var e,n=this.params;if("string"==typeof n)try{e=o[n]}catch(e){throw new t("undefined name: "+n)}else{if("number"!=typeof n)throw new t("unsupported params");e=n}return new r({int:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.PKIStatus,fe.asn1.ASN1Object),fe.asn1.tsp.PKIFreeText=function(e){var t=Error,n=fe.asn1,r=n.DERSequence,o=n.DERUTF8String;n.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new t("wrong params: not array");for(var n=[],i=0;i<e.length;i++)n.push(new o({str:e[i]}));return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.PKIFreeText,fe.asn1.ASN1Object),fe.asn1.tsp.PKIFailureInfo=function(e){var t=Error,n=fe.asn1,r=n.DERBitString,o=n.tsp.PKIFailureInfo,i={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};o.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var e=this.params,n=0;if("number"==typeof e&&0<=e&&e<=25){for(var r=(n|=1<<e).toString(2),o="",s=r.length-1;s>=0;s--)o+=r[s];return o}if("string"==typeof e&&null!=i[e])return et([e],i);if("object"==typeof e&&null!=e.length)return et(e,i);throw new t("wrong params")},this.tohex=function(){this.params;var e=this.getBinValue();return new r({bin:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.tsp.PKIFailureInfo,fe.asn1.ASN1Object),fe.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},fe.asn1.tsp.SimpleTSAAdapter=function(e){var t=fe,n=t.asn1.tsp,r=t.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var o=r(e,t);this.params.econtent.content.messageImprint={alg:t,hash:o},this.params.econtent.content.serial={int:this.serial++};var i=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:i},new n.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},tt(fe.asn1.tsp.SimpleTSAAdapter,fe.asn1.tsp.AbstractTSAAdapter),fe.asn1.tsp.FixedTSAAdapter=function(e){var t=fe,n=t.asn1.tsp,r=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var o=r(e,t);return this.params.econtent.content.messageImprint={alg:t,hash:o},new n.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},tt(fe.asn1.tsp.FixedTSAAdapter,fe.asn1.tsp.AbstractTSAAdapter),fe.asn1.tsp.TSPUtil=new function(){},fe.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new fe.asn1.tsp.TimeStampToken(e)},fe.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){return(new fe.asn1.tsp.TSPParser).getTimeStampReq(e)},fe.asn1.tsp.TSPUtil.parseMessageImprint=function(e){return(new fe.asn1.tsp.TSPParser).getMessageImprint(e)},fe.asn1.tsp.TSPParser=function(){Error;var e=new st,t=de,n=t.getV,r=t.getTLV,o=t.getIdxbyList,i=(t.getTLVbyListEx,t.getChildIdx),s=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],a={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(e){var t=i(e,0);if(1==t.length)return this.getPKIStatusInfo(r(e,t[0]));if(t.length>1){var n=this.getPKIStatusInfo(r(e,t[0])),o=r(e,t[1]),s=this.getToken(o);return s.statusinfo=n,s}},this.getToken=function(e){var t=(new fe.asn1.cms.CMSParser).getCMSSignedData(e);return this.setTSTInfo(t),t},this.setTSTInfo=function(e){var t=e.econtent;if("tstinfo"==t.type){var n=t.content.hex,r=this.getTSTInfo(n);t.content=r}},this.getTSTInfo=function(t){var o={},s=i(t,0),a=n(t,s[1]);o.policy=Ye(a);var c=r(t,s[2]);o.messageImprint=this.getMessageImprint(c);var u=n(t,s[3]);o.serial={hex:u};var l=n(t,s[4]);o.genTime={str:Ee(l)};var f=0;if(s.length>5&&"30"==t.substr(s[5],2)){var h=r(t,s[5]);o.accuracy=this.getAccuracy(h),f++}s.length>5+f&&"01"==t.substr(s[5+f],2)&&("ff"==n(t,s[5+f])&&(o.ordering=!0),f++);if(s.length>5+f&&"02"==t.substr(s[5+f],2)){var p=n(t,s[5+f]);o.nonce={hex:p},f++}if(s.length>5+f&&"a0"==t.substr(s[5+f],2)){var d=r(t,s[5+f]);d="30"+d.substr(2),pGeneralNames=e.getGeneralNames(d);var v=pGeneralNames[0].dn;o.tsa=v,f++}if(s.length>5+f&&"a1"==t.substr(s[5+f],2)){var y=r(t,s[5+f]);y="30"+y.substr(2);var g=e.getExtParamArray(y);o.ext=g,f++}return o},this.getAccuracy=function(e){for(var t={},r=i(e,0),o=0;o<r.length;o++){var s=e.substr(r[o],2),a=n(e,r[o]),c=parseInt(a,16);"02"==s?t.seconds=c:"80"==s?t.millis=c:"81"==s&&(t.micros=c)}return t},this.getMessageImprint=function(e){if("30"!=e.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var r={},s=(i(e,0),o(e,0,[0,0])),a=n(e,s),c=t.hextooidstr(a),u=fe.asn1.x509.OID.oid2name(c);if(""==u)throw new Error("hashAlg name undefined: "+c);var l=u,f=o(e,0,[1]);return r.alg=l,r.hash=n(e,f),r},this.getPKIStatusInfo=function(e){var t={},o=i(e,0),a=0;try{var c=n(e,o[0]),u=parseInt(c,16);t.status=s[u]}catch(e){}if(o.length>1&&"30"==e.substr(o[1],2)){var l=r(e,o[1]);t.statusstr=this.getPKIFreeText(l),a++}if(o.length>a&&"03"==e.substr(o[1+a],2)){var f=r(e,o[1+a]);t.failinfo=this.getPKIFailureInfo(f)}return t},this.getPKIFreeText=function(e){for(var n=[],r=i(e,0),o=0;o<r.length;o++)n.push(t.getString(e,r[o]));return n},this.getPKIFailureInfo=function(e){var n=t.getInt(e,0);return null!=a[n]?a[n]:n},this.getTimeStampReq=function(e){var o={certreq:!1},s=i(e,0);if(s.length<2)throw new Error("TimeStampReq must have at least 2 items");var a=r(e,s[1]);o.messageImprint=fe.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var c=2;c<s.length;c++){var u=s[c],l=e.substr(u,2);if("06"==l){var f=n(e,u);o.policy=t.hextooidstr(f)}"02"==l&&(o.nonce=n(e,u)),"01"==l&&(o.certreq=!0)}return o}},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.cades&&fe.asn1.cades||(fe.asn1.cades={}),fe.asn1.cades.SignaturePolicyIdentifier=function(e){var t=fe.asn1.cades,n=t.SignaturePolicyId;t.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new n(this.params)]},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.SignaturePolicyIdentifier,fe.asn1.cms.Attribute),fe.asn1.cades.SignaturePolicyId=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,o=(t.x509.AlgorithmIdentifier,t.cades),i=o.SignaturePolicyId,s=o.OtherHashAlgAndValue;i.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new r(e.oid)),t.push(new s(e)),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.SignaturePolicyId,fe.asn1.ASN1Object),fe.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,n=fe.asn1,r=n.DERSequence,o=n.DEROctetString,i=n.x509.AlgorithmIdentifier;n.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null==e.alg)throw new t("property 'alg' not specified");if(null==e.hash&&null==e.cert)throw new t("property 'hash' nor 'cert' not specified");var n=null;if(null!=e.hash)n=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var s=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(s=je(e.cert)),n=fe.crypto.Util.hashHex(s,e.alg)}var a=[];return a.push(new i({name:e.alg})),a.push(new o({hex:n})),new r({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.OtherHashAlgAndValue,fe.asn1.ASN1Object),fe.asn1.cades.OtherHashValue=function(e){fe.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,n=fe,r=(n.lang.String.isHex,n.asn1.DEROctetString);n.crypto.Util.hashHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.hash&&null==e.cert)throw new t("hash or cert not specified");var n=null;if(null!=e.hash)n=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var o=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(o=je(e.cert)),n=fe.crypto.Util.hashHex(o,"sha1")}return new r({hex:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.OtherHashValue,fe.asn1.ASN1Object),fe.asn1.cades.SignatureTimeStamp=function(e){var t=Error,n=fe,r=n.lang.String.isHex,o=n.asn1,i=o.ASN1Object;o.x509;o.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var e=this.params;if(null!=e.tst){if(r(e.tst))return(o=new i).hTLV=e.tst,[o];if(e.tst instanceof i)return[e.tst];throw new t("params.tst has wrong value")}if(null!=e.res){var n=e.res;if(n instanceof i&&(n=n.tohex()),"string"!=typeof n||!r(n))throw new t("params.res has wrong value");var o;de.getTLVbyList(n,0,[1]);return(o=new i).hTLV=e.tst,[o]}},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.SignatureTimeStamp,fe.asn1.cms.Attribute),fe.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,n=fe,r=n.asn1,o=r.DERSequence,i=r.cades,s=i.OtherCertID,a=n.lang.String.isHex;i.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var e=this.params,n=[],r=0;r<e.array.length;r++){var i=e.array[r];if("string"==typeof i)if(-1!=i.indexOf("-----BEGIN"))i={cert:i};else{if(!a(i))throw new t("unsupported value: "+i);i={hash:i}}null!=e.alg&&null==i.alg&&(i.alg=e.alg),null!=e.hasis&&null==i.hasis&&(i.hasis=e.hasis);var c=new s(i);n.push(c)}return[new o({array:n})]},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.CompleteCertificateRefs,fe.asn1.cms.Attribute),fe.asn1.cades.OtherCertID=function(e){var t=fe.asn1,n=t.DERSequence,r=t.cms.IssuerSerial,o=t.cades,i=o.OtherHashValue,s=o.OtherHashAlgAndValue;o.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var e=this.params;"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:_isHex(e)&&(e={hash:e}));var t=[],o=null;if(o=null!=e.alg?new s(e):new i(e),t.push(o),null!=e.cert&&1==e.hasis||null!=e.issuer&&null!=e.serial){var a=new r(e);t.push(a)}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.OtherCertID,fe.asn1.ASN1Object),fe.asn1.cades.OtherHash=function(e){Error;var t=fe,n=t.asn1,r=(n.cms,n.cades),o=r.OtherHashAlgAndValue,i=r.OtherHashValue,s=(t.crypto.Util.hashHex,t.lang.String.isHex);r.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:s(e)&&(e={hash:e}));return(null!=e.alg?new o(e):new i(e)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.cades.OtherHash,fe.asn1.ASN1Object),fe.asn1.cades.CAdESUtil=new function(){},fe.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){return(new fe.asn1.cms.CMSParser).getCMSSignedData(e)},fe.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=de,o=r.getChildIdx,i=r.getTLV,s=r.getV,a=fe.asn1,c=a.ASN1Object,u=a.cms,l=u.AttributeList,f=u.SignerInfo,h={},p=o(e,t);if(6!=p.length)throw"not supported items for SignerInfo (!=6)";var d=p.shift();h.version=i(e,d);var v=p.shift();h.si=i(e,v);var y=p.shift();h.digalg=i(e,y);var g=p.shift();h.sattrs=i(e,g);var m=p.shift();h.sigalg=i(e,m);var _=p.shift();h.sig=i(e,_),h.sigval=s(e,_);var b=null;return h.obj=new f,(b=new c).hTLV=h.version,h.obj.dCMSVersion=b,(b=new c).hTLV=h.si,h.obj.dSignerIdentifier=b,(b=new c).hTLV=h.digalg,h.obj.dDigestAlgorithm=b,(b=new c).hTLV=h.sattrs,h.obj.dSignedAttrs=b,(b=new c).hTLV=h.sigalg,h.obj.dSigAlg=b,(b=new c).hTLV=h.sig,h.obj.dSig=b,h.obj.dUnsignedAttrs=new l,h},void 0!==fe.asn1.csr&&fe.asn1.csr||(fe.asn1.csr={}),fe.asn1.csr.CertificationRequest=function(e){var t=fe.asn1,n=t.DERBitString,r=t.DERSequence,o=t.csr,i=(t.x509,o.CertificationRequestInfo);o.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.sign=function(){var e=new i(this.params).tohex(),t=new fe.crypto.Signature({alg:this.params.sigalg});t.init(this.params.sbjprvkey),t.updateHex(e);var n=t.sign();this.params.sighex=n},this.getPEM=function(){return Ae(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var e=this.params,t=new fe.asn1.csr.CertificationRequestInfo(this.params),o=new fe.asn1.x509.AlgorithmIdentifier({name:e.sigalg});if(null==e.sighex&&null!=e.sbjprvkey&&this.sign(),null==e.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var i=new n({hex:"00"+e.sighex});return new r({array:[t,o,i]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.csr.CertificationRequest,fe.asn1.ASN1Object),fe.asn1.csr.CertificationRequestInfo=function(e){var t=fe.asn1,n=(t.DERBitString,t.DERSequence),r=t.DERInteger,o=t.DERUTF8String,i=t.DERTaggedObject,s=t.ASN1Util.newObject,a=t.csr,c=t.x509,u=c.X500Name,l=c.Extensions,f=c.SubjectPublicKeyInfo;a.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(e){null!=e&&(this.params=e)},this.tohex=function(){var e=this.params,t=[];if(t.push(new r({int:0})),t.push(new u(e.subject)),t.push(new f(nt.getKey(e.sbjpubkey))),null!=e.extreq){var a=new l(e.extreq),c=s({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[a]}]}}});t.push(c)}else t.push(new i({tag:"a0",explicit:!1,obj:new o({str:""})}));return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},tt(fe.asn1.csr.CertificationRequestInfo,fe.asn1.ASN1Object),fe.asn1.csr.CSRUtil=new function(){},fe.asn1.csr.CSRUtil.newCSRPEM=function(e){return new fe.asn1.csr.CertificationRequest(e).getPEM()},fe.asn1.csr.CSRUtil.getParam=function(e){var t=de,n=t.getV,r=t.getIdxbyList,o=t.getTLVbyList,i=t.getTLVbyListEx,s=t.getVbyListEx,a={};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var c=je(e,"CERTIFICATE REQUEST");try{var u=i(c,0,[0,1]);if("3000"==u)a.subject={};else{var l=new st;a.subject=l.getX500Name(u)}}catch(e){}var f=i(c,0,[0,2]),h=nt.getKey(f,null,"pkcs8pub");a.sbjpubkey=nt.getPEM(h,"PKCS8PUB");var p=function(e){var t=r(e,0,[0,3,0,0],"06");return"2a864886f70d01090e"!=n(e,t)?null:o(e,0,[0,3,0,1,0],"30")}(c);l=new st;null!=p&&(a.extreq=l.getExtParamArray(p));try{var d=i(c,0,[1],"30");l=new st;a.sigalg=l.getAlgorithmIdentifierName(d)}catch(e){}try{var v=s(c,0,[2]);a.sighex=v}catch(e){}return a},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.ocsp&&fe.asn1.ocsp||(fe.asn1.ocsp={}),fe.asn1.ocsp.DEFAULT_HASH="sha1",fe.asn1.ocsp.OCSPResponse=function(e){fe.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);fe.asn1.DEREnumerated;var t=fe.asn1.ASN1Util.newObject,n=fe.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var e=this.params.resstatus;return"number"==typeof e?e:"string"!=typeof e?-1:r.indexOf(e)},this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,r=this._getStatusCode();if(-1==r)throw new Error("responseStatus not supported: "+e.resstatus);if(0!=r)return t({seq:[{enum:{int:r}}]}).tohex();var o=new n(e);return t({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:o}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.OCSPResponse,fe.asn1.ASN1Object),fe.asn1.ocsp.ResponseBytes=function(e){fe.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,o=t.DEROctetString,i=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if("ocspBasic"!=e.restype)throw new Error("not supported responseType: "+e.restype);var t=new i(e),s=[];return s.push(new r({name:"ocspBasic"})),s.push(new o({hex:t.tohex()})),new n({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.ResponseBytes,fe.asn1.ASN1Object),fe.asn1.ocsp.BasicOCSPResponse=function(e){fe.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,n=fe.asn1,r=n.ASN1Object,o=n.DERSequence,i=(n.DERGeneralizedTime,n.DERTaggedObject),s=n.DERBitString,a=(n.x509.Extensions,n.x509.AlgorithmIdentifier),c=n.ocsp;c.ResponderID;_SingleResponseList=c.SingleResponseList,_ResponseData=c.ResponseData,this.params=null,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.tbsresp.tohex(),n=new fe.crypto.Signature({alg:e.sigalg});n.init(e.reskey),n.updateHex(t),e.sighex=n.sign()},this.tohex=function(){var e=this.params;null==e.tbsresp&&(e.tbsresp=new _ResponseData(e)),null==e.sighex&&null!=e.reskey&&this.sign();var n=[];if(n.push(e.tbsresp),n.push(new a({name:e.sigalg})),n.push(new s({hex:"00"+e.sighex})),null!=e.certs&&null!=e.certs.length){for(var c=[],u=0;u<e.certs.length;u++){var l=e.certs[u],f=null;if(de.isASN1HEX(l))f=l;else{if(!l.match(/-----BEGIN/))throw new t("certs["+u+"] not hex or PEM");f=je(l)}c.push(new r({tlv:f}))}var h=new o({array:c});n.push(new i({tag:"a0",explicit:!0,obj:h}))}return new o({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.BasicOCSPResponse,fe.asn1.ASN1Object),fe.asn1.ocsp.ResponseData=function(e){fe.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,n=fe.asn1,r=n.DERSequence,o=n.DERGeneralizedTime,i=n.DERTaggedObject,s=n.x509.Extensions,a=n.ocsp,c=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var e=this.params;null!=e.respid&&new t("respid not specified"),null!=e.prodat&&new t("prodat not specified"),null!=e.array&&new t("array not specified");var n=[];if(n.push(new c(e.respid)),n.push(new o(e.prodat)),n.push(new _SingleResponseList(e.array)),null!=e.ext){var a=new s(e.ext);n.push(new i({tag:"a1",explicit:!0,obj:a}))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.ResponseData,fe.asn1.ASN1Object),fe.asn1.ocsp.ResponderID=function(e){fe.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=fe,n=t.asn1,r=n.ASN1Util.newObject,o=n.x509.X500Name,i=t.lang.String.isHex,s=Error;this.params=null,this.tohex=function(){var e=this.params;if(null!=e.key){var t,n=null;if("string"==typeof e.key){if(i(e.key)&&(n=e.key),e.key.match(/-----BEGIN CERTIFICATE/))null!=(t=new st(e.key).getExtSubjectKeyIdentifier())&&(n=t.kid.hex)}else if(e.key instanceof st)null!=(t=e.key.getExtSubjectKeyIdentifier())&&(n=t.kid.hex);if(null==n)throw new s("wrong key member value");return r({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:n}}}}).tohex()}if(null!=e.name){var a=null;if("string"==typeof e.name&&e.name.match(/-----BEGIN CERTIFICATE/))a=new st(e.name).getSubject();else e.name instanceof st?a=e.name.getSubject():"object"!=typeof e.name||null==e.name.array&&null==e.name.str||(a=e.name);if(null==a)throw new s("wrong name member value");return r({tag:{tag:"a1",explicit:!0,obj:new o(a)}}).tohex()}throw new s("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.ResponderID,fe.asn1.ASN1Object),fe.asn1.ocsp.SingleResponseList=function(e){fe.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var e=this.params;if("object"!=typeof e||null==e.length)throw new Error("params not specified properly");for(var t=[],o=0;o<e.length;o++)t.push(new r(e[o]));return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.SingleResponseList,fe.asn1.ASN1Object),fe.asn1.ocsp.SingleResponse=function(e){var t=Error,n=fe.asn1,r=n.DERSequence,o=n.DERGeneralizedTime,i=n.DERTaggedObject,s=n.ocsp,a=s.CertID,c=s.CertStatus,u=n.x509.Extensions;s.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,n=[];if(null==e.certid)throw new t("certid unspecified");if(null==e.status)throw new t("status unspecified");if(null==e.thisupdate)throw new t("thisupdate unspecified");if(n.push(new a(e.certid)),n.push(new c(e.status)),n.push(new o(e.thisupdate)),null!=e.nextupdate){var s=new o(e.nextupdate);n.push(new i({tag:"a0",explicit:!0,obj:s}))}if(null!=e.ext){var l=new u(e.ext);n.push(new i({tag:"a1",explicit:!0,obj:l}))}return new r({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.SingleResponse,fe.asn1.ASN1Object),fe.asn1.ocsp.CertID=function(e){var t=fe,n=t.asn1,r=n.DEROctetString,o=n.DERInteger,i=n.DERSequence,s=n.x509.AlgorithmIdentifier,a=n.ocsp,c=(a.DEFAULT_HASH,t.crypto.Util.hashHex),u=st,l=de.getVbyList;a.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(e,t,n,r){null==r&&(r=this.DEFAULT_HASH),this.params={alg:r,issname:e,isskey:t,sbjsn:n}},this.setByCert=function(e,t,n){null==n&&(n=this.DEFAULT_HASH),this.params={alg:n,issuerCert:e,subjectCert:t}},this.getParamByCerts=function(e,t,n){null==n&&(n=this.DEFAULT_HASH);var r=new u(e),o=new u(t),i=c(r.getSubjectHex(),n),s=r.getPublicKeyHex();return{alg:n,issname:i,isskey:c(l(s,0,[1],"03",!0),n),sbjsn:o.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var e,t,n,a,c=this.params;if(a=null==c.alg?this.DEFAULT_HASH:c.alg,null!=c.issuerCert&&null!=c.subjectCert){var u=this.getParamByCerts(c.issuerCert,c.subjectCert,a);e=u.issname,t=u.isskey,n=u.sbjsn}else{if(null==c.issname||null==c.isskey||null==c.sbjsn)throw new Error("required param members not defined");e=c.issname,t=c.isskey,n=c.sbjsn}var l=new s({name:a}),f=new r({hex:e}),h=new r({hex:t}),p=new o({hex:n}),d=new i({array:[l,f,h,p]});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.CertID,fe.asn1.ASN1Object),fe.asn1.ocsp.CertStatus=function(e){fe.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("good"==e.status)return"8000";if("unknown"==e.status)return"8200";if("revoked"==e.status){var t=[{gentime:{str:e.time}}];null!=e.reason&&t.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:t}};return fe.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},tt(fe.asn1.ocsp.CertStatus,fe.asn1.ASN1Object),fe.asn1.ocsp.Request=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){var o=new r.CertID(e);this.dReqCert=o}},tt(fe.asn1.ocsp.Request,fe.asn1.ASN1Object),fe.asn1.ocsp.TBSRequest=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],n=0;n<e.length;n++){var o=new r.Request(e[0]);t.push(o)}this.dRequestList=t},this.tohex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:e});return this.hTLV=r.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},tt(fe.asn1.ocsp.TBSRequest,fe.asn1.ASN1Object),fe.asn1.ocsp.OCSPRequest=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList){var o=new r.TBSRequest(e);this.dTbsRequest=o}},tt(fe.asn1.ocsp.OCSPRequest,fe.asn1.ASN1Object),fe.asn1.ocsp.OCSPUtil={},fe.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var r=fe.asn1.ocsp;void 0===n&&(n=r.DEFAULT_HASH);var o={alg:n,issuerCert:e,subjectCert:t};return new r.OCSPRequest({reqList:[o]}).tohex()},fe.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=de,n=t.getVbyList,r=t.getVbyListEx,o=t.getIdxbyList,i=(t.getIdxbyListEx,t.getV),s={};try{var a=r(e,0,[0],"0a");s.responseStatus=parseInt(a,16)}catch(e){}if(0!==s.responseStatus)return s;try{var c=o(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(c,2)?s.certStatus="good":"a1"===e.substr(c,2)?(s.certStatus="revoked",s.revocationTime=Ee(n(e,c,[0]))):"82"===e.substr(c,2)&&(s.certStatus="unknown")}catch(e){}try{var u=o(e,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=Ee(i(e,u))}catch(e){}try{var l=o(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(l,2)&&(s.nextUpdate=Ee(n(e,l,[0])))}catch(e){}return s},fe.asn1.ocsp.OCSPParser=function(){var e=Error,t=st,n=new t,r=de,o=r.getV,i=r.getTLV,s=r.getIdxbyList,a=r.getVbyList,c=r.getTLVbyList,u=r.getVbyListEx,l=r.getTLVbyListEx,f=r.getChildIdx;this.getOCSPRequest=function(t){var n=f(t,0);if(1!=n.length&&2!=n.length)throw new e("wrong number elements: "+n.length);return this.getTBSRequest(i(t,n[0]))},this.getTBSRequest=function(e){var t={},r=l(e,0,[0],"30");t.array=this.getRequestList(r);var o=l(e,0,["[2]",0],"30");return null!=o&&(t.ext=n.getExtParamArray(o)),t},this.getRequestList=function(e){for(var t=[],n=f(e,0),r=0;r<n.length;r++){e=i(e,n[r]);t.push(this.getRequest(e))}return t},this.getRequest=function(t){var r=f(t,0);if(1!=r.length&&2!=r.length)throw new e("wrong number elements: "+r.length);var o=this.getCertID(i(t,r[0]));if(2==r.length){var a=s(t,0,[1,0]);o.ext=n.getExtParamArray(i(t,a))}return o},this.getCertID=function(n){var r=f(n,0);if(4!=r.length)throw new e("wrong number elements: "+r.length);var s=new t,a={};return a.alg=s.getAlgorithmIdentifierName(i(n,r[0])),a.issname=o(n,r[1]),a.isskey=o(n,r[2]),a.sbjsn=o(n,r[3]),a},this.getOCSPResponse=function(e){var t,n=f(e,0),r=o(e,n[0]),i=parseInt(r);if(1==n.length)return{resstatus:i};var s=c(e,0,[1,0]);return(t=this.getResponseBytes(s)).resstatus=i,t},this.getResponseBytes=function(e){var t,n=f(e,0),r=c(e,0,[1,0]);t=this.getBasicOCSPResponse(r);var i=o(e,n[0]);return t.restype=fe.asn1.x509.OID.oid2name(Ye(i)),t},this.getBasicOCSPResponse=function(e){var t,n=f(e,0);t=this.getResponseData(i(e,n[0]));var r=new st;t.alg=r.getAlgorithmIdentifierName(i(e,n[1]));var s=o(e,n[2]);t.sighex=s.substr(2);var a=u(e,0,["[0]"]);if(null!=a){for(var c=f(a,0),l=[],h=0;h<c.length;h++){var p=i(a,c[h]);l.push(p)}t.certs=l}return t},this.getResponseData=function(e){var t=f(e,0),n=t.length,r={},s=0;"a0"==e.substr(t[0],2)&&s++,r.respid=this.getResponderID(i(e,t[s++]));var a=o(e,t[s++]);if(r.prodat=Ee(a),r.array=this.getSingleResponseList(i(e,t[s++])),"a1"==e.substr(t[n-1],2)){var u=c(e,t[n-1],[0]),l=new st;r.ext=l.getExtParamArray(u)}return r},this.getResponderID=function(e){var t={};if("a2"==e.substr(0,2)){var n=a(e,0,[0]);t.key=n}if("a1"==e.substr(0,2)){var r=c(e,0,[0]),o=new st;t.name=o.getX500Name(r)}return t},this.getSingleResponseList=function(e){for(var t=f(e,0),n=[],r=0;r<t.length;r++){var o=this.getSingleResponse(i(e,t[r]));n.push(o)}return n},this.getSingleResponse=function(e){var t=f(e,0),n={},r=this.getCertID(i(e,t[0]));n.certid=r;var s=this.getCertStatus(i(e,t[1]));if(n.status=s,"18"==e.substr(t[2],2)){var u=o(e,t[2]);n.thisupdate=Ee(u)}for(var l=3;l<t.length;l++){if("a0"==e.substr(t[l],2)){var h=a(e,t[l],[0],"18");n.nextupdate=Ee(h)}if("a1"==e.substr(t[l],2)){var p=new st,d=c(e,0,[l,0]);n.ext=p.getExtParamArray(d)}}return n},this.getCertStatus=function(e){var t={};if("8000"==e)return{status:"good"};if("8200"==e)return{status:"unknown"};if("a1"==e.substr(0,2)){t.status="revoked";var n=Ee(a(e,0,[0]));t.time=n}return t}},void 0!==fe&&fe||(fe={}),void 0!==fe.lang&&fe.lang||(fe.lang={}),fe.lang.String=function(){},"function"==typeof Buffer?(he=function(e){return _e(Buffer.from(e,"utf8").toString("base64"))},pe=function(e){return Buffer.from(be(e),"base64").toString("utf8")}):(he=function(e){return we(Be(qe(e)))},pe=function(e){return decodeURIComponent(De(xe(e)))}),fe.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},fe.lang.String.isHex=function(e){return Ke(e)},fe.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},fe.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=be(e),fe.lang.String.isBase64(e))},fe.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},fe.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},fe.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},fe.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};function $e(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=parseInt(e,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";r=i+r;for(s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};try{if(!e.match(/^[0-9.]+$/))return null;var r="",o=e.split("."),i=40*parseInt(o[0],10)+parseInt(o[1],10);r+=t(i),o.splice(0,2);for(var s=0;s<o.length;s++)r+=n(o[s]);return r}catch(e){return null}}function Ye(e){if(!Ke(e))return null;try{var t=[],n=e.substr(0,2),r=parseInt(n,16);t[0]=new String(Math.floor(r/40)),t[1]=new String(r%40);for(var o=e.substr(2),i=[],s=0;s<o.length/2;s++)i.push(parseInt(o.substr(2*s,2),16));var a=[],c="";for(s=0;s<i.length;s++)128&i[s]?c+=Ze((127&i[s]).toString(2),7):(c+=Ze((127&i[s]).toString(2),7),a.push(new String(parseInt(c,2))),c="");var u=t.join(".");return a.length>0&&(u=u+"."+a.join(".")),u}catch(e){return null}}var Ze=function(e,t,n){return null==n&&(n="0"),e.length>=t?e:new Array(t-e.length+1).join(n)+e};function Xe(e){if(e.length%2!=0)return-1;if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var n=parseInt(t,16);if(n>7)return-1;var r=e.substr(2),o=parseInt(r,16).toString(2);"0"==o&&(o="00000000"),o=o.slice(0,0-n);var i=parseInt(o,2);return NaN==i?-1:i}catch(e){return-1}}function Je(e){if("number"!=typeof e)return null;if(e<0)return null;var t=Number(e).toString(2),n=8-t.length%8;8==n&&(n=0),t+=Ze("",n,"0");var r=parseInt(t,2).toString(16);return r.length%2==1&&(r="0"+r),"0"+n+r}function Qe(e){if("string"!=typeof e)return null;if(e.length%2!=0)return null;if(!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var n=e.substr(2),r="",o=0;o<n.length;o+=2){var i=n.substr(o,2),s=parseInt(i,16).toString(2);r+=s=("0000000"+s).slice(-8)}return r.substr(0,r.length-t)}catch(e){return null}}function et(e,t){for(var n=0,r=0;r<e.length;r++)n|=1<<t[e[r]];var o=n.toString(2),i="";for(r=o.length-1;r>=0;r--)i+=o[r];return i}function tt(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:v.algo.MD5,sha1:v.algo.SHA1,sha224:v.algo.SHA224,sha256:v.algo.SHA256,sha384:v.algo.SHA384,sha512:v.algo.SHA512,ripemd160:v.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),o=n/4;if(r.length+22>o)throw"key is too short for SigAlg: keylen="+n+","+t;for(var i="0001",s="00"+r,a="",c=o-4-s.length,u=0;u<c;u+=2)a+="ff";return i+a+s},this.hashString=function(e,t){return new fe.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new fe.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ie||e instanceof fe.crypto.DSA||e instanceof fe.crypto.ECDSA}},fe.crypto.Util.md5=function(e){return new fe.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},fe.crypto.Util.ripemd160=function(e){return new fe.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},fe.crypto.Util.SECURERANDOMGEN=new ne,fe.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return fe.crypto.Util.SECURERANDOMGEN.nextBytes(t),ge(t)},fe.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new x(fe.crypto.Util.getRandomHexOfNbytes(e),16)},fe.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return fe.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],ge(n)},fe.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new x(fe.crypto.Util.getRandomHexOfNbits(e),16)},fe.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=fe.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},fe.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return fe.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},fe.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=fe.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=fe.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=fe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=v.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(v.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=fe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},fe.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},fe.crypto.MessageDigest.getHashLength=function(e){var t=fe.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},fe.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},fe.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=fe.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{var r=fe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=v.algo.HMAC.create(r,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=v.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(v.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Ce(e)),void(this.pass=v.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Oe(e.utf8)),void 0!==e.rstr&&(t=Ce(e.rstr)),void 0!==e.b64&&(t=b(e.b64)),void 0!==e.b64u&&(t=xe(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=v.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=fe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},fe.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,o=0;o<r;o++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new fe.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var n=null;try{n=void 0===t?nt.getKey(e):nt.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==fe.crypto.ECDSA&&(this.prvKey=new fe.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ie&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof fe.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof fe.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==fe.crypto.ECDSA&&(this.pubKey=new fe.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ie&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==fe.crypto.ECDSA&&this.pubKey instanceof fe.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==fe.crypto.DSA&&this.pubKey instanceof fe.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=fe.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=nt.getKey(e.prvkeypem);this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},fe.crypto.Cipher=function(e){},fe.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof ie&&t.isPublic){var r=fe.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var o=r.match(/^RSAOAEP(\d+)$/);if(null!==o)return t.encryptOAEP(e,"sha"+o[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},fe.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof ie&&t.isPrivate){var r=fe.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var o=r.match(/^RSAOAEP(\d+)$/);if(null!==o)return t.decryptOAEP(e,"sha"+o[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},fe.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ie){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},fe.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.ECDSA=function(e){var t=Error,n=x,r=ce,o=fe.crypto.ECDSA,i=fe.crypto.ECParameterDB,s=o.getName,a=de,c=a.getVbyListEx,u=a.isASN1HEX,l=new ne;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new n(e.bitLength(),l).mod(e.subtract(n.ONE)).add(n.ONE)},this.setNamedCurve=function(e){this.ecparams=i.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keycharlen;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":"secp521r1"===e||"NIST P-521"===e||"P-521"===e?"P-521":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),n=this.ecparams.keycharlen,r=("0000000000"+t.toString(16)).slice(-n);return this.setPrivateKeyHex(r),{ecprvhex:r,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var e=new n(this.prvKeyHex,16),t=this.ecparams.G.multiply(e),r=t.getX().toBigInteger(),o=t.getY().toBigInteger(),i=this.ecparams.keycharlen,s="04"+("0000000000"+r.toString(16)).slice(-i)+("0000000000"+o.toString(16)).slice(-i);return this.setPublicKeyHex(s),s},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var r=new n(t,16),i=this.ecparams.n,s=new n(e.substring(0,this.ecparams.keycharlen),16);do{var a=this.getBigRandom(i),c=this.ecparams.G.multiply(a).getX().toBigInteger().mod(i)}while(c.compareTo(n.ZERO)<=0);var u=a.modInverse(i).multiply(s.add(r.multiply(c))).mod(i);return o.biRSSigToASN1Sig(c,u)},this.sign=function(e,t){var r=t,o=this.ecparams.n,i=n.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(o),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(o)}while(a.compareTo(x.ZERO)<=0);var c=s.modInverse(o).multiply(i.add(r.multiply(a))).mod(o);return this.serializeSig(a,c)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,i){try{var s,a,c=o.parseSigHex(t);s=c.r,a=c.s;var u=r.decodeFromHex(this.ecparams.curve,i),l=new n(e.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(l,s,a,u)}catch(e){return!1}},this.verify=function(e,t,o){var i,s,a;if(Bitcoin.Util.isArray(t)){var c=this.parseSig(t);i=c.r,s=c.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";i=t.r,s=t.s}if(o instanceof ce)a=o;else{if(!Bitcoin.Util.isArray(o))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=r.decodeFrom(this.ecparams.curve,o)}var u=n.fromByteArrayUnsigned(e);return this.verifyRaw(u,i,s,a)},this.verifyRaw=function(e,t,r,o){var i=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(n.ONE)<0||t.compareTo(i)>=0)return!1;if(r.compareTo(n.ONE)<0||r.compareTo(i)>=0)return!1;var a=r.modInverse(i),c=e.multiply(a).mod(i),u=t.multiply(a).mod(i);return s.multiply(c).add(o.multiply(u)).getX().toBigInteger().mod(i).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),o=[];return o.push(2),o.push(n.length),(o=o.concat(n)).push(2),o.push(r.length),(o=o.concat(r)).unshift(o.length),o.unshift(48),o},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var o=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:n.fromByteArrayUnsigned(r),s:n.fromByteArrayUnsigned(o)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:n.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:n.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===u(e))throw new Error("not ASN.1 hex string");var t,n,r;try{t=c(e,0,["[0]",0],"06"),n=c(e,0,[1],"04");try{r=c(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=s(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===u(e))throw new t("not ASN.1 hex string");var n,r,o;try{c(e,0,[1,0],"06"),n=c(e,0,[1,1],"06"),r=c(e,0,[2,0,1],"04");try{o=c(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=s(n),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(o),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===u(e))throw new t("not ASN.1 hex string");var n,r;try{c(e,0,[0,0],"06"),n=c(e,0,[0,1],"06"),r=c(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=s(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,n){if(!1===u(e))throw new t("not ASN.1 hex string");var r,o;try{r=c(e,0,[0,5,0,1],"06"),o=c(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=s(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(o)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},fe.crypto.ECDSA.parseSigHex=function(e){var t=fe.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new x(t.r,16),s:new x(t.s,16)}},fe.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=de,n=t.getChildIdx,r=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var o=n(e,0);if(2!=o.length)throw new Error("signature shall have two elements");var i=o[0],s=o[1];if("02"!=e.substr(i,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:r(e,i),s:r(e,s)}},fe.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=fe.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if(n.length>=130&&n.length<=134){if(n.length%2!=0)throw Error("unknown ECDSA sig r length error");if(r.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==n.substr(0,2)&&(n=n.substr(2)),"00"==r.substr(0,2)&&(r=r.substr(2));var o=Math.max(n.length,r.length);return(n=("000000"+n).slice(-o))+(r=("000000"+r).slice(-o))}if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw Error("unknown ECDSA sig r length error");if(r.length%32!=0)throw Error("unknown ECDSA sig s length error");return n+r},fe.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return fe.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},fe.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new x(e,16),r=new x(t,16);return fe.crypto.ECDSA.biRSSigToASN1Sig(n,r)},fe.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=fe.asn1,r=new n.DERInteger({bigint:e}),o=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,o]}).tohex()},fe.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":"2b81040023"===e?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(e)?"secp521r1":null},void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new x(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,o,i,s,a,c,u,l,f,h,p,d){e[r]={};var v=n(i),y=n(s),g=n(a),m=n(c),_=n(u),b=new ue(v,y,g),w=b.decodePointHex("04"+l+f);e[r].name=r,e[r].keylen=o,e[r].keycharlen=2*Math.ceil(o/8),e[r].curve=b,e[r].G=w,e[r].n=m,e[r].h=_,e[r].oid=p,e[r].info=d;for(var x=0;x<h.length;x++)t[h[x]]=r}},fe.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),fe.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),fe.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),fe.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),fe.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),fe.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),fe.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),fe.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),fe.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),fe.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.DSA=function(){var e=de,t=(e.getVbyList,e.getVbyListEx),n=e.isASN1HEX,r=x;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,n,r,o){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=o},this.setPrivateHex=function(e,t,n,r,o){var i,s,a,c,u;i=new x(e,16),s=new x(t,16),a=new x(n,16),c="string"==typeof r&&r.length>1?new x(r,16):null,u=new x(o,16),this.setPrivate(i,s,a,c,u)},this.setPublic=function(e,t,n,r){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(e,t,n,r){var o,i,s,a;o=new x(e,16),i=new x(t,16),s=new x(n,16),a=new x(r,16),this.setPublic(o,i,s,a)},this.signWithMessageHash=function(e){var t=this.p,n=this.q,r=this.g,o=(this.y,this.x),i=fe.crypto.Util.getRandomBigIntegerMinToMax(x.ONE.add(x.ONE),n.subtract(x.ONE)),s=new x(e.substr(0,n.bitLength()/4),16),a=r.modPow(i,t).mod(n),c=i.modInverse(n).multiply(s.add(o.multiply(a))).mod(n);return fe.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:c}}]})},this.verifyWithMessageHash=function(e,t){var n=this.p,r=this.q,o=this.g,i=this.y,s=this.parseASN1Signature(t),a=s[0],c=s[1],u=new x(e.substr(0,r.bitLength()/4),16);if(x.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(x.ZERO.compareTo(c)>=0||c.compareTo(r)>0)throw"invalid DSA signature";var l=c.modInverse(r),f=u.multiply(l).mod(r),h=a.multiply(l).mod(r);return 0==o.modPow(f,n).multiply(i.modPow(h,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(e){try{return[new r(t(e,0,[0],"02"),16),new r(t(e,0,[1],"02"),16)]}catch(e){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(e){var r,o,i,s,a;if(!1===n(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[1],"02"),o=t(e,0,[2],"02"),i=t(e,0,[3],"02"),s=t(e,0,[4],"02"),a=t(e,0,[5],"02")}catch(e){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(r,o,i,s,a)},this.readPKCS8PrvKeyHex=function(e){var r,o,i,s;if(!1===n(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[1,1,0],"02"),o=t(e,0,[1,1,1],"02"),i=t(e,0,[1,1,2],"02"),s=t(e,0,[2,0],"02")}catch(e){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(r,o,i,null,s)},this.readPKCS8PubKeyHex=function(e){var r,o,i,s;if(!1===n(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[0,1,0],"02"),o=t(e,0,[0,1,1],"02"),i=t(e,0,[0,1,2],"02"),s=t(e,0,[1,0],"02")}catch(e){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(r,o,i,s)},this.readCertPubKeyHex=function(e,r){var o,i,s,a;if(!1===n(e))throw new Error("not ASN.1 hex string");try{o=t(e,0,[0,5,0,1,0],"02"),i=t(e,0,[0,5,0,1,1],"02"),s=t(e,0,[0,5,0,1,2],"02"),a=t(e,0,[0,5,1,0],"02")}catch(e){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(o,i,s,a)}};var nt=function(){var e=function(e,n,r){return t(v.AES,e,n,r)},t=function(e,t,n,r){var o=v.enc.Hex.parse(t),i=v.enc.Hex.parse(n),s=v.enc.Hex.parse(r),a={};a.key=i,a.iv=s,a.ciphertext=o;var c=e.decrypt(a,i,{iv:s});return v.enc.Hex.stringify(c)},n=function(e,t,n){return r(v.AES,e,t,n)},r=function(e,t,n,r){var o=v.enc.Hex.parse(t),i=v.enc.Hex.parse(n),s=v.enc.Hex.parse(r),a=e.encrypt(o,i,{iv:s}),c=v.enc.Hex.parse(a.toString());return v.enc.Base64.stringify(c)},o={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(v.TripleDES,e,n,r)},eproc:function(e,t,n){return r(v.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(v.DES,e,n,r)},eproc:function(e,t,n){return r(v.DES,e,t,n)},keylen:8,ivlen:8}},i=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var o=-1,i=0;-1!=e.indexOf("\r\n\r\n")&&(o=e.indexOf("\r\n\r\n"),i=2),-1!=e.indexOf("\n\n")&&(o=e.indexOf("\n\n"),i=1);var s=e.indexOf("-----END");if(-1!=o&&-1!=s){var a=e.substring(o+2*i,s-i);a=a.replace(/\s+/g,""),t.data=a}return t},s=function(e,t,n){for(var r=n.substring(0,16),i=v.enc.Hex.parse(r),s=v.enc.Utf8.parse(t),a=o[e].keylen+o[e].ivlen,c="",u=null;;){var l=v.algo.MD5.create();if(null!=u&&l.update(u),l.update(s),l.update(i),u=l.finalize(),(c+=v.enc.Hex.stringify(u)).length>=2*a)break}var f={};return f.keyhex=c.substr(0,2*o[e].keylen),f.ivhex=c.substr(2*o[e].keylen,2*o[e].ivlen),f},a=function(e,t,n,r){var i=v.enc.Base64.parse(e),s=v.enc.Hex.stringify(i);return(0,o[t].proc)(s,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return i(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return s(e,t,n)},decryptKeyB64:function(e,t,n,r){return a(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=i(e),r=(n.type,n.cipher),o=n.ivsalt,c=n.data,u=s(r,t,o).keyhex;return a(c,r,u,o)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,i){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===o[r])throw new Error("KEYUTIL unsupported algorithm: "+r);if(void 0===i||null==i){var c=function(e){var t=v.lib.WordArray.random(e);return v.enc.Hex.stringify(t)}(o[r].ivlen);i=c.toUpperCase()}var u=function(e,t,n,r){return(0,o[t].eproc)(e,n,r)}(t,r,s(r,n,i).keyhex,i);a="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+i+"\r\n",a+="\r\n",a+=u.replace(/(.{64})/g,"$1\r\n"),a+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=de,n=t.getChildIdx,r=t.getV,o={},i=n(e,0);if(2!=i.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+i.length);o.ciphertext=r(e,i[1]);var s=n(e,i[0]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+s.length);if("2a864886f70d01050d"!=r(e,s[0]))throw new Error("this only supports pkcs5PBES2");var a=n(e,s[1]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+a.length);var c=n(e,a[1]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length);if("2a864886f70d0307"!=r(e,c[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=r(e,c[1]);var u=n(e,a[0]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length);if("2a864886f70d01050c"!=r(e,u[0]))throw new Error("this only supports pkcs5PBKDF2");var l=n(e,u[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);o.pbkdf2Salt=r(e,l[0]);var f=r(e,l[1]);try{o.pbkdf2Iter=parseInt(f,16)}catch(e){throw new Error("malformed format pbkdf2Iter: "+f)}return o},getPBKDF2KeyHexFromParam:function(e,t){var n=v.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,o=v.PBKDF2(t,n,{keySize:6,iterations:r});return v.enc.Hex.stringify(o)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=je(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),o=nt.getPBKDF2KeyHexFromParam(r,t),i={};i.ciphertext=v.enc.Hex.parse(r.ciphertext);var s=v.enc.Hex.parse(o),a=v.enc.Hex.parse(r.encryptionSchemeIV),c=v.TripleDES.decrypt(i,s,{iv:a});return v.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,o={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var i=n(e,0);if(i.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(i[1],2))throw new Error("malformed PKCS8 private key(code:003)");var s=n(e,i[1]);if(2!=s.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(s[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(o.algoid=r(e,s[0]),"06"==e.substr(s[1],2)&&(o.algparam=r(e,s[1])),"04"!=e.substr(i[2],2))throw new Error("malformed PKCS8 private key(code:006)");return o.keyidx=t.getVidx(e,i[2]),o},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=je(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new ie;else if("2a8648ce380401"==n.algoid)t=new fe.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw new Error("unsupported private key algorithm");t=new fe.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=de.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new ie;else if("2a8648ce380401"===n)t=new fe.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw new Error("unsupported PKCS#8 public key hex");t=new fe.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=de,n=t.getChildIdx,r=t.getV,o={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var i=n(e,0);if(2!=i.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(i[0],2))throw new Error("malformed RSA key(code:003)");if(o.n=r(e,i[0]),"02"!=e.substr(i[1],2))throw new Error("malformed RSA key(code:004)");return o.e=r(e,i[1]),o},parsePublicPKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,o={algparam:null},i=n(e,0);if(2!=i.length)throw new Error("outer DERSequence shall have 2 elements: "+i.length);var s=i[0];if("30"!=e.substr(s,2))throw new Error("malformed PKCS8 public key(code:001)");var a=n(e,s);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(o.algoid=r(e,a[0]),"06"==e.substr(a[1],2)?o.algparam=r(e,a[1]):"30"==e.substr(a[1],2)&&(o.algparam={},o.algparam.p=t.getVbyList(e,a[1],[0],"02"),o.algparam.q=t.getVbyList(e,a[1],[1],"02"),o.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(i[1],2))throw new Error("malformed PKCS8 public key(code:004)");return o.key=r(e,i[1]).substr(2),o}}}();nt.getKey=function(e,t,n){var r=(y=de).getChildIdx,o=(y.getV,y.getVbyList),i=fe.crypto,s=i.ECDSA,a=i.DSA,c=ie,u=je,l=nt;if(void 0!==c&&e instanceof c)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new s({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new s({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(I=new c).setPublic(e.n,e.e),I;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(I=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),I;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(I=new c).setPrivate(e.n,e.e,e.d),I;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(I=new a).setPublic(e.p,e.q,e.g,e.y),I;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(I=new a).setPrivate(e.p,e.q,e.g,e.y,e.x),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(I=new c).setPublic(xe(e.n),xe(e.e)),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(I=new c).setPrivateEx(xe(e.n),xe(e.e),xe(e.d),xe(e.p),xe(e.q),xe(e.dp),xe(e.dq),xe(e.qi)),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(I=new c).setPrivate(xe(e.n),xe(e.e),xe(e.d)),I;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(C=new s({curve:e.crv})).ecparams.keycharlen,h="04"+("0000000000"+xe(e.x)).slice(-f)+("0000000000"+xe(e.y)).slice(-f);return C.setPublicKeyHex(h),C}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(C=new s({curve:e.crv})).ecparams.keycharlen,h="04"+("0000000000"+xe(e.x)).slice(-f)+("0000000000"+xe(e.y)).slice(-f);var p=("0000000000"+xe(e.d)).slice(-f);return C.setPublicKeyHex(h),C.setPrivateKeyHex(p),C}if("pkcs5prv"===n){var d,v=e,y=de;if(9===(d=r(v,0)).length)(I=new c).readPKCS5PrvKeyHex(v);else if(6===d.length)(I=new a).readPKCS5PrvKeyHex(v);else{if(!(d.length>2&&"04"===v.substr(d[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(I=new s).readPKCS5PrvKeyHex(v)}return I}if("pkcs8prv"===n)return I=l.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return l._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return st.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return st.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var g=je(e,"PUBLIC KEY");return l._getKeyFromPublicPKCS8Hex(g)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var m=u(e,"RSA PRIVATE KEY");return l.getKey(m,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=o(A=u(e,"DSA PRIVATE KEY"),0,[1],"02"),b=o(A,0,[2],"02"),w=o(A,0,[3],"02"),O=o(A,0,[4],"02"),E=o(A,0,[5],"02");return(I=new a).setPrivate(new x(_,16),new x(b,16),new x(w,16),new x(O,16),new x(E,16)),I}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){m=u(e,"EC PRIVATE KEY");return l.getKey(m,null,"pkcs5prv")}if(-1!=e.indexOf("-END PRIVATE KEY-"))return l.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var S=l.getDecryptedKeyHex(e,t),k=new ie;return k.readPKCS5PrvKeyHex(S),k}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var C,I=o(A=l.getDecryptedKeyHex(e,t),0,[1],"04"),P=o(A,0,[2,0],"06"),T=o(A,0,[3,0],"03").substr(2);if(void 0===fe.crypto.OID.oidhex2name[P])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+P);return(C=new s({curve:fe.crypto.OID.oidhex2name[P]})).setPublicKeyHex(T),C.setPrivateKeyHex(I),C.isPublic=!1,C}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var A;_=o(A=l.getDecryptedKeyHex(e,t),0,[1],"02"),b=o(A,0,[2],"02"),w=o(A,0,[3],"02"),O=o(A,0,[4],"02"),E=o(A,0,[5],"02");return(I=new a).setPrivate(new x(_,16),new x(b,16),new x(w,16),new x(O,16),new x(E,16)),I}if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return l.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},nt.generateKeypair=function(e,t){if("RSA"==e){var n=t;(s=new ie).generate(n,"10001"),s.isPrivate=!0,s.isPublic=!0;var r=new ie,o=s.n.toString(16),i=s.e.toString(16);return r.setPublic(o,i),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}if("EC"==e){var s,a,c=t,u=new fe.crypto.ECDSA({curve:c}).generateKeyPairHex();return(s=new fe.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),s.setPrivateKeyHex(u.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(r=new fe.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}throw new Error("unknown algorithm: "+e)},nt.getPEM=function(e,t,n,r,o,i){var s=fe,a=s.asn1,c=a.DERObjectIdentifier,u=a.DERInteger,l=a.ASN1Util.newObject,f=a.x509.SubjectPublicKeyInfo,h=s.crypto,p=h.DSA,d=h.ECDSA,y=ie;function g(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function m(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function _(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==y&&e instanceof y||void 0!==p&&e instanceof p||void 0!==d&&e instanceof d)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Ae(O=new f(e).tohex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==y&&e instanceof y&&(void 0===n||null==n)&&1==e.isPrivate)return Ae(O=g(e).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===n||null==n)&&1==e.isPrivate){var b=new c({name:e.curveName}).tohex(),w=m(e).tohex(),x="";return x+=Ae(b,"EC PARAMETERS"),x+=Ae(w,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===n||null==n)&&1==e.isPrivate)return Ae(O=_(e).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==y&&e instanceof y&&void 0!==n&&null!=n&&1==e.isPrivate){var O=g(e).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",O,n,r,i)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==n&&null!=n&&1==e.isPrivate){O=m(e).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",O,n,r,i)}if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==n&&null!=n&&1==e.isPrivate){O=_(e).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",O,n,r,i)}var E=function(e,t){var n=S(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).tohex()},S=function(e,t){var n=v.lib.WordArray.random(8),r=v.lib.WordArray.random(8),o=v.PBKDF2(t,n,{keySize:6,iterations:100}),i=v.enc.Hex.parse(e),s=v.TripleDES.encrypt(i,o,{iv:r})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=v.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=v.enc.Hex.stringify(r),a};if("PKCS8PRV"==t&&null!=y&&e instanceof y&&1==e.isPrivate){var k=g(e).tohex();O=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:k}}]}).tohex();return void 0===n||null==n?Ae(O,"PRIVATE KEY"):Ae(w=E(O,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate){var C={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};"string"==typeof e.pubKeyHex&&C.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});k=new l(C).tohex(),O=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:k}}]}).tohex();return void 0===n||null==n?Ae(O,"PRIVATE KEY"):Ae(w=E(O,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate){k=new u({bigint:e.x}).tohex(),O=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:k}}]}).tohex();return void 0===n||null==n?Ae(O,"PRIVATE KEY"):Ae(w=E(O,n),"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},nt.getKeyFromCSRPEM=function(e){var t=je(e,"CERTIFICATE REQUEST");return nt.getKeyFromCSRHex(t)},nt.getKeyFromCSRHex=function(e){var t=nt.parseCSRHex(e);return nt.getKey(t.p8pubkeyhex,null,"pkcs8pub")},nt.parseCSRHex=function(e){var t=de,n=t.getChildIdx,r=t.getTLV,o={},i=e;if("30"!=i.substr(0,2))throw new Error("malformed CSR(code:001)");var s=n(i,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=i.substr(s[0],2))throw new Error("malformed CSR(code:003)");var a=n(i,s[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return o.p8pubkeyhex=r(i,a[2]),o},nt.getKeyID=function(e){var t=nt,n=de;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var r=je(t.getPEM(e)),o=n.getIdxbyList(r,0,[1]),i=n.getV(r,o).substring(2);return fe.crypto.Util.hashHex(i,"sha1")},nt.getJWK=function(e,t,n,r,o){var i,s,a={},c=fe.crypto.Util.hashHex;if("string"==typeof e)i=nt.getKey(e),-1!=e.indexOf("CERTIFICATE")&&(s=je(e));else{if("object"!=typeof e)throw new Error("unsupported keyinfo type");e instanceof st?(i=e.getPublicKey(),s=e.hex):i=e}if(i instanceof ie&&i.isPrivate)a.kty="RSA",a.n=we(i.n.toString(16)),a.e=we(i.e.toString(16)),a.d=we(i.d.toString(16)),a.p=we(i.p.toString(16)),a.q=we(i.q.toString(16)),a.dp=we(i.dmp1.toString(16)),a.dq=we(i.dmq1.toString(16)),a.qi=we(i.coeff.toString(16));else if(i instanceof ie&&i.isPublic)a.kty="RSA",a.n=we(i.n.toString(16)),a.e=we(i.e.toString(16));else if(i instanceof fe.crypto.ECDSA&&i.isPrivate){if("P-256"!==(l=i.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);var u=i.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=we(u.x),a.y=we(u.y),a.d=we(i.prvKeyHex)}else if(i instanceof fe.crypto.ECDSA&&i.isPublic){var l;if("P-256"!==(l=i.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);u=i.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=we(u.x),a.y=we(u.y)}if(null==a.kty)throw new Error("unsupported keyinfo");return i.isPrivate||1==t||(a.kid=fe.jws.JWS.getJWKthumbprint(a)),null!=s&&1!=n&&(a.x5c=[_(s)]),null!=s&&1!=r&&(a.x5t=_e(_(c(s,"sha1")))),null!=s&&1!=o&&(a["x5t#S256"]=_e(_(c(s,"sha256")))),a},nt.getJWKFromKey=function(e){return nt.getJWK(e,!0,!0,!0,!0)},ie.getPosArrayOfChildrenFromHex=function(e){return de.getChildIdx(e,0)},ie.getHexValueArrayOfChildrenFromHex=function(e){var t,n=de.getV,r=n(e,(t=ie.getPosArrayOfChildrenFromHex(e))[0]),o=n(e,t[1]),i=n(e,t[2]),s=n(e,t[3]),a=n(e,t[4]),c=n(e,t[5]),u=n(e,t[6]),l=n(e,t[7]),f=n(e,t[8]);return(t=new Array).push(r,o,i,s,a,c,u,l,f),t},ie.prototype.readPrivateKeyFromPEMString=function(e){var t=je(e),n=ie.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},ie.prototype.readPKCS5PrvKeyHex=function(e){var t=ie.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ie.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,o,i,s,a,c,u=de,l=u.getVbyListEx;if(!1===u.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),n=l(e,0,[2,0,2],"02"),r=l(e,0,[2,0,3],"02"),o=l(e,0,[2,0,4],"02"),i=l(e,0,[2,0,5],"02"),s=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),c=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,o,i,s,a,c)},ie.prototype.readPKCS5PubKeyHex=function(e){var t=de,n=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw new Error("wrong hex for PKCS#5 public key");var o=n(e,r[0]),i=n(e,r[1]);this.setPublic(o,i)},ie.prototype.readPKCS8PubKeyHex=function(e){var t=de;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},ie.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new st).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};function rt(e,t){for(var n="",r=t/4-e.length,o=0;o<r;o++)n+="0";return n+e}function ot(e,t,n){for(var r="",o=0;r.length<t;)r+=ke(n(Ce(e+String.fromCharCode.apply(String,[(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o])))),o+=1;return r}function it(e){for(var t in fe.crypto.Util.DIGESTINFOHEAD){var n=fe.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function st(e){var t,n=de,r=n.getChildIdx,o=n.getV,i=(n.dump,n.parse),s=n.getTLV,a=n.getVbyList,c=n.getVbyListEx,u=n.getTLVbyList,l=n.getTLVbyListEx,f=n.getIdxbyList,h=n.getIdxbyListEx,p=n.getVidx,d=n.getInt,v=n.oidname,y=n.hextooidstr,g=je;try{t=fe.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=u(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=u(e,0,[0]),n=d(t,0);if(n<0||2<n)throw new Error("malformed version field");return this.version=n+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return c(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var n in t)if(e===t[n])return n;return v(c(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=a(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getNotAfter=function(){var e=a(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var e=this.getSPKI();return null==e?null:a(e,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return f(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return f(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return nt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=u(this.hex,0,[0],"30"),o=new fe.crypto.Signature({alg:t});return o.init(e),o.updateHex(r),o.verify(n)},this.parseExt=function(e){var t,i,s;if(void 0===e){if(s=this.hex,3!==this.version)return-1;t=f(s,0,[0,7,0],"30"),i=r(s,t)}else{s=je(e);var c=f(s,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=o(s,c))return void(this.aExtInfo=new Array);t=f(s,0,[0,3,0,1,0],"30"),i=r(s,t),this.hex=s}this.aExtInfo=new Array;for(var u=0;u<i.length;u++){var l={critical:!1},h=0;3===r(s,i[u]).length&&(l.critical=!0,h=1),l.oid=n.hextooidstr(a(s,i[u],[0],"06"));var d=f(s,i[u],[1+h]);l.vidx=p(s,d),this.aExtInfo.push(l)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=fe.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var r={extname:"basicConstraints"};if(t&&(r.critical=!0),"3000"===e)return r;if("30030101ff"===e)return r.cA=!0,r;if("30060101ff02"===e.substr(0,12)){var i=o(e,10),a=parseInt(i,16);return r.cA=!0,r.pathLen=a,r}throw new Error("hExtV parse error: "+e)},this.getExtNameConstraints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("nameConstraints");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var o={extname:"nameConstraints"};t&&(o.critical=!0);for(var i=r(e,0),a=0;a<i.length;a++){for(var c=[],u=r(e,i[a]),l=0;l<u.length;l++){var f=s(e,u[l]),h=this.getGeneralSubtree(f);c.push(h)}var p=e.substr(i[a],2);"a0"==p?o.permit=c:"a1"==p&&(o.exclude=c)}return o},this.getGeneralSubtree=function(e){var t=r(e,0),n=t.length;if(n<1||2<n)throw new Error("wrong num elements");for(var i=this.getGeneralName(s(e,t[0])),a=1;a<n;a++){var c=e.substr(t[a],2),u=o(e,t[a]),l=parseInt(u,16);"80"==c&&(i.min=l),"81"==c&&(i.max=l)}return i},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("keyUsage");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var r={extname:"keyUsage"};return t&&(r.critical=!0),r.names=this.getExtKeyUsageString(e).split(","),r},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=s(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var n="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(n=n.slice(-8)),10==e.length&&(n=n.slice(-16)),""==(n=n.replace(/0+$/,""))&&(n="0"),n},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),n=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&n.push(st.KEYUSAGE_NAME[r]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var r={extname:"subjectKeyIdentifier"};t&&(r.critical=!0);var i=o(e,0);return r.kid={hex:i},r},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityKeyIdentifier");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var i={extname:"authorityKeyIdentifier"};t&&(i.critical=!0);for(var a=r(e,0),c=0;c<a.length;c++){var u=e.substr(a[c],2);if("80"===u&&(i.kid={hex:o(e,a[c])}),"a1"===u){var l=s(e,a[c]),f=this.getGeneralNames(l);i.issuer=f[0].dn}"82"===u&&(i.sn={hex:o(e,a[c])})}return i},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("extKeyUsage");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var i={extname:"extKeyUsage",array:[]};t&&(i.critical=!0);for(var a=r(e,0),c=0;c<a.length;c++)i.array.push(v(o(e,a[c])));return i},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,n=s(this.hex,e.vidx);if(""===n)return t;for(var i=r(n,0),a=0;a<i.length;a++)t.push(v(o(n,i[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectAltName");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var r={extname:"subjectAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("issuerAltName");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var r={extname:"issuerAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getGeneralNames=function(e){for(var t=r(e,0),n=[],o=0;o<t.length;o++){var i=this.getGeneralName(s(e,t[o]));void 0!==i&&n.push(i)}return n},this.getGeneralName=function(e){var t=e.substr(0,2),n=o(e,0),r=ke(n);return"81"==t?{rfc822:r}:"82"==t?{dns:r}:"86"==t?{uri:r}:"87"==t?{ip:Fe(n)}:"a4"==t?{dn:this.getX500Name(n)}:"a0"==t?{other:this.getOtherName(e)}:void 0},this.getExtSubjectAltName2=function(){var e,t,n,i=this.getExtInfo("subjectAltName");if(void 0===i)return i;for(var a=new Array,c=s(this.hex,i.vidx),u=r(c,0),l=0;l<u.length;l++)n=c.substr(u[l],2),e=o(c,u[l]),"81"===n&&(t=Ee(e),a.push(["MAIL",t])),"82"===n&&(t=Ee(e),a.push(["DNS",t])),"84"===n&&(t=st.hex2dn(e,0),a.push(["DN",t])),"86"===n&&(t=Ee(e),a.push(["URI",t])),"87"===n&&(t=Fe(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var o={extname:"cRLDistributionPoints",array:[]};t&&(o.critical=!0);for(var i=r(e,0),a=0;a<i.length;a++){var c=s(e,i[a]);o.array.push(this.getDistributionPoint(c))}return o},this.getDistributionPoint=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var i=e.substr(n[o],2),a=s(e,n[o]);"a0"==i&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var i=e.substr(n[o],2),a=s(e,n[o]);"a0"==i&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtCRLDistributionPoints();if(null==e)return e;for(var t=e.array,n=[],r=0;r<t.length;r++)try{null!=t[r].dpname.full[0].uri&&n.push(t[r].dpname.full[0].uri)}catch(e){}return n},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},n=r(this.hex,e.vidx),o=0;o<n.length;o++){var i=a(this.hex,n[o],[0],"06"),s=a(this.hex,n[o],[1],"86");"2b06010505073001"===i&&t.ocsp.push(Ee(s)),"2b06010505073002"===i&&t.caissuer.push(Ee(s))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var o={extname:"authorityInfoAccess",array:[]};t&&(o.critical=!0);for(var i=r(e,0),u=0;u<i.length;u++){var l=c(e,i[u],[0],"06"),f=Ee(a(e,i[u],[1],"86"));if("2b06010505073001"==l)o.array.push({ocsp:f});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);o.array.push({caissuer:f})}}return o},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var o={extname:"certificatePolicies",array:[]};t&&(o.critical=!0);for(var i=r(e,0),a=0;a<i.length;a++){var c=s(e,i[a]),u=this.getPolicyInformation(c);o.array.push(u)}return o},this.getPolicyInformation=function(e){var t={},n=a(e,0,[0],"06");t.policyoid=v(n);var o=h(e,0,[1],"30");if(-1!=o){t.array=[];for(var i=r(e,o),c=0;c<i.length;c++){var u=s(e,i[c]),l=this.getPolicyQualifierInfo(u);t.array.push(l)}}return t},this.getOtherName=function(e){var t={},n=r(e,0),o=a(e,n[0],[],"06"),s=a(e,n[1],[]);return t.oid=fe.asn1.ASN1Util.oidHexToInt(o),t.obj=i(s),t},this.getPolicyQualifierInfo=function(e){var t={},n=a(e,0,[0],"06");if("2b06010505070201"===n){var r=c(e,0,[1],"16");t.cps=ke(r)}else if("2b06010505070202"===n){var o=u(e,0,[1],"30");t.unotice=this.getUserNotice(o)}return t},this.getUserNotice=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var i=s(e,n[o]);"30"!=i.substr(0,2)&&(t.exptext=this.getDisplayText(i))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=ke(o(e,0)),t},this.getExtCRLNumber=function(e,t){var n={extname:"cRLNumber"};if(t&&(n.critical=!0),"02"==e.substr(0,2))return n.num={hex:o(e,0)},n;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var n={extname:"cRLReason"};if(t&&(n.critical=!0),"0a"==e.substr(0,2))return n.code=parseInt(o(e,0),16),n;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var n={extname:"ocspNonce"};t&&(n.critical=!0);var r=o(e,0);return n.hex=r,n},this.getExtOcspNoCheck=function(e,t){var n={extname:"ocspNoCheck"};return t&&(n.critical=!0),n},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;e=s(this.hex,n.vidx),t=n.critical}var o={extname:"adobeTimeStamp"};t&&(o.critical=!0);var i=r(e,0);if(i.length>1){var a=s(e,i[1]),c=this.getGeneralName(a);null!=c.uri&&(o.uri=c.uri)}if(i.length>2){var u=s(e,i[2]);"0101ff"==u&&(o.reqauth=!0),"010100"==u&&(o.reqauth=!1)}return o};var m=function(e){var t={};try{var n=e.seq[0].oid,r=fe.asn1.x509.OID.name2oid(n);t.type=fe.asn1.x509.OID.oid2atype(r);var o=e.seq[1];if(null!=o.utf8str)t.ds="utf8",t.value=o.utf8str.str;else if(null!=o.numstr)t.ds="num",t.value=o.numstr.str;else if(null!=o.telstr)t.ds="tel",t.value=o.telstr.str;else if(null!=o.prnstr)t.ds="prn",t.value=o.prnstr.str;else if(null!=o.ia5str)t.ds="ia5",t.value=o.ia5str.str;else if(null!=o.visstr)t.ds="vis",t.value=o.visstr.str;else{if(null==o.bmpstr)throw"error";t.ds="bmp",t.value=o.bmpstr.str}return t}catch(e){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},_=function(e){try{return e.set.map((function(e){return m(e)}))}catch(e){throw new Error("improper ASN.1 parsed RDN: "+e)}};this.getX500NameRule=function(e){for(var t=null,n=[],r=0;r<e.length;r++)for(var o=e[r],i=0;i<o.length;i++)n.push(o[i]);for(r=0;r<n.length;r++){var s=n[r],a=s.ds,c=s.value,u=s.type;if(":"+a,"prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=u)return"mixed";if(fe.lang.String.isMail(c))continue;return"mixed"}if("C"==u){if("prn"==a)continue;return"mixed"}if(":"+a,null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getAttrTypeAndValue=function(e){var t=i(e);return m(t)},this.getRDN=function(e){var t=i(e);return _(t)},this.getX500NameArray=function(e){return function(e){try{return e.seq.map((function(e){return _(e)}))}catch(e){throw new Error("improper ASN.1 parsed X500Name: "+e)}}(i(e))},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.readCertPEM=function(e){this.readCertHex(g(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{f(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(e){var t={};return t.version=this.getVersion(),t.serial={hex:this.getSerialNumberHex()},t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.notbefore=this.getNotBefore(),t.notafter=this.getNotAfter(),t.subject=this.getSubject(),t.sbjpubkey=Ae(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(t.ext=this.getExtParamArray()),t.sighex=this.getSignatureValueHex(),"object"==typeof e&&(1==e.tbshex&&(t.tbshex=u(this.hex,0,[0])),1==e.nodnarray&&(delete t.issuer.array,delete t.subject.array)),t},this.getExtParamArray=function(e){null==e&&(-1!=h(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30")));for(var t=[],n=r(e,0),o=0;o<n.length;o++){var i=s(e,n[o]),a=this.getExtParam(i);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var n=y(a(e,0,[0],"06")),o=!1;3==t&&"0101ff"==u(e,0,[1])&&(o=!0);var i=u(e,0,[t-1,0]),s=void 0;if("2.5.29.14"==n?s=this.getExtSubjectKeyIdentifier(i,o):"2.5.29.15"==n?s=this.getExtKeyUsage(i,o):"2.5.29.17"==n?s=this.getExtSubjectAltName(i,o):"2.5.29.18"==n?s=this.getExtIssuerAltName(i,o):"2.5.29.19"==n?s=this.getExtBasicConstraints(i,o):"2.5.29.30"==n?s=this.getExtNameConstraints(i,o):"2.5.29.31"==n?s=this.getExtCRLDistributionPoints(i,o):"2.5.29.32"==n?s=this.getExtCertificatePolicies(i,o):"2.5.29.35"==n?s=this.getExtAuthorityKeyIdentifier(i,o):"2.5.29.37"==n?s=this.getExtExtKeyUsage(i,o):"1.3.6.1.5.5.7.1.1"==n?s=this.getExtAuthorityInfoAccess(i,o):"2.5.29.20"==n?s=this.getExtCRLNumber(i,o):"2.5.29.21"==n?s=this.getExtCRLReason(i,o):"1.3.6.1.5.5.7.48.1.2"==n?s=this.getExtOcspNonce(i,o):"1.3.6.1.5.5.7.48.1.5"==n?s=this.getExtOcspNoCheck(i,o):"1.2.840.113583.1.1.9.1"==n&&(s=this.getExtAdobeTimeStamp(i,o)),null!=s)return s;var c={extname:n,extn:i};return o&&(c.critical=!0),c},this.findExt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].extname==t)return e[n];return null},this.updateExtCDPFullURI=function(e,t){var n=this.findExt(e,"cRLDistributionPoints");if(null!=n&&null!=n.array)for(var r=n.array,o=0;o<r.length;o++)if(null!=r[o].dpname&&null!=r[o].dpname.full)for(var i=r[o].dpname.full,s=0;s<i.length;s++){var a=i[o];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,o=0;o<r.length;o++)null!=r[o].ocsp&&(r[o].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,o=0;o<r.length;o++)null!=r[o].caissuer&&(r[o].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,n,r,o=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var o=n[r];if(t+="    policy oid: "+o.policyoid+"\n",void 0!==o.array)for(var i=0;i<o.array.length;i++){var s=o.array[i];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t},i=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var o=n[r];try{void 0!==o.dpname.full[0].uri&&(t+="    "+o.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==o.dname.full[0].dn.hex&&(t+="    "+st.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},s=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var o=n[r];void 0!==o.caissuer&&(t+="    caissuer: "+o.caissuer+"\n"),void 0!==o.ocsp&&(t+="    ocsp: "+o.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+We(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+We(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<n.length;a++){var c=n[a],u=fe.asn1.x509.OID.oid2name(c.oid);""===u&&(u=c.oid);var l="";if(!0===c.critical&&(l="CRITICAL"),e+="  "+u+" "+l+":\n","basicConstraints"===u){var f=this.getExtBasicConstraints();void 0===f.cA?e+="    {}\n":(e+="    cA=true",void 0!==f.pathLen&&(e+=", pathLen="+f.pathLen),e+="\n")}else if("keyUsage"===u)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===u)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===u){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(e+="    kid="+h.kid.hex+"\n")}else{if("extKeyUsage"===u)e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n";else if("subjectAltName"===u)e+="    "+(r=this.getExtSubjectAltName(),JSON.stringify(r.array).replace(/[\[\]\{\}\"]/g,""))+"\n";else if("cRLDistributionPoints"===u)e+=i(this.getExtCRLDistributionPoints());else if("authorityInfoAccess"===u)e+=s(this.getExtAuthorityInfoAccess());else"certificatePolicies"===u&&(e+=o(this.getExtCertificatePolicies()))}}}return e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",e+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):fe.lang.String.isHex(e)&&this.readCertHex(e))}ie.prototype.sign=function(e,t){var n=function(e){return fe.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},ie.prototype.signWithMessageHash=function(e,t){var n=re(fe.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return rt(this.doPrivate(n).toString(16),this.n.bitLength())},ie.prototype.signPSS=function(e,t,n){var r,o=(r=Ce(e),fe.crypto.Util.hashHex(r,t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(o,t,n)},ie.prototype.signWithMessageHashPSS=function(e,t,n){var r,o=ke(e),i=o.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),c=function(e){return fe.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=i;else if(-2===n)n=a-i-2;else if(n<-2)throw new Error("invalid salt length");if(a<i+n+2)throw new Error("data too long");var u="";n>0&&(u=new Array(n),(new ne).nextBytes(u),u=String.fromCharCode.apply(String,u));var l=ke(c(Ce("\0\0\0\0\0\0\0\0"+o+u))),f=[];for(r=0;r<a-n-i-2;r+=1)f[r]=0;var h=String.fromCharCode.apply(String,f)+""+u,p=ot(l,h.length,c),d=[];for(r=0;r<h.length;r+=1)d[r]=h.charCodeAt(r)^p.charCodeAt(r);var v=65280>>8*a-s&255;for(d[0]&=~v,r=0;r<i;r++)d.push(l.charCodeAt(r));return d.push(188),rt(this.doPrivate(new x(d)).toString(16),this.n.bitLength())},ie.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var n=re(t,16),r=this.n.bitLength();if(n.bitLength()>r)return!1;var o=this.doPublic(n).toString(16);if(o.length+3!=r/4)return!1;var i=it(o.replace(/^1f+00/,""));if(0==i.length)return!1;var s=i[0],a=i[1],c=function(e){return fe.crypto.Util.hashString(e,s)}(e);return a==c},ie.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=re(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=it(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;r[0];return r[1]==e},ie.prototype.verifyPSS=function(e,t,n,r){var o,i=(o=Ce(e),fe.crypto.Util.hashHex(o,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,t,n,r)},ie.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var o,i=new x(t,16),s=function(e){return fe.crypto.Util.hashHex(e,n)},a=ke(e),c=a.length,u=this.n.bitLength()-1,l=Math.ceil(u/8);if(-1===r||void 0===r)r=c;else if(-2===r)r=l-c-2;else if(r<-2)throw new Error("invalid salt length");if(l<c+r+2)throw new Error("data too long");var f=this.doPublic(i).toByteArray();for(o=0;o<f.length;o+=1)f[o]&=255;for(;f.length<l;)f.unshift(0);if(188!==f[l-1])throw new Error("encoded message does not end in 0xbc");var h=(f=String.fromCharCode.apply(String,f)).substr(0,l-c-1),p=f.substr(h.length,c),d=65280>>8*l-u&255;if(0!=(h.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var v=ot(p,h.length,s),y=[];for(o=0;o<h.length;o+=1)y[o]=h.charCodeAt(o)^v.charCodeAt(o);y[0]&=~d;var g=l-c-r-2;for(o=0;o<g;o+=1)if(0!==y[o])throw new Error("leftmost octets not zero");if(1!==y[g])throw new Error("0x01 marker not found");return p===ke(s(Ce("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-r)))))},ie.SALT_LEN_HLEN=-1,ie.SALT_LEN_MAX=-2,ie.SALT_LEN_RECOVER=-2,st.hex2dn=function(e,t){void 0===t&&(t=0);var n=new st;de.getTLV(e,t);return n.getX500Name(e).str},st.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var n=new Array,r=de.getChildIdx(e,t),o=0;o<r.length;o++)n.push(st.hex2attrTypeValue(e,r[o]));return n=n.map((function(e){return e.replace("+","\\+")})),n.join("+")},st.hex2attrTypeValue=function(e,t){var n=de,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var o=n.getChildIdx(e,t);2!==o.length||e.substr(o[0],2);var i=r(e,o[0]),s=fe.asn1.ASN1Util.oidHexToInt(i);return fe.asn1.x509.OID.oid2atype(s)+"="+ke(r(e,o[1]))},st.getPublicKeyFromCertHex=function(e){var t=new st;return t.readCertHex(e),t.getPublicKey()},st.getPublicKeyFromCertPEM=function(e){var t=new st;return t.readCertPEM(e),t.getPublicKey()},st.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=de.getVbyList,o={};return o.algparam=null,(t=new st).readCertPEM(e),n=t.getPublicKeyHex(),o.keyhex=r(n,0,[1],"03").substr(2),o.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===o.algoid&&(o.algparam=r(n,0,[0,1],"06")),o},st.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];void 0!==fe&&fe||(fe={}),void 0!==fe.jws&&fe.jws||(fe.jws={}),fe.jws.JWS=function(){var e=fe.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var o=r[1],i=r[2],s=r[3],a=o+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=o,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!n){var c=xe(s),u=re(c,16);this.parsedJWS.sigvalH=c,this.parsedJWS.sigvalBI=u}var l=pe(o),f=pe(i);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=f,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},fe.jws.JWS.sign=function(e,t,n,r,o){var i,s,a,c=fe,u=c.jws.JWS,l=u.readSafeJSONString,f=u.isSafeJSONString,h=c.crypto,p=(h.ECDSA,h.Mac),d=h.Signature,v=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(s=t,i=v.stringify(s)),"string"==typeof t){if(!f(i=t))throw"JWS Head is not safe JSON string: "+i;s=l(i)}if(a=n,"object"==typeof n&&(a=v.stringify(n)),""!=e&&null!=e||void 0===s.alg||(e=s.alg),""!=e&&null!=e&&void 0===s.alg&&(s.alg=e,i=v.stringify(s)),e!==s.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+s.alg;var y=null;if(void 0===u.jwsalg2sigalg[e])throw"unsupported alg name: "+e;y=u.jwsalg2sigalg[e];var g=he(i)+"."+he(a),m="";if("Hmac"==y.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var _=new p({alg:y,prov:"cryptojs",pass:r});_.updateString(g),m=_.doFinal()}else if(-1!=y.indexOf("withECDSA")){(w=new d({alg:y})).init(r,o),w.updateString(g);var b=w.sign();m=fe.crypto.ECDSA.asn1SigToConcatSig(b)}else{var w;if("none"!=y)(w=new d({alg:y})).init(r,o),w.updateString(g),m=w.sign()}return g+"."+we(m)},fe.jws.JWS.verify=function(e,t,n){var r,o=fe,i=o.jws.JWS,s=i.readSafeJSONString,a=o.crypto,c=a.ECDSA,u=a.Mac,l=a.Signature;if(r=ie,!ze(e))return!1;var f=e.split(".");if(3!==f.length)return!1;var h=f[0]+"."+f[1],p=xe(f[2]),d=s(pe(f[0])),v=null,y=null;if(void 0===d.alg)throw"algorithm not specified in header";if((y=(v=d.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0)&&-1==(":"+n.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=nt.getKey(t)),!("RS"!=y&&"PS"!=y||t instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(t instanceof c))throw"key shall be a ECDSA obj for ES* algs";var g=null;if(void 0===i.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+v;if("none"==(g=i.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==g.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var m=new u({alg:g,pass:t});return m.updateString(h),p==m.doFinal()}if(-1!=g.indexOf("withECDSA")){var _,b=null;try{b=c.concatSigToASN1Sig(p)}catch(e){return!1}return(_=new l({alg:g})).init(t),_.updateString(h),_.verify(b)}return(_=new l({alg:g})).init(t),_.updateString(h),_.verify(p)},fe.jws.JWS.parse=function(e){var t,n,r,o=e.split("."),i={};if(2!=o.length&&3!=o.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=o[0],n=o[1],3==o.length&&(r=o[2]),i.headerObj=fe.jws.JWS.readSafeJSONString(pe(t)),i.payloadObj=fe.jws.JWS.readSafeJSONString(pe(n)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),null==i.payloadObj?i.payloadPP=pe(n):i.payloadPP=JSON.stringify(i.payloadObj,null,"  "),void 0!==r&&(i.sigHex=xe(r)),i},fe.jws.JWS.verifyJWT=function(e,t,n){var r=fe.jws,o=r.JWS,i=o.readSafeJSONString,s=o.inArray,a=o.includedArray;if(!ze(e))return!1;var c=e.split(".");if(3!=c.length)return!1;var u=c[0],l=c[1],f=(xe(c[2]),i(pe(u))),h=i(pe(l));if(void 0===f.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!s(f.alg,n.alg))return!1;if(void 0!==h.iss&&"object"==typeof n.iss&&!s(h.iss,n.iss))return!1;if(void 0!==h.sub&&"object"==typeof n.sub&&!s(h.sub,n.sub))return!1;if(void 0!==h.aud&&"object"==typeof n.aud)if("string"==typeof h.aud){if(!s(h.aud,n.aud))return!1}else if("object"==typeof h.aud&&!a(h.aud,n.aud))return!1;var p=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(p=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+n.gracePeriod<p)&&(!(void 0!==h.nbf&&"number"==typeof h.nbf&&p<h.nbf-n.gracePeriod)&&(!(void 0!==h.iat&&"number"==typeof h.iat&&p<h.iat-n.gracePeriod)&&((void 0===h.jti||void 0===n.jti||h.jti===n.jti)&&!!o.verify(e,t,n.alg))))},fe.jws.JWS.includedArray=function(e,t){var n=fe.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},fe.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},fe.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},fe.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return"object"!=typeof(r=le(e))||r.constructor===Array?0:(t&&(t[n]=r),1)}catch(e){return 0}},fe.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=le(e))||t.constructor===Array?null:t}catch(e){return null}},fe.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},fe.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Ce(t);return we(fe.crypto.Util.hashHex(n,"sha256"))},fe.jws.IntDate={},fe.jws.IntDate.get=function(e){var t=fe.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},fe.jws.IntDate.getZulu=function(e){return Me(e)},fe.jws.IntDate.getNow=function(){return~~(new Date/1e3)},fe.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},fe.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==fe&&fe||(fe={}),void 0!==fe.jws&&fe.jws||(fe.jws={}),fe.jws.JWSJS=function(){var e=fe.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,r){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var o=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var i=fe.jws.JWS.sign(e,t,this.sPayload,n,r).split(".");i[0],i[2];this.aHeader.push(i[0]),this.aSignature.push(i[2])}catch(e){throw this.aHeader.length>o&&this.aHeader.pop(),this.aSignature.length>o&&this.aSignature.pop(),"addSignature failed: "+e}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;if(!1===this.verifyNth(t,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var o=this.aHeader[t],i=this.aSignature[t],s=o+"."+this.sPayload+"."+i,a=!1;try{a=e.verify(s,n,r)}catch(e){return!1}return a},this.readJWSJS=function(e){if("string"==typeof e){var n=t(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignature=e.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=ne,t.rng_seed_time=Z,t.BigInteger=x,t.RSAKey=ie,t.ECDSA=fe.crypto.ECDSA,t.DSA=fe.crypto.DSA,t.Signature=fe.crypto.Signature,t.MessageDigest=fe.crypto.MessageDigest,t.Mac=fe.crypto.Mac,t.Cipher=fe.crypto.Cipher,t.KEYUTIL=nt,t.ASN1HEX=de,t.X509=st,t.X509CRL=function(e){var t=fe.lang.String.isHex,n=de,r=n.getV,o=n.getTLV,i=n.getVbyList,s=n.getTLVbyList,a=n.getTLVbyListEx,c=n.getIdxbyList,u=n.getIdxbyListEx,l=n.getChildIdx,f=new st;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var e=c(this.hex,0,[0,0]),t=this.hex.substr(e,2);if("02"==t)this.posSigAlg=1;else{if("30"!=t)throw new Error("malformed 1st item of TBSCertList: "+t);this.posSigAlg=0}var n,r=c(this.hex,0,[0,this.posSigAlg+3]),o=this.hex.substr(r,2);if("17"==o||"18"==o)n=c(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=n&&"30"==this.hex.substr(n,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==o)this.posRevCert=this.posSigAlg+3;else{if("a0"!=o)throw new Error("malformed nextUpdate or revCert tag: "+o);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(i(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var e=s(this.hex,0,[0,this.posSigAlg],"30");return f.getAlgorithmIdentifierName(e)},this.getIssuer=function(){return f.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return s(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var e=i(this.hex,0,[0,this.posSigAlg+2]);return result=ke(e)},this.getNextUpdate=function(){var e=c(this.hex,0,[0,this.posSigAlg+3]),t=this.hex.substr(e,2);return"17"!=t&&"18"!=t?null:ke(r(this.hex,e))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var e=[],t=c(this.hex,0,[0,this.posRevCert]),n=l(this.hex,t),r=0;r<n.length;r++){var i=o(this.hex,n[r]);e.push(this.getRevCert(i))}return e},this.getRevCert=function(e){var t={},n=l(e,0);return t.sn={hex:i(e,0,[0],"02")},t.date=ke(i(e,0,[1])),3==n.length&&(t.ext=f.getExtParamArray(s(e,0,[2]))),t},this.findRevCert=function(e){var t=new st(e).getSerialNumberHex();return this.findRevCertBySN(t)},this.findRevCertBySN=function(e){if(null==this.parsed&&this.getParam(),null==this.parsed.revcert)return null;for(var t=this.parsed.revcert,n=0;n<t.length;n++)if(e==t[n].sn.hex)return t[n];return null},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),o=new fe.crypto.Signature({alg:t});return o.init(e),o.updateHex(r),o.verify(n)},this.getParam=function(e){var t={},n=this.getVersion();null!=n&&(t.version=n),t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.thisupdate=this.getThisUpdate();var r=this.getNextUpdate();null!=r&&(t.nextupdate=r);var o=this.getRevCertArray();if(null!=o&&(t.revcert=o),-1!=u(this.hex,0,[0,"[0]"])){var i=a(this.hex,0,[0,"[0]",0]);t.ext=f.getExtParamArray(i)}return t.sighex=this.getSignatureValueHex(),this.parsed=t,"object"==typeof e&&(1==e.tbshex&&(t.tbshex=s(this.hex,0,[0])),1==e.nodnarray&&delete t.issuer.array),t},"string"==typeof e&&(t(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=je(e)),this._setPos())},t.CryptoJS=v,t.b64tohex=b,t.b64toBA=w,t.ECFieldElementFp=ae,t.ECPointFp=ce,t.ECCurveFp=ue,t.stoBA=ve,t.BAtos=ye,t.BAtohex=ge,t.stohex=me,t.stob64=function(e){return _(me(e))},t.stob64u=function(e){return _e(_(me(e)))},t.b64utos=function(e){return ye(w(be(e)))},t.b64tob64u=_e,t.b64utob64=be,t.hex2b64=_,t.hextob64u=we,t.b64utohex=xe,t.utf8tob64u=he,t.b64utoutf8=pe,t.utf8tob64=function(e){return _(Be(qe(e)))},t.b64toutf8=function(e){return decodeURIComponent(De(b(e)))},t.utf8tohex=Oe,t.hextoutf8=Ee,t.hextorstr=ke,t.rstrtohex=Ce,t.hextob64=Ie,t.hextob64nl=Pe,t.b64nltohex=Te,t.hextopem=Ae,t.pemtohex=je,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Re,t.zulutosec=Me,t.zulutodate=function(e){return new Date(Re(e))},t.datetozulu=function(e,t,n){var r,o=e.getUTCFullYear();if(t){if(o<1950||2049<o)throw"not proper year for UTCTime: "+o;r=(""+o).slice(-2)}else r=("000"+o).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var i=e.getUTCMilliseconds();0!==i&&(r+="."+(i=(i=("00"+i).slice(-3)).replace(/0+$/g,"")))}return r+="Z"},t.uricmptohex=Be,t.hextouricmp=De,t.ipv6tohex=Le,t.hextoipv6=Ne,t.hextoip=Fe,t.iptohex=Ge,t.ucs2hextoutf8=Ve,t.encodeURIComponentAll=qe,t.newline_toUnix=function(e){return e=e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=We,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.oidtohex=$e,t.hextooid=Ye,t.strpad=Ze,t.bitstrtoint=Xe,t.inttobitstr=Je,t.bitstrtobinstr=Qe,t.binstrtobitstr=function(e){if("string"!=typeof e)return null;if(null==e.match(/^[01]+$/))return null;try{return Je(parseInt(e,2))}catch(e){return null}},t.isBase64URLDot=ze,t.namearraytobinstr=et,t.extendClass=tt,t.KJUR=fe,t.crypto=fe.crypto,t.asn1=fe.asn1,t.jws=fe.jws,t.lang=fe.lang},4546:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},i={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=c(e,(0|e)<0?-1:0,!0),s&&(i[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=c(e,e<0?-1:0,!1),s&&(o[e]=n),n)}function a(e,t){if(isNaN(e))return t?g:y;if(t){if(e<0)return g;if(e>=p)return x}else{if(e<=-d)return O;if(e+1>=d)return w}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=a,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var o=a(u(n,8)),i=y,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),f=parseInt(e.substring(s,s+c),n);if(c<8){var h=a(u(n,c));i=i.mul(h).add(a(f))}else i=(i=i.mul(o)).add(a(f))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,p=h*h,d=p/2,v=s(1<<24),y=s(0);n.ZERO=y;var g=s(0,!0);n.UZERO=g;var m=s(1);n.ONE=m;var _=s(1,!0);n.UONE=_;var b=s(-1);n.NEG_ONE=b;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var x=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var O=c(0,-2147483648,!1);n.MIN_VALUE=O;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=a(u(e,6),this.unsigned),i=this,s="";;){var c=i.div(o),l=(i.sub(c.mul(o)).toInt()>>>0).toString(e);if((i=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(m)},E.neg=E.negate,E.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,l=0,h=0,p=0,d=0;return p+=(d+=i+(65535&e.low))>>>16,h+=(p+=o+u)>>>16,l+=(h+=n+a)>>>16,l+=t+s,c((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},E.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return y;if(r(e)||(e=f(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(O))return e.isOdd()?O:y;if(e.eq(O))return this.isOdd()?O:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,u=e.high>>>16,l=65535&e.high,h=e.low>>>16,p=65535&e.low,d=0,g=0,m=0,_=0;return m+=(_+=s*p)>>>16,g+=(m+=i*p)>>>16,m&=65535,g+=(m+=s*h)>>>16,d+=(g+=o*p)>>>16,g&=65535,d+=(g+=i*h)>>>16,g&=65535,d+=(g+=s*l)>>>16,d+=n*p+o*h+i*l+s*u,c((m&=65535)<<16|(_&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return _;i=g}else{if(this.eq(O))return e.eq(m)||e.eq(b)?O:e.eq(O)?m:(n=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?m:b:(o=this.sub(e.mul(n)),i=n.add(o.div(e)));if(e.eq(O))return this.unsigned?g:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=y}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),l=s<=48?1:u(2,s-48),h=a(n),p=h.mul(e);p.isNegative()||p.gt(o);)p=(h=a(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=m),i=i.add(h),o=o.sub(p)}return i},E.div=E.divide,E.modulo=function(e){return r(e)||(e=f(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return c(~this.low,~this.high,this.unsigned)},E.and=function(e){return r(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return r(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return r(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},9694:function(e){e.exports=function(){"use strict";var e={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},t=Array.prototype.slice;function n(e){var n=e.length;return n?1===n?[e[0]]:2===n?[e[0],e[1]]:3===n?[e[0],e[1],e[2]]:t.call(e,0):[]}function r(t){var n={};for(var r in t)e[r]||(n[r]=t[r]);return n}function o(e){return"function"==typeof e&&e.isMemoized}function i(e,t){return e===t||e!=e&&t!=t}function s(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var a=function(){function e(e){this.keys=[],this.values=[],this.options=e;var t="function"==typeof e.isMatchingKey;t?this.getKeyIndex=this._getKeyIndexFromMatchingKey:e.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey="function"==typeof e.transformKey,this.shouldCloneArguments=this.canTransformKey||t,this.shouldUpdateOnAdd="function"==typeof e.onCacheAdd,this.shouldUpdateOnChange="function"==typeof e.onCacheChange,this.shouldUpdateOnHit="function"==typeof e.onCacheHit}return Object.defineProperty(e.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return{keys:n(this.keys),size:this.size,values:n(this.values)}},enumerable:!1,configurable:!0}),e.prototype._getKeyIndexFromMatchingKey=function(e){var t=this.options,n=t.isMatchingKey,r=t.maxSize,o=this.keys,i=o.length;if(!i)return-1;if(n(o[0],e))return 0;if(r>1)for(var s=1;s<i;s++)if(n(o[s],e))return s;return-1},e.prototype._getKeyIndexForMany=function(e){var t=this.options.isEqual,n=this.keys,r=n.length;if(!r)return-1;if(1===r)return this._getKeyIndexForSingle(e);var o,i,s=e.length;if(s>1){for(var a=0;a<r;a++)if((o=n[a]).length===s){for(i=0;i<s&&t(o[i],e[i]);i++);if(i===s)return a}}else for(a=0;a<r;a++)if((o=n[a]).length===s&&t(o[0],e[0]))return a;return-1},e.prototype._getKeyIndexForSingle=function(e){var t=this.keys;if(!t.length)return-1;var n=t[0],r=n.length;if(e.length!==r)return-1;var o=this.options.isEqual;if(r>1){for(var i=0;i<r;i++)if(!o(n[i],e[i]))return-1;return 0}return o(n[0],e[0])?0:-1},e.prototype.orderByLru=function(e,t,n){for(var r=this.keys,o=this.values,i=r.length,s=n;s--;)r[s+1]=r[s],o[s+1]=o[s];r[0]=e,o[0]=t;var a=this.options.maxSize;i===a&&n===i?(r.pop(),o.pop()):n>=a&&(r.length=o.length=a)},e.prototype.updateAsyncCache=function(e){var t=this,n=this.options,r=n.onCacheChange,o=n.onCacheHit,i=this.keys[0],s=this.values[0];this.values[0]=s.then((function(n){return t.shouldUpdateOnHit&&o(t,t.options,e),t.shouldUpdateOnChange&&r(t,t.options,e),n}),(function(e){var n=t.getKeyIndex(i);throw-1!==n&&(t.keys.splice(n,1),t.values.splice(n,1)),e}))},e}();function c(e,t){if(void 0===t&&(t={}),o(e))return c(e.fn,s(e.options,t));if("function"!=typeof e)throw new TypeError("You must pass a function to `memoize`.");var u=t.isEqual,l=void 0===u?i:u,f=t.isMatchingKey,h=t.isPromise,p=void 0!==h&&h,d=t.maxSize,v=void 0===d?1:d,y=t.onCacheAdd,g=t.onCacheChange,m=t.onCacheHit,_=t.transformKey,b=s({isEqual:l,isMatchingKey:f,isPromise:p,maxSize:v,onCacheAdd:y,onCacheChange:g,onCacheHit:m,transformKey:_},r(t)),w=new a(b),x=w.keys,O=w.values,E=w.canTransformKey,S=w.shouldCloneArguments,k=w.shouldUpdateOnAdd,C=w.shouldUpdateOnChange,I=w.shouldUpdateOnHit,P=function(){var t=S?n(arguments):arguments;E&&(t=_(t));var r=x.length?w.getKeyIndex(t):-1;if(-1!==r)I&&m(w,b,P),r&&(w.orderByLru(x[r],O[r],r),C&&g(w,b,P));else{var o=e.apply(this,arguments),i=S?t:n(arguments);w.orderByLru(i,o,x.length),p&&w.updateAsyncCache(P),k&&y(w,b,P),C&&g(w,b,P)}return O[0]};return P.cache=w,P.fn=e,P.isMemoized=!0,P.options=b,P}return c}()},7447:function(e,t,n){e.exports=function(e,t){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var o={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return"function"==typeof e?"function"==typeof t?function(){e.apply(this,arguments),t.apply(this,arguments)}:e:"function"==typeof t?t:void 0}))}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return"function"==typeof e?"function"==typeof t?function(){return e(t.apply(this,arguments))}:e:"function"==typeof t?t:void 0}))}function a(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return n;return-1}function c(e,t){var n="function"==typeof t?t:function(t,n){for(var r=0;r<n.length;r++)if(!e(t[r],n[r]))return!1;return!0};return function(e,t){for(var r=0;r<e.length;r++)if(e[r].length===t.length&&n(e[r],t))return r;return-1}}function u(e,t){return t&&t!==o?n({},e,t,{onCacheAdd:i(e.onCacheAdd,t.onCacheAdd),onCacheChange:i(e.onCacheChange,t.onCacheChange),onCacheHit:i(e.onCacheHit,t.onCacheHit),transformArgs:s(e.transformArgs,t.transformArgs)}):e}function l(e){return"function"==typeof e&&e.isMoized}function f(e,t,n){try{var r=n||t||"anonymous";Object.defineProperty(e,"name",{configurable:!0,enumerable:!1,value:"moized("+r+")",writable:!0})}catch(e){}}function h(e,t,n){var r=a(e,t);-1!==r&&(clearTimeout(e[r].timeoutId),n&&e.splice(r,1))}function p(e,t){var n=setTimeout(e,t);return"function"==typeof n.unref&&n.unref(),n}function d(e,t,n,r){var o=t.maxAge;return function i(s,u,l){var f=s.keys[0];if(-1===a(e,f)){var d=function(){var o=c(n,r)(s.keys,f),a=s.values[o];~o&&(s.keys.splice(o,1),s.values.splice(o,1),"function"==typeof t.onCacheChange&&t.onCacheChange(s,u,l)),h(e,f,!0),"function"==typeof t.onExpire&&!1===t.onExpire(f)&&(s.keys.unshift(f),s.values.unshift(a),i(s,u,l),"function"==typeof t.onCacheChange&&t.onCacheChange(s,u,l))};e.push({expirationMethod:d,key:f,timeoutId:p(d,o)})}}}function v(e,t){return function(n){var r=n.keys[0],o=a(e,r);~o&&(h(e,r,!1),e[o].timeoutId=p(e[o].expirationMethod,t.maxAge))}}function y(e,t,n,r){var o="number"==typeof t.maxAge&&isFinite(t.maxAge)?d(e,t,n,r):void 0;return{onCacheAdd:o,onCacheHit:o&&t.updateExpire?v(e,t):void 0}}var g={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},m=!1;function _(e){e?delete g.profiles[e]:g.profiles={}}function b(e){void 0===e&&(e=!0),g.isCollectingStats=e}function w(e){var t=e.profileName;return function(){t&&!g.profiles[t]&&(g.profiles[t]={calls:0,hits:0}),g.profiles[t].calls++}}function x(e){return function(){var t=g.profiles,n=e.profileName;t[n]||(t[n]={calls:0,hits:0}),t[n].calls++,t[n].hits++}}function O(e){return e.displayName||e.name||"Anonymous "+g.anonymousProfileNameCounter++}function E(e,t){return e?(t/e*100).toFixed(4)+"%":"0.0000%"}function S(e){g.isCollectingStats||m||(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),m=!0);var t=g.profiles;if(e){if(!t[e])return{calls:0,hits:0,usage:"0.0000%"};var r=t[e];return n({},r,{usage:E(r.calls,r.hits)})}var o=Object.keys(g.profiles).reduce((function(e,n){return e.calls+=t[n].calls,e.hits+=t[n].hits,e}),{calls:0,hits:0});return n({},o,{profiles:Object.keys(t).reduce((function(e,t){return e[t]=S(t),e}),{}),usage:E(o.calls,o.hits)})}function k(e){return g.isCollectingStats?{onCacheAdd:w(e),onCacheHit:x(e)}:{}}var C={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function I(e,t,n){void 0===n&&(n=[]),Object.getOwnPropertyNames(e).forEach((function(r){if(!C[r]&&-1===n.indexOf(r)){var o=Object.getOwnPropertyDescriptor(e,r);o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}}))}function P(e,t){var n=t.expirations,r=e.options,o=c(r.isEqual,r.isMatchingKey),i=e;i.clear=function(){var e=i._microMemoizeOptions.onCacheChange,t=i.cache;return t.keys.length=0,t.values.length=0,e&&e(t,i.options,i),!0},i.clearStats=function(){_(i.options.profileName)},i.get=function(e){var t=i._microMemoizeOptions.transformKey,n=i.cache,r=t?t(e):e;return-1!==o(n.keys,r)?i.apply(this,e):void 0},i.getStats=function(){return S(i.options.profileName)},i.has=function(e){var t=i._microMemoizeOptions.transformKey,n=t?t(e):e;return-1!==o(i.cache.keys,n)},i.keys=function(){return i.cacheSnapshot.keys},i.remove=function(e){var t=i._microMemoizeOptions,r=t.onCacheChange,s=t.transformKey,a=i.cache,c=o(a.keys,s?s(e):e);if(-1===c)return!1;var u=a.keys[c];return a.keys.splice(c,1),a.values.splice(c,1),r&&r(a,i.options,i),h(n,u,!0),!0},i.set=function(e,t){var n=i._microMemoizeOptions,r=i.cache,s=i.options,a=n.onCacheAdd,c=n.onCacheChange,u=n.transformKey,l=u?u(e):e,f=o(r.keys,l);if(-1===f){var h=s.maxSize-1;r.size>h&&(r.keys.length=h,r.values.length=h),r.keys.unshift(l),r.values.unshift(t),s.isPromise&&r.updateAsyncCache(i),a&&a(r,s,i),c&&c(r,s,i)}else{var p=r.keys[f];r.values[f]=t,f>0&&r.orderByLru(p,t,f),s.isPromise&&r.updateAsyncCache(i),"function"==typeof c&&c(r,s,i)}},i.values=function(){return i.cacheSnapshot.values}}function T(e,t){var n=t.expirations,r=t.options,o=t.originalFunction,i=e.options;Object.defineProperties(e,{_microMemoizeOptions:{configurable:!0,get:function(){return i}},cacheSnapshot:{configurable:!0,get:function(){var t=e.cache;return{keys:t.keys.slice(0),size:t.size,values:t.values.slice(0)}}},expirations:{configurable:!0,get:function(){return n}},expirationsSnapshot:{configurable:!0,get:function(){return n.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return r}},originalFunction:{configurable:!0,get:function(){return o}}}),I(o,e)}function A(e,t){return P(e,t),T(e,t),e}var j="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function R(e,t,r){var o=e(n({maxArgs:2,isShallowEqual:!0},r,{isReact:!1}));function i(e,n,r){this.props=e,this.context=n,this.updater=r,this.MoizedComponent=o(t)}return t.displayName||(t.displayName=t.name||"Component"),i.prototype.isReactComponent={},i.prototype.render=function(){return{$$typeof:j,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},I(t,i,["contextType","contextTypes"]),i.displayName="Moized("+(t.displayName||t.name||"Component")+")",f(i,t.name,r.profileName),i}function M(e){return function(t){if(e>=t.length)return t;if(0===e)return[];if(1===e)return[t[0]];if(2===e)return[t[0],t[1]];if(3===e)return[t[0],t[1],t[2]];for(var n=[],r=0;r<e;r++)n[r]=t[r];return n}}function B(e,t){for(var n=e.length,r=0;r<n;++r)if(e[r]===t)return r+1;return 0}function D(){var e=[],t=[];return function(n,r){var o=typeof r;if("function"===o||"symbol"===o)return r.toString();if("object"==typeof r){if(e.length){var i=B(e,this);0===i?e[e.length]=this:(e.splice(i),t.splice(i)),t[t.length]=n;var s=B(e,r);if(0!==s)return"[ref="+(t.slice(0,s).join(".")||".")+"]"}else e[0]=r,t[0]=n;return r}return""+r}}function L(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?e:JSON.stringify(e,D())}function N(e){for(var t="|",n=0;n<e.length;n++)t+=L(e[n])+"|";return[t]}function F(e){return"function"==typeof e.serializer?e.serializer:N}function U(e,t){return e[0]===t[0]}function G(e){if("function"==typeof e)return function(t,n,r){return e(r.cache,r.options,r)}}function H(e){return e.matchesArg||e.isDeepEqual&&t.deepEqual||e.isShallowEqual&&t.shallowEqual||t.sameValueZeroEqual}function V(e){return e.matchesKey||e.isSerialized&&U||void 0}function q(e){return s(e.isSerialized&&F(e),"function"==typeof e.transformArgs&&e.transformArgs,"number"==typeof e.maxArgs&&M(e.maxArgs))}function K(e){var t=e.options.updateCacheForKey,n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!t(r))return e.apply(this,r);var i=e.fn.apply(this,r);return e.set(r,i),i};return I(e,n),n}var z=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],W=function t(s,a){var c=a||o;if(l(s)){var h=s.originalFunction,p=u(s.options,c);return t(h,p)}if("object"==typeof s)return function(e,n){if("function"==typeof e){var r=u(s,n);return t(e,r)}var o=u(s,e);return t(o)};if(c.isReact)return R(t,s,c);var d=n({},o,c,{maxAge:"number"==typeof c.maxAge&&c.maxAge>=0?c.maxAge:o.maxAge,maxArgs:"number"==typeof c.maxArgs&&c.maxArgs>=0?c.maxArgs:o.maxArgs,maxSize:"number"==typeof c.maxSize&&c.maxSize>=0?c.maxSize:o.maxSize,profileName:c.profileName||O(s)}),v=[];d.matchesArg,d.isDeepEqual;var g=d.isPromise;d.isReact,d.isSerialized,d.isShallowEqual,d.matchesKey,d.maxAge,d.maxArgs;var m=d.maxSize,_=d.onCacheAdd,b=d.onCacheChange,w=d.onCacheHit;d.onExpire,d.profileName,d.serializer;var x=d.updateCacheForKey;d.transformArgs,d.updateExpire;var E=r(d,z),S=H(d),C=V(d),I=y(v,d,S,C),P=k(d),T=q(d),j=n({},E,{isEqual:S,isMatchingKey:C,isPromise:g,maxSize:m,onCacheAdd:G(i(_,I.onCacheAdd,P.onCacheAdd)),onCacheChange:G(b),onCacheHit:G(i(w,I.onCacheHit,P.onCacheHit)),transformKey:T}),M=A(e(s,j),{expirations:v,options:d,originalFunction:s});return x&&(M=K(M)),f(M,s.name,c.profileName),M};function $(e,t){if(!0===t)return W({maxAge:e,updateExpire:t});if("object"==typeof t){var n=t.onExpire,r=t.updateExpire;return W({maxAge:e,onExpire:n,updateExpire:r})}return W("function"==typeof t?{maxAge:e,onExpire:t,updateExpire:!0}:{maxAge:e})}return W.clearStats=_,W.collectStats=b,W.compose=function(){return s.apply(void 0,arguments)||W},W.deep=W({isDeepEqual:!0}),W.getStats=S,W.infinite=W({maxSize:1/0}),W.isCollectingStats=function(){return g.isCollectingStats},W.isMoized=function(e){return"function"==typeof e&&!!e.isMoized},W.matchesArg=function(e){return W({matchesArg:e})},W.matchesKey=function(e){return W({matchesKey:e})},W.maxAge=$,W.maxArgs=function(e){return W({maxArgs:e})},W.maxSize=function(e){return W({maxSize:e})},W.profile=function(e){return W({profileName:e})},W.promise=W({isPromise:!0,updateExpire:!0}),W.react=W({isReact:!0}),W.serialize=W({isSerialized:!0}),W.serializeWith=function(e){return W({isSerialized:!0,serializer:e})},W.shallow=W({isShallowEqual:!0}),W.transformArgs=function(e){return W({transformArgs:e})},W.updateCacheForKey=function(e){return W({updateCacheForKey:e})},Object.defineProperty(W,"default",{configurable:!1,enumerable:!1,value:W,writable:!1}),W}(n(9694),n(3580))},2330:(e,t,n)=>{var r="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&o&&"function"==typeof o.get?o.get:null,s=r&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&c&&"function"==typeof c.get?c.get:null,l=a&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,v=Object.prototype.toString,y=Function.prototype.toString,g=String.prototype.match,m=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,x=RegExp.prototype.test,O=Array.prototype.concat,E=Array.prototype.join,S=Array.prototype.slice,k=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,A="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,j=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function M(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-k(-e):k(e);if(r!==e){var o=String(r),i=m.call(t,o.length+1);return _.call(o,n,"$&_")+"."+_.call(_.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,n,"$&_")}var B=n(281),D=B.custom,L=H(D)?D:null;function N(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function F(e){return _.call(String(e),/"/g,"&quot;")}function U(e){return!("[object Array]"!==K(e)||A&&"object"==typeof e&&A in e)}function G(e){return!("[object RegExp]"!==K(e)||A&&"object"==typeof e&&A in e)}function H(e){if(T)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,o,a){var c=r||{};if(q(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var v=!q(c,"customInspect")||c.customInspect;if("boolean"!=typeof v&&"symbol"!==v)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=c.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return W(t,c);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var x=String(t);return b?M(t,x):x}if("bigint"==typeof t){var k=String(t)+"n";return b?M(t,k):k}var I=void 0===c.depth?5:c.depth;if(void 0===o&&(o=0),o>=I&&I>0&&"object"==typeof t)return U(t)?"[Array]":"[Object]";var D=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(c,o);if(void 0===a)a=[];else if(z(a,t)>=0)return"[Circular]";function V(t,n,r){if(n&&(a=S.call(a)).push(n),r){var i={depth:c.depth};return q(c,"quoteStyle")&&(i.quoteStyle=c.quoteStyle),e(t,i,o+1,a)}return e(t,c,o+1,a)}if("function"==typeof t&&!G(t)){var $=function(e){if(e.name)return e.name;var t=g.call(y.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=Q(t,V);return"[Function"+($?": "+$:" (anonymous)")+"]"+(ee.length>0?" { "+E.call(ee,", ")+" }":"")}if(H(t)){var te=T?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!=typeof t||T?te:Y(te)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var ne="<"+w.call(String(t.nodeName)),re=t.attributes||[],oe=0;oe<re.length;oe++)ne+=" "+re[oe].name+"="+N(F(re[oe].value),"double",c);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+w.call(String(t.nodeName))+">"}if(U(t)){if(0===t.length)return"[]";var ie=Q(t,V);return D&&!function(e){for(var t=0;t<e.length;t++)if(z(e[t],"\n")>=0)return!1;return!0}(ie)?"["+J(ie,D)+"]":"[ "+E.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==K(e)||A&&"object"==typeof e&&A in e)}(t)){var se=Q(t,V);return"cause"in Error.prototype||!("cause"in t)||j.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(se,", ")+" }":"{ ["+String(t)+"] "+E.call(O.call("[cause]: "+V(t.cause),se),", ")+" }"}if("object"==typeof t&&v){if(L&&"function"==typeof t[L]&&B)return B(t,{depth:I-o});if("symbol"!==v&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,n){ae.push(V(n,t,!0)+" => "+V(e,t))})),X("Map",i.call(t),ae,D)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ce=[];return l&&l.call(t,(function(e){ce.push(V(e,t))})),X("Set",u.call(t),ce,D)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Z("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Z("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Z("WeakRef");if(function(e){return!("[object Number]"!==K(e)||A&&"object"==typeof e&&A in e)}(t))return Y(V(Number(t)));if(function(e){if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}(t))return Y(V(C.call(t)));if(function(e){return!("[object Boolean]"!==K(e)||A&&"object"==typeof e&&A in e)}(t))return Y(d.call(t));if(function(e){return!("[object String]"!==K(e)||A&&"object"==typeof e&&A in e)}(t))return Y(V(String(t)));if(t===n.g)return"undefined"!=typeof window?"{ [object Window] }":"{ [object global] }";if(!function(e){return!("[object Date]"!==K(e)||A&&"object"==typeof e&&A in e)}(t)&&!G(t)){var ue=Q(t,V),le=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",he=!le&&A&&Object(t)===t&&A in t?m.call(K(t),8,-1):fe?"Object":"",pe=(le||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||fe?"["+E.call(O.call([],he||[],fe||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":D?pe+"{"+J(ue,D)+"}":pe+"{ "+E.call(ue,", ")+" }"}return String(t)};var V=Object.prototype.hasOwnProperty||function(e){return e in this};function q(e,t){return V.call(e,t)}function K(e){return v.call(e)}function z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function W(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return W(m.call(e,0,t.maxStringLength),t)+r}return N(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$),"single",t)}function $(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function Y(e){return"Object("+e+")"}function Z(e){return e+" { ? }"}function X(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):E.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function Q(e,t){var n=U(e),r=[];if(n){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=q(e,o)?t(e[o],e):""}var i,s="function"==typeof I?I(e):[];if(T){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var c in e)q(e,c)&&(n&&String(Number(c))===c&&c<e.length||T&&i["$"+c]instanceof Symbol||(x.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"==typeof I)for(var u=0;u<s.length;u++)j.call(e,s[u])&&r.push("["+t(s[u])+"]: "+t(e[s[u]],e));return r}},8111:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},6722:(e,t,n)=>{"use strict";const r=n(370),o=n(2574),i=n(9824),s=()=>{},a=new o.TimeoutError;t.Z=class extends r{constructor(e){var t,n,r,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():o.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)}));n(await i)}catch(e){r(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},9350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=o/2|0;let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}},9824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9350);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const o=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(o,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},2574:(e,t,n)=>{"use strict";const r=n(8111);class o extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,n)=>new Promise(((i,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const a=setTimeout((()=>{if("function"==typeof n){try{i(n())}catch(e){s(e)}return}const r=n instanceof Error?n:new o("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(r)}),t);r(e.then(i,s),(()=>{clearTimeout(a)}))}));e.exports=i,e.exports.default=i,e.exports.TimeoutError=o},4183:(e,t,n)=>{"use strict";e.exports=n(340)},340:(e,t,n)=>{"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(9195),r.BufferWriter=n(7155),r.Reader=n(1734),r.BufferReader=n(6886),r.util=n(896),r.rpc=n(2858),r.roots=n(8155),r.configure=o,o()},1734:(e,t,n)=>{"use strict";e.exports=c;var r,o=n(896),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},f=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=f(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=f(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},6886:(e,t,n)=>{"use strict";e.exports=i;var r=n(1734);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(896);function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},8155:e=>{"use strict";e.exports={}},2858:(e,t,n)=>{"use strict";t.Service=n(3431)},3431:(e,t,n)=>{"use strict";e.exports=o;var r=n(896);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},2562:(e,t,n)=>{"use strict";e.exports=o;var r=n(896);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},896:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(6964),r.base64=n(676),r.EventEmitter=n(1538),r.float=n(4418),r.inquire=n(3859),r.utf8=n(1875),r.pool=n(3513),r.LongBits=n(2562),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},9195:(e,t,n)=>{"use strict";e.exports=f;var r,o=n(896),i=o.LongBits,s=o.base64,a=o.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function p(e,t,n){t[n]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}f.create=h(),f.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},d.prototype=Object.create(c.prototype),d.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(p,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var g=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var n=f.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(g,t,e)},f.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},f._configure=function(e){r=e,f.create=h(),r._configure()}},7155:(e,t,n)=>{"use strict";e.exports=i;var r=n(9195);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(896);function i(){r.call(this)}function s(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},4805:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",o="RFC3986";e.exports={default:o,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:o}},2109:(e,t,n)=>{"use strict";var r=n(3745),o=n(1880),i=n(4805);e.exports={formats:i,parse:o,stringify:r}},1880:(e,t,n)=>{"use strict";var r=n(8764),o=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(i),u=a?i.slice(0,a.index):i,l=[];if(u){if(!n.plainObjects&&o.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var f=0;n.depth>0&&null!==(a=s.exec(i))&&f<n.depth;){if(f+=1,!n.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+i.slice(a.index)+"]"),function(e,t,n,r){for(var o=r?t:c(t,n),i=e.length-1;i>=0;--i){var s,a=e[i];if("[]"===a&&n.parseArrays)s=[].concat(o);else{s=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(u,10);n.parseArrays||""!==u?!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[])[l]=o:"__proto__"!==u&&(s[u]=o):s={0:o}}o=s}return o}(l,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var n,u={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,h=l.split(t.delimiter,f),p=-1,d=t.charset;if(t.charsetSentinel)for(n=0;n<h.length;++n)0===h[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[n]?d="utf-8":"utf8=%26%2310003%3B"===h[n]&&(d="iso-8859-1"),p=n,n=h.length);for(n=0;n<h.length;++n)if(n!==p){var v,y,g=h[n],m=g.indexOf("]="),_=-1===m?g.indexOf("="):m+1;-1===_?(v=t.decoder(g,s.decoder,d,"key"),y=t.strictNullHandling?null:""):(v=t.decoder(g.slice(0,_),s.decoder,d,"key"),y=r.maybeMap(c(g.slice(_+1),t),(function(e){return t.decoder(e,s.decoder,d,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===d&&(y=a(y)),g.indexOf("[]=")>-1&&(y=i(y)?[y]:y),o.call(u,v)?u[v]=r.combine(u[v],y):u[v]=y}return u}(e,n):e,f=n.plainObjects?Object.create(null):{},h=Object.keys(l),p=0;p<h.length;++p){var d=h[p],v=u(d,l[d],n,"string"==typeof e);f=r.merge(f,v,n)}return!0===n.allowSparse?f:r.compact(f)}},3745:(e,t,n)=>{"use strict";var r=n(6379),o=n(8764),i=n(4805),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,c(t)?t:[t])},f=Date.prototype.toISOString,h=i.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},d={},v=function e(t,n,i,s,a,u,f,h,v,y,g,m,_,b,w,x){for(var O,E=t,S=x,k=0,C=!1;void 0!==(S=S.get(d))&&!C;){var I=S.get(t);if(k+=1,void 0!==I){if(I===k)throw new RangeError("Cyclic object value");C=!0}void 0===S.get(d)&&(k=0)}if("function"==typeof h?E=h(n,E):E instanceof Date?E=g(E):"comma"===i&&c(E)&&(E=o.maybeMap(E,(function(e){return e instanceof Date?g(e):e}))),null===E){if(a)return f&&!b?f(n,p.encoder,w,"key",m):n;E=""}if("string"==typeof(O=E)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||o.isBuffer(E))return f?[_(b?n:f(n,p.encoder,w,"key",m))+"="+_(f(E,p.encoder,w,"value",m))]:[_(n)+"="+_(String(E))];var P,T=[];if(void 0===E)return T;if("comma"===i&&c(E))b&&f&&(E=o.maybeMap(E,f)),P=[{value:E.length>0?E.join(",")||null:void 0}];else if(c(h))P=h;else{var A=Object.keys(E);P=v?A.sort(v):A}for(var j=s&&c(E)&&1===E.length?n+"[]":n,R=0;R<P.length;++R){var M=P[R],B="object"==typeof M&&void 0!==M.value?M.value:E[M];if(!u||null!==B){var D=c(E)?"function"==typeof i?i(j,M):j:j+(y?"."+M:"["+M+"]");x.set(t,k);var L=r();L.set(d,x),l(T,e(B,D,i,s,a,u,"comma"===i&&b&&c(E)?null:f,h,v,y,g,m,_,b,w,L))}}return T};e.exports=function(e,t){var n,o=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==e.format){if(!s.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=i.formatters[n],o=p.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):c(u.filter)&&(n=u.filter);var f,h=[];if("object"!=typeof o||null===o)return"";f=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=a[f];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var y="comma"===d&&t&&t.commaRoundTrip;n||(n=Object.keys(o)),u.sort&&n.sort(u.sort);for(var g=r(),m=0;m<n.length;++m){var _=n[m];u.skipNulls&&null===o[_]||l(h,v(o[_],_,d,y,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var b=h.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},8764:(e,t,n)=>{"use strict";var r=n(4805),o=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var u=a[c],l=s[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:s,prop:u}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,o,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<a.length;++u){var l=a.charCodeAt(u);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===r.RFC1738&&(40===l||41===l)?c+=a.charAt(u):l<128?c+=s[l]:l<2048?c+=s[192|l>>6]+s[128|63&l]:l<55296||l>=57344?c+=s[224|l>>12]+s[128|l>>6&63]+s[128|63&l]:(u+=1,l=65536+((1023&l)<<10|1023&a.charCodeAt(u)),c+=s[240|l>>18]+s[128|l>>12&63]+s[128|l>>6&63]+s[128|63&l])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(i(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var s=t;return i(t)&&!i(n)&&(s=a(t,r)),i(t)&&i(n)?(n.forEach((function(n,i){if(o.call(t,i)){var s=t[i];s&&"object"==typeof s&&n&&"object"==typeof n?t[i]=e(s,n,r):t.push(n)}else t[i]=n})),t):Object.keys(n).reduce((function(t,i){var s=n[i];return o.call(t,i)?t[i]=e(t[i],s,r):t[i]=s,t}),s)}}},6379:(e,t,n)=>{"use strict";var r=n(9776),o=n(4898),i=n(2330),s=r("%TypeError%"),a=r("%WeakMap%",!0),c=r("%Map%",!0),u=o("WeakMap.prototype.get",!0),l=o("WeakMap.prototype.set",!0),f=o("WeakMap.prototype.has",!0),h=o("Map.prototype.get",!0),p=o("Map.prototype.set",!0),d=o("Map.prototype.has",!0),v=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new s("Side channel does not contain "+i(e))},get:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(c){if(t)return h(t,r)}else if(n)return function(e,t){var n=v(e,t);return n&&n.value}(n,r)},has:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(e)return f(e,r)}else if(c){if(t)return d(t,r)}else if(n)return function(e,t){return!!v(e,t)}(n,r);return!1},set:function(r,o){a&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new a),l(e,r,o)):c?(t||(t=new c),p(t,r,o)):(n||(n={key:{},next:null}),function(e,t,n){var r=v(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,o))}};return r}},6854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DOMException:()=>w,Headers:()=>l,Request:()=>g,Response:()=>_,fetch:()=>x});var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g||{},o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function p(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o.arrayBuffer&&o.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(o.blob)return this.blob().then(p);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=h(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8";return t.readAsText(e,o),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=a(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=c(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),u(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),u(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),u(e)},o.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,o,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",o=n.toUpperCase(),y.indexOf(o)>-1?o:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function m(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:200,statusText:""});return e.status=0,e.type="error",e};var b=[301,302,303,307,308];_.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})};var w=r.DOMException;try{new w}catch(e){(w=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function x(e,t){return new Promise((function(n,i){var s=new g(e,t);if(s.signal&&s.signal.aborted)return i(new w("Aborted","AbortError"));var u=new XMLHttpRequest;function f(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(e){console.warn("Response "+e.message)}}})),t)};s.url.startsWith("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var o="response"in u?u.response:u.responseText;setTimeout((function(){n(new _(o,r))}),0)},u.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){i(new w("Aborted","AbortError"))}),0)},u.open(s.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&(o.blob?u.responseType="blob":o.arrayBuffer&&(u.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof l||r.Headers&&t.headers instanceof r.Headers)){var h=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){h.push(a(e)),u.setRequestHeader(e,c(t.headers[e]))})),s.headers.forEach((function(e,t){-1===h.indexOf(t)&&u.setRequestHeader(t,e)}))}else s.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));s.signal&&(s.signal.addEventListener("abort",f),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",f)}),u.send(void 0===s._bodyInit?null:s._bodyInit)}))}x.polyfill=!0,r.fetch||(r.fetch=x,r.Headers=l,r.Request=g,r.Response=_)},8904:(e,t,n)=>{"use strict";function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}n.d(t,{Z:()=>o});const o=/^(3|39|626)$/.test(n.j)?null:function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}},5672:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,r=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?f(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},s._resetCrossOriginUpdater=function(){n=null,r=null},s.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},s.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},s.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},s.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,i=null,s=null;this.POLL_INTERVAL?i=n.setInterval(r,this.POLL_INTERVAL):(a(n,"resize",r,!0),a(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(s=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(i&&e.clearInterval(i),c(e,"resize",r,!0)),c(t,"scroll",r,!0),s&&s.disconnect()}));var u=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=u){var l=o(t);l&&this._monitorIntersections(l.ownerDocument)}}},s.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,i=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var i=o(n);if((n=i&&i.ownerDocument)==t)return!0}return!1}));if(!i){var s=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),s(),t!=r){var a=o(t);a&&this._unmonitorIntersections(a.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},s.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,s=u(o),a=this._rootContainsTarget(o),c=r.entry,l=e&&a&&this._computeTargetAndRootIntersection(o,s,t),f=null;this._rootContainsTarget(o)?n&&!this.root||(f=t):f={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=r.entry=new i({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:s,rootBounds:f,intersectionRect:l});c?e&&a?this._hasCrossedThreshold(c,h)&&this._queuedEntries.push(h):c&&c.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(t,o,i){if("none"!=window.getComputedStyle(t).display){for(var s,a,c,l,h,d,v,y,g=o,m=p(t),_=!1;!_&&m;){var b=null,w=1==m.nodeType?window.getComputedStyle(m):{};if("none"==w.display)return null;if(m==this.root||9==m.nodeType)if(_=!0,m==this.root||m==e)n&&!this.root?!r||0==r.width&&0==r.height?(m=null,b=null,g=null):b=r:b=i;else{var x=p(m),O=x&&u(x),E=x&&this._computeTargetAndRootIntersection(x,O,i);O&&E?(m=x,b=f(O,E)):(m=null,g=null)}else{var S=m.ownerDocument;m!=S.body&&m!=S.documentElement&&"visible"!=w.overflow&&(b=u(m))}if(b&&(s=b,a=g,c=void 0,l=void 0,h=void 0,d=void 0,v=void 0,y=void 0,c=Math.max(s.top,a.top),l=Math.min(s.bottom,a.bottom),h=Math.max(s.left,a.left),d=Math.min(s.right,a.right),y=l-c,g=(v=d-h)>=0&&y>=0&&{top:c,bottom:l,left:h,right:d,width:v,height:y}||null),!g)break;m=m&&p(m)}return g}},s.prototype._getRootRect=function(){var t;if(this.root&&!d(this.root))t=u(this.root);else{var n=d(this.root)?this.root:e,r=n.documentElement,o=n.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},s.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},s.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},s.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},s.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return h(n,t)&&(!this.root||n==t.ownerDocument)},s.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},s.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=i}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=l(e.rootBounds),this.boundingClientRect=l(e.boundingClientRect),this.intersectionRect=l(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function s(e,t){var n,r,o,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType&&9!=i.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function u(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function f(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function h(e,t){for(var n=t;n;){if(n==e)return!0;n=p(n)}return!1}function p(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function d(e){return e&&9===e.nodeType}}()},1663:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=!1;function o(){return r}},9076:(e,t,n)=>{"use strict";if(n.d(t,{e:()=>o}),!/^(3|626)$/.test(n.j))var r=n(1901);function o(e){return(0,r.Gf)(e)}},2872:(e,t,n)=>{"use strict";n.d(t,{zt:()=>X,f3:()=>Q,Pi:()=>W});var r=n(1901),o=n(1024),i=n.n(o);if(!o.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!r.rC)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var s=n(314);function a(e){e()}var c=n(9076),u=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(r,o){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(o))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),l=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:u)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null})),f=n(1663),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function p(e){return"observer".concat(e)}var d=function(){};function v(){return new d}function y(e,t){if(void 0===t&&(t="observed"),(0,f.F)())return e();var n=h(i().useState(v),1)[0],o=h(i().useState(),2)[1],s=function(){return o([])},a=i().useRef(null);a.current||(a.current={reaction:null,mounted:!1,changedBeforeMount:!1});var u,d,y=a.current;if(y.reaction||(y.reaction=new r.le(p(t),(function(){y.mounted?s():y.changedBeforeMount=!0})),l.register(n,y,y)),i().useDebugValue(y.reaction,c.e),i().useEffect((function(){return l.unregister(y),y.mounted=!0,y.reaction?y.changedBeforeMount&&(y.changedBeforeMount=!1,s()):(y.reaction=new r.le(p(t),(function(){s()})),s()),function(){y.reaction.dispose(),y.reaction=null,y.mounted=!1,y.changedBeforeMount=!1}}),[]),y.reaction.track((function(){try{u=e()}catch(e){d=e}})),d)throw d;return u}var g="function"==typeof Symbol&&Symbol.for,m=g?Symbol.for("react.forward_ref"):"function"==typeof o.forwardRef&&(0,o.forwardRef)((function(e){return null})).$$typeof,_=g?Symbol.for("react.memo"):"function"==typeof o.memo&&(0,o.memo)((function(e){return null})).$$typeof;function b(e,t){var n;if(_&&e.$$typeof===_)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if((0,f.F)())return e;var r=null!==(n=null==t?void 0:t.forwardRef)&&void 0!==n&&n,i=e,s=e.displayName||e.name;if(m&&e.$$typeof===m&&(r=!0,"function"!=typeof(i=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,c,u=function(e,t){return y((function(){return i(e,t)}),s)};return""!==s&&(u.displayName=s),e.contextTypes&&(u.contextTypes=e.contextTypes),r&&(u=(0,o.forwardRef)(u)),u=(0,o.memo)(u),a=e,c=u,Object.keys(a).forEach((function(e){w[e]||Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(a,e))})),u}var w={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};var x,O;(O=s.unstable_batchedUpdates)||(O=a),(0,r.jQ)({reactionScheduler:O});x=l.finalizeAllImmediately;var E=0;var S={};function k(e){return S[e]||(S[e]=function(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react "+e+" ("+E+")";return E++,t}(e)),S[e]}function C(e,t){if(I(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.hasOwnProperty.call(t,n[o])||!I(e[n[o]],t[n[o]]))return!1;return!0}function I(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var P={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,displayName:1,propTypes:1};function T(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var A=k("patchMixins"),j=k("patchedDefinition");function R(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t.locks++;try{var s;return null!=e&&(s=e.apply(this,o)),s}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(n,o)}))}}function M(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];R.call.apply(R,[this,e,t].concat(r))}}function B(e,t,n){var r=function(e,t){var n=e[A]=e[A]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var o=Object.getOwnPropertyDescriptor(e,t);if(!o||!o[j]){var i=e[t],s=D(e,t,o?o.enumerable:void 0,r,i);Object.defineProperty(e,t,s)}}function D(e,t,n,r,o){var i,s=M(o,r);return(i={})[j]=!0,i.get=function(){return s},i.set=function(o){if(this===e)s=M(o,r);else{var i=D(this,t,n,r,o);Object.defineProperty(this,t,i)}},i.configurable=!0,i.enumerable=n,i}var L=r.so||"$mobx",N=k("isMobXReactObserver"),F=k("isUnmounted"),U=k("skipRender"),G=k("isForcingUpdate");function H(e){var t=e.prototype;if(e[N]){var n=V(t);console.warn("The provided component class ("+n+")\n                has already been declared as an observer component.")}else e[N]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==o.PureComponent)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==K)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=K;z(t,"props"),z(t,"state"),e.contextType&&z(t,"context");var r=t.render;if("function"!=typeof r){var i=V(t);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return t.render=function(){return this.render=(0,f.F)()?r:q.call(this,r),this.render()},B(t,"componentDidMount",(function(){this[F]=!1,this.render[L]||o.Component.prototype.forceUpdate.call(this)})),B(t,"componentWillUnmount",(function(){if(!(0,f.F)()){var e=this.render[L];if(e)e.dispose(),this.render[L]=null;else{var t=V(this);console.warn("The reactive render of an observer class component ("+t+")\n                was overridden after MobX attached. This may result in a memory leak if the\n                overridden reactive render was not properly disposed.")}this[F]=!0}})),e}function V(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function q(e){var t=this;T(this,U,!1),T(this,G,!1);var n=V(this),i=e.bind(this),s=!1;return function e(){var a;s=!1;var c=null!=(a=e[L])?a:e[L]=function(){var e=new r.le(n+".render()",(function(){if(!s&&(s=!0,!0!==t[F])){var n=!0;try{T(t,G,!0),t[U]||o.Component.prototype.forceUpdate.call(t),n=!1}finally{T(t,G,!1),n&&(e.dispose(),t.render[L]=null)}}}));return e.reactComponent=t,e}(),u=void 0,l=void 0;if(c.track((function(){try{l=(0,r.$$)(!1,i)}catch(e){u=e}})),u)throw u;return l}}function K(e,t){return(0,f.F)()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!C(this.props,e)}function z(e,t){var n=k("reactProp_"+t+"_valueHolder"),o=k("reactProp_"+t+"_atomHolder");function i(){return this[o]||T(this,o,(0,r.cp)("reactive "+t)),this[o]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=!1;return r.wM&&r.mJ&&(e=(0,r.wM)(!0)),i.call(this).reportObserved(),r.wM&&r.mJ&&(0,r.mJ)(e),this[n]},set:function(e){this[G]||C(this[n],e)?T(this,n,e):(T(this,n,e),T(this,U,!0),i.call(this).reportChanged(),T(this,U,!1))}})}function W(e){return!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(o.Component,e)||Object.prototype.isPrototypeOf.call(o.PureComponent,e)?H(e):b(e)}function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}var Y=["children"],Z=i().createContext({});function X(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,Y),r=i().useContext(Z),o=i().useRef($({},r,n)).current;return i().createElement(Z.Provider,{value:o},t)}function J(e,t,n,r){var o,s,a,c=i().forwardRef((function(n,r){var o=$({},n),s=i().useContext(Z);return Object.assign(o,e(s||{},o)||{}),r&&(o.ref=r),i().createElement(t,o)}));return r&&(c=W(c)),c.isMobxInjector=!0,o=t,s=c,a=Object.getOwnPropertyNames(Object.getPrototypeOf(o)),Object.getOwnPropertyNames(o).forEach((function(e){P[e]||-1!==a.indexOf(e)||Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(o,e))})),c.wrappedComponent=t,c.displayName=function(e,t){var n,r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";n=t?"inject-with-"+t+"("+r+")":"inject("+r+")";return n}(t,n),c}function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("function"==typeof arguments[0]){var r=arguments[0];return function(e){return J(r,e,r.name,!0)}}return function(e){return J(function(e){return function(t,n){return e.forEach((function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}})),n}}(t),e,t.join("-"),!1)}}X.displayName="MobXProvider";if(!o.Component)throw new Error("mobx-react requires React to be available");if(!r.LO)throw new Error("mobx-react requires mobx to be available")},1901:(e,t,n)=>{"use strict";n.d(t,{$$:()=>Fe,EH:()=>Mt,Ei:()=>Cn,Gf:()=>zt,LJ:()=>Mn,LO:()=>Ce,Pb:()=>qn,cp:()=>z,jQ:()=>qt,le:()=>gt,mJ:()=>ot,rC:()=>pn,rg:()=>et,so:()=>V,wM:()=>rt});function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var o={};function i(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:o}var s=Object.assign,a=Object.getOwnPropertyDescriptor,c=Object.defineProperty,u=Object.prototype,l=[];Object.freeze(l);var f={};Object.freeze(f);var h="undefined"!=typeof Proxy,p=Object.toString();function d(){h||r("Proxy not available")}function v(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var y=function(){};function g(e){return"function"==typeof e}function m(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function _(e){return null!==e&&"object"==typeof e}function b(e){if(!_(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===p}function w(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function x(e,t,n){c(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function O(e,t,n){c(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function E(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return _(e)&&!0===e[n]}}function S(e){return e instanceof Map}function k(e){return e instanceof Set}var C=void 0!==Object.getOwnPropertySymbols;var I="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:C?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function P(e){return null===e?null:"object"==typeof e?""+e:e}function T(e,t){return u.hasOwnProperty.call(e,t)}var A=Object.getOwnPropertyDescriptors||function(e){var t={};return I(e).forEach((function(n){t[n]=a(e,n)})),t};function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),r)}var o,i}function R(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,D(e,t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U=Symbol("mobx-stored-annotations");function G(e){return Object.assign((function(t,n){H(t,n,e)}),e)}function H(e,t,n){T(e,U)||x(e,U,M({},e[U])),function(e){return e.annotationType_===Z}(n)||(e[U][t]=n)}var V=Symbol("mobx administration"),q=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=qe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e,this.batchId_=ut.inBatch?ut.batchId:NaN}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return vt(this)},t.reportChanged=function(){ut.inBatch&&this.batchId_===ut.batchId||(ut.stateVersion=ut.stateVersion<Number.MAX_SAFE_INTEGER?ut.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),pt(),yt(this),dt()},t.toString=function(){return this.name_},e}(),K=E("Atom",q);function z(e,t,n){void 0===t&&(t=y),void 0===n&&(n=y);var r,o=new q(e);return t!==y&&Ut(Lt,o,t,r),n!==y&&Ft(o,n),o}var W={identity:function(e,t){return e===t},structural:function(e,t){return ur(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return ur(e,t,1)}};function $(e,t,n){return nn(e)?e:Array.isArray(e)?Ce.array(e,{name:n}):b(e)?Ce.object(e,void 0,{name:n}):S(e)?Ce.map(e,{name:n}):k(e)?Ce.set(e,{name:n}):"function"!=typeof e||Rt(e)||en(e)?e:w(e)?Jt(e):jt(n,e)}function Y(e){return e}var Z="override";function X(e,t){return{annotationType_:e,options_:t,make_:J,extend_:Q}}function J(e,t,n,r){var o;if(null!=(o=this.options_)&&o.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Rt(n.value))return 1;var i=ee(e,this,t,n,!1);return c(r,t,i),2}function Q(e,t,n,r){var o=ee(e,this,t,n);return e.defineProperty_(t,o,r)}function ee(e,t,n,r,o){var i,s,a,c,u,l,f,h;void 0===o&&(o=ut.safeDescriptors),h=r,t.annotationType_,h.value;var p,d=r.value;null!=(i=t.options_)&&i.bound&&(d=d.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Le(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),d,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:re}}function ne(e,t,n,r){var o;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(o=this.options_)&&o.bound&&(!T(e.target_,t)||!en(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(en(n.value))return 1;var i=oe(e,this,t,n,!1,!1);return c(r,t,i),2}function re(e,t,n,r){var o,i=oe(e,this,t,n,null==(o=this.options_)?void 0:o.bound);return e.defineProperty_(t,i,r)}function oe(e,t,n,r,o,i){var s;void 0===i&&(i=ut.safeDescriptors),s=r,t.annotationType_,s.value;var a,c=r.value;(en(c)||(c=Jt(c)),o)&&((c=c.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:c,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ie(e,t){return{annotationType_:e,options_:t,make_:se,extend_:ae}}function se(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ae(e,t,n,r){return function(e,t,n,r){t.annotationType_,r.get;0}(0,this,0,n),e.defineComputedProperty_(t,M({},this.options_,{get:n.get,set:n.set}),r)}function ce(e,t){return{annotationType_:e,options_:t,make_:ue,extend_:le}}function ue(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function le(e,t,n,r){var o,i;return function(e,t,n,r){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(o=null==(i=this.options_)?void 0:i.enhancer)?o:$,r)}var fe="true",he=pe();function pe(e){return{annotationType_:fe,options_:e,make_:de,extend_:ve}}function de(e,t,n,r){var o,i,s,a;if(n.get)return Ae.make_(e,t,n,r);if(n.set){var u=Le(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!ut.safeDescriptors||e.isPlainObject_,set:u})?0:2:(c(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"==typeof n.value)return w(n.value)?(null!=(a=this.options_)&&a.autoBind?Jt.bound:Jt).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?jt.bound:jt).make_(e,t,n,r);var l,f=!1===(null==(o=this.options_)?void 0:o.deep)?Ce.ref:Ce;"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return f.make_(e,t,n,r)}function ve(e,t,n,r){var o,i,s;if(n.get)return Ae.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!ut.safeDescriptors||e.isPlainObject_,set:Le(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?Ce.ref:Ce).extend_(e,t,n,r)}var ye={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ge(e){return e||ye}Object.freeze(ye);var me=ce("observable"),_e=ce("observable.ref",{enhancer:Y}),be=ce("observable.shallow",{enhancer:function(e,t,n){return null==e||qn(e)||Cn(e)||Mn(e)||Ln(e)?e:Array.isArray(e)?Ce.array(e,{name:n,deep:!1}):b(e)?Ce.object(e,void 0,{name:n,deep:!1}):S(e)?Ce.map(e,{name:n,deep:!1}):k(e)?Ce.set(e,{name:n,deep:!1}):void 0}}),we=ce("observable.struct",{enhancer:function(e,t){return ur(e,t)?t:e}}),xe=G(me);function Oe(e){return!0===e.deep?$:!1===e.deep?Y:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:$;var t,n,r}function Ee(e,t,n){if(!m(t))return nn(e)?e:b(e)?Ce.object(e,t,n):Array.isArray(e)?Ce.array(e,t):S(e)?Ce.map(e,t):k(e)?Ce.set(e,t):"object"==typeof e&&null!==e?e:Ce.box(e,t);H(e,t,me)}s(Ee,xe);var Se,ke,Ce=s(Ee,{box:function(e,t){var n=ge(t);return new Ve(e,Oe(n),n.name,!0,n.equals)},array:function(e,t){var n=ge(t);return(!1===ut.useProxies||!1===n.proxy?rr:mn)(e,Oe(n),n.name)},map:function(e,t){var n=ge(t);return new Rn(e,Oe(n),n.name)},set:function(e,t){var n=ge(t);return new Dn(e,Oe(n),n.name)},object:function(e,t,n){return ar((function(){return Kt(!1===ut.useProxies||!1===(null==n?void 0:n.proxy)?Gn({},n):function(e,t){var n,r;return d(),e=Gn(e,t),null!=(r=(n=e[V]).proxy_)?r:n.proxy_=new Proxy(e,sn)}({},n),e,t)}))},ref:G(_e),shallow:G(be),deep:xe,struct:G(we)}),Ie="computed",Pe=ie(Ie),Te=ie("computed.struct",{equals:W.structural}),Ae=function(e,t){if(m(t))return H(e,t,Pe);if(b(e))return G(ie(Ie,e));var n=b(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new ze(n)};Object.assign(Ae,Pe),Ae.struct=G(Te);var je,Re=0,Me=1,Be=null!=(Se=null==(ke=a((function(){}),"name"))?void 0:ke.configurable)&&Se,De={value:"action",configurable:!0,writable:!1,enumerable:!1};function Le(e,t,n,r){function o(){return Ne(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),o.isMobxAction=!0,Be&&(De.value=e,c(o,"name",De)),o}function Ne(e,t,n,o,i){var s=function(e,t,n,r){var o=!1,i=0;0;var s=ut.trackingDerivation,a=!t||!s;pt();var c=ut.allowStateChanges;a&&(tt(),c=Ue(!0));var u=rt(!0),l={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:o,startTime_:i,actionId_:Me++,parentActionId_:Re};return Re=l.actionId_,l}(0,t);try{return n.apply(o,i)}catch(e){throw s.error_=e,e}finally{!function(e){Re!==e.actionId_&&r(30);Re=e.parentActionId_,void 0!==e.error_&&(ut.suppressReactionErrors=!0);Ge(e.prevAllowStateChanges_),ot(e.prevAllowStateReads_),dt(),e.runAsAction_&&nt(e.prevDerivation_);0;ut.suppressReactionErrors=!1}(s)}}function Fe(e,t){var n=Ue(e);try{return t()}finally{Ge(n)}}function Ue(e){var t=ut.allowStateChanges;return ut.allowStateChanges=e,t}function Ge(e){ut.allowStateChanges=e}je=Symbol.toPrimitive;var He,Ve=function(e){function t(t,n,r,o,i){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=!0),void 0===i&&(i=W.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=i,s.value_=n(t,void 0,r),s}B(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==ut.UNCHANGED){0,this.setNewValue_(e)}},n.prepareNewValue_=function(e){if(Xe(this),an(this)){var t=un(this,{object:this,type:vn,newValue:e});if(!t)return ut.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?ut.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),ln(this)&&hn(this,{type:vn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return cn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:vn,newValue:this.value_,oldValue:void 0}),fn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return P(this.get())},n[je]=function(){return this.valueOf()},t}(q);He=Symbol.toPrimitive;var qe,Ke,ze=function(){function e(e){this.dependenciesState_=qe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=qe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new $e(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ke.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||r(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Le("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?W.structural:W.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==qe.UP_TO_DATE_)return;e.lowestObserverState_=qe.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===qe.UP_TO_DATE_&&(e.dependenciesState_=qe.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==ut.inBatch||0!==this.observers_.size||this.keepAlive_){if(vt(this),Ze(this)){var e=ut.trackingContext;this.keepAlive_&&!e&&(ut.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===qe.STALE_)return;e.lowestObserverState_=qe.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===qe.POSSIBLY_STALE_?t.dependenciesState_=qe.STALE_:t.dependenciesState_===qe.UP_TO_DATE_&&(e.lowestObserverState_=qe.UP_TO_DATE_)}))}(this),ut.trackingContext=e}}else Ze(this)&&(this.warnAboutUntrackedRead_(),pt(),this.value_=this.computeValue_(!1),dt());var t=this.value_;if(Ye(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===qe.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Ye(e)||Ye(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ue(!1);if(e)t=Je(this,this.derivation,this.scope_);else if(!0===ut.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new $e(e)}return Ge(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Qe(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,o=void 0;return Mt((function(){var i=n.get();if(!r||t){var s=tt();e({observableKind:"computed",debugObjectName:n.name_,type:vn,object:n,newValue:i,oldValue:o}),nt(s)}r=!1,o=i}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return P(this.get())},t[He]=function(){return this.valueOf()},e}(),We=E("ComputedValue",ze);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(qe||(qe={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Ke||(Ke={}));var $e=function(e){this.cause=void 0,this.cause=e};function Ye(e){return e instanceof $e}function Ze(e){switch(e.dependenciesState_){case qe.UP_TO_DATE_:return!1;case qe.NOT_TRACKING_:case qe.STALE_:return!0;case qe.POSSIBLY_STALE_:for(var t=rt(!0),n=tt(),r=e.observing_,o=r.length,i=0;i<o;i++){var s=r[i];if(We(s)){if(ut.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return nt(n),ot(t),!0}if(e.dependenciesState_===qe.STALE_)return nt(n),ot(t),!0}}return it(e),nt(n),ot(t),!1}}function Xe(e){}function Je(e,t,n){var r=rt(!0);it(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ut.runId;var o,i=ut.trackingDerivation;if(ut.trackingDerivation=e,ut.inBatch++,!0===ut.disableErrorBoundaries)o=t.call(n);else try{o=t.call(n)}catch(e){o=new $e(e)}return ut.inBatch--,ut.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=qe.UP_TO_DATE_,o=0,i=e.unboundDepsCount_,s=0;s<i;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,o!==s&&(n[o]=a),o++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=o,e.newObserving_=null,i=t.length;for(;i--;){var c=t[i];0===c.diffValue_&&ft(c,e),c.diffValue_=0}for(;o--;){var u=n[o];1===u.diffValue_&&(u.diffValue_=0,lt(u,e))}r!==qe.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),ot(r),o}function Qe(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)ft(t[n],e);e.dependenciesState_=qe.NOT_TRACKING_}function et(e){var t=tt();try{return e()}finally{nt(t)}}function tt(){var e=ut.trackingDerivation;return ut.trackingDerivation=null,e}function nt(e){ut.trackingDerivation=e}function rt(e){var t=ut.allowStateReads;return ut.allowStateReads=e,t}function ot(e){ut.allowStateReads=e}function it(e){if(e.dependenciesState_!==qe.UP_TO_DATE_){e.dependenciesState_=qe.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=qe.UP_TO_DATE_}}var st=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},at=!0,ct=!1,ut=function(){var e=i();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(at=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new st).version&&(at=!1),at?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new st):(setTimeout((function(){ct||r(35)}),1),new st)}();function lt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function ft(e,t){e.observers_.delete(t),0===e.observers_.size&&ht(e)}function ht(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,ut.pendingUnobservations.push(e))}function pt(){0===ut.inBatch&&(ut.batchId=ut.batchId<Number.MAX_SAFE_INTEGER?ut.batchId+1:Number.MIN_SAFE_INTEGER),ut.inBatch++}function dt(){if(0==--ut.inBatch){bt();for(var e=ut.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof ze&&n.suspend_())}ut.pendingUnobservations=[]}}function vt(e){var t=ut.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&ut.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&ut.inBatch>0&&ht(e),!1)}function yt(e){e.lowestObserverState_!==qe.STALE_&&(e.lowestObserverState_=qe.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===qe.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=qe.STALE_})))}var gt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=qe.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ke.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ut.pendingReactions.push(this),bt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){pt(),this.isScheduled_=!1;var e=ut.trackingContext;if(ut.trackingContext=this,Ze(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}ut.trackingContext=e,dt()}},t.track=function(e){if(!this.isDisposed_){pt();0,this.isRunning_=!0;var t=ut.trackingContext;ut.trackingContext=this;var n=Je(this,e,void 0);ut.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Qe(this),Ye(n)&&this.reportExceptionInDerivation_(n.cause),dt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(ut.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";ut.suppressReactionErrors||console.error(n,e),ut.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(pt(),Qe(this),dt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[V]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},e}();var mt=100,_t=function(e){return e()};function bt(){ut.inBatch>0||ut.isRunningReactions||_t(wt)}function wt(){ut.isRunningReactions=!0;for(var e=ut.pendingReactions,t=0;e.length>0;){++t===mt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction_()}ut.isRunningReactions=!1}var xt=E("Reaction",gt);var Ot="action",Et="autoAction",St="<unnamed action>",kt=X(Ot),Ct=X("action.bound",{bound:!0}),It=X(Et,{autoAction:!0}),Pt=X("autoAction.bound",{autoAction:!0,bound:!0});function Tt(e){return function(t,n){return g(t)?Le(t.name||St,t,e):g(n)?Le(t,n,e):m(n)?H(t,n,e?It:kt):m(t)?G(X(e?Et:Ot,{name:t,autoAction:e})):void 0}}var At=Tt(!1);Object.assign(At,kt);var jt=Tt(!0);function Rt(e){return g(e)&&!0===e.isMobxAction}function Mt(e,t){var n,r,o,i,s;void 0===t&&(t=f);var a,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new gt(c,(function(){this.track(h)}),t.onError,t.requiresObservable);else{var u=Dt(t),l=!1;a=new gt(c,(function(){l||(l=!0,u((function(){l=!1,a.isDisposed_||a.track(h)})))}),t.onError,t.requiresObservable)}function h(){e(a)}return null!=(o=t)&&null!=(i=o.signal)&&i.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(jt,It),At.bound=G(Ct),jt.bound=G(Pt);var Bt=function(e){return e()};function Dt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Bt}var Lt="onBO",Nt="onBUO";function Ft(e,t,n){return Ut(Nt,e,t,n)}function Ut(e,t,n,r){var o="function"==typeof r?or(t,n):or(t),i=g(r)?r:n,s=e+"L";return o[s]?o[s].add(i):o[s]=new Set([i]),function(){var e=o[s];e&&(e.delete(i),0===e.size&&delete o[s])}}var Gt="never",Ht="always",Vt="observed";function qt(e){!0===e.isolateGlobalState&&function(){if((ut.pendingReactions.length||ut.inBatch||ut.isRunningReactions)&&r(36),ct=!0,at){var e=i();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),ut=new st}}();var t,n,o=e.useProxies,s=e.enforceActions;if(void 0!==o&&(ut.useProxies=o===Ht||o!==Gt&&"undefined"!=typeof Proxy),"ifavailable"===o&&(ut.verifyProxies=!0),void 0!==s){var a=s===Ht?Ht:s===Vt;ut.enforceActions=a,ut.allowStateChanges=!0!==a&&a!==Ht}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(ut[t]=!!e[t])})),ut.allowStateReads=!ut.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=_t,_t=function(e){return t((function(){return n(e)}))})}function Kt(e,t,n,r){var o=A(t);return ar((function(){var t=Gn(e,r)[V];I(o).forEach((function(e){t.extend_(e,o[e],!n||(!(e in n)||n[e]))}))})),e}function zt(e,t){return Wt(or(e,t))}function Wt(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Wt)),n}var $t=0;function Yt(){this.message="FLOW_CANCELLED"}Yt.prototype=Object.create(Error.prototype);var Zt=te("flow"),Xt=te("flow.bound",{bound:!0}),Jt=Object.assign((function(e,t){if(m(t))return H(e,t,Zt);var n=e,r=n.name||"<unnamed flow>",o=function(){var e,t=arguments,o=++$t,i=At(r+" - runid: "+o+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function c(e){var t;s=void 0;try{t=At(r+" - runid: "+o+" - yield "+a++,i.next).call(i,e)}catch(e){return n(e)}l(t)}function u(e){var t;s=void 0;try{t=At(r+" - runid: "+o+" - yield "+a++,i.throw).call(i,e)}catch(e){return n(e)}l(t)}function l(e){if(!g(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return a.cancel=At(r+" - runid: "+o+" - cancel",(function(){try{s&&Qt(s);var t=i.return(void 0),n=Promise.resolve(t.value);n.then(y,y),Qt(n),e(new Yt)}catch(t){e(t)}})),a};return o.isMobXFlow=!0,o}),Zt);function Qt(e){g(e.cancel)&&e.cancel()}function en(e){return!0===(null==e?void 0:e.isMobXFlow)}function tn(e,t){return!!e&&(void 0!==t?!!qn(e)&&e[V].values_.has(t):qn(e)||!!e[V]||K(e)||xt(e)||We(e))}function nn(e){return tn(e)}function rn(e,t){void 0===t&&(t=void 0),pt();try{return e.apply(t)}finally{dt()}}function on(e){return e[V]}Jt.bound=G(Xt);var sn={has:function(e,t){return on(e).has_(t)},get:function(e,t){return on(e).get_(t)},set:function(e,t,n){var r;return!!m(t)&&(null==(r=on(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!m(t)&&(null==(n=on(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=on(e).defineProperty_(t,n))||r},ownKeys:function(e){return on(e).ownKeys_()},preventExtensions:function(e){r(13)}};function an(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function cn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function un(e,t){var n=tt();try{for(var o=[].concat(e.interceptors_||[]),i=0,s=o.length;i<s&&((t=o[i](t))&&!t.type&&r(14),t);i++);return t}finally{nt(n)}}function ln(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function fn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function hn(e,t){var n=tt(),r=e.changeListeners_;if(r){for(var o=0,i=(r=r.slice()).length;o<i;o++)r[o](t);nt(n)}}function pn(e,t,n){return ar((function(){var r=Gn(e,n)[V];null!=t||(t=function(e){return T(e,U)||x(e,U,M({},e[U])),e[U]}(e)),I(t).forEach((function(e){return r.make_(e,t[e])}))})),e}var dn="splice",vn="update",yn={get:function(e,t){var n=e[V];return t===V?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?T(_n,t)?_n[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[V];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){r(15)}},gn=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new q(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return cn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),fn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&r("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),o=0;o<e-t;o++)n[o]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&nr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var o=this.values_.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:null==t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=l),an(this)){var i=un(this,{object:this.proxy_,type:dn,index:e,removedCount:t,added:n});if(!i)return l;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(o,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var o=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<i.length;a++)this.values_[e+n.length+a]=i[a];return o},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,o=ln(this),i=o||r?{observableKind:"array",object:this.proxy_,type:vn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),o&&hn(this,i)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,o=ln(this),i=o||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:dn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),o&&hn(this,i)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&r(17,e,n.length),e<n.length){this.atom_;var o=n[e];if(an(this)){var i=un(this,{type:vn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,o))!==o&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,o))}else{for(var s=new Array(e+1-n.length),a=0;a<s.length-1;a++)s[a]=void 0;s[s.length-1]=t,this.spliceWithArray_(n.length,0,s)}},e}();function mn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),d(),ar((function(){var o=new gn(n,t,r,!1);O(o.values_,V,o);var i=new Proxy(o.values_,yn);return o.proxy_=i,e&&e.length&&o.spliceWithArray_(0,0,e),i}))}var _n={clear:function(){return this.splice(0)},replace:function(e){var t=this[V];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=this[V];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[V].spliceWithArray_(e,t,n)},push:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[V].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return ut.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ut.trackingDerivation&&r(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[V],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function bn(e,t){"function"==typeof Array.prototype[e]&&(_n[e]=t(e))}function wn(e){return function(){var t=this[V];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function xn(e){return function(t,n){var r=this,o=this[V];return o.atom_.reportObserved(),o.dehanceValues_(o.values_)[e]((function(e,o){return t.call(n,e,o,r)}))}}function On(e){return function(){var t=this,n=this[V];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),o=arguments[0];return arguments[0]=function(e,n,r){return o(e,n,r,t)},r[e].apply(r,arguments)}}bn("concat",wn),bn("flat",wn),bn("includes",wn),bn("indexOf",wn),bn("join",wn),bn("lastIndexOf",wn),bn("slice",wn),bn("toString",wn),bn("toLocaleString",wn),bn("every",xn),bn("filter",xn),bn("find",xn),bn("findIndex",xn),bn("flatMap",xn),bn("forEach",xn),bn("map",xn),bn("some",xn),bn("reduce",On),bn("reduceRight",On);var En,Sn,kn=E("ObservableArrayAdministration",gn);function Cn(e){return _(e)&&kn(e[V])}var In={},Pn="add",Tn="delete";En=Symbol.iterator,Sn=Symbol.toStringTag;var An,jn,Rn=function(){function e(e,t,n){var o=this;void 0===t&&(t=$),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[V]=In,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,g(Map)||r(18),ar((function(){o.keysAtom_=z("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,e&&o.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!ut.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ve(this.has_(e),Y,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Ft(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(an(this)){var r=un(this,{type:n?vn:Pn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,an(this))&&!un(this,{type:Tn,object:this,name:e}))return!1;if(this.has_(e)){var n=ln(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Tn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return rn((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&hn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==ut.UNCHANGED){var r=ln(this),o=r?{observableKind:"map",debugObjectName:this.name_,type:vn,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&hn(this,o)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,rn((function(){var r,o=new Ve(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,o),t=o.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=ln(this),o=r?{observableKind:"map",debugObjectName:this.name_,type:Pn,object:this,name:e,newValue:t}:null;r&&hn(this,o)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return hr({next:function(){var n=t.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:e.get(o)}}})},t.entries=function(){var e=this,t=this.keys();return hr({next:function(){var n=t.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:[o,e.get(o)]}}})},t[En]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=F(this);!(n=r()).done;){var o=n.value,i=o[0],s=o[1];e.call(t,s,i,this)}},t.merge=function(e){var t=this;return Mn(e)&&(e=new Map(e)),rn((function(){b(e)?function(e){var t=Object.keys(e);if(!C)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return u.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):S(e)?(e.constructor!==Map&&r(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&r(20,e)})),this},t.clear=function(){var e=this;rn((function(){et((function(){for(var t,n=F(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return rn((function(){for(var n,o=function(e){if(S(e)||Mn(e))return e;if(Array.isArray(e))return new Map(e);if(b(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return r(21,e)}(e),i=new Map,s=!1,a=F(t.data_.keys());!(n=a()).done;){var c=n.value;if(!o.has(c))if(t.delete(c))s=!0;else{var u=t.data_.get(c);i.set(c,u)}}for(var l,f=F(o.entries());!(l=f()).done;){var h=l.value,p=h[0],d=h[1],v=t.data_.has(p);if(t.set(p,d),t.data_.has(p)){var y=t.data_.get(p);i.set(p,y),v||(s=!0)}}if(!s)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),m=i.keys(),_=g.next(),w=m.next();!_.done;){if(_.value!==w.value){t.keysAtom_.reportChanged();break}_=g.next(),w=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},R(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Sn,get:function(){return"Map"}}]),e}(),Mn=E("ObservableMap",Rn);var Bn={};An=Symbol.iterator,jn=Symbol.toStringTag;var Dn=function(){function e(e,t,n){var o=this;void 0===t&&(t=$),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[V]=Bn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,g(Set)||r(22),this.enhancer_=function(e,r){return t(e,r,n)},ar((function(){o.atom_=z(o.name_),e&&o.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;rn((function(){et((function(){for(var t,n=F(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=F(this);!(n=r()).done;){var o=n.value;e.call(t,o,o,this)}},t.add=function(e){var t=this;if((this.atom_,an(this))&&!un(this,{type:Pn,object:this,newValue:e}))return this;if(!this.has(e)){rn((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,r=ln(this),o=r?{observableKind:"set",debugObjectName:this.name_,type:Pn,object:this,newValue:e}:null;n,r&&hn(this,o)}return this},t.delete=function(e){var t=this;if(an(this)&&!un(this,{type:Tn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=ln(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Tn,object:this,oldValue:e}:null;return rn((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&hn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return hr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return hr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Ln(e)&&(e=new Set(e)),rn((function(){Array.isArray(e)||k(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&r("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[An]=function(){return this.values()},R(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:jn,get:function(){return"Set"}}]),e}(),Ln=E("ObservableSet",Dn),Nn=Object.create(null),Fn="remove",Un=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=he),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new q("ObservableObject.keys"),this.isPlainObject_=b(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof ze)return n.set(t),!0;if(an(this)){var r=un(this,{type:vn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==ut.UNCHANGED){var o=ln(this),i=o?{type:vn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),o&&hn(this,i)}return!0},t.get_=function(e){return ut.trackingDerivation&&!T(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),T(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!ut.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ve(e in this.target_,Y,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(zn(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[U])&&n[e])return;r(1,t.annotationType_,this.name_+"."+e.toString())}for(var o=this.target_;o&&o!==u;){var i=a(o,e);if(i){var s=t.make_(this,e,i,o);if(0===s)return;if(1===s)break}o=Object.getPrototypeOf(o)}Kn(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);zn(this,n,e);var o=n.extend_(this,e,t,r);return o&&Kn(this,n,e),o},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{pt();var r=this.delete_(e);if(!r)return r;if(an(this)){var o=un(this,{object:this.proxy_||this.target_,name:e,type:Pn,newValue:t.value});if(!o)return null;var i=o.newValue;t.value!==i&&(t=M({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else c(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{dt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{pt();var o=this.delete_(e);if(!o)return o;if(an(this)){var i=un(this,{object:this.proxy_||this.target_,name:e,type:Pn,newValue:t});if(!i)return null;t=i.newValue}var s=Vn(e),a={configurable:!ut.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else c(this.target_,e,a);var u=new Ve(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{dt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{pt();var r=this.delete_(e);if(!r)return r;if(an(this))if(!un(this,{object:this.proxy_||this.target_,name:e,type:Pn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var o=Vn(e),i={configurable:!ut.safeDescriptors||this.isPlainObject_,enumerable:!1,get:o.get,set:o.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else c(this.target_,e,i);this.values_.set(e,new ze(t)),this.notifyPropertyAddition_(e,void 0)}finally{dt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!T(this.target_,e))return!0;if(an(this)&&!un(this,{object:this.proxy_||this.target_,name:e,type:Fn}))return null;try{var n,r;pt();var o,i=ln(this),s=this.values_.get(e),c=void 0;if(!s&&i)c=null==(o=a(this.target_,e))?void 0:o.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Ve&&(c=s.value_),yt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),i){var u={type:Fn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:e};0,i&&hn(this,u)}}finally{dt()}return!0},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,o=ln(this);if(o){var i=o?{type:Pn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,o&&hn(this,i)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),I(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Gn(e,t){var n;if(T(e,V))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",o=new Un(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:pe(e):void 0}(t));return x(e,V,o),e}var Hn=E("ObservableObjectAdministration",Un);function Vn(e){return Nn[e]||(Nn[e]={get:function(){return this[V].getObservablePropValue_(e)},set:function(t){return this[V].setObservablePropValue_(e,t)}})}function qn(e){return!!_(e)&&Hn(e[V])}function Kn(e,t,n){var r;null==(r=e.target_[U])||delete r[n]}function zn(e,t,n){}var Wn,$n,Yn=er(0),Zn=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Xn=0,Jn=function(){};Wn=Jn,$n=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Wn.prototype,$n):void 0!==Wn.prototype.__proto__?Wn.prototype.__proto__=$n:Wn.prototype=$n;var Qn=function(e,t,n){function r(t,n,r,o){var i;return void 0===r&&(r="ObservableArray"),void 0===o&&(o=!1),i=e.call(this)||this,ar((function(){var e=new gn(r,n,o,!0);e.proxy_=L(i),O(L(i),V,e),t&&t.length&&i.spliceWithArray(0,0,t),Zn&&Object.defineProperty(L(i),"0",Yn)})),i}B(r,e);var o=r.prototype;return o.concat=function(){this[V].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Cn(e)?e.slice():e})))},o[n]=function(){var e=this,t=0;return hr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},R(r,[{key:"length",get:function(){return this[V].getArrayLength_()},set:function(e){this[V].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Jn,Symbol.toStringTag,Symbol.iterator);function er(e){return{enumerable:!1,configurable:!0,get:function(){return this[V].get_(e)},set:function(t){this[V].set_(e,t)}}}function tr(e){c(Qn.prototype,""+e,er(e))}function nr(e){if(e>Xn){for(var t=Xn;t<e+100;t++)tr(t);Xn=e}}function rr(e,t,n){return new Qn(e,t,n)}function or(e,t){if("object"==typeof e&&null!==e){if(Cn(e))return void 0!==t&&r(23),e[V].atom_;if(Ln(e))return e.atom_;if(Mn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||r(25,t,sr(e)),n}if(qn(e)){if(!t)return r(26);var o=e[V].values_.get(t);return o||r(27,t,sr(e)),o}if(K(e)||We(e)||xt(e))return e}else if(g(e)&&xt(e[V]))return e[V];r(28)}function ir(e,t){return e||r(29),void 0!==t?ir(or(e,t)):K(e)||We(e)||xt(e)||Mn(e)||Ln(e)?e:e[V]?e[V]:void r(24,e)}function sr(e,t){var n;if(void 0!==t)n=or(e,t);else{if(Rt(e))return e.name;n=qn(e)||Mn(e)||Ln(e)?ir(e):or(e)}return n.name_}function ar(e){var t=tt(),n=Ue(!0);pt();try{return e()}finally{dt(),Ge(n),nt(t)}}Object.entries(_n).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&x(Qn.prototype,t,n)})),nr(1e3);var cr=u.toString;function ur(e,t,n){return void 0===n&&(n=-1),lr(e,t,n)}function lr(e,t,n,r,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var s=cr.call(e);if(s!==cr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=fr(e),t=fr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(g(c)&&c instanceof c&&g(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),o=o||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return o[l]===t;if(r.push(e),o.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!lr(e[l],t[l],n-1,r,o))return!1}else{var f,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!T(t,f=h[l])||!lr(e[f],t[f],n-1,r,o))return!1}return r.pop(),o.pop(),!0}function fr(e){return Cn(e)?e.slice():S(e)||Mn(e)||k(e)||Ln(e)?Array.from(e.entries()):e}function hr(e){return e[Symbol.iterator]=pr,e}function pr(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===i()[e]&&r("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:sr},$mobx:V})},336:(e,t,n)=>{"use strict";if(n.d(t,{Z:()=>i}),!/^(3|39|626)$/.test(n.j))var r=n(7663);function o(e){return e===Object(e)&&0!==Object.keys(e).length}const i=/^(3|39|626)$/.test(n.j)?null:function(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(o(t)&&"function"==typeof t.behavior)return t.behavior(n?(0,r.Z)(e,t):[]);if(n){var i=function(e){return!1===e?{block:"end",inline:"nearest"}:o(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}((0,r.Z)(e,i),i.behavior)}}},9137:(e,t,n)=>{"use strict";if(n.d(t,{Z:()=>u}),!/^(3|39|626)$/.test(n.j))var r=n(336);var o,i=function(){return o||(o="performance"in window?performance.now.bind(performance):Date.now),o()};function s(e){var t=i(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,a=e.startY+(e.y-e.startY)*r;e.method(o,a),o!==e.x||a!==e.y?requestAnimationFrame((function(){return s(e)})):e.cb()}function a(e,t,n,r,o,a){var c,u,l,f;void 0===r&&(r=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),c=e,u=e.scrollLeft,l=e.scrollTop,f=function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},s({scrollable:c,method:f,startTime:i(),startX:u,startY:l,x:t,y:n,duration:r,ease:o,cb:a})}var c=/^(3|39|626)$/.test(n.j)?null:function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?(0,r.Z)(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,o=t.left,i=t.top,s=r.scrollLeft,c=r.scrollTop;return s===o&&c===i?e:[].concat(e,[new Promise((function(e){return a(r,o,i,n.duration,n.ease,(function(){return e({el:r,left:[s,o],top:[c,i]})}))}))])}),[]))}}):Promise.resolve((0,r.Z)(e,t))};const u=/^(3|39|626)$/.test(n.j)?null:c},2243:(e,t,n)=>{"use strict";n.d(t,{CR:()=>u,KL:()=>f,XA:()=>c,ZT:()=>o,ev:()=>l,gn:()=>s,mG:()=>a,pi:()=>i});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}Object.create;function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function f(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=c(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError},7663:(e,t,n)=>{"use strict";function r(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function o(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function i(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return o(n.overflowY,t)||o(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function s(e,t,n,r,o,i,s,a){return i<e&&s>t||i>e&&s<t?0:i<=e&&a<=n||s>=t&&a>=n?i-e-r:s>t&&a<n||i<e&&a>n?s-t+o:0}n.d(t,{Z:()=>a});var a=function(e,t){var n=window,o=t.scrollMode,a=t.block,c=t.inline,u=t.boundary,l=t.skipOverflowHiddenElements,f="function"==typeof u?u:function(e){return e!==u};if(!r(e))throw new TypeError("Invalid target");for(var h,p,d=document.scrollingElement||document.documentElement,v=[],y=e;r(y)&&f(y);){if((y=null==(p=(h=y).parentElement)?h.getRootNode().host||null:p)===d){v.push(y);break}null!=y&&y===document.body&&i(y)&&!i(document.documentElement)||null!=y&&i(y,l)&&v.push(y)}for(var g=n.visualViewport?n.visualViewport.width:innerWidth,m=n.visualViewport?n.visualViewport.height:innerHeight,_=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,w=e.getBoundingClientRect(),x=w.height,O=w.width,E=w.top,S=w.right,k=w.bottom,C=w.left,I="start"===a||"nearest"===a?E:"end"===a?k:E+x/2,P="center"===c?C+O/2:"end"===c?S:C,T=[],A=0;A<v.length;A++){var j=v[A],R=j.getBoundingClientRect(),M=R.height,B=R.width,D=R.top,L=R.right,N=R.bottom,F=R.left;if("if-needed"===o&&E>=0&&C>=0&&k<=m&&S<=g&&E>=D&&k<=N&&C>=F&&S<=L)return T;var U=getComputedStyle(j),G=parseInt(U.borderLeftWidth,10),H=parseInt(U.borderTopWidth,10),V=parseInt(U.borderRightWidth,10),q=parseInt(U.borderBottomWidth,10),K=0,z=0,W="offsetWidth"in j?j.offsetWidth-j.clientWidth-G-V:0,$="offsetHeight"in j?j.offsetHeight-j.clientHeight-H-q:0,Y="offsetWidth"in j?0===j.offsetWidth?0:B/j.offsetWidth:0,Z="offsetHeight"in j?0===j.offsetHeight?0:M/j.offsetHeight:0;if(d===j)K="start"===a?I:"end"===a?I-m:"nearest"===a?s(b,b+m,m,H,q,b+I,b+I+x,x):I-m/2,z="start"===c?P:"center"===c?P-g/2:"end"===c?P-g:s(_,_+g,g,G,V,_+P,_+P+O,O),K=Math.max(0,K+b),z=Math.max(0,z+_);else{K="start"===a?I-D-H:"end"===a?I-N+q+$:"nearest"===a?s(D,N,M,H,q+$,I,I+x,x):I-(D+M/2)+$/2,z="start"===c?P-F-G:"center"===c?P-(F+B/2)+W/2:"end"===c?P-L+V+W:s(F,L,B,G,V+W,P,P+O,O);var X=j.scrollLeft,J=j.scrollTop;I+=J-(K=Math.max(0,Math.min(J+K/Z,j.scrollHeight-M/Z+$))),P+=X-(z=Math.max(0,Math.min(X+z/Y,j.scrollWidth-B/Y+W)))}T.push({el:j,top:K,left:z})}return T}}}]);
//# sourceMappingURL=core.d6c4f97e15bc7fd146da.js.map