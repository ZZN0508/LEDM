(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{45728:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(2385)}])},2385:function(e,n,i){"use strict";i.r(n),i.d(n,{__N_SSP:function(){return W},default:function(){return A}});var t=i(14924),s=i(85893),a=i(3924),l=i(50852),r=i(80142),c=i(26042),o=i(69396),d=i(96486),u=i(67294),m=i(40769),f=i.n(m),v=i(9091),h=i(38122),x=i(67059),p=i(10124),j=i(41080),_=i(94184),N=i.n(_),w=i(41664),b=i.n(w),y={board:"\u753b\u677f",user:"\u7528\u6237",link:"\u94fe\u63a5",topic:"\u4e13\u9898",collection:"\u4e13\u8f91"};function Z(e){var n=e.banner_img_url,i=e.board,a=e.user,l=e.reason,r=e.link,o=e.title,d=e.explore,m=e.name,_=e.type,w=e.targetId,Z=e.resource,g=e.contentSource,E=(0,u.useMemo)((function(){switch(_){case"board":return"/boards/".concat((null===i||void 0===i?void 0:i.board_id)||w);case"user":return"/user/".concat(null===a||void 0===a?void 0:a.urlname);case"topic":return"//explore/".concat((null===d||void 0===d?void 0:d.urlname)||w);default:return r}}),[_,i,a,d,w,r]),k=(0,u.useState)(!0),S=k[0],T=k[1],O=(0,u.useRef)(null);return(0,u.useEffect)((function(){O.current.complete&&T(!1)}),[n]),(0,s.jsx)(b(),{href:E,children:(0,s.jsxs)("a",{className:f().card,title:o,"data-gd-click":"resource_loc_click","data-gd-expose":"resource_loc_expose","data-resource-type":y[_],"data-resource-id":null===Z||void 0===Z?void 0:Z.id,"data-resource-title":null===Z||void 0===Z?void 0:Z.title,"data-content-source":g,children:[l&&(0,s.jsx)("div",{className:f().reason,children:l}),S&&(0,s.jsx)(j.Z.Input,{active:!0,className:f().skeleton}),(0,s.jsx)("img",(0,c.Z)({ref:O,width:200,alt:m||(null===i||void 0===i?void 0:i.title)||(null===a||void 0===a?void 0:a.username)||(null===d||void 0===d?void 0:d.name)||o,className:N()(f().cover,(0,t.Z)({},f().hide,S)),onLoad:function(){T(!1)}},(0,p.L5)(n,{displayWidth:260}))),a&&(0,s.jsx)("div",{className:f().mask,children:(0,s.jsxs)("div",{className:f().info,children:[(0,s.jsxs)("div",{className:f().title,children:[(0,s.jsx)(v.Z,{user:a,shape:"circle",size:20,className:f().avatar}),(0,s.jsx)("span",{title:m||a.username,children:m||a.username})]}),(0,s.jsx)("div",{className:f().number,children:"".concat((0,x.Z)(a.pin_count),"\u91c7\u96c6 ").concat((0,x.Z)(a.follower_count),"\u7c89\u4e1d")})]})}),i&&(0,s.jsx)("div",{className:f().mask,children:(0,s.jsxs)("div",{className:f().info,children:[(0,s.jsxs)("div",{className:f().title,children:[(0,s.jsx)(h.Z,{type:"dashboard"}),(0,s.jsx)("span",{title:m||i.title,children:m||i.title})]}),(0,s.jsx)("div",{className:f().number,children:"".concat((0,x.Z)(i.pin_count),"\u91c7\u96c6 ").concat((0,x.Z)(i.follow_count),"\u7c89\u4e1d")})]})}),d&&(0,s.jsx)("div",{className:f().mask,children:(0,s.jsx)("div",{className:f().info,children:(0,s.jsxs)("div",{className:f().title,children:[(0,s.jsx)(h.Z,{type:"ic_tag"}),(0,s.jsx)("span",{title:m||d.name,children:m||d.name})]})})}),("link"===_||"collection"===_)&&m&&(0,s.jsx)("div",{className:f().mask,children:(0,s.jsx)("div",{className:f().info,children:(0,s.jsxs)("div",{className:f().title,children:[(0,s.jsx)(h.Z,{type:"ic_tag"}),(0,s.jsx)("span",{title:m,children:m})]})})})]})})}function g(e){var n=e.list,i=e.name,t=(0,u.useMemo)((function(){return(0,d.chunk)(n,2)}),[n]),a=(0,u.useState)(8),l=a[0];a[1];return(0,s.jsx)("div",{className:f().feed,children:t.map((function(e,n){return n<l?(0,s.jsx)("div",{className:f().col,children:e.map((function(e,n){return(0,s.jsx)(Z,(0,o.Z)((0,c.Z)({},e.material),{contentSource:i,resource:e}),n)}))},n):null}))})}var E=i(10253),k=i(92652),S=i(22638);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.direction,i=void 0===n?"up":n,t=e.show,a=void 0===t||t,l=e.delay,r=void 0===l?0:l,c=e.children,o=void 0===c?null:c,d=e.className,m=void 0===d?"":d,v=(0,E.Z)((0,k.Z)(f().fadeOutDone),2),h=v[0],x=v[1],p=(0,S.Z)((function(){return x((function(e){return e.includes(f().fadeOutDone)?e.replace(f().fadeOutDone,""):f().fadeShow})),setTimeout((function(){x(f().fadeShow)}),100)})),j=(0,S.Z)((function(){return x("up"===i?f().fadeOutUp:f().fadeOutDown),setTimeout((function(){x((function(e){return e+" "+f().fadeOutDone}))}),r+600)}));return(0,u.useEffect)((function(){var e;return e=a?p():j(),function(){clearTimeout(e)}}),[j,p,a]),(0,s.jsx)("div",{className:N()(m,h,f().fade),style:{transitionDelay:r+"ms"},children:o})}var O=i(68795),C=i(11163),R=i(46685),P=i(53755),I=i(57064),U=i.n(I),W=!0,A=function(e){var n=e.homeConf,i=e.inlinks,c=(0,C.useRouter)(),o=(0,r.Z)((function(e){return{user:e.user,userReady:e.userReady}})),d=o.user,m=o.userReady;(0,u.useEffect)((function(){var e;m&&d&&((null===d||void 0===d||null===(e=d.extra)||void 0===e?void 0:e.job_id)&&0!==(null===d||void 0===d?void 0:d.following_count)?c.push("/follow"):c.push("/guide"))}),[m,d,c]);var f=(0,s.jsx)(O.Z,{}),v=(0,u.useState)(0),h=v[0],x=v[1],p=n.pits.length,j=(0,S.Z)((function(e){x(e)})),_=(0,S.Z)((function(){x(Math.min(h+1,p-1))})),w=(0,S.Z)((function(){x(Math.max(h-1,0))}));(0,u.useEffect)((function(){h<p-1?window.dispatchEvent(new CustomEvent(l.Ks.CHANGE_SEARCH_INPUT_VISIBLE,{detail:!0})):window.dispatchEvent(new CustomEvent(l.Ks.CHANGE_SEARCH_INPUT_VISIBLE,{detail:!1}))}),[p,h]);var b=(0,u.useRef)({isScroll:!0,scrollTime:null,timer:null,interval:500,distance:60,delay:200}).current,y=(0,S.Z)((function(e){e.deltaY>0?_():w()})),Z=(0,S.Z)((function(e){var n=(new Date).getTime(),i=e.deltaY;b.scrollTime&&n-b.scrollTime>b.interval&&Math.abs(i)>=b.distance&&(y(e),clearTimeout(b.timer),b.isScroll=!1,b.scrollTime=n),b.isScroll&&(y(e),b.scrollTime=(new Date).getTime(),b.isScroll=!1),b.timer&&clearTimeout(b.timer),b.timer=setTimeout((function(){b.isScroll=!0}),b.delay)}));return(0,u.useEffect)((function(){return window.addEventListener("wheel",Z),function(){window.removeEventListener("wheel",Z)}}),[_,w,Z]),(0,s.jsxs)("div",{className:U().container,children:[(0,s.jsx)("style",{children:" body { overflow: hidden; } "}),(0,s.jsxs)("div",{className:U().head,children:[(0,s.jsxs)(T,{className:U().titleContent,show:h<=n.pits.length-2,direction:"up",delay:h<=n.pits.length-2?300:0,children:[(0,s.jsxs)("div",{className:U().title,children:["\u4e13\u4e1a\u8bbe\u8ba1\u5e08\u5728",(0,s.jsx)("span",{children:"\u82b1\u74e3"}),"\u53d1\u73b0\u3001\u6536\u96c6\u7075\u611f"]}),(0,s.jsx)("div",{className:U().tab,children:n.pits.map((function(e,n){return n<p-1&&(0,s.jsx)("div",{className:N()(U().item,(0,t.Z)({},U().active,h===n)),onClick:function(){return j(n)},children:e.name},n)}))})]}),(0,s.jsxs)(T,{show:h===p-1,direction:"down",delay:h===p-1?300:0,className:U().titleContent,children:[(0,s.jsxs)("h1",{className:U().title,children:[(0,s.jsx)("span",{children:"\u82b1\u74e3\uff0c"}),"\u966a\u4f60\u505a\u751f\u6d3b\u7684\u8bbe\u8ba1\u5e08"]}),(0,s.jsx)(P.Z,{width:570,prefix:f,placeholderCenter:!0,hideQuickSearch:!0,allowClear:!1,className:U().search})]})]}),(0,s.jsx)("div",{className:U().feed,children:n.pits.map((function(e,n){return(0,s.jsx)(T,{className:U().pageTransition,show:h===n,direction:h>=n?"up":"down",delay:h===n?200:0,children:(0,s.jsx)(g,{list:e.materials,name:e.name})},n)}))}),(0,s.jsx)("div",{className:U().nav,children:n.pits.map((function(e,n){return(0,s.jsx)("div",{className:N()(U().item,(0,t.Z)({},U().active,h===n)),onClick:function(){return j(n)}},n)}))}),(0,s.jsx)("div",{className:N()(U().inlinks,(0,t.Z)({},U().hide,p-1!==h)),children:(0,s.jsx)(a.O,{inlinks:i})}),(0,s.jsx)(R.Z,{style:{zIndex:11}})]})}},40769:function(e){e.exports={"color-primary":"__8npIUUyW","color-text-1":"wfBZ6CTN","color-text-2":"soVUAAzz","color-text-3":"xQWiwIei","font-sm":"h_96Ve0V","font-md":"fj1yJOzM","font-lg":"WEZyb4Er","font-bg":"vph4phIj","single-line-ellipsis":"HtnzWLwa","vertical-center":"tlOCzKpa","justify-center":"badVTVxX","drop-list-wrap":"KzEspL1k","list-item":"BEPNW8np",separate:"Ef41s74b","grid-bg":"J8xWx8xN","line-bg":"xT387pkF",tip:"__7XRUW6Oy","primary-btn":"EvrP6JDJ","primary-text-btn":"dK9JzbYK","thin-scroll-bar":"__0WjsMR0Y",card:"jRy4NbLa",mask:"vMlaS0KO",cover:"PkIXX5No",skeleton:"aAMa0HoL",reason:"BN0B38mX",info:"ibf1jQb3",number:"e8QK8KX8",title:"ZaDAL8ql",avatar:"aM6uohPf",feed:"__32VmBOOL",col:"cyhbuGdx",wrap:"PikSNWNk",fade:"vZfO5KgU",fadeShow:"JDipHtul",fadeOutDone:"E5raRb8C",fadeOutUp:"xReZieIQ",fadeOutDown:"XZm4pq2e",hide:"__3wQwdQbO"}},57064:function(e){e.exports={"color-primary":"TPGI2vHm","color-text-1":"ypKymM6k","color-text-2":"jEBi9edi","color-text-3":"WU22ijRA","font-sm":"__4aWyx4hs","font-md":"qEjAzb3w","font-lg":"NjUiwLD2","font-bg":"yN1PbzJl","single-line-ellipsis":"Zvxtn9Xj","vertical-center":"ozTYDSO8","justify-center":"G9UUxJbg","drop-list-wrap":"_Ur0Nnje","list-item":"Ogc8lfP2",separate:"jCBPEJGF","grid-bg":"UebB4sji","line-bg":"yTlREUZN",tip:"JAUxciMZ","primary-btn":"StZ7pLtn","primary-text-btn":"uvLWAQET","thin-scroll-bar":"j4P5l8aY",container:"Fem_ciFN",title:"__2lWWJ5es",opacity:"neuIV0M_",search:"_jBYlSJ8",placeholder:"SznfPZHc",suggest:"MzY6C0RN",col:"__7PA500_F",translate:"u7xMyRFR",item:"xQQC3tiW",nav:"WP3RjtAG",active:"v2TqXeXP",head:"FEEiKAUK",titleContent:"IPi1qkqt",feed:"YvkZXu29",pageTransition:"a96Ozucx",tab:"v_3368Wc",inlinks:"KIr3GB5e",hide:"wHvLZRM7",notfound:"bLiB575k",link:"__58APx84e",recommend:"a7gigyiM",desc:"BIqNUSAs",list:"fWBAmR7Q",img:"__0zRtm179"}}},function(e){e.O(0,[9774,2888,179],(function(){return n=45728,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=index-2c0a81f692852776.js.map