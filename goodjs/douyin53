(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[6193],{3812:function(t,e){var n,i,r;i=[],(r="function"==typeof(n=function(){return function t(e,n,i){var r,o,a=window,s="application/octet-stream",u=i||s,c=e,l=!n&&!i&&c,f=document.createElement("a"),p=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||p,d=n||"download";if(h=h.call?h.bind(a):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),l&&l.length<2048&&(d=l.split("/").pop().split("?")[0],f.href=l,-1!==f.href.indexOf(l))){var y=new XMLHttpRequest;return y.open("GET",l,!0),y.responseType="blob",y.onload=function(e){t(e.target.response,d,s)},setTimeout((function(){y.send()}),0),y}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&h!==p))return navigator.msSaveBlob?navigator.msSaveBlob(b(c),d):w(c);u=(c=b(c)).type||s}else if(/([\x80-\xff])/.test(c)){for(var v=0,g=new Uint8Array(c.length),m=g.length;v<m;++v)g[v]=c.charCodeAt(v);c=new h([g],{type:u})}function b(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),r=i.length,o=0,a=new Uint8Array(r);o<r;++o)a[o]=i.charCodeAt(o);return new h([a],{type:n})}function w(t,e){if("download"in f)return f.href=t,f.setAttribute("download",d),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){a.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=c instanceof h?c:new h([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(r,d);if(a.URL)w(a.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===p)try{return w("data:"+u+";base64,"+a.btoa(r))}catch(P){return w("data:"+u+","+encodeURIComponent(r))}(o=new FileReader).onload=function(t){w(this.result)},o.readAsDataURL(r)}return!0}})?n.apply(e,i):n)===undefined||(t.exports=r)},46193:function(t,e,n){"use strict";n.d(e,{Z:function(){return $i}});var i=n(51064),r=n(44487),o=n(34210),a=n(61508),s=n(57632),u=n(95815),c=n(85127),l=n(27408),f=n(50497),p=n(97702),h=n(82468);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,k(i.key),i)}}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w(t);if(e){var r=w(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,n)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function P(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}function S(){return(new Date).getTime()}var _="loadstart",O="loadeddata",T="firstFrame",C="waitingStart",x="waitingEnd",j="seekStart",E="seekEnd",R="waitingEndExt",D="seekEndEndExt",L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(o,t);var e,n,i,r=m(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return P(b(t=r.call.apply(r,[this].concat(n))),"_onTimeupdate",(function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(h.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))})),P(b(t),"_onAutoplayStart",(function(){h.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")})),P(b(t),"_onReset",(function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=S(),t.loadedCostTime=0,t.startCostTime=0,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&p.ZP.clearTimeout(b(t),t._waitTimer),t._waittTimer&&p.ZP.clearTimeout(b(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0})),P(b(t),"_onSeeking",(function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=S(),t.emitLog(j,{start:S()}))})),P(b(t),"_onSeeked",(function(){t.suspendSeekingStatus("seeked")})),P(b(t),"_onWaitingLoadStart",(function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=S(),t.fixedWaitingStart=S(),t._waitType=1,t.emitLog(C,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))})),P(b(t),"_onWaiting",(function(){!t._isWaiting&&t.vt&&(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=S(),t._waitTimer=p.ZP.setTimeout(b(t),(function(){t._isWaiting&&(t.waitingStart=S(),p.ZP.clearTimeout(b(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(C,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:2===t._waitType?"seek":"playing"}))}),200))})),P(b(t),"_onError",(function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")})),P(b(t),"_onPlaying",(function(){t._isWaiting&&t.suspendWaitingStatus("playing")})),t}return e=o,n=[{key:"afterCreate",value:function(){var t=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=S(),this.loadedCostTime=0,this.startCostTime=0,this.on(a.LOAD_START,(function(){var e=t._state,n=e.autoplayStart,i=e.isFFSend;t.startCostTime=S()-t.newPointTime,h.Z.logInfo("[xgLogger]".concat(t.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(i," startCostTime:").concat(t.startCostTime," newPointTime").concat(t.newPointTime)),i||(!e.isLs&&t.emitLog(_,{}),e.isLs=!0,e.isTimeUpdate=!1,e.isFFLoading=!0,t.pt=S(),t.vt=0,t.fvt=0,t._initOnceEvents(),t._onWaitingLoadStart())})),this.on(a.LOADED_DATA,(function(){t.vt=S(),t.fvt=t.vt-t.pt,t.loadedCostTime=t.vt-t.newPointTime;var e=t._state,n=e.isTimeUpdate,i=e.isFFSend,r=e.autoplayStart;h.Z.logInfo("[xgLogger]".concat(t.player.playerId," LOADED_DATA"),"fvt:".concat(t.fvt," isTimeUpdate:").concat(t._state.isTimeUpdate," loadedCostTime:").concat(t.loadedCostTime)),(n||r)&&t._sendFF("loadedData"),i||t.emitLog(O,{}),t.suspendWaitingStatus("loadeddata")})),this.on(a.SEEKING,this._onSeeking),this.on(a.SEEKED,this._onSeeked),this.on(a.DESTROY,(function(){t.endState("destroy")})),this.on(a.ENDED,(function(){t.endState("ended")})),this.on(a.PAUSE,(function(){t.endState("pause")})),this.on(a.URL_CHANGE,(function(){t.endState("urlChange"),h.Z.logInfo("[xgLogger]".concat(t.player.playerId," URL_CHANGE")),t._state.isFFSend&&t._onReset()})),this.on([a.PLAYING,a.CANPLAY],this._onPlaying),this.on(a.WAITING,this._onWaiting),this.on(a.ERROR,this._onError),this.on(a.RESET,(function(){h.Z.logInfo("[xgLogger]".concat(t.player.playerId," RESET")),t.endState("reset"),t._initOnceEvents(),t._onReset()}))}},{key:"_initOnceEvents",value:function(){this.off(a.AUTOPLAY_STARTED,this._onAutoplayStart),this.off(a.TIME_UPDATE,this._onTimeupdate),this.once(a.AUTOPLAY_STARTED,this._onAutoplayStart),this.once(a.TIME_UPDATE,this._onTimeupdate)}},{key:"_sendFF",value:function(t){this.s=S();var e=this._state,n=e.isFFLoading,i=e.isFFSend;if(h.Z.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(t," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!i)),this.vt>0&&n&&!i){var r;h.Z.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),t),this._state.isFFLoading=!1,this._state.isFFSend=!0;var o=this.fvt+((null===(r=this.player)||void 0===r?void 0:r.beforeLoadStartCostTime)||0);this.emitLog(T,{fvt:this.fvt,costTime:o,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime})}}},{key:"_startWaitTimeout",value:function(){var t=this;this._waittTimer&&p.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=p.ZP.setTimeout(this,(function(){t.suspendWaitingStatus("timeout"),p.ZP.clearTimeout(t,t._waittTimer),t._waittTimer=null}),this.config.waitTimeout)}},{key:"endState",value:function(t){var e=this.player,n=e.currentTime,i=e.duration,r=i-n,o=!(i>0&&n>0&&r<1);h.Z.logInfo("[xgLogger]".concat(this.player.playerId," endState"),"".concat(t," duration - currentTime:").concat(r," _emit:").concat(o)),this.suspendWaitingStatus(t,o),this.suspendSeekingStatus(t,o)}},{key:"suspendSeekingStatus",value:function(t){var e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this.seekingStart){var n=S(),i=n-this.seekingStart;this.seekingStart=0;var r=e?E:D;this.emitLog(r,{end:n,costTime:i,endType:t})}}},{key:"suspendWaitingStatus",value:function(t){var e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this._waitTimer&&(p.ZP.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(p.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var n=S(),i=n-this.waitingStart,r=n-this.fixedWaitingStart,o=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0;var a=e?x:R;this.emitLog(a,{fixedCostTime:r>o?o:r,costTime:i>o?o:i,type:"loadeddata"===t?1:this._waitType,endType:2===this._waitType?"seek":t})}}},{key:"emitLog",value:function(t,e){var n=this.player;this.emit(a.XGLOG,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({t:S(),host:p.ZP.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:t,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},e))}}],i=[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}],n&&v(e.prototype,n),i&&v(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==I(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===I(o)?o:String(o)),i)}var r,o}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=N(t);if(e){var r=N(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(s,t);var e,n,i,o=Z(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.apply(this,arguments)}return e=s,i=[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}],(n=[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>'}}},{key:"afterCreate",value:function(){var t=this;r.ZP.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",(function(){t.player.replay()}),{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(a.ENDED,(function(){if(t.playerConfig.loop||p.ZP.addClass(t.player.root,"replay"),!t.config.disable){t.show();var e=t.root.querySelector("path");if(e){var n=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;e.setAttribute("transform",n)}}})),this.on(a.PLAY,(function(){t.hide()}))}},{key:"handleReplay",value:function(t){t.preventDefault(),t.stopPropagation(),this.player.replay(),p.ZP.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}])&&A(e.prototype,n),i&&A(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.ZP),F=B;function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==H(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==H(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===H(o)?o:String(o)),i)}var r,o}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=z(t);if(e){var r=z(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(o,t);var e,n,i,r=W(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(t){this.config.isEndedShow=t}},{key:"hide",value:function(){p.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){p.ZP.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(t){"string"==typeof t.player.config.poster&&(t.config.poster=t.player.config.poster)}},{key:"afterCreate",value:function(){var t=this;this.on(a.ENDED,(function(){t.isEndedShow&&p.ZP.removeClass(t.root,"hide")})),this.config.hideCanplay?(this.once(a.TIME_UPDATE,(function(){t.onTimeUpdate()})),this.on(a.URL_CHANGE,(function(){p.ZP.removeClass(t.root,"hide"),p.ZP.addClass(t.root,"xg-showplay"),t.once(a.TIME_UPDATE,(function(){t.onTimeUpdate()}))}))):this.on(a.PLAY,(function(){p.ZP.addClass(t.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var t=this;this.player.currentTime?p.ZP.removeClass(this.root,"xg-showplay"):this.once(a.TIME_UPDATE,(function(){t.onTimeUpdate()}))}},{key:"update",value:function(t){t&&(this.config.poster=t,this.root.style.backgroundImage="url(".concat(t,")"))}},{key:"render",value:function(){var t=this.config,e=t.poster,n=t.hideCanplay,i=e?"background-image:url(".concat(e,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],i=[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}],n&&U(e.prototype,n),i&&U(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP),V=Y;function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,et(i.key),i)}}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=$(t);if(e){var r=$(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Q(t)}(this,n)}}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function tt(t,e,n){return(e=et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t){var e=function(t,e){if("object"!==X(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==X(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===X(e)?e:String(e)}var nt={};var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(o,t);var e,n,i,r=q(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),tt(Q(e=r.call(this,t)),"onPlayerReset",(function(){e.autoPlayStart=!1;var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),p.ZP.removeClass(e.root,t),e.show()})),tt(Q(e),"onAutoplayStart",(function(){if(!e.autoPlayStart){var t="auto"===e.config.mode?"auto-hide":"hide";p.ZP.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")}})),e.autoPlayStart=!1,e._lastState="",e}return e=o,n=[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.playerConfig;this.initIcons(),this.once(a.READY,(function(){n&&(n.lang&&"en"===n.lang?p.ZP.addClass(e.root,"lang-is-en"):"jp"===n.lang&&p.ZP.addClass(e.root,"lang-is-jp"))})),this.on(a.AUTOPLAY_STARTED,this.onAutoplayStart),n.autoplay||this.show(),this.on(a.AUTOPLAY_PREVENTED,(function(){var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),p.ZP.removeClass(t.root,e),t.show()})),this.on(a.PLAY,(function(){t.onPlayPause("play")})),this.on(a.PAUSE,(function(){t.onPlayPause("pause")})),this.on(a.BUFFER_CONTROLS,(function(){t.onPlayPause(e.paused?"pause":"play")})),this.on(a.RESET,(function(){t.onPlayerReset()})),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation(),t.emitUserAction(e,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},startPause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild("xg-start-inner",t.startPlay),this.appendChild("xg-start-inner",t.startPause)}},{key:"hide",value:function(){p.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){p.ZP.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){p.ZP.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){p.ZP.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(t){t?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(t){var e=this;!function(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{start:null,end:null};nt[t]&&window.clearTimeout(nt[t].id),nt[t]={},n.start&&n.start(),nt[t].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(nt[t].id),delete nt[t]}),e)}("pauseplay",400,{start:function(){p.ZP.addClass(e.root,"interact"),e.show(),e.switchStatus(!0)},end:function(){p.ZP.removeClass(e.root,"interact"),!t&&e.hide()}})}},{key:"switchPausePlay",value:function(t){var e=this.player;t.cancelable&&t.preventDefault(),t.stopPropagation(),e.isReady&&(!this.player.paused&&e.isPlaying?e.pause():e.play())}},{key:"onPlayPause",value:function(t){var e=this.config,n=this.player;if(n.isPlaying&&this.autoPlayStart&&("pause"!==t||this._lastState!==t&&!n.isBufferControlPaused)){if(this._lastState=t,"show"===e.mode)return this.switchStatus(),void this.show();if("auto"!==e.mode){if(e.isShowPause&&n.paused&&!n.ended||e.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(e.disableAnimate)return this.switchStatus(),void this.hide();if("play"===t)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(nt).map((function(t){window.clearTimeout(nt[t].id),delete nt[t]}))}},{key:"render",value:function(){var t=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(t,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],i=[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}],n&&K(e.prototype,n),i&&K(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP),rt=it,ot=n(23141),at=n(19595),st=n(71430);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ft(i.key),i)}}function lt(t,e,n){return(e=ft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ft(t){var e=function(t,e){if("object"!==ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==ut(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ut(e)?e:String(e)}var pt="press",ht="pressend",dt="doubleclick",yt="click",vt="touchmove",gt="touchstart",mt="touchend",bt={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},wt={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Pt(t){return t&&t.length>0?t[t.length-1]:null}function kt(t){var e=navigator.userAgent;/(?:iPhone|iPad)/.test(e)&&t.cancelable&&t.preventDefault()}var St=function(){function t(e){var n=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{eventType:"touch"};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,"onTouchStart",(function(t){var e=n._pos,i=n.root;n.config.needPreventDefault&&kt(t);var r=Pt(t.touches);e.x=r?parseInt(r.pageX,10):t.pageX,e.y=r?parseInt(r.pageX,10):t.pageX,e.start=!0,n.__setPress(t),i.addEventListener(n.events.end,n.onTouchEnd),i.addEventListener(n.events.cancel,n.onTouchCancel),i.addEventListener(n.events.move,n.onTouchMove),n.trigger(gt,t)})),lt(this,"onTouchCancel",(function(t){n.onTouchEnd(t)})),lt(this,"onTouchEnd",(function(t){var e=n._pos,i=n.root;n.config.needPreventDefault&&kt(t),n.__clearPress(),i.removeEventListener(n.events.cancel,n.onTouchCancel),i.removeEventListener(n.events.end,n.onTouchEnd),i.removeEventListener(n.events.move,n.onTouchMove),t.moving=e.moving,t.press=e.press,e.press&&n.trigger(ht,t),n.trigger(mt,t),!e.press&&!e.moving&&n.__setDb(t),e.press=!1,e.start=!1,e.moving=!1})),lt(this,"onTouchMove",(function(t){var e=n._pos,i=n.config,r=Pt(t.touches),o=r?parseInt(r.pageX,10):t.pageX,a=r?parseInt(r.pageY,10):t.pageX,s=o-e.x,u=a-e.y;Math.abs(u)<i.miniStep&&Math.abs(s)<i.miniStep||(n.__clearPress(),e.press&&n.trigger(ht,t),e.press=!1,e.moving=!0,n.trigger(vt,t))})),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(t){n.config[t]=i[t]})),this.root=e,this.events="mouse"===i.eventType?wt:bt,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}var e,n,i;return e=t,(n=[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(t){var e=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){e.trigger(pt,t),e._pos.press=!0,e.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(t){var e=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(dt,t);this.dbIntrvalId=setTimeout((function(){e.__clearDb(),e._pos.start||e._pos.press||e._pos.moving||e.trigger(yt,t)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}},{key:"off",value:function(t,e){if(this.__handlers[t]){for(var n=this.__handlers[t],i=-1,r=0;r<n.length;r++)if(n[r]===e){i=r;break}i>=0&&this.__handlers[t].splice(i,1)}}},{key:"trigger",value:function(t,e){this.__handlers[t]&&this.__handlers[t].map((function(t){try{t(e)}catch(l){}}))}},{key:"destroy",value:function(){var t=this,e={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(e).forEach((function(n){t.root.removeEventListener(n,t[e[n]])}))}}])&&ct(e.prototype,n),i&&ct(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_t=St,Ot=n(46921);function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function Ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Lt(i.key),i)}}function xt(t,e){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xt(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Rt(t);if(e){var r=Rt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Et(t)}(this,n)}}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}function Dt(t,e,n){return(e=Lt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t){var e=function(t,e){if("object"!==Tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Tt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Tt(e)?e:String(e)}var It="auto",At="seeking",Mt="playbackrate",Zt=["videoClick","videoDbClick"],Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(o,t);var e,n,i,r=jt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Dt(Et(e=r.call(this,t)),"onTouchStart",(function(t){var n=Et(e),i=n.player,r=n.config,o=n.pos,a=n.playerConfig,s=e.getTouche(t);if(s&&!r.disableGesture&&e.duration>0&&!i.ended){o.isStart=!0,p.ZP.checkIsFunction(a.disableSwipeHandler)&&a.disableSwipeHandler(),e.find(".xg-dur").innerHTML=p.ZP.format(e.duration);var u=e.root.getBoundingClientRect();90===i.rotateDeg?(o.top=u.left,o.left=u.top,o.width=u.height,o.height=u.width):(o.top=u.top,o.left=u.left,o.width=u.width,o.height=u.height);var c=parseInt(s.pageX-o.left,10),l=parseInt(s.pageY-o.top,10);o.x=90===i.rotateDeg?l:c,o.y=90===i.rotateDeg?c:l,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),Dt(Et(e),"onTouchMove",(function(t){var n=e.getTouche(t),i=Et(e),r=i.pos,o=i.config,a=i.player;if(n&&!o.disableGesture&&e.duration&&r.isStart){var s=o.miniMoveStep,u=o.hideControlsActive,c=parseInt(n.pageX-r.left,10),l=parseInt(n.pageY-r.top,10),f=90===a.rotateDeg?l:c,p=90===a.rotateDeg?c:l;if(Math.abs(f-r.x)>s||Math.abs(p-r.y)>s){var h=f-r.x,d=p-r.y,y=r.scope;if(-1===y&&(0===(y=e.checkScope(f,p,h,d,r))&&(u?a.blur():a.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*a.currentTime,10)+1e3*e.timeOffset)),r.scope=y),-1===y||y>0&&!o.gestureY||0===y&&!o.gestureX)return;t.cancelable&&t.preventDefault(),e.executeMove(h,d,y,r.width,r.height),r.x=f,r.y=p}}})),Dt(Et(e),"onTouchEnd",(function(t){var n=Et(e),i=n.player,r=n.pos,o=n.playerConfig;r.isStart&&(r.scope>-1&&t.cancelable&&t.preventDefault(),e.endLastMove(r.scope),setTimeout((function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()}),10),r.scope=-1,e.resetPos(),p.ZP.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),e.changeAction(It))})),Dt(Et(e),"onRootTouchMove",(function(t){!e.config.disableGesture&&e.config.gestureX&&e.checkIsRootTarget(t)&&(t.stopPropagation(),e.pos.isStart?e.onTouchMove(t):e.onTouchStart(t))})),Dt(Et(e),"onRootTouchEnd",(function(t){if(e.pos.isStart&&e.checkIsRootTarget(t)){t.stopPropagation(),e.onTouchEnd(t);var n=e.player.controls;n&&n.recoverAutoHide()}})),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return e=o,n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:'<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var t=this;Zt.map((function(e){t.__hooks[e]=null}));var e=this.playerConfig,n=this.config,i=this.player;!0===e.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),p.ZP.isUndefined(e.disableGesture)||(n.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=p.ZP.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r="mouse"===this.domEventType?"mouse":"touch";this.touch=new _t(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(t){t.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(a.DURATION_CHANGE,(function(){var e=t.player,n=t.config;1e3*e.duration<n.moveDuration&&(n.moveDuration=1e3*e.duration)})),this.on([a.CANPLAY,a.ENDED],(function(){var e=t.pos,n=e.time;!e.isStart&&n>0&&(t.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).forEach((function(e){t.touch.on(e,(function(n){t[o[e]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(e){t.activeSeekNote(e.currentTime,e.forward)})),s.addCallBack("dragend",(function(){t.changeAction(It)})))}}},{key:"registerThumbnail",value:function(){var t=this.player.plugins.thumbnail;if(t&&t.usable){this.thumbnail=t.createThumbnail(null,"mobile-thumbnail");var e=this.find(".time-preview");e.insertBefore(this.thumbnail,e.children[0])}}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle,e=t.playedColor,n=t.progressColor;e&&(this.find(".xg-curbar").style.backgroundColor=e,this.find(".xg-cur").style.color=e),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&p.ZP.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;arguments.length>0&&undefined,this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(e){t.pos[e]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(t){var e=this.player;this.root.setAttribute("data-xg-action",t);var n=e.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(t){this.player.rotateDeg;var e=t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(t,e,n,i,r){var o=r.width,a=-1;if(t<0||t>o)return a;var s=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&s>=1.73&&t>r.scopeM1&&t<r.scopeM2?a=0:(0===Math.abs(n)||s<=.57)&&(a=t<r.scopeL?1:t>r.scopeR?2:3),a}},{key:"executeMove",value:function(t,e,n,i,r){switch(n){case 0:this.updateTime(t/i*this.config.scopeM);break;case 1:this.updateBrightness(e/r);break;case 2:f.Z.os.isIos||this.updateVolume(e/r)}}},{key:"endLastMove",value:function(t){var e=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;0===t&&(i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){e.pos.time=0}),500)),this.changeAction(It)}},{key:"checkIsRootTarget",value:function(t){var e=this.player.plugins||{};return(!e.progress||!e.progress.root.contains(t.target))&&(e.start&&e.start.root.contains(t.target)||e.controls&&e.controls.root.contains(t.target))}},{key:"clickHandler",value:function(t){var e=this.player,n=this.config,i=this.playerConfig;e.isPlaying?!n.closedbClick||i.closeVideoClick?e.isActive?e.blur():e.focus():i.closeVideoClick||((e.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),e.focus()):i.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),e.play())}},{key:"dbClickHandler",value:function(t){var e=this.config,n=this.player;!e.closedbClick&&n.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onClick",value:function(t){var e=this,n=this.player;(0,Ot.rl)(this,Zt[0],(function(t,n){e.clickHandler(n.e)}),{e:t,paused:n.paused})}},{key:"onDbClick",value:function(t){var e=this,n=this.player;(0,Ot.rl)(this,Zt[1],(function(t,n){e.dbClickHandler(n.e)}),{e:t,paused:n.paused})}},{key:"onPress",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(e.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction(Mt))}},{key:"onPressEnd",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{from:i.playbackRate,to:e.rate}),i.playbackRate=e.rate,e.rate=1,this.changeAction(It))}},{key:"updateTime",value:function(t){var e=this.player,n=this.config,i=this.player.duration;t=Number(t.toFixed(4));var r=parseInt(t*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,e.getPlugin("time")&&e.getPlugin("time").updateTime(r/1e3),e.getPlugin("progress")&&e.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,t>0),n.isTouchingSeek&&e.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.player,n=this.pos;if(t=parseInt(100*t,10),n.volume+=t,!(Math.abs(n.volume)<10)){var i=parseInt(10*e.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,e.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.pos,n=this.config,i=this.xgMask,r=e.light+.8*t;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),e.light=r}},{key:"activeSeekNote",value:function(t){var e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n=this.player,i=this.config,r=!(this.duration!==Infinity&&this.duration>0);if(t&&"number"==typeof t&&!r&&!i.disableActive){t<0?t=0:t>n.duration&&(t=n.duration-.2),this.changeAction(At);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=p.ZP.format(this.duration),this.find(".xg-cur").innerHTML=p.ZP.format(t),this.find(".xg-curbar").style.width="".concat(t/this.duration*100,"%"),e?p.ZP.removeClass(this.find(".xg-seek-show"),"xg-back"):p.ZP.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(t)}}},{key:"updateThumbnails",value:function(t){var e=this.player.plugins.thumbnail;e&&e.usable&&this.thumbnail&&e.update(this.thumbnail,t,160,90)}},{key:"switchPlayPause",value:function(){var t=this.player;if(!t.hasStart)return!1;t.ended||(t.paused?t.play():t.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var t=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,t.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,t.root.removeEventListener("touchmove",this.onRootTouchMove,!0),t.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var t="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(t,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],i=[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}],n&&Ct(e.prototype,n),i&&Ct(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP),Bt=Nt,Ft=n(69865),Ht=n(2356),Ut=n(76933),Gt=n(89242),Wt=n(40321),zt=n(6478),Yt=n(63611),Vt=n(67723),Xt=n(7523);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ee(i.key),i)}}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=te(t);if(e){var r=te(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $t(t)}(this,n)}}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Kt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Kt(e)?e:String(e)}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(s,t);var e,n,i,o=Qt(s);function s(t){var e,n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=o.call(this,t),n=$t(e),r=function(t){var n=$t(e).player;t.preventDefault(),t.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,n.emit(a.PLAYNEXT,e.idx+1),e.nextHandler(e.config.urlList[e.idx],e.idx)):(e.nextHandler(),n.emit(a.PLAYNEXT))},(i=ee(i="playNext"))in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,e.idx=-1,e}return e=s,n=[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>'}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var t="mobile"===f.Z.device?"touchend":"click";this.bind(t,this.playNext),this.show()}},{key:"changeSrc",value:function(t){var e=this.player;t&&(e.pause(),e.currentTime=0,e.autoplay=!0,e.src=t)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],i=[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}],n&&Jt(e.prototype,n),i&&Jt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.ZP),ie=n(3812),re=n.n(ie),oe=n(22721);function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,he(i.key),i)}}function ue(){return ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ue.apply(this,arguments)}function ce(t,e){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ce(t,e)}function le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=pe(t);if(e){var r=pe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fe(t)}(this,n)}}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}function he(t){var e=function(t,e){if("object"!==ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ae(e)?e:String(e)}var de=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ce(t,e)}(a,t);var e,n,i,o=le(a);function a(t){var e,n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this,t),n=fe(e),r=function(t){if(!e.isLock&&!e.config.disable){e.emitUserAction(t,"download");var n=e.getAbsoluteURL(e.player.src);re()(n),e.isLock=!0,e.timer=window.setTimeout((function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null}),300)}},(i=he(i="download"))in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,e.timer=null,e.isLock=!1,e}return e=a,i=[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:3,disable:!0}}}],(n=[{key:"afterCreate",value:function(){ue(pe(a.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>'}}},{key:"getAbsoluteURL",value:function(t){if(!t.match(/^https?:\/\//)){var e=document.createElement("div");e.innerHTML='<a href="'.concat(t,'">x</a>'),t=e.firstChild.href}return t}},{key:"destroy",value:function(){ue(pe(a.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}])&&se(e.prototype,n),i&&se(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(oe.Z);function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==ye(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===ye(o)?o:String(o)),i)}var r,o}function ge(){return ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=we(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ge.apply(this,arguments)}function me(t,e){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},me(t,e)}function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=we(t);if(e){var r=we(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function we(t){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},we(t)}var Pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e)}(s,t);var e,n,i,o=be(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.apply(this,arguments)}return e=s,n=[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.screenShot&&(t.config.disable=!t.player.config.screenShot)}},{key:"afterCreate",value:function(){ge(we(s.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(a.VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(t,e){var n=document.createElement("a");n.href=t,n.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(t,e){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=t||this.config.width,n.height=e||this.config.height}},{key:"onClickBtn",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"shot"),this.shot().then((function(t){e.emit(a.SCREEN_SHOT,t),e.saveScreenShot(t,e.config.name+e.config.format)}))}},{key:"shot",value:function(t,e){var n=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,a=i.quality||r.quality,s=i.type||r.type;return new Promise((function(i,u){n.canvas?(n.canvas.width=t||r.width,n.canvas.height=e||r.height):n.createCanvans(t,e),n.canvasCtx.drawImage(o.video,0,0,t||r.width,e||r.height);var c=n.canvas.toDataURL(s,a).replace(s,"image/octet-stream");i(c=c.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){ge(we(s.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(a.VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var t=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",e="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(t,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span>")," \n      </div>\n    </xg-icon>")}}}],i=[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}],n&&ve(e.prototype,n),i&&ve(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(oe.Z);function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===ke(o)?o:String(o)),i)}var r,o}var _e=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e.config,this.parent=e.root,this.root=p.ZP.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),e.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="touche"===this.config.domEventType?"touchend":"click";this._delegates=r.ZP.delegate.call(this,this.root,"li",n,this.onItemClick)}var e,n,i;return e=t,(n=[{key:"renderItemList",value:function(t){var e=this,n=this.config,i=this.root;t?n.data=t:t=n.data,n.style&&Object.keys(n.style).map((function(t){i.style[t]=n[t]})),t.length>0&&(this.attrKeys=Object.keys(t[0])),this.root.innerHTML="",t.map((function(t,n){var i=t.selected?"option-item selected":"option-item";t["data-index"]=n,e.root.appendChild(p.ZP.createDom("li","<span>".concat(t.showText,"</span>"),t,i))}))}},{key:"onItemClick",value:function(t){t.delegateTarget||(t.delegateTarget=t.target);var e=t.delegateTarget;if(e&&p.ZP.hasClass(e,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");p.ZP.addClass(e,"selected"),i&&p.ZP.removeClass(i,"selected"),n(t,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(e,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){if(!t||!e)return{};var n={};e.map((function(e){n[e]=t.getAttribute(e)}));var i=t.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){p.ZP.removeClass(this.root,"hide"),p.ZP.addClass(this.root,"active")}},{key:"hide",value:function(){p.ZP.removeClass(this.root,"active"),p.ZP.addClass(this.root,"hide")}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.root.style[n]=t[n]}))}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(t){t.destroy&&t.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}])&&Se(e.prototype,n),i&&Se(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,De(i.key),i)}}function Ce(t,e){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ce(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ee(t);if(e){var r=Ee(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return je(t)}(this,n)}}function je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ee(t){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ee(t)}function Re(t,e,n){return(e=De(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function De(t){var e=function(t,e){if("object"!==Oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Oe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Oe(e)?e:String(e)}var Le="mobile"===f.Z.device,Ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(s,t);var e,n,i,o=xe(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Re(je(e=o.call(this,t)),"onEnter",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.onToggle(!0)})),Re(je(e),"onLeave",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.isActive&&e.onToggle(!1)})),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return e=s,n=[{key:"updateLang",value:function(t){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var t=this,e=this.config;this.initIcons(),Le=Le||"touch"===this.domEventType,"mobile"===f.Z.device&&"middle"!==e.listType&&(e.listType="rightSide"),e.hidePortrait&&p.ZP.addClass(this.root,"portrait"),this.once(a.CANPLAY,(function(){e.list&&e.list.length>0&&(t.renderItemList(e.list),t.show())})),Le&&this.on(a.PLAYER_FOCUS,(function(){t.isActive&&(t.optionsList&&t.optionsList.hide(),t.isActive=!1)})),this.activeEvent=Le?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick),this.config.disable&&this.disable()}},{key:"initIcons",value:function(){var t=this,e=this.icons,n=Object.keys(e),i=!1;n.length>0&&(n.forEach((function(n){t.appendChild(".xgplayer-icon",e[n]),!i&&(i=e[n])})),this.isIcons=i),i||(this.appendChild(".xgplayer-icon",p.ZP.createDom("span","",{},"icon-text")),p.ZP.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<1||p.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){p.ZP.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(t,e,n){if(t===undefined)return"";var i=this.config.list;!n&&(n=this.player.lang),e=!e||p.ZP.isUndefined(t[e])?"text":e,"number"==typeof t&&(t=i[t]);try{return"object"===Oe(t[e])?t[e][n]||t[e].zh:t[e]}catch(r){return""}}},{key:"onToggle",value:function(t){if(t!==this.isActive&&!this.config.disable){var e=this.player.controls,n=this.config.listType;t?("rightSide"===n?e.blur():e.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?e.focus():e.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=t}}},{key:"onItemClick",value:function(t,e){t.preventDefault(),t.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Le||"rightSide"===i)&&this.onToggle(!1),this.curIndex=e.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"onIconClick",value:function(t){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var t=this.config.list,e=t[this.curIndex<t.length?this.curIndex:0];e&&(this.find(".icon-text").innerHTML=this.getTextByLang(e,"iconText"))}}},{key:"renderItemList",value:function(t,e){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof e&&(this.curIndex=e,this.curItem=i.list[e]),r)return r.renderItemList(t),void this.changeCurrentText();var a={config:{data:t||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(t,e){n.onItemClick(t,e)},domEventType:Le?"touche":"mouse"},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new _e(a),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],i=[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}],n&&Te(e.prototype,n),i&&Te(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.ZP);function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Ae(o)?o:String(o)),i)}var r,o}function Ze(){return Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fe(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Ze.apply(this,arguments)}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Fe(t);if(e){var r=Fe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Fe(t){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fe(t)}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(s,t);var e,n,i,o=Be(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t)).curTime=0,e.isPaused=!0,e}return e=s,n=[{key:"beforeCreate",value:function(t){var e=t.config.list;Array.isArray(e)&&e.length>0&&(t.config.list=e.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t})))}},{key:"afterCreate",value:function(){var t=this;Ze(Fe(s.prototype),"afterCreate",this).call(this);var e=this.config,n=e.list,i=e.defaultDefinition,r=this.playerConfig.defaultConfig;n.forEach((function(t){t.definition!==i&&t.definition!==r||(t.selected=!0)})),this.on("resourceReady",(function(e){t.changeDefinitionList(e)})),this.on(a.DEFINITION_CHANGE,(function(e){t.renderItemList(t.config.list,e.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var t=this.config,e=t.list,n=t.defaultDefinition,i=this.playerConfig.defaultConfig;if(e.length>0){var r=null;e.map((function(t){t.definition!==n&&t.definition!==i||(r=t,t.selected=!0)})),r||(r=e[0]),this.changeDefinition(r)}}},{key:"renderItemList",value:function(t,e){var n=this,i=e&&e.definition?e.definition:"";e&&!Array.isArray(e)&&t.forEach((function(t){t.selected=!1}));var r=0,o=t.map((function(t,e){var o={url:t.url,definition:t.definition||"",showText:n.getTextByLang(t)||t.definition,selected:!1};return(t.selected||!p.ZP.isUndefined(t.definition)&&t.definition===i)&&(o.selected=!0,r=e),o}));Ze(Fe(s.prototype),"renderItemList",this).call(this,o,r)}},{key:"changeDefinitionList",value:function(t){if(Array.isArray(t)){var e=this.playerConfig,n=e.definition,i=e.defaultDefinition,r=n||this.config.defaultDefinition||"";this.config.list=t.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t.definition!==r&&t.definition!==i||(t.selected=!0),t})),n.list=t,this.renderItemList(t),this.config.list.length<2?this.hide():this.show()}}},{key:"changeDefinition",value:function(t,e){var n=this.player;n.switchURL?n.switchUrl(t.url):n.changeDefinition(t,e)}},{key:"onItemClick",value:function(t,e){var n=this.player.definitionList;Ze(Fe(s.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(t,"change_definition",{from:e.from,to:e.to});for(var i=0;i<n.length;i++)e.to&&n[i].definition===e.to.definition&&(e.to.url=n[i].url),e.from&&n[i].definition===e.from.definition&&(e.from.url=n[i].url);this.player.changeDefinition(e.to,e.from)}}],i=[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}],n&&Me(e.prototype,n),i&&Me(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(Ie);function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Ue(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Ue(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Ue(o)?o:String(o)),i)}var r,o}function We(){return We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ve(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},We.apply(this,arguments)}function ze(t,e){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ze(t,e)}function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ve(t);if(e){var r=Ve(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ve(t)}var Xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(s,t);var e,n,i,o=Ye(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t)).curRate=1,e}return e=s,n=[{key:"beforeCreate",value:function(t){var e=t.player.config.playbackRate,n=e?Array.isArray(e)?e:t.config.list:[];Array.isArray(n)&&(t.config.list=n.map((function(t){return"number"==typeof t?t={rate:t,text:"".concat(t,"x")}:!t.text&&t.rate&&(t.text="".concat(t.rate,"x")),t})))}},{key:"afterCreate",value:function(){var t=this;We(Ve(s.prototype),"afterCreate",this).call(this),this.on(a.RATE_CHANGE,(function(){t.curValue!==t.player.playbackRate&&t.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&We(Ve(s.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(t,e){We(Ve(s.prototype),"onItemClick",this).apply(this,arguments);var n=t.delegateTarget,i=Number(n.getAttribute("rate"));if(!i||i===this.curValue)return!1;var r={playbackRate:{from:this.player.playbackRate,to:i}};this.emitUserAction(t,"change_rate",{props:r}),this.curValue=i,this.player.playbackRate=i}},{key:"renderItemList",value:function(){var t=this,e=this.player.playbackRate||1;this.curValue=e;var n=0,i=this.config.list.map((function(i,r){var o={rate:i.rate};return o.rate===e&&(o.selected=!0,n=r),o.showText=t.getTextByLang(i),o}));We(Ve(s.prototype),"renderItemList",this).call(this,i,n)}},{key:"destroy",value:function(){We(Ve(s.prototype),"destroy",this).call(this)}}],i=[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}],n&&Ge(e.prototype,n),i&&Ge(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(Ie);function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Ke(o)?o:String(o)),i)}var r,o}function qe(){return qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},qe.apply(this,arguments)}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=tn(t);if(e){var r=tn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}var en=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(s,t);var e,n,i,o=$e(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.apply(this,arguments)}return e=s,i=[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:r.kd.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}],(n=[{key:"afterCreate",value:function(){var t=this;qe(tn(s.prototype),"afterCreate",this).call(this),this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(a.CSS_FULLSCREEN_CHANGE,(function(e){t.animate(e)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen)}},{key:"initIcons",value:function(){var t=this.icons,e=this.find(".xgplayer-icon");e.appendChild(t.cssFullscreen),e.appendChild(t.exitCssFullscreen)}},{key:"btnClick",value:function(t){if(!this.config.disable){t.preventDefault(),t.stopPropagation();var e=this.player.isCssfullScreen;this.emitUserAction(t,"switch_cssfullscreen",{cssfullscreen:e}),e?this.player.exitCssFullscreen():this.player.getCssFullscreen()}}},{key:"animate",value:function(t){this.root&&(t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(t))}},{key:"switchTips",value:function(t){var e=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),t?e.EXITCSSFULLSCREEN_TIPS:e.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-get-cssfull"},exitCssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){qe(tn(s.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.CSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}])&&Je(e.prototype,n),i&&Je(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(oe.Z);function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==nn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==nn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===nn(o)?o:String(o)),i)}var r,o}function on(t,e){return on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},on(t,e)}function an(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=sn(t);if(e){var r=sn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}var un=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&on(t,e)}(o,t);var e,n,i,r=an(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(a.CANPLAY,(function(){t.handleCanPlay()})),this.on(a.ERROR,(function(e){t.onError(e)}))}},{key:"errorRetry",value:function(t){this.emitUserAction(t,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){p.ZP.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},e=this.player,n=t.errorType,i=e.error;if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],i=[{key:"pluginName",get:function(){return"error"}}],n&&rn(e.prototype,n),i&&rn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function cn(t){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==cn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==cn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===cn(o)?o:String(o)),i)}var r,o}function fn(t,e){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fn(t,e)}function pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=hn(t);if(e){var r=hn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===cn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function hn(t){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hn(t)}var dn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fn(t,e)}(o,t);var e,n,i,r=pn(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))})),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).map((function(n){e.root.style[n]=t[n]}))}},{key:"show",value:function(t){var e=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};if(t){this.customOnClick=i;var r=this.config.interval;if(this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),p.ZP.addClass(this.root,"show"),"arrow"===n.mode&&p.ZP.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof t?t:"".concat(t.text||"")+"".concat(t.highlight?'<i class="highlight">'.concat(t.highlight,"</i>"):""),n.style&&this.setStyle(n.style),"boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide){var o=n.interval||r;this.intervalId=setTimeout((function(){e.hide()}),o)}}}},{key:"hide",value:function(){p.ZP.removeClass(this.root,"show"),p.ZP.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(s.Z.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],i=[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}],n&&ln(e.prototype,n),i&&ln(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP),yn=dn,vn={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function gn(t){Object.keys(vn).map((function(e){t[e]===undefined&&(t[e]=vn[e])}))}var mn={initDots:function(){var t=this;this._ispots.map((function(e){t.createDot(e,!1)})),this._ispotsInit=!0},createDot:function(t){var e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n=this.player.plugins.progress;if(n&&(e&&(gn(t),this._ispots.push(t)),this._ispotsInit||!e)){var i=this.calcuPosition(t.time,t.duration),r=t.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(t.id," xgplayer-spot");i.isMini&&(o+=" mini");var a=p.ZP.createDom("xg-spot",t.template||"",{"data-text":t.text,"data-time":t.time,"data-id":t.id},o);Object.keys(r).map((function(t){a.style[t]=r[t]})),n.outer&&n.outer.appendChild(a)}},findDot:function(t){if(this.player.plugins.progress){var e=this._ispots.filter((function(e,n){return e.id===t}));return e.length>0?e[0]:null}},updateDot:function(t){var e=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(t.id);if(i&&Object.keys(t).map((function(e){i[e]=t[e]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(t.id,'"]'));if(r){var o=this.calcuPosition(t.time,t.duration),a=t.style||{};a.left="".concat(o.left,"%"),a.width="".concat(o.width,"%"),r.setAttribute("data-text",t.text),r.setAttribute("data-time",t.time),o.isMini?p.ZP.addClass(r,"mini"):p.ZP.removeClass(r,"mini"),Object.keys(a).map((function(t){r.style[t]=a[t]})),e&&this.showDot(t.id)}}}},deleteDot:function(t){var e=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<e.length;r++)e[r].id===t&&i.push(r);for(var o=i.length-1;o>=0;o--)if(e.splice(i[o],1),this._ispotsInit){var a=n.find('xg-spot[data-id="'.concat(t,'"]'));a&&a.parentElement.removeChild(a)}}},deleteAllDots:function(){var t=this.player.plugins.progress;if(t)if(this._ispotsInit){for(var e=t.root.getElementsByTagName("xg-spot"),n=e.length-1;n>=0;n--)t.outer.removeChild(e[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var t=this,e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>e.length)for(var o=r-1;o>e.length-1;o--)n.outer.removeChild(i[o]);e.map((function(e,n){n<r?(i[n].setAttribute("data-id","".concat(e.id)),t._ispots.push(e),t.updateDot(e)):t.createDot(e)}))}else this._ispots=e},getAllDotsDom:function(){var t=this.player.plugins.progress;return t?t.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(t){var e=this.player.plugins.progress;if(e)return e.find('xg-spot[data-id="'.concat(t,'"]'))}};function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function wn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Tn(i.key),i)}}function Pn(t,e){return Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pn(t,e)}function kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_n(t);if(e){var r=_n(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}(this,n)}}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _n(t){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_n(t)}function On(t,e,n){return(e=Tn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tn(t){var e=function(t,e){if("object"!==bn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==bn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===bn(e)?e:String(e)}var Cn={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pn(t,e)}(o,t);var e,n,i,r=kn(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),On(Sn(e=r.call(this,t)),"onMousemove",(function(t){e.config.disable||(p.ZP.hasClass(t.target,"xg-spot-content")&&e.config.isHideThumbnailHover?e.player.plugins.progress.onMouseLeave(t):(e._state.f||p.ZP.hasClass(t.target,"xg-spot-content"))&&(p.ZP.event(t),t.stopPropagation()))})),On(Sn(e),"onMousedown",(function(t){e.config.disable||(e._state.f||p.ZP.hasClass(t.target,"xg-spot-content"))&&(p.ZP.event(t),t.stopPropagation())})),On(Sn(e),"onMouseup",(function(t){if(e.isDrag){var n=e.player.plugins.progress;n&&n.pos&&(n.onMouseUp(t),!n.pos.isEnter&&n.onMouseLeave(t))}})),On(Sn(e),"onDotMouseLeave",(function(t){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(t.target),e._curDot=null;var n=e.player.plugins.progress;n&&n.enableBlur(),e.show()}})),On(Sn(e),"onProgressMouseOver",(function(t,n){if(!e.config.disable&&p.ZP.hasClass(n.target,"xgplayer-spot")&&!e._curDot){e._curDot=n.target,e.focusDot(n.target),e._curDot.children.length>0&&e.hide();var i=e.player.plugins.progress;i&&i.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}})),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e._state={now:0,f:!1},e}return e=o,n=[{key:"beforeCreate",value:function(t){var e=t.player.plugins.progress;e&&(t.root=e.root)}},{key:"afterCreate",value:function(){var t=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(e,n){n.time&&t.player.seek(n.time)})),function(t){var e=t.config,n=t.player;Object.keys(mn).map((function(e){t[e]=mn[e].bind(t)}));var i=n.config.progressDot||e.ispots||[];t._ispots=i.map((function(t){return gn(t),t})),t._ispotsInit=!1,n.once(a.DURATION_CHANGE,(function(){t.initDots()}))}(this),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(t){var e=this;t&&Object.keys(t).map((function(n){e.config[n]=t[n]}))}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t=this,e=this.player.plugins.progress;if(e&&(Object.keys(Cn).map((function(n){t[Cn[n]]=t[Cn[n]].bind(t),e.addCallBack(n,t[Cn[n]])})),"mobile"!==f.Z.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(e){e.stopPropagation(),n(parseInt(1e3*t._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(t,e){!this.config.disable&&this.player.duration&&this.updatePosition(t.offset,t.width,t.currentTime,t.e)}},{key:"onProgressDragStart",value:function(t){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&p.ZP.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(t){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&p.ZP.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(t,e){if(!this.config.disable&&p.ZP.hasClass(e.target,"xgplayer-spot")){e.stopPropagation(),e.preventDefault();var n={};["time","id","text"].map((function(t){n[t]=e.target.getAttribute("data-".concat(t))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(e,n)}}},{key:"updateLinePos",value:function(t,e){var n=this.root,i=this.previewLine,r=this.timePoint,o=this.player,a=this.config,s="flex"===o.controls.mode,u=n.getBoundingClientRect().width;if(u||!this._hasThumnail){var c,l,f=r.getBoundingClientRect().width,p=t-(u=this._hasThumnail&&u<a.width?a.width:u)/2;p<0&&!s?(p=0,c=t-u/2,!this.thumbnail&&(l=t-u/2-f/2)):p>e-u&&!s?(c=p-(e-u),!this.thumbnail&&(l=p-(e-u)-f/2),p=e-u):(c=0,!this.thumbnail&&(l=-f/2)),c!==undefined&&(i.style.transform="translateX(".concat(c.toFixed(2),"px)")),l!==undefined&&(r.style.transform="translateX(".concat(l.toFixed(2),"px)")),n.style.transform="translateX(".concat(p.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(t){var e=this.timeText,n=this.timePoint;e.textContent=t,!this.thumbnail&&(n.textContent=t)}},{key:"updatePosition",value:function(t,e,n,i){var r=this.root,o=this.config,a=this._state;if(r){this.updateLinePos(t,e),a.now=n;var s=p.ZP.format(n);i&&i.target&&p.ZP.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,s),this.focusDot(i.target),a.f=!0,o.isFocusDots&&a.f&&(a.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(a.f=!1,this.showTips(o.defaultText,!0,s)):(a.f=!1,this.hideTips("")),this.updateTimeText(s),this.updateThumbnails(a.now)}}},{key:"updateThumbnails",value:function(t){var e=this.player,n=this.videoPreview,i=this.config,r=e.plugins.thumbnail;if(r&&r.usable){this.thumbnail&&r.update(this.thumbnail,t,i.width,i.height);var o=n&&n.getBoundingClientRect();this.videothumbnail&&r.update(this.videothumbnail,t,o.width,o.height)}}},{key:"registerThumbnail",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if("mobile"!==f.Z.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i&&i.setConfig(t),i&&i.usable&&n.isShowThumbnail){p.ZP.removeClass(this.root,"short-line no-thumbnail"),"short"===n.mode&&p.ZP.addClass(this.root,"short-line"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=p.ZP.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}else p.ZP.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(t,e){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6,a={};return t+e>i.duration&&(e=i.duration-t),a.left=t/i.duration*100,a.width=e/i.duration,a.isMini=o>e,{left:t/i.duration*100,width:e/i.duration*100,isMini:e<o}}},{key:"showDot",value:function(t){var e=this.findDot(t);if(e){var n=this.root.getBoundingClientRect().width,i=e.time/this.player.duration*n;this.updatePosition(i,n,e.time)}}},{key:"focusDot",value:function(t,e){t&&(e||(e=t.getAttribute("data-id")),p.ZP.addClass(t,"active"),this._activeDotId=e)}},{key:"blurDot",value:function(t){if(!t){var e=this._activeDotId;t=this.getDotDom(e)}t&&(p.ZP.removeClass(t,"active"),this._activeDotId=null)}},{key:"showTips",value:function(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";p.ZP.addClass(this.root,"no-timepoint"),t&&(p.ZP.addClass(this.find(".xg-spot-content"),"show-text"),e&&"production"===this.config.mode?(p.ZP.addClass(this.root,"product"),this.tipText.textContent=t):(p.ZP.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?t:"".concat(n," ").concat(t)))}},{key:"hideTips",value:function(){p.ZP.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",p.ZP.removeClass(this.find(".xg-spot-content"),"show-text"),p.ZP.removeClass(this.root,"product")}},{key:"hide",value:function(){p.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){p.ZP.removeClass(this.root,"hide")}},{key:"enable",value:function(){var t=this.config,e=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&t.isShowThumbnail&&this.registerThumbnail(e.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var t=this,e=this.player.plugins.progress;e&&Object.keys(Cn).map((function(n){e.removeCallBack(n,t[Cn[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===f.Z.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],i=[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}],n&&wn(e.prototype,n),i&&wn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function jn(t){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(t)}function En(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==jn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==jn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===jn(o)?o:String(o)),i)}var r,o}function Rn(t,e){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rn(t,e)}function Dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ln(t);if(e){var r=Ln(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===jn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Ln(t){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ln(t)}var In=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rn(t,e)}(o,t);var e,n,i,r=Dn(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).ratio=1,e.interval=null,e._preloadMark={},e}return e=o,n=[{key:"afterCreate",value:function(){var t=this;this.usable&&this.initThumbnail(),this.on([a.DURATION_CHANGE],(function(){var e=t.config,n=e.pic_num,i=e.interval;t.usable&&(t.interval=i>0?i:Math.round(1e3*t.player.duration/n)/1e3)}))}},{key:"setConfig",value:function(t){var e=this;if(t){var n=Object.keys(t);n.length<1||(n.forEach((function(n){e.config[n]=t[n]})),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var t=this.config,e=t.urls,n=t.pic_num;return e&&e.length>0&&n>0}},{key:"initThumbnail",value:function(){var t=this.config,e=t.width,n=t.height,i=t.pic_num,r=t.interval;this.ratio=e/n*100,this.interval=r||Math.round(this.player.duration/i),this._preloadMark={}}},{key:"getUrlByIndex",value:function(t){return t>=0&&t<this.config.urls.length?this.config.urls[t]:""}},{key:"preload",value:function(t){var e=this;if(!this._preloadMark[t]){var n=this.config.urls,i=n.length,r=[];t>0&&r.push(t-1),r.push(t),t>0&&t<i-1&&r.push(t+1),r.map((function(t){!e._preloadMark[t]&&t>=0&&t<i&&(e._preloadMark[t]=1,p.ZP.preloadImg(n[t],(function(){e._preloadMark[t]=2})))}))}}},{key:"getPosition",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,a=i.col,s=i.width,u=i.height;this.interval=Math.round(this.player.duration/r);var c=Math.ceil(t/this.interval),l=(c=c>r?r:c)<o*a?0:Math.ceil(c/(o*a))-1,f=c-l*(a*o),p=f>0?Math.ceil(f/a)-1:0,h=f>0?f-p*a-1:0,d=0,y=0;e&&n?e/n<s/u?d=(y=n)*(s/u):y=(d=e)/(s/u):n?e||(d=(y=n||u)*(s/u)):y=(d=e||s)/(s/u);var v=this.getUrlByIndex(l);return{urlIndex:l,rowIndex:p,colIndex:h,url:v,height:y,width:d,style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"".concat(d*a,"px auto"),backgroundPosition:"-".concat(h*d,"px -").concat(p*y,"px"),width:"".concat(d,"px"),height:"".concat(y,"px")}}}},{key:"update",value:function(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"",o=this.config,a=o.pic_num,s=o.urls;if(!(a<=0)&&s&&0!==s.length){var u=this.getPosition(e,n,i);this.preload(u.urlIndex),Object.keys(u.style).map((function(e){t.style[e]=u.style[e]})),Object.keys(r).map((function(e){t.style[e]=r[e]}))}}},{key:"changeConfig",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.setConfig(t)}},{key:"createThumbnail",value:function(t,e){var n=p.ZP.createDom("xg-thumbnail","",{},"thumbnail ".concat(e));return t&&t.appendChild(n),n}}],i=[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}],n&&En(e.prototype,n),i&&En(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==An(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==An(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===An(o)?o:String(o)),i)}var r,o}function Zn(t,e){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zn(t,e)}function Nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Bn(t);if(e){var r=Bn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===An(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}var Fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(o,t);var e,n,i,r=Nn(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:undefined;e&&this.root&&(t.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(t.cached/e*100,"%")),t.played&&(this.find("xg-mini-progress-played").style.width="".concat(t.played/e*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],i=[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}],n&&Mn(e.prototype,n),i&&Mn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP),Hn=Fn,Un=n(24637),Gn=n(91229);function Wn(t){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(t)}function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(n),!0).forEach((function(e){Qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$n(i.key),i)}}function Xn(t,e){return Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xn(t,e)}function Kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=qn(t);if(e){var r=qn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jn(t)}(this,n)}}function Jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qn(t){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qn(t)}function Qn(t,e,n){return(e=$n(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $n(t){var e=function(t,e){if("object"!==Wn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Wn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wn(e)?e:String(e)}var ti="info",ei=a.STATS_EVENTS,ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xn(t,e)}(o,t);var e,n,i,r=Kn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Qn(Jn(t=r.call.apply(r,[this].concat(n))),"_recordUserActions",(function(e){var n=t._getTime(),i=Object.assign({},e,{msg:e.msg||e.action});t._stats[ti].push(Yn(Yn({type:"userAction"},n),{},{payload:i}))})),Qn(Jn(t),"_onReset",(function(){t.reset()})),Qn(Jn(t),"_recordInfo",(function(e){t.info(e)})),Qn(Jn(t),"_downloadStats",(function(){var e=t.getStats(),n=new Blob([JSON.stringify(e)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.download="player.txt",r.disabled=!1,r.click()})),t}return e=o,n=[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(a.USER_ACTION,this._recordUserActions),this.on(ei.STATS_INFO,this._recordInfo),this.on(ei.STATS_DOWNLOAD,this._downloadStats),this.on(ei.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(t){t.profile?this._infoProfile(t):this._info(t)}},{key:"_info",value:function(t){var e=this._getTime();this._stats[ti].push(Yn(Yn({},e),{},{payload:t}))}},{key:"_infoProfile",value:function(t){if(t&&t.startMs){var e=Yn({cat:"function",dur:Date.now()-t.startMs,name:t.name||t.msg,ph:"X",pid:0,tid:0,ts:t.startMs,profile:!0},t);this._info(e)}}},{key:"reset",value:function(){var t;this._stats=(Qn(t={},ti,[]),Qn(t,"media",{}),t)}},{key:"getStats",value:function(){for(var t=this.player.video,e=[],n=0;n<t.buffered.length;n++)e.push({start:t.buffered.start(n),end:t.buffered.end(n)});var i={currentTime:t.currentTime,readyState:t.readyState,buffered:e,paused:t.paused,ended:t.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats[ti].map((function(t){var e=t.payload.data,n="";try{e instanceof Error?n=e.msg:e!==undefined&&(n=JSON.stringify(e))}catch(l){}return"[".concat(t.timeFormat,"] : ").concat(t.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats[ti].forEach((function(e){e.payload.profile&&t.traceEvents.push(e.payload)})),t}}],i=[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}],n&&Vn(e.prototype,n),i&&Vn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(o.ZP);function ii(t){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(t)}function ri(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ci(i.key),i)}}function oi(t,e){return oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oi(t,e)}function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ui(t);if(e){var r=ui(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return si(t)}(this,n)}}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ui(t){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ui(t)}function ci(t){var e=function(t,e){if("object"!==ii(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==ii(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ii(e)?e:String(e)}var li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}(o,t);var e,n,i,r=ai(o);function o(){var t,e,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return t=r.call.apply(r,[this].concat(s)),e=si(t),i=function(){var e=si(t),n=e.player,i=e.config;if(n.video.readyState!==HTMLMediaElement.HAVE_NOTHING){if(n.video.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!n.video.paused||0===n.video.currentTime||!t.hasPlayed){var r=n.video.buffered,a=i.smallGapLimit||.5,s=i.gapDetectionThreshold||.3,u=n.video.currentTime,c=t._getIndex(r,u,s);if(null!==c&&0!==c){var l=r.start(c)+.1;if(!(l>n.video.duration)){var f=l-u,p=f<=a;f<o.BROWSER_GAP_TOLERANCE||p&&(!1!==i.useGapJump&&(n.video.currentTime=t.isSafari?l+.1:l),t.player&&t.player.emit("detectGap"),.08!==l&&n&&n.emit("log",{type:"oneevent",end_type:"gap",vid:n.config.vid,ext:{video_postion:Math.floor(1e3*l)}}))}}}}},(n=ci(n="onGapJump"))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,t}return e=o,n=[{key:"afterCreate",value:function(){var t=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(a.WAITING,this.onGapJump),this.on(a.PLAY,(function(){t.hasPlayed=!0})),this.on(a.SEEKING,(function(){t.seekingEventReceived=!0})))}},{key:"_getIndex",value:function(t,e,n){if(!t||!t.length)return null;if(1===t.length&&t.end(0)-t.start(0)<1e-6)return null;for(var i=this._getBuffered(t),r=null,o=0;o<i.length;o++)if(i[o].start>e&&(0===o||i[o-1].end-e<=n)){r=o;break}return r}},{key:"_getBuffered",value:function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}}],i=[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}],n&&ri(e.prototype,n),i&&ri(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function fi(t){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(t)}function pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,mi(i.key),i)}}function hi(t,e){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hi(t,e)}function di(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=vi(t);if(e){var r=vi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===fi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yi(t)}(this,n)}}function yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vi(t){return vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vi(t)}function gi(t,e,n){return(e=mi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mi(t){var e=function(t,e){if("object"!==fi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==fi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fi(e)?e:String(e)}li.BROWSER_GAP_TOLERANCE=.001;var bi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hi(t,e)}(o,t);var e,n,i,r=di(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return gi(yi(t=r.call.apply(r,[this].concat(n))),"onWaiting",(function(){var e=yi(t).config;t.jumpCnt>e.jumpCntMax||t.timer||!1===e.useWaitingTimeoutJump||(t.timer=setTimeout(t.onJump,1e3*e.waitingTime))})),gi(yi(t),"onJump",(function(){var e=yi(t),n=e.player,i=e.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>i.jumpCntMax||!1===i.useWaitingTimeoutJump||n.video.paused&&0!==n.video.currentTime&&t.hasPlayed)){t.jumpSize=i.jumpSize*(t.jumpCnt+1),t.jumpCnt===i.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var r=n.currentTime+t.jumpSize;r>n.video.duration||(t.jumpCnt++,n.currentTime=r)}})),t}return e=o,i=[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}],(n=[{key:"afterCreate",value:function(){var t=this,e=this.config,n=e.useWaitingTimeoutJump,i=e.jumpSize;!1!==n&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=i,this.on(a.WAITING,this.onWaiting),this.on([a.PLAYING,a.CANPLAY],(function(){clearTimeout(t.timer),t.timer=null,t.jumpSize=t.config.jumpSize})),this.on(a.PLAY,(function(){t.hasPlayed=!0})))}}])&&pi(e.prototype,n),i&&pi(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function wi(t){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wi(t)}function Pi(t){return function(t){if(Array.isArray(t))return ki(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ki(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ki(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ji(i.key),i)}}function _i(t,e){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_i(t,e)}function Oi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ci(t);if(e){var r=Ci(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===wi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ti(t)}(this,n)}}function Ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ci(t){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ci(t)}function xi(t,e,n){return(e=ji(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ji(t){var e=function(t,e){if("object"!==wi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==wi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===wi(e)?e:String(e)}var Ei="cdn",Ri=["cdn"],Di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_i(t,e)}(o,t);var e,n,i,r=Oi(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return xi(Ti(t=r.call.apply(r,[this].concat(n))),"getSpeed",(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Ei;if(!t.speedListCache||!t.speedListCache[e])return 0;if(t.speedListCache[e].length<=0)return 0;var n=0;return t.speedListCache[e].map((function(t){n+=t})),Math.floor(n/t.speedListCache[e].length)})),xi(Ti(t),"startTimer",(function(){p.ZP.isMSE(t.player.video)||(t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))})),xi(Ti(t),"initSpeedList",(function(){t.speedListCache={},Ri.forEach((function(e){t.speedListCache[e]=[]}))})),xi(Ti(t),"_onRealSpeedChange",(function(e){e.speed&&t.appendList(e.speed,e.type||Ei)})),xi(Ti(t),"testSpeed",(function(){if(clearTimeout(t.timer),t.timer=null,t.player&&t.config.openSpeed){var e=t.config,n=e.url,i=e.loadSize,r=e.testCnt,o=e.testTimeStep,a=n+(n.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=r)){t.cnt++;try{var s=(new Date).getTime(),u=null,c=new XMLHttpRequest;t.xhr=c,c.open("GET",a);var l={},f=Math.floor(10*Math.random());l.Range="bytes="+f+"-"+(i+f),l&&Object.keys(l).forEach((function(t){c.setRequestHeader(t,l[t])})),c.onreadystatechange=function(){if(4===c.readyState){t.xhr=null,u=(new Date).getTime();var e=c.getResponseHeader("Content-Length")/1024*8,n=Math.round(1e3*e/(u-s));t.appendList(n),t.timer=setTimeout(t.testSpeed,o)}},c.send()}catch(p){}}}})),xi(Ti(t),"appendList",(function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ei;if(t.speedListCache&&t.speedListCache[n]){var i=t.config.saveSpeedMax;t.speedListCache[n].length>=i&&t.speedListCache[n].shift(),t.speedListCache[n].push(e);var r=Ti(t).player;r&&(n===Ei?r.realTimeSpeed=e:r[t.getSpeedName("realTime",n)]=e),t.updateSpeed(n)}})),xi(Ti(t),"updateSpeed",(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Ei,n=t.getSpeed(e),i=Ti(t).player;if(i)if(e===Ei)i.avgSpeed&&n===i.avgSpeed||(i.avgSpeed=n,i.emit(a.DOWNLOAD_SPEED_CHANGE,{speed:n,realTimeSpeed:i.realTimeSpeed}));else{var r=t.getSpeedName("avg",e);i[r]&&n===i[r]||(i[r]=n,i.emit(a.DOWNLOAD_SPEED_CHANGE,{speed:n,realTimeSpeed:i.realTimeSpeed}))}})),t}return e=o,i=[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}],(n=[{key:"afterCreate",value:function(){var t=this.config,e=t.openSpeed,n=t.addSpeedTypeList,i=t.testCnt;(null==n?void 0:n.length)>0&&Ri.push.apply(Ri,Pi(n)),this.initSpeedList(),e&&(this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,i>0&&this.on([a.LOADED_DATA,a.REPLAY],this.startTimer))}},{key:"getSpeedName",value:function(t,e){return t+"Speed"+e.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(t){if(this.config.openSpeed=t,!t&&this.timer)return clearTimeout(this.timer),void(this.timer=null);if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var t=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([a.LOADED_DATA,a.REPLAY],this.startTimer),Ri.forEach((function(e){t.speedListCache&&t.speedListCache[e]&&(t.speedListCache[e]=[])})),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}])&&Si(e.prototype,n),i&&Si(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function Li(t){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(t)}function Ii(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Li(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Li(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Li(o)?o:String(o)),i)}var r,o}function Ai(t,e){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ai(t,e)}function Mi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Zi(t);if(e){var r=Zi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Zi(t){return Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zi(t)}var Ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ai(t,e)}(o,t);var e,n,i,r=Mi(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.config;this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],n.disabled||e.video.getVideoPlaybackQuality&&(this.on(a.PLAY,(function(){t._startTick()})),this.on(a.PAUSE,(function(){t._stopTick()})),this.on(a.ENDED,(function(){t._stopTick()})),this.on(a.EMPTIED,(function(){t._stopTick()})))}},{key:"_startTick",value:function(){var t=this;this._stopTick(),this._timer=setTimeout((function(){t._checkDecodeFPS(),t._startTick()}),this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(t,e,n,i){var r=this.player.video,o=document.hidden,s=r.paused;if("boolean"==typeof o&&!o&&!s){for(var u=r.currentTime,c=r.buffered,l=!1,f=[],p=0;p<c.length;p++){var h=c.start(p),d=c.end(p);if(f.push({start:h,end:d}),h<=u&&u<=d-1){l=!0;break}}4===r.readyState&&l&&(this._currentStuckCount>this.config.stuckCount?(this.emit(a.FPS_STUCK,this._payload),this._reset()):t<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:f,currentTime:r.currentTime,curDecodedFrames:t,totalVideoFrames:e,droppedVideoFrames:n,checkInterval:i})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.video){var t=this.player.video.getVideoPlaybackQuality(),e=t.totalVideoFrames,n=t.droppedVideoFrames,i=performance.now();if(e&&this._lastCheckPoint){var r=e-this._lastDecodedFrames,o=i-this._lastCheckPoint;this._checkStuck(r,e,n,o)}this._lastDecodedFrames=e,this._lastCheckPoint=i}}},{key:"destroy",value:function(){this._stopTick()}}],i=[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}],n&&Ii(e.prototype,n),i&&Ii(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.ZP);function Bi(t){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function Fi(t){return function(t){if(Array.isArray(t))return Hi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ui(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Bi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==Bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Bi(o)?o:String(o)),i)}var r,o}function Gi(t,e,n){return e&&Ui(t.prototype,e),n&&Ui(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}c.Z.use(Gn.Z);var Wi=Gi((function t(e,n){var i,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=n&&"mobile"===n.isMobileSimulateMode,s=n.isLive?[]:[Ut.Z,Hn,xn,zt.Z],u=[].concat(s,[Gt.Z,Wt.Z,Vt.Z,ne,He,Xe,de,Pe,Yt.Z,Xt.Z]),c=[F,V,rt,Ht.Z,ot.Z,un,yn,In,at.Z];this.plugins=[L,ni,bi,li].concat(Fi(u),c);var l=a?"mobile":f.Z.device;switch(l){case"pc":(i=this.plugins).push.apply(i,[Ft.Z,st.Z,en,Di,Ni]);break;case"mobile":(r=this.plugins).push.apply(r,[Bt]);break;default:(o=this.plugins).push.apply(o,[Ft.Z,st.Z,en])}(f.Z.os.isIpad||"pc"===l)&&this.plugins.push(Un.Z),f.Z.os.isIpad&&this.plugins.push(st.Z),this.ignores=[],this.i18n=[]}));function zi(t){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(t)}function Yi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,qi(i.key),i)}}function Vi(t,e){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vi(t,e)}function Xi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ki(t);if(e){var r=Ki(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===zi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Ki(t){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ki(t)}function Ji(t,e,n){return(e=qi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qi(t){var e=function(t,e){if("object"!==zi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==zi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===zi(e)?e:String(e)}var Qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vi(t,e)}(o,t);var e,n,i,r=Xi(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n&&Yi(e.prototype,n),i&&Yi(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(i.ZP);Ji(Qi,"defaultPreset",Wi),Ji(Qi,"Util",p.ZP),Ji(Qi,"Sniffer",f.Z),Ji(Qi,"Errors",l.ZP),Ji(Qi,"Events",a),Ji(Qi,"Plugin",r.ZP),Ji(Qi,"BasePlugin",o.ZP),Ji(Qi,"I18N",c.Z),Ji(Qi,"STATE_CLASS",s.Z),Ji(Qi,"PAUSE_TYPES",u.Im),Ji(Qi,"BUFFER_CONTROL_TYPES",u._3);var $i=Qi},76933:function(t,e,n){"use strict";n.d(e,{Z:function(){return S}});var i=n(97702),r=n(50497),o=n(61508),a=n(44487);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===s(o)?o:String(o)),i)}var r,o}var c=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fragments=e.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=e.actionCallback,this.fragConfig={fragFocusClass:e.fragFocusClass||"inner-focus-point",fragAutoFocus:!!e.fragAutoFocus,fragClass:e.fragClass||""},this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}var e,n,r;return e=t,n=[{key:"updateDuration",value:function(t){var e=this;this.duration=t;var n=0,i=this.fragments;this.fragments=i.map((function(t){return t.start=parseInt(n,10),t.end=parseInt(n+t.percent*e.duration,10),t.duration=parseInt(t.percent*e.duration,10),n+=t.percent*e.duration,t}))}},{key:"updateProgress",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"played",e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments;if(!(n.length<1)){var r=e.newIndex,o=e.curIndex,a=e.millisecond;r!==o&&n.map((function(e,n){n<r?e[t].style.width="100%":n>r&&(e[t].style.width=0)}));var s=i[r],u=0===a?0:(a-s.start)/s.duration;n[r][t].style.width=u<0?0:"".concat(100*u,"%")}}},{key:"updateFocus",value:function(t){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2))if(t){var e=this.findIndex(1e3*t.currentTime,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var n={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(n)}}else if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var i={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(i),this.focusIndex=-1}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:undefined;if(!this.duration||parseInt(1e3*e,10)!==this.duration){if(!e&&0!==e)return;this.updateDuration(parseInt(1e3*e,10))}var n=this.playedIndex,r=this.cachedIndex;if("Undefined"!==i.ZP.typeOf(t.played)){var o=this.findIndex(1e3*t.played,n);if(o<0)return;this.updateProgress("played",{newIndex:o,curIndex:n,millisecond:parseInt(1e3*t.played,10)}),this.playedIndex=o}if("Undefined"!==i.ZP.typeOf(t.cached)){var a=this.findIndex(1e3*t.cached,r);if(a<0)return;this.updateProgress("cached",{newIndex:a,curIndex:r,millisecond:parseInt(1e3*t.cached,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(t,e){var n=this.fragments;if(!n||0===n.length)return-1;if(1===n.length)return 0;if(e>-1&&e<n.length&&t>n[e].start&&t<n[e].end)return e;if(t>n[n.length-1].start)return n.length-1;for(var i=0;i<n.length;i++)if(t>n[i].start&&t<=n[i].end){e=i;break}return e}},{key:"findHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)if(i.ZP.hasClass(t[e],this.fragConfig.fragFocusClass))return{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"findFragment",value:function(t){var e=this.root.children;return t<0||t>=e.length?null:{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)i.ZP.removeClass(t[e],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(t){var e=this.root.children;if(t<e.length)return i.ZP.addClass(e[t],this.fragConfig.fragFocusClass),{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(t){var e=this;if(Object.keys(this.fragConfig).forEach((function(n){t[n]!==undefined&&(e.fragConfig[n]=t[n])})),t.fragments){if(this.fragments=0===t.fragments.length?[{percent:1}]:t.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var n=this.root.children;n.length>0;)this.root.removeChild(n[0]);this.render()}}},{key:"render",value:function(){var t=this,e=this.style.progressColor;if(this.root||(this.root=i.ZP.createDom("xg-inners","",{},"progress-list")),this.fragments){var n=this.fragConfig,r=n.fragClass,o=n.fragFocusClass;this.progressList=this.fragments.map((function(n){var a=i.ZP.createDom("xg-inner","",{style:e?"background:".concat(e,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?o:""," xgplayer-progress-inner ").concat(r));return t.root.appendChild(a),c.forEach((function(e){a.appendChild(i.ZP.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))})),{cached:a.children[0],played:a.children[1]}}))}return this.root}}],n&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,w(i.key),i)}}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=m(t);if(e){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,n)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function b(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}var P={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(c,t);var e,n,s,u=v(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),b(g(e=u.call(this,t)),"onMoveOnly",(function(t,n){var r=g(e),o=r.pos,a=r.config,s=r.player,u=n;if(t){i.ZP.event(t);var c=i.ZP.getEventPos(t,s.zoom),l=90===s.rotateDeg?c.clientY:c.clientX;if(o.moving&&Math.abs(o.x-l)<a.miniMoveStep)return;o.moving=!0,o.x=l,u=e.computeTime(t,l)}e.triggerCallbacks("dragmove",u,t),e._updateInnerFocus(u)})),b(g(e),"onBodyClick",(function(t){t.preventDefault(),t.stopPropagation()})),b(g(e),"_mouseDownHandler",(function(t,n){e._state.time=n.currentTime,e.updateWidth(n.currentTime,n.percent,0),e._updateInnerFocus(n)})),b(g(e),"_mouseUpHandler",(function(t,n){g(e).pos.moving&&e.updateWidth(n.currentTime,n.percent,2)})),b(g(e),"_mouseMoveHandler",(function(t,n){var i=g(e),r=i._state,o=i.pos,a=i.config,s=i.player;r.time<n.currentTime?n.forward=!0:n.forward=!1,r.time=n.currentTime,o.isDown&&!o.moving&&(o.moving=!0,a.isPauseMoving&&s.pause(),e.triggerCallbacks("dragstart",n,t),e.emitUserAction("drag","dragstart",n)),e.updateWidth(n.currentTime,n.percent,1),e.triggerCallbacks("dragmove",n,t),e._updateInnerFocus(n)})),b(g(e),"onMouseDown",(function(t){var n=g(e),r=n._state,o=n.player,a=n.pos,s=n.config,u=n.playerConfig,c=i.ZP.getEventPos(t,o.zoom),l=90===o.rotateDeg?c.clientY:c.clientX;if(!(o.isMini||s.closeMoveSeek||!u.allowSeekAfterEnded&&o.ended)){t.stopPropagation(),e.focus(),i.ZP.checkIsFunction(u.disableSwipeHandler)&&u.disableSwipeHandler(),i.ZP.checkIsFunction(s.onMoveStart)&&s.onMoveStart(),i.ZP.event(t),a.x=l,a.isDown=!0,a.moving=!1,r.prePlayTime=o.currentTime,o.focus({autoHide:!1}),e.isProgressMoving=!0,i.ZP.addClass(e.progressBtn,"active");var f=e.computeTime(t,l);return f.prePlayTime=r.prePlayTime,e._mouseDownHandlerHook(t,f),"touchstart"===t.type?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1),o.root.addEventListener("click",e.onBodyClick,!1)),!0}})),b(g(e),"onMouseUp",(function(t){var n=g(e),r=n.player,o=n.config,a=n.pos,s=n.playerConfig,u=n._state;t.stopPropagation(),t.preventDefault(),i.ZP.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),i.ZP.checkIsFunction(o.onMoveEnd)&&o.onMoveEnd(),i.ZP.event(t),i.ZP.removeClass(e.progressBtn,"active");var c=e.computeTime(t,a.x);c.prePlayTime=u.prePlayTime,a.moving?(e.triggerCallbacks("dragend",c,t),e.emitUserAction("drag","dragend",c)):(e.triggerCallbacks("click",c,t),e.emitUserAction("click","click",c)),e._mouseUpHandlerHook(t,c),a.moving=!1,a.isDown=!1,a.x=0,a.y=0,u.prePlayTime=0,u.time=0,"touchend"===t.type?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),r.root.removeEventListener("click",e.onBodyClick,!1),a.isEnter?"mobile"!==s.isMobileSimulateMode&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(t)),i.ZP.setTimeout(g(e),(function(){e.resetSeekState()}),10),r.focus()})),b(g(e),"onMouseMove",(function(t){var n=g(e),r=n._state,o=n.pos,a=n.player,s=n.config;i.ZP.checkTouchSupport()&&t.preventDefault(),i.ZP.event(t);var u=i.ZP.getEventPos(t,a.zoom),c=90===a.rotateDeg?u.clientY:u.clientX,l=Math.abs(o.x-c);if(!(o.moving&&l<s.miniMoveStep||!o.moving&&l<s.miniStartStep)){o.x=c;var f=e.computeTime(t,c);f.prePlayTime=r.prePlayTime,e._mouseMoveHandlerHook(t,f)}})),b(g(e),"onMouseOut",(function(t){e.triggerCallbacks("mouseout",null,t)})),b(g(e),"onMouseOver",(function(t){e.triggerCallbacks("mouseover",null,t)})),b(g(e),"onMouseEnter",(function(t){var n=g(e),r=n.player,o=n.pos;if(!(o.isDown||o.isEnter||r.isMini||!r.config.allowSeekAfterEnded&&r.ended)){o.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),i.ZP.event(t);var a=i.ZP.getEventPos(t,r.zoom),s=90===r.rotateDeg?a.clientY:a.clientX,u=e.computeTime(t,s);e.triggerCallbacks("mouseenter",u,t),e.focus()}})),b(g(e),"onMouseLeave",(function(t){e.triggerCallbacks("mouseleave",null,t),e.unlock(),e._updateInnerFocus(null)})),b(g(e),"onVideoResize",(function(){var t=e.pos,n=t.x,i=t.isDown;if(t.isEnter&&!i){var r=e.computeTime(null,n);e.onMoveOnly(null,r)}})),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return e=c,n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var t=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0];this.useable=t}},{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.progress&&(t.config.disable=!t.player.config.progress)}},{key:"_initInner",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e&&0!==e.length||(e=[{percent:1}]);var i=h(h({fragments:e},n),{},{actionCallback:function(e){t.emitUserAction("fragment_focus","fragment_focus",e)}});this.innerList?this.innerList.reset(i):(this.innerList=new l(i),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(e){t[e]=t.innerList[e].bind(t.innerList)})))}},{key:"_updateInnerFocus",value:function(t){this.innerList&&this.innerList.updateFocus(t)}},{key:"afterCreate",value:function(){var t=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer");var e=this.config,n=e.fragFocusClass,i=e.fragAutoFocus,a=e.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:i,fragClass:a,style:this.playerConfig.commonStyle||{}}),"mobile"===r.Z.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(o.DURATION_CHANGE,(function(){t.onMouseLeave()})),this.on(o.TIME_UPDATE,(function(){t.onTimeupdate()})),this.on(o.SEEKED,(function(){t.onTimeupdate(),t.onCacheUpdate()})),this.on(o.PROGRESS,(function(){t.onCacheUpdate()})),this.on(o.ENDED,(function(){t.onCacheUpdate(!0),t.onTimeupdate(!0),t._state.now=0})),this.on(o.EMPTIED,(function(){t.onReset()})),this.on(o.VIDEO_RESIZE,(function(){t.onVideoResize()})),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(t){var e=this,n=null;Object.keys(t).forEach((function(i){e.config[i]=t[i],"fragments"===i&&(n=t[i])})),n&&this._initInner(n,t)}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,e=this.progressBtn;t&&("string"==typeof t?e.style.boxShadow=t:"object"===f(t)&&Object.keys(t).map((function(n){e.style[n]=t[n]})))}},{key:"triggerCallbacks",value:function(t,e,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===t)try{i.handler(e,n)}catch(r){}}))}},{key:"addCallBack",value:function(t,e){e&&"function"==typeof e&&this.__dragCallBacks.push({type:t,handler:e})}},{key:"removeCallBack",value:function(t,e){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===t&&n.handler===e&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"unlock",value:function(){var t=this.player,e=this.pos;e.isEnter=!1,t.isMini||(this.unbind("mousemove",this.onMoveOnly),e.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var t=this.player,e=t.controls,n=t.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),e&&(e.root&&e.root.addEventListener("touchmove",i.ZP.stopPropagation),e.center&&e.center.addEventListener("touchend",i.ZP.stopPropagation))),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),i.ZP.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),i.ZP.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(t,e,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=t>=r.duration?r.duration-i.endedDiff:Number(t).toFixed(1);this.updatePercent(e),this.updateTime(t),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(t,e){var n,i,r=this.player,o=this.root.getBoundingClientRect(),a=o.width,s=o.height,u=o.top,c=o.left,l=e;90===r.rotateDeg?(n=s,i=u):(n=a,i=c);var f=l-i,p=(f=f>n?n:f<0?0:f)/n;return{percent:p=p<0?0:p>1?1:p,currentTime:parseInt(p*this.duration*1e3,10)/1e3,offset:f,width:n,left:i,e:t}}},{key:"updateTime",value:function(t){var e=this.player,n=this.duration;t>n?t=n:t<0&&(t=0);var i=e.plugins.time;i&&i.updateTime(t)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var t=this.player.plugins.time;t&&t.resetActive()}},{key:"updatePercent",value:function(t,e){if(this.isProgressMoving=!0,!this.config.disable){t=t>1?1:t<0?0:t,this.progressBtn.style.left="".concat(100*t,"%"),this.innerList.update({played:t*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:t*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(t){var e=this.player,n=this._state,r=this.duration;if(!(e.isSeeking&&e.video.seeking||this.isProgressMoving)&&e.hasStart){if(n.now>-1){var o=parseInt(1e3*n.now,10)-parseInt(1e3*e.currentTime,10);if(0===n.direc&&o>300||1===n.direc&&o>-300)return void(n.now=-1);n.now=-1}var a=this.timeOffset+e.currentTime;a=i.ZP.adjustTimeByDuration(a,r,t),this.innerList.update({played:a},r),this.progressBtn.style.left="".concat(a/r*100,"%");var s=this.player.plugins.miniprogress;s&&s.update({played:a},r)}}},{key:"onCacheUpdate",value:function(t){var e=this.player,n=this.duration;if(e){var r=e.bufferedPoint.end;r=i.ZP.adjustTimeByDuration(r,n,t),this.innerList.update({cached:r},n);var o=this.player.plugins.miniprogress;o&&o.update({cached:r},n)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var t=this.player.plugins.miniprogress;t&&t.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var t=this.player,e=t.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;"touch"!==n&&"compatible"!==n||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),e&&(e.root&&e.root.removeEventListener("touchmove",i.ZP.stopPropagation),e.center&&e.center.removeEventListener("touchend",i.ZP.stopPropagation))),"mouse"!==n&&"compatible"!==n||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),t.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var t=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===t?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],s=[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:a.kd.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:P.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return P}}],n&&d(e.prototype,n),s&&d(e,s),Object.defineProperty(e,"prototype",{writable:!1}),c}(a.ZP),S=k},6478:function(t,e,n){"use strict";var i=n(61508),r=n(97702),o=n(44487);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===a(o)?o:String(o)),i)}var r,o}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},u.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,t);var e,n,a,p=l(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=p.call(this,t)).isActiving=!1,e}return e=h,a=[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:o.kd.CONTROLS_LEFT,index:2,disable:!1}}}],(n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var t=this,e=this.player.controls.config.mode;this.mode="flex"===e?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(i.DURATION_CHANGE,(function(){t.onTimeUpdate()})),this.on(i.TIME_UPDATE,(function(){t.onTimeUpdate()})),this.on(i.ENDED,(function(){t.onTimeUpdate(!0)})),this.on(i.EMPTIED,(function(){t.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&u(f(h.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(t){var e=this.player,n=this.config,i=this.duration;if(!n.disable&&!this.isActiving&&e.hasStart){var o=e.currentTime+this.timeOffset;o=r.ZP.adjustTimeByDuration(o,i,t),"flex"===this.mode?(this.centerCurDom.innerHTML=r.ZP.format(o),i!==Infinity&&i>0&&(this.centerDurDom.innerHTML=r.ZP.format(i))):(this.timeDom.innerHTML=r.ZP.format(o),i!==Infinity&&i>0&&(this.durationDom.innerHTML=r.ZP.format(i)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=r.ZP.format(0),this.centerDurDom.innerHTML=r.ZP.format(0)):(this.timeDom.innerHTML=r.ZP.format(0),this.durationDom.innerHTML=r.ZP.format(0))}},{key:"createCenterTime",value:function(){var t=this.player;if(t.controls&&t.controls.center){var e=t.controls.center;this.centerCurDom=r.ZP.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=r.ZP.createDom("xg-icon","00:00",{},"xgplayer-time right"),e.children.length>0?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var t=this.config;this.duration===Infinity||this.playerConfig.isLive?(r.ZP.hide(this.durationDom),r.ZP.hide(this.timeDom),r.ZP.hide(this.find(".time-separator")),r.ZP.show(this.find(".time-live-tag"))):r.ZP.hide(this.find(".time-live-tag")),t.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(t){t?(r.ZP.hide(this.durationDom),r.ZP.hide(this.timeDom),r.ZP.hide(this.find(".time-separator")),r.ZP.show(this.find(".time-live-tag"))):(r.ZP.hide(this.find(".time-live-tag")),r.ZP.show(this.find(".time-separator")),r.ZP.show(this.durationDom),r.ZP.show(this.timeDom))}},{key:"updateTime",value:function(t){this.isActiving=!0,!t&&0!==t||t>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=r.ZP.format(t):this.centerCurDom.innerHTML=r.ZP.format(t))}},{key:"resetActive",value:function(){var t=this,e=this.player,n=function(){t.isActiving=!1};this.off(i.SEEKED,n),e.isSeeking?this.once(i.SEEKED,n):this.isActiving=!1}},{key:"destroy",value:function(){var t=this.player.controls.center;this.centerCurDom&&t.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&t.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}])&&s(e.prototype,n),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}(o.ZP);e.Z=p}}]);