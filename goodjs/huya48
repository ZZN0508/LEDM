(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[335],{1303:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var i=n(382),s=n(4),c=n.n(s),o=n(17),a=n.n(o),r=n(6),l=(n(204),function(){var e=Object(s.useState)({headlineList:[],hotList:[],newsList:[]}),t=e[0],n=e[1],o=Object(s.useCallback)((function(){Object(r.reportEvent)({eid:"click/push/indexnews/allnews",eid_desc:"点击/推荐/首页新闻/全部新闻"}),window.open("https://blog.huya.com")}),[]),a=Object(s.useCallback)((function(e){var t=e.link,n=e.eid,i=e.eid_desc;Object(r.reportEvent)({eid:n,eid_desc:i}),t&&window.open(t)}),[]);return Object(s.useEffect)((function(){Object(i.getHomeBlogRecommend)().then((function(e){var t=e,i=t.vHeadline,s=t.vNews,c=t.vHot;function o(e){var t=e.iId,n=e.sTypeName,i=e.sTitle,s=e.sLink,c=e.iCreateTime,o=new Date(1e3*c);return{id:t,typeName:n,title:i,link:s,createTime:(o.getMonth()+1<10?"0":"")+(o.getMonth()+1)+"/"+(o.getDate()<10?"0":"")+o.getDate()}}var a={headlineList:i.map(o),hotList:c.map(o),newsList:s.map(o)};n(a)}))}),[]),Object(s.useEffect)((function(){var e=[];window.IntersectionObserver&&t.newsList.length>0&&document.querySelectorAll(".news-item").forEach((function(n,i){e[i]=new IntersectionObserver((function(s){var c=s[0].intersectionRatio;c>=.25&&(e[i].unobserve(n),console.log("IntersectionObserver: ".concat(c)),Object(r.reportEvent)({eid:"pageview/position",position:"push/indexnews/words/"+(i+1),resourceid:t.newsList[i].id}))}),{root:null,threshold:[.25]}),e[i].observe(n)}));var n=[];window.IntersectionObserver&&t.hotList.length>0&&document.querySelectorAll(".j_newsTabItem").forEach((function(e,i){n[i]=new IntersectionObserver((function(s){var c=s[0].intersectionRatio;c>=.25&&(n[i].unobserve(e),console.log("IntersectionObserver: ".concat(c)),Object(r.reportEvent)({eid:"pageview/position",position:"push/indexnews/wordtab"+(i+1),resourceid:t.hotList[i].id}))}),{root:null,threshold:[.25]}),n[i].observe(e)}));var i,s=document.querySelector(".j_newsTop");if(window.IntersectionObserver&&t.headlineList.length>0&&s){(i=new IntersectionObserver((function(e){e[0].intersectionRatio>=.25&&(i.unobserve(s),Object(r.reportEvent)({eid:"pageview/position",position:"push/indexnews/topnews",resourceid:t.headlineList[0].id}))}),{root:null,threshold:[.25]})).observe(s)}return function(){i&&i.disconnect(),e.forEach((function(e){e&&e.disconnect()})),n.forEach((function(e){e&&e.disconnect()}))}}),[t]),c.a.createElement("div",{className:"news-box"},c.a.createElement("a",{onClick:o,className:"news-more clickstat"}),t.headlineList.length>0?c.a.createElement("h2",{className:"news-title ellipsis"},c.a.createElement("a",{className:"J_g_resource j_newsTop clickstat",onClick:function(){a({link:t.headlineList[0].link,eid:"click/push/indexnews/topnews",eid_desc:"点击/推荐/首页新闻/首条新闻"})},title:HUYA_UTIL.unescape(HUYA_UTIL.unescape(t.headlineList[0].title))},HUYA_UTIL.unescape(HUYA_UTIL.unescape(t.headlineList[0].title)))):null,c.a.createElement("div",{className:"news-main"},t.newsList.length>0?c.a.createElement("ul",{className:"news-list"},t.newsList.slice(0,7).map((function(e,t){return c.a.createElement("li",{className:"news-item",key:t},c.a.createElement("a",{onClick:function(){a({link:"https://blog.huya.com/".concat(e.link),eid:"click/push/indexnews/words".concat(t+1),eid_desc:"点击/推荐/首页新闻/文字新闻".concat(t+1)})},className:"J_g_resource j_newsItem news-link clickstat ellipsis",title:HUYA_UTIL.unescape(HUYA_UTIL.unescape(e.title))},HUYA_UTIL.unescape(HUYA_UTIL.unescape(e.title))),c.a.createElement("span",{className:"news-time"},e.createTime))}))):null),t.hotList.length>0?c.a.createElement("div",{className:"hotTag"},t.hotList.map((function(e,t){return c.a.createElement("a",{key:t,onClick:function(){a({link:e.link,eid:"click/push/indexnews/wordtab".concat(t+1),eid_desc:"点击/推荐/首页新闻/文字新闻".concat(t+1)})},className:"link J_g_resource clickstat j_newsTabItem",title:HUYA_UTIL.unescape(HUYA_UTIL.unescape(e.title))},HUYA_UTIL.unescape(HUYA_UTIL.unescape(e.title)))}))):null)});function u(e){var t=document.querySelector(e)||document.createElement("div");a.a.render(c.a.createElement(l,null),t),t.classList.remove("wrap-news-loading")}}}]);