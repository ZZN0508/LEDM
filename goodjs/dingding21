!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.consola=void 0;var s=n(1),u=function(){},f=window.console;function l(e,t){t.__href__=window.location.href;var n={__logs__:[t]},r="https://".concat("bird",".").concat("cn-hangzhou.log.aliyuncs.com","/logstores/").concat(e,"/track");if(navigator&&navigator.sendBeacon)return navigator.sendBeacon("".concat(r,"?APIVersion=0.6.0"),(0,s.stringify)(n))}f||(f={log:u,info:u,warn:u,error:u}),t.consola={log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];"pre"===s.env&&f.info.apply(f,c(["[".concat("Bird","]")],e,!1))},clog:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];"pre"===s.env&&f.info.apply(f,c(["[".concat("Bird","]%c ").concat(e),t],n,!1))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f.info.apply(f,c(["[".concat("Bird","]")],e,!1))},warn:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.warn.apply(f,c(["[".concat("Bird","]"),e],t,!1))},error:function(e,t){f.error("[".concat("Bird","] ").concat(e),t),function(e,t,n){l("bird-warn",{errorCode:e,ua:navigator.userAgent,stack:(0,s.stringify)(t),message:(0,s.stringify)(n)})}(e,t&&t.stack||t,t&&t.message)},track:function(e,t){!function(e,t){t.os,t.url,t.resource;var n=a(t,["os","url","resource"]);l("bird-perf",{code:e,os:t.os,url:t.url,fmp:JSON.stringify(t.fmp),native_total_time:JSON.stringify(t.nativeTotalTime),ua:navigator.userAgent,resource:t.resource,uid:(0,s.stringify)(t.uid),info:(0,s.stringify)(n)})}(e,t)},custom:function(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return(n=(0,s.getConfigs)()).uid?[3,2]:[4,(0,s.getUid)()];case 1:o.sent(),n.uid=(0,s.getConfig)("uid"),o.label=2;case 2:return function(e,t){l(e,t)}(e,r({extra:JSON.stringify(n)},t)),[2]}}))}))}}},function(e,t,n){"use strict";var r=n(3),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.safetyCall=t.decode=t.ignoreByRule=t.checkAutoError=t.isType=t.serializeLog=t.bindEvent=t.toQueryParams=t.getCookie=t.genRandId=t.processError=t.getPlatform=t.pageAccessedByReload=t.isIOS=t.isAndroid=t.isWin=t.isMac=t.isDingTalkRuntime=t.stringify=t.ECustomLogType=t.ELogType=t.getConfigs=t.getConfig=t.compareVersion=t.compareCurrentVersion=t.setPerfData=t.setConfig=t.inAutoFmpWhitelist=t.inWhitelist=t.isCrawlerUa=t.getUid=t.checkSamplingWhiteList=t.getNativeOrgMap=t.checkBlank=t.getNativeInfoMap=t.executeWithIntervalSync=t.trackProperty=t.mergeConfig=t.env=t.win=t.checkSampling=void 0;var c=n(7),s=n(0),u=n(2),f=n(12),l=n(13),d=n(17),p=window.navigator.userAgent;t.checkSampling=function(){var e,n=(0,t.getPlatform)();if("prod"!==t.env)return!0;var r=(location.href.indexOf("/chatbox.html")>-1?.005:null===(e=null===t.win||void 0===t.win?void 0:t.win.__BIRD_CONFIG)||void 0===e?void 0:e.sampling)||u.DEFAULT_SAMPLING;return n===c.ENV_ENUM.mac&&(r=(r*=10)>=1?1:r),t.win.__BIRD&&t.win.__BIRD.setConfig&&t.win.__BIRD.setConfig({sampling:r}),!(Math.random()>=r)||(s.consola.log("bird.core sampling not satisfy [END]"),!1)},t.win=window||{},t.env=/(daily|pre)-/.test(location.hostname)||/bird_debug=1/.test(location.href)?"pre":"prod";t.mergeConfig=function(e){var n=o({},e);if(t.win.__BIRD_CONFIG)for(var r in t.win.__BIRD_CONFIG)"[object Object]"===Object.prototype.toString.call(t.win.__BIRD_CONFIG[r])?n[r]=Object.assign({},n[r],t.win.__BIRD_CONFIG[r]):n[r]=t.win.__BIRD_CONFIG[r];return n};t.trackProperty=function(e,n){try{var r={};"function"==typeof e&&e().then((function(e){r=e||{},Object.keys(r).forEach((function(e){var o;if(void 0!==e&&void 0!==r[e]){var i=r[e];t.win.__BIRD&&t.win.__BIRD.setConfig&&t.win.__BIRD.setConfig(((o={})[n||e]=i,o))}}))}))}catch(e){s.consola.error("core.api.trackProperty.error",e)}},t.executeWithIntervalSync=function(e,t,n,r){void 0===n&&(n=1e3),void 0===r&&(r=3);var o=0;!function i(){try{if(e(t))return}catch(e){}++o<r&&setTimeout(i,n)}()};t.getNativeInfoMap=function(e){var t={};try{var n=e||{},r=n.status,o=n.hit,i=void 0===o?{}:o,a=n.bizData,c=void 0===a?{}:a;if(r){var u=i.total,f=void 0===u?0:u,l=i.local,d=void 0===l?0:l,p=i.mainTotal,m=void 0===p?0:p,g=i.mainLocal,v=void 0===g?0:g,h=c.assetVersion;t.ctmEnabled=r;var _=0===f?0:parseInt(d)/parseInt(f),w=0===m?0:parseInt(v)/parseInt(m);t.ctmHitRate=Math.floor(100*_),t.ctmMainRate=Math.floor(100*w),t.ctmVersion=h,t.ctmTotal=f,t.ctmLocal=d}}catch(e){s.consola.error("core.api.getNativeInfoMap.error",e)}return t};t.checkBlank=function(){return!(document.body.innerText||"").replace(/\s/g,"")};t.getNativeOrgMap=function(e){var t={};try{var n=(e||{}).organizations;if(n){var r=n.map((function(e){return e.corpId})).slice(0,20);t.corpIds=r.join(",")}}catch(e){s.consola.error("core.api.getNativeOrgMap.error",e)}return t};t.checkSamplingWhiteList=function(){var e=(0,t.getConfig)("corpIds")||[];return!!u.innerWhiteList.some((function(t){return e.includes(t)}))};t.getUid=function(){return i(void 0,void 0,void 0,(function(){var e,n,r,o,i,c,s;return a(this,(function(a){switch(a.label){case 0:return(0,t.getConfig)("uid")?[2]:(0,t.inWhitelist)(location.href)&&t.isDingTalkRuntime?(e=(0,t.getPlatform)(),n=u.FetchUserInfoMethods[e],"function"!=typeof(r=l.default[n])?[3,2]:[4,r()]):[3,4];case 1:o=a.sent()||{},console.log("uid",o.dt_uid),o.dt_uid&&(0,t.setConfig)("uid",o.dt_uid),a.label=2;case 2:return i=u.FetchUserOrgMethods[e],"function"!=typeof(c=d.default[i])?[3,4]:[4,c()];case 3:(s=a.sent()||{}).corpIds&&((0,t.setConfig)("corpIds",s.corpIds),(0,t.setConfig)("fmp_others",Object.assign({},(0,t.getConfig)("fmp_others"),s))),a.label=4;case 4:return[2]}}))}))};t.isCrawlerUa=function(){return p.indexOf("spider")>-1};t.inWhitelist=function(e){return u.INNER_APP_LIST.some((function(t){return e.indexOf(t)>-1}))};t.inAutoFmpWhitelist=function(e){return u.AUTO_FMP_LIST.some((function(t){return e.indexOf(t)>-1}))};t.setConfig=function(e,n){var r;t.win.__BIRD&&t.win.__BIRD.setConfig&&t.win.__BIRD.setConfig(((r={})[e]=n,r))};t.setPerfData=function(e){t.win.__BIRD_perf_data=o(o({},t.win.__BIRD_perf_data),e)};function m(e,t){function n(e){return parseInt(e,10)||0}for(var r=e.split(".").map(n),o=t.split(".").map(n),i=0;i<r.length;i++){if(void 0===o[i])return!0;if(r[i]<o[i])return!1;if(r[i]>o[i])return!0}return!0}t.compareCurrentVersion=function(e){var t,n=window.navigator.userAgent,r=n.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);return r||(r=n.match(/DingTalk\/([a-zA-Z0-9.-]+)/)||n.match(/DingTalk\(([a-zA-Z0-9\.-]+)\)/)),r&&r[1]&&(t=r[1]),m(t,e)},t.compareVersion=m;t.getConfig=function(e){return t.win.__BIRD_CONFIG&&t.win.__BIRD_CONFIG[e]};t.getConfigs=function(){return t.win.__BIRD_CONFIG},function(e){e.PV="pv",e.PERF="perf",e.ERROR="error",e.RESOURCE="resource_error",e.API="api",e.CUSTOM="custom",e.EVENT="event",e.SPEED="speed",e.CALC="calc"}(t.ELogType||(t.ELogType={})),function(e){e.LEAVE="leave",e.PERF_ADVANCED="perf_advanced",e.BLANK="blank",e.LONG_TASK="long_task"}(t.ECustomLogType||(t.ECustomLogType={}));t.stringify=function(e,t){var n=(t||{}).removeNode,o=void 0!==n&&n,i=[],a=JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==i.indexOf(t))return;if(o&&t.nodeType)return;i.push(t)}return t}));return i=null,a},t.isDingTalkRuntime=/DingTalk/i.test(p),t.isMac=p.indexOf("Macintosh; Intel Mac OS")>-1,t.isWin=-1!==p.indexOf("Win"),t.isAndroid=Boolean(p.match(/android/i)),t.isIOS=Boolean(p.match(/(iphone|ipod|ipad)/i));t.pageAccessedByReload=function(){return!t.win.performance.getEntriesByType||(t.win.performance.getEntriesByType("navigation")||[]).map((function(e){return e.type})).includes("reload")};t.getPlatform=function(){return t.isIOS?c.ENV_ENUM.ios:t.isWin?c.ENV_ENUM.win:t.isAndroid?c.ENV_ENUM.android:t.isMac?c.ENV_ENUM.mac:c.ENV_ENUM.other};t.processError=function(e){return"undefined"!=typeof PromiseRejectionEvent&&e instanceof PromiseRejectionEvent?(0,f.processUnhandleDrejection)(e)||{}:(0,f.processCommonError)(e)||{}};t.genRandId=function(){return function(e){var t=e&&e.length||0,n=0,r=0,o=0,i=0,a=0;if(t>0){for(r^=65535&e.charCodeAt(i++),t-=o=t+o&3;n=5*(n=(n^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|n>>>19)+3864292196&4294967295,!(i>=t);)r=65535&e.charCodeAt(i++)^(65535&e.charCodeAt(i++))<<8^(65535&e.charCodeAt(i++))<<16,r^=(255&(a=e.charCodeAt(i++)))<<24^(65280&a)>>8;switch(r=0,o){case 3:r^=(65535&e.charCodeAt(i+2))<<16;break;case 2:r^=(65535&e.charCodeAt(i+1))<<8;break;case 1:r^=65535&e.charCodeAt(i)}return r>0&&(n^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295),n^=t,n=51819*(n^=n>>>16)+2246770688*(65535&n)&4294967295,n=44597*(n^=n>>>13)+3266445312*(65535&n)&4294967295,(n^=n>>>16)>>>0}return""}("".concat(location.href.split("?")[0]).concat(String("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))).concat((new Date).getTime())).toString()};t.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")));return t?unescape(t[2]):null};t.toQueryParams=function(e){var t=[];for(var n in e)n&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.join("&")},t.bindEvent=function(e,t,n,r,o){if(e.addEventListener){var i=function i(a){r&&e.removeEventListener(t,i,o),n.call(this,a)};return o=o||!1,e.addEventListener(t,i,o),function(){e.removeEventListener(t,i,o)}}if(e.attachEvent){var a=function o(i){r&&e.detachEvent("on"+t,o),n.call(this,i)};return e.attachEvent("on"+t,a),function(){e.detachEvent("on"+t,a)}}};function g(e,t){var n=Object.prototype.toString.call(e).substring(8).replace("]","");return t?n===t:n}function v(e,t,n){if("function"!=typeof e)return n;try{return e.apply(this,t)}catch(e){return n}}t.serializeLog=function(e,t){var n={};for(var r in t)e[r]?n[e[r]]=t[r]||"":n[r]=t[r]||"";return n},t.isType=g,t.checkAutoError=function(e){return!(!e||!e.message)&&!/failed[\w\s]+fetch/i.test(e.message)},t.ignoreByRule=function(e,t,n){if(!e||!n)return!1;if(("String"===g(n)||n.source||"Function"===g(n))&&(n=[n]),"Array"!==g(n))return console.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var r,o=[],i=0,a=n.length;i<a;i++)if("String"===g(r=n[i]))o.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(r&&r.source)o.push(r.source);else if(r&&"Function"===g(r)&&!0===v(r,[e,t],!1))return!0;var c=new RegExp(o.join("|"),"i");return!!(o.length&&c.test&&c.test(e))},t.decode=function(e){try{e=decodeURIComponent(e)}catch(e){}return e},t.safetyCall=v},function(e,t,n){"use strict";var r,o,i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.INNER_APP_LIST=t.AUTO_FMP_LIST=t.LOG_MAP=t.LOG_MAP_ERROR=t.LOG_MAP_CUSTOM=t.innerWhiteList=t.LOG_MAP_STRINGIFY=t.LOG_MAP_BLANK=t.FMP_KEYS_FIRST=t.FMP_KEYS_LOADED=t.FMP_KEYS=t.FMP_KEYS_OTHERS=t.DEFAULT_SAMPLING_RESOURCE=t.DEFAULT_SAMPLING=t.BIRD_VERSION=t.LOG_COMMON_PID=t.FetchUserOrgMethods=t.FetchUserInfoMethods=t.FetchNativeInfoMethods=t.FetchNativeTimeMethods=void 0;var c=n(7);t.FetchNativeTimeMethods=((r={})[c.ENV_ENUM.ios]="fetchH5IosNativeTime",r[c.ENV_ENUM.android]="fetchH5AndroidNativeTime",r[c.ENV_ENUM.mac]="fetchH5PcNativeTime",r[c.ENV_ENUM.win]="fetchH5PcNativeTime",r),t.FetchNativeInfoMethods=((o={})[c.ENV_ENUM.ios]="fetchH5IosResourceInfo",o[c.ENV_ENUM.android]="fetchH5AndroidResourceInfo",o[c.ENV_ENUM.mac]="fetchH5PcResourceInfo",o[c.ENV_ENUM.win]="fetchH5PcResourceInfo",o),t.FetchUserInfoMethods=((i={})[c.ENV_ENUM.ios]="fetchH5IosUserInfo",i[c.ENV_ENUM.android]="fetchH5AndroidUserInfo",i[c.ENV_ENUM.mac]="fetchH5PcUserInfo",i[c.ENV_ENUM.win]="fetchH5PcUserInfo",i),t.FetchUserOrgMethods=((a={})[c.ENV_ENUM.ios]="fetchH5IosUserOrg",a[c.ENV_ENUM.android]="fetchH5AndroidUserOrg",a[c.ENV_ENUM.mac]="fetchH5PcUserOrg",a[c.ENV_ENUM.win]="fetchH5PcUserOrg",a),t.LOG_COMMON_PID="ding-lighting-perf",t.BIRD_VERSION="0.0.59",t.DEFAULT_SAMPLING=.1,t.DEFAULT_SAMPLING_RESOURCE=.05,t.FMP_KEYS_OTHERS=["fmp_t3","fmp_t4","fmp_t5","fmp_t6","fmp_t7","fmp_t8","fmp_t9","fmp_t10","fmp_t11","fmp_t12","fmp_t13","fmp_t14","fmp_t15"],t.FMP_KEYS=["FMP","fmp_t0","fmp_t1","fmp_t2","fmp-custom","fmp-every"].concat(t.FMP_KEYS_OTHERS),t.FMP_KEYS_LOADED=["fmp-end"],t.FMP_KEYS_FIRST=["fmp-custom","FMP","fmp-every"],t.LOG_MAP_BLANK=["msg","ctmEnabled","ctmVersion"],t.LOG_MAP_STRINGIFY=["fmp_others"],t.innerWhiteList=["dingd8e1123006514592","ding46b6100f4b850c67","ding497e6a00d62c249c4ac5d6980864d335"],t.LOG_MAP_CUSTOM={fmp:"p3",ctmHitRate:"c7",ctmEnabled:"c6",fmp_t0:"c5",fmp_t1:"c4",fmp_t2:"c3",fmp_others:"c1",ctmVersion:"c2",msg:"msg"},t.LOG_MAP_ERROR={file:"p1",lineno:"p2",colno:"p3",stack:"p4",errType:"p5",errCode:"p6",stack1:"c1",stack2:"c2",stack3:"c3",msg:"msg"},t.LOG_MAP={fp:"p1",fcp:"p2",fmp:"p3",startTime:"p4",unloadEventStart:"p5",unloadEventEnd:"p6",redirectStart:"p7",redirectEnd:"p8",fetchStart:"p9",domainLookupStart:"p10",domainLookupEnd:"p11",connectStart:"p12",secureConnectionStart:"p13",connectEnd:"p14",requestStart:"p15",responseStart:"p16",responseEnd:"p17",domInteractive:"p18",domContentLoadedEventStart:"p19",domContentLoadedEventEnd:"p20",domComplete:"p21",loadEventStart:"p22",loadEventEnd:"p23",fmpGap:"p24",resource:"p25",nativeTotalTime:"c10",beforeNavigateTime:"c9",ctmMainRate:"c8",ctmHitRate:"c7",ctmEnabled:"c6",fmp_t0:"c5",fmp_t1:"c4",fmp_t2:"c3",fmp_others:"c1",ctmVersion:"c2",msg:"msg"},t.AUTO_FMP_LIST=["file://","app://","cmpkg.dingtalk.com","n.dingtalk.com/dingding/","n.dingtalk.com/dingtalk-frontend/","www.dingtalk.com","login.dingtalk.com","oa.dingtalk.com"],t.INNER_APP_LIST=[".dingtalk.com","app://","file://","teambition.alibaba-inc.com","webmail.alibaba-inc.com"]},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h5IosBridgeInit=void 0;var r,o=n(0);t.h5IosBridgeInit=function(){return r||(r=new Promise((function(e,t){if("undefined"!=typeof WebViewJavascriptBridge){try{WebViewJavascriptBridge.init((function(e,t){}))}catch(e){return o.consola.error("core.ios.bridge.error",e),t()}return e({})}document.addEventListener("WebViewJavascriptBridgeReady",(function(){if("undefined"==typeof WebViewJavascriptBridge)return t();try{WebViewJavascriptBridge.init((function(e,t){}))}catch(e){return o.consola.error("core.ios.bridge.error",e),t()}return e({})}),!1)}))),r};t.default=function(e,n){return r||(r=(0,t.h5IosBridgeInit)()),r.then((function(){var t=Object.assign({},n);return new Promise((function(n,r){if(!0===t.watch){var i=t.onSuccess;delete t.onSuccess,"undefined"!=typeof WebViewJavascriptBridge&&WebViewJavascriptBridge.registerHandler(e,(function(e,t){"function"==typeof i&&i.call(null,e),t&&t({errorCode:"0",errorMessage:"success"})}))}void 0!==window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler(e,Object.assign({},t),(function(e){var i=e||{};"0"===i.errorCode?("function"==typeof t.onSuccess&&t.onSuccess.call(null,i.result),n(i.result)):("-1"===i.errorCode&&"function"==typeof t.onCancel?t.onCancel.call(null,i.result,i.errorCode):"function"==typeof t.onFail&&t.onFail.call(null,i.result,i.errorCode),o.consola.error("core.ios.bridge.error"),r(i.result))}))}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h5AndroidbridgeInit=void 0;var r,o=n(0);t.h5AndroidbridgeInit=function(){return r||(r=new Promise((function(e,t){var n=function(){try{window.WebViewJavascriptBridgeAndroid=window.nuva&&window.nuva.require(),e({})}catch(e){o.consola.error("core.android.bridge.error",e),t(e)}};window.nuva&&(void 0===window.nuva.isReady||window.nuva.isReady)?n():(document.addEventListener("runtimeready",(function(){n()}),!1),document.addEventListener("runtimefailed",(function(e){var n=e&&e.detail||{errorCode:"2",errorMessage:"unknown nuvajs bootstrap error"};o.consola.error("core.android.bridge.error",e),t(n)}),!1))}))),r};t.default=function(e,n){return r||(r=(0,t.h5AndroidbridgeInit)()),r.then((function(){return new Promise((function(t,r){var i=e.split("."),a=i.pop()||"",c=i.join(".");"function"==typeof window.WebViewJavascriptBridgeAndroid&&window.WebViewJavascriptBridgeAndroid((function(e){"function"==typeof n.onSuccess&&n.onSuccess(e),t(e)}),(function(e){"function"==typeof n.onFail&&n.onFail(e),o.consola.error("core.android.bridge.error",e),r(e)}),c,a,n)}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;var o=n(1),i=n(0),a=n(21),c=(0,o.genRandId)(),s=(0,o.genRandId)();t.log=function(e,t){var n=window||{},u=n.document||{},f=n.navigator||{},l=n.location||{},d=(new Date).getTime(),p=n.__BIRD_CONFIG||{},m=p.pageName,g=void 0===m?"":m,v=p.title,h=void 0===v?"":v,_=encodeURIComponent((0,o.getCookie)("pub_uid")||""),w=encodeURIComponent(l.href),y=encodeURIComponent(l.href.split("?")[0]),b=encodeURIComponent(l.search&&l.search.replace("?","")||""),E=encodeURIComponent(l.hash&&l.hash.replace("#","")||""),I=encodeURIComponent(g||h||u.title),O=encodeURIComponent(g||h),P=encodeURIComponent(u.referrer),T=encodeURIComponent((0,o.getPlatform)()),M=encodeURIComponent(document.visibilityState),C=encodeURIComponent(f.userAgent||""),S="".concat(n.devicePixelRatio||1),N=n.screen&&encodeURIComponent("".concat(n.screen.width,"x").concat(n.screen.height))||"",k=f.connection?encodeURIComponent(f.connection.effectiveType||f.connection.type||""):"",R=(new Date).getTime(),L=r({type:e,sid:c,env:o.env,logtime:String(R),delay:String((R-d)/1e3),uid:_,pv_id:s,origin_url:w,url:y,referrer:P,app_name:O,title:I,visible:M,query:b,hash:E,ua:C,dpr:S,os:T,sr:N,net_type:k},t);i.consola.log("send",L),(0,a.logArms)(e,L)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENV_ENUM=void 0,function(e){e.win="win",e.mac="mac",e.android="android",e.ios="ios",e.other="other"}(t.ENV_ENUM||(t.ENV_ENUM={}))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.logCustom=void 0;var a=n(6),c=n(1),s=n(0),u=n(2);t.logCustom=function(e,t){return o(void 0,void 0,void 0,(function(){var n,o,f;return i(this,(function(i){switch(i.label){case 0:return[4,(0,c.getUid)()];case 1:for(f in i.sent(),n=(0,c.mergeConfig)(t),u.LOG_MAP_CUSTOM)n[f]&&(n[f]="".concat(n[f]));try{s.consola.track("core.log.custom",r(r(r(r({},c.win.__BIRD_perf_data),c.win.__BIRD_CONFIG),{birdVersion:u.BIRD_VERSION}),n))}catch(e){s.consola.error("core.api.logSlsCustom.error",e)}try{for(f in o={},t)t[f]&&(o[f]=encodeURIComponent("".concat(t[f])));(0,a.log)(c.ELogType.CUSTOM,r({pid:e},o))}catch(e){console.error("core.api.sendLeaveLog.error",e)}return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.setCommonValue=void 0;var o=n(10),i=n(22),a=n(25),c=n(34),s=n(1),u=n(2),f=n(0);s.win.__BIRD_CONFIG=s.win.__BIRD_CONFIG||{},s.win.__BIRD_perf_data={};var l=u.LOG_COMMON_PID,d=(0,s.getConfig)("errorPid"),p=(0,s.getConfig)("ignoreErrors")||[/^Script error\.?$/,/^ResizeObserver loop limit exceeded\.?$/],m=function(e){s.win.__BIRD_CONFIG=r(r({},s.win.__BIRD_CONFIG),e)};t.setCommonValue=m;try{!function(){if(!s.win.__BIRD_inited){if(s.win.__BIRD_inited=!0,s.win.__BIRD={setCommonValue:m,setConfig:m,sendToSls:f.consola.custom},s.win.__DINGBASE_CONFIG__&&s.win.__DINGBASE_CONFIG__.version?(0,s.setConfig)("version",s.win.__DINGBASE_CONFIG__.version):s.win.__DINGBASE_OFFLINE_CONFIG__&&s.win.__DINGBASE_OFFLINE_CONFIG__.version&&(0,s.setConfig)("version",s.win.__DINGBASE_OFFLINE_CONFIG__.version),(0,s.checkSampling)()||(0,s.setConfig)("send",!1),!(null===window||void 0===window?void 0:window.performance))return;if((0,s.isCrawlerUa)())return;f.consola.log("bird.core ".concat(s.env," start success")),(0,i.initLogError)(d,l,p),(0,o.initLogPerf)(l),(0,c.initLogPerfAdvanced)(l),(0,a.initLogNative)(l)}}()}catch(e){f.consola.error("core.api.start.error",e)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initLogPerf=void 0;var a,c=n(11),s=n(8),u=n(1),f=n(0),l=n(2),d=function(e){return e-(performance.timing.fetchStart-performance.timing.navigationStart)},p=(new Date).getTime(),m=function(e,t){var n=this;this.sendBizReady=function(e){var t=e.time;if(window.dingtalk&&window.dingtalk.platform&&(0,u.compareCurrentVersion)("7.0.0"))try{var n={time:isNaN(parseInt(t))?0:parseInt(t),availableTime:isNaN(parseInt(t))?0:parseInt(t)},r=(new Date).getTime();f.consola.log("notifyBizReady",n),window.dingtalk.platform.invokeAPI(r,"biz.webview.notifyBizReady",n),(0,u.setConfig)("bizReady",!0)}catch(e){f.consola.error("core.api.logBizReady.error",e)}},this.sendUserTimings=function(e,t){var r=e.entryType,o=e.name,i=e.startTime,a=e.duration,c=e.detail,s=e.c1,l=e.c2,p=e.c3,m=e.c4,g=e.c5,v=e.c6;switch(o){case"FMP":case"fmp-custom":var h={p1:i,p2:a,p3:r,p4:o,p5:c,c1:s,c2:l,c3:p,c4:m,c5:g,c6:v};if(n.fmp)return;h.p5||(h.p5=d(i)),n.fmp=h.p5||h.p1,f.consola.log("fmp",n.fmp),n.hasLoaded?n.sendLog():(0,u.setConfig)("fmp",n.fmp);break;case"fmp-every":var _=c||d(i);n.fmpEvery=_,(0,u.setConfig)("fmp-every",_),n.send({fmp:_})}switch(!0){case["fmp_t0","fmp_t1","fmp_t2"].includes(o):if(n[o])return;n[o]=c||d(i),(0,u.setConfig)(o,n[o]);break;case o.includes("fmp_t"):if(n.fmp_others[o])return;n.fmp_others[o]=c||d(i),(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),n.fmp_others))}},this.sendUserTimingsLoaded=function(e,t){e.entryType;var o,i,c=e.name,s=e.startTime;switch(e.duration,e.detail,e.c1,e.c2,e.c3,e.c4,e.c5,e.c6,c){case"fmp-end":if(!(null===window||void 0===window?void 0:window.performance)||!(null===(o=null===window||void 0===window?void 0:window.performance)||void 0===o?void 0:o.getEntriesByName))return;if(!1===(0,u.getConfig)("send"))return;var f=(null===(i=window.performance)||void 0===i?void 0:i.getEntriesByName("fmp-start"))||[],l=f.length-1;if(l>=0){var d=f[l];if((a&&a.startTime)!==d.startTime){n.fmpGap=s-f[l].startTime,a=f[l];var p=r(r(r(r({},n.getNavigationTiming()),n.getPaintTiming()),n.getConnection()),{fmpGap:n.fmpGap});n.logPerf(n.pid,p)}}}},this.getNavigationTiming=function(){var e={startTime:0,unloadEventStart:0,unloadEventEnd:0,redirectStart:0,responseEnd:0,fetchStart:0,domainLookupStart:0,domainLookupEnd:0,connectStart:0,secureConnectionStart:0,connectEnd:0,requestStart:0,responseStart:0,redirectEnd:0,domInteractive:0,domContentLoadedEventStart:0,domContentLoadedEventEnd:0,domComplete:0,loadEventStart:0,loadEventEnd:0};if(window&&window.performance&&"function"==typeof window.performance.getEntriesByType){var t=performance.getEntriesByType("navigation");if(t&&t[0]){var n=t[0];for(var r in e)"startTime"===r?e.startTime=n.startTime||n.navigationStart||0:e[r]=n[r]||0}}return e},this.mark=function(e,t){void 0===t&&(t={}),f.consola.log("custom mark",e,t);var r,o,i=parseInt(t.detail,10);if(isNaN(i))performance.mark(e||"FMP");else try{var a={name:e+"",entryType:"mark",startTime:t.startTime||((null===(r=null===u.win||void 0===u.win?void 0:u.win.performance)||void 0===r?void 0:r.now)?performance.now():(null===(o=null===window||void 0===window?void 0:window.performance)||void 0===o?void 0:o.timing)?(new Date).getTime()-performance.timing.navigationStart:(new Date).getTime()-p),duration:0,detail:i};return n.sendUserTimings(a,n.pid),a}catch(e){f.consola.error("core.api.mark.error",e)}},this.getPaintTiming=function(){var e={fp:0,fcp:0};return window&&window.performance&&"function"==typeof window.performance.getEntriesByType&&(performance.getEntriesByType("paint")||[]).forEach((function(t){"first-paint"===t.name&&(e.fp=t.startTime||0),"first-contentful-paint"===t.name&&(e.fcp=t.startTime||0)})),e},this.initPerformanceObserver=function(){if(window.PerformanceObserver){var e,t=[];window.PerformanceMark&&t.push("mark"),window.PerformanceMeasure&&t.push("measure"),window.PerformancePaintTiming&&t.push("paint"),window.PerformanceElementTiming&&t.push("element"),window.LargestContentfulPaint&&(t.push("largest-contentful-paint"),e=function(){},document.addEventListener("visibilitychange",(function t(){document.hidden&&(document.removeEventListener("visibilitychange",t,!0),e())}),!0));try{for(var r=0;r<t.length;r++){var o=t[r],i=new PerformanceObserver((function(e){e.getEntries().forEach((function(e){switch(e.entryType){case"mark":case"measure":l.FMP_KEYS.includes(e.name)&&n.sendUserTimings(e,n.pid),l.FMP_KEYS_LOADED.includes(e.name)&&n.sendUserTimingsLoaded(e,n.pid);break;case"largest-contentful-paint":n.lcpTime=e.renderTime||e.loadTime}}))}));try{i.observe({type:o,buffered:!0})}catch(e){i.observe({entryTypes:t});break}}}catch(e){}}},this.getConnection=function(){var e={net_type:"",downlink:""};if(window&&window.navigator&&window.navigator.connection){var t=window.navigator.connection;e.net_type=t.effectiveType||t.type||"",e.downlink=t.downlink||t.downlinkMax||t.bandwidth||""}return e},this.getSystemInfo=function(){try{var e={hasCSSAnimation:window.CSS&&window.CSS.supports&&window.CSS.supports("animation","1s linear infinite"),pixelRatio:window.devicePixelRatio||"",hardwareConcurrency:navigator.hardwareConcurrency||"",deviceMemory:navigator.deviceMemory||"",pluginsLength:navigator.plugins&&navigator.plugins.length},t=performance.memory;t&&(e.totalJSHeapSize=t.totalJSHeapSize/1048576,e.usedJSHeapSize=t.usedJSHeapSize/1048576,e.jsHeapSizeLimit=t.jsHeapSizeLimit/1048576);for(var r=0,o=Object.entries(e);r<o.length;r++){var i=o[r],a=i[0],c=i[1];n.fmp_others[a]=c}(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),n.fmp_others))}catch(e){f.consola.error("core.api.getSystemInfo.error",e)}},this.sendMark=function(e){var t,r;if((null===window||void 0===window?void 0:window.performance)&&(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.getEntriesByName)){var o=null===(r=window.performance)||void 0===r?void 0:r.getEntriesByName(e)[0];o&&n.sendUserTimings(o,n.pid)}},this.sendExtraFmp=function(){n.fmp_t0||n.sendMark("fmp_t0"),n.fmp_t1||n.sendMark("fmp_t1"),n.fmp_t2||n.sendMark("fmp_t2"),l.FMP_KEYS_OTHERS.map((function(e){n.fmp_others[e]||n.sendMark(e)}))},this.getItemTime=function(){var e,t,r;if((null===window||void 0===window?void 0:window.performance)&&(null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.getEntriesByName)){var o=[],i=(null===(t=window.performance)||void 0===t?void 0:t.getEntriesByName("listMessageEnd"))||[];if(i.length){var a=null===(r=i[0])||void 0===r?void 0:r.startTime;performance.getEntriesByType("mark").forEach((function(e){"renderOnlyMsgListEnd"!=e.name&&e.name.startsWith("fmp-item-")&&o.push({name:e.name,time:e.startTime-a})})),n.fmp_others=Object.assign({},(0,u.getConfig)("fmp_others"),{fmpRenderItemsTime:o})}}},this.sendLog=function(){return o(n,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return this.hasSendPerf?[2]:(this.sendExtraFmp(),this.fmp?[3,1]:(l.FMP_KEYS_FIRST.map((function(t){return e.sendMark(t)})),[3,3]));case 1:return this.hasSendPerf=!0,this.sendBizReady({time:this.fmp+performance.timing.fetchStart}),[4,this.send()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},this.send=function(e){return o(n,void 0,void 0,(function(){var t,n,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),(0,u.getConfig)("uid")?[3,2]:[4,(0,u.getUid)()];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:return t=i.sent(),f.consola.error("core.api.getUid.error",t),[3,4];case 4:if(!1===(0,u.getConfig)("send")&&!(0,u.checkSamplingWhiteList)())return[2];this.getItemTime(),this.getSystemInfo(),n=r(r(r(r(r({},this.getNavigationTiming()),this.getPaintTiming()),this.getConnection()),{fmp:this.fmp}),e),this.logPerf(this.pid,n),(0,u.setPerfData)(r({fcp:n.fcp,fp:n.fp,fmp:this.fmp},e));try{o=r(r(r(r(r(r(r({},u.win.__BIRD_perf_data),u.win.__BIRD_CONFIG),{pid:this.pid,url:location.href.split("?")[0],os:(0,u.getPlatform)()}),n),e),this.fmp_others),{birdVersion:l.BIRD_VERSION}),f.consola.track("core.log.perf",o),f.consola.log("send to sls")}catch(e){f.consola.error("core.api.logSls.error",e)}return[2]}}))}))},this.initStabilityListener=function(){(null===u.win||void 0===u.win?void 0:u.win.PerformanceLongTaskTiming)&&(null===u.win||void 0===u.win?void 0:u.win.PerformanceObserver)&&new PerformanceObserver((function(e){e.getEntries().forEach((function(e){e.duration>300&&n.longTask.push(e)}))})).observe({entryTypes:["longtask"]})},this.initBirdPerfAdvancedListener=function(){window.addEventListener("bird.perf.advanced",(function(e){void 0===e&&(e={});var t=e.detail,o=t.timeCost,i=void 0===o?0:o,a=t.timeCostFsp,c=void 0===a?0:a;i<=0||(n.auto_fmp=c>0?(i+c)/2:i,(0,u.setPerfData)({timeCostFsp:c,timeCost:i,auto_fmp:n.auto_fmp}),f.consola.log("perf advanced:",r(r({},e.detail),{auto_fmp:n.auto_fmp})),n.hasSendPerf||function(){var e;return!(null===window||void 0===window?void 0:window.performance)||!(null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.getEntriesByName)||l.FMP_KEYS.some((function(e){var t;return null===(t=window.performance)||void 0===t?void 0:t.getEntriesByName(e)[0]}))}()||n.fmp||n.fmpEvery||!n.hasLoaded||(n.send({msg:"auto_fmp",fmp:n.auto_fmp}),n.hasSendPerfAuto=!0))}))},this.init=function(){u.win.__BIRD=r(r({},u.win.__BIRD),{mark:n.mark}),f.consola.log("mount mark",u.win.__BIRD),n.initPerformanceObserver(),n.initBirdPerfAdvancedListener(),window.addEventListener&&window.addEventListener("load",(function(){return o(n,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:f.consola.log("load"),t.label=1;case 1:return t.trys.push([1,3,,4]),this.hasLoaded=!0,[4,this.sendLog()];case 2:return t.sent(),!this.hasSendPerfAuto&&this.auto_fmp&&this.send({msg:"auto_fmp",fmp:this.auto_fmp}),[3,4];case 3:return e=t.sent(),f.consola.error("core.api.sendLog.error",e),[3,4];case 4:return[2]}}))}))}),!0),window.addEventListener("beforeunload",(function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){return this.longTask.length>0&&(0,s.logCustom)(this.pid,{p1:this.longTask.length,p2:this.longTask.map((function(e){return e.duration})).join(),p4:this.longTask.map((function(e){return e.startTime})).join(),p5:u.ECustomLogType.LONG_TASK}),[2]}))}))}))},this.hasSendPerf=!1,this.hasSendPerfAuto=!1,this.logPerf=e,this.hasLoaded=!1,this.lcpTime=null,this.pid=t,this.fmp=null,this.fmp_t0=null,this.fmpEvery=null,this.fmp_t1=null,this.auto_fmp=null,this.fmp_t2=null,this.fmp_others={},this.fmpGap=null,this.uninstallHooks=[],this.longTask=[]};t.initLogPerf=function(e){try{new m(c.logPerf,e).init()}catch(e){f.consola.error("core.api.logPerf.error",e)}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.logPrefAdvanced=t.logPerf=void 0;var o=n(6),i=n(1),a=n(2),c=n(0);t.logPerf=function(e,t){try{!function(e,t){var n=(0,i.mergeConfig)(t);for(var c in a.LOG_MAP)n[c]?a.LOG_MAP_STRINGIFY.includes(c)?n[c]=JSON.stringify(n[c]):n[c]="".concat(n[c]):a.LOG_MAP_BLANK.includes(c)?n[c]="":n[c]="0";(0,o.log)(i.ELogType.PERF,(0,i.serializeLog)(a.LOG_MAP,r({pid:e},n)))}(e,t)}catch(e){c.consola.error("core.api.sendPerfLog.error",e)}};t.logPrefAdvanced=function(e,t){try{var n={};for(var c in t)t[c]&&(n[c]=encodeURIComponent("".concat(t[c])));(0,o.log)(i.ELogType.CUSTOM,(0,i.serializeLog)(a.LOG_MAP,r({pid:e},n)))}catch(e){console.error("core.api.sendLogPrefAdvanced.error",e)}}},function(e,t,n){"use strict";var r=n(3);function o(e){var t=e.message.match(/Uncaught (\w+):/);return t&&t[1]?t[1]:e.error_type?e.error_type:e.name?e.name:""}function i(e){var t=e.message,n=void 0===t?"":t,r=e.lineno,i=e.colno,a=e.stack,c=e.error;return{msg:n||e.msg||"",lineno:r,colno:i,file:e.filename||e.file||"",stack:c&&c.stack||a,errType:e.errType||o(e)||"",errCode:e.errCode||e.error_code}}Object.defineProperty(t,"__esModule",{value:!0}),t.processUnhandleDrejection=t.processCommonError=void 0,t.processCommonError=function(e,t,n,r,o){return i(e)},t.processUnhandleDrejection=function(e){if(e)try{var t="",n=0,o=0,a="",c="";"string"==typeof e?t=e:"object"===r(e.reason)?t=e.reason.message:"string"==typeof e.message&&(t=e.message);var s=e.reason;if("object"===r(s)){if("number"==typeof s.column)o=s.column,n=s.line;else if(s.stack){(u=s.stack.match(/at\s+.+:(\d+):(\d+)/))&&(n=u[1],o=u[2])}if(s.sourceURL)a=s.sourceURL;else if(s.stack){var u;(u=s.stack.match(/at\s+(.+):\d+:\d+/))&&(a=u[1])}s.stack&&(c=s.stack)}return i({message:t,filename:a,lineno:n,colno:o,stack:c,error_type:e.constructor.name})}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n(15),i=n(16);t.default={fetchH5PcUserInfo:r.default,fetchH5IosUserInfo:o.default,fetchH5AndroidUserInfo:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=function(){return new Promise((function(e,t){var n={};void 0!==r.win.dingtalk&&r.win.dingtalk.my&&r.win.dingtalk.my.getMyOpenId?(r.win.dingtalk.my.getMyOpenId((function(t,r){r&&(n.dt_uid=r),e(n)})),setTimeout((function(){e({})}),2e3)):e(n)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("internal.user.getCurrentUserInfo",{}).then((function(t){var r=(t||{}).uid;r&&(n.dt_uid=r),e(n)}),(function(e){o.consola.error("internal.user.getCurrentUserInfo",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("internal.user.getCurrentUserInfo",{}).then((function(t){var r=(t||{}).uid;r&&(n.dt_uid=r),e(n)}),(function(e){o.consola.error("internal.user.getCurrentUserInfo",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),o=n(19),i=n(20);t.default={fetchH5PcUserOrg:r.default,fetchH5IosUserOrg:o.default,fetchH5AndroidUserOrg:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0);t.default=function(){return new Promise((function(e,t){if(void 0!==r.win.dingtalk&&r.win.dingtalk.platform&&r.win.dingtalk.platform.invokeAPI){var n=(new Date).getTime();window.addEventListener("message",(function(t){var i=(t||{}).data,a=void 0===i?{}:i,c=a.msgId,s=a.body;if(c==n){var u=(0,r.getNativeOrgMap)(s);o.consola.log("internal.user.allOrganizations",s,u),e(u)}})),window.dingtalk.platform.invokeAPI(n,"internal.user.allOrganizations",{})}else e({})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0),i=n(1);t.default=function(){return new Promise((function(e,t){(0,r.default)("internal.user.allOrganizations",{}).then((function(t){var n=(0,i.getNativeOrgMap)(t);o.consola.log("internal.user.allOrganizations",t,n),e(n)}),(function(e){o.consola.error("internal.user.allOrganizations",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0),i=n(1);t.default=function(){return new Promise((function(e,t){(0,r.default)("internal.user.allOrganizations",{}).then((function(t){var n=(0,i.getNativeOrgMap)(t);o.consola.log("internal.user.allOrganizations",t,n),e(n)}),(function(e){o.consola.error("internal.user.allOrganizations",e)}))}))}},function(e,t,n){"use strict";var r=n(3),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.logArms=void 0;var i=n(1),a=n(2),c=a.BIRD_VERSION;t.logArms=function(e,t){!function(e,t){try{var n=(0,i.toQueryParams)(t),o=e===i.ELogType.PERF?"https://gm.mmstat.com/arms.1.2":"https://gm.mmstat.com/arms.1.1";if("object"===r(window.navigator)&&"function"==typeof window.navigator.sendBeacon)try{window.navigator.sendBeacon(o,JSON.stringify({gmkey:"OTHER",gokey:n,logtype:"2"}))}catch(e){(new Image).src="".concat(o,"?").concat(n)}else(new Image).src="".concat(o,"?").concat(n)}catch(e){}}(e,o(o({},t),{sdk_version:c}))}},function(e,t,n){"use strict";var r=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.initLogError=void 0;var o=n(0),i=n(23),a=n(1),c=n(24),s=function(e,t,n,i){try{if("object"!==r(i)||!i)return;if(Array.isArray(n)&&((0,a.ignoreByRule)(i.message,i,n)||(0,a.ignoreByRule)((0,a.decode)(i.message),i,n)))return;var c=i.type;if("error"===c||"unhandledrejection"===c){var s=i.target||i.srcElement,f=(0,a.processError)(i);if(f.stack&&f.stack.slice&&"string"==typeof f.stack&&(f.stack,f.stack.slice(0,1e3)),"unhandledrejection"===c&&(0,a.isType)(i.reason,"Error")&&(0,a.checkAutoError)(i.reason))return void u(e,t,f);if("error"===c){if(!(!s||!s.tagName||i.message||i.filename||i.lineno||i.colno))return;u(e,t,f)}}}catch(e){o.consola.error("core.api.sendError.error",e)}},u=function(e,t,n){e&&(o.consola.log("error:",n),(0,i.logError)(e,n)),(0,a.executeWithIntervalSync)(c.logBlank,{errorPid:e,pid:t,type:"error",info:JSON.stringify(n),snapshot:"string"==typeof document.body.innerHTML?JSON.stringify(document.body.innerHTML.slice(0,1e3)):""})};t.initLogError=function(e,t,n){try{(0,a.bindEvent)(window,"unhandledrejection",s.bind(window,e,t,n)),(0,a.bindEvent)(window,"error",s.bind(window,e,t,n))}catch(e){o.consola.error("core.api.initLogError.error",e)}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.logError=void 0;var a=n(6),c=n(1),s=n(0),u=n(2);t.logError=function(e,t){try{try{s.consola.track("core.log.error",r(r(r(r({},c.win.__BIRD_perf_data),c.win.__BIRD_CONFIG),{birdVersion:u.BIRD_VERSION}),t))}catch(e){s.consola.error("core.api.logSlsError.error",e)}!function(e,t){o(void 0,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return[4,(0,c.getUid)()];case 1:for(o in i.sent(),n=(0,c.mergeConfig)(t),u.LOG_MAP_ERROR)n[o]&&(n[o]=encodeURIComponent("".concat(n[o])));return(0,a.log)(c.ELogType.ERROR,(0,c.serializeLog)(u.LOG_MAP_ERROR,r({pid:e},n))),[2]}}))}))}(e,t)}catch(e){console.error("core.api.logErrorApi.error",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logBlank=void 0;var r=n(8),o=n(1),i=n(0);t.logBlank=function(e){var t=e.errorPid,n=e.pid,a=e.type,c=e.info,s=void 0===c?"":c,u=e.snapshot;try{return!!(0,o.checkBlank)()&&((0,r.logCustom)(n,{p1:Date.now(),p2:Date.now()-performance.timing.fetchStart,p4:a,p5:o.ECustomLogType.BLANK,p6:s,p7:u,p8:t}),!0)}catch(e){return i.consola.error("core.api.getBlankInfo.error",e),!1}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initLogNative=void 0;var i=n(0),a=n(1),c=n(26),s=n(30),u=n(2);t.initLogNative=function(e){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){try{!a.isDingTalkRuntime||(0,a.pageAccessedByReload)()&&"pre"!==a.env||!(0,a.inWhitelist)(location.href)||(e=(0,a.getPlatform)(),i.consola.log("platform:",e),(0,a.compareCurrentVersion)("6.0.15")&&function(e){var t={},n=u.FetchNativeTimeMethods[e];"function"==typeof c.default[n]&&c.default[n]().then((function(e){t=e||{},Object.keys(t).forEach((function(e){if(void 0!==e&&void 0!==t[e]){var n=t[e];i.consola.log(e,n),(0,a.setConfig)(e,n)}}))}))}(e),(0,a.compareCurrentVersion)("6.5.10")&&function(e){var t={},n=u.FetchNativeInfoMethods[e];"function"==typeof s.default[n]&&s.default[n]().then((function(e){t=e||{},Object.keys(t).forEach((function(e){if(void 0!==e&&void 0!==t[e]){var n=t[e];i.consola.log(e,n),(0,a.setConfig)(e,n)}}))}))}(e))}catch(e){i.consola.error("core.api.logNative.error",e)}return[2]}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),o=n(28),i=n(29);t.default={fetchH5PcNativeTime:r.default,fetchH5IosNativeTime:o.default,fetchH5AndroidNativeTime:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0);t.default=function(){return new Promise((function(e,t){var n={};void 0!==r.win.dingtalk&&r.win.dingtalk.util&&r.win.dingtalk.util.getWebviewContext?r.win.dingtalk.util.getWebviewContext((function(t,r){o.consola.log("nativeTimeRes",r);var i=r||{},a=i.beforeNavigateTime,c=void 0===a?"":a,s=i.finalRedirectTime,u=void 0===s?"":s,f=i.initEndTime,l=void 0===f?"":f,d=i.initStartTime,p=void 0===d?"":d,m=Number(c),g=Number(u),v=Number(p),h=Number(l);m&&(n.beforeNavigateTime=m),m&&g&&(n.redirectTime=g-m),v&&h&&(n.nativeNavigateTime=h-v),m&&g&&v&&h&&(n.nativeTotalTime=n.nativeNavigateTime+n.redirectTime),e(n)})):e(n)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("runtime.monitor.getLoadTime",{type:"RuntimeLaunchTime"}).then((function(t){var r=(t||{}).time;r&&(n.nativeTotalTime=r,o.consola.log("---result: runtime.monitor.getLoadTime---",n.nativeTotalTime)),e(n)}),(function(e){o.consola.error("runtime.monitor.getLoadTime",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("runtime.monitor.getLoadTime",{type:"RuntimeLaunchTime"}).then((function(t){o.consola.log("---result: runtime.monitor.getLoadTime---",t);var r=(t||{}).time;r&&(n.nativeTotalTime=r),e(n)}),(function(e){o.consola.error("runtime.monitor.getLoadTime",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),o=n(32),i=n(33);t.default={fetchH5PcResourceInfo:r.default,fetchH5IosResourceInfo:o.default,fetchH5AndroidResourceInfo:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0);t.default=function(){return new Promise((function(e,t){if(void 0!==r.win.dingtalk&&r.win.dingtalk.platform&&r.win.dingtalk.platform.invokeAPI){var n=(new Date).getTime();window.addEventListener("message",(function(t){var i=(t||{}).data,a=void 0===i?{}:i,c=a.msgId,s=a.body;if(c==n){var u=(0,r.getNativeInfoMap)(s);o.consola.log("biz.resource.getInfo",s,u),e(u)}})),window.dingtalk.platform.invokeAPI(n,"biz.resource.getInfo",{})}else e({})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0),i=n(1);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("biz.resource.getInfo",{type:"bizResourceGetInfo"}).then((function(t){n=(0,i.getNativeInfoMap)(t),o.consola.log("biz.resource.getInfo",t,n),e(n)}),(function(e){o.consola.error("biz.resource.getInfo",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0),i=n(1);t.default=function(){return new Promise((function(e,t){var n={};(0,r.default)("biz.resource.getInfo",{type:"bizResourceGetInfo"}).then((function(t){n=(0,i.getNativeInfoMap)(t),o.consola.log("biz.resource.getInfo",t,n),e(n)}),(function(e){o.consola.error("biz.resource.getInfo",e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initLogPerfAdvanced=void 0;var r=n(0),o=n(1),i=n(35);t.initLogPerfAdvanced=function(e){try{((0,o.inAutoFmpWhitelist)(location.href)||(0,o.getConfig)("autoFmp"))&&i.default.install()}catch(e){r.consola.error("core.api.logPrefAdvanced.error",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(){var e=[],t=screen.width*screen.height,n=null,o=!1,i=!1,a=null,c=["SCRIPT","LINK","SVG","IMG","VIDEO"],s=[],u=[{node:0}];function f(e){cancelAnimationFrame(a),a=requestAnimationFrame((function(){var e=u[u.length-1],t=document.all.length;u.push({node:t,time:performance.now(),ratio:(t-e.node)/Math.max(1,document.body.clientHeight/screen.height)})}));var t=[];E(e,(function(e){E(e.addedNodes,(function(e){1===e.nodeType&&t.push(e)}))})),t.length>0&&h(t.concat([]))}var l=null;function d(e){try{if(o)return;i=!0,n&&clearTimeout(n),l.disconnect(),l.takeRecords(),setTimeout((function(){o=!0,y(e)}),1e3)}catch(e){r.consola.error("core.log.removeListener.error",e)}}var p=function(){};function m(t,n){var r=0===e.length,o=screen.width,i=screen.height,a=document.documentElement,c=a?Math.min(a.clientHeight,i):i,s=a?Math.min(a.clientWidth,o):o,u=t.left+t.width,f=t.top+t.height,l=Math.round(.02*Math.min(o,i)),d=Math.round(.05*i);return r?t.width>=n||t.height>=n?l:u>=l&&s-t.left>=l&&f>=d&&c-t.top>=d:t.width>=2*l&&t.height>=2*l&&u>=d&&s-t.left>=d&&f>=d&&c-t.top>2*d}function g(e,t,n){var r=n||0;return E(e,(function(e){r=t(e,r)})),r}function v(e){var t=function(){try{e.lastTime=Math.max(b(),e.lastTime),e.c=document.getElementsByTagName("*").length,_()}catch(e){r.consola.error("core.log.updateLastTime.error",e)}};window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)}function h(n){var r=b(),i={createTime:r,lastTime:r,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};E(n,(function(e){(function(e){for(var t=s.length,n=null,r=0;r<t;r++)if((n=s[r])&&n.contains&&n.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(s.push(e),!0)})(e)||function(e,n,r){var i=e.piece,a=document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0,s=document.documentElement.scrollLeft||window.pageXOffset||document.body&&document.body.scrollLeft||0,u=r?null:n.getBoundingClientRect(),f=r||{type:0,className:"",top:u.top+a,left:u.left+s,width:u.width,height:u.height},l=n.offsetParent;l&&l.offsetWidth<l.scrollWidth&&(f.width=Math.min(l.offsetWidth,f.width)),l&&l.offsetHeight<l.scrollHeight&&(f.height=Math.min(l.offsetHeight,f.height));var d=n.tagName;if(-1!=c.indexOf(d.toUpperCase())&&(!1,"IMG"===d)){var p=0;if(f.width=Math.max(f.width,1),f.height=Math.max(f.height,1),f.type=1,m(f)){e.wait+=1,n.addEventListener("load",(function r(){if(o)n.removeEventListener("load",r,!0);else{p++,e.wait-=1;var i=n.getBoundingClientRect(),a=b();m(f,!0)&&(p<=1||a<=1e3)?(f.width=i.width,f.height=i.height,e.lastTime=Math.max(a,e.lastTime),f.size=i.width*i.height,f.v=f.size/t,e.v=g(e.piece,(function(e,t){return e.v+t}),0),v(e)):_()}}),!0),n.addEventListener("error",(function t(){o?n.removeEventListener("error",t,!0):(e.wait-=1,m(f)?(e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&(e.v=g(e.piece,(function(e,t){return e.v+t}),0),v(e))):_())}),!0)}}var h={};if(window.getComputedStyle&&("none"===(h=window.getComputedStyle(n,null)).display||"fixed"===h.position))return!1,i;if(m(f)){var w=h.backgroundImage||"",y=/url\(['"]?(.*?)['"]?\)/i;if(y.test(w)&&(w=w.replace(y,"$1"),!/^data:/i.test(w))){e.wait+=1;var E=document.createElement("img");E.onload=function(){e.wait-=1,e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&v(e)},E.src=w}(function(e,t){var n=null;for(var r in e)if(n=e[r],t.top>=n.top&&t.left>=n.left&&t.top+t.height<=n.top+n.height&&t.left+t.width<=n.left+n.width)return!0;return!1})(i,f)||(f.size=f.width*f.height,f.v=f.size/t,e.v+=f.v,f.size?i.push(f):!1)}}(i,e)})),i.piece.length>0&&(e.push(i),v(i))}function _(){if(!i&&!o){n&&clearTimeout(n),n=setTimeout((function(){d()}),3e3);for(var t=null,r=null,a=0,c=0,s=0,u=0,f=0,l=e.length-1;l>1;l--){if(t=e[l],r=e[l-1],u=Math.floor(100*t.v)/100,c=(f=Math.floor(100*r.v)/100)?Math.abs(u-f)/f:0,(s+=Math.min(t.v,1))>4){d();break}if(c<.5){if(++a>6){d();break}}else a>0&&(a=0)}}}var w=0;function y(t){try{t&&(o=!0);var n=e.length;if(0===n)return;var i=[],a=[],c=[],s=-1,f=0,l=0,m=0;for(a=(m=function(e,t,n){void 0===t&&(t=.1),void 0===n&&(n=3);var r=e.length-1,o=0;do{var i=e[r],a=e[r-1];if(!(Math.abs(i-a)/i<t))break;o++,r--}while(r>0);return o>=n&&r>0?Math.min(r,e.length-1):e.length-1}(e.map((function(e){return Math.floor(100*e.v)/100}))))>0?e.slice(0,n+2):e;a.length>0;)if(s=a[0].lastTime,f=a[0].c,c=[],l=0,m=0,E(a,(function(e){l+=e.v,m++,e.createTime<=s+200&&(s=Math.max(s,e.lastTime),f=Math.max(f,e.c)),e.lastTime>s&&c.push(e)})),a=c,l<.02||l/m<.01?w++:w=0,i.push([s,f]),w>=3){i.splice(i.length-3),d();break}var g=i.length-1;0!==w&&g>=w&&(g-=w),g=i[g];var v=null,h=null,_=null;f=null;try{g&&(v=g[0],f=g[1],_=performance.timing.navigationStart+v,h=function(){if(!u[1])return 0;if(!u[2])return u[1].time;if(!u[3])return u[2].time;var e=u[1].ratio+u[2].ratio+u[3].ratio;u.length>3&&(e=0);for(var t=0,n=2,o=u.length;n<o;n++){var i=u[n-2].ratio+u[n-1].ratio+u[n].ratio;i>e&&(t=u[n].time,e=i)}return r.consola.log("fsp:",t),t}()),p&&p(_,v,h,f),function(e,t,n,r){if(window.dispatchEvent&&window.CustomEvent){var o=new CustomEvent("bird.perf.advanced",{detail:{timeCost:t,timeCostFsp:n,timestamp:e,domLen:r}});window.dispatchEvent(o)}}(_,v,h,f)}catch(e){r.consola.error("core.log.decision.sfsp.error",e)}}catch(e){r.consola.error("core.log.decision.error",e)}}function b(){return performance.now()}function E(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=e.length,r=0;r<n;r++)t(e[r],r)}return{install:function(){!function(){if(window.performance&&window.MutationObserver){(l=new MutationObserver(f)).observe(document.documentElement,{childList:!0,subtree:!0}),h(document.querySelectorAll("BODY > *")),setTimeout((function(){d(!0)}),1e4)}}()},onReport:function(e){e&&"function"==typeof e&&(p=e)},forceStop:function(){y(!0)}}}()}]);