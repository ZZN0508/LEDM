"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[9,7134],{5755:function(e,n,t){t.d(n,{I:function(){return I}});var l,o=t(32781),a=t(53864),r=t(79705),i=t.n(r),u=t(66737),c="rw6W_sXN",s="EjJAhUzc",d="e31ool0B",f="ySgiUHH8",m="qzqr3YjD",v="Er4nYYXZ",p="zktpFdL5",g="nxtFyjFt",h="nzl2HbEu",_="X7zMX5pj",y="e0CR5UV7",w="hrrE_gEk",E="jKzD38XU";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},k.apply(this,arguments)}var b=function(e){return a.createElement("svg",k({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=a.createElement("path",{d:"M24.601 24.6a1.362 1.362 0 01-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 11-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 011.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 011.927 1.926L20.427 18.5l4.174 4.174a1.362 1.362 0 010 1.927z",fill:"#fff",fillOpacity:.8})))},C=t(9909),S=t(27809),I=function(e){var n=e.className,t=e.onClose,l=e.onOpen,r=e.preventModalVisible,k=e.onModalVisibleChange,I=(0,a.useState)(!1),N=(0,o.Z)(I,2),x=N[0],T=N[1],L=function(){T(!1),null==k||k(!1)},P=void 0===r?x:r;return a.createElement(a.Fragment,null,a.createElement("div",{className:i()(c,n)},a.createElement("span",{className:s},"\u56e0"),a.createElement("span",{className:d,onClick:function(){T(!0),null==k||k(!0)}},"\u6d4f\u89c8\u5668\u9650\u5236"),a.createElement("span",{className:s},"\uff0c\u9700"),a.createElement("span",{className:f,onClick:l},"\u70b9\u51fb\u6253\u5f00\u58f0\u97f3"),a.createElement(C.Z,{className:m,height:36,width:36,src:globalThis.xssNamespace.douyin_web.filterUrl(b,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:t})),P&&a.createElement(u.h,null,a.createElement(S.T,{className:v},a.createElement("div",{className:p},a.createElement("div",{className:g},a.createElement("div",{className:h},"\u6d4f\u89c8\u5668\u9650\u5236"),a.createElement(C.Z,{className:_,width:36,height:36,src:globalThis.xssNamespace.douyin_web.filterUrl(b,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onClick:L})),a.createElement("div",{className:y},a.createElement("div",{className:w},"\u5f53\u4f60\u8bbf\u95ee\u6296\u97f3\u6b21\u6570\u8f83\u5c11\uff0c\u6216\u7ecf\u5e38\u9759\u97f3\u64ad\u653e\u65f6\uff0c\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u9650\u5236\u7f51\u7ad9\u97f3\u91cf\uff0c\u4f7f\u7f51\u7ad9\u65e0\u6cd5\u6709\u58f0\u64ad\u653e"),a.createElement("div",{className:E,onClick:L},"\u6211\u77e5\u9053\u4e86"))))))}},75450:function(e,n,t){t.d(n,{s:function(){return g},d:function(){return h}});var l=t(32781),o=t(7943),a=t.n(o),r=t(53864),i=t(2433),u=t(28712),c=t(97876),s=t(71116),d=t(72603),f=t(28006),m=t(46930),v=function(e){return!(0,u.p)()&&a()(n=window.location.pathname).call(n,"/".concat(e));var n},p=!1,g=function(e){(0,r.useEffect)((function(){var n=c.listen(c.EVENT.changeVideoSideBar,(function(n){var t=n.isShowRelatedCard,l=n.isShowComment,o=n.lastStatus;(l&&t)===!((null==o?void 0:o.isShow)&&(null==o?void 0:o.tab)===i.L.Comment)&&e&&(p=!0)}));return function(){null==n||n()}}),[e])},h=function(e){var n=e.canShowDownloadBar,t=e.type,o=(0,r.useState)(!0),a=(0,l.Z)(o,2),i=a[0],g=a[1],h=(0,r.useState)((function(){var e=(s.Le.getConfig(s.gI.IsDownloadBarShow)||{}).isCommentShow;return e&&g(!1),Boolean(e)})),_=(0,l.Z)(h,2),y=_[0],w=_[1],E=(0,r.useCallback)((function(e){n&&(0,f.A)(e)&&(m.Z.sendLog("addToDesktopShow",{enter_from:(0,u.p)()?" ":(0,d.vM)(),type:"comment"}),(0,f.D)(e),w(!0),"comment"===e&&(s.Le.setConfig(s.gI.IsDownloadBarShow,{isCommentShow:!0}),c.emit(c.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"",isBar:!0})))}),[n]),k=(0,r.useCallback)((function(e){n&&("comment"===e&&(s.Le.setConfig(s.gI.IsDownloadBarShow,{isCommentShow:!1}),c.emit(c.EVENT.showClientDownloadGuide,{isShow:!1,type:"comment",text:"",isBar:!0})),w(!1))}),[n]);return(0,r.useEffect)((function(){if(!n)return function(){return null};var e=c.listen(c.EVENT.showClientDownloadGuide,(function(e){var n=e.isShow,l=e.type,o=e.isBar;l===t&&o&&("comment"===l?w(n):n?(0,f.A)(l)&&((0,f.D)(l),w(!0)):w(!1))}));return function(){null==e||e()}}),[n,t]),(0,r.useEffect)((function(){p&&(k("comment"),p=!1)}),[k,p]),{showBar:E,hideBar:k,isShow:y,isHighlight:i,canShowLightComment:v("search")||v("video")}}},11013:function(e,n,t){t.d(n,{Z:function(){return w}});var l,o=t(65902),a=t(64408),r=t(32781),i=t(67161),u=t(5594),c=t.n(u),s=t(53864),d=t(79705),f=t.n(d),m=t(19681),v=t(86846);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},p.apply(this,arguments)}var g=function(e){return s.createElement("svg",p({fill:"none",stroke:"currentColor",strokeWidth:4,viewBox:"0 0 48 48","aria-hidden":"true",className:"loading_svg__arco-icon loading_svg__arco-icon-loading"},e),l||(l=s.createElement("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"})))},h="kks7YKm8",_="RKi4JXme",y=["onClick","children","className","disabled"],w=function(e){var n=e.onClick,t=e.children,l=e.className,u=e.disabled,d=(0,i.Z)(e,y),p=(0,s.useState)(!1),w=(0,r.Z)(p,2),E=w[0],k=w[1],b=(0,s.useCallback)((0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(!0),e.next=6,n();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:return e.prev=10,k(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,8,10,13]])}))),[n]);return s.createElement(m.z,(0,o.Z)({width:132},d,{className:f()([h,l]),autoFixed:!1,disabled:!!E||u,newStyle:!0,onClick:b}),E&&s.createElement(v.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(g,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:_,viewBox:"0 0 48 48"}),t)}},26014:function(e,n,t){t.d(n,{Z:function(){return We}});var l=t(53864),o=t(32781),a=function(e){return e[e.Loading=0]="Loading",e[e.Empty=1]="Empty",e[e.Collect=2]="Collect",e[e.CreateCollection=3]="CreateCollection",e[e.EditCollection=4]="EditCollection",e}({}),r=t(64408),i=t(30906),u=t(30673),c=t(5594),s=t.n(c),d=t(92524),f=t.n(d),m=t(8369),v=t.n(m),p=t(8e3),g=t.n(p),h=t(11227),_=t.n(h),y=t(34346),w=t.n(y),E=t(68493),k=t.n(E),b=t(94090),C=t.n(b),S=t(49006),I=t(85792),N=t.n(I),x=t(12338),T={collects:[],hasMore:!0,cursor:0,total:9},L=function(e){return new(k())((function(n){return N()(n,e)}))},P=(0,l.createContext)(null),Z=t(48557);function M(e){var n=e.awemeInfo,t=e.collectMethod,a=e.unCollectMethod,c=e.collected,d=e.onCollectDone,m=e.onMove,p=e.selectType,h=void 0===p?"multi":p,y=(0,l.useContext)(P),E=(0,l.useState)([]),b=(0,o.Z)(E,2),I=b[0],N=b[1],x=(0,l.useState)([]),T=(0,o.Z)(x,2),L=T[0],M=T[1],R=(0,l.useCallback)((function(e){if("single"!==h){var n=(0,u.Z)(L),t=f()(n).call(n,e);-1===t?n.push(e):v()(n).call(n,t,1),M(n)}else M([e])}),[L,h]),D=(0,l.useCallback)((function(e){var l,o,a,u,c=g()(l=y.state.collects).call(l,(function(n){return null==e?void 0:_()(e).call(e,n.collectionFolderId)})),f=w()(o=c||[]).call(o,(function(e){return e.collectionFolderName})),m=w()(a=c||[]).call(a,(function(e){return e.collectionFolderId})),v={folder_name:f.join(","),folder_id:m.join(",")};(0,Z.g)("click_favorite_video",v),t({logParams:(0,i.Z)({click_from:"panel",click_method:"panel"},v),nextFunc:(u=(0,r.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e&&e.length){t.next=3;break}return null==d||d(),t.abrupt("return",{statusCode:0});case 3:return t.prev=3,t.next=6,k().all(w()(c).call(c,function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.RX)({item_ids:[n.awemeId],item_type:2,to_collects_id:t.collectionFolderId,collects_name:t.collectionFolderName,update_collects_sort:!0,move_collects_list:m});case 2:if(!e.sent.status_code){e.next=6;break}throw new Error;case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 6:return t.next=8,y.action.getCollects({reset:!0,triggerLoading:!1,needHold:!0});case 8:return t.abrupt("return",{statusCode:0,successMsg:"\u89c6\u9891\u6536\u85cf\u6210\u529f\uff0c\u53ef\u4ee5\u5728\u300c\u6211\u7684\u300d\u4e3b\u9875-\u6536\u85cf\u5939\u67e5\u770b"});case 11:return t.prev=11,t.t0=t.catch(3),t.abrupt("return",{statusCode:1,successMsg:"\u79fb\u52a8\u81f3\u6536\u85cf\u5939\u5931\u8d25"});case 14:return t.prev=14,M([]),null==d||d(),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[3,11,14,18]])}))),function(){return u.apply(this,arguments)})})}),[n,t,d,y.action.getCollects,y.state.collects]),O=(0,l.useCallback)((function(){var e;null==a||a({logParams:{click_method:"panel",click_from:"panel"},nextFunc:(e=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.action.getCollects({reset:!0,triggerLoading:!1,needHold:!0});case 3:return e.abrupt("return",{statusCode:0});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{statusCode:1});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return e.apply(this,arguments)})})}),[n,a,y.action.getCollects]),A=(0,l.useCallback)((function(){return D(L)}),[D,L]),F=(0,l.useCallback)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(L,I);case 3:return e.next=5,y.action.getCollects({reset:!0,triggerLoading:!1});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[m,L,I]),U=(0,l.useCallback)((function(e){y.action.addCollects([e]),N((function(n){var t;return C()(t=[e]).call(t,(0,u.Z)(n))})),R(e.collectionFolderId)}),[R,y.action.addCollects]),B=(0,l.useCallback)((function(){M([]),y.action.reset()}),[y.action.reset]),V=(0,l.useCallback)((function(){return M([])}),[]);return{state:{collects:y.state.collects,newCollects:I,selectedIds:L,hasMore:y.state.hasMore,loading:y.state.loading,collected:c},refs:{collectionRefs:y.refs},action:{getCollects:y.action.getCollects,toggleSelectedId:R,collect:D,unCollect:O,collectToCollection:A,addCollect:U,moveToCollection:F,reset:B,resetSelectedIds:V}}}var R,D={init:!1},O=(0,l.createContext)(null),A=function(){return(0,l.useContext)(O)},F=t(45010),U=t(67161),B=t(86846);function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},V.apply(this,arguments)}var j,W,H=function(e){return l.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none"},e),R||(R=l.createElement("path",{d:"M8 15.167A6.667 6.667 0 108 1.833a6.667 6.667 0 000 13.334zM8 11.5a.667.667 0 01-.666-.667V9.167H5.667a.667.667 0 010-1.334h1.667V6.167a.667.667 0 011.333 0v1.666h1.667a.667.667 0 110 1.334H8.667v1.666a.667.667 0 01-.666.667z",fill:"#fff",fillOpacity:.34})))},z="QH6oxteZ",G="npeVsUEy",K="qsjDe0zy",q="C3FbKHks",Q=t(44978),X=["showCreate","title","syncCreateModalShow"],Y=function(e){var n=e.showCreate,t=e.title,o=e.syncCreateModalShow,a=(0,U.Z)(e,X),r=(0,Q.Z)((0,i.Z)((0,i.Z)({},a),{},{disablePlayNextControl:!0})),u=r.open,c=r.show,s=r.modal,d=(0,l.useRef)(null);return(0,l.useEffect)((function(){o&&(d.current&&clearTimeout(d.current),d.current=N()((function(){null==o||o(c)}),500))}),[c,o]),l.createElement("div",{className:z},l.createElement("span",{className:G},t),n&&l.createElement(l.Fragment,null,l.createElement("div",{className:K,onClick:u},l.createElement(B.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(H,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:q,viewBox:"0 0 16 17"}),l.createElement("span",null,"\u65b0\u5efa")),s))},J=function(){var e=A(),n=a.Empty===e.state.status,t=a.Collect===e.state.status;if(a.Loading===e.state.status)return null;if("modal"===e.props.type){var o="single"===e.props.selectType?"\u9009\u62e9\u6536\u85cf\u5939":"\u6536\u85cf\u89c6\u9891\u5230",r=t||n?o:"\u65b0\u5efa\u6536\u85cf\u5939";return l.createElement(F.Z,{title:r,onClose:e.props.onClose})}return"popover"===e.props.type?l.createElement(Y,{title:"\u9009\u62e9\u6536\u85cf\u5939",showCreate:t,syncCreateModalShow:e.props.syncCreateModalShow,onOpen:e.props.onCreateOpen,onDone:e.action.handleCreateDone}):null},$="GBfccztG",ee=t(75422),ne=t(50182),te=t(16478),le=t(7855),oe="Xtilz4ww",ae="PvNaT3__",re=t(12414);function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},ie.apply(this,arguments)}var ue,ce=function(e){return l.createElement("svg",ie({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j||(j=l.createElement("g",{clipPath:"url(#defaultCover_svg__clip0_6065_239239)"},l.createElement("path",{d:"M14.259 3.908A4.073 4.073 0 0112.385.5H9.428l-.005 11.712c-.05 1.312-1.142 2.365-2.48 2.365-.417 0-.809-.103-1.154-.283a2.456 2.456 0 01-1.333-2.174c0-1.354 1.116-2.457 2.486-2.457.256 0 .501.042.734.114V6.793a5.54 5.54 0 00-.734-.052c-3 0-5.442 2.413-5.442 5.38 0 1.82.92 3.43 2.324 4.404a5.455 5.455 0 003.119.975c3.001 0 5.443-2.413 5.443-5.38V6.181A7.088 7.088 0 0016.5 7.488V4.566a4.129 4.129 0 01-2.241-.658z",fill:"#fff",fillOpacity:.34}))),W||(W=l.createElement("defs",null,l.createElement("clipPath",{id:"defaultCover_svg__clip0_6065_239239"},l.createElement("path",{fill:"#fff",transform:"translate(.5 .5)",d:"M0 0h17v17H0z"})))))},se="ApammVf6",de="ttmj1kYp",fe="JYA0olNU",me="u8vSK0C1",ve="khwViz2j",pe="joEe5vxM",ge="oyg8E8MR",he="dCNk_0GI",_e="wqr__GZD",ye=function(e){var n=e.cover,t=e.name,a=e.count,r=e.secret,i=e.children,u=(0,l.useState)(""),c=(0,o.Z)(u,2),s=c[0],d=c[1];return(0,l.useEffect)((function(){if(0!==a&&n){var e=new Image;e.onload=function(){d(n)},e.src=globalThis.xssNamespace.douyin_web.filterUrl(n,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}}),[n,a]),l.createElement("div",{className:se},l.createElement("div",{className:de},l.createElement("div",{className:fe},l.createElement(B.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(ce,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:pe,viewBox:"0 0 18 18"}),s&&l.createElement("div",{className:me},l.createElement("img",{width:28,height:28,src:globalThis.xssNamespace.douyin_web.filterUrl(s,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:ve}))),l.createElement("span",{className:ge},t),r&&l.createElement(B.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(re.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:he,viewBox:"0 0 14 16"}),l.createElement("span",{className:_e},a)),i)},we=function(){var e,n=A(),t=(0,ne.Z)(),a=(0,o.Z)(t,2),r=a[0],i=a[1],u=(0,l.useRef)(null);return(0,l.useEffect)((function(){i&&n.collection.action.getCollects({triggerLoading:!1})}),[i]),(0,l.useEffect)((function(){if("modal"===n.props.type){var e;if(n.props.show)return;null===(e=u.current)||void 0===e||e.scrollTo(0,0)}else{var t;if(!n.props.show)return;null===(t=u.current)||void 0===t||t.scrollTo(0,0)}}),[n.props.show,n.props.type]),l.createElement("div",{ref:u,className:oe},l.createElement(te.Y.Group,{defaultValue:n.collection.state.selectedIds[0],onChange:function(e,t){return n.collection.action.toggleSelectedId(t)}},w()(e=n.collection.state.collects).call(e,(function(e){var t,o;return _()(t=n.props.disabledCollectionIds||[]).call(t,e.collectionFolderId)?null:l.createElement(ye,{key:e.collectionFolderId,cover:e.cover,name:e.collectionFolderName,count:e.videoTotal,secret:0===e.status},"multi"===n.props.selectType?l.createElement(le.X,{checked:_()(o=n.collection.state.selectedIds).call(o,e.collectionFolderId),onChange:function(){return n.collection.action.toggleSelectedId(e.collectionFolderId)}}):l.createElement(te.Y,{value:e.collectionFolderId}))}))),n.collection.state.hasMore&&l.createElement("div",{ref:r,className:ae},l.createElement(ee.g,null)))};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ee.apply(this,arguments)}var ke,be=function(e){return l.createElement("svg",Ee({xmlns:"http://www.w3.org/2000/svg",width:96,height:96,fill:"none"},e),ue||(ue=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.087 20.4a7.2 7.2 0 00-7.187 7.637l2.415 39.673A8.4 8.4 0 0025.7 75.6h44.745a8.4 8.4 0 008.38-7.811l2.27-32.316a7.2 7.2 0 00-7.183-7.704H48.673a6.664 6.664 0 01-5.96-3.685 6.664 6.664 0 00-5.96-3.684H22.086zm24.682 21.879c.438-1.172 2.095-1.172 2.533 0l1.391 3.723a2.552 2.552 0 002.279 1.656l3.968.174c1.25.054 1.762 1.63.783 2.41l-3.11 2.475a2.551 2.551 0 00-.87 2.678l1.062 3.831c.335 1.206-1.006 2.18-2.049 1.49l-3.312-2.193a2.551 2.551 0 00-2.817 0l-3.312 2.193c-1.043.69-2.383-.284-2.05-1.49l1.063-3.831a2.551 2.551 0 00-.87-2.678l-3.11-2.475c-.979-.78-.467-2.356.783-2.41l3.968-.174a2.552 2.552 0 002.279-1.656l1.391-3.723z",fill:"#33343F"})))},Ce="_kj7J07P",Se="saEIpo2L",Ie="DG4LBhKk",Ne="YgvGxGox",xe="mw3_9IZv";function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Te.apply(this,arguments)}var Le=function(e){return l.createElement("svg",Te({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none"},e),ke||(ke=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 13.333a.75.75 0 001.5 0V8.75h4.583a.75.75 0 000-1.5H9.249V2.667a.75.75 0 10-1.5 0V7.25H3.166a.75.75 0 100 1.5h4.583v4.583z",fill:"#fff"})))},Pe=t(11013),Ze=function(){var e=A(),n=(0,Q.Z)({onDone:e.action.handleCreateDone,onOpen:e.props.onCreateOpen}),t=n.open,o=n.show,a=n.modal,r=(0,l.useRef)(null),i=(0,l.useCallback)((function(){switch(e.props.type){case"popover":return void t();case"modal":return void e.action.toCreateCollection();default:return}}),[t,e.props.type,e.action.toCreateCollection]);return(0,l.useEffect)((function(){e.props.syncCreateModalShow&&(r.current&&clearTimeout(r.current),r.current=N()((function(){var n,t;null===(n=(t=e.props).syncCreateModalShow)||void 0===n||n.call(t,o)}),500))}),[o,e.props.syncCreateModalShow]),l.createElement(l.Fragment,null,l.createElement("div",{className:Ce},l.createElement(B.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(be,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:Se,viewBox:"0 0 96 96"}),l.createElement("span",{className:xe},"\u6682\u65e0\u6536\u85cf\u5939\uff5e"),l.createElement(Pe.Z,{className:Ie,onClick:i},l.createElement(B.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Le,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:Ne,viewBox:"0 0 17 16"}),"\u65b0\u5efa\u6536\u85cf\u5939")),a)},Me=t(54517),Re=function(){var e=A();switch(e.state.status){case a.Loading:return l.createElement(ee.g,{className:$});case a.Empty:return l.createElement(Ze,null);case a.Collect:return l.createElement(we,null);case a.CreateCollection:return l.createElement(Me.Z,{onDone:e.action.handleCreateDone});default:return null}},De=t(79705),Oe=t.n(De),Ae="uqYh8uqB",Fe="yeRd7FAT",Ue=function(){var e=A(),n=e.props.collected?"\u5df2\u6536\u85cf\u89c6\u9891":"\u4ec5\u6536\u85cf\u89c6\u9891",t=(0,l.useCallback)((function(){e.props.collected?e.collection.action.unCollect():e.collection.action.collect()}),[e.props.collected,e.collection.action.collect,e.collection.action.unCollect]),o=(0,l.useCallback)((function(){(0,Z.g)("create_favorite_folder_click",{click_position:"favorite_folder_panel"}),e.action.toCreateCollection()}),[e.action.toCreateCollection]);return e.state.status!==a.Collect?null:l.createElement("div",{className:Oe()([Ae,"popover"===e.props.type&&Fe])},"modal"===e.props.type&&l.createElement(Pe.Z,{type:"secondary",onClick:o},"\u65b0\u5efa\u6536\u85cf\u5939"),"popover"===e.props.type&&l.createElement(Pe.Z,{type:"secondary",onClick:t},n),e.props.onMove?l.createElement(Pe.Z,{disabled:!e.collection.state.selectedIds.length,onClick:e.collection.action.moveToCollection},"\u786e\u5b9a"):l.createElement(Pe.Z,{disabled:!e.collection.state.selectedIds.length,onClick:e.collection.action.collectToCollection},"\u6536\u85cf\u81f3\u6536\u85cf\u5939"))},Be="aviI8ctb",Ve=t(49149),je=function(e){var n=function(e){var n=(0,l.useState)(!1),t=(0,o.Z)(n,2),r=t[0],i=t[1],u=M(e),c=(0,l.useRef)(e.collected),s=(0,l.useMemo)((function(){return D.init||e.awaysReset?r?a.CreateCollection:u.state.loading.list?a.Loading:u.state.collects.length?a.Collect:a.Empty:a.Loading}),[u.state.loading.list,u.state.collects,r,e.awaysReset]),d=(0,l.useCallback)((function(n){var t;null===(t=e.onCreateDone)||void 0===t||t.call(e),i(!1),u.action.addCollect(n)}),[e.onCreateDone,u.action.getCollects]),f=(0,l.useCallback)((function(){return i(!0)}),[]);return(0,l.useEffect)((function(){if(!e.awaysReset)return D.init?(u.action.reset(),void i(!1)):void(e.show&&!D.init&&(D.init=!0,u.action.getCollects({reset:!0})));e.show&&(u.action.getCollects({reset:!0}),i(!1),u.action.resetSelectedIds())}),[e.show,e.awaysReset,u.action.getCollects,u.action.reset]),(0,l.useEffect)((function(){e.collected!==c.current&&(c.current=e.collected,u.action.getCollects({reset:!0}))}),[e.collected,u.action.getCollects]),(0,l.useEffect)((function(){var n,t;e.show&&null!==(n=e.awemeInfo)&&void 0!==n&&n.awemeId&&s!==a.Loading&&(0,Z.g)("add_to_favorite_folder_panel_show",{group_id:null===(t=e.awemeInfo)||void 0===t?void 0:t.awemeId,folder_cnt:u.refs.collectionRefs.resRef.current.total})}),[e.show,e.awemeInfo,s]),{props:e,collection:u,state:{status:s},action:{handleCreateDone:d,toCreateCollection:f}}}(e);return(0,Ve.Z)(e.show,"container"),l.createElement(O.Provider,{value:n},l.createElement("div",{className:Be},l.createElement(J,null),l.createElement(Re,null),l.createElement(Ue,null)))},We=function(e){var n,t,a,c,d,f,m,v,p,g,h,_,y,w,E,k,b=(n=(0,l.useState)(T.collects),t=(0,o.Z)(n,2),a=t[0],c=t[1],d=(0,l.useState)(T.hasMore),f=(0,o.Z)(d,2),m=f[0],v=f[1],p=(0,l.useState)({list:!1}),g=(0,o.Z)(p,2),h=g[0],_=g[1],y=(0,l.useRef)({cursor:T.cursor,total:0}),w=(0,l.useCallback)((0,r.Z)(s().mark((function e(){var n,t,l,o,a,r,d,f,p,g,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>0&&h[0]!==undefined?h[0]:{},t=n.triggerLoading,l=void 0===t||t,o=n.reset,a=void 0!==o&&o,r=n.needHold,d=void 0!==r&&r,e.prev=1,l&&_((function(e){return(0,i.Z)((0,i.Z)({},e),{},{list:!0})})),!d){e.next=6;break}return e.next=6,L(500);case 6:if(a){e.next=10;break}if(m){e.next=10;break}return l&&_((function(e){return(0,i.Z)((0,i.Z)({},e),{},{list:!1})})),e.abrupt("return",[]);case 10:return p=a?0:y.current.cursor,e.next=13,(0,S.So)({cursor:p,offset:20});case 13:if(0===(g=e.sent).statusCode){e.next=16;break}throw new Error;case 16:return y.current.cursor=g.cursor,y.current.total=g.total,T.cursor=g.cursor,T.total=g.total,v(g.hasMore),T.hasMore=g.hasMore,c((function(e){var n;return a?g.data:C()(n=[]).call(n,(0,u.Z)(e),(0,u.Z)(g.data))})),T.collects=a?g.data:C()(f=[]).call(f,(0,u.Z)(T.collects),(0,u.Z)(g.data)),e.abrupt("return",g.data);case 27:return e.prev=27,e.t0=e.catch(1),x.F.info("\u7f51\u7edc\u9519\u8bef"),e.abrupt("return",[]);case 31:return e.prev=31,l&&_((function(e){return(0,i.Z)((0,i.Z)({},e),{},{list:!1})})),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,27,31,34]])}))),[m]),E=(0,l.useCallback)((function(e){var n;c((function(n){var t;return C()(t=[]).call(t,(0,u.Z)(e),(0,u.Z)(n))})),T.collects=C()(n=[]).call(n,(0,u.Z)(e),(0,u.Z)(T.collects))}),[]),k=(0,l.useCallback)((function(){(!(arguments.length>0&&arguments[0]!==undefined)||arguments[0])&&(c(T.collects),v(T.hasMore),y.current.cursor=T.cursor,y.current.total=T.total)}),[]),{state:{collects:a,hasMore:m,loading:h},refs:{resRef:y},action:{getCollects:w,addCollects:E,reset:k}});return l.createElement(P.Provider,{value:b},l.createElement(je,e))}},45010:function(e,n,t){t.d(n,{Z:function(){return c}});var l=t(53864),o=t(85011),a="zSybAoWT",r="CD_WVDqx",i="suFEScFK",u=t(9909),c=function(e){var n=e.title,t=e.onClose;return l.createElement("div",{className:a},l.createElement("h1",{className:r},n),l.createElement(u.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(o.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:i,viewBox:"0 0 36 36",onClick:t}))}},54517:function(e,n,t){var l=t(30906),o=t(64408),a=t(32781),r=t(5594),i=t.n(r),u=t(1821),c=t.n(u),s=t(53864),d=t(12338),f=t(66279),m=t(60225),v=t(49006),p=t(12650),g=t(48557),h=t(11013);n.Z=function(e){var n=e.toastInGlobal,t=e.collectsInfo,r=e.logParams,u=e.onDone,_=e.onClose,y=(0,s.useRef)(null),w=!t,E=(0,s.useState)((null==t?void 0:t.collectionFolderName)||""),k=(0,a.Z)(E,2),b=k[0],C=k[1],S=(0,s.useState)(!!w||0!==t.status),I=(0,a.Z)(S,2),N=I[0],x=I[1],T=(0,s.useRef)(null),L=(0,s.useMemo)((function(){return!!c()(b).call(b)}),[b]),P=(0,s.useCallback)((0,o.Z)(i().mark((function e(){var o,a,c,s,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=9;break}return e.next=4,(0,v.vr)(b,N?0:1);case 4:c=e.sent,o=c.statusCode,a=c.collectInfo,e.next=15;break;case 9:return s=b===(null==t?void 0:t.collectionFolderName)?undefined:b,e.next=12,(0,v.tn)(t.collectionFolderId,s,N?0:1);case 12:f=e.sent,o=f.statusCode,a=f.collectInfo;case 15:if(!o){e.next=17;break}throw new Error;case 17:d.F.info({text:t?"\u6536\u85cf\u5939\u7f16\u8f91\u6210\u529f":"\u6536\u85cf\u5939\u521b\u5efa\u6210\u529f",elTarget:n?undefined:y.current}),(0,g.g)(t?"edit_favorite_folder_confirm":"create_favorite_folder_confirm",(0,l.Z)({click_position:"favorite_folder_panel",folder_name:a.collectionFolderName,folder_id:a.collectionFolderId,status:a.status},r)),null==u||u(a),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),d.F.info({text:"\u64cd\u4f5c\u5931\u8d25",elTarget:y.current});case 25:case"end":return e.stop()}}),e,null,[[0,22]])}))),[t,b,N,n,r,u]);return(0,s.useEffect)((function(){var e;null===(e=T.current)||void 0===e||e.focus()}),[T.current]),s.createElement("div",{ref:y,className:p.Z.create},s.createElement(f.I,{ref:T,className:p.Z.input,placeholder:"\u8bf7\u8f93\u5165\u6536\u85cf\u5939\u7684\u540d\u79f0\uff08".concat(15,"\u4e2a\u5b57\u4ee5\u5185\uff09"),value:b,maxLength:15,spellCheck:!1,onChange:function(e){return C(e)}}),s.createElement("div",{className:p.Z.public},s.createElement("div",{className:p.Z.left},s.createElement("span",{className:p.Z.text},"\u8bbe\u7f6e\u4e3a\u516c\u5f00"),s.createElement("span",{className:p.Z.info},"\u516c\u5f00\u540e\u6709\u673a\u4f1a\u88ab\u63a8\u8350\uff0c\u5e2e\u52a9\u5230\u66f4\u591a\u4eba")),s.createElement(m.r,{className:p.Z.toggle,checked:N,onChange:function(e){return x(e)}})),s.createElement("div",{className:p.Z.footer},!w&&s.createElement(h.Z,{className:p.Z.btn,type:"secondary",onClick:_},"\u53d6\u6d88"),s.createElement(h.Z,{className:p.Z.btn,disabled:!L,onClick:P},w?"\u786e\u8ba4":"\u786e\u8ba4\u4fee\u6539")))}},44978:function(e,n,t){var l=t(30906),o=t(32781),a=t(53864),r=t(4085),i=t(54517),u=t(12650),c=t(45010),s=t(48557),d=t(49149),f=t(17430);n.Z=function(e){var n=e.collectsInfo,t=e.toastInGlobal,m=e.logParams,v=e.disablePlayNextControl,p=e.onOpen,g=e.onDone,h=e.onClose,_=!n,y=_?"\u65b0\u5efa\u6536\u85cf\u5939":"\u7f16\u8f91\u6536\u85cf\u5939",w=(0,a.useState)(!1),E=(0,o.Z)(w,2),k=E[0],b=E[1],C=(0,a.useCallback)((function(){null==p||p(),b(!0),_&&(0,s.g)("create_favorite_folder_click",(0,l.Z)({click_position:"favorite_folder_panel"},m))}),[m,p,_]),S=(0,a.useCallback)((function(e){null==g||g(e),b(!1)}),[g]),I=(0,a.useCallback)((function(){null==h||h(),b(!1)}),[h]),N=(0,a.useMemo)((function(){return k?a.createElement(r.u,{maskClosable:!1,className:u.Z.modal,type:"custom",isHide:!k,onCancel:I},a.createElement(c.Z,{title:y,onClose:I}),a.createElement(i.Z,{toastInGlobal:t,collectsInfo:n,logParams:m,onDone:S,onClose:I})):null}),[k,S,m,I,t]);return(0,d.Z)(k,"maintain",v),(0,f.Z)(k,"maintain_collection_modal"),{open:C,modal:N,show:k}}},77103:function(e,n,t){t.d(n,{Z:function(){return d}});var l=t(32781),o=t(53864),a=t(4085),r="pFZA4WAG",i=t(17430),u=t(49149),c=t(26014),s=o.forwardRef((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{selectType:"multi"},n=e.awemeInfo,t=e.collected,s=e.collectMethod,d=e.selectType,f=e.disabledCollectionIds,m=e.disabledScrollBar,v=void 0===m||m,p=e.awaysReset,g=e.onMove,h=e.onClose,_=arguments.length>1?arguments[1]:undefined,y=(0,o.useState)(!1),w=(0,l.Z)(y,2),E=w[0],k=w[1],b=(0,o.useCallback)((function(){return k(!0)}),[]),C=(0,o.useCallback)((function(){return k(!1)}),[]);return(0,o.useImperativeHandle)(_,(function(){return{open:b,close:C}})),(0,i.Z)(E,"favorites_modal"),(0,u.Z)(E,"modal"),(0,o.useEffect)((function(){return v?(document.body.style.overflow=E?"hidden":"",function(){document.body.style.overflow=""}):function(){}}),[E,v]),o.createElement(a.u,{type:"custom",maskClosable:!1,className:r,isHide:!E,onCancel:function(){return k(!1)}},o.createElement(c.Z,{show:E,type:"modal",selectType:d,awemeInfo:n,collected:t,collectMethod:s,disabledCollectionIds:f,awaysReset:p,onClose:function(){k(!1),null==h||h()},onCollectDone:function(){return k(!1)},onMove:g}))})),d=s},48557:function(e,n,t){t.d(n,{g:function(){return i}});var l=t(30906),o=t(13795),a=t(72603),r=new o.hD({favorite_video_bubble_show:{eventName:"favorite_video_bubble_show",params:{group_id:"",enter_from:"",enter_from_merge:""}},favorite_video_bubble_click:{eventName:"favorite_video_bubble_click",params:{click_position:"",enter_from:"",enter_from_merge:"",group_id:""}},add_to_favorite_folder_panel_show:{eventName:"add_to_favorite_folder_panel_show",params:{folder_cnt:0,enter_from:"",enter_from_merge:"",group_id:""}},create_favorite_folder_click:{eventName:"create_favorite_folder_click",params:{click_position:"",enter_from:"",enter_from_merge:""}},create_favorite_folder_confirm:{eventName:"create_favorite_folder_confirm",params:{click_position:"",folder_name:"",folder_id:"",status:0,enter_from:"",enter_from_merge:""}},edit_favorite_folder_confirm:{eventName:"edit_favorite_folder_confirm",params:{click_position:"",folder_name:"",folder_id:"",status:0,enter_from:"",enter_from_merge:""}},click_favorite_video:{eventName:"click_favorite_video",params:{click_method:"panel",folder_name:"",folder_id:""}},favorite_video:{eventName:"favorite_video",params:{click_method:"panel",folder_name:"",folder_id:"",item_duration_ms:0}}}),i=function(e,n){return r.sendLog(e,(0,l.Z)({enter_from_merge:(0,a.yW)(),enter_from:(0,a.vM)()},n))}},66534:function(e,n,t){function l(e,n){var t,l;return(null==e||null===(t=e.collectionReverse)||void 0===t?void 0:t[n])!==undefined?(null==e||null===(l=e.collectionReverse)||void 0===l?void 0:l[n])||0:"collection_route"===n?(null==e?void 0:e.collectionRoute)||0:"collection_layout"===n&&(null==e?void 0:e.collectionLayout)||0}t.d(n,{Z:function(){return l}})},17430:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(53864),o=t(76445);function a(e,n){(0,l.useEffect)((function(){return e?(0,o.o)({pausePlayControlShortcut:!0,pauseCustomShortcut:!0,pauseGlobalShortcut:!0},n):(0,o.m)(n),function(){(0,o.m)(n)}}),[e,n])}},49149:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(53864),o=t(97876);function a(e,n,t){(0,l.useEffect)((function(){t||(e?o.emit(o.EVENT.videoStopPlayNext):o.emit(o.EVENT.videoRemoveStopPlayNext))}),[e,t])}},48431:function(e,n,t){t.d(n,{e:function(){return p},J:function(){return v}});var l,o,a=t(53864),r=t(79705),i=t.n(r),u="ysRqqDJY",c="nWRNiVz7",s="GflTOyWb",d=t(9909);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},f.apply(this,arguments)}var m=function(e){return a.createElement("svg",f({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=a.createElement("path",{d:"M1.455 0C.65 0 0 .651 0 1.455V8c0 .803.651 1.455 1.455 1.455H8c.803 0 1.455-.652 1.455-1.455V1.455C9.455.65 8.803 0 8 0H1.455z",fill:"#fff"})),o||(o=a.createElement("path",{d:"M4 12a1.455 1.455 0 01-1.455-1.454h5.819a2.182 2.182 0 002.181-2.182V2.545C11.35 2.545 12 3.197 12 4v5.09A2.909 2.909 0 019.09 12H4z",fill:"#fff"})))},v=function(e){var n=e.className,t=void 0===n?"":n,l=e.svgClassName,o=void 0===l?"":l;return a.createElement("div",{className:i()(u,t)},a.createElement(d.Z,{className:i()(c,o),src:globalThis.xssNamespace.douyin_web.filterUrl(m,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"}),"\u56fe\u6587")},p=function(e){var n=e.className,t=void 0===n?"":n;return a.createElement("div",{className:i()(s,t)},a.createElement(d.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(m,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"}))}},49083:function(e,n,t){t.d(n,{Q:function(){return s}});var l=t(65146),o=t(53864),a=t(79705),r=t.n(a),i="AEqXJm6m",u="nYwTFZJg",c="rDrSm5ae",s=function(e){var n=e.isChecked,t=e.onClick,a=e.className;return o.createElement("button",{type:"button","aria-checked":"true",className:r()(i,a,(0,l.Z)({},c,n)),"aria-labelledby":"xg-switch-pip",onClick:t},o.createElement("span",{className:u}))}},81272:function(e,n,t){t.r(n);var l=t(30906),o=t(32781),a=t(42447),r=t.n(a),i=t(53864),u=i.forwardRef((function(e,n){var t=e.data,a=e.className,u=e.loop,c=e.autoplay,s=void 0===c||c,d=e.onLoopComplete,f=e.onComplete,m=e.onInit,v=e.hidden,p=e.rendererSettings,g=e.assetsPath,h=i.useRef(),_=i.useRef(),y=i.useState(!1),w=(0,o.Z)(y,2),E=w[0],k=w[1];return i.useEffect((function(){if(_.current&&E&&f){var e=_.current;return null==e||e.addEventListener("complete",f),function(){null==e||e.removeEventListener("complete",f)}}return undefined}),[E,f]),i.useEffect((function(){if(_.current&&E&&d){var e=_.current;return e.addEventListener("loopComplete",d),function(){e.removeEventListener("loopComplete",d)}}return undefined}),[E,d]),i.useEffect((function(){if(_.current&&E&&m){var e=_.current;return null==e||e.addEventListener("DOMLoaded",m),function(){null==e||e.removeEventListener("DOMLoaded",m)}}return undefined}),[E,m]),i.useLayoutEffect((function(){var e;h.current&&r()&&(_.current=null===r()||void 0===r()||null===(e=r().loadAnimation)||void 0===e?void 0:e.call(r(),{container:h.current,renderer:"svg",animationData:t,loop:u,autoplay:s,rendererSettings:(0,l.Z)({runExpressions:!1},p),assetsPath:g}),k(!0))}),[]),i.useEffect((function(){return function(){var e,n;null===(e=_.current)||void 0===e||null===(n=e.destroy)||void 0===n||n.call(e)}}),[]),i.useImperativeHandle(n,(function(){return{getLottieInstance:function(){return _.current}}})),i.createElement("div",{hidden:v,ref:h,className:a})}));n.default=i.memo(u)},17134:function(e,n,t){t.r(n);var l=t(81272);n.default=l.default},31447:function(e,n,t){var l=t(64408),o=t(65902),a=t(5594),r=t.n(a),i=t(68493),u=t.n(i),c=t(40032),s=t(53864),d=t(59676),f=t(25902),m=(0,d.default)((function(){return t.e(5561).then(t.bind(t,9582))})),v=function(e){e.stopPropagation()},p=null;n.Z=function(e){var n=e.title,t=e.cancelBtnText,a=e.confirmBtnText,i=e.onConfirm,d=e.onCancel,g=e.otherProps,h=void 0===g?{}:g,_=null;if(p)_=function(){p=null};else{var y=document.createElement("div"),w=document.body,E=(0,c.createRoot)(y);(0,f.r)()&&(w=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement),w.appendChild(y),_=function(){var e;w.style.overflow="",E.unmount(),w.contains(y)&&w.removeChild(y),null===(e=document)||void 0===e||e.removeEventListener("keydown",v,!0)},w.style.overflow="hidden",p=new(u())((function(e,l){var r;null===(r=document)||void 0===r||r.addEventListener("keydown",v,!0),E.render(s.createElement(m,(0,o.Z)({title:n,cancelBtnText:t,confirmBtnText:a,onCancel:function(){l()},onConfirm:function(){e(!0)}},h)))}))}return p.then((0,l.Z)(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=null,e.prev=1,e.next=4,null==i?void 0:i();case 4:return e.prev=4,null===(n=_)||void 0===n||n(),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),(function(){var e;p=null,null==d||d(),null===(e=_)||void 0===e||e()})).catch((function(){var e;p=null,null==d||d(),null===(e=_)||void 0===e||e()})),_}},4868:function(e,n,t){t.d(n,{s:function(){return u}});var l=t(32781),o=t(11227),a=t.n(o),r=t(53864),i=t(11157),u=function(){var e=(0,i.x)(),n=(0,l.Z)(e,2),t=(n[0],n[1]);return{handleHiddenLog:(0,r.useCallback)((function(e){var n;if(!a()(n=[i.O.LogTrace,i.O.UserInfo]).call(n,e))return!0;t()}),[])}}},87486:function(e,n,t){t.d(n,{Z:function(){return _}});var l,o=t(65146),a=t(53864),r=t(79705),i=t.n(r),u=t(19681),c=t(86846),s="MwxqXGbB",d="Kbx0TkOX",f="oh9dyY7y";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},m.apply(this,arguments)}var v,p=function(e){return a.createElement("svg",m({width:12,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=a.createElement("path",{d:"M6 2.771l.78 1.945c.164.41.546.693.986.73l2.12.176-1.648 1.466a1.167 1.167 0 00-.362 1.134l.49 2.13-1.74-1.104a1.167 1.167 0 00-1.251 0l-1.74 1.103.489-2.13a1.167 1.167 0 00-.362-1.133L2.113 5.622l2.121-.177c.441-.037.823-.319.987-.729l.78-1.945zM6.512.913a.543.543 0 00-1.024 0l-1.35 3.37-3.455.287c-.501.042-.7.719-.313 1.063L2.987 7.96l-.806 3.51c-.12.516.398.932.824.662L6 10.232l2.995 1.9c.426.27.943-.146.825-.663L9.013 7.96l2.617-2.327c.387-.344.188-1.021-.312-1.063l-3.455-.288-1.35-3.37z",fill:"#fff"})))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},g.apply(this,arguments)}var h=function(e){return a.createElement("svg",g({width:12,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),v||(v=a.createElement("path",{d:"M6.512.913a.543.543 0 00-1.024 0l-1.35 3.37-3.455.287c-.501.042-.7.719-.313 1.063L2.987 7.96l-.806 3.51c-.12.516.398.932.824.662L6 10.232l2.995 1.9c.426.27.943-.146.825-.663L9.013 7.96l2.617-2.327c.387-.344.188-1.021-.312-1.063l-3.455-.288-1.35-3.37z",fill:"#FACE15"})))},_=function(e){var n=e.collapseStatus,t=void 0!==n&&n,l=e.handleClick,r=e.className,m=e.isFetching;return a.createElement(a.Fragment,null,m&&a.createElement("div",{className:i()(s,f,r)}),!m&&a.createElement(u.z,{className:i()(s,r,(0,o.Z)({},d,t)),onClick:l},Boolean(!t)&&a.createElement(c.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(p,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:13,viewBox:"0 0 12 13"}),Boolean(t)&&a.createElement(c.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(h,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:13,viewBox:"0 0 12 13"}),a.createElement("span",null,t?"\u5df2\u6536\u85cf":"\u6536\u85cf")))}},30758:function(e,n,t){t.d(n,{vA:function(){return L},yw:function(){return T},ZP:function(){return P}});var l=t(65902),o=t(30906),a=t(32781),r=t(85792),i=t.n(r),u=t(53864),c=t(79705),s=t.n(c),d=t(59676),f=t(91287),m=t(50799),v=t(36177),p=t(97876),g=t(72603),h=t(25902),_=t(9191),y=t(2015),w="DhEeeU3v",E="J8_Uj1cS",k="EDG47eF_",b="nFZmQGu5",C="TVkq94nr",S=t(31554),I=(0,d.default)((function(){return Promise.all([t.e(9344),t.e(2003),t.e(9955),t.e(2880),t.e(9083),t.e(3237),t.e(6780)]).then(t.bind(t,87653))}),{ssr:!1}),N=(0,d.default)((function(){return t.e(5269).then(t.bind(t,65734))}),{ssr:!1}),x=(0,d.default)((function(){return t.e(5269).then(t.bind(t,25944))}),{ssr:!1}),T={Video:"share_video",Live:"share_live",User:"share_user",Vs:"share_vs",Comment:"share_comment"},L={VideoPage:"VideoPage",UserPage:"UserPage"},P=function(e){var n,t=e.className,r=e.awemeInfo,c=e.hidden,d=e.awemelogPb,P=e.isLogin,Z=e.handleClose,M=e.toast,R=e.reportExtraParams,D=void 0===R?{}:R,O=e.shareShowMethod,A=e.onMouseEnter,F=e.onMouseLeave,U=(e.handleClickCopy,e.handleChooseFriend),B=e.handleShareToFriend,V=e.handleShareSuccess,j=e.shareType,W=void 0===j?T.Video:j,H=e.uid,z=e.userInfo,G=e.commentInfo,K=e.inanyPage,q=void 0===K?L.VideoPage:K,Q=e.loginDispatch,X=e.hideShareContent,Y=e.shareeListHeight,J=e.width,$=e.onFriendSearching,ee=(0,u.useState)(!1),ne=(0,a.Z)(ee,2),te=ne[0],le=ne[1],oe=(0,u.useState)(!1),ae=(0,a.Z)(oe,2),re=ae[0],ie=ae[1],ue=(0,u.useState)(!1),ce=(0,a.Z)(ue,2),se=ce[0],de=ce[1],fe=(0,u.useState)(!1),me=(0,a.Z)(fe,2),ve=me[0],pe=me[1],ge=(0,u.useRef)(null),he=(0,u.useRef)(null),_e=p,ye=_e.EVENT,we=(0,u.useState)(!c),Ee=(0,a.Z)(we,2),ke=Ee[0],be=Ee[1],Ce=(0,u.useRef)(!c),Se=(0,u.useMemo)((function(){return!(re&&!se)&&c}),[c,re,se]);return(0,u.useEffect)((function(){c||(de(!1),(0,S.removeLoginPanel)())}),[c]),(0,u.useEffect)((function(){c||(be(!0),_e.emit(ye.videoStopPlayNext)),c&&ke&&_e.emit(ye.videoRemoveStopPlayNext),Ce.current=!c}),[c]),(0,u.useEffect)((function(){return function(){Ce.current&&_e.emit(ye.videoRemoveStopPlayNext)}}),[]),(0,u.useEffect)((function(){var e;if(!c)switch(W){case T.Vs:case T.Video:y.Z.sendLog("shareMenuShow",(0,o.Z)({urlParamList:["previous_page"],author_id:null==r||null===(e=r.authorInfo)||void 0===e?void 0:e.uid,group_id:null==r?void 0:r.awemeId,enter_from:(0,g.mo)(),log_pb:d,is_full_screen:(0,h.r)()?"1":"0",tab_name:m.getTabName()||(0,_.Rs)("tab_name")||"",click_method:O,share_type:"video"},D));break;case T.User:y.Z.sendLog("shareMenuShow",{enter_from:(0,g.vM)(),share_type:"user",click_method:O});break;case T.Comment:y.Z.sendLog("shareMenuShow",{enter_from:(0,g.vM)(),share_type:"comment",click_method:O})}c||te||le(!0)}),[c,O]),(0,u.useEffect)((function(){var e,n=function(e){return e.stopPropagation()};return null===(e=ge.current)||void 0===e||e.addEventListener("wheel",n),function(){var e;null===(e=ge.current)||void 0===e||e.removeEventListener("wheel",n)}}),[]),(0,u.useEffect)((function(){i()((function(){var e;if(!c&&null!=he&&null!==(e=he.current)&&void 0!==e&&e.clientHeight){pe(he.current.clientHeight-61<204)}}),0)}),[c,re]),(0,u.useEffect)((function(){r&&(r.logPb=d)}),[r]),(0,u.useEffect)((function(){var e=function(e){var n,t;null!==(n=ge.current)&&void 0!==n&&null!==(t=n.contains)&&void 0!==t&&t.call(n,e.target)||re||(null==Z||Z(),null==$||$(!1))};return document.addEventListener("click",e,!0),function(){document.removeEventListener("click",e,!0)}}),[re]),!1===(null==r||null===(n=r.status)||void 0===n?void 0:n.allowShare)?u.createElement("div",{ref:ge,"data-e2e":r?"video-share-container":"user-share-container"},u.createElement("div",{className:s()(t,w,E,b,C),onMouseEnter:function(){return null==A?void 0:A()},onMouseLeave:function(){return null==F?void 0:F()},style:{display:Se?"none":"flex"},"data-inuser":q===L.UserPage,ref:he},"\u8be5\u4f5c\u54c1\u5df2\u88ab\u9650\u5236\u5206\u4eab")):u.createElement("div",{ref:ge,"data-e2e":r?"video-share-container":"user-share-container"},(null==r?void 0:r.awemeType)===v.ed.XgVideo&&u.createElement("div",{className:s()(t,w,E,k),onMouseEnter:function(){return null==A?void 0:A()},onMouseLeave:function(){return null==F?void 0:F()},style:{display:Se?"none":"flex",width:324},"data-inuser":q===L.UserPage},(!c||te)&&u.createElement(f.SV,null,u.createElement("div",{style:{display:re||se?"none":"block",width:"100%"}},u.createElement(N,(0,l.Z)({},e,{shareType:W})))),P&&(!c||re)&&((null==r?void 0:r.awemeType)!==v.ed.XgVideo||H)&&W!==T.Vs&&u.createElement(I,{toast:M,close:function(){de(!0),ie(!1),null==Z||Z(),p.emit(p.EVENT.videoRemoveStopPlayNext)},awemeInfo:r,shareType:W,shareUserInfo:z,shareCommentInfo:G,handleExpand:function(){return ie(!0)},handleCollapse:function(){ie(!1)},handleHasFriends:function(e){},handleChooseFriend:U,handleShareToFriend:B,handleShareSuccess:V,reportExtraParams:(0,o.Z)((0,o.Z)({},D),{},{from_xigua:(null==r?void 0:r.awemeType)===v.ed.XgVideo?1:0}),shareeListHeight:Y,onFriendSearching:$})),(null==r?void 0:r.awemeType)!==v.ed.XgVideo&&u.createElement("div",{className:s()(t,w,E,b),onMouseEnter:function(){return null==A?void 0:A()},onMouseLeave:function(){return null==F?void 0:F()},style:(0,o.Z)({display:Se?"none":"flex"},J?{width:J}:{}),"data-inuser":q===L.UserPage,ref:he},(!c||re)&&((null==r?void 0:r.awemeType)!==v.ed.XgVideo||H)&&W!==T.Vs&&(P?u.createElement(I,{toast:M,close:function(){de(!0),ie(!1),null==Z||Z(),p.emit(p.EVENT.videoRemoveStopPlayNext)},awemeInfo:r,shareType:W,shareUserInfo:z,shareCommentInfo:G,handleExpand:function(){return ie(!0)},handleCollapse:function(){ie(!1)},handleHasFriends:function(e){},handleChooseFriend:U,handleShareToFriend:B,handleShareSuccess:V,reportExtraParams:(0,o.Z)((0,o.Z)({},D),{},{from_xigua:(null==r?void 0:r.awemeType)===v.ed.XgVideo?1:0}),shareeListHeight:Y,onFriendSearching:$}):u.createElement(x,{change:function(){null==Q||Q({type:"updateUserInfo"})}})),(!c||te)&&!X&&u.createElement(f.SV,null,u.createElement("div",{style:{display:re||se?"none":"block",width:"100%"}},u.createElement(N,(0,l.Z)({},e,{shareType:W,isMiniQrCode:ve}))))))}},2015:function(e,n,t){t.d(n,{h:function(){return o}});var l=t(13795),o="web_code_link";n.Z=new l.hD({shareMenuShow:{eventName:"share_menu_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",share_type:""}},shareVideo:{eventName:"share_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",type:"",is_full_screen:"0",click_method:"",tab_name:"",from_follow_list:"0",from_xigua:0,aweme_type:"",personal_relation:"",relation:"",show_type:""}},shareUser:{eventName:"share_user",params:{chat_type:"",type:"",author_id:"",personal_relation:"",relation:""}},clickFavoriteVideo:{eventName:"click_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}},favoriteVideo:{eventName:"favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:"",clarity:"",aweme_type:"",item_duration_ms:0}},favoriteVideoFailed:{eventName:"favorite_video_failed",params:{click_from:"share_board",err_code:1,previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}},cancelFavoriteVideo:{eventName:"cancel_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:"",item_duration_ms:0}},download:{eventName:"download",params:{enter_from:"",enter_from_merge:"",group_id:"",click_from:""}},unsupportDownloadShow:{eventName:"unsupport_download_show",params:{enter_from:"",enter_from_merge:"",group_id:""}}})},58647:function(e,n,t){t.d(n,{B:function(){return l}});var l=function(e){return e.RECOMMEND="recommend",e.FOLLOW="follow",e.FRIEND="friend",e.TOPIC="topic",e}({})},40044:function(e,n,t){t.d(n,{G9:function(){return W},JA:function(){return z},zg:function(){return G}});var l,o=t(30906),a=t(30673),r=t(64408),i=t(5594),u=t.n(i),c=t(34346),s=t.n(c),d=t(50750),f=t.n(d),m=t(11227),v=t.n(m),p=t(94090),g=t.n(p),h=t(56442),_=t.n(h),y=t(58144),w=t.n(y),E=t(53361),k=t.n(E),b=t(26447),C=t.n(b),S=t(8e3),I=t.n(S),N=t(85792),x=t.n(N),T=t(84639),L=t.n(T),P=t(53864),Z=t(66453),M=t(353),R=t(36177),D=t(13971),O=t(72603),A=t(28640),F=t(97876),U=t(71116),B=t(5611),V=new(t(13795).hD)({clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0"}},feedRequest:{eventName:"feed_request",params:{enter_from:"",is_first:0,is_click:0,is_auto_play:0}},feedRequestResponse:{eventName:"feed_request_response",params:{enter_from:"",is_first:0,video_count:0,duration:0,is_success:0,is_click:0,is_auto_play:0,live_position:-1}}}),j=t(58647);function W(){var e=(0,D.$o)(M.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return Number(null!=e?e:0)}var H=s()(l=f()(j.B)).call(l,(function(e){return j.B[e]})),z=function(e){var n=e.refCancelTabFeedFunc,t=e.setAwemeInfoList,l=e.fetchSlideList,o=e.fromTab,a=e.cb;(0,r.Z)(u().mark((function e(){var r,i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==n||null===(r=n.current)||void 0===r||r.call(n),t([]),i=0,v()(H).call(H,o)&&(i=(new Date).getTime(),V.sendLog("feedRequest",{enter_from:(0,O.yW)(),is_first:0,is_click:1,is_auto_play:W()})),e.next=6,l({mode:"refresh"});case 6:c=e.sent,v()(H).call(H,o)&&V.sendLog("feedRequestResponse",{enter_from:(0,O.yW)(),is_first:0,video_count:null===(s=c.data)||void 0===s?void 0:s.length,duration:(new Date).getTime()-i,is_success:0===c.statusCode?1:0,is_click:1,is_auto_play:W()}),0===c.statusCode&&c.data&&t(c.data),null==a||a();case 10:case"end":return e.stop()}}),e)})))()},G=function(e){var n=e.swiper,t=e.awemeInfoList,l=e.setAwemeInfoList,i=e.swiperCallBack,c=e.fetchSlideList,d=e.fromTab,f=e.lastItemCb,m=e.getVideoFilterType,p=e.abTestData,h=void 0===p?{}:p,y=e.initialRecommendAwemeList,E=e.maxLimit,b=(0,P.useRef)(-1),S=(0,P.useRef)(!1),N=(0,P.useRef)(!1),T=(0,P.useRef)([]),z=(0,P.useRef)(!1),G=(0,P.useRef)(0),K=(0,P.useCallback)((function(){var e=n.activeIndex;l((function(n){var t;return g()(t=_()(n).call(n,0,e)).call(t,_()(n).call(n,e+1))}))}),[n]),q=(0,P.useCallback)((function(){(arguments.length>0&&arguments[0]!==undefined&&arguments[0]||Math.abs((null==n?void 0:n.activeIndex)-t.length)<=4&&!S.current)&&(S.current=!0,(0,A.K)((0,r.Z)(u().mark((function e(){var t,o,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,v()(H).call(H,d)&&(t=(new Date).getTime(),V.sendLog("feedRequest",{enter_from:(0,O.yW)(),is_first:0,is_click:0,is_auto_play:W()})),e.next=4,c({mode:"loadmore"});case 4:o=e.sent,v()(H).call(H,d)&&V.sendLog("feedRequestResponse",{enter_from:(0,O.yW)(),is_first:0,video_count:null===(r=o.data)||void 0===r?void 0:r.length,duration:(new Date).getTime()-t,is_success:0===o.statusCode?1:0,is_click:0,is_auto_play:W()}),0===o.statusCode?(G.current=0,l((function(e){var t,l=$(e,o.data),r=g()(t=[]).call(t,(0,a.Z)(e),(0,a.Z)(l));if(E)for(var i=0;i<r.length&&i<(null==n?void 0:n.activeIndex)-E;i++)r[i]=false;return S.current=!1,r}))):S.current=!1;case 7:case"end":return e.stop()}}),e)})))))}),[c,n,t]),Q=(0,P.useCallback)((function(e,n){var t=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).isFirst;void 0!==t&&t||(null==i||i(),e&&"click_button"!==e&&F.emit(F.EVENT.reportPlayPrev,{clickFrom:e}))}),[i]),X=(0,P.useCallback)((function(e,n){var t=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).isLast,l=void 0!==t&&t;if(q(),l)null==f||f();else{var o=U.Le.getConfig(U.gI.VideoFeedList),a=(null==o?void 0:o.autoPlayCount)||1;if("auto"===e){var r=a+1;U.Le.setConfig(U.gI.VideoFeedList,{autoPlayCount:r})}else null==i||i();e&&"click_button"!==e&&F.emit(F.EVENT.reportPlayNext,{clickFrom:e})}}),[q,f,i]),Y=(0,P.useCallback)((function(e){var l,a,r;if((null==n||!n.destroyed)&&n){var i=(e||{}).from,u=null!==(l=U.Le.getConfig(U.gI.PreventSlideNext))&&void 0!==l?l:{},c=u.isPrevent,s=void 0!==c&&c,d=u.skipAuto;s&&(!(void 0===d||d)||"auto"!==i&&i)?F.emit(F.EVENT.swiperSlideNextPrevented):null!=e&&e.liveEnded?b.current>n.activeIndex&&n.activeIndex>0?J((0,o.Z)((0,o.Z)({},e),{},{liveEnded:!1})):Y((0,o.Z)((0,o.Z)({},e),{},{liveEnded:!1})):(U.Le.setConfig(U.gI.FeedBackInfo,{activeIndex:null!==(a=n.activeIndex+1)&&void 0!==a?a:-1}),X(i,t[n.activeIndex],{isLast:n.activeIndex===t.length-1}),b.current=n.activeIndex,null===(r=n.slideNext)||void 0===r||r.call(n))}}),[n,t,X]),J=(0,P.useCallback)((function(e){var l,o;if(n&&!n.destroyed){U.Le.setConfig(U.gI.FeedBackInfo,{activeIndex:null!==(l=n.activeIndex-1)&&void 0!==l?l:-1});var a=(e||{}).from;Q(a,t[n.activeIndex],{isFirst:0===n.activeIndex}),b.current=n.activeIndex,null===(o=n.slidePrev)||void 0===o||o.call(n)}}),[n,t,Q]),$=(0,P.useCallback)((function(e,n){for(var t=[],l=function(l){w()(e).call(e,(function(e){var t,o,a,r,i,u;return(null==e?void 0:e.awemeType)!==R.ed.LiveCard?(null==e?void 0:e.awemeId)===(null===(t=n[l])||void 0===t?void 0:t.awemeId):(null==e||null===(o=e.cellRoom)||void 0===o||null===(a=o.rawdata)||void 0===a?void 0:a.id_str)===(null===(r=n[l])||void 0===r||null===(i=r.cellRoom)||void 0===i||null===(u=i.rawdata)||void 0===u?void 0:u.id_str)}))||t.push(n[l])},o=0;o<n.length;o++)l(o);return t}),[]),ee=(0,P.useCallback)((function(){q(!0)}),[q]);(0,P.useEffect)((function(){(0,r.Z)(u().mark((function e(){var n,t,o,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==y||!y.length){e.next=2;break}return e.abrupt("return",undefined);case 2:return n=0,v()(H).call(H,d)&&(n=(new Date).getTime(),V.sendLog("feedRequest",{enter_from:(0,O.yW)(),is_first:1,is_click:0,is_auto_play:W()})),S.current=!0,e.next=7,c({mode:"refresh"});case 7:t=e.sent,S.current=!1,v()(H).call(H,d)&&V.sendLog("feedRequestResponse",{enter_from:(0,O.yW)(),is_first:1,video_count:null===(o=t.data)||void 0===o?void 0:o.length,duration:(new Date).getTime()-n,is_success:0===t.statusCode?1:0,is_click:0,is_auto_play:W(),live_position:null==t||null===(r=t.data)||void 0===r?void 0:k()(r).call(r,(function(e){return 101===(null==e?void 0:e.awemeType)}))}),0===t.statusCode&&t.data&&l((function(e){var n;return g()(n=[]).call(n,(0,a.Z)(e||[]),(0,a.Z)($(e,t.data)||[]))}));case 11:case"end":return e.stop()}}),e)})))()}),[y]),(0,P.useEffect)((function(){(0,r.Z)(u().mark((function e(){var n,l,o,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d===j.B.RECOMMEND){e.next=2;break}return e.abrupt("return");case 2:if(!(null!=(n=(0,D.$o)(M.LocalStorageKeys.WallPaper))&&n.disappear||null!=n&&n.timetamp&&new Date(C()()).toDateString()===new Date(null==n?void 0:n.timetamp).toDateString())){e.next=5;break}return e.abrupt("return");case 5:if(N.current||!((null==t?void 0:t.length)>7)){e.next=12;break}return N.current=!0,e.next=9,Z.a.WallpaperManager.getWallpaperFeed({videoTypeSelect:null==m?void 0:m({landscapeStrategy:null==h?void 0:h.landscapeStrategy,recommendVideoSelectType:null==h?void 0:h.recommendVideoSelectType,recRemoveHeader:null==h?void 0:h.recRemoveHeader})});case 9:(null==(o=e.sent)||null===(l=o.awemeList)||void 0===l?void 0:l.length)>0&&(U.Le.setConfig(U.gI.WallPaperIds,[null===(a=o.awemeList[0])||void 0===a?void 0:a.awemeId]),U.Le.setConfig(U.gI.WallPaperPosition,null==o?void 0:o.position),T.current=null==o||null===(r=o.awemeList)||void 0===r?void 0:_()(r).call(r,0,1));case 12:case"end":return e.stop()}}),e)})))()}),[t]),(0,P.useEffect)((function(){var e=F.listen(F.EVENT.wallPaperInsert,(function(e){var n=(0,D.$o)(M.LocalStorageKeys.WallPaper);null!=n&&n.disappear||null!=n&&n.timetamp&&new Date(C()()).toDateString()===new Date(null==n?void 0:n.timetamp).toDateString()||l((function(n){var t,l,o=k()(n).call(n,(function(n){return n.awemeId===e}));return o>-1&&null!==(t=T.current)&&void 0!==t&&t.length&&!z.current?(z.current=!0,(0,D.qQ)(M.LocalStorageKeys.WallPaper,{timetamp:C()()}),g()(l=_()(n).call(n,0,o+1)).call(l,T.current,_()(n).call(n,o+1))):n}))}));return function(){null==e||e()}}),[]),(0,P.useEffect)((function(){var e,n=null!==(e=U.Le.getConfig(U.gI.CheckAwemeList))&&void 0!==e?e:[],l=I()(t).call(t,(function(e){return e.awemeType!==R.ed.LiveCard}));if(l.length>0){if(0===n.length){var o=s()(l).call(l,(function(e){return{vid:e.awemeId,time:C()(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}}));U.Le.setConfig(U.gI.CheckAwemeList,o)}if(n.length>0){var a,r=n[n.length-1],i=k()(l).call(l,(function(e){return e.awemeId===r.vid})),u=s()(a=_()(l).call(l,i+1)).call(a,(function(e){return{vid:e.awemeId,time:C()(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}}));U.Le.setConfig(U.gI.CheckAwemeList,g()(n).call(n,u))}}}),[t]),(0,P.useEffect)((function(){if(n){var e=-1,l=function(){-1!==e&&(n.activeIndex>e?X:Q)("drag",t[n.activeIndex])},o=function(){e=n.activeIndex,n.once("slideChange",l)},a=function(){x()((function(){return e=-1}))},r=function(){n.once("touchMove",o)};try{n.on("touchStart",r),n.on("touchEnd",a)}catch(i){}return function(){try{n.off("touchMove",o),n.off("touchEnd",a),n.off("touchStart",r)}catch(i){}}}}),[n,t]);var ne=(0,P.useMemo)((function(){var e={};return("both"===(null==h?void 0:h.preloadCountApplySideServer)||(0,B.DT)()&&"client"===(null==h?void 0:h.preloadCountApplySideServer)||!(0,B.DT)()&&"web"===(null==h?void 0:h.preloadCountApplySideServer))&&(e=null==h?void 0:h.preloadCountServer),L()({},null==h?void 0:h.preloadCount,e)}),[h]);return(0,P.useEffect)((function(){if(n){if(0===n.activeIndex){var e=_()(t).call(t,1,2);U.Le.setConfig(U.gI.PreloadList,e)}var l=function(){if(null!=ne&&ne.open){var e,l,o=n.activeIndex+2,a=(null==ne?void 0:ne.count)||1,r=_()(e=I()(l=_()(t).call(t,o)).call(l,(function(e){return(null==e?void 0:e.awemeType)===R.ed.Normal}))).call(e,0,a);U.Le.setConfig(U.gI.PreloadList,r)}else{var i=_()(t).call(t,n.activeIndex+1,n.activeIndex+3);U.Le.setConfig(U.gI.PreloadList,i)}};try{n.on("slideChange",l)}catch(o){}return function(){try{n.off("slideChange",l)}catch(o){}}}}),[n,t,ne]),(0,P.useEffect)((function(){if(n&&0===(null==t?void 0:t.length))try{n.slideTo(0,0)}catch(e){}}),[n,t]),{deleteCurrentSwiper:K,nextPageFunc:Y,lastPageFunc:J,retryFunc:ee}}},56042:function(e,n,t){t.d(n,{cy:function(){return _},mM:function(){return w},vV:function(){return k},aW:function(){return C},zo:function(){return I},Ci:function(){return N},nJ:function(){return T},fF:function(){return L}});var l,o=t(30906),a=t(64408),r=t(5594),i=t.n(r),u=t(67624),c=t.n(u),s=t(50750),d=t.n(s),f=t(92524),m=t.n(f),v=(t(94090),t(34452)),p=t(21518),g=t(92267),h=t(28712),_=(l={},{setPreloadCache:function(e,n){l[e]=n},getPreloadCache:function(e){if(e in l)return l[e]}}),y=new(c()),w=function(e){return e.PROFILE_BTN_CLICKED="profileBtnClicked",e.COMMENT_BTN_CLICKED="commentBtnClicked",e}({}),E=function(e){return e.PROFILE_INFERENCE_RESULT="profileInferenceResult",e.COMMENT_INFERENCE_RESULT="commentInferenceResult",e}({}),k=function(e){return e.PROFILE_PRELOAD="profilePreload",e.COMMENT_PRELOAD="commentPreload",e}({}),b=function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.U2({key:n,defaultValue:p.TCC_DEFAULT_VALUE_MAP.get(n)});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();function C(e){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(i().mark((function e(n){var t,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=y.get(n))){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,b(n);case 5:return l=e.sent,y.set(n,l),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(e,n,t,l,o){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[],r=arguments.length>6?arguments[6]:undefined,i=t===k.COMMENT_PRELOAD,u=i?E.COMMENT_INFERENCE_RESULT:E.PROFILE_INFERENCE_RESULT,c=_.getPreloadCache(u);c={scene:i?"comment_preload_ml":"profile_preload_ml",model_name:l,s_result:String(n),f_result:e,threshold:o,with_feature:a.toString(),is_ad:r},_.setPreloadCache(u,c)},N=function(){var e=_.getPreloadCache(E.COMMENT_INFERENCE_RESULT)||{};if(e&&d()(e).length>0){var n=_.getPreloadCache(w.COMMENT_BTN_CLICKED),t=(0,o.Z)((0,o.Z)({},e),{},{s_real:String(n),f_real:n?1:0});g.i.sendLog("aiPreloadResult",t)}x()},x=function(){_.setPreloadCache(E.COMMENT_INFERENCE_RESULT,{}),_.setPreloadCache(E.PROFILE_INFERENCE_RESULT,{}),_.setPreloadCache(w.COMMENT_BTN_CLICKED,!1),_.setPreloadCache(w.PROFILE_BTN_CLICKED,!1)},T=function(e){_.setPreloadCache(e,!0)};function L(e){return function(){try{var e;if((0,h.p)())return;if(m()(e=window.location.search).call(e,"pylon-debug")>-1)for(var n=arguments.length,t=new Array(n),l=0;l<n;l++)t[l]=arguments[l]}catch(o){}}}},21807:function(e,n,t){t.d(n,{qZ:function(){return g},A1:function(){return b},Xg:function(){return k},ac:function(){return h},Xv:function(){return v},Sx:function(){return y},z:function(){return _},jR:function(){return w},Vp:function(){return m},Bf:function(){return p},Yd:function(){return C},p4:function(){return E}});var l,o=t(65146),a=t(30906),r=t(53864),i=t(79705),u=t.n(i),c={default:"#D9DAE5",label:"#FE2C55",live:"linear-gradient(134.66deg, #FF1764 0%, #ED3495 100%)",first:"linear-gradient(96.34deg, #1480FF 0%, #1ABBFF 100%)",hot:"linear-gradient(268.09deg, #F01B5B 6.38%, #FF5A44 59.9%, #FF9113 91.68%)",coupon:"linear-gradient(135.01deg, #FF6238 0%, #FF851D 100%)",top:"#FACE15",collection:"rgba(18, 20, 35, 0.9)",ad:"rgba(255, 255, 255, 0.08)"},s={tag:"SlSbcMqT",tagSmall:"EuF0yijK",label:"yhNyqX95",live:"qO4G7IfY",first:"Q6hO_Gy7",hot:"y3HL9hB4",coupon:"LyH7hO9_",collection:"fjyGqadx",ad:"FxjGh3L8",default:"LxM0LfFy",top:"cAbnSEfo",followTag:"PSjUpefQ",unLookTag:"Pdqup57G",weight:"WddUI465",cooperation:"mzGNokh3",adTagWrap:"j1prA3b1",adTag:"QgKxFlLk",adTagRight:"EtRCQxnI"};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},d.apply(this,arguments)}var f=function(e){return r.createElement("svg",d({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=r.createElement("path",{d:"M1.829 8.285L7.16 3.811c.158.116.38.114.536-.017l.267-.224a.435.435 0 00.11-.525l1.41-1.183a1.303 1.303 0 011.837.16l.699.833-.003.002a1.304 1.304 0 001.675 1.997l.003-.002.698.832c.463.551.391 1.373-.16 1.836L12.83 8.696l-.345-.412a.434.434 0 00-.612-.054l-.266.224a.434.434 0 00-.054.612l.345.412-5.322 4.465a1.303 1.303 0 01-1.836-.16l-.698-.832a1.303 1.303 0 00-1.676-1.997l-.698-.833a1.303 1.303 0 01.16-1.836zM9.93 6.456a.434.434 0 00-.054.613l.559.665a.435.435 0 00.612.054l.266-.224a.435.435 0 00.054-.612l-.559-.665a.434.434 0 00-.612-.054l-.266.223zM8.255 4.46a.434.434 0 00-.054.612l.559.666a.434.434 0 00.612.053l.266-.223a.434.434 0 00.054-.612l-.559-.666a.434.434 0 00-.612-.053l-.266.223z",fill:"#fff"})))},m=function(e){var n=e.type,t=e.className,l=e.style,i=e.children,d=e.icon,f=e.onChange,m=(0,a.Z)({background:n&&c[n]?c[n]:undefined},l),v=u()(s.tag,s[n],t,(0,o.Z)({},s.tagSmall,"small"===n)),p=d||null,g=p?r.createElement(r.Fragment,null,p,i):i;return"small"===n?r.createElement("div",{className:v,onClick:f,style:m},r.createElement("span",null,g)):r.createElement("span",{className:v,style:m,onClick:f},g)},v=function(e){var n=e.isPositionRight,t=void 0===n||n;return r.createElement("div",{className:u()(s.adTagWrap,s.tag,(0,o.Z)({},s.adTagRight,t))},r.createElement(m,{style:{color:"rgba(255, 255, 255, 0.5)"},className:u()(s.adTag),type:"ad"},"\u5e7f\u544a"))},p=function(){return r.createElement(m,{type:"top",className:"text-no-shadow"},"\u7f6e\u9876")},g=function(){return r.createElement(m,{type:"top"},"\u540c\u57ce\u7cbe\u9009")},h=function(e){var n=e.name,t=e.top;return r.createElement(m,{type:"hot"},n||"\u70ed\u699c",t?" TOP".concat(t):""," ")},_=function(e){var n=e.className;return r.createElement(m,{type:"live",className:n},"\u76f4\u64ad\u4e2d")},y=function(e){var n=e.className;return r.createElement(m,{type:"first",className:n},"\u9996\u64ad\u4e2d")},w=function(e){var n=e.className,t=e.isFirstLive;return r.createElement(m,{type:"live",className:n},r.createElement(f,null),r.createElement("span",{style:{paddingLeft:4}},"\u4ed8\u8d39",t?"\u9996":"\u76f4","\u64ad"))},E=function(e){var n=e.type,t={1:"\u5ba1\u6838\u672a\u901a\u8fc7",2:"\u5ba1\u6838\u4e2d"};return r.createElement(m,{type:"collection"},t[n]||t[1])},k=function(e){var n=e.className;return r.createElement(m,{type:"small",className:u()(s.followTag,n)},"\u5df2\u5173\u6ce8")},b=function(e){var n=e.className;return r.createElement(m,{type:"small",className:u()(s.cooperation,s.weight,n)},"\u5171\u521b")},C=function(e){var n=(e||{}).className;return r.createElement(m,{className:u()(s.unLookTag,"text-no-shadow",n)},"\u672a\u770b")}},63329:function(e,n,t){t.d(n,{Z:function(){return P}});var l=t(65146),o=t(32781),a=t(85792),r=t.n(a),i=t(76569),u=t.n(i),c=t(53864),s=t(61508),d=t(79705),f=t.n(d),m=t(71116),v=t(72603),p=t(5277),g=t(17172),h=t(76475),_="UCT89JiM",y="LhTYWIQP",w="npIvCX5K",E="LNPVkhJJ",k="R6ShibVb",b="KFKW01cT",C="QgTbWoC1",S="TwYBx2Ct",I="OLJS6lBV",N="qyvTcwBN",x="gsEVeooU",T="vtwAAZ_g",L=t(24849),P=function(e){var n,t,a,i=e.children,d=e.lineClamp,P=void 0===d?2:d,Z=e.btnClassName,M=e.onlyKey,R=void 0===M?"":M,D=e.maxLine,O=void 0===D?999:D,A=e.btnOnClick,F=e.renderContent,U=e.lineHeight,B=void 0===U?20:U,V=e.renderButton,j=e.player,W=e.showExpandButton,H=void 0===W||W,z=e.renderBeforeContent,G=(0,c.useState)(!1),K=(0,o.Z)(G,2),q=K[0],Q=K[1],X=(0,c.useState)(!1),Y=(0,o.Z)(X,2),J=Y[0],$=Y[1],ee=(0,c.useRef)(O);ee.current=O;var ne=(0,c.useState)(P),te=(0,o.Z)(ne,2),le=te[0],oe=te[1],ae=(0,c.useContext)(h.C),re=ae.isFullScreen,ie=ae.isCssFullScreen,ue=(0,c.useRef)(null),ce=(0,c.useState)(!1),se=(0,o.Z)(ce,2),de=se[0],fe=se[1],me=(0,c.useState)((function(){var e=m.Le.getConfig(m.gI.IsInModalVideo),n=(null==e?void 0:e.isInModal)||!1;return!("video_detail"!==(0,v.vM)()||re||ie||n)})),ve=(0,o.Z)(me,2),pe=ve[0],ge=ve[1];(0,c.useEffect)((function(){if(j){var e=function(e){var n=m.Le.getConfig(m.gI.IsInModalVideo),t=(null==n?void 0:n.isInModal)||!1;"video_detail"!==(0,v.vM)()||e||ie||t?ge(!1):ge(!0)};return j.on(s.FULLSCREEN_CHANGE,e),function(){j.off(s.FULLSCREEN_CHANGE,e)}}}),[]),(0,c.useEffect)((function(){fe((0,p.i7)()&&!(0,p.GP)())}),[]);var he=(0,c.useCallback)((function(){r()((function(){if(null!=ue&&ue.current&&!J){var e=null==ue?void 0:ue.current,n=e.scrollHeight,t=e.clientHeight;Q(t>0&&(n-t>15||n>=B*P+15))}}),0)}),[B,P,J]);return(0,c.useEffect)((function(){var e=null;return ue.current&&(e=u()(g.Z).call(g.Z,ue.current,he)),function(){var n;e&&(null===(n=e)||void 0===n||n())}}),[he]),(0,c.useEffect)((function(){$(!1),oe(P),Q(!1),he()}),[R,P,B]),c.createElement("div",{className:f()(_,(n={},(0,l.Z)(n,I,!de),(0,l.Z)(n,y,pe),(0,l.Z)(n,T,!H),n))},c.createElement("div",{ref:ue,className:f()(w,(t={},(0,l.Z)(t,N,J),(0,l.Z)(t,k,(0,p.h5)("69.0")),(0,l.Z)(t,E,(0,p.G6)()),t)),style:{"--lineClamp":le,"--lineHeight":"".concat(B,"px"),"--maxHeight":"".concat(B*le,"px")}},c.createElement("div",{className:f()(C,(a={},(0,l.Z)(a,S,q),(0,l.Z)(a,x,J),a)),style:{height:"".concat(B-2,"px")}},H&&c.createElement("button",{type:"button",onClick:function(e){if(!J){var n=(0,L.Y)(B);n&&(ee.current=n)}oe((function(e){return e===P?ee.current:P})),$((function(e){return!e})),A&&A(J),null!=e&&e.target&&e.target.blur()},className:f()(Z,b)},V?V(J):J?"\u6536\u8d77":"\u5c55\u5f00")),z&&z(q),F&&F({isUnfold:J}),"function"==typeof i?i(q):i))}},52369:function(e,n,t){t.d(n,{p:function(){return L}});var l=t(30906),o=t(64408),a=t(77370),r=t.n(a),i=t(5594),u=t.n(i),c=t(31674),s=t.n(c),d=t(85792),f=t.n(d),m=t(53864),v=t(43088),p=t(52985),g=t(92267),h=t(36177),_=t(50799),y=t(72145),w=t(71116),E=t(72603),k=t(25902),b=t(9191),C=t(97876),S=t(34590),I=t(7786),N=t(31554),x=function(e){var n=e.errMsg;e.statusCode!==v.ERROR_CODE.ERROR_USER_UNLOGIN&&S.F.info(null!=n?n:p.Qr.FollowFail)},T=function(e){var n=e.awemeId,t=e.collectStatus,l=e.count,o=r()((w.Le.getConfig(w.gI.CollectStatusCache)||w.Le.setConfig(w.gI.CollectStatusCache,{}),w.Le.getConfig(w.gI.CollectStatusCache)));o[n]={collectStatus:t,count:l},w.Le.setConfig(w.gI.CollectStatusCache,o)},L=function(e){var n=e.selfUid,t=e.awemeInfo,a=e.fail,r=void 0===a?x:a,i=e.success,c=e.complete,d=e.isLogin,L=e.onLoginSuccess,P=e.accountParentEl,Z=e.reportExtraParams,M=e.loginPanelTarget,R=e.otherLoginMethod,D=e.scene,O=e.teaEvtParams,A=void 0===O?{}:O,F=(0,m.useRef)(!1),U=(0,m.useRef)(0),B=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(o){var a,d,f,m,v,N,x,L,P,M,R,D,O,A,F,U,B,V,j,W,H;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.action,d=o.clickMethod,f=o.nextFunc,m=o.logParams,v=null==t?void 0:t.awemeId,N="",x=0,e.prev=4,navigator.onLine){e.next=8;break}return S.F.info("\u5f53\u524d\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),e.abrupt("return");case 8:return e.next=10,(0,y.KM)({awemeId:v,collectAction:"collect"===a?1:0,awemeType:t.awemeType});case 10:if(L=e.sent,P=L.statusCode,M=L.logPb,R=L.statusMsg,N=s()(M),x=P,!P){e.next=21;break}g.i.sendLog("favoriteVideoFailed",(0,l.Z)((0,l.Z)({click_from:null!=d?d:"icon",err_code:P,urlParamList:["previous_page"],author_id:null==t||null===(D=t.authorInfo)||void 0===D?void 0:D.uid,group_id:null==t?void 0:t.awemeId,log_pb:N,enter_from:(0,E.mo)(),is_full_screen:(0,k.r)()?"1":"0",aweme_type:"".concat(null==t?void 0:t.awemeType)},Z),m)),null==r||r({logPb:N,errMsg:R,statusCode:P,action:a}),e.next=30;break;case 21:return"collect"===a?g.i.sendLog("favoriteVideo",(0,l.Z)((0,l.Z)({click_from:"icon",urlParamList:["previous_page","enter_method"],author_id:null==t||null===(A=t.authorInfo)||void 0===A?void 0:A.uid,group_id:null==t?void 0:t.awemeId,log_pb:N,enter_from:(0,E.mo)(),is_full_screen:(0,k.r)()?"1":"0",is_full_webscreen:I.s.getIsPageFullscreen()?"1":"0",click_method:d,from_xigua:(null==t?void 0:t.awemeType)===h.ed.XgVideo?1:0,clarity:(null===(F=w.Le.getConfig(w.gI.Clarity))||void 0===F?void 0:F.logValue)||"",tab_name:_.getTabName()||(0,b.Rs)("tab_name")||"",item_duration_ms:(null==t||null===(U=t.video)||void 0===U?void 0:U.duration)||0},Z),m)):g.i.sendLog("cancelFavoriteVideo",(0,l.Z)((0,l.Z)({click_from:null!=d?d:"icon",urlParamList:["previous_page"],author_id:null==t||null===(B=t.authorInfo)||void 0===B?void 0:B.uid,group_id:null==t?void 0:t.awemeId,log_pb:N,enter_from:(0,E.mo)(),is_full_screen:(0,k.r)()?"1":"0",tab_name:_.getTabName()||(0,b.Rs)("tab_name")||"",item_duration_ms:(null==t||null===(V=t.video)||void 0===V?void 0:V.duration)||0},Z),m)),e.next=24,null==f?void 0:f();case 24:j=e.sent,W="collect"===a?p.c.Collected:p.c.Uncollected,H=(null==t||null===(O=t.stats)||void 0===O?void 0:O.collectCount)-Number(t.userCollected)+Number(W),T({awemeId:v,collectStatus:W,count:H}),C.emit(C.EVENT.syncInteractionStatus,{fromUserId:n,awemeId:t.awemeId,action:a}),null==i||i({logPb:N,action:a,collectStatus:W,successMsg:null==j?void 0:j.successMsg});case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(4),null==r||r({logPb:N,action:a});case 35:return null==c||c({logPb:N,action:a}),e.abrupt("return",{statusCode:x});case 37:case"end":return e.stop()}}),e,null,[[4,32]])})));return function(n){return e.apply(this,arguments)}}(),[t,i,r,c,Z,n]),V=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,l,a,r,i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(a=n||{}).clickMethod,i=a.noLoginCb,c=a.nextFunc,s=a.logParams,(0,N.disturbShowAccount)({success:function(){var e=(0,o.Z)(u().mark((function e(){var n,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.current=!0,e.next=3,null==L?void 0:L();case 3:return e.next=5,B({action:"collect",clickMethod:r,nextFunc:c,logParams:s});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:n=e.t0,t=n.statusCode,F.current=!1,U.current=t,U.current===v.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==i||i());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_video",next:"https://".concat(null===(t=window)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.host),teaEvtParams:A},P,M,D);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[L,P,B,M,D,A]),j=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,l,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(t=n||{}).clickMethod,o=t.nextFunc,a=t.logParams,!F.current){e.next=3;break}return e.abrupt("return");case 3:if(!d){e.next=10;break}return F.current=!0,e.next=7,B({action:"collect",clickMethod:l,nextFunc:o,logParams:a});case 7:F.current=!1,e.next=11;break;case 10:R?R():V({clickMethod:l,logParams:a,noLoginCb:function(){f()((function(){V({clickMethod:l,nextFunc:o})}),1e3)}});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,d,P,L,n,B,Z,V]),W=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,l,a,r,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(t=n||{}).clickMethod,a=t.nextFunc,r=t.logParams,!F.current){e.next=3;break}return e.abrupt("return");case 3:if(!d){e.next=10;break}return F.current=!0,e.next=7,B({action:"unCollect",clickMethod:l,nextFunc:a,logParams:r});case 7:F.current=!1,e.next=11;break;case 10:(0,N.disturbShowAccount)({success:function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==L?void 0:L();case 2:return e.next=4,B({action:"unCollect",clickMethod:l,nextFunc:a,logParams:r});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_video",next:"https://".concat(null===(i=window)||void 0===i||null===(c=i.location)||void 0===c?void 0:c.host)},P,M,D);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,n,B,D]);return{collect:j,unCollect:W}}},41168:function(e,n,t){t.d(n,{i:function(){return D}});var l=t(30906),o=t(64408),a=t(77370),r=t.n(a),i=t(5594),u=t.n(i),c=t(31674),s=t.n(c),d=t(85792),f=t.n(d),m=t(53864),v=t(43088),p=t(52985),g=t(36177),h=t(92267),_=t(50799),y=t(83400),w=t(83901),E=t(99741),k=t(71116),b=t(72603),C=t(9191),S=t(25902),I=t(56462),N=t(67495),x=t(97876),T=t(353),L=t(34590),P=t(7786),Z=t(31554),M=function(e){var n=e.errMsg;e.statusCode!==v.ERROR_CODE.ERROR_USER_UNLOGIN&&L.F.info(null!=n?n:p.Qr.FollowFail)},R=function(e){var n=e.awemeId,t=e.diggStatus,l=e.count,o=r()((k.Le.getConfig(k.gI.DiggStatusCache)||k.Le.setConfig(k.gI.DiggStatusCache,{}),k.Le.getConfig(k.gI.DiggStatusCache)));o[n]={diggStatus:t,count:l,lastDiggTime:(new Date).getTime()},k.Le.setConfig(k.gI.DiggStatusCache,o)},D=function(e){var n=e.defaultDiggStatus,t=e.selfUid,a=e.awemeInfo,r=e.fail,i=void 0===r?M:r,c=e.success,d=e.complete,D=e.isLogin,O=e.onLoginSuccess,A=e.accountParentEl,F=e.reportExtraParams,U=e.loginPanelTarget,B=e.otherLoginMethod,V=e.scene,j=e.teaEvtParams,W=void 0===j?{}:j,H=(0,m.useRef)(!1),z=(0,m.useRef)(0),G=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var o,r,f,m,v,Z,M,D,O,A,U,B,V,j,W,H,z,G,K,q,Q,X,Y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.action,r=n.clickMethod,f=null==a?void 0:a.awemeId,m="",v=0,e.prev=4,navigator.onLine){e.next=8;break}return L.F.info("\u5f53\u524d\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),e.abrupt("return");case 8:return e.next=10,(0,E.s)(f,"digg"===o?1:0,a.awemeType===g.ed.XgVideo?1:0);case 10:Z=e.sent,M=Z.statusCode,D=Z.errMsg,O=Z.logPb,m=s()(O),v=M,M?null==i||i({logPb:m,errMsg:D,statusCode:M,action:o}):("digg"===o?(h.i.sendLog("like",(0,l.Z)((0,l.Z)({urlParamList:["previous_page"],author_id:null==a||null===(U=a.authorInfo)||void 0===U?void 0:U.uid,group_id:null==a?void 0:a.awemeId,log_pb:m,enter_from:(0,b.mo)(),tab_name:_.getTabName()||(0,C.Rs)("tab_name")||"",is_full_screen:(0,S.r)()?"1":"0",is_full_webscreen:P.s.getIsPageFullscreen()?"1":"0",click_method:r||"icon",from_follow_list:null!==(B=k.Le.getConfig(k.gI.FromFollowList))&&void 0!==B&&B.tag?"1":"0",trending_topic:null==a||null===(V=a.hotList)||void 0===V?void 0:V.sentence,first_tag_name:null==a||null===(j=a.hotList)||void 0===j?void 0:j.header,top:null==a||null===(W=a.hotList)||void 0===W?void 0:W.rank,aweme_type:"".concat(null==a?void 0:a.awemeType),item_duration_ms:(null==a||null===(H=a.video)||void 0===H?void 0:H.duration)||0},F),{},{clarity:(null===(z=k.Le.getConfig(k.gI.Clarity))||void 0===z?void 0:z.logValue)||"",from_push:I.Q.getItem({sKey:T.CookieKeys.FromClientPush})?1:0})),(0,y.Jt)(a)&&(G=(0,y.Rx)(a),(0,w.E)("like",{tag:(0,N.f)(),value:G.creative_id,log_extra:G.log_extra}))):(h.i.sendLog("cancelLike",(0,l.Z)({urlParamList:["previous_page"],author_id:null==a||null===(K=a.authorInfo)||void 0===K?void 0:K.uid,group_id:null==a?void 0:a.awemeId,log_pb:m,enter_from:(0,b.mo)(),tab_name:_.getTabName()||(0,C.Rs)("tab_name")||"",is_full_screen:(0,S.r)()?"1":"0",aweme_type:"".concat(null==a?void 0:a.awemeType),item_duration_ms:(null==a||null===(q=a.video)||void 0===q?void 0:q.duration)||0},F)),(0,y.Jt)(a)&&(Q=(0,y.Rx)(a),(0,w.E)("like_cancel",{tag:(0,N.f)(),value:Q.creative_id,log_extra:Q.log_extra}))),X="digg"===o?p.gZ.Digged:p.gZ.UnDigg,Y=(null==a||null===(A=a.stats)||void 0===A?void 0:A.diggCount)-Number(a.userDigged)+Number(X),R({awemeId:f,diggStatus:X,count:Y}),x.emit(x.EVENT.syncInteractionStatus,{fromUserId:t,awemeId:a.awemeId,action:o}),null==c||c({logPb:m,action:o,diggStatus:X})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),null==i||i({logPb:m,action:o});case 22:return null==d||d({logPb:m,action:o}),e.abrupt("return",{statusCode:v});case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(n){return e.apply(this,arguments)}}(),[a,c,i,d,F,t]),K=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,l,a,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(a=n||{}).clickMethod,i=a.noLoginCb,(0,Z.disturbShowAccount)({success:function(){var e=(0,o.Z)(u().mark((function e(){var n,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.current=!0,e.next=3,null==O?void 0:O();case 3:return e.next=5,G({action:"digg",clickMethod:r});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:n=e.t0,t=n.statusCode,H.current=!1,z.current=t,z.current===v.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==i||i());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u70b9\u8d5e",enterMethod:"digg",next:"https://".concat(null===(t=window)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.host),teaEvtParams:W},A,U,V);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[O,A,G,U,V,W]),q=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,o,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n||{}).clickMethod,h.i.sendLog("clickLike",(0,l.Z)({urlParamList:["previous_page"],author_id:null==a||null===(t=a.authorInfo)||void 0===t?void 0:t.uid,group_id:null==a?void 0:a.awemeId,enter_from:(0,b.mo)(),tab_name:_.getTabName()||(0,C.Rs)("tab_name")||"",is_full_screen:(0,S.r)()?"1":"0",click_method:r||"icon",from_follow_list:null!==(o=k.Le.getConfig(k.gI.FromFollowList))&&void 0!==o&&o.tag?"1":"0"},F)),!H.current){e.next=4;break}return e.abrupt("return");case 4:if(!D){e.next=11;break}return H.current=!0,e.next=8,G({action:"digg",clickMethod:r});case 8:H.current=!1,e.next=12;break;case 11:B?B():K({clickMethod:r,noLoginCb:function(){f()((function(){K({clickMethod:r})}),1e3)}});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a,D,A,O,t,G,F,K,n,B]),Q=(0,m.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(n){var t,l,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(n||{}).clickMethod,!D){e.next=10;break}if(!H.current){e.next=4;break}return e.abrupt("return");case 4:return H.current=!0,e.next=7,G({action:"unDigg",clickMethod:t});case 7:H.current=!1,e.next=11;break;case 10:(0,Z.disturbShowAccount)({success:function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==O?void 0:O();case 2:return e.next=4,G({action:"unDigg",clickMethod:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u70b9\u8d5e\u559c\u6b22\u7684\u5185\u5bb9",enterMethod:"digg",next:"https://".concat(null===(l=window)||void 0===l||null===(a=l.location)||void 0===a?void 0:a.host)},A,U,V);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a,t,G,V]);return{digg:q,unDigg:Q}}},25546:function(e,n,t){t.d(n,{a8:function(){return L},GH:function(){return P},OM:function(){return M}});var l=t(30906),o=t(64408),a=t(77370),r=t.n(a),i=t(46870),u=t.n(i),c=t(85792),s=t.n(c),d=t(5594),f=t.n(d),m=t(53864),v=t(54805),p=t(43088),g=t(52985),h=t(66453),_=t(92267),y=t(50799),w=t(9053),E=t(33461),k=t(71116),b=t(97876),C=t(28712),S=t(72603),I=t(25902),N=t(9191),x=t(34590),T=t(31554),L=function(){var e=(0,o.Z)(f().mark((function e(n){var t,l,o,a,r,i,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.secUid,a=n.uid,e.next=3,(0,w.YI)(o);case 3:r=e.sent,i=null==r||null===(t=r.user)||void 0===t?void 0:t.followStatus,u=null==r||null===(l=r.user)||void 0===l?void 0:l.followerStatus,(c=k.Le.getConfig(k.gI.FollowStatusCache)||{})[a]={followerStatus:u,followStatus:i},k.Le.setConfig(k.gI.FollowStatusCache,c),b.emit(b.EVENT.syncInteractionStatus,{action:"follow",toUserId:a});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(e){var n=e.errMsg;e.statusCode!==p.ERROR_CODE.ERROR_USER_UNLOGIN&&x.F.info(null!=n?n:g.Qr.FollowFail)},Z=function(e){var n=e.actionUid,t=e.followStatus,l=e.followerStatus,o=r()((k.Le.getConfig(k.gI.FollowStatusCache)||k.Le.setConfig(k.gI.FollowStatusCache,{}),k.Le.getConfig(k.gI.FollowStatusCache)));o[n]={followerStatus:l,followStatus:t},k.Le.setConfig(k.gI.FollowStatusCache,o)},M=function(e){var n=e.selfUid,t=e.actionUid,a=e.defaultFollowStatus,r=e.onLoginSuccess,i=e.isLogin,c=e.logExtraParams,d=void 0===c?{}:c,g=e.accountParentEl,w=void 0===g?(0,C.p)()?undefined:document.body:g,k=e.fail,L=e.success,P=e.complete,M=e.defaultFollowerStatus,R=e.preventReport,D=void 0!==R&&R,O=e.scene,A=e.from,F=(0,m.useRef)(!1),U=(0,m.useRef)(0),B=(0,v.Z)(function(){var e=(0,o.Z)(f().mark((function e(o){var r,i,u,c,s,m,v,p,g,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.action,i=o.clickFrom,u=void 0===i?"icon":i,c="",s=0,e.prev=3,navigator.onLine){e.next=7;break}return x.F.info("\u5f53\u524d\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),e.abrupt("return");case 7:return e.next=9,(0,E.Z)(t,"follow"===r?1:0);case 9:m=e.sent,v=m.statusCode,p=m.followStatus,g=m.errMsg,w=m.logPb,c=w,s=v,v?null==k||k({action:r,errMsg:g,statusCode:v,logPb:c,clickFrom:u}):(null==L||L({action:r,followStatus:p,beforeFollowStatus:a,logPb:c,clickFrom:u}),"follow"===r&&(h.a.TrayPushGuideManager.emitFollowEvent(),b.emit(b.EVENT.showClientDownloadGuide,{isShow:!0,type:"follow",text:"\u53ca\u65f6\u63a5\u6536\u300c\u5173\u6ce8\u7684\u4eba\u300d\u5f00\u64ad\u63d0\u9192",from:A})),D||("follow"===r?_.i.sendLog("follow",(0,l.Z)({urlParamList:["previous_page"],log_pb:c,enter_from:(0,S.mo)(),is_full_screen:(0,I.r)()?"1":"0",tab_name:y.getTabName()||(0,N.Rs)("tab_name")||"",click_method:u,relation:String(a)},d)):_.i.sendLog("followCancel",(0,l.Z)({urlParamList:["previous_page"],log_pb:c,enter_from:(0,S.mo)(),is_full_screen:(0,I.r)()?"1":"0",tab_name:y.getTabName()||(0,N.Rs)("tab_name")||"",click_method:u,relation:String(a)},d))),Z({actionUid:t,followerStatus:M,followStatus:p}),b.emit(b.EVENT.syncInteractionStatus,{action:r,fromUserId:n,toUserId:t})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),null==k||k({action:r,logPb:c,clickFrom:u});case 22:return null==P||P({action:r,logPb:c,clickFrom:u}),e.abrupt("return",{statusCode:s});case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(n){return e.apply(this,arguments)}}()),V=(0,v.Z)(function(){var e=(0,o.Z)(f().mark((function e(n){var t,l,a,i,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(a=n||{}).clickFrom,u=a.noLoginCb,c=a.loginPanelTarget,(0,T.disturbShowAccount)({success:function(){var e=(0,o.Z)(f().mark((function e(){var n,t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.current=!0,e.next=3,null==r?void 0:r();case 3:return e.next=5,B({action:"follow",clickFrom:i});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:n=e.t0,t=n.statusCode,F.current=!1,U.current=t,U.current===p.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==u||u());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u5173\u6ce8",enterMethod:"follow",next:"https://".concat(null===(t=window)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.host)},w instanceof HTMLElement?w:w.current,c,O);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),j=(0,v.Z)(function(){var e=(0,o.Z)(f().mark((function e(n){var o,a,r,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(o=n||{}).clickFrom,r=void 0===a?"icon":a,c=o.loginPanelTarget,_.i.sendLog("clickFollow",(0,l.Z)({enter_from:(0,S.mo)(),click_method:(null==d?void 0:d.clickFrom)||r||"icon",tab_name:y.getTabName()||(0,N.Rs)("tab_name")||""},u()(d,["parentEle","clickFrom"]))),!F.current&&t){e.next=4;break}return e.abrupt("return");case 4:if(!i){e.next=12;break}return F.current=!0,e.next=8,B({action:"follow",clickFrom:r});case 8:b.emit(b.EVENT.userBlockEvent,{uid:t,isBlock:!1,action:"follow"}),F.current=!1,e.next=13;break;case 12:V({clickFrom:r,noLoginCb:function(){s()((function(){V({clickFrom:r,noLoginCb:undefined,loginPanelTarget:c})}),1e3)},loginPanelTarget:c});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),W=(0,v.Z)(function(){var e=(0,o.Z)(f().mark((function e(n){var l,a,u,c,s,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(l=n||{}).clickFrom,u=void 0===a?"icon":a,c=l.loginPanelTarget,!i){e.next=10;break}if(!F.current&&t){e.next=4;break}return e.abrupt("return");case 4:return F.current=!0,e.next=7,B({action:"unFollow",clickFrom:u});case 7:F.current=!1,e.next=11;break;case 10:(0,T.disturbShowAccount)({success:function(){var e=(0,o.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==r?void 0:r();case 2:return e.next=4,B({action:"unFollow",clickFrom:u});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u5173\u6ce8",enterMethod:"follow",next:"https://".concat(null===(s=window)||void 0===s||null===(d=s.location)||void 0===d?void 0:d.host)},w instanceof HTMLElement?w:w.current,c,O);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return{unFollow:W,follow:j}}},14655:function(e,n,t){t.d(n,{u:function(){return i}});var l=t(32781),o=t(53864),a=t(71116),r=t(28188),i=function(e){var n,t,i,u,c=e.awemeId,s=e.defaultCount,d=e.selfUid,f=e.defaultCollectStatus,m=a.Le.getConfig(a.gI.CollectStatusCache),v=(0,o.useState)(null!==(n=null==m||null===(t=m[c])||void 0===t?void 0:t.count)&&void 0!==n?n:s),p=(0,l.Z)(v,2),g=p[0],h=p[1],_=(0,o.useState)(null!==(i=null==m||null===(u=m[c])||void 0===u?void 0:u.collectStatus)&&void 0!==i?i:f),y=(0,l.Z)(_,2),w=y[0],E=y[1];return(0,o.useEffect)((function(){var e,n,t,l;h(null!==(e=null==m||null===(n=m[c])||void 0===n?void 0:n.count)&&void 0!==e?e:s),E(null!==(t=null==m||null===(l=m[c])||void 0===l?void 0:l.collectStatus)&&void 0!==t?t:f)}),[f,s,c]),(0,o.useEffect)((function(){var e=r.a.addCb((function(e){var n=e.selfUid,t=e.awemeId,l=e.action,o=n===undefined||d===undefined;if((n===d||o)&&t===c&&("collect"===l||"unCollect"===l)){var r,i,u,m=null===(r=a.Le.getConfig(a.gI.CollectStatusCache))||void 0===r?void 0:r[c];h(null!==(i=null==m?void 0:m.count)&&void 0!==i?i:s),E(null!==(u=null==m?void 0:m.collectStatus)&&void 0!==u?u:f)}}));return function(){e()}}),[d,c,s,f]),{count:Math.max(g,0),collectStatus:w}}},85340:function(e,n,t){t.d(n,{P:function(){return i}});var l=t(32781),o=t(53864),a=t(71116),r=t(28188),i=function(e){var n,t,i,u=e.awemeId,c=e.defaultCount,s=e.selfUid,d=e.defaultDiggStatus,f=null===(n=a.Le.getConfig(a.gI.DiggStatusCache))||void 0===n?void 0:n[u],m=(0,o.useState)(null!==(t=null==f?void 0:f.count)&&void 0!==t?t:c),v=(0,l.Z)(m,2),p=v[0],g=v[1],h=(0,o.useState)(null!==(i=null==f?void 0:f.diggStatus)&&void 0!==i?i:d),_=(0,l.Z)(h,2),y=_[0],w=_[1];return(0,o.useEffect)((function(){var e,n;g(null!==(e=null==f?void 0:f.count)&&void 0!==e?e:c),w(null!==(n=null==f?void 0:f.diggStatus)&&void 0!==n?n:d)}),[d,c,u]),(0,o.useEffect)((function(){var e=r.a.addCb((function(e){var n=e.selfUid,t=e.awemeId,l=e.action,o=n===undefined||s===undefined;if((n===s||o)&&t===u&&("digg"===l||"unDigg"===l)){var r,i,f,m=null===(r=a.Le.getConfig(a.gI.DiggStatusCache))||void 0===r?void 0:r[u];g(null!==(i=null==m?void 0:m.count)&&void 0!==i?i:c),w(null!==(f=null==m?void 0:m.diggStatus)&&void 0!==f?f:d)}}));return function(){e()}}),[s,u,c,d]),{count:Math.max(p,0),diggStatus:y}}},96533:function(e,n,t){t.d(n,{r:function(){return c}});var l=t(32781),o=t(53864),a=t(52985),r=t(71116),i=t(28188),u=function(e){var n=e.followStatus,t=e.followerStatus,l=a.vc.UnFollow,o=a.TT.Active;return n===a.$u.Followed?(l=a.vc.Followed,o=a.TT.Inactive):n===a.$u.FollowEach?(l=a.vc.FollowEach,o=a.TT.Inactive):n===a.$u.Requested?(l=a.vc.Requested,o=a.TT.Inactive):(l=t>a.z5.UnFollow?a.vc.FollowByOther:a.vc.UnFollow,o=a.TT.Active),{text:l,buttonType:o}},c=function(e){var n,t,c,s=e.selfUid,d=e.defaultFollowStatus,f=void 0===d?a.$u.UnFollow:d,m=e.defaultFollowerStatus,v=void 0===m?a.z5.UnFollow:m,p=e.actionUid,g=null===(n=r.Le.getConfig(r.gI.FollowStatusCache))||void 0===n?void 0:n[p],h=null!==(t=null==g?void 0:g.followStatus)&&void 0!==t?t:f,_=null!==(c=null==g?void 0:g.followerStatus)&&void 0!==c?c:v,y=(0,o.useState)(u({followStatus:h,followerStatus:_}).text),w=(0,l.Z)(y,2),E=w[0],k=w[1],b=(0,o.useState)(u({followStatus:h,followerStatus:_}).buttonType),C=(0,l.Z)(b,2),S=C[0],I=C[1];return(0,o.useEffect)((function(){var e=u({followStatus:h,followerStatus:_}),n=e.text,t=e.buttonType;k(n),I(t)}),[f,v]),(0,o.useEffect)((function(){var e=i.a.addCb((function(e){var n=e.selfUid,t=e.actionUid,l=e.action,o=n===undefined||s===undefined;if((n===s||o)&&t===p&&("follow"===l||"unFollow"===l)){var a,i,c=null===(a=r.Le.getConfig(r.gI.FollowStatusCache))||void 0===a||null===(i=a[p])||void 0===i?void 0:i.followStatus,d=u({followStatus:c,followerStatus:_}),f=d.text,m=d.buttonType;k(f),I(m)}}));return function(){null==e||e()}}),[s,p,_]),{text:E,buttonType:S,followStatus:h}}},66753:function(e,n,t){t.d(n,{b:function(){return d}});var l=t(64408),o=t(32781),a=t(5594),r=t.n(a),i=t(53864),u=t(34452),c=t(21518),s=t(71116),d=function(){var e=(0,i.useState)(s.Le.getConfig(s.gI.AsiangameSeasonIds)||[]),n=(0,o.Z)(e,2),t=n[0],a=n[1];return(0,i.useEffect)((function(){0===t.length&&(0,l.Z)(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.U2({key:c.TccKey.AsiangameSeasonIds,defaultValue:[]});case 2:n=e.sent,s.Le.setConfig(s.gI.AsiangameSeasonIds,n),a(n);case 5:case"end":return e.stop()}}),e)})))()}),[]),{seasonIds:t}}},40231:function(e,n,t){t.d(n,{Z:function(){return c}});var l=t(32781),o=t(53864),a=t(54867),r=t(71116),i=t(97876),u=t(7786),c=function(e){var n=e||{},t=n.changeMinWinCb,c=n.refMixPlayer,s=(0,o.useState)(!1),d=(0,l.Z)(s,2),f=d[0],m=d[1];return(0,o.useEffect)((function(){m(r.Le.getConfig(r.gI.IsMiniWin));var e=i.listen(i.EVENT.changeMinWindows,(function(e){var n,l,o,i=e.isMiniWin,s=null==c||null===(n=c.current)||void 0===n?void 0:n.getPlayer(),d=u.s.getPlayersByScene(a.lT.Modal).length>0&&s&&u.s.getPlayerScene(null==s?void 0:s.playerId)!==a.lT.Modal,f=(null===(l=r.Le.getConfig(r.gI.IsInLookMiniModal))||void 0===l?void 0:l.isInMiniModal)&&(null===(o=navigator)||void 0===o?void 0:o.hardwareConcurrency)<=8;(d||f)&&(i=!1),m(i),null==t||t(i)}));return function(){return e()}}),[]),f}},15728:function(e,n,t){t.d(n,{_:function(){return r}});var l=t(26447),o=t.n(l),a=t(53864),r=function(e){var n=e.keyDownInterval,t=void 0===n?500:n,l=e.diggInterval,r=void 0===l?1e3:l,i=e.diggState,u=(0,a.useRef)(0),c=(0,a.useRef)(0);return{resetUsedKeyDownTime:(0,a.useCallback)((function(){u.current=o()()}),[]),resetDiggTime:(0,a.useCallback)((function(){c.current=o()()}),[]),initTime:(0,a.useCallback)((function(){u.current=o()(),c.current=o()()}),[]),checkIsCancelDigg:(0,a.useCallback)((function(){return!!(i&&o()()-u.current>t&&o()()-c.current>r)}),[i,t,r])}}},28188:function(e,n,t){t.d(n,{a:function(){return g}});var l=t(19049),o=t(95508),a=t(65146),r=t(21155),i=t.n(r),u=t(53361),c=t.n(u),s=t(8369),d=t.n(s),f=t(52985),m=t(28712),v=t(97876),p=t(71116),g=new(function(){function e(){var n=this;(0,l.Z)(this,e),(0,a.Z)(this,"cbList",[]),(0,m.p)()||(this.destroy=v.listen(v.EVENT.syncInteractionStatus,(function(e){var t,l,o,a,r,u,c,s,d=e.action,m=e.fromUserId,v=e.toUserId,g=e.awemeId,h=e.mixId,_=e.musicId,y=e.seriesId,w=null===(t=p.Le.getConfig(p.gI.FollowStatusCache))||void 0===t?void 0:t[v];(null==w?void 0:w.followStatus)===f.$u.Followed?(c=f.vc.Followed,s=f.TT.Inactive):(null==w?void 0:w.followStatus)===f.$u.FollowEach?(c=f.vc.FollowEach,s=f.TT.Inactive):(null==w?void 0:w.followStatus)===f.$u.Requested?(c=f.vc.Requested,s=f.TT.Inactive):((null==w?void 0:w.followerStatus)>f.z5.UnFollow?(s=f.vc.FollowByOther,c=f.vc.FollowByOther):c=f.vc.UnFollow,s=f.TT.Active);var E=null===(l=p.Le.getConfig(p.gI.DiggStatusCache))||void 0===l?void 0:l[g],k=null===(o=p.Le.getConfig(p.gI.CollectStatusCache))||void 0===o?void 0:o[g],b=null===(a=p.Le.getConfig(p.gI.CollectMixStatusCache))||void 0===a?void 0:a[h],C=null===(r=p.Le.getConfig(p.gI.CollectSeriesStatusCache))||void 0===r?void 0:r[y],S=null===(u=p.Le.getConfig(p.gI.CollectMusicStatusCache))||void 0===u?void 0:u[_];try{var I;i()(I=n.cbList).call(I,(function(e){e&&e({followStatus:null==w?void 0:w.followStatus,followButtonText:c,followButtonType:s,awemeId:g,selfUid:m,action:d,actionUid:v,mixId:h,seriesId:y,musicId:_,diggCount:null==E?void 0:E.count,diggStatus:null==E?void 0:E.diggStatus,collectCount:null==k?void 0:k.count,collectStatus:null==k?void 0:k.collectStatus,collectMixStatus:null==b?void 0:b.collectStatus,collectSeriesStatus:null==C?void 0:C.collectStatus,collectMusicStatus:null==S?void 0:S.collectStatus})}))}catch(N){}})))}return(0,o.Z)(e,[{key:"removeCb",value:function(e){var n,t,l=c()(n=this.cbList).call(n,(function(n){return n===e}));l>-1&&d()(t=this.cbList).call(t,l,1)}},{key:"addCb",value:function(e){var n=this;return this.cbList.push(e),function(){n.removeCb(e)}}},{key:"destroyCenter",value:function(){var e;null===(e=this.destroy)||void 0===e||e.call(this)}}]),e}())},7573:function(e,n,t){t.d(n,{p:function(){return E},C:function(){return k}});var l=t(30906),o=t(30673),a=t(32781),r=t(19478),i=t.n(r),u=t(67624),c=t.n(u),s=t(21155),d=t.n(s),f=t(8e3),m=t.n(f),v=t(90457),p=t.n(v),g=t(76569),h=t.n(g),_=t(53864),y=t(17172),w=function(e){return e[e.Margin=74]="Margin",e[e.PlayIcon=32]="PlayIcon",e[e.PlayerTime=100]="PlayerTime",e[e.DanMuInput=240]="DanMuInput",e[e.DanMuIcon=55]="DanMuIcon",e[e.SettingList=36]="SettingList",e[e.InnerAutoPlayer=92]="InnerAutoPlayer",e[e.AutoPlayer=72]="AutoPlayer",e[e.Clear=72]="Clear",e[e.FakeScreen=46]="FakeScreen",e[e.PlayBackRatio=44]="PlayBackRatio",e[e.Volume=36]="Volume",e[e.PageFullScreen=36]="PageFullScreen",e[e.Fullscreen=36]="Fullscreen",e[e.NativePicture=36]="NativePicture",e}(w||{}),E=function(e){return e.Margin="Margin",e.PlayIcon="PlayIcon",e.PlayerTime="PlayerTime",e.DanMuInput="DanMuInput",e.DanMuIcon="DanMuIcon",e.SettingList="SettingList",e.InnerAutoPlayer="InnerAutoPlayer",e.AutoPlayer="AutoPlayer",e.Clear="Clear",e.FakeScreen="FakeScreen",e.PlayBackRatio="PlayBackRatio",e.Volume="Volume",e.PageFullScreen="PageFullScreen",e.Fullscreen="Fullscreen",e.NativePicture="NativePicture",e}({}),k=function(e){var n=e.isActive,t=e.player,r=e.abtestData,u=e.hasDanmu,s=e.isClientMiniWin,f=void 0!==s&&s,v=e.showInnerAutoplay,g=e.showAutoPlay,k=e.showFakeScreen,b=e.showPlayBackRatio,C=e.showNativePicture,S=void 0!==C&&C,I=(0,_.useState)(!1),N=(0,a.Z)(I,2),x=N[0],T=N[1],L=(0,_.useState)([]),P=(0,a.Z)(L,2),Z=P[0],M=P[1],R=(0,_.useRef)(Z);return(0,_.useEffect)((function(){if(n&&t&&!f){var e,r,u=new(c())([[E.Margin,w.Margin],[E.PlayIcon,w.PlayIcon],[E.PlayerTime,w.PlayerTime],[E.Clear,w.Clear],[E.Volume,w.Volume],[E.PageFullScreen,w.PageFullScreen],[E.Fullscreen,w.Fullscreen]]),s=new(c());S&&u.set(E.NativePicture,w.NativePicture),v?(u.set(E.InnerAutoPlayer,w.InnerAutoPlayer),s.set(E.InnerAutoPlayer,{className:"hideInnerAutoPlayer",width:w.InnerAutoPlayer}),u.delete(E.AutoPlayer),s.delete(E.AutoPlayer)):(u.delete(E.InnerAutoPlayer),s.delete(E.InnerAutoPlayer),g&&u.set(E.AutoPlayer,w.AutoPlayer),g&&s.set(E.AutoPlayer,{className:"hideAutoPlayer",width:w.AutoPlayer})),u.set(E.DanMuIcon,w.DanMuIcon),u.set(E.SettingList,w.SettingList),s.set(E.Clear,{className:"hideImmersivePlayer",width:w.Clear}),k?(u.set(E.FakeScreen,w.FakeScreen),s.set(E.FakeScreen,{className:"hideFakeScreen",width:w.FakeScreen})):(u.delete(E.FakeScreen),s.delete(E.FakeScreen)),b?(u.set(E.PlayBackRatio,w.PlayBackRatio),s.set(E.PlayBackRatio,{className:"hidePlayBackRatio",width:w.PlayBackRatio})):(u.delete(E.PlayBackRatio),s.delete(E.PlayBackRatio));var _=0;d()(u).call(u,(function(e){return _+=e})),d()(e=(0,o.Z)(s)).call(e,(function(e,n,t){var o=(0,a.Z)(e,2),r=o[0],i=o[1];t[n-1]&&(_-=t[n-1][1].width),s.set(r,(0,l.Z)((0,l.Z)({},i),{},{minWidth:_}))}));var C,I=i()((function(e){var n=(null==e?void 0:e[0])||{},t=n.target,l=n.contentRect;if(l){var a,r,i=l.width;d()(s).call(s,(function(e){i<e.minWidth?(t.classList.add(e.className),e.hide=!0):(t.classList.remove(e.className),e.hide=!1)}));var c=m()(a=(0,o.Z)(s)).call(a,(function(e){return e[1].hide}));(c.length!==(null===(r=R.current)||void 0===r?void 0:r.length)||p()(c).call(c,(function(e,n){var t;return(null==e?void 0:e[0])!==(null===(t=R.current[n])||void 0===t?void 0:t[0])})))&&M(c);var f=0;d()(u).call(u,(function(e){return f+=e}));f+=205-w.DanMuIcon,T(i<f)}}),50,{trailing:!0}),N=null===(r=t.root.getElementsByClassName("xgplayer-controls"))||void 0===r?void 0:r[0];return N&&(C=h()(y.Z).call(y.Z,N,I)),function(){var e;null===(e=C)||void 0===e||e()}}}),[n,t,r,f,u,v,k,g,b]),R.current=Z,{isDanmuIcon:x,hideList:Z}}},94752:function(e,n,t){t.d(n,{N:function(){return E}});var l=t(30906),o=t(67161),a=t(32781),r=t(26447),i=t.n(r),u=t(11227),c=t.n(u),s=t(53864),d=t(232),f=t(353),m=t(56920),v=t(97876),p=t(13971),g=t(71116),h=["count"],_=["count","expire"],y=14*d.s2,w=7*d.s2,E=function(e){var n=e.noDisturb,t=(0,s.useState)(!0),r=(0,a.Z)(t,2),u=r[0],d=r[1],E=(0,s.useState)(!0),k=(0,a.Z)(E,2),b=k[0],C=k[1];(0,s.useEffect)((function(){var e=v.listen(v.EVENT.showDisturbLoginPanel,(function(e){C(!e)}));return function(){null==e||e()}}),[]);var S=(0,s.useCallback)((function(){var e=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).isClear,n=(0,p.$o)(f.LocalStorageKeys.HoverInteractionInfo)||{},t=n.count,a=void 0===t?0:t,r=(0,o.Z)(n,h),i=a+1;e&&(i=0),(0,p.qQ)(f.LocalStorageKeys.HoverInteractionInfo,(0,l.Z)({count:i},r))}),[]),I=(0,s.useCallback)((function(){var e=(0,p.$o)(f.LocalStorageKeys.HoverInteractionInfo)||{},n=e.count,t=(e.expire,(0,o.Z)(e,_));(0,p.qQ)(f.LocalStorageKeys.HoverInteractionInfo,(0,l.Z)({count:n,expire:i()()},t))}),[]);return{isCanShowTip:u,updateIsCanShowTip:(0,s.useCallback)((function(){var e,t=(g.Le.getConfig(g.gI.FirstInstallTime)||{}).time;if(!c()(e=[m.LD.Normal,m.LD.A2]).call(e,n))if(i()()-1e3*t>y){var l=(0,p.$o)(f.LocalStorageKeys.HoverInteractionInfo)||{},o=l.count,a=void 0===o?0:o,r=l.expire,u=void 0===r?0:r;i()()-u<=w?(d(!1),S({isClear:!0})):a<6?(d(!0),S()):(d(!1),I())}else d(!0)}),[n]),isHoverShow:b,setIsHoverShow:C}}},60028:function(e,n,t){t.d(n,{u_:function(){return w},AN:function(){return E}});var l=t(85792),o=t.n(l),a=t(53864),r=t(353),i=t(92267),u=t(12338),c=t(71116),s=t(13971),d=t(97876),f=t(72603),m=t(45669),v=t(80806),p=t(57032),g=t(81762),h=function(e){return("KeyD"===e.code||"ArrowRight"===e.code)&&!1===e.altKey&&!1===e.shiftKey&&!1===e.metaKey&&!1===e.ctrlKey},_=function(){return!(n=(0,c.AQ)(),!n||new Date(1e3*n).toDateString()!==(new Date).toDateString()||(e=(0,s.$o)(r.LocalStorageKeys.IsRatePageShow),Boolean(e)));var e,n},y=!1,w=function(e){var n=e.player,t=e.isActive,l=e.isLongPressOn,v=e.disableLongPress,w=(0,a.useRef)(null),E=(0,a.useCallback)((function(e){var t,l,a,f,m,p=(c.Le.getConfig(c.gI.PlayerShortcutConf)||{}).pausePlayControlShortcut;y||!h(e)||null==n||!n.isUserActive||"INPUT"===(null==e||null===(t=e.target)||void 0===t?void 0:t.nodeName)||"TEXTAREA"===(null==e||null===(l=e.target)||void 0===l?void 0:l.nodeName)||null!=n&&null!==(a=n.plugins)&&void 0!==a&&null!==(f=a.keyboard)&&void 0!==f&&null!==(m=f.config)&&void 0!==m&&m.disable||p||(e.preventDefault(),y=!0,w.current=o()((function(){w.current=null,v||(c.Le.getConfig(c.gI.disableSpeed)&&!c.Le.getConfig(c.gI.IsMiniWin)?d.emit(d.EVENT.loginBlockKeyBoard,{speed:!0}):(c.Le.setConfig(c.gI.PlayRatioBeforeLongPress,n.playbackRate),n.emit(g.B.ChangePlayRate,{rate:2,notStorage:!0}),_()&&(u.F.info({text:"2.0x\u64ad\u653e\u4e2d",duration:1e3}),(0,s.qQ)(r.LocalStorageKeys.IsRatePageShow,!0)),i.i.sendLog("clickVideoSpeed",{click_method:"hot_key"})))}),200))}),[n,v]),k=(0,a.useCallback)((function(e){var t,l,o,a,r,i=(c.Le.getConfig(c.gI.PlayerShortcutConf)||{}).pausePlayControlShortcut;if(h(e)&&null!=n&&n.isUserActive&&"INPUT"!==(null==e||null===(t=e.target)||void 0===t?void 0:t.nodeName)&&"TEXTAREA"!==(null==e||null===(l=e.target)||void 0===l?void 0:l.nodeName)&&(null==n||null===(o=n.plugins)||void 0===o||null===(a=o.keyboard)||void 0===a||null===(r=a.config)||void 0===r||!r.disable)&&!i){if(clearTimeout(w.current),w.current){if(!n)return;var u=n.currentTime,s=n.paused,d=n.duration,v=u+5;p.Z.sendLog("progressClick",{enter_from:(0,f.yW)(),click_method:"hot_key",rate:v/d,action:"forward",is_small_window:(0,m.Q)()?"1":"0"}),n.seek(v,s?"pause":"play")}else{var _=c.Le.getConfig(c.gI.PlayRatioBeforeLongPress);n.emit(g.B.ChangePlayRate,{rate:_||1}),c.Le.setConfig(c.gI.PlayRatioBeforeLongPress,0)}y=!1,w.current=null}}),[n]);(0,a.useEffect)((function(){return l&&t?(document.addEventListener("keydown",E),document.addEventListener("keyup",k),function(){document.removeEventListener("keydown",E),document.removeEventListener("keyup",k)}):function(){return null}}),[e,t,l,k,E])},E=function(){var e=c.Le.getConfig(c.gI.PlayRatioBeforeLongPress);e&&(0,v.t_)(r.SessionStorageKeys.PlayerPlaybackratio,e)}},68843:function(e,n,t){t.d(n,{u:function(){return r}});var l=t(89884),o=t.n(l),a=t(53864),r=function(e,n,t){return a.useEffect((function(){return t&&e?(null==e||e.on(n,t),function(){null==e||e.off(n,t)}):o()}),[t,n,e]),null}},50001:function(e,n,t){t.d(n,{M:function(){return H},Q:function(){return z}});var l,o=t(30906),a=t(30673),r=t(34346),i=t.n(r),u=t(94090),c=t.n(u),s=t(11227),d=t.n(s),f=t(53864),m=t(83400),v=t(50230),p=t(50799),g=t(36177),h=t(73231),_=t(71116),y=t(38660),w=t(72603),E=t(45669),k=t(9191),b=t(91242),C=t(25902),S=t(97876),I=t(81762),N=t(46230),x=t(7786),T=t(2915),L=function(e){return e.metaKey||e.ctrlKey||e.shiftKey},P=function(e,n){return n&&e.metaKey===d()(n).call(n,N.cQ.Meta)&&e.shiftKey===d()(n).call(n,N.cQ.Shift)&&e.ctrlKey===d()(n).call(n,N.cQ.Ctrl)},Z=function(e,n){if(e&&(null==e||!e.musicMute)){if(e.muted)return e.muted=!1,void(e.volume="up"===n?.1:0);var t="up"===n?e.volume+.1:e.volume-.1;t=Math.min(t,1),t=Math.max(t,0),e.volume=t.toFixed(3)}},M=t(60028),R=t(77323),D=t(57032),O=g.ed,A=[O.LiveCard,O.Lvideo,O.Normal,O.WordCupCard,O.XgVideo],F=h.bf.D,U=h.bf.A,B=h.bf.ArrowLeft,V=h.bf.ArrowRight,j=h.bf.Space,W=i()(l=[B,V,U,F,j]).call(l,(function(e){return e.code})),H=function(){(0,f.useEffect)((function(){var e=function(e){var n,t=_.Le.getConfig(_.gI.PlayerShortcutConf)||{},l=t.pausePlayControlShortcut,o=t.disableKey,r=void 0===o?[]:o,i=c()(n=[]).call(n,(0,a.Z)(l?(0,a.Z)(W):[]),(0,a.Z)(r));d()(i).call(i,e.code)&&e.stopPropagation()};return document.addEventListener("keydown",e,!0),document.addEventListener("keyup",e,!0),document.addEventListener("keypress",e,!0),function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",e,!0),document.removeEventListener("keypress",e,!0)}}),[])},z=function(e){var n=e.player,t=e.isActive,l=void 0!==t&&t,a=e.abtestData,r=e.isSliderVideo,i=e.isKeyWorkCancalLike,u=e.shortcutDisable,c=e.shortcutInclude,s=e.shortcutExclude,h=e.awemeInfo,O=e.showAdMenu,j=void 0!==O&&O,W=e.disableShortCut,z=void 0!==W&&W,G=e.disableAllNativeShortCut,K=void 0!==G&&G,q=e.isClientMiniWin,Q=void 0!==q&&q;(0,M.u_)({player:n,isActive:l,isLongPressOn:!z&&(null==h?void 0:h.awemeType)!==g.ed.Note,disableLongPress:(0,m.Jt)(h)}),H();var X=(0,f.useMemo)((function(){return v.getShortcut({disable:u,include:c,exclude:s})}),[u,c,s]);(0,f.useEffect)((function(){if(z)return function(){return null};if(l&&n){(0,y.z5)();var e=function(e){(_.Le.getConfig(_.gI.PlayerShortcutConf)||{}).pauseCustomShortcut||!n.isUserActive||_.Le.getConfig(_.gI.IsAlreadyExsitReportModal)||function(e,n){var t,l,o,a,r,i,u,c,s,d,f,m,v,p,g,h=null==e||null===(t=e.target)||void 0===t?void 0:t.tagName;if("INPUT"!==h&&"TEXTAREA"!==h&&"true"!==(null==e||null===(l=e.target)||void 0===l?void 0:l.contentEditable)){var E=n.player,k=n.shortcut,b=void 0===k?{}:k,M=n.isKeyWorkCancalLike,R=n.isAd;if(n.abtestData,"Minus"===e.code&&P(e,[N.cQ.Shift])&&(Z(E,"down"),null==E||E.emit(I.B.CustomShortCut,{action:"volumeDown"}),(0,y.hB)()),"Equal"===e.code&&P(e,[N.cQ.Shift])&&(null==E||E.emit(I.B.CustomShortCut,{action:"volumeUp"}),Z(E,"up"),(0,y.hB)()),e.code!==(null===(o=b.like)||void 0===o?void 0:o.code)||L(e)||(null==E||E.emit("shortcutTopic",!0),E.emit("onStar",{event:e,clickMethod:"hot_key",isKeyWorkCancalLike:M}),(0,y.hB)("like")),e.code!==(null===(a=b.comment)||void 0===a?void 0:a.code)||L(e)||(null==E||E.emit("shortcutTopic",!0),E.emit("showComment",{clickMethod:"hot_key"}),(0,y.hB)("comment"),"video_detail"!==(0,w.yW)()||(0,C.r)()||S.emit(S.EVENT.commentFocus)),e.code!==(null===(r=b.collect)||void 0===r?void 0:r.code)||L(e)||(null==E||E.emit("shortcutTopic",!0),E.emit("onCollect",{clickMethod:"hot_key"}),(0,y.hB)()),e.code!==(null===(i=b.share)||void 0===i?void 0:i.code)||L(e)||(E.emit("showShareCode",{clickMethod:"hot_key"}),(0,y.hB)()),e.code!==(null===(u=b.dislike)||void 0===u?void 0:u.code)||L(e)||(E.emit(I.B.Dislike,{clickMethod:"hot_key"}),(0,y.hB)()),e.code!==(null===(c=b.avatar)||void 0===c?void 0:c.code)||L(e)||(null==E||E.emit("shortcutTopic",!0),E.emit("onAvatar"),(0,y.hB)("avatar")),e.code!==(null===(s=b.follow)||void 0===s?void 0:s.code)||L(e)||(null==E||E.emit("shortcutTopic",!0),E.emit("onFollow",{clickMethod:"hot_key"}),(0,y.hB)()),e.code!==(null===(d=b.fullscreen)||void 0===d?void 0:d.code)||L(e)||((0,y.hB)(),(0,C.r)()?(E.exitFullscreen(),E.emit("switch_fullscreen",{fullscreen:!1})):_.Le.getConfig(_.gI.disableFullScrren)&&!_.Le.getConfig(_.gI.IsMiniWin)?S.emit(S.EVENT.loginBlockKeyBoard,{fullscreen:!0}):(E.getFullscreen(),E.emit("switch_fullscreen",{fullscreen:!0}))),e.code===(null===(f=b.pageFullScreen)||void 0===f?void 0:f.code)&&!L(e)&&null!=E&&E.isUserActive){(0,y.hB)();var D=!x.s.getPlayerIsPageFullscreen(E.playerId);x.s.setPageFullscreen({playerId:E.playerId,isPageFullscreen:D}),S.emit(S.EVENT.pageFullScreen,{clickMethod:"hot_key",fullScreen:D,playerId:E.playerId})}if(e.code!==(null===(m=b.immersivePlayer)||void 0===m?void 0:m.code)||L(e)||(null==E||E.emit(I.B.UpdateImmersiveSwitch,{logParams:{enter_method:"hot_key"}}),(0,y.hB)()),e.code!==(null===(v=b.danmaku)||void 0===v?void 0:v.code)||L(e)||(null==E||E.emit(I.B.ChangeDanmaku),(0,y.hB)()),e.code===(null===(p=b.autoPlay)||void 0===p?void 0:p.code)&&!L(e)){var O={switchBy:T.l7.Shortcut,logParams:{enter_method:"hot_key"}};_.Le.getConfig(_.gI.IsInMixCard)&&_.Le.setConfig(_.gI.AutoPlayChanged,{changed:!0}),null==E||E.emit(I.B.UpdateAutoPlaySwitch,O),(0,y.hB)()}e.code===(null===(g=b.showAdDetail)||void 0===g?void 0:g.code)&&R&&!L(e)&&(S.emit(S.EVENT.openAdSideCard,{from:"keyboard"}),(0,y.hB)())}}(e,{player:n,shortcut:X,isSliderVideo:r,isKeyWorkCancalLike:i,abtestData:a,isAd:j})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}return undefined}),[n,l,a,X,r,i,z,j]),(0,f.useEffect)((function(){if(n&&d()(A).call(A,null==h?void 0:h.awemeType)){var e;if(K&&null!=n&&null!==(e=n.plugins)&&void 0!==e&&e.keyboard)return(0,R.K)(n);if(!z){var t,l=function(e){return function(){var t,l=n.currentTime,o=n.paused,a=n.duration,r="forward"===e?l+5:l-5;(_.Le.getConfig(_.gI.PlayerShortcutConf)||{}).pausePlayControlShortcut||(D.Z.sendLog("progressClick",{enter_from:(0,w.mo)(),click_method:"hot_key",rate:r/a,action:e,is_small_window:(0,E.Q)()?"1":"0",enter_from_merge:(0,w.vM)(),tab_name:p.getTabName()||(0,k.Rs)("tab_name")||"",is_chapter_bar:null!=h&&null!==(t=h.chapterInfo)&&void 0!==t&&t.status?1:0,chapter_index:(0,b.P)({awemeInfo:h,currentTime:r}),group_id:null==h?void 0:h.awemeId}),n.seek(r,o?"pause":"play"))}},a={left:{keyCode:B.keyCode,action:l("rewind"),disable:!1,noBodyTarget:!1},letterA:{keyCode:U.keyCode,action:l("rewind"),disable:!1,noBodyTarget:!1},letterD:{keyCode:F.keyCode,action:l("forward"),disable:!0,noBodyTarget:!1},right:{keyCode:V.keyCode,action:l("forward"),disable:!0,noBodyTarget:!1}};if(null!=n&&null!==(t=n.plugins)&&void 0!==t&&t.keyboard){var r,i,u=(null==n||null===(r=n.plugins)||void 0===r||null===(i=r.keyboard)||void 0===i?void 0:i.keyCodeMap)||{};return n.plugins.keyboard.keyCodeMap=Q?(0,o.Z)((0,o.Z)({},u),{left:{keyCode:B.keyCode,action:l("rewind"),disable:!1,noBodyTarget:!1},right:{keyCode:V.keyCode,action:l("forward"),disable:!1,noBodyTarget:!1}}):(0,o.Z)((0,o.Z)({},u),a),function(){var e;null!==(e=n.plugins.keyboard)&&void 0!==e&&e.keyCodeMap&&(n.plugins.keyboard.keyCodeMap=(0,o.Z)((0,o.Z)({},u),{left:{keyCode:B.keyCode,action:l("rewind"),disable:!1,noBodyTarget:!1},right:{keyCode:V.keyCode,action:l("forward"),disable:!1,noBodyTarget:!1}}))}}}}return undefined}),[n,h,K,z,Q])}},17068:function(e,n,t){t.d(n,{u:function(){return l},c:function(){return o}});var l=function(e){return e.AdButton="button",e.AdSource="source",e.AdTitle="title",e}({}),o=function(e){return e[e.HIDDEN=-1]="HIDDEN",e[e.MINI_DARK=0]="MINI_DARK",e[e.MINI_LIGHT=1]="MINI_LIGHT",e[e.NORMAL_LIGHT=2]="NORMAL_LIGHT",e}({})},26226:function(e,n,t){t.d(n,{x:function(){return J}});var l,o,a=t(65146),r=t(32781),i=t(26447),u=t.n(i),c=t(85792),s=t.n(c),d=t(53864),f=t(61508),m=t(79705),v=t.n(m),p=t(56920),g=t(353),h=t(54867),_=t(56462),y=t(13971),w=t(72603),E=t(71116);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},k.apply(this,arguments)}var b,C=function(e){return d.createElement("svg",k({width:36,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=d.createElement("path",{d:"M17.361 10.317c.289.138.472.43.472.75v15a.833.833 0 01-1.354.651l-5.605-3.984h-3.04A.833.833 0 017 21.901v-6.667c0-.46.373-.833.833-.833h3.041l5.605-3.984c.25-.2.593-.24.882-.1zM19.458 15.592a1.25 1.25 0 011.768.018 4.157 4.157 0 011.19 2.916 4.157 4.157 0 01-1.19 2.916 1.25 1.25 0 01-1.785-1.75c.295-.302.476-.712.476-1.166 0-.455-.18-.865-.477-1.167a1.25 1.25 0 01.018-1.767z",fill:"#fff"})),o||(o=d.createElement("path",{d:"M23.537 12.022a1.25 1.25 0 00-1.408 2.066 5.41 5.41 0 012.37 4.48 5.41 5.41 0 01-2.37 4.48 1.25 1.25 0 101.408 2.065A7.91 7.91 0 0027 18.568a7.91 7.91 0 00-3.463-6.546z",fill:"#fff"})))};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},S.apply(this,arguments)}var I=function(e){return d.createElement("svg",S({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),b||(b=d.createElement("path",{d:"M24.601 24.6a1.362 1.362 0 01-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 11-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 011.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 011.927 1.926L20.427 18.5l4.174 4.174a1.362 1.362 0 010 1.927z",fill:"#fff",fillOpacity:.8})))},N="ZUqQ1eZn",x="QQaX7D66",T="AQDMmt58",L="HNSdJz6H",P="TvEyzFcy",Z=new(t(13795).hD)({voiceBubbleShow:{eventName:"voice_bubble_show",params:{enter_from:"",mute_type:""}},voiceBarShow:{eventName:"voice_bar_show",params:{enter_from:""}},clickVoiceBubble:{eventName:"click_voice_bubble",params:{is_open:1,mute_type:""}}}),M=t(30906),R=function(e){return e.User="user",e.Browser="browser",e}({}),D={isAlwaysPrevent:!1,slideTime:0,isTipShow:!1},O={isAlwaysPrevent:!1,slideTime:5,isTipShow:!0},A=g.LocalStorageKeys.forceMuteInfo,F=E.gI.ForceMuted,U=function(e){return(0,y.qQ)(A,(0,M.Z)((0,M.Z)({},(0,y.$o)(A)),e))},B=function(e,n){return E.Le.setConfig(F,(0,M.Z)((0,M.Z)({},E.Le.getConfig(F)),{},(0,a.Z)({},e,n)))},V=function(e){var n;return null===(n=E.Le.getConfig(F))||void 0===n?void 0:n[e]},j=function(e){var n,t,l=(n=(0,y.$o)(A),(t=Boolean((null==n?void 0:n[R.User])||(null==n?void 0:n[R.Browser])))||(0,y.bv)(A),t?n:null),o=e===R.User?7:3,a=(null==l?void 0:l[e])||{},r=a.showTime,i=a.closeTime,c=null!=i?i:r;return c&&u()()-c<=24*o*60*60*1e3},W=function(e){return e.muted||0===e.volume},H=t(5755),z=t(9909),G=t(66028),K=t(35667),q=t(72627),Q=t(7786),X=t(81762);var Y=function(e){var n=e.isShowGuide,t=void 0!==n&&n,l=e.isActive,o=e.awemeInfo,i=e.abtestData,c=e.scene,m=o.awemeId,k=(0,K.n)(),b=(0,d.useState)(!1),S=(0,r.Z)(b,2),A=S[0],G=S[1],q=V("isTipShow"),Y=(0,d.useState)(null!=q&&q),J=(0,r.Z)(Y,2),$=J[0],ee=J[1],ne=(0,d.useMemo)((function(){return!(k&&Q.s.getPlayerScene(k.playerId)!==h.lT.Modal&&Q.s.getPlayersByScene(h.lT.Modal).length>0)&&(k&&l&&!t&&!V("isAlwaysPrevent"))}),[l,t,k]),te=(0,d.useCallback)((function(e){if(ne){if(V("isTipShow"))return;!function(e){var n=e.onFail,t=e.onSuccess,l=e.player;W(l)||(B("isMuted",!0),l.muted=!0),s()((function(){W(l)||(B("isMuted",!0),l.muted=!0),l.paused&&l.play(),s()((function(){l.paused?(l.muted=!1,null==n||n()):W(l)&&(null==t||t())}),500)}),100)}({player:k,onSuccess:function(){ee(!0),function(e,n){E.Le.setConfig(F,(0,M.Z)((0,M.Z)({},O),{},{currentMuteType:e,slideTime:(R.Browser,5)},n))}(e),Z.sendLog("voiceBubbleShow",{enter_from:(0,w.yW)(),mute_type:V("currentMuteType")})},onFail:function(){var e;e={isAlwaysPrevent:!0},E.Le.setConfig(F,(0,M.Z)((0,M.Z)({},D),e))}}),B("currentMuteType",e),U((0,a.Z)({},e,{showTime:u()()})),e===R.Browser&&(0,y.qQ)(g.LocalStorageKeys.browserMute,!0)}}),[k,ne]),le=(0,d.useCallback)((function(){var e=V("currentMuteType");e&&V("isTipShow")&&(ee(!1),B("isTipShow",!1),U((0,a.Z)({},e,{closeTime:u()()})))}),[]);(0,d.useEffect)((function(){var e=function(){j(R.Browser)||te(R.Browser)};return E.Le.getConfig(E.gI.VideoHasPrevent)&&(e(),E.Le.setConfig(E.gI.VideoHasPrevent,!1)),null==k||k.on("autoplay_was_prevented",e),function(){return null==k?void 0:k.off("autoplay_was_prevented",e)}}),[k,te]),(0,d.useEffect)((function(){if((null==i?void 0:i.newSilent)===p.hG.V3){if("user"===V("currentMuteType"))return;var e=function(e){return!((null==e?void 0:e.syncVolume)!==p.T0.PreventTipAndSyncVolume||!(_.Q.getItem({sKey:g.CookieKeys.VolumeInfo})||{}).isUserMute)||(0,y.$o)(g.LocalStorageKeys.userMute)}(i);e&&!j(R.User)&&te(R.User)}}),[i,te]),(0,d.useEffect)((function(){if(k){var e=(0,y.$o)(g.LocalStorageKeys.browserMute),n="browser"===V("currentMuteType");n||(0,y.qQ)(g.LocalStorageKeys.browserMute,!1),e&&!n&&(k.muted=!1,(0,y.qQ)(g.LocalStorageKeys.PLAYER_IS_MUTE,0))}}),[k,c]),(0,d.useEffect)((function(){var e;if((null!==(e=E.Le.getConfig(E.gI.IsInLookMiniModal))&&void 0!==e?e:{}).isInMiniModal)ee(!1);else{var n=V("isTipShow");if(l&&(ee(n),n)){var t=V("slideTime")-1;B("slideTime",t),t<=0&&le()}}}),[m,l,le]),(0,d.useEffect)((function(){if(k){var e=function(e){"change_muted"!==(null==e?void 0:e.action)&&"change_volume"!==(null==e?void 0:e.action)||((0,y.qQ)(g.LocalStorageKeys.browserMute,!1),($||V("isTipShow"))&&le(),s()((function(){!0===k.muted||0===k.volume?((0,y.qQ)(g.LocalStorageKeys.userMute,!0),U((0,a.Z)({},R.User,{closeTime:u()()}))):(0,y.qQ)(g.LocalStorageKeys.userMute,!1)})))};return k.on(f.USER_ACTION,e),function(){k.off(f.USER_ACTION,e)}}}),[k,$,le]),(0,d.useEffect)((function(){if(k){var e=function(e){"volumeDown"!==e.action&&"volumeUp"!==e.action||((0,y.qQ)(g.LocalStorageKeys.browserMute,!1),($||V("isTipShow"))&&le(),s()((function(){0===k.volume?((0,y.qQ)(g.LocalStorageKeys.userMute,!0),U((0,a.Z)({},R.User,{closeTime:u()()}))):(0,y.qQ)(g.LocalStorageKeys.userMute,!1)})))};return k.on(X.B.CustomShortCut,e),function(){k.off(X.B.CustomShortCut,e)}}}),[k,$,le]);var oe=function(){k&&(k.muted?k.muted=!1:k.volume=.5),le(),k.emit("volumechange"),(0,y.qQ)(g.LocalStorageKeys.browserMute,!1),(0,y.qQ)(g.LocalStorageKeys.userMute,!1),Z.sendLog("clickVoiceBubble",{is_open:1,mute_type:V("currentMuteType")})},ae=function(){le(),(0,y.qQ)(g.LocalStorageKeys.browserMute,!1),(0,y.qQ)(g.LocalStorageKeys.userMute,!0),U((0,a.Z)({},R.User,{closeTime:u()()})),Z.sendLog("clickVoiceBubble",{is_open:0,mute_type:V("currentMuteType")})};return(0,d.useEffect)((function(){!l&&A&&G(!1)}),[l,A]),(0,d.useEffect)((function(){return function(){}}),[]),$&&null!=k&&k.muted?d.createElement(d.Fragment,null,"browser"===V("currentMuteType")&&d.createElement(H.I,{onClose:ae,onModalVisibleChange:G,onOpen:oe,className:v()(P,"silentLimit"),preventModalVisible:A}),"user"===V("currentMuteType")&&d.createElement("div",{className:v()(N,"silentLimit")},d.createElement("div",{className:x},d.createElement("div",{className:T,onClick:oe},d.createElement(z.Z,{height:36,width:36,src:globalThis.xssNamespace.douyin_web.filterUrl(C,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),"\u6253\u5f00\u58f0\u97f3"),d.createElement("div",{className:L}),d.createElement("div",{className:T,onClick:ae},d.createElement(z.Z,{height:36,width:36,src:globalThis.xssNamespace.douyin_web.filterUrl(I,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}))))):null},J=function(e){var n=(0,q.N)();return d.createElement(G.k,{componentName:"AutoSilentPlugin",Slardar:n},d.createElement(Y,e))}},28777:function(e,n,t){t.d(n,{Z:function(){return me}});var l=t(65146),o=t(30906),a=t(32781),r=t(53864),i=t(79705),u=t.n(i),c=t(67330),s=t(36177),d=t(16016),f=t(25902),m=t(44833),v=t(20672),p=t(64408),g=t(5594),h=t.n(g),_=t(85792),y=t.n(_),w=t(59676),E=t(56920),k=t(83400),b=t(52985),C=t(5277),S=t(97876),I=t(81877),N=t(50799),x=t(72603),T=t(9191),L=t(72307),P=t(9058),Z=t(77060);function M(e){var n,t=e.awemeInfo,i=e.ableMiniType,c=e.followStatus,s=e.logParams,m=(0,r.useState)(!1),p=(0,a.Z)(m,2),g=p[0],h=p[1];return r.createElement(P.C,{tipClassName:u()(v.Z.xgTip,(0,l.Z)({},v.Z.ableMiniType,i)),showTip:g,type:"left",hoverShow:!0,setShowTip:h,content:r.createElement(r.Fragment,null,"\u524d\u5f80\u897f\u74dc\u89c6\u9891\u5173\u6ce8\u8be5\u4f5c\u8005")},r.createElement(Z.a,{id:"xgIcon",href:globalThis.xssNamespace.douyin_web.filterUrl((0,d.GN)(null==t||null===(n=t.authorInfo)||void 0===n?void 0:n.uid),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",rel:"noopener noreferrer",className:v.Z.xgIcon,onClick:function(){var e;S.emit(S.EVENT.videoPause),L.Z.sendLog("follow",(0,o.Z)({urlParamList:["previous_page"],author_id:null==t||null===(e=t.authorInfo)||void 0===e?void 0:e.uid,group_id:null==t?void 0:t.awemeId,enter_from:(0,x.mo)(),is_full_screen:(0,f.r)()?"1":"0",tab_name:N.getTabName()||(0,T.Rs)("tab_name")||"",aweme_type:null==t?void 0:t.awemeType,from_xigua:1,relation:String(c)},s))}}))}var R,D,O,A,F=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":91,"w":90,"h":90,"nm":"\u5408\u6210 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.66},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.34},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-7.224,-14.544],[10.21,2.806]],"c":true}]},{"t":13}],"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.68},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.32},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-2.81,10.208],[-12.518,0.573]],"c":true}]},{"t":13}],"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[1],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":19,"s":[100],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.4],"y":[0]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.6,0.6,0.833],"y":[1,1,5.167]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,3.333]},"t":0,"s":[100,100,100],"e":[60,60,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,5.682]},"t":2,"s":[60,60,100],"e":[115,115,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,0]},"t":13,"s":[115,115,100],"e":[95,95,100]},{"i":{"x":[0.6,0.6,0.564],"y":[1,1,1]},"o":{"x":[0.314,0.314,0.206],"y":[0,0,0]},"t":19,"s":[95,95,100],"e":[100,100,100]},{"i":{"x":[1,1,0.839],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.304],"y":[0,0,0]},"t":25,"s":[100,100,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,14.333]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,-13.333]},"t":80,"s":[100,100,100],"e":[20,20,100]},{"t":90}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0.996078431606,0.172549024224,0.333333343267,1],"e":[1,1,1,1]},{"t":13}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u692d\u5706 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}'),U=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":11,"w":90,"h":90,"nm":"\u5408\u6210 2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.412],"y":[1]},"o":{"x":[0],"y":[0]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.392,0.392,0.839],"y":[1,1,1]},"o":{"x":[0,0,0.167],"y":[0,0,13.333]},"t":0,"s":[20,20,100],"e":[100,100,100]},{"t":10}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996078431606,0.172549024224,0.333333343267,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u692d\u5706 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}');function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},B.apply(this,arguments)}var V,j,W,H,z=function(e){return r.createElement("svg",B({width:32,height:33,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),R||(R=r.createElement("g",{filter:"url(#follow_svg__filter0_d_38277_51136)"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 26.732c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12z",fill:"#FE2C55"}))),D||(D=r.createElement("path",{d:"M12 15.732a1 1 0 110-2h8a1 1 0 110 2h-8z",fill:"#fff"})),O||(O=r.createElement("path",{d:"M15 10.732a1 1 0 112 0v8a1 1 0 11-2 0v-8z",fill:"#fff"})),A||(A=r.createElement("defs",null,r.createElement("filter",{id:"follow_svg__filter0_d_38277_51136",x:0,y:.732,width:32,height:32,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dy:2}),r.createElement("feGaussianBlur",{stdDeviation:2}),r.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"}),r.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_38277_51136"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_38277_51136",result:"shape"})))))},G=t(34590),K=t(9909),q=t(21793),Q=t(96533),X=(0,w.default)((function(){return Promise.resolve().then(t.bind(t,81272))}),{ssr:!1}),Y=(0,C.b_)();function J(e){var n,t,o,i,c,s,f,g=e.awemeInfo,_=void 0===g?{}:g,w=e.loginUserInfo,C=e.shortcut,N=void 0===C?{}:C,x=e.isShowKeyHotTip,T=e.ableMiniType,L=void 0!==T&&T,Z=e.followBtnMouseEnter,R=e.followBtnMouseLeave,D=e.noDisturb,O=void 0===D?0:D,A=e.setShowAvatarTip,B=e.showAvatarTip,V=e.isCanShowTip,j=e.isXgVideo,W=e.updateIsCanShowTip,H=e.isFollowClickedRef,J=e.actionFollow,$=e.actionUnFollow,ee=e.showImBtn,ne=e.player,te=e.onCooperAitonClick,le=e.loginPanelTarget,oe=e.isHoverShow,ae=e.toast,re=e.abtestData,ie=(0,r.useRef)(null),ue=(0,r.useRef)(!1),ce=(0,r.useState)(!1),se=(0,a.Z)(ce,2),de=se[0],fe=se[1],me=(0,r.useState)(!0),ve=(0,a.Z)(me,2),pe=ve[0],ge=ve[1],he=(0,r.useState)(!1),_e=(0,a.Z)(he,2),ye=_e[0],we=_e[1],Ee=(0,r.useRef)(null),ke=(0,r.useRef)(null),be=(0,Q.r)({selfUid:null==w||null===(n=w.info)||void 0===n?void 0:n.uid,actionUid:null==_||null===(t=_.authorInfo)||void 0===t?void 0:t.uid,defaultFollowerStatus:null==_||null===(o=_.authorInfo)||void 0===o?void 0:o.followerStatus,defaultFollowStatus:null==_||null===(i=_.authorInfo)||void 0===i?void 0:i.followStatus}).followStatus,Ce=function(){var e,n,t,l,o=null===(e=Ee.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e),a=null===(t=ke.current)||void 0===t||null===(l=t.getLottieInstance)||void 0===l?void 0:l.call(t),r=function(){var e;null==o||null===(e=o.goToAndStop)||void 0===e||e.call(o,0),fe(!1),ge(!0)},i=function(){var e;null==a||null===(e=a.goToAndStop)||void 0===e||e.call(a,0),fe(!0),ge(!1)};return{follow:function(){r(),y()((function(){var e;return null==o||null===(e=o.play)||void 0===e?void 0:e.call(o)})),ee||(ue.current=!0),H.current=!1},unfollow:function(){i(),y()((function(){var e;return null==a||null===(e=a.play)||void 0===e?void 0:e.call(a)})),ee||(ue.current=!0),H.current=!1},followEnd:function(){r(),ue.current=!1},unfollowEnd:function(){i(),ue.current=!1},setFollowStatus:i,setUnFollowStatus:r}};(0,r.useEffect)((function(){var e,n,t;ue.current=!1,(null===(e=ie.current)||void 0===e||null===(n=e.authorInfo)||void 0===n?void 0:n.uid)!==(null==_||null===(t=_.authorInfo)||void 0===t?void 0:t.uid)?be===b.$u.UnFollow?Ce().setUnFollowStatus():Ce().setFollowStatus():((0,I.F)(be)?Ce().follow():Ce().unfollow(),(null==re?void 0:re.interactionOpt)>=E.U5.On&&we(!0)),ie.current=_}),[be]);var Se=(0,r.useCallback)((0,p.Z)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=4;break}return S.emit(S.EVENT.videoPause),window.open((0,d.GN)(null==_||null===(n=_.authorInfo)||void 0===n?void 0:n.uid)),e.abrupt("return");case 4:if(!(0,k.gc)(_)){e.next=7;break}return ae?ae("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):G.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"),e.abrupt("return");case 7:if(!te){e.next=9;break}return e.abrupt("return");case 9:H.current=!0,ue.current||((0,I.V)(be)?null==$||$({clickFrom:"hot_key",loginPanelTarget:le}):null==J||J({clickFrom:"hot_key",loginPanelTarget:le}),ee&&(ue.current=!1));case 11:case"end":return e.stop()}}),e)}))),[_,$,J,be,j,te,H,ee,le]);(0,r.useEffect)((function(){if(ne)return null==ne||ne.on("onFollow",Se),function(){null==ne||ne.off("onFollow",Se)}}),[ne,Se]);var Ie=(0,q.O)({player:ne,isActive:!0}).inImmersive;return r.createElement(P.C,{type:"left",showTip:x&&B&&!de&&V&&!j&&oe,tipClassName:v.Z.tipStyle,setShowTip:function(e){A(e),e&&((0,m.q)(O),(0,I.F)(be)||W())},hoverShow:oe,content:r.createElement("div",{className:v.Z.shortcutTip},r.createElement(r.Fragment,null,"\u5173\u6ce8",(null==N||null===(c=N.follow)||void 0===c?void 0:c.badgeText)&&r.createElement("span",{className:v.Z.tipKey},N.follow.badgeText)))},r.createElement("div",{className:u()(v.Z.followWrap),"data-e2e":"feed-follow-icon"},r.createElement("div",{onMouseEnter:function(e){de||null==Z||Z(e)},onMouseLeave:function(e){de||null==R||R(e)},onClick:function(e){var n;if(null==ne||ne.emit("shortcutTopic"),"xgIcon"!==(null==e||null===(n=e.target)||void 0===n?void 0:n.id)){var t;if(j)return S.emit(S.EVENT.videoPause),void window.open((0,d.GN)(null==_||null===(t=_.authorInfo)||void 0===t?void 0:t.uid));H.current=!0,(!ue.current&&!de||Y)&&((0,I.V)(be)?null==$||$({clickFrom:undefined,loginPanelTarget:le}):null==J||J({clickFrom:undefined,loginPanelTarget:le}))}},className:u()(v.Z.followWrapBox)},j&&r.createElement(M,{awemeInfo:_,ableMiniType:L,followStatus:be,logParams:{is_pure:Ie?"1":"0"}}),!j&&!Y&&(ye||(null==re?void 0:re.interactionOpt)===E.U5.Off?(null==_||null===(s=_.authorInfo)||void 0===s?void 0:s.uid)!==(null==w||null===(f=w.info)||void 0===f?void 0:f.uid)&&r.createElement(r.Fragment,null,r.createElement(X,{hidden:de,onComplete:function(){return Ce().unfollowEnd()},className:v.Z.followIcon,data:F,ref:Ee,loop:!1,autoplay:!1,onInit:function(){(null==re?void 0:re.interactionOpt)>=E.U5.On&&((0,I.F)(be)?Ce().follow():Ce().unfollow())}}),r.createElement(X,{hidden:pe,onComplete:function(){return Ce().followEnd()},className:v.Z.followIcon,data:U,ref:ke,loop:!1,autoplay:!1})):r.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:u()(v.Z.followIcon,(0,l.Z)({},v.Z.hidden,(0,I.V)(be))),viewBox:"0 0 32 33"})),!j&&Y&&r.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:u()(v.Z.followIcon,(0,l.Z)({},v.Z.hidden,(0,I.V)(be))),viewBox:"0 0 32 33"}))))}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},$.apply(this,arguments)}var ee,ne,te,le=function(e){return r.createElement("svg",$({width:34,height:34,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),V||(V=r.createElement("g",{filter:"url(#ic_ad_link_svg__filter0_d_101_3969)",clipRule:"evenodd"},r.createElement("path",{fillRule:"evenodd",d:"M17 30c6.627 0 12-5.373 12-12S23.627 6 17 6 5 11.373 5 18s5.373 12 12 12z",fill:"#fff"}),r.createElement("path",{d:"M17 30c6.627 0 12-5.373 12-12S23.627 6 17 6 5 11.373 5 18s5.373 12 12 12z",stroke:"#161823",strokeOpacity:.05,strokeWidth:.5}))),j||(j=r.createElement("path",{d:"M15.8 18.295c-.455-.876-.231-2.078.616-2.926l.99-.989c1.013-1.013 2.534-1.135 3.397-.272s.741 2.384-.272 3.398",stroke:"#FE2C55",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round"})),W||(W=r.createElement("path",{d:"M18.2 17.705c.455.875.231 2.078-.616 2.926l-.99.989c-1.013 1.013-2.534 1.135-3.397.272s-.741-2.384.272-3.398",stroke:"#FE2C55",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round"})),H||(H=r.createElement("defs",null,r.createElement("filter",{id:"ic_ad_link_svg__filter0_d_101_3969",x:.75,y:.75,width:32.5,height:32.5,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dy:-1}),r.createElement("feGaussianBlur",{stdDeviation:2}),r.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"}),r.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_101_3969"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_101_3969",result:"shape"})))))};function oe(e){var n=e.onAvatarClick,t=e.preventAvatarDefaultHandle,l=e.handleAvatarClick,o=e.player,a=e.toast,i=(0,r.useCallback)((function(){a?a("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):G.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd")}),[]);return(0,r.useEffect)((function(){if(o)return null==o||o.on("onFollow",i),function(){null==o||o.off("onFollow",i)}}),[o,i]),r.createElement("div",{className:u()(v.Z.followWrap)},r.createElement("div",{className:u()(v.Z.followWrapBox),onClick:function(e){null==n||n(e,{clickMethod:"icon"}),!t&&(null==l||l())}},r.createElement(K.Z,{className:v.Z.followIcon,src:globalThis.xssNamespace.douyin_web.filterUrl(le,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:33,viewBox:"0 0 32 33"})))}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},ae.apply(this,arguments)}var re=function(e){return r.createElement("svg",ae({width:32,height:34,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ee||(ee=r.createElement("g",{filter:"url(#ic_feed_follow_svg__filter0_d_318_107303)"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 27.836c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12z",fill:"#fff"}))),ne||(ne=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.383 13.234l3.46-3.194c.704-.65 1.846-.15 1.846.808v1.988h.25a5 5 0 015 5v2.5a1.5 1.5 0 11-3 0v-2.5a2 2 0 00-2-2h-.25v1.987c0 .96-1.142 1.46-1.846.809l-3.46-3.194a1.5 1.5 0 010-2.204z",fill:"#FE2C55"})),te||(te=r.createElement("defs",null,r.createElement("filter",{id:"ic_feed_follow_svg__filter0_d_318_107303",x:0,y:.836,width:32,height:32,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dy:1}),r.createElement("feGaussianBlur",{stdDeviation:2}),r.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),r.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),r.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_318_107303"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_318_107303",result:"shape"})))))};function ie(e){var n,t,l=e.isShowKeyHotTip,o=e.showAvatarTip,a=e.isCanShowTip,i=e.setShowAvatarTip,c=e.updateIsCanShowTip,s=e.noDisturb,d=e.imBtnMouseEnter,f=e.imBtnMouseLeave,p=e.awemeInfo,g=e.player,h=e.loginUserInfo;return r.createElement(P.C,{type:"left",showTip:l&&o&&a,tipClassName:v.Z.tipStyle,setShowTip:function(e){i(e),e&&((0,m.q)(s),c())},hoverShow:!0,content:r.createElement("div",{className:v.Z.shortcutTip},"\u79c1\u4fe1")},r.createElement("div",{className:u()(v.Z.followWrap)},r.createElement("div",{onMouseEnter:function(e){null==d||d(e),L.Z.sendLog("chatIconHover")},onMouseLeave:function(e){return null==f?void 0:f(e)},onClick:function(){var e,n;L.Z.sendLog("chatIconClick"),S.emit(S.EVENT.sendImUserMsg,{uid:null==p||null===(e=p.authorInfo)||void 0===e?void 0:e.uid,enterMethod:"friend_im_icon"}),null==g||null===(n=g.exitFullscreen)||void 0===n||n.call(g),S.emit(S.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==g?void 0:g.playerId})},className:u()(v.Z.followWrapBox)},(null==p||null===(n=p.authorInfo)||void 0===n?void 0:n.uid)!==(null==h||null===(t=h.info)||void 0===t?void 0:t.uid)&&r.createElement(K.Z,{className:v.Z.followIcon,src:globalThis.xssNamespace.douyin_web.filterUrl(re,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:33,viewBox:"0 0 32 33"}))))}var ue=t(54867),ce=t(71116),se=t(7786);var de=t(94752),fe=t(51078);function me(e){var n,t,i,p,g=e.player,h=e.awemeInfo,_=void 0===h?{}:h,y=e.customHrefParams,w=void 0===y?{}:y,E=e.shortcut,b=void 0===E?{}:E,C=e.onAvatarClick,S=void 0===C?null:C,I=e.preventAvatarDefaultHandle,N=void 0===I||I,x=e.ableMiniType,T=void 0!==x&&x,L=e.showFollowBtn,M=void 0===L||L,R=e.showImBtn,D=void 0!==R&&R,O=e.showAdBtn,A=void 0!==O&&O,F=e.noDisturb,U=void 0===F?0:F,B=e.onCooperAitonClick,V=e.loginUserInfo,j=e.isShowKeyHotTip,W=e.isFollowClickedRef,H=e.loginPanelTarget,z=e.actionFollow,K=e.actionUnFollow,q=e.followBtnMouseEnter,Q=e.followBtnMouseLeave,X=e.imBtnMouseEnter,Y=e.imBtnMouseLeave,$=e.className,ee=e.toast,ne=e.abtestData,te=(0,r.useState)(!1),le=(0,a.Z)(te,2),ae=le[0],re=le[1],me=(0,de.N)({noDisturb:U}),ve=me.isCanShowTip,pe=me.updateIsCanShowTip,ge=me.isHoverShow,he=(me.setIsHoverShow,(0,r.useCallback)((function(){var e;return null==g||null===(e=g.pause)||void 0===e?void 0:e.call(g)}),[g])),_e=(0,r.useRef)(null),ye=(0,r.useMemo)((function(){var e,n;return(null==_?void 0:_.awemeType)===s.ed.XgVideo?(0,d.GN)(null==_||null===(e=_.authorInfo)||void 0===e?void 0:e.uid):(0,d.HC)(null==_||null===(n=_.authorInfo)||void 0===n?void 0:n.secUid,(0,c.stringify)((0,o.Z)({is_full_screen:(0,f.r)()?"1":"0",enter_method:"video_title",from_gid:_.groupId,vid:null==_?void 0:_.awemeId},w)))}),[_,w]),we=(0,r.useState)(!1),Ee=(0,a.Z)(we,2),ke=Ee[0],be=Ee[1],Ce=(0,r.useMemo)((function(){return r.createElement("div",{className:v.Z.shortcutTip},"\u524d\u5f80\u897f\u74dc\u89c6\u9891\u8bbf\u95ee\u4f5c\u8005\u4e3b\u9875")}),[]),Se=null==_||null===(n=_.authorInfo)||void 0===n?void 0:n.avatarUri,Ie=(null==_?void 0:_.awemeType)===s.ed.XgVideo;return function(e){var n=e.awemeInfo,t=e.onAvatarClick,l=e.preventAvatarDefaultHandle,o=e.onCooperAitonClick,a=e.handleAvatarClick,i=e.userHref,u=e.player,c=e.toast,s=(0,r.useCallback)((function(e){var r;if((null!==(r=ce.Le.getConfig(ce.gI.IsInModalVideo))&&void 0!==r?r:{}).isInModal||se.s.getPlayerScene(null==u?void 0:u.playerId)===ue.lT.Detail){if((0,k.gc)(n))return void(c?c("\u5e7f\u544a\u89c6\u9891\u6682\u4e0d\u652f\u6301\u6b64\u5feb\u6377\u65b9\u5f0f"):G.F.info("\u5e7f\u544a\u89c6\u9891\u6682\u4e0d\u652f\u6301\u6b64\u5feb\u6377\u65b9\u5f0f"))}else if((0,k.Jt)(n))return void(c?c("\u5e7f\u544a\u89c6\u9891\u6682\u4e0d\u652f\u6301\u6b64\u5feb\u6377\u65b9\u5f0f"):G.F.info("\u5e7f\u544a\u89c6\u9891\u6682\u4e0d\u652f\u6301\u6b64\u5feb\u6377\u65b9\u5f0f"));if(!o){var s=null==t?void 0:t(e,{clickMethod:"hot_key"});!l&&a(),!s&&window.open(i)}}),[n,t,a,l,i,o,u]),d=(0,r.useCallback)((function(){var e;!(null!==(e=ce.Le.getConfig(ce.gI.IsInModalVideo))&&void 0!==e?e:{}).isInModal&&se.s.getPlayerScene(null==u?void 0:u.playerId)!==ue.lT.Detail||!(0,k.gc)(n)||(c?c("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):G.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"))}),[n]);(0,r.useEffect)((function(){if(u)return null==u||u.on("onAvatar",s),null==u||u.on("onFollow",d),function(){null==u||u.off("onAvatar",s),null==u||u.off("onFollow",d)}}),[u,s,d])}({awemeInfo:_,onAvatarClick:S,preventAvatarDefaultHandle:N,onCooperAitonClick:B,handleAvatarClick:he,userHref:ye,player:g,toast:ee}),r.createElement("div",{className:u()(v.Z.avatarWrap,(t={},(0,l.Z)(t,v.Z.ableMiniType,T),(0,l.Z)(t,v.Z.animation,!0),(0,l.Z)(t,v.Z.cooperAvatar,B),t),$),ref:_e},r.createElement(Z.a,{className:v.Z.avatar,"data-e2e":"video-avatar",onClick:function(e){if(B)return e.preventDefault(),void(null==B||B());null==g||g.emit("shortcutTopic"),null==S||S(e,{clickMethod:"icon"}),!N&&he()},href:globalThis.xssNamespace.douyin_web.filterUrl(ye,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",rel:"noopener noreferrer"},r.createElement(P.C,{type:"left",tipClassName:v.Z.shortcutTipWrap,showTip:Ie&&ke&&ve&&ge,setShowTip:function(e){be(e),e&&(0,m.q)(U)},hoverShow:ge,content:Ce},r.createElement(fe.q,{src:globalThis.xssNamespace.douyin_web.filterUrl(Se,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),type:"extraSmall",className:u()(v.Z.horizontalAvatar,v.Z.avatarImageWrap)}))),M&&(null==_||null===(i=_.authorInfo)||void 0===i?void 0:i.uid)!==(null==V||null===(p=V.info)||void 0===p?void 0:p.uid)&&r.createElement(J,{awemeInfo:_,loginUserInfo:V,shortcut:b,isShowKeyHotTip:j,ableMiniType:T,followBtnMouseEnter:q,followBtnMouseLeave:Q,noDisturb:U,setShowAvatarTip:re,showAvatarTip:ae,isCanShowTip:ve,isXgVideo:Ie,updateIsCanShowTip:pe,isFollowClickedRef:W,actionFollow:z,actionUnFollow:K,showImBtn:D,player:g,onCooperAitonClick:B,loginPanelTarget:H,isHoverShow:ge,abtestData:ne}),D&&r.createElement(ie,{isShowKeyHotTip:j,showAvatarTip:ae,isCanShowTip:ve,setShowAvatarTip:re,updateIsCanShowTip:pe,noDisturb:U,imBtnMouseEnter:X,imBtnMouseLeave:Y,awemeInfo:_,player:g,loginUserInfo:V}),A&&r.createElement(oe,(0,o.Z)((0,o.Z)({},e),{},{player:g})))}},72307:function(e,n,t){var l=t(13795);n.Z=new l.hD({livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"",enter_method:"web_video_head",action_type:"",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",anchor_id:"",room_id:"",is_paidlive:"",watch_paidlive_status:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",stream_type:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",is_paidlive:0,watch_paidlive_status:""}},livesdkMiniWindowPlay:{eventName:"livesdk_mini_window_preview_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",is_click_mini_window:"0"}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",aweme_type:"",from_xigua:0,relation:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:""}},topknotLoginShow:{eventName:"topknot_login_show",params:{group_id:"",relation:0}},chatIconHover:{eventName:"chat_icon_hover",params:{}},chatIconClick:{eventName:"chat_icon_click",params:{}}})},25917:function(e,n,t){t.d(n,{ZL:function(){return le},Jy:function(){return ee}});var l=t(19049),o=t(95508),a=t(73316),r=t(6670),i=t(78034),u=t(65146),c=t(30906),s=t(77007),d=t(32781),f=t(21155),m=t.n(f),v=t(50750),p=t.n(v),g=t(53361),h=t.n(g),_=t(11227),y=t.n(_),w=t(26447),E=t.n(w),k=t(85792),b=t.n(k),C=t(34346),S=t.n(C),I=t(94090),N=t.n(I),x=t(76569),T=t.n(x),L=t(53864),P=t(48051),Z=t(79705),M=t.n(Z),R=t(61508),D=t(44487),O=t(56920),A=t(79784),F=t(353),U=t(36177),B=t(80806),V=t(13971),j=t(72603),W=t(44833),H=t(97876),z=t(34590),G=t(31554),K=t(35667),q=t(13012),Q=t(28084),X=t(75780),Y=t(81762),J=t(96889),$=t(98355),ee=function(e){var n=e.awemeInfo,t=e.userInfo,l=void 0===t?{}:t,o=e.player,a=e.isActive,r=e.currentDefinition,i=e.userSelectDefinition,u=e.abtestData,c=e.userSelectUpdate,f=l.isLogin,v=(0,L.useState)(""),g=(0,d.Z)(v,2),_=g[0],w=g[1],E=(0,L.useState)(q.QM.Auto),k=(0,d.Z)(E,2),b=k[0],C=k[1],S=(0,L.useMemo)((function(){var e=function(e){return[{key:q.hq.Hd,label:q.QM.Hd,val:L.createElement("div",{className:"item"},L.createElement("span",null,q.QM.Hd),!1===e?L.createElement("span",{className:"login"},"\u767b\u5f55\u5373\u4eab"):null),stat:q.hq.Hd,quality:0,defaultQuality:1,gearName:"",gearType:q.EA.Hd},{key:q.hq.Clear,label:q.QM.Clear,val:q.QM.Clear,stat:q.hq.Clear,quality:0,defaultQuality:10,gearName:"",gearType:q.EA.Clear},{key:q.hq.Smooth,label:q.QM.Smooth,val:q.QM.Smooth,stat:q.hq.Smooth,quality:0,defaultQuality:20,gearName:"",gearType:q.EA.Smooth},{key:q.hq.Fast,label:q.QM.Fast,val:q.QM.Fast,stat:q.hq.Fast,quality:0,defaultQuality:24,gearName:"",gearType:q.EA.Fast},{key:q.hq.Auto,label:q.QM.Auto,val:q.QM.Auto,stat:q.hq.Auto,quality:0,gearName:"",gearType:q.EA.Auto}]}(f);if(a){var t,l,r,i=(0,$.D3)(null!==(t=null==u?void 0:u.clarityMap)&&void 0!==t?t:O.u2,null==u?void 0:u.extraClarityMap),c=[];m()(l=(null==n||null===(r=n.video)||void 0===r?void 0:r.bitRateList)||[]).call(l,(function(n){var t;c.push(n.gearName),m()(t=p()(i)).call(t,(function(t){var l,o=h()(e).call(e,(function(e){return e.key===t}));o>-1&&y()(l=i[t]).call(l,n.gearName)&&(e[o].quality=n.qualityType,e[o].gearName=n.gearName)}))}));var s=(0,B.G)(F.SessionStorageKeys.manualSwitch)||{};s.clarityReal=c,(0,B.t_)(F.SessionStorageKeys.manualSwitch,s),o&&(o.gearList=e,o.allowList=i)}return e}),[f,n,r,a,i,c]);return(0,L.useEffect)((function(){var e=(0,B.G)(F.SessionStorageKeys.manualSwitch)||{};if(e.gearClarity){var n,t=(0,s.Z)(S);try{for(t.s();!(n=t.n()).done;){var l=n.value;if(e.gearClarity===l.key){w(l.key),C(l.label);break}}}catch(o){t.e(o)}finally{t.f()}}else C(q.QM.Auto),w(q.hq.Auto)}),[f,l,S,i,c]),{indexSelectedState:[_,w],currentState:[b,C],lists:S}},ne=function(e){var n=e.awemeInfo,t=e.userInfo,l=void 0===t?{}:t,o=e.onMouseLeave,a=e.dispatch,r=e.player,i=(0,L.useState)(!1),u=(0,d.Z)(i,2),s=u[0],f=u[1],m=null==n?void 0:n.awemeId,v=l.isLogin,p=(0,J.H)("clarity"),g=(0,L.useRef)(),h=ee(e),_=(0,d.Z)(h.indexSelectedState,2),y=_[0],w=_[1],k=(0,d.Z)(h.currentState,2),C=k[0],I=k[1],N=h.lists;(0,L.useEffect)((function(){var e;r&&(r.videoList=null==n||null===(e=n.video)||void 0===e?void 0:e.bitRateList)}),[n,r]);var x=(0,L.useCallback)((function(){var e=E()(),n=(0,V.$o)(F.LocalStorageKeys.ClarityToast)||(0,c.Z)({},q.bG);e-n.lastTimestamp>q.Ts&&n.times<3&&(n.times+=1,n.lastTimestamp=e,z.F.info({text:"\u6e05\u6670\u5ea6\u9009\u62e9\u5c06\u4ece\u4e0b\u4e2a\u89c6\u9891\u5f00\u59cb\u751f\u6548",className:"toastWrapper"},r.root,3e3),(0,V.qQ)(F.LocalStorageKeys.ClarityToast,n))}),[]),T=(0,L.useCallback)((function(e,n){var t=(0,B.G)(F.SessionStorageKeys.manualSwitch)||{};t.done=1;var l=e||n===q.hq.Auto&&(null==N?void 0:N[(null==N?void 0:N.length)-1])||n===q.hq.Hd&&(null==N?void 0:N[0]);l&&(t.gearClarity=l.key,t.qualityType=l.quality||(null==e?void 0:e.defaultQuality),t.gearName=l.label,t.gearType=l.gearType),(0,B.t_)(F.SessionStorageKeys.manualSwitch,t)}),[N]),P=function(e){var t,l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};null==o||o(),r.emit(R.USER_ACTION,{action:"switch_clarity",pluginName:"clarity"});var i=(0,B.G)(F.SessionStorageKeys.manualSwitch)||{};Q.Z.sendLog("clarityCellClick",(0,c.Z)((0,c.Z)({group_id:m,action:e.key,item_duration_ms:(null==n||null===(t=n.video)||void 0===t?void 0:t.duration)||0,enter_from_merge:(0,j.yW)(),enter_from:(0,j.mo)()},(0,W.t)()),l)),!1!==v||e.key!==q.hq.Hd?(T(e),x(),w(e.key),I(e.label)):(0,G.default)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u4eab\u53d7\u9ad8\u6e05\u753b\u8d28",success:function(){var e,n,t,l;a({type:"updateUserInfo"}),T(null,q.hq.Hd),null!=r&&r.config&&(r.config.userSelectDefinition=1),null==r||null===(e=r.plugins)||void 0===e||null===(n=e.playclaritysettingplugin)||void 0===n||n.updateConfig({userInfo:{isLogin:!0}}),null==r||null===(t=r.plugins)||void 0===t||null===(l=t.playclaritysettingplugin)||void 0===l||l.renderRoot(),x()},enterMethod:"clarity_panel",clarity:i.gearClarity,isAuto:i.done?0:1,gearName:i.gearName})};return(0,L.useEffect)((function(){var e,n=null==H?void 0:H.listen(null==H||null===(e=H.EVENT)||void 0===e?void 0:e.clarityRel,(function(e){var n,t,l,o,a,i,u,c;e.hdLogin&&(T(null,q.hq.Hd),null!=r&&r.config&&(r.config.userSelectUpdate=E()()),null==r||null===(n=r.plugins)||void 0===n||null===(t=n.playclaritysettingplugin)||void 0===t||t.updateConfig({userInfo:{isLogin:!0}}),null==r||null===(l=r.plugins)||void 0===l||null===(o=l.playclaritysettingplugin)||void 0===o||o.renderRoot(),x());e.autoSwitch&&(T(null,q.hq.Auto),r.config.userSelectUpdate=E()(),null==r||null===(a=r.plugins)||void 0===a||null===(i=a.playclaritysettingplugin)||void 0===i||i.renderRoot(),x());e.exitInner&&(r.config.userSelectUpdate=E()(),null==r||null===(u=r.plugins)||void 0===u||null===(c=u.playclaritysettingplugin)||void 0===c||c.renderRoot())}));return function(){n()}}),[r]),(0,L.useEffect)((function(){var e=function(e){var n=e.item,t=e.logParams;P(n,t)};if(r)return null==r||r.on(Y.B.UpdateClarity,e),function(){null==r||r.off(Y.B.UpdateClarity,e)}}),[r,P]),L.createElement("div",{className:M()("gear",{hover:s}),ref:p,onMouseEnter:function(){clearTimeout(g.current),f(!0),s||Q.Z.sendLog("clarityCellShow",(0,c.Z)({group_id:null==n?void 0:n.awemeId},(0,W.t)()))},onMouseLeave:function(){g.current=b()((function(){f(!1)}),300)}},L.createElement("div",{className:"virtual"},null==N?void 0:S()(N).call(N,(function(e){return L.createElement("div",{key:e.key,className:M()("item",{selected:e.key===y}),onClick:function(){return P(e)}},e.val)}))),L.createElement("div",{className:"btn"},C))},te=function(e){(0,r.Z)(t,e);var n=(0,i.Z)(t);function t(){var e,o;(0,l.Z)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return o=n.call.apply(n,N()(e=[this]).call(e,i)),(0,u.Z)((0,a.Z)(o),"onMouseleave",(function(){o.emit("icon_mouseleave",{pluginName:o.pluginName})})),(0,u.Z)((0,a.Z)(o),"onMouseenter",(function(){o.emit("icon_mouseenter",{pluginName:o.pluginName})})),o}return(0,o.Z)(t,[{key:"beforePlayerInit",value:function(){this.renderRoot()}},{key:"updateConfig",value:function(e){this.config=(0,c.Z)((0,c.Z)({},this.config),e)}},{key:"afterCreate",value:function(){T()(this).call(this,"mouseenter",this.onMouseenter),T()(this).call(this,"mouseleave",this.onMouseleave),this.renderRoot()}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),(0,X.v)(this)}},{key:"renderRoot",value:function(){var e,n,t,l,o,a,r,i,u;if((null===(e=this.config)||void 0===e||null===(n=e.awemeInfo)||void 0===n?void 0:n.awemeType)!==(null==A||null===(t=U.ed)||void 0===t?void 0:t.Note)){var s=L.createElement(ne,(0,c.Z)((0,c.Z)({onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave},this.config),{},{player:this.player,currentDefinition:null===(l=this.player)||void 0===l||null===(o=l.getPlugin)||void 0===o||null===(a=o.call(l,"bitrateselector"))||void 0===a||null===(r=a.curBitRate)||void 0===r?void 0:r.definition,userSelectDefinition:null===(i=this.player)||void 0===i?void 0:i.config.userSelectDefinition,userSelectUpdate:null===(u=this.player)||void 0===u?void 0:u.config.userSelectUpdate}));(0,X.s)(this,s)}}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-playclarity-setting" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"PlayClaritySettingPlugin"}},{key:"defaultConfig",get:function(){return{position:P.kd.CONTROLS_RIGHT,index:7,className:"xgplayer-playclarity-setting"}}}]),t}(D.ZP),le=function(e){var n=e.userInfo.isLogin,t=e.awemeInfo,l=(0,K.n)();return(0,L.useEffect)((function(){return l&&(null==t?void 0:t.awemeType)!==U.ed.Note?(l.registerPlugin(te,(0,c.Z)((0,c.Z)({},e),{},{player:l})),function(){l.getPlugin("PlayClaritySettingPlugin")&&l.unRegisterPlugin("PlayClaritySettingPlugin",!0)}):undefined}),[l,n,t]),null}},13012:function(e,n,t){t.d(n,{hq:function(){return l},EA:function(){return o},QM:function(){return a},jH:function(){return r},Ts:function(){return i},sY:function(){return u},g:function(){return c},bG:function(){return s},y8:function(){return d}});var l=function(e){return e.Hd="5",e.Clear="4",e.Smooth="3",e.Fast="2",e.Auto="0",e}({}),o=function(e){return e[e.Hd=1]="Hd",e[e.Clear=2]="Clear",e[e.Smooth=3]="Smooth",e[e.Fast=4]="Fast",e[e.Auto=0]="Auto",e}({}),a=function(e){return e.Hd="\u9ad8\u6e05",e.Clear="\u6e05\u6670",e.Smooth="\u6d41\u7545",e.Fast="\u6781\u901f",e.Auto="\u667a\u80fd",e}({}),r=function(e){return e.low="\u5f53\u524d\u7f51\u7edc\u8f83\u5dee\uff0c",e.high="\u5f53\u524d\u7f51\u7edc\u826f\u597d\uff0c",e.lowTail="\u66f4\u6d41\u7545",e.highTail="\u66f4\u6e05\u6670",e}({}),i=864e5,u=158112e5,c={highTimestamp:0,highTimes:0,lowTimestamp:0},s={lastTimestamp:0,times:0},d=["volume","fullscreen","playbacksettingplugin","autoplaysettingplugin","innerautoplayplugin","immersiveswitchsettingplugin","playclaritysettingplugin","pagefullscreenplugin"]},28084:function(e,n,t){var l=t(13795);n.Z=new l.hD({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:"",enter_from_merge:"",enter_from:"",item_duration_ms:0}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}})},67138:function(e,n,t){t.r(n),t.d(n,{Danmaku:function(){return Dl},DanmakuBar:function(){return Zl},DanmakuInner:function(){return Rl},DanmakuPlugin:function(){return Ml}});var l,o,a,r=t(19049),i=t(95508),u=t(6670),c=t(78034),s=t(30906),d=t(64408),f=t(32781),m=t(11227),v=t.n(m),p=t(5594),g=t.n(p),h=t(53864),_=t(44487),y=t(48051),w=t(79705),E=t.n(w),k=t(7793),b=t(96716),C=t(56920),S=t(71116),I=t(72603),N=t(8e3),x=t.n(N),T=t(88743),L=t.n(T),P=t(67624),Z=t.n(P),M=t(21155),R=t.n(M),D=t(32487),O=(0,D.kv)(),A=function(e){var n;return x()(n=L()(e)).call(n,(function(e){return 1!==(null==e?void 0:e.hide)}))},F=A(O),U=function(){var e=(0,h.useState)(F),n=(0,f.Z)(e,2),t=n[0],l=n[1];(0,h.useEffect)((function(){var e=!1,n=function(){var n=(0,d.Z)(g().mark((function n(){var t,o,a,r,i;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,D.zk)();case 2:t=n.sent,o=t.statusCode,a=t.data,r=void 0===a?[]:a,0===o?(i=A(r),e||l(i)):i=F;case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!0}}),[]);var o=(0,h.useMemo)((function(){var e=new(Z());return null==t||R()(t).call(t,(function(n){e.set(n.name,n.img)})),e}),[t]);return{emojiList:t,emojiListMapped:o}},B=t(85792),V=t.n(B),j=t(61508),W=t(60443),H=t(65902),z=t(65146),G="FgEeQg6q",K="G3IjO_vP",q="pLIaEP5v",Q="jlUeXrgE",X="oxhbOz1m",Y="dB9oUHYF",J="O5eaZ45x",$="E_mTRaS5",ee="xyRWL__J",ne="ovV4WzRj",te="MjMINqma",le="queCTwhe",oe="FWxc2Y0l",ae="pItZxDIB",re=t(60260),ie=t.n(re),ue=t(77679),ce=t(97876),se=t(9509),de=t(31554),fe=t(34590),me="scroll",ve=12e3,pe=20,ge="updateLogin",he="bullet_hover",_e="ratechange",ye="clearCache",we="reportIdChange",Ee=[{desc:"\u4e00\u884c",value:.1,key:1,log:.1},{desc:"\u4e24\u884c",value:.2,key:5,log:.2},{desc:"25%",value:.25,key:2,log:.4},{desc:"50%",value:.5,key:3,log:.5},{desc:"80%",value:.8,key:4,log:.8}],ke=[{desc:"\u8d85\u5c0f",value:16,key:5,log:-1},{desc:"\u5c0f\u53f7",value:pe,key:1,log:0},{desc:"\u9002\u4e2d",value:24,key:2,log:1},{desc:"\u5927\u53f7",value:28,key:3,log:2},{desc:"\u8d85\u5927",value:32,key:4,log:3}],be=[{desc:"\u8f83\u6162",value:18e3,key:1,log:0},{desc:"\u9002\u4e2d",value:14400,key:2,log:1},{desc:"\u8f83\u5feb",value:10800,key:3,log:2}],Ce=new(t(13795).hD)({danmakuPubShow:{eventName:"danmaku_pub_show",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_switch_status:0,is_post:0}},inputDanmaku:{eventName:"input_danmaku",params:{enter_from:"",enter_from_merge:""}},emojiTabShow:{eventName:"emoji_tab_show",params:{enter_from:"",enter_method:"",enter_from_merge:""}},clickEmoji:{eventName:"click_emoji",params:{enter_from:"",enter_method:"",click_method:"",enter_from_merge:""}},danmakuPubDone:{eventName:"danmaku_pub_done",params:{enter_from:"",click_method:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0,danmaku_pub_duration:0,is_author:0,emoji_id:"",video_scale:0,item_duration_ms:0,enter_from_merge:""}},firstDanmakuShow:{eventName:"first_danmaku_show",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0,video_scale:0,item_duration_ms:0,enter_from_merge:""}},danmakuPlayResult:{eventName:"danmaku_play_result",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_count:0,danmaku_pub_count:0,danmaku_play_count:0,speed_value:0,area_value:0,size_value:0,opacity_value:0,speed_video:0,play_time:0,browser_height:0,browser_width:0,browser_ratio:0,rate:0,video_scale:0,item_duration_ms:0}},danmakuSwitch:{eventName:"danmaku_switch",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",action:"",click_method:"",video_scale:0,item_duration_ms:0}},enterDanmakuSetting:{eventName:"enter_danmaku_setting",params:{enter_from:"",enter_from_merge:""}},danmakuOpacitySetting:{eventName:"danmaku_opacity_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",opacity_value:80,pre_value:80}},danmakuSizeSetting:{eventName:"danmaku_size_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",size_value:1,pre_value:1,browser_height:0,browser_width:0,browser_ratio:0,rate:0}},danmakuSpeedSetting:{eventName:"danmaku_speed_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",speed_value:1,pre_value:1}},danmakuAreaSetting:{eventName:"danmaku_area_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",area_value:.25,pre_value:.25,browser_height:0,browser_width:0,browser_ratio:0,rate:0}},clickDanmakuDefaultSetting:{eventName:"click_danmaku_default_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",pre_speed_value:1,pre_area_value:.25,pre_size_value:1,pre_opacity_value:80}},pickDanmaku:{eventName:"pick_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:""}},likeDanmaku:{eventName:"like_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},cancelLikeDanmaku:{eventName:"cancel_like_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},deleteDanmaku:{eventName:"delete_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},clickDanmakuList:{eventName:"click_danmaku_list",params:{enter_from:"",enter_from_merge:"",group_id:""}},danmakuListShow:{eventName:"danmaku_list_show",params:{enter_from:"",enter_from_merge:"",group_id:""}}}),Se="danMuText",Ie="likeIcon",Ne="reportIcon",xe="deleteIcon",Te="data-danmu-id",Le="data-is-like",Pe="data-is-danmu-author";function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ze.apply(this,arguments)}var Me,Re,De,Oe,Ae,Fe,Ue,Be=function(e){return h.createElement("svg",Ze({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),h.createElement("mask",{id:"like_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},l||(l=h.createElement("path",{fill:"#D9D9D9",d:"M0 0h20v20H0z"}))),o||(o=h.createElement("g",{mask:"url(#like_svg__a)"},h.createElement("path",{d:"M9.798 3.842a.5.5 0 00.77-.06c.731-1.044 1.944-1.614 3.319-1.614 2.59 0 4.782 2.262 4.782 4.981l-.002.184a12.694 12.694 0 01-.001.108c0 .01 0 .025.003.043-.013.522-.1.967-.266 1.569-.061.086-.111.179-.152.262a5.07 5.07 0 00-.15.346c-.15.235-.224.38-.315.618-1.02 1.697-2.696 3.441-4.18 4.812a49.967 49.967 0 01-1.947 1.703l-.58.476-.057.047-.017.014c-.139.113-.264.216-.318.27-.254.254-.385.373-.684.373-.3 0-.43-.119-.685-.374-.055-.055-.19-.16-.335-.276l-.035-.028-.025-.02c-.176-.14-.41-.323-.684-.546a43.977 43.977 0 01-2.142-1.85c-1.625-1.501-3.379-3.394-4.208-5.192l-.007-.014c-.106-.212-.241-.61-.353-1.057a6.216 6.216 0 01-.192-1.13 1.537 1.537 0 00.002-.125v-.027c-.002-.048-.003-.107-.003-.186 0-2.72 2.191-4.981 4.782-4.981 1.36 0 2.611.563 3.68 1.674z",fill:"url(#like_svg__paint0_linear_30891_122313)",stroke:"#AD2342",strokeLinejoin:"round"}))),a||(a=h.createElement("defs",null,h.createElement("linearGradient",{id:"like_svg__paint0_linear_30891_122313",x1:10.003,y1:1.668,x2:10.003,y2:18.474,gradientUnits:"userSpaceOnUse"},h.createElement("stop",{stopColor:"#FF4370"}),h.createElement("stop",{offset:1,stopColor:"#FF375B"})))))},Ve=t(9909),je=function(){return h.createElement("div",{className:ae},h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},h.createElement("symbol",{id:"svg-like",width:"14",height:"13",viewBox:"0 0 14 13"},h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.88448 0.398438C8.76117 0.398438 7.74021 0.852731 7.11838 1.71269C6.26503 0.852731 5.24305 0.398438 4.12177 0.398438C1.98145 0.398438 0.203125 2.19879 0.203125 4.34121C0.203125 4.48708 0.210222 4.5534 0.203125 4.56025C0.214278 5.05421 0.454581 5.94437 0.647185 6.31825C1.94356 9.04193 6.0401 11.9265 6.23271 12.1134C6.42531 12.3004 6.61792 12.4873 7.00313 12.4873C7.38833 12.4873 7.58094 12.3004 7.77354 12.1134C7.96615 11.9265 11.5463 9.30121 13.1116 6.75067C13.1796 6.57644 13.2242 6.49033 13.3421 6.31259C13.4168 6.12907 13.4919 5.96279 13.5726 5.8745C13.7149 5.3828 13.795 5.01066 13.8031 4.56025C13.797 4.54746 13.8031 4.48609 13.8031 4.34121C13.8031 2.19978 12.0238 0.398438 9.88448 0.398438Z"})),h.createElement("symbol",{id:"svg-report",width:"14",height:"14",viewBox:"0 0 14 14"},h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.13316 1.23494L13.8226 11.7956C14.3266 12.7751 13.6965 14 12.6888 14H1.3112C0.303482 14 -0.326644 12.7751 0.177387 11.7956L5.86554 1.23494C6.36957 0.25502 7.62913 0.25502 8.13316 1.23494ZM7.00041 12.3C6.30991 12.3 5.75 11.7407 5.75 11.05C5.75 10.3593 6.30991 9.8 7.00041 9.8C7.69009 9.8 8.25 10.3593 8.25 11.05C8.25 11.7407 7.69009 12.3 7.00041 12.3ZM7 4.2C6.44772 4.2 6 4.64772 6 5.2V7.7C6 8.25228 6.44772 8.7 7 8.7C7.55228 8.7 8 8.25228 8 7.7V5.2C8 4.64772 7.55228 4.2 7 4.2Z"})),h.createElement("symbol",{id:"svg-delete",width:"12",height:"14",viewBox:"0 0 12 14"},h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.39844 0.199219H3.59844L3.19844 0.999219H1.39844C0.846153 0.999219 0.398438 1.44693 0.398438 1.99922V3.39922H11.5984V1.99922C11.5984 1.44693 11.1507 0.999219 10.5984 0.999219H8.79844L8.39844 0.199219ZM1.19844 4.99922H10.7984L10.4418 12.8446C10.4176 13.3787 9.97749 13.7992 9.44286 13.7992H2.55402C2.01939 13.7992 1.57932 13.3787 1.55505 12.8446L1.19844 4.99922Z"}))),h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Be,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 20 20",width:20,height:20}))},We=function(e){var n,t,l=e.text,o=e.danmakuId,a=e.awemeId,r=e.player,i=e.isDanmuAuthor,u=void 0!==i&&i,c=e.isAwemeAuthor,d=void 0!==c&&c,f=e.isLike,m=void 0!==f&&f,v=e.isAnchor,p=void 0!==v&&v,g=e.authorId,_=void 0===g?"":g,y=e.firstDanmakuShowRef,w=e.offsetTime,k=e.videoScale,C=e.itemDurationMs,S=e.logParams,N=void 0===S?{}:S,x=(0,b.x)((function(){var e;r.isEnded||(r.danmakuShowCount=(null!==(e=r.danmakuShowCount)&&void 0!==e?e:0)+1);!y.current&&w&&(Ce.sendLog("firstDanmakuShow",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:a,author_id:_,danmaku_id:o,video_time:w,video_pct:Math.floor(r.currentTime/r.duration*100),video_scale:k,item_duration_ms:C},N)),y.current=!0)}));return h.createElement("div",(0,H.Z)({className:E()(G,K,(n={},(0,z.Z)(n,q,u),(0,z.Z)(n,Q,p),n)),key:o,ref:x},(t={},(0,z.Z)(t,Te,o),(0,z.Z)(t,Pe,u),(0,z.Z)(t,Le,m),t)),h.createElement("div",{className:E()(X,Se)},l),h.createElement("div",{className:E()($)},h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Be,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 20 20",width:20,height:20})),h.createElement("div",{className:Y}),h.createElement("div",{className:J},h.createElement("div",{className:E()(ee,ne,Ie)},h.createElement("svg",{className:oe,width:"14",height:"13",viewBox:"0 0 14 13"},h.createElement("use",{href:"#svg-like"}))),!u&&h.createElement("div",{className:E()(ee,te,Ne)},h.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},h.createElement("use",{href:"#svg-report"}))),(d||u)&&h.createElement("div",{className:E()(ee,le,xe)},h.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14"},h.createElement("use",{href:"#svg-delete"})))))},He=t(57969),ze=t.n(He),Ge=t(82371),Ke=t.n(Ge),qe=t(4478),Qe=t.n(qe),Xe=t(59012),Ye=t.n(Xe),Je=t(60861),$e=t.n(Je),en=t(19478),nn=t.n(en),tn=t(53361),ln=t.n(tn),on=t(5277),an={fontSize:1,speed:1,region:1,opacity:80,isOpen:!1},rn=S.gI.DanmakuSetting,un=new(Z())([["fontSize",["danmakuSizeSetting","size_value"]],["region",["danmakuAreaSetting","area_value"]],["opacity",["danmakuOpacitySetting","opacity_value"]],["speed",["danmakuSpeedSetting","speed_value"]]]),cn=function(e,n,t,l,o){var a=(0,I.mo)(),r=(0,I.yW)(),i=t||{},u=i.awemeId,c=i.authorUserId;if(Qe()(e).length>=un.size){var d=Ke()(n)?an:n,m=d.speed,v=d.region,p=d.fontSize,g=d.opacity;Ce.sendLog("clickDanmakuDefaultSetting",(0,s.Z)((0,s.Z)({enter_from:a,enter_from_merge:r,group_id:u,author_id:String(c),pre_speed_value:be[m].log,pre_area_value:Ee[v].log,pre_size_value:ke[p].log,pre_opacity_value:g},l),{},{rate:(null==o?void 0:o())||0}))}else{var h,_,y;if(1===Qe()(e).length&&Ye()(e,"isOpen"))Ce.sendLog("danmakuSwitch",(0,s.Z)((0,s.Z)({enter_from:a,enter_from_merge:r,action:e.isOpen?"1":"0",group_id:u,author_id:String(c),video_scale:(null==t||null===(h=t.video)||void 0===h?void 0:h.width)/(null==t||null===(_=t.video)||void 0===_?void 0:_.height),item_duration_ms:(null==t||null===(y=t.video)||void 0===y?void 0:y.duration)||0},l),{},{rate:(null==o?void 0:o())||0}));else $e()(e,(function(e,t){var i;if("isOpen"!==t){var d=function(e,n,t){return"opacity"===e?[n,t]:"region"===e?[Ee[n].log,Ee[t].log]:"fontSize"===e?[ke[n].log,ke[t].log]:"speed"===e?[be[n].log,be[t].log]:[n-1,t-1]}(t,Number(e),n[t]),m=(0,f.Z)(d,2),v=m[0],p=m[1],g=un.get(t),h=(0,f.Z)(g,2),_=h[0],y=h[1];_&&Ce.sendLog(_,(0,s.Z)((0,s.Z)((i={enter_from:a,enter_from_merge:r,group_id:u,author_id:String(c)},(0,z.Z)(i,y,v),(0,z.Z)(i,"pre_value",p),i),l),{},{rate:(null==o?void 0:o())||0}))}}))}},sn=function(){return S.Le.getConfig(rn)},dn=function(){var e,n;return(null===(e=ke[null===(n=sn())||void 0===n?void 0:n.fontSize])||void 0===e?void 0:e.value)||pe},fn=function(){var e,n;return(null===(e=be[null===(n=sn())||void 0===n?void 0:n.speed])||void 0===e?void 0:e.value)||ve},mn=function(e,n){return ln()(n).call(n,(function(n){return n.key===e}))},vn=function(){var e=(0,d.Z)(g().mark((function e(){var n,t,l,o,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=S.Le.getConfig(rn))){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,(0,se.Ri)();case 6:if(0!==(null==(t=e.sent)?void 0:t.statusCode)){e.next=19;break}return o=null==t||null===(l=t.confList)||void 0===l?void 0:l[0],(a=ze()(o,(function(e,n){return"isOn"===n||0!==e}))).region=mn(a.region,Ee),a.fontSize=mn(a.fontSize,ke),a.speed=mn(a.speed,be),r=(0,s.Z)((0,s.Z)({},an),a),document.body.style.setProperty("--danmaku-img-height","".concat(ke[r.fontSize].value,"px")),S.Le.setConfig(rn,r),e.abrupt("return",r);case 19:document.body.style.setProperty("--danmaku-img-height","".concat(ke[an.fontSize].value,"px"));case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(3);case 24:return document.body.style.setProperty("--danmaku-img-height","".concat(ke[an.fontSize].value,"px")),e.abrupt("return",an);case 26:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(){return e.apply(this,arguments)}}(),pn=nn()(function(){var e=(0,d.Z)(g().mark((function e(n){var t,l,o,a,r,i,u,c,d,f,m;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.conf,l=n.oldConf,o=n.isSendLog,a=void 0===o||o,r=n.awemeInfo,i=n.isLogin,u=n.logParams,c=n.getRate,d=(0,s.Z)({},S.Le.getConfig(rn)||l),f=(0,s.Z)((0,s.Z)({},d),t),document.body.style.setProperty("--danmaku-img-height","".concat(ke[f.fontSize].value,"px")),S.Le.setConfig(rn,f),!i){e.next=11;break}return m=(0,s.Z)((0,s.Z)({},f),{},{region:Ee[f.region].key,fontSize:ke[f.fontSize].key,speed:be[f.speed].key}),e.next=9,(0,se.RB)(m);case 9:0===e.sent.statusCode&&a&&cn(t,d,r,u,c);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),100,{trailing:!0}),gn=[{key:"opacity",desc:"\u4e0d\u900f\u660e\u5ea6",showDots:!1,max:100,getLabelFunc:function(e){return"".concat(e,"%")},defaultVal:80,onChange:(Oe=(0,d.Z)(g().mark((function e(n){var t,l,o,a,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.val,l=n.danmu,o=n.awemeInfo,a=n.isLogin,r=n.logParams,i=Math.max(t/100,.2),pn({conf:{opacity:Math.max(t,20)},awemeInfo:o,isLogin:a,logParams:r}),null==l||l.setOpacity(i);case 4:case"end":return e.stop()}}),e)}))),function(e){return Oe.apply(this,arguments)})},{key:"region",desc:"\u663e\u793a\u533a\u57df",showDots:!0,max:4,getLabelFunc:function(e){var n;return null===(n=Ee[e])||void 0===n?void 0:n.desc},defaultVal:1,onChange:(De=(0,d.Z)(g().mark((function e(n){var t,l,o,a,r,i,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.val,l=n.danmu,o=n.awemeInfo,a=n.isLogin,r=n.player,i=n.logParams,u=(0,s.Z)({start:0,end:Ee[t].value},1===t||0===t?{lines:t+1}:{}),pn({conf:{region:t},awemeInfo:o,isLogin:a,logParams:(0,s.Z)({browser_height:(0,on.P6)(),browser_width:(0,on.wi)(),browser_ratio:(0,on.P6)()/(0,on.wi)()},i),getRate:function(){var e,n,t,l;return((null==r||null===(e=r.danmaku)||void 0===e||null===(n=e.state)||void 0===n||null===(t=n.displayArea)||void 0===t?void 0:t.height)||0)/(null==r||null===(l=r.video)||void 0===l?void 0:l.clientHeight)}}),null==l||l.setArea(u);case 4:case"end":return e.stop()}}),e)}))),function(e){return De.apply(this,arguments)})},{key:"fontSize",desc:"\u5b57\u4f53\u5927\u5c0f",showDots:!0,max:4,getLabelFunc:function(e){return ke[e].desc},defaultVal:2,onChange:(Re=(0,d.Z)(g().mark((function e(n){var t,l,o,a,r,i,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.val,l=n.danmu,o=n.awemeInfo,a=n.isLogin,r=n.player,i=n.logParams,u=ke[t].value,pn({conf:{fontSize:t},awemeInfo:o,isLogin:a,logParams:(0,s.Z)({browser_height:(0,on.P6)(),browser_width:(0,on.wi)(),browser_ratio:(0,on.P6)()/(0,on.wi)()},i),getRate:function(){var e,n,t,l;return((null==r||null===(e=r.danmaku)||void 0===e||null===(n=e.state)||void 0===n||null===(t=n.displayArea)||void 0===t?void 0:t.height)||0)/(null==r||null===(l=r.video)||void 0===l?void 0:l.clientHeight)}}),null==l||l.setFontSize(String(u),u+20);case 4:case"end":return e.stop()}}),e)}))),function(e){return Re.apply(this,arguments)})},{key:"speed",desc:"\u79fb\u52a8\u901f\u5ea6",showDots:!0,max:2,getLabelFunc:function(e){var n;return null===(n=be[e])||void 0===n?void 0:n.desc},defaultVal:2,onChange:(Me=(0,d.Z)(g().mark((function e(n){var t,l,o,a,r,i,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.val,l=n.danmu,o=n.awemeInfo,a=n.player,r=n.isLogin,i=n.logParams,u=be[t].value,pn({conf:{speed:t},awemeInfo:o,isLogin:r,logParams:i}),null==l||l.setAllDuration(me,u/(null==a?void 0:a.playbackRate));case 4:case"end":return e.stop()}}),e)}))),function(e){return Me.apply(this,arguments)})}],hn=t(94090),_n=t.n(hn),yn=function(e){var n=e.text,t=e.emojiListMapped,l=e.danmakuId;if(!t)return n;for(var o,a=[],r=-1,i=0,u=0,c=0;c<n.length;c++)if("]"===n[c]&&"["===n[r]){var s=n.substring(r,c+1);if(t.has(s)){var d,f;if(r-i>0)u+=1,a.push(h.createElement("span",{key:_n()(f="".concat(l,"_")).call(f,u)},n.substring(i,r)));u+=1,a.push(h.createElement("img",{key:_n()(d="img_".concat(l,"_")).call(d,u),src:globalThis.xssNamespace.douyin_web.filterUrl(t.get(s),null,{logType:"js.href/src",mode:"black",reportOnly:!1})})),i=c+1}}else"["===n[c]&&(r=c);i<n.length&&(u+=1,a.push(h.createElement("span",{key:_n()(o="".concat(l,"_")).call(o,u)},n.substring(i))));return h.createElement(h.Fragment,null,a)},wn=function(e){return null==e?void 0:e.stopPropagation()},En=null,kn=function(e){var n=e.player,l=e.isActive,o=e.awemeInfo,a=e.userInfo,r=e.ref,i=e.danmakuInfo,u=e.initialStatus,c=e.setDanmakuInited,m=e.emojiListMapped,v=e.logParams,p=(0,h.useState)(Boolean(En)),_=(0,f.Z)(p,2),y=_[0],w=_[1],E=(0,h.useRef)(null),k=(0,h.useRef)(0);(0,h.useEffect)((function(){return(0,d.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=14;break}return e.next=3,t.e(2190).then(t.t.bind(t,52190,23));case 3:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===n;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=n.default;case 12:En=e.t2,w(!0);case 14:case"end":return e.stop()}}),e)})))(),undefined}),[]);var b=function(e){k.current=e};return(0,h.useEffect)((function(){return null==n||n.on(we,b),function(){null==n||n.off(we,b),k.current=null}}),[n,o]),(0,h.useEffect)((function(){if(n&&l&&!n.danmaku&&u&&y&&r.current){var e,t,d=null===(e=sn())||void 0===e?void 0:e.region,f=o||{},p=f.awemeId,g=f.authorInfo,_={needResizeObserver:!0,disableCopyDOM:!0,mouseControl:!0,mouseControlPause:!0,container:r.current,live:!1,player:n,direction:"r2l",channelSize:dn()+20||40,area:{start:0,end:(null===(t=Ee[d])||void 0===t?void 0:t.value)||.5,lines:0===d||1===d?d+1:undefined},defaultOff:!0,dropStaleComments:!0,hooks:{bulletCreateEl:function(e){var t,l,r,i,u,c,d=yn({danmakuId:e.danmakuId,text:e.text,emojiListMapped:null==n||null===(t=n.danmaku)||void 0===t?void 0:t.emojiListMapped}),f=function(e){var n=document.createElement("div");return n.id=e.danmakuId,W.render(h.createElement(We,(0,H.Z)({},e,{key:e.danmakuId})),n),n}((0,s.Z)({player:n,text:d,danmakuId:e.id,awemeId:p,isAwemeAuthor:(null==g?void 0:g.uid)===(null==a||null===(l=a.info)||void 0===l?void 0:l.uid),authorId:null==g?void 0:g.uid,isDanmuAuthor:(null==e?void 0:e.user_id)===(null==a||null===(r=a.info)||void 0===r?void 0:r.uid),logParams:v,videoScale:(null==o||null===(i=o.video)||void 0===i?void 0:i.width)/(null==o||null===(u=o.video)||void 0===u?void 0:u.height),itemDurationMs:(null==o||null===(c=o.video)||void 0===c?void 0:c.duration)||0},e._));return f},bulletDetached:function(e,n){W.unmountComponentAtNode(n)}}},w=new En(_);w.setOpacity((null===(R=sn())||void 0===R?void 0:R.opacity)/100||1),n.paused?n.needStart=!0:w.start(),n.danmaku=w||{},n.danmaku.emojiListMapped=m,c(!0);var b=function e(){if(k.current)return k.current=0,void(E.current=null);var n=E.current;null!=n&&n.el&&(null==n||n.el.removeEventListener("mouseleave",e),null==n||n.el.removeEventListener("click_timestamp",e)),null!=n&&n.id&&(w.restartComment(null==n?void 0:n.id),n.el.style.setProperty("z-index","9")),E.current=null},C=function(e){var t,l=e.bullet;l!==E.current&&null!==l.el&&(Ce.sendLog("pickDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==o?void 0:o.awemeId,author_id:null==o||null===(t=o.authorInfo)||void 0===t?void 0:t.uid,danmaku_id:l.id},v)),E.current=l,n.danmaku.freezeComment(l.id),l.el.addEventListener("mouseleave",b),l.el.addEventListener("click_timestamp",b),l.el.style.setProperty("z-index","11"))};w.on(he,C);var N=function(){var e;return null===(e=w)||void 0===e?void 0:e.resize()},x=function(){var e,t,l,o;(null==n||null===(e=n.danmaku)||void 0===e||e.clear(),null==n||null===(t=n.danmaku)||void 0===t||t.stop(),null!==(l=S.Le.getConfig(S.gI.DanmakuSetting))&&void 0!==l&&l.isOpen||i)&&(n.paused?n.needStart=!0:null===(o=w)||void 0===o||o.start())},T=function(){var e;b(),null==n||n.emit(ye),null===(e=w)||void 0===e||e.stop()},L=function(){var e;return null===(e=w)||void 0===e?void 0:e.pause()},P=function(){var e,t,l,o;(null!==(e=S.Le.getConfig(S.gI.DanmakuSetting))&&void 0!==e&&e.isOpen||i)&&(n.needStart||"closed"===(null==n||null===(t=n.danmaku)||void 0===t?void 0:t.main._status)?(n.danmaku.start(),n.needStart=!1):null===(l=w)||void 0===l||null===(o=l.play)||void 0===o||o.call(l))},Z=function(){var e,t=fn();n.playbackRate&&(null===(e=w)||void 0===e||e.setAllDuration(me,t/n.playbackRate))},M=function(){i&&0!==(null==i?void 0:i.status)&&V()((function(){var e;(i.pausedStatus&&!n.paused||!i.pausedStatus)&&(null==n||null===(e=n.danmaku)||void 0===e||e.start())}),500)};if(n.on(j.FULLSCREEN_CHANGE,N),n.on(j.CSS_FULLSCREEN_CHANGE,N),n.on(j.MINI_STATE_CHANGE,N),n.on(j.SEEKED,x),n.on(j.SEEKING,T),n.on(j.PAUSE,L),n.on(j.PLAY,P),n.on(j.CANPLAY,M),n.on("ratechange",Z),null!=i&&i.danmakuOffset&&0!==(null==i?void 0:i.status)){fn();n.currentTime=Math.max((null==i?void 0:i.danmakuOffset)/1e3-1,0),V()((function(){var e;null==n||null===(e=n.danmaku)||void 0===e||e.start()}),500)}return function(){var e,t;null==n||n.off(j.FULLSCREEN_CHANGE,N),null==n||n.off(j.CSS_FULLSCREEN_CHANGE,N),null==n||n.off(j.MINI_STATE_CHANGE,N),n.off(j.SEEKED,x),null==n||n.off(j.SEEKING,T),null==n||n.off(j.PAUSE,L),n.off(j.PLAY,P),null==n||n.off(j.CANPLAY,M),null==n||n.off(_e,Z),null===(e=w)||void 0===e||e.off(he,C),null===(t=w)||void 0===t||t.destroy(),w=null,n.danmaku=null}}var R;return undefined}),[n,l,null==o?void 0:o.awemeId,u,y]),null},bn=t(34346),Cn=t.n(bn),Sn={isLoading:!1,hasUsed:!1,fetchTimes:0,data:[]},In=function(e){var n=e.player,t=e.isActive,l=e.awemeInfo,o=e.danmakuInited,a=e.danmakuInfo,r=e.firstDanmakuShowRef,i=e.danmuTimeGap,u=e.logParams,c=(l||{}).awemeId,m=(0,h.useRef)({}),v=(0,h.useRef)(0),p=(0,h.useRef)(!1),_=(0,h.useRef)((function(){})),y=(0,h.useRef)(0),w=(0,h.useRef)(0),E=(0,h.useCallback)((function(e,n){var t=i||32;if(!n)return[0,t];var l=Math.floor(n/t)*t;return[l,l+t<e?l+t:e]}),[i]),k=function(){m.current={}};_.current=function(){k(),p.current||(p.current=!0,(0,d.Z)(g().mark((function e(){var t,o,a,r,i,c,d,f,m,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=null!==(t=null==n?void 0:n.sendDanmakuCountSelf)&&void 0!==t?t:0,e.next=3,vn();case 3:f=e.sent,m=v.current+d,p=(null!==(o=null==n?void 0:n.danmakuShowCount)&&void 0!==o?o:0)+d,Ce.sendLog("danmakuPlayResult",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==l?void 0:l.awemeId,author_id:null==l||null===(a=l.authorInfo)||void 0===a?void 0:a.uid,danmaku_count:m,danmaku_pub_count:m,danmaku_play_count:p>m?m:p,speed_value:be[f.speed].log,area_value:Ee[f.region].log,size_value:ke[f.fontSize].log,opacity_value:f.opacity,speed_video:null==n?void 0:n.playbackRate,play_time:w.current,browser_height:(0,on.P6)(),browser_width:(0,on.wi)(),browser_ratio:(0,on.P6)()/(0,on.wi)(),rate:y.current,video_scale:(null==l||null===(r=l.video)||void 0===r?void 0:r.width)/(null==l||null===(i=l.video)||void 0===i?void 0:i.height),item_duration_ms:(null==l||null===(c=l.video)||void 0===c?void 0:c.duration)||0},u)),n.sendDanmakuCountSelf=0;case 8:case"end":return e.stop()}}),e)})))())},(0,h.useEffect)((function(){return m.current={},function(){_.current()}}),[c]),(0,h.useEffect)((function(){n.isEnded=!1,n.danmakuShowCount=0}),[c,t]),(0,h.useEffect)((function(){if(n){var e=function(){w.current=Math.ceil(1e3*((null==n?void 0:n.currentTime)||(null==n?void 0:n.duration)))};return null==n||n.on(ye,k),null==n||n.on(j.TIME_UPDATE,e),function(){null==n||n.off(ye,k),null==n||n.off(j.TIME_UPDATE,e)}}}),[n,c]),(0,h.useEffect)((function(){if(n&&t&&n.danmaku&&o){var e=ie()((0,d.Z)(g().mark((function e(){var t,o,i,u,d,p,h,_,w,k,b,C,I,N,x,T,L,P;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=S.Le.getConfig(S.gI.DanmakuSetting))&&void 0!==t&&t.isOpen||a){e.next=2;break}return e.abrupt("return");case 2:if(p=E(n.duration,n.currentTime),h=(0,f.Z)(p,2),_=h[0],w=h[1],m.current.awemeId=m.current.awemeId||{},m.current.awemeId[_]||(m.current.awemeId[_]=(0,s.Z)({},Sn)),!(null!=(k=m.current.awemeId[_])&&k.isLoading||null!=k&&k.hasUsed)){e.next=8;break}return e.abrupt("return");case 8:return k.fetchTimes++,k.isLoading=!0,e.next=12,(0,se.N6)({awemeId:c,startTime:Math.round(1e3*_),endTime:Math.round(1e3*w),authenticationToken:null==l?void 0:l.authenticationToken,duration:Math.ceil(1e3*(null==n?void 0:n.duration))});case 12:if(b=e.sent,k.isLoading=!1,0===b.statusCode){e.next=16;break}return e.abrupt("return");case 16:k.hasUsed=!0,C=b.danmakuList,I=void 0===C?[]:C,N=b.total,n.isEnded||(v.current=N),y.current=((null==n||null===(o=n.danmaku)||void 0===o||null===(i=o.state)||void 0===i||null===(u=i.displayArea)||void 0===u?void 0:u.height)||0)/(null==n||null===(d=n.video)||void 0===d?void 0:d.clientHeight),x="".concat(dn(),"px"),(T=null==I?void 0:Cn()(I).call(I,(function(e){return{start:(null==a?void 0:a.danmakuId)===e.danmakuId?undefined:e.offsetTime,realTime:(null==a?void 0:a.danmakuId)===e.danmakuId,duration:fn()/n.playbackRate,id:e.danmakuId,user_id:e.userId,score:null==e?void 0:e.score,elLazyInit:!0,text:null==e?void 0:e.text,style:{fontSize:x,height:x,lineHeight:x,color:"#FFFFFF",marginTop:"0"},prior:(null==a?void 0:a.danmakuId)===e.danmakuId||!1,_:{isAnchor:(null==a?void 0:a.danmakuId)===e.danmakuId,isLike:1===e.diggType,firstDanmakuShowRef:r,offsetTime:e.offsetTime}}}))).length>0&&(null==n||null===(L=n.danmaku)||void 0===L||null===(P=L.updateComments)||void 0===P||P.call(L,T,!1));case 23:case"end":return e.stop()}}),e)}))),2e3,{leading:!0,trailing:!1}),i=function(){n.isEnded=!0};return n.on(j.CANPLAY,e),n.on(j.TIME_UPDATE,(function(){!n.paused&&t&&n.danmaku&&o&&e()})),n.on(j.ENDED,i),function(){n.off(j.CANPLAY,e),n.off(j.TIME_UPDATE,i)}}return undefined}),[n,t,c,o,E])},Nn=(0,h.createContext)({logParams:{}}),xn=function(){return(0,h.useContext)(Nn)},Tn=t(52668),Ln="nuVKXZuV",Pn="d4SO9THv",Zn="IM7rnhuJ",Mn="oCthuqPh",Rn="KeLUrWhP",Dn="L4ZMtqOV",On=t(49083);function An(){return An=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},An.apply(this,arguments)}var Fn,Un,Bn,Vn=function(e){return h.createElement("svg",An({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ae||(Ae=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29 6.29a2 2 0 012-2h10.693a2 2 0 012 2v5.404a5.55 5.55 0 00-2.472-.55V8.274a.6.6 0 00-.6-.6h-.771l.321-.478a.6.6 0 10-.996-.67l-.771 1.148h-.317l-.772-1.148a.6.6 0 00-.996.67l.322.478h-.775a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.609a5.602 5.602 0 00-.625.69h-1.463a.6.6 0 100 1.2h.763a5.554 5.554 0 00-.443 2.181c0 .76.152 1.484.428 2.144H6.289a2 2 0 01-2-2V6.29zm11.021 4.997a5.525 5.525 0 00-.552.158h-.626v-.684h1.178v.526zM6.277 7.332a.6.6 0 01.6-.6h2.378a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.477v1.157h1.778a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.877a.6.6 0 010-1.2h1.778v-2.1H6.877a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.778V7.932H6.877a.6.6 0 01-.6-.6zm5.48 4.113v-.684h1.177v.684h-1.178zm0-1.884h1.177v-.688h-1.178v.688zm2.377 0h1.177v-.688h-1.178v.688z",fill:"#fff"})),Fe||(Fe=h.createElement("path",{d:"M20.425 16.713a3.857 3.857 0 11-7.714 0 3.857 3.857 0 017.714 0z",fill:"#fff"})),Ue||(Ue=h.createElement("path",{d:"M15.258 16.802l1.028 1.079L18 15.859",stroke:"#FE2C55",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},jn.apply(this,arguments)}var Wn,Hn=function(e){return h.createElement("svg",jn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Fn||(Fn=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29 6.29a2 2 0 012-2h10.693a2 2 0 012 2v5.404a5.55 5.55 0 00-2.472-.55V8.274a.6.6 0 00-.6-.6h-.771l.321-.478a.6.6 0 10-.996-.67l-.771 1.148h-.317l-.772-1.148a.6.6 0 00-.996.67l.322.478h-.775a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.609a5.602 5.602 0 00-.625.69h-1.463a.6.6 0 100 1.2h.763a5.554 5.554 0 00-.443 2.181c0 .76.152 1.484.428 2.144H6.289a2 2 0 01-2-2V6.29zm11.021 4.997a5.525 5.525 0 00-.552.158h-.626v-.684h1.178v.526zM6.277 7.332a.6.6 0 01.6-.6h2.378a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.477v1.157h1.778a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.877a.6.6 0 010-1.2h1.778v-2.1H6.877a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.778V7.932H6.877a.6.6 0 01-.6-.6zm5.48 4.113v-.684h1.177v.684h-1.178zm0-1.884h1.177v-.688h-1.178v.688zm2.377 0h1.177v-.688h-1.178v.688z",fill:"#fff"})),Un||(Un=h.createElement("circle",{cx:16.566,cy:16.714,r:3.855,fill:"#fff"})),Bn||(Bn=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.613 18.824a2.355 2.355 0 01-3.157-3.157l3.157 3.157zm1.061-1.06l-3.158-3.158a2.355 2.355 0 013.158 3.158zm1.747-1.05a3.855 3.855 0 11-7.71 0 3.855 3.855 0 017.71 0z",fill:"#FE2C55"})))};function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},zn.apply(this,arguments)}var Gn,Kn,qn=function(e){return h.createElement("svg",zn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Wn||(Wn=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.29 4.29a2 2 0 00-2 2v10.57a2 2 0 002 2H16.983a2 2 0 002-2V6.29a2 2 0 00-2-2H6.288zm5.483 2.072a.6.6 0 01.833.163l.77 1.147h.313l.77-1.147a.6.6 0 01.996.67l-.32.477h.775a.6.6 0 01.6.6V12.044a.6.6 0 01-.6.6h-1.78v.69h2.254a.6.6 0 110 1.2H14.13v1.754a.6.6 0 01-1.2 0v-1.754h-2.252a.6.6 0 010-1.2h2.252v-.69h-1.775a.6.6 0 01-.6-.6V8.271a.6.6 0 01.6-.6h.776l-.321-.476a.6.6 0 01.163-.833zm3.537 2.51v.689h-1.18v-.69h1.18zm0 1.889h-1.18v.683h1.18v-.684zm-2.38-1.89v.69h-1.175v-.69h1.175zm0 1.89h-1.175v.683h1.175v-.684zM6.873 6.732a.6.6 0 000 1.2h1.778v1.63H6.873a.6.6 0 00-.6.6v2.357a.6.6 0 00.6.6h1.778v2.101H6.873a.6.6 0 000 1.2h2.378a.6.6 0 00.6-.6v-3.3a.6.6 0 00-.6-.6H7.473v-1.158h1.778a.6.6 0 00.6-.6v-2.83a.6.6 0 00-.6-.6H6.873z",fill:"#fff"})))},Qn=t(81762),Xn=function(e){var n=e.player,t=e.initialStatus,l=e.setInitialStatus,o=e.awemeInfo,a=e.isConfGot,r=e.isLogin,i=e.noDisturb,u=e.isDanmuIcon,c=e.isNeverHover,d=void 0!==c&&c,m=(0,h.useState)(t),v=(0,f.Z)(m,2),p=v[0],g=v[1],_=(0,h.useRef)(),y=(0,h.useRef)(!1),w=xn().logParams,E=(0,h.useCallback)((function(e){if(y.current=!0,n){if(null==n||n.emit(j.USER_ACTION,{action:"danmaku_switch",status:p?"close":"open"}),!t)return l(!0),g(!0),pn({conf:{isOpen:!0},awemeInfo:o,isLogin:r,logParams:(0,s.Z)({click_method:!0===e?"hot_key":"click"},w)}),void(!0===e&&fe.F.info("\u6253\u5f00\u5f39\u5e55",null==n?void 0:n.root));!0===e&&fe.F.info("".concat(p?"\u5173\u95ed":"\u6253\u5f00","\u5f39\u5e55"),null==n?void 0:n.root),pn({conf:{isOpen:!p},awemeInfo:o,isLogin:r,logParams:(0,s.Z)({click_method:!0===e?"hot_key":"click"},w)}),g((function(e){return l(!e),!e})),null==n||n.emit(ye)}}),[n,t,o,r,p,w]);(0,h.useEffect)((function(){if(t){var e,l,o,a;if(null!=n&&n.danmaku)if(p)if(n.paused)n.needStart=!0;else null==n||null===(e=n.danmaku)||void 0===e||null===(l=e.start)||void 0===l||l.call(e);else n.needStart=!1,null==n||null===(o=n.danmaku)||void 0===o||null===(a=o.stop)||void 0===a||a.call(o);y.current=!1}else y.current=!1}),[p]),(0,h.useEffect)((function(){g(t)}),[t]);var k=function(){g(!0),pn({conf:{isOpen:!0},awemeInfo:o,isLogin:r,logParams:w})};(0,h.useEffect)((function(){null==n||n.on("DANMAKU_SWITCH_OPEN",k);var e=ce.listen(ce.EVENT.syncInteraction,(function(){var e;return g(null===(e=sn())||void 0===e?void 0:e.isOpen)}));return function(){null==n||n.off("DANMAKU_SWITCH_OPEN",k),null==e||e()}}),[]),(0,h.useEffect)((function(){var e=nn()((function(){E(!0)}),500,{trailing:!0});if(n&&(u||!u&&!d))return null==n||n.on(Qn.B.ChangeDanmaku,e),function(){null==n||n.off(Qn.B.ChangeDanmaku,e)}}),[n,E,d,u]);var b=(0,h.useMemo)((function(){return a?p?Vn:Hn:qn}),[a,p]);return d?null:u?h.createElement("div",{className:Zn},h.createElement("div",{className:Mn},"\u5f39\u5e55\u5f00\u5173"),h.createElement(On.Q,{isChecked:p,onClick:E})):h.createElement("div",{className:Ln},h.createElement(Tn.e,{target:_.current,renderContent:h.createElement(h.Fragment,null,"".concat(p?"\u5173\u95ed":"\u6253\u5f00","\u5f39\u5e55"),h.createElement("span",{className:Dn},"B")),type:"top",className:Rn},h.createElement("span",{className:Pn,onMouseEnter:function(){var e;i&&ce.emit(null==ce||null===(e=ce.EVENT)||void 0===e?void 0:e.clarityRel,{hoverSelected:!0})},ref:_},h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(b,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:24,height:24,viewBox:"0 0 24 24",onClick:E}))))},Yn=t(59682),Jn=t(87384),$n=t(3388),et="NeVK4K7J",nt="xfgggOmq",tt="mOZQ6qTC",lt="Ct2Y7RCs",ot="VP4NJV6i",at="gkixdBnK",rt="YRAF0Pq9",it="_sN3nn_G",ut="Ijw_vxyr",ct="o6ynkHZH",st="oACe20E4",dt="Ok2ACNO0",ft="QEGgt6Nx",mt="QyDcSfQq",vt="Qpnzns5H";function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},pt.apply(this,arguments)}var gt,ht,_t=function(e){return h.createElement("svg",pt({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Gn||(Gn=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.867 6.29a2 2 0 012-2H16.44a2 2 0 012 2v5.25l-1.644-.959a1 1 0 00-.801-.09V8.272a.6.6 0 00-.6-.6h-.76l.32-.48a.6.6 0 00-.999-.666l-.764 1.146h-.305l-.764-1.146a.6.6 0 00-.998.666l.32.48h-.765a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.57l-.605.353a1 1 0 00-.346.337h-1.091a.6.6 0 100 1.2h.94v4.178c0 .05.005.1.012.147H5.867a2 2 0 01-2-2V6.29zm10.927 4.87l-.488.285h-.67v-.684h1.158v.4zM5.836 7.333a.6.6 0 01.6-.6h2.358a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.036v1.157h1.758a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.436a.6.6 0 010-1.2h1.758v-2.1H6.436a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.758V7.932H6.436a.6.6 0 01-.6-.6zm5.443 4.113v-.684h1.157v.684h-1.157zm0-1.884h1.157v-.688h-1.157v.688zm2.357 0h1.158v-.688h-1.158v.688z",fill:"#fff"})),Kn||(Kn=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.778 12.703a1 1 0 00-.98 0l-2.429 1.366a1 1 0 00-.51.871v2.688a1 1 0 00.51.871l2.429 1.366a1 1 0 00.98 0l2.429-1.366a1 1 0 00.51-.871V14.94a1 1 0 00-.51-.871l-2.429-1.366zm-.49 2.299a1.286 1.286 0 100 2.571 1.286 1.286 0 000-2.571z",fill:"#fff"})))};function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},yt.apply(this,arguments)}var wt,Et=function(e){return h.createElement("svg",yt({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),gt||(gt=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 10a2 2 0 012-2h12a2 2 0 012 2v2.62c-.073.088-.14.185-.199.287L20.6 16.72V13a.6.6 0 00-.6-.6h-1.53l.567-1.132a.6.6 0 00-1.074-.536L17.13 12.4h-.259l-.833-1.668a.6.6 0 00-1.074.536l.566 1.132H14a.6.6 0 00-.6.6v4a.6.6 0 00.6.6h2.4v.8h-2.9a.6.6 0 100 1.2h2.9V21a.6.6 0 101.2 0v-1.4h1.337l-.198.343c-.181.314-.28.669-.288 1.031l-.035 1.703c-.012.59.212 1.044.566 1.323H9a2 2 0 01-2-2V10zm7.6 3.6h1.8v.8h-1.8v-.8zm0 2v.8h1.8v-.8h-1.8zm3 0v.8h1.8v-.8h-1.8zm1.8-1.2v-.8h-1.8v.8h1.8zm-1.8 4v-.8H20a.601.601 0 00.096-.008l-.466.808H17.6zM21 24h.01H21zM10 10.872a.6.6 0 000 1.2h1.4v1.8H10a.6.6 0 00-.6.6v2.5a.6.6 0 00.6.6h1.4v2.3H10a.6.6 0 000 1.2h2a.6.6 0 00.6-.6v-3.5a.6.6 0 00-.6-.6h-1.4v-1.3H12a.6.6 0 00.6-.6v-3a.6.6 0 00-.6-.6h-2z",fill:"#fff",fillOpacity:.9})),ht||(ht=h.createElement("path",{d:"M24.262 14.514a.5.5 0 01.683-.182l1.284.742a.5.5 0 01.183.684l-3.83 6.602a.5.5 0 01-.23.206l-1.528.678a.2.2 0 01-.28-.162l-.177-1.661a.5.5 0 01.065-.304l3.83-6.603z",fill:"#fff",fillOpacity:.9})))},kt=t(30673),bt=t(8369),Ct=t.n(bt),St=t(76569),It=t.n(St),Nt=t(4085),xt=t(63182),Tt=t(30978),Lt=t(76445),Pt={container:"CMczMJpF",danmukuList:"BsEwlJ9h",disable:"o3j60atn",modalBackground:"FuHuRzHh",mountEl:"KzDWv8ED",modal:"WnEYavX5",header:"BvbOS8z7",divider:"a7vwnOzj",content:"PgbsaihK",danmakuHeader:"yv8IDbW4",time:"Miewz3GE",text:"_JRThMv_",noMore:"Vt3R4An8",danmakuList:"SQv4WVUj",danmakuLi:"ayrZoO1l",interaction:"yeiYJggj",timeLi:"f6F3WLNl",textLi:"I0jxIWJt",icon:"ltiMXcmU",isLike:"huFy2l7k",likeIcon:"LqDshKsU",report:"fnBwMqee",deleteIcon:"UW2yjcw6",error:"Gs7xrqqA",toast:"EQnZA4sO",defaultLoading:"AdCGMWlA",centerLoading:"bdJ3xez3"},Zt=t(75422),Mt=t(3543);function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Rt.apply(this,arguments)}var Dt,Ot=function(e){return h.createElement("svg",Rt({width:6,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),wt||(wt=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.22 9.79a.69.69 0 010-1.01L4.19 5 .22 1.22a.69.69 0 010-1.01.777.777 0 011.06 0l4.5 4.285a.69.69 0 010 1.01l-4.5 4.286a.777.777 0 01-1.06 0z",fill:"#fff"})))};function At(){return At=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},At.apply(this,arguments)}var Ft,Ut=function(e){return h.createElement("svg",At({width:13,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Dt||(Dt=h.createElement("path",{d:"M12.601 12.601a1.362 1.362 0 01-1.927 0L6.5 8.427 2.326 12.6a1.362 1.362 0 01-1.927-1.927L4.573 6.5.4 2.326A1.362 1.362 0 112.326.399L6.5 4.573 10.674.4a1.362 1.362 0 111.927 1.927L8.427 6.5l4.174 4.174a1.362 1.362 0 010 1.927z",fill:"#fff",fillOpacity:.8})))},Bt=function(e){var n=e.danmaku,t=e.isLogin,l=e.player,o=e.loginDispatch,a=e.awemeId,r=e.authorId,i=e.isDanmuAuthor,u=e.isAwemeAuthor,c=e.setDanmakuList,m=e.userInfo,v=n.danmakuId,p=n.text,_=n.offsetTime,y=n.diggType,w=(0,h.useState)(null),k=(0,f.Z)(w,2),b=k[0],C=k[1],S=U().emojiListMapped,N=(0,h.useState)(Boolean(y)),x=(0,f.Z)(N,2),T=x[0],L=x[1],P=(0,h.useRef)(Boolean(y)),Z=(0,h.useState)(t),M=(0,f.Z)(Z,2),R=M[0],D=M[1],O=xn().logParams;(0,h.useEffect)((function(){if(S){var e=yn({danmakuId:v,text:p,emojiListMapped:S});C(e)}}),[S,p,v]),(0,h.useEffect)((function(){P.current=T}),[T]),(0,h.useEffect)((function(){var e=function(){D(!0)};return l&&l.on(ge,e),function(){l.off(ge,e)}}),[l,a]);var A=(0,h.useCallback)(ie()((0,d.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=4;break}(0,de.default)({success:function(){var e=(0,d.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"updateUserInfo"}),l.emit(ge),e.next=4,(0,se.ob)({danmakuId:v,awemeId:a,type:1});case 4:n=e.sent,0===n.statusCode&&(L((function(e){return!e})),c((function(e){var n=ln()(e).call(e,(function(e){return e.danmakuId===v}));return e[n].diggType=e[n].diggType?0:1,(0,kt.Z)(e)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u53ef\u4e3a\u5f39\u5e55\u70b9\u8d5e",enterMethod:"like_danmaku"}),e.next=11;break;case 4:return L((function(e){return!e})),c((function(e){var n=ln()(e).call(e,(function(e){return e.danmakuId===v}));return e[n].diggType=e[n].diggType?0:1,(0,kt.Z)(e)})),e.next=8,(0,se.ob)({danmakuId:v,awemeId:a,type:P.current?0:1});case 8:n=e.sent,0===n.statusCode&&Ce.sendLog(P.current?"cancelLikeDanmaku":"likeDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:a,author_id:r,danmaku_id:v,enter_method:"list"},O));case 11:case"end":return e.stop()}}),e)}))),500),[v,R,a,O]),F=(0,h.useCallback)((function(){var e,n;(0,ue.mJ)({title:"\u4e3e\u62a5\u5f39\u5e55",type:"danmaku",object_id:v,owner_id:null==m||null===(e=m.info)||void 0===e?void 0:e.uid,owner_sec_id:(null==m||null===(n=m.info)||void 0===n?void 0:n.secUid)||"",onClose:function(){ce.emit(ce.EVENT.videoRemoveStopPlayNext)},logParams:{enter_method:"list"},loginDispatch:o,userInfo:null==m?void 0:m.info,pipeline_id:"",enter_from:(0,I.yW)(),isOrigin:!0},document.body)}),[v,m,l]),B=(0,h.useCallback)((0,d.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=l&&l.danmaku&&(fe.F.info("\u5df2\u5220\u9664\u5f39\u5e55",null==l?void 0:l.root),c((function(e){var n=ln()(e).call(e,(function(e){return e.danmakuId===v}));return Ct()(e).call(e,n,1),(0,kt.Z)(e)}))),e.next=3,(0,se.YO)({userType:i?1:2,danmakuId:v});case 3:n=e.sent,0===n.statusCode&&Ce.sendLog("deleteDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:a,author_id:r,danmaku_id:v,enter_method:"list"},O));case 6:case"end":return e.stop()}}),e)}))),[v,a,l,r,i,O]);return h.createElement("li",{className:Pt.danmakuLi},h.createElement("div",{className:Pt.timeLi},(0,Tt.$y)(_)),h.createElement("div",{className:Pt.textLi},b),h.createElement("div",{className:Pt.interaction},h.createElement("div",{className:E()(Pt.icon,Pt.likeIcon,(0,z.Z)({},Pt.isLike,T)),onClick:A},h.createElement("svg",{className:Pt.iconLike,width:"14",height:"13",viewBox:"0 0 14 13"},h.createElement("use",{href:"#svg-like"}))),!i&&h.createElement("div",{className:E()(Pt.icon,Pt.report),onClick:F},h.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},h.createElement("use",{href:"#svg-report"}))),(u||i)&&h.createElement("div",{className:E()(Pt.icon,Pt.deleteIcon),onClick:B},h.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14"},h.createElement("use",{href:"#svg-delete"})))))},Vt=function(e){var n=e.player,t=e.loginDispatch,l=e.isLogin,o=e.awemeInfo,a=e.userUid,r=e.className,i=e.userInfo,u=e.targetMountEl,c=e.onClick,m=(0,h.useState)([]),v=(0,f.Z)(m,2),p=v[0],_=v[1],y=(0,h.useState)(!1),w=(0,f.Z)(y,2),k=w[0],C=w[1],N=(0,h.useState)(!1),x=(0,f.Z)(N,2),T=x[0],L=x[1],P=(0,h.useState)(!0),Z=(0,f.Z)(P,2),M=Z[0],R=Z[1],D=(0,h.useRef)(!0),O=(0,h.useRef)(0),A=xn().logParams,F=(0,h.useCallback)((0,d.Z)(g().mark((function e(){var n,t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T&&D.current){e.next=2;break}return e.abrupt("return");case 2:return L(!0),e.next=5,(0,se.JV)({awemeId:null==o?void 0:o.awemeId,offset:O.current,count:50});case 5:(null==(t=e.sent)||null===(n=t.danmakuList)||void 0===n?void 0:n.length)>0&&_((function(e){var n;return _n()(n=[]).call(n,(0,kt.Z)(e),(0,kt.Z)(t.danmakuList))})),null!=t&&t.hasMore&&(O.current+=50),R(null==t?void 0:t.hasMore),L(!1);case 10:case"end":return e.stop()}}),e)}))),[null==o?void 0:o.awemeId,T,M]);(0,h.useEffect)((function(){D.current=M}),[M]),(0,h.useEffect)((function(){return function(){ce.emit(ce.EVENT.videoRemoveStopPlayNext)}}),[]);var U=(0,h.useCallback)((0,d.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _([]),e.next=3,R(!0);case 3:return O.current=0,e.next=6,F();case 6:case"end":return e.stop()}}),e)}))),[F]),B=(0,h.useCallback)((function(e){var n=e.target;n.scrollHeight,n.scrollTop,n.clientHeight,n.scrollHeight-n.scrollTop<n.clientHeight+200&&F()}),[F]),j=function(){Ce.sendLog("danmakuListShow",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==o?void 0:o.awemeId},A))};(0,h.useEffect)((function(){return S.Le.setConfig(S.gI.IsShowDanmakuListModal,k),function(){S.Le.setConfig(S.gI.IsShowDanmakuListModal,!1)}}),[k]),(0,h.useEffect)((function(){return ce.listen(ce.EVENT.hideModal,(function(){return C(!1)}))}),[]),(0,h.useEffect)((function(){var e="DanmakuList";k&&(0,Lt.o)({pauseCustomShortcut:!0,pauseGlobalShortcut:!0,pausePlayControlShortcut:!0},e),!k&&(0,Lt.m)(e)}),[k]);var W=(0,b.x)(It()(j).call(j,null));return h.createElement("div",{className:E()(Pt.container,r)},h.createElement("div",{className:E()(Pt.danmukuList),onClick:function(){u||(document.body.style.overflow="hidden"),xt.YY.replaceCurrentTask({id:"danmuList"}),Ce.sendLog("clickDanmakuList",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==o?void 0:o.awemeId},A)),U(),C(!0),V()((function(){ce.emit(ce.EVENT.videoStopPlayNext)}),100),null==c||c()}},h.createElement("div",null,"\u5f39\u5e55\u5217\u8868"),h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Ot,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:6,height:10,viewBox:"0 0 6 10"})),k&&h.createElement(Nt.u,{className:E()(Pt.modal,(0,z.Z)({},Pt.mountEl,Boolean(u))),modalClassName:E()(Pt.modalBackground,(0,z.Z)({},Pt.mountEl,Boolean(u))),type:"custom",onCancel:function(){document.body.style.overflow="",ce.emit(ce.EVENT.videoRemoveStopPlayNext),C(!1),xt.YY.finishTask("danmuList")},isHide:!k,mountEl:u},h.createElement("div",{className:Pt.header,ref:W},h.createElement("div",null,"\u5f39\u5e55\u5217\u8868"),h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Ut,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:13,height:13,viewBox:"0 0 13 13",onClick:function(){document.body.style.overflow="",ce.emit(ce.EVENT.videoRemoveStopPlayNext),C(!1),xt.YY.finishTask("danmuList")}})),h.createElement(Jn.i,{className:Pt.divider}),h.createElement("div",{className:Pt.content},h.createElement("div",{className:Pt.danmakuHeader},h.createElement("div",{className:Pt.time},"\u65f6\u95f4"),h.createElement("div",{className:Pt.text},"\u5f39\u5e55\u5185\u5bb9")),(null==p?void 0:p.length)>0&&h.createElement("ul",{className:Pt.danmakuList,onScroll:B,onWheel:function(e){return e.stopPropagation()}},Cn()(p).call(p,(function(e){return h.createElement(Bt,{danmaku:e,key:null==e?void 0:e.danmakuId,player:n,isLogin:l,awemeId:o.awemeId,authorId:null==o?void 0:o.authorInfo.uid,isDanmuAuthor:(null==e?void 0:e.userId)===a,isAwemeAuthor:a===(null==o?void 0:o.authorInfo.uid),loginDispatch:t,setDanmakuList:_,userInfo:i})})),T&&h.createElement(Zt.g,{className:E()(Pt.defaultLoading),text:"\u52a0\u8f7d\u4e2d"}),!M&&h.createElement("li",{className:Pt.noMore},"\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4e86")),(null==p?void 0:p.length)<=0&&T&&h.createElement(Zt.g,{className:E()(Pt.centerLoading),text:"\u52a0\u8f7d\u4e2d"}),(null==p?void 0:p.length)<=0&&!T&&h.createElement(Mt.gi,{className:Pt.error,title:"",desc:"\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4e86"}))))},jt=function(e){var n=e.label,t=e.max,l=e.showDots,o=e.getLabelFunc,a=e.defaultValue,r=e.onChange,i=e.resetVal,u=e.min,c=e.player,s=(0,h.useState)(a||1),d=(0,f.Z)(s,2),m=d[0],v=d[1];xn().logParams;(0,h.useEffect)((function(){v(a)}),[i,a]);var p=(0,h.useCallback)((function(e){r(e),v((function(n){return n!==e&&(null==c||c.emit(j.USER_ACTION,{action:"danmaku_setting"})),e}))}),[r]);return h.createElement("div",{className:dt},h.createElement("span",{className:ft},n),h.createElement(Yn.i,{className:mt,min:u||0,max:t,getLabelFunc:o,showDots:l,value:m,onChange:p}))},Wt=function(e){var n=e.player,t=e.awemeInfo,l=e.isLogin,o=e.noDisturb,a=e.loginDispatch,r=e.userUid,i=e.danmuDefaultVal,u=e.userInfo,c=e.isDanmuIcon,d=e.panelClassName,m=e.inputRef,v=e.initialStatus,p=e.setInitialStatus,g=e.isConfGot,_=e.children,y=e.danmuListTargetEl,w=(0,h.useState)(!1),k=(0,f.Z)(w,2),b=k[0],C=k[1],N=(0,h.useState)(!0),x=(0,f.Z)(N,2),T=x[0],L=x[1],P=(0,h.useState)(!1),Z=(0,f.Z)(P,2),M=Z[0],R=Z[1],D=(0,h.useRef)(),O=xn().logParams;return(0,h.useEffect)((function(){var e=ce.listen(ce.EVENT.syncInteraction,(function(){return C((function(e){return!e}))}));return function(){null==e||e()}}),[]),h.createElement("div",{className:E()(et,(0,z.Z)({},nt,M)),onMouseEnter:function(){var e,n;(Ce.sendLog("enterDanmakuSetting",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)()},O)),L(!1),c&&sn())&&p(null===(e=sn())||void 0===e?void 0:e.isOpen);(ce.emit(ce.EVENT.videoStopPlayNext),V()((function(){var e;c&&(null===(e=m.current)||void 0===e||e.focus())}),100),o)&&ce.emit(null==ce||null===(n=ce.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});clearTimeout(D.current),S.Le.getConfig(S.gI.IsShowDanmakuListModal)||R(!0)},onMouseLeave:function(){var e;c&&(null===(e=m.current)||void 0===e||e.blur()),ce.emit(ce.EVENT.videoRemoveStopPlayNext),D.current=V()((function(){R(!1)}),500)}},T?h.createElement(Xn,{player:n,initialStatus:v,setInitialStatus:p,awemeInfo:t,isConfGot:g,isLogin:null==u?void 0:u.isLogin,noDisturb:o,isDanmuIcon:c,isNeverHover:T}):h.createElement("div",{className:tt},h.createElement("div",{className:E()(lt,d)},h.createElement("div",{className:at},h.createElement("div",{className:rt},"\u5f39\u5e55\u8bbe\u7f6e"),h.createElement("div",{className:it,onClick:function(){!function(e){var n=e.danmu,t=e.awemeInfo,l=e.player,o=e.isLogin,a=e.danmuDefaultVal,r=e.logParams,i=(a||{}).douyin_danmuku_conf_region,u=(0,s.Z)({},S.Le.getConfig(rn)),c=an.opacity,d=an.speed,f=an.fontSize,m=i!==undefined?ln()(Ee).call(Ee,(function(e){return i===e.key})):null==an?void 0:an.region;an.region=m,S.Le.setConfig(rn,null),null==n||n.setOpacity(c/100);var v=ke[f].value;null==n||n.setFontSize(String(v),v+20,{reflow:!1});var p=(0,s.Z)({start:0,end:Ee[m].value},1===m||0===m?{lines:m+1}:{});null==n||n.setArea(p),null==n||n.setAllDuration(me,be[d].value/(null==l?void 0:l.playbackRate)),pn({conf:{region:m,speed:d,fontSize:f,opacity:c,isOpen:u.isOpen},awemeInfo:t,oldConf:u,isLogin:o,logParams:r})}({danmu:null==n?void 0:n.danmaku,awemeInfo:t,player:n,isLogin:l,danmuDefaultVal:i,logParams:O}),C((function(e){return!e}))}},h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl($n.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:13,height:12,viewBox:"0 0 14 13"}),h.createElement("span",null,"\u6062\u590d\u9ed8\u8ba4"))),h.createElement(Jn.i,{className:ut}),h.createElement("div",{className:st},Cn()(gn).call(gn,(function(e){var o,a,r,i;return h.createElement(jt,{key:e.key,label:e.desc,showDots:e.showDots,max:e.max,min:"opacity"===e.key?20:0,getLabelFunc:e.getLabelFunc,defaultValue:null!==(a=e.key,o=Number(null!==(r=null===(i=sn())||void 0===i?void 0:i[a])&&void 0!==r?r:an[a]))&&void 0!==o?o:e.defaultVal,onChange:function(o){e.onChange({danmu:null==n?void 0:n.danmaku,val:o,awemeInfo:t,player:n,isLogin:l,logParams:O})},resetVal:b,player:n})}))),!c&&h.createElement(Jn.i,{className:ct}),h.createElement(Vt,{userUid:r,awemeInfo:t,player:n,loginDispatch:a,isLogin:l,className:c?vt:"",userInfo:u,targetMountEl:y,onClick:function(){return R(!1)}}),_)),c?h.createElement(Ve.Z,{className:ot,src:globalThis.xssNamespace.douyin_web.filterUrl(Et,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32"}):h.createElement(Ve.Z,{className:ot,src:globalThis.xssNamespace.douyin_web.filterUrl(_t,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:24,height:24,viewBox:"0 0 24 24"}))},Ht=t(85625),zt=t.n(Ht),Gt=t(35323),Kt=t.n(Gt),qt=t(50750),Qt=t.n(qt),Xt=t(26447),Yt=t.n(Xt),Jt=t(56442),$t=t.n(Jt),el="foy8gwIu",nl="RYqjae0C",tl="pLLE5Uol",ll="KegQvOm6",ol="JwZoNy6X",al="a2nFYRcv",rl="bOlXi_Q3",il="YDbUa2ls",ul="_Edz0_KI",cl="UBnH43aH";function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},sl.apply(this,arguments)}var dl,fl,ml=function(e){return h.createElement("svg",sl({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ft||(Ft=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 12a7 7 0 11-14 0 7 7 0 0114 0zm-7 9a9 9 0 100-18 9 9 0 000 18zM10.36 9.955c0 .903-.549 1.636-1.226 1.636-.678 0-1.228-.732-1.228-1.636 0-.904.55-1.637 1.228-1.637.677 0 1.227.733 1.227 1.637zm4.5 1.636c.678 0 1.227-.732 1.227-1.636 0-.904-.55-1.637-1.227-1.637-.678 0-1.227.733-1.227 1.637 0 .903.55 1.636 1.227 1.636zM12 15.297c-1.356 0-2.455-.785-2.455-1.753 0-.969 4.91-.969 4.91 0 0 .968-1.1 1.753-2.455 1.753z",fill:"#fff",fillOpacity:.5})))};function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},vl.apply(this,arguments)}var pl=function(e){return h.createElement("svg",vl({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),dl||(dl=h.createElement("rect",{x:4.664,y:4.668,width:14.667,height:14.667,rx:7.333,fill:"#fff"})),fl||(fl=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zM7.966 10.137a.908.908 0 001.285 1.284l1.87-1.87v6.912a.908.908 0 001.816 0v-6.92l.809.808 1.07 1.07a.908.908 0 001.284-1.284l-3.302-3.302a1.081 1.081 0 00-1.53 0l-3.302 3.302z",fill:"#FE2C55"})))},gl=function(e,n){var t,l=x()(t=e.match(/\[[\u4e00-\u9fa5]+\]/g)||[]).call(t,(function(e){return v()(n).call(n,e)}));return l[l.length-1]||""},hl=function(e){var n,t,l,o,a=e.awemeInfo,r=e.userInfo,i=e.player,u=e.loginDispatch,c=e.setInitialStatus,m=e.firstDanmakuShowRef,p=e.isDanmuIcon,_=e.inputRef,y=(0,h.useState)(0),w=(0,f.Z)(y,2),k=w[0],b=w[1],C=(0,h.useState)(""),S=(0,f.Z)(C,2),N=S[0],x=S[1],T=(0,h.useRef)(null),L=(0,h.useRef)(0),P=(0,h.useRef)(!1),Z=(0,h.useRef)(0),M=(0,h.useRef)(!1),R=(0,h.useRef)(0),D=(0,h.useRef)(null),O=(0,h.useRef)(!1),A=U().emojiList,F=xn().logParams,B=(0,h.useMemo)((function(){var e;return Cn()(e=Qt()(A)).call(e,(function(e){return A[e].name}))}),[A]),W=(0,h.useMemo)((function(){var e,n;if(null==a||null===(e=a.danmakuControl)||void 0===e||!e.isPostDenied)return"\u53d1\u4e00\u6761\u53cb\u597d\u7684\u5f39\u5e55\u5427";return"\u4f5c\u8005\u4ec5\u5141\u8bb8".concat({1:"\u7c89\u4e1d",2:"\u597d\u53cb",3:"\u81ea\u5df1"}[null==a||null===(n=a.danmakuControl)||void 0===n?void 0:n.postPrivilegeLevel],"\u53d1\u5f39\u5e55")}),[a]),H=(0,h.useCallback)(function(){var e=(0,d.Z)(g().mark((function e(n){var t,l,o,d,f,v,p,h,y,w,E,k,b,C,S;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a||null===(t=a.danmakuControl)||void 0===t||!t.isPostDenied){e.next=2;break}return e.abrupt("return");case 2:if(!/^\s*$/.test(N)){e.next=5;break}return fe.F.info("\u8868\u8fbe\u4f60\u7684\u6001\u5ea6\u518d\u53d1\u5f39\u5e55",null==i?void 0:i.root),e.abrupt("return");case 5:if(!P.current){e.next=7;break}return e.abrupt("return");case 7:if(!(Yt()()-Z.current<5e3)){e.next=10;break}return fe.F.info("\u53d1\u9001\u9891\u7387\u8fc7\u5feb, \u7b49\u5f855\u79d2\u540e\u53ef\u518d\u6b21\u53d1\u9001",null==i?void 0:i.root),e.abrupt("return");case 10:return P.current=!0,w=Math.floor(1e3*(null==i?void 0:i.currentTime)),e.next=14,(0,se.FW)({item_id:null==a?void 0:a.awemeId,text:N,user_id:null==r||null===(l=r.info)||void 0===l?void 0:l.uid,offset_time:w});case 14:E=e.sent,P.current=!1,Z.current=Yt()(),k=E.statusCode,b=E.danmakuId,C=b||zt()("postComment"),Ce.sendLog("danmakuPubDone",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),click_method:n,group_id:null==a?void 0:a.awemeId,author_id:null==a||null===(o=a.authorInfo)||void 0===o?void 0:o.uid,danmaku_id:null!=b?b:0,video_time:Math.floor(1e3*i.currentTime||0),video_pct:1e3*i.currentTime/(null==a||null===(d=a.video)||void 0===d?void 0:d.duration),danmaku_pub_duration:Yt()()-L.current,is_author:(null==r||null===(f=r.info)||void 0===f?void 0:f.uid)===(null==a||null===(v=a.authorInfo)||void 0===v?void 0:v.uid)?1:0,emoji_id:gl(N,B),video_scale:(null==a||null===(p=a.video)||void 0===p?void 0:p.width)/(null==a||null===(h=a.video)||void 0===h?void 0:h.height),item_duration_ms:(null==a||null===(y=a.video)||void 0===y?void 0:y.duration)||0},F)),c(!0),null==i||i.emit("DANMAKU_SWITCH_OPEN"),S="".concat(dn(),"px"),V()((function(){var e,n,t,l,o;null==i||null===(e=i.danmaku)||void 0===e||e.sendComment({prior:!0,user_id:null==r||null===(n=r.info)||void 0===n?void 0:n.uid,id:C,duration:fn()/i.playbackRate,realTime:!0,elLazyInit:!0,text:N,style:{color:"#FFFFFF",fontSize:S,height:S,lineHeight:S,marginTop:"20px"},_:{isLogin:null==r?void 0:r.isLogin,isDanmuAuthor:!0,loginDispatch:u,firstDanmakuShowRef:m,offsetTime:0===k?w:0,userInfo:r}}),i.sendDanmakuCountSelf=(null!==(t=null==i?void 0:i.sendDanmakuCountSelf)&&void 0!==t?t:0)+1,null===(l=_.current)||void 0===l||null===(o=l.blur)||void 0===o||o.call(l),ce.emit(ce.EVENT.videoRemoveStopPlayNext),x("")}),200);case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,N,r,a,B]),G=(0,h.useCallback)((function(e){var n=_.current.selectionStart,t=n,l=function(e,n){for(var t=n-1,l=!1,o=n,a=!1;t>=0;){if("["===e[t]){l=!0;break}if("]"===e[t])break;t--}for(;o<=e.length-1;){if("]"===e[o]){a=!0;break}if("["===e[o])break;o++}return l&&a?[t,o+1]:[-1,-1]}(N,n),o=(0,f.Z)(l,2),a=o[0],r=o[1];if(v()(B).call(B,$t()(N).call(N,a,r))){if(N.length-(r-a+1)+e.name.length>40)return b(2),void _.current.focus();x((function(n){return $t()(n).call(n,0,a)+e.name+$t()(n).call(n,r)})),t=a}else{if(N.length+e.name.length>40)return b(2),void _.current.focus();x((function(t){return $t()(t).call(t,0,n)+e.name+$t()(t).call(t,n)}))}b(2),V()((function(){_.current.setSelectionRange(t+e.name.length,t+e.name.length),_.current.focus()}))}),[N,B]),K=(0,h.useCallback)((function(e){x(e.target.value)}),[]);return(0,h.useEffect)((function(){0===N.length?(L.current,(0,on.vU)()&&(O.current=!0,V()((function(){return O.current=!1})))):(0===L.current&&(L.current=Yt()()),p||ce.emit(ce.EVENT.videoStopPlayNext))}),[N,p,i]),(0,h.useEffect)((function(){return function(){ce.emit(ce.EVENT.videoRemoveStopPlayNext)}}),[]),(0,h.useEffect)((function(){var e,n;return null===(e=_.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"selectstart",wn),function(){var e,n;null===(e=_.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"selectstart",wn)}}),[]),(0,h.useEffect)((function(){if(k){var e=T.current;return null==e||e.addEventListener("wheel",wn),function(){null==e||e.removeEventListener("wheel",wn)}}}),[k]),(0,h.useEffect)((function(){if(1===k){var e;Ce.sendLog("emojiTabShow",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),enter_method:"danmaku"},F));var n=_.current;return n.addEventListener("click",wn),Kt()(i,"config.closeDelayBlur",!0),null==i||null===(e=i.focus)||void 0===e||e.call(i,{autoHide:!1}),function(){var e;Kt()(i,"config.closeDelayBlur",!1),null==i||null===(e=i.focus)||void 0===e||e.call(i),n.removeEventListener("click",wn)}}}),[k]),h.createElement("div",{className:el},k?h.createElement("div",{className:E()(ll,(n={},(0,z.Z)(n,rl,2===k),(0,z.Z)(n,ol,p),n)),ref:T,onMouseEnter:function(){clearTimeout(R.current)},onMouseLeave:function(){R.current=V()((function(){return b(2)}),700)}},h.createElement("div",{className:al,onClick:function(e){return e.nativeEvent.stopImmediatePropagation()}},Cn()(A).call(A,(function(e){return h.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(e.img,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),key:e.name,onClick:function(n){n.preventDefault(),Ce.sendLog("clickEmoji",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),enter_method:"danmaku",click_method:"emoji"},F)),G(e),null==i||i.emit(j.USER_ACTION,{action:"danmaku_emoji_click"})}})})))):null,null!=r&&r.isLogin?h.createElement("input",{ref:_,className:nl,type:"text",disabled:(null==a||null===(t=a.danmakuControl)||void 0===t?void 0:t.isPostDenied)||!1,maxLength:40,value:N,onChange:K,placeholder:N?"":W,spellCheck:!1,onFocus:function(){var e,n;Ce.sendLog("inputDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)()},F)),Kt()(i,"config.closeDelayBlur",!0),null==i||null===(e=i.focus)||void 0===e||e.call(i,{autoHide:!1}),null==i||null===(n=i.emit)||void 0===n||n.call(i,j.USER_ACTION,{action:"danmaku_input_focus"}),p||ce.emit(ce.EVENT.videoStopPlayNext)},onBlur:function(){var e;p||(Kt()(i,"config.closeDelayBlur",!1),null==i||null===(e=i.focus)||void 0===e||e.call(i),0===(null==N?void 0:N.length)&&ce.emit(ce.EVENT.videoRemoveStopPlayNext))},onCompositionStart:function(){M.current=!0},onCompositionEnd:function(e){V()((function(){return M.current=!1}),10)},onKeyDown:function(e){var n,t;!(null!==(n=e.target)&&void 0!==n&&n.value||"ArrowUp"!==e.code&&"ArrowDown"!==e.code)&&(null!==(t=e.target)&&void 0!==t&&t.value||"ArrowUp"!==e.code&&"ArrowDown"!==e.code)||null==e||e.stopPropagation();var l=e.key,o=e.ctrlKey||e.metaKey;return"Enter"!==l||o||M.current?null:H("hot_key")}}):h.createElement("div",{className:tl,onClick:function(){(0,de.default)({enterMethod:"danmaku",headerText:"\u767b\u5f55\u540e\u53ef\u53d1\u5e03\u5f39\u5e55\u4e92\u52a8",success:function(){u({type:"updateUserInfo"})}})}},h.createElement("span",null,"\u767b\u5f55"),"\u540e\u53ef\u53d1\u5e03\u5f39\u5e55"),h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(ml,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:E()([il],(o={},(0,z.Z)(o,ul,1===k),(0,z.Z)(o,cl,!1===(null==r?void 0:r.isLogin)||!0===(null==a||null===(l=a.danmakuControl)||void 0===l?void 0:l.isPostDenied)),o)),width:24,height:24,viewBox:"0 0 24 24",onMouseEnter:function(e){var n;!1===(null==r?void 0:r.isLogin)||!0===(null==a||null===(n=a.danmakuControl)||void 0===n?void 0:n.isPostDenied)||O.current||(clearTimeout(R.current),b(1))},onMouseLeave:function(){R.current=V()((function(){b((function(e){return 0===e?0:2}))}),700)}}),N?h.createElement(Ve.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(pl,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:24,height:24,viewBox:"0 0 24 24",onClick:function(e){H("click")},ref:D}):null)},_l="cL3t_Mk2",yl="aoXhLsp0",wl="ezX8A3xQ",El="W4ZUHFSh",kl="OWQ5X0Hi",bl="UoqhJZ_R",Cl="wS0UjZfP",Sl="I6WvmKj6",Il="E8wnDxIb",Nl=t(35667),xl=t(72627),Tl=t(75780),Ll=t(51508),Pl=t(66028),Zl=(t(32343),function(e){var n,t,l,o,a,r=S.Le.getConfig(S.gI.DanmuTimeGap),i=e.isActive,u=e.awemeInfo,c=e.userInfo,m=e.player,p=e.bulletRef,_=e.loginDispatch,y=e.danmakuInfo,w=e.abtestData,k=e.isDanmuIcon,N=e.danmuListTargetEl,x=e.logParams,T=void 0===x?{}:x,L=(0,h.useState)(Boolean(y)||!1),P=(0,f.Z)(L,2),Z=P[0],M=P[1],R=(0,h.useState)(!1),D=(0,f.Z)(R,2),O=D[0],A=D[1],F=(0,h.useState)(!1),B=(0,f.Z)(F,2),V=B[0],j=B[1],W=(0,h.useState)(Boolean(y)||!1),H=(0,f.Z)(W,2),z=H[0],G=H[1],K=(0,h.useRef)(!1),q=(0,h.useRef)(null);(0,h.useEffect)((function(){0===(null==y?void 0:y.status)&&fe.F.info("\u6b64\u5f39\u5e55\u5df2\u5220\u9664")}),[]);var Q=(0,b.x)((function(){return A(!0)}));(0,h.useEffect)((function(){var e=!1;return(0,d.Z)(g().mark((function n(){var t,l,o;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vn();case 2:t=n.sent,e||y||(M(t.isOpen),G(!0),O&&Ce.sendLog("danmakuPubShow",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==u?void 0:u.awemeId,author_id:null==u||null===(l=u.authorInfo)||void 0===l?void 0:l.uid,danmaku_switch_status:t.isOpen?1:0,is_post:null==c||!c.isLogin||null!=u&&null!==(o=u.danmakuControl)&&void 0!==o&&o.isPostDenied?0:1},T)));case 4:case"end":return n.stop()}}),n)})))(),function(){e=!0}}),[u,y,O]);var X=U().emojiListMapped;kn({ref:p,isActive:i,player:m,awemeInfo:u,danmakuInfo:y,initialStatus:Z,setDanmakuInited:j,userInfo:c,emojiListMapped:X,logParams:T}),In({isActive:i,player:m,awemeInfo:u,danmakuInfo:y,danmakuInited:V,firstDanmakuShowRef:K,danmuTimeGap:r,logParams:T});var Y=v()(n=[C.LD.A1,C.LD.All]).call(n,null==w?void 0:w.noDisturbV2);return k?h.createElement(Nn.Provider,{value:{logParams:T}},h.createElement("div",{className:E()("isDark",El),ref:Q,onWheel:function(e){return e.stopPropagation()}},h.createElement(Wt,{player:m,awemeInfo:u,isLogin:null==c?void 0:c.isLogin,noDisturb:Y,loginDispatch:_,userUid:null==c||null===(o=c.info)||void 0===o?void 0:o.uid,isDanmuIcon:k,danmuDefaultVal:(null==w?void 0:w.danmaku)||(null==w||null===(a=w.backendAbTest)||void 0===a?void 0:a.danmaku),panelClassName:kl,userInfo:c,inputRef:q,initialStatus:Z,setInitialStatus:M,isConfGot:z,danmuListTargetEl:N},k?h.createElement(h.Fragment,null,h.createElement(Ll.i,{className:bl}),h.createElement(Xn,{player:m,initialStatus:Z,setInitialStatus:M,awemeInfo:u,isConfGot:z,isLogin:null==c?void 0:c.isLogin,noDisturb:Y,isDanmuIcon:k}),h.createElement("div",{className:Cl},h.createElement(hl,{awemeInfo:u,userInfo:c,player:m,loginDispatch:_,setInitialStatus:M,firstDanmakuShowRef:K,isDanmuIcon:k,inputRef:q}))):null))):h.createElement(Nn.Provider,{value:{logParams:T}},h.createElement("div",{className:E()("isDark",yl),ref:Q,onWheel:function(e){return e.stopPropagation()}},h.createElement(Xn,{player:m,initialStatus:Z,setInitialStatus:M,awemeInfo:u,isConfGot:z,isLogin:null==c?void 0:c.isLogin,noDisturb:Y}),h.createElement(Wt,{player:m,awemeInfo:u,isLogin:null==c?void 0:c.isLogin,noDisturb:Y,loginDispatch:_,userUid:null==c||null===(t=c.info)||void 0===t?void 0:t.uid,setInitialStatus:M,danmuDefaultVal:(null==w?void 0:w.danmaku)||(null==w||null===(l=w.backendAbTest)||void 0===l?void 0:l.danmaku),userInfo:c,inputRef:q,danmuListTargetEl:N}),h.createElement("div",{className:wl}),h.createElement(hl,{awemeInfo:u,userInfo:c,player:m,loginDispatch:_,setInitialStatus:M,firstDanmakuShowRef:K,inputRef:q})))}),Ml=function(e){(0,u.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,i.Z)(t,[{key:"afterCreate",value:function(){this.renderRoot()}},{key:"destroy",value:function(){(0,Tl.v)(this)}},{key:"renderRoot",value:function(){(0,Tl.s)(this,h.createElement(Zl,this.config))}},{key:"updateConfig",value:function(e){this.config=e,this.renderRoot()}},{key:"render",value:function(){return'<div data-state="normal" class="'.concat(_l,' danmakuContainer" data-e2e=\'danmaku-container\' style=""></div>')}}],[{key:"pluginName",get:function(){return"DanmakuPlugin"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_LEFT,index:9,className:"xgplayer-danmaku"}}}]),t}(_.ZP),Rl=function(e){var n=e.isActive,t=e.awemeInfo,l=e.userInfo,o=e.loginDispatch,a=e.danmakuInfo,r=e.abtestData,i=e.isDanmuIcon,u=e.danmuListTargetEl,c=e.logParams,m=(0,Nl.n)(),v=(0,h.useRef)(null);(0,h.useEffect)((function(){var e,s;return m&&n&&null!=r&&null!==(e=r.danmaku)&&void 0!==e&&e.douyin_danmaku&&null!=t&&null!==(s=t.danmakuControl)&&void 0!==s&&s.enableDanmaku?(m.registerPlugin(Ml,{player:m,bulletRef:v,isActive:n,userInfo:l,loginDispatch:o,awemeInfo:t,danmakuInfo:a,abtestData:r,isDanmuIcon:i,danmuListTargetEl:u,logParams:c}),function(){var e,n;null!=m&&null!==(e=m.getPlugin)&&void 0!==e&&e.call(m,"DanmakuPlugin")&&(null==m||null===(n=m.unRegisterPlugin)||void 0===n||n.call(m,"DanmakuPlugin",!0))}):undefined}),[m,n,t]),(0,k.Z)((function(){var e,s;if(m&&n&&null!=r&&null!==(e=r.danmaku)&&void 0!==e&&e.douyin_danmaku&&null!=t&&null!==(s=t.danmakuControl)&&void 0!==s&&s.enableDanmaku){var d=m.getPlugin("DanmakuPlugin");d&&d.updateConfig({player:m,bulletRef:v,isActive:n,userInfo:l,loginDispatch:o,awemeInfo:t,danmakuInfo:a,abtestData:r,isDanmuIcon:i,logParams:c,danmuListTargetEl:u})}}),[l,r,i,c,u]);var p=function(e){var n=e.awemeInfo,t=e.userInfo,l=e.player,o=e.loginDispatch,a=e.logParams,r=(0,h.useState)(Boolean(null==t?void 0:t.isLogin)),i=(0,f.Z)(r,2),u=i[0],c=i[1],m=(0,h.useRef)(""),v=(0,h.useRef)(!1),p=(0,h.useRef)(null),_=(0,h.useRef)(!1);(0,h.useEffect)((function(){var e=function(){c(!0)};if(l)return l.on(ge,e),function(){l.off(ge,e)}}),[l,n]),(0,h.useEffect)((function(){c(Boolean(null==t?void 0:t.isLogin))}),[t]);var y=(0,h.useCallback)(ie()((0,d.Z)(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=5;break}V()((function(){l.danmaku.freezeComment(m.current)}),100),(0,de.default)({success:function(){var e=(0,d.Z)(g().mark((function e(){var t,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"updateUserInfo"}),l.emit(ge),e.next=4,(0,se.ob)({danmakuId:m.current,awemeId:null==n?void 0:n.awemeId,type:1});case 4:t=e.sent,a=t.statusCode,l.danmaku.restartComment(m.current),0===a&&(v.current=!v.current,p.current.setAttribute(Le,v.current));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u53ef\u4e3a\u5f39\u5e55\u70b9\u8d5e",enterMethod:"like_danmaku",onClose:function(){l.danmaku.restartComment(m.current)}}),e.next=12;break;case 5:return v.current=!v.current,p.current.setAttribute(Le,v.current),e.next=9,(0,se.ob)({danmakuId:m.current,awemeId:null==n?void 0:n.awemeId,type:v.current?1:0});case 9:0===e.sent.statusCode&&Ce.sendLog(v.current?"likeDanmaku":"cancelLikeDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==n?void 0:n.awemeId,author_id:null==n||null===(t=n.authorInfo)||void 0===t?void 0:t.uid,danmaku_id:m.current,enter_method:"video"},a));case 12:case"end":return e.stop()}}),e)}))),500),[u,n,l,a]),w=(0,h.useCallback)((function(){var e,n;l.emit(we,m.current),l.danmaku.freezeComment(m.current),ce.emit(ce.EVENT.videoStopPlayNext),(0,ue.mJ)({title:"\u4e3e\u62a5\u5f39\u5e55",type:"danmaku",object_id:m.current,owner_id:null==t||null===(e=t.info)||void 0===e?void 0:e.uid,owner_sec_id:(null==t||null===(n=t.info)||void 0===n?void 0:n.secUid)||"",onClose:function(){ce.emit(ce.EVENT.videoRemoveStopPlayNext),l.danmaku.restartComment(m.current),l.emit(we,null)},logParams:{enter_method:"video"},loginDispatch:o,userInfo:null==t?void 0:t.info,pipeline_id:"",enter_from:(0,I.yW)(),isOrigin:!0,toast:function(e){return fe.F.info(e,null==l?void 0:l.root)}})}),[t,l,o]),E=(0,h.useCallback)((0,d.Z)(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=l&&l.danmaku&&(null==l||l.danmaku.removeComment(m.current),fe.F.info("\u5df2\u5220\u9664\u5f39\u5e55",(null==l?void 0:l.root)||document.body)),e.next=3,(0,se.YO)({userType:_.current?1:2,danmakuId:m.current});case 3:0===e.sent.statusCode&&Ce.sendLog("deleteDanmaku",(0,s.Z)({enter_from:(0,I.mo)(),enter_from_merge:(0,I.yW)(),group_id:null==n?void 0:n.awemeId,author_id:null==n||null===(t=n.authorInfo)||void 0===t?void 0:t.uid,danmaku_id:m.current,enter_method:"video"},a));case 6:case"end":return e.stop()}}),e)}))),[n,l,a]);return(0,h.useCallback)((function(e){if(e.currentTarget){for(var n,t,l,o,a=e.target;(null===(r=a)||void 0===r||!r.getAttribute(Te))&&a!==e.currentTarget;){var r;a=a.parentNode}a!==e.currentTarget&&(p.current=a,a&&(m.current=a.getAttribute(Te),v.current="true"===a.getAttribute(Le),_.current="true"===a.getAttribute(Pe),(null!==(n=a.querySelector(".".concat(Se)))&&void 0!==n&&n.contains(e.target)||null!==(t=a.querySelector(".".concat(Ie)))&&void 0!==t&&t.contains(e.target))&&y(),null!==(l=a.querySelector(".".concat(Ne)))&&void 0!==l&&l.contains(e.target)&&w(),null!==(o=a.querySelector(".".concat(xe)))&&void 0!==o&&o.contains(e.target)&&E()))}}),[y,w,E])}({awemeInfo:t,userInfo:l,loginDispatch:o,player:m,logParams:c});return n?h.createElement(h.Fragment,null,h.createElement(je,null),h.createElement("div",{onClick:p,ref:v,className:E()(Sl,Il)})):null},Dl=function(e){var n=(0,xl.N)();return h.createElement(Pl.k,{componentName:"Danmaku",Slardar:n},h.createElement(Rl,e))}},87279:function(e,n,t){t.d(n,{E:function(){return ce}});var l=t(53864),o=t(71116),a=t(65146),r=t(64408),i=t(30906),u=t(5594),c=t.n(u),s=t(58144),d=t.n(s),f=t(26447),m=t.n(f),v=t(11227),p=t.n(v),g=t(68493),h=t.n(g),_=t(57632),y=t(54805),w=t(353),E=t(80806),k=t(18185),b=t(63663),C=t(56462),S=t(51613),I=t(92267),N=t(13948),x=t(34590),T=t(44993),L=t(61979),P=function(e){var n,t,l=e.player,o=e.isActive,a=e.awemeInfo,r=e.abtestData,u=e.startTime;l.isPlaying=!1,l.resetState();var c=(0,N.Q)({awemeInfo:a,abtestData:r,userselection:null===(n=(0,E.G)(w.SessionStorageKeys.manualSwitch))||void 0===n?void 0:n.gearType});return!!d()(t=c.url).call(t,(function(e){return Boolean(e.src)}))&&(l.setConfig((0,i.Z)({autoplay:o},c)),o?(l.config.startTime=u,l.play()):l.start(),!0)},Z=function(){I.i.sendLog("videoRetryError",{type:"retry_success"})},M=function(){I.i.sendLog("videoRetryError",{type:"retry_error"})},R=function(e){e.off("error",M),e.off("loadeddata",Z),e.once("error",M),e.once("loadeddata",Z)},D=t(35323),O=t.n(D),A=t(84639),F=t.n(A),U=t(61508),B=t(42053),V=t(67330),j=t(56920),W=t(54867),H=t(5611),z=t(97876),G=t(7786);var K=function(e){var n=e.player,t=e.isActive,r=e.awemeInfo,i=e.config,u=e.abtestData,c=(0,l.useRef)(""),s=(0,l.useRef)(t),d=(0,l.useMemo)((function(){var e;return("both"===(null==u?void 0:u.testSpeedOptionsApplySideServer)||(0,H.DT)()&&"client"===(null==u?void 0:u.testSpeedOptionsApplySideServer)||!(0,H.DT)()&&"web"===(null==u?void 0:u.testSpeedOptionsApplySideServer))&&(e=null==u?void 0:u.testSpeedOptionsApplySideServer),F()({openSpeed:!0,testCnt:0},null==u?void 0:u.testSpeedOptions,e)}),[u]);(0,l.useEffect)((function(){if(n){var e=function(){n.pause(),s.current&&(null==u?void 0:u.longtaskOpt)===j.BG.CancelPrev&&(c.current=n.src,n.src="")};function f(){O()(n,"plugins.testspeed.openSpeed",!1),O()(n,"preloadActive",!1),O()(n,"config.autoplay",!1),O()(n,"autoplay",!1),n.canRequest=!1,e()}function v(){var e,t=null===(e=(0,E.G)(w.SessionStorageKeys.manualSwitch))||void 0===e?void 0:e.gearType;O()(n,"plugins.testspeed.openSpeed",null==d?void 0:d.openSpeed),O()(n,"preloadActive",!0),O()(n,"config.autoplay",!0),O()(n,"autoplay",!0);var l=function(e){var t,l,a=G.s.getPlayerScene(n.playerId)===W.lT.Modal,r=G.s.getPlayersByScene(W.lT.Modal).length>0,i=Boolean(null===(t=(0,V.parse)(location.search))||void 0===t?void 0:t.webRid);if(!a&&r||i)return!1;(function(e){var n;return p()(n=e.config.plugins).call(n,B.default)})(n)||!c.current||n.src||(n.src=globalThis.xssNamespace.douyin_web.filterUrl(c.current,null,{logType:"js.href/src",mode:"black",reportOnly:!1})),o.Le.setConfig(o.gI.StartPlayTime,m()()),null==n||null===(l=n[e])||void 0===l||l.call(n,null)};if(n.isPlaying&&!s.current){var a,u;if(n.config.userSelectDefinition!==t)n.config.userSelectDefinition=t,n.config.definition=null==i?void 0:i.definition,n.config.DASHPlugin=null==i?void 0:i.DASHPlugin,null===(a=n.getPlugin)||void 0===a||null===(u=a.call(n,"PlayClaritySettingPlugin"))||void 0===u||u.updateConfig({awemeInfo:r});n.resetState(),n.isPlaying=!1,l("start")}else{var f,v;if(n.config.userSelectDefinition!==t)null===(f=n.getPlugin)||void 0===f||null===(v=f.call(n,"PlayClaritySettingPlugin"))||void 0===v||v.updateConfig({awemeInfo:r}),n.config.userSelectDefinition=t,n.config.definition=null==i?void 0:i.definition,n.config.DASHPlugin=null==i?void 0:i.DASHPlugin,n.resetState(),n.isPlaying=!1,l("start");else l("play"),n.emit("immediatePlay")}n.canRequest=!0}var l=null,a=z.listen(z.EVENT.PlayerFromActiveToPrev,(function(e){e.awemeId===r.awemeId&&(f(),l=z.listen(z.EVENT.PlayerFromPrevToActive,(function(e){e.awemeId===r.awemeId&&v()})))}));return t?(v(),function(){var e;null==a||a(),null===(e=l)||void 0===e||e()}):(f(),n.on(U.TIME_UPDATE,e),function(){var t;n.off(U.TIME_UPDATE,e),null==a||a(),null===(t=l)||void 0===t||t()})}}),[n,t]),(0,l.useEffect)((function(){s.current=t}),[t]),(0,l.useEffect)((function(){n&&t&&window.dispatchEvent(new Event("playNext",{bubbles:!0}))}),[n,t]),(0,l.useEffect)((function(){if(n&&t){var e;window.player=n;var l=G.s.getPlayersByScene(W.lT.Modal).length>0&&G.s.getPlayerScene(n.playerId)!==W.lT.Modal;Boolean(null===(e=(0,V.parse)(location.search))||void 0===e?void 0:e.webRid)&&(n.pause(),n.config.autoplay=!1),l||null==n||n.setUserActive(!0);var o=z.listen(z.EVENT.videoPause,(function(){n.pause(),n.config.autoplay=!1}));return function(){o()}}}),[n,t]),(0,l.useEffect)((function(){if(n){var e=function(){"dash"===n.playerType&&(0,S.m_)({awemeId:null==r?void 0:r.awemeId}).then((function(e){var t,l,i=e.detail;o.Le.setConfig(o.gI.RefetchAwemeInfo,(0,a.Z)({},null==r?void 0:r.awemeId,i));var c=(0,N.Q)({awemeInfo:i,abtestData:u});O()(n,"config.DashPlugin.dashOpts.dynamic_video",null==c||null===(t=c.DashPlugin)||void 0===t||null===(l=t.dashOpts)||void 0===l?void 0:l.dynamic_video),n.playNext(n.config,n.currentTime,"MEDIA_EXPIRED")}))};return n.on("MEDIA_EXPIRED",e),function(){n.off("MEDIA_EXPIRED",e)}}}),[n,r]),(0,l.useEffect)((function(){var e=function(){n&&t&&(G.s.getPlayersByScene(W.lT.Modal).length>0&&G.s.getPlayerScene(n.playerId)!==W.lT.Modal&&(n.pause(),n.config.autoplay=!1,n.autoplay=!1))};if(n&&t)return n.once("play",e),function(){n.off("play",e)}}),[n,t])},q=t(85792),Q=t.n(q),X=t(8e3),Y=t.n(X),J=t(65981),$=t.n(J),ee=t(65421),ne=t.n(ee),te=t(8590),le=t(36177),oe=t(77606),ae=t(67318),re=t(6801),ie=function(e,n){var t,l=p()(t=[le.ed.Normal,le.ed.XgVideo]).call(t,null==e?void 0:e.awemeType),o=n.currentTime>=3&&n.duration-n.currentTime>=30;return l&&o},ue=t(35667),ce=(t(13727),function(e){var n=(0,ue.n)(),t=e.isActive,u=e.awemeInfo,s=e.deleteCurrentSwiper,f=e.config,v=e.abtestData,g=e.scene,E=e.userInfo;return function(e){var n=e.player;(0,l.useEffect)((function(){if(n){var e=function(){o.Le.setConfig(o.gI.VideoHasPrevent,!0)};return n.on("autoplay_was_prevented",e),function(){n.off("autoplay_was_prevented",e)}}}),[n])}({player:n,isActive:t,awemeInfo:u}),function(e){var n=e.player,t=e.isActive,u=e.awemeInfo,s=e.deleteCurrentSwiper,f=e.abtestData,v=(0,l.useRef)(t);v.current=t;var g=(0,l.useRef)(null==u?void 0:u.awemeId);g.current=null==u?void 0:u.awemeId;var E=(0,l.useRef)(!1),N=(0,l.useRef)(!1),Z=(0,l.useRef)(!1),M=(0,l.useRef)(0),D=(0,y.Z)(function(){var e=(0,r.Z)(c().mark((function e(t,l,r){var i,u,h,y,w,b,C;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((l||m()()-M.current>6e4)&&(N.current=!1,Z.current=!1),!N.current||!Z.current){e.next=6;break}return I.i.sendLog("videoRetryError",{type:"real_blank_screen",aweme_id:t}),e.abrupt("return",!1);case 6:if(M.current=m()(),n.removeClass(_.Z.ERROR),n.addClass(_.Z.LOADING),R(n),N.current||6===r){e.next=24;break}if(N.current=!0,!n.dash){e.next=16;break}return n.retry(),e.abrupt("return",!0);case 16:return u=n.currentSrc&&1===(0,k.q)(n.currentSrc),h=n.currentTime,(y=n.config.url instanceof Array?null===(i=n.config.url)||void 0===i?void 0:d()(i).call(i,(function(e){var n;return null==e||null===(n=e.src)||void 0===n?void 0:p()(n).call(n,"www.douyin.com")})):null)||I.i.sendLog("videoRetryError",{type:"retry_base_url_miss",aweme_id:t}),u&&y?(n.src=globalThis.xssNamespace.douyin_web.filterUrl(y.src,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),n.load(),n.currentTime=h):n.retry(),e.abrupt("return",!0);case 24:N.current=!0;case 25:return I.i.sendLog("videoRetryError",{type:"retry_native",aweme_id:t}),e.prev=27,Z.current=!0,w=n.currentTime,e.next=33,(0,S.m_)({awemeId:t});case 33:if(b=e.sent,E.current||g.current!==t){e.next=60;break}if(C=null,0!==b.statusCode||!b.detail){e.next=47;break}if(C=b.detail,P({player:n,awemeInfo:b.detail,isActive:v.current,abtestData:f,startTime:w})){e.next=44;break}return n.addClass(_.Z.ERROR),n.removeClass(_.Z.LOADING),e.abrupt("return",!1);case 44:I.i.sendLog("videoRetryError",{type:"retry_api_aweme_ok",aweme_id:t}),e.next=59;break;case 47:if(!b.isUnknownAweme){e.next=54;break}null==s||s(),v.current&&x.F.info("\u8be5\u89c6\u9891\u5df2\u88ab\u5220\u9664"),I.i.sendLog("videoRetryError",{type:"retry_api_aweme_404",aweme_id:t}),e.next=59;break;case 54:return n.addClass(_.Z.ERROR),n.removeClass(_.Z.LOADING),I.i.sendLog("videoRetryError",{type:"retry_api_statuscode_error",aweme_id:t}),e.abrupt("return",!1);case 59:o.Le.setConfig(o.gI.RefetchAwemeInfo,(0,a.Z)({},t,C));case 60:e.next=69;break;case 62:return e.prev=62,e.t0=e.catch(27),n.addClass(_.Z.ERROR),n.removeClass(_.Z.LOADING),I.i.sendLog("videoRetryError",{type:"retry_api_catch",aweme_id:t}),e.abrupt("return",!1);case 69:return e.abrupt("return",!0);case 70:case"end":return e.stop()}}),e,null,[[27,62]])})));return function(n,t,l){return e.apply(this,arguments)}}());(0,l.useEffect)((function(){return E.current=!1,function(){E.current=!0}}),[]);var O=function(e){var t,l,o,a,r,c,s=(0,T.Z)({awemeInfo:u,player:n}).isH265,d=(0,i.Z)((0,i.Z)({urlParamList:["previous_page","tab_name"]},(0,L.Z)()),{},{group_id:u.groupId,aweme_type:u.awemeType,player_type:"xgplayer",player_version:n.version,errorCode:(null==e||null===(t=e.mediaError)||void 0===t?void 0:t.code)||"",errorDesc:(null==e||null===(l=e.mediaError)||void 0===l?void 0:l.message)||"",is_cdn_expired:1===(0,k.q)(n.currentSrc)?1:0,vduration:null==u||null===(o=u.video)||void 0===o?void 0:o.duration,is_video_support:Number((0,b.k)().isSupport),is_bytevc1:s,log_pb:null==u?void 0:u.logPb,video_play_mode:1===(null===(a=C.Q.getItem({sKey:w.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===a?void 0:a.type)?"landscape":"all",is_landscape:(null==u||null===(r=u.video)||void 0===r?void 0:r.width)>(null==u||null===(c=u.video)||void 0===c?void 0:c.height)?1:0});I.i.sendLog("videoPlayError",d)};(0,l.useEffect)((function(){var e;n&&null!=u&&null!==(e=u.video)&&void 0!==e&&e.playApi&&(n.usePluginHooks("error","errorHandler",(function(e,n){return h().resolve().then((0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(u.awemeId,!1,null==n?void 0:n.errorCode);case 2:return(t=e.sent)||O(n),e.abrupt("return",!t);case 5:case"end":return e.stop()}}),e)}))))})),n.usePluginHooks("error","errorRetry",(function(){return D(u.awemeId,!0),I.i.sendLog("videoRetryError",{type:"user_click",aweme_id:null==u?void 0:u.awemeId}),!1})))}),[n,u,f]),(0,l.useEffect)((function(){t&&n&&n.isError&&u&&D(u.awemeId,!0)}),[f,t,n,u,D])}({player:n,isActive:t,awemeInfo:u,deleteCurrentSwiper:s,abtestData:v}),K({player:n,isActive:t,awemeInfo:u,config:f,abtestData:v}),function(e){var n=e.player,t=e.isActive;(0,l.useEffect)((function(){if(n&&n.root.getElementsByClassName("xgplayer-start")[0]&&(n.root.getElementsByClassName("xgplayer-start")[0].className="".concat(n.root.getElementsByClassName("xgplayer-start")[0].className," douyinHide"),t)){var e=Q()((function(){var e;n.root.getElementsByClassName("xgplayer-start")[0]&&(n.root.getElementsByClassName("xgplayer-start")[0].className=Y()(e=n.root.getElementsByClassName("xgplayer-start")[0].className.split(" ")).call(e,(function(e){return"douyinHide"!==e})).join(" "))}),1e3),l=function(){var t;clearTimeout(e),n.root.getElementsByClassName("xgplayer-start")[0]&&(n.root.getElementsByClassName("xgplayer-start")[0].className=Y()(t=n.root.getElementsByClassName("xgplayer-start")[0].className.split(" ")).call(t,(function(e){return"douyinHide"!==e})).join(" "))};return n.once(U.AUTOPLAY_STARTED,l),function(){n.off(U.AUTOPLAY_STARTED,l),n.root.getElementsByClassName("xgplayer-start")[0]&&(n.root.getElementsByClassName("xgplayer-start")[0].className="".concat(n.root.getElementsByClassName("xgplayer-start")[0].className," douyinHide"))}}}),[n,t])}({player:n,isActive:t}),function(e){var n,t,a=e.player,r=e.isActive,i=e.awemeInfo,u=(e.scene,e.userInfo),c=(0,re.U7)(),s=(0,re.dY)("multi_device_resume",null==u?void 0:u.isLogin),d=c&&1===(null==s?void 0:s.enable)&&1===(null==s?void 0:s.pc_manual);(0,l.useEffect)((function(){var e,n;if(a&&null!=u&&null!==(e=u.info)&&void 0!==e&&e.uid&&!1===(null==i||null===(n=i.continationInfo)||void 0===n?void 0:n.continationVideoAlreadyConsume)){var t=(o.Le.getConfig(o.gI.fwsExample)||{}).fwsExample,l=function(e){var n,t,l,a={app_id:te.APP_ID,message_type:new(ne())(oe.Cs.ReplyConsume||"0"),user_id:new(ne())(u.info.uid||"0"),device_id:new(ne())((null===(n=(0,o.Es)())||void 0===n?void 0:n.user_unique_id)||"0"),to_device_type:new(ne())(oe.Yi.Phone||"0"),to_device_id:new(ne())((null==i||null===(t=i.continationInfo)||void 0===t?void 0:t.fromDeviceId)||"0"),continuation_info:{ItemId:new(ne())(null==i?void 0:i.awemeId),RecordType:new(ne())(null==i||null===(l=i.continationInfo)||void 0===l?void 0:l.recordType)}},r=$().stringify(a);e.send(r,{service:oe.oU.Multicast,method:10}),O()(i,"continationInfo.continationVideoAlreadyConsume",!0)};if(!t){var r=null,c=z.listen(z.EVENT.fwsExampleInit,(function(e){a.isPlaying?l(e):(r=function(){l(e)},a.once(U.CANPLAY,r))}));return function(){c(),a.off(U.CANPLAY,r)}}var s=function(){l(t)};if(!a.isPlaying)return a.once(U.CANPLAY,s),function(){a.off(U.CANPLAY,s)};s()}}),[a,i]),(0,l.useEffect)((function(){var e;if(a&&r&&null!=u&&null!==(e=u.info)&&void 0!==e&&e.uid)return z.listen(z.EVENT.sendPullMessage,(function(e){if(a.isUserActive&&ie(i,a)){var n,t,l,r,c,s=e||{},d=s.toDeviceId,f=s.toDeviceType,m=(o.Le.getConfig(o.gI.fwsExample)||{}).fwsExample,v={app_id:new(ne())("6383"),message_type:2,user_id:new(ne())((null==u||null===(n=u.info)||void 0===n?void 0:n.uid)||"0"),device_id:new(ne())((null===(t=(0,o.Es)())||void 0===t?void 0:t.user_unique_id)||"0"),to_device_type:new(ne())(f),to_device_id:new(ne())(d),continuation_info:{UserId:new(ne())((null==u||null===(l=u.info)||void 0===l?void 0:l.uid)||"0"),ItemId:new(ne())((null==i?void 0:i.awemeId)||"0"),ItemType:new(ne())((null==i?void 0:i.awemeType)||"0"),PlayTime:Math.floor(a.currentTime),Cover:(null==i||null===(r=i.video)||void 0===r?void 0:r.cover)||"",FromDeviceId:new(ne())((null===(c=(0,o.Es)())||void 0===c?void 0:c.user_unique_id)||"0"),FromDeviceType:Number(oe.Yi.PC),RecordType:Number(oe.ns.auto)}},p=$().stringify(v);m.send(p,{service:oe.oU.Multicast,method:10})}}))}),[a,r,null==u||null===(n=u.info)||void 0===n?void 0:n.uid]),(0,l.useEffect)((function(){var e,n;if(a&&r&&p()(e=[oe.b.Default,oe.b.Open]).call(e,null==u||null===(n=u.info)||void 0===n?void 0:n.continuationState)&&d){var t=function(){"hidden"===document.visibilityState&&a.isUserActive&&ie(i,a)&&(0,ae.wU)({item_id:null==i?void 0:i.awemeId,item_type:null==i?void 0:i.awemeType,play_progress:Math.floor(a.currentTime),to_client:Number(oe.Yi.Phone),record_type:Number(oe.ns.auto)})},l=function(){a.isUserActive&&ie(i,a)&&(0,ae.wU)({item_id:null==i?void 0:i.awemeId,item_type:null==i?void 0:i.awemeType,play_progress:Math.floor(a.currentTime),to_client:Number(oe.Yi.Phone),record_type:Number(oe.ns.auto)})};return window.addEventListener("beforeunload",l),document.addEventListener("visibilitychange",t),function(){window.removeEventListener("beforeunload",l),document.removeEventListener("visibilitychange",t)}}}),[a,r,null==u||null===(t=u.info)||void 0===t?void 0:t.uid,d])}({player:n,isActive:t,awemeInfo:u,scene:g,userInfo:E}),null})},34667:function(e,n,t){t.d(n,{h:function(){return H}});var l=t(30906),o=t(30673),a=t(32781),r=t(60260),i=t.n(r),u=t(56402),c=t.n(u),s=t(35323),d=t.n(s),f=t(26447),m=t.n(f),v=t(94090),p=t.n(v),g=t(85792),h=t.n(g),_=t(8e3),y=t.n(_),w=t(11227),E=t.n(w),k=t(34346),b=t.n(k),C=t(53864),S=t(61508),I=t(52985),N=t(98878),x=t(73231),T=t(71116),L=t(29809),P=t.n(L),Z="q5Hnj0xS",M="MjxE7ivv",R="eXHTAsg4",D=t(79705),O=t.n(D);function A(e){var n=e.x,t=void 0===n?50:n,l=e.y,o=void 0===l?50:l,a=(0,C.useRef)(P()(String(1e4*Math.random()%61-30))),r={left:t-35,top:o-34,transform:"rotate(".concat(a.current,"deg)")};return C.createElement("div",{style:r,className:Z},C.createElement("img",{src:"//p3-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/feed_money_like_icon.svg",className:O()(M,R)}))}var F=t(35667),U=t(72627),B=t(93691),V=t(53026),j=t(66028),W=function(e){var n=e||{},t=n.isActive,r=n.awemeInfo,u=n.disableShortCut,s=n.abtestData,f=(0,F.n)(),v=(0,C.useRef)(0),g=(0,C.useRef)(0),_=(0,C.useState)([]),w=(0,a.Z)(_,2),k=w[0],L=w[1];return(0,C.useEffect)((function(){if(f&&t){var e,n,a,_=(0,B.H)(f),w=i()((function(e){var n,t,l=0,a=0;e&&"keydown"===e.type?(l=(null==f||null===(n=f.root)||void 0===n?void 0:n.clientWidth)/2,a=(null==f||null===(t=f.root)||void 0===t?void 0:t.clientHeight)/2):(l=null==e?void 0:e.offsetX,a=null==e?void 0:e.offsetY);var r=m()();L((function(e){var n;return v.current++,p()(n=[]).call(n,(0,o.Z)(e),[{x:l,y:a,index:v.current,timeFlag:r}])})),h()((function(){L((function(e){return y()(e).call(e,(function(e){return e.timeFlag!==r}))}))}),1e3)}),300),k=(0,N.e)((function(){null!=f&&f.paused?(f.play(),f.emitUserAction(S.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:!0,pluginName:"click"})):(f.pause(),f.emitUserAction(S.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:!1,pluginName:"click"}))}),(function(e,n){f.emit("onStar",{event:e,clickMethod:n})}),300),b=function(e){(e.target===f.root||e.target===f.video||e.target===f.innerContainer||e.target===f.video.__canvas||_)&&k(e,"mouse")},C={space:{keyCode:x.bf.Space.keyCode,action:function(e){k(e,"space")},disable:u,noBodyTarget:!1}},P=function(e){var n,t;if(null==s||null===(n=s.changeCandle)||void 0===n||!E()(n).call(n,null==r?void 0:r.awemeId)){var l=e.event,o=e.isKeyWorkCancalLike,a=e.clickMethod,i=null===(t=T.Le.getConfig(T.gI.DiggStatusCache))||void 0===t?void 0:t[null==r?void 0:r.awemeId];m()()-((null==i?void 0:i.lastDiggTime)||0)>1e3&&(null==i?void 0:i.diggStatus)===I.gZ.Digged&&"hot_key"===a&&o&&m()()-g.current>500||(g.current=m()(),w(l))}};f.config.closeVideoClick=!0,_?_.addEventListener("click",b,!1):f.root.addEventListener("click",b,!1);var Z={space:null==f||null===(e=f.plugins)||void 0===e||null===(n=e.keyboard)||void 0===n||null===(a=n.keyCodeMap)||void 0===a?void 0:a.space};return d()(f,"plugins.keyboard.keyCodeMap",(0,l.Z)((0,l.Z)({},c()(f,"plugins.keyboard.keyCodeMap")||{}),C)),f.on("onStar",P),function(){f.config.closeVideoClick=!1,_?_.removeEventListener("click",b,!1):f.root.removeEventListener("click",b,!1),f.plugins.keyboard&&((0,V.v)({currentCodeMap:f.plugins.keyboard.keyCodeMap,additionalCodeMap:C}),d()(f,"plugins.keyboard.keyCodeMap",(0,l.Z)((0,l.Z)({},c()(f,"plugins.keyboard.keyCodeMap")||{}),Z))),f.off("onStar",P)}}}),[f,t,r,null==s?void 0:s.changeCandle]),(0,C.useEffect)((function(){if(f)return f.config.closeVideoClick=!0,function(){f.config.closeVideoClick=!1}}),[f]),C.createElement(C.Fragment,null,b()(k).call(k,(function(e){return C.createElement(A,{x:e.x,y:e.y,key:e.index})})))},H=function(e){var n=(0,U.N)();return C.createElement(j.k,{componentName:"DoubleDiggPlugin",Slardar:n},C.createElement(W,e))}},46068:function(e,n,t){t.d(n,{IM:function(){return N}});var l=t(64408),o=t(5594),a=t.n(o),r=t(85792),i=t.n(r),u=t(53864),c=t(40032),s=t(48051),d=t(25902),f=t(97876),m=t(72603),v=t(71116),p=t(32781),g=t(26447),h=t.n(g),_=t(56920),y=t(35667),w=t(72627),E=t(95138),k=t(31554),b=t(66028),C=new(t(13795).hD)({clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),S=function(e){var n=e.handlerLogin,t=e.isDefault,l=e.isFullscreen;return t?u.createElement(u.Fragment,null,l?"\u9000\u51fa\u5168\u5c4f":"\u8fdb\u5165\u5168\u5c4f",u.createElement("span",{className:"shortcutKey"},"H")):u.createElement("div",{className:"blockLoginText"},"\u767b\u5f55\u540e\u5373\u53ef\u8fdb\u5165\u5168\u5c4f",u.createElement(E.zx,{className:"blockLoginBtn",onClick:n},"\u7acb\u5373\u767b\u5f55"))},I=function(e){var n,t,o=(0,y.n)(),r=e.isActive,g=e.fullScreenTarget,w=e.abtestData,E=e.loginDispatch,b=e.scene,I=e.disableHook,N=e.isLogin,x=(0,u.useRef)(!1),T=function(e){var n=e.effectiveTime,t=e.type,l=(0,u.useState)(!1),o=(0,p.Z)(l,2),a=o[0],r=o[1];return(0,u.useEffect)((function(){if(t===_.CK.Block)r(!0);else if(t===_.CK.NewUser7||t===_.CK.NewUser14){var e=(v.Le.getConfig(v.gI.FirstInstallTime)||{}).time,l=void 0===e?0:e;h()()>1e3*(l+n)?r(!0):r(!1)}}),[n,t]),a}({effectiveTime:null==w||null===(n=w.fullBlockV2)||void 0===n?void 0:n.effective_time,type:null==w||null===(t=w.fullBlockV2)||void 0===t?void 0:t.type});(0,u.useEffect)((function(){o&&(o.config&&o.config.fullscreenTarget!==g&&(o.config.fullscreenTarget=g,"detail"===b&&(o.config.fullscreenTarget=document.documentElement)),r&&(0,d.r)()&&(o.getFullscreen(g),"detail"===b&&o.getFullscreen(document.documentElement)))}),[o,r,g]),(0,u.useEffect)((function(){if(o&&r){var e=f.listen(f.EVENT.fullScreen,(function(e){e.fullScreen||o.exitFullscreen()}));return function(){e()}}}),[o,r]);var L=(0,u.useCallback)((function(e){var n,t,r;null==e||e.stopPropagation(),C.sendLog("clickHoverLogin",{enter_method:"full_screen",enter_from:(0,m.yW)(),params_for_special:"uc_login"}),f.emit(f.EVENT.videoStopPlayNext),(0,k.default)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u8fdb\u5165\u5168\u5c4f",success:(r=(0,l.Z)(a().mark((function e(){var n,t,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==E||E({type:"updateUserInfo"}),f.emit(f.EVENT.videoRemoveStopPlayNext),v.Le.setConfig(v.gI.disableFullScrren,!1),n=o.root.querySelector(".xgplayer-fullscreen .xg-tips"),t=o.root.querySelector(".xgplayer-fullscreen"),n.innerHTML=globalThis.xssNamespace.douyin_web._filterXSS("".concat(o.fullscreen?"\u9000\u51fa\u5168\u5c4f":"\u8fdb\u5165\u5168\u5c4f",'<span class="shortcutKey">H</span>'),null,{logType:"js.innerHTML",mode:"black",reportOnly:!1}),l=function(e){return null==e?void 0:e.stopPropagation()},n.addEventListener("click",l),s.Zr.addClass(t,"showStyle"),s.Zr.addClass(n,"showFullscreenTip"),i()((function(){s.Zr.removeClass(t,"showStyle"),s.Zr.removeClass(n,"showFullscreenTip")}),3e3);case 11:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),next:"https://".concat(null===(n=window)||void 0===n||null===(t=n.location)||void 0===t?void 0:t.host),enterMethod:"full_screen",onClose:function(){f.emit(f.EVENT.videoRemoveStopPlayNext)}})}),[T,E,o]);return(0,u.useEffect)((function(){o&&r&&!I&&T&&(N?v.Le.setConfig(v.gI.disableFullScrren,!1):v.Le.setConfig(v.gI.disableFullScrren,!0))}),[T,o,r,I,N]),(0,u.useEffect)((function(){if(o&&r&&!I&&T){var e=f.listen(f.EVENT.loginBlockKeyBoard,(function(e){e.fullscreen&&L()}));return function(){return e()}}}),[L,o,r,I,T]),(0,u.useEffect)((function(){var e=function(e){if("fullscreen"===(null==e?void 0:e.pluginName)&&!I&&T){var n=o.root.querySelector(".xgplayer-fullscreen .xg-tips"),t=(0,c.createRoot)(n);x.current=!!N,t.render(u.createElement(S,{handlerLogin:L,isFullscreen:null==o?void 0:o.fullscreen,isDefault:x.current}))}};if(o)return o.on("icon_mouseenter",e),function(){o.off("icon_mouseenter",e)}}),[T,o,r,L,I,N]),(0,u.useEffect)((function(){o&&r&&!I&&T&&o.usePluginHooks("fullscreen","fullscreen_change",(function(){return!v.Le.getConfig(v.gI.disableFullScrren)||(L(),!1)}))}),[o,r,L,I,T]),(0,u.useEffect)((function(){if(r&&o)return f.listen(f.EVENT.syncInteraction,(function(){(0,d.r)()&&o.getFullscreen()}))}),[o,r]),null},N=function(e){var n=(0,w.N)();return u.createElement(b.k,{componentName:"FullScrren",Slardar:n},u.createElement(I,e))}},57456:function(e,n,t){t.d(n,{_:function(){return A}});var l=t(65146),o=t(32781),a=t(76569),r=t.n(a),i=t(53864),u=t(61508),c=t(79705),s=t.n(c),d=t(71278),f=t(56920),m=t(83400),v=t(54867),p=t(36177),g=t(5277),h=t(17172),_=t(93669),y="Xu8BXy_K",w="qECD3Pse",E="uMIIeuGM",k="L6mQYbWy",b="qeKTmvEM",C="gNyVUu_s",S="F7TPdvit",I="sXkpegZg",N="qAA9SqI5",x="ugI8COdl",T="mgIZBjo3",L="itcVN_1L",P="moKeyfrE",Z="EJhYN2HD",M="KPhn0MiW",R=t(35667),D=t(34643),O=t(53128),A=function(e){var n,t,a,c,A,F,U,B,V,j,W,H,z,G,K,q,Q,X,Y=e.isActive,J=e.awemeInfo,$=e.className,ee=e.imgPlaceHolderClassName,ne=e.showImg,te=void 0===ne||ne,le=e.controlHeight,oe=e.disableFilterBlur,ae=void 0===oe?(0,g.b_)():oe,re=e.useServerFilterCover,ie=void 0===re?(0,g.Sb)():re,ue=e.abtestData,ce=(0,R.n)(),se=(0,i.useState)(!0),de=(0,o.Z)(se,2),fe=de[0],me=de[1],ve=(0,i.useState)(!1),pe=(0,o.Z)(ve,2),ge=pe[0],he=pe[1],_e=(0,i.useState)(!1),ye=(0,o.Z)(_e,2),we=ye[0],Ee=ye[1],ke=(0,i.useState)(null),be=(0,o.Z)(ke,2),Ce=be[0],Se=be[1],Ie=(0,i.useRef)(0),Ne=(0,g.G6)(),xe=(0,g.vU)(),Te=(0,g.GP)();Ie.current=(null==J||null===(n=J.video)||void 0===n?void 0:n.width)/(null==J||null===(t=J.video)||void 0===t?void 0:t.height);var Le=(0,i.useState)(!1),Pe=(0,o.Z)(Le,2),Ze=Pe[0],Me=Pe[1];(0,d.Z)((function(){Me(!0)}),[J]);var Re=(0,i.useCallback)((function(){Me(!1),Ce&&Ie.current&&(Ce.offsetWidth/Ie.current>=Ce.offsetHeight-(null!=le?le:v.fp.Default)?me(!0):me(!1))}),[Ce,le]),De=(0,i.useCallback)((function(){!ge&&he(!0)}),[ge]);(0,i.useEffect)((function(){if(Ce&&Re){var e=r()(h.Z).call(h.Z,Ce,Re);return function(){e&&e()}}}),[Ce,Re]),(0,i.useEffect)((function(){Y||Ee(!1)}),[Y]);var Oe=(0,D.l)();(0,i.useEffect)((function(){var e,n,t,l=(null==ue?void 0:ue.interactionOpt)===f.U5.On,o=0,a=function(){o>=1?Ee(!0):o+=1},r=function(){Ee(!0)};if(ce)return l?(null===(e=ce.on)||void 0===e||e.call(ce,u.TIME_UPDATE,a),function(){var e;null===(e=ce.off)||void 0===e||e.call(ce,u.TIME_UPDATE,a)}):(null===(n=ce.on)||void 0===n||n.call(ce,u.CANPLAY,r),null===(t=ce.once)||void 0===t||t.call(ce,u.TIME_UPDATE,r),function(){var e,n;null===(e=ce.off)||void 0===e||e.call(ce,u.CANPLAY,r),null===(n=ce.off)||void 0===n||n.call(ce,u.TIME_UPDATE,r)});var i,c=function(e){e.once(u.CANPLAY,r)};return null==Oe||null===(i=Oe.on)||void 0===i||i.call(Oe,O.V.PlayerCreated,c),function(){var e;null==Oe||null===(e=Oe.off)||void 0===e||e.call(Oe,O.V.PlayerCreated,c)}}),[ce]),(0,i.useEffect)((function(){he(!1),Ee(!1)}),[J]);var Ae=Ne||ae,Fe=!Ae&&ie,Ue=null==J||null===(a=J.video)||void 0===a?void 0:a.gaussianCover,Be=(null==J||null===(c=J.video)||void 0===c?void 0:c.originCover)||(null==J||null===(A=J.cellRoom)||void 0===A||null===(F=A.rawdata)||void 0===F||null===(U=F.cover)||void 0===U||null===(B=U.url_list)||void 0===B?void 0:B[0])||(null==J||null===(V=J.varietyVideo)||void 0===V||null===(j=V.cover)||void 0===j||null===(W=j.url_list)||void 0===W?void 0:W[0])||(null==J?void 0:J.cover);return Ae?Be=_:Fe&&Ue&&(Be=Ue),i.createElement("div",{className:s()($,y,k,(H={},(0,l.Z)(H,L,xe),(0,l.Z)(H,P,Y&&we),(0,l.Z)(H,M,(null==J?void 0:J.awemeType)===p.ed.Note&&te),H),"imgBackground"),ref:Se},!ge&&te&&i.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl((null==J||null===(z=J.video)||void 0===z?void 0:z.originCover)||(null==J||null===(G=J.varietyVideo)||void 0===G||null===(K=G.cover)||void 0===K||null===(q=K.url_list)||void 0===q?void 0:q[0]),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:s()("backgroundCover",(Q={},(0,l.Z)(Q,w,!fe),(0,l.Z)(Q,E,fe),(0,l.Z)(Q,T,Ze),(0,l.Z)(Q,b,(0,m.pb)(J)),Q),x,ee),onLoad:Re,onError:De}),i.createElement("div",{className:s()("background",(X={},(0,l.Z)(X,C,!Ae),(0,l.Z)(X,I,xe),(0,l.Z)(X,N,Ae),(0,l.Z)(X,Z,Te),X))},i.createElement("img",{src:globalThis.xssNamespace.douyin_web.filterUrl(Be,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),!Ae&&i.createElement("div",{className:S})))}},5891:function(e,n,t){t.r(n),t.d(n,{Interaction:function(){return go},InteractionInner:function(){return po}});var l=t(30906),o=t(65146),a=t(32781),r=t(11227),i=t.n(r),u=t(53864),c=t(79705),s=t.n(c),d=t(56920),f=t(83400),m=t(55981),v=t(50230),p=t(36177),g=t(54867),h=t(97876),_=t(5277),y=t(44833),w=t(23860),E="OFZHdvpl",k="A4lwDX5H",b="ZfrXkYoG",C="xccodDG4",S="o1olQOk8",I="o0jc2k3u",N="D2CKIux7",x="zo5LeZEf",T="M43LX_UU",L="TObzUGgw",P="hJ_JoAKu",Z=t(26447),M=t.n(Z),R=t(353),D=t(13971);var O=t(64408),A=t(5594),F=t.n(A),U=t(94090),B=t.n(U),V=t(50799),j=t(89933),W=t(25902),H=t(72603),z=t(9191),G=t(71116),K=t(9617),q=t(13795),Q=new q.hD({clickCommentButton:{eventName:"click_comment_button",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",trending_topic:"",first_tag_name:"",top:0,aweme_type:-1,item_duration_ms:0}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",relation:"",trending_topic:"",first_tag_name:"",top:0,aweme_type:-1,is_pure:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",trending_topic:"",first_tag_name:"",top:0}},shareVideo:{eventName:"share_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",type:"",is_full_screen:"0",from_follow_list:"0",aweme_type:"",tab_name:"",is_pure:"",click_method:""}}});var X=t(92524),Y=t.n(X),J=t(85792),$=t.n(J),ee=t(31674),ne=t.n(ee),te=t(34452),le=t(21518),oe={viewNum:0,closeNum:0,showTime:0},ae={viewNum:1,closeNum:0,showTime:0},re=2592e5,ie=6048e5,ue=null,ce=function(){var e=se();return!e||(null==e?void 0:e.showTime)<M()()&&(4===(null==e?void 0:e.closeNum)&&fe(),!0)},se=function(){var e=localStorage.getItem("SMALL_WINDOW");if(e)return JSON.parse(e)},de=function(){var e,n,t,l=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",o=arguments.length>1?arguments[1]:undefined;"close"===l&&2===(null===(e=o)||void 0===e?void 0:e.closeNum)?o.showTime=M()()+re:"close"===l&&4===(null===(n=o)||void 0===n?void 0:n.closeNum)?o.showTime=M()()+ie:(null===(t=o)||void 0===t?void 0:t.closeNum)>4&&(o=ae),localStorage.setItem("SMALL_WINDOW",ne()(o))},fe=function(){de("",oe)},me=t(56402),ve=t.n(me),pe=t(67624),ge=t.n(pe),he=t(90457),_e=t.n(he),ye=t(77386),we=t.n(ye),Ee=t(28712),ke=t(79784),be="ps14gXtV",Ce="nLWIOKtf",Se="Lb8I1qni",Ie="mZaHCmUq",Ne="qrMV7j3Q",xe="mogYq0Sj",Te="SoaZ2Fah",Le=function(e){return e[e.RECOMMEND=253]="RECOMMEND",e[e.FOLLOW=254]="FOLLOW",e}({}),Pe=function(e){return e[e.ENDED=0]="ENDED",e[e.ERROR=1]="ERROR",e[e.LIVING=2]="LIVING",e}(Pe||{}),Ze=new(ge())([["recommend","RECOMMEND"],["follow","FOLLOW"],["friend","FRIEND"]]),Me=function(e){var n,t,l,o,r,c,s,d,f,m,v,p,g,h,_,y,w,E,k,b,C,S,I,N=e.awemeInfo,x=e.abtestData,T=e.deleteCurrentSwiper,L=e.isLogin,P=e.isClose,Z=e.onLeave,M=e.onEnter,R=e.from,D=e.player,A=e.isActive,U=e.onClickRoom,B=e.LiveSliderCard,V=u.useState(Pe.ENDED),j=(0,a.Z)(V,2),W=j[0],H=j[1],z=u.useState(!1),G=(0,a.Z)(z,2),K=G[0],q=G[1],Q=null==N||null===(n=N.authorInfo)||void 0===n?void 0:n.roomData,X=null==Q||null===(t=Q.stream_url)||void 0===t?void 0:t.hls_pull_url,Y=X&&null!=X&&i()(X).call(X,"https")?X:null==X?void 0:X.replace("http","https"),J=null==Q||null===(l=Q.stream_url)||void 0===l||null===(o=l.extra)||void 0===o?void 0:o.width,$=null==Q||null===(r=Q.stream_url)||void 0===r||null===(c=r.extra)||void 0===c?void 0:c.height,ee=function(){try{var e,n,t,l,o,a=JSON.parse(null!==(e=null==Q||null===(n=Q.stream_url)||void 0===n||null===(t=n.live_core_sdk_data)||void 0===t||null===(l=t.pull_data)||void 0===l?void 0:l.stream_data)&&void 0!==e?e:"{}");return null==a||null===(o=a.common)||void 0===o?void 0:o.session_id}catch(r){return""}}(),ne=J>$,te=null==N||null===(s=N.authorInfo)||void 0===s?void 0:s.uid,le=null==N||null===(d=N.authorInfo)||void 0===d||null===(f=d.roomId)||void 0===f?void 0:f.toString(),oe=null==N||null===(m=N.authorInfo)||void 0===m?void 0:m.nickname,ae=null==N?void 0:N.desc,re=null==Q||null===(v=Q.owner)||void 0===v?void 0:v.web_rid,ie=null==N||null===(p=N.authorInfo)||void 0===p?void 0:p.secUid,ue=(null==Q||null===(g=Q.stream_url)||void 0===g?void 0:g.flv_pull_url)||{},ce=null==Q?void 0:Q.linker_map,me=Le[Ze.get(R)],pe="";null!=ue&&ue.SD1?pe=ue.SD1:null!=ue&&ue.SD2?pe=ue.SD2:null!=ue&&ue.HD1?pe=ue.HD1:ue.FULL_HD1&&(pe=ue.FULL_HD1),pe=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return"string"!=typeof e?e:e.replace(/^http:\/\//i,"https://")}(pe);var ge="";try{var he;ge=null===(he=JSON.parse(null==N?void 0:N.logPb))||void 0===he?void 0:he.impr_id}catch(Ve){ge=""}var ye={enter_from_merge:"follow",is_aweme_tied:L?1:0,request_id:ge,stream_type:null!==(h=ke.LIVE_STREAM_TYPE[null==Q||null===(_=Q.stream_url)||void 0===_?void 0:_.stream_orientation])&&void 0!==h?h:"other"},Me=(0,u.useState)({width:90/$*J,height:90,top:0,imgWidth:16,fontSize:12}),Re=(0,a.Z)(Me,2),De=Re[0],Oe=Re[1];(0,u.useEffect)((function(){return window.addEventListener("resize",Ae),function(){window.removeEventListener("resize",Ae)}}),[]);var Ae=(0,u.useCallback)((function(){if(!(0,Ee.p)()){var e=document.documentElement.clientWidth;if(e<=1440)Oe(ne?{width:90/$*J,height:90,top:0,imgWidth:16,fontSize:12}:{width:90,height:90/J*$,top:45-90/J*$/2,imgWidth:16,fontSize:12});else if(e>1440&&e<2560){var n=16/1120*(e-1440),t=8/1120*(e-1440),l=90/1120*(e-1440)+90;Oe(ne?{width:l/$*J,height:l,top:45-l/2,imgWidth:n+16,fontSize:t+8}:{width:l,height:l/J*$,top:45-l/J*$/2,imgWidth:n+16,fontSize:t+8})}else Oe(ne?{width:180/$*J,height:180,top:-45,imgWidth:32,fontSize:20}:{width:180,height:180/J*$,top:45-180/J*$/2,imgWidth:32,fontSize:20})}}),[]),Fe=function(){var e=(0,O.Z)(F().mark((function e(n,t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we().get("https://live.douyin.com/webcast/distribution/check_user_live_status/",{withCredentials:!0,params:{user_ids:n,aid:6383,distribution_scenes:t}}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ue=u.useCallback((function(){return Fe(te,me).then((function(e){var n=e.data,t=n.status_code,l=n.data,o=void 0===l?[]:l;return 0===t?_e()(o).call(o,(function(e){var n=ve()(e,"user_live",[])[0];return 1===ve()(n,"live_status")}))?(H(Pe.LIVING),Pe.LIVING):(H(Pe.ENDED),Pe.ENDED):(H(Pe.ERROR),Pe.ERROR)}))}),[te,me]);(0,u.useEffect)((function(){Ae(),Ue()}),[]);var Be=(0,u.useCallback)((function(){return!(0,Ee.p)()&&document.documentElement.clientWidth>1600}),[]);return u.createElement("div",{className:be,style:{width:De.width,height:De.height,top:De.top},onMouseLeave:function(){null==Z||Z()},onMouseEnter:function(){null==M||M()}},(ce===undefined||(null==ce?void 0:ce[4])&&(null==ce?void 0:ce.length)<=1)&&R&&W===Pe.LIVING&&u.createElement("div",{className:Ce},u.createElement(u.Suspense,null,u.createElement(B,{flvSrc:pe,hlsSrc:Y,sessionId:ee,anchorId:te,roomId:le,sceneId:me,userName:oe,title:ae,userCount:null==N||null===(y=N.authorInfo)||void 0===y||null===(w=y.roomData)||void 0===w?void 0:w.user_count,cover:"",webRid:re,secUid:ie,gameName:"",abtestData:x,deleteCurrentSwiper:T,logParams:ye,isSmallWindow:!0,tab:R,isActive:A,clickSmallWindow:function(){var e;null==D||null===(e=D.pause)||void 0===e||e.call(D),null==U||U(),fe()},style:{borderRadius:4},changeStatus:function(e){H(e)},onLoaded:function(){q(!0)}})),u.createElement("div",{className:Se,style:{width:De.imgWidth,height:De.imgWidth},onClick:function(){P(),function(){var e=se();if(e&&e.closeNum>=0){var n={viewNum:null==e?void 0:e.viewNum,closeNum:Number(null==e?void 0:e.closeNum)+1,showTime:null==e?void 0:e.showTime};de("close",n)}}()}}),!K&&u.createElement("div",{className:Ie},u.createElement("div",{className:Ne}),u.createElement("div",{className:xe})),(null==N||null===(E=N.authorInfo)||void 0===E||null===(k=E.roomData)||void 0===k?void 0:k.user_count)&&(null==N||null===(b=N.authorInfo)||void 0===b||null===(C=b.roomData)||void 0===C?void 0:C.user_count)>0&&u.createElement("div",{className:Te,style:{fontSize:De.fontSize}},null==N||null===(S=N.authorInfo)||void 0===S||null===(I=S.roomData)||void 0===I?void 0:I.user_count,"\u4eba",Be()||ne?"\u6b63\u5728\u89c2\u770b":u.createElement("p",null,"\u6b63\u5728\u89c2\u770b"))))},Re=t(9058),De=t(30758),Oe=t(66028),Ae=t(96533),Fe=t(44635),Ue=t(28777),Be=t(65981),Ve=t.n(Be),je=t(67330),We=t(83901),He=t(97921),ze=t(21275),Ge=t(16016),Ke=t(67495),qe=t(60931),Qe=t(73596),Xe=t(72307),Ye=t(20672),Je=t(54516),$e=function(e){var n,t,l,o,a,r,i=e.uid,u=e.roomId,c=e.logId,s=e.episodeExtra,d=e.isMiniWindowPlay,f=e.streamType,m=e.paidLiveData,v=s;Xe.Z.sendLog("livesdkRecLivePlay",{enter_from_merge:"web_video_detail",enter_method:"web_video_head",anchor_id:i,room_id:u,game_name:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname,is_paidlive:Number(null==m?void 0:m.paid_type),watch_paidlive_status:null!=m&&m.view_right?"regular":(null==m?void 0:m.duration)>=180?"try_end":"try",request_id:c,stream_type:null!==(n=ke.LIVE_STREAM_TYPE[f])&&void 0!==n?n:"other",is_vs:v?1:0,vs_episode_id:v?null===(t=s.episode_extra)||void 0===t?void 0:t.episode_id_str:"",vs_ep_group_id:v?null===(l=s.episode_extra)||void 0===l?void 0:l.item_id:"",vs_season_id:v?null===(o=s.episode_extra)||void 0===o?void 0:o.season_id_str:"",vs_episode_stage:v?(null===(a=s.episode_extra)||void 0===a||null===(r=a.mod)||void 0===r?void 0:r.episode_stage)===He.W.FirstLive?"premiere":"live":""}),d&&Xe.Z.sendLog("livesdkMiniWindowPlay",{enter_from_merge:"web_video_detail",enter_method:"web_video_head",anchor_id:i,room_id:u,game_name:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname,request_id:c,is_click_mini_window:"0"})};function en(e){var n,t,a,r,i,c=e.awemeInfo,d=void 0===c?{}:c,v=e.logId,p=e.className,g=e.ableMiniType,_=e.isMiniWindow,y=void 0!==_&&_,w=e.abtestData,E=e.isMiniWindowPlay,k=e.openLiveModal,b=e.liveModalType,C=void 0===b?"follow":b,S=e.isEcomLive,I=void 0!==S&&S,N=(0,u.useMemo)((function(){var e,n;return null==d||null===(e=d.authorInfo)||void 0===e||null===(n=e.roomData)||void 0===n?void 0:n.paid_live_data}),[null==d||null===(n=d.authorInfo)||void 0===n?void 0:n.roomData]),x=null==d?void 0:d.authorInfo,T=x.avatarUri,L=x.roomData,P=x.roomId,Z=x.uid,M=d.awemeId,R={enter_from_merge:(0,ze.r)(),enter_method_temai:"web_video_head",enter_method:"web_video_head",action_type:"click",room_id:P,group_id:M,request_id:v,is_livehead_preview_mini_window_show:y?"1":"0"},D=d.rawAdData&&(0,m.hj)(d)?(0,f.Rx)(d):null,O=(0,f.nT)(d),A=(0,u.useMemo)((function(){var e;return D?(0,m.at)({rawAdData:D,extraParams:R}):(0,Ge.cc)((0,l.Z)({web_rid:null==L||null===(e=L.owner)||void 0===e?void 0:e.web_rid},R))}),[D,null==L||null===(t=L.owner)||void 0===t?void 0:t.web_rid,R]),F=u.useMemo((function(){return{is_paidlive:Number(null==N?void 0:N.paid_type),watch_paidlive_status:null!=N&&N.view_right?"regular":(null==N?void 0:N.duration)>=180?"try_end":"try"}}),[N]);return u.createElement("div",{className:s()(Ye.Z.avatarWrap,p,(0,o.Z)({},Ye.Z.ableMiniType,g))},u.createElement(Je.n,{adType:O,type:"small",src:globalThis.xssNamespace.douyin_web.filterUrl(T,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),uid:Z,cid:null==D?void 0:D.creative_id,isEcomLive:I,paidLiveParams:F,onClick:function(n){var t,o,a,r,i;($e({uid:Z,roomId:P,logId:v,episodeExtra:null==L?void 0:L.episode_extra,isMiniWindowPlay:E,streamType:null==L||null===(t=L.stream_url)||void 0===t?void 0:t.stream_orientation,paidLiveData:N}),null==e||null===(o=e.player)||void 0===o||null===(a=o.pause)||void 0===a||a.call(o),D&&(0,We.E)("realtime_click",{tag:(0,Ke.f)(),value:null==D?void 0:D.creative_id,log_extra:null==D?void 0:D.log_extra,refer:"profile"}),k)&&(null==n||null===(r=n.preventDefault)||void 0===r||r.call(n),h.emit(h.EVENT.liveModalShow,{type:C,data:{webRid:D?(0,m.Hx)({rawAdData:D}):null==L||null===(i=L.owner)||void 0===i?void 0:i.web_rid,roomId:Ve().stringify(P),anchorId:Z},enterMethod:Qe.a.VIDEO_HEAD,teaLogParams:(0,l.Z)({},je.parseUrl(A).query)}))},onMouseOver:function(){k&&h.emit(h.EVENT.liveModalPreload)},liveRoomUrl:A,liveRoomParam:{logId:v,episodeExtra:null==L?void 0:L.episode_extra,streamType:null==L||null===(a=L.stream_url)||void 0===a?void 0:a.stream_orientation},isFirstLive:2===(null==L||null===(r=L.episode_extra)||void 0===r||null===(i=r.mod)||void 0===i?void 0:i.episode_stage),groupId:M,disableBorderAnim:qe.xO(null==w?void 0:w.lowDeviceOptimization)}))}function nn(e){var n=e.logInfo,t=e.player,o=e.onAvatarClick,a=e.isOpenKeyHotEvent,r=(0,u.useRef)("");try{var i;r.current=null===(i=JSON.parse(null==n?void 0:n.log_pb))||void 0===i?void 0:i.impr_id}catch(c){r.current=""}return(0,u.useEffect)((function(){if(t){var e=function(e){a&&(null==o||o(e,{clickMethod:"hot_key"}))};return null==t||t.on("onAvatar",e),function(){null==t||t.off("onAvatar",e)}}}),[t,o]),u.createElement(en,(0,l.Z)((0,l.Z)({},e),{},{logId:r.current}))}var tn,ln=t(61508),on=t(67866),an=new q.hD({clickCommentButton:{eventName:"click_comment_button",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",relation:"",aweme_type:"",item_duration_ms:0}}}),rn="pBxTZJeH",un="hfgGrUTS",cn="Y006Bsbt",sn="tzVl3l7w",dn="qIngyRdQ",fn="aLzJ7lUV",mn="Qz1xVpFH";function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},vn.apply(this,arguments)}var pn,gn=function(e){return u.createElement("svg",vn({width:36,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),tn||(tn=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.25 17.444c0 2.71-1.304 5.039-3.536 7.274-.196.197-.404.392-.62.584-1.953 2.171-3.86 3.436-5.583 3.94-2.243.657-1.376-2.42-1.348-2.518v-.002c-6.214 0-11.413-3.777-11.413-9.278S11.787 7.483 18 7.483c6.214 0 11.25 4.46 11.25 9.96zm-16.715 1.848c.888 0 1.608-.714 1.608-1.596 0-.88-.72-1.595-1.608-1.595-.887 0-1.607.714-1.607 1.595 0 .882.72 1.596 1.607 1.596zm7.072-1.596c0 .882-.72 1.596-1.607 1.596a1.602 1.602 0 01-1.608-1.596c0-.88.72-1.595 1.608-1.595.887 0 1.607.714 1.607 1.595zm3.857 1.596c.888 0 1.607-.714 1.607-1.596a1.6 1.6 0 00-1.607-1.595c-.887 0-1.607.714-1.607 1.595 0 .882.72 1.596 1.607 1.596z",fill:"#fff"})))},hn=t(35667),_n=t(9909),yn=t(17134),wn=t(7786),En=function(e){var n,t=e.count,r=e.className,i=e.textClassName,c=e.toggleComment,m=e.reportExtraParams,v=e.awemeInfo,p=e.ableMiniType,g=e.onLottieComplete,h=e.abtestData,w=(0,u.useMemo)((function(){var e,n,t,l,o,a,r,i,u,c,s,d,f,m,p,g,h,_,y;return{author_id:null==v||null===(e=v.authorInfo)||void 0===e?void 0:e.uid,group_id:null==v?void 0:v.awemeId,log_pb:null==v?void 0:v.logPb,compilation_id:null==v||null===(n=v.mixInfo)||void 0===n?void 0:n.mixId,impressionData:null==v?void 0:v.impressionData,awemeId:null==v?void 0:v.awemeId,vduration:null==v||null===(t=v.video)||void 0===t?void 0:t.duration,isH265:(null==v||null===(l=v.video)||void 0===l||null===(o=l.bitRateList)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.isH265)||(null==v||null===(r=v.video)||void 0===r?void 0:r.isH265),qualityType:(null==v||null===(i=v.video)||void 0===i||null===(u=i.bitRateList)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.qualityType)||(null==v||null===(s=v.video)||void 0===s?void 0:s.qualityType),bitRate:(null==v||null===(d=v.video)||void 0===d||null===(f=d.bitRateList)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.bitRate)||(null==v||null===(p=v.video)||void 0===p?void 0:p.bitRate),videoFormat:null==v||null===(g=v.video)||void 0===g?void 0:g.videoFormat,gearName:(null==v||null===(h=v.video)||void 0===h||null===(_=h.bitRateList)||void 0===_||null===(y=_[0])||void 0===y?void 0:y.gearName)||""}}),[v]),E=(0,hn.n)(),k=(0,u.useState)(!1),b=(0,a.Z)(k,2),C=b[0],S=b[1],I=(0,u.useRef)(null),N=function(){var e,n,t=null===(e=I.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e);return{enter:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,33],!0)},leave:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[59,83],!0)}}},x=(0,u.useRef)(null);(0,u.useEffect)((function(){if(!(0,_.b_)()){var e=x.current,n=function(){var e,n;null===(e=(n=N()).enter)||void 0===e||e.call(n)},t=function(){var e,n;null===(e=(n=N()).leave)||void 0===e||e.call(n)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",t),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",t)}}}),[]);var T=(0,u.useCallback)((function(e){var n,t,o,a=e.clickMethod,r=void 0===a?"click_icon":a;null==E||E.emit("shortcutTopic");var i=c({clickMethod:r});if("click_icon"===r&&i&&(null==E||E.emit(ln.USER_ACTION,{action:"open_comment"})),an.sendLog("clickCommentButton",(0,l.Z)((0,l.Z)({urlParamList:["previous_page"],enter_from:(0,H.mo)(),author_id:null==v||null===(n=v.authorInfo)||void 0===n?void 0:n.uid,group_id:null==v?void 0:v.awemeId,log_pb:null==w?void 0:w.log_pb,is_full_screen:(0,W.r)()?"1":"0",is_full_webscreen:wn.s.getIsPageFullscreen()?"1":"0",tab_name:V.getTabName()||(0,z.Rs)("tab_name")||"",click_method:r,click_from:r,from_follow_list:null!==(t=G.Le.getConfig(G.gI.FromFollowList))&&void 0!==t&&t.tag?"1":"0",aweme_type:"".concat(null==v?void 0:v.awemeType),action:i?"open":"close",item_duration_ms:(null==v||null===(o=v.video)||void 0===o?void 0:o.duration)||0},m||{}),(0,y.t)())),(0,f.Jt)(v)){var u=(0,f.Rx)(v);(0,We.E)("click_comment",{tag:(0,Ke.f)(),value:u.creative_id,log_extra:u.log_extra}),(0,We.E)("othershow",{tag:(0,Ke.f)(),value:u.creative_id,log_extra:u.log_extra,refer:"comment"})}}),[E,c,v,m,w]);return(0,u.useEffect)((function(){if(E)return null==E||E.on("showComment",T),function(){null==E||E.off("showComment",T)}}),[E,T]),u.createElement("div",{className:s()(rn,r,(n={},(0,o.Z)(n,mn,p),(0,o.Z)(n,fn,!0),n)),"data-e2e":"feed-comment-icon",onClick:function(){return T({clickMethod:"click_icon"})},ref:x,onMouseEnter:function(){(null==h?void 0:h.interactionOpt)>=d.U5.On&&S(!0)}},u.createElement("div",{className:sn},(0,_.b_)()||(null==h?void 0:h.interactionOpt)!==d.U5.Off&&!C?u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(gn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:dn,viewBox:"0 0 36 37"}):u.createElement(yn.default,{ref:I,data:on,loop:!1,autoplay:!1,onComplete:function(){null==g||g()},onInit:function(){var e,n;(null==h?void 0:h.interactionOpt)>=d.U5.On&&(null===(e=(n=N()).enter)||void 0===e||e.call(n))}})),Boolean(t)&&u.createElement("div",{className:s()(un,i,cn)},t))},kn=t(19478),bn=t.n(kn),Cn=t(8e3),Sn=t.n(Cn),In=t(52985),Nn=t(10415);function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},xn.apply(this,arguments)}var Tn=function(e){return u.createElement("svg",xn({width:36,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pn||(pn=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.215 10.124c1.098-1.565 2.901-2.392 4.886-2.392 3.778 0 6.921 3.278 6.921 7.175v0l-.002.257c-.002.085-.003.128.003.142-.014.82-.156 1.497-.407 2.391-.143.161-.275.464-.407.798-.209.323-.287.48-.408.797-.098.166-.202.332-.31.499-1.027 1.585-2.428 3.168-3.825 4.565-2.1 2.114-4.232 3.872-5.163 4.64-.258.212-.424.349-.47.396-.332.33-.663.34-.994.34h-.028c-.68 0-1.02-.34-1.36-.68a3.166 3.166 0 00-.192-.16c-1.032-.761-3.366-2.627-5.553-4.876-1.656-1.687-3.248-3.62-4.122-5.51-.34-.681-.764-2.301-.784-3.2.007-.007.006-.05.004-.137-.002-.063-.004-.15-.004-.262 0-3.899 3.141-7.175 6.922-7.175 1.98 0 3.785.827 5.293 2.392z",fill:"#fff"})))},Ln="kEqb4PZ6",Pn="W9uIxu_l",Zn="HNBvVrcV",Mn="lHmTa40e",Rn="bvTE03NJ",Dn="Zjht_c1S",On="TwlaIXPW",An="PK0tKym9",Fn="iyKyroyp",Un="up9tZldE",Bn="MHeBD3KS",Vn="Ug_HpRUQ",jn="_q6uXOhe",Wn=t(85340),Hn=t(15728),zn=t(41168),Gn=t(25546),Kn=t(53630),qn=function(e){return e[e.Default=0]="Default",e[e.LowEndOpt=1]="LowEndOpt",e[e.Unique=2]="Unique",e}(qn||{}),Qn=function(e){return e[e.None=0]="None",e[e.MouseEnter=1]="MouseEnter",e[e.StatusChange=2]="StatusChange",e}(Qn||{});function Xn(e){var n,t,l,r,c=e.awemeInfo,f=e.isLogin,m=e.loginUserInfo,v=e.loginDispatch,p=e.fullScreenTarget,g=e.loginPanelTarget,h=e.reportExtraParams,y=void 0===h?{}:h,w=e.ableMiniType,E=void 0!==w&&w,k=e.onLottieComplete,b=e.recordPreferVideoSwitch,C=void 0!==b&&b,S=e.refIsDigged,I=void 0===S?{}:S,N=e.onDiggSuccessCb,x=e.abtestData,T=(0,hn.n)(),L=(0,u.useRef)(!0),P=(0,u.useRef)(!1),Z=(0,u.useRef)(!1),M=(0,u.useRef)(null),R=(0,u.useRef)(!1),D=(0,u.useRef)(),A=(0,u.useState)(Qn.None),U=(0,a.Z)(A,2),B=U[0],V=U[1],j=(0,u.useState)((function(){var e=(null==x?void 0:x.changeCandle)||"";return null!=e&&i()(e).call(e,null==c?void 0:c.awemeId)?qn.Unique:(0,_.b_)()?qn.LowEndOpt:qn.Default})),z=(0,a.Z)(j,2),K=z[0],q=z[1],Q=(0,Wn.P)({selfUid:null==m||null===(n=m.info)||void 0===n?void 0:n.uid,awemeId:null==c?void 0:c.awemeId,defaultCount:null==c||null===(t=c.stats)||void 0===t?void 0:t.diggCount,defaultDiggStatus:null!=c&&c.userDigged?In.gZ.Digged:In.gZ.UnDigg}),X=Q.count,Y=Q.diggStatus;I.current=Y;var J,$=(0,Hn._)({diggState:Y===In.gZ.Digged}),ee=$.resetUsedKeyDownTime,ne=$.resetDiggTime,te=$.checkIsCancelDigg,le=(0,zn.i)({selfUid:null==m||null===(l=m.info)||void 0===l?void 0:l.uid,isLogin:f,awemeInfo:c,onLoginSuccess:(J=(0,O.Z)(F().mark((function e(){var n,t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==v?void 0:v({type:"updateUserInfo"});case 2:if("video_detail"!==(0,H.vM)()){e.next=5;break}return e.next=5,(0,Gn.a8)({secUid:null==c||null===(n=c.authorInfo)||void 0===n?void 0:n.secUid,uid:null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid});case 5:case"end":return e.stop()}}),e)}))),function(){return J.apply(this,arguments)}),reportExtraParams:y,accountParentEl:(0,W.r)()&&p,defaultDiggStatus:null!=c&&c.userDigged?In.gZ.Digged:In.gZ.UnDigg,success:N,loginPanelTarget:g,scene:wn.s.getPlayerScene(null==T?void 0:T.playerId),teaEvtParams:{is_small_window:0}}),oe=le.digg,ae=le.unDigg,re=(0,u.useCallback)((function(e){if(Z.current=!0,C){var n,t,l=G.Le.getConfig(G.gI.AwemePcRecRawData)||{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},o=l.videoPrefer.like;!i()(n=Sn()(o).call(o,(function(e,n){return n%2==0}))).call(n,null==c?void 0:c.groupId)&&o.push(null==c?void 0:c.groupId,null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid),G.Le.setConfig(G.gI.AwemePcRecRawData,l)}Y===In.gZ.Digged?ae({clickMethod:e}):oe({clickMethod:e}),T.emit(ln.USER_ACTION,{action:"digg",status:Y===In.gZ.Digged?"close":"open"})}),[Y,oe,ae,C,K]);D.current=re,(0,u.useEffect)((function(){var e=(null==x?void 0:x.changeCandle)||"";null!=e&&i()(e).call(e,null==c?void 0:c.awemeId)?q(qn.Unique):(0,_.b_)()?q(qn.LowEndOpt):q(qn.Default)}),[x,c]),(0,u.useEffect)((function(){Y&&ne()}),[Y]),(0,u.useEffect)((function(){if(T){var e=bn()((function(e){var n;null===(n=D.current)||void 0===n||n.call(D,e)}),1e3,{leading:!0,trailing:!1}),n=function(n){var t=n.clickMethod;(null==x?void 0:x.interactionOpt)>=d.U5.On&&V(Qn.StatusChange),Y?Y&&"hot_key"!==t||(te()&&e(t),ee()):e(t)};return null==T||T.on("onStar",n),function(){null==T||T.off("onStar",n)}}}),[T,null==c?void 0:c.awemeId,Y]);var ie=function(){var e,n,t=null===(e=M.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e),l=function(){var e,n;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,1],!0),null==t||null===(n=t.goToAndStop)||void 0===n||n.call(t,88,!0)},o=function(){var e,n;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,1],!0),null==t||null===(n=t.goToAndStop)||void 0===n||n.call(t,0,!0)};return{setLikedStatus:l,setUnLikedStatus:o,like:function(){var e;P.current=!0,Z.current=!1,null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[39,88],!0)},dislike:function(){var e;P.current=!0,Z.current=!1,null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[124,162],!0)},enter:function(){var e,n;Y?null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[96,120],!0):null==t||null===(n=t.playSegments)||void 0===n||n.call(t,[0,32],!0)},leave:function(){var e,n;Y?null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[64,88],!0):null==t||null===(n=t.playSegments)||void 0===n||n.call(t,[162,186],!0)},end:function(){P.current=!1,R.current||(Y?l():o())}}},ue=(0,u.useRef)(null);return(0,u.useEffect)((function(){if(K===qn.Default){var e=ue.current,n=function(){var e,n;R.current=!0,null===(e=(n=ie()).enter)||void 0===e||e.call(n)},t=function(){var e,n;R.current=!1,null===(e=(n=ie()).leave)||void 0===e||e.call(n)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",t),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",t)}}}),[ie,K]),(0,u.useEffect)((function(){if(L.current)return Y?ie().setLikedStatus():ie().setUnLikedStatus(),void(L.current=!1);Z.current?Y?ie().like():ie().dislike():(Y?ie().setLikedStatus():ie().setUnLikedStatus(),Z.current=!1)}),[Y,K]),u.createElement("div",{className:s()(Ln,Un,(r={},(0,o.Z)(r,Pn,Y),(0,o.Z)(r,Bn,E),r)),onClick:function(){null==T||T.emit("shortcutTopic"),re()},ref:ue,"data-e2e-state":Y?"video-player-is-digged":"video-player-no-digged","data-e2e":"video-player-digg",onMouseEnter:function(){(null==x?void 0:x.interactionOpt)>=d.U5.On&&V(Qn.MouseEnter)}},u.createElement("div",{className:Mn},K===qn.Unique?u.createElement("div",{className:s()(Vn,(0,o.Z)({},jn,Y))}):null,K===qn.LowEndOpt?u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Tn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 36 37",className:s()(Rn,(0,o.Z)({},Dn,Y))}):null,K===qn.Default?B===Qn.None&&(null==x?void 0:x.interactionOpt)>=d.U5.On?u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Tn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 -3 36 37",className:s()(Rn,(0,o.Z)({},Dn,Y))}):u.createElement(yn.default,{ref:M,className:Zn,data:Nn,loop:!1,autoplay:!1,onComplete:function(){null==k||k(),ie().end()},onInit:function(){var e,n;switch(B){case Qn.MouseEnter:null===(e=(n=ie()).enter)||void 0===e||e.call(n);case Qn.StatusChange:}}}):null),u.createElement("div",{className:s()(An,On,Fn)},(0,Kn.A)({count:X,displayWord:"\u8d5e"})))}var Yn,Jn=t(43088),$n=t(31081),et=new q.hD({clickFavoriteVideo:{eventName:"click_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}}}),nt="CT3y5rWY",tt="qc4FQDvn",lt="ywWMyrCr",ot="H2e1f_wM",at="y0VmUN7L",rt="i5QZfe0r",it="eEBI4Egz",ut="UgpbNsc3",ct="jtnwH7Q7";function st(){return st=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},st.apply(this,arguments)}var dt=function(e){return u.createElement("svg",st({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Yn||(Yn=u.createElement("path",{d:"M16.51 7.927c.515-1.38 2.465-1.38 2.98 0l2.333 6.243 6.653.291c1.47.064 2.072 1.92.921 2.836l-5.212 4.15 1.78 6.422c.393 1.42-1.184 2.566-2.411 1.753L18 25.944l-5.554 3.678c-1.227.813-2.804-.334-2.41-1.753l1.78-6.422-5.213-4.15c-1.151-.916-.549-2.772.92-2.836l6.655-.291 2.332-6.243z",fill:"#fff"})))},ft=t(34590),mt=t(31554),vt=t(65827);function pt(e,n){var t=(0,u.useRef)(null),l=(0,u.useState)(!1),o=(0,a.Z)(l,2),r=o[0],i=o[1],c=(0,u.useState)(!1),s=(0,a.Z)(c,2),d=s[0],f=s[1],m=(0,u.useState)(!1),v=(0,a.Z)(m,2),p=v[0],g=v[1],h=(0,u.useState)(!1),_=(0,a.Z)(h,2),y=_[0],w=_[1],E=(d||r||p)&&!y;return(0,u.useEffect)((function(){var n=function(){i(!0),w(!1)},l=function(){t.current=$()((function(){i(!1),t.current&&clearTimeout(t.current)}),50)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",l),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",l)}}),[e]),(0,u.useEffect)((function(){var e=function(){f(!0),g(!1)},t=function(){f(!1)};return null==n||n.addEventListener("mouseenter",e),null==n||n.addEventListener("mouseleave",t),function(){null==n||n.removeEventListener("mouseenter",e),null==n||n.removeEventListener("mouseleave",t)}}),[n]),{show:E,setForceShow:g,setForceHide:w}}var gt,ht="_Z8yrU1P",_t="RTaEBPWj",yt=t(86846);function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},wt.apply(this,arguments)}var Et,kt,bt=function(e){return u.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),gt||(gt=u.createElement("path",{d:"M10.51 1.063a1.576 1.576 0 012.98 0l2.332 6.417 6.654.299c1.47.066 2.072 1.972.921 2.915l-5.212 4.264 1.78 6.601c.393 1.459-1.184 2.637-2.411 1.802L12 19.581l-5.554 3.78c-1.227.835-2.804-.343-2.41-1.802l1.78-6.6-5.213-4.265c-1.151-.943-.549-2.85.92-2.915l6.654-.3 2.333-6.416z",fill:"#FAB802"})))};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ct.apply(this,arguments)}var St,It=function(e){return u.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Et||(Et=u.createElement("path",{d:"M3 7a2 2 0 012-2h3.338a2 2 0 01.791.163l2.777 1.195a4 4 0 001.582.326H19a2 2 0 012 2V17a2 2 0 01-2 2H5a2 2 0 01-2-2V7z",stroke:"#fff",strokeOpacity:.75,strokeWidth:2})),kt||(kt=u.createElement("path",{d:"M7 14h9M7 10h2",stroke:"#fff",strokeOpacity:.8,strokeWidth:2,strokeLinecap:"round"})))};function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Nt.apply(this,arguments)}var xt=function(e){return u.createElement("svg",Nt({width:24,height:25,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),St||(St=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.972 6.014l-.89 2.504-.012.032c-.04.112-.107.302-.196.482A3.259 3.259 0 018.487 10.8a4.344 4.344 0 01-.552.048l-2.74.126 2.284 1.91.025.02c.087.073.234.196.366.335.69.724 1.01 1.726.865 2.717-.027.19-.077.375-.106.484a6.606 6.606 0 00-.008.032l-.745 2.826 2.09-1.455.03-.02c.1-.07.27-.19.452-.286a3.26 3.26 0 013.047 0c.182.096.352.215.453.285l.029.02 2.09 1.456-.745-2.826a4.343 4.343 0 01-.114-.516 3.259 3.259 0 01.865-2.717 4.32 4.32 0 01.367-.334l.025-.021 2.283-1.91-2.74-.126-.034-.001a4.344 4.344 0 01-.518-.047 3.259 3.259 0 01-2.387-1.768c-.089-.18-.156-.37-.196-.482l-.01-.032-.891-2.504zm-1.048-2.91c-.086.13-.183.4-.376.943l-1.351 3.8c-.055.154-.082.23-.115.297-.18.363-.523.617-.922.683a2.867 2.867 0 01-.317.024l-3.995.183c-.532.025-.798.037-.943.08a1.259 1.259 0 00-.66 1.953c.09.122.295.293.703.635l3.247 2.716c.119.099.178.148.227.2.267.28.39.667.334 1.05-.01.07-.03.145-.07.294l-1.084 4.113c-.142.54-.214.81-.216.964-.012.89.876 1.511 1.707 1.194.144-.055.374-.214.833-.534l3.183-2.215c.138-.096.207-.144.274-.18a1.259 1.259 0 011.177 0c.068.037.137.085.274.18l3.184 2.215c.458.32.688.48.832.534a1.259 1.259 0 001.707-1.194c-.002-.154-.073-.424-.216-.965l-1.085-4.112c-.039-.15-.059-.224-.069-.294-.056-.383.068-.77.334-1.05.05-.052.109-.101.227-.2l3.247-2.716c.409-.342.613-.513.703-.635a1.259 1.259 0 00-.66-1.953c-.145-.043-.41-.055-.942-.08L16.1 8.851a2.869 2.869 0 01-.317-.024c-.399-.066-.742-.32-.922-.683-.033-.067-.06-.143-.115-.296l-1.351-3.801c-.193-.542-.29-.814-.376-.943a1.259 1.259 0 00-2.095 0z",fill:"#fff",fillOpacity:.75})))},Tt="FJ9mmXM9",Lt="JuOKwMIK",Pt="KB4k6NhU",Zt="iEOzFPUC",Mt="LmRrSoKC",Rt="dfFhKC_a",Dt="c8zlVgIY",Ot="evYO12NF",At=t(77103),Ft=t(48557),Ut=t(49149),Bt=function(e){var n=e.icon,t=e.text,l=e.iconClassName,o=e.onClick;return u.createElement("div",{className:Lt,onClick:o},u.createElement("div",{className:Pt},u.createElement(yt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(n,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:s()([Zt,l]),viewBox:"0 0 24 24"})),u.createElement("p",{className:Ot},t))},Vt=function(e){var n=e.show,t=e.awemeInfo,l=e.collected,o=e.collectMethod,a=e.afterLogin,r=e.unCollectMethod,i=e.onCollectDone,c=(0,u.useRef)(null),s=(0,hn.n)(),d=(0,u.useCallback)((function(){(0,Ft.g)("favorite_video_bubble_click",{group_id:t.awemeId,click_position:"video"});var e={click_method:"panel",click_from:"panel",folder_name:"",folder_id:""};(0,Ft.g)("click_favorite_video",e);var n=function(){var e=(0,O.Z)(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.abrupt("return",{});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l?r({nextFunc:n,logParams:e}):o({nextFunc:n,logParams:e})}),[i,l,o,r]),f=(0,u.useCallback)((function(){(0,Ft.g)("favorite_video_bubble_click",{group_id:t.awemeId,click_position:"favorite_folder"}),a((function(){var e;null===(e=c.current)||void 0===e||e.open(),$()((function(){h.emit(h.EVENT.videoStopPlayNext)}),500)})),null==s||s.emit(ln.USER_ACTION,{action:"collect",status:"on"})}),[a,t.awemeId,s]);return(0,Ut.Z)(n,"entry"),(0,u.useEffect)((function(){n&&t.awemeId&&(0,Ft.g)("favorite_video_bubble_show",{group_id:t.awemeId})}),[t.awemeId,n]),u.createElement(u.Fragment,null,u.createElement("div",{className:Tt},u.createElement(Bt,{icon:It,iconClassName:Mt,text:"\u6536\u85cf\u81f3\u6536\u85cf\u5939",onClick:f}),u.createElement(Bt,{iconClassName:l?Dt:Rt,icon:l?bt:xt,text:l?"\u5df2\u6536\u85cf\u89c6\u9891":"\u4ec5\u6536\u85cf\u89c6\u9891",onClick:d})),u.createElement(At.Z,{ref:c,awemeInfo:t,collected:l,collectMethod:o,selectType:"multi"}))},jt=t(26014),Wt=t(66534),Ht=function(e){var n=e.referenceElement,t=e.awemeInfo,l=e.abTestData,o=e.collected,a=e.collectMethod,r=e.unCollectMethod,i=e.afterLogin,c=(0,u.useMemo)((function(){return(0,Wt.Z)(l,"collection_route")}),[l]),f=c===d.nz.V1,m=c===d.nz.V2,v=(0,u.useRef)(null),p=(0,u.useRef)(o),g=(0,u.useRef)({show:!1}),h=pt(n,v.current),_=h.show,y=h.setForceShow,w=h.setForceHide;return(0,u.useEffect)((function(){o!==p.current&&(p.current=o,w(!0))}),[o]),(0,u.useEffect)((function(){var e=function(){g.current.show||y(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,vt.Z)((function(){return v.current}),(function(){g.current.show||y(!1)})),u.createElement("div",{ref:v,className:s()([ht,!_&&_t]),onWheelCapture:function(e){return e.stopPropagation()}},f&&u.createElement(Vt,{show:_,awemeInfo:t,collected:o,collectMethod:a,unCollectMethod:r,afterLogin:i,onCollectDone:function(){w(!0)}}),m&&u.createElement(jt.Z,{show:_,type:"popover",selectType:"multi",awemeInfo:t,collected:o,collectMethod:a,unCollectMethod:r,syncCreateModalShow:function(e){return g.current.show=e},onCreateOpen:function(){return y(!0)},onCollectDone:function(){return w(!0)}}))},zt=function(e){var n=e.abTestData,t=e.userInfo,l=(0,u.useMemo)((function(){return(0,Wt.Z)(n,"collection_route")}),[n]),o=l!==d.nz.V0,a=l===d.nz.V2&&!(null!=t&&t.isLogin);return!o||a?null:u.createElement(Ht,e)},Gt=t(52369),Kt=t(14655),qt=function(e){return e[e.None=0]="None",e[e.MouseEnter=1]="MouseEnter",e[e.StatusChange=2]="StatusChange",e}(qt||{});function Qt(e){var n,t,r,i,c=e.awemeInfo,f=e.isLogin,m=e.loginUserInfo,v=e.loginDispatch,p=e.fullScreenTarget,g=e.toast,h=e.ableMiniType,y=void 0!==h&&h,w=e.reportExtraParams,E=void 0===w?{}:w,k=e.onLottieComplete,b=e.refIsCollected,C=void 0===b?{}:b,S=e.abtestData,I=e.loginPanelTarget,N=(0,u.useRef)(!0),x=(0,u.useRef)(!1),T=(0,u.useRef)(!1),L=(0,u.useRef)(null),P=(0,u.useRef)(null),Z=(0,u.useRef)(!1),M=(0,hn.n)(),R=(0,u.useState)(qt.None),D=(0,a.Z)(R,2),A=D[0],U=D[1],B=function(e){g?g(e):ft.F.info(e)},j=(0,W.r)()&&p,G=wn.s.getPlayerScene(null==M?void 0:M.playerId),K={is_small_window:0},q=function(){var e=(0,O.Z)(F().mark((function e(){var n,t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==v||v({type:"updateUserInfo"}),"video_detail"!==(0,H.vM)()){e.next=4;break}return e.next=4,(0,Gn.a8)({secUid:null==c||null===(n=c.authorInfo)||void 0===n?void 0:n.secUid,uid:null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=(0,Gt.p)({selfUid:null==m||null===(n=m.info)||void 0===n?void 0:n.uid,awemeInfo:c,defaultCollectStatus:null!=c&&c.userCollected?In.c.Collected:In.c.Uncollected,isLogin:f,accountParentEl:j,loginPanelTarget:I,reportExtraParams:E,scene:G,onLoginSuccess:q,success:function(e){var n=e.action,t=e.successMsg;"collect"===n&&B(t||In.a$.CollectSuccess),null==M||M.emit(ln.USER_ACTION,{action:"collect",status:"collect"===n?"on":"off"})},fail:function(e){switch(e.statusCode){case Jn.ERROR_CODE.ERROR_USER_UNLOGIN:return;case Jn.ERROR_CODE.ERROR_COLLECT_TOO_FAST:return void B(In.a$.TooFast);case Jn.ERROR_CODE.ERROR_COLLECT_RESTRICTED:return void B(In.a$.CollectBan);default:return void B(In.a$.CollectFail)}},teaEvtParams:K}),X=Q.unCollect,Y=Q.collect,J=(0,Kt.u)({selfUid:null==m||null===(t=m.info)||void 0===t?void 0:t.uid,awemeId:null==c?void 0:c.awemeId,defaultCollectStatus:null!=c&&c.userCollected?In.c.Collected:In.c.Uncollected,defaultCount:null==c||null===(r=c.stats)||void 0===r?void 0:r.collectCount}),ee=J.collectStatus,ne=J.count,te=(0,u.useRef)(f);te.current=f;var le=function(){var e,n,t=null===(e=L.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e),l=function(){var e,n;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,1],!0),null==t||null===(n=t.goToAndStop)||void 0===n||n.call(t,115,!0)},o=function(){var e,n;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,1],!0),null==t||null===(n=t.goToAndStop)||void 0===n||n.call(t,0,!0)};return{toLottieStart:o,toLottieEnd:l,addCollect:function(){var e;x.current=!0,T.current=!1,null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[58,92],!0)},cancelCollect:function(){var e;x.current=!0,T.current=!1,null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[151,170],!0)},enter:function(){var e,n;ee?null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[121,145],!0):null==t||null===(n=t.playSegments)||void 0===n||n.call(t,[10,43],!0)},leave:function(){var e,n;ee?null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[92,115],!0):null==t||null===(n=t.playSegments)||void 0===n||n.call(t,[195,207],!0)},end:function(){x.current=!1,Z.current||(ee?l():o())}}},oe=function(e){var n,t,o=(e||{}).clickMethod,a=void 0===o?"icon":o;((null==S?void 0:S.interactionOpt)>=d.U5.On&&U(qt.StatusChange),!x.current||(0,_.b_)())&&(T.current=!0,ee===In.c.Collected?et.sendLog("clickCancelFavoriteVideo",(0,l.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==c||null===(n=c.authorInfo)||void 0===n?void 0:n.uid,group_id:null==c?void 0:c.awemeId,log_pb:null==c?void 0:c.logPb,enter_from:(0,H.mo)(),is_full_screen:(0,W.r)()?"1":"0",tab_name:V.getTabName()||(0,z.Rs)("tab_name")||""},E)):et.sendLog("clickFavoriteVideo",(0,l.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid,group_id:null==c?void 0:c.awemeId,log_pb:null==c?void 0:c.logPb,enter_from:(0,H.mo)(),is_full_screen:(0,W.r)()?"1":"0",click_method:a,tab_name:V.getTabName()||(0,z.Rs)("tab_name")||""},E)),null==M||M.emit("shortcutTopic"),ee===In.c.Collected?X({clickMethod:a}):Y({clickMethod:a}))};return(0,u.useEffect)((function(){var e=P.current,n=function(){var e,n;Z.current=!0,null===(e=(n=le()).enter)||void 0===e||e.call(n)},t=function(){var e,n;Z.current=!1,null===(e=(n=le()).leave)||void 0===e||e.call(n)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",t),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",t)}}),[le]),(0,u.useEffect)((function(){return null==M||M.on("onCollect",oe),function(){null==M||M.off("onCollect",oe)}}),[M,oe]),(0,u.useEffect)((function(){if(N.current)return ee===In.c.Collected?le().toLottieEnd():le().toLottieStart(),void(N.current=!1);T.current?ee===In.c.Collected?le().addCollect():le().cancelCollect():(ee===In.c.Collected?le().toLottieEnd():le().toLottieStart(),T.current=!1)}),[ee]),(0,u.useEffect)((function(){C.current=ee}),[C,ee]),u.createElement(u.Fragment,null,u.createElement("div",{className:s()(nt,(i={},(0,o.Z)(i,ct,y),(0,o.Z)(i,ut,!0),i)),onClick:function(){return oe()},ref:P,"data-e2e-state":ee?"video-player-is-collected":"video-player-no-collect","data-e2e":"video-player-collect",onMouseEnter:function(){(null==S?void 0:S.interactionOpt)===d.U5.On&&U(qt.MouseEnter)}},u.createElement("div",{className:lt},(0,_.b_)()||(null==S?void 0:S.interactionOpt)===d.U5.On&&A===qt.None?u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(dt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 36 36",className:s()(at,(0,o.Z)({},rt,ee))}):u.createElement(yn.default,{ref:L,className:ot,data:$n,loop:!1,autoplay:!1,onComplete:function(){null==k||k(),le().end()},onInit:function(){var e,n;if((null==S?void 0:S.interactionOpt)>=d.U5.On)switch(A){case qt.MouseEnter:null===(e=(n=le()).enter)||void 0===e||e.call(n);case qt.StatusChange:}}})),u.createElement("div",{className:s()(tt,it)},(0,Kn.A)({count:ne,displayWord:"\u6536\u85cf"}))),u.createElement(zt,{userInfo:m,referenceElement:P.current,awemeInfo:c,abTestData:S,collected:In.c.Collected===ee,collectMethod:Y,unCollectMethod:X,afterLogin:function e(n){var t,l,o;te.current?n():(0,mt.disturbShowAccount)({success:(o=(0,O.Z)(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:te.current?n():$()((function(){e(n)}),1e3);case 3:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)}),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_video_entry",next:"https://".concat(null===(t=window)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.host),teaEvtParams:K},j,I,G)}}))}var Xt=t(30673),Yt=t(68493),Jt=t.n(Yt),$t=t(34346),el=t.n($t),nl=t(96716),tl=t(77679),ll=t(27375),ol=t(67318),al=t(97658),rl=t(81877),il=t(76445),ul=t(40729),cl=new q.hD({dislike:{eventName:"dislike",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",enter_method:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",aweme_type:"",is_insert_wallpaper:0,is_show_outside:0,item_duration_ms:0}},report:{eventName:"report",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",enter_method:"",is_full_screen:"0"}},creatorDataEntranceClick:{eventName:"creator_data_entrance_click",params:{}},creatorDataEntranceShow:{eventName:"creator_data_entrance_show",params:{}},continuedAppBroadcastClick:{eventName:"continued_app_broadcast_click",params:{enter_from:""}},moreFeatureShow:{eventName:"more_features_show",params:{enter_from:""}}}),sl={more:"V5Rmr_ZY",hasNewIcon:"TPNyP8Xw",moreBox:"se14DHcz",moreList:"LIEWFkBs",itemWrap:"FbuERyN5",disableItem:"EM7WWsTO",itemIcon:"Ejbx5dGa",itenDesc:"n0iTjXhb",newWarper:"nSRLRqcw",ableMiniType:"IS7FyuLE",analysisIcon:"PGh2bCYe",shortcutList:"ouFbTbn7",asrIconOn:"qcSU6whO",asrIconOff:"Y3wf9j3c",deleteIcon:"El1seDlg"},dl=t(60312),fl=t(35033),ml=t(91874),vl=t(9491),pl=t(71296),gl=t(98170),hl=t(2311),_l=t(40611),yl=t(99778),wl=t(43850),El=t(8318),kl=t(30978),bl=t(99317),Cl={musicDetail:"ZJznjerU",musicText:"_zchYV_g",text:"_simaUMV",useCount:"C0K0FFgN",musicName:"cR16sIWE",isCollect:"ptKnbs4J"},Sl=t(77370),Il=t.n(Sl),Nl=t(92267),xl="collectMusic",Tl="unCollectMusic",Ll=function(e){var n=e.errMsg;e.statusCode!==Jn.ERROR_CODE.ERROR_USER_UNLOGIN&&ft.F.info(null!=n?n:In.Qr.FollowFail)},Pl=function(e){var n=e.mid,t=e.collectStatus,l=Il()((G.Le.getConfig(G.gI.CollectMusicStatusCache)||G.Le.setConfig(G.gI.CollectMusicStatusCache,{}),G.Le.getConfig(G.gI.CollectMusicStatusCache)));l[n]={collectStatus:t},G.Le.setConfig(G.gI.CollectMusicStatusCache,l)},Zl=function(e){var n=e.musicId,t=e.onLoginSuccess,l=e.awemeInfo,o=e.fail,a=void 0===o?Ll:o,r=e.isLogin,i=e.success,c=e.disableSuccessToast,s=e.accountParentEl,d=e.loginPanelTarget,f=e.scene,m=e.toast,v=(0,u.useRef)(!1),p=(0,u.useCallback)(function(){var e=(0,O.Z)(F().mark((function e(n){var t,o,r,u,s,d,f,v;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.mid,o=n.action,r=null,u="",e.prev=3,navigator.onLine){e.next=7;break}return m?null==m||m("\u5f53\u524d\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"):ft.F.info("\u5f53\u524d\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),e.abrupt("return");case 7:return e.next=9,(0,El.Id)({musicId:t,action:o===xl?1:0});case 9:s=e.sent,d=s.statusCode,f=s.logPb,u=f,r=d,0!==d&&3007005!==d||(o===xl?(c||(m?null==m||m("\u5df2\u6536\u85cf\uff0c\u8bf7\u5230\u624b\u673a\u7aef\u67e5\u770b\u4f7f\u7528"):ft.F.info("\u5df2\u6536\u85cf\uff0c\u8bf7\u5230\u624b\u673a\u7aef\u67e5\u770b\u4f7f\u7528")),Nl.i.sendLog("favoriteMusic",{music_id:t,group_id:null==l?void 0:l.awemeId,enter_from:(0,H.mo)(),enter_from_merge:(0,H.yW)()})):Nl.i.sendLog("cancelFavoriteMusic",{music_id:t,group_id:null==l?void 0:l.awemeId,enter_from:(0,H.mo)(),enter_from_merge:(0,H.yW)()}),v=o===xl?In.c.Collected:In.c.Uncollected,Pl({mid:t,collectStatus:v}),h.emit(h.EVENT.syncInteractionStatus,{musicId:t,action:o}),null==i||i({logPb:u,action:o,collectStatus:v})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),null==a||a({logPb:u,action:o});case 20:return e.abrupt("return",{statusCode:r});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(n){return e.apply(this,arguments)}}(),[a,n,i]),g=(0,u.useCallback)(function(){var e=(0,O.Z)(F().mark((function e(l){var o,a,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(l||{}).noLoginCb,(0,mt.disturbShowAccount)({success:function(){var e=(0,O.Z)(F().mark((function e(){var l,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t();case 2:return v.current=!0,e.next=5,p({action:xl,mid:n});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:l=e.t0,o=l.statusCode,v.current=!1,o===Jn.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==r||r());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_music",next:"https://".concat(null===(o=window)||void 0===o||null===(a=o.location)||void 0===a?void 0:a.host)},s,d,f);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,n,p,s,d,f]);return{collect:function(){r?(Nl.i.sendLog("clickFavoriteMusic",{music_id:n,group_id:null==l?void 0:l.awemeId,enter_from:(0,H.mo)(),enter_from_merge:(0,H.yW)()}),p({mid:n,action:xl})):g({noLoginCb:function(){$()((function(){g()}),1e3)}})},unCollect:function(){r?p({mid:n,action:Tl}):g({noLoginCb:function(){$()((function(){g()}),1e3)}})}}},Ml=t(28188),Rl=function(e){var n,t,l=e.musicId,o=e.isLogin,r=e.defaultCollectStatus,i=G.Le.getConfig(G.gI.CollectMusicStatusCache),c=(0,u.useState)(null!==(n=null==i||null===(t=i[l])||void 0===t?void 0:t.collectStatus)&&void 0!==n?n:r),s=(0,a.Z)(c,2),d=s[0],f=s[1];return(0,u.useEffect)((function(){var e,n;f(null!==(e=null==i||null===(n=i[l])||void 0===n?void 0:n.collectStatus)&&void 0!==e?e:r)}),[l,r,i]),(0,u.useEffect)((function(){var e=Ml.a.addCb((function(e){var n=e.collectMusicStatus,t=e.musicId,o=e.action;"collectMusic"!==o&&"unCollectMusic"!==o||t!==l||f(n)}));return function(){e()}}),[l]),o?{collectStatus:d}:{collectStatus:In.c.Uncollected}},Dl=t(87486);function Ol(e){var n=e.width,t=e.awemeInfo,l=e.loginDispatch,o=e.isLogin,r=e.isShow,i=e.fullScreenTarget,c=e.loginPanelTarget,s=e.toast,d=e.player,f=(null==t?void 0:t.music)||{},m=f.musicName,v=f.mid,p=(0,u.useState)(null),g=(0,a.Z)(p,2),h=g[0],_=g[1],y=(0,u.useState)(0),w=(0,a.Z)(y,2),E=w[0],k=w[1],b=(0,u.useState)(null),C=(0,a.Z)(b,2),S=C[0],I=C[1],N=(0,u.useCallback)((0,O.Z)(F().mark((function e(){var n,t,l,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,El.XL)({musicId:v});case 2:0===(n=e.sent).statusCode&&(_((null===(t=n.musicInfo)||void 0===t?void 0:t.collectStat)||In.c.Uncollected),k(null!==(l=null==n||null===(o=n.musicInfo)||void 0===o?void 0:o.userCount)&&void 0!==l?l:0));case 4:case"end":return e.stop()}}),e)}))),[v]);(0,u.useEffect)((function(){r&&(null==S?void 0:S.awemeId)!==t.awemeId&&(N(),I(t))}),[t,r]);var x=Zl({musicId:v,onLoginSuccess:function(){return null==l?void 0:l({type:"updateUserInfo"})},awemeInfo:t,isLogin:o,accountParentEl:(0,W.r)()&&i,loginPanelTarget:c,toast:s}),T=x.collect,L=x.unCollect,P=Rl({musicId:v,isLogin:o,defaultCollectStatus:null===h?In.c.Uncollected:h}).collectStatus;return u.createElement("div",{className:Cl.musicDetail,style:{maxWidth:n?"".concat(n,"px"):"unset"},"data-e2e":"more-music-detail"},u.createElement("div",{className:Cl.musicText},u.createElement("div",{className:Cl.text},u.createElement("div",{className:Cl.musicName},u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(bl.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:36,height:36,viewBox:"0 0 36 36"}),m),u.createElement("div",{className:Cl.useCount},(0,kl.qe)(E),"\u4eba\u4f7f\u7528"))),u.createElement(Dl.Z,{collapseStatus:P===In.c.Collected,isFetching:null===h,handleClick:function(){P===In.c.Collected?L():(T(),null==d||d.emit(ln.USER_ACTION,{action:"collect_music"}))}}))}var Al=t(81762),Fl=t(31447),Ul=t(6801),Bl=function(e){return e[e.Enable=0]="Enable",e[e.OutDate=1]="OutDate",e[e.Private=2]="Private",e}({}),Vl={notInterestingIcon:!0,unfollow:!0,report:!0,shortcutList:!1,dataAnalysis:!1,phoneResume:!1};function jl(e){var n,t,r,i,c,m,v,g,_,y,w=e.player,E=e.awemeInfo,k=e.loginUserInfo,b=e.loginDispatch,C=e.deleteCurrentSwiper,S=e.singleBox,I=e.setSingleBox,N=e.logInfo,x=e.isFollowClickedRef,T=e.toast,L=e.videoReportModalContainer,P=e.reportExtraParams,Z=void 0===P?{}:P,R=e.ableMiniType,D=void 0!==R&&R,A=e.showList,U=e.abtestData,V=e.actionUnFollow,j=e.showMusicDetail,z=void 0===j||j,K=e.isLogin,q=e.onDislike,Q=e.isPermanentDislikeBtn,X=void 0!==Q&&Q,J=e.loginPanelTarget,$=e.fullScreenTarget,ee=e.isInnerFeed,ne=void 0!==ee&&ee,te=(0,Fe.P)({delayDisappear:50,delayShow:50}),le=te.type,oe=te.changeType,ae=(0,u.useState)(A.asrState===ll.Kw.On),re=(0,a.Z)(ae,2),ie=re[0],ue=re[1];(0,u.useEffect)((function(){A.asrState===ll.Kw.On&&ue(!0)}),[A]);var ce=(0,u.useRef)(null),se=(0,u.useRef)(null),de=(0,Ul.I7)(null==E?void 0:E.awemeType,K),fe=(0,u.useMemo)((function(){return A?(0,l.Z)((0,l.Z)((0,l.Z)({},Vl),A),{},{phoneResume:de}):Vl}),[A,de]),me=(0,u.useMemo)((function(){var e;return 1e3*((null==E?void 0:E.createTime)+2592e3)<M()()?Bl.OutDate:0!==(null==E||null===(e=E.status)||void 0===e?void 0:e.privateStatus)?Bl.Private:Bl.Enable}),[null==E?void 0:E.createTime,null==E||null===(n=E.status)||void 0===n?void 0:n.privateStatus]),ve=(0,Ae.r)({selfUid:null==k||null===(t=k.info)||void 0===t?void 0:t.uid,actionUid:null==E||null===(r=E.authorInfo)||void 0===r?void 0:r.uid,defaultFollowerStatus:null==E||null===(i=E.authorInfo)||void 0===i?void 0:i.followerStatus,defaultFollowStatus:null==E||null===(c=E.authorInfo)||void 0===c?void 0:c.followStatus}).followStatus,pe=(0,u.useCallback)((function(){x.current=!0,(0,rl.V)(ve)&&(V(),oe("",!0)),"follow"!==(0,H.yW)()||ne||null==C||C()}),[ve,oe,V,ne]),he=(0,u.useCallback)((0,O.Z)(F().mark((function e(){var n,t,l=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>0&&l[0]!==undefined?l[0]:{clickMethod:"icon"},t=n.clickMethod,null!=fe&&fe.notInterestingIcon){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,q({clickMethod:t,reportExtraParams:Z});case 5:oe("",!0),w.emit(ln.USER_ACTION,{action:"dislike"});case 7:case"end":return e.stop()}}),e)}))),[oe,fe,q,Z,w]),_e=(0,u.useCallback)((0,O.Z)(F().mark((function e(){var n,t,l,o,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,f.Jt)(E)){e.next=3;break}return null==w||w.emit(Al.B.AdReport),e.abrupt("return");case 3:if(null==w||w.emit(ln.USER_ACTION,{action:"report"}),cl.sendLog("report",{urlParamList:["previous_page"],enter_from:(0,H.mo)(),author_id:null==E||null===(n=E.authorInfo)||void 0===n?void 0:n.uid,group_id:null==E?void 0:E.awemeId,log_pb:null==N?void 0:N.log_pb,is_full_screen:(0,W.r)()?"1":"0"}),h.emit(h.EVENT.videoPause),a=function(){(0,il.m)("reportModal"),h.emit(h.EVENT.videoRemoveStopPlayNext)},E.awemeType!==p.ed.XgVideo){e.next=12;break}return h.emit(h.EVENT.videoPause),window.open((0,Ge.Tl)({videoid:null==E?void 0:E.awemeId,param:"envoke_tipoff",value:"1"})),null==C||C(),e.abrupt("return");case 12:(0,tl.mJ)({title:(null==E?void 0:E.awemeType)===p.ed.Note?"\u4e3e\u62a5\u56fe\u96c6":"\u4e3e\u62a5\u89c6\u9891",pipeline_id:(null==E?void 0:E.awemeType)===p.ed.Note?"161":"157",object_id:null==E?void 0:E.awemeId,onClose:a,onShow:function(){h.emit(h.EVENT.videoStopPlayNext),(0,il.o)({pauseCustomShortcut:!0,pauseGlobalShortcut:!0,pausePlayControlShortcut:!0},"reportModal")},userInfo:null==k?void 0:k.info,loginDispatch:b,owner_id:null==E||null===(t=E.authorInfo)||void 0===t?void 0:t.uid,owner_sec_id:(null==E||null===(l=E.authorInfo)||void 0===l?void 0:l.secUid)||"",enter_from:(0,H.yW)()},null!=L?L:(0,W.r)()&&(null==w||null===(o=w.config)||void 0===o?void 0:o.fullscreenTarget)),oe("");case 14:case"end":return e.stop()}}),e)}))),[E,oe,N,L,k,b,w]),ye=u.useCallback((function(){switch(me){case Bl.OutDate:T("\u53d1\u5e03\u8d85\u8fc730\u5929\u7684\u4f5c\u54c1\u6682\u4e0d\u652f\u6301\u5206\u6790");break;case Bl.Private:T("\u79c1\u5bc6\u4f5c\u54c1\u6682\u4e0d\u652f\u6301\u5206\u6790");break;default:cl.sendLog("creatorDataEntranceClick"),window.open((0,Ge.hj)(null==E?void 0:E.awemeId))}}),[null==E?void 0:E.awemeId,me,T]),we=u.useCallback((0,O.Z)(F().mark((function e(){var n,t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==w||w.emit(ln.USER_ACTION,{action:"phone_resume"}),cl.sendLog("continuedAppBroadcastClick",{enter_from:(0,H.vM)()}),e.next=5,(0,ol.wU)({item_id:E.awemeId,item_type:E.awemeType,record_type:2,play_progress:Math.floor(null!==(n=null==w?void 0:w.currentTime)&&void 0!==n?n:0),to_client:1});case 5:t=e.sent,0===t.statusCode?(h.emit(h.EVENT.videoPause),T("\u6253\u5f00\u624b\u673a\u6296\u97f3\u7ee7\u7eed\u89c2\u770b")):T("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),T("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 13:return e.prev=13,oe("",!0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[E,oe,null==w?void 0:w.currentTime,T,w]),Ee=u.useCallback((function(){ue((function(e){var n,t=e?"\u64cd\u4f5c\u6210\u529f\uff0c\u6b64\u89c6\u9891\u5c06\u4e0d\u4f1a\u5728\u540e\u53f0\u8f6c\u4e3a\u6587\u7a3f":"\u5df2\u5f00\u542f\u89c6\u9891\u8f6c\u6587\u7a3f\u529f\u80fd";return ft.F.infoInModalVideo(t),(0,ll.fG)({userId:null==k||null===(n=k.info)||void 0===n?void 0:n.uid,itemId:null==E?void 0:E.awemeId,status:e?ll.Kw.Off:ll.Kw.On}),!e}))}),[E,k]),ke=u.useCallback((0,O.Z)(F().mark((function e(){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null==E?void 0:E.awemeId){e.next=3;break}return e.abrupt("return");case 3:h.emit(h.EVENT.videoPause),(0,Fl.Z)({title:"\u4f60\u7684\u4f5c\u54c1\u5c06\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u65e0\u6cd5\u627e\u56de\uff0c\u786e\u8ba4\u5220\u9664\uff1f",cancelBtnText:"\u6682\u4e0d\u5220\u9664",confirmBtnText:"\u786e\u8ba4\u5220\u9664",onConfirm:function(){return new(Jt())((function(e){(0,al.FD)({awemeIds:"".concat(n)}).then((function(n){if(n.isSuccess){var t,l;null==C||C(),ft.F.info("\u5220\u9664\u6210\u529f");var o=null!==(t=G.Le.getConfig(G.gI.DeletePostList))&&void 0!==t?t:[];G.Le.setConfig(G.gI.DeletePostList,B()(l=[]).call(l,(0,Xt.Z)(o),[E])),e()}else ft.F.info("\u4f5c\u54c1\u56e0\u98ce\u9669\u56e0\u7d20\u672a\u80fd\u5220\u9664\u6210\u529f"),e()}))}))},onCancel:function(){}});case 5:case"end":return e.stop()}}),e)}))),[E,C]);(0,u.useEffect)((function(){"more"!==S&&oe("",!0)}),[S]);var be=new(ge())([["notInterestingIcon","video-player-no-like"],["report","video-player-report"],["shortcutList","video-player-shoret-cut"]]),Ce=function(e){var n=e.followStatus,t=e.handleClickNotInteresting,l=e.handleClickReport,a=e.handleClickDelete,r=e.handleClickUnfollow,i=e.handleClickPhoneResume,c=e.showList,d=e.awemeInfo,f=e.loginUserInfo,m=e.dataAnalysisStatus,v=e.handleClickAnalysis,p=e.abtestData,g=e.isPermanentDislikeBtn,h=void 0!==g&&g,_=e.userInfo,y=e.handleClickASR,w=e.isAsrOn,E=e.player;return(0,u.useMemo)((function(){var e,u,g,k,b,C,S=[{icon:fl.Z,desc:"\u4e0d\u611f\u5174\u8da3",key:"notInterestingIcon",onClick:function(){return t()},hidden:h||"undefined"!=typeof window&&-1!==(null===(e=window)||void 0===e||null===(u=e.location)||void 0===u||null===(g=u.pathname)||void 0===g?void 0:Y()(g).call(g,"/video"))||!(null!=c&&c.notInterestingIcon)||(null==d||null===(k=d.authorInfo)||void 0===k?void 0:k.uid)===(null==f||null===(b=f.info)||void 0===b?void 0:b.uid)},{icon:_l.Z,desc:"\u624b\u673a\u7eed\u64ad",key:"phoneResume",onClick:i,hidden:!(null!=c&&c.phoneResume)},{icon:dl.Z,desc:"\u53d6\u6d88\u5173\u6ce8",key:"unfollow",onClick:r,hidden:n===In.$u.UnFollow||!(null!=c&&c.unfollow)},{icon:pl.Z,desc:"\u4e3e\u62a5",key:"report",onClick:l,hidden:!(null!=c&&c.report)||(null==d||null===(C=d.authorInfo)||void 0===C?void 0:C.uid)===(null==_?void 0:_.uid)},{icon:yl.Z,desc:"\u5220\u9664",key:"deleteSelfPost",onClick:a,hidden:!(null!=c&&c.deleteSelfPost),className:sl.deleteIcon},{icon:ml.Z,desc:"\u6570\u636e\u5206\u6790",key:"dataAnalysis",onClick:v,hidden:!(null!=c&&c.dataAnalysis),className:s()(sl.analysisIcon,(0,o.Z)({},sl.disableItem,m!==Bl.Enable))},{icon:w?hl.Z:gl.Z,desc:"\u652f\u6301\u8f6c\u6587\u7a3f",key:"showASRIcon",onClick:y,hidden:!(null!=c&&c.asrState),className:w?sl.asrIconOn:sl.asrIconOff},{icon:vl.Z,desc:"\u5feb\u6377\u952e\u5217\u8868",key:"shortcutList",onClick:function(){(0,wl.n)({abtestData:p,logParams:{clickMethod:"more_button"}}),null==E||E.emit(ln.USER_ACTION,{action:"show_short_cut_list"})},hidden:!(null!=c&&c.shortcutList),className:sl.shortcutList}];return Sn()(S).call(S,(function(e){return!e.hidden}))}),[h,n,t,l,r,i,c,d,f,m,v,p,_,y,w,E])}({followStatus:ve,handleClickNotInteresting:he,handleClickReport:_e,handleClickDelete:ke,handleClickUnfollow:pe,handleClickPhoneResume:we,showList:fe,awemeInfo:E,loginUserInfo:k,dataAnalysisStatus:me,handleClickAnalysis:ye,abtestData:U,isPermanentDislikeBtn:X,userInfo:null==k?void 0:k.info,handleClickASR:Ee,isAsrOn:ie,player:w});(0,u.useEffect)((function(){var e,n,t=(null==E||null===(e=E.authorInfo)||void 0===e?void 0:e.uid)!==(null==k||null===(n=k.info)||void 0===n?void 0:n.uid)&&(null==fe?void 0:fe.notInterestingIcon);return t&&(null==w||w.on(Al.B.Dislike,he)),null==w||w.on("showReportModal",_e),function(){t&&(null==w||w.off(Al.B.Dislike,he)),null==w||w.off("showReportModal",_e)}}),[w,he,E,fe,_e,k]);var Se=(0,u.useCallback)((function(){cl.sendLog("moreFeatureShow",{enter_from:(0,H.vM)()}),null!=fe&&fe.dataAnalysis&&cl.sendLog("creatorDataEntranceShow")}),[null==fe?void 0:fe.dataAnalysis]),Ie=null==E||null===(m=E.status)||void 0===m||null===(v=m.videoMute)||void 0===v?void 0:v.isMute,Ne=z&&(null==E||null===(g=E.music)||void 0===g?void 0:g.status)&&(null==E||null===(_=E.music)||void 0===_?void 0:_.playUrl.uri)&&!Ie,xe=(0,nl.x)(Se);return u.createElement("div",{className:s()(sl.more,(0,o.Z)({},sl.ableMiniType,D)),onMouseEnter:function(){var e;I("more"),oe("more"),h.emit(null==h||null===(e=h.EVENT)||void 0===e?void 0:e.clarityRel,{hoverSelected:!0})},onMouseLeave:function(){var e;oe(""),h.emit(null==h||null===(e=h.EVENT)||void 0===e?void 0:e.clarityRel,{hoverSelected:!1})},ref:ce,"data-e2e":"video-play-more"},u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(ul.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 36 36",height:36,width:36,needRenderInSSR:!0,className:sl.svgWraper}),u.createElement("div",{ref:xe,className:sl.moreBox,style:{display:"more"!==le?"none":"flex",width:(null==Ce?void 0:Ce.length)<=3&&Ne?"240px":"".concat(72*(null==Ce?void 0:Ce.length)+24,"px")},onMouseEnter:function(){oe("more")},onMouseLeave:function(){oe("",!0)}},(null==U?void 0:U.interactionOpt)>=d.U5.On&&"more"!==le?null:u.createElement(u.Fragment,null,u.createElement("div",{className:sl.moreList,ref:se},el()(Ce).call(Ce,(function(e){var n;return u.createElement("div",{key:e.key,className:s()(sl.itemWrap,e.className),onClick:e.onClick,"data-e2e":null!==(n=be.get(e.key))&&void 0!==n?n:""},u.createElement("div",{className:sl.itemIcon},u.createElement(_n.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(e.icon,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),height:36,width:36,viewBox:"0 0 36 36"})),u.createElement("div",{className:sl.itenDesc},e.desc))}))),Ne&&u.createElement(Ol,{width:null==se||null===(y=se.current)||void 0===y?void 0:y.clientWidth,awemeInfo:E,isLogin:K,loginDispatch:b,isShow:"more"===le,fullScreenTarget:$,loginPanelTarget:J,toast:T,player:w}))))}var Wl=t(38581),Hl=t(22541),zl=t.n(Hl),Gl=t(20804),Kl=0,ql=1,Ql=2;var Xl,Yl=t(94752),Jl=t(72627),$l=t(21793),eo=t(54805),no=t(71701),to="hQs38fGF",lo="w9e0LtUJ",oo="Z2xa55lE",ao="VJBp4t8x",ro=t(65902);function io(){return io=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},io.apply(this,arguments)}var uo=function(e){return u.createElement("svg",io({width:37,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Xl||(Xl=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 13.825c0 .1.002.198.006.296H6.5c0 5.418 8.48 12.013 10.876 13.768.379.277.87.277 1.248 0C21.02 26.134 29.5 19.539 29.5 14.121h-.006c.004-.098.006-.197.006-.296 0-3.762-2.96-6.811-6.613-6.811-.9 0-1.757.185-2.539.52l-1.132 2.462a.365.365 0 00-.007.29l1.302 3.202a.364.364 0 01-.044.352l-2.934 3.967c-.214.289-.662.1-.617-.26l.46-3.728a.363.363 0 00-.066-.257l-2.376-3.29a.364.364 0 01-.06-.294l.581-2.525a6.427 6.427 0 00-2.342-.44c-3.652 0-6.613 3.05-6.613 6.812z",fill:"#fff",opacity:.9})))},co=t(68350),so=37,fo=function(e){var n=e.width,t=void 0===n?so:n,l=e.height,o=void 0===l?so:l,a=e.className;return u.createElement(co.A,(0,ro.Z)({},e,{width:t,height:o,src:globalThis.xssNamespace.douyin_web.filterUrl(uo,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),id:"svg_icon_revoke",defaultWidth:so,defaultHeight:so,viewBox:"0 -1 ".concat(so," ").concat(so),className:a}))};function mo(e){var n=e.onClick,t=e.abtestData,l=(0,u.useState)(!1),o=(0,a.Z)(l,2),r=o[0],i=o[1],c=(0,u.useRef)(null),s=(0,u.useRef)(!1),f=(0,eo.Z)((function(){var e,n,t=null===(e=c.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e);return{enter:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,33],!0)},leave:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[62,86],!0)}}})),m=(0,u.useRef)(null);return(0,u.useEffect)((function(){if(!(0,_.b_)()){var e=m.current,n=function(){var e,n;s.current=!0,null===(e=(n=f()).enter)||void 0===e||e.call(n)},t=function(){var e,n;s.current=!1,null===(e=(n=f()).leave)||void 0===e||e.call(n)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",t),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",t)}}}),[f]),u.createElement("div",{className:to,onClick:n,ref:m,onMouseEnter:function(){(null==t?void 0:t.interactionOpt)>=d.U5.On&&i(!0)}},u.createElement("div",{className:lo},(0,_.b_)()||(null==t?void 0:t.interactionOpt)>=d.U5.On&&!r?u.createElement(fo,null):u.createElement(yn.default,{ref:c,className:oo,data:no,loop:!1,autoplay:!1,onInit:function(){var e,n;(null==t?void 0:t.interactionOpt)>=d.U5.On&&(null===(e=(n=f()).enter)||void 0===e||e.call(n))}})),u.createElement("div",{className:ao},"\u4e0d\u611f\u5174\u8da3"))}var vo=t(66753),po=function(e){var n,t,r,c,Z,A,U,q,X,J,ee,ne,oe,re,ie,fe,me,ve,pe,ge,he,_e,ye,we,Ee,be,Ce,Se,Ie,Ne,xe,Te,Le,Pe,Ze,Oe,Be=e.toggleComment,Ve=e.awemeInfo,je=e.loginUserInfo,We=e.loginDispatch,He=e.deleteCurrentSwiper,ze=e.fullScreenTarget,Ge=e.onAvatarClick,Ke=e.abtestData,qe=e.videoToast,Qe=e.videoReportModalContainer,Xe=e.moreBoxShowList,Ye=e.reportExtraParams,Je=void 0===Ye?{}:Ye,$e=e.recordPreferVideoSwitch,en=e.shortcutKeyDisable,tn=e.canShowAvatarFollowBtn,ln=void 0===tn||tn,on=e.canShowAvatarImBtn,an=void 0!==on&&on,rn=e.canShowAvatarAdBtn,un=void 0!==rn&&rn,cn=e.canShowAvatar,sn=void 0===cn||cn,dn=e.canShowCollection,fn=void 0===dn||dn,mn=e.canShowAvatarTip,vn=void 0===mn||mn,pn=e.className,gn=e.canVideoShareFlip,_n=e.actionFollow,yn=e.actionUnFollow,wn=e.showMusicDetail,kn=e.avatarTipText,bn=e.from,Cn=e.LiveSliderCard,Sn=e.isActive,In=e.isPermanentDislikeBtn,Nn=e.onDislike,xn=e.toast,Tn=e.isInnerFeed,Ln=void 0!==Tn&&Tn,Pn=je.isLogin,Zn=(0,u.useMemo)((function(){return(null==Ve?void 0:Ve.awemeType)===p.ed.XgVideo}),[Ve]),Mn=(0,u.useState)(""),Rn=(0,a.Z)(Mn,2),Dn=Rn[0],On=Rn[1],An=(0,u.useRef)(!1),Fn=(0,u.useRef)(null),Un=(0,u.useRef)(""),Bn=(0,u.useRef)(!1),Vn=(0,u.useRef)(!1),jn=(0,u.useRef)(null),Wn=(0,hn.n)(),Hn=(0,u.useRef)(Wn);Hn.current=Wn;var zn=(Ke||{}).noDisturbV2,Gn=void 0===zn?d.LD.Normal:zn,qn=(0,Yl.N)({noDisturb:Gn}),Qn=qn.isCanShowTip,Yn=qn.updateIsCanShowTip,Jn=(0,u.useState)("icon"),$n=(0,a.Z)(Jn,2),et=$n[0],nt=$n[1],tt=(0,u.useState)(!1),lt=(0,a.Z)(tt,2),ot=lt[0],at=lt[1],rt=(0,u.useState)(!1),it=(0,a.Z)(rt,2),ut=it[0],ct=it[1],st=(0,u.useState)(!1),dt=(0,a.Z)(st,2),ft=dt[0],mt=dt[1],vt=(0,u.useState)(!1),pt=(0,a.Z)(vt,2),gt=pt[0],ht=pt[1],_t=(0,u.useState)(!1),yt=(0,a.Z)(_t,2),wt=yt[0],Et=(yt[1],(0,u.useState)(!1)),kt=(0,a.Z)(Et,2),bt=kt[0],Ct=kt[1],St=(0,u.useState)(!1),It=(0,a.Z)(St,2),Nt=(It[0],It[1]),xt=(0,u.useState)(!1),Tt=(0,a.Z)(xt,2),Lt=Tt[0],Pt=Tt[1],Zt=(0,u.useState)(!1),Mt=(0,a.Z)(Zt,2),Rt=Mt[0],Dt=Mt[1],Ot=(0,u.useState)(!1),At=(0,a.Z)(Ot,2),Ft=At[0],Ut=At[1],Bt=(0,u.useState)(!0),Vt=(0,a.Z)(Bt,2),jt=Vt[0],Ht=Vt[1],zt=((0,u.useRef)(null),function(e){var n,t,l,o,a,r,i,u,c,s,d,f,m,v,p,g,h,_,y;return{author_id:null==e||null===(n=e.authorInfo)||void 0===n?void 0:n.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,compilation_id:null==e||null===(t=e.mixInfo)||void 0===t?void 0:t.mixId,impressionData:null==e?void 0:e.impressionData,awemeId:null==e?void 0:e.awemeId,vduration:null==e||null===(l=e.video)||void 0===l?void 0:l.duration,isH265:(null==e||null===(o=e.video)||void 0===o||null===(a=o.bitRateList)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.isH265)||(null==e||null===(i=e.video)||void 0===i?void 0:i.isH265),qualityType:(null==e||null===(u=e.video)||void 0===u||null===(c=u.bitRateList)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.qualityType)||(null==e||null===(d=e.video)||void 0===d?void 0:d.qualityType),bitRate:(null==e||null===(f=e.video)||void 0===f||null===(m=f.bitRateList)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.bitRate)||(null==e||null===(p=e.video)||void 0===p?void 0:p.bitRate),videoFormat:null==e||null===(g=e.video)||void 0===g?void 0:g.videoFormat,gearName:(null==e||null===(h=e.video)||void 0===h||null===(_=h.bitRateList)||void 0===_||null===(y=_[0])||void 0===y?void 0:y.gearName)||""}}(Ve)),Gt=(0,u.useMemo)((function(){var e=(0,Wt.Z)(Ke,"collection_route"),n=2===e;return 1===e||n?!(!n||je.isLogin)&&jt:jt}),[Ke,je,jt]),Kt=(0,$l.O)({player:Wn,isActive:!0}).inImmersive,qt=((0,u.useContext)(w.v)||{}).globalCommentCount,Xt=(0,Ae.r)({selfUid:null==je||null===(n=je.info)||void 0===n?void 0:n.uid,actionUid:null==Ve||null===(t=Ve.authorInfo)||void 0===t?void 0:t.uid,defaultFollowerStatus:null==Ve||null===(r=Ve.authorInfo)||void 0===r?void 0:r.followerStatus,defaultFollowStatus:null==Ve||null===(c=Ve.authorInfo)||void 0===c?void 0:c.followStatus}),Yt=Xt.followStatus,Jt=Xt.text,$t=(0,Fe.P)({delayDisappear:50,delayShow:50}),el=$t.type,nl=$t.changeType,tl=function(e){var n=e.awemeInfo,t=e.selectType,l=e.abtestData,o=e.isLogin,r=e.canVideoShareFlip,c=e.showDislikeTip,s=(0,hn.n)(),f=(0,u.useState)(!1),m=(0,a.Z)(f,2),v=m[0],p=m[1],g=(0,u.useState)(!1),h=(0,a.Z)(g,2),_=h[0],y=h[1],w=(0,u.useRef)({awemeId:n.awemeId,count:0}),E=(0,u.useRef)(0),k=(0,u.useRef)(null),b=function(e){var n,t,a=e.status,u=e.method;if(r&&!c&&i()(n=[d.Xt.DiggTrigger,d.Xt.EndedTrigger,d.Xt.EndedTriggerpuls]).call(n,l.shareFlip)&&(u!==Kl||l.shareFlip===d.Xt.DiggTrigger)&&(u!==ql||i()(t=[d.Xt.EndedTrigger,d.Xt.EndedTriggerpuls]).call(t,l.shareFlip)))if(a){var s,f=(0,Gl.F)(),m=f.get(),v=m.lastShareTime,g=m.shareCount,h=m.lastShareMethod,_=m.lastFlipTime,w=g,k=zl()(v),b=zl()(_).startOf("date"),C=zl()();if(C.diff(b,"day")>=1&&(m.shareCount=0,w=0,f.set(m)),!o&&!v&&i()(s=[d.Xt.EndedTriggerpuls]).call(s,l.shareFlip))return y(!0),m.shareCount++,m.lastFlipTime=(new Date).getTime(),void f.set(m);if(!o&&h===ke.ShareMethod.Im)return;if(w>=3||!v||C.diff(k,"day")>15)return;0===E.current&&(E.current++,m.lastFlipTime=(new Date).getTime(),f.set(m),p(!0))}else p(!1)};return(0,u.useEffect)((function(){if(r)return k.current=v&&""===t?$()((function(){p(!1)}),1e4):null,function(){clearTimeout(k.current)}}),[v]),(0,u.useEffect)((function(){var e;r&&n.awemeId!==(null===(e=w.current)||void 0===e?void 0:e.awemeId)&&(w.current.awemeId=n.awemeId,w.current.count=0,E.current=0,y(!1),b({status:!1,method:Ql}))}),[n]),(0,u.useEffect)((function(){if(r){var e=function e(){w.current.count++,2===w.current.count&&(b({status:!0,method:ql}),s.off("ended",e))};return s&&s.on("ended",e),function(){s&&s.off("ended",e)}}}),[s]),{canShareFlip:v,handleShareFlip:b,timer:k.current,canAnimation:_}}({awemeInfo:Ve,selectType:el,isLogin:Pn,abtestData:Ke,canVideoShareFlip:gn,showDislikeTip:wt}),ll=tl.canShareFlip,ol=tl.handleShareFlip,al=tl.timer,rl=tl.canAnimation;(0,u.useEffect)((function(){"share_btn"!==Dn&&nl("",!0)}),[Dn]);var il=v.getShortcut({disable:en});!function(e){var n=e.player,t=e.awemeInfo,o=e.inImmersive,a=e.fullScreenTarget,r=e.videoToast,i=e.reportExtraParams,c=(0,u.useRef)(t),s=(0,u.useRef)("");(0,u.useEffect)((function(){var e;s.current="",(null===(e=c.current)||void 0===e?void 0:e.awemeId)!==(null==t?void 0:t.awemeId)&&null!=t&&t.awemeId&&(c.current=t)}),[t]);var d=(0,u.useCallback)((0,O.Z)(F().mark((function e(){var n,l,o,a,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(null==t?void 0:t.shareInfo)||{},o=l.shareLinkDesc,a=l.shareUrl,r=a&&B()(n="".concat(a,"&from=")).call(n,"web_code_link"),e.next=4,(0,K.Rc)(r);case 4:i=e.sent,s.current=o&&o.replace("%s",i);case 6:case"end":return e.stop()}}),e)}))),[null==t?void 0:t.shareInfo]),f=(0,u.useCallback)(function(){var e=(0,O.Z)(F().mark((function e(n){var u,c,f,m;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(null==t||null===(u=t.status)||void 0===u?void 0:u.allowShare)){e.next=3;break}return r("\u8be5\u89c6\u9891\u5df2\u88ab\u9650\u5236\u5206\u4eab"),e.abrupt("return");case 3:if(s.current){e.next=6;break}return e.next=6,d();case 6:(0,j.J)(s.current,{target:(0,W.r)()&&a?a:null}),Q.sendLog("shareVideo",(0,l.Z)({urlParamList:["previous_page"],author_id:null==t||null===(c=t.authorInfo)||void 0===c?void 0:c.uid,group_id:null==t?void 0:t.awemeId,enter_from:(0,H.mo)(),log_pb:null==t?void 0:t.logPb,type:"copy_link",is_full_screen:(0,W.r)()?"1":"0",click_method:null!==(f=null==n?void 0:n.clickMethod)&&void 0!==f?f:"hot_key",tab_name:V.getTabName()||(0,z.Rs)("tab_name")||"",from_follow_list:null!==(m=G.Le.getConfig(G.gI.FromFollowList))&&void 0!==m&&m.tag?"1":"0",aweme_type:"".concat(null==t?void 0:t.awemeType),is_pure:o?"1":"0"},i)),r("\u5df2\u590d\u5236\u5206\u4eab\u94fe\u63a5");case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[d,r,o,t,a]);(0,u.useEffect)((function(){return null==n||n.on("showShareCode",f),function(){null==n||n.off("showShareCode",f)}}),[n,f])}({player:Wn,inImmersive:Kt,awemeInfo:Ve,fullScreenTarget:ze,videoToast:qe,reportExtraParams:Je}),function(e){var n=e.player,t=(0,u.useCallback)((function(e){var n={isUse:!1,expireTime:Number(M()())+2592e5,useHistory:{3:!0}},t=(0,D.$o)(R.LocalStorageKeys.ShortcutKeyTopicInfo);if(e)return t||(t=n),t.isUse=e,void(0,D.qQ)(R.LocalStorageKeys.ShortcutKeyTopicInfo,t);if(t){var l,o=((null===(l=t)||void 0===l?void 0:l.expireTime)||0)-Number(M()()),a=Math.ceil(o/864e5);if(t.isUse||!(o>0)||t.useHistory[a])return;t.useHistory[a]=!0,(0,D.qQ)(R.LocalStorageKeys.ShortcutKeyTopicInfo,t)}else(0,D.qQ)(R.LocalStorageKeys.ShortcutKeyTopicInfo,n)}),[]);(0,u.useEffect)((function(){return null==n||n.on("shortcutTopic",t),function(){null==n||n.off("shortcutTopic",t)}}),[n,t])}({player:Wn}),(0,u.useEffect)((function(){var e=h.listen(h.EVENT.showDisturbLoginPanel,(function(e){Ht(!e)}));return function(){null==e||e()}}),[]);var ul=function(e){var n,t=e.abtestData,l=e.player,o=e.awemeInfo,r=(null==t?void 0:t.interactionOpt)>=d.U5.On,i=(0,u.useState)(!1),c=(0,a.Z)(i,2),s=c[0],f=c[1],m=(0,u.useRef)(!1),v=(0,u.useRef)(null),p=null==o?void 0:o.groupId,g=(0,u.useCallback)((function(e){var n=sessionStorage.getItem("SHOW_WINDOW_VIDEO");return ce()&&!m.current&&(!n||n&&-1===Y()(n).call(n,p))&&(m.current=!0,f(!0),v.current=$()((function(){f(!1)}),e)),function(){clearTimeout(v.current)}}),[s]),h=(0,u.useState)(r&&null!==(n=ue)&&void 0!==n?n:{restrictTimeV1:10,restrictTimeV2:5,showTimeV1:10,showTimeV2:10}),_=(0,a.Z)(h,2),y=_[0],w=_[1];(0,u.useEffect)((function(){var e=sessionStorage.getItem("SHOW_WINDOW_VIDEO"),n=se();if(s){if(n&&n.viewNum){var t={viewNum:Number(null==n?void 0:n.viewNum)+1,closeNum:null==n?void 0:n.closeNum,showTime:null==n?void 0:n.showTime};de("view",t)}else de("view",ae);var l;e?sessionStorage.setItem("SHOW_WINDOW_VIDEO",B()(l="".concat(e,",")).call(l,p)):sessionStorage.setItem("SHOW_WINDOW_VIDEO",p)}}),[s]);var E=function(){sessionStorage.removeItem("SHOW_WINDOW_VIDEO")};(0,u.useEffect)((function(){r?ue||(0,O.Z)(F().mark((function e(){var n,t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.U2({key:null==le||null===(n=le.TccKey)||void 0===n?void 0:n.NewLiveSmallWindow,defaultValue:{restrictTimeV1:10,restrictTimeV2:5,showTimeV1:10,showTimeV2:10}});case 2:t=e.sent,ue=t,w(t);case 5:case"end":return e.stop()}}),e)})))():(0,O.Z)(F().mark((function e(){var n,t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.U2({key:null==le||null===(n=le.TccKey)||void 0===n?void 0:n.NewLiveSmallWindow,defaultValue:{restrictTimeV1:10,restrictTimeV2:5,showTimeV1:10,showTimeV2:10}});case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,u.useEffect)((function(){return window.addEventListener("beforeunload",E),function(){window.removeEventListener("beforeunload",E)}}));var k=(0,u.useCallback)((function(e){(null==e?void 0:e.currentTime)>=(null==y?void 0:y.restrictTimeV2)&&!m.current&&g(1e3*y.showTimeV2)}),[]);return(0,u.useEffect)((function(){var e,n,t,a,r,i=null==o||null===(e=o.authorInfo)||void 0===e||null===(n=e.roomData)||void 0===n?void 0:n.linker_map,u=null==o||null===(t=o.authorInfo)||void 0===t||null===(a=t.roomData)||void 0===a||null===(r=a.owner)||void 0===r?void 0:r.web_rid;if(l&&(!i||null!=i&&i[4])&&u)return null==l||l.on("timeupdate",k),function(){null==l||l.off("timeupdate",k)}}),[k,l]),{showWindow:s,isFirstShow:m}}({abtestData:Ke,player:Hn.current,awemeInfo:Ve}),cl=ul.showWindow,sl=ul.isFirstShow,dl=function(){var e=(0,u.useState)(!1),n=(0,a.Z)(e,2),t=n[0],l=n[1];return{closeWindow:function(){return l(!0)},closeSmallWindow:t}}(),fl=dl.closeWindow,ml=dl.closeSmallWindow,vl=!Zn&&!Lt&&!Rt&&vn&&Qn&&!(0,f.Jt)(Ve),pl=(0,u.useState)(0),gl=(0,a.Z)(pl,2),hl=gl[0],_l=gl[1],yl=function(){var e;if(!1!==(null==Ve||null===(e=Ve.awemeControl)||void 0===e?void 0:e.canShare)){var n,t,l,o;nt("icon"),On("share_btn");var a=In?260:180;_l((null!==(n=null==Wn||null===(t=Wn.root)||void 0===t||null===(l=t.getBoundingClientRect)||void 0===l||null===(o=l.call(t))||void 0===o?void 0:o.height)&&void 0!==n?n:a)-a),nl("share_btn")}al&&clearTimeout(al)},wl=(0,m.hj)(Ve)&&(null==Ve||null===(Z=Ve.authorInfo)||void 0===Z?void 0:Z.roomId)&&(null===(A=(0,f.BD)(Ve))||void 0===A||null===(U=A.lynx_raw_data)||void 0===U?void 0:U.open_url),El=(0,u.useRef)(!1),kl=(0,u.useMemo)((function(){var e,n,t;return null==Ve||null===(e=Ve.authorInfo)||void 0===e||null===(n=e.roomData)||void 0===n||null===(t=n.paid_live_data)||void 0===t?void 0:t.paid_type}),[null==Ve||null===(q=Ve.authorInfo)||void 0===q?void 0:q.roomData]),bl=(0,vo.b)().seasonIds,Cl=(0,u.useMemo)((function(){var e,n,t,l;return null==bl||null===(e=i()(bl))||void 0===e?void 0:e.call(bl,null==Ve||null===(n=Ve.authorInfo)||void 0===n||null===(t=n.roomData)||void 0===t||null===(l=t.episode_extra)||void 0===l?void 0:l.season_id_str)}),[null==Ve||null===(X=Ve.authorInfo)||void 0===X?void 0:X.roomData]),Sl=(0,u.useMemo)((function(){return!((null==Ke?void 0:Ke.liveModalFullplayer)!==d.if.DynamicBg&&(null==Ke?void 0:Ke.liveModalFullplayer)!==d.if.EntranceStrengthen&&(null==Ke?void 0:Ke.liveModalFullplayer)!==d.if.WithoutAction&&(null==Ke?void 0:Ke.liveModalFullplayer)!==d.if.Normal||bn!==g.lT.Follow&&bn!==g.lT.Recommend||Ln||Cl||kl)}),[bn,null==Ke?void 0:Ke.liveModalFullplayer,Ln,Cl,kl]);return u.createElement("div",{className:s()(E,pn,(0,o.Z)({},k,(0,_.GP)())),ref:Fn},sn&&u.createElement(u.Fragment,null,null!=Ve&&null!==(J=Ve.authorInfo)&&void 0!==J&&null!==(ee=J.roomData)&&void 0!==ee&&null!==(ne=ee.owner)&&void 0!==ne&&ne.web_rid||wl?u.createElement("div",{className:P},u.createElement(nn,{player:Wn,statusText:Jt,loginUserInfo:je,awemeInfo:Ve,logInfo:zt,isLogin:Pn,loginDispatch:We,fullScreenTarget:ze,isFollowClickedRef:An,onAvatarClick:Ge,shortcut:il,reportExtraParams:Je,ableMiniType:!0,isOpenKeyHotEvent:!0,isFirstLive:2===(null==Ve||null===(oe=Ve.authorInfo)||void 0===oe||null===(re=oe.roomData)||void 0===re||null===(ie=re.episode_extra)||void 0===ie||null===(fe=ie.mod)||void 0===fe?void 0:fe.episode_stage),isMiniWindow:cl&&!ml,isMiniWindowPlay:sl.current&&!Ft,abtestData:Ke,openLiveModal:Sl,liveModalType:bn===g.lT.Recommend?"recommend":"follow",isEcomLive:1===(null==Ve||null===(me=Ve.authorInfo)||void 0===me||null===(ve=me.roomData)||void 0===ve||null===(pe=ve.ecom_data)||void 0===pe||null===(ge=pe.room_cart_v2)||void 0===ge?void 0:ge.show_cart)||wl}),cl&&!ml&&bn&&(null==Ve||null===(he=Ve.authorInfo)||void 0===he||null===(_e=he.roomData)||void 0===_e||null===(ye=_e.owner)||void 0===ye?void 0:ye.web_rid)&&u.createElement(Me,{LiveSliderCard:Cn,awemeInfo:Ve,abtestData:Ke,deleteCurrentSwiper:He,isLogin:Pn,from:bn,isClose:fl,player:Wn,isActive:Sn,onClickRoom:function(){Ut(!0)}})):u.createElement(Re.C,{type:"left",showTip:vl&&ot&&jt,setShowTip:function(e){at(e),e&&vl&&((0,y.q)(Gn),Yn())},hoverShow:jt,content:u.createElement("div",{className:I},u.createElement(u.Fragment,null,null!=kn?kn:"\u8fdb\u5165\u4f5c\u8005\u4e3b\u9875",(null===(we=il.avatar)||void 0===we?void 0:we.badgeText)&&u.createElement("span",{className:N},il.avatar.badgeText)))},u.createElement(Ue.Z,{player:Wn,loginUserInfo:je,actionFollow:_n,actionUnFollow:yn,awemeInfo:Ve,isLogin:Pn,loginDispatch:We,fullScreenTarget:ze,isFollowClickedRef:An,onAvatarClick:Ge,shortcut:il,reportExtraParams:Je,ableMiniType:!0,isShowTip:!0,isShowKeyHotTip:!0,followStatus:Yt,noDisturb:Gn,followBtnMouseEnter:function(){return Pt(!0)},followBtnMouseLeave:function(){return Pt(!1)},imBtnMouseEnter:function(){return Dt(!0)},imBtnMouseLeave:function(){return Dt(!1)},showImBtn:an,showFollowBtn:ln,showAdBtn:un,loginPanelTarget:jn.current,toast:xn,abtestData:Ke}))),u.createElement(Re.C,{type:"left",tipClassName:x,showTip:ut&&Qn&&jt,setShowTip:function(e){ct(e),e&&((0,y.q)(Gn),Yn())},hoverShow:jt,content:u.createElement("div",{className:I},Bn.current?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e",(null===(Ee=il.like)||void 0===Ee?void 0:Ee.badgeText)&&u.createElement("span",{className:N},null===(be=il.like)||void 0===be?void 0:be.badgeText))},u.createElement(Xn,{loginPanelTarget:jn.current,toast:qe,awemeInfo:Ve,isLogin:Pn,loginUserInfo:je,loginDispatch:We,fullScreenTarget:ze,reportExtraParams:(0,l.Z)((0,l.Z)({},Je),{},{relation:null!==(Ce=null==Je?void 0:Je.relation)&&void 0!==Ce?Ce:String(Yt)}),ableMiniType:!0,onLottieComplete:function(){return"digg"===Un.current&&ct(!0)},onDiggSuccessCb:function(e){return"digg"===(null==e?void 0:e.action)&&ol({status:!0,method:Kl})},recordPreferVideoSwitch:$e,refIsDigged:Bn,abtestData:Ke})),u.createElement(Re.C,{type:"left",tipClassName:x,showTip:ft&&Qn&&jt,setShowTip:function(e){mt(e),e&&((0,y.q)(Gn),Yn())},hoverShow:jt,content:u.createElement("div",{className:I},"\u8bc4\u8bba",(null===(Se=il.comment)||void 0===Se?void 0:Se.badgeText)&&u.createElement("span",{className:N},il.comment.badgeText))},u.createElement(En,{count:(0,Kn.A)({count:Number(qt||0),displayWord:"\u62a2\u9996\u8bc4"}),type:"comment",toggleComment:Be,awemeInfo:Ve,reportExtraParams:(0,l.Z)((0,l.Z)({},Je),{},{relation:null!==(Ie=null==Je?void 0:Je.relation)&&void 0!==Ie?Ie:String(Yt)}),ableMiniType:!0,onLottieComplete:function(){return"comment"===Un.current&&mt(!0)},abtestData:Ke,loginDispatch:We})),fn&&u.createElement(Re.C,{type:"left",tipClassName:x,showTip:gt&&Qn&&jt,setShowTip:function(e){ht(e),e&&((0,y.q)(Gn),Yn())},hoverShow:Gt,content:u.createElement("div",{className:I},Vn.current?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf",(null===(Ne=il.collect)||void 0===Ne?void 0:Ne.badgeText)&&u.createElement("span",{className:N},null===(xe=il.collect)||void 0===xe?void 0:xe.badgeText))},u.createElement(Qt,{loginPanelTarget:jn.current,awemeInfo:Ve,isLogin:Pn,loginUserInfo:je,loginDispatch:We,fullScreenTarget:ze,toast:qe,shortcut:il,ableMiniType:!0,reportExtraParams:(0,l.Z)((0,l.Z)({},Je),{},{relation:null!==(Te=null==Je?void 0:Je.relation)&&void 0!==Te?Te:String(Yt)}),onLottieComplete:function(){return"collection"===Un.current&&ht(!0)},refIsCollected:Vn,abtestData:Ke})),u.createElement("div",{className:b,onMouseEnter:yl,onClick:yl,onMouseLeave:function(){null!=El&&El.current||(nl(""),ol({status:!1,method:Ql}))}},u.createElement(Re.C,{type:"left",tipClassName:x,showTip:!1,setShowTip:function(e){Nt(e),e&&(0,y.q)(Gn)},hoverShow:jt,content:u.createElement("div",{className:I},"\u5206\u4eab",(null===(Le=il.share)||void 0===Le?void 0:Le.badgeText)&&u.createElement("span",{className:N},il.share.badgeText))},u.createElement(Wl.Z,{shortcut:il,scene:"video",ableMiniType:!0,canShareFlip:ll,canAnimation:rl,disableShare:!1===(null==Ve||null===(Pe=Ve.awemeControl)||void 0===Pe?void 0:Pe.canShare),abtestData:Ke,awemeInfo:Ve})),u.createElement(De.ZP,{toast:qe,shareShowMethod:et,awemelogPb:null==Ve?void 0:Ve.logPb,awemeInfo:Ve,className:s()(C,S),isLogin:Pn,fullScreenTarget:ze,loginDispatch:We,hidden:"share_btn"!==el,abtestData:Ke,handleClose:function(){return nl("")},shortcutObj:il,canShareFlip:ll,onMouseEnter:function(){},onMouseLeave:function(){},reportExtraParams:(0,l.Z)({is_pure:Kt?"1":"0"},Je),shareeListHeight:hl,onFriendSearching:function(e){El.current=e}})),In&&u.createElement(Re.C,{type:"left",tipClassName:x,showTip:bt&&Qn&&jt,setShowTip:function(e){Ct(e),e&&((0,y.q)(Gn),Yn())},hoverShow:jt,content:u.createElement("div",{className:I},"\u4e0d\u611f\u5174\u8da3",(null===(Ze=il.dislike)||void 0===Ze?void 0:Ze.badgeText)&&u.createElement("span",{className:N},null===(Oe=il.dislike)||void 0===Oe?void 0:Oe.badgeText))},u.createElement(mo,{onClick:Nn,abtestData:Ke})),u.createElement(Re.C,{type:"left",tipClassName:s()(x,T),showTip:wt&&!In&&jt,setShowTip:function(){},hoverShow:jt,content:u.createElement("div",{className:L},"\u5185\u5bb9\u4e0d\u559c\u6b22\uff1f\u8fd9\u91cc\u8fdb\u884c\u53cd\u9988\u54e6")},u.createElement(jl,{loginPanelTarget:jn.current,player:Wn,singleBox:Dn,setSingleBox:On,awemeInfo:Ve,loginUserInfo:je,isLogin:Pn,logInfo:zt,loginDispatch:We,deleteCurrentSwiper:He,onDislike:Nn,fullScreenTarget:ze,isFollowClickedRef:An,toast:qe,videoReportModalContainer:Qe,ableMiniType:!0,showList:Xe,abtestData:Ke,actionUnFollow:yn,showMusicDetail:wn,isPermanentDislikeBtn:In,isInnerFeed:Ln,reportExtraParams:Je})),u.createElement("div",{className:"disturb-login-panel",ref:jn}))},go=function(e){var n=(0,Jl.N)();return u.createElement(Oe.k,{componentName:"Interaction",Slardar:n},u.createElement(po,e))}},84214:function(e,n,t){t.r(n),t.d(n,{MiniWinMask:function(){return Nn},MiniWinMaskInner:function(){return In}});var l,o=t(65902),a=t(32781),r=t(67161),i=t(30906),u=t(65146),c=t(85792),s=t.n(c),d=t(53864),f=t(79705),m=t.n(f),v=t(72603),p=t(71116),g=t(81842),h=t(27448);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},_.apply(this,arguments)}var y,w=function(e){return d.createElement("svg",_({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 10.056c0-.952.69-1.722 1.543-1.722h2.143c.852 0 1.543.77 1.543 1.722v20.727c0 .95-.691 1.722-1.543 1.722h-2.143c-.852 0-1.543-.771-1.543-1.722V10.055zm14.771 0c0-.952.691-1.722 1.543-1.722h2.143c.852 0 1.543.77 1.543 1.722v20.727c0 .95-.69 1.722-1.543 1.722h-2.143c-.852 0-1.543-.771-1.543-1.722V10.055z",fill:"#fff"})))};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},E.apply(this,arguments)}var k,b=function(e){return d.createElement("svg",E({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y||(y=d.createElement("path",{d:"M10 11.57c0-2.103 0-3.155.42-3.729a2.03 2.03 0 011.527-.84c.692-.036 1.525.557 3.191 1.743l11.515 8.203c1.303.928 1.955 1.392 2.189 1.977.205.512.21 1.086.017 1.603-.222.59-.864 1.069-2.147 2.026l-11.515 8.593c-1.679 1.253-2.518 1.88-3.218 1.853a2.028 2.028 0 01-1.55-.83C10 31.592 10 30.516 10 28.365V11.569z",fill:"#fff",fillOpacity:.9})))},C={wrap:"pA70_sUA",fullbox:"XLJE9vft",hover:"rCWvtvqJ",svg:"ofyNyS77",intraction:"i49Nzemq",hide:"CLbEMM2v",playBox:"tXMuVVC2",playSvg:"HLu5qwVA",playSwitchContainer:"xcYYu3r5"},S=t(13795),I=new S.hD({pauseVideo:{eventName:"pause_video",params:{enter_from:"",mute_remind:"none",click_method:"click",is_small_window:"0"}},smallWindowLoginNotify:{eventName:"small_window_login_notify",params:{enter_from:"",enter_method:""}}}),N=t(64408),x=t(11227),T=t.n(x),L=t(8e3),P=t.n(L),Z=t(5594),M=t.n(Z),R=t(52985);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},D.apply(this,arguments)}var O=function(e){return d.createElement("svg",D({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),k||(k=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.238 10.435c1.22-1.739 3.225-2.657 5.43-2.657 4.198 0 7.69 3.642 7.69 7.972v0c0 .124-.002.217-.003.286a.651.651 0 00.004.157c-.016.91-.174 1.663-.453 2.658-.158.178-.306.514-.452.885-.232.36-.32.534-.453.886-.11.184-.225.37-.345.555-1.14 1.761-2.697 3.52-4.249 5.072-2.334 2.35-4.703 4.302-5.737 5.155-.287.236-.471.388-.523.44-.368.368-.736.378-1.104.378h-.03c-.757 0-1.135-.378-1.513-.756a3.501 3.501 0 00-.212-.177c-1.148-.846-3.74-2.92-6.17-5.418-1.84-1.875-3.61-4.022-4.58-6.123-.378-.756-.85-2.556-.872-3.555.009-.008.007-.056.005-.152-.002-.07-.005-.166-.005-.29 0-4.333 3.49-7.973 7.691-7.973 2.2 0 4.207.918 5.881 2.657z",fill:"#fff",fillOpacity:.9})))},A="UiMvV6ra",F="ja_hCuZF",U="RZ6vLxPx",B="TUGmQbud",V="vXVvKZUn",j="oK7KO2kL",W="QsmLBHTJ",H="kf8e5BQO",z="RFKFmdjF",G="mflhmW4r",K=t(9909),q=t(85340),Q=t(15728),X=t(41168),Y=t(25546),J=t(35667),$=t(53630);function ee(e){var n,t,l,o,a,r=e.awemeInfo,i=e.isLogin,c=e.loginUserInfo,s=e.loginDispatch,f=e.reportExtraParams,g=void 0===f?{}:f,h=e.ableMiniType,_=void 0!==h&&h,y=e.recordPreferVideoSwitch,w=void 0!==y&&y,E=e.onDiggSuccessCb,k=e.otherLoginMethod,b=(0,J.n)(),C=(0,d.useRef)(!1),S=(0,d.useRef)(!1),I=(0,q.P)({selfUid:null==c||null===(n=c.info)||void 0===n?void 0:n.uid,awemeId:null==r?void 0:r.awemeId,defaultCount:null==r||null===(t=r.stats)||void 0===t?void 0:t.diggCount,defaultDiggStatus:null!=r&&r.userDigged?R.gZ.Digged:R.gZ.UnDigg}),x=I.count,L=I.diggStatus,Z=(0,Q._)({diggState:L===R.gZ.Digged}),D=Z.resetUsedKeyDownTime,ee=Z.resetDiggTime,ne=Z.checkIsCancelDigg,te=(0,X.i)({selfUid:null==c||null===(l=c.info)||void 0===l?void 0:l.uid,isLogin:i,awemeInfo:r,onLoginSuccess:(a=(0,N.Z)(M().mark((function e(){var n,t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==s?void 0:s({type:"updateUserInfo"});case 2:if("video_detail"!==(0,v.vM)()){e.next=5;break}return e.next=5,(0,Y.a8)({secUid:null==r||null===(n=r.authorInfo)||void 0===n?void 0:n.secUid,uid:null==r||null===(t=r.authorInfo)||void 0===t?void 0:t.uid});case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),reportExtraParams:g,defaultDiggStatus:null!=r&&r.userDigged?R.gZ.Digged:R.gZ.UnDigg,success:E,otherLoginMethod:k}),le=te.digg,oe=te.unDigg,ae=(0,d.useCallback)((function(e){if(!C.current){if(S.current=!0,w){var n,t,l=p.Le.getConfig(p.gI.AwemePcRecRawData)||{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},o=l.videoPrefer.like;!T()(n=P()(o).call(o,(function(e,n){return n%2==0}))).call(n,null==r?void 0:r.groupId)&&o.push(null==r?void 0:r.groupId,null==r||null===(t=r.authorInfo)||void 0===t?void 0:t.uid),p.Le.setConfig(p.gI.AwemePcRecRawData,l)}L===R.gZ.Digged?oe({clickMethod:e}):le({clickMethod:e})}}),[L,le,oe,w]);(0,d.useEffect)((function(){L&&ee()}),[L]),(0,d.useEffect)((function(){if(b){var e=function(e){var n=e.clickMethod;L?L&&"hot_key"!==n||(ne()&&ae(n),D()):ae(n)};return null==b||b.on("onStar",e),function(){null==b||b.off("onStar",e)}}}),[b,ae,null==r?void 0:r.awemeId,L]);var re=(0,d.useRef)(null);return d.createElement("div",{className:m()(A,z,(o={},(0,u.Z)(o,F,L),(0,u.Z)(o,G,_),o)),onClick:function(e){null==b||b.emit("shortcutTopic"),ae(),e.stopPropagation()},ref:re},d.createElement("div",{className:U},d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(O,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 40 40",className:m()(B,(0,u.Z)({},V,L))})),d.createElement("div",{className:m()(W,j,H)},(0,$.A)({count:x,displayWord:"\u8d5e"})))}var ne,te=t(43088),le=t(50799),oe=t(25902),ae=t(9191),re=new S.hD({clickFavoriteVideo:{eventName:"click_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}}}),ie="hPoDqegq",ue="Y9phBKRG",ce="tdcN8bCn",se="mkWXe1mv",de="z8s6N0J4",fe="XBphmBOi",me="QYwBm5q5",ve="i984SKwj";function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},pe.apply(this,arguments)}var ge=function(e){return d.createElement("svg",pe({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ne||(ne=d.createElement("path",{d:"M18.344 8.064a1.75 1.75 0 013.311 0l2.592 7.13 7.393.332c1.633.073 2.303 2.192 1.023 3.239l-5.791 4.738 1.977 7.335c.437 1.62-1.315 2.93-2.678 2.002L20 28.639l-6.171 4.2c-1.363.929-3.116-.38-2.679-2.001l1.978-7.335-5.792-4.738c-1.279-1.047-.61-3.166 1.024-3.24l7.393-.332 2.591-7.129z",fill:"#fff",fillOpacity:.9})))},he=t(34590),_e=t(52369),ye=t(14655);function we(e){var n,t,l,o,a,r=e.awemeInfo,c=e.isLogin,s=e.loginUserInfo,f=e.loginDispatch,p=e.toast,g=e.ableMiniType,h=void 0!==g&&g,_=e.reportExtraParams,y=void 0===_?{}:_,w=e.refIsCollected,E=void 0===w?{}:w,k=e.lowEndOpt,b=e.otherLoginMethod,C=e.ToastEl,S=(0,d.useRef)(!1),I=(0,d.useRef)(!1),x=(0,d.useRef)(null),T=(0,J.n)(),L=(0,_e.p)({selfUid:null==s||null===(n=s.info)||void 0===n?void 0:n.uid,awemeInfo:r,defaultCollectStatus:null!=r&&r.userCollected?R.c.Collected:R.c.Uncollected,isLogin:c,reportExtraParams:y,onLoginSuccess:(a=(0,N.Z)(M().mark((function e(){var n,t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==f||f({type:"updateUserInfo"}),"video_detail"!==(0,v.vM)()){e.next=4;break}return e.next=4,(0,Y.a8)({secUid:null==r||null===(n=r.authorInfo)||void 0===n?void 0:n.secUid,uid:null==r||null===(t=r.authorInfo)||void 0===t?void 0:t.uid});case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),success:function(e){"collect"===e.action&&(p?p(R.a$.CollectSuccess):he.F.info(R.a$.CollectSuccess,C.current))},fail:function(e){var n=e.statusCode;n!==te.ERROR_CODE.ERROR_USER_UNLOGIN&&(n!==te.ERROR_CODE.ERROR_COLLECT_TOO_FAST?n!==te.ERROR_CODE.ERROR_COLLECT_RESTRICTED?p?p(R.a$.CollectFail):he.F.info(R.a$.CollectFail,C.current):p?p(R.a$.CollectBan):he.F.info(R.a$.CollectBan,C.current):p?p(R.a$.TooFast):he.F.info(R.a$.TooFast,C.current))},otherLoginMethod:b}),P=L.unCollect,Z=L.collect,D=(0,ye.u)({selfUid:null==s||null===(t=s.info)||void 0===t?void 0:t.uid,awemeId:null==r?void 0:r.awemeId,defaultCollectStatus:null!=r&&r.userCollected?R.c.Collected:R.c.Uncollected,defaultCount:null==r||null===(l=r.stats)||void 0===l?void 0:l.collectCount}),O=D.collectStatus,A=D.count,F=function(e){var n,t,l=(e||{}).clickMethod,o=void 0===l?"icon":l;S.current&&!k||(I.current=!0,O===R.c.Collected?re.sendLog("clickCancelFavoriteVideo",(0,i.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==r||null===(n=r.authorInfo)||void 0===n?void 0:n.uid,group_id:null==r?void 0:r.awemeId,log_pb:null==r?void 0:r.logPb,enter_from:(0,v.mo)(),is_full_screen:(0,oe.r)()?"1":"0",tab_name:le.getTabName()||(0,ae.Rs)("tab_name")||""},y)):re.sendLog("clickFavoriteVideo",(0,i.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==r||null===(t=r.authorInfo)||void 0===t?void 0:t.uid,group_id:null==r?void 0:r.awemeId,log_pb:null==r?void 0:r.logPb,enter_from:(0,v.mo)(),is_full_screen:(0,oe.r)()?"1":"0",click_method:o,tab_name:le.getTabName()||(0,ae.Rs)("tab_name")||""},y)),null==T||T.emit("shortcutTopic"),O===R.c.Collected?P({clickMethod:o}):Z({clickMethod:o}))};return(0,d.useEffect)((function(){return null==T||T.on("onCollect",F),function(){null==T||T.off("onCollect",F)}}),[T,F]),(0,d.useEffect)((function(){E.current=O}),[E,O]),d.createElement("div",{className:m()(ie,(o={},(0,u.Z)(o,ve,h),(0,u.Z)(o,me,!0),o)),onClick:function(e){F(),e.stopPropagation()},ref:x},d.createElement("div",{className:ce},d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(ge,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 40 40",className:m()(se,(0,u.Z)({},de,O))})),d.createElement("div",{className:m()(ue,fe)},(0,$.A)({count:A,displayWord:"\u6536\u85cf"})))}var Ee,ke,be,Ce=t(353),Se=t(13971),Ie=t(68393),Ne="lTjvmdov",xe="aODabC3b",Te="Rgrni4nZ";function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Le.apply(this,arguments)}var Pe,Ze,Me,Re=function(e){return d.createElement("svg",Le({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ee||(Ee=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.332 14.667h4.67a.8.8 0 01.626 1.3l-2.336 2.92a.8.8 0 01-1.25 0l-2.335-2.92a.8.8 0 01.625-1.3zM6.998 26.334h4.671a.8.8 0 00.625-1.3l-2.336-2.92a.8.8 0 00-1.249 0l-2.335 2.92a.8.8 0 00.624 1.3z",fill:"#EDEAE9"})),ke||(ke=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 9c-4.788 0-8.864 3.06-10.375 7.333a1 1 0 11-1.885-.666C9.524 10.619 14.338 7 20 7c5.661 0 10.475 3.619 12.26 8.667a1 1 0 11-1.886.666C28.864 12.06 24.788 9 20 9zM8.35 23.057a1 1 0 011.275.61C11.135 27.94 15.212 31 20 31s8.863-3.06 10.374-7.333a1 1 0 111.886.666C30.475 29.381 25.66 33 20 33c-5.662 0-10.476-3.619-12.26-8.667a1 1 0 01.61-1.276z",fill:"#EDEAE9"})),be||(be=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.12 15A1.12 1.12 0 0016 16.12v6.56a1.12 1.12 0 102.24 0v-6.56A1.12 1.12 0 0017.12 15zm4.8 0a1.12 1.12 0 00-1.12 1.12v6.56a1.12 1.12 0 102.24 0v-6.56A1.12 1.12 0 0021.92 15z",fill:"#EDE9E9"})))};function De(){return De=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},De.apply(this,arguments)}var Oe=function(e){return d.createElement("svg",De({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Pe||(Pe=d.createElement("path",{d:"M24.311 21.199a1.451 1.451 0 000-2.398l-4.708-3.213c-.964-.657-2.27.033-2.27 1.199v6.426c0 1.166 1.306 1.856 2.27 1.199l4.708-3.213z",fill:"#EDE9E9"})),Ze||(Ze=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.332 14.667h4.67a.8.8 0 01.626 1.3l-2.336 2.92a.8.8 0 01-1.25 0l-2.335-2.92a.8.8 0 01.625-1.3zM6.998 26.334h4.671a.8.8 0 00.625-1.3l-2.336-2.92a.8.8 0 00-1.249 0l-2.335 2.92a.8.8 0 00.624 1.3z",fill:"#EDEAE9"})),Me||(Me=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 9c-4.788 0-8.864 3.06-10.375 7.333a1 1 0 11-1.885-.666C9.524 10.619 14.338 7 20 7c5.661 0 10.475 3.619 12.26 8.667a1 1 0 11-1.886.666C28.864 12.06 24.788 9 20 9zM8.35 23.057a1 1 0 011.275.61C11.135 27.94 15.212 31 20 31s8.863-3.06 10.374-7.333a1 1 0 111.886.666C30.475 29.381 25.66 33 20 33c-5.662 0-10.476-3.619-12.26-8.667a1 1 0 01.61-1.276z",fill:"#EDEAE9"})))},Ae=t(81762),Fe=function(e){var n=e.autoPlayInit,t=e.player,l=e.isActive,o=e.playNextFunc,r=e.ablePlayNext,i=(0,d.useState)(Boolean(n)),u=(0,a.Z)(i,2),c=u[0],s=u[1],f=(0,d.useCallback)((function(e){var n=e.isOn;p.Le.setConfig(p.gI.InnerAutoPlay,null),(0,Se.qQ)(Ce.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,n?"1":"0"),null==t||t.emit(Ae.B.UpdateAutoPlaySwitch,{isOn:n}),null==t||t.emit(Ae.B.UpdateAutoPlay,{index:n?0:2}),s((function(e){return!e}))}),[t]),m=(0,d.useCallback)((function(){var e,n=t.getPlugin("AutoPlaySettingPlugin");o&&null!=n&&null!==(e=n.config)&&void 0!==e&&e.nextAutoPlay&&0===(null==n?void 0:n.playeNextWeightNum)&&r?((0,Ie.i0)(Ie.CK.Auto),null==o||o({from:"auto"})):(t.replay(),t.replayed=!0)}),[o,t,r]);return(0,d.useEffect)((function(){if(t&&l&&m)return t.replayed=!1,t.on("ended",m),function(){t.off("ended",m)}}),[t,l,m]),d.createElement("div",{className:Ne,onClick:function(e){f({isOn:!c}),e.stopPropagation()}},c?d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Re,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 40 40",className:xe}):d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Oe,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 40 40",className:xe}),d.createElement("div",{className:Te},c?"\u5173\u95ed\u8fde\u64ad":"\u5f00\u542f\u8fde\u64ad"))},Ue=t(68595),Be=t.n(Ue),Ve=t(97876),je=t(88381),We=t(68746),He=t(18362),ze=t(25446),Ge=t(31757),Ke=new S.hD({smallWindowOps:{eventName:"small_window_ops",params:{action:""}}}),qe="LZcoNDch",Qe="ctTncSpS",Xe="B0QoyLwI",Ye="bUVRTHrk",Je="USNm23rS",$e="rEPHmAgU",en="lUAa_kV4",nn="yHsX3nBa",tn="gsouc0UB",ln="E8OFWQ_W",on=t(9058),an=d.memo((function(e){var n=e.className,t=e.isActive,l=e.abtestData,o=e.mouseHandler,r=e.electronWarpRef,i=(0,d.useState)(!1),u=(0,a.Z)(i,2),c=u[0],f=u[1],v=(0,d.useState)(!1),p=(0,a.Z)(v,2),g=p[0],h=p[1],_=(0,d.useState)(!1),y=(0,a.Z)(_,2),w=y[0],E=y[1],k=d.useCallback((function(e){Be().app.minimize(),e.stopPropagation(),Ke.sendLog("smallWindowOps",{action:"minimize"})}),[]),b=d.useCallback((function(e){Ve.emit(Ve.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_bar"}),e.stopPropagation()}),[]),C=d.useCallback((function(e){Be().app.setAlwaysOnTop(!c),f((function(e){return!e})),e.stopPropagation(),null==o||o(),Ke.sendLog("smallWindowOps",{action:"pin"})}),[c]);return(0,d.useEffect)((function(){s()((function(){Be().app.isAlwaysOnTop().then((function(e){var n=e.data;f(n)}))}),100)}),[t]),d.createElement("div",{className:m()(qe,n)},d.createElement("div",{ref:r,className:m()(en)}),d.createElement("div",{className:nn},d.createElement(on.C,{content:d.createElement("div",{className:m()(tn)},"\u5927\u7a97\u6a21\u5f0f",Boolean(null==l?void 0:l.fullMiniWindow)&&d.createElement("span",{className:ln},"N")),type:"bottom",showTip:g,setShowTip:h,tipClassName:null!=l&&l.fullMiniWindow?$e:Je},d.createElement("div",{onMouseOut:function(){h(!1)},onMouseOver:function(){h(!0)},className:m()(Qe,Xe),onClick:function(e){Ke.sendLog("smallWindowOps",{action:"zoom"}),b(e)}},d.createElement(K.Z,{className:Ye,width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(He.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}))),d.createElement(on.C,{content:c?"\u53d6\u6d88\u7f6e\u9876":"\u7a97\u53e3\u7f6e\u9876",type:"bottom",showTip:w,setShowTip:E,tipClassName:Je},d.createElement("div",{className:Qe,onClick:C,onMouseOut:function(){E(!1)},onMouseOver:function(){E(!0)}},c?d.createElement(K.Z,{className:Ye,width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(Ge.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}):d.createElement(K.Z,{className:Ye,width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(ze.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}))),d.createElement("div",{className:Qe,onClick:k},d.createElement(K.Z,{className:Ye,width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(je.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})),d.createElement("div",{className:Qe,onClick:function(e){Ke.sendLog("smallWindowOps",{action:"close"}),b(e)}},d.createElement(K.Z,{className:Ye,width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(We.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}))))})),rn=t(76569),un=t.n(rn),cn=t(96716),sn=t(12338),dn="L4syec9W",fn="TbgRse7v",mn="BFqK3oLt",vn="Lq77S7Wi",pn="X63OaXjr",gn="tBCCJyJk",hn=function(e){var n=e.enterMethod;I.sendLog("smallWindowLoginNotify",{enter_from:(0,v.vM)(),enter_method:n})};function _n(e){var n,t,l,o,a=e.type,r=e.setIsShowGuide,i=e.loginDispatch,u=e.loginUserInfo,c=e.awemeInfo,f=e.reportExtraParams,m=e.toast,p=(0,cn.x)(un()(hn).call(hn,null,{enterMethod:"digg"===a?"like":"favorite_video"})),g=(0,X.i)({selfUid:null==u||null===(n=u.info)||void 0===n?void 0:n.uid,isLogin:!1,awemeInfo:c,onLoginSuccess:(l=(0,N.Z)(M().mark((function e(){var n,t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==i?void 0:i({type:"updateUserInfo"});case 2:if("video_detail"!==(0,v.vM)()){e.next=5;break}return e.next=5,(0,Y.a8)({secUid:null==c||null===(n=c.authorInfo)||void 0===n?void 0:n.secUid,uid:null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid});case 5:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),reportExtraParams:f,defaultDiggStatus:null!=c&&c.userDigged?R.gZ.Digged:R.gZ.UnDigg,teaEvtParams:{is_small_window:1}}),h=g.digg,_=(0,_e.p)({selfUid:null==u||null===(t=u.info)||void 0===t?void 0:t.uid,awemeInfo:c,defaultCollectStatus:null!=c&&c.userCollected?R.c.Collected:R.c.Uncollected,isLogin:!1,reportExtraParams:f,onLoginSuccess:(o=(0,N.Z)(M().mark((function e(){var n,t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i||i({type:"updateUserInfo"}),"video_detail"!==(0,v.vM)()){e.next=4;break}return e.next=4,(0,Y.a8)({secUid:null==c||null===(n=c.authorInfo)||void 0===n?void 0:n.secUid,uid:null==c||null===(t=c.authorInfo)||void 0===t?void 0:t.uid});case 4:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),success:function(e){"collect"===e.action&&(m?m(R.a$.CollectSuccess):sn.F.info(R.a$.CollectSuccess))},fail:function(e){var n=e.statusCode;n!==te.ERROR_CODE.ERROR_USER_UNLOGIN&&(n!==te.ERROR_CODE.ERROR_COLLECT_TOO_FAST?n!==te.ERROR_CODE.ERROR_COLLECT_RESTRICTED?m?m(R.a$.CollectFail):sn.F.info(R.a$.CollectFail):m?m(R.a$.CollectBan):sn.F.info(R.a$.CollectBan):m?m(R.a$.TooFast):sn.F.info(R.a$.TooFast))},teaEvtParams:{is_small_window:1}}),y=_.collect;return(0,d.useEffect)((function(){var e,n=function(e){e.stopPropagation()};return Ve.emit(Ve.EVENT.videoStopPlayNext),null===(e=document)||void 0===e||e.addEventListener("keydown",n,!0),function(){var e;Ve.emit(Ve.EVENT.videoRemoveStopPlayNext),null===(e=document)||void 0===e||e.removeEventListener("keydown",n,!0)}}),[]),d.createElement("div",{className:dn,ref:p},d.createElement("div",{className:fn},d.createElement("div",{className:mn},"digg"===a?"\u767b\u5f55\u540e\u5373\u53ef\u70b9\u8d5e":"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf"),d.createElement("div",{className:vn},d.createElement("button",{type:"button",onClick:function(){r(!1)},className:pn},"\u7ee7\u7eed\u89c2\u770b"),d.createElement("button",{type:"button",onClick:function(){Ve.emit(Ve.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_bar"}),s()((function(){"digg"===a?h():y()}),50)},className:gn},"\u9a6c\u4e0a\u767b\u5f55"))))}var yn=t(66028),wn=t(15919),En=t(72627),kn=t(96533),bn=t(40044),Cn=["abtestData"],Sn=function(e){var n,t,l,o,a,r,c=e.abtestData,s=e.isPlay,f=e.awemeInfo,v=e.loginUserInfo,p=e.loginDispatch,_=e.reportExtraParams,y=void 0===_?{}:_,E=e.recordPreferVideoSwitch,k=e.player,S=e.isActive,I=e.setType,N=e.setIsShowGuide,x=e.hide,T=e.setIsHover,L=e.playNextFunc,P=e.ablePlayNext,Z=e.maskRef,M=v.isLogin,R=(0,kn.r)({selfUid:null==v||null===(n=v.info)||void 0===n?void 0:n.uid,actionUid:null==f||null===(t=f.authorInfo)||void 0===t?void 0:t.uid,defaultFollowerStatus:null==f||null===(l=f.authorInfo)||void 0===l?void 0:l.followerStatus,defaultFollowStatus:null==f||null===(o=f.authorInfo)||void 0===o?void 0:o.followStatus}).followStatus;return null!=c&&c.fullMiniWindow?d.createElement("div",{className:m()(C.intraction,(0,u.Z)({},C.hide,x))},d.createElement("div",{className:C.playBox},s?d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(w,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:C.playSvg,viewBox:"0 0 40 40"}):d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(b,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:C.playSvg,viewBox:"0 0 40 40"}),d.createElement("div",{className:C.desc},s?"\u6682\u505c":"\u64ad\u653e")),d.createElement(ee,{awemeInfo:f,isLogin:M,loginUserInfo:v,loginDispatch:p,reportExtraParams:(0,i.Z)((0,i.Z)({},y),{},{relation:null!==(a=null==y?void 0:y.relation)&&void 0!==a?a:String(R)}),ableMiniType:!0,recordPreferVideoSwitch:E,otherLoginMethod:function(){N(!0),I("digg"),T(!1)}}),d.createElement(we,{awemeInfo:f,isLogin:M,loginUserInfo:v,loginDispatch:p,reportExtraParams:(0,i.Z)((0,i.Z)({},y),{},{relation:null!==(r=null==y?void 0:y.relation)&&void 0!==r?r:String(R)}),ableMiniType:!0,otherLoginMethod:function(){N(!0),I("collection"),T(!1)},ToastEl:Z}),d.createElement(Fe,{autoPlayInit:Number((0,bn.G9)()),player:k,isActive:S,playNextFunc:L,ablePlayNext:P})):d.createElement(d.Fragment,null,s?d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(g.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:m()(C.svg,(0,u.Z)({},C.hide,x)),viewBox:"0 0 38 38"}):d.createElement(K.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(h.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:m()(C.svg,(0,u.Z)({},C.hide,x)),viewBox:"0 0 38 38"}))},In=function(e){var n=e.abtestData,t=(0,r.Z)(e,Cn),l=(0,J.n)(),i=(0,d.useState)(!1),c=(0,a.Z)(i,2),f=c[0],g=c[1],h=(0,d.useState)(!1),_=(0,a.Z)(h,2),y=_[0],w=_[1],E=(0,d.useState)(Boolean(null==n?void 0:n.fullMiniWindow)),k=(0,a.Z)(E,2),b=k[0],S=k[1],N=(0,d.useState)(!1),x=(0,a.Z)(N,2),T=x[0],L=x[1],P=(0,d.useState)("digg"),Z=(0,a.Z)(P,2),M=Z[0],R=Z[1],D=(0,d.useRef)(null),O=(0,d.useRef)(null),A=(0,d.useRef)(null),F=(0,d.useCallback)((function(){I.sendLog("pauseVideo",{mute_remind:"none",enter_from:(0,v.mo)(),is_small_window:"1",click_method:"click"})}),[]),U=(0,d.useCallback)((function(){n.fullMiniWindow&&(S(!1),O.current&&clearTimeout(O.current),O.current=s()((function(){S(!0),clearTimeout(O.current),O.current=null}),2e3))}),[n]),B=(0,d.useCallback)((function(){var e,n;null!=l&&l.paused?null==l||null===(e=l.play)||void 0===e||e.call(l):(null==l||null===(n=l.pause)||void 0===n||n.call(l),F());U()}),[l,F,U]);return(0,d.useEffect)((function(){var e=function(){g(!(null!=l&&l.paused))};return l&&(l.on("play",e),l.on("pause",e)),function(){l&&(l.off("play",e),l.off("pause",e))}}),[l,F]),(0,d.useEffect)((function(){l&&g(!(null!=l&&l.paused))}),[l]),(0,d.useEffect)((function(){return"click_button"===p.Le.getConfig(p.gI.PlaySwitchMethods)&&U(),p.Le.setConfig(p.gI.PlaySwitchMethods,""),function(){O.current&&(clearTimeout(O.current),O.current=null)}}),[]),d.createElement("div",{ref:A,className:C.wrap,onMouseLeave:function(e){(null==e?void 0:e.target)!==D.current&&w(!1)}},d.createElement("div",{className:m()(C.fullbox,(0,u.Z)({},C.hover,y&&!b||T)),onMouseOver:function(e){(null==e?void 0:e.target)!==D.current&&w(!0)},onMouseLeave:function(e){n.fullMiniWindow||(null==e?void 0:e.target)===D.current||w(!1)},onMouseMove:U,onClick:B},d.createElement(Sn,(0,o.Z)({},t,{abtestData:n,hide:!y||b,isPlay:f,setType:R,setIsShowGuide:L,setIsHover:w,player:l,reportExtraParams:{is_small_window:1},maskRef:A})),d.createElement(an,{className:m()((0,u.Z)({},C.hide,!y||b||T)),mouseHandler:U,abtestData:n,electronWarpRef:D})),d.createElement(wn.I,(0,o.Z)({},t,{mouseHandler:U,playSwitchCb:function(){return p.Le.setConfig(p.gI.PlaySwitchMethods,"click_button")},className:m()(C.playSwitchContainer,(0,u.Z)({},C.hide,n.fullMiniWindow&&(b||!y)||T))})),T&&d.createElement(_n,(0,o.Z)({setIsShowGuide:L,type:M},t)))},Nn=function(e){var n=(0,En.N)();return d.createElement(yn.k,{componentName:"MiniWinMask",Slardar:n},d.createElement(In,e))}},12134:function(e,n,t){t.d(n,{N:function(){return E}});var l=t(65146),o=t(53864),a=t(79705),r=t.n(a),i=t(83400),u=t(94116),c=t(21807),s=t(66028),d=t(72627),f="avbh36GY",m="tx6HeiMg",v="H23SZLqP",p="tpbVKRdo",g="ZHPBPCa9",h="Pc5Ur1Bf",_="KT1CeZxw",y="e_7kpvmu",w=function(e){var n,t=e.awemeInfo,a=null==t?void 0:t.desc,s=null==t||null===(n=t.authorInfo)||void 0===n?void 0:n.nickname,d=null==t?void 0:t.mixInfo,w=(0,i.Jt)(t),E=(0,i.Kf)(t);return o.createElement("div",{className:f},o.createElement("div",{className:m}),o.createElement("div",{className:v},o.createElement(u.Z,{className:p,text:"@".concat(s)})),o.createElement("div",{className:r()(g,(0,l.Z)({},y,w||E))},o.createElement(u.Z,{className:h,text:a,isRemoveRowspan:!0},(null==d?void 0:d.currentEpisode)&&o.createElement("span",null,"\u7b2c",null==d?void 0:d.currentEpisode,"\u96c6\uff1a")),(w||E)&&o.createElement(c.Vp,{className:r()(_),type:"ad"},"\u5e7f\u544a")))},E=function(e){var n=(0,d.N)();return o.createElement(s.k,{componentName:"MiniWinInfo",Slardar:n},o.createElement(w,e))}},58014:function(e,n,t){t.d(n,{p:function(){return c}});var l=t(53864),o=t(7786),a=t(35667),r=t(72627),i=t(66028),u=(t(13727),function(e){return function(e){var n=e.player,t=e.scene,a=e.onRegisterSuccess,r=e.isActive;(0,l.useEffect)((function(){var e;if(n&&t&&r){var l=o.s.register({player:n,scene:t});e=l,l!==undefined&&(null==a||a({scene:t,playerId:l}))}return function(){o.s.unRegister({id:e})}}),[n,t,r])}({player:(0,a.n)(),scene:e.scene,onRegisterSuccess:e.onRegisterSuccess,isActive:e.isActive}),null}),c=function(e){var n=(0,r.N)();return l.createElement(i.k,{componentName:"MultiPlayer",Slardar:n},l.createElement(u,e))}},65109:function(e,n,t){t.d(n,{N:function(){return c}});var l=t(53864),o=t(61508),a=t(97876),r=t(66028),i=t(72627),u=function(e){var n=e.player,t=e.isActive;return(0,l.useEffect)((function(){var e=function(){var e;t&&a.emit(null==a||null===(e=a.EVENT)||void 0===e?void 0:e.clarityRel,{hoverSelected:!0})};return null==n||n.on(o.PAUSE,e),function(){null==n||n.off(o.PAUSE,e)}}),[n,t]),(0,l.useEffect)((function(){var e,t,l=null==n||null===(e=n.plugins)||void 0===e||null===(t=e.progress)||void 0===t?void 0:t.root,o=function(){var e;a.emit(null==a||null===(e=a.EVENT)||void 0===e?void 0:e.clarityRel,{hoverSelected:!0})};return l&&l.addEventListener("mouseenter",o),function(){l&&l.removeEventListener("mouseenter",o)}}),[n]),null},c=function(e){var n=(0,i.N)();return l.createElement(r.k,{componentName:"NoDisturb",Slardar:n},l.createElement(u,e))}},15919:function(e,n,t){t.d(n,{I:function(){return x},D:function(){return N}});var l,o=t(53864),a=t(79705),r=t.n(a),i=t(97876),u=t(5277),c=t(68393);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},s.apply(this,arguments)}var d,f=function(e){return o.createElement("svg",s({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=o.createElement("path",{d:"M7.269 16.316a1.393 1.393 0 010-1.97l5.056-5.055a1.393 1.393 0 011.97 0l.011.011 5.045 5.045a1.393 1.393 0 11-1.97 1.97l-4.071-4.072-4.071 4.071a1.393 1.393 0 01-1.97 0z",fill:"#fff",opacity:.7})))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},m.apply(this,arguments)}var v,p,g=function(e){return o.createElement("svg",m({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),d||(d=o.createElement("path",{d:"M7.269 9.29a1.393 1.393 0 000 1.97l5.056 5.056a1.393 1.393 0 001.97 0l.011-.011 5.045-5.045a1.393 1.393 0 10-1.97-1.97l-4.071 4.072L9.239 9.29a1.393 1.393 0 00-1.97 0z",fill:"#fff",opacity:.7})))};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},h.apply(this,arguments)}var _,y,w=function(e){return o.createElement("svg",h({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),v||(v=o.createElement("g",{filter:"url(#newAbove_svg__filter0_d_1651_162618)"},o.createElement("path",{d:"M7.269 16.316a1.393 1.393 0 010-1.97l5.056-5.055a1.393 1.393 0 011.97 0l.011.011 5.045 5.045a1.393 1.393 0 11-1.97 1.97l-4.071-4.072-4.071 4.071a1.393 1.393 0 01-1.97 0z",fill:"#fff"}))),p||(p=o.createElement("defs",null,o.createElement("filter",{id:"newAbove_svg__filter0_d_1651_162618",x:5.861,y:8.883,width:14.898,height:9.842,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:1}),o.createElement("feGaussianBlur",{stdDeviation:.5}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1651_162618"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1651_162618",result:"shape"})))))};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},E.apply(this,arguments)}var k=function(e){return o.createElement("svg",E({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_||(_=o.createElement("g",{filter:"url(#newBelow_svg__filter0_d_1646_162559)"},o.createElement("path",{d:"M7.269 9.29a1.393 1.393 0 000 1.97l5.056 5.056a1.393 1.393 0 001.97 0l.011-.011 5.045-5.045a1.393 1.393 0 10-1.97-1.97l-4.071 4.072L9.239 9.29a1.393 1.393 0 00-1.97 0z",fill:"#fff"}))),y||(y=o.createElement("defs",null,o.createElement("filter",{id:"newBelow_svg__filter0_d_1646_162559",x:5.861,y:8.883,width:14.898,height:9.842,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:1}),o.createElement("feGaussianBlur",{stdDeviation:.5}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1646_162559"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1646_162559",result:"shape"})))))},b=t(9909),C=t(66028),S=t(35667),I=t(72627),N=function(e){var n=e.playPrevFunc,t=e.playNextFunc,l=e.disablePrev,a=e.disableNext,s=e.className,d=e.style,m=e.playSwitchRef,v=e.mouseHandler,p=e.playSwitchCb,h=(0,S.n)(),_=(0,o.useCallback)((function(e){var t;l||n&&h&&(null===(t=h.emit)||void 0===t||t.call(h,"playSwitchPrevBefore",!1),i.emit(i.EVENT.reportPlayPrev,{clickFrom:"click_button"}),null==p||p(),n())}),[h,n,l]),y=(0,o.useCallback)((function(e){var n;a||t&&h&&(null===(n=h.emit)||void 0===n||n.call(h,"playSwitchNextBefore",!1),i.emit(i.EVENT.reportPlayNext,{clickFrom:"click_button"}),null==p||p(),t())}),[h,t,a]),E=(0,u.G6)();return o.createElement("div",{ref:m,onMouseMove:v,onClick:v,className:r()("xgplayer-playswitch",s),"data-state":"normal",style:d},o.createElement("div",{className:"xgplayer-icon"},o.createElement("div",{className:"xgplayer-playswitch-tab"},o.createElement("div",{"data-e2e":"video-switch-prev-arrow",className:r()("xgplayer-playswitch-prev",{disabled:l}),onClick:function(e){(0,c.i0)(c.CK.User),_(e)}},o.createElement(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(E?f:w,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:26,height:26,viewBox:"0 0 26 26",needRenderInSSR:!0})),o.createElement("div",{"data-e2e":"video-switch-next-arrow",className:r()("xgplayer-playswitch-next",{disabled:a}),onClick:function(e){(0,c.i0)(c.CK.User),y(e)}},o.createElement(b.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(E?g:k,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:26,height:26,viewBox:"0 0 26 26",needRenderInSSR:!0})))))},x=function(e){var n=(0,I.N)();return o.createElement(C.k,{componentName:"PlaySwitch",Slardar:n},o.createElement(N,e))}},79642:function(e,n,t){t.d(n,{c:function(){return S}});var l=t(65146),o=t(30906),a=t(32781),r=t(76569),i=t.n(r),u=t(53864),c=t(79705),s=t.n(c),d=t(61508),f=t(54867),m=t(17172),v=t(5277),p="qicIW75i",g="tSXOCvQc",h="_M5JRynA",_="L1TH4HdO",y="eWo1GKyO",w="nFM5CuoV",E=t(35667),k=t(72627),b=t(66028),C=function(e){var n,t=(0,u.useState)(!1),r=(0,a.Z)(t,2),c=r[0],k=r[1],b=e.position,C=e.children,S=e.awemeInfo,I=e.style,N=void 0===I?{}:I,x=e.className,T=e.isActive,L=e.controlHeight,P=e.isClientMiniWin,Z=void 0!==P&&P,M=e.abtestData,R=e.isPermanentDislikeBtn,D=e.useAdapt,O=void 0===D||D,A=(0,u.useState)(!1),F=(0,a.Z)(A,2),U=F[0],B=F[1],V=(0,u.useState)(!1),j=(0,a.Z)(V,2),W=j[0],H=j[1],z=(0,u.useState)(!1),G=(0,a.Z)(z,2),K=G[0],q=G[1],Q=(0,u.useState)(!1),X=(0,a.Z)(Q,2),Y=X[0],J=X[1],$=(0,u.useState)(!1),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],le=(0,E.n)(),oe=(0,u.useState)({}),ae=(0,a.Z)(oe,2),re=ae[0],ie=ae[1],ue=(0,u.useRef)();return(0,u.useEffect)((function(){var e=function(e){var n,t,l,o=((null==e?void 0:e[0])||{}).contentRect,a=(null==o?void 0:o.height)||(null==le||null===(n=le.root)||void 0===n?void 0:n.offsetHeight)||(null===(t=ue.current)||void 0===t||null===(l=t.parentNode)||void 0===l?void 0:l.offsetHeight),r=f.nl,i=r.MaxHeight,u=r.MiniAvatar,c=r.MiniText,s=r.MiniPadding,d=r.MiniIocn,m=r.OldHideChangeVideo;a>i?ie({transformOrigin:"bottom",transform:"scale(".concat(a/2/425,")"),height:"auto",bottom:"".concat(L===f.fp.Default?0:L+12,"px")}):ie({height:"auto",bottom:"".concat(L===f.fp.Default?0:L+12,"px")});var v=R?59:0;B(a<m+v),H(a<=u+v),q(a<=c+v),J(a<=s+v),te(a<=d+v)};if(O){var n;e({});var t=(null==le?void 0:le.root)||(null===(n=ue.current)||void 0===n?void 0:n.parentNode);if(t&&!Z){var l=i()(m.Z).call(m.Z,t,e);return function(){l&&(null==l||l())}}}}),[le,T,Z,L,M,R]),(0,u.useEffect)((function(){if(le)return le.on(d.FULLSCREEN_CHANGE,k),function(){le.off(d.FULLSCREEN_CHANGE,k)}}),[le]),u.createElement(u.Fragment,null,"root"===b&&u.createElement("div",{className:s()(p,null==x?void 0:x.root),style:N},C),"bottom"===b&&u.createElement("div",{className:s()(g,null==x?void 0:x.bottom),style:(0,o.Z)({bottom:null!=L?L:0},N)},C),"left"===b&&u.createElement("div",{className:s()(h,null==x?void 0:x.left),style:N},C),"right"===b&&u.createElement("div",{className:s()(_,null==x?void 0:x.right,"positionBox",(n={},(0,l.Z)(n,y,(0,v.vU)()&&!c&&68!==(null==S?void 0:S.awemeType)),(0,l.Z)(n,"hideChangeVideo",U),(0,l.Z)(n,"newMiniAvatar",W),(0,l.Z)(n,"newMiniFontSize",K),(0,l.Z)(n,"newMiniSpacing",Y),(0,l.Z)(n,"newMiniIcon",ne),n)),style:(0,o.Z)((0,o.Z)({},N),re),ref:ue},C),"top"===b&&u.createElement("div",{className:s()(w,null==x?void 0:x.top),style:N},C))},S=function(e){var n=(0,k.N)();return u.createElement(b.k,{componentName:"PositionBox",Slardar:n},u.createElement(C,e))}},47140:function(e,n,t){t.d(n,{B:function(){return I}});var l=t(30906),o=t(32781),a=t(65902),r=t(65146),i=t(34346),u=t.n(i),c=t(53864),s=t(79705),d=t.n(s),f=t(96716),m=t(72603),v=t(88817),p=t(27448),g={outerContainer:"P5gEuHFN",image:"KGHq4TxW",miniTitle:"ZegEIkFD",playIcon:"zKIzeVet",information:"tTtgp_ip",description:"eICnKLMF",title:"Rt2qN_yG",hidden:"wdlYfGsQ"},h=new(t(13795).hD)({videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}}}),_=t(77060),y=t(24556),w=t(9909),E=t(66028),k=t(35667),b=t(72627);function C(e){var n=e.onClick,t=e.targetHref,l=e.className,o=e.cardHidden,i=e.style,u=e.alinkProps,s=void 0===u?{}:u,m=e.imgSrc,v=e.description,h=e.title,E=e.onShow,k=e.type,b=void 0===k?"":k,C=e.player,S=e.target,I=(0,f.x)((function(){return E()}));return c.createElement(_.a,(0,a.Z)({onClick:function(e){null==n||n(e),null==C||C.pause()},href:globalThis.xssNamespace.douyin_web.filterUrl(t,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:d()(g.outerContainer,l,(0,r.Z)({},g.hidden,o)),style:i,refEl:I},s,{target:S}),c.createElement("div",{className:g.image},c.createElement(y.Q,{src:globalThis.xssNamespace.douyin_web.filterUrl(m,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),iconStyle:{width:"100%",height:"100%"}}),"variety"===b&&c.createElement(c.Fragment,null,c.createElement("div",{className:g.miniTitle},"\u6b63\u7247"),c.createElement(w.Z,{className:g.playIcon,src:globalThis.xssNamespace.douyin_web.filterUrl(p.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 39 39"}))),c.createElement("div",{className:g.information},c.createElement("div",{className:g.description},v),c.createElement("div",{className:g.title},h)))}function S(e){var n,t,a,r,i,s,d,f,p,g=e.awemeInfo,_=e.abtestData,y=e.isActive,w=(0,k.n)(),E=(0,c.useRef)(""),b=(0,c.useState)(!1),S=(0,o.Z)(b,2),I=S[0],N=S[1],x=(0,c.useCallback)((function(e){N(!e)}),[]),T=(null==g||null===(n=g.webRawData)||void 0===n?void 0:n.anchorCardInfo)||{},L=T.title,P=T.subtitle,Z=T.roomLink,M=T.link,R=(T.liveSource,T.type,T.vsContent),D={dependOnPlayer:!0,title:P,description:L,targetHref:Z,imgSrc:M,onShow:function(){return null},onClick:function(){return null},target:"_self"},O={group_id:null==g?void 0:g.awemeId,enter_from:(0,m.yW)(),type:""};switch(null==g||null===(t=g.webRawData)||void 0===t||null===(a=t.anchorCardInfo)||void 0===a?void 0:a.source){case"pc_movie_father":D.hidden=1!==(null==_?void 0:_.showMovie),D.className="",D.target="_blank",D.targetHref+="?previous_page=".concat((0,m.yW)()),O.type="movie",D.onShow=function(){h.sendLog("videoAnchorShow",O)};break;case"variety":D.hidden=!Z||(null==R||null===(r=R.user_statistics)||void 0===r?void 0:r.watch_ratio)>.9,O=(0,l.Z)((0,l.Z)({},O),{},{type:"vs",is_vs:1,author_id:null==R||null===(i=R.owner_user_id)||void 0===i||null===(s=i.c)||void 0===s?void 0:u()(s).call(s,(function(e){return"".concat(e)})).join(""),vs_season_id:null==R?void 0:R.season_id_str,vs_episode_id:null==R?void 0:R.episode_id_str,room_id:"",vs_ep_group_id:null==R?void 0:R.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==R||null===(d=R.episode_type)||void 0===d?void 0:d.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==R||null===(f=R.episode_type)||void 0===f?void 0:f.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==R||null===(p=R.episode_type)||void 0===p?void 0:p.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""}),D.alinkProps={target:"_blank"},D.target="_blank",D.type="variety",D.onShow=function(){var e,n,t;h.sendLog("videoAnchorShow",O),h.sendLog("vsVideoShow",{enter_from_merge:(0,m.yW)(),enter_method:"video_anchor_module",previous_page:(0,v.z)("web_link"),action_type:"click",is_vs:1,vs_season_id:null==R?void 0:R.season_id_str,vs_episode_id:null==R?void 0:R.episode_id_str,room_id:"",vs_ep_group_id:null==R?void 0:R.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==R||null===(e=R.episode_type)||void 0===e?void 0:e.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==R||null===(n=R.episode_type)||void 0===n?void 0:n.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==R||null===(t=R.episode_type)||void 0===t?void 0:t.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""})}}D.onClick=function(){h.sendLog("videoAnchorClick",O)};var A=D.imgSrc,F=D.hidden,U=void 0===F||F;return(0,c.useEffect)((function(){var e;return null==w||null===(e=w.on)||void 0===e||e.call(w,"titleIsFold",x),function(){var e;null==w||null===(e=w.off)||void 0===e||e.call(w,"titleIsFold",x)}}),[]),(0,c.useEffect)((function(){E.current=A}),[A]),c.createElement(c.Fragment,null,U||E.current!==A||!y?c.createElement(c.Fragment,null):c.createElement(C,(0,l.Z)((0,l.Z)({},D),{},{cardHidden:I,player:w})))}var I=function(e){var n=(0,b.N)();return c.createElement(E.k,{componentName:"ProgramCard",Slardar:n},c.createElement(S,e))}},92720:function(e,n,t){t.d(n,{E:function(){return s}});var l=t(85792),o=t.n(l),a=t(58166),r=t.n(a),i=t(53864),u=t(61508),c=t(35667),s=function(e){var n=e.isActive,t=e.abtestData,l=(0,c.n)(),a=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e;if(l&&n&&null!=t&&null!==(e=t.blockSeek)&&void 0!==e&&e.enable){var r=function(e){var n=null!=e?e:{},r=n.type,i=n.eventType,u=n.vtype;if("waitingEnd"===i&&null!==a.current&&(clearTimeout(a.current),a.current=null),"waitingStart"===i&&0===r&&("MP4"===u||"MP4_0"===u)&&function(e){var n=null==e?void 0:e.getBufferedRange();if(n&&n[1]){var t=1e3*(n[1]-e.currentTime);return Math.round(t)}return 0}(l)>3e3){var c,s,d=null!==(c=null==t||null===(s=t.blockSeek)||void 0===s?void 0:s.blockTime)&&void 0!==c?c:5e3;a.current=o()((function(){var e,n,o=(null!==(e=null==t||null===(n=t.blockSeek)||void 0===n?void 0:n.seekTime)&&void 0!==e?e:1e3)/1e3;l.seek(l.currentTime+o,"play")}),d)}};return l.on(u.XGLOG,r),function(){clearTimeout(a.current),l.off(u.XGLOG,r)}}}),[l,n,t]),(0,i.useEffect)((function(){var e;if(l&&n&&null!=t&&null!==(e=t.blockSeek)&&void 0!==e&&e.enable){var a=o()((function(){var e,n=l.video;r()(null==n?void 0:n.duration)&&!1===(null==n?void 0:n.paused)&&0===(null==n?void 0:n.currentTime)&&(null==n||null===(e=n.load)||void 0===e||e.call(n))}),1e4);return function(){clearTimeout(a)}}}),[l,n,t]),null}},38581:function(e,n,t){t.d(n,{Z:function(){return P}});var l,o=t(65146),a=t(32781),r=t(53864),i=t(79705),u=t.n(i),c=t(79784),s=t(92267),d=t(56920),f=t(72603),m=t(5277),v=t(80809),p={share:"Q79kf5XP",animationWrap:"I2wsWzIQ",iconWrap:"BwiwR0v7",flip:"MjEhjbTL",inVideo:"sgXcrzaL",svgBox:"GBJ8fg92",shareqq:"YDNeTiR9",sharewx:"ZuzPLdUp",shareLink:"pc55isRI",shareIm:"NOCR0U0L",imAvatar:"uJ3lVLkX",isUser:"Y6O9BfS7",fit:"RuoVpjSW",shareSvg:"oh8cnLMd",lowDeviceShareSvg:"MmiXXbR1",count:"_09xOZR9",showFlip:"g1EmbXsH",disable:"KKAPHPik",ableMiniType:"h9JNjSBI"};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},g.apply(this,arguments)}var h=function(e){return r.createElement("svg",g({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.884 9.416c-1.209-1.156-3.214-.3-3.214 1.374v2.396c-.132 0-.263 0-.393.003-1.402-.038-6.254.115-9.667 3.775-2.361 2.533-3.423 6.562-3.357 8.642-.062 2.073.905 1.887 1.165 1.41 2.976-5.462 12.252-3.791 12.252-3.791v2.264c0 1.637 1.932 2.508 3.159 1.425l7.989-7.06a1.9 1.9 0 00.055-2.797l-7.99-7.64z",fill:"#fff"})))},_=t(9909),y=t(17134),w=t(24556),E=t(20804),k=t(53630),b=t(65902),C=t(66209),S=t(68350),I=function(e){var n=e.width,t=void 0===n?26:n,l=e.height,o=void 0===l?26:l,a=e.className;return r.createElement(S.A,(0,b.Z)({},e,{width:t,height:o,src:globalThis.xssNamespace.douyin_web.filterUrl(C.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),id:"svg_icon_share_qq",defaultWidth:26,defaultHeight:26,viewBox:"0 0 26 26",className:a}))},N=t(36245),x=function(e){var n=e.width,t=void 0===n?24:n,l=e.height,o=void 0===l?24:l,a=e.className;return r.createElement(S.A,(0,b.Z)({},e,{width:t,height:o,src:globalThis.xssNamespace.douyin_web.filterUrl(N.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),id:"svg_icon_share_qq",defaultWidth:24,defaultHeight:24,viewBox:"0 0 24 24",className:a}))},T=t(43436),L=function(e){var n=e.width,t=void 0===n?22:n,l=e.height,o=void 0===l?22:l,a=e.className;return r.createElement(S.A,(0,b.Z)({},e,{width:t,height:o,src:globalThis.xssNamespace.douyin_web.filterUrl(T.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),id:"svg_icon_share_qq",defaultWidth:22,defaultHeight:22,viewBox:"0 0 22 22",className:a}))};function P(e){var n,t,l,i=e.ableMiniType,g=e.disableShare,b=void 0!==g&&g,C=e.type,S=e.canShareFlip,N=e.canAnimation,T=e.awemeInfo,P=e.abtestData,Z=e.scene,M=(0,r.useState)((function(){return(0,E.F)().get().lastShareMethod})),R=(0,a.Z)(M,2),D=R[0],O=R[1],A=(0,r.useState)((function(){var e=(0,E.F)().get(),n=e.lastShareMethod,t=e.imAvatarUrl;if(n===c.ShareMethod.Im)return t})),F=(0,a.Z)(A,2),U=F[0],B=F[1],V=(0,r.useState)(!1),j=(0,a.Z)(V,2),W=j[0],H=j[1],z=(0,r.useMemo)((function(){return(0,E.F)().get().isShareUser}),[S]),G=(0,r.useRef)(null),K=(0,r.useRef)(null);(0,r.useEffect)((function(){if(S){var e=(0,E.F)(),n=e.get(),t=n.lastShareMethod,l=n.imAvatarUrl;t===c.ShareMethod.Im&&B(l),O(t),n.shareCount++,e.set(n),s.i.sendLog("shareVideoShow",{show_type:t,enter_from:(0,f.mo)()})}}),[S]);var q=function(){var e,n,t=null===(e=K.current)||void 0===e||null===(n=e.getLottieInstance)||void 0===n?void 0:n.call(e);return{enter:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[0,33],!0)},leave:function(){var e;null==t||null===(e=t.playSegments)||void 0===e||e.call(t,[62,86],!0)}}};return(0,r.useEffect)((function(){var e,n;N&&(null===(e=(n=q()).enter)||void 0===e||e.call(n))}),[N]),(0,r.useEffect)((function(){if(b)return undefined;var e=G.current,n=function(){var e,n;null===(e=(n=q()).enter)||void 0===e||e.call(n)},t=function(){var e,n;null===(e=(n=q()).leave)||void 0===e||e.call(n)};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mouseleave",t),function(){null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mouseleave",t)}}),[]),r.createElement("div",{className:u()(p.share,p[C],(n={},(0,o.Z)(n,p.ableMiniType,i),(0,o.Z)(n,p.disable,b),(0,o.Z)(n,p.showFlip,S),(0,o.Z)(n,p.inVideo,"video"===Z),n)),ref:G,"data-e2e":"video-player-share",onMouseEnter:function(){(null==P?void 0:P.interactionOpt)>=d.U5.On&&H(!0)}},r.createElement("div",{className:p.animationWrap},r.createElement("div",{className:u()(p.iconWrap,p[C])},(0,m.b_)()||"user"===Z||(null==P?void 0:P.interactionOpt)>=d.U5.On&&!W?r.createElement(_.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(h,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 36 36",className:p.shareSvg}):r.createElement(y.default,{ref:K,data:v,loop:!1,autoplay:!1})),r.createElement("div",{className:p.flip},D===c.ShareMethod.QQ&&r.createElement("div",{className:u()(p.svgBox,p.shareqq)},r.createElement(I,null)),D===c.ShareMethod.WX&&r.createElement("div",{className:u()(p.svgBox,p.sharewx)},r.createElement(x,null)),D===c.ShareMethod.Link&&r.createElement("div",{className:u()(p.svgBox,p.shareLink)},r.createElement(L,null)),D===c.ShareMethod.Im&&r.createElement("div",{className:u()(p.svgBox,p.shareIm,(0,o.Z)({},p.isUser,z))},r.createElement(w.Q,{className:p.imAvatar,src:globalThis.xssNamespace.douyin_web.filterUrl(U,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})))),"user"!==Z&&r.createElement("div",{className:p.count},(0,k.A)({count:null!==(t=null==T||null===(l=T.stats)||void 0===l?void 0:l.shareCount)&&void 0!==t?t:0,displayWord:"\u5206\u4eab"})))}},7758:function(e,n,t){t.r(n),t.d(n,{MenuList:function(){return we},MenuListInner:function(){return ye}});var l,o=t(65146),a=t(65902),r=t(32781),i=t(8e3),u=t.n(i),c=t(11227),s=t.n(c),d=t(34346),f=t.n(d),m=t(53864),v=t(79705),p=t.n(v),g=t(85127),h=t(61508),_=t(67330),y=t(92294),w=t(12629),E=t(48970),k=t(83400),b=t(83901),C=t(64153),S=t(50230),I=t(36177),N=t(28712),x=t(67495),T=t(16016),L=t(25902),P=t(97876),Z=t(72603),M=t(92267),R="TgFPIucP",D="sUBrJFBU",O="xTPPbJUe",A="KEV357V7",F="M44VWcTm",U="mxWf65Uv",B="MCwQ6CRO",V="Y6qVjfiJ",j="msJZYERP",W="OX6xBOr2",H="RryDljCo",z="v9fW6YMv",G="rUEb3hkU",K=t(93691),q=t(30673),Q=t(67161),X=t(30906),Y=t(31674),J=t.n(Y),$=t(94090),ee=t.n($),ne=t(87384),te=t(56920),le=t(50799),oe=t(98937),ae=t(38655),re=t(5450),ie=t(8372),ue=t(71116),ce=t(77060),se=t(24556),de=t(9909),fe=t(81762);function me(){return me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},me.apply(this,arguments)}var ve=function(e){return m.createElement("svg",me({width:10,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.187 4.831a.75.75 0 00-1.061 1.06l4.065 4.066-4.067 4.067a.75.75 0 001.06 1.061l4.575-4.574a.75.75 0 00.024-1.084L3.187 4.831z",fill:"#fff"})))},pe=["enter_from","previous_page","tab_name"],ge=t(35667),he=t(72627),_e=t(66028);(0,N.p)()||g.Z.extend([{LANG:"zh",TEXT:{FULLSCREEN_TIPS:'\u8fdb\u5165\u5168\u5c4f<span class="shortcutKey">H</span>',EXITFULLSCREEN_TIPS:'\u9000\u51fa\u5168\u5c4f<span class="shortcutKey">H</span>'}}]);var ye=function(e){var n=e.isActive,t=void 0!==n&&n,l=e.shortcutDisable,i=e.shortcutInclude,c=e.shortcutExclude,d=e.awemeInfo,v=e.shortCutFiltered,g=void 0===v?[]:v,N=e.showEnterDetail,Y=void 0!==N&&N,$=e.showAdMenu,me=void 0!==$&&$,he=e.modalEnterFrom,_e=e.userInfo,ye=e.abtestData,we=e.directJumpToUser,Ee=(0,ge.n)(),ke=(d||{}).awemeId,be=(0,m.useState)(!1),Ce=(0,r.Z)(be,2),Se=Ce[0],Ie=Ce[1],Ne=(0,m.useState)({x:0,y:0}),xe=(0,r.Z)(Ne,2),Te=xe[0],Le=xe[1],Pe=(0,m.useState)(null),Ze=(0,r.Z)(Pe,2),Me=Ze[0],Re=Ze[1],De=(0,m.useRef)(null),Oe=(0,m.useMemo)((function(){return S.getShortcut({disable:l,include:i,exclude:c})}),[l,i,c]),Ae=(0,m.useCallback)((function(e){e.preventDefault();var n=Ee.root.getBoundingClientRect(),t=n.width,l=n.height;if(!De.current||!De.current.contains(e.target)){var o=De.current?De.current.clientWidth:224,a=De.current?De.current.clientHeight:208,r=(null==e?void 0:e.offsetX)+o>t?(null==e?void 0:e.offsetX)-o:null==e?void 0:e.offsetX,i=(null==e?void 0:e.offsetY)+a>l?(null==e?void 0:e.offsetY)-a:null==e?void 0:e.offsetY;if(Le({x:r,y:i}),Ie(!0),(0,y.AI)(d)||(0,w.L)(d)||(0,E.u)(d)){var u=(0,k.Rx)(d);(0,b.E)("othershow",{tag:(0,x.f)(),value:u.creative_id,log_extra:u.log_extra,refer:"feedback"})}}}),[Ee,d,De]),Fe=function(e){var n;e&&null!==(n=De.current)&&void 0!==n&&n.contains(e.target)||Ie(!1)},Ue=(0,m.useCallback)((function(){var e,n;window.open((null==d?void 0:d.awemeType)===I.ed.XgVideo?(0,T.GN)(null==d||null===(e=d.authorInfo)||void 0===e?void 0:e.uid):(0,T.HC)(null==d||null===(n=d.authorInfo)||void 0===n?void 0:n.secUid,(0,_.stringify)({is_full_screen:(0,L.r)()?"1":"0",enter_method:"video_title",from_gid:d.groupId,vid:null==d?void 0:d.awemeId})),"_blank","noopener")}),[d]),Be=(0,m.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};"feedback"===e&&P.emit(P.EVENT.showFeedback),"enterDetail"===e&&P.emit(P.EVENT.videoPause),"showComment"===e&&("video_detail"!==(0,Z.yW)()||(0,L.r)()||P.emit(P.EVENT.commentFocus)),"downloadVideo"===e&&(P.emit(P.EVENT.downloadVideo,d),M.i.sendLog("download",{enter_from:(0,Z.mo)(),enter_from_merge:(0,Z.vM)(),group_id:null==d?void 0:d.awemeId,click_from:"right_click"})),we&&"onAvatar"===e?Ue():null==Ee||Ee.emit(e,n),Ie(!1)}),[Ee,d,Ue]);(0,m.useEffect)((function(){if(we&&Ee)return Ee.on("onAvatar",Ue),function(){Ee.off("onAvatar",Ue)}}),[Ue,Ee,we]),function(e){var n=e.player,t=e.showContextMenu,l=e.awemeInfo,o=e.hideContextMenu,a=e.containerStatus;(0,m.useEffect)((function(){if(n){var e,l=(0,K.H)(n),a=function(e){var l,o;null!=n&&null!==(l=n.video)&&void 0!==l&&null!==(o=l.parentElement)&&void 0!==o&&o.contains(null==e?void 0:e.target)&&t(e)};return null===(e=n.root)||void 0===e||e.addEventListener("contextmenu",a,!0),null==l||l.addEventListener("contextmenu",t),document.addEventListener("click",o,!0),function(){var e;null===(e=n.root)||void 0===e||e.removeEventListener("contextmenu",a),document.removeEventListener("click",o,!0),null==l||l.removeEventListener("contextmenu",t)}}return undefined}),[n,l,t]),(0,m.useEffect)((function(){return a?(a.addEventListener("contextmenu",t),function(){a.removeEventListener("contextmenu",t)}):undefined}),[a,t])}({player:Ee,showContextMenu:Ae,awemeInfo:d,hideContextMenu:Fe,containerStatus:Me});var Ve=function(e){var n=e.shortcut,t=e.emitEvent,l=e.position,o=e.showEnterDetail,a=e.setIsShow,r=e.awemeInfo,i=e.userInfo,u=e.modalEnterFrom,c=e.abtestData,d=(0,m.useMemo)((function(){if(r){var e,n,t=r.awemeType!==I.ed.Note&&r.awemeType!==I.ed.XgVideo,l=null==r||null===(e=r.download)||void 0===e?void 0:e.allowDownload,o=1===(null===(n=r.status)||void 0===n?void 0:n.reviewStatus),a=(0,k.Jt)(r);return t&&l&&!o&&!a}return!1}),[r]),f=(0,m.useMemo)((function(){var e,o,a,r,i;return[{text:"\u6e05\u5c4f",key:null===(e=n.immersivePlayer)||void 0===e?void 0:e.badgeText,handler:function(){return t(fe.B.UpdateImmersiveSwitch,{logParams:{enter_method:"long_press"}})}},{text:"\u8bc4\u8bba",key:null===(o=n.comment)||void 0===o?void 0:o.badgeText,handler:function(){return t("showComment")}},{text:"\u8d5e",key:null===(a=n.like)||void 0===a?void 0:a.badgeText,handler:function(e){return t("onStar",{event:(0,X.Z)((0,X.Z)({},e),{},{offsetX:l.x,offsetY:l.y}),clickMethod:"mouse"})}},{text:"\u8fdb\u5165\u4f5c\u8005\u4e3b\u9875",key:null===(r=n.avatar)||void 0===r?void 0:r.badgeText,handler:function(){return t("onAvatar")}},{text:"\u5206\u4eab",key:null===(i=n.share)||void 0===i?void 0:i.badgeText,handler:function(){return t("showShareCode",{clickMethod:"mouse"})}}]}),[t,l,n]),v=(0,m.useMemo)((function(){var e,l,o,a=[{text:"\u4e0d\u611f\u5174\u8da3",key:n.dislike.badgeText,handler:function(){return t(fe.B.Dislike)}},{text:"\u610f\u89c1\u53cd\u9988",handler:function(){return t("feedback")}}];return(null==r||null===(e=r.authorInfo)||void 0===e?void 0:e.uid)!==(null==i||null===(l=i.info)||void 0===l?void 0:l.uid)&&a.push({text:"\u4e3e\u62a5",handler:function(){return t("showReportModal")}}),s()(o=[te.WH.TenTimesDownload,te.WH.DownloadAfterLogin]).call(o,null==c?void 0:c.supportDownloadVideo)&&d&&a.push({text:"\u4e0b\u8f7d\u89c6\u9891",handler:function(){return t("downloadVideo")}}),a}),[t,i,r,n,c,d]),p=(0,m.useMemo)((function(){var e;if(!r)return"";var n={},t=le.getTabName();if(null!=r&&r.logParams){var l=r.logParams,o=(l.enter_from,l.previous_page,l.tab_name),a=(0,Q.Z)(l,pe);o&&(t=o),n[oe.LOG_PASS_THROW_PARAMS]=J()(a)}var i="";switch(r.awemeType){case I.ed.Note:i=(0,T.Wr)(r.awemeId,(0,_.stringify)((0,X.Z)((0,X.Z)({tab_name:t,previous_page:(0,Z.yW)()},(0,ie.U)()),n)));break;case I.ed.XgVideo:i=(0,T.Tl)({videoid:null==r?void 0:r.awemeId});break;default:var c="";if("search"===u)c=ae.VideoDetailModeFrom.SearchResult;else if("hot"===u){c=ae.VideoDetailModeFrom.HotDetail;var d=null==r?void 0:r.hotList;n.trending_topic=null==d?void 0:d.sentence,n.sentenceId=null==d?void 0:d.sentenceId,n.position=null==d?void 0:d.rank,n.hotValue=null==d?void 0:d.hotScore}if(i=(0,T.JF)(r.awemeId,(0,_.stringify)((0,X.Z)((0,X.Z)({tab_name:t,modeFrom:c,previous_page:(0,Z.yW)()},(0,ie.U)()),n))),s()(e=["userLike","userPost","userCollection"]).call(e,u)){var f,m=null===(f=ue.Le.getConfig(ue.gI.EnterDetailUrl))||void 0===f?void 0:f[r.awemeId];m&&(i=m)}}return i}),[r,u]),g=(0,m.useMemo)((function(){return[{component:m.createElement(ce.a,{href:globalThis.xssNamespace.douyin_web.filterUrl(p,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",className:H,rel:"opener",key:"enterDetail",onClick:function(){t("enterDetail")}},"\u8fdb\u5165\u8be6\u60c5\u9875"),handler:function(){return t("enterDetail")}}]}),[p,t]);return{menuList:(0,m.useMemo)((function(){var e;return ee()(e=[]).call(e,(0,q.Z)(f),(0,q.Z)(v),(0,q.Z)(o?g:[]))}),[f,v,o,g]),adMenuList:(0,m.useMemo)((function(){var e=[{text:"\u4e0d\u611f\u5174\u8da3",handler:function(){return t(fe.B.Dislike)}},{text:"\u559c\u6b22\u8be5\u5e7f\u544a",handler:function(){return t(fe.B.AdLike)}},{text:"\u4e3e\u62a5",handler:function(){return t(fe.B.AdReport)}},{text:"\u4e3a\u4ec0\u4e48\u770b\u5230\u5e7f\u544a",handler:function(){return t(fe.B.AdIntroduce)}}];if((0,w.L)(r)||(0,E.u)(r)||(0,y.AI)(r)||(0,C.o4)(r)){var n=(0,y.rQ)(r);e.unshift({component:m.createElement("div",{className:A},m.createElement("div",{className:U,onClick:function(e){P.emit(P.EVENT.openAdSideCard);var n=(0,k.Rx)(r);(0,b.E)("realtime_click",{tag:(0,x.f)(),value:null==n?void 0:n.creative_id,log_extra:null==n?void 0:n.log_extra,refer:"feedback"}),a(!1)}},m.createElement(se.Q,{src:globalThis.xssNamespace.douyin_web.filterUrl((null==n?void 0:n.image_url)||re.DEFAULT_AD_IMAGE_URL,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),iconHeight:28,iconWidth:28,className:B}),m.createElement("div",{className:V},m.createElement("span",null,n.button_text||"\u67e5\u770b\u8be6\u60c5"),m.createElement(de.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(ve,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),viewBox:"0 0 10 20",className:j}))),m.createElement(ne.i,{className:F}))})}return e}),[t,r,a])}}({shortcut:Oe,emitEvent:Be,position:Te,showEnterDetail:Y,setIsShow:Ie,awemeInfo:d,userInfo:_e,modalEnterFrom:he,abtestData:ye}),je=Ve.menuList,We=Ve.adMenuList,He=(0,m.useMemo)((function(){var e=me?We:je;return u()(e).call(e,(function(e){return!s()(g).call(g,e.key)}))}),[me,We,je,g]);return(0,m.useEffect)((function(){Fe()}),[ke,t]),(0,m.useEffect)((function(){null==Ee||Ee.on(h.FULLSCREEN_CHANGE,Fe);var e=P.listen(P.EVENT.pageFullScreen,(function(){Fe()}));return function(){null==Ee||Ee.off(h.FULLSCREEN_CHANGE,Fe),null==e||e()}}),[Ee]),Se?m.createElement("div",{className:R,ref:Re},m.createElement("div",{className:p()(D,(0,o.Z)({},O,(0,y.AI)(d)||(0,C.o4)(d)||(0,w.L)(d)||(0,E.u)(d))),style:{top:Te.y,left:Te.x},ref:De},f()(He).call(He,(function(e){return function(e){switch(!0){case Boolean(e.link):return m.createElement(ce.a,(0,a.Z)({},e.link,{className:z,key:e.text}),e.text);case Boolean(e.component):return e.component;default:return m.createElement("div",{className:W,onClick:e.handler,key:e.text},m.createElement("div",{className:z},e.text),e.key&&m.createElement("div",{className:G},"\uff08",e.key,"\uff09"))}}(e)})))):null},we=function(e){var n=(0,he.N)();return m.createElement(_e.k,{componentName:"MenuList",Slardar:n},m.createElement(ye,e))}},97941:function(e,n,t){t.d(n,{P:function(){return w}});var l=t(30906),o=t(92524),a=t.n(o),r=t(53864),i=t(22247),u=t(42053),c=t(353),s=t(80806),d=t(7976),f=t(13948),m=t(7782),v=t(46090),p=t(35667),g=t(72627),h=t(66028);function _(e){var n;return a()(n=e.config.plugins).call(n,u.default)>0}var y=function(e){var n=e.isActive,t=e.awemeInfo,o=e.abtestData,g=(0,p.n)(),h=(0,r.useRef)(t||null);return(0,r.useEffect)((function(){if(g&&t&&h.current&&t!==h.current){var e,r,p,y;if(n||g.pause(),(0,d.yf)({awemeInfo:t,abtestData:o}))if(a()(p=g.config.plugins).call(p,i.ZP)<0){var w;g.unRegisterPlugin(u.default.pluginName,!0),g.config.plugins.push(i.ZP);var E=(0,f.Q)({awemeInfo:t,abtestData:o,userselection:null===(w=(0,s.G)(c.SessionStorageKeys.manualSwitch))||void 0===w?void 0:w.gearType});g.playNext(E)}else{var k,b,C=(0,f.Q)({awemeInfo:t,abtestData:o,userselection:null===(k=(0,s.G)(c.SessionStorageKeys.manualSwitch))||void 0===k?void 0:k.gearType});null===(b=g.playNext)||void 0===b||b.call(g,(0,l.Z)((0,l.Z)({},C),{},{autoplay:n}))}else if(a()(y=g.config.plugins).call(y,i.ZP)>=0){var S;g.unRegisterPlugin(i.ZP.pluginName,!0);var I=(0,f.Q)({awemeInfo:t,abtestData:o,userselection:null===(S=(0,s.G)(c.SessionStorageKeys.manualSwitch))||void 0===S?void 0:S.gearType});(0,m.su)({awemeInfo:t,abtestData:o})&&(I.mp4encryptplayer=(0,m.rR)({abtestData:o}),_(g)||g.config.plugins.push(u.default)),g.playNext((0,l.Z)((0,l.Z)({},I),{},{autoplay:n}))}else{var N,x,T=(0,f.Q)({awemeInfo:t,abtestData:o,userselection:null===(N=(0,s.G)(c.SessionStorageKeys.manualSwitch))||void 0===N?void 0:N.gearType});if((0,m.su)({awemeInfo:t,abtestData:o})&&!_(g))g.config.plugins.push(u.default),g.playNext((0,l.Z)((0,l.Z)({},T),{},{mp4encryptplayer:(0,m.rR)({abtestData:o}),autoplay:n}));else null===(x=g.playNext)||void 0===x||x.call(g,(0,l.Z)((0,l.Z)({},T),{},{autoplay:n}))}null===(e=g.getPlugin)||void 0===e||null===(r=e.call(g,"PlayClaritySettingPlugin"))||void 0===r||r.updateConfig({awemeInfo:t}),g.crossOrigin=(0,v.S)(t)?"use-credentials":"anonymous"}h.current=t}),[g,n,t,o]),null},w=function(e){var n=(0,g.N)();return r.createElement(h.k,{componentName:"VideoSrcChange",Slardar:n},r.createElement(y,e))}},19175:function(e,n,t){t.d(n,{k:function(){return c}});var l=t(53864),o=t(35667),a=t(72627),r=t(81762),i=t(66028),u=function(e){var n=e.isActive,t=e.onVolumeShortCutChange,a=(0,o.n)();return(0,l.useEffect)((function(){var e,l=function(e){t(e)};n&&a&&(null===(e=a.on)||void 0===e||e.call(a,r.B.CustomShortCut,l));return function(){var e;null==a||null===(e=a.off)||void 0===e||e.call(a,r.B.CustomShortCut,l)}}),[a,n,t]),null},c=function(e){var n=(0,a.N)();return l.createElement(i.k,{componentName:"VolumeShortCutPlugin",Slardar:n},l.createElement(u,e))}},2915:function(e,n,t){t.d(n,{kL:function(){return G},JI:function(){return H},l7:function(){return B}});var l=t(30673),o=t(30906),a=t(19049),r=t(95508),i=t(73316),u=t(6670),c=t(78034),s=t(65146),d=t(94090),f=t.n(d),m=t(21155),v=t.n(m),p=t(76569),g=t.n(p),h=t(85792),_=t.n(h),y=t(21308),w=t.n(y),E=t(48051),k=t(53864),b=t(66028),C=t(79705),S=t.n(C),I=t(44487),N=t(353),x=t(39753),T=t(13971),L=t(71116),P=t(72603),Z=t(97876),M=t(68393),R=t(5277),D=t(35667),O=t(72627),A=t(81762),F=t(75780),U=t(96889),B=function(e){return e[e.Shortcut=0]="Shortcut",e}({});function V(e){var n=e.isOn;return k.createElement("div",{className:S()("xgTips")},n&&k.createElement("span",null,"\u5173\u95ed\u81ea\u52a8\u8fde\u64ad"),!n&&k.createElement("span",null,"\u81ea\u52a8\u8fde\u64ad"),k.createElement("span",{className:"shortcutKey"},"K"))}function j(e){var n=e.autoplay,t=e.xgSwitch,l=e.shortcutDisabled,o=(0,U.H)("auto_play");return k.createElement(k.Fragment,null,k.createElement("div",{ref:o,className:"xgplayer-icon",onClick:t,"data-e2e":"video-player-auto-play","data-e2e-state":n?"video-player-auto-playing":"video-player-no-auto-play"},k.createElement("div",{className:"xgplayer-setting-label"},k.createElement("button",{"aria-checked":"true",className:S()("xg-switch",{"xg-switch-checked":n}),"aria-labelledby":"xg-switch-pip",type:"button"},k.createElement("span",{className:"xg-switch-inner"})),k.createElement("span",{className:"xgplayer-setting-title"},"\u8fde\u64ad"))),!l&&k.createElement(V,{isOn:n}))}function W(e){var n=(0,T.$o)(null!=e?e:N.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return null!=n?n:0}var H=function(e){(0,u.Z)(t,e);var n=(0,c.Z)(t);function t(){var e,r;(0,a.Z)(this,t);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return r=n.call.apply(n,f()(e=[this]).call(e,c)),(0,s.Z)((0,i.Z)(r),"playeNextWeightNum",0),(0,s.Z)((0,i.Z)(r),"stopFlag",0),(0,s.Z)((0,i.Z)(r),"switchAutoPlay",(function(e){var n,t=null!==(n=null==e?void 0:e.isOn)&&void 0!==n?n:!r.config.nextAutoPlay;r.config.nextAutoPlay!==t&&r.autoPlayChangeLogic((0,o.Z)((0,o.Z)({},e),{},{isOn:t}))})),(0,s.Z)((0,i.Z)(r),"onMouseleave",(function(){r.emit("icon_mouseleave",{pluginName:r.pluginName})})),(0,s.Z)((0,i.Z)(r),"onMouseenter",(function(){r.emit("icon_mouseenter",{pluginName:r.pluginName})})),(0,s.Z)((0,i.Z)(r),"updateIsAutoPlay",(function(e){r.autoPlayChangeLogic((0,o.Z)({isOn:Boolean(Number(W(r.config.customLocalStorage))),logParams:{},isInnerReset:!0,switchBy:undefined},e))})),(0,s.Z)((0,i.Z)(r),"autoPlayChangeLogic",(function(e){var n=e.isOn,t=e.logParams,o=e.isInnerReset,a=e.switchBy,i=e.mode;if((!r.config.shortcutDisabled||a!==B.Shortcut)&&("syncInteraction"!==i&&L.Le.setConfig(L.gI.InnerAutoPlay,null),r.config.nextAutoPlay!==n&&r.root)){var u,c;r.config.nextAutoPlay=n,(0,T.qQ)(null!==(u=r.config.customLocalStorage)&&void 0!==u?u:N.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,n?"1":"0"),r.renderRoot();var s,d={isOn:Boolean(n),logParams:t,isInnerReset:o};if(null===(c=r.player)||void 0===c||c.emit(A.B.AutoPlaySwitchChange,d),r.root)v()(s=(0,l.Z)(r.root.getElementsByTagName("button"))).call(s,(function(e){return e.blur()}));r.stopFlag=0}})),(0,s.Z)((0,i.Z)(r),"onXgChange",(function(){var e,n=r.config.logInfo,t=n.author_id,l=n.group_id,a=n.log_pb,i=n.extraParams;(0,T.qQ)(null!==(e=r.config.customLocalStorage)&&void 0!==e?e:N.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,r.config.nextAutoPlay?"0":"1"),L.Le.getConfig(L.gI.IsInMixCard)&&L.Le.setConfig(L.gI.AutoPlayChanged,{changed:!0}),r.autoPlayChangeLogic({isOn:!r.config.nextAutoPlay,logParams:(0,o.Z)({enter_method:"click_bar",urlParamList:["previous_page"],author_id:t,group_id:l,log_pb:a,enter_from:(0,P.yW)(),status:r.config.nextAutoPlay?"off":"on"},i),isInnerReset:!1,switchBy:undefined})})),r}return(0,r.Z)(t,[{key:"afterCreate",value:function(){var e,n;this.config.disable||(this.renderRoot(),null===(e=this.player)||void 0===e||e.on("updateIsAutoPlay",this.updateIsAutoPlay),null===(n=this.player)||void 0===n||n.on(A.B.UpdateAutoPlaySwitch,this.switchAutoPlay),g()(this).call(this,"mouseenter",this.onMouseenter),g()(this).call(this,"mouseleave",this.onMouseleave))}},{key:"destroy",value:function(){var e,n;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseleave),null===(e=this.player)||void 0===e||e.off("updateIsAutoPlay",this.updateIsAutoPlay),null===(n=this.player)||void 0===n||n.off(A.B.UpdateAutoPlaySwitch,this.switchAutoPlay),(0,F.v)(this)}},{key:"renderRoot",value:function(){var e=Boolean(this.config.nextAutoPlay),n=this.onXgChange,t=k.createElement(j,{autoplay:e,xgSwitch:n,shortcutDisabled:this.config.shortcutDisabled});(0,F.s)(this,t)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-autoplay-setting automatic-continuous" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"AutoPlaySettingPlugin"}},{key:"defaultConfig",get:function(){return{position:E.kd.CONTROLS_RIGHT,index:9,className:"xgplayer-autoplay-setting"}}}]),t}(I.ZP),z=function(e){var n=e.isActive,t=e.awemeInfo,l=e.playNextFunc,o=e.ablePlayNext,a=e.shortcutDisabled,r=e.customLocalStorage,i=(0,D.n)(),u=(0,k.useMemo)((function(){return t}),[t]),c=(0,k.useCallback)((function(){var e,n=i.getPlugin("AutoPlaySettingPlugin");if(null!=n&&n.disable&&t.awemeId===x.X)return n.disable=!1,void Z.emit(Z.EVENT.changeLoginGuideStatus,"ShowLoginPanel");if(l&&null!=n&&null!==(e=n.config)&&void 0!==e&&e.nextAutoPlay&&0===(null==n?void 0:n.playeNextWeightNum)&&0===(null==n?void 0:n.stopFlag)&&o)(0,M.i0)(M.CK.Auto),null==l||l({from:"auto"}),L.Le.setConfig(L.gI.VideoPlayMethod,"auto_play_open");else{var a=function(){i.replay(),i.replayed=!0,L.Le.setConfig(L.gI.VideoPlayMethod,"auto")};(0,R.G6)()?_()(a,50):a()}}),[l,i,o]);return(0,k.useEffect)((function(){if(i&&u&&n){var e,t;if(i.replayed=!1,i.registerPlugin(H,{nextAutoPlay:Number(W(r)),logInfo:u,shortcutDisabled:a,customLocalStorage:r}),i.getPlugin("AutoPlaySettingPlugin")){var l=i.getPlugin("AutoPlaySettingPlugin");w()(l.playeNextWeightNum)||(l.playeNextWeightNum=0),e=Z.listen(Z.EVENT.videoStopPlayNext,(function(e){if(!1!==i.isUserActive){var n=(e||{}).openSideCard,t=i.getPlugin("AutoPlaySettingPlugin"),l=n?"stopFlag":"playeNextWeightNum";t&&t[l]<1&&(t[l]+=1)}})),t=Z.listen(Z.EVENT.videoRemoveStopPlayNext,(function(e){if(!1!==i.isUserActive){var n=(e||{}).openSideCard,t=i.getPlugin("AutoPlaySettingPlugin"),l=n?"stopFlag":"playeNextWeightNum";t&&(t[l]=Math.max(t[l]-1,0))}}))}return function(){var n,l;i.getPlugin("AutoPlaySettingPlugin")&&i.unRegisterPlugin("AutoPlaySettingPlugin",!0),null===(n=e)||void 0===n||n(),null===(l=t)||void 0===l||l()}}}),[i,u,n]),(0,k.useEffect)((function(){if(i&&n){var e=i.getPlugin("AutoPlaySettingPlugin");null==e||e.updateIsAutoPlay();var t=Z.listen(Z.EVENT.syncInteraction,(function(){i.registerPlugin(H,{nextAutoPlay:Number(W(r)),logInfo:u,shortcutDisabled:a,customLocalStorage:r})}));return function(){t()}}}),[i,n]),(0,k.useEffect)((function(){if(i&&n&&c)return i.on("ended",c),function(){i.off("ended",c)}}),[i,n,c]),null},G=function(e){var n=(0,O.N)();return k.createElement(b.k,{componentName:"AutoPlayPlugin",Slardar:n},k.createElement(z,e))}},63196:function(e,n,t){t.d(n,{SD:function(){return A},Yd:function(){return D},m4:function(){return Z}});var l=t(30673),o=t(19049),a=t(95508),r=t(73316),i=t(6670),u=t(78034),c=t(65146),s=t(94090),d=t.n(s),f=t(21155),m=t.n(f),v=t(76569),p=t.n(v),g=t(53864),h=t(48051),_=t(79705),y=t.n(_),w=t(61508),E=t(97702),k=t(44487),b=t(84631),C=t(66028),S=t(35667),I=t(72627),N=t(81762),x=t(75780),T=t(96889),L="immersive-player-switch-on",P="immersive-player-switch-on-hide-video-info",Z="immersive-player-switch-on-hide-interaction-area";function M(e){var n=e.isOn;return g.createElement("div",{className:y()("xgTips")},n&&g.createElement("span",null,"\u53d6\u6d88\u6e05\u5c4f"),!n&&g.createElement("span",null,"\u6e05\u5c4f"),g.createElement("span",{className:"shortcutKey"},"J"))}function R(e){var n=e.isOn,t=e.onSwitch,l=(0,T.H)("pure_mode");return g.createElement(g.Fragment,null,g.createElement("div",{className:"xgplayer-icon",onClick:t,ref:l},g.createElement("div",{className:"xgplayer-setting-label"},g.createElement("button",{"aria-checked":"true",className:y()("xg-switch",{"xg-switch-checked":n}),"aria-labelledby":"xg-switch-pip",type:"button"},g.createElement("span",{className:"xg-switch-inner"})),g.createElement("span",{className:"xgplayer-setting-title"},"\u6e05\u5c4f"))),g.createElement(M,{isOn:n}))}var D=function(e){(0,i.Z)(t,e);var n=(0,u.Z)(t);function t(){var e,a;(0,o.Z)(this,t);for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];return a=n.call.apply(n,d()(e=[this]).call(e,u)),(0,c.Z)((0,r.Z)(a),"onMouseenter",(function(){a.emit("icon_mouseenter",{pluginName:a.pluginName})})),(0,c.Z)((0,r.Z)(a),"onMouseLeave",(function(){a.emit("icon_mouseleave",{pluginName:a.pluginName})})),(0,c.Z)((0,r.Z)(a),"updateImmersiveSwitch",(function(e){var n,t,o,r=null!==(n=null==e?void 0:e.isOn)&&void 0!==n?n:!a.config.isOn,i=null!==(t=null==e?void 0:e.logParams)&&void 0!==t?t:{};if(null===(o=a.player)||void 0===o||o.emit(w.USER_ACTION,{action:"clean_screen",pluginName:"ImmersiveSwitchSettingPlugin",status:r?"open":"close"}),a.config.isOn!==r){var u,c;a.config.isOn=r,a.updateTargetsVisiblity();var s={isOn:r,logParams:i,isInnerReset:e.isInnerReset};null===(u=a.player)||void 0===u||u.emit(N.B.ImmersiveSwitchChange,s),a.renderRoot(),m()(c=(0,l.Z)(a.root.getElementsByTagName("button"))).call(c,(function(e){return e.blur()}))}})),a}return(0,a.Z)(t,[{key:"afterCreate",value:function(){var e;this.config.disable||(this.renderRoot(),this.updateTargetsVisiblity(),null===(e=this.player)||void 0===e||e.on(N.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch),p()(this).call(this,"mouseenter",this.onMouseenter),p()(this).call(this,"mouseleave",this.onMouseLeave))}},{key:"destroy",value:function(){var e;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseLeave),(0,x.v)(this),null===(e=this.player)||void 0===e||e.off(N.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch)}},{key:"hideTargets",value:function(){var e=this.root.closest(".basePlayerContainer");e&&(E.ZP.addClass(e,L),E.ZP.addClass(e,P))}},{key:"showTargets",value:function(){var e=this.root.closest(".basePlayerContainer");e&&(E.ZP.removeClass(e,L),E.ZP.removeClass(e,P))}},{key:"updateTargetsVisiblity",value:function(){this.config.isOn&&this.hideTargets(),!this.config.isOn&&this.showTargets()}},{key:"renderRoot",value:function(){var e=this,n=g.createElement(R,{isOn:Boolean(this.config.isOn),onSwitch:function(){e.updateImmersiveSwitch({isOn:!e.config.isOn,logParams:{enter_method:"click_bar"}})}});(0,x.s)(this,n)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-immersive-switch-setting immersive-switch" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"ImmersiveSwitchSettingPlugin"}},{key:"defaultConfig",get:function(){return{position:h.kd.CONTROLS_RIGHT,index:8,className:"xgplayer-immersive-switch-setting"}}}]),t}(k.ZP),O=function(e){var n=e.isActive,t=e.awemeInfo,l=e.isOnByOuter,o=void 0!==l&&l,a=(0,b.Z)(null==t?void 0:t.awemeId),r=(0,S.n)();return(0,g.useEffect)((function(){if(r&&n)return r.registerPlugin(D,{isOn:o}),function(){return r.getPlugin(D.pluginName)&&r.unRegisterPlugin(D.pluginName)}}),[r,n]),(0,g.useEffect)((function(){if(r&&n){var e=r.getPlugin(D.pluginName);null==e||e.updateImmersiveSwitch({isOn:o,isInnerReset:!0})}}),[o]),(0,g.useEffect)((function(){if(r&&n&&(null==t?void 0:t.awemeId)!==a){var e=r.getPlugin(D.pluginName);null==e||e.updateImmersiveSwitch({isOn:!1,isInnerReset:!0})}}),[r,n,null==t?void 0:t.awemeId,a]),null},A=function(e){var n=(0,I.N)();return g.createElement(C.k,{componentName:"ImmersiveSwitchPlugin",Slardar:n},g.createElement(O,e))}},78959:function(e,n,t){t.r(n),t.d(n,{PlayBackSetting:function(){return ee},PlayBackSettingInner:function(){return $}});var l=t(30906),o=t(19049),a=t(95508),r=t(73316),i=t(6670),u=t(78034),c=t(65146),s=t(64408),d=t(32781),f=t(5594),m=t.n(f),v=t(26447),p=t.n(v),g=t(85792),h=t.n(g),_=t(34346),y=t.n(_),w=t(94090),E=t.n(w),k=t(76569),b=t.n(k),C=t(8e3),S=t.n(C),I=t(48051),N=t(61508),x=t(44487),T=t(53864),L=t(31554),P=t(95138),Z=t(66028),M=t(79705),R=t.n(M),D=t(353),O=t(97876),A=t(72603),F=t(13971),U=t(71116),B=t(80806),V=new(t(13795).hD)({clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:"",item_duration_ms:0}},clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),j=t(35667),W=t(68843),H=t(72627),z=t(81762),G=t(75780),K=t(96889),q=["0.75","1.0","1.25","1.5","2.0"],Q=158112e5,X=!1;function Y(e){var n=e.playbackRate,t=e.xgCase,l=e.hasSelect,o=e.disable,a=e.player,r=e.loginBlock,i=e.loginDispatch,u=e.isActive,c=e.showTip,f=void 0!==c&&c,v=(0,K.H)("speed"),g=(0,T.useState)(!1),_=(0,d.Z)(g,2),w=_[0],E=_[1];(0,T.useEffect)((function(){var e=function(e){var n=e.rate,l=e.click_method;t.onPlayratioClick({rate:n,click_method:l}),a.emit(N.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin"})};if(a)return null==a||a.on(z.B.UpdateRadio,e),function(){null==a||a.off(z.B.UpdateRadio,e)}}),[a,t]);var k=(0,T.useCallback)((function(e){var n,t,l,o;if(null==e||null===(n=e.stopPropagation)||void 0===n||n.call(e),O.emit(O.EVENT.videoStopPlayNext),V.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,A.yW)(),params_for_special:"uc_login"}),2===r){var a=(0,F.$o)(D.LocalStorageKeys.SpeedBlock),u=((null==a?void 0:a.totalTimes)||0)+1;p()()-(null==a?void 0:a.lstTimestamp)>=Q&&(u=1),(0,F.qQ)(D.LocalStorageKeys.SpeedBlock,{lstTimestamp:p()(),totalTimes:u}),h()((function(){E(!1)}),500),U.Le.setConfig(U.gI.disableSpeed,!1)}(0,L.default)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u5207\u6362\u500d\u901f",success:(o=(0,s.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null==i||i({type:"updateUserInfo"}),O.emit(O.EVENT.videoRemoveStopPlayNext),U.Le.setConfig(U.gI.disableSpeed,!1),E(!1),null!=e&&e.callback?null==e||e.callback():X=!0;case 5:case"end":return n.stop()}}),n)}))),function(){return o.apply(this,arguments)}),next:"https://".concat(null===(t=window)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.host),enterMethod:"speed_up",onClose:function(){O.emit(O.EVENT.videoRemoveStopPlayNext)}})}),[r,i]);return(0,T.useEffect)((function(){f&&(X=!1,I.Zr.addClass(t.root,"login-slide-show"),h()((function(){I.Zr.removeClass(t.root,"login-slide-show")}),3e3))}),[f]),(0,T.useEffect)((function(){if(a&&u){var e=O.listen(O.EVENT.loginBlockKeyBoard,(function(e){var n=e.speed,t=e.callback;n&&k({callback:t})}));return function(){return e()}}}),[k,a,u]),(0,T.useEffect)((function(){if(a&&u)if(r){var e=(0,F.$o)(D.LocalStorageKeys.SpeedBlock),n=p()()-(null==e?void 0:e.lstTimestamp);1===r&&(E(!0),U.Le.setConfig(U.gI.disableSpeed,!0)),2===r&&(n<864e5||(null==e?void 0:e.totalTimes)>=5||n>=Q)?(E(!1),U.Le.setConfig(U.gI.disableSpeed,!1)):(E(!0),U.Le.setConfig(U.gI.disableSpeed,!0))}else E(!1),U.Le.setConfig(U.gI.disableSpeed,!1)}),[r,a,u]),(0,T.useEffect)((function(){if(a&&u){var e=function(){var e=a.playbackRate;e>2&&(e=1,a.playbackRate=e,(0,B.t_)(D.SessionStorageKeys.PlayerPlaybackratio,e))};return a.on(N.RATE_CHANGE,e),function(){a.off(N.RATE_CHANGE,e)}}}),[a,u]),o?T.createElement(T.Fragment,null,T.createElement("div",{className:"xgplayer-setting-playbackRatio disabled"},"\u500d\u901f"),T.createElement("div",{className:"xgTips"},"\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u500d\u901f\u529f\u80fd")):w?T.createElement(T.Fragment,null,T.createElement("div",{onClick:k,className:"xgplayer-setting-playbackRatio"},"\u500d\u901f"),T.createElement("div",{className:R()("xgTips",{showTip:!0})},T.createElement("div",{className:R()("blockLoginText")},"\u767b\u5f55\u540e\u5373\u53ef\u5207\u6362\u500d\u901f",T.createElement(P.zx,{className:"blockLoginBtn",onClick:k},"\u7acb\u5373\u767b\u5f55")))):T.createElement(T.Fragment,null,T.createElement("div",{ref:v,className:"xgplayer-setting-playbackRatio"},t.getIconText(n,l)),T.createElement("div",{className:"xgplayer-slider xgplayer-box-douyin "},T.createElement("div",{className:"xgplayer-setting-content"},T.createElement("div",{className:"xgplayer-playratio-wrap"},y()(q).call(q,(function(e){return T.createElement("div",{className:R()({select:Number(n)===Number(e)},"xgplayer-playratio-item"),onClick:function(){t.onPlayratioClick({rate:e}),a.emit(N.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin"})},key:e},e,"x")}))))))}var J=function(e){(0,i.Z)(t,e);var n=(0,u.Z)(t);function t(){var e,l;(0,o.Z)(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return l=n.call.apply(n,E()(e=[this]).call(e,i)),(0,c.Z)((0,r.Z)(l),"onMouseleave",(function(){l.timeoutId||(l.timeoutId=h()((function(){I.Zr.removeClass(l.root,"slide-show")}),300)),l.emit("icon_mouseleave",{pluginName:l.pluginName})})),(0,c.Z)((0,r.Z)(l),"onMouseenter",(function(){l.emit("icon_mouseenter",{pluginName:l.pluginName}),l.timeoutId&&(clearTimeout(l.timeoutId),l.timeoutId=null),I.Zr.addClass(l.root,"slide-show"),l.player.emit("playRatioPanelShow",l.player.playbackRate)})),l}return(0,a.Z)(t,[{key:"afterCreate",value:function(){var e=this;this.config.disable?this.onPlayRatioChange(1):(b()(this).call(this,"mouseenter",this.onMouseenter),b()(this).call(this,["blur","mouseleave"],this.onMouseleave),this.player.on("updatePlayBackRatio",(function(){e.updatePlayBackRatio()})),this.updatePlayBackRatio())}},{key:"updatePlayBackRatio",value:function(){var e;if(!this.config.disable){var n=(0,B.G)(D.SessionStorageKeys.PlayerPlaybackratio)||1;null==this||null===(e=this.onPlayRatioChange)||void 0===e||e.call(this,n)}}},{key:"onPlayratioClick",value:function(e){var n,t,l=e.rate,o=e.click_method,a=e.notStorage;if(Number(l)===Number(this.player.playbackRate))return!1;null===(n=(t=this.config).onRatioClick)||void 0===n||n.call(t,{rate:l,click_method:o,notStorage:a}),this.onPlayRatioChange(l)}},{key:"onPlayRatioChange",value:function(e){this.player&&(this.player.config.defaultPlaybackRate=Number(e),this.player.playbackRate=Number(e)),this.config.playBackRatio=Number(e),this.renderRoot(),I.Zr.removeClass(this.root,"slide-show")}},{key:"getIconText",value:function(e,n){if(!n)return"\u500d\u901f";var t=S()(q).call(q,(function(n){return Number(n)===Number(e)}))||"1.0";return"".concat(t,"x")}},{key:"destroy",value:function(){this.player.playbackRate=1,this.player.config.defaultPlaybackRate=1,this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),(0,G.v)(this)}},{key:"renderRoot",value:function(){var e,n=this.config.playBackRatio||1,t=this.config,l=t.disable,o=t.loginBlock,a=t.loginDispatch,r=t.isActive,i=((null===(e=this.player)||void 0===e?void 0:e.config)||{}).playerPermanentlyShowInfo;if(this.root){var u=T.createElement(Y,{hasSelect:null!==(0,B.G)(D.SessionStorageKeys.PlayerPlaybackratio),playbackRate:n,playerPermanentlyShowInfo:i,onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave,xgCase:this,disable:l,player:this.player,loginBlock:o,loginDispatch:a,isActive:r,showTip:X});(0,G.s)(this,u)}}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-playback-setting" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"PlayBackSettingPlugin"}},{key:"defaultConfig",get:function(){return{position:I.kd.CONTROLS_RIGHT,index:6,className:"xgplayer-playback-setting"}}}]),t}(x.ZP),$=function(e){var n=e.awemeInfo,t=e.logParams,o=e.isActive,a=e.disable,r=e.loginBlock,i=e.loginDispatch,u=(0,j.n)(),c=(0,T.useRef)(null);return c.current=(0,T.useCallback)((function(e){var o,a,r=e.rate,i=e.click_method,u=e.notStorage;V.sendLog("clickVideoSpeed",(0,l.Z)({urlParamList:["previous_page"],author_id:null==n||null===(o=n.authorInfo)||void 0===o?void 0:o.uid,group_id:null==n?void 0:n.awemeId,log_pb:null==n?void 0:n.logPb,item_duration_ms:(null==n||null===(a=n.video)||void 0===a?void 0:a.duration)||0,enter_from:(0,A.yW)(),speed:r,click_method:i},t)),u||(0,B.t_)(D.SessionStorageKeys.PlayerPlaybackratio,Number(r))}),[t,n]),(0,T.useEffect)((function(){if(u&&68!==(null==n?void 0:n.awemeType))return u.registerPlugin(J,{onRatioClick:function(){c.current.apply(c,arguments)},disable:a,loginBlock:r,loginDispatch:i,isActive:o}),function(){u.getPlugin("PlayBackSettingPlugin")&&u.unRegisterPlugin("PlayBackSettingPlugin",!0)}}),[u,n,r,i,o,a]),(0,T.useEffect)((function(){if(u&&o){var e=u.getPlugin("PlayBackSettingPlugin");!e||a||r||null==e||e.updatePlayBackRatio();var n=O.listen(O.EVENT.syncInteraction,(function(){e&&(null==e||e.updatePlayBackRatio())}));return function(){n()}}}),[o,u,a,r]),(0,W.u)(u,z.B.ChangePlayRate,(function(e){var n=e.rate,t=e.notStorage;if(u&&o){var l=u.getPlugin("PlayBackSettingPlugin");l&&(null==l||l.onPlayratioClick({rate:n,notStorage:t}))}})),null},ee=function(e){var n=(0,H.N)();return T.createElement(Z.k,{componentName:"PlayBackSetting",Slardar:n},T.createElement($,e))}},46175:function(e,n,t){t.d(n,{P:function(){return Y}});var l=t(30906),o=t(60260),a=t.n(o),r=t(19478),i=t.n(r),u=t(34346),c=t.n(u),s=t(53864),d=t(97702),f=t(56920),m=t(72603),v=t(66503),p=t(91242),g=t(57032),h=t(65902),_=t(19049),y=t(95508),w=t(6670),E=t(78034),k=t(65146),b=t(30673),C=t(32781),S=t(76569),I=t.n(S),N=t(97609),x=t.n(N),T=t(53361),L=t.n(T),P=t(26447),Z=t.n(P),M=t(44487),R=t(79705),D=t.n(R),O=t(96716),A=t(92267),F="tdX4v_Nn",U="EHEm3UL4",B="dHyo7zUI",V="bWH8wgXk",j=t(75780);var W=function(e){var n,t=e.fragments,o=void 0===t?[]:t,a=e.player,r=e.awemeInfo,i=e.abtestData,u=e.currentTime,d=e.hoverState,v=e.logParams,p=(0,s.useState)(null!=u?u:0),g=(0,C.Z)(p,2),h=g[0],_=g[1],y=(0,s.useRef)(0),w=(0,s.useRef)(r),E=function(e){A.i.sendLog("chapterContentShow",(0,l.Z)((0,l.Z)({enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)()},e),v))},S=(0,O.x)(I()(E).call(E,null,{group_id:null==r?void 0:r.awemeId,chapter_num:(null==o?void 0:o.length)||0}));(0,s.useEffect)((function(){_(u)}),[u]),(0,s.useEffect)((function(){w.current=r}),[r]);var N=(0,s.useMemo)((function(){if(o){var e,n,t,l=x()(e=(0,b.Z)(o)).call(e),a=L()(l).call(l,(function(e){return e.timestamp<=1e3*h})),r=-1,i=0;if(-1!==a)i=null===(t=l[a])||void 0===t?void 0:t.timestamp,r=null==o?void 0:L()(o).call(o,(function(e){return e.timestamp===i}));return{desc:null===(n=l[a])||void 0===n?void 0:n.desc,index:r}}return{desc:"",index:0}}),[h,o]);(0,s.useEffect)((function(){if(d&&(null==i?void 0:i.chapterList)===f.n6.HoverList){var e,n,t=null===(e=S.current)||void 0===e||null===(n=e.querySelectorAll("li"))||void 0===n?void 0:n[N.index];t&&(l=t,o=S.current,r=(a=o||{}).clientHeight,u=a.scrollTop,(c=(l||{}).offsetTop-u)<0||!(c<r))&&(S.current.scrollTop=(null==t?void 0:t.offsetTop)-6)}var l,o,a,r,u,c}),[N.index,d,i]);return(null==i?void 0:i.chapterList)===f.n6.HoverList?s.createElement("ul",{ref:S,className:F,onWheel:function(e){return e.stopPropagation()},onMouseMove:function(e){return e.stopPropagation()},onMouseEnter:function(){return y.current=Z()()},onMouseLeave:function(){var e;A.i.sendLog("chapterContentExit",(0,l.Z)({enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)(),group_id:null==r?void 0:r.awemeId,chapter_num:null==r||null===(e=r.chapterInfo)||void 0===e?void 0:e.list.length,duration:Z()()-y.current},v))}},c()(o).call(o,(function(e,n){var t=e.desc,i=e.timestamp;return s.createElement("li",{title:t,className:D()(U,(0,k.Z)({},B,n===N.index)),key:i,onClick:function(){!function(e){var n=e.timestamp,t=e.index,i=void 0===t?0:t;a&&(A.i.sendLog("chapterContentClick",(0,l.Z)({enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)(),group_id:null==r?void 0:r.awemeId,chapter_num:(null==o?void 0:o.length)||0,chapter_index:i+1},v)),a.seek(n/1e3),a.plugins.progress.unlock())}({timestamp:i,index:n})}},t)}))):s.createElement("div",{onMouseMove:function(e){return e.stopPropagation()},className:V},null===(n=o[N.index])||void 0===n?void 0:n.desc)},H=function(e){(0,w.Z)(t,e);var n=(0,E.Z)(t);function t(e){var l,o;return(0,_.Z)(this,t),(o=n.call(this,e)).fragments=(null===(l=o.config)||void 0===l?void 0:l.fragments)||[],o}return(0,y.Z)(t,[{key:"afterCreate",value:function(){this.renderRoot()}},{key:"renderRoot",value:function(){this.root&&(0,j.s)(this,s.createElement(W,(0,h.Z)({},this.config,{player:this.player})))}},{key:"destroy",value:function(){(0,j.v)(this)}},{key:"updateConfig",value:function(e){this.config=(0,l.Z)((0,l.Z)({},this.config),e),this.renderRoot()}},{key:"render",value:function(){return'<div class="progress-text-list"></div>'}}],[{key:"pluginName",get:function(){return"PreviewExtText"}},{key:"defaultConfig",get:function(){return{fragments:[]}}}]),t}(M.ZP),z=t(66028),G=t(35667),K=t(72627),q=t(52249),Q=t.n(q),X=function(e){var n=(0,G.n)(),t=e.isActive,o=e.awemeInfo,r=e.abtestData,u=e.disableChapterList,h=void 0!==u&&u,_=e.logParams;return(0,s.useEffect)((function(){var e,u,s,y,w,E=(null===(e=navigator)||void 0===e?void 0:e.hardwareConcurrency)||0,k=(null==r?void 0:r.chapterList)!==f.n6.Off&&!h,b=function(e){var n,t=e.chapterInfo,l=e.video;if(!t.status)return undefined;var o,a=l.duration,r=t.list,i=[];return Q()(r).call(r,(function(e,n){var t=(n.timestamp-e.timestamp)/a;return i.push({percent:t}),n})),0!==r[0].timestamp&&i.unshift({percent:r[0].timestamp/a}),a>(null===(n=r[r.length-1])||void 0===n?void 0:n.timestamp)&&i.push({percent:(a-(null===(o=r[r.length-1])||void 0===o?void 0:o.timestamp))/a}),i}(o);if((k&&(null==b?void 0:b.length)>0?(null==o||null===(u=o.video)||void 0===u?void 0:u.duration)>=6e4:(null==o||null===(s=o.video)||void 0===s?void 0:s.duration)>=18e4&&E>=8)&&n&&t&&null!=o&&null!==(y=o.video)&&void 0!==y&&null!==(w=y.bigThumbs)&&void 0!==w&&w[0]){var C,S,I,N,x,T,L,P=(null==o||null===(C=o.video)||void 0===C||null===(S=C.bigThumbs)||void 0===S?void 0:S[0])||{},Z=P.img_num,M=P.img_x_len,R=P.img_y_len,D=P.img_y_size,O=P.img_x_size,A=O/D,F={thumbnail:{urls:null==o||null===(I=o.video)||void 0===I?void 0:c()(N=I.bigThumbs).call(N,(function(e){return e.img_url})),pic_num:Z,row:R,col:M,height:D,width:O},progresspreview:{width:A<1?68:90*A,height:A<1?68/A:90}};b&&k&&(F.progress={fragments:b,fragAutoFocus:!0,fragFocusClass:"inner-focus-highlight"}),k&&(F.progresspreview.isHideThumbnailHover=(null==r?void 0:r.chapterList)===f.n6.TagList),null==n||n.setConfig(F);var U=n.getPlugin("progress"),B=i()((function(e){var n,t;g.Z.sendLog("progressPreview",(0,l.Z)({enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)(),enter_method:"hover",video_time:(0,v.n)(null==o||null===(n=o.video)||void 0===n?void 0:n.duration),chapter_index:(0,p.P)({awemeInfo:o,currentTime:e}),is_chapter_bar:null!=o&&null!==(t=o.chapterInfo)&&void 0!==t&&t.status?1:0,group_id:null==o?void 0:o.awemeId},_))}),500),V=a()((function(e){var t,l=e.currentTime,o=null==n||null===(t=n.getPlugin)||void 0===t?void 0:t.call(n,"PreviewExtText");o&&o.updateConfig({currentTime:l,hoverState:!0}),B(l)}),50),j=function(e){var n,t,a=e.currentTime;g.Z.sendLog("progressPreview",(0,l.Z)({enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)(),enter_method:"click",video_time:(0,v.n)(null==o||null===(n=o.video)||void 0===n?void 0:n.duration),chapter_index:(0,p.P)({awemeInfo:o,currentTime:a}),is_chapter_bar:null!=o&&null!==(t=o.chapterInfo)&&void 0!==t&&t.status?1:0,group_id:null==o?void 0:o.awemeId},_))};null==n||null===(x=n.plugins)||void 0===x||null===(T=x.progresspreview)||void 0===T||null===(L=T.enable)||void 0===L||L.call(T),null==U||U.addCallBack("dragmove",V),null==U||U.addCallBack("click",j);var W=(null==o?void 0:o.chapterInfo)||{},z=W.list;if(W.status&&k){var G,K;d.ZP.addClass(null==n?void 0:n.root,"needChapterStyle");var q,X,Y=null==n?void 0:n.root.querySelector(".xgplayer-progress");if(Y)null==Y||null===(q=Y.style)||void 0===q||q.setProperty("--max-width","".concat(A>1?90*A-2:68/A/3*4-2,"px")),null==Y||null===(X=Y.style)||void 0===X||X.setProperty("--thumbnail-border-radius","".concat(A>1?"4px 4px 0 0":"none"));n.registerPlugin({plugin:H,options:{root:null==n||null===(G=n.plugins)||void 0===G||null===(K=G.progresspreview)||void 0===K?void 0:K.extTextRoot,config:{fragments:z,awemeInfo:o,abtestData:r,currentTime:0,logParams:_}}})}return function(){var e,t,l;n.getPlugin("PreviewExtText")&&(n.unRegisterPlugin("PreviewExtText"),null==n||n.setConfig({progress:{fragments:[]}})),d.ZP.removeClass(null==n?void 0:n.root,"needChapterStyle"),null==n||null===(e=n.plugins)||void 0===e||null===(t=e.progresspreview)||void 0===t||null===(l=t.disable)||void 0===l||l.call(t),null==U||U.removeCallBack("dragmove",V),null==U||U.removeCallBack("click",j)}}}),[n,t,o,r,h,_]),null},Y=function(e){var n=(0,K.N)();return s.createElement(z.k,{componentName:"ProgressPreview",Slardar:n},s.createElement(X,e))}},57032:function(e,n,t){var l=t(13795);n.Z=new l.hD({progressPreview:{eventName:"progress_preview",params:{enter_from:"",enter_method:"",video_time:0,enter_from_merge:"",tab_name:"",group_id:"",chapter_index:0,is_chapter_bar:0}},progressClick:{eventName:"progress_click",params:{enter_from:"",enter_from_merge:"",tab_name:"",group_id:"",click_method:"hot_key",rate:-1,action:"",is_small_window:"0",chapter_index:0,is_chapter_bar:0}},chapterContentShow:{eventName:"chapter_content_show",params:{enter_from_merge:"",enter_from:"",tab_name:"",group_id:"",chapter_num:0}},chapterContentClick:{eventName:"chapter_content_click",params:{enter_from_merge:"",enter_from:"",tab_name:"",group_id:"",chapter_num:0,chapter_index:0}},chapterContentExit:{eventName:"chapter_content_exit",params:{enter_from_merge:"",enter_from:"",tab_name:"",group_id:"",chapter_num:0,duration:0}}})},11236:function(e,n,t){t.r(n),t.d(n,{SettingList:function(){return Ue},SettingListInner:function(){return Fe},SettingPlugin:function(){return Oe}});var l,o=t(19049),a=t(95508),r=t(6670),i=t(78034),u=t(30906),c=t(65146),s=t(32781),d=t(67624),f=t.n(d),m=t(85792),v=t.n(m),p=t(34346),g=t.n(p),h=t(53864),_=t(48051),y=t(44487),w=t(79705),E=t.n(w),k=t(56920),b=t(353),C=t(72603),S=t(80806),I=t(71116),N=t(97876),x="IvTlS_wx",T="f4b9ocPS",L="B4P3dTuO";function P(){return P=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},P.apply(this,arguments)}var Z,M=function(e){return h.createElement("svg",P({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=h.createElement("path",{d:"M22.526 15.973c0-.408-.043-.704-.043-.704a.789.789 0 01.357-.736l.89-.514a.495.495 0 00.181-.675l-1.69-2.923a.496.496 0 00-.675-.18l-.89.512a.797.797 0 01-.818-.056s-.237-.185-.583-.384c-.347-.2-.638-.319-.638-.319a.796.796 0 01-.457-.68V8.286a.496.496 0 00-.495-.495h-3.377a.496.496 0 00-.495.495v1.028a.796.796 0 01-.457.68s-.29.119-.637.318c-.347.2-.584.385-.584.385a.796.796 0 01-.819.056l-.89-.514a.496.496 0 00-.675.181l-1.688 2.924a.496.496 0 00.18.675l.89.514a.789.789 0 01.358.736s-.043.296-.043.704c0 .409.043.705.043.705.039.269-.122.6-.358.736l-.89.513a.495.495 0 00-.18.675l1.69 2.923c.135.236.44.317.675.181l.89-.513a.794.794 0 01.818.057s.217.17.552.366c.355.207.668.335.668.335.252.103.458.41.458.681v1.028c0 .272.222.494.494.494h3.377a.496.496 0 00.495-.494v-1.028c0-.272.206-.578.457-.68 0 0 .289-.118.633-.316.348-.2.587-.387.587-.387a.796.796 0 01.819-.056l.89.513c.236.136.54.055.676-.18l1.688-2.924a.495.495 0 00-.18-.675l-.89-.513a.788.788 0 01-.357-.736s.043-.296.043-.705zm-6.55 2.727a2.728 2.728 0 112.73-2.727 2.728 2.728 0 01-2.73 2.727z",fill:"#fff",fillOpacity:.9})))},R=t(38660),D="pTAyAqOy",O="mOuzCq8W",A="G5nmKi1W",F="J_vFfhB8",U="i80xsoEe",B=t(49083),V=t(2915),j=t(81762),W=function(e){var n=e.autoPlayInit,t=e.player,l=e.isActive,o=e.logFn,a=(0,h.useState)(n),r=(0,s.Z)(a,2),i=r[0],u=r[1],c=(0,h.useCallback)((function(){o("auto_play");var e={switchBy:V.l7.Shortcut,logParams:{enter_method:"play_setting_panel"}};null==t||t.emit(j.B.UpdateAutoPlaySwitch,e),(0,R.hB)()}),[t,o]);return(0,h.useEffect)((function(){var e=function(){u((function(e){return!e}))};if(t&&l)return null==t||t.on(j.B.UpdateAutoPlaySwitch,e),function(){null==t||t.off(j.B.UpdateAutoPlaySwitch,e)}}),[t,l]),h.createElement("div",{className:D},h.createElement("div",{className:F},"\u8fde\u64ad"),h.createElement(B.Q,{isChecked:i,onClick:c}))},H=function(e){var n=e.isOnInit,t=e.player,l=e.isActive,o=e.logFn,a=(0,h.useState)(Boolean(n)),r=(0,s.Z)(a,2),i=r[0],u=r[1],c=(0,h.useCallback)((function(){null==t||t.emit(j.B.UpdateImmersiveSwitch,{logParams:{enter_method:"play_setting_panel"}}),(0,R.hB)(),o("pure_mode")}),[t]);return(0,h.useEffect)((function(){var e=function(){u((function(e){return!e}))};if(t&&l)return null==t||t.on(j.B.UpdateImmersiveSwitch,e),function(){null==t||t.off(j.B.UpdateImmersiveSwitch,e)}}),[t,l]),h.createElement("div",{className:D},h.createElement("div",{className:F},"\u6e05\u5c4f"),h.createElement(B.Q,{isChecked:i,onClick:c}))},z=t(86846);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},G.apply(this,arguments)}var K=function(e){return h.createElement("svg",G({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Z||(Z=h.createElement("path",{d:"M6 10l4-4-4-4",stroke:"#fff",strokeOpacity:.35,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},q=function(e){var n=e.onChange,t=e.logFn;return h.createElement("div",{className:D,onClick:function(){null==n||n(),null==t||t("auto_play")}},h.createElement("div",{className:F},"\u8fde\u64ad"),h.createElement(z.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(K,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"}))},Q=t(8e3),X=t.n(Q),Y=t(13795),J=new Y.hD({clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),$=t(68843),ee=t(95138),ne=["0.75","1.0","1.25","1.5","2.0"],te=function(e){var n=e.playbackRate,t=e.hasSelect,l=e.onChange,o=e.disable,a=e.logFn,r=e.player,i=e.disableSpeed,u=e.setIsShowPlayBackRatio,d=(0,h.useState)(n),f=(0,s.Z)(d,2),m=f[0],p=f[1];return(0,$.u)(r,j.B.ChangePlayRate,(function(e){var n=e.rate;p(n)})),(0,h.useEffect)((function(){p(n)}),[n]),h.createElement("div",{className:E()(D,(0,c.Z)({},A,o)),onClick:function(){if(!o){if(i)return J.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,C.yW)(),params_for_special:"uc_login"}),void N.emit(N.EVENT.loginBlockKeyBoard,{speed:!0,callback:function(){null==l||l(),null==a||a("speed"),v()((function(){u(!1)}),3e3)}});null==l||l(),null==a||a("speed")}}},h.createElement("div",{className:F},"\u500d\u901f"),h.createElement("div",{className:O},!i||o?h.createElement(h.Fragment,null,h.createElement("div",null,o?"1.0x":function(e,n){if(!n)return"\u500d\u901f";var t=X()(ne).call(ne,(function(n){return Number(n)===Number(e)}))||"1.0";return"".concat(t,"x")}(m,t)),h.createElement(z.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(K,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"})):h.createElement(ee.zx,{className:U},"\u767b\u5f55\u5373\u4eab")))},le=t(25917),oe=function(e){var n=e.onChange,t=e.logFn,l=(0,le.Jy)(e),o=(0,s.Z)(l.currentState,1)[0];return h.createElement("div",{className:D,onClick:function(){null==n||n(),null==t||t("clarity")}},h.createElement("div",{className:F},"\u6e05\u6670\u5ea6"),h.createElement("div",{className:O},h.createElement("div",null,o),h.createElement(z.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(K,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"})))},ae=t(76569),re=t.n(ae),ie=t(96716),ue=t(44833),ce=new Y.hD({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:"",enter_from_merge:"",enter_from:"",item_duration_ms:0}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}}),se="cBDDEu7S",de="xRIYPQem",fe="Bqf1PM7Y",me="ZVjjkymz",ve="RZoqY5zQ",pe=function(e){ce.sendLog("clarityCellShow",(0,u.Z)({},e))},ge=function(e){var n=e.awemeInfo,t=e.onMouseLeave,l=e.player,o=(0,ie.x)(re()(pe).call(pe,null,(0,u.Z)((0,u.Z)({group_id:null==n?void 0:n.awemeId},(0,ue.t)()),{},{enter_method:"play_setting_panel"}))),a=(0,le.Jy)(e),r=(0,s.Z)(a.indexSelectedState,2),i=r[0],d=r[1],f=a.lists,m=(0,h.useCallback)((function(e){var n;null==l||l.emit(j.B.UpdateClarity,{item:e,logParams:{enter_method:"play_setting_panel"}}),d(e.key),null==t||t(),N.emit(null==N||null===(n=N.EVENT)||void 0===n?void 0:n.clarityRel,{exitInner:!0})}),[l,t]);return h.createElement("div",{ref:o,className:E()(se,"clarityPanel")},h.createElement("div",{className:de},"\u6e05\u6670\u5ea6"),h.createElement("div",{className:fe},null==f?void 0:g()(f).call(f,(function(e){return h.createElement("div",{key:e.key,className:E()(me,(0,c.Z)({},ve,e.key===i)),onClick:function(){return m(e)}},e.val)}))))},he=["0.75","1.0","1.25","1.5","2.0"];function _e(e){var n=e.player,t=e.ratio,l=(e.awemeInfo,e.logParams,e.onMouseLeave),o=(0,h.useState)(t),a=(0,s.Z)(o,2),r=a[0],i=a[1];return(0,$.u)(n,j.B.ChangePlayRate,(function(){null==l||l()})),h.createElement("div",{className:se},h.createElement("div",{className:de},"\u500d\u901f"),h.createElement("div",{className:fe},null==he?void 0:g()(he).call(he,(function(e){return h.createElement("div",{key:e,className:E()(me,(0,c.Z)({},ve,Number(r)===Number(e))),onClick:function(){return t=Number(e),null==n||n.emit(j.B.UpdateRadio,{rate:t,click_method:"play_setting_panel"}),i(Number(t)),void(null==l||l());var t}},e,"x")}))))}var ye="LsYU_cp_",we="go_ZBEBJ",Ee="Xx5As42q",ke="bkArCqFd",be="a_ekHE3X",Ce=t(10603),Se=t(9909);function Ie(e){var n,t=e.player,l=e.onMouseLeave,o=(e.isActive,e.aloneState),a=e.awemeInfo,r=(0,h.useRef)(!0),i=(0,Ce.iu)({isSetLog:!0,awemeInfo:a,plugin:null==t||null===(n=t.getPlugin)||void 0===n?void 0:n.call(t,"InnerAutoPlayPlugin"),defaultModeRef:r,aloneState:o}),u=(0,s.Z)(i,2),d=u[0],f=u[1];return h.createElement("div",{className:ye},h.createElement("div",{className:we},"\u8fde\u64ad"),h.createElement("div",{className:Ee},g()(Ce.zQ).call(Ce.zQ,(function(e,n){return h.createElement("div",{key:e,className:E()(be,(0,c.Z)({},ke,n===d)),onClick:function(){return function(e){null==t||t.emit(j.B.UpdateAutoPlay,{index:e,logParams:{enter_method:"play_setting_panel"}}),f(e),null==l||l()}(n)}},h.createElement(Se.Z,{width:24,height:24,viewBox:"0 0 24 24",src:globalThis.xssNamespace.douyin_web.filterUrl(Ce.zf[n],null,{logType:"js.href/src",mode:"black",reportOnly:!1}),onMouseEnter:function(){}}),h.createElement("span",null,e))}))))}var Ne=new Y.hD({playSettingPanelShow:{eventName:"play_setting_panel_show",params:{enter_from_merge:"",enter_from:""}},playSettingPanelClick:{eventName:"play_setting_panel_click",params:{enter_from_merge:"",enter_from:"",click_position:""}},playSettingIconShow:{eventName:"play_setting_icon_show",params:{enter_from_merge:"",enter_from:"",icon:""}}}),xe=t(7573),Te=t(35667),Le=t(72627),Pe=t(66028),Ze=t(63196),Me=t(75780),Re=new(f())([[xe.p.AutoPlayer,function(e){return h.createElement(W,e)}],[xe.p.Clear,function(e){return h.createElement(H,e)}],[xe.p.InnerAutoPlayer,function(e){return h.createElement(q,e)}],[xe.p.PlayBackRatio,function(e){return h.createElement(te,e)}],[xe.p.FakeScreen,function(e){return h.createElement(oe,e)}]]),De=function(e){Ne.sendLog("playSettingPanelClick",{enter_from_merge:(0,C.yW)(),enter_from:(0,C.vM)(),click_position:e})},Oe=function(e){var n,t,l,o,a,r,i,d,m,p,_=e.hideList,y=e.awemeInfo,w=e.player,P=e.isActive,Z=e.userInfo,R=e.dispatch,D=e.abtestData,O=e.isAdAweme,A=e.search33PxUnify,F=(0,h.useState)(!0),U=(0,s.Z)(F,2),B=U[0],j=U[1],W=(0,h.useState)(!1),H=(0,s.Z)(W,2),z=H[0],G=H[1],K=(0,h.useState)(!1),q=(0,s.Z)(K,2),Q=q[0],X=q[1],Y=(0,h.useState)(!1),J=(0,s.Z)(Y,2),$=J[0],ee=J[1],ne=(0,h.useRef)(!1),te=(0,h.useRef)(null),le=(0,h.useRef)(null),oe=new(f())([[xe.p.AutoPlayer,{autoPlayInit:(null===(n=w.getPlugin(V.JI.pluginName))||void 0===n||null===(t=n.config)||void 0===t?void 0:t.nextAutoPlay)||!1,player:w,isActive:P,logFn:De}],[xe.p.Clear,{isOnInit:(null===(l=w.getPlugin(Ze.Yd.pluginName))||void 0===l||null===(o=l.config)||void 0===o?void 0:o.isOn)||!1,player:w,isActive:P,logFn:De}],[xe.p.InnerAutoPlayer,{onChange:function(){j(!0),ee(!0)},logFn:De}],[xe.p.PlayBackRatio,{onChange:function(){j(!0),X(!0)},setIsShowPlayBackRatio:X,hasSelect:null!==(0,S.G)(b.SessionStorageKeys.PlayerPlaybackratio),playbackRate:(0,S.G)(b.SessionStorageKeys.PlayerPlaybackratio)||1,disable:O,logFn:De,player:w,disableSpeed:I.Le.getConfig(I.gI.disableSpeed)}],[xe.p.FakeScreen,{onChange:function(){j(!0),G(!0)},userInfo:Z,abtestData:D,awemeInfo:y,currentDefinition:null==w||null===(a=w.getPlugin)||void 0===a||null===(r=a.call(w,"bitrateselector"))||void 0===r||null===(i=r.curBitRate)||void 0===i?void 0:i.definition,userSelectDefinition:null==w?void 0:w.config.userSelectDefinition,userSelectUpdate:null==w?void 0:w.config.userSelectUpdate,logFn:De}]]),ae=(0,h.useCallback)((function(e){var n,t;clearTimeout(le.current),(null==e?void 0:e.target)!==(null==te?void 0:te.current)&&(null==e?void 0:e.target)!==(null==w||null===(n=w.root)||void 0===n||null===(t=n.querySelector)||void 0===t?void 0:t.call(n,".setting-icon"))||(j(!1),Ne.sendLog("playSettingPanelShow",{enter_from_merge:(0,C.yW)(),enter_from:(0,C.vM)()})),ne.current||(N.emit(N.EVENT.videoStopPlayNext),ne.current=!0)}),[]);return(0,h.useEffect)((function(){return function(){return N.emit(N.EVENT.videoRemoveStopPlayNext)}}),[]),h.createElement("div",{className:x,onMouseEnter:ae,ref:te,onMouseLeave:function(){le.current=v()((function(){j(!0)}),300),G(!1),X(!1),ee(!1),N.emit(N.EVENT.videoRemoveStopPlayNext),ne.current=!1}},B?null:h.createElement("div",{className:E()(T,(0,c.Z)({},L,A&&Number(null==D?void 0:D.searchPlayerUnify)===k.gA.V1))},g()(_).call(_,(function(e){var n=Re.get(e[0]),t=oe.get(e[0]);return null==n?void 0:n((0,u.Z)((0,u.Z)({},t),{},{key:e[0]}))}))),z&&h.createElement(ge,{awemeInfo:y,userInfo:Z,onMouseLeave:function(){j(!1),G(!1)},dispatch:R,player:w,isActive:P,currentDefinition:null==w||null===(d=w.getPlugin)||void 0===d||null===(m=d.call(w,"bitrateselector"))||void 0===m||null===(p=m.curBitRate)||void 0===p?void 0:p.definition,userSelectDefinition:null==w?void 0:w.config.userSelectDefinition,abtestData:D,userSelectUpdate:null==w?void 0:w.config.userSelectUpdate}),Q&&h.createElement(_e,{player:w,ratio:(0,S.G)(b.SessionStorageKeys.PlayerPlaybackratio)||1,awemeInfo:y,logParams:{},onMouseLeave:function(){j(!1),X(!1)}}),$&&h.createElement(Ie,{onMouseLeave:function(){j(!1),ee(!1)},player:w,isActive:P,aloneState:null==D?void 0:D.innerAutoplay,awemeInfo:y}),h.createElement(Se.Z,{className:"setting-icon",src:globalThis.xssNamespace.douyin_web.filterUrl(M,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:32,height:32,viewBox:"0 0 32 32"}))},Ae=function(e){(0,r.Z)(t,e);var n=(0,i.Z)(t);function t(){return(0,o.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"afterCreate",value:function(){this.renderRoot()}},{key:"destroy",value:function(){(0,Me.v)(this)}},{key:"renderRoot",value:function(){this.root&&(0,Me.s)(this,h.createElement(Oe,this.config))}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-setting-list" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"SettingListPlugin"}},{key:"defaultConfig",get:function(){return{position:_.kd.CONTROLS_RIGHT,index:10,className:"xgplayer-setting-list"}}}]),t}(y.ZP),Fe=function(e){var n=e.awemeInfo,t=e.hideList,l=e.userInfo,o=(0,Te.n)();return(0,h.useEffect)((function(){if(o)return o.registerPlugin(Ae,(0,u.Z)((0,u.Z)({},e),{},{player:o})),function(){o.getPlugin("SettingListPlugin")&&o.unRegisterPlugin("SettingListPlugin",!0)}}),[o,n,t,l]),null},Ue=function(e){var n=(0,Le.N)();return h.createElement(Pe.k,{componentName:"SettingListPlugin",Slardar:n},h.createElement(Fe,e))}},24849:function(e,n,t){t.d(n,{Y:function(){return f},c:function(){return m}});var l=t(32781),o=t(19478),a=t.n(o),r=t(29809),i=t.n(r),u=t(85792),c=t.n(u),s=t(53864),d=t(28712),f=function(e){var n=document.getElementsByClassName("xg-video-container")[0],t=n?i()(window.getComputedStyle(n,null).height,10):800;return Math.floor((t-45-16)/e)},m=function(){var e,n,t,o,r=(e=(0,s.useState)((function(){return(0,d.p)()?0:window.innerWidth})),n=(0,l.Z)(e,2),t=n[0],o=n[1],(0,s.useEffect)((function(){var e=a()((function(){o(window.innerWidth)}),100,{trailing:!0});return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),t),u=function(e){return e<=1440?22:e>=1920?26:22/1440*e}(r),f=(0,s.useState)(500),m=(0,l.Z)(f,2),v=m[0],p=m[1],g=Math.floor((v-45-16)/u),h=r>=1920?1:2;return(0,s.useEffect)((function(){var e=c()((function(){var e=document.getElementsByClassName("xg-video-container")[0],n=e?i()(window.getComputedStyle(e,null).height,10):800;p(n)}),200);return function(){window.clearTimeout(e)}}),[]),{lineHeight:u,maxLine:g,videoLineCamp:h}}},38045:function(e,n,t){t.r(n),t.d(n,{VideoInfo:function(){return Ml}});var l=t(65146),o=t(30673),a=t(32781),r=t(77370),i=t.n(r),u=t(11227),c=t.n(u),s=t(8e3),d=t.n(s),f=t(94090),m=t.n(f),v=t(53864),p=t(79705),g=t.n(p),h=t(79784),_=t(96716),y=t(92267),w=t(83400),E=t(83901),k=t(54867),b=t(36177),C=t(71116),S=t(72603),I=t(30978),N=t(97876),x=t(67495),T=t(16016),L=t(5277),P=t(5611),Z=t(78384),M="_f3D05pF",R="BWnYuaeE",D="e8ZKvWWv",O="Pz8t2meP",A="e_h_fqNj",F="xhDopcQ_",U="e7eU7ix5",B="Jn1tVXor",V="bIxG2tpm",j="RA5iG98_",W="alznRtIZ",H="S9PYJCc9",z="JDCrAcWB",G="WpZ8lZV9",K="szhLuNLL",q="XOS1zQWA",Q="lDRVl7qU",X="te5H4NM4",Y=t(30906),J=t(56442),$=t.n(J),ee=t(39085),ne=t(25902),te=t(44833),le=t(13795),oe=new le.hD({clickTitleAt:{eventName:"click_title_at",params:{to_user_id:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0"}},clickVideoTitle:{eventName:"click_video_title",params:{action:"expand",author_id:"",group_id:"",enter_from:"",log_pb:"",previous_page:"",is_full_screen:"0"}},clickTitleHashtag:{eventName:"click_title_hashtag",params:{hashtag:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tag_id:"",status:""}},xiguaAnchorShow:{eventName:"xigua_anchor_show",params:{author_id:"",group_id:""}},xiguaAnchorClick:{eventName:"xigua_anchor_click",params:{author_id:"",group_id:""}},clickAuthorHead:{eventName:"click_author_head",params:{author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",log_pb:"",from_follow_list:"0",from_xigua:0,click_from:"",clarity:"",aweme_type:"",is_auto:1}},trendingShow:{eventName:"trending_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_num:0,enter_group_id:"",impr_id:""}}});var ae,re,ie=t(85792),ue=t.n(ie),ce=t(46801),se=t(64408),de=t(5594),fe=t.n(de),me=t(68493),ve=t.n(me),pe=t(7943),ge=t.n(pe),he=t(46193),_e=t(80310),ye=t.n(_e),we=t(12338),Ee=t(85011),ke=t(62568),be=t(39067),Ce="Bye3TthX",Se="WXK06sgB",Ie="zKljbkov",Ne="WqKpIvNd",xe="wDw4hTMY",Te="AudqrBWN",Le="StwXz82V",Pe="w_9zUmAd",Ze="XXHvFp8h",Me="CbOVZgRH",Re="pZF7XL8M",De="UlQmo7eU",Oe="xIcxucSy",Ae="gl5W7jk4",Fe="hPy1sx5l";function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ue.apply(this,arguments)}var Be,Ve,je,We=function(e){return v.createElement("svg",Ue({width:"1em",height:"1em",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ae||(ae=v.createElement("g",{filter:"url(#right_arrow_svg__filter0_d_9503_34602)"},v.createElement("path",{d:"M4 2l4 4-4 4",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}))),re||(re=v.createElement("defs",null,v.createElement("filter",{id:"right_arrow_svg__filter0_d_9503_34602",x:2.25,y:.25,width:7.5,height:11.5,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_9503_34602"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_9503_34602",result:"shape"})))))},He=t(24556),ze=t(9909),Ge=t(35667),Ke=(Be={},(0,l.Z)(Be,k.WZ.Mix,"compilation"),(0,l.Z)(Be,k.WZ.Series,"playlet"),(0,l.Z)(Be,k.WZ.Related,"related_video"),(0,l.Z)(Be,k.WZ.Hot,"trending_topic"),Be),qe=function(e){var n,t,o=e.awemeInfo,r=e.handleClick,i=e.classNames,u=e.textClassName,c=e.handleClose,s=e.delayClose,d=e.type,f=void 0===d?k.WZ.Mix:d,m=o.mixInfo,p=o.awemeId,h=o.seriesInfo,w=function(e,n){switch(e){case k.WZ.Mix:return{cover:n.mixInfo.cover,title:"\u5408\u96c6\uff1a".concat(n.mixInfo.mixName),subtitle:"\u66f4\u65b0\u81f3\u7b2c".concat(n.mixInfo.totalEpisode,"\u96c6"),type:"compilation"};case k.WZ.Series:var t=n.seriesInfo.seriesName;return{cover:n.seriesInfo.cover,title:null!=t&&ge()(t).call(t,"\u77ed\u5267")?t:"\u77ed\u5267\uff1a".concat(t),subtitle:"\u66f4\u65b0\u81f3\u7b2c".concat(n.seriesInfo.totalEpisode,"\u96c6"),type:"playlet"};case k.WZ.Related:return{duration:n.video.duration,cover:n.video.cover,title:n.desc,type:"related_video"};default:throw new Error("never")}}(f,o),E=(0,Ge.n)(),b=(null==E||null===(n=E.root)||void 0===n?void 0:n.clientWidth)-302>211?211:(null==E||null===(t=E.root)||void 0===t?void 0:t.clientWidth)-302,C=function(e,n){var t=n.mixInfo,l=n.seriesInfo,o=(0,v.useRef)(!1),r=(0,v.useMemo)((function(){return e===k.WZ.Series&&l.seriesId?(0,ke.Ab)({cursor:l.currentEpisode,seriesId:l.seriesId,count:1}).then((function(e){return(0,a.Z)(e.data,1)[0]})):e===k.WZ.Mix&&t.mixId?(0,be.FF)({cursor:t.currentEpisode,mixId:t.mixId,count:1}).then((function(e){return(0,a.Z)(e.data,1)[0]})):ve().reject()}),[]);return function(){var e=(0,se.Z)(fe().mark((function e(n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.current){e.next=20;break}return o.current=!0,e.prev=2,e.next=5,r;case 5:if(e.sent){e.next=7;break}throw new Error;case 7:return e.t0=n,e.next=10,r;case 10:e.t1=e.sent,(0,e.t0)(e.t1),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(2),we.F.info("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 17:return e.prev=17,o.current=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(n){return e.apply(this,arguments)}}()}(f,o),I=(0,v.useCallback)((function(e,n){var t,l,a,i;c(),f===k.WZ.Related?null==r||r({clickMethod:"related_video_toast",awemeInfo:e}):null==r||r({clickMethod:"next_episode",awemeInfo:e}),y.i.sendLog("toastCardClick",{compilation_id:null==m?void 0:m.mixId,playlet_id:null==h?void 0:h.seriesId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),click_position:n,toast_type:w.type,group_id:p,author_id:p}),"mix"===f?y.i.sendLog("compilationNextEpisodeClick",{compilation_id:null==m?void 0:m.mixId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),click_position:n,author_id:p,group_id:p}):y.i.sendLog("playletNextEpisodeClick",{playlet_id:null==h?void 0:h.seriesId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),click_position:n,group_id:p});var u=0;u=null!=h&&h.seriesId?(null==h?void 0:h.totalEpisode)===(null==h?void 0:h.currentEpisode)?0:1:(null==m?void 0:m.totalEpisode)===(null==m?void 0:m.currentEpisode)?0:1,y.i.sendLog("compilationEntranceClick",{enter_from:(0,S.yW)(),group_id:p,author_id:p,compilation_id:m.mixId,is_update:u}),y.i.sendLog("bottomBarClick",{playlet_id:null==h?void 0:h.seriesId,compilation_id:null==m?void 0:m.mixId,group_id:p,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),bar_type:Ke[f],is_update:u,item_duration_ms:(null==o||null===(t=o.video)||void 0===t?void 0:t.duration)||0,bar_tag_name:null==o||null===(l=o.webRawData)||void 0===l||null===(a=l.CTR)||void 0===a||null===(i=a.recommendScore)||void 0===i?void 0:i.relateAiTag})}),[m,p,r,f]),N=(0,_.x)((function(){y.i.sendLog("toastCardShow",{compilation_id:null==m?void 0:m.mixId,playlet_id:null==h?void 0:h.seriesId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),group_id:p,toast_type:w.type,author_id:p}),"mix"===f?y.i.sendLog("compilationNextEpisodeShow",{compilation_id:null==m?void 0:m.mixId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),group_id:p,author_id:p}):y.i.sendLog("playletNextEpisodeShow",{playlet_id:null==h?void 0:h.seriesId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),group_id:p})})),x=f===k.WZ.Related,T=function(e,n){var t=e.length>n?"".concat($()(e).call(e,0,n),"..."):e;return v.createElement(ye(),{noWrapper:!0,options:{className:Re,base:"//p3-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/twemoji/"}},v.createElement("span",null,t))};return v.createElement("div",{ref:N,className:g()(Ce,"isDark","dark"),onMouseLeave:function(){return s(!1)},onMouseEnter:function(){s(!0),y.i.sendLog("toastCardHover",{compilation_id:null==m?void 0:m.mixId,playlet_id:null==h?void 0:h.seriesId,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),toast_type:w.type,group_id:p,author_id:p})}},v.createElement("div",{className:g()(Se,i)},v.createElement("div",{className:Ie,onClick:function(){return I(o,"cover")}},v.createElement(He.Q,{src:globalThis.xssNamespace.douyin_web.filterUrl(w.cover,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),skeletonClass:Fe,className:g()(Ne,(0,l.Z)({},xe,x)),iconHeight:x?80:60,width:x?80:60,iconWidth:60,height:60}),x&&v.createElement("div",{className:Te},he.Z.Util.format(w.duration/1e3))),v.createElement("div",{className:g()(Le,u),onClick:function(){return I(o,"cover")},style:{maxWidth:"".concat(b,"px")}},x?v.createElement("p",{className:Ze},v.createElement("strong",null,"\u76f8\u5173\u63a8\u8350\uff1a"),T(w.title,24),v.createElement(We,null)):v.createElement(v.Fragment,null,v.createElement("h4",{className:Pe},T(w.title,12),v.createElement(We,null)),v.createElement("p",{className:Me},T(w.subtitle,14)))),!x&&v.createElement(v.Fragment,null,v.createElement("div",{className:De}),v.createElement("div",{className:Oe,onClick:function(e){e.stopPropagation(),C((function(e){return I(e,"next_episode")}))}},"\u4e0b\u4e00\u96c6")),v.createElement("div",{className:Ae,onClick:function(e){e.stopPropagation(),null==c||c()}},v.createElement(ze.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Ee.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:20,height:20,viewBox:"0 0 36 36"}))))},Qe=t(81762),Xe=t(24849),Ye=(t(67330),function(e){return e.Comment="comment",e.VideoInfoTitle="videoInfoTitle",e.SearchVideoInfo="searchVideoInfo",e.VideoDetailTitle="videoDetailTitle",e}({})),Je=t(34590),$e=t(21807),en=t(94116),nn=t(63329),tn=t(67624),ln=t.n(tn),on=t(34346),an=t.n(on),rn=t(61508),un=t(52873),cn=new le.hD({compilationEntranceShow:{eventName:"compilation_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceShow:{eventName:"hot_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},compilationEntranceClick:{eventName:"compilation_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceClick:{eventName:"hot_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},moreVideoEntranceShow:{eventName:"more_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},moreVideoEntranceClick:{eventName:"more_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},relatedVideoEntranceShow:{eventName:"related_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},relatedVideoEntranceClick:{eventName:"related_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},bottomBarShow:{eventName:"bottom_bar_show",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:""}},bottomBarClick:{eventName:"bottom_bar_click",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:""}}}),sn="s0w6Jo4w",dn="IYCtkjZU",fn="Xg7imLcG",mn="QrWUQ_MF",vn="_7tt1bXNG",pn="s8RCBVFF",gn="VzED0RH9",hn="PeKH830H",_n="c87c3hQr",yn="EQrV9Oyh",wn="L68G58YI",En="R3yBZAXp",kn="F4619XTa",bn="v5MP44UG",Cn="LcfKZSZv",Sn="YKxtjwGe",In="LyunYiP2",Nn="zNoGeMEc";function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},xn.apply(this,arguments)}var Tn,Ln,Pn=function(e){return v.createElement("svg",xn({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ve||(Ve=v.createElement("g",{clipPath:"url(#mix_svg__clip0_27954_219993)",fill:"#fff"},v.createElement("path",{d:"M.678 3.845a.778.778 0 010-1.367L4.662.22a1.707 1.707 0 011.676 0l3.984 2.258a.778.778 0 010 1.367L6.338 6.103a1.707 1.707 0 01-1.676 0L.678 3.845z"}),v.createElement("path",{d:"M.076 5.273a.562.562 0 01.753-.188l4.112 2.331c.345.195.773.195 1.118 0l4.112-2.33a.562.562 0 01.753.187.518.518 0 01-.195.724l-4.112 2.33c-.69.39-1.545.39-2.234 0L.27 5.997a.518.518 0 01-.195-.724z"}),v.createElement("path",{d:"M.83 7.465a.562.562 0 00-.754.187.518.518 0 00.195.724l4.112 2.331c.69.39 1.545.39 2.234 0l4.112-2.33a.518.518 0 00.195-.725.562.562 0 00-.753-.187l-4.112 2.33a1.138 1.138 0 01-1.118 0L.83 7.466z"}))),je||(je=v.createElement("defs",null,v.createElement("clipPath",{id:"mix_svg__clip0_27954_219993"},v.createElement("path",{fill:"#fff",d:"M0 0h12v12H0z"})))))};function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Zn.apply(this,arguments)}var Mn,Rn,Dn,On=function(e){return v.createElement("svg",Zn({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Tn||(Tn=v.createElement("g",{filter:"url(#series_svg__filter0_d_1599_82712)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.09 2.49l9.505 5.515A5.2 5.2 0 006.457 2h-3.58c-.344 0-.643.2-.787.49zm9.165 6.719L9.077 7.945l-6.95 4.033a.877.877 0 00.75.422h3.58a5.201 5.201 0 004.798-3.191zM2 10.65l3.066-1.78V5.618L2 3.838v6.813z",fill:"#fff"}))),Ln||(Ln=v.createElement("defs",null,v.createElement("filter",{id:"series_svg__filter0_d_1599_82712",x:1,y:1,width:11.657,height:12.4,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1599_82712"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1599_82712",result:"shape"})))))};function An(){return An=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},An.apply(this,arguments)}var Fn,Un,Bn=function(e){return v.createElement("svg",An({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),v.createElement("mask",{id:"hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:-2,width:10,height:14},Mn||(Mn=v.createElement("path",{d:"M.5-1.05h9.208v8.234A4.516 4.516 0 015.192 11.7 4.692 4.692 0 01.5 7.008V-1.05z",fill:"#C4C4C4"}))),Rn||(Rn=v.createElement("g",{mask:"url(#hot_svg__a)"},v.createElement("path",{d:"M8.393 3.553c.961 1.063 1.315 2.125 1.315 3.188 0 1.416-.067 1.796 0 1.77-1.858.738-5.122-.93-6.02-3.187-.899-2.257.38-4.25 2.353-5.312.078-.042.126.027.126.132 0 1.638 1.265 2.347 2.226 3.41z",fill:"url(#hot_svg__paint0_linear_23665_194053)"}),v.createElement("path",{d:"M9.545 8.872c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.322-1.645.709-2.48.709-3.542.355-.69-.23-1.638-.709-1.934-1.771-.329 1.416.66 4.065 2.157 4.964 1.497.899 5.09.348 5.28 0z",fill:"url(#hot_svg__paint1_linear_23665_194053)"}),v.createElement("path",{d:"M1.775 3.339C1.534 3.58.5 4.826.5 6.816c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.77-5.656 0-6.021-.354-.9-.872-2.125-2.412-2.338-4.604-.029-.302-.042-.39-.283-.148z",fill:"url(#hot_svg__paint2_linear_23665_194053)"}))),Dn||(Dn=v.createElement("defs",null,v.createElement("linearGradient",{id:"hot_svg__paint0_linear_23665_194053",x1:3.536,y1:.28,x2:7.934,y2:6.743,gradientUnits:"userSpaceOnUse"},v.createElement("stop",{offset:.021,stopColor:"#FADF32"}),v.createElement("stop",{offset:.451,stopColor:"#EB9B46"}),v.createElement("stop",{offset:.782,stopColor:"#EB5854"})),v.createElement("linearGradient",{id:"hot_svg__paint1_linear_23665_194053",x1:2.616,y1:4.79,x2:10.598,y2:9.517,gradientUnits:"userSpaceOnUse"},v.createElement("stop",{stopColor:"#FFC533"}),v.createElement("stop",{offset:.436,stopColor:"#F26461"}),v.createElement("stop",{offset:.809,stopColor:"#FF0544"})),v.createElement("linearGradient",{id:"hot_svg__paint2_linear_23665_194053",x1:8.195,y1:11.127,x2:.577,y2:4.974,gradientUnits:"userSpaceOnUse"},v.createElement("stop",{offset:.134,stopColor:"#FA0951"}),v.createElement("stop",{offset:.354,stopColor:"#FA3E65"}),v.createElement("stop",{offset:.881,stopColor:"#F2AE49"}),v.createElement("stop",{offset:.998,stopColor:"#FAC032"})))))};function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Vn.apply(this,arguments)}var jn,Wn,Hn=function(e){return v.createElement("svg",Vn({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Fn||(Fn=v.createElement("g",{filter:"url(#related_svg__filter0_d_914_35212)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 3a1 1 0 011-1h7a2 2 0 012 2v5a1 1 0 01-1 1V5a2 2 0 00-2-2H3zM1 5a1 1 0 011-1h8a1 1 0 011 1v6a1 1 0 01-1 1H2a1 1 0 01-1-1V5zm6.75 2.567a.5.5 0 010 .866L5.5 9.732a.5.5 0 01-.75-.433V6.701a.5.5 0 01.75-.433l2.25 1.299z",fill:"#fff"}))),Un||(Un=v.createElement("defs",null,v.createElement("filter",{id:"related_svg__filter0_d_914_35212",x:0,y:1,width:14,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_914_35212"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_914_35212",result:"shape"})))))};function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},zn.apply(this,arguments)}var Gn,Kn,qn=function(e){return v.createElement("svg",zn({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),jn||(jn=v.createElement("g",{filter:"url(#chapter_svg__filter0_d_43627_262165)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.65 2a.65.65 0 100 1.3h8.7a.65.65 0 100-1.3h-8.7zm2.139 8.664a.28.28 0 000-.483L2.622 8.908a.28.28 0 00-.422.242v2.546a.28.28 0 00.422.242l2.167-1.274zM2 6.517a.65.65 0 01.65-.65h8.7a.65.65 0 110 1.3h-8.7a.65.65 0 01-.65-.65zm4.65 3.216a.65.65 0 100 1.3h4.7a.65.65 0 100-1.3h-4.7z",fill:"#fff"}))),Wn||(Wn=v.createElement("defs",null,v.createElement("filter",{id:"chapter_svg__filter0_d_43627_262165",x:-1,y:-1,width:16,height:16,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_43627_262165"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_43627_262165",result:"shape"})))))};function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Qn.apply(this,arguments)}var Xn,Yn,Jn=function(e){return v.createElement("svg",Qn({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Gn||(Gn=v.createElement("g",{filter:"url(#semi-icons-search_svg__filter0_d_2327_94143)"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 2a4.25 4.25 0 102.428 7.739l2.042 2.041a.75.75 0 101.06-1.06L9.74 8.678A4.25 4.25 0 006.25 2zM3.5 6.25a2.75 2.75 0 115.5 0 2.75 2.75 0 01-5.5 0z",fill:"#fff"}))),Kn||(Kn=v.createElement("defs",null,v.createElement("filter",{id:"semi-icons-search_svg__filter0_d_2327_94143",x:1,y:1,width:12,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2327_94143"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2327_94143",result:"shape"})))))},$n=t(60260),et=t.n($n),nt=t(97609),tt=t.n(nt),lt=t(53361),ot=t.n(lt),at=t(26447),rt=t.n(at),it=t(68843),ut="q0BS0oP8",ct="FCETg1vX",st="COcPCurq",dt="iL0nxmER",ft="k2Nvjb9o",mt="W0tkHBvI",vt="nDkwKKjm",pt="d9t6DDtG",gt=function(e){var n,t=e.className,o=e.awemeInfo,r=e.active,i=e.handleClick,u=e.show,c=(0,v.useRef)(),s=(0,v.useState)(!0),d=(0,a.Z)(s,2),f=d[0],m=d[1],p=(o.chapterInfo||{}).list,h=(0,Ge.n)(),_=(0,v.useState)(undefined),y=(0,a.Z)(_,2),w=y[0],E=y[1],k=(0,v.useState)(!1),b=(0,a.Z)(k,2),C=b[0],S=b[1],N=function(){ue()((function(){var e=h.root.getBoundingClientRect(),n=e.top,t=e.right,l=c.current.getBoundingClientRect(),o=l.top,a=l.right,r=o-n;S(t-a<=120),r<=70&&E({maxHeight:"".concat(314-(70-r),"px")}),r>80&&E(undefined),m(!1)}),0)};return(0,v.useEffect)((function(){if(c.current){var e,n=function(e){return e.stopPropagation()};return null===(e=c.current)||void 0===e||e.addEventListener("wheel",n),function(){var e;null===(e=c.current)||void 0===e||e.removeEventListener("wheel",n)}}}),[c]),(0,v.useEffect)((function(){u?N():(E(undefined),m(!0),S(!1))}),[u]),(0,v.useEffect)((function(){N()}),[]),v.createElement("div",{className:g()(ut,"isDark","dark",t,(n={},(0,l.Z)(n,ct,f),(0,l.Z)(n,st,C),n)),ref:c},v.createElement("ul",{style:w},an()(p).call(p,(function(e,n){var t=e.desc,o=e.timestamp,a=(0,I.$y)(o).split("");return v.createElement("li",{className:g()(dt,(0,l.Z)({},ft,n===r)),key:o,onClick:function(){i({timestamp:o,index:n})}},v.createElement("div",{className:g()(mt)},t),v.createElement("div",{className:g()(vt)},an()(a).call(a,(function(e,n){return v.createElement("div",{key:n,className:g()(pt)},e)}))))}))))},ht=function(e){var n,t=e.awemeInfo,r=e.reportExtraParams,i=(0,Ge.n)(),u=(0,v.useState)(!1),c=(0,a.Z)(u,2),s=c[0],d=c[1],f=(0,v.useState)(!1),m=(0,a.Z)(f,2),p=m[0],h=m[1],w=(0,v.useState)(null!==(n=null==i?void 0:i.cumulateTime)&&void 0!==n?n:0),E=(0,a.Z)(w,2),b=E[0],C=E[1],I=(0,v.useRef)(0),N=(0,v.useMemo)((function(){var e,n,l,a,r,i,u=tt()(e=(0,o.Z)(null==t||null===(n=t.chapterInfo)||void 0===n?void 0:n.list)).call(e),c=ot()(u).call(u,(function(e){return e.timestamp<=1e3*b})),s=-1,d=0;-1!==c&&(d=null===(a=u[c])||void 0===a?void 0:a.timestamp,s=null==t||null===(r=t.chapterInfo)||void 0===r||null===(i=r.list)||void 0===i?void 0:ot()(i).call(i,(function(e){return e.timestamp===d})));return{desc:null===(l=u[c])||void 0===l?void 0:l.desc,index:s}}),[t,b]),x=(0,_.x)((function(){y.i.sendLog("chapterTagShow",(0,Y.Z)({enter_from:(0,S.mo)(),enter_from_merge:(0,S.vM)(),group_id:null==t?void 0:t.awemeId},r))}));(0,v.useLayoutEffect)((function(){var e;s&&(I.current=rt()(),y.i.sendLog("chapterContentShow",(0,Y.Z)({enter_from:(0,S.mo)(),enter_from_merge:(0,S.vM)(),group_id:null==t?void 0:t.awemeId,chapter_num:null==t||null===(e=t.chapterInfo)||void 0===e?void 0:e.list.length},r)))}),[s]);var T=et()((function(e){var n;return C(null!==(n=e.currentTime)&&void 0!==n?n:0)}),1e3);return(0,it.u)(i,Qe.B.TimeUpdate,T),v.createElement("div",{className:g()(fn,Sn),onMouseEnter:function(){d(!0),h(!0)},onMouseLeave:function(e){var n;d(!1),y.i.sendLog("chapterContentExit",(0,Y.Z)({enter_from:(0,S.mo)(),enter_from_merge:(0,S.vM)(),group_id:null==t?void 0:t.awemeId,chapter_num:null==t||null===(n=t.chapterInfo)||void 0===n?void 0:n.list.length,duiation:rt()()-I.current},r))},onWheel:function(e){e.stopPropagation(),e.preventDefault()},ref:x},v.createElement("span",{className:g()(mn)}),v.createElement("span",{className:g()(vn)},wt.get(k.WZ.Chapter)),v.createElement("span",{className:g()(pn)},N.desc?"\u7ae0\u8282: ".concat(N.desc):"\u7ae0\u8282"),s&&v.createElement("div",{className:g()(In)}),p&&v.createElement(gt,{awemeInfo:t,className:g()(Nn,(0,l.Z)({},dn,!s)),handleClick:function(e){var n,l=e.timestamp,o=e.index;i&&(i.seek(l/1e3),d(!1),y.i.sendLog("chapterContentClick",(0,Y.Z)({enter_from:(0,S.mo)(),enter_from_merge:(0,S.vM)(),group_id:null==t?void 0:t.awemeId,chapter_num:null==t||null===(n=t.chapterInfo)||void 0===n?void 0:n.list.length,chapter_index:o+1},r)))},active:N.index,show:s}))},_t=t(77060),yt=(Xn={},(0,l.Z)(Xn,k.WZ.Mix,"compilation"),(0,l.Z)(Xn,k.WZ.Series,"playlet"),(0,l.Z)(Xn,k.WZ.Related,"related_video"),(0,l.Z)(Xn,k.WZ.Hot,"trending_topic"),Xn),wt=new(ln())([[k.WZ.Mix,v.createElement(ze.Z,{key:k.WZ.Mix,src:globalThis.xssNamespace.douyin_web.filterUrl(Pn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"})],[k.WZ.Series,v.createElement(ze.Z,{key:k.WZ.Series,src:globalThis.xssNamespace.douyin_web.filterUrl(On,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:14,height:14,viewBox:"0 0 14 14"})],[k.WZ.Hot,v.createElement(ze.Z,{key:k.WZ.Hot,src:globalThis.xssNamespace.douyin_web.filterUrl(Bn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"})],[k.WZ.Related,v.createElement(ze.Z,{key:k.WZ.Related,src:globalThis.xssNamespace.douyin_web.filterUrl(Hn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:14,height:14,viewBox:"0 0 14 14"})],[k.WZ.Chapter,v.createElement(ze.Z,{key:k.WZ.Chapter,src:globalThis.xssNamespace.douyin_web.filterUrl(qn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:14,height:14,viewBox:"0 0 14 14"})]]),Et=function(e){var n=e.item,t=e.awemeInfo,l=e.feedbarCount,o=e.isShowUpdateText,a=e.player,r=t.awemeId,i=t.mixInfo,u=(t.relatedVideo,t.seriesInfo),c=(null==t?void 0:t.mixInfo)||{},s=c.totalEpisode,d=c.currentEpisode,f=(0,v.useMemo)((function(){return o&&null!=t&&t.mixInfo.mixId?s===d?"\u5df2\u662f\u6700\u65b0\u96c6":"\u66f4\u65b0\u81f3\u7b2c".concat(s,"\u96c6"):null}),[o,t,s,d]),m=(0,v.useMemo)((function(){return o&&null!=t&&t.seriesInfo.seriesId?(null==u?void 0:u.totalEpisode)===(null==u?void 0:u.currentEpisode)?"\u5df2\u662f\u6700\u65b0\u96c6":"\u66f4\u65b0\u81f3\u7b2c".concat(s,"\u96c6"):null}),[o,t,s,d]),p=(0,_.x)((function(){var e,o,a,c;if(n.type===k.WZ.Mix&&cn.sendLog("compilationEntranceShow",{enter_from:(0,S.yW)(),group_id:r,author_id:r,compilation_id:null==i?void 0:i.mixId,entrance_cnt:l,is_update:s===d?0:1}),n.type===k.WZ.Related&&cn.sendLog("relatedVideoEntranceShow",{enter_from:(0,S.yW)(),group_id:r,author_id:r,entrance_cnt:l}),n.type===k.WZ.Hot){var f=n.customProps||{},m=f.trending_topic,v=f.first_tag_name,p=f.top;cn.sendLog("hotEntranceShow",{enter_from:(0,S.yW)(),group_id:r,author_id:r,trending_topic:m,first_tag_name:v,top:p,entrance_cnt:l})}var g=0;g=null!=u&&u.seriesId?(null==u?void 0:u.totalEpisode)===(null==u?void 0:u.currentEpisode)?0:1:(null==i?void 0:i.totalEpisode)===(null==i?void 0:i.currentEpisode)?0:1,cn.sendLog("bottomBarShow",{playlet_id:null==u?void 0:u.seriesId,compilation_id:null==i?void 0:i.mixId,group_id:r,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),bar_type:yt[n.type],entrance_cnt:l,is_update:g,item_duration_ms:(null==t||null===(e=t.video)||void 0===e?void 0:e.duration)||0,bar_tag_name:null==t||null===(o=t.webRawData)||void 0===o||null===(a=o.CTR)||void 0===a||null===(c=a.recommendScore)||void 0===c?void 0:c.relateAiTag})}));return v.createElement("div",{className:g()(n.itemClassName,fn),key:n.type,ref:p,onClick:function(){var e,o,c,f;if(n.onClick({awemeInfo:t}),n.type===k.WZ.Mix&&(cn.sendLog("compilationEntranceClick",{enter_from:(0,S.yW)(),group_id:r,author_id:r,compilation_id:i.mixId,entrance_cnt:l,is_update:s===d?0:1}),null==a||a.emit(rn.USER_ACTION,{action:"click_compilation"})),n.type===k.WZ.Hot){var m=(null==n?void 0:n.customProps)||{},v=m.trending_topic,p=m.first_tag_name,g=m.top;cn.sendLog("hotEntranceClick",{enter_from:(0,S.yW)(),group_id:r,author_id:r,trending_topic:v,first_tag_name:p,top:g,entrance_cnt:l}),null==a||a.emit(rn.USER_ACTION,{action:"click_hot"})}n.type===k.WZ.Related&&cn.sendLog("relatedVideoEntranceClick",{enter_from:(0,S.yW)(),group_id:r,author_id:r,entrance_cnt:l}),n.type===k.WZ.Series&&(null==a||a.emit(rn.USER_ACTION,{action:"click_series"}));var h=0;h=null!=u&&u.seriesId?(null==u?void 0:u.totalEpisode)===(null==u?void 0:u.currentEpisode)?0:1:(null==i?void 0:i.totalEpisode)===(null==i?void 0:i.currentEpisode)?0:1,cn.sendLog("bottomBarClick",{playlet_id:null==u?void 0:u.seriesId,compilation_id:null==i?void 0:i.mixId,group_id:r,enter_from:(0,S.yW)(),enter_from_merge:(0,S.vM)(),bar_type:yt[n.type],entrance_cnt:l,is_update:h,item_duration_ms:(null==t||null===(e=t.video)||void 0===e?void 0:e.duration)||0,bar_tag_name:null==t||null===(o=t.webRawData)||void 0===o||null===(c=o.CTR)||void 0===c||null===(f=c.recommendScore)||void 0===f?void 0:f.relateAiTag})}},v.createElement("span",{className:g()(mn)}),v.createElement("span",{className:g()(vn)},wt.get(n.type)),v.createElement("span",{className:g()(pn,n.textClassName)},n.title),Boolean(n.type===k.WZ.Mix)&&o&&v.createElement("div",{className:g()(kn)},v.createElement("div",{className:g()(bn)}),v.createElement("div",{className:g()(Cn)},f)),Boolean(n.type===k.WZ.Series)&&o&&v.createElement("div",{className:g()(kn)},v.createElement("div",{className:g()(bn)}),v.createElement("div",{className:g()(Cn)},m)))},kt=function(e){var n,t,l=e.tag,o=e.awemeInfo,a=e.feedbarCount,r=e.isActive,i=e.player,u=e.reportExtraParams,c=l.searchWord,s=l.index,d=l.itemClassName,f=l.textClassName,p=l.hintText,h=l.word,_=l.wordsNum,y=c||{},w=y.word,E=y.wordId,k=o||{},b=k.awemeId,C=(k.groupId,k.logPb,(0,v.useMemo)((function(){return(0,ee.U)(o).impr_id}),[o]));return(0,v.useEffect)((function(){(void 0===r||r)&&cn.sendLog("trendingWordsShow",(0,Y.Z)({words_source:"related_search_anchor_v2",enter_from:(0,S.yW)(),words_content:w,enter_group_id:b,words_position:s,entrance_cnt:a,words_num:_,group_id:E,impr_id:C},(null==u?void 0:u.search_params)||{}))}),[w,b,s,r,E]),v.createElement(_t.a,{href:globalThis.xssNamespace.douyin_web.filterUrl(m()(n=m()(t="https://www.douyin.com/search/".concat(encodeURIComponent(w),"?source=related_search_anchor_v2&enter_from=")).call(t,(0,S.vM)(),"&aweme_id=")).call(n,b),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),spa:!1,className:g()(d,gn,fn),onClick:function(){cn.sendLog("trendingWordsClick",(0,Y.Z)({words_source:"related_search_anchor_v2",enter_from:(0,S.yW)(),words_content:w,enter_group_id:b,words_position:s,entrance_cnt:a,words_num:_,group_id:E,impr_id:C},(null==u?void 0:u.search_params)||{})),N.emit(N.EVENT.videoPause),null==i||i.emit(rn.USER_ACTION,{action:"click_related_search"})},target:"_blank"},v.createElement("span",{className:g()(mn)}),v.createElement(ze.Z,{className:En,src:globalThis.xssNamespace.douyin_web.filterUrl(Jn,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:14,height:14,viewBox:"0 0 14 14"}),v.createElement("div",{className:g()(hn,f)},p?v.createElement(v.Fragment,null,v.createElement("span",{className:_n},p,"\uff1a"),v.createElement("span",{className:yn},h)):v.createElement("span",{className:yn},w)),v.createElement(ze.Z,{className:g()(wn),src:globalThis.xssNamespace.douyin_web.filterUrl(un.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:12,height:12,viewBox:"0 0 12 12"}))},bt=function(e){var n=e.tagList,t=e.awemeInfo,l=e.reportExtraParams,o=e.isShowUpdateText,a=e.isActive,r=e.player;return v.createElement(v.Fragment,null,v.createElement("div",{className:g()("feedbar-new-style","feedbar-new-style-adapter",sn)},an()(n).call(n,(function(e){return e.type===k.WZ.RelatedSearch?v.createElement(kt,{isActive:a,key:e.type,tag:e,awemeInfo:t,feedbarCount:n.length,player:r,reportExtraParams:l}):e.type===k.WZ.Chapter?v.createElement(ht,{awemeInfo:t,reportExtraParams:l}):v.createElement(Et,{key:e.type,item:e,awemeInfo:t,feedbarCount:n.length,isShowUpdateText:o,player:r})}))))},Ct=t(48431),St=t(65902),It=t(67161),Nt=t(86846),xt={container:"TydL3UtF",showTitleNum:"QRm7U4RA",avatarList:"cbewaUCe",itemContainer:"oWCBv7oD",hidden:"KCSHFZ5c",vertical:"HiHq9WE1",nickNameContainer:"aQXxE1po",nickName:"RC2iR19W",avatarContainer:"M2I_IdxF",role:"xKk4dBTi",changeColor:"u4Ga4haT",changeSize:"crTjUSZK",divider:"PnzPTmzV",moreBox:"OAaY5LeY",more:"NDrAHJzD"};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Tt.apply(this,arguments)}var Lt=function(e){return v.createElement("svg",Tt({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Yn||(Yn=v.createElement("path",{d:"M9.105 8a1.105 1.105 0 11-2.21 0 1.105 1.105 0 012.21 0zM13.684 8a1.105 1.105 0 11-2.21 0 1.105 1.105 0 012.21 0zM4.526 8a1.105 1.105 0 11-2.21 0 1.105 1.105 0 012.21 0z",fill:"#fff",fillOpacity:.9})))},Pt=t(87384),Zt=t(76445),Mt="iXNJndYU",Rt="UoPTZTvK",Dt="_VNFFLXP",Ot="kkmsJ0SS",At="LO2SfyEz",Ft="WMRQUSFA",Ut="ZgLL8cOz",Bt=t(27809),Vt=t(61897),jt=t(90854),Wt="Zuv3Bc1T",Ht="r_pq9Avr",zt="xMeQT8qG",Gt="WJXtmjFZ",Kt="zanL3tM_",qt="X6BjUk8m",Qt="Y1NzrcHV",Xt=t(50799),Yt=t(52985),Jt=t(19681),$t=t(9191),el=t(81877),nl={buttonsWrap:"AsUX9xg2",hidden:"NQg8DLaS",showConfirm:"gDzYtGhY",follow:"JvXjgQ9C",removeWrap:"cQCSic4T",remove:"zhAzvqmf",confirmWrap:"ZkyGlOXa",contentBlock:"CkeH8zYw",confirm:"t72mkPiV",divider:"EaJr_zuj",cancel:"JI3GtXwu",following:"C5zVTN5E"},tl=t(96533),ll=t(25546);function ol(e){var n,t,o,a,r,i,u,c,s,f=e.loginDispatch,p=e.userInfo,_=e.loginUserInfo,y=e.awemeInfo,w=e.reportExtraParams,E=e.isLogin,k=e.onLoginChange,b=p||{},C=b.followStatus,I=b.followerStatus,N=b.uid,x=(0,v.useMemo)((function(){var e;return Boolean((null==p?void 0:p.uid)===(null==_||null===(e=_.info)||void 0===e?void 0:e.uid))}),[p,_]),T=(0,tl.r)({selfUid:null==_||null===(n=_.info)||void 0===n?void 0:n.uid,actionUid:N,defaultFollowerStatus:I,defaultFollowStatus:C}),L=T.followStatus,P=T.text,Z=T.buttonType,M=(0,ll.OM)({selfUid:null==_||null===(t=_.info)||void 0===t?void 0:t.uid,actionUid:N,defaultFollowerStatus:I,defaultFollowStatus:C,isLogin:E,onLoginSuccess:function(){null==k||k(!0),null==f||f({type:"updateUserInfo"})},logExtraParams:(0,Y.Z)((0,Y.Z)({to_user_id:N,enter_from:(0,S.yW)(),is_full_screen:(0,ne.r)()?"1":"0",author_id:null==y||null===(o=y.authorInfo)||void 0===o?void 0:o.uid,group_id:null==y?void 0:y.awemeId,tab_name:Xt.getTabName()||(0,$t.Rs)("tab_name")||"",from_group_id:null==y?void 0:y.awemeId,music_id:null==y||null===(a=y.music)||void 0===a?void 0:a.mid,compilation_id:null==y||null===(r=y.mixInfo)||void 0===r?void 0:r.mixId,aweme_type:null==y?void 0:y.awemeType,item_duration_ms:(null==y||null===(i=y.video)||void 0===i?void 0:i.duration)||0},w),{},{is_co_publish:1,co_publish_author_list:null==y||null===(u=y.cooperationInfo)||void 0===u||null===(c=u.cooperationCreators)||void 0===c||null===(s=d()(c).call(c,(function(e){return e.roleId!==h.CooperationRoleId.Author})))||void 0===s?void 0:an()(s).call(s,(function(e){var n;return m()(n="".concat(e.uid,"_")).call(n,null==e?void 0:e.roleId)})),enter_method:"co_publish_panel"})}),R=M.follow,D=M.unFollow;return v.createElement("div",{className:g()(nl.buttonsWrap,nl.following,(0,l.Z)({},nl.hidden,x))},v.createElement(Jt.z,{className:nl.follow,type:Z===Yt.TT.Active?"primary":"secondary",onClick:function(){(0,el.V)(L)?D():R()},size:"small"},v.createElement("div",{className:nl.contentBlock},P)))}function al(e){var n=e.userInfo,t=n.avatarUri,l=n.nickname,o=n.secUid,a=n.roleTitle,r=function(){y.i.sendLog("enterPersonalDetail",{to_user_id:n.uid,is_private:0,enter_method:"co_publish_panel",enter_from:"recommend"})};return v.createElement(v.Fragment,null,v.createElement("div",{className:Wt},v.createElement("div",{className:Ht},v.createElement(Vt.a,{href:globalThis.xssNamespace.douyin_web.filterUrl((0,T.HC)(o,"enter_method=cooperation_list"),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",rel:"noopener noreferrer",onClick:function(){N.emit(N.EVENT.videoPause),r()}},v.createElement(jt.q,{src:globalThis.xssNamespace.douyin_web.filterUrl(t,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),alt:"".concat(l,"\u5934\u50cf"),type:"extraSmall"}))),v.createElement("div",{className:zt},v.createElement("div",{className:Gt},v.createElement("div",{className:Kt},v.createElement(Vt.a,{href:globalThis.xssNamespace.douyin_web.filterUrl((0,T.HC)(o,"enter_method=cooperation_list"),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",rel:"noopener noreferrer",onClick:function(){N.emit(N.EVENT.videoPause),r()}},v.createElement(en.Z,{text:l})),a&&v.createElement("div",{className:qt},a)))),v.createElement(ol,e)),v.createElement(Pt.i,{className:Qt}))}var rl=function(e){var n=e.showCooperationList,t=e.loginUserInfo,l=e.loginDispatch,o=e.awemeInfo,r=e.reportExtraParams,i=v.useRef(null),u=(0,v.useState)(t.isLogin),c=(0,a.Z)(u,2),s=c[0],d=c[1];return v.useEffect((function(){var e="showCooperationList";return(0,Zt.o)({pausePlayControlShortcut:!0,pauseCustomShortcut:!0,pauseGlobalShortcut:!0},e),function(){(0,Zt.m)(e)}}),[]),v.useEffect((function(){var e=i.current,n=function(e){return e.stopPropagation()};return null==e||e.addEventListener("wheel",n),function(){null==e||e.removeEventListener("wheel",n)}}),[]),v.useEffect((function(){return y.i.sendLog("enterCoPublishPanel",{group_id:o.groupId,author_id:o.authorInfo.uid,enter_from_merge:"recommend",enter_from:(0,S.mo)()}),N.emit(N.EVENT.videoStopPlayNext),function(){N.emit(N.EVENT.videoRemoveStopPlayNext)}}),[]),v.createElement("div",{className:Rt},v.createElement("div",{className:Dt},v.createElement("div",{className:Ot},"".concat(null==n?void 0:n.length,"\u4eba\u5171\u540c\u521b\u4f5c")),v.createElement(ze.Z,{className:At,width:36,height:36,src:globalThis.xssNamespace.douyin_web.filterUrl(Ee.Z,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),color:"#A9AAB7",onClick:function(){Bt.U.destroy()}})),v.createElement(Pt.i,{className:Ft}),v.createElement("div",{className:Ut,ref:i},an()(n).call(n,(function(e){return v.createElement(al,{userInfo:e,key:e.secUid,loginDispatch:l,loginUserInfo:t,isLogin:s,onLoginChange:function(e){d(e)},awemeInfo:o,reportExtraParams:r})}))))},il=function(e){Bt.U.render({children:v.createElement(rl,e),className:Mt,onMaskClick:function(){return Bt.U.destroy()}})},ul=t(28777),cl=["authorList"];function sl(e){var n,t,o,r,u,c,s,f,p,_,y,w,E=e.loginUserInfo,k=e.loginDispatch,b=e.fullScreenTarget,C=e.reportExtraParams,S=e.authorItem,I=e.awemeInfo,N=e.onCooperationAuthorClick,x=e.showRoleTitle,T=e.showFollowBtn,L=e.loginPanelTarget,P=e.abTestData,Z=(E||{}).isLogin,M=(0,Ge.n)(),R=(0,v.useState)(!1),D=(0,a.Z)(R,2),O=D[0],A=D[1],F=(0,v.useRef)(!1),U=(0,v.useRef)(null),B=(0,v.useMemo)((function(){var e=i()(I);return e.authorInfo=S,e}),[I,S]),V=(0,ll.OM)({selfUid:null==E||null===(n=E.info)||void 0===n?void 0:n.uid,actionUid:null==B||null===(t=B.authorInfo)||void 0===t?void 0:t.uid,defaultFollowerStatus:null==B||null===(o=B.authorInfo)||void 0===o?void 0:o.followerStatus,defaultFollowStatus:null==B||null===(r=B.authorInfo)||void 0===r?void 0:r.followStatus,logExtraParams:(0,Y.Z)((0,Y.Z)({author_id:null==I||null===(u=I.authorInfo)||void 0===u?void 0:u.uid,group_id:null==I?void 0:I.awemeId,from_group_id:null==I?void 0:I.awemeId,music_id:null==I||null===(c=I.music)||void 0===c?void 0:c.mid,compilation_id:null==I||null===(s=I.mixInfo)||void 0===s?void 0:s.mixId,aweme_type:null==I?void 0:I.awemeType,to_user_id:null==B||null===(f=B.authorInfo)||void 0===f?void 0:f.uid},C),{},{is_co_publish:1,item_duration_ms:(null==I||null===(p=I.video)||void 0===p?void 0:p.duration)||0,co_publish_author_list:null==B||null===(_=B.cooperationInfo)||void 0===_||null===(y=_.cooperationCreators)||void 0===y||null===(w=d()(y).call(y,(function(e){return e.roleId!==h.CooperationRoleId.Author})))||void 0===w?void 0:an()(w).call(w,(function(e){var n;return m()(n="".concat(e.uid,"_")).call(n,null==e?void 0:e.roleId)})),enter_method:"co_publish_entrance"}),isLogin:Z,accountParentEl:(0,ne.r)()&&b,onLoginSuccess:function(){return null==k?void 0:k({type:"updateUserInfo"})}}),j=V.follow,W=V.unFollow;return v.createElement("li",{className:g()(xt.itemContainer,(0,l.Z)({},xt.vertical,!x)),ref:U},v.createElement(ul.Z,{player:M,loginUserInfo:E,actionFollow:j,actionUnFollow:W,awemeInfo:B,isLogin:Z,loginDispatch:k,fullScreenTarget:b,isFollowClickedRef:F,onCooperAitonClick:function(){null==N||N(B)},reportExtraParams:C,className:xt.avatarContainer,isShowTip:!0,isShowKeyHotTip:!1,followBtnMouseEnter:function(){},followBtnMouseLeave:function(){},imBtnMouseEnter:function(){},imBtnMouseLeave:function(){},showPendantTip:O,setShowPendantTip:A,showImBtn:!1,showFollowBtn:T,loginPanelTarget:L,abtestData:P}),v.createElement("div",{className:xt.nickNameContainer},v.createElement("span",{className:g()(xt.nickName,xt.changeSize),onClick:function(){null==N||N(B)}},S.nickname)))}function dl(e){var n=e.authorList,t=(0,It.Z)(e,cl),o=(0,v.useRef)(null),a=t.loginUserInfo,r=t.awemeInfo,i=t.reportExtraParams,u=t.loginDispatch,c=(0,v.useMemo)((function(){return n.length>5}),[n]);return(null==n?void 0:n.length)<=1?null:v.createElement("div",{className:g()(xt.container,(0,l.Z)({},"videoCooperationHideTitleContainer",!0))},v.createElement("ul",{className:xt.avatarList},an()(n).call(n,(function(e,n){return c&&n>=4?null:v.createElement(sl,(0,St.Z)({key:e.uid},(0,Y.Z)((0,Y.Z)({},t),{},{authorItem:e,showFollowBtn:!0})))}))),c&&v.createElement("div",{className:xt.moreBox},v.createElement("div",{className:xt.more,onClick:function(){il({logParams:{clickMethod:"more_button"},showCooperationList:n,loginUserInfo:a,awemeInfo:r,reportExtraParams:i,loginDispatch:u})}},v.createElement(Nt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Lt,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:16,height:16,viewBox:"0 0 16 16"}))),v.createElement("div",{className:"disturb-login-panel disturb-login-panel-related",ref:o}))}var fl,ml,vl="yPoIM_CO",pl="zNDzHEPP",gl="ck3CSaLO",hl="Grui2Gvl";function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},_l.apply(this,arguments)}var yl,wl=function(e){return v.createElement("svg",_l({width:13,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),fl||(fl=v.createElement("g",{filter:"url(#and_svg__filter0_d_37504_172085)",stroke:"#fff"},v.createElement("circle",{cx:8.4,cy:6,r:3}),v.createElement("path",{d:"M4.5 3.137a3 3 0 100 5.725",strokeLinecap:"round"}))),ml||(ml=v.createElement("defs",null,v.createElement("filter",{id:"and_svg__filter0_d_37504_172085",x:-1,y:-1,width:14,height:14,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},v.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),v.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),v.createElement("feOffset",null),v.createElement("feGaussianBlur",{stdDeviation:.5}),v.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),v.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),v.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_37504_172085"}),v.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_37504_172085",result:"shape"})))))},El=function(e){var n=e.authorList,t=e.isTag,o=void 0!==t&&t,a=e.onClick,r=e.className,i=void 0===r?"":r;return n.length<=1?null:v.createElement("div",{className:g()(vl,i,(0,l.Z)({},pl,o)),onClick:a},v.createElement(Nt.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(wl,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:13,height:12,viewBox:"0 0 13 12",className:gl}),v.createElement("span",{className:hl},n.length,"\u4eba\u5171\u521b",!o&&" : "))},kl=t(5450),bl="ZInm9B2M",Cl="Ru7jilFK";function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Sl.apply(this,arguments)}var Il=function(e){return v.createElement("svg",Sl({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yl||(yl=v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.47 13.53a.75.75 0 010-1.06L9.94 8 5.47 3.53a.75.75 0 011.06-1.06l5 5a.75.75 0 010 1.06l-5 5a.75.75 0 01-1.06 0z",fill:"#fff"})))},Nl=t(17068),xl=t(66028),Tl=t(72627),Ll=function(e){var n,t,l,o,a=e||{},r=a.awemeInfo,i=a.className,u=et()((function(e,n){var t,l;e.stopPropagation(),N.emit(N.EVENT.videoPause),y.i.sendLog("brandAdIconClick",{group_id:null==r?void 0:r.awemeId,brand_ad_type:kl.AD_LOG_MAP[null==r||null===(t=r.webRawData)||void 0===t||null===(l=t.brandAd)||void 0===l?void 0:l.brand_type]})}),1e3,{leading:!0,trailing:!1}),c=(0,_.x)((function(){var e,n;y.i.sendLog("brandAdIconShow",{group_id:null==r?void 0:r.awemeId,brand_ad_type:kl.AD_LOG_MAP[null==r||null===(e=r.webRawData)||void 0===e||null===(n=e.brandAd)||void 0===n?void 0:n.brand_type]})}));return v.createElement("div",{className:g()(bl,i),id:bl,ref:c},v.createElement(_t.a,{onClick:function(e){return u(e,Nl.u.AdButton)},className:Cl,target:"_blank",href:globalThis.xssNamespace.douyin_web.filterUrl(null==r||null===(n=r.webRawData)||void 0===n||null===(t=n.brandAd)||void 0===t?void 0:t.open_url,null,{logType:"js.href/src",mode:"black",reportOnly:!1})},v.createElement("span",null,(null==r||null===(l=r.webRawData)||void 0===l||null===(o=l.brandAd)||void 0===o?void 0:o.brand_title)||"\u67e5\u770b\u8be6\u60c5"),v.createElement(ze.Z,{src:globalThis.xssNamespace.douyin_web.filterUrl(Il,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),width:16,height:16,viewBox:"0 0 16 16"})))};function Pl(e){var n,t,l=(e||{}).awemeInfo,o=(0,w.Kf)(l),a=null==l||null===(n=l.webRawData)||void 0===n||null===(t=n.brandAd)||void 0===t?void 0:t.open_url;return o&&a?v.createElement(Ll,e):null}var Zl=function(e){var n=(0,Tl.N)();return v.createElement(xl.k,{componentName:"FeedBrandAd",Slardar:n},v.createElement(Pl,e))},Ml=function(e){var n,t,r,u,s,f,p,J,le,ae=e.awemeInfo,re=e.scene,ie=e.isTopicLinkSearchResult,se=e.videoHashtagClassName,de=e.isTopicLinkDetail,fe=e.videoTags,me=void 0===fe?[]:fe,ve=e.isShowCreateTime,pe=void 0!==ve&&ve,ge=e.abTestData,he=e.onClickUserName,_e=e.className,ye=e.children,we=e.loginUserInfo,Ee=e.loginDispatch,ke=e.fullScreenTarget,be=e.reportExtraParams,Ce=e.onCooperationAuthorClick,Se=e.isShowCooperation,Ie=void 0!==Se&&Se,Ne=e.showSideBar,xe=void 0!==Ne&&Ne,Te=e.isActive,Le=e.canMixListen,Pe=e.toast,Ze=e.showFriendIcon,Me=e.showAccountName,Re=void 0===Me||Me,De=e.showTitle,Oe=void 0===De||De,Ae=e.isInnerFeed,Fe=void 0!==Ae&&Ae,Ue=e.showGuideDownloadClient,Be=void 0!==Ue&&Ue,Ve=(0,Ge.n)(),je=(0,v.useState)(!0),We=(0,a.Z)(je,2),He=We[0],ze=We[1],Ke=null===(n=C.Le.getConfig(C.gI.WallPaperIds))||void 0===n?void 0:c()(n).call(n,null==ae?void 0:ae.awemeId),tn=ae||{},ln=tn.cooperationInfo,on=tn.awemeType,an=tn.awemeId,rn=tn.authorInfo,un=tn.logPb,cn=tn.desc,sn=tn.textExtra,dn=tn.mixInfo,fn=(ln||{}).cooperationCreators,mn=(0,v.useMemo)((function(){var e;if(null==fn||!fn.length)return[];var n=i()(fn),t=[],l=d()(n).call(n,(function(e){return e.roleId===h.CooperationRoleId.Author&&t.push(e),e.roleId!==h.CooperationRoleId.Author}));return m()(e=[]).call(e,t,(0,o.Z)(l))}),[fn]),vn=rn||{},pn=vn.uid,gn=vn.nickname,hn=vn.remarkName||gn,_n=(0,_.x)((function(){y.i.sendLog("postTimeShow",{enter_from:(0,S.mo)(),group_id:ae.awemeId,post_time:(0,I.MH)(1e3*ae.createTime)})})),yn=(0,Xe.c)(),wn=yn.lineHeight,En=yn.videoLineCamp,kn=yn.maxLine,bn=function(e){var n=e.awemeInfo,t=e.videoTags,l=(e.onClickUserName,e.authorId),o=e.awemeType,a=e.logPb,r=e.awemeId;return e.player,(0,v.useEffect)((function(){var e=d()(t).call(t,(function(e){return e.type===k.WZ.RelatedSearch}));e.length&&oe.sendLog("trendingShow",{words_source:"related_search_anchor_v2",enter_from:(0,S.yW)(),words_num:e.length,enter_group_id:n.awemeId,impr_id:(0,ee.U)(n).impr_id})}),[t]),{clickAuthorHeadLog:(0,v.useCallback)((function(){var e;oe.sendLog("clickAuthorHead",(0,Y.Z)({click_from:"title",urlParamList:["previous_page"],author_id:l,group_id:r,log_pb:a,enter_from:(0,S.yW)(),is_full_screen:(0,ne.r)()?"1":"0",from_follow_list:null!==(e=C.Le.getConfig(C.gI.FromFollowList))&&void 0!==e&&e.tag?"1":"0",from_xigua:o===b.ed.XgVideo?1:0,aweme_type:o},(0,te.t)())),N.emit(N.EVENT.videoPause),window.open((0,T.GN)(l))}),[l,o,a,r]),xiguaAnchorClickLog:(0,v.useCallback)((function(){return oe.sendLog("xiguaAnchorClick",{author_id:l,group_id:r})}),[l,r]),xiguaAnchorShowLog:(0,v.useCallback)((function(){return oe.sendLog("xiguaAnchorShow",{author_id:l,group_id:r})}),[l,r]),clickTitleHashtagLog:(0,v.useCallback)((function(e,n,t){oe.sendLog("clickTitleHashtag",{hashtag:$()(n).call(n,1),urlParamList:["previous_page"],author_id:l,group_id:r,log_pb:a,enter_from:(0,S.yW)(),is_full_screen:(0,ne.r)()?"1":"0",tag_id:e,status:"on"})}),[l,r,a]),clickTitleAtLog:(0,v.useCallback)((function(e){oe.sendLog("clickTitleAt",{to_user_id:e,urlParamList:["previous_page"],author_id:l,group_id:r,log_pb:a,enter_from:(0,S.yW)(),is_full_screen:(0,ne.r)()?"1":"0"})}),[r,l,a]),clickVideoTitleLog:(0,v.useCallback)((function(e){oe.sendLog("clickVideoTitle",{action:e?"fold":"expand",urlParamList:["previous_page"],author_id:l,group_id:r,log_pb:a,enter_from:(0,S.yW)(),is_full_screen:(0,ne.r)()?"1":"0"})}),[r,l,a])}}({awemeInfo:ae,videoTags:me,onClickUserName:he,authorId:pn,awemeType:on,logPb:un,awemeId:an,player:Ve}),Cn=bn.clickAuthorHeadLog,Sn=bn.xiguaAnchorClickLog,In=bn.xiguaAnchorShowLog,Nn=bn.clickTitleHashtagLog,xn=bn.clickTitleAtLog,Tn=bn.clickVideoTitleLog,Ln=(0,v.useCallback)((function(){if(null==he||he(),(0,w.Jt)(ae)){if(re===k.lT.Recommend){N.emit(N.EVENT.openAdSideCard);var e=(0,w.Rx)(ae);return void(0,E.E)("realtime_click",{tag:(0,x.f)(),value:null==e?void 0:e.creative_id,log_extra:null==e?void 0:e.log_extra,refer:"title"})}if((0,w.gc)(ae))return void(Pe?Pe("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):Je.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"))}(0,w.gc)(ae)?Pe?Pe("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):Je.F.info("\u5e7f\u544a\u89c6\u9891\u4e0d\u652f\u6301\u6b64\u529f\u80fd"):on===b.ed.XgVideo?(Cn(),N.emit(N.EVENT.videoPause),window.open((0,T.GN)(pn))):N.emit(N.EVENT.videoTitleClick,{awemeId:an,playerId:null==Ve?void 0:Ve.playerId})}),[pn,on,un,an,he,Ve,Cn]),Pn=(0,v.useCallback)((function(){Sn(),Ln()}),[Ln,Sn]),Zn=(0,v.useMemo)((function(){return on===b.ed.XgVideo?(In(),v.createElement("div",{className:"account-badge",onClick:Pn},v.createElement("div",{className:"badge-xg-bg"},v.createElement("div",{className:"badge-xg"}),v.createElement("span",null,"\u6765\u81ea\u897f\u74dc\u89c6\u9891")))):""}),[on,Pn,In]),Mn=(0,v.useCallback)((function(e,n,t){ie&&N.emit(N.EVENT.videoPause),Nn(e,n,t)}),[ie,Nn]),Rn=(0,v.useCallback)((function(e){N.emit(N.EVENT.videoPause),xn(e)}),[xn]),Dn=(0,v.useCallback)((function(e){var n;N.emit(N.EVENT.hideFakeScreen,!1),null==Ve||null===(n=Ve.emit)||void 0===n||n.call(Ve,"titleIsFold",e),Tn(e),ze(e)}),[Ve,Tn]),On=function(e){var n,t,l=e.awemeInfo,o=e.isActive,r=e.canMixListen,i=e.videoTags,u=(0,v.useRef)(!1),s=(0,Ge.n)(),d=(0,v.useState)(!1),f=(0,a.Z)(d,2),m=f[0],p=f[1],g=(0,v.useState)(null),h=(0,a.Z)(g,2),_=h[0],y=h[1],w=null==i||null===(n=i[0])||void 0===n?void 0:n.type;return(0,v.useEffect)((function(){var e,n,t=c()(e=[k.WZ.Mix,k.WZ.Series]).call(e,w),o=k.WZ.Related===w,a=(0,Y.Z)((0,Y.Z)({},l.seriesInfo),l.mixInfo),i=a.totalEpisode,d=a.currentEpisode;if(r&&(t||o)&&(!t||i!==d)){var f=function e(t){var l=t.currentTime,o=t.duration;if(o>5&&o-l<=5&&(null==s||!s.paused)){null==s||s.off(Qe.B.TimeUpdate,e),p(!0);var a=Math.round(o-l)+5;!function e(){null!=s&&s.paused||a-- >0||u.current?n=ue()(e,1e3):p(!1)}()}};return null==s||s.on(Qe.B.TimeUpdate,f),function(){null==s||s.off(Qe.B.TimeUpdate,f),clearTimeout(n)}}}),[s,l,w]),(0,v.useEffect)((function(){if(o&&!_)switch(w){case k.WZ.Mix:case k.WZ.Series:return void y(l);case k.WZ.Related:return void(0,ce.b)({subChannelId:3,count:1,filterGids:l.awemeId,awemeId:l.awemeId}).then((function(e){var n=(0,a.Z)(e.awemeList,1)[0];n.desc.length&&y(n)}));default:return}}),[o,_,l,w]),m&&_?v.createElement(qe,{awemeInfo:_,handleClose:function(){p(!1)},type:null==i||null===(t=i[0])||void 0===t?void 0:t.type,delayClose:function(e){u.current=e},handleClick:function(e){var n,t;null==i||null===(n=i[0])||void 0===n||null===(t=n.onClick)||void 0===t||t.call(n,(0,Y.Z)({awemeInfo:l},e))}}):null}({awemeInfo:ae,isActive:Te,canMixListen:Le,videoTags:me});(0,v.useEffect)((function(){ze(!0)}),[an]);var An=(0,v.useMemo)((function(){return(0,w.Jt)(ae)}),[ae]),Fn=(0,v.useMemo)((function(){return(0,w.Kf)(ae)}),[ae]),Un=(0,L.i7)()&&!(0,L.GP)(),Bn=function(e){var n,t=e.isPositionRight;return v.createElement("div",{className:g()(j,(n={},(0,l.Z)(n,H,t),(0,l.Z)(n,z,!Un),n))},v.createElement($e.Vp,{style:{color:"rgba(255, 255, 255, 0.5)"},className:g()(W),type:"ad"},"\u5e7f\u544a"))},Vn=function(e){var n=e.isBtnShow,t=e.isPreRender;if(!Fe)return An||Fn?t?n&&v.createElement(Bn,{isPositionRight:!0}):!n&&v.createElement(Bn,{isPositionRight:!1}):null};return null!=Ve&&Ve.video?v.createElement("div",{id:"video-info-wrap",className:g()("xgplayer-video-info-wrap xgplayer-video-info-wrap-new",G,{fullscreen:!He&&Boolean((null==ge||null===(t=ge.danmaku)||void 0===t?void 0:t.douyin_danmaku)||!1)}),"data-state":"normal"},ye,v.createElement("div",{className:g()("video-info-detail",{isFireFox:(0,L.vU)(),wallpaperTitle:(null===(r=C.Le.getConfig(C.gI.WallPaperIds))||void 0===r?void 0:c()(r).call(r,null==ae?void 0:ae.awemeId))||Be,wallpaperClientTile:(null===(u=C.Le.getConfig(C.gI.WallPaperIds))||void 0===u?void 0:c()(u).call(u,null==ae?void 0:ae.awemeId))&&(0,P.DT)()},_e),"data-e2e":"video-info","data-e2e-aweme-id":ae.awemeId},On,Re&&v.createElement("div",{className:"account"},v.createElement("div",{className:"account-name","data-e2e":"feed-video-nickname"},v.createElement("span",{onClick:Ln},v.createElement(en.Z,{className:g()(O,B),text:"@".concat(hn)}))),v.createElement("div",{className:"video-create-time"},pe&&v.createElement("span",{ref:_n,className:"time"},"\xb7 ".concat((0,I.MH)(1e3*ae.createTime)))),Zn,on===b.ed.Note&&v.createElement("div",{className:"account-card"},v.createElement(Ct.J,{className:K})),Boolean((null==ae||null===(s=ae.authorInfo)||void 0===s||null===(f=s.relationLabel)||void 0===f?void 0:f.label_info)&&Ze)&&v.createElement("div",{className:"account-card"},v.createElement("span",{className:X},null==ae||null===(p=ae.authorInfo)||void 0===p||null===(J=p.relationLabel)||void 0===J?void 0:J.label_info)),(null==mn?void 0:mn.length)>1&&Ie&&v.createElement(El,{authorList:mn,isTag:!0,onClick:function(){il({logParams:{clickMethod:"more_button"},showCooperationList:mn,loginUserInfo:we,awemeInfo:ae,reportExtraParams:be,loginDispatch:Ee})}})),(null==mn?void 0:mn.length)>0&&Ie&&v.createElement(dl,{authorList:mn,loginUserInfo:we,loginDispatch:Ee,fullScreenTarget:ke,reportExtraParams:be,awemeInfo:ae,onCooperationAuthorClick:Ce,abTestData:ge,showSideBar:xe}),Oe&&v.createElement("div",{className:"title","data-e2e":"video-desc"},v.createElement(nn.Z,{maxLine:kn,lineClamp:En,btnClassName:g()(M,V,B),onlyKey:cn,btnOnClick:Dn,lineHeight:wn,renderContent:function(e){var n=e.isUnfold;return v.createElement(en.Z,{wrapperClassName:A,className:g()(F,B),userTextClassName:g()(R,O),hashTagClassName:g()((0,l.Z)({},D,ie),se),getHashTagHref:function(e,n){var t,l;return ie?m()(t=m()(l="https://www.douyin.com/search/".concat(encodeURIComponent(e),"?source=pc_click_hashtag_feed&enter_from=")).call(l,(0,S.vM)(),"&aweme_id=")).call(t,ae.awemeId):de?(0,T.bP)(n):""},text:cn,isRemoveRowspan:!n,textExtra:sn,awemeInfo:ae,onClickHashtag:Mn,onClickUser:Rn,enterMethod:"video_title_at",searchWordsType:Ye.VideoInfoTitle,abtestData:ge,player:Ve},(null==dn?void 0:dn.currentEpisode)&&v.createElement("span",null,"\u7b2c",null==dn?void 0:dn.currentEpisode,"\u96c6\uff1a"))},showExpandButton:!An,renderBeforeContent:function(e){return Vn({isBtnShow:e,isPreRender:!0})}},(function(e){return Vn({isBtnShow:e,isPreRender:!1})}))),v.createElement("div",{className:q},me.length>0&&!Ke&&!Be&&v.createElement("div",{className:g()("under-title-tag",Q)},v.createElement(bt,{tagList:me,awemeInfo:ae,isActive:Te,reportExtraParams:be,isShowUpdateText:!0,player:Ve}))),(0,w.Kf)(ae)&&!Fe&&v.createElement(Zl,{awemeInfo:ae,isActive:Te,className:U})),v.createElement("div",{className:g()("video-info-mask",(0,l.Z)({},"windows-client-flag","Windows"===(null===(le=(0,Z.fV)())||void 0===le?void 0:le.os)&&(0,P.DT)()))}),v.createElement("div",{className:"mini-progress-outer"},v.createElement("div",{className:"mini-progress-inner"}))):null}},28208:function(e,n,t){t.d(n,{Vw:function(){return $}});var l,o=t(30906),a=t(19049),r=t(95508),i=t(73316),u=t(6670),c=t(78034),s=t(65146),d=t(32781),f=t(94090),m=t.n(f),v=t(76569),p=t.n(v),g=t(11227),h=t.n(g),_=t(53864),y=t(61508),w=t(44487),E=t(48051),k=t(79705),b=t.n(k),C=t(7793),S=t(83400),I=t(83901),N=t(79784),x=t(353),T=t(54867),L=t(12338),P=t(97876),Z=t(13971),M=t(5611),R=t(67495),D=t(25902),O=t(71116),A=t(76475);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},F.apply(this,arguments)}var U,B=function(e){return _.createElement("svg",F({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 8.5a2 2 0 00-2 2v11a2 2 0 002 2h12.5a2 2 0 002-2v-11a2 2 0 00-2-2H9.75zM15 11.25h-3.75a1 1 0 00-1 1V16h2v-2.75H15v-2zm5.75 9.5H17v-2h2.75V16h2v3.75a1 1 0 01-1 1z",fill:"#fff"})))};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},V.apply(this,arguments)}var j=function(e){return _.createElement("svg",V({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),U||(U=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 10.5a2 2 0 012-2h12.5a2 2 0 012 2v11a2 2 0 01-2 2H9.75a2 2 0 01-2-2v-11zM14 15.75h-3.75v-2H13V11h2v3.75a1 1 0 01-1 1zm7.75.5H18a1 1 0 00-1 1V21h2v-2.75h2.75v-2z",fill:"#fff"})))},W=new(t(13795).hD)({fullscreenBubbleShow:{eventName:"fullscreen_bubble_show",params:{author_id:"",group_id:"",enter_from:"recommend"}},enterFullWebscreen:{eventName:"enter_full_webscreen",params:{author_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",item_duration_ms:0,click_from:""}},exitFullWebscreen:{eventName:"exit_full_webscreen",params:{author_id:"",group_id:"",enter_from:"recommend",click_from:""}}}),H=t(9909),z=t(66028),G=t(35667),K=t(72627),q=t(7786),Q=t(75780);function X(e){var n=e.mouseEnter,t=e.player,l=e.isCtxCssFullScreen,o=(0,_.useState)(q.s.getPlayerScene(null==t?void 0:t.playerId)===T.lT.Modal?q.s.getPlayerIsPageFullscreen(null==t?void 0:t.playerId):q.s.getIsPageFullscreen()||l),a=(0,d.Z)(o,2),r=a[0],i=a[1];return(0,_.useEffect)((function(){if(t){var e=P.listen(P.EVENT.pageFullScreen,(function(e){var n=e||{},l=n.playerId,o=n.fullScreen;q.s.getPlayerScene(null==t?void 0:t.playerId)===T.lT.Modal?l===(null==t?void 0:t.playerId)&&(i(o),q.s.setPageFullscreen({playerId:t.playerId,isPageFullscreen:o})):(i(o),q.s.setPageFullscreen({playerId:t.playerId,isPageFullscreen:o}))}));return function(){e()}}}),[t]),_.createElement(_.Fragment,null,_.createElement("div",{onMouseEnter:function(){null==n||n(),(0,Z.qQ)(x.LocalStorageKeys.ShowPageFullScreenGuide,!0)},onClick:function(){var e=q.s.getPlayerIsPageFullscreen(null==t?void 0:t.playerId);i(!e),q.s.setPageFullscreen({playerId:t.playerId,isPageFullscreen:!e}),P.emit(P.EVENT.pageFullScreen,{clickMethod:"icon",fullScreen:!e,playerId:t.playerId}),t.emit(y.USER_ACTION,{action:"page_fullscreen_change"})},className:"xgplayer-icon"},r?_.createElement(H.Z,{width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(j,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}):_.createElement(H.Z,{width:32,height:32,viewBox:"0 0 32 32",src:globalThis.xssNamespace.douyin_web.filterUrl(B,null,{logType:"js.href/src",mode:"black",reportOnly:!1})})),_.createElement("div",{className:b()("xgTips")},r&&_.createElement("span",null,"\u9000\u51fa"),_.createElement("span",null,(0,M.DT)()?"\u7a97\u53e3\u5168\u5c4f":"\u7f51\u9875\u5168\u5c4f"),_.createElement("span",{className:"shortcutKey"},"Y")))}var Y=function(e){(0,u.Z)(t,e);var n=(0,c.Z)(t);function t(){var e,l;(0,a.Z)(this,t);for(var o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return l=n.call.apply(n,m()(e=[this]).call(e,r)),(0,s.Z)((0,i.Z)(l),"onMouseenter",(function(){l.emit("icon_mouseenter",{pluginName:l.pluginName})})),(0,s.Z)((0,i.Z)(l),"onMouseLeave",(function(){l.emit("icon_mouseleave",{pluginName:l.pluginName})})),l}return(0,r.Z)(t,[{key:"updateConfig",value:function(e){this.config=e,this.renderRoot()}},{key:"afterCreate",value:function(){p()(this).call(this,"mouseenter",this.onMouseenter),p()(this).call(this,"mouseleave",this.onMouseLeave),this.renderRoot()}},{key:"mouseEnter",value:function(){var e;this.config.mouseEnter&&(null===(e=this.config)||void 0===e||e.mouseEnter())}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseLeave),(0,Q.v)(this)}},{key:"renderRoot",value:function(){var e,n=_.createElement(X,(0,o.Z)({mouseEnter:p()(e=this.mouseEnter).call(e,this)},this.config));(0,Q.s)(this,n)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-page-full-screen" data-state="normal" data-e2e="xgplayer-page-full-screen">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"PageFullScreenPlugin"}},{key:"defaultConfig",get:function(){return{position:E.kd.CONTROLS_RIGHT,index:.8,className:"xgplayer-page-full-screen"}}}]),t}(w.ZP),J=function(e){var n=e.awemeInfo,t=e.logParams,l=e.isActive,o=e.defaultIsPageFullScreen,a=e.modalEnterFrom,r=(0,_.useRef)(),i=((0,_.useContext)(A.C)||{}).isCssFullScreen,u=(0,G.n)(),c=(0,_.useCallback)((function(){}),[]);return(0,_.useEffect)((function(){if(u&&l)return null==u||u.registerPlugin(Y,{player:u,mouseEnter:c,isCtxCssFullScreen:i}),(null!=o?o:i)&&q.s.setPageFullscreen({playerId:u.playerId,isPageFullscreen:null!=o?o:i}),function(){u.getPlugin("PageFullScreenPlugin")&&(null==u||u.unRegisterPlugin("PageFullScreenPlugin"))}}),[u,l,c]),(0,_.useEffect)((function(){if(u&&l){var e,n=u.getPlugin("PageFullScreenPlugin");n&&h()(e=[T.lT.Follow,T.lT.Friend,T.lT.Recommend,T.lT.Topic]).call(e,q.s.getPlayerScene(u.playerId))&&n.updateConfig({mouseEnter:c,player:u,isCtxCssFullScreen:i})}}),[i]),(0,_.useEffect)((function(){if(n&&u&&l){var e=P.listen(P.EVENT.pageFullScreen,(function(e){var l,o,r=e.clickMethod,i=e.fullScreen,c=null!==(l=q.s.getIsPageFullscreen())&&void 0!==l&&l,s=null!=i?i:!c,d={author_id:null==n?void 0:n.authorUserId,group_id:null==n?void 0:n.groupId,enter_from:null==t?void 0:t.enter_from,enter_from_merge:null==t?void 0:t.enter_from_merge,item_duration_ms:(null==n||null===(o=n.video)||void 0===o?void 0:o.duration)||0,click_from:r};if(s){if("inner_player"!==r&&W.sendLog("enterFullWebscreen",d),(0,S.Jt)(n)){var f=(0,S.Rx)(n);(0,I.E)("full_screen",{tag:(0,R.f)(),value:f.creative_id,log_extra:f.log_extra,player_form:"web_full"})}}else if(!1!==c&&(W.sendLog("exitFullWebscreen",d),(0,S.Jt)(n))){var m=(0,S.Rx)(n);(0,I.E)("full_screen",{tag:(0,R.f)(),value:m.creative_id,log_extra:m.log_extra,player_form:"normal"})}if((0,D.r)()&&s){if(q.s.getPlayersByScene(T.lT.Modal).length>0&&a!==N.ModalEnterFromVal.RecommendUpdateWindow)return;u.exitFullscreen(),u.emit("switch_fullscreen",{fullscreen:!0,cssFullScreen:!0})}O.Le.setConfig(O.gI.IsPageFullScreen,{type:s})}));return function(){null==e||e()}}}),[t,u,n,l,a]),(0,_.useEffect)((function(){if(u&&l){var e=function(e){e&&q.s.getIsPageFullscreen()&&(q.s.setPageFullscreen({playerId:u.playerId,isPageFullscreen:!1}),P.emit(P.EVENT.pageFullScreen,{clickMethod:"icon",fullScreen:!1,playerId:u.playerId}))};return u.on(y.FULLSCREEN_CHANGE,e),function(){null==u||u.off(y.FULLSCREEN_CHANGE,e)}}}),[u,l]),(0,_.useEffect)((function(){var e=function(e){if(!(e.shiftKey||e.metaKey||e.ctrlKey)){var n=O.Le.getConfig(O.gI.DisableExit);"Escape"===e.code&&q.s.getPlayerIsPageFullscreen(null==u?void 0:u.playerId)&&u.isUserActive&&!n&&(q.s.setPageFullscreen({playerId:u.playerId,isPageFullscreen:!1}),P.emit(P.EVENT.pageFullScreen,{clickMethod:"esc",fullScreen:!1,playerId:u.playerId}))}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[u]),(0,C.Z)((function(){if(l){var e,n,t=null===(e=O.Le.getConfig(O.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;if(i)t||(r.current=L.F.info({text:"ESC\u6216Y\u53ef\u9000\u51fa\u7f51\u9875\u5168\u5c4f",zIndex:1e4}));else null===(n=r.current)||void 0===n||n.call(r)}}),[i]),null},$=function(e){var n=(0,K.N)();return _.createElement(z.k,{componentName:"PageFullScreen",Slardar:n},_.createElement(J,e))}},53630:function(e,n,t){t.d(n,{A:function(){return o}});var l=t(30978),o=function(e){var n=e.count,t=e.displayWord;return 0===Number(n)?t:(0,l.qe)(Number(n))}},20804:function(e,n,t){t.d(n,{F:function(){return a}});var l=t(13971),o=t(353),a=function(){return{set:function(e){(0,l.qQ)(o.LocalStorageKeys.ShareBehavior,e)},get:function(){var e=(0,l.$o)(o.LocalStorageKeys.ShareBehavior);if(!e){var n={lastShareMethod:null,imAvatarUrl:"",shareCount:0,lastShareTime:null,lastFlipTime:null,isShareUser:!1};e=n,(0,l.qQ)(o.LocalStorageKeys.ShareBehavior,n)}return e}}}},42906:function(e,n,t){t.d(n,{t:function(){return l}});var l=function(e){var n,t,l,o;e&&(null===(n=e.plugins.volume)||void 0===n||null===(t=n.focus)||void 0===t||t.call(n),null===(l=e.plugins.volume)||void 0===l||null===(o=l.unFocus)||void 0===o||o.call(l,1e3,!0,null))}},5265:function(e,n,t){t.d(n,{Z:function(){return i}});var l=t(32781),o=t(53864),a=t(61508),r=t(36177);function i(e,n,t,i){var u=(0,o.useState)(!1),c=(0,l.Z)(u,2),s=c[0],d=c[1],f=(0,o.useMemo)((function(){var t,l;return(null==e||null===(t=e.danmaku)||void 0===t?void 0:t.douyin_danmaku)&&(null==n||null===(l=n.danmakuControl)||void 0===l?void 0:l.enableDanmaku)&&(null==n?void 0:n.awemeType)!==r.ed.Note}),[n,e]);return(0,o.useEffect)((function(){if(i){var e,n,t=function e(n){var t,l,o,r;("firstFrame"===(null==n?void 0:n.eventType)||i.currentTime)&&(null===(t=i.off)||void 0===t||t.call(i,a.XGLOG,e),null===(l=i.off)||void 0===l||l.call(i,a.TIME_UPDATE,e),null!==(o=navigator)&&void 0!==o&&o.hardwareConcurrency?d((null===(r=navigator)||void 0===r?void 0:r.hardwareConcurrency)>4&&f):d(f))};return null===(e=i.on)||void 0===e||e.call(i,a.XGLOG,t),null===(n=i.on)||void 0===n||n.call(i,a.TIME_UPDATE,t),function(){var e,n;null===(e=i.off)||void 0===e||e.call(i,a.XGLOG,t),null===(n=i.off)||void 0===n||n.call(i,a.TIME_UPDATE,t)}}}),[i,f]),{hasDanmakuInput:s}}},12650:function(e,n){n.Z={create:"p4b4Fujh",input:"_nh8JShc",public:"SvQ1nnW4",left:"N8ROIPtV",text:"J2dPnemM",info:"qB6T5yLL",toggle:"t9VnDlr_",footer:"elBeDJDV",btn:"BTuwbAtn",modal:"R5YBt0TP"}},20672:function(e,n){n.Z={avatarWrap:"YTu_A7CW",followIcon:"H2HjqV3h",avatar:"mygoURxc",shortcutTip:"xzXuVLDV",tipKey:"XJKFz3Rg",shortcutTipWrap:"ZszyMVh2",keyTip:"J7B3oszA",followWrap:"E9RYG4AQ",avatarBothWrap:"S2zelznm",liveTip:"WX0x9DbD",liveWrap:"ewj4mpKO",liveLottie:"d2e6aFVx",liveText:"N8v_lTLM",animation:"xfVAG0BN",avatarImageWrap:"pXlwVyyi",followWrapBox:"Fivj58Eg",xgTip:"hraSq8Hi",xgIcon:"wSW9ESOR",ableMiniType:"bx6jfq7y",tipStyle:"g46GL9Iz",hidden:"Dxl9ZYqY",cooperAvatar:"iAzWUpiO"}},32343:function(){},93669:function(e,n,t){e.exports=t.p+"image/generalBG.0640de7c.png"}}]);