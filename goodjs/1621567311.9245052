(window.shark_home_jsonp=window.shark_home_jsonp||[]).push([["recfollow~11d9250d"],{"2d614":function(e,o){e.exports=sdkd479d126aaa128c11834},"83e13":function(e,o,t){"use strict";t.r(o);t("52801");var r,i,n,l,c,a,s,u=t("7ca7d"),f=t("96089"),p=t("f6898"),d=t("b0067"),w=t("eb3e2"),b=t("97a1f"),v=t("722b8"),m=t("db47a"),h=t("8a82b"),y=t("fc794"),g=t.n(y),F=t("d1f87"),_=t("ac24d");function _initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}var O=u.default.Service,D=(new(r=Object(b.Injectable)("live.common.CSRFCookieService"),i=O(w.DataCenter.global),n=O(w.DataCenter.cookie),r((a=_applyDecoratedDescriptor((c=function CSRFCookie(){var e=this;!function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,CSRFCookie),_initDefineProp(this,"globalData",a,this),_initDefineProp(this,"cookie",s,this),this.getCSRFCookie=function(o){var t=e.globalData.get("$SYS.tn"),r=e.globalData.get("$SYS.tvk"),i=e.cookie.get(r);return i?Object(f.of)({name:t,value:i,payload:o}):w.httpClient.get(w.Empty,"/curl/csrfApi/getCsrfCookie",{},{noCache:!0}).pipe(Object(p.map)(function(i){if(0===+i.error){var n=e.cookie.get(r);if(n)return{name:t,value:n,payload:o}}else console.log("\u670d\u52a1\u5668\u9519\u8bef");return{}}))}}).prototype,"globalData",[i],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(c.prototype,"cookie",[n],{enumerable:!0,initializer:null}),l=c))||l)).getCSRFCookie,j=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function _objectWithoutProperties(e,o){var t={};for(var r in e)o.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}var S,R,C,N,P,E,k={type:"get",data:{},schema:String,payload:null,times:1,contentType:null,accept:null,xReq:null,callbackName:null,abnormal:null,errorTip:!1},z={json:"application/json",form:"application/x-www-form-urlencoded"},T={"*":"application/json, text/javascript, */*; q=0.01"},M={ajax:"XMLHttpRequest"},L=function checkType(e){return Object.prototype.toString.call(e).toLowerCase().slice(8,-1)},A=function polling(e,o){var t="number"===L(o)?o:1,r=void 0;return t<=1&&(t=1),Object(h.fromPromise)(new Promise(function(o,i){!function tempFc(){return e().then(o,function(){t-=1,clearTimeout(r),t<=0?i():r=setTimeout(tempFc,1e3*function random(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return e+parseInt(Math.random()*(o-e+1),10)}())})}()}))},x=function httpRequest(e){var o=j({},k,e),t=o.url,r=(o.dataType,o.type),i=o.data,n=o.schema,l=o.csrf,c=o.times,a=o.payload,s=o.errorTip,u=o.abnormal,f=o.callbackName,p=_objectWithoutProperties(o,["url","dataType","type","data","schema","csrf","times","payload","errorTip","abnormal","callbackName"]),d=void 0,b=void 0,m=a?{payload:a}:{};if(!t)throw"Must provide a request url~";var h=function getExpandParams(e){var o=e.contentType,t=e.accept,r=e.xReq,i=e.headers,n=void 0===i?{}:i,l=_objectWithoutProperties(e,["contentType","accept","xReq","headers"]);return o&&(n["Content-Type"]=z[o]||o),t&&(n.Accept=T[t]||t),r&&(n["X-Requested-With"]=M[r]||r),j({},l,{headers:n})}(p);switch(!0){case r&&"jsonp"===r.toLowerCase():return w.jsonpClient.get(n,t,f,h);default:return new _.Observable(function(e){var o=r.toLowerCase();d="undefined"===L(l)?"post"===o:l,b="string"!==L(d);var a=function main(r){return A(function(){return new Promise(function(e,i){w.httpClient[o](n,t,r,h).subscribe(function(o){o&&Object.keys(o).length?e(o):i()})})},c).subscribe(function(o){var t=o.error,r=o.code,i=o.msg,n=o.data;if(s&&(+t||+r)){var l="undefined"!==L(i)?i:n.toString();v.a.error(l)}else e.next(j({},m,o));e.complete()},function(){u&&"string"===L(u)?v.a.error(u):e.next({}),e.complete()})};d&&g.a.check()?D().subscribe(function(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.name,r=o.value;a(j({},i,((e={})[b?t:d]=r,e)))}):a(i)})}},I=t("54992");function FollowDto_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}function _inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function _defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}function FollowDto_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}var q,G,W,U,K,$=w.basicTypes.mapping,X=w.basicTypes.string,B=w.basicTypes.number,H=w.basicTypes.oneOf,Y=(S=$({followNum:"cfer",followFont:"in"}),R=H(X,B),S(C=Object(I.log)((N=function(e){function FollowDto(){var o,t;!function FollowDto_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,FollowDto);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return o=t=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),FollowDto_initDefineProp(t,"followNum",P,t),FollowDto_initDefineProp(t,"followFont",E,t),_possibleConstructorReturn(t,o)}return _inherits(FollowDto,e),FollowDto}(w.EntityDto),P=FollowDto_applyDecoratedDescriptor(N.prototype,"followNum",[R],{enumerable:!0,initializer:null}),E=FollowDto_applyDecoratedDescriptor(N.prototype,"followFont",[X],{enumerable:!0,initializer:null}),C=N))||C)||C),J=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function followServices_objectWithoutProperties(e,o){var t={};for(var r in e)o.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function followServices_inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function followServices_defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}var V,Q,Z,ee,oe=u.default.Service,te=(q=Object(b.Injectable)("live.common.FollowServices"),G=oe(w.DataCenter.cookie),q((U=function(e){function followServices(){!function followServices_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,followServices);var o=function followServices_possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}(this,e.call(this));return function followServices_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}(o,"cookie",K,o),o.geeFn=null,o}return followServices_inherits(followServices,e),followServices.prototype.checkGeeStatus=function checkGeeStatus(e,o,t){var r=this;w.httpClient.post(String,"/member/cpSecurity/checkGeeStatus",{op_type:32,room_id:e.roomId},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).subscribe(function(e){var i=e.data,n=void 0===i?{}:i;(n="string"===typeof n?JSON.parse(n):n)&&1===n.code_type?r.geeInit(n,o,t):v.a.error("\u7f51\u7edc\u5f02\u5e38")})},followServices.prototype.checkGeeCaptcha=function checkGeeCaptcha(e){return new Promise(function(o,t){w.httpClient.post(String,"/member/cpSecurity/checkGeeCaptcha",{op_type:32,gt_version:"v4",code_verify_data:e},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).subscribe(function(e){e&&0===e.error?o(e):v.a.error(e.msg||"\u7f51\u7edc\u5f02\u5e38")})})},followServices.prototype.geeInit=function geeInit(e,o,t){var r=this;this.geeFn||(this.geeFn=Object(F.c)({geeInitParams:{isNeedCheck:!1,isAutoShow:!0,data:e},geeOptions:{width:"290px",area:o},success:function success(e){r.checkGeeCaptcha(e).then(t).then(function(){r.closeGee()})},error:function error(){r.error(),r.closeGee()},close:function close(){r.closeGee()},otherFunctions:{init:function init(){var e=document.createElement("style");e.type="text/css",e.id="geePanelStyle",e.innerHTML=".geetest_panel{ z-index: 9999!important; }",document.body.appendChild(e)}}}))},followServices.prototype.closeGee=function closeGee(){if(this.geeFn&&this.geeFn.destroy){this.geeFn.destroy(),this.geeFn=null;var e=document.getElementById("geePanelStyle");e&&document.body.removeChild(e)}},followServices.prototype.error=function error(){v.a.error("\u9a8c\u8bc1\u7801\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")},followServices.prototype.getTypeOf=function getTypeOf(e){return Object.prototype.toString.call(e).toLowerCase().replace(/\[object\s*(\w+)\]/g,"$1")},followServices.prototype.checkFollow=function checkFollow(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getTypeOf(o),r=1,i="";return"number"===t?i=o:"string"===t?(r=o.indexOf(",")>-1?2:1,i=o):"array"===t&&(r=2,i=o.join(",")),Object(h.fromPromise)(new Promise(function(t,n){i?x({url:"/wgapi/livenc/liveweb/follow/query",data:{rids:i},noCache:!0}).subscribe(function(i){if(2===r)t(i);else{var n=(i&&"string"===e.getTypeOf(i.data)?b.GSON.parse(i.data):{})[o]||0;t(J({},i,{data:{follow:n}}))}}):n(new Error("rid\u4e0d\u5408\u6cd5"))}))},followServices.prototype.handleFollowStream=function handleFollowStream(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return e&&e.subscribe?e.subscribe(function(e){!e||2!==e.error&&302!==e.error?e&&301===e.error?t():o(e):v.a.info(e.msg)}):Object(f.of)({error:"it's not a rx stream"})},followServices.prototype.reqFollow=function reqFollow(e,o){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!g.a.check())return g.a.show(),Object(f.of)({error:-1});var i=e.room_id,n=e.rid,l=followServices_objectWithoutProperties(e,["room_id","rid"]),c=n||i;return c?(this.followRid=c,Object(h.fromPromise)(new Promise(function(e,i){!function sendFollowReq(){var i=x(J({url:"/wgapi/livenc/liveweb/follow/add",type:"post",data:J({rid:t.followRid},l),noCache:!0,contentType:"form"},r));t.handleFollowStream(i,e,function(){return t.checkGeeStatus({room_id:t.followRid},o,sendFollowReq)})}()}))):Object(f.of)({error:-2})},followServices.prototype.followBatchAdd=function followBatchAdd(e,o){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!g.a.check())return g.a.show(),Object(f.of)({error:-1});var i=e.rids,n=followServices_objectWithoutProperties(e,["rids"]),l=this.getTypeOf(i),c=J({},n);if(!i)return Object(f.of)({error:-2});if("number"===l||"string"===l)c.rids=i;else{if("array"!==l)return Object(f.of)({error:-2});c.rids=[].concat(i).join(",")}return Object(h.fromPromise)(new Promise(function(e,i){!function sendFollowReq(){var i=x(J({url:"/wgapi/livenc/liveweb/follow/batchAdd",type:"post",data:c,noCache:!0,contentType:"form"},r));t.handleFollowStream(i,e,function(){return t.checkGeeStatus({},o,sendFollowReq)})}()}))},followServices.prototype.cancelFollowed=function cancelFollowed(e){return Object(h.fromPromise)(new Promise(function(o,t){e&&e.rid>0?x({url:"/wgapi/livenc/liveweb/follow/rm",type:"post",schema:Y,data:e,noCache:!0,contentType:"form"}).subscribe(function(e){o(e)}):t(new Error("rid\u4e0d\u5408\u6cd5"))}))},followServices.prototype.checkDemandFollow=function checkDemandFollow(e){var o=e.upId;return Object(h.fromPromise)(new Promise(function(e,t){o?w.httpClient.get(String,"/wgapi/livenc/liveweb/vodFollow/query",{uid:o},{noCache:!0}).subscribe(function(o){e(o)}):t(new Error("upId\u4e0d\u5408\u6cd5"))}))},followServices.prototype.reqDemandFollow=function reqDemandFollow(e){return g.a.check()?Object(h.fromPromise)(new Promise(function(o,t){x({url:"/wgapi/livenc/liveweb/vodFollow/add",type:"post",data:e,noCache:!0,contentType:"form",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).subscribe(function(e){e&&0===+e.error?o(e):(v.a.info(e.msg||"\u8bf7\u6c42\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u65b0\u5c1d\u8bd5"),t())})})):(g.a.show(),Object(f.of)({error:-1}))},followServices}(b.Service),K=function followServices_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}(U.prototype,"cookie",[G],{enumerable:!0,initializer:null}),W=U))||W);function RecFollowDto_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function RecFollowDto_possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}function RecFollowDto_inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function RecFollowDto_defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}function RecFollowDto_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}var re=w.basicTypes.string,ie=w.basicTypes.number;Object(I.log)((Q=function(e){function RecFollowDto(){var o,t;!function RecFollowDto_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RecFollowDto);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return o=t=RecFollowDto_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),RecFollowDto_initDefineProp(t,"author",Z,t),RecFollowDto_initDefineProp(t,"uid",ee,t),RecFollowDto_possibleConstructorReturn(t,o)}return RecFollowDto_inherits(RecFollowDto,e),RecFollowDto}(w.EntityDto),Z=RecFollowDto_applyDecoratedDescriptor(Q.prototype,"author",[re],{enumerable:!0,initializer:null}),ee=RecFollowDto_applyDecoratedDescriptor(Q.prototype,"uid",[ie],{enumerable:!0,initializer:null}),V=Q));function recFollowActions_inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function recFollowActions_defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}var ne="RECEIVE_RECFOLLOW_LIST",le="UPDATE_DATA",ce=function(e){function RecFollowAction(){return function recFollowActions_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RecFollowAction),function recFollowActions_possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}(this,e.apply(this,arguments))}return recFollowActions_inherits(RecFollowAction,e),RecFollowAction.getList=function getList(){return{type:"GET_RECFOLLOW_LIST"}},RecFollowAction.receviceList=function receviceList(e){return{type:ne,payload:e}},RecFollowAction.addFollow=function addFollow(e){return{type:"ADD_FOLLOW",payload:e}},RecFollowAction.defaultAction=function defaultAction(){return{type:"DEFAULT_ACTION"}},RecFollowAction.update=function update(e){return{type:le,payload:e}},RecFollowAction}(b.Action);var ae,se,ue,fe,pe,de,we,be=function(){function DateFormat(){!function DateFormat_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,DateFormat)}return DateFormat.isDate=function isDate(e){return"[object Date]"==={}.toString.call(e)},DateFormat.formatDate=function formatDate(e,o){if(!DateFormat.isDate(e))return e;var t=[{key:"M+",val:e.getMonth()+1},{key:"d+",val:e.getDate()},{key:"h+",val:e.getHours()},{key:"m+",val:e.getMinutes()},{key:"s+",val:e.getSeconds()},{key:"q+",val:Math.floor((e.getMonth()+3)/3)},{key:"S",val:e.getMilliseconds()}],r=o.slice(0);return/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(""+e.getFullYear()).substr(4-RegExp.$1.length))),t.forEach(function(e){new RegExp("("+e.key+")").test(r)&&(r=r.replace(RegExp.$1,1===RegExp.$1.length?e.val:("00"+e.val).substr((""+e.val).length)))}),r},DateFormat.formatSecond=function formatSecond(e,o){if("number"!==typeof e||"string"!==typeof o)return e;function fill(e){return e<10?"0"+e:e}var t=e%60,r=e-t,i="",n="",l=o;return/h/.test(o)?(n=Math.floor(r%3600),i=Math.floor(e/3600),l=l.replace(/h+/i,fill(i))):/s/.test(o)&&(n=Math.floor(r/60)),l.replace(/m+/g,fill(n)).replace(/s+/g,fill(t))},DateFormat}(),ve=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function recFollowServices_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function recFollowServices_possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}function recFollowServices_inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function recFollowServices_defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}function recFollowServices_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}var me,he,ye,ge,Fe,_e=u.default.Store,Oe=u.default.Service,De=function setLocalStorage(e,o,t){return w.DataCenter.localStorage.set(e,o,t)},je=function getLocalStorage(e){return w.DataCenter.localStorage.get(e)},Se={newUser:"recFollowIsNew_",notifyMap:"recFollowNotifyMap_"},Re=(ae=_e(),se=Oe(w.DataCenter.cookie),ue=Oe(w.DataCenter.global),fe=function(e){function RecFollowServices(){var o,t;!function recFollowServices_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RecFollowServices);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return o=t=recFollowServices_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),recFollowServices_initDefineProp(t,"store",pe,t),recFollowServices_initDefineProp(t,"cookie",de,t),recFollowServices_initDefineProp(t,"globalData",we,t),t.getUid=function(){return t.globalData.get("USER_INFO.uid")||""},t.getIsNewKey=function(){var e=t.getUid();return""+Se.newUser+e},t.getNotifyMapKey=function(){var e=t.getUid();return""+Se.notifyMap+e},t.getIsNew=function(){var e=t.getIsNewKey(),o=!!je(e);return o||(o=!!t.cookie.get("isNewUser"))&&(De(e,o,31536e3),t.cookie.remove("isNewUser")),o},t.setIsNew=function(e){var o=t.getIsNewKey();De(o,e,31536e3)},t.getNotifyMap=function(){var e=t.getNotifyMapKey();return je(e)},t.setNotifyMap=function(){var e=t.getNotifyMapKey(),o=t.getNotifyMap()||{};o[be.formatDate(new Date,"yyyy/MM/dd")]=1,De(e,o,31536e3)},t.checkRecfollow=function(){var e;if(!(e=t.getIsNew()))return!1;var o=t.getNotifyMap()||{};return!(Object.keys(o).length>=3)&&(!o[be.formatDate(new Date,"yyyy/MM/dd")]&&e)},recFollowServices_possibleConstructorReturn(t,o)}return recFollowServices_inherits(RecFollowServices,e),RecFollowServices.prototype.getList=function getList(){this.store.dispatch(ce.getList())},RecFollowServices.prototype.closeWin=function closeWin(){this.store.dispatch(ce.update({showRec:!1}))},RecFollowServices.prototype.toggleSelect=function toggleSelect(e){var o=this.store.getState().recFollowData.cancelMap,t=ve({},o),r=o[e];t[e]=!r,this.store.dispatch(ce.update({cancelMap:t}))},RecFollowServices.prototype.addFollow=function addFollow(e){this.store.dispatch(ce.addFollow(e))},RecFollowServices}(b.Service),pe=recFollowServices_applyDecoratedDescriptor(fe.prototype,"store",[ae],{enumerable:!0,initializer:null}),de=recFollowServices_applyDecoratedDescriptor(fe.prototype,"cookie",[se],{enumerable:!0,initializer:null}),we=recFollowServices_applyDecoratedDescriptor(fe.prototype,"globalData",[ue],{enumerable:!0,initializer:null}),fe);function recFollowEpics_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function recFollowEpics_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}var Ce=u.default.Service,Ne="/member/followRecommend/getRecFollowList",Pe="/member/followRecommend/batchFollow",Ee=(me=Ce(Re),he=Ce(te),ye=function(){function RecFollowEpics(){!function recFollowEpics_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RecFollowEpics),recFollowEpics_initDefineProp(this,"recFollowService",ge,this),recFollowEpics_initDefineProp(this,"followServices",Fe,this)}return RecFollowEpics.prototype.getList=function getList(e){var o=this;return e.ofType("GET_RECFOLLOW_LIST").pipe(Object(d.switchMap)(function(){return w.httpClient.get(String,Ne,null,{noCache:!0})}),Object(p.map)(function(e){var t=e.error,r=e.data;if(0===t){Object(m.dysub2)({action_code:"130100X",event_id:2,type:1});var i=r?r.map(function(e){return b.GSON.parse(e)}):[];return ce.receviceList({anchorList:i})}return 2===t?(o.recFollowService.setIsNew(!1),ce.defaultAction()):ce.defaultAction()}))},RecFollowEpics.prototype.addFollow=function addFollow(e){var o=this;return e.ofType("ADD_FOLLOW").pipe(Object(d.switchMap)(function(e){var t=e.payload;return o.followServices.followBatchAdd(t,void 0,{url:Pe})}),Object(p.map)(function(e){return 0===e.error&&v.a.info("\u5173\u6ce8\u6210\u529f"),ce.update({showRec:!1})}))},RecFollowEpics}(),ge=recFollowEpics_applyDecoratedDescriptor(ye.prototype,"recFollowService",[me],{enumerable:!0,initializer:null}),Fe=recFollowEpics_applyDecoratedDescriptor(ye.prototype,"followServices",[he],{enumerable:!0,initializer:null}),ye),ke=(0,u.default.combineEpicsClass)(Ee),ze=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var Te={recFollowData:function recFollowCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorList:[],cancelMap:{},showRec:!1},o=arguments[1];switch(o.type){case ne:return ze({},e,o.payload,{showRec:!0});case le:return ze({},e,o.payload);default:return e}}},Me=t("1a22b"),Le=t.n(Me),Ae=t("29218"),xe=t.n(Ae),Ie=t("f2b8b"),qe=t("447d8"),Ge=(t("b7200"),[1,2,3,2,3,1,3,1,2,1,2,3,2,3,1,3,1,2,1,2,3,2,3,1,3,1,2,1,2,3,2,3,1,3,1,2]),We="/shark/live/src/common/modules/recFollowModule/components/RecFollow/components/anchorList.js",Ue=function AnchorList(e){var o=e.list,t=void 0===o?[]:o,r=e.select,i=e.cancelMap;return Le.a.createElement("ul",{className:"recFollow-list",__source:{fileName:We,lineNumber:10},__self:void 0},t.map(function(e,o){return Le.a.createElement("li",{className:"recFollow-item "+(i[e.rid]?"is-cancel":""),key:e.rid,onClick:function onClick(){return r(e.rid,o)},__source:{fileName:We,lineNumber:13},__self:void 0},Le.a.createElement("div",{className:"recFollow-avator "+(e.isLive?"recFollow-live":""),__source:{fileName:We,lineNumber:18},__self:void 0},Le.a.createElement("img",{src:e.icon,__source:{fileName:We,lineNumber:19},__self:void 0})),Le.a.createElement("div",{className:"recFollow-detail",__source:{fileName:We,lineNumber:21},__self:void 0},Le.a.createElement("div",{className:"recFollow-info",__source:{fileName:We,lineNumber:22},__self:void 0},Le.a.createElement("span",{className:"recFollow-nickname",__source:{fileName:We,lineNumber:23},__self:void 0},e.nickname),Le.a.createElement("span",{className:"recFollow-tag recFollow-cate"+Ge[o],__source:{fileName:We,lineNumber:24},__self:void 0},e.cate)),Le.a.createElement("p",{className:"recFollow-desc",__source:{fileName:We,lineNumber:26},__self:void 0},e.des),Le.a.createElement("p",{className:"recFollow-sub",__source:{fileName:We,lineNumber:29},__self:void 0},e.customize)))}))};Ue.propTypes={list:xe.a.array.isRequired,select:xe.a.func.isRequired,cancelMap:xe.a.object.isRequired},Ue.defaultProps={list:[],select:function select(){},cancelMap:{}};var Ke,$e,Xe,Be,He=Ue,Ye=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Je="/shark/live/src/common/modules/recFollowModule/components/RecFollow/RecFollow.js";function RecFollow_possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==typeof o&&"function"!==typeof o?e:o}function RecFollow_inherits(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):function RecFollow_defaults(e,o){for(var t=Object.getOwnPropertyNames(o),r=0;r<t.length;r++){var i=t[r],n=Object.getOwnPropertyDescriptor(o,i);n&&n.configurable&&void 0===e[i]&&Object.defineProperty(e,i,n)}return e}(e,o))}var Ve=(Ke=(0,u.default.Service)(Re),Object(I.log)((Xe=function(e){function RecFollow(){var o,t;!function RecFollow_classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RecFollow);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return o=t=RecFollow_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),function RecFollow_initDefineProp(e,o,t,r){t&&Object.defineProperty(e,o,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}(t,"recFollowService",Be,t),t.handlerSelect=function(e,o){t.recFollowService.toggleSelect(e),Object(m.dysub2)({action_code:"130100X03",event_id:1,type:1,p:o+1})},RecFollow_possibleConstructorReturn(t,o)}return RecFollow_inherits(RecFollow,e),RecFollow.prototype.getRandomNum=function getRandomNum(e,o){var t=o-e,r=Math.random();return e+Math.round(r*t)},RecFollow.prototype.componentDidMount=function componentDidMount(){var e=this;if(g.a.check()&&this.recFollowService.checkRecfollow()){var o=1e3*this.getRandomNum(1,4);setTimeout(function(){e.recFollowService.setNotifyMap(),e.recFollowService.getList()},o)}},RecFollow.prototype.handleClose=function handleClose(){this.recFollowService.closeWin(),Object(m.dysub2)({action_code:"130100X02",event_id:1,type:1})},RecFollow.prototype.handleFollow=function handleFollow(){var e=this.props,o=e.anchorList,t=e.cancelMap,r=[],i=[];o.forEach(function(e,o){var n=e.rid;t[n]||(r.push(n),i.push(o+1))});var n={rids:r.join(","),location:i.join(",")};this.recFollowService.addFollow(n),Object(m.dysub2)({action_code:"130100X01",event_id:1,type:1})},RecFollow.prototype.render=function render(){var e=this,o=this.props,t=o.anchorList,r=o.showRec,i=o.cancelMap;if(!r)return null;var n={list:t,select:this.handlerSelect,cancelMap:i};return Le.a.createElement("div",{className:"recFollow-container",__source:{fileName:Je,lineNumber:113},__self:this},Le.a.createElement("div",{className:"recFollow-mask",__source:{fileName:Je,lineNumber:114},__self:this}),Le.a.createElement("div",{className:"recFollow-wrapper",__source:{fileName:Je,lineNumber:115},__self:this},Le.a.createElement("h2",{className:"recFollow-title",__source:{fileName:Je,lineNumber:116},__self:this},"\u5927\u795e\u4e3b\u64ad\uff0c\u5173\u6ce8\u4e00\u6ce2"),Le.a.createElement("div",{className:"recFollow-content",__source:{fileName:Je,lineNumber:117},__self:this},t.length>12?Le.a.createElement(Ie.Scrollbars,{__source:{fileName:Je,lineNumber:120},__self:this},Le.a.createElement(He,Ye({},n,{__source:{fileName:Je,lineNumber:121},__self:this}))):Le.a.createElement(He,Ye({},n,{__source:{fileName:Je,lineNumber:124},__self:this}))),Le.a.createElement("div",{className:"recFollow-footer",__source:{fileName:Je,lineNumber:128},__self:this},Le.a.createElement("span",{className:"recFollow-btn is-follow",onClick:function onClick(){return e.handleFollow()},__source:{fileName:Je,lineNumber:129},__self:this},"\u5173\u6ce8"),Le.a.createElement("span",{className:"recFollow-btn is-close",onClick:function onClick(){return e.handleClose()},__source:{fileName:Je,lineNumber:130},__self:this},"\u5173\u95ed"))))},RecFollow}(Le.a.Component),Be=function RecFollow_applyDecoratedDescriptor(e,o,t,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce(function(t,r){return r(e,o,t)||t},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,o,n),n=null),n}(Xe.prototype,"recFollowService",[Ke],{enumerable:!0,initializer:null}),$e=Xe))||$e);Ve.propTypes={anchorList:xe.a.array.isRequired,showRec:xe.a.bool.isRequired,cancelMap:xe.a.object.isRequired},Ve.defaultProps={anchorList:[],showRec:!1,cancelMap:{}};var Qe=Object(qe.connect)(function mapStateToProps(e){return{anchorList:e.recFollowData.anchorList,showRec:e.recFollowData.showRec,cancelMap:e.recFollowData.cancelMap}})(Ve),Ze=u.default.StoreFactory,eo=new(u.default.createApp({name:"RecFollowApp",providers:[{name:"component",useFactory:function useFactory(){return Qe}},{name:"store",useFactory:function useFactory(){return Ze.getInstance(window.__INITIAL_STATE__,Te,ke)}}]})),oo=document.getElementById("js-rec-follow");oo||((oo=document.createElement("div")).id="js-rec-follow",oo.className="rec-follow",document.body.appendChild(oo)),u.default.render(eo,oo)},99944:function(e,o){e.exports=vendor3d72ea64bdb3506ffdba},b7200:function(e,o,t){},d1db8:function(e,o){e.exports=playerSDK2da5b1f3a3deccaa435b}},[["83e13","common-pre~31ecd969","common~002699c4","common~31ecd969","common~253ae210","common~e45b9e48","common~db300d2f","pre-style-common-pre~c3cebbda","common-pre~002699c4","pre-style-main~31ecd969","recfollow~002699c4","recfollow~253ae210"]]]);
//# sourceMappingURL=http://sourcemap.douyucdn.cn:4567/room/online/sourcemaps/recfollow~11d9250d_5e6c952.js.map