define("indexnew:component/feednews/feed.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/config.js","indexnew:static/js/util.js","indexnew:static/js/recomlog.js","indexnew:static/js/log.js"],function(e,t,o,i,n,a,s,d,p,l,c){function f(e){try{x.init(e)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:657})}}var r=n,m=a,g=s,v=d,h=p,u=l,y=c,x={init:function(e){try{var t=this;t.page=0,t.data=[],t.lock=!1,t.datalock=!1,t.ajaxlock=!1,t.top=!1,t.sec=!1,t.reload=1,t.options={defaultPageSize:e.defaultPageSize||20,pageSize:e.pageSize||e.defaultPageSize,tabData:e.tabData||[],$tabBoxObj:e.tabBoxObj,$feedBoxObj:e.feedBoxObj,$feedCtx:e.feedCtx,tabSelectClass:e.tabSelectClass||"selected",tabHoverClass:e.tabHoverClass||"hover",scrollDiffer:e.scrollDiffer||500,loadTimes:e.loadTimes||999,tabFixedClass:e.tabFixedClass||"",topBlank:e.topBlank||0,tabMap:e.tabMap,itemMap:e.itemMap,liveItemMap:e.liveItemMap,videoItemMap:e.videoItemMap,livesItemMap:e.livesItemMap,miniVideoItemMap:e.miniVideoItemMap,completion:e.completion||!1,liveCompletion:e.liveCompletion||!1,videoCompletion:e.videoCompletion||!1,livesCompletion:e.livesCompletion||!1,miniVideoCompletion:e.miniVideoCompletion||!1,alreadyBottom:e.alreadyBottom||!1,unreachBottom:e.unreachBottom||!1,tabClickCallbaack:e.tabClickCallbaack||!1,beforeRender:e.beforeRender||!1,result:e.result||{from:"indexnew_feed",monkey:"recom"},isStatic:e.isStatic,onTplRenderFinished:e.onTplRenderFinished},t.hasTab=t.options.tabData.length?!0:!1,t.hasTab&&(t.currentType=e.tabData[0][e.urlTabtype],t.options.urlTabtype=e.urlTabtype),e.data&&(t.options.data=e.data,t.data=e.data,t.dataRender()),e.url&&(t.options.url=e.url,t.options.type=e.type,t.getData()),t.hasTab&&(t.tabRender(),t.bindTabEvent()),t.bindFeedEvent()}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:89})}},getData:function(){try{var e=this;if(e.datalock||e.lock||e.ajaxlock)return!1;e.ajaxlock=!0,e.page++;var t=1===e.page?e.options.defaultPageSize:e.options.pageSize,o={pn:e.page,rn:t,ts:+new Date,app_from:"indexnew_feed"},i={tab:"yingshi_new",video_type:1,nums:1===e.page?20:12,mode:0},n={tab:"funny",video_type:3,nums:1===e.page?20:12,mode:0};if("lives"===e.options.type){var a=window.localStorage.getItem("lives-deviceId")||"";1!==e.page&&a||(a=h.andomString(32),window.localStorage.setItem("lives-deviceId",a));var s={reqnums:10,type:"feed",cate:"all",refresh_type:1===e.page?0:1,cuid:a?"pc-"+a:"",source:"hao123"};delete o.pn,delete o.rn;var d=window.location.protocol||"https:";e.options.url=d+"//mbd.baidu.com/webpage?type=live&action=pcindex&format=jsonp&data="+encodeURIComponent(JSON.stringify(s))}r.ajax({url:e.options.url,type:"GET",data:"video"===e.options.type?i:"minivideo"===e.options.type?n:o,dataType:"jsonp",success:function(t){try{if("live"!==e.options.type&&"video"!==e.options.type&&"lives"!==e.options.type&&"minivideo"!==e.options.type&&e.options.isStatic&&!t.data.length)return e.ajaxlock=!0,r("#feed_news_wrap .loadingfeed").hide(),void r("#feed_news_wrap .morefeed").html("<span>没有更多了~</span>").show();if("live"===e.options.type)e.liveDataRender(t);else if("lives"===e.options.type)r("#feed_news_wrap .loadingfeed").hide(),e.livesDataRender(t);else if("video"===e.options.type)e.videoDataRender(t);else if("minivideo"===e.options.type)r("#feed_news_wrap .loadingfeed").hide(),e.miniVideoDataRender(t);else{if(e.data=t.data,e.qid=t.qid,e.tag=t.tag,!e.data.length&&1===e.reload)return e.reload++,e.page--,e.ajaxlock=!1,void setTimeout(function(){try{e.getData()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:185})}},300);if(0===e.data.length)return e.ajaxlock=!1,e.page--,e.options.completion&&e.options.completion(e.page,e.datalock,e.options.type,e.data),!1;e.dataRender()}}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:197})}},beforeSend:function(){try{e.options.beforeRender&&e.options.beforeRender()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:200})}}})}catch(p){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:p.message||p.description,path:"indexnew:component/feednews/feed.js",ln:202})}},tabRender:function(){try{var e=this;r.each(e.options.tabData,function(t,o){try{e.options.$tabBoxObj.append(e.options.tabMap(t,o)),0===t&&e.options.$tabBoxObj.find('[data-hook="tab"]').eq(0).addClass(e.options.tabSelectClass)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:212})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:213})}},bindTabEvent:function(){try{var e=this;e.options.$tabBoxObj.find('[data-hook="tab"]').on("click",function(t){function o(){try{e.getData(),e.options.$feedBoxObj.attr("monkey",i.data("monkey")),e.lock=!0,e.options.tabClickCallbaack&&e.options.tabClickCallbaack(i,e.currentType)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:242})}}try{if(t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1,e.lock)return!1;var i=r(this);e.currentType=i.data(e.options.urlTabtype),e.page=0,e.datalock=!1,e.options.$tabBoxObj.children().removeClass(e.options.tabSelectClass),i.addClass(e.options.tabSelectClass);var n=g.getViewport().scrollTop,a=e.options.$feedCtx.offset().top-e.options.topBlank;n>a?r("body,html").animate({scrollTop:a-13},400,function(){try{o()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:251})}}):o()}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:255})}}),e.options.$tabBoxObj.find('[data-hook="tab"]').hover(function(){try{var t=r(this).hasClass(e.options.tabSelectClass);t||r(this).addClass(e.options.tabHoverClass)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:262})}},function(){try{r(this).removeClass(e.options.tabHoverClass)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:265})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:266})}},bindFeedEvent:function(){try{var e=this;m.on("viewport.deferchange",e.listenScroll,e)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:271})}},dataRender:function(){try{var e=this;1===e.page&&e.options.$feedBoxObj.html(""),setTimeout(function(){try{var t="",o="",i=[],n=[],a='<div class="top-html">';r.each(e.data,function(i,s){try{var d=e.data[i+1]||[];if(o=e.options.itemMap(i,s,tab=e.options.type,d),!o)return n.push(i),!0;if(6>i&&1===e.page&&"rec"===e.options.type)return a+=o,!0;if(6===i&&1===e.page&&"rec"===e.options.type)return a=a+o+"</div>",t+=a,!0;t+=o}catch(p){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:p.message||p.description,path:"indexnew:component/feednews/feed.js",ln:305})}}),t||y({type:"auto",k:"feed-no-data",v:v.__config__.pageId,t:e.options.type,q:e.qid}),e.options.$feedBoxObj.append(t),e.options.completion&&e.options.completion(e.page,e.datalock,e.options.type,e.data),e.lock=!1,e.ajaxlock=!1,r.each(n,function(t,o){try{e.data[o].isDel=1}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:323})}}),r.each(e.data,function(e,t){try{t.isDel||i.push(t)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:328})}}),e.options.result.data=i,e.options.result.qid=e.qid,e.options.result.tag=e.tag,e.options.onTplRenderFinished&&e.options.onTplRenderFinished(),u.show({el:e.options.$feedBoxObj,items:e.options.$feedBoxObj.find("li.feed_news_item"),result:e.options.result})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:361})}},10)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:363})}},liveDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="live-inner"></div>'),0===e.errno&&e.data&&e.data.live_list&&"{}"!==JSON.stringify(e.data.live_list)&&"[]"!==JSON.stringify(e.data.live_list)){var o=+e.data.has_more;if(1===t.page&&0===o&&0===e.data.live_list.length)return t.options.$feedBoxObj.find("div.live-inner").html('<h3 class="no-live-data">主播正在休息中，请稍后观看</h3>'),void(t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type));if(0===o){if(t.options.$feedBoxObj.find("li.feed_live_item").length<=10)return t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>其他主播正在休息中请稍后观看</h3></li>'),void(t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type))}else t.options.$feedBoxObj.find("li.lesslive").remove();var e=e.data.live_list,i="",n=[];r.each(e,function(e,o){try{o.charm_count=t.formatLiveCharm(o.total_charm_count),o.formatname=o.user_name.length>7?o.user_name.substring(0,7)+"...":o.user_name,i+=t.options.liveItemMap(e,o),n.push(o)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:405})}}),i||y({type:"auto",k:"feed-no-live-data",v:v.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.live-inner").append(i),t.lock=!1,t.ajaxlock=!1,t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>其他主播正在休息中请稍后观看</h3></li>'),t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type))}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:435})}},videoDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="video-inner"></div>'),0===e.errno&&e.data&&e.data.list&&"{}"!==JSON.stringify(e.data.list)&&"[]"!==JSON.stringify(e.data.list)){if(1===t.page&&0===e.data.list.length)return t.options.$feedBoxObj.find("div.video-inner").html('<h3 class="no-video-data">暂时没有视频哦~</h3>'),void(t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type));var e=e.data.list,o="";r.each(e,function(e,i){try{o+=t.options.videoItemMap(e,i.content||{})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:459})}}),o||y({type:"auto",k:"feed-no-video-data",v:v.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.video-inner").append(o),t.lock=!1,t.ajaxlock=!1,t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>没有更多了~</h3></li>'),t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:489})}},miniVideoDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="mini-video-inner"></div>'),0===e.errno&&e.data&&e.data.list.video_list&&"{}"!==JSON.stringify(e.data.list.video_list)&&"[]"!==JSON.stringify(e.data.list.video_list)){if(1===t.page&&0===e.data.list.video_list.length)return t.options.$feedBoxObj.find("div.mini-video-inner").html('<h3 class="no-video-data">暂时没有视频哦~</h3>'),void(t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type));var e=e.data.list.video_list,o="";r.each(e,function(e,i){try{o+=t.options.miniVideoItemMap(e,i||{})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:513})}}),o||y({type:"auto",k:"feed-no-mini-video-data",v:v.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.mini-video-inner").append(o),t.lock=!1,t.ajaxlock=!1,t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.mini-video-inner").append('<li class="feed_live_item lesslive"><h3>没有更多了~</h3></li>'),t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:535})}},livesDataRender:function(e){try{var t=this;if(e&&e.data&&e.data.cuid)if(t.livesRetryNum||(t.livesRetryNum=0),1===t.page&&0===t.livesRetryNum&&t.options.$feedBoxObj.html('<div class="lives-inner"></div>'),0===+e.errno&&e.data){if(e.data.data&&e.data.data.length>0){var o=e.data.data,i="";r.each(o,function(e,o){try{i+=t.options.livesItemMap(e,o||{})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:555})}}),t.options.$feedBoxObj.find("div.lives-inner").append(i),t.lock=!1,t.ajaxlock=!1,t.options.$feedBoxObj.find("li.lesslive").remove(),t.livesRetryNum=0,1===t.page&&t.getData()}else t.livesRetryNum>1&&(1===t.page?(t.options.$feedBoxObj.find("div.lives-inner").html('<h3 class="no-lives-data">暂时没有数据哦~</h3>'),t.options.livesCompletion&&t.options.livesCompletion(t.page,t.datalock,t.options.type)):(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.lives-inner").append('<li class="feed_live_item lesslive"><h3>没有更多了~</h3></li>'),t.options.livesCompletion&&t.options.livesCompletion(t.page,t.datalock,t.options.type))),y({type:"auto",k:"feed-no-lives-data",v:v.__config__.pageId,t:t.options.type,q:e.qid}),t.livesRetryNum<=1&&(t.lock=!1,t.ajaxlock=!1,t.page--,t.livesRetryNum=t.livesRetryNum+1,t.getData());t.options.livesCompletion&&t.options.livesCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.lives-inner").append('<li class="feed_live_item lesslive"><h3>没有更多了~</h3></li>'),t.options.livesCompletion&&t.options.livesCompletion(t.page,t.datalock,t.options.type))}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:610})}},formatLiveCharm:function(e){try{var e=+e,t=9999;return e>t?(e/t).toFixed(2)+"万":e+""}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:619})}},listenScroll:function(){try{var e=this,t=g.getViewport().scrollTop,o=e.options.$feedCtx,i=o.offset().top+o.height(),n=r(window).height(),a=200;t+n+a>=i&&e.getData()}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:652})}}};t.exports=f});
;define("indexnew:component/feednews/feednews.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:component/feednews/feed.js","indexnew:static/js/format.js","indexnew:static/js/store.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/log.js","indexnew:static/js/config.js","indexnew:static/js/cookie.js","indexnew:static/js/browser.js","indexnew:static/js/util.js","indexnew:static/js/wave/wave.js","indexnew:static/js/intervalTime.js"],function(e,t,n,i,s,a,o,d,c,r,l,p,m,f,g,h,u){var w=s,v=a,y=o,x=d,_=c,b=l,j=p,k=f,I=g,S=parseInt(k.ie,10)<8,T=h,A=u,D=50,C=97,O="feed-ad-order1",$="feed-ad-order2",B=j.get("pageId"),F="hao123-indexnunew16"===B,H="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/huangguan.ed44fa1.png",U="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/play-btn.72c3579.png",L="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/play.8a2688d.gif",E="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/review.d7528fe.png",N="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/subscribe.869c237.png",M="https://hao123-static.cdn.bcebos.com/fe-res/her/static/indexnew/component/feednews/play-new-icon.ee0381d.png",q=['<li class="top-news fadeInDown animated" monkey="topNews">','<span class="first #{only}">','<a href="#{url0}" class="top-new" title="#{title0}">#{title0}</a>',"</span>",'<span class="second">','<a href="#{url1}" class="top-new" title="#{title1}">#{title1}</a>',"</span>","</li>"].join(""),V=['<li class="feed-border" style="#{isBorder}">',"</li>",'<li class="feed_news_item #{noimg} fadeInDown animated #{noBorder} #{adClass}" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title} alt="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>','               <span class="g-ib thumbnail">#{img}</span>','               <div style="#{isVideo}" class="playicon-wrapper">','                   <i class="playicon"></i>','                   <p class="duration"><span>#{duration}</span></p>',"               </div>","           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"           #{rightIcon}","       </div>","   </div>",'   <div class="all-title #{hasIcon}"></div>',"</li>"].join(""),z=['<li class="feed_live_item" monkey="liveitem">','    <a href="http://www.hao123.com/video/news?rid=#{live_id}&zhibo=1" class="item-link">','        <div class="coverimg">','            <img src="#{cover}" />','            <div class="status #{isLiving}">·直播中</div>','            <div class="mask">','                <img class="play-btn" src="#{playbtn}"/>',"            </div>","        </div>",'        <div class="text">','            <span class="title" title="#{user_name}">#{formatname}</span>','            <span class="charm"><img src="#{liveCharmCount}" />#{charm_count}</span>',"        </div>","    </a>","</li>"].join(""),P=['<li class="feed_video_item" monkey="videoitem">','    <a href="https://haokan.baidu.com/v?vid=#{vid}&fr=hao123-tab" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{cover_src}" />','            <div class="duration"><span>#{duration}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span title="播放量">','                   <i class="icon play"></i>#{playcnt}',"               </span>",'               <span title="评论数">','                   <i class="icon comment"></i>#{comment_cnt}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),R=['<li class="mini-video-item" monkey="minivideoitem">','    <a href="https://quanmin.baidu.com/v/#{vid}?source=promo-1024312h-0&tab=promo&tag=hao123tab&pd=1024312h&autoplay=1" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{poster}" />','            <div class="duration"><span>#{time_length}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span class="play-wrapper" title="播放量">','                   <i class="icon play"></i>#{play_count}',"               </span>",'               <span class="comment-wrapper" title="作者昵称">','                   <i class="icon comment"></i>#{nick_name}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),W=['<li class="feed_news_item #{noimg} fadeInDown animated" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title} title="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>',"           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"       </div>","   </div>","</li>"].join(""),G=['<li #{monkey} class="feed_news_item tuji fadeInDown animated">',"<h3>",'<a class="g-ib" title="#{title}" href="#{url}" alog-text="#{title}">#{title}</a>',"</h3>",'<a href="#{url}" alog-text="#{title} alt="#{title}">','<img src="#{imgurl1}" />','<img src="#{imgurl2}" />','<img src="#{imgurl3}" />','<span class="g-ib more-img" >点击更多</span>',"</a>",'<div class="tip">','<a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>','<span class="g-ib g-fc2">#{times}</span>',"</div>","</li>"].join(""),V=S?W:V,G=S?W:G,J=['<li class="feed-border" style="#{isBorder}"></li>','<li class="wm #{isFirst}" data-hook="wm" role="floatingwindow">','<div class="all-title #{hasIcon}"></div>','<div id="#{id1}" class="cproad1">',"</div>","</li>"].join(""),K=['<div class="feed-right-icon">','<img class="feed-ad-icon" src="#{adUrl}">','<img class="feed-close-icon" src="#{closeUrl}" id="#{adOrder}">',"</div>"].join(""),Q=['<li class="feed_lives_item" monkey="livesitem">','<div class="live-li">','   <a class="cover-box" title="#{title}"  href="#{liveSrc}">','       <img class="cover-img" src="#{coverImage}">','       <div class="state-box">','           <div class="state" style="background: #{stateBg};">','               <img src="#{stateIcon}">',"               <p>#{stateStr}</p>","           </div>",'           <p class="number" #{isSubscribe}>#{number}</p>',"       </div>",'       <div class="shade">','           <img src="#{shareIcon}">',"       </div>","   </a>",'   <a title="#{title}" href="#{liveSrc}" class="title">#{formatTitle}</a>','   <a class="user" href="#{anchorCmd}">','       <img class="user-head" src="#{anchorPhoto}" loading="lazy">','       <p class="user-name">#{anchorName}</p>',"   </a>","</div>","</li>"].join(""),X='<img src="#{imgurl}" />',Y="",Z={init:function(e,t,n,i,s,a){try{var o=this;o.$feedbox=w("#feed_news_wrap"),o.$refresh=w("a#feed_refresh"),o.newhottop=[],o.hottop=x.get("hottop"),o.waveData=s,o.examType=a||"",o.adOrder8="8"===o.examType,o.insertFirstAd=i.filter(function(e){try{return 1===+e.order}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:252})}}),o.insertSecondAd=i.filter(function(e){try{return 2===+e.order}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:255})}}),o.firstAdShowIndex=13,o.cproadID="123456",o.$loading=w('[data-hook="loading"]',o.$feedbox),o.$liveLoading=w('[data-hook="liveLoading"]',o.$feedbox),o.$morefeed=w('[data-hook="morefeed"]',o.$feedbox),o.$tabBox=w("#feedTab"),o.index=0,o.preSensitive=1,o.nextSensitive=1,o.topData=[],o.firstload=!1,o.url="live"===t||"video"===t||"minivideo"===t?e:e+t,o.type=t,o.isStatic=n,o.wmSlot=[],o.firstwm=!0,o.adIndex=0,o.top=!1,o.sec=!1,o.cmsAd=i,o.feeder(o),o.bindEvent()}catch(d){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:d.message||d.description,path:"indexnew:component/feednews/feednews.js",ln:283})}},bindEvent:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:284})}},feeder:function(e){try{{new v({url:e.url,type:e.type,isStatic:e.isStatic,defaultPageSize:"live"===e.type?11:10,urlTabtype:"type",result:{from:"indexnew_feed",monkey:"recom"},onTplRenderFinished:function(){try{w("#feed_news_list .insert-feed-ad .feed-close-icon").each(function(e){try{w(this).off("click"),w(this).on("click",function(){try{var t=w(this).attr("id")&&w(this).attr("id").split("_"),n=A.getIntervalTime(+t[1][0],+t[1][1])||0;if(localStorage.setItem(t[0],n),b({feed_ad_close_click:t[0]}),w("#feed_news_list .insert-feed-ad")[e]){var i=w("#feed_news_list .insert-feed-ad")[e];i.parentNode.removeChild(i)}}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:316})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:317})}}),"rec"===e.type&&T.initRealTimeWave(e.waveData,"feed")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:319})}},loadTimes:D,scrollDiffer:500,tabFixedClass:"tabfixed",topBlank:C,feedBoxObj:w("#feed_news_list"),feedCtx:w("#feed_news_wrap"),tabMap:function(e,t){try{var n=['<a href="#" class="g-ib" data-type="#{key}" data-monkey="#{monkey}" data-hook="tab">',"#{title}","</a>"].join("");return y(n,{key:t.type,title:t.title,monkey:t.feedmonkey})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:369})}},itemMap:function(t,n,i,s){try{if((n.top||n.sec_fixed)&&2>t&&(e.topData.push(n),0===t))return"";if(e.topData.length&&1===t&&!e.top){var a=e.mergeTopData(e.topData);return 1===e.topData.length&&(a.only="onlyone"),e.top=!0,y(q,a)}if(n.top||n.sec_fixed)return"";e.index++;var o="",d="g-gray",c=(n.ext.doc_domain,"hasimg"),r="video"===n.dataType?"":"display:none;";n.img0||n.img1?(Y=y(X,{imgurl:HAO.httpsTrans(n.img0||n.img1),hottop:n.cms_id?'<span class="hottop">置顶</span>':""}),n.desc&&n.desc.length>90&&(n.desc=n.desc.substr(0,90)+"...")):(Y="",c="noimg",n.desc&&n.desc.length>120&&(n.desc=n.desc.substr(0,120)+"..."));var l="",p="rec"===i&&7===t,m="rec"===i&&7===t&&e.index<=8,f=!e.adOrder8&&"rec"===i&&e.index<=8&&7===t?"":"display:none;";if("video"!==e.type&&e.index%4===0&&t>8?n.img0&&n.img1&&n.img2?l=y(G,{title:n.title,url:n.url,imgurl1:HAO.httpsTrans(n.img0),imgurl2:HAO.httpsTrans(n.img1),imgurl3:HAO.httpsTrans(n.img2),source:n.source,sourceurl:n.source_url||n.sourceUrl,sourceTag:n.source_url||n.sourceUrl?"haslink":"notlink",times:n.format_time?n.format_time:"",monkey:"answer"===n.dataType?'monkey="answer"':""}):e.index--:o=y(V,{url:n.url,img:Y,noimg:c,noBorder:p?"no-border":"",hasIcon:!e.adOrder8&&m?"has-icon":"",isVideo:r,isBorder:f,title:n.title,desc:n.desc,source:n.source,times:"video"===n.dataType?n.playcnt?I.formatNum(n.playcnt)+"次播放":"":n.format_time?n.format_time:"",sourceUrlColor:d,sourceurl:n.source_url||n.sourceUrl,sourceTag:n.source_url||n.sourceUrl?"haslink":"notlink",monkey:n.cms_id?'monkey="cms"':"video"===n.dataType?'monkey="video"':"answer"===n.dataType?'monkey="answer"':"",monkey1:1===e.index?'monkey="first"':"",hook:n.cms_id?'data-hook="cms"':"",noDesc:n.desc?"":"no-desc",duration:n.duration?I.formatDuration(n.duration):""}),n.cms_id)if(e.hottop){var t=w.inArray(n.cms_id,e.hottop);-1===t?e.newhottop.push(n.cms_id):o=""}else e.newhottop.push(n.cms_id);var g="",h=1===e.preSensitive||1===e.nextSensitive,u=7;if(e.examType&&(u=4,e.firstAdShowIndex=e.adOrder8?8:9),!h&&e.preIndex!==e.index&&e.index>=u&&(e.index-2)%4===0){var v=localStorage.getItem(O)||0,x=localStorage.getItem($)||0,_=Date.now(),j=e.insertFirstAd[0]&&1===+e.insertFirstAd[0].ison&&_>v,k=e.insertSecondAd[0]&&1===+e.insertSecondAd[0].ison&&_>x;if(0===e.adIndex&&j){g=e.getInsertAdHtml(e.insertFirstAd[0],O,i);var S=e.firstAdShowIndex;w("#feed_news_list").delegate(".feed-ad-order1","click",function(){try{b({ad_index:S,ad_type:123456,log_type:"click"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:514})}})}else if(1===e.adIndex&&k){g=e.getInsertAdHtml(e.insertSecondAd[0],$);var S=e.firstAdShowIndex+5;b({ad_index:S,ad_type:123456,log_type:"show"}),w("#feed_news_list").delegate(".feed-ad-order2","click",function(){try{b({ad_index:S,ad_type:123456,log_type:"click"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:529})}})}else g=e.getWmHtml(i),e.firstwm=!1;if(0===e.adIndex&&(b({ad_index:e.firstAdShowIndex,ad_type:j?"123456":e.cproadID,log_type:"show"}),!j)){var S=e.firstAdShowIndex;w("#feed_news_list").on("click",".firstwm",function(){try{var e=w("#feed_news_list .cproad1").attr("id").split("_")[1];b({ad_index:S,ad_type:e,log_type:"click"})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:549})}})}e.adIndex++}return e.preIndex=e.index,e.preSensitive=n.sensitive,e.nextSensitive=s.sensitive||0,e.adOrder8?g+o+l:o+l+g}catch(T){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:T.message||T.description,path:"indexnew:component/feednews/feednews.js",ln:561})}},liveItemMap:function(e,t){try{return y(z,{user_name:t.user_name,formatname:t.formatname,cover:HAO.httpsTrans(t.cover),live_id:t.live_id,isLiving:1===+t.live_status?"live":"",charm_count:t.charm_count,liveCharmCount:H,playbtn:U})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:581})}},videoItemMap:function(e,t){try{return y(P,{vid:t.vid,cover_src:HAO.httpsTrans(t.cover_src),duration:I.formatDuration(t.duration),title:t.title,formatTitle:t.title.length>25?t.title.slice(0,25)+"...":t.title,playcnt:I.formatNum(t.playcnt),comment_cnt:I.formatNum(t.comment_cnt)})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:600})}},livesItemMap:function(e,t){try{var n="https://live.baidu.com/m/media/pclive/pchome/live.html?room_id="+t.room_id+"&tab_category=all&page_from=hao123_tab",i={"直播":"直播中","直播中":"直播中","回放":"回放","已结束":"已结束","预约":"预约","预告":"预约","即将直播":"即将直播"},s={"直播":L,"直播中":L,"回放":E,"已结束":E,"预约":N,"预告":N,"即将直播":N},a={"直播":"#FF3355","直播中":"#FF3355","回放":"#768CAE","已结束":"#768CAE","预约":"#4e6ef2","预告":"#4e6ef2","即将直播":"#4e6ef2"},o=t.number||0;return o+="预约"===t.status||"预告"===t.status||"即将直播"===t.status?"预约":"观看",y(Q,{liveSrc:n,coverImage:t.cover_image,stateIcon:s[t.status],shareIcon:M,stateBg:a[t.status],stateStr:i[t.status],anchorPhoto:t.anchor_photo,anchorName:t.anchor_name,number:o,title:t.title,anchorCmd:t.anchor_cmd,formatTitle:t.title.length>25?t.title.slice(0,25)+"...":t.title})}catch(d){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:d.message||d.description,path:"indexnew:component/feednews/feednews.js",ln:658})}},miniVideoItemMap:function(e,t){try{return y(R,{vid:t.vid,poster:HAO.httpsTrans(t.poster),time_length:t.time_length,title:t.title,formatTitle:t.title.length>24?t.title.slice(0,24)+"...":t.title,play_count:t.play_count,nick_name:t.author&&t.author.name})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:675})}},tabClickCallbaack:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:683})}},beforeRender:function(){try{e.$morefeed.hide(),"live"===e.type||"video"===e.type||"minivideo"===e.type||"lives"===e.type?e.$liveLoading.css("display","block"):e.$loading.css("display","block")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:696})}},completion:function(t,n,i){try{0!==e.newhottop.length&&(x.set("hottop",e.newhottop),e.newhottop=[]);var s=w("#feed_news_list"),a=w("li",s).length;e.$loading.hide(),4>t&&7>a&&e.$morefeed.css("display","block"),n||(b({type:"auto",k:"indexnew-feed-"+t,v:j.__config__.pageId,t:i}),t>1&&_.emit("hao123.feedbottom.next",i)),t>=1&&!e.firstload&&(e.firstload=!0),_.emit("hao123.feedbottom.update",i);var o="//cpro.baidustatic.com/cpro/ui/c.js",d="",c="";F?(d="//as1.m.hao123.com/common/9hspp.js?ni=ajhojek",c="//as1.m.hao123.com/production/js/p700.js?fasxixgx=g"):(d="//as1.m.hao123.com/site/api/6g5d5.js?nia=ffeoqq",c="//as1.m.hao123.com/production/ui7pr.js?xskpp=obyh"),e.wmSlot&&e.wmSlot.length&&(w.each(e.wmSlot,function(){try{this.container=document.getElementById(this.container),(window.slotbydup=window.slotbydup||[]).push(this)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:759})}}),e.wmSlot=[]),window.slotbydup&&!window.slotbydup.load&&(window.slotbydup.load=!0,w.getScript(location.protocol+o),w.getScript(location.protocol+d),w.getScript(location.protocol+c))}catch(r){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:r.message||r.description,path:"indexnew:component/feednews/feednews.js",ln:769})}},liveCompletion:function(t,n,i){try{{w("#feed_news_list")}e.$liveLoading.hide(),n||b({type:"auto",k:"indexnew-live-feed-"+t,v:j.__config__.pageId,t:i})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:790})}},videoCompletion:function(t,n,i){try{{w("#feed_news_list")}e.$liveLoading.hide(),n||b({type:"auto",k:"indexnew-video-feed-"+t,v:j.__config__.pageId,t:i})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:811})}},livesCompletion:function(t,n,i){try{{w("#feed_news_list")}e.$liveLoading.hide(),e.$loading.hide(),n||b({type:"auto",k:"indexnew-lives-feed-"+t,v:j.__config__.pageId,t:i})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:832})}},miniVideoCompletion:function(t,n,i){try{{w("#feed_news_list")}e.$liveLoading.hide(),n||b({type:"auto",k:"indexnew-mini-video-feed-"+t,v:j.__config__.pageId,t:i})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:853})}},alreadyBottom:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:863})}},unreachBottom:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:873})}}})}}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:875})}},getWmHtml:function(e){try{var t=this,n=t.firstwm?"u3554099":"u3554102";F&&(n=t.firstwm?"u3760748":"u3595050");var i=j.get("cproFeedIndex",-1)+1,s="_"+n+"_"+i;return this.wmSlot.push({id:n,container:s,async:!0}),j.set("cproFeedIndex",i),t.cproadID=n,y(J,{isFirst:t.firstwm&&F?"firstwm":"",id1:s,isBorder:!t.adIndex&&t.adOrder8?"":"display: none",hasIcon:"rec"===e&&!t.adIndex&&t.adOrder8?"has-icon":""})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feednews.js",ln:903})}},getInsertAdHtml:function(e,t,n){try{var i=this,s="noimg",a="";e.imgurl?(s="hasimg",e.desc&&e.desc.length>90&&(e.desc=e.desc.substr(0,90)+"..."),a=y(X,{imgurl:HAO.httpsTrans(e.imgurl)})):e.desc&&e.desc.length>120&&(e.desc=e.desc.substr(0,120)+"...");var o=y(K,{adUrl:e.ad_url,closeUrl:e.close_url,adOrder:t+"_"+(e.interval_time||"0")+(e.interval_time_type||"0")});return y(V,{url:e.url,img:a,noimg:s,isVideo:"display:none;",title:e.title,desc:e.desc,source:e.source||"",times:e.times||"",sourceUrlColor:"g-gray",sourceurl:e.sourceurl||"#",sourceTag:e.sourceurl?"haslink":"notlink",monkey:'monkey="cms"',monkey1:'monkey="bc"',noDesc:e.desc?"":"no-desc",rightIcon:o,isBorder:!i.adIndex&&i.adOrder8?"":"display: none",hasIcon:"rec"===n&&!i.adIndex&&i.adOrder8?"has-icon":"",adClass:"insert-feed-ad "+t})}catch(d){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:d.message||d.description,path:"indexnew:component/feednews/feednews.js",ln:947})}},mergeTopData:function(e){try{var t={};return e.forEach(function(e,n){try{t["title"+n]=e.title,t["url"+n]=e.url}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:953})}}),t}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:955})}}};t.exports=Z});