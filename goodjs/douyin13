(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([[8261],{8261:function(e,t){!function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):i(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function c(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}(function(e){e.VIDEO_PLAY_QUALITY="video_play_quality",e.CLICK_COMMENT_BUTTON="click_comment_button",e.COMMENT_SHOW="comment_show",e.POST_COMMENT="post_comment",e.CLICK_LIKE="click_like",e.LIKE="like",e.CANCEL_LIKE="cancel_like",e.CLICK_FAVORITE_VIDEO="click_favorite_video",e.CANCEL_FAVORITE_VIDEO="cancel_favorite_video",e.FOLLOW_CANCEL="follow_cancel",e.CLICK_FOLLOW="click_follow",e.SHARE_MENU_SHOW="share_menu_show",e.SHARE_VIDEO="share_video",e.CLOSE_VIDEO_CARD="close_video_card",e.CLICK_AUTHOR_HEAD="click_author_head",e.PLAY_TIME="play_time",e.VIDEO_REQUEST="video_request",e.BEFORE_VIDEO_REQUEST="before_video_request"})(r||(r={})),e.EBiz=void 0,function(e){e.DOUYIN_WEB_RECOMMEND="douyin-web-recommend",e.DOUYIN_WEB_LIVE="douyin-live"}(e.EBiz||(e.EBiz={})),e.EScene=void 0,function(e){e.COMMENT="comment",e.AD_COMMENT="ad_comment",e.PROFILE="profile"}(e.EScene||(e.EScene={}));var u=undefined,l=function(){return"undefined"!=typeof window||"undefined"!=typeof window?window:u},d=l();function p(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{d.location.search.indexOf("pylon-debug")}catch(e){}}}var h=function(t){try{return JSON.parse(t)}catch(e){return{}}},f=function(e){return e===undefined||null===e||e===-Infinity||e===Infinity||isNaN(e)?0:e},g={getCommentInputFeature:function(e){var t,n,r,i,o=e.feed.getFeatures(),a=o.map((function(e){return e.video})),s=o.map((function(e){return e.comment})),c=o.map((function(e){return e.interactive})),u=o.map((function(e){return e.profile})),l=a.slice(0,-1).map((function(e){return e.features.playTime})),d=l.reduce((function(e,t){return e+t}),0)/l.length,p=s.filter((function(e){return e.features.hasComment})).length,h=null===(n=null===(t=null==a?void 0:a.slice(0,-1))||void 0===t?void 0:t.filter((function(e){var t;return e.features.playTime>(null===(t=e.features)||void 0===t?void 0:t.duration)})))||void 0===n?void 0:n.length,g=u.reduce((function(e,t){return e+t.features.count}),0),_=c.slice(0,-1).filter((function(e){return e.features.follow})).length,E=c.slice(0,-1).reduce((function(e,t){return e+t.features.shareShowCount}),0),m=null!==(i=null===(r=null==a?void 0:a[(null==a?void 0:a.length)-1])||void 0===r?void 0:r.features)&&void 0!==i?i:{},y=m.likeCount,v=void 0===y?0:y,b=m.shareCount,O=void 0===b?0:b,w=m.commentCount,T=void 0===w?0:w,D=m.playTime,S=void 0===D?0:D,M=m.duration,P=void 0===M?0:M;return{pre_video_count:a.length-1,video_time:P,play_time:S,pre_play_time_avg:d,pre_play_time_min:f(Math.min.apply(Math,l)),pre_play_time_max:f(Math.max.apply(Math,l)),pre_comment_cnt:p,pre_finish_cnt:h,pre_author_cnt:g,pre_follow_cnt:_,pre_share_cnt:E,item_click_like_cnt:v,item_share_cnt:O,item_comment_cnt:T}},getProfileFeature:function(){}},_=function(t,n){return t===e.EScene.COMMENT||t===e.EScene.AD_COMMENT||t===e.EScene.PROFILE?g.getCommentInputFeature(n.getCollector()):{}},E={getCommentFeatureVector:function(e){return[e.video_time,e.videoPlayTime,e.pre_play_time_avg,e.pre_play_time_min,e.pre_play_time_max,e.pre_comment_cnt,e.pre_finish_cnt,e.pre_author_cnt,e.pre_follow_cnt,e.pre_share_cnt,e.item_click_like_cnt,e.item_share_cnt,e.item_comment_cnt]}},m=function(t,n){return t===e.EScene.COMMENT||t===e.EScene.AD_COMMENT||t===e.EScene.PROFILE?E.getCommentFeatureVector(n):[]},y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function v(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function b(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function O(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O(arguments[t]));return e}var T,D=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&w(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),S=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},M=function(e){return Array.isArray(e)},P=(T=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return T+=1}),R=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);r=e.split(o);for(var a=0;a<r.length;a++){var s=parseInt(r[a],n);s=1*s^t;var c=String.fromCharCode(s);i.push(c)}return i.join("")}}(e,64,25)},A=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},I=function(e,t,n){var r=document.createElement("script");r.src=e,r.onerror=function(){n(e)},r.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(r)},k=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},C=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout((function i(){var o=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-o))}),t),function(){window.clearTimeout(n)}},x=function(e){var t=document.createElement("a");return t.href=e,t},N=function(e){var t={};try{var n=x(e).search;if(!n)return t;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}}))}catch(e){}return t},U=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t};function F(e,t){return e(t={exports:{}},t.exports),t.exports}var j,H,G=F((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()})),L=function(e,t){try{return e?G.get(e,{domain:t||document.domain}):G.get()}catch(e){return""}},Q=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);G.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(e){}},B=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return L(e,t)},e.prototype.setCookie=function(e,t,n,r){Q(e,t,n,r)},e}(),z={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return L(e,t)},setCookie:function(e,t,n,r){Q(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},X={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return L(e,t)},setCookie:function(e,t,n,r){Q(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},$=function(){function e(e,t){this._storage=t&&"session"===t?X:!e&&z.isSupportLS?z:new B}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),V=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?x(n).hostname:"",i=N(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t,n,r){var i=new $(!1),o=new $(!1,"session"),a=e?"_tea_utm_cache_"+e:"_tea_utm_cache",s=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},u=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var p in l)l[p]&&(-1!==u.indexOf(p)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[p]=l[p]):c[p]=l[p],d=!0);if(d)o.setItem(s,"1"),i.setCookie(a,JSON.stringify(c),r,n);else{var h=i.getCookie(a,n);h&&(c=JSON.parse(h))}o.getItem(s)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e){return l}return c}(this.appid,i,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:o,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,a=!1;if(e&&t&&o!==t){n=e,r=t,a=!0;var s=N(e);s.keyword&&(i=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:a}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==(e=i.indexOf("MetaSr"))?(n="sougoubrowser",r=i.substring(e+7,e+10)):-1!==i.indexOf("MQQBrowser")||-1!==i.indexOf("QQBrowser")?(n="qqbrowser",-1!==i.indexOf("MQQBrowser")?(e=i.indexOf("MQQBrowser"),r=i.substring(e+11,e+15)):-1!==i.indexOf("QQBrowser")&&(e=i.indexOf("QQBrowser"),r=i.substring(e+10,e+17))):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("360"))?(n="360browser",r=i.substring(i.indexOf("Chrome")+7)):-1!==i.indexOf("baidubrowser")||-1!==i.indexOf("BIDUBrowser")?(-1!==i.indexOf("baidubrowser")?(e=i.indexOf("baidubrowser"),r=i.substring(e+13,e+16)):-1!==i.indexOf("BIDUBrowser")&&(e=i.indexOf("BIDUBrowser"),r=i.substring(e+12,e+15)),n="baidubrowser"):-1!==(e=i.indexOf("xiaomi"))?-1!==i.indexOf("openlanguagexiaomi")?(n="openlanguage xiaomi",r=i.substring(e+7,e+13)):(n="xiaomi",r=i.substring(e-7,e-1)):-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("QQ"))?(n="qqbrowser",r=i.substring(e+10,e+16)):-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))?(n="Firefox",r=i.substring(e+8)):-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("QQ"))&&(n="qqbrowser",r=i.substring(e+3,e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var o,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,o=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,o)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(e){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),W={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},K={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},q="5.0.53",Y="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",J="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-core.js",Z="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core",ee=function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach((function(e){if(!e)return o=!1,void(e.checkEvent="\u4e8b\u4ef6\u5f02\u5e38");t.checkEventName(e.event)||(o=!1,e.checkEvent="\u4e8b\u4ef6\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934"),t.checkEventParams(e.params)||(o=!1,e.checkParams="\u5c5e\u6027\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934")})),this.checkEventParams(i)||(o=!1),o},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!(!this.calculate(n,"params")||"string"==typeof t[n]&&t[n].length>1024);return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||!1},e}();!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.UnReady="un-ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e.DestoryInstance="destory-instance"}(j||(j={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(H||(H={}));var te=j,ne=void 0,re=(new Date).getTimezoneOffset(),ie=parseInt(""+-re/60,10),oe=60*re,ae=7776e6,se=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new V(t.app_id,t.cookie_domain||"",t.cookie_expire||ae).init();this.eventCheck=new ee(e,t);var r="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new $(!1,"session"),this.localStorage=new $(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var i=this.localStorage.getItem(r);i&&1==i?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(r,"1")),this.envInfo={user:{user_unique_id:ne,user_type:ne,user_id:ne,user_is_auth:ne,user_is_login:ne,device_id:ne,web_id:ne,ip_addr_id:ne,user_unique_id_type:ne},header:{app_id:ne,app_name:ne,app_install_id:ne,install_id:ne,app_package:ne,app_channel:ne,app_version:ne,ab_version:ne,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:ne,traffic_type:ne,client_ip:ne,device_brand:ne,os_api:ne,access:ne,language:n.language,region:ne,app_language:ne,app_region:ne,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:ne,rnd:ne,platform:n.platform,sdk_version:q,sdk_lib:"js",province:ne,city:ne,timezone:ie,tz_offset:oe,tz_name:ne,sim_region:ne,carrier:ne,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:ne,wechat_openid:ne}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var t=this.initConfig.channel;this.domain=R(K[t])}},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){return this.domain},e.prototype.initABData=function(){var e="__tea_sdk_ab_version_"+this.initConfig.app_id,t=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(e,this.initConfig.ab_cookie_domain);t=n?JSON.parse(n):null}else t=this.localStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.clearAbCache=function(){this.ab_version="",this.ab_cache={}},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||"/list";break;case"webid":t="/webid";break;case"tobid":t="/tobid"}var n="";return this.initConfig.caller&&(n="?sdk_version="+q+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){void 0!==e[n]&&null!==e[n]||t.delete(n);try{t.eventCheck.calculate(n,"config")}catch(e){}if("traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=y({},t.evtParams||{},e.evtParams||{});else if("_staging_flag"===n)t.evtParams=y({},t.evtParams||{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:t.envInfo.header.custom[i]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e}(),ce=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog},e.prototype.warn=function(e){this.isLog},e.prototype.error=function(e){this.isLog},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),ue=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Sogou News Spider","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),le=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&!!AppLogBridge}catch(e){return!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){e?t(!0):n(!1)})):n(!1)}catch(e){n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e))}catch(e){}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57cb\u70b9\u4e0a\u62a5",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){}},e}(),de={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function pe(e,t,n,r,i,o,a,s,c){try{var u=new XMLHttpRequest,l=s||"POST";u.open(l,""+e,!0),u.setRequestHeader("Content-Type","application/json; charset=utf-8"),a&&u.setRequestHeader("X-MCS-AppKey",""+a),r&&(u.withCredentials=!0),n&&(u.timeout=n,u.ontimeout=function(){o&&o(t,de.TIMEOUT)}),u.onload=function(){if(i){var e=null;if(u.responseText){try{e=JSON.parse(u.responseText)}catch(t){e={}}i(e,t)}}},u.onerror=function(){u.abort(),o&&o(t,de.XHR_ON)},c?u.send(t):u.send(JSON.stringify(t))}catch(e){}}var he=4001,fe=4e3,ge=4002,_e=4003,Ee=function(e,t,n,r){try{var i=e.match(/\/v\d\//),o="";o=i?i[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var a=e.split(o)[0];if(!a)return void r(e,t,he);t.forEach((function(i){var o=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return"&"===t[0]?t.slice(1):t}(i),s=new Image(1,1);s.onload=function(){s=null,n&&n()},s.onerror=function(){s=null,r&&r(e,t,fe)},s.src=a+"/gif?"+o}))}catch(n){r&&r(e,t,ge,n.message)}},me=function(e,t,n,r,i,o,a,s){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(a)return window.navigator&&window.navigator.sendBeacon?void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():o(e,t,_e)):void Ee(e,t,i,o)}else Ee(e,t,i,o);pe(e,t,n,r,i,o,"","",s)},ye=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},ve=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new $(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(te.SessionReset,(function(){n.resetSessionId()})),this.collect.on(te.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:ye(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:ye(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:ye(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:ye(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),be=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new ee(e,t),this.cacheStorgae=new $(!0),this.localStorage=new $(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||t.report_time||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.pageId=ye(),this.collect.on(te.Ready,(function(){n.reportAll(!1)})),this.collect.on(te.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(te.Event,(function(e){n.event(e)})),this.collect.on(te.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(te.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),A((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var n=w(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e){var t=w(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.destroy||this.collect.sdkStop||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);var i=this.split(this.merge(r));this.send(i,t)}else i=this.split(this.merge(e)),this.send(i,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,r=this.configManager.get(),i=r.header,o=r.user;this.config.enable_pageid&&(i.custom.page_id=this.pageId),i.referrer=this.handleRefer(),i.custom=JSON.stringify(i.custom);var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=e.map((function(e){try{Object.keys(a).length&&!t&&(e.params=y({},a,e.params)),s&&(e.params.$user_unique_id_type=s);var r=n.configManager.getAbCache();return r&&r.uuid&&r.uuid===o.user_unique_id&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return n.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),e}})),u=JSON.parse(JSON.stringify({events:c,user:o,header:i}));u.local_time=Math.floor(Date.now()/1e3),u.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,u.verbose=1;var l=[];return l.push(u),l},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&(r=n.config.filter(r)),n.collect.eventFilter&&r&&(r=n.collect.eventFilter(r));var i=r||e,o=JSON.parse(JSON.stringify(i));if(n.eventCheck.checkVerify(o),!i.length)return;n.collect.emit(te.SubmitBefore,i),me(n.reportUrl,i,n.timeout,n.enable_ttwebid,(function(e,t){e&&0!==e.e?(n.collect.emit(te.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u5931\u8d25",time:Date.now(),data:o,code:e.e,failType:"\u6570\u636e\u5f02\u5e38\u5931\u8d25",status:"fail"})):(n.collect.emit(te.SubmitScuess,{eventData:t,res:e}),n.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:o,code:200,status:"success"}))}),(function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(te.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u7f51\u7edc\u5f02\u5e38",time:Date.now(),data:o,code:t,failType:"\u7f51\u7edc\u5f02\u5e38\u5931\u8d25",status:"fail"})}),t,!1),n.collect.emit(te.SubmitAfter,i)}catch(e){n.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}})))},e}(),Oe=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},we=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new $(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(te.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(te.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(te.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(te.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:Oe(),user_unique_id:this.configManager.get("user_unique_id")||Oe()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=N(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77WEBID\u8bf7\u6c42",logType:"fetch",level:"info",time:Date.now(),data:n});var r=Oe();pe(t,n,3e5,!1,(function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u6210\u529f",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=r,e.collect.configManager.set({localWebId:r}),e.collect.emit(te.TokenError),e.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u8fd4\u56de\u503c\u5f02\u5e38",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})}),(function(){e.complete({web_id:e.configManager.get("web_id")||r,user_unique_id:e.configManager.get("user_unique_id")||r}),e.collect.configManager.set({localWebId:r}),e.collect.emit(te.TokenError),e.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")}))},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(te.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(te.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(te.TokenChange,"uuid"),this.collect.emit(te.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&this.configManager.get("user_unique_id")!==this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(te.TokenReset,"uuid"))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(te.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(te.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise((function(n){pe(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?n(e.tobid):n("")}),(function(){n("")}))}))},e}(),Te=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.eventVerifyReady=!1,this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters,r=n.storage,i=n.fetch;this.cacheStorgae=new r(!1,"session"),this.fetch=i,this.eventVerifyInfo=[],this.sdk_type=q.includes("tob")?"tob":"inner",this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],t.enable_debug&&this.load()}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){},t.onload=function(){},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){}},e.prototype.load=function(){return e=this,t=void 0,r=function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=N(window.location.href),1===this.getStorage()||e.open_devtool_web||parseInt(e.app_id)===this.app_id?(this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool(),[4,this.fetchEventInfo()]):[2];case 1:return t=n.sent(),this.sendData("devtool:web:verify",t.verifyStatus),this.eventVerifyInfo=t.data,[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.getStorage=function(){return this.cacheStorgae.getItem("__applog_devtool_web_"+this.app_id)},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_devtool_web_"+this.app_id,1)},e.prototype.loadDevTool=function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.0.0.2.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"\u57fa\u672c\u4fe1\u606f",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"\u4e0a\u62a5\u57df\u540d":this.collect.configManager.getDomain(),"SDK\u7248\u672c":q,"SDK\u5f15\u5165\u65b9\u5f0f":"npm"}},{title:"\u7528\u6237\u4fe1\u606f",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70b9\u51fb\u83b7\u53d6SSID"}},{title:"\u516c\u5171\u53c2\u6570\u4fe1\u606f",type:2,infoName:{"\u6d4f\u89c8\u5668":this.collect.configManager.get("browser"),"\u6d4f\u89c8\u5668\u7248\u672c":this.collect.configManager.get("browser_version"),"\u5e73\u53f0":this.collect.configManager.get("platform"),"\u8bbe\u5907\u578b\u53f7":this.collect.configManager.get("device_model"),"\u64cd\u4f5c\u7cfb\u7edf":this.collect.configManager.get("os_name"),"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c":this.collect.configManager.get("os_version"),"\u5c4f\u5e55\u5206\u8fa8\u7387":this.collect.configManager.get("resolution"),"\u6765\u6e90":this.collect.configManager.get("referrer"),"\u81ea\u5b9a\u4e49\u4fe1\u606f":""}},{title:"\u914d\u7f6e\u4fe1\u606f",type:3,infoName:{"\u5168\u57cb\u70b9":!!this.config.autotrack,"\u505c\u7559\u65f6\u957f":!!this.config.enable_stay_duration}},{title:"A/B\u914d\u7f6e\u4fe1\u606f",type:4,infoName:{"A/B\u5b9e\u9a8c":!!this.config.enable_ab_test}},{title:"\u5ba2\u6237\u7aef\u4fe1\u606f",type:3,infoName:{"\u6253\u901a\u5f00\u5173":!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(te.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["\u81ea\u5b9a\u4e49\u4fe1\u606f"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B\u57df\u540d"]=e.config.ab_channel_domain||R(W[e.config.channel]),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["\u662f\u5426\u6253\u901a"]=!!e.collect.bridgeReport)}))},e.prototype.loadHook=function(){var e=this;this.collect.stop(),this.collect.on(H.DEBUGGER_MESSAGE,(function(t){switch(t.type){case H.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case H.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events,o=r.header;if(o.custom=JSON.parse(o.custom),!i.length)return;i.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.params=JSON.parse(n.params),"fail"===t.status&&(n.info={message:"code: "+t.code+"\uff0c msg: "+t.failType},n.failType=t.failType);var r=!1,i=!1,o=[];e.eventVerifyInfo&&e.eventVerifyInfo.length&&(e.eventVerifyInfo.forEach((function(e){e.eventStatus=!1})),e.eventVerifyInfo.forEach((function(t){n.event===t.name&&(i=!0,r=!0,n.verifyStatus=t.status,Object.keys(n.params).forEach((function(r){if("event_index"!==r){var a={};a.paramsKey=r,a.paramsKeyValue=n.params[""+r],a.paramsStatus=!1,a.paramsStatusInfo="\u5c5e\u6027\u672a\u5f55\u5165",t.params.forEach((function(t){r===t.name&&(t.checked=!0,typeof n.params[""+r]!==e.formatParamsType(t.value_type)?a.paramsStatusInfo="\u5c5e\u6027\u7c7b\u578b\u9519\u8bef\uff0c\u5e94\u4e3a"+e.formatParamsType(t.value_type):(a.paramsStatus=!0,a.paramsStatusInfo=""))})),o.push(a),a.paramsStatusInfo&&(i=!1)}})),t.params.forEach((function(e){e.checked||(i=!1,o.push({paramsKey:e.name,paramsStatus:!1,paramsStatusInfo:"\u7f3a\u5c11\u5c5e\u6027"+e.name}))})))}))),n.reportStatus="success"===t.status,n.paramsInfo=o,n.eventStatus=i&&"success"===t.status,n.eventRecord=r})),e.updateEvent(r)}return}}))},e.prototype.formatParamsType=function(e){switch(e){case 0:return"string";case 1:case 2:return"number";case 3:return"boolean"}},e.prototype.fetchEventInfo=function(){var e=this;try{return new Promise((function(t){var n=R("1fz22z22z1nz21z4mz4bz4bz18z1nz1nz1jz1mz1ez1fz1mz1kz1cz4az19z27z22z1cz1bz18z1lz1az1cz4az1lz1cz22z4bz18z1nz1nz1jz1mz1ez1bz1cz24z22z1mz1mz1jz21z4bz1mz1nz1cz1lz18z1nz1gz4bz24z4dz4bz18z1nz1nz16z1jz1mz1ez16z1kz1cz22z18")+"?app_id="+e.app_id+"&t="+e.sdk_type+"&nc=false";e.fetch(n,null,3e3,!1,(function(n){e.eventVerifyReady=!0,e.collect.reStart(),t({data:n.data,verifyStatus:!0})}),(function(){e.eventVerifyReady=!0,e.collect.reStart(),t({data:[],verifyStatus:!1})}),"","GET")}))}catch(e){return{data:[],verifyStatus:!1}}},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t.origin===location.origin){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,appid:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady||this.eventVerifyReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode("#debugger-applog-web {\n      position: fixed;\n      width: 50px;\n      height: 50px;\n      background-image: url('https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/applog.png');;\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 50px;\n    }")),e.appendChild(t);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var r=document.createElement("div");r.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(r),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),De={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/tracer.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/visual.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},Se=["ab","autotrack","Stay","store","et","profile","cep","heartbeat","monitor","route","tracer"],Me=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new D,this.remotePlugin=new Map,this.Types=te,this.adapters.fetch=pe,this.adapters.storage=$,this.loadType="full"}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,a=e.plugins.length;o<a;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&Se.includes(e)||(t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk")))},e.prototype.init=function(t){var n,r=this;this.logger=new ce(this.name,t.log),this.inited?this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):t&&S(t)?t.app_id&&"number"==typeof(n=t.app_id)&&!isNaN(n)?!t.app_key||function(e){return"string"==typeof e}(t.app_key)?(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(this.logger.warn("channel must be `cn`, `sg`,`va` !"),t.channel="cn"),this.spider=new ue,this.spider.checkSpider(t)?this.logger.warn("your env may be a spider, can not report!"):(this.appBridge=new le(this,t.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new se(this,t),this.debugger=new Te(this,t),this.initConfig=t,this.emit(te.Init),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cINIT",data:t,level:"info",time:Date.now()}),t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new be,this.tokenManager=new we,this.sessionManager=new ve,Promise.all([new Promise((function(e){r.once(te.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){r.once(te.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,i=t.options,o=JSON.parse(JSON.stringify(r.initConfig)),a=Object.assign(o,i),s=new n;return s.apply(r,a),e.push(s),e}),r.pluginInstances)}catch(e){r.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}r.sdkReady=!0,r.emit(te.Ready),r.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u521d\u59cb\u5316\u5b8c\u6210",time:Date.now(),level:"info",data:r.configManager.get("user")}),r.logger.info("appid: "+t.app_id+", userInfo:"+JSON.stringify(r.configManager.get("user"))),r.logger.info("appid: "+t.app_id+", sdk is ready, version type is "+r.loadType+", version is "+q+", you can report now !!!"),t.disable_auto_pv&&(r.disableAutoPageView=!0);try{"full"===r.loadType&&(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){r.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}r.pageView(),r.on(te.TokenChange,(function(e){"webid"===e&&r.pageView(),r.logger.info("appid: "+t.app_id+" token change, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u8bbe\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(te.TokenReset,(function(){r.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u91cd\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(te.RouteChange,(function(e){e.init||t.disable_route_report||r.pageView()}))})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0)):this.logger.warn("app_key param is error, must be string, please check!"):this.logger.warn("app_id param is error, must be number, please check!"):this.logger.warn("init params error,please check!")},e.prototype.config=function(e){if(this.inited)if(e&&S(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=y({},e),n=this.initConfig.configPersist||this.initConfig.config_persist||!1;if(this.initConfig&&n){var r=this.configManager.getStore();r&&(t=Object.assign(r,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["web_id","user_unique_id"]);this.configManager.set(i),t.hasOwnProperty("web_id")&&this.emit(te.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(te.ConfigUuid,t.user_unique_id),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cCONFIG",level:"info",time:Date.now(),data:t})}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},e.prototype.setUserUniqueID=function(e){this.config({user_unique_id:e})},e.prototype.setHeaderInfo=function(e,t){var n={};n[e]=t,this.config(n)},e.prototype.removeHeaderInfo=function(e){var t={};t[e]=void 0,this.config(t)},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(te.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.started=!0,this.emit(te.Start),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(te.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(te.Event,r),this.emit(te.SessionResetTime))}catch(e){this.logger.warn("something error, please check"),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(te.BeconEvent,n),this.emit(te.SessionResetTime)))}},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return this.logger.warn("eventName is null\uff0c please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=P();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=y({},t,e);this.event("predefine_pageview",n)}},e.prototype.clearEventCache=function(){this.emit(te.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=U(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(te.CustomWebId)}},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=U(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(te.CustomWebId)}},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(te.ResetStay,{url_path:e,title:t,url:n},te.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(te.SetStay,{url_path:e,title:t,url:n},te.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(y({},i))}},o=function(){n.tokenManager.getTobId().then((function(e){i(e)}))};this.sdkReady?o():(t&&setTimeout((function(){i()}),t),this.on(te.Ready,(function(){o()})))}},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(te.ProfileSet,e,te.Profile),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(te.ProfileSetOnce,e,te.Profile),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(te.ProfileIncrement,e,te.Profile),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(te.ProfileUnset,e,te.Profile),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(te.ProfileAppend,e,te.Profile),this.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(te.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,te.Ab)},e.prototype.getVar=function(e,t,n){this.emit(te.AbVar,{name:e,defaultValue:t,callback:n},te.Ab)},e.prototype.getABconfig=function(e,t){this.emit(te.AbConfig,{params:e,callback:t},te.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(te.AbVersionChangeOn,e,te.Ab),function(){t.emit(te.AbVersionChangeOff,e,te.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(te.AbVersionChangeOff,e,te.Ab)},e.prototype.openOverlayer=function(){this.emit(te.AbOpenLayer,"",te.Ab)},e.prototype.closeOverlayer=function(){this.emit(te.AbCloseLayer,"",te.Ab)},e.prototype.getAllVars=function(e){this.emit(te.AbAllVars,e,te.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(te.TokenComplete),this.emit(te.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(te.TokenComplete),this.emit(te.DestoryInstance))},e.plugins=[],e}(),Pe="__rangers_ab_style__",Re={},Ae=[],Ie=function(e){e.length&&e.forEach((function(e){Ae.push(e)}))};function ke(e,t,n,r){var i=e&&e.source||window.opener||window.parent,o=e&&e.origin||r||"*",a={type:t,payload:n};i.postMessage(JSON.stringify(a),o)}function Ce(e,t){Re[e]=Re[e]||[],Re[e].push(t)}function xe(e){if(Ae.some((function(e){return"*"===e}))||Ae.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,r=t.payload;Re[n]&&Re[n].forEach((function(t){"function"==typeof t&&t(e,r)}))}}function Ne(e,t){var n={};if(Object.keys(e).length)for(var r in e){if("filter"===r||"autotrack"===r||"enable_stay_duration"===r)break;n[r]=e[r]}(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:n,version:t},"*"),window.addEventListener("message",xe,!1)}var Ue,Fe="",je=!1;function He(e){var t=e.event,n=e.editorUrl;e.collectInstance,e.fromSession,je||(je=!0,I(n,(function(){ke(t,"abEditorScriptloadSuccess")}),(function(){t&&ke(t,"abEditorScriptloadError"),je=!1})))}!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(Ue||(Ue={}));var Ge=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var r=t.enable_multilink,i=t.ab_channel_domain,o=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=i||R(W[t.channel||"cn"]),u=e.adapters,l=u.storage,d=u.fetch;this.cacheStorgae=new l(!1),this.fetch=d,this.enable_multilink=r,this.enable_ab_visual=o,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=c+"/service/2/abtest_config/",this.reportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500;var p=this.collect.Types;this.types=p,this.collect.on(p.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(p.TokenReset,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(p.AbVar,(function(e){var t=e.name,r=e.defaultValue,i=e.callback;n.getVar(t,r,i)})),this.collect.on(p.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(p.AbConfig,(function(e){var t=e.params,r=e.callback;n.getABconfig(t,r)})),this.collect.on(p.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(p.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(p.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(p.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(p.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(p.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.loadMode=function(){var e,t,n=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}}(),r="";if(n){var i=n.scenario,o=n.href;i?(this.editMode=!0,r=i):!o||-1===o.indexOf("datatester")&&-1===o.indexOf("visual-editor")||(this.editMode=!0,r="visual-editor")}this.enable_ab_visual&&(function(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},Ie(["*"]);var n,r="";Ne(t,q);var i="";try{var o=window.performance.getEntriesByType("resource");if(o&&o.length&&(o.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(i=e.name)})),i||document.currentScript&&(i=document.currentScript.src),i&&(n=i.split("/"))&&n.length)){r="https:/";for(var a=2;a<n.length&&a!==n.length-1;a++)r=r+"/"+n[a];r+="/visual-ab-core"}}catch(e){}Ce("tea:openVisualABEditor",(function(n){var i=n.data;if("string"==typeof n.data)try{i=JSON.parse(n.data)}catch(e){i=void 0}if(i){var o=i.lang;if(i.appId!==t.app_id)return void ke(n,"appIdError");var a=i.version;Fe=a&&r?r+(a?"."+a:".1.0.1")+".js?query="+Date.now():J+"?query="+Date.now(),window.TEAVisualEditor.lang=o,window.TEAVisualEditor.__ab_domin=t.channel_domain||"",He({event:n,editorUrl:Fe,collectInstance:e})}}))}(this.collect,this.config),"visual-editor"===r)?this.collect.destoryInstace():this.enable_multilink&&(e=this.collect,t=this.config,window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id,Ce("tea:openTesterEventInspector",(function(t){var n=t.data;if("string"==typeof t.data)try{n=JSON.parse(t.data)}catch(e){n=void 0}if(n){var r=n.referrer,i=n.lang,o=n.appId;window.TEAVisualEditor.__editor_ajax_domain=r||"",window.TEAVisualEditor.__ab_appId=o||"",window.TEAVisualEditor.lang=i||"",He({event:t,editorUrl:"https://lf3-data.volccdn.com/obj/data-static/log-sdk/collect/tester-event-inspector.js?query="+Date.now(),collectInstance:e})}})))},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,r=e.ab_version_multilink,i=e.data,o=this.checkFromUrl();o?this.mulilinkVersions.push(o):this.mulilinkVersions=r||[],this.extVersions=n||[],this.versions=t||[],this.data=i;var a=this.versions.concat(this.extVersions);this.enable_multilink&&(a=a.concat(this.mulilinkVersions)),this.configVersions(a.join(","))},e.prototype.checkFromUrl=function(){var e=N(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var r={name:e,defaultValue:t,callback:n,type:Ue.Var};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(r,e):this.callbacks.push(r)},e.prototype.getRealVar=function(e,t){var n=e.name,r=e.defaultValue,i=e.callback,o=this.data;if(o){if(S(o[n])){var a=o[n].vid;return"$ab_url"===t?this.mulilinkVersions.includes(a)||this.mulilinkVersions.push(a):this.versions.includes(a)||this.versions.push(a),this.updateVersions(),this.fechEvent(a,t,r),i(o[n].val),void this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u66dd\u5149\u4e86\u5b9e\u9a8c"+n,level:"info",time:Date.now(),data:o[n]})}this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getVar",level:"info",time:Date.now(),data:r}),i(r)}else i(r)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:Ue.All};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getAllVars",level:"info",time:Date.now(),data:this.data})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var r=this.collect.configManager.get(),i=r.header,o=r.user,a=this.getABCache();if(a&&a.uuid&&a.uuid!==o.user_unique_id)return;var s={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href}),local_time_ms:Date.now()};i.custom=JSON.stringify(i.custom);var c={events:[s],user:o,header:i};"$ab_url"===t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify([c])):this.reportExposure(c)}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.reportExposure=function(e){var t=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report():this.reportTimeout=setTimeout((function(){t.report(),clearTimeout(t.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(){var e=this;this.fetch(this.reportUrl,this.exposureCache,2e4),this.exposureCache.forEach((function(t){e.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:[t],code:200,status:"success"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){if(this.ab_cross){var t=this.cacheStorgae.getCookie(e,this.ab_cookie_domain);return t?JSON.parse(t):{}}return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.ab_cross?this.cacheStorgae.setCookie(e,t,2592e6,this.ab_cookie_domain):this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t)},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[],this.collect.configManager.clearAbCache()},e.prototype.openOverlayer=function(e){var t=this;if(function(){if(!document.getElementById(Pe)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=Pe,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(Pe))&&e.parentElement.removeChild(e)},e.prototype.fetchComplete=function(e,t){var n=this;try{if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var r=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&r.push(n)})),this.versions=this.versions.filter((function(e){return r.includes(e)}));var i=e.$ab_url,o=e.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collect.destroy)return;this.getVar("$ab_modification",window.location.href,(function(){var e;e=o.val,window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.__ab_config=e,I("https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-loader.js?query="+Date.now(),(function(){}),(function(){})),n.closeOverlayer()}))}else if(i&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return r.includes(e)}));var a=i.val,s=i.vid;a&&s&&this.getVar("$ab_url",a,(function(){n.editMode||(a!==window.location.href?setTimeout((function(){if(!n.collect.destroy){var e=""+a;e=-1===e.indexOf("http")?"https://"+e:e,x(e).host!==location.host?e=e+"&vid="+s:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===Ue.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]}catch(e){}},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),r={header:y({aid:this.config.app_id},n.user||{},n.header||{},{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77AB\u5b9e\u9a8c\u8bf7\u6c42",level:"info",logType:"fetch",time:Date.now(),data:r}),this.fetch(this.fetchUrl,r,this.config.ab_timeout||3e3,!1,(function(r){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=r.data;"success"===r.message?(t.fetchComplete(i,n.user.user_unique_id),e&&e(i)):(t.fetchComplete(null,n.user.user_unique_id),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u6210\u529f",level:"info",logType:"fetch",time:Date.now(),data:i})}),(function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,n.user.user_unique_id),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",level:"error",logType:"fetch",time:Date.now()})}))},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-\xff]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-\xff]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(e){}return e},e}(),Le=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(e.adapters.fetch,t.event_verify_url&&"string"==typeof t.event_verify_url&&(this.url=t.event_verify_url+"/v1/list_test",this.url)){var r=e.Types;e.on(r.SubmitBefore,(function(e){window.navigator.sendBeacon(n.url,JSON.stringify(e))}))}},e}(),Qe=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,S(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration))}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||(this.collect.beconEvent(this.options.aliveName,y({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:k(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e}(),Be=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||t.max_duration||864e5,this.pageStartTime=Date.now(),S(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.resetParams=function(e,t,n){this.url_path=e,this.url=n,this.title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0,this.resetParams(location.pathname,document.title,location.href)},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||(this.collect.beconEvent(this.options.closeName,y({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:k()},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e}(),ze=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new Qe(e,t),this.pageClose=new Be(e,t);var r=this.collect.Types;this.collect.on(r.ResetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.resetStayDuration(t,r,i)})),this.collect.on(r.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(r.SetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.setStayParmas(t,r,i)})),this.enable(this.url_path,this.title,this.url),this.ready(r.Stay),this.collect.emit(r.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),Xe=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types,i=e.adapters.fetch;this.eventCheck=new ee(e,t),this.fetch=i,this.cache={},this.collect.on(r.ProfileSet,(function(e){n.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){n.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){n.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){n.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){n.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){n.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(n);this.fetch(this.reportUrl,r),this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:r,code:200,status:"success"})}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set",y({},t,{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set_once",y({},t,{profile:!0})))},e.prototype.incrementProfile=function(e){e&&this.report("__profile_increment",y({},e,{profile:!0}))},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",y({},t,{profile:!0}))}},e.prototype.appendProfile=function(e){if(e){var t={};for(var n in e)("string"==typeof e[n]||"Array"===Object.prototype.toString.call(e[n]).slice(8,-1))&&(t[n]=e[n]);Object.keys(t).length&&this.report("__profile_append",y({},t,{profile:!0}))}},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach((function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}}))},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return;var r={};for(var i in e)("string"==typeof e[i]||"number"==typeof e[i]||"Array"===Object.prototype.toString.call(e[i]).slice(8,-1))&&(r[i]=e[i]);var o=Object.keys(r);if(!o.length)return;if(!this.eventCheck.checkEventParams(r))return;var a=Date.now();return o.filter((function(r){var i=n.cache[r];return t?!i:!(i&&n.compare(i.val,e[r])&&a-i.timestamp<n.duration)})).reduce((function(e,t){return e[t]=r[t],e}),{})}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){},e}(),$e=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=C((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Ve=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain){var r=e.adapters.fetch;if(this.fetch=r,!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode;"f_data"===t&&n.sdkError(r,i)}))}}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,a=n.sdk_version,s=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:a,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC",url:location.href}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.fetch(e.url,[c],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],i=r.user,o=r.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(o),user:JSON.stringify(i)}),local_time_ms:Date.now()}})),user:{user_unique_id:i.user_unique_id},header:{}};setTimeout((function(){n.fetch(n.url,[s],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e}();function We(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}var Ke=function(e,t){return!!Ze(e,t)};function qe(e){for(var t=e;t&&!We(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function Ye(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}var Je=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},Ze=function(e,t){if("string"==typeof t)return Je(e,t);if(M(t)){for(var n=!1,r=0;r<t.length;r++)if(Je(e,t[r])){n=!0;break}return n}},et=function(e,t){var n={};if("string"==typeof t)Je(e,t)&&(n.attrs=e.getAttribute(t));else if(M(t))for(var r=0;r<t.length;r++)Je(e,t[r])&&(n[t[r]]=e.getAttribute(t[r]));return n},tt=function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0},nt=function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n},rt=function(){function e(e,t,n){var r=this;this.statistics=!1,this.pageView=!1,this.clickEvent=function(e){(function(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&nt(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!We(n,"container")&&!tt(n)&&!t.svg)})(e.target,r.options)&&r.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){r.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){r.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&r.eventHandel({eventType:"dom",eventName:"beat"},y({beat_type:0},e)),r.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){r.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat,this.domContainer=e.container||document}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e){if(this.config.click&&this.domContainer.addEventListener("click",this.clickEvent,!0),this.config.change&&this.domContainer.addEventListener("change",this.changeEvent,!0),this.config.submit&&this.domContainer.addEventListener("submit",this.submitEvent,!0),this.config.pv){this.collect.on("route-change",(function(e){var n=e.config,r=e.name;t.getPageViewEvent(n,r),t.pageView=!0}));var n=setTimeout((function(){t.pageView||(t.getPageViewEvent(t.getDefaultConfig()),t.pageView=!0,clearTimeout(n))}),2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var r=0,i=null;window.addEventListener("scroll",(function(){clearTimeout(i),i=setTimeout(o,500),r=document.documentElement.scrollTop||document.body.scrollTop}));var o=function(){(document.documentElement.scrollTop||document.body.scrollTop)==r&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var a=window.performance&&window.performance.getEntriesByType("paint");if(a&&a.length){new PerformanceObserver((function(e){var n=e.getEntries(),r=n[n.length-1],i=r.renderTime||r.loadTime;t.statistics||(t.getPageLoadEvent(i),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]});var s=setTimeout((function(){t.statistics||(t.getPageLoadEvent(a[0].startTime||0),t.statistics=!0,clearTimeout(s))}),2e3)}else this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}}},e.prototype.removeListener=function(){this.domContainer.removeEventListener("click",this.clickEvent,!0),this.domContainer.removeEventListener("change",this.changeEvent,!0),this.domContainer.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),A((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(e){}},e.prototype.getDefaultConfig=function(){return{is_html:1,url:location.href,referrer:document.referrer,page_key:location.href,refer_page_key:document.referrer,page_title:document.title||location.pathname,page_manual_key:"",refer_page_manual_key:"",refer_page_title:"",page_path:location.pathname,page_host:location.host}},e}(),it={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},ot=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function at(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],r=[];return t.forEach((function(e){var t=function(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var r=n.children,i=0;i<r.length&&r[i]!==e;i++)r[i].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),We(e,"list")?"[]":""].join(""),index:t}}(e),i=t.str,o=t.index;n.unshift(i),r.unshift(o)})),{element_path:"/"+n.join("/"),positions:r}}function st(e,t,n,r){var i={},o=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return{left:t.left,top:t.top,element_width:n,element_height:r}}}(t),a=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,r=e.clientY,i=t.left,o=t.top,a=n-i>=0?n-i:0,s=r-o>=0?r-o:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}(e,o),s=o.element_width,c=o.element_height,u=a.touch_x,l=a.touch_y,d=at(t),p=d.element_path,h=d.positions,f=function(e){var t=qe(e),n=[];return function e(t){var r=Ye(t);if(r&&-1===n.indexOf(r)&&n.push(r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)8!==i[o].nodeType&&e(i[o])}(t),n}(t),g=window.performance.timing.navigationStart,_=Date.now()-g,E=h.map((function(e){return""+e})),m=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(m=window.TEAVisualEditor.getOriginXpath({xpath:p,positions:E})),i.element_path=m&&m.xpath||p,i.positions=m&&m.positions||E,r&&!r.text&&(i.texts=f,i.element_title=function(e){var t=qe(e),n="";return function e(t){var r=Ye(t);if(r&&(n+=r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)3===i[o].nodeType&&e(i[o])}(t),n}(t)),i.element_id=t.getAttribute("id")||"",i.element_class_name=t.getAttribute("class")||"",i.element_type=t.nodeType,i.element_width=Math.floor(s),i.element_height=Math.floor(c),i.touch_x=u,i.touch_y=l,i.page_manual_key="",i.elememt_manual_key="",i.since_page_start_ms=_,i.page_start_ms=g,i.page_path=location.pathname,i.page_host=location.host,n.track_attr&&Ke(t,n.track_attr)){var y=et(t,n.track_attr);for(var v in y)i[v]=y[v]}var b=qe(t);return"A"===b.tagName&&(i.href=b.getAttribute("href")),"IMG"===t.tagName&&(i.src=t.getAttribute("src")),i}var ct=function(e,t,n,r,i){return y({event:e},st(t,n,r,i),{is_html:1,page_key:window.location.href,page_title:document.title})},ut=function(){function e(e,t){this.ignore={text:!1},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!1===t.text&&(this.ignore.text=!0),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,ct(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,ct(n,e,e.target,this.options,this.ignore);case"change":return y({},ct(n="bav2b_change",e,e.target,this.options),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(n,e.target));case"submit":return ct(n="bav2b_submit",e,e.target,this.options)}}catch(e){return null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,r=window.performance.timing,i=r.loadEventEnd-r.navigationStart;t.page_init_cost_ms=parseInt(n||(i>0?i:0)),t.page_start_ms=r.navigationStart}catch(e){}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e}(),lt=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,r=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(r,t):this.collect.event(r,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),dt="_TEA_VE_OPEN",pt="_TEA_VE_APIHOST",ht="lang",ft="_VISUAL_EDITOR_V",gt="_VISUAL_EDITOR_U";function _t(){try{var e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||G.get(ht),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||G.get(pt),n=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||G.get(ft),r=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||G.get(gt),i=+new Date,o=new Date(i+18e5);G.set(dt,"1",{expires:o}),G.set(pt,t,{expires:o}),G.set(gt,r,{expires:o}),G.set(ht,e,{expires:o}),G.set(ft,n||"",{expires:o})}catch(e){}}var Et=!1;function mt(e){var t=e.event,n=e.editorUrl,r=e.autoTrackInstance;Et||(Et=!0,I(n,(function(){ke(t,"editorScriptloadSuccess"),r.destroy()}),(function(){t&&ke(t,"editorScriptloadError"),Et=!1})))}function yt(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{};var n="",r=Y+"?query="+Date.now();window.TEAVisualEditor.appId=t.app_id;var i=t.channel_domain,o="";if(Ie(["*"]),i){var a,s="";try{var c=window.performance.getEntriesByType("resource");if(c&&c.length&&(c.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(s=e.name)})),s&&(a=s.split("/"))&&a.length)){o="https:/";for(var u=2;u<a.length&&u!==a.length-1;u++)o=o+"/"+a[u];if(o&&o.indexOf("/5.0")){var l=o.split("/5.0");o=l[0]||o}}}catch(e){}}if(Ne(t,q),"1"===G.get(dt)){var d=function(){var e=G.get(pt);try{e=JSON.parse(e)}catch(e){}return e}(),p="";d&&(window.TEAVisualEditor.__editor_ajax_domain=d,p=G.get(gt)),mt({event:null,editorUrl:p||r,autoTrackInstance:e}),_t()}else try{Ce("tea:openVisualEditor",(function(t){var a=t.data;if("string"==typeof t.data)try{a=JSON.parse(t.data)}catch(e){a=void 0}if(a){var s=a.referrer,c=a.lang;if(s&&(window.TEAVisualEditor.__editor_ajax_domain=s),n=r,i){var u=a.version;n=o?o+(u?"/visual-editor-rangers-v"+u:"/visual-editor-rangers-v1.0.0")+".js":r,window.TEAVisualEditor.__editor_verison=u}window.TEAVisualEditor.__editor_url=n,window.TEAVisualEditor.lang=c,mt({event:t,editorUrl:n,autoTrackInstance:e}),_t()}})),window.TEAVisualEditor.openAutotrackEditor=function(){mt({event:null,editorUrl:window.TEAVisualEditor.__editor_url,autoTrackInstance:e})}}catch(e){}try{Ce("tea:openHeatMapCore",(function(n){var r=Z,i=n.data.app_id;i&&i!==t.app_id||mt({event:n,editorUrl:r+".js?query="+Date.now(),autoTrackInstance:e})}))}catch(e){}}var vt,bt=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Ot=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var r=n._observeId;if(r||this.observeMap.has(r)){if(!1===n.visible){var i=n.getBoundingClientRect(),o=i.top,a=i.left,s=i.right,c=i.bottom;o>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),wt=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Ot(e,t),this._observer=new bt(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),Tt={hashTag:!1,impr:!1},Dt=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(Tt,t),this.destroyed=!1,this.options=t,this.Config=new ot(it,this.options),this.Exposure=new wt(this.config,this.handle.bind(this)),this.Listener=new rt(t,this.collect,this.Config),this.EventHandle=new ut(this.config,t),this.Request=new lt(this.collect),this.autoTrackStart=!0,this.init(),yt(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this));try{"base"===this.collect.loadType&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var r=this.EventHandle.handleEvent(t,n);null!==r&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},r)}else if("page_view"===n||"page_statistics"===n){var i=void 0;i="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},i)}else if("beat"===n){var o=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},o)}}catch(e){}},e.prototype.destroy=function(){this.autoTrackStart&&(this.autoTrackStart=!1,this.Listener.removeListener())},e}();!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(vt||(vt={}));var St={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Mt=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var r=this.collect.Types,i=e.adapters.fetch;this.fetch=i,this.collect.on(r.Event,(function(){n.addCount("log")})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventDate,i=e.errorCode,o=e.response;n.addErrorCount(r,t,i,o)})),this.listener(),this.collect.emit(r.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var r=void 0;if(this.tracerCache.has(e))(i=this.tracerCache.get(e)).has(t)?(r=i.get(t).params.count,r++,i.set(t,this.processTracer(r,e,t))):(r=n,i.set(t,this.processTracer(n,e,t)));else{var i=new Map;r=n,i.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,i)}"net"===t&&r>=this.limit[e]&&this.report(!1)}catch(e){}},e.prototype.addErrorCount=function(e,t,n,r){var i=this;try{if(e&&e.length){var o=e[0].events;o&&o.length&&("f_data"===t?(r&&r.hasOwnProperty("sc")?this.addCount("log",t,o.length-r.sc):this.addCount("log",t,o.length),this.errorCode[t]=n):o.forEach((function(e){var r="log";for(var o in St)if(-1!==St[o].indexOf(e.event)){r=o;break}i.addCount(r,t,1),i.errorCode[t]=n})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify(n)):this.fetch(this.reportUrl,n),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,n){var r={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:q};"f_net"!==n&&"f_data"!==n||(r.errorCode=this.errorCode[n]);var i=this.collect.processEvent("applog_trace",r);if(i&&i.event)return delete i.is_bav,i},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),A((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),Pt=F((function(e,t){e.exports=function(){var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",c="year",u="date",l="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+f(r,2,"0")+":"+f(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,s=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return{M:a,y:c,w:o,d:i,D:u,h:r,m:n,s:t,ms:e,Q:s}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",E={};E[_]=h;var m=function(e){return e instanceof O},y=function(e,t,n){var r;if(!e)return _;if("string"==typeof e)E[e]&&(r=e),t&&(E[e]=t,r=e);else{var i=e.name;E[i]=e,r=i}return!n&&r&&(_=r),r||!n&&_},v=function(e,t){if(m(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},b=g;b.l=y,b.i=m,b.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function h(e){this.$L=y(e.locale,null,!0),this.parse(e)}var f=h.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return!(this.$d.toString()===l)},f.isSame=function(e,t){var n=v(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return v(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<v(e)},f.$g=function(e,t,n){return b.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,s){var l=this,d=!!b.u(s)||s,p=b.p(e),h=function(e,t){var n=b.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return d?n:n.endOf(i)},f=function(e,t){return b.w(l.toDate()[e].apply(l.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},g=this.$W,_=this.$M,E=this.$D,m="set"+(this.$u?"UTC":"");switch(p){case c:return d?h(1,0):h(31,11);case a:return d?h(1,_):h(0,_+1);case o:var y=this.$locale().weekStart||0,v=(g<y?g+7:g)-y;return h(d?E-v:E+(6-v),_);case i:case u:return f(m+"Hours",0);case r:return f(m+"Minutes",1);case n:return f(m+"Seconds",2);case t:return f(m+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(o,s){var l,d=b.p(o),p="set"+(this.$u?"UTC":""),h=(l={},l[i]=p+"Date",l[u]=p+"Date",l[a]=p+"Month",l[c]=p+"FullYear",l[r]=p+"Hours",l[n]=p+"Minutes",l[t]=p+"Seconds",l[e]=p+"Milliseconds",l)[d],f=d===i?this.$D+(s-this.$W):s;if(d===a||d===c){var g=this.clone().set(u,1);g.$d[h](f),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[b.p(e)]()},f.add=function(e,s){var u,l=this;e=Number(e);var d=b.p(s),p=function(t){var n=v(l);return b.w(n.date(n.date()+Math.round(t*e)),l)};if(d===a)return this.set(a,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===i)return p(1);if(d===o)return p(7);var h=(u={},u[n]=6e4,u[r]=36e5,u[t]=1e3,u)[d]||1,f=this.$d.getTime()+e*h;return b.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},h=function(e){return b.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:b.s(s+1,2,"0"),MMM:d(n.monthsShort,s,u,3),MMMM:d(u,s),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:b.s(o,2,"0"),h:h(1),hh:h(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:b.s(a,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(e,t){return t||g[e]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,u,l){var d,p=b.p(u),h=v(e),f=6e4*(h.utcOffset()-this.utcOffset()),g=this-h,_=b.m(this,h);return _=(d={},d[c]=_/12,d[a]=_,d[s]=_/3,d[o]=(g-f)/6048e5,d[i]=(g-f)/864e5,d[r]=g/36e5,d[n]=g/6e4,d[t]=g/1e3,d)[p]||g,l?_:b.a(_)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return E[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=y(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}(),w=O.prototype;return v.prototype=w,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",c],["$D",u]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),v.extend=function(e,t){return e.$i||(e(t,O,v),e.$i=!0),v},v.locale=y,v.isDayjs=m,v.unix=function(e){return v(1e3*e)},v.en=E[_],v.Ls=E,v.p={},v}()})),Rt=F((function(e,t){var n,r,i,o,a,s,c,u,l,d,p,h,f,g,_,E,m;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:s=31536e6,months:c=2592e6,days:o=864e5,hours:i=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},d=function(e){return e instanceof m},p=function(e,t,n){return new m(e,n,t.$l)},h=function(e){return r.p(e)+"s"},f=function(e){return e<0},g=function(e){return f(e)?Math.ceil(e):Math.floor(e)},_=function(e){return Math.abs(e)},E=function(e,t){return e?f(e)?{negative:!0,format:""+_(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},m=function(){function e(e,t,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return p(e*l[h(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){r.$d[h(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var i=e.match(u);if(i){var o=i.slice(2).map((function(e){return Number(e)}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*l[n]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=g(e/s),e%=s,this.$d.months=g(e/c),e%=c,this.$d.days=g(e/o),e%=o,this.$d.hours=g(e/i),e%=i,this.$d.minutes=g(e/6e4),e%=6e4,this.$d.seconds=g(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=E(this.$d.years,"Y"),t=E(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=E(n,"D"),i=E(this.$d.hours,"H"),o=E(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var s=E(a,"S"),c=e.negative||t.negative||r.negative||i.negative||o.negative||s.negative,u=i.format||o.format||s.format?"T":"",l=(c?"-":"")+"P"+e.format+t.format+r.format+u+i.format+o.format+s.format;return"P"===l||"-P"===l?"P0D":l},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(n[e])}))},t.as=function(e){return this.$ms/l[h(e)]},t.get=function(e){var t=this.$ms,n=h(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?g(t/l[n]):this.$d[n],0===t?0:t},t.add=function(e,t,n){var r;return r=t?e*l[h(t)]:d(e)?e.$ms:p(e,this).$ms,p(this.$ms+r*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return p(this.$ms,this)},t.humanize=function(e){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,i){n=i,r=i().$utils(),i.duration=function(e,t){var n=i.locale();return p(e,{$l:n},t)},i.isDuration=d;var o=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return d(e)&&(e=e.asMilliseconds()),o.bind(this)(e,t)},t.prototype.subtract=function(e,t){return d(e)&&(e=e.asMilliseconds()),a.bind(this)(e,t)}})}));Pt.extend(Rt);var At=["__cep_sdk_onboard","__cep_trigger_sdk","_be_active"],It=["and","or","not"],kt=function(){function e(){this.support=!0,this.currentPlan=1,this.shouldSendEvent=!1,this.staing=!1,this.test=!1,this.cepReady=!1,this.eventCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.cep){var r=e.adapters,i=r.fetch,o=r.storage,a=e.Types;this.types=a,this.storage=new o(!1),this.fetch=i,this.configManager=e.configManager,this.url=t.cep_url?""+t.cep_url:e.configManager.getDomain()+"/service/2/cep_settings/",this.reportUrl=e.configManager.getUrl("event"),this.key="__tea_cep_plan_"+t.app_id,this.quotasKey="__tea_cep_plan_quotas_"+t.app_id,this.isWait=!1,this.eventCache=[],this.test=e.configManager.staging,this.collect.on(a.SubmitAfter,(function(e){n.matchEvent(e)})),this.init()}},e.prototype.init=function(){var e=this,t=!0,n=0,r=0,i=0,o=!1,a=this.storage.getItem(this.key)||{};if(a&&Object.keys(a).length&&(o=!0,n=a.last_update_time,r=a.fetch_interval,i=a.config_version||0,t=Date.now()-n>1e3*r),t){var s=this.configManager.get(),c=s.header,u=s.user;this.fetch(this.url,{header:c,user:u,local_time:Date.now(),config_version:i},1e4,!1,(function(t){t&&0===t.code?(a.fetch_interval=t.fetch_interval,a.data=t.data,a.last_update_time=Date.now(),a.config_version=t.config_version,e.clearQuotas(),e.initState(t.data),e.storage.setItem(e.key,a),t.data.forEach((function(t){e.event("__cep_sdk_onboard",t.plan_id)}))):304!==t.code&&400!==t.code||!o||(a.last_update_time=Date.now(),e.storage.setItem(e.key,a),e.initState(a.data))}),(function(){o?(e.planData=a.data,e.initState(a.data)):e.support=!1}))}else a.last_update_time=Date.now(),this.storage.setItem(this.key,a),this.initState(a.data)},e.prototype.initState=function(e){var t=this;e&&e.length&&(this.stateArray=new Map,this.waitArray=new Map,this.planData=e,e.forEach((function(e){var n=new Map;if(e.pattern&&e.pattern.events){var r=1===e.pattern.events.length;e.pattern.events.forEach((function(e){n.set(e.id,{id:e.id,isMatch:!1,event:null,after:e.after||null,connection:e.connection||null,window:e.window||null,matchTime:0,initTime:Date.now(),singleRule:r})})),t.stateArray.set(e.plan_id,{patternState:n,singleRule:r,pattern:{aid:e.aid,biz_id:e.biz_id,end_time:e.end_time,start_time:e.start_time,web_sdk_version:e.web_sdk_version,stage:e.stage},quotas:e.quotas})}})),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},e.prototype.check=function(e){var t=Date.now();return!(Date.now()>1e3*e.end_time||t<1e3*e.start_time||t>1e3*e.end_time||(this.staing="testing"===e.staing,q<e.web_sdk_version&&(this.support=!1,1)))},e.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t=1;this.eventCache.forEach((function(n){e.matchEvent(n),t++})),t===this.eventCache.length&&(this.eventCache=[])}},e.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],n=t.header,r=t.user,i=t.events;i.length&&i.reverse();for(var o=0;o<i.length;o++){var a=i[o].event;if(-1!==At.indexOf(a))return!1;this.matchRule(n,r,i[o])}}catch(e){return void this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.matchRule=function(e,t,n){try{for(var r=0;r<this.planData.length;r++){var i=this.planData[r],o=i.plan_id;if(this.check(i)&&this.checkQuotas(o)&&i.pattern&&i.pattern.events)for(var a=i.pattern.events,s=0;s<a.length;s++)if(this.rule(e,t,n,a[s].condition)){var c=this.stateArray.get(o).patternState,u=c.get(a[s].id);if(this.stateArray.get(o).singleRule){this.changeStatus(o,a[s].id,n),this.publish([n],o,a[s].id);break}if(!u.isMatch){u.after&&c.get(u.after).isMatch?this.changeStatus(o,a[s].id,n):u.after||this.changeStatus(o,a[s].id,n);break}}}this.statusCheck()}catch(e){return void this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.changeStatus=function(e,t,n){var r=this.stateArray.get(e),i=r.patternState.get(t);i.isMatch=!0,i.event=n,i.matchTime=n.local_time_ms||Date.now(),r.patternState.set(t,i),this.stateArray.set(e,r)},e.prototype.statusCheck=function(){var e,t,n,r;try{for(var i=b(this.stateArray),o=i.next();!o.done;o=i.next()){var a=O(o.value,2),s=a[0],c=a[1],u=c.patternState;if(c.isSingle)break;try{for(var l=b(u),d=l.next();!d.done;d=l.next()){var p=O(d.value,2),h=p[0],f=p[1];if(f.after&&(!f.after||u.get(f.after).isMatch)){if("NOT_FOLLOWED_BY"===f.connection){f.isMatch?this.reset(s,h):Date.now()-u.get(f.after).matchTime>f.window?this.publish([u.get(f.after).event,f.event],s,h):this.startWait(s,h,f);break}f.isMatch?f.matchTime-u.get(f.after).matchTime<=f.window?this.publish([u.get(f.after).event,f.event],s,h):this.reset(s,h):Date.now()-u.get(f.after).matchTime>f.window?this.reset(s,h):this.startWait(s,h,f);break}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.startWait=function(e,t,n){var r=this;try{this.waitArray.get(e)||this.waitArray.set(e,new Map);var i=this.waitArray.get(e);if(!i.get(t)){var o=setTimeout((function(){var i=r.stateArray.get(e).patternState,o=i.get(t);if("NOT_FOLLOWED_BY"===o.connection)!o.isMatch&&i.get(o.after).isMatch||o.matchTime-i.get(o.after).matchTime>n.window?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t);else if("FOLLOWED_BY"===o.connection){var a;o.isMatch&&i.get(o.after).isMatch?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t)}}),n.window);i.set(t,{waitFn:o,triggerWait:!1}),this.waitArray.set(e,i)}}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.rule=function(e,t,n,r){var i=this;try{var o=n.event,a=n.params;if(a=JSON.parse(a),-1!==It.indexOf(r.op)){if(r.conditions&&r.conditions.length){var s=r.conditions,c=0,u=new Map;u.set(c,{op:r.op,result:void 0,resultList:[],resultKey:[],resultLength:s.length}),function n(r,s){for(var l=0;l<r.length;l++)if(c++,-1!==It.indexOf(r[l].op)&&r[l].hasOwnProperty("conditions"))u.set(c,{op:r[l].op,result:void 0,fatherKey:s,resultList:[],resultKey:[],resultLength:r[l].conditions.length}),n(r[l].conditions,c);else{var d=i.scope(r[l].key),p=d.scope,h=d.key,f=d.key2,g=p?"header"===p?f?JSON.parse(e[f])[h]:e[h]:"user"===p?t[h]:a[h]:o,_=i.calculate(r[l].op,g,r[l].value);u.set(c,{op:r[l].op,result:_,fatherKey:s})}}(s,c);for(var l=u.get(0);void 0===l.result||l.resultList.length<l.resultLength;)u.forEach((function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var n=u.get(e.fatherKey);n.resultList.length<n.resultLength&&-1===n.resultKey.indexOf(t)&&(n.resultKey.push(t),n.resultList.push(e.result),u.set(e.fatherKey,n))}})),u.forEach((function(e){e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===e.resultList.indexOf(!1)),"or"===e.op&&(e.result=-1!==e.resultList.indexOf(!0)))}));return u.get(0).result}return!1}var d=this.scope(r.key),p=d.scope,h=d.key,f=d.key2,g=p?"header"===p?f?JSON.parse(e[f])[h]:e[h]:"user"===p?t[h]:a[h]:o;return this.calculate(r.op,g,r.value)}catch(e){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),!1}},e.prototype.publish=function(e,t,n){try{var r=this.configManager.get().user,i={biz_id:this.stateArray.get(t).pattern.biz_id,plan_id:t,uid:r.user_id||"",did:r.device_id||"",uuid:r.user_unique_id,events:e,extra:{url:window.location.href}};this.collect.emit("__cep_match",i),(window.opener||window.parent).postMessage({type:"__cep_match",data:i},"*"),this.event("__cep_trigger_sdk",t),this.addQuotas(t),this.reset(t,n)}catch(e){return void this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.addQuotas=function(e){var t=this.stateArray.get(e).quotas;if(t&&t.length){var n=this.storage.getItem(this.quotasKey)||{};n[e]||(n[e]={value:0,lastTime:Date.now()});var r=n[e].value;0===r&&(n[e].lastTime=Date.now()),n[e].value=r+1,this.storage.setItem(this.quotasKey,n)}},e.prototype.checkQuotas=function(e){var t=this.stateArray.get(e).quotas,n=this.storage.getItem(this.quotasKey)||{};if(n[e]||(n[e]={value:0,lastTime:Date.now()}),t&&t.length){var r=t[0].granularity,i=t[0].value;if("per_keyid"!==t[0].type)return!0;var o=this.release(r);return"all"===o?!(n[e].value>=i):Date.now()-n[e].lastTime>=o?(n[e].value=0,n[e].lastTime=Date.now(),this.storage.setItem(this.quotasKey,n),!0):!(n[e].value>=i)}return!0},e.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},e.prototype.release=function(e){if("all"===e)return e;var t=Pt.duration(e);return t?t.asMilliseconds():"all"},e.prototype.reset=function(e,t){var n=this.stateArray.get(e);if(n.singleRule){var r=n.patternState.get(t);r.isMatch=!1,r.event=null,r.matchTime=0,r.initTime=Date.now(),n.patternState.set(t,r)}else n.patternState.forEach((function(e){e.isMatch=!1,e.event=null,e.matchTime=0,e.initTime=Date.now()}));this.stateArray.set(e,n);var i=this.waitArray.get(e);i&&i.get(t)&&(clearTimeout(i.get(t).waitFn),i.delete(t))},e.prototype.event=function(e,t){try{var n={event:e,params:JSON.stringify({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:Date.now()},r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom);var a={events:[n],user:o,header:i};this.fetch(this.reportUrl,[a])}catch(e){return void this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.scope=function(e){var t="",n="";if(e.indexOf(".")>-1){var r=e.split(".");t=r[0],e=r[1],"header"===t&&"custom"===e&&(e=r[2],n=r[1])}return{scope:t,key:e,key2:n}},e.prototype.calculate=function(e,t,n){try{if("="===e)return t===n;if(-1!==["=","<",">",">=","<=","!="].indexOf(e))switch(e){case"=":return t===n;case"<":return t<n;case">":return t>n;case">=":return t>=n;case"<=":return t<=n;case"!=":return t!==n}else{if(-1!==["in","contains"].indexOf(e))return-1!==n.indexOf(t);if(-1!==["is not null","is null"].indexOf(e))return"is null"===e?null==t:null!=t;if(-1!==["startswith","endswith"].indexOf(e)){if("startswith"===e)return 0===t.indexOf(n);var r=t.length-n.length;return t.substr(r,n.length)===n}}}catch(e){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),!1}},e}(),Ct="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,xt=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t){if(De.hasOwnProperty(n)){var r=De[n].object,i=De[n].src[e.channel]+"?query="+Date.now();e.exist(n,r,i)}}else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e.prototype.exist=function(e,t,n){var r=this;Ct[t]?this.process(e,Ct[t]):this.loadPlugin(e,n,(function(){r.process(e,Ct[t])}),(function(){}))},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config)}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(o)}catch(e){this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}},e}(),Nt=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var o=t.call.apply(t,w([history,n],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a,"pushState"),o}};var n=history.replaceState;history.replaceState=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var o=n.call.apply(n,w([history,t],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a),o}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",(function(n){if(e.lastLocation!==window.location.href&&(clearTimeout(t),e.allowHash)){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var r=e.getPopStateChangeEventData();e.sendPv(r)}})),window.addEventListener("popstate",(function(n){e.lastLocation!==window.location.href&&(t=setTimeout((function(){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)}),10))}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e=this.storage.getItem(this.cache_key)||{},t=!1,n=this.storage.getItem("__tea_cache_first_"+this.appid);return t=!n||1!=n,{is_html:1,url:location.href,referrer:this.handleRefer(),page_key:location.href,refer_page_key:this.handleRefer(),page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:e&&e.refer_manual_key||"",refer_page_title:e&&e.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+t}}catch(e){return this.collect.emit(H.DEBUGGER_MESSAGE,{type:H.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e.prototype.handleRefer=function(){var e="";try{var t=this.storage.getItem()||{};e=t.routeChange?t.refer_key:this.collect.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.setReferCache=function(e){var t=this.storage.getItem(this.cache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();Me.usePlugin(xt,"extend"),Me.usePlugin(Ge,"ab"),Me.usePlugin(ze,"stay"),Me.usePlugin(Dt,"autotrack"),Me.usePlugin(Le,"et"),Me.usePlugin(Xe,"profile"),Me.usePlugin(kt,"cep"),Me.usePlugin($e,"heartbeat"),Me.usePlugin(Ve,"monitor"),Me.usePlugin(Nt,"route"),Me.usePlugin(Mt,"tracer"),new Me("default");var Ut=Me,Ft=function(){function e(){var t=e.getTeaInstance();t.init({app_id:496513,channel:"cn"}),t.start()}return e.initTea=function(){return this._instance||(this._instance=new e),this._instance},e.getTeaInstance=function(){return this._teaInstance||(this._teaInstance=new Ut("pylonSdkTea")),this._teaInstance},e}(),jt=function(e,t){var n;null===(n=Ft.getTeaInstance())||void 0===n||n.event(e,t)},Ht=p("Engine"),Gt=function(){function e(e){this.scene=e.scene,this.byteNN=e.byteNN,this.modelUrl=e.modelUrl,this.config={inputs:e.inputs,outputs:e.outputs},this.featureCollector=e.featureCollector}return e.prototype.loadModel=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){if(e===undefined||null===e||0===e.length)throw new Error("model url is empty");return[2,fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)}))]}))}))},e.prototype.createConfig=function(e){return e.join(",")},e.prototype.initEngine=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=Date.now(),t=this.createConfig(this.config.inputs),n=this.createConfig(this.config.outputs),r=this.byteNN.createConfig(t,n),[4,this.loadModel(this.modelUrl)];case 1:return i=a.sent(),this.engine=this.byteNN.createEngine(r,i),jt("pylon_sdk_engine_init_result",{scene:this.scene,duration:1e3*(Date.now()-e),result:"success"}),[3,3];case 2:return o=a.sent(),jt("pylon_sdk_engine_init_result",{scene:this.scene,errMsg:null==o?void 0:o.message,stack:null==o?void 0:o.stack,result:"failed",params:JSON.stringify({inputConfig:this.config.inputs,outConfig:this.config.outputs,model:this.modelUrl})}),[3,3];case 3:return[2]}}))}))},e.prototype.getFeatureVector=function(e){var t=_(this.scene,this.featureCollector),n=i(i({},t),e.features);return m(this.scene,n)},e.prototype.inference=function(e){var t=this.getFeatureVector(e);try{var n=Date.now(),r=this.byteNN.runInference(this.engine,t.join(","));if(r.indexOf("Error::")>=0)throw new Error(r);Ht("Inference Ret: ",r);var i=parseFloat(r||0);return jt("pylon_sdk_reference_result",{scene:this.scene,duration:1e3*(Date.now()-n),result:"success"}),i}catch(e){return jt("pylon_sdk_reference_result",{scene:this.scene,errMsg:null==e?void 0:e.message,stack:null==e?void 0:e.stack,result:"failed",params:JSON.stringify({features:t.join(","),inputConfig:this.config.inputs,outConfig:this.config.outputs,model:this.modelUrl})}),-1}},e}(),Lt=Symbol("singleton-decorator:instance");function Qt(e,t){return e[Lt]=e[Lt]instanceof e?e[Lt]:new e(t)}function Bt(e){Object.defineProperty(e,"getInstance",{value:function(t){return Qt(e,t)}})}function zt(e){return function(t){var n=t.prototype.eventNames||[];t.prototype.eventNames=c(c([],n),e)}}var Xt={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,undefined,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,undefined,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Xt);var $t,Vt=new(0,Xt.exports),Wt=l(),Kt=function(){function t(e){this.options=e,this.linster=this.linster.bind(this),this.observe()}return t.prototype.linster=function(t){var n,i=this,o=Object.values(r);null===(n=null==t?void 0:t.forEach)||void 0===n||n.call(t,(function(t){var n;null===(n=null==t?void 0:t.events)||void 0===n||n.forEach((function(t){var n,r=t.event,a=t.params,s=t.session_id,c=h(a),u=i.options.biz===e.EBiz.DOUYIN_WEB_RECOMMEND&&"recommend"===(null===(n=c)||void 0===n?void 0:n.enter_from);o.includes(r)&&u&&(Vt.emit("before_"+r,{eventName:"before_"+r,data:c,sessionId:s}),Vt.emit(r,{eventName:r,data:c,sessionId:s}))}))}))},t.prototype.observe=function(){var e;null===(e=Wt.collectEvent)||void 0===e||e.call(Wt,"on","submit-after",this.linster)},t.prototype.destroy=function(){var e;null===(e=Wt.collectEvent)||void 0===e||e.call(Wt,"off","submit-after",this.linster)},t=o([Bt],t)}(),qt=function(){function e(e){this.options=null,this.options=e,this.init(),this.bind()}return e.prototype.init=function(){},e.prototype.handler=function(e){this.options.groupId===undefined&&(this.options.groupId=e.data.group_id),this.observe(i({},e))},e.prototype.observe=function(e){},e.prototype.bind=function(){var e=this;this.eventNames.forEach((function(t){Vt.on(t,e.handler,e)}))},e.prototype.destroy=function(){var e=this;this.eventNames.forEach((function(t){Vt.removeListener(t,e.handler,e)}))},e.prototype.emit=function(e,t){Vt.emit(e,t)},e.prototype.getFeatures=function(){return this.features},e}(),Yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.features={count:0,open:!1,openTimes:0,hasComment:!1},t}return n(t,e),t.prototype.observe=function(e){var t=e.eventName,n=e.data;n.group_id===this.options.groupId&&(t===r.COMMENT_SHOW&&this.features.count++,t===r.CLICK_COMMENT_BUTTON&&(this.features.open=!0),t===r.CLOSE_VIDEO_CARD&&"comment"===n.type&&(this.features.open=!1),t===r.POST_COMMENT&&(this.features.hasComment=!0))},t=o([zt([r.CLICK_COMMENT_BUTTON,r.COMMENT_SHOW,r.POST_COMMENT,r.CLOSE_VIDEO_CARD])],t)}(qt),Jt=function(e){function t(t){var n=e.call(this,t)||this;n.features={duration:0,likeCount:0,shareCount:0,commentCount:0,downloadCount:0,forwardCount:0,playTime:0};var r=t.extraData;return r&&r.duration&&(n.features.duration=r.duration),n}return n(t,e),t.prototype.observe=function(e){var t=e.eventName,n=e.data;if(n.group_id===this.options.groupId){if(t===r.VIDEO_REQUEST){var i=n;this.features.likeCount=i.v_like_cnt,this.features.commentCount=i.v_comment_cnt,this.features.downloadCount=i.v_download_cnt,this.features.forwardCount=i.v_forward_cnt,this.features.shareCount=i.v_share_cnt,this.features.duration=i.vduration}t===r.PLAY_TIME&&(this.features.playTime+=n.duration)}},t=o([zt([r.VIDEO_REQUEST,r.PLAY_TIME])],t)}(qt),Zt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.features={count:0},t}return n(t,e),t.prototype.observe=function(e){var t=e.eventName;e.data.group_id===this.options.groupId&&t===r.CLICK_AUTHOR_HEAD&&this.features.count++},t=o([zt([r.CLICK_AUTHOR_HEAD])],t)}(qt),en=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.features={likeCount:0,like:!1,favorite:!1,follow:!1,shareShowCount:0,shareCount:0},t}return n(t,e),t.prototype.observe=function(e){var t=e.eventName;e.data.group_id===this.options.groupId&&(t===r.CLICK_LIKE&&this.features.likeCount++,t===r.LIKE&&(this.features.like=!0),t===r.CANCEL_LIKE&&(this.features.like=!1),t===r.CLICK_FAVORITE_VIDEO&&(this.features.favorite=!0),t===r.CANCEL_FAVORITE_VIDEO&&(this.features.favorite=!1),t===r.CLICK_FOLLOW&&(this.features.follow=!0),t===r.FOLLOW_CANCEL&&(this.features.follow=!1),t===r.SHARE_MENU_SHOW&&this.features.shareShowCount++,t===r.SHARE_VIDEO&&this.features.shareCount++)},t=o([zt([r.CLICK_LIKE,r.LIKE,r.CANCEL_LIKE,r.CLICK_FAVORITE_VIDEO,r.CANCEL_FAVORITE_VIDEO,r.FOLLOW_CANCEL,r.CLICK_FOLLOW,r.SHARE_MENU_SHOW,r.SHARE_VIDEO])],t)}(qt),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){this.features=[]},t.prototype.initSubFeatures=function(e){var t,n,r,i,o=this.features.findIndex((function(t){var n,r;return(null===(r=null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.options)||void 0===r?void 0:r.groupId)===(null==e?void 0:e.groupId)}));if(!0!=o>-1){var a=new Jt(e),s=new Yt(e),c=new Zt(e),u=new en(e);if(10===this.features.length){var l=this.features.shift();Object.values(l).forEach((function(e){var t;return null===(t=null==e?void 0:e.destroy)||void 0===t?void 0:t.call(e)}))}this.features.push({video:a,comment:s,profile:c,interactive:u})}else null===(t=this.features)||void 0===t||t.splice(null===(n=this.features)||void 0===n?void 0:n.length,0,null===(i=null===(r=this.features)||void 0===r?void 0:r.splice(o,1))||void 0===i?void 0:i[0])},t.prototype.observe=function(e){var t=e.eventName,n=e.data;t===r.BEFORE_VIDEO_REQUEST&&this.initSubFeatures({groupId:n.group_id})},t.prototype.getLatestVideo=function(){var e;return null===(e=this.features[this.features.length-1])||void 0===e?void 0:e.video},t=o([zt([r.BEFORE_VIDEO_REQUEST])],t)}(qt),nn=function(){function e(e){this.options=e,this.init()}return e.prototype.init=function(){this.collector={feed:new tn({})}},e.prototype.getCollector=function(){return this.collector},e}();!function(e){e.Comment="comment_preload_ml",e.Profile="profile_preload_ml"}($t||($t={}));var rn=p("Pylon:StrategyEngine"),on=function(){function e(e){this.options=e}return e.prototype.getTickTime=function(){var e;return null===(e=this.options.abConfig.preload_ml)||void 0===e?void 0:e.run_gap},e.prototype.getDelayTime=function(){var e;return(null===(e=this.options.abConfig.preload_ml)||void 0===e?void 0:e.delay)||1e3},e.prototype.setThresholdCallback=function(e){var t=this,n=this.getDelayTime();clearTimeout(this.delayTimer),this.delayTimer=setTimeout((function(){var n,r,i,o=t.options,a=o.scene,s=o.featureCollector,c=o.abConfig,u=void 0===c?{}:c,l=_(a,s),d=(null===(n=u.preload_ml)||void 0===n?void 0:n.skip_count)||0,p=(null===(r=null==u?void 0:u.preload_ml)||void 0===r?void 0:r.ignore_count)||0,h=s.getCollector().feed.getLatestVideo();l.pre_video_count<d||(null===(i=null==h?void 0:h.features)||void 0===i?void 0:i.commentCount)<=p?rn("\u4e0d\u7b26\u5408\u9608\u503c\u6761\u4ef6",l):e()}),n)},e.prototype.cancelLeastTask=function(){this.delayTimer&&clearTimeout(this.delayTimer)},e.prototype.getInferenceStrategy=function(){var e,t,n,r,i,o,a,s,c,u,l=null===(e=this.options.abConfig.preload_ml)||void 0===e?void 0:e.package,d=(null===(n=null===(t=this.options.abConfig.preload_ml)||void 0===t?void 0:t.output)||void 0===n?void 0:n.find((function(e){return"predict_bin"===e.op})))||{},p=null!==(i=null===(r=d.labels)||void 0===r?void 0:r.indexOf("true"))&&void 0!==i?i:-1,h=null===(o=d.args)||void 0===o?void 0:o[p],f=null===(s=null===(a=this.options.abConfig.preload_ml)||void 0===a?void 0:a.engine_config)||void 0===s?void 0:s.inputs,g=null===(u=null===(c=this.options.abConfig.preload_ml)||void 0===c?void 0:c.engine_config)||void 0===u?void 0:u.outputs;return{modelUrl:l,thresholdValue:h,scene:this.options.scene,inputs:f,outputs:g}},e.prototype.hitThresholdValue=function(e){var t=this.getInferenceStrategy().thresholdValue;return e>=(void 0===t?.5:t)},e}();function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}var sn={exports:{}};!function(e,t){var n=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:undefined;return function(t){var n,r;(t=void 0!==(t=t||{})?t:{}).ready=new Promise((function(e,t){n=e,r=t})),Object.getOwnPropertyDescriptor(t.ready,"_malloc")||(Object.defineProperty(t.ready,"_malloc",{configurable:!0,get:function(){he("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_malloc",{configurable:!0,set:function(){he("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_free")||(Object.defineProperty(t.ready,"_free",{configurable:!0,get:function(){he("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_free",{configurable:!0,set:function(){he("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_end")||(Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){he("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){he("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_free")||(Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){he("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){he("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_init")||(Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,get:function(){he("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,set:function(){he("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackSave")||(Object.defineProperty(t.ready,"_stackSave",{configurable:!0,get:function(){he("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackSave",{configurable:!0,set:function(){he("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackRestore")||(Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,get:function(){he("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,set:function(){he("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackAlloc")||(Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,get:function(){he("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,set:function(){he("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___wasm_call_ctors")||(Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,get:function(){he("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,set:function(){he("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_fflush")||(Object.defineProperty(t.ready,"_fflush",{configurable:!0,get:function(){he("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_fflush",{configurable:!0,set:function(){he("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___errno_location")||(Object.defineProperty(t.ready,"___errno_location",{configurable:!0,get:function(){he("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___errno_location",{configurable:!0,set:function(){he("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_main_thread_process_queued_calls")||(Object.defineProperty(t.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,get:function(){he("You are getting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,set:function(){he("You are setting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___getTypeName")||(Object.defineProperty(t.ready,"___getTypeName",{configurable:!0,get:function(){he("You are getting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___getTypeName",{configurable:!0,set:function(){he("You are setting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___embind_register_native_and_builtin_types")||(Object.defineProperty(t.ready,"___embind_register_native_and_builtin_types",{configurable:!0,get:function(){he("You are getting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___embind_register_native_and_builtin_types",{configurable:!0,set:function(){he("You are setting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"onRuntimeInitialized")||(Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,get:function(){he("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,set:function(){he("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var i,o={};for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);var a=!0;if(t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var s,c="";function u(e){return t.locateFile?t.locateFile(e,c):c+e}if("undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),e&&(c=e),c=0!==c.indexOf("blob:")?c.substr(0,c.lastIndexOf("/")+1):"","object"!==("undefined"==typeof window?"undefined":an(window))&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var l,d,p=t.print||void 0,h=t.printErr||void 0;for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);function f(e){f.shown||(f.shown={}),f.shown[e]||(f.shown[e]=1,h(e))}o=null,t.arguments,Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){he("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.thisProgram,Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){he("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.quit,Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){he("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),_("undefined"==typeof t.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),_("undefined"==typeof t.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),_("undefined"==typeof t.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),_("undefined"==typeof t.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),_("undefined"==typeof t.read,"Module.read option was removed (modify read_ in JS)"),_("undefined"==typeof t.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),_("undefined"==typeof t.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),_("undefined"==typeof t.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),_("undefined"==typeof t.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){he("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){he("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){he("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"setWindowTitle")||Object.defineProperty(t,"setWindowTitle",{configurable:!0,get:function(){he("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.wasmBinary&&(l=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){he("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.noExitRuntime,Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){he("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!==("undefined"==typeof WebAssembly?"undefined":an(WebAssembly))&&he("no native wasm support detected");var g=!1;function _(e,t){e||he("Assertion failed: "+t)}function E(e){var n=t["_"+e];return _(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function m(e,t,n,r,i){var o={string:function(e){var t=0;if(null!==e&&e!==undefined&&0!==e){var n=1+(e.length<<2);T(e,t=ar(n),n)}return t},array:function(e){var t=ar(e.length);return Q(e,t),t}};function a(e){return"string"===t?O(e):"boolean"===t?Boolean(e):e}var s=E(e),c=[],u=0;if(_("array"!==t,'Return type should not be "array".'),r)for(var l=0;l<r.length;l++){var d=o[n[l]];d?(0===u&&(u=ir()),c[l]=d(r[l])):c[l]=r[l]}var p=s.apply(null,c);return p=a(p),0!==u&&or(u),p}function y(e,t,n,r){return function(){return m(e,t,n,arguments)}}var v="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):undefined;function b(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&v)return v.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&f("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function O(e,t){return e?b(P,e,t):""}function w(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;s>=2097152&&f("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function T(e,t,n){return _("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),w(e,P,t,n)}function D(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var S,M,P,R,A,I,k,C,x,N="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):undefined;function U(e,t){_(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&A[r];)++r;if((n=r<<1)-e>32&&N)return N.decode(P.subarray(e,n));for(var o="",a=0;!(a>=t/2);++a){var s=R[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function F(e,t,n){if(_(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),_("number"==typeof n,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),n===undefined&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);R[t>>1]=a,t+=2}return R[t>>1]=0,t-r}function j(e){return 2*e.length}function H(e,t){_(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n=0,r="";!(n>=t/4);){var i=I[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}else r+=String.fromCharCode(i)}return r}function G(e,t,n){if(_(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),_("number"==typeof n,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),n===undefined&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),I[t>>2]=a,(t+=4)+4>i)break}return I[t>>2]=0,t-r}function L(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function Q(e,t){_(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),M.set(e,t)}function B(e,t){return e%t>0&&(e+=t-e%t),e}function z(e){S=e,t.HEAP8=M=new Int8Array(e),t.HEAP16=R=new Int16Array(e),t.HEAP32=I=new Int32Array(e),t.HEAPU8=P=new Uint8Array(e),t.HEAPU16=A=new Uint16Array(e),t.HEAPU32=k=new Uint32Array(e),t.HEAPF32=C=new Float32Array(e),t.HEAPF64=x=new Float64Array(e)}var X=655360;t.TOTAL_STACK&&_(X===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var $,V=t.INITIAL_MEMORY||720896;function W(){var e=nr();_(0==(3&e)),k[1+(e>>2)]=34821223,k[2+(e>>2)]=2310721022,I[0]=1668509029}function K(){if(!g){var e=nr(),t=k[1+(e>>2)],n=k[2+(e>>2)];34821223==t&&2310721022==n||he("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" "+t.toString(16)),1668509029!==I[0]&&he("Runtime error: The application has corrupted its heap memory area (address zero)!")}}Object.getOwnPropertyDescriptor(t,"INITIAL_MEMORY")||Object.defineProperty(t,"INITIAL_MEMORY",{configurable:!0,get:function(){he("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),_(V>=X,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+V+"! (TOTAL_STACK="+X+")"),_("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&Int32Array.prototype.subarray!==undefined&&Int32Array.prototype.set!==undefined,"JS engine does not provide full typed array support"),_(!t.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),_(720896==V,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var q=[],Y=[],J=[],Z=!1,ee=!1;function te(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)ie(t.preRun.shift());Te(q)}function ne(){K(),_(!Z),Z=!0,Te(Y)}function re(){if(K(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)ae(t.postRun.shift());Te(J)}function ie(e){q.unshift(e)}function oe(e){Y.unshift(e)}function ae(e){J.unshift(e)}_(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),_(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),_(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),_(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var se=0,ce=null,ue=null,le={};function de(e){se++,t.monitorRunDependencies&&t.monitorRunDependencies(se),e?(_(!le[e]),le[e]=1,null===ce&&"undefined"!=typeof setInterval&&(ce=setInterval((function(){if(g)return clearInterval(ce),void(ce=null);var e=!1;for(var t in le)e||(e=!0,h("still waiting on run dependencies:")),h("dependency: "+t);e&&h("(end of list)")}),1e4))):h("warning: run dependency added without ID")}function pe(e){if(se--,t.monitorRunDependencies&&t.monitorRunDependencies(se),e?(_(le[e]),delete le[e]):h("warning: run dependency removed without ID"),0==se&&(null!==ce&&(clearInterval(ce),ce=null),ue)){var n=ue;ue=null,n()}}function he(e){t.onAbort&&t.onAbort(e),h(e+=""),g=!0,e="abort("+e+") at "+Pe();var n=new WebAssembly.RuntimeError(e);throw r(n),n}t.preloadedImages={},t.preloadedAudios={};var fe={error:function(){he("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){fe.error()},createDataFile:function(){fe.error()},createPreloadedFile:function(){fe.error()},createLazyFile:function(){fe.error()},open:function(){fe.error()},mkdev:function(){fe.error()},registerDevice:function(){fe.error()},analyzePath:function(){fe.error()},loadFilesFromDB:function(){fe.error()},ErrnoError:function(){fe.error()}};t.FS_createDataFile=fe.createDataFile,t.FS_createPreloadedFile=fe.createPreloadedFile;var ge="data:application/octet-stream;base64,";function _e(e){return e.startsWith(ge)}function Ee(e){return e.startsWith("file://")}function me(e,n){return function(){var r=e,i=n;return n||(i=t.asm),_(Z,"native function `"+r+"` called before runtime initialization"),_(!ee,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i[e]||_(i[e],"exported native function `"+r+"` not found"),i[e].apply(null,arguments)}}var ye="index.wasm";function ve(e){try{if(e==ye&&l)return new Uint8Array(l);if(!s)throw"both async and sync fetching of the wasm failed"}catch(e){he(e)}}function be(){return!l&&a&&"function"==typeof fetch?fetch(ye,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ye+"'";return e.arrayBuffer()})).catch((function(){return ve(ye)})):Promise.resolve().then((function(){return ve(ye)}))}function Oe(){var e={env:Jn,wasi_snapshot_preview1:Jn};function n(e,n){var r=e.exports;t.asm=r,_(d=t.asm.memory,"memory not found in wasm exports"),z(d.buffer),_($=t.asm.__indirect_function_table,"table not found in wasm exports"),oe(t.asm.__wasm_call_ctors),pe("wasm-instantiate")}de("wasm-instantiate");var i=t;function o(e){_(t===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,n(e.instance)}function a(t){return be().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){h("failed to asynchronously prepare wasm: "+e),Ee(ye)&&h("warning: Loading from a file URI ("+ye+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),he(e)}))}function s(){return l||"function"!=typeof WebAssembly.instantiateStreaming||_e(ye)||"function"!=typeof fetch?a(o):fetch(ye,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return h("wasm streaming compile failed: "+e),h("falling back to ArrayBuffer instantiation"),a(o)}))}))}if(t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){return h("Module.instantiateWasm callback failed with error: "+e),!1}return s().catch(r),{}}function we(e){}function Te(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?n.arg===undefined?$.get(r)():$.get(r)(n.arg):r(n.arg===undefined?null:n.arg)}else n(t)}}function De(e){return f("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function Se(e){var t=/\b_Z[\w\d_]+/g;return e.replace(t,(function(e){var t=De(e);return e===t?e:t+" ["+e+"]"}))}function Me(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Pe(){var e=Me();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),Se(e)}function Re(e,t){}function Ae(e,t){}function Ie(e,t){}function ke(){}function Ce(e,t,n){}function xe(e,t){}function Ne(e,t,n,r){he("Assertion failed: "+O(e)+", at: "+[t?O(t):"unknown filename",n,r?O(r):"unknown function"])}_e(ye)||(ye=u(ye));var Ue={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Fe(e){return Zn(e+Ue.SIZE)+Ue.SIZE}function je(e,t){}function He(e,t){return je()}function Ge(e){this.excPtr=e,this.ptr=e-Ue.SIZE,this.set_type=function(e){I[this.ptr+Ue.TYPE_OFFSET>>2]=e},this.get_type=function(){return I[this.ptr+Ue.TYPE_OFFSET>>2]},this.set_destructor=function(e){I[this.ptr+Ue.DESTRUCTOR_OFFSET>>2]=e},this.get_destructor=function(){return I[this.ptr+Ue.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(e){I[this.ptr+Ue.REFCOUNT_OFFSET>>2]=e},this.set_caught=function(e){e=e?1:0,M[this.ptr+Ue.CAUGHT_OFFSET>>0]=e},this.get_caught=function(){return 0!=M[this.ptr+Ue.CAUGHT_OFFSET>>0]},this.set_rethrown=function(e){e=e?1:0,M[this.ptr+Ue.RETHROWN_OFFSET>>0]=e},this.get_rethrown=function(){return 0!=M[this.ptr+Ue.RETHROWN_OFFSET>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=I[this.ptr+Ue.REFCOUNT_OFFSET>>2];I[this.ptr+Ue.REFCOUNT_OFFSET>>2]=e+1},this.release_ref=function(){var e=I[this.ptr+Ue.REFCOUNT_OFFSET>>2];return I[this.ptr+Ue.REFCOUNT_OFFSET>>2]=e-1,_(e>0),1===e}}function Le(e,t,n){throw new Ge(e).init(t,n),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."}var Qe={};function Be(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ze(e){return this.fromWireType(k[e>>2])}var Xe={},$e={},Ve={},We=48,Ke=57;function qe(e){if(undefined===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=We&&t<=Ke?"_"+e:e}function Ye(e,t){return e=qe(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Je(e,t){var n=Ye(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;n!==undefined&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===undefined?this.name:this.name+": "+this.message},n}var Ze=undefined;function et(e){throw new Ze(e)}function tt(e,t,n){function r(t){var r=n(t);r.length!==e.length&&et("Mismatched type converter count");for(var i=0;i<e.length;++i)lt(e[i],r[i])}e.forEach((function(e){Ve[e]=t}));var i=new Array(t.length),o=[],a=0;t.forEach((function(e,t){$e.hasOwnProperty(e)?i[t]=$e[e]:(o.push(e),Xe.hasOwnProperty(e)||(Xe[e]=[]),Xe[e].push((function(){i[t]=$e[e],++a===o.length&&r(i)})))})),0===o.length&&r(i)}function nt(e){var t=Qe[e];delete Qe[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields,o=i.map((function(e){return e.getterReturnType})).concat(i.map((function(e){return e.setterArgumentType})));tt([e],o,(function(e){var o={};return i.forEach((function(t,n){var r=t.fieldName,a=e[n],s=t.getter,c=t.getterContext,u=e[n+i.length],l=t.setter,d=t.setterContext;o[r]={read:function(e){return a.fromWireType(s(c,e))},write:function(e,t){var n=[];l(d,e,u.toWireType(n,t)),Be(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in o)t[n]=o[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in o)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var a=n();for(i in o)o[i].write(a,t[i]);return null!==e&&e.push(r,a),a},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:r}]}))}function rt(e,t,n,r,i){}function it(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function ot(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);at=e}var at=undefined;function st(e){for(var t="",n=e;P[n];)t+=at[P[n++]];return t}var ct=undefined;function ut(e){throw new ct(e)}function lt(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||ut('type "'+r+'" must have a positive integer typeid pointer'),$e.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;ut("Cannot register type '"+r+"' twice")}if($e[e]=t,delete Ve[e],Xe.hasOwnProperty(e)){var i=Xe[e];delete Xe[e],i.forEach((function(e){e()}))}}function dt(e,t,n,r,i){var o=it(n);lt(e,{name:t=st(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=M;else if(2===n)r=R;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=I}return this.fromWireType(r[e>>o])},destructorFunction:null})}function pt(e){if(!(this instanceof Pt))return!1;if(!(e instanceof Pt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function ht(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function ft(e){function t(e){return e.$$.ptrType.registeredClass.name}ut(t(e)+" instance already deleted")}var gt=!1;function _t(e){}function Et(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function mt(e){e.count.value-=1,0===e.count.value&&Et(e)}function yt(e){return"undefined"==typeof FinalizationGroup?(yt=function(e){return e},e):(gt=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr&&mt(n)}})),yt=function(e){return gt.register(e,e.$$,e.$$),e},_t=function(e){gt.unregister(e.$$)},yt(e))}function vt(){if(this.$$.ptr||ft(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=yt(Object.create(Object.getPrototypeOf(this),{$$:{value:ht(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function bt(){this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ut("Object already scheduled for deletion"),_t(this),mt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=undefined,this.$$.ptr=undefined)}function Ot(){return!this.$$.ptr}var wt=undefined,Tt=[];function Dt(){for(;Tt.length;){var e=Tt.pop();e.$$.deleteScheduled=!1,e.delete()}}function St(){return this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ut("Object already scheduled for deletion"),Tt.push(this),1===Tt.length&&wt&&wt(Dt),this.$$.deleteScheduled=!0,this}function Mt(){Pt.prototype.isAliasOf=pt,Pt.prototype.clone=vt,Pt.prototype.delete=bt,Pt.prototype.isDeleted=Ot,Pt.prototype.deleteLater=St}function Pt(){}var Rt={};function At(e,t,n){if(undefined===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ut("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function It(e,n,r){t.hasOwnProperty(e)?((undefined===r||undefined!==t[e].overloadTable&&undefined!==t[e].overloadTable[r])&&ut("Cannot register public name '"+e+"' twice"),At(t,e,e),t.hasOwnProperty(r)&&ut("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),t[e].overloadTable[r]=n):(t[e]=n,undefined!==r&&(t[e].numArguments=r))}function kt(e,t,n,r,i,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function Ct(e,t,n){for(;t!==n;)t.upcast||ut("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function xt(e,t){if(null===t)return this.isReference&&ut("null is not a valid "+this.name),0;t.$$||ut('Cannot pass "'+On(t)+'" as a '+this.name),t.$$.ptr||ut("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return Ct(t.$$.ptr,n,this.registeredClass)}function Nt(e,t){var n;if(null===t)return this.isReference&&ut("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||ut('Cannot pass "'+On(t)+'" as a '+this.name),t.$$.ptr||ut("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ut("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Ct(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(undefined===t.$$.smartPtr&&ut("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:ut("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,vn((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:ut("Unsupporting sharing policy")}return n}function Ut(e,t){if(null===t)return this.isReference&&ut("null is not a valid "+this.name),0;t.$$||ut('Cannot pass "'+On(t)+'" as a '+this.name),t.$$.ptr||ut("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ut("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return Ct(t.$$.ptr,n,this.registeredClass)}function Ft(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function jt(e){this.rawDestructor&&this.rawDestructor(e)}function Ht(e){null!==e&&e.delete()}function Gt(e,t,n){if(t===n)return e;if(undefined===n.baseClass)return null;var r=Gt(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Lt(){return Object.keys(Xt).length}function Qt(){var e=[];for(var t in Xt)Xt.hasOwnProperty(t)&&e.push(Xt[t]);return e}function Bt(e){wt=e,Tt.length&&wt&&wt(Dt)}function zt(){t.getInheritedInstanceCount=Lt,t.getLiveInheritedInstances=Qt,t.flushPendingDeletes=Dt,t.setDelayFunction=Bt}var Xt={};function $t(e,t){for(t===undefined&&ut("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Vt(e,t){return t=$t(e,t),Xt[t]}function Wt(e,t){return t.ptrType&&t.ptr||et("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&et("Both smartPtrType and smartPtr must be specified"),t.count={value:1},yt(Object.create(e,{$$:{value:t}}))}function Kt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Vt(this.registeredClass,t);if(undefined!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?Wt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Wt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Rt[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=Gt(t,this.registeredClass,o.registeredClass);return null===c?i.call(this):this.isSmartPointer?Wt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):Wt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}function qt(){Yt.prototype.getPointee=Ft,Yt.prototype.destructor=jt,Yt.prototype.argPackAdvance=8,Yt.prototype.readValueFromPointer=ze,Yt.prototype.deleteObject=Ht,Yt.prototype.fromWireType=Kt}function Yt(e,t,n,r,i,o,a,s,c,u,l){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=l,i||t.baseClass!==undefined?this.toWireType=Nt:r?(this.toWireType=xt,this.destructorFunction=null):(this.toWireType=Ut,this.destructorFunction=null)}function Jt(e,n,r){t.hasOwnProperty(e)||et("Replacing nonexistant public symbol"),undefined!==t[e].overloadTable&&undefined!==r?t[e].overloadTable[r]=n:(t[e]=n,t[e].argCount=r)}function Zt(e,n,r){_("dynCall_"+e in t,"bad function pointer type - no table for sig '"+e+"'"),r&&r.length?_(r.length===e.substring(1).replace(/j/g,"--").length):_(1==e.length);var i=t["dynCall_"+e];return r&&r.length?i.apply(null,[n].concat(r)):i.call(null,n)}function en(e,t,n){return e.includes("j")?Zt(e,t,n):(_($.get(t),"missing table entry in dynCall: "+t),$.get(t).apply(null,n))}function tn(e,t){_(e.includes("j"),"getDynCaller should only be called with i64 sigs");var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return en(e,t,n)}}function nn(e,t){function n(){return e.includes("j")?tn(e,t):$.get(t)}e=st(e);var r=n();return"function"!=typeof r&&ut("unknown function pointer with signature "+e+": "+t),r}var rn=undefined;function on(e){var t=tr(e),n=st(t);return er(t),n}function sn(e,t){var n=[],r={};function i(e){r[e]||$e[e]||(Ve[e]?Ve[e].forEach(i):(n.push(e),r[e]=!0))}throw t.forEach(i),new rn(e+": "+n.map(on).join([", "]))}function cn(e,t,n,r,i,o,a,s,c,u,l,d,p){l=st(l),o=nn(i,o),s&&(s=nn(a,s)),u&&(u=nn(c,u)),p=nn(d,p);var h=qe(l);It(h,(function(){sn("Cannot construct "+l+" due to unbound types",[r])})),tt([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:Pt.prototype;var a=Ye(h,(function(){if(Object.getPrototypeOf(this)!==c)throw new ct("Use 'new' to construct "+l);if(undefined===d.constructor_body)throw new ct(l+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(undefined===e)throw new ct("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(i,{constructor:{value:a}});a.prototype=c;var d=new kt(l,a,c,p,n,o,s,u),f=new Yt(l,d,!0,!1,!1),g=new Yt(l+"*",d,!1,!1,!1),_=new Yt(l+" const*",d,!1,!0,!1);return Rt[e]={pointerType:g,constPointerType:_},Jt(h,a),[f,g,_]}))}function un(e,t){for(var n=[],r=0;r<e;r++)n.push(I[(t>>2)+r]);return n}function ln(e,t,n,r,i,o){_(t>0);var a=un(t,n);i=nn(r,i);var s=[o],c=[];tt([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(undefined===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),undefined!==e.registeredClass.constructor_body[t-1])throw new ct("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){sn("Cannot construct "+e.name+" due to unbound types",a)},tt([],a,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&ut(n+" called with "+arguments.length+" arguments, expected "+(t-1)),c.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=r[e].toWireType(c,arguments[e-1]);var o=i.apply(null,s);return Be(c),r[0].fromWireType(o)},[]})),[]}))}function dn(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+an(e)+" which is not a function");var n=Ye(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function pn(e,t,n,r,i){var o=t.length;o<2&&ut("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&t[c].destructorFunction===undefined){s=!0;break}var u="void"!==t[0].name,l="",d="";for(c=0;c<o-2;++c)l+=(0!==c?", ":"")+"arg"+c,d+=(0!==c?", ":"")+"arg"+c+"Wired";var p="return function "+qe(e)+"("+l+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(p+="var destructors = [];\n");var h=s?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],g=[ut,r,i,Be,t[0],t[1]];for(a&&(p+="var thisWired = classParam.toWireType("+h+", this);\n"),c=0;c<o-2;++c)p+="var arg"+c+"Wired = argType"+c+".toWireType("+h+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),g.push(t[c+2]);if(a&&(d="thisWired"+(d.length>0?", ":"")+d),p+=(u?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",s)p+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){var _=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(p+=_+"_dtor("+_+"); // "+t[c].name+"\n",f.push(_+"_dtor"),g.push(t[c].destructorFunction))}return u&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",f.push(p),dn(Function,f).apply(null,g)}function hn(e,t,n,r,i,o,a,s){var c=un(n,r);t=st(t),o=nn(i,o),tt([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){sn("Cannot call "+r+" due to unbound types",c)}s&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,l=u[t];return undefined===l||undefined===l.overloadTable&&l.className!==e.name&&l.argCount===n-2?(i.argCount=n-2,i.className=e.name,u[t]=i):(At(u,t,r),u[t].overloadTable[n-2]=i),tt([],c,(function(i){var s=pn(r,i,e,o,a);return undefined===u[t].overloadTable?(s.argCount=n-2,u[t]=s):u[t].overloadTable[n-2]=s,[]})),[]}))}var fn=[],gn=[{},{value:undefined},{value:null},{value:!0},{value:!1}];function _n(e){e>4&&0==--gn[e].refcount&&(gn[e]=undefined,fn.push(e))}function En(){for(var e=0,t=5;t<gn.length;++t)gn[t]!==undefined&&++e;return e}function mn(){for(var e=5;e<gn.length;++e)if(gn[e]!==undefined)return gn[e];return null}function yn(){t.count_emval_handles=En,t.get_first_emval=mn}function vn(e){switch(e){case undefined:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=fn.length?fn.pop():gn.length;return gn[t]={refcount:1,value:e},t}}function bn(e,t){lt(e,{name:t=st(t),fromWireType:function(e){var t=gn[e].value;return _n(e),t},toWireType:function(e,t){return vn(t)},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:null})}function On(e){if(null===e)return"null";var t=an(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e}function wn(e,t){switch(t){case 2:return function(e){return this.fromWireType(C[e>>2])};case 3:return function(e){return this.fromWireType(x[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Tn(e,t,n){var r=it(n);lt(e,{name:t=st(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+On(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:wn(t,r),destructorFunction:null})}function Dn(e,t,n,r,i,o){var a=un(t,n);e=st(e),i=nn(r,i),It(e,(function(){sn("Cannot call "+e+" due to unbound types",a)}),t-1),tt([],a,(function(n){var r=[n[0],null].concat(n.slice(1));return Jt(e,pn(e,r,null,i,o),t-1),[]}))}function Sn(e,t,n){switch(t){case 0:return n?function(e){return M[e]}:function(e){return P[e]};case 1:return n?function(e){return R[e>>1]}:function(e){return A[e>>1]};case 2:return n?function(e){return I[e>>2]}:function(e){return k[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Mn(e,t,n,r,i){t=st(t),-1===i&&(i=4294967295);var o=it(n),a=function(e){return e};if(0===r){var s=32-8*n;a=function(e){return e<<s>>>s}}var c=t.includes("unsigned");lt(e,{name:t,fromWireType:a,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+On(n)+'" to '+this.name);if(n<r||n>i)throw new TypeError('Passing a number "'+On(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+i+"]!");return c?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:Sn(t,o,0!==r),destructorFunction:null})}function Pn(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=k,n=t[e>>=2],i=t[e+1];return new r(S,i,n)}lt(e,{name:n=st(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Rn(e,t,n,r,i,o,a,s,c,u,l,d){n=st(n),o=nn(i,o),s=nn(a,s),u=nn(c,u),d=nn(l,d),tt([e],[t],(function(e){return e=e[0],[new Yt(n,e.registeredClass,!1,!1,!0,e,r,o,s,u,d)]}))}function An(e,t){var n="std::string"===(t=st(t));lt(e,{name:t,fromWireType:function(e){var t,r=k[e>>2];if(n)for(var i=e+4,o=0;o<=r;++o){var a=e+4+o;if(o==r||0==P[a]){var s=O(i,a-i);t===undefined?t=s:(t+=String.fromCharCode(0),t+=s),i=a+1}}else{var c=new Array(r);for(o=0;o<r;++o)c[o]=String.fromCharCode(P[e+4+o]);t=c.join("")}return er(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ut("Cannot pass non-string to std::string");var i=(n&&r?function(){return D(t)}:function(){return t.length})(),o=Zn(4+i+1);if(k[o>>2]=i,n&&r)T(t,o+4,i+1);else if(r)for(var a=0;a<i;++a){var s=t.charCodeAt(a);s>255&&(er(o),ut("String has UTF-16 code units that do not fit in 8 bits")),P[o+4+a]=s}else for(a=0;a<i;++a)P[o+4+a]=t[a];return null!==e&&e.push(er,o),o},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:function(e){er(e)}})}function In(e,t,n){var r,i,o,a,s;n=st(n),2===t?(r=U,i=F,a=j,o=function(){return A},s=1):4===t&&(r=H,i=G,a=L,o=function(){return k},s=2),lt(e,{name:n,fromWireType:function(e){for(var n,i=k[e>>2],a=o(),c=e+4,u=0;u<=i;++u){var l=e+4+u*t;if(u==i||0==a[l>>s]){var d=r(c,l-c);n===undefined?n=d:(n+=String.fromCharCode(0),n+=d),c=l+t}}return er(e),n},toWireType:function(e,r){"string"!=typeof r&&ut("Cannot pass non-string to C++ string type "+n);var o=a(r),c=Zn(4+o+t);return k[c>>2]=o>>s,i(r,c+4,o+t),null!==e&&e.push(er,c),c},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:function(e){er(e)}})}function kn(e,t,n,r,i,o){Qe[e]={name:st(t),rawConstructor:nn(n,r),rawDestructor:nn(i,o),fields:[]}}function Cn(e,t,n,r,i,o,a,s,c,u){Qe[e].fields.push({fieldName:st(t),getterReturnType:n,getter:nn(r,i),getterContext:o,setterArgumentType:a,setter:nn(s,c),setterContext:u})}function xn(e,t){lt(e,{isVoid:!0,name:t=st(t),argPackAdvance:0,fromWireType:function(){return undefined},toWireType:function(e,t){return undefined}})}function Nn(e,t){var n=$e[e];return undefined===n&&ut(t+" has unknown type "+on(e)),n}function Un(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=Nn(I[(t>>2)+r],"parameter "+r);return n}function Fn(e){return e||ut("Cannot use deleted val. handle = "+e),gn[e].value}function jn(e,t,n,r){e=Fn(e);for(var i=Un(t,n),o=new Array(t),a=0;a<t;++a){var s=i[a];o[a]=s.readValueFromPointer(r),r+=s.argPackAdvance}return vn(e.apply(undefined,o))}function Hn(e){e>4&&(gn[e].refcount+=1)}function Gn(e,t){return vn((e=Nn(e,"_emval_take_value")).readValueFromPointer(t))}function Ln(){he()}function Qn(e,t,n){P.copyWithin(e,t,t+n)}function Bn(e){try{return d.grow(e-S.byteLength+65535>>>16),z(d.buffer),1}catch(t){}}function zn(e){var t=P.length;_((e>>>=0)>t);var n=16777216;if(e>n)return h("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+n+" bytes!"),!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var o=Math.min(n,B(Math.max(e,i),65536));if(Bn(o))return!0}return h("Failed to grow the heap from "+t+" bytes to "+o+" bytes, not enough memory!"),!1}var Xn={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Xn.buffers[e];_(n),0===t||10===t?((1===e?p:h)(b(n,0)),n.length=0):n.push(t)},varargs:undefined,get:function(){return _(Xn.varargs!=undefined),Xn.varargs+=4,I[Xn.varargs-4>>2]},getStr:function(e){return O(e)},get64:function(e,t){return _(e>=0?0===t:-1===t),e}};function $n(e){return he("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}function Vn(e,t,n,r,i){he("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")}function Wn(e,t,n,r){for(var i=0,o=0;o<n;o++){for(var a=I[t+8*o>>2],s=I[t+(8*o+4)>>2],c=0;c<s;c++)Xn.printChar(e,P[a+c]);i+=s}return I[r>>2]=i,0}function Kn(){return 6}function qn(){return 28}function Yn(e){}Ze=t.InternalError=Je(Error,"InternalError"),ot(),ct=t.BindingError=Je(Error,"BindingError"),Mt(),qt(),zt(),rn=t.UnboundTypeError=Je(Error,"UnboundTypeError"),yn();var Jn={WebGLGetInputShape:Re,WebGLGetOutput:Ae,WebGLGetOutputShape:Ie,WebGLInference:ke,WebGLInit:Ce,WebGLSetInput:xe,__assert_fail:Ne,__cxa_allocate_exception:Fe,__cxa_atexit:He,__cxa_throw:Le,_embind_finalize_value_object:nt,_embind_register_bigint:rt,_embind_register_bool:dt,_embind_register_class:cn,_embind_register_class_constructor:ln,_embind_register_class_function:hn,_embind_register_emval:bn,_embind_register_float:Tn,_embind_register_function:Dn,_embind_register_integer:Mn,_embind_register_memory_view:Pn,_embind_register_smart_ptr:Rn,_embind_register_std_string:An,_embind_register_std_wstring:In,_embind_register_value_object:kn,_embind_register_value_object_field:Cn,_embind_register_void:xn,_emval_call:jn,_emval_decref:_n,_emval_incref:Hn,_emval_take_value:Gn,abort:Ln,emscripten_memcpy_big:Qn,emscripten_resize_heap:zn,fd_close:$n,fd_seek:Vn,fd_write:Wn,js_log:we,pthread_create:Kn,pthread_join:qn,setTempRet0:Yn};Oe(),t.___wasm_call_ctors=me("__wasm_call_ctors");var Zn=t._malloc=me("malloc"),er=t._free=me("free"),tr=t.___getTypeName=me("__getTypeName");t.___embind_register_native_and_builtin_types=me("__embind_register_native_and_builtin_types"),t._emscripten_main_thread_process_queued_calls=me("emscripten_main_thread_process_queued_calls");var nr=t._emscripten_stack_get_end=function(){return(nr=t._emscripten_stack_get_end=t.asm.emscripten_stack_get_end).apply(null,arguments)};t.___errno_location=me("__errno_location"),t._fflush=me("fflush");var rr,ir=t.stackSave=me("stackSave"),or=t.stackRestore=me("stackRestore"),ar=t.stackAlloc=me("stackAlloc"),sr=t._emscripten_stack_init=function(){return(sr=t._emscripten_stack_init=t.asm.emscripten_stack_init).apply(null,arguments)};function cr(){sr(),W()}function ur(e){function r(){rr||(rr=!0,t.calledRun=!0,g||(ne(),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),_(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),re()))}se>0||(cr(),te(),se>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r(),K()))}if(t._emscripten_stack_get_free=function(){return(t._emscripten_stack_get_free=t.asm.emscripten_stack_get_free).apply(null,arguments)},t.dynCall_ji=me("dynCall_ji"),t.dynCall_vij=me("dynCall_vij"),t.dynCall_jiji=me("dynCall_jiji"),Object.getOwnPropertyDescriptor(t,"intArrayFromString")||(t.intArrayFromString=function(){he("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){he("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.ccall=m,t.cwrap=y,Object.getOwnPropertyDescriptor(t,"setValue")||(t.setValue=function(){he("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getValue")||(t.getValue=function(){he("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){he("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){he("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.UTF8ToString=O,Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){he("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8")||(t.stringToUTF8=function(){he("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){he("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){he("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){he("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnInit")||(t.addOnInit=function(){he("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){he("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){he("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){he("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){he("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){he("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){he("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){he("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){he("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){he("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){he("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){he("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){he("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){he("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){he("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){he("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){he("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){he("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){he("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){he("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){he("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){he("'addFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){he("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){he("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){he("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){he("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){he("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){he("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){he("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){he("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){he("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){he("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){he("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToNewUTF8")||(t.stringToNewUTF8=function(){he("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setFileTime")||(t.setFileTime=function(){he("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscripten_realloc_buffer")||(t.emscripten_realloc_buffer=function(){he("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){he("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_CODES")||(t.ERRNO_CODES=function(){he("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_MESSAGES")||(t.ERRNO_MESSAGES=function(){he("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setErrNo")||(t.setErrNo=function(){he("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetPton4")||(t.inetPton4=function(){he("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetNtop4")||(t.inetNtop4=function(){he("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetPton6")||(t.inetPton6=function(){he("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetNtop6")||(t.inetNtop6=function(){he("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readSockaddr")||(t.readSockaddr=function(){he("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeSockaddr")||(t.writeSockaddr=function(){he("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"DNS")||(t.DNS=function(){he("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getHostByName")||(t.getHostByName=function(){he("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GAI_ERRNO_MESSAGES")||(t.GAI_ERRNO_MESSAGES=function(){he("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Protocols")||(t.Protocols=function(){he("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Sockets")||(t.Sockets=function(){he("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getRandomDevice")||(t.getRandomDevice=function(){he("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"traverseStack")||(t.traverseStack=function(){he("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UNWIND_CACHE")||(t.UNWIND_CACHE=function(){he("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"withBuiltinMalloc")||(t.withBuiltinMalloc=function(){he("'withBuiltinMalloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgsArray")||(t.readAsmConstArgsArray=function(){he("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgs")||(t.readAsmConstArgs=function(){he("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mainThreadEM_ASM")||(t.mainThreadEM_ASM=function(){he("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_q")||(t.jstoi_q=function(){he("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_s")||(t.jstoi_s=function(){he("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getExecutableName")||(t.getExecutableName=function(){he("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"listenOnce")||(t.listenOnce=function(){he("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"autoResumeAudioContext")||(t.autoResumeAudioContext=function(){he("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCallLegacy")||(t.dynCallLegacy=function(){he("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getDynCaller")||(t.getDynCaller=function(){he("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){he("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callRuntimeCallbacks")||(t.callRuntimeCallbacks=function(){he("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepaliveCounter")||(t.runtimeKeepaliveCounter=function(){he("'runtimeKeepaliveCounter' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"keepRuntimeAlive")||(t.keepRuntimeAlive=function(){he("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepalivePush")||(t.runtimeKeepalivePush=function(){he("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepalivePop")||(t.runtimeKeepalivePop=function(){he("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callUserCallback")||(t.callUserCallback=function(){he("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeExit")||(t.maybeExit=function(){he("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"asmjsMangle")||(t.asmjsMangle=function(){he("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reallyNegative")||(t.reallyNegative=function(){he("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"unSign")||(t.unSign=function(){he("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reSign")||(t.reSign=function(){he("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"formatString")||(t.formatString=function(){he("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH")||(t.PATH=function(){he("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH_FS")||(t.PATH_FS=function(){he("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SYSCALLS")||(t.SYSCALLS=function(){he("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMmap2")||(t.syscallMmap2=function(){he("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMunmap")||(t.syscallMunmap=function(){he("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketFromFD")||(t.getSocketFromFD=function(){he("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketAddress")||(t.getSocketAddress=function(){he("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"JSEvents")||(t.JSEvents=function(){he("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerKeyEventCallback")||(t.registerKeyEventCallback=function(){he("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"specialHTMLTargets")||(t.specialHTMLTargets=function(){he("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeCStringToJsString")||(t.maybeCStringToJsString=function(){he("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findEventTarget")||(t.findEventTarget=function(){he("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findCanvasEventTarget")||(t.findCanvasEventTarget=function(){he("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getBoundingClientRect")||(t.getBoundingClientRect=function(){he("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillMouseEventData")||(t.fillMouseEventData=function(){he("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerMouseEventCallback")||(t.registerMouseEventCallback=function(){he("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerWheelEventCallback")||(t.registerWheelEventCallback=function(){he("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerUiEventCallback")||(t.registerUiEventCallback=function(){he("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFocusEventCallback")||(t.registerFocusEventCallback=function(){he("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceOrientationEventData")||(t.fillDeviceOrientationEventData=function(){he("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceOrientationEventCallback")||(t.registerDeviceOrientationEventCallback=function(){he("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceMotionEventData")||(t.fillDeviceMotionEventData=function(){he("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceMotionEventCallback")||(t.registerDeviceMotionEventCallback=function(){he("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"screenOrientation")||(t.screenOrientation=function(){he("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillOrientationChangeEventData")||(t.fillOrientationChangeEventData=function(){he("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerOrientationChangeEventCallback")||(t.registerOrientationChangeEventCallback=function(){he("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillFullscreenChangeEventData")||(t.fillFullscreenChangeEventData=function(){he("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFullscreenChangeEventCallback")||(t.registerFullscreenChangeEventCallback=function(){he("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerRestoreOldStyle")||(t.registerRestoreOldStyle=function(){he("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"hideEverythingExceptGivenElement")||(t.hideEverythingExceptGivenElement=function(){he("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreHiddenElements")||(t.restoreHiddenElements=function(){he("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setLetterbox")||(t.setLetterbox=function(){he("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"currentFullscreenStrategy")||(t.currentFullscreenStrategy=function(){he("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreOldWindowedStyle")||(t.restoreOldWindowedStyle=function(){he("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"softFullscreenResizeWebGLRenderTarget")||(t.softFullscreenResizeWebGLRenderTarget=function(){he("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"doRequestFullscreen")||(t.doRequestFullscreen=function(){he("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillPointerlockChangeEventData")||(t.fillPointerlockChangeEventData=function(){he("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockChangeEventCallback")||(t.registerPointerlockChangeEventCallback=function(){he("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockErrorEventCallback")||(t.registerPointerlockErrorEventCallback=function(){he("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requestPointerLock")||(t.requestPointerLock=function(){he("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillVisibilityChangeEventData")||(t.fillVisibilityChangeEventData=function(){he("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerVisibilityChangeEventCallback")||(t.registerVisibilityChangeEventCallback=function(){he("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerTouchEventCallback")||(t.registerTouchEventCallback=function(){he("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillGamepadEventData")||(t.fillGamepadEventData=function(){he("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerGamepadEventCallback")||(t.registerGamepadEventCallback=function(){he("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBeforeUnloadEventCallback")||(t.registerBeforeUnloadEventCallback=function(){he("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillBatteryEventData")||(t.fillBatteryEventData=function(){he("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"battery")||(t.battery=function(){he("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBatteryEventCallback")||(t.registerBatteryEventCallback=function(){he("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setCanvasElementSize")||(t.setCanvasElementSize=function(){he("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCanvasElementSize")||(t.getCanvasElementSize=function(){he("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"polyfillSetImmediate")||(t.polyfillSetImmediate=function(){he("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangle")||(t.demangle=function(){he("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangleAll")||(t.demangleAll=function(){he("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jsStackTrace")||(t.jsStackTrace=function(){he("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){he("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getEnvStrings")||(t.getEnvStrings=function(){he("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"checkWasiClock")||(t.checkWasiClock=function(){he("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"flush_NO_FILESYSTEM")||(t.flush_NO_FILESYSTEM=function(){he("'flush_NO_FILESYSTEM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64")||(t.writeI53ToI64=function(){he("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Clamped")||(t.writeI53ToI64Clamped=function(){he("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Signaling")||(t.writeI53ToI64Signaling=function(){he("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Clamped")||(t.writeI53ToU64Clamped=function(){he("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Signaling")||(t.writeI53ToU64Signaling=function(){he("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromI64")||(t.readI53FromI64=function(){he("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromU64")||(t.readI53FromU64=function(){he("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertI32PairToI53")||(t.convertI32PairToI53=function(){he("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertU32PairToI53")||(t.convertU32PairToI53=function(){he("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"uncaughtExceptionCount")||(t.uncaughtExceptionCount=function(){he("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionLast")||(t.exceptionLast=function(){he("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionCaught")||(t.exceptionCaught=function(){he("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfoAttrs")||(t.ExceptionInfoAttrs=function(){he("'ExceptionInfoAttrs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfo")||(t.ExceptionInfo=function(){he("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"CatchInfo")||(t.CatchInfo=function(){he("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_addRef")||(t.exception_addRef=function(){he("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_decRef")||(t.exception_decRef=function(){he("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Browser")||(t.Browser=function(){he("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"funcWrappers")||(t.funcWrappers=function(){he("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){he("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setMainLoop")||(t.setMainLoop=function(){he("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){he("'FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mmapAlloc")||(t.mmapAlloc=function(){he("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"MEMFS")||(t.MEMFS=function(){he("'MEMFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"TTY")||(t.TTY=function(){he("'TTY' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PIPEFS")||(t.PIPEFS=function(){he("'PIPEFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SOCKFS")||(t.SOCKFS=function(){he("'SOCKFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"_setNetworkCallback")||(t._setNetworkCallback=function(){he("'_setNetworkCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tempFixedLengthArray")||(t.tempFixedLengthArray=function(){he("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"miniTempWebGLFloatBuffers")||(t.miniTempWebGLFloatBuffers=function(){he("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapObjectForWebGLType")||(t.heapObjectForWebGLType=function(){he("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapAccessShiftForWebGLHeap")||(t.heapAccessShiftForWebGLHeap=function(){he("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){he("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGet")||(t.emscriptenWebGLGet=function(){he("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"computeUnpackAlignedImageSize")||(t.computeUnpackAlignedImageSize=function(){he("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetTexPixelData")||(t.emscriptenWebGLGetTexPixelData=function(){he("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetUniform")||(t.emscriptenWebGLGetUniform=function(){he("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglGetUniformLocation")||(t.webglGetUniformLocation=function(){he("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglPrepareUniformLocationsBeforeFirstUse")||(t.webglPrepareUniformLocationsBeforeFirstUse=function(){he("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglGetLeftBracePos")||(t.webglGetLeftBracePos=function(){he("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetVertexAttrib")||(t.emscriptenWebGLGetVertexAttrib=function(){he("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeGLArray")||(t.writeGLArray=function(){he("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AL")||(t.AL=function(){he("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_unicode")||(t.SDL_unicode=function(){he("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_ttfContext")||(t.SDL_ttfContext=function(){he("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_audio")||(t.SDL_audio=function(){he("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL")||(t.SDL=function(){he("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_gfx")||(t.SDL_gfx=function(){he("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLUT")||(t.GLUT=function(){he("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"EGL")||(t.EGL=function(){he("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW_Window")||(t.GLFW_Window=function(){he("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW")||(t.GLFW=function(){he("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLEW")||(t.GLEW=function(){he("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"IDBStore")||(t.IDBStore=function(){he("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runAndAbortIfError")||(t.runAndAbortIfError=function(){he("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_handle_array")||(t.emval_handle_array=function(){he("'emval_handle_array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_free_list")||(t.emval_free_list=function(){he("'emval_free_list' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_symbols")||(t.emval_symbols=function(){he("'emval_symbols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"init_emval")||(t.init_emval=function(){he("'init_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"count_emval_handles")||(t.count_emval_handles=function(){he("'count_emval_handles' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"get_first_emval")||(t.get_first_emval=function(){he("'get_first_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getStringOrSymbol")||(t.getStringOrSymbol=function(){he("'getStringOrSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requireHandle")||(t.requireHandle=function(){he("'requireHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_newers")||(t.emval_newers=function(){he("'emval_newers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"craftEmvalAllocator")||(t.craftEmvalAllocator=function(){he("'craftEmvalAllocator' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_get_global")||(t.emval_get_global=function(){he("'emval_get_global' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emval_methodCallers")||(t.emval_methodCallers=function(){he("'emval_methodCallers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"InternalError")||(t.InternalError=function(){he("'InternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"BindingError")||(t.BindingError=function(){he("'BindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UnboundTypeError")||(t.UnboundTypeError=function(){he("'UnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PureVirtualError")||(t.PureVirtualError=function(){he("'PureVirtualError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"init_embind")||(t.init_embind=function(){he("'init_embind' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"throwInternalError")||(t.throwInternalError=function(){he("'throwInternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"throwBindingError")||(t.throwBindingError=function(){he("'throwBindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"throwUnboundTypeError")||(t.throwUnboundTypeError=function(){he("'throwUnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ensureOverloadTable")||(t.ensureOverloadTable=function(){he("'ensureOverloadTable' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exposePublicSymbol")||(t.exposePublicSymbol=function(){he("'exposePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"replacePublicSymbol")||(t.replacePublicSymbol=function(){he("'replacePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"extendError")||(t.extendError=function(){he("'extendError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"createNamedFunction")||(t.createNamedFunction=function(){he("'createNamedFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registeredInstances")||(t.registeredInstances=function(){he("'registeredInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getBasestPointer")||(t.getBasestPointer=function(){he("'getBasestPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerInheritedInstance")||(t.registerInheritedInstance=function(){he("'registerInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"unregisterInheritedInstance")||(t.unregisterInheritedInstance=function(){he("'unregisterInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getInheritedInstance")||(t.getInheritedInstance=function(){he("'getInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getInheritedInstanceCount")||(t.getInheritedInstanceCount=function(){he("'getInheritedInstanceCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getLiveInheritedInstances")||(t.getLiveInheritedInstances=function(){he("'getLiveInheritedInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registeredTypes")||(t.registeredTypes=function(){he("'registeredTypes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"awaitingDependencies")||(t.awaitingDependencies=function(){he("'awaitingDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"typeDependencies")||(t.typeDependencies=function(){he("'typeDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registeredPointers")||(t.registeredPointers=function(){he("'registeredPointers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerType")||(t.registerType=function(){he("'registerType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"whenDependentTypesAreResolved")||(t.whenDependentTypesAreResolved=function(){he("'whenDependentTypesAreResolved' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"embind_charCodes")||(t.embind_charCodes=function(){he("'embind_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"embind_init_charCodes")||(t.embind_init_charCodes=function(){he("'embind_init_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readLatin1String")||(t.readLatin1String=function(){he("'readLatin1String' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTypeName")||(t.getTypeName=function(){he("'getTypeName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heap32VectorToArray")||(t.heap32VectorToArray=function(){he("'heap32VectorToArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requireRegisteredType")||(t.requireRegisteredType=function(){he("'requireRegisteredType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getShiftFromSize")||(t.getShiftFromSize=function(){he("'getShiftFromSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"integerReadValueFromPointer")||(t.integerReadValueFromPointer=function(){he("'integerReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"enumReadValueFromPointer")||(t.enumReadValueFromPointer=function(){he("'enumReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"floatReadValueFromPointer")||(t.floatReadValueFromPointer=function(){he("'floatReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"simpleReadValueFromPointer")||(t.simpleReadValueFromPointer=function(){he("'simpleReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runDestructors")||(t.runDestructors=function(){he("'runDestructors' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"new_")||(t.new_=function(){he("'new_' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"craftInvokerFunction")||(t.craftInvokerFunction=function(){he("'craftInvokerFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"embind__requireFunction")||(t.embind__requireFunction=function(){he("'embind__requireFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tupleRegistrations")||(t.tupleRegistrations=function(){he("'tupleRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"structRegistrations")||(t.structRegistrations=function(){he("'structRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"genericPointerToWireType")||(t.genericPointerToWireType=function(){he("'genericPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"constNoSmartPtrRawPointerToWireType")||(t.constNoSmartPtrRawPointerToWireType=function(){he("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"nonConstNoSmartPtrRawPointerToWireType")||(t.nonConstNoSmartPtrRawPointerToWireType=function(){he("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"init_RegisteredPointer")||(t.init_RegisteredPointer=function(){he("'init_RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredPointer")||(t.RegisteredPointer=function(){he("'RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredPointer_getPointee")||(t.RegisteredPointer_getPointee=function(){he("'RegisteredPointer_getPointee' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredPointer_destructor")||(t.RegisteredPointer_destructor=function(){he("'RegisteredPointer_destructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredPointer_deleteObject")||(t.RegisteredPointer_deleteObject=function(){he("'RegisteredPointer_deleteObject' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredPointer_fromWireType")||(t.RegisteredPointer_fromWireType=function(){he("'RegisteredPointer_fromWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runDestructor")||(t.runDestructor=function(){he("'runDestructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"releaseClassHandle")||(t.releaseClassHandle=function(){he("'releaseClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"finalizationGroup")||(t.finalizationGroup=function(){he("'finalizationGroup' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"detachFinalizer_deps")||(t.detachFinalizer_deps=function(){he("'detachFinalizer_deps' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"detachFinalizer")||(t.detachFinalizer=function(){he("'detachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"attachFinalizer")||(t.attachFinalizer=function(){he("'attachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeClassHandle")||(t.makeClassHandle=function(){he("'makeClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"init_ClassHandle")||(t.init_ClassHandle=function(){he("'init_ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle")||(t.ClassHandle=function(){he("'ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle_isAliasOf")||(t.ClassHandle_isAliasOf=function(){he("'ClassHandle_isAliasOf' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"throwInstanceAlreadyDeleted")||(t.throwInstanceAlreadyDeleted=function(){he("'throwInstanceAlreadyDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle_clone")||(t.ClassHandle_clone=function(){he("'ClassHandle_clone' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle_delete")||(t.ClassHandle_delete=function(){he("'ClassHandle_delete' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"deletionQueue")||(t.deletionQueue=function(){he("'deletionQueue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle_isDeleted")||(t.ClassHandle_isDeleted=function(){he("'ClassHandle_isDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ClassHandle_deleteLater")||(t.ClassHandle_deleteLater=function(){he("'ClassHandle_deleteLater' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"flushPendingDeletes")||(t.flushPendingDeletes=function(){he("'flushPendingDeletes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"delayFunction")||(t.delayFunction=function(){he("'delayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setDelayFunction")||(t.setDelayFunction=function(){he("'setDelayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"RegisteredClass")||(t.RegisteredClass=function(){he("'RegisteredClass' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"shallowCopyInternalPointer")||(t.shallowCopyInternalPointer=function(){he("'shallowCopyInternalPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"downcastPointer")||(t.downcastPointer=function(){he("'downcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"upcastPointer")||(t.upcastPointer=function(){he("'upcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"validateThis")||(t.validateThis=function(){he("'validateThis' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"char_0")||(t.char_0=function(){he("'char_0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"char_9")||(t.char_9=function(){he("'char_9' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeLegalFunctionName")||(t.makeLegalFunctionName=function(){he("'makeLegalFunctionName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"bytenn_wrapper")||(t.bytenn_wrapper=function(){he("'bytenn_wrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){he("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){he("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){he("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){he("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){he("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){he("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){he("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){he("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){he("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){he("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){he("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){he("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8")||(t.allocateUTF8=function(){he("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8OnStack")||(t.allocateUTF8OnStack=function(){he("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=W,t.checkStackCookie=K,Object.getOwnPropertyDescriptor(t,"ALLOC_NORMAL")||Object.defineProperty(t,"ALLOC_NORMAL",{configurable:!0,get:function(){he("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_STACK")||Object.defineProperty(t,"ALLOC_STACK",{configurable:!0,get:function(){he("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),ue=function e(){rr||ur(),rr||(ue=e)},t.run=ur,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return ur(),t.ready}}();e.exports=n}(sn);var cn=sn.exports,un="singleton-plyon:instance",ln="singleton-plyon:strategy_instance",dn="singleton-plyon:engine_instance",pn="singleton-plyon:wasm",hn=l();hn[un]=hn[un]||null,hn[ln]=hn[ln]||{},hn[dn]=hn[dn]||{};var fn=p("Pylon"),gn="https://lf3-static.bytednsdoc.com/obj/eden-cn/ph-auvym/ljhwZthlaukjlkulzlp/douyin-pc/pylon-wasm/index_v2.wasm",_n=function(){function e(e){if(this.engineCache={},this.byteNN=null,this.byteNNInitStatus="before",this.initByteNNQueue=[],hn[un])return fn("create from cache",e),hn[un];fn("create",e),this.options=e,this.initFeatureCenter(),this.initObserver(),Ft.initTea(),hn[un]=this}return e.prototype.initFeatureCenter=function(){this.featureCollector=new nn({biz:this.options.biz})},e.prototype.getFeatures=function(e){return _(e,this.featureCollector)},e.prototype.getFeatureVector=function(e){return m(e,this.getFeatures(e))},e.prototype.initObserver=function(){this.observer=new Kt({biz:this.options.biz})},e.prototype.createStrategyEngine=function(e){var t=this.options.biz+"_"+e.scene;return hn[ln][t]?(fn("create Strategy from cache",t),hn[ln][t]):(fn("create Strategy",e),hn[ln][t]=new on(i(i({},e),{featureCollector:this.featureCollector})),hn[ln][t])},e.prototype.createSingleByteNN=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.byteNN?[2,Promise.resolve(this.byteNN)]:this.byteNN||"before"!==this.byteNNInitStatus?this.byteNN||"pending"!==this.byteNNInitStatus?[2]:[2,new Promise((function(t){e.initByteNNQueue.push(t)}))]:(cn({locateFile:function(){return gn},print:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},printErr:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}).then((function(t){e.byteNN=t,e.byteNNInitStatus="after",e.initByteNNQueue.forEach((function(e){return e(t)}))})).catch((function(){e.byteNNInitStatus="before"})).then((function(){e.initByteNNQueue=[]})),this.byteNNInitStatus="pending",[2,new Promise((function(t){e.initByteNNQueue.push(t)}))])}))}))},e.prototype.createEngine=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.createSingleByteNN()];case 1:return r.sent(),t=this.options.biz+"_"+e.scene,hn[dn][t]?(fn("create Engine from cache",t),[2,hn[dn][t]]):(fn("create Engine",e),[4,(n=new Gt(i(i({},e),{byteNN:this.byteNN,featureCollector:this.featureCollector}))).initEngine()]);case 2:return r.sent(),hn[dn][t]=n,[2,n]}}))}))},e.prototype.destroy=function(){this.observer.destroy(),this.byteNN=undefined,hn[un]=null,hn[ln]={},hn[dn]={}},e}();e.Engine=Gt,e.Engine_Instance=dn,e.INSTANCE=un,e.Pylon=_n,e.Strategy_Instance=ln,e.Wasm_Instance=pn,e.debug=p,e.getGlobalObject=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]);