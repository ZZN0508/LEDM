!(function(t){'use strict';var e,n=[],i={},o=[],r=(function(){return{log:function(e){t.console&&t.console.log&&t.console.log(e)},}})(),a={on:function(t,e){(this._event=this._event||{}),(this._event[t]=this._event[t]||[]),this._event[t].push(e)},emit:function(t,e){var n=!0;if(!this._event||!this._event[t])return n;for(var i=0;i<this._event[t].length;i++)!1===this._event[t][i].call(this,e)&&(n=!1);return n},},s=null,c=((e={}),function(t){var n,o,a,c=e[t.key],u=((n=t.deps),(o=function(t){return i[t].funed}),(a=[]),f(n,function(t){a.push(o(t))}),a);if(c&&c.unload)try{c.data=c.unload()}catch(d){r.log(d)}if(((t.funed=t.fun.apply(c||window,u)),p(t),c&&c.load))try{c.load(c.data)}catch(d){r.log(d)}return c?((c.isHot=!0),s.emit('reload',t)):((e[t.key]={isHot:!1,data:{}}),s.emit('load',t),!0)}),u=(function(){var t=[];return function(e){(e.depKeys=i[e.key].depKeys),delete i[e.key],'_REQ_'!==e.type&&((t=[]),(function o(e){f(e.depKeys,function(e){d(t,e)===undefined&&t.push(e),o(i[e])})})(e),f(t,function(t){var e=i[t];delete i[t],n.push(e)}))}})();function d(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return t[n];return undefined}function l(t){return'[object Array]'==Object.prototype.toString.call(t)}function f(t,e){if(l(t)){for(var n=0;n<t.length;n++)if(!1===e(t[n]))return}else for(var o in t)if(i.hasOwnProperty(o)&&!1===e(t[o]))return}function p(t){f(t.deps,function(e){var n=i[e].depKeys;d(n,t.key)===undefined&&n.push(t.key)})}function h(t){for(var e=0,n=t.deps;e<n.length;e++)if(n[e]&&!(n[e]in i))return!1;return!0}function g(t,e){if(!e)return t;if(!/^\./.test(t))return t;var n=1,i=t.match(/^(\.\.\/)+(.+)$/);return(i&&((n=i[0].split('../').length),(t=i[2])),/^\.\//.test(t)&&(t=t.replace('./','')),((e=e.split('/')).length=e.length-n),(t=e.join('/')+'/'+t))}function m(t,e,n){if((l(t)?((n=e),(e=t)):'function'==typeof t?((n=t),(e=[])):'function'==typeof e&&((n=e),(e=[])),!l(e)))throw new Error('dependence must be array');var i=(function(){var t=document.scripts[document.scripts.length-1].src.split(/[?#]/)[0];if(!t)return!1;var e=t.match(/^https?:\/\/[^/]+\/(.+)\.js$/);return e&&(t=e[1]+'.js'),t})();'string'!=typeof t&&(t=i||b());for(var o=0;o<e.length;o++)e[o]=i?g(e[o],i):e[o];return{deps:e,fun:n,key:t}}function v(t){var e=c(t);t.key in i?(console&&console.log(t.key+' loaded again'),o.length>20&&(o=[]),o.push(t.key),e&&u(t)):p(t),(i[t.key]=t),(i.last=t)}function y(t){(t.depKeys=[]),h(t)?(v(t),'_DEF_'==t.type&&(function(){for(var t=n.length,e=null;(e=n[--t]);)h(e)&&(v(e),n.splice(t,1),'_DEF_'===e.type&&(t=n.length))})()):n.push(t)}function w(t,e,n){var i=m(t,e,n);(i.type='_DEF_'),y(i)}var x,b=((x=0),function(){return'k'+x++});function _(){w('lego',function(){return s})}(s={version:'1.2.0',has:function(t){return t.replace('.js','')in i},inspect:function(){return{waitingMod:n,readyMod:i,hotloadKeys:o}},reset:function(){(n=[]),(i={}),_()},load:function(t,e){var n=document.createElement('script');(n.src=t),e&&((n.onreadystatechange=function(){('loaded'!=n.readyState&&'complete'!=n.readyState)||e()}),(n.onload=function(){e()})),document.body.appendChild(n)},on:a.on,emit:a.emit,}),_(),(t._DEF_=w),(t._REQ_=function(t,e,n){if(1===arguments.length&&'string'==typeof t){if(t in i)return i[t].funed;throw new Error(t+' not found');}var o=m(t,e,n);(o.type='_REQ_'),y(o)})})(this),_REQ_(['api/client.js','pages/index/ui.js','api/server.js','js/cookie.js','js/util.js','js/event.js','js/consts.js',],function(t,e,n,i,o,r,a){var s=t['default']?t['default']:t,c=e.showPopup,u=e.hidePopup,d=n['default']?n['default']:n,l=i['default']?i['default']:i,f=o.console,p=o.getSubdomain,h=r.eventable,g=a.midKey,m=a.m2Key,v=a.ascKey,y=a.asc2Key,w=null,x=0,b=!1,_=p();window.QHUC=h({version:'0.2',getMid:function(){return l.get(g)},getM2:function(){return l.get(m)},getAsc:function(){return l.get(v)},getAsc2:function(){return l.get(y)},checkLogin:function(){return b?w:undefined},init:function(t){var e=this;void 0===t&&(t={});if(!1 in t)return void this.emit('ready',{errno:1,msg:'需要业务标识'});t.needFastSignIn===undefined&&(t.needFastSignIn=!0);(this.data=t),d.on('checkLogin',function(n){if(((_src=t.src),(w=n)))return((b=!0),void e.emit('ready',{errno:0,mid:e.getMid(),m2:e.getM2(),asc:e.getAsc(),asc2:e.getAsc2(),isLogin:w,local:x,}));t.needFastSignIn&&e.data.info?d.getData({info:e.data.info}):((b=!0),e.emit('ready',{errno:0,mid:e.getMid(),m2:e.getM2(),asc:e.getAsc(),asc2:e.getAsc2(),isLogin:w,local:x,}))}),s.on('getData',function(t){var n=t.m2,i=t.mid,o=t.info,r=t.asc,a=t.asc2,s=t.local;(e.data.info=o),(x=s),n&&l.set(m,n),i&&l.set(g,i),r&&l.set(v,r,{domain:_,samesite:'None',secure:true}),a&&l.set(y,a,{domain:_,samesite:'None',secure:true}),d.checkLogin()}),s.on('fail',function(){d.checkLogin()}),d.on('getData',function(t){(b=!0),t.err?e.emit('ready',{errno:0,mid:e.getMid(),m2:e.getM2(),asc:e.getAsc(),asc2:e.getAsc2(),isLogin:w,local:x,}):((e.userInfo=t),e.emit('ready',{errno:0,mid:e.getMid(),m2:e.getM2(),asc:e.getAsc(),asc2:e.getAsc2(),userName:t.userName,nickName:t.nickName,avatar:t.imgUrl,qid:t.qid,isLogin:w,local:x,}))}),s.getData()},signOut:function(){var t=this;d.on('signOut',function(e){var n=e.err;t.emit('signOut',{err:n})}),d.signOut(this.data)},signIn:function(){b?d.signIn(this.data):f.error('run init first')},fastSignIn:function(){var t=this;d.on('confirm',function(e){var n=e.err;t.emit('fastSignIn',{err:n})}),d.confirm({info:this.data.info})},showPopup:function(t){b?t&&'length'in t?f.error('dom element required'):c.call(this,t):f.error('run init first')},hidePopup:function(){u.call(this)},})}),_DEF_('api/client.js',['js/util.js','js/event.js','js/cookie.js','js/consts.js'],function(t,e,n,i){var o=t.adapter,r=t.getSubdomain,a=e.eventable,s=n['default']?n['default']:n,c=i.midKey,u=i.m2Key,d=i.ascKey,l=i.asc2Key,f=o(),p=!1;function h(t){for(var e=1*new Date(),n=e*(e%1e3||2)+'',i=[],o=0;o<t.length;o++){var r=parseInt(t[o],16),a=parseInt(n[o%n.length]);i.push((r^a).toString(16))}var s=i.join('').toLowerCase(),c=((e+parseInt('01',16))%256).toString(16).toLowerCase();return s+'.01'+(c=1===c.length?'0'+c:c)+'.'+e}var g=(function(){var t=null,e=null;try{(t=window.wdextcmd.GetMid()),(e=window.wdextcmd.GetMidV2())}catch(n){try{(t=external.GetMID(external.GetSID(window)))||(p=!0)}catch(i){try{t=external.GetSpecialData(external.twGetSecurityID(window)).split(',')[3]}catch(o){}}}return{mid:t,m2:e}})(),m=g.mid,v=g.m2,y=(function(){var t=null;if(!p){try{t=external.GetASC(external.GetSID(window))}catch(e){}if(!t)try{t=window.wdextcmd.GetASC()}catch(n){}return t}s.remove(d,{domain:r()})})();return(m&&s.set(c,m),v&&s.set(u,v),m&&!y&&(y=h(m)),y&&s.set(d,y,{domain:r(),samesite:'None',secure:true}),(function(t){var e=null;try{(e=window.wdextcmd.GetASC2())&&t(e)}catch(n){}if(!e)try{external.AppCmd(external.GetSID(window),'','GetASC2','','',function(n,i){(e=i)&&t(e)})}catch(i){}})(function(t){s.set(l,t,{domain:r(),samesite:'None',secure:true})}),{default:(t=a({getData:function(){var t=this;/Win32/.test(window.navigator.platform)?(this.on('one_fail',function(){t._getData({port:51360,failKey:'two_fail'})}),this.on('two_fail',function(){var e=864e5;/Windows\s+NT\s+5/i.test(window.navigator.userAgent)&&(e*=3),s.set('_uc_silent',1,{expires:e}),m||y?t.emit('getData',{m2:v,mid:m,asc:y}):t.emit('fail')}),this._getData({port:54360,failKey:'one_fail'})):m||y?this.emit('getData',{m2:v,mid:m,asc:y}):this.emit('fail')},_getData:function(t){var e=this,n=t.port,i=t.failKey;f.jsonp({url:'https://local.info.g9hc4.cn:'+n+'/',callbackName:'uuidjsonpcb2020',timeout:500,success:function(t){m&&(t.mid=m),v&&(t.m2=v),y&&(t.asc=y),t.mid&&!t.asc&&(t.asc=h(t.mid)),(t.local=t.info?2:1),e.emit('getData',t)},fail:function(){e.emit(i)},})},})),})}),_DEF_('js/util.js',[],function(){function t(t,e){var n=new Error(e);return(n.errno=t),n}var e=document;var n=window.console||{log:function(){},error:function(){}};function i(t,e){(this.total=t),(this.count=0),(this.cb=e)}return((i.prototype.add=function(){this.count++,this.count==this.total&&this.cb()}),{Callback:i,strinify:function(t){var e=[];for(var n in t){var i=t[n];(i=encodeURIComponent(i)),e.push(encodeURIComponent(n)+'='+i)}return e.join('&')},console:n,adapter:function(){var n=null;window.QW?((W.prototype.append=W.prototype.appendChild),((n=window.W).isQW=!0),(n.getScript=function(t,e){var n=document.createElement('script');(n.onload=n.onreadystatechange=function(){e()}),(n.src=t),document.body.appendChild(n)})):window.jQuery?((n=window.jQuery).isQW=!1):(n={});var i=0;return((n.jsonp=function(n){var o=n.success,r=n.fail,a=n.url,s=n.data;void 0===s&&(s={});var c=n.timeout;void 0===c&&(c=5e3);var u=n.callbackKey;void 0===u&&(u='callback');var d=n.callbackName;void 0===d&&(d='jsonpCB_'+new Date().getTime()+i++);var l=e.createElement('script');if(((window[d]=function(n){window.clearTimeout(p),(p=null),(window[d]=function(){});try{e.body.removeChild(l)}catch(i){}'errno'in n&&0!=n.errno?r&&r(new t(101,n.errmsg)):o&&o(n)}),(a+=(-1===a.indexOf('?')?'?':'&')+u+'='+d+'&t='+new Date().getTime()),s))for(var f in s)a+='&'+window.encodeURIComponent(f)+'='+window.encodeURIComponent(s[f]);(l.src=a),e.body.appendChild(l);var p=window.setTimeout(function(){window[d]=function(){};try{e.body.removeChild(l)}catch(n){}r(new t(1,'timeout'))},c)}),n)},UCError:t,getSubdomain:function(){var t=(document.domain||'').split('.');return(t=t.slice(-2)).join('.')},})}),_DEF_('js/event.js',[],function(){var t={on:function(t,e){'string'==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)(this._event=this._event||{}),(this._event[t[n]]=this._event[t[n]]||[]),this._event[t[n]].push(e)},emit:function(t,e){(function(t,e){if(!this._event||!this._event[t])return;for(var n=0;n<this._event[t].length;n++)this._event[t][n].call(this,e)}).call(this,t,e)},};return{eventable:function(e){for(var n in t)t.hasOwnProperty(n)&&('function'==typeof e&&(e.prototype[n]=t[n]),'object'==typeof e&&(e[n]=t[n]));return e},}}),_DEF_('js/cookie.js',[],function(){function t(t){(t=t||{}),(this.path=t.path||'/'),(this.domain=t.domain||''),(this.expires=t.expires||31536e6),(this.samesite=t.samesite||''),(this.secure=t.secure||'')}return((t.prototype={set:function(t,e){var n=new Date();'number'==typeof this.expires&&n.setTime(n.getTime()+this.expires),(document.cookie=t+'='+encodeURIComponent(e)+';expires='+n.toGMTString()+';path='+this.path+(''==this.domain?'':'; domain='+this.domain)+(''==this.samesite?'':'; SameSite='+this.samesite)+(this.secure?'; secure':''))},get:function(t){var e,n=new RegExp('(^| )'+t+'=([^;]*)(;|$)');return(e=document.cookie.match(n))?decodeURIComponent(e[2]):''},has:function(t){return''!==this.get(t)},remove:function(t){var e=this.expires;(this.expires=-31536e6),this.set(t,''),(this.expires=e)},}),(t.set=function(e,n,i){new t(i).set(e,n)}),(t.get=function(e,n){return new t(n).get(e)}),(t.remove=function(e,n){new t(n).remove(e)}),(t.has=function(e){return new t().has(e)}),{default:t})}),_DEF_('js/consts.js',[],function(){return{midKey:'_uc_mid',m2Key:'_uc_m2',ascKey:'__asc',asc2Key:'__asc2',}}),_DEF_('pages/index/ui.js',['js/util.js'],function(t){var e=(0,t.adapter)(),n='._uc_{font-size:16px;line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;-webkit-font-smoothing:antialiased;text-size-adjust:100%;width:240px;height:219px}._uc_ *{margin:0;padding:0;box-sizing:content-box}._uc_ a{text-decoration:none}._uc_ b{font-weight:400}._uc_ button{background:0 0;border:none;outline:0;cursor:pointer}._uc_ ul{list-style:none}._uc_ li{list-style:none;list-style-type:none}._uc_ img{border:none;outline:0}._uc_ em{font-style:normal}._uc_ table{border-collapse:collapse}._uc_ .btn{width:118px;height:44px;text-align:center;font-size:14px;line-height:44px;color:#fff;background:#00a84d;outline:0;cursor:pointer}._uc_ .btn:hover{opacity:.7}._uc_ .box{width:100%;height:100%}._uc_ .box-head{height:60px;line-height:60px;text-align:center;width:100%;color:#fff;font-size:12px;background-color:#00a84d;border-radius:4px;border-bottom-left-radius:0;border-bottom-right-radius:0}._uc_ .box-body{padding:15px 30px;background:#fff;border:1px solid #eee;box-shadow:0 2px 8px 0 rgba(26,0,0,.1);border-bottom-left-radius:4px;border-bottom-right-radius:4px}._uc_ .box-info{width:165px;height:30px;padding:5px 7px;border:1px solid #d5d9e6}._uc_ .box-info .img{width:30px;height:30px;border-radius:30px;vertical-align:top}._uc_ .box-info .nickname{color:#1d202c;width:120px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14pxc;margin-left:10px;line-height:30px}._uc_ .box-confirm{width:180px;height:44px;line-height:44px;text-align:center;background-color:#00a84d;color:#fff;display:block;margin:0 auto;cursor:pointer;font-weight:700}._uc_ .bottomtxt{font-size:12px;color:#00a84d;text-align:center;margin-top:10px}._uc_ .bottomtxt span{display:inline-block;cursor:pointer}._uc_ .wave{position:absolute;height:60px;width:100%;left:0;top:6px;z-index:901}',i='<div class=_uc_><div class=box><img src=https://p4.ssl.qhimg.com/t01b22fad76baf78c37.png class=wave><p></p><div class=box-head>检测到您已在安全卫士登录以下账号</div><div class=box-body><div class=box-info><img src={{imgUrl}} class=img><span class=nickname>{{userName}}</span></div><p style="text-align: center;margin-top:10px;"><button class="btn box-confirm js-confirm">立即同步</button></p><div class="bottomtxt js-other"><span>使用其他账号登录</span></div></div></div></div>',o=null;function r(t){var e=t.primaryColor;if(!r.inited){(r.inited=!0),e&&(n=n.replace(/#00A84D/gi,e));var i=document.getElementsByTagName('head')[0],o=document.createElement('style');'styleSheet'in o?(o.setAttribute('type','text/css'),(o.styleSheet.cssText=n)):(o.innerHTML=n),i.appendChild(o)}}return{showPopup:function a(t){var n=this;a.inited?o.show():(r(this.data),(i=i.replace(/\{\{([^}]+)\}\}/g,function(t,e){return n.userInfo[e]})),(o=e(i)).find('.js-confirm').click(function(){o.hide(),n.fastSignIn()}),o.find('.js-other').click(function(){o.hide(),n.emit('other')}),t?e(t).append(o):e('body').append(o)),(a.inited=!0)},hidePopup:function(){o.hide()},initCss:r,initCommon:function(){},initSpecial:function(){},}}),_DEF_('api/server.js',['js/cookie.js','js/util.js','js/event.js'],function(t,e,n){var i=t['default']?t['default']:t,o=e.adapter,r=e.strinify,a=e.Callback,s=n.eventable,c='//login.360.cn',u=o(),d=['https://login.360.cn','https://login.360pay.cn','https://login.so.com','https://login.qiku.com','https://login.360shouji.com','https://login.360.com','https://login.360kuai.com',];return{default:(t=s({checkLogin:function(){var t=this;if(i.has('Q')){var e={o:'sso',m:'info'};u.jsonp({url:c,data:e,success:function(e){e.qid?t.emit('checkLogin',!0):t.emit('checkLogin',!1)},fail:function(){t.emit('checkLogin',!1)},})}else this.emit('checkLogin',!1)},getData:function(t){var e=this;(t.o='sso'),(t.m='midLogin'),u.jsonp({url:c,data:t,success:function(t){e.emit('getData',t)},fail:function(t){e.emit('getData',{err:t})},})},confirm:function(t){var e=this;(t.o='sso'),(t.m='midLoginByQid'),u.jsonp({url:c,data:t,success:function(t){e.setLoginCookie(t.rd,function(t){e.emit('confirm',{err:t})})},fail:function(t){e.emit('confirm',{err:t})},})},signIn:function(t){var e={src:t.src,destUrl:window.location.href,client:'web',};window.location.href='https://i.360.cn/login?'+r(e)},signOut:function(){var t=this;this.clearLoginCookie(function(e){t.emit('signOut',{err:e})})},setLoginCookie:function(t,e){for(var n=new a(d.length,e),i=0;i<d.length;i++)u.jsonp({url:d[i],data:{o:'sso',m:'setcookie',s:t},success:function(){n.add()},callbackKey:'func',fail:function(t){e(t)},})},clearLoginCookie:function(t){for(var e=new a(d.length,t),n=0;n<d.length;n++)u.jsonp({url:d[n],data:{o:'sso',m:'logout'},callbackKey:'func',success:function(){e.add()},fail:function(e){t(e)},})},})),}});