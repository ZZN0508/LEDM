/*Built by pcw player group @11/1/2023, 3:07:09 PM */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.QiyiPlayerLoader=t()}("undefined"!=typeof self?self:this,function(){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function e(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function d(t,a,s,c){return new(s=s||Promise)(function(e,n){function o(e){try{r(c.next(e))}catch(t){n(t)}}function i(e){try{r(c["throw"](e))}catch(t){n(t)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(o,i)}r((c=c.apply(t,a||[])).next())})}function E(n,o){var i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},r,a,s,e,e={next:t(0),"throw":t(1),"return":t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return c([t,e])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(s=2&e[0]?a["return"]:e[0]?a["throw"]||((s=a["return"])&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return i.label++,{value:e[1],done:!1};case 5:i.label++,a=e[1],e=[0];continue;case 7:e=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){i=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){i.label=e[1];break}if(6===e[0]&&i.label<s[1]){i.label=s[1],s=e;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(e);break}s[2]&&i.ops.pop(),i.trys.pop();continue}e=o.call(n,i)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}var s="5.2.73",t=Object.prototype,n,i=Function.prototype.toString.call(Object),a=t.hasOwnProperty;function r(){}function m(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()}function A(n,e,o,i){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function t(e,t){var n;for(n in e)if(r(e,n)&&t(e[n],n))break}return e&&t(e,function(e,t){!o&&r(n,t)||(i&&"string"!=typeof e&&"boolean"!=typeof e?(n[t]||(n[t]={}),A(n[t],e,o,i)):n[t]=e)}),n}var c,l="QP005",p="QP006",u="QP007",f="QP008",y="QP009",h="QP0010",g="QP0013",_="QP0014",v="QP0017",w="QP0018",P="QP0023",S="QP0025",T="QP0027",b="QP0030",k="QP0031",R="QP0033",I="QP0034",L="QP0035",Y="QP0036",C="QP0037",N="QP0038",F={},Q={get:function(e,t){var n=(t=A({memory:!1,rawStr:null},t,!0)).memory,o=t.rawStr,i="",t,r,t;return n&&a.call(F,e)?i=F[e]:(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)&&(t=document.cookie,(t=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(t))&&(i=t[2]||"")),"string"==typeof i&&(i=decodeURIComponent(i)),n&&(F[e]=i)),i},set:function(e,t,n){var o=(n=n||{}).expires,i=n.path,r=n.domain,a=n.response;t=encodeURIComponent(t);var s=o;"number"==typeof n.expires&&(s=o<=0?new Date(0):new Date).setTime(s.getTime()+o),delete F[e],document.cookie=e+"="+t+(i?"; path="+i:"")+(o?"; expires="+s.toUTCString():"")+(r?"; domain="+r:"")},remove:function(e,t){(t=t||{}).expires=-1;var n=t.response;this.set(e,"",t)}},O=function(e,t){return e<<t|e>>>32-t},D=function(e,t){var n,o,i,r,t,i=2147483648&e,r=2147483648&t,n=1073741824&e,o=1073741824&t,t=(1073741823&e)+(1073741823&t);return n&o?2147483648^t^i^r:n|o?1073741824&t?3221225472^t^i^r:1073741824^t^i^r:t^i^r},x=function(e,t,n){return e&t|~e&n},V=function(e,t,n){return e&n|t&~n},q=function(e,t,n){return e^t^n},U=function(e,t,n){return t^(e|~n)},B=function(e,t,n,o,i,r,a){return e=D(e,D(D(x(t,n,o),i),a)),D(O(e,r),t)},M=function(e,t,n,o,i,r,a){return e=D(e,D(D(V(t,n,o),i),a)),D(O(e,r),t)},H=function(e,t,n,o,i,r,a){return e=D(e,D(D(t^n^o,i),a)),D(O(e,r),t)},G=function(e,t,n,o,i,r,a){return e=D(e,D(D(n^(t|~o),i),a)),D(O(e,r),t)},j=function(e){for(var t,n=e.length,o=n+8,i,o=16*(1+(o-o%64)/64),r=Array(o-1),a=0,s=0;s<n;)a=s%4*8,r[t=(s-s%4)/4]=r[t]|e.charCodeAt(s)<<a,s++;return r[t=(s-s%4)/4]=r[t]|128<<(a=s%4*8),r[o-2]=n<<3,r[o-1]=n>>>29,r},W=function(e){for(var t="",n="",o,i,i=0;i<=3;i++)t+=(n="0"+(o=e>>>8*i&255).toString(16)).substr(n.length-2,2);return t},K=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t};function J(e){e+="";var t=Array(),n,o,i,r,a,s,c,d,l,p=7,u=12,f=17,y=22,h=5,g=9,_=14,m=20,v=4,w=11,P=16,E=23,A=6,S=10,T=15,b=21,k;for(e=K(e),t=j(e),s=1732584193,c=4023233417,d=2562383102,l=271733878,n=0;n<t.length;n+=16)s=B(o=s,i=c,r=d,a=l,t[n+0],7,3614090360),l=B(l,s,c,d,t[n+1],12,3905402710),d=B(d,l,s,c,t[n+2],17,606105819),c=B(c,d,l,s,t[n+3],22,3250441966),s=B(s,c,d,l,t[n+4],7,4118548399),l=B(l,s,c,d,t[n+5],12,1200080426),d=B(d,l,s,c,t[n+6],17,2821735955),c=B(c,d,l,s,t[n+7],22,4249261313),s=B(s,c,d,l,t[n+8],7,1770035416),l=B(l,s,c,d,t[n+9],12,2336552879),d=B(d,l,s,c,t[n+10],17,4294925233),c=B(c,d,l,s,t[n+11],22,2304563134),s=B(s,c,d,l,t[n+12],7,1804603682),l=B(l,s,c,d,t[n+13],12,4254626195),d=B(d,l,s,c,t[n+14],17,2792965006),c=B(c,d,l,s,t[n+15],22,1236535329),s=M(s,c,d,l,t[n+1],5,4129170786),l=M(l,s,c,d,t[n+6],9,3225465664),d=M(d,l,s,c,t[n+11],14,643717713),c=M(c,d,l,s,t[n+0],20,3921069994),s=M(s,c,d,l,t[n+5],5,3593408605),l=M(l,s,c,d,t[n+10],9,38016083),d=M(d,l,s,c,t[n+15],14,3634488961),c=M(c,d,l,s,t[n+4],20,3889429448),s=M(s,c,d,l,t[n+9],5,568446438),l=M(l,s,c,d,t[n+14],9,3275163606),d=M(d,l,s,c,t[n+3],14,4107603335),c=M(c,d,l,s,t[n+8],20,1163531501),s=M(s,c,d,l,t[n+13],5,2850285829),l=M(l,s,c,d,t[n+2],9,4243563512),d=M(d,l,s,c,t[n+7],14,1735328473),c=M(c,d,l,s,t[n+12],20,2368359562),s=H(s,c,d,l,t[n+5],4,4294588738),l=H(l,s,c,d,t[n+8],11,2272392833),d=H(d,l,s,c,t[n+11],16,1839030562),c=H(c,d,l,s,t[n+14],23,4259657740),s=H(s,c,d,l,t[n+1],4,2763975236),l=H(l,s,c,d,t[n+4],11,1272893353),d=H(d,l,s,c,t[n+7],16,4139469664),c=H(c,d,l,s,t[n+10],23,3200236656),s=H(s,c,d,l,t[n+13],4,681279174),l=H(l,s,c,d,t[n+0],11,3936430074),d=H(d,l,s,c,t[n+3],16,3572445317),c=H(c,d,l,s,t[n+6],23,76029189),s=H(s,c,d,l,t[n+9],4,3654602809),l=H(l,s,c,d,t[n+12],11,3873151461),d=H(d,l,s,c,t[n+15],16,530742520),c=H(c,d,l,s,t[n+2],23,3299628645),s=G(s,c,d,l,t[n+0],6,4096336452),l=G(l,s,c,d,t[n+7],10,1126891415),d=G(d,l,s,c,t[n+14],15,2878612391),c=G(c,d,l,s,t[n+5],21,4237533241),s=G(s,c,d,l,t[n+12],6,1700485571),l=G(l,s,c,d,t[n+3],10,2399980690),d=G(d,l,s,c,t[n+10],15,4293915773),c=G(c,d,l,s,t[n+1],21,2240044497),s=G(s,c,d,l,t[n+8],6,1873313359),l=G(l,s,c,d,t[n+15],10,4264355552),d=G(d,l,s,c,t[n+6],15,2734768916),c=G(c,d,l,s,t[n+13],21,1309151649),s=G(s,c,d,l,t[n+4],6,4149444226),l=G(l,s,c,d,t[n+11],10,3174756917),d=G(d,l,s,c,t[n+2],15,718787259),c=G(c,d,l,s,t[n+9],21,3951481745),s=D(s,o),c=D(c,i),d=D(d,r),l=D(l,a);return(W(s)+W(c)+W(d)+W(l)).toLowerCase()}var z,X="01010031010000000000",$="01010031010010000000",Z="01080031010000000000",ee="01080031010010000000",te="03020031010000000000",ne="03020031010010000000",oe="03030031010000000000",ie="03030031010010000000",re="02020031010000000000",ae="02020031010000000000",se="02030031010000000000",ce="02020031010010000000";function de(e,t,n){var o="",i={},r={},a="",s=t.toLowerCase();r.userAgent=s;var c="",c=n&&n.effectiveType?n.effectiveType:(c=s.match(/NetType\/\w+/)?s.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/",""),d=s.match(/rtrident/),l=!d&&s.match(/(ipad).*os\s([\d_]+)/),p=!d&&!l&&s.match(/(iphone\sos)\s([\d_]+)/),t=s.match(/Android\s+([\d.]+)/i),n=s.match(/(?:redmi|hm) ([\w ]+) build/i),u=s.match(/iqiyireader iqiyireaderversion\/([\d.]+)/i),f=s.match(/iqiyiversion_reader\/([\d.]+)/i),d,d,y,h;r.IE11=/rv\:11/.test(s),r.IE=/msie/.test(s)||r.IE11,r.IE6=/msie 6/.test(s),r.IE7=/msie 7/.test(s),r.IE8=/msie 8/.test(s),r.IE9=/msie 9/.test(s),r.IE10=/msie 10/.test(s),r.EDGE=/edge/.test(s)||/edg/.test(s),r.PWA=/\(Edge Side Panel\)/.test(s),r.UWP=/UWP/.test(s),r.iPhone=/iphone os/.test(s)&&!d,r.iPhone4=/iphone os [45]_/.test(s)&&!d,r.iPad=/ipad/.test(s)&&!d,r.iPod=/iPod/i.test(s)&&!d,r.isTouch="undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),r.CHROMEIOS=/crios/.test(s),r.CHROME=/chrome/.test(s)&&!r.EDGE,r.SAFARI=/safari/.test(s)&&!/chrome/.test(s),r.FIREFOX=/firefox/.test(s),r.mobile=/mobile/gi.test(s),r.mobileSafari=r.iPhone||r.iPhone||r.iPad,r.WECHAT=/(wechat)|(micromessenger)/gi.test(s),r.SmartTV=/SMART-TV/gi.test(s),r.BAIDU=/baidubrowser/gi.test(s),r.BAIDU_BOX=/baiduboxapp/gi.test(s),r.HUAWEI=/huaweibrowser/gi.test(s),r.VIVO=/vivobrowser/gi.test(s),r.MIUI=/miuibrowser/gi.test(s),r.MIUI_VIDEO=/miuivideo/gi.test(s),r.CHROME&&((d=/chrome\/([\d\.]+) /gi.exec(s)[1])?(r.version=parseInt(d,10),1<(d=d.split(".")).length&&(r.minorVersion=parseInt(d[1],10)),2<d.length&&(r.buildVersion=parseInt(d[2],10))):r.version=0),r.EDGE&&(y=/edge\/([\d\.]+)/gi.exec(s)||/edg\/([\d\.]+)/gi.exec(s),r.version=y?parseInt(y[1],10):0),r.SAFARI&&(h=/version\/([\d.]+).*safari/gi.exec(s),r.version=h?parseInt(h[1],10):0),n&&(r.redmi=n);var y=/(macintosh|macintel|macppc|mac68k|macos)/i.test(s),h=/X11/.test(s)&&!y,n=/win/i.test(s)&&!h,h=/android/.test(s);i.win=n,i.mac=y,i.android=h,i.androidMobile=h&&r.mobile,i.androidTablet=h&&(!r.mobile||/pad/i.test(s)),t&&(i.version=t[1]),i.ios=!1,p&&(i.ios=!0,i.version=p[2].replace(/_/g,".")),l&&(i.ios=!0,i.version=l[2].replace(/_/g,".")),r.iPod&&(i.ios=!0),o=r.iPad?"b85da1cf3ae44351":"b6c13e26323c537d",i.isMobileTerminal=i.ios||i.android,i.android&&(r.QQ=/\sQQ/gi.test(s)&&/mqqbrowser/gi.test(s),r.QQBROWSER=!/\sQQ/g.test(s)&&/mqqbrowser/gi.test(s)),i.ios&&(r.QQ=/\sQQ/gi.test(s)&&!/mqqbrowser/gi.test(s),r.QQBROWSER=!/\sQQ/gi.test(s)&&/mqqbrowser/gi.test(s));var g=function(){var e="",e;return e=r.iPad?oe:i.mac?Z:i.androidTablet?te:i.ios?se:i.androidMobile?ae:X},t=function(){return a||g()},p=function(e){a=e},l=function(){var e="";return r.CHROME?e="CHROME":r.SAFARI?e="SAFARI":r.FIREFOX?e="FIREFOX":r.QQ?e="QQ":r.WECHAT?e="WECHAT":r.IE?e="IE":r.IE6?e="IE6":r.IE7?e="IE7":r.IE8?e="IE8":r.IE9?e="IE9":r.IE10?e="IE10":r.EDGE?e="EDGE":r.mobileSafari?e="mobileSafari":i.ios||i.ios?e="ios":i.androidMobile?e="androidMobile":i.androidTablet&&(e="androidTablet"),e},s="m3u8",_;return/__pmode__=m3u8/.test(e)?s="m3u8":/__pmode__=mp4/.test(e)&&(s="mp4"),{browser:r,os:i,code:o,getPtid:t,setPtid:p,browserName:l,network:c,playerMode:s,touchEventName:function(e){return e?r.SAFARI&&i.ios||i.android?{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e]:e:"";var t}}}var le=de("undefined"==typeof window?"":window.location.href,"undefined"==typeof navigator?"":navigator.userAgent,"undefined"==typeof navigator?"":navigator.connection),pe="undefined"!=typeof window&&!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration),ue=function(e){var t="",n="",o="",i="",r,e=e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/);return e&&(t=e[1],n=e[2],o=e[3],i=e[4]),{protocol:t,host:n,port:o,path:i}},fe,ye,he,ge={parse:ue,query:function(e,t){1===arguments.length&&(t=e,e=window.location.href);var t=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),t=new RegExp("(^|&|\\?|#)"+t+"=([^&#]*)(&|$|#)",""),e=e.match(t);return e?e[2]:""},query2Json:function(e){for(var t,n=e.substr(e.lastIndexOf("?")+1).split("&"),o=n.length,i={},r=0,a,s,c,s;r<o;r++)n[r]&&(a=(s=n[r].split("=")).shift(),s=s.join("="),void 0===(c=i[a])&&(i[a]=s));return i},filename:function(e,t){var n="",e,n,o;return(n=(t=void 0===t?!1:t)?e:(e=ue(e))&&e.path||"").replace(/^.*[\\\/]/,"").split(".")[0]}},_e=Object.create||qe,me=Object.keys||Ue,ve=Function.prototype.bind||Be,we=50,Pe=(Ae.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Oe.call(e,t)},Ae.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Ae.prototype.getMaxListeners=function(){return Te(this)},Ae.prototype.emit=function(e){var t,n,o,i,r,a,s="error"===e,a=this._events;if(a)s=s&&null==a.error;else if(!s)return!1;if(s){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;var s=new Error('Unhandled "error" event. ('+t+")");throw s.context=t,s}if(!(n=a[e]))return!1;var c="function"==typeof n,o;switch(o=arguments.length){case 1:be(n,c,this);break;case 2:ke(n,c,this,arguments[1]);break;case 3:Re(n,c,this,arguments[1],arguments[2]);break;case 4:Ie(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(o-1),r=1;r<o;r++)i[r-1]=arguments[r];Le(n,c,this,i)}return!0},Ae.prototype.on=function(e,t,n){return Ye(this,e,t,n="object"!=typeof(n=void 0===n?{highPriority:!1}:n)?{}:n)},Ae.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Fe(this,e,t)),this},Ae.prototype.off=function(e,t){return Ce.call(this,e,t)},Ae.prototype.un=function(e,t){this.off(e,t)},Ae.prototype.removeAllListeners=function(e){var t,n,o,n=this._events;if(!n)return this;if(!n.off)return 0===arguments.length?(this._events=_e(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=_e(null):delete n[e]),this;if(0===arguments.length){for(var i=me(n),r,o=0;o<i.length;++o)"off"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("off"),this._events=_e(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(o=t.length-1;0<=o;o--)this.off(e,t[o]);return this},Ae.prototype.listeners=function(e){return Qe(this,e,!0)},Ae.prototype.rawListeners=function(e){return Qe(this,e,!1)},Ae.prototype.listenerCount=function(){return Ae.listenerCount.apply(this,arguments)},Ae),Ee;function Ae(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=_e(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}try{var Se={};Object.defineProperty&&Object.defineProperty(Se,"x",{value:0}),Ee=0===Se.x}catch(ei){Ee=!1}function Te(e){return e._maxListeners===undefined?Pe.defaultMaxListeners:e._maxListeners}function be(e,t,n){if(t)e.call(n);else for(var o=e.length,i=xe(e,o),r=0;r<o;++r)try{i[r].call(n)}catch(a){}}function ke(e,t,n,o){if(t)e.call(n,o);else for(var i=e.length,r=xe(e,i),a=0;a<i;++a)try{r[a].call(n,o)}catch(s){}}function Re(e,t,n,o,i){if(t)e.call(n,o,i);else for(var r=e.length,a=xe(e,r),s=0;s<r;++s)try{a[s].call(n,o,i)}catch(c){}}function Ie(e,t,n,o,i,r){if(t)e.call(n,o,i,r);else for(var a=e.length,s=xe(e,a),c=0;c<a;++c)try{s[c].call(n,o,i,r)}catch(d){}}function Le(e,t,n,o){if(t)e.apply(n,o);else for(var i=e.length,r=xe(e,i),a=0;a<i;++a)try{r[a].apply(n,o)}catch(s){}}function Ye(e,t,n,o){var i,o,r,a,i=!!(o=void 0===o?{}:o).highPriority,i,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),r=o[t]):(o=e._events=_e(null),e._eventsCount=0),r?("function"==typeof r?r=o[t]=[r,n]:i?r.shift(n):r.push(n),r.warned||(i=Te(e))&&0<i&&r.length>i&&(r.warned=!0,(i=new Error("Possible Dispatcher memory leak detected. "+r.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=r.length)):(r=o[t]=n,++e._eventsCount),e}function Ce(e,t){var n,o,i,r,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=_e(null):(delete o[e],o.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;0<=r;r--)if(n[r]===t||n[r].listener===t){a=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():De(n,i),1===n.length&&(o[e]=n[0]),o.off&&this.emit("off",e,a||t)}return this}function Ne(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function Fe(e,t,n){var e={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},t=ve.call(Ne,e);return t.listener=n,e.wrapFn=t}function Qe(e,t,n){var e=e._events;if(!e)return[];var e=e[t];return e?"function"==typeof e?n?[e.listener||e]:[e]:n?Ve(e):xe(e,e.length):[]}function Oe(e){var t=this._events;if(t){var t=t[e];if("function"==typeof t)return 1;if(t)return t.length}return 0}function De(e,t){for(var n=t,o=n+1,i=e.length;o<i;n+=1,o+=1)e[n]=e[o];e.pop()}function xe(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function Ve(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function qe(e){var t=function(){};return t.prototype=e,new t}function Ue(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t);return t}function Be(e){var t=this;return function(){return t.apply(e,arguments)}}function Me(e,t,n){try{return JSON.stringify(e,t,n)}catch(o){}return""}function He(e,t){try{return JSON.parse(e,t)}catch(n){}return{}}Ee?Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return we},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');we=e}}):Pe.defaultMaxListeners=we;var Ge={stringify:Me,parse:He},je=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];function We(e){var t={},n,o,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),n=e.substr(0,o).trim().toLowerCase(),o=e.substr(o+1).trim(),n&&(t[n]&&0<=je.indexOf(n)||(t[n]="set-cookie"===n?(t[n]||[]).concat([o]):t[n]?t[n]+", "+o:o))}),t}var Ke={},Je={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},ze={"*":null,text:null,html:null,xml:null,json:function(e){return Ge.parse(e)}},Xe={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:r,success:r,failure:r};function $e(e){var t=[];if("object"==typeof e)for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")}function Ze(y){A(y=y||{},Xe);var o=y.url,h=y.dataType,i=y.params||{},g=y.success,_=y.failure,e;function r(e){var o=e.url,t=e.method,i=e.headers,n=e.body,r=e.withCredentials,e=e.timeout,a="",s=!1,c=new XMLHttpRequest,d={url:o,request:c,response:null,message:""},l;if(c.withCredentials=r,c.onreadystatechange=u,c.ontimeout=f,c.open(t,o,!0),c.timeout=e,c.setRequestHeader("Accept",Je[h]),m(i))for(var p in i){null!==i[p]&&c.setRequestHeader(p,i[p])}function u(){var e;if(a+=", readyState = "+c.readyState,4==c.readyState)if(e=ze[h]?ze[h](c.responseText):c.responseText,a+=", status = "+c.status+", statusText = "+c.statusText,200==c.status){if("json"===h&&"string"==typeof e)try{e=JSON.parse(e)}catch(n){return d.message="JsonOperateError: "+n.message+", "+o,d.response={status:c.status,headers:i,data:e},void _(d.message,d)}g(e,{status:c.status,headers:We(c.getAllResponseHeaders()),data:e})}else if(!s){s=!0;var t="";try{t=JSON.stringify(e)}catch(n){t="JsonOperateError: "+n.message+", "+o}a+=", data = "+t+"url = "+o,d.message="xhr error, time = "+y.timeout+a,d.response={status:c.status,headers:i,data:e},_(d.message,d,c.status)}}function f(e){var e;s||(s=!0,e="xhr timeout, time = "+y.timeout+", readyState = "+c.readyState+", status = "+c.status+", data = "+Ge.stringify(e)+"url = "+o,d.message=e,d.response=null,_(d.message,d))}c.send(n)}o&&function e(){d(this,void 0,void 0,function(){var t,n;return E(this,function(e){switch(e.label){case 0:return t=$e(i),(n={method:y.method,headers:y.headers,body:y.data||null,withCredentials:y.withCredentials,timeout:y.timeout,params:i}).url=o+(0<t.length?(/\?/i.test(o)?"&":"?")+t:""),"function"!=typeof y.beforeSend?[3,2]:[4,y.beforeSend(n)];case 1:n=e.sent(),e.label=2;case 2:return r(n),[2]}})})}()}function et(e){A(e=e||{},Xe),e.dataType="json",Ze(e)}function tt(P){return d(this,void 0,void 0,function(){var i,t,n,o,r,a,s,c,d,l,p,u,f,y,h,n,g,_,u,m,v,w,w;return E(this,function(e){switch(e.label){case 0:if(A(P=P||{},Xe),i=P.url,t=P.params||{},n=$e(t),o=i+(0<n.length?(/\?/i.test(i)?"&":"?")+n:""),r=document,a=P.complete,s=P.success,c=P.failure,d=(P.callbackhead||"Q")+J(P.fixedCallback||o),l=!!P.memory,p=J(o),u=Ke[p],!o)return[2];if(l&&u&&s)return s(u),[2];if(f=function(e,t,n){void 0===n&&(n=""),y();var o={url:i,request:null,response:{status:-1,headers:{},data:t},message:n};switch(e){case 1:l&&(Ke[p]=t),s(t);break;case 0:c(o.message,o)}a(t)},y=function(){if(window[d]){window[d]=undefined;try{delete window[d]}catch(e){}}},window[d]=function(e){y(),setTimeout(function(){f(1,e)},0)},n={},(g=r.createElement("script"))["async"]=!0,g.type="text/javascript",g.charset=P.charset,_=function(){if(g)try{g.onload(null,!0)}catch(e){}},g.abort=_,g.onload=g.onreadystatechange=function(e,t){!t&&g.readyState&&!/loaded|complete/.test(g.readyState)||(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),g=null,clearTimeout(h))},g.onerror=function(e){f(0,null,e?e.stack||e.message:"script onerror, message is null"),_()},h=setTimeout(function(){f(0,null,"script load timeout"),_()},P.timeout),(u={})[P.jsonpCallback]=d,A(t,u,!0),P.isSort&&1==P.isSort){for(w in m=[],v="",P.params)m.push(w+"="+P.params[w]);for(m.sort(),w=0;w<m.length;w++)w===m.length-1?v+=m[w]:v+=m[w]+"&";n.url=i+(/\?/i.test(i)?"&":"?")+v}else n.url=o+(/\?/i.test(o)?"&":"?")+$e(u);return n.params=t,"function"!=typeof P.beforeSend?[3,2]:[4,P.beforeSend(n)];case 1:n=e.sent()||n,e.label=2;case 2:return g.src=n.url,r.getElementsByTagName("head")[0].appendChild(g),[2,g]}})})}function nt(e,t,n){if(void 0===n&&(n={}),"string"==typeof t){var n=A({cache:!1},n,!0);if(e){var o=[],i;for(i in!1===n.cache&&(e._=+new Date),e)o.push(i+"="+encodeURIComponent(e[i]));var t=t+(/\?/.test(t)?"&":"?")+o.join("&"),r=new Image;r.onload=r.onerror=r.onabort=function(){r.onload=r.onerror=r.onabort=null,r=null},r.src=t}}}var ot={serializeParam:$e,request:Ze,json:et,jsonp:tt,beacon:nt},it=null,rt=[],at=!1,st=null,ct=(e(lt,dt=Pe),lt.vipTypesCallback=function(e){for(var t=0;t<rt.length;t++)rt[t](e);rt=[]},lt.getVipTypes=function(){return it},lt.setVipTypes=function(e,t){it=e,(t=void 0===t?{}:t).writeCookie&&Q.set(g,e,{expires:1296e6,path:"/",domain:"iqiyi.com",response:t.serverCtx?t.serverCtx.response:null})},lt.setVipLv=function(e,t){st=e,(t=void 0===t?{}:t).writeCookie&&Q.set(_,e,{expires:1296e6,path:"/",domain:"iqiyi.com",response:t.serverCtx?t.serverCtx.response:null})},lt.setIsVip=function(e){at=e},lt.prototype.isLogin=function(){var e=this.serverCtx;return""!==this.getUid(e)},lt.prototype.getUid=function(){var e=this.serverCtx,t={},n=Q.get("P00003",{rawStr:e?e.cookie:null}),e;return null!==n&&""!==n?t.uid=n:null!==(e=Q.get("QC179",{rawStr:e?e.cookie:null}))&&""!==e&&(e=JSON.parse(e),t.uid=e.uid),"undefined"!=t.uid&&"null"!=t.uid&&t.uid||""},lt.prototype.passportCookie=function(){var e=this.serverCtx;return Q.get("P00001",{rawStr:e?e.cookie:null})||""},lt.prototype.isVip=function(t){var e=this;function n(e){var e=e.join(",");return"0"!==e&&""!==e}if(!t)return new Promise(function(t){e.getVipTypes(function(e){return t(n(e))})});this.getVipTypes(function(e){return t(n(e),e)})},lt.prototype.getVipTypes=function(e){if(e){var t=this.serverCtx,t;if(this.isLogin()||this.clearVipTypes(),rt.push(e),it||(t=(it=Q.get(g,{rawStr:t?t.cookie:null})).match(/[0-9]/g)||[],it&&t.length!=it.replace(/,/g,"").length&&(it="")),!it)return 1;this.vipTypes=it.split(","),this.vipLv=st||"",this.__isVip=at,lt.vipTypesCallback(this.vipTypes)}},lt.prototype.clearVipTypes=function(){var e=this.serverCtx;Q.remove(g,{path:"/",domain:"iqiyi.com",response:e?e.response:null}),it=null},lt),dt;function lt(e){var t=dt.call(this)||this;return t.serverCtx=e,t.vipTypes=[],t.vipLv="",t.__isVip=!1,t}var pt="QC005_NATIVE",ut="QC005",ft="//statics-web.iqiyi.com/common/jssdk/iqiyiJsBridge-v2-min.js",yt=undefined,ht="",gt="undefined"!=typeof window&&window.webEventID||"",_t="",mt=function(){gt="undefined"!=typeof window&&window.webEventID||""},vt=function(){return J(Math.random()+"_"+Math.random())},wt=function(e,t,n,o){Q.set(e,t,{expires:n||31536e6,path:"/",domain:o=void 0===o?"iqiyi.com":o})},Pt=function(e){var t="QC006",e=Q.get(t,e=void 0===e?{}:e);return e||("undefined"!=typeof window&&(window.QiyiPlayerIsNewUser=!0),e=vt(),wt(t,e)),e},Et=function(n){return void 0===n&&(n="http://127.0.0.1:16422/get_client_ver"),new Promise(function(t){var e={ver:"5.2.15.2240",t:(new Date).getTime()||""};ot.jsonp({url:n,method:"GET",timeout:1e3,memory:!0,params:e,success:function(e){e&&"A00000"===e.code?(window.sessionStorage&&sessionStorage.setItem("clientVer",JSON.stringify(e)),t(e.data)):t(!1)},failure:function(e){t(!1)}})})},At=function(n){window.iqiyi&&window.iqiyi.nativeCallback?window.iqiyi.nativeCallback("Device","getQiyiId",null,function o(e,t){!t&&e?e&&e.qiyiId&&n(e):n(null)}):n(null)};function St(t,n){"object"!=typeof t&&(t=[t]);var o=document.getElementsByTagName("head").item(0)||document.documentElement,i=[],r=t.length-1,a=function(e){i[e]=document.createElement("script"),i[e].setAttribute("type","text/javascript"),i[e].onload=i[e].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),e!=r?a(e+1):"function"==typeof n&&n(!0))},i[e].onerror=i[e].onstalled=function(){"function"==typeof n&&n(!1)},i[e].setAttribute("src",t[e]),o.appendChild(i[e])};a(0)}var Tt=function(e){window.iqiyi?At(e):St(ft,function(){At(e)})},bt,kt,Rt,It=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Lt=function(){var e,t=/^\d{10}\.\d{10}\.\d{10}\.\d+$/,n=function(){return parseInt(new Date/1e3,10).toString()},n,e;return e=Q.get("QC008"),Q.get("QC010")&&e||(t.test(e)?((e=e.split("."))[1]=e[2],e[2]=n(),e[3]=parseInt(e[3],10)+1):e=[n=n(),n,n,"1"],e.join(".")),e},Yt=Pt,Ct=function(e){void 0===e&&(e={});try{var t,n=Q.get(ut,e);return n||(n=vt(),wt(ut,n,283824e7)),n}catch(o){}},Nt=function(){return gt=gt||(window.webEventID||J(Pt()+"weid"+ +new Date))},Ft=function(){var e="";return ht||(e=Pt(),ht=J(e+"veid"+ +new Date)),ht},Qt=function(e){var t=!1,e,n;return(e=void 0===e?!1:e)||yt===undefined&&(e=b,1===parseInt(Q.get(e),10)?yt=!1:(yt=!0,wt(e,1,283824e7))),"undefined"!=typeof window&&(window.QiyiPlayerIsNewUser===undefined&&(window.QiyiPlayerIsNewUser=!1,Pt()),t=window.QiyiPlayerIsNewUser),t},Ot=function(){try{window.addEventListener("unload",mt),window.addEventListener("beforeunload",mt),window.addEventListener("pagehide",mt)}catch(e){}},Dt=function(c){return void 0===c&&(c={}),d(this,void 0,void 0,function(){var s,n=this;return E(this,function(e){try{s=Q.get(ut,c),_t&&s!==_t?(wt(pt,_t,283824e7,".iqiyi.com"),wt(ut,_t,283824e7,".iqiyi.com")):Tt(function(a){return d(n,void 0,void 0,function(){var t,n,n,o,i,r;return E(this,function(e){switch(e.label){case 0:return a&&a.qiyiId?(a.qiyiId!==s&&(_t=a.qiyiId,wt(pt,a.qiyiId,283824e7,".iqiyi.com"),wt(ut,a.qiyiId,283824e7,".iqiyi.com")),[3,6]):[3,1];case 1:return(t=Q.get(pt,c))?(t!==s&&(wt(ut,_t=t,283824e7),window.external&&window.external.nativeCall&&null!==(o=window.external)&&void 0!==o&&o.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-1: "+t},cmd_context:""}),"")),[3,6]):[3,2];case 2:return le.os.win?[4,Et()]:[3,6];case 3:return(n=e.sent())&&n.clientid?(n.clientId!==s&&(_t=n.clientid,wt(pt,n.clientid,283824e7,".iqiyi.com"),wt(ut,n.clientid,283824e7,".iqiyi.com"),window.external&&window.external.nativeCall&&null!==(i=window.external)&&void 0!==i&&i.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-2: "+n.clientid},cmd_context:""}),"")),[3,6]):[3,4];case 4:return[4,Et("http://127.0.0.1:16423/get_client_ver")];case 5:(n=e.sent())&&n.clientid&&n.clientId!==s&&(_t=n.clientid,wt(pt,n.clientid,283824e7,".iqiyi.com"),wt(ut,n.clientid,283824e7,".iqiyi.com"),window.external&&window.external.nativeCall&&null!==(r=window.external)&&void 0!==r&&r.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-3: "+n.clientid},cmd_context:""}),"")),e.label=6;case 6:return[2]}})})})}catch(t){}return[2]})})},xt=function(e){_t=e},Vt={},qt={},Ut={},Bt=0,Mt={getItem:function(e){return Vt[e]},setItem:function(e,t){Vt[e]=t},removeItem:function(e){delete Vt[e]}},Ht=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return Mt}(),Gt=function(){0===Bt&&(clearTimeout(Bt),Bt=setTimeout(function(){for(var e in Bt=0,qt)Ht.setItem(e,qt[e]),delete qt[e];for(var t in Ut)Ht.removeItem(t),delete Ut[t]},1e3))},jt,Wt="QiyiPlayerVD",Kt=function(e){return Vt[e]||(Vt[e]=Ht.getItem(e)),Vt[e]},Jt=function(e,t){Vt[e]=t,qt[e]=t,Gt()},zt=function(e){delete Vt[e],Ut[e]=0,Gt()},Xt=!1,$t="",Zt="",en="QiyiPlayerLogger",tn="QiyiPlayerLoggerLevel",nn="#FFA500",on="#ff6cb7",rn="#F30",an="#FFA500",sn={OFF:{value:0,name:"OFF"},ERROR:{value:1,name:"ERROR"},WARN:{value:2,name:"WARN"},INFO:{value:3,name:"INFO"},DEBUG:{value:4,name:"DEBUG"}},cn=parseInt(Kt(tn),10),dn=Array.prototype.slice,ln="Unknown",pn="",un=0,fn="",yn=function(){var e;try{e=(new Date).toISOString()}catch(t){e=(new Date).toString()}return e},hn=function(e){var t=e.join("");fn!==t?(fn=t,un=0):(1<++un&&($t=($t=$t.replace(pn,"")).substring(0,$t.length-2)),e.push(">>repeat("+un+")<<"))},gn=function(e,t){var n,o=nn,i;if(e=dn.call(e),hn(e),e.unshift("%c"),t.name!==ln&&e.unshift("["+t.name+"]"),e.unshift("%c["+yn()+" "+t.level.name+"]"),t.level!==sn.DEBUG&&(pn=e.join("").replace(/%c/gi,""),$t=(""!==(i=$t||"")?i+"\n":"")+pn,Xt=!0),"undefined"!=typeof console)try{n=console.log,t.level===sn.WARN&&console.warn?(n=console.warn,o=on):t.level===sn.ERROR&&console.error?(n=console.error,o=rn):t.level===sn.INFO&&console.info?n=console.info:t.level===sn.DEBUG&&console.debug&&(n=console.debug,o=an),t.print&&n.apply(console,[e.join(" ")+" ","background-color:#699f00;color:#fff;","background-color:"+o+";color:#fff;"])}catch(r){}},_n=!0,mn=(e(wn,vn=Pe),wn.setLevel=function(e){e&&"value"in e&&Jt(tn,(wn._filterLevel=e).value)},wn.getLevel=function(){if(!wn._filterLevel){var e=sn.WARN,t;for(t in sn)sn[t].value===cn&&(e=sn[t]);wn._filterLevel=e}return wn._filterLevel},wn.getLog=function(){return $t+"\n\n\n **** ad log ****\n"+Zt},wn.saveImmediately=function(){Tn()},wn.prototype.enabledFor=function(e){return e.value<=wn.getLevel().value},wn.prototype.invoke=function(e,t){gn(t,A({level:e,print:this.enabledFor(e)},this.context))},wn.prototype.debug=function(){this.invoke(sn.DEBUG,arguments)},wn.prototype.log=function(){var e=arguments[1];_n&&this.context.name===ln&&"string"==typeof e&&/^w: overflow NALU found/.test(e)&&(_n=!1,this.emit("needFireLog")),this.invoke(sn.INFO,arguments)},wn.prototype.info=function(){this.invoke(sn.INFO,arguments)},wn.prototype.adInfo=function(e){Zt=e},wn.prototype.warn=function(){this.invoke(sn.WARN,arguments)},wn.prototype.error=function(){this.invoke(sn.ERROR,arguments)},wn),vn;function wn(e){var t=vn.call(this)||this;return t.context={name:e||ln},t}mn.Levels=sn;var Pn=3e4,En,An=.5*1048576;function Sn(e,t){var n="\n",o,n=$t.split(n).slice(0,16).join(n)+n+"~~~~~truncated log~~~~~"+n;$t=n+$t.slice(n.length<e?e:n.length,t)}function Tn(){var e=$t.length;An<e&&Sn(e-An,e),Jt(en,$t+"\n\n\n **** ad log ****\n"+Zt)}function bn(){Xt&&(Xt=!1,Tn()),setTimeout(bn,Pn)}setTimeout(bn,Pn);var kn={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_CHECK_SHOW_LOGIN_PANEL:"checkShowLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_BARRAGE_SEND:"barrageSend",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN:"clickVideolistBtn",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE:"metaPanelStateChange",QYPLAYER_NOTIFY_RF_STATE_CHANGE:"rightFloaterStateChange",QYPLAYER_NOTIFY_TVG_BTN_CLICK:"tvgBtnClick",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend",QYPLAYER_H5_OPPEN_APP:"h5openapp",QYPLAYER_H5_SHOW_ERROR_PANEL:"h5showerrorpanel"},Rn={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_EveryStartPlay:"everystartplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_PatchStartplay:"patchstartplay",Status_MiddStoped:"middstoped",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_ADEveryStartPlay:"adeverystartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdWillPlayEnded:"adwillended",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",Status_ADLoadedMetaData:"adloadedmetadata",Status_Error:"ntferror",Status_Destroy:"ntfdestroy",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_SRC_Attaching:"srcAttaching",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSReady:"vrsready",NTF_VRSDone:"vrsdone",NTF_VRSPreloaded:"vrspreloaded",NTF_VDChangeFail:"ntfvdchangefail",NTF_AUDChanged:"ntfaudchange",NTF_AUDChangeFail:"ntfaudchangefail",NTF_ARES_Info:"ntfaresinfo",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Before_Seeking:"beforeSeeking",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_Recharge:"recharge",NTF_BuyPlay:"buyPlay",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_HandlerPlayOnMobile:"handlerPlayOnMobile",NTF_MutedStartPlay:"mutedStartPlay",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_DelayToPlay:"delaytoplay",NTF_DelayToPlay_End:"delaytoplayend",NTF_Get_Record:"getrecord",NTF_AD_Showtips:"adshowtips",NTF_PLAY_MUTED:"playfailmuted",NTF_FPS_REPORT:"playFPSReport",NTF_IVPACKAGEPARSE_Failed:"IVPackageParse_Failed",NTF_IVPACKAGEPARSE_Finished:"IVPackageParse_Finished",NTF_AD_SingleStart:"aresSingleStart",NTF_AD_SingleEnd:"aresSingleEnd",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_Seeked:"adseeked",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",NTF_AD_BLOCK:"adblock",NTF_ARES_Load:"aresload",NTF_Show_VIPPay:"showVIPPay",NTF_PREVIEW_END:"previewEnd",NTF_TW_BLOCK:"twBlock",NTF_SKIP_PRELUDE:"skipPrelude",NTF_H5_OPEN_APP:"h5openapp",NTF_H5_SHOW_ERROR_PANEL:"h5showerrorpanel",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show",HTTP_ENGINE:"HTTP",ENGINE_TYPE:"KIWI",CDN_LOADERMODE:"CDN",P2P_LOADERMODE:"P2P",EVT_OPEN_VIP:"evt_open_vip",EVT_BANNED:"evt_banned",EVT_ADMAX_2_PLAY:"admax2play",EVT_BANNED_2:"evt_banned_2",CLICK_720P:"click_720P"},In=le,Ln,Yn=window.location.protocol+"//msg.qy.net/v5/bi/opendata",Cn,Nn="2",Fn,Qn="20",On,Dn,xn,t="1",Se="10",Ee="101";In.browser.iPad?(t=Nn,Se=Qn,Ee="202"):(In.os.ios||In.os.android)&&(t=Nn,Se=Qn,Ee="201");var Vn=t+"_"+Se+"_"+Ee,qn="";In.os.ios||In.os.mac?qn=2:In.os.android&&(qn=1);var Un=function(e){var t;A(t={p1:Vn,flashuid:Ct()||"",v:e.playerVersion,pkg:"",sid:Nt(),sttime:"",os_t:qn,os_v:navigator.platform||"",ua_model:"",brand:"",lang:navigator.language||navigator.browserLanguage,resolution:window.screen.width+"*"+window.screen.height,network:"",cell_id:"",gps_lon:"",gps_lat:"",ipv4:"",tvid:e.tvid||"",aid:e.albumId||"",cid:e.cid||"",pid:Ft(),duration:e.duration||"",rn:+new Date,rfr:window.document.referrer,url:window.location.href,br:In.browser.userAgent,ce:Nt(),c2:"",s2:"NOREF",s3:"NOREF",s4:"NOREF",ps2:"NOREF",ps3:"NOREF",ps4:"NOREF"},e,!0),ot.beacon(t,Yn)},Bn;function Mn(){}var Hn=new(Mn.prototype.sendStartPlayPingback=function(e){e.type=3,e.sttime=Math.round((new Date).getTime()/1e3),Un(e)},Mn.prototype.sendEndPlayPingback=function(e){e.type=4,e.sttime=Math.round((new Date).getTime()/1e3),Un(e)},Mn);function Gn(){var e=!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach,t=window.MediaSource||window.WebKitMediaSource,n=window.URL,o=!1,i,r,o;return t&&"function"==typeof t.isTypeSupported&&(i=t.isTypeSupported('video/mp4;codecs="avc1.42E01E"'),o=t.isTypeSupported('audio/mp4;codecs="mp4a.40.2"')&&i),e&&!!n&&(!!o||In.browser.EDGE)}var jn=Gn(),Ee=navigator.userAgent,Wn,Wn=(Wn=/chrome\/([\d\.]+) /gi.exec(Ee.toLowerCase()))?parseInt(Wn[1],10):0,Kn,Kn=(Kn=/firefox\/([\d\.]+)/gi.exec(Ee.toLowerCase()))?parseInt(Kn[1],10):0,Jn;function zn(){var e=In.browser.WECHAT,t=In.browser.CHROME&&34<=Wn&&!In.browser.EDGE,n=In.browser.SAFARI&&10<=Jn,o=In.browser.FIREFOX&&42<=Kn,i=In.browser.EDGE,r=In.browser.SmartTV,a;return jn&&(e||t||n||o||i||r)}function Xn(){return zn()||In.os.ios||In.os.android}function $n(){var e;return Q.get("player_forcedType")||null}function Zn(){var e=kn.PlayerType_Html5VOD,t;return e="flash"==ge.query("__playertype__")?kn.PlayerType_FlashVOD:e}function eo(e){var t;return Xn()?$n()||e||Zn():kn.PlayerType_FlashVOD}var Jn=(Jn=/Version\/([\d\.]+)/gi.exec(Ee.toLowerCase()))?parseFloat(Jn[1]):0,to={},no=function(e){return e},oo,io=function(e,t){var o=e.tvid,i=e.locale,e=o;to[e]=to[e]||new Promise(function(t,e){var n="//mesh.if.iqiyi.com/player/pcw/video/playervideoinfo?id="+o,n=i?n+"&locale="+i:n;ot.json({url:n,memory:!0,withCredentials:!1,success:function(e){var e;"A00000"===e.code&&e.data?(e=e.data,t({tvid:e.videoQipuId,vid:e.vid,albumId:e.albumId,cid:e.cid,vi:e,sid:e.sid,cType:e.ctype})):t({})},failure:function(){t({})}})}),to[e].then(t)},ro,ao=(so.prototype.embed=function(e){var t=[];t.push("<object>");var n="",o=document.getElementById(e.parentId);e.isInPca?n='<style type="text/css">  div, span, a {margin: 0;padding: 0;}  a {text-decoration: none;}  a:link, a:visited, a:hover, a:active {text-decoration: none;}  .iqp-layer-upgrade {position: absolute;top: -1px;left: -1px;right: -1px;bottom: -1px;background-color: #000;z-index: 100;font-size: 14px;line-height: 32px;}  .iqp-layer-upgrade .iqp-layer-con {position: absolute; width: 100%;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);text-align: center;}  .iqp-layer-upgrade .iqp-layer-main {line-height: 32px;font-size: 16px; color: #fff;}</style><div class="iqp-layer-upgrade">   <div class="iqp-layer-con">       <div class="iqp-layer-main">浏览器内核正在升级，请稍后重试...</div>   </div></div>':n+='<style type="text/css">  div, span, a {margin: 0;padding: 0;}  a {text-decoration: none;}  a:link, a:visited, a:hover, a:active {text-decoration: none;}  .iqp-layer-upgrade {position: absolute;top: -1px;left: -1px;right: -1px;bottom: -1px;background-color: #000;z-index: 100;font-size: 14px;line-height: 32px;}  .iqp-layer-upgrade .iqp-layer-con {position: absolute; width: 100%;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);text-align: center;}  .iqp-layer-upgrade .iqp-layer-main {line-height: 32px;font-size: 16px; color: #fff;}  .iqp-layer-upgrade .iqp-layer-minor {line-height: 30px;font-size: 14px; color: #fff;opacity: 0.5;}  .iqp-layer-upgrade .browser-item {box-sizing: border-box;display: inline-block;width: 160px;height: 40px;border: 1px solid #00CC4C;border-radius: 6px;margin-top: 16px; font-size: 0;}  .iqp-layer-upgrade .browser-item:hover { border-color: #33D66F; }  .iqp-layer-upgrade .browser-item:hover .browser-name {color: #33D66F;}  .iqp-layer-upgrade .browser-item:hover .browser-btn {background-color:#33D66F;}  .iqp-layer-upgrade .upgrade-icon {display: inline-block;vertical-align: middle;width: 24px;height: 24px;background-image: url(//www.iqiyipic.com/common/fix/player/upgradeTips-icon.png);background-repeat: no-repeat; margin-right: 8px;}  .iqp-layer-upgrade .upgrade-icon.browser-goole {background-position: 0 0;}  .iqp-layer-upgrade .upgrade-icon.browser-QQ {background-position: -25px 0;}  .iqp-layer-upgrade .upgrade-icon.browser-360 {background-position: -50px 0;}  .iqp-layer-upgrade .browser-name {display: inline-block;vertical-align: middle;line-height: 38px;font-size: 14px;color: #00CC4C;}  .iqp-layer-upgrade .browser-btn {float: right;width: 40px;height: 38px;background-color: #00CC4C;border-radius: 0 4px 4px 0;}  .iqp-layer-upgrade .browser-btn .upgrade-icon {display: inline-block;width: 20px;height: 20px;background-position: -75px 0;margin-right: 0;margin-top: 4px;}  @media screen and (min-width: 0) {.iqp-layer-upgrade .upgrade-icon { background-image: url(//www.iqiyipic.com/common/fix/player/upgradeTips-icon@2x.png);background-size: 100px 25px;}}</style><div class="iqp-layer-upgrade">   <div class="iqp-layer-con">       <div class="iqp-layer-main">当前浏览器不支持播放，建议使用以下浏览器</div>       <div class="iqp-layer-minor">下列软件均已通过安全验证，您可放心安装</div>       <div class="iqp-layer-browser">           <div class="browser-wrap">               <a href="//www.google.cn/intl/zh-CN/chrome/" class="browser-item">                   <span class="upgrade-icon browser-goole"></span>                   <span class="browser-name">谷歌浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>           <div class="browser-wrap">               <a href="//browser.qq.com/" class="browser-item">                   <span class="upgrade-icon browser-QQ"></span>                   <span class="browser-name">QQ浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>           <div class="browser-wrap">               <a href="//browser.360.cn/ee/" class="browser-item">                   <span class="upgrade-icon browser-360"></span>                   <span class="browser-name">360浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>       </div>   </div></div>',t.push(n),t.push("</object>");var n=t.join(""),t=document.createElement("div");t.innerHTML=n;try{o.appendChild(t.firstChild),(ro=document.getElementById(e.origin)).loadSuccess=!1}catch(i){}return t=null,ro},so.prototype.addEvent=function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):window.addEventListener&&e.addEventListener(t,n)},so);function so(){}var co=(e(po,lo=Pe),po.prototype.fire=function(e){var t=e.type,n=e.data,e={type:t};n!==undefined&&(e.data=n),this.emit(t,e),this.__canRecordEvents&&(this.eventsRecorder[t]||(this.eventsRecorder[t]=[]),"playerStateChange"===t?this.eventsRecorder[t].push(e):this.eventsRecorder[t]=[e])},po.prototype.un=function(e,t){return this.off(e,t),this},po.prototype.load=function(){},po.prototype.stopRecordEvents=function(){var e=this;e.__canRecordEvents=!1,clearTimeout(e.__evtRecorderTimer),setTimeout(function(){e.eventsRecorder={}},1e4)},po.prototype.play=function(){},po.prototype.resume=function(){},po.prototype.replay=function(){},po.prototype.pause=function(){},po.prototype.seek=function(){},po.prototype.stop=function(){},po.prototype.getPlayInfo=function(){},po.prototype.getVideoInfo=function(e){var t,t="tw_t"===(t=this.locale)||"cn_t"===t?"zh_tw":"";io({tvid:this._tvid,vid:this._videoid,locale:t},e)},po.prototype.getPlayerId=function(){return this._playerId},po.prototype.setQiyiUserLogin=function(){},po.prototype.switchVideo=function(){},po.prototype.switchNextVideo=function(){},po.prototype.switchPreVideo=function(){},po.prototype.addVideoList=function(){},po.prototype.removeVideoList=function(){},po.prototype.setSmallWindowMode=function(){},po.prototype.jsNotifyAdManager=function(){},po.prototype.getQiyiPlayerLog=function(){},po.prototype.clearBanWord=function(){},po.prototype.addBanWord=function(){},po.prototype.removeBanWord=function(){},po.prototype.requestBarrageData=function(){},po.prototype.notyfyADInfo=function(){},po.prototype.getIsInMainVideo=function(){},po.prototype.setCyclePlay=function(){},po.prototype.getQiyiPlayerInfo=function(){},po.prototype.getQiyiVideoInfo=function(){},po.prototype.setLight=function(){},po.prototype.expand=function(){},po.prototype.setBarrageStatus=function(){},po.prototype.setSelfSendBarrageInfo=function(){},po.prototype.setBarrageSetting=function(){},po.prototype.setActivityNoticeInfo=function(){},po.prototype.zoomQiyiVideo=function(){},po.prototype.setTimeListener=function(){},po.prototype.getHasBarrageConfigInfo=function(){},po.prototype.getHasBarrageChannelConfigInfo=function(){},po.prototype.getHasBarrageGiftInfo=function(){},po.prototype.getCommentConfigInfo=function(){},po.prototype.setContinuePlayState=function(){},po.prototype.getSwitchVideoType=function(){},po.prototype.forceToSaveCurVideoInfo=function(){},po.prototype.getContinueData=function(){},po.prototype.setQiyiVisits=function(){},po.prototype.initQiyiVideo=function(){},po.prototype.getQiyiPlayerType=function(e){var t="flash";return e&&"function"==typeof e&&e(t),t},po.prototype.setPlayerFullScreen=function(){},po.prototype.exitPicInPic=function(){},po.prototype.setQiyiSubscribe=function(){},po.prototype.setSubscribeInfo=function(){},po.prototype.setSubscribeStateChange=function(){},po.prototype.setPlayerWebFullScreen=function(){},po.prototype.setRightBarStatus=function(){},po.prototype.setExpandScreenStatus=function(){},po.prototype.showToast=function(){},po.prototype.refresh=function(){},po.prototype.backToStoryLine=function(){},po.prototype.backToIVMain=function(){},po),lo;function po(e,t){var n=lo.call(this)||this;return(n._player=n).__canRecordEvents=!0,n.eventsRecorder={},n.__evtRecorderTimer=setTimeout(function(){n.stopRecordEvents()},3e5),n.isSmallWindow=null,n._videoid=e.vid,n._tvid=e.tvid,n._embedSwf=new ao,n._swf=n._embedSwf.embed(e,t),n._playerId=e.parentId||"",n._param=e,n.LOGGER_KEY="QiyiPlayerLogger",n}function uo(e){var t=kn.SkinType_pc;return(In.os.ios||In.os.android)&&(t=kn.SkinType_mobile),{skinType:t=e&&t===kn.SkinType_pc?kn.SkinType_pc+"."+kn.SkinType_mini:t}}var fo=new mn("H5Adapter"),yo=(e(go,ho=Pe),go.prototype.fire=function(e){var t=e.type,n=e.data,e={type:t};n!==undefined&&(e.data=n),this.emit(t,e),this.__canRecordEvents&&(this.eventsRecorder[t]||(this.eventsRecorder[t]=[]),"playerStateChange"===t?this.eventsRecorder[t].push(e):this.eventsRecorder[t]=[e])},go.prototype.un=function(e,t){return this.off(e,t),this},go.prototype.loadSkin=function(e){var t=window.QiyiPlayerLoader;t&&t.loadSkin(e)},go.prototype.checkPack=function(e,t,n){var o=this;if(!this.disabled){var i=function(){if(n)n();else{if(o["package"][e])return o["package"][e](t);fo.info("checkPack error, method = "+e)}};if(this["package"])return i();this.once("createPack",i)}},go.prototype.addView=function(e){this.hasview||(this.hasview=!0,this.checkPack("addView",e))},go.prototype.load=function(e){this.checkPack("load",e)},go.prototype.stopRecordEvents=function(){var e=this;e.__canRecordEvents=!1,clearTimeout(e.__evtRecorderTimer),setTimeout(function(){e.eventsRecorder={}},1e4)},go.prototype.play=function(e){this.checkPack("play",e=void 0===e?{withUserGesture:!1}:e)},go.prototype.resume=function(){this.checkPack("resume")},go.prototype.replay=function(){this.checkPack("replay")},go.prototype.pause=function(){this.checkPack("pause")},go.prototype.seek=function(e){this.checkPack("seek",e)},go.prototype.seekN=function(e){this.checkPack("seekN",e)},go.prototype.setPlayPingbackInfo=function(e){this.checkPack("setPlayPingbackInfo",e)},go.prototype.stop=function(){this.checkPack("stop")},go.prototype.isPaused=function(){return this.checkPack("isPaused")},go.prototype.getPlayInfo=function(e){this.checkPack("getPlayInfo",e)},go.prototype.getVideoInfo=function(e){this.checkPack("getVideoInfo",e)},go.prototype.getPlayerId=function(){return this._playerId},go.prototype.getPlayingDuration=function(){return this.checkPack("getPlayingDuration")},go.prototype.getMuted=function(){return this.checkPack("getMuted")},go.prototype.setMuted=function(e){this.checkPack("setMuted",e)},go.prototype.setQiyiUserLogin=function(e){this.checkPack("setQiyiUserLogin",e)},go.prototype.switchVideo=function(e){this.checkPack("switchVideo",e)},go.prototype.switchNextVideo=function(){this.checkPack("switchNextVideo")},go.prototype.switchPreVideo=function(){this.checkPack("switchPreVideo")},go.prototype.addVideoList=function(e){this.checkPack("addVideoList",e)},go.prototype.removeVideoList=function(e){this.checkPack("removeVideoList",e)},go.prototype.setSmallWindowMode=function(e){var t=this;this.isSmallWindow!==e&&(fo.info("js call func,params: type = setSmallWindowMode(设置小窗,1为小窗), data = "+e),this.isSmallWindow=e,this.checkPack("setSmallWindowMode",null,function(){t["package"].setSmallWindowMode&&t["package"].setSmallWindowMode(e)}))},go.prototype.jsNotifyAdManager=function(e){this.checkPack("jsNotifyAdManager",e)},go.prototype.getQiyiPlayerLog=function(e){try{e(mn.getLog())}catch(t){}},go.prototype.clearBanWord=function(){this.checkPack("clearBanWord")},go.prototype.addBanWord=function(e){e!==undefined&&""!==e&&this.checkPack("addBanWord",e)},go.prototype.removeBanWord=function(e){this.checkPack("removeBanWord",e)},go.prototype.requestBarrageData=function(){},go.prototype.notyfyADInfo=function(e){this.checkPack("notyfyADInfo",e)},go.prototype.getQiyiPlayerInfo=function(e){this.checkPack("getQiyiPlayerInfo",e)},go.prototype.getQiyiPlayerType=function(e){var t="h5";return e&&"function"==typeof e&&e(t),t},go.prototype.setDelayPlayInfo=function(e){this.checkPack("setDelayPlayInfo",e)},go.prototype.clearDelayPlayInfo=function(e){this.checkPack("clearDelayPlayInfo",e)},go.prototype.setBarrageStatus=function(){},go.prototype.setSelfSendBarrageInfo=function(){},go.prototype.setBarrageSetting=function(){},go.prototype.setPlayerWebFullScreen=function(e){this.checkPack("setPlayerWebFullScreen",e)},go.prototype.setPlayerFullScreen=function(e){this.checkPack("setPlayerFullScreen",e)},go.prototype.getHasBarrageChannelConfigInfo=function(){},go.prototype.getHasBarrageConfigInfo=function(){},go.prototype.getHasBarrageGiftInfo=function(){},go.prototype.addPlayListView=function(e){this.checkPack("addPlayListView",e)},go.prototype.getSwitchVideoType=function(){return this.checkPack("getSwitchVideoType")},go.prototype.setRightBarStatus=function(e){this.checkPack("setRightBarStatus",e)},go.prototype.setExpandScreenStatus=function(e){this.checkPack("setExpandScreenStatus",e)},go.prototype.exitPicInPic=function(){this.checkPack("exitPicInPic")},go.prototype.showToast=function(e){this.checkPack("showToast",e)},go.prototype.refresh=function(e){this.checkPack("refresh",e)},go.prototype.backToStoryLine=function(e){this.checkPack("backToStoryLine",e)},go.prototype.backToIVMain=function(e){this.checkPack("backToIVMain",e)},go.prototype.setFollowData=function(e){this.checkPack("setFollowData",e)},go.prototype.changeFollowState=function(e){this.checkPack("changeFollowState",e)},go.prototype.changeAIBaikeState=function(e){this.checkPack("changeAIBaikeState",e)},go.prototype.setBarrageState=function(e){this.checkPack("setBarrageState",e)},go.prototype.getFeedbackInfo=function(){this.checkPack("getFeedbackInfo")},go.prototype.showTips=function(e){this.checkPack("showTips",e)},go.prototype.notifyMetaPanel=function(e){this.checkPack("notifyMetaPanel",e)},go.prototype.getMetaPanelInfo=function(){return this.checkPack("getMetaPanelInfo")},go.prototype.noticeRightFloater=function(e){this.checkPack("noticeRightFloater",e)},go.prototype.getRightFloaterInfo=function(){return this.checkPack("getRightFloaterInfo")},go.prototype.setPayLayerStatus=function(e){this.checkPack("setPayLayerStatus",e)},go.prototype.setBarragePanel=function(e){this.checkPack("setBarragePanel",e)},go.prototype.getPlayerDom=function(){return this.checkPack("getPlayerDom")},go.prototype.showKbTip=function(e){return this.checkPack("showKbTip",e)},go.prototype.closeKbTip=function(e){return this.checkPack("closeKbTip",e)},go.prototype.setAlbumAfterFeature=function(e){return this.checkPack("setAlbumAfterFeature",e)},go.prototype.getCurrentTime=function(){return this.checkPack("getCurrentTime")},go.prototype.skipPrelude=function(e){return this.checkPack("skipPrelude",e)},go.prototype.noticePlayerHideDefinition=function(e){return this.checkPack("noticePlayerHideDefinition",e)},go.prototype.getIsInMainVideo=function(){},go.prototype.setCyclePlay=function(){},go.prototype.getQiyiVideoInfo=function(){},go.prototype.setQiyiSubscribe=function(){},go.prototype.setLight=function(){},go.prototype.expand=function(){},go.prototype.setActivityNoticeInfo=function(){},go.prototype.zoomQiyiVideo=function(){},go.prototype.setTimeListener=function(){},go.prototype.getCommentConfigInfo=function(){},go.prototype.setSubscribeInfo=function(){},go.prototype.setSubscribeStateChange=function(){},go.prototype.setContinuePlayState=function(){},go.prototype.forceToSaveCurVideoInfo=function(){},go.prototype.getContinueData=function(){},go.prototype.setQiyiVisits=function(){},go.prototype.initQiyiVideo=function(){},go),ho;function go(e,t){var n=ho.call(this)||this;(n._player=n)._playerId=e.parentId,n.disabled=!1,n.hasview=!1,n.type=kn.PlayerType_Html5VOD,n.skinType=uo(!!e.skinType).skinType;var o=window.QiyiPlayerLoader;return o&&(o.Package?n["package"]=new o.Package(e,n):(n["package"]=null,o.once("ready",function(){n["package"]=new o.Package(e,n),n.emit("createPack")}))),n.__canRecordEvents=!0,n.eventsRecorder={},n.__evtRecorderTimer=setTimeout(function(){n.stopRecordEvents()},3e5),n.isSmallWindow=null,setTimeout(function(){fo.info("call js, fire event,params: type = playerLoadSuccess(播放器初始化完毕)"),n.fire({type:kn.QYPLAYER_LOAD_SUCCESS,data:{playerId:e.parentId}}),n.fire({type:kn.QYPLAYER_BARRAGE_ALLOWED,data:{enable:!1}})},0),n.destroy=function(){n.checkPack("destroy",null,function(){fo.log("js call func,params: type = player destroy(销毁播放器)"),n["package"].destroy(),n.hasview=!1,n.disabled=!0,delete t.players[e.parentId],n.removeAllListeners(),n.fire({type:"destroy"})})},n}var _o="data-widget-adparam",mo="data-widget-flashplayerparam",vo="data-flashplayerparam-flashvars",wo="data-h5playerparam-h5vars",Po,Eo,Ao,So={},To=function(){Ao=document.querySelectorAll?document.querySelectorAll("span"):document.getElementsByTagName("span"),Po=window.QiyiPlayerParam||[],Eo={};for(var e=0;e<Po.length;e++)Po[e].name&&(Eo[Po[e].name]=Po[e].attribute||{})},bo=function(){var e=[],t;try{t=!window.parent.location.href}catch(n){for(0===e.length&&(t=!0);e.length;)if(-1===document.referrer.indexOf(e.pop())){t=!0;break}}return t+""}(),ko=function(e){(Eo[e]||Eo.hasOwnProperty(e))&&(Eo[e]=null,delete Eo[e]);for(var t=Po.length;t--;)Po[t].name===e&&Po.splice(t,1)},Ro=function(e){return e.replace(/([<>])/g,"")},Io=function(e){for(var t in e)e[t]||!1===e[t]||delete e[t];return e},Lo=function(t){for(var e,n,o,i=function(e){return t.getAttribute(e)},r={expandState:i("data-player-expandstate"),albumId:i("data-player-albumid"),tvid:i("data-player-tvid"),vid:i("data-player-videoid"),autoplay:i("data-player-autoplay"),isMember:i("data-player-ismember"),cyclePlay:i("data-player-cycleplay"),exclusive:i("data-player-exclusive"),qiyiProduced:i("data-player-qiyiProduced"),share_sTime:i("data-player-startTime"),share_eTime:i("data-player-endTime"),showBarStyle:i("data-player-barStyle"),isLoop:i("data-player-isloop")},e=0,a,o,o,n;e<Ao.length;e++){(o=Ao[e]).getAttribute(_o)===_o&&(a=o.getAttribute("data-adparam-cupid"),o=o.getAttribute("data-adparam-playerid"),a&&(r.adurl=a),o&&(r.cid=o))}return Io(r)},Yo=function(){for(var e,t,n,o={},e=0,i,n,n,t;e<Ao.length;e++){(n=Ao[e]).getAttribute(_o)===_o&&(i=n.getAttribute("data-adparam-cupid"),n=n.getAttribute("data-adparam-playerid"),i&&(o.adurl=i),n&&(o.cid=n))}return Io(o)},Co=function(){for(var e,t,n,o,i,o,r=!1,a={},i=0;i<Po.length;i++)"public"===Po[i].name&&(A(a,Io(Po[i].attribute||{}),!0),ko("public"),r=!0);if(!r)for(e=0;e<Ao.length;e++)t=(o=Ao[e]).getAttribute(mo),n=o.getAttribute(vo),o=o.getAttribute(wo),"public"===t&&(n&&A(a,Io(ge.query2Json(n)),!0),o&&A(a,Io(ge.query2Json(o)),!0));return Io(a)},No=function(){for(var e,t,n,o,o,i={},e=0;e<Ao.length;e++)t=(o=Ao[e]).getAttribute(mo),n=o.getAttribute(vo),o=o.getAttribute(wo),t&&"public"!==t&&(Eo[t]?(A(i,Io(Eo[t]),!0),ko(t)):(n&&A(i,Io(ge.query2Json(n)),!0),o&&A(i,Io(ge.query2Json(o)),!0)));if(0<Po.length)for(e=0;e<Po.length;e++)Po[e]&&Po[e].name&&A(i,Io(Po[e].attribute||{}),!0);return Io(i)},Fo=function(t){var e={},n,o,o=(o=function(e){return t.getAttribute(e)}("data-player-flashvars"))?ge.query2Json(o):{};return A(e,Io(o),!0),Io(e)},Qo=function(){var e={},t=function(e){var t=ge.query2Json(e),n,n=(n=t.flashVars)?ge.query2Json(Ro(decodeURIComponent(n))):{},o=t.share_sTime,i=t.share_eTime;if(t.cupid_init_sub_type)for(var r=(t.cupid_init_sub_type+"").split(";"),a=void 0,s=0;s<r.length;s++)1<(a=(r[s]+"").split(":")).length&&(t[a[0]]=a[1]);var e=o&&o.match(/(\d*)-.*?=(\d*)/);e&&(o=e[1],i=e[2]);var i={autoplay:"1"===t.iamp||t.autoplay,ignoreUserGesture:"true"===t.ignoreUserGesture||undefined,vid:t.videoid||t.vid,tvid:t.tvid||t.tvId,albumId:t.albumid,cyclePlay:t.cycleplay,isMember:t.ismember,exclusive:t.exclusive,qiyiProduced:t.qiyiProduced,share_sTime:o,share_eTime:i,outsite:t.outsite,cid:t.cid,ptid:t.ptid,isCid:t.isCid,vfrm:t.vfrm,isMute:"1"===t.iamp||t.isMute,showBarStyle:t.barStyle,local:t.local,components:t.components,isLoop:t.isLoop,masflag:t.masflag,isExpandScreen:t.isExpandScreen,isSupportedShot:t.isSupportedShot,isSmallWindowMode:t.isSmallWindowMode,isSupportedHotKey:t.isSupportedHotKey,ps3:t.ps3,abtest:t.abtest,ist:t.cupid_init_sub_type};return A(n,Io(i),!0),n},n=t(Ro(window.location.search.replace(/([<>])/g,""))),t=t(Ro(window.location.hash.slice(1).replace(/([<>])/g,""))),o;for(o in A(e,Io(n),!0),A(e,Io(t),!0),e)e[o]||!1===e[o]||delete e[o];return Io(e)},Oo,Do=function(e,t){To();var n=window.__qlt,o="";n&&n.brs&&(o=n.brs||"");var n=e.tmplt||0,i={outsite:bo,site:"iqiyiw",components:"feffffe6e",local:"cn_s",ost:"0",browserType:o,pageTmpltType:n},r;for(r in A(i,Lo(t),!0),A(i,Yo(),!0),A(i,Co(),!0),A(i,No(),!0),A(i,Fo(t),!0),A(i,e,!0),A(i,Qo(),!0),Kt("abtest")&&(i.abtest=Kt("abtest"),zt("abtest")),i)"string"==typeof i[r]&&(i[r]=i[r].replace(/^http:/gi,""));return So=i},xo=function(){return So},Vo=new mn("PlayerManager"),qo={};Qt(!0);var Uo=(Bo.prototype.createPlayer=function(e){var t=this,n=document.getElementById(e.parentId);e=Do(e,n);var o=this.players[e.parentId];if(!e.hasOwnProperty("parentId"))return null;if(null!=o)return null;e.width&&e.height&&(n.style.width=parseInt(e.width,10)+"px",n.style.height=parseInt(e.height,10)+"px"),e.plyct=+new Date;var i=eo(e.playerType),r=Q.get("QC005",{memory:!0}),n=Q.get("setting",{memory:!0});switch(Vo.log(i+", v: "+s+", location: "+window.location.href+", env: "+navigator.userAgent.toLowerCase()+", -/"+r+"/"+(n||"-")+", parameters: "+Ge.stringify(e)),i){case kn.PlayerType_Html5VOD:o=new yo(e,this);break;case kn.PlayerType_FlashVOD:o=new co(e,!1,this)}(this.players[e.parentId]=o).on(kn.QYPLAYER_LOAD_SUCCESS,function(e){o.__loadsuccess=!0;var e=e.data.playerId;t.flushPlayerReadyCalls(e)});var a="";return o.on(kn.QYPLAYER_STATE_CHANGE,function(e){var t=e.data.state.toLocaleLowerCase(),n={};switch(n.tvid=e.data.tvid||"",n.albumId=e.data.albumId||"",n.cid=e.data.cid||"",n.playerVersion=e.data.playerVersion||"",t){case kn.QYPLAYER_STATUS_END_PLAY:e.data.spend&&(n.duration=e.data.spend),Hn.sendEndPlayPingback(n);break;case kn.QYPLAYER_STATUS_START_PLAY:case kn.QYPLAYER_STATUS_AD_START_PLAY:var o=e.data.tvid;o!==a&&(Hn.sendStartPlayPingback(n),a=o);break;case kn.QYPLAYER_STATUS_ERROR:}}),o.on(kn.QYPLAYER_VID_CHANGE,function(e){var t,n,o={};e.data.preMovieInfo?(t=e.data.preMovieInfo.tvid,n=e.data.preMovieInfo.spend,o.albumId=e.data.preMovieInfo.albumId||"",o.cid=e.data.preMovieInfo.cid||""):(t=e.data.preTvid,n=e.data.prePlayingDuration),o.playerVersion=e.data.playerVersion||"",o.tvid=t||"",o.duration=n||"",Hn.sendEndPlayPingback(o)}),o},Bo.prototype.getPlayerById=function(e){return this.players[e]},Bo.prototype.destroyPlayer=function(e){this.players[e].destroy()},Bo.prototype.addView=function(e,t){var n=arguments.length,o=0===n;if(1===n||2<n)Vo.error("add view only support no-args mode or 2-args modes");else for(var i in e&&t&&(this._skins[t]=e),this.players){var i=this.players[i];o?(t=i.skinType,(e=this._skins[t])&&i.addView(e)):i.skinType===t&&i.addView(e)}},Bo.prototype.ready=function(e,t){var n=this.getPlayerById(e),o=qo[e]||[];(qo[e]=o).push(t),n&&n.__loadsuccess&&this.flushPlayerReadyCalls(e)},Bo.prototype.flushPlayerReadyCalls=function(e){var t=qo[e]||[];qo[e]=[];for(var n=0;n<t.length;n++)!function(e,t){setTimeout(function(){e[t].call()},0)}(t,n)},Bo);function Bo(){this.players={},this._skins={},this.constantType=kn,this.coreType=Rn,this.version=s}function Mo(t,n){"object"!=typeof t&&(t=[t]);var o=document.getElementsByTagName("head").item(0)||document.documentElement,i=[],r=t.length-1,a=function(e){i[e]=document.createElement("script"),i[e].setAttribute("type","text/javascript"),i[e].onload=i[e].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),e!=r?a(e+1):"function"==typeof n&&n(!0))},i[e].onerror=i[e].onstalled=function(){"function"==typeof n&&n(!1)},i[e].setAttribute("src",t[e]),o.appendChild(i[e])};a(0)}var Ho={id:!1,channelIds:[],index:!1,eq:"",st:"",ed:""},Go={"skin.mobile":"//static.iqiyi.com/js/player_v2/skin.mobile.ce51e93a.js","skin.pc":"//static.iqiyi.com/js/player_v2/skin.pc.ce51e93a.js","skin.pc.mini":"//static.iqiyi.com/js/player_v2/skin.pc.mini.ce51e93a.js","wonder.data.mobile":"//static.iqiyi.com/js/player_v2/wonder.data.mobile.ce51e93a.js","wonder.data.pc":"//static.iqiyi.com/js/player_v2/wonder.data.pc.ce51e93a.js","wonder.http.mobile":"//static.iqiyi.com/js/player_v2/wonder.http.mobile.ce51e93a.js"},jo="//static.iqiyi.com/js/common/ares-mobile-h5.min.js",Wo=(Ko.prototype.matchGray=function(e){var t=Ho;if(t.id){var n=Q.get("QC005",{memory:!0}),o=!1;return""!==t.index&&(n=parseInt(n.substr(t.index,1),16),""!==t.eq?o=n==t.eq:""!==t.st&&""!==t.ed&&(o=n>=t.st&&n<=t.ed)),-1<t.channelIds.indexOf(e)||o}return!1},Ko.prototype.loadPackage=function(){var e=this,t="data",n="pc";(In.os.ios||In.os.android)&&(zn()||(t="http"),n="mobile");var o="wonder."+t+"."+n,i=this.configUrl[o];this.globalEntry.packageName=o,setTimeout(function(){e.globalEntry.isSyncing=!1,e.globalEntry.Package||(e.logger.log("package loading: ("+o+")"),Mo(i,function(){e.logger.log("package loaded: ("+o+")")}))},0)},Ko.prototype.isSkinLoaded=function(e){var e=uo((e=void 0===e?{}:e).isMini).skinType;return!!this._loadedSkinTypes[e]},Ko.prototype.loadSkin=function(e){var t=this,n=uo((e=void 0===e?{}:e).isMini).skinType;this._loadedSkinTypes[n]=!0,Mo(this.configUrl["skin."+n],function(e){!1===e&&(t._loadedSkinTypes[n]=!1)})},Ko.prototype.loadAD=function(e){var o=this;"boolean"==typeof this.adcb.loaded?e():("function"==typeof e&&this.adcb.push(e),this.adcb.loading||(this.adcb.loading=!0,Mo(jo,function(e){for(o.adcb.loading=!1,o.adcb.loaded=e;0<o.adcb.length;)try{var t;o.adcb.shift()()}catch(n){}})))},Ko);function Ko(e,t){if(this.logger=new mn("PackLoader"),this.globalEntry=e,this.configUrl=Go,this._loadedSkinTypes={},this.usedGrayUrl={},this.p2pcb=[],this.adcb=[],this.matchGray(t)){var n=Ho.url,o;for(o in n)this.configUrl[o]=n[o],this.usedGrayUrl[o]=!0}Xn()&&this.loadPackage()}var Jo=new mn("QiyiLoader"),zo,Xo,$o;function Zo(){var e=Xo.call(this)||this,t=0;window.__qlt&&"number"==typeof window.__qlt.statisticsStart&&(t=window.__qlt.statisticsStart),Jo.log("player v2 sdk init,player-"+s+", page benchmark@"+t+"!");var n,t=(window.uniqy||{}).curVideoInfo||{};return e.Package=null,e.packLoader=new Wo(e,t.channelId),e.renderd=!1,e.manager=new Uo,e.isSyncing=!0,e}return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=+arguments[1]||0;if(0===t||isNaN(n)||t<=n)return-1;for(n<0&&(n=t+n)<0&&(n=0);n<t;++n)if(this[n]===e)return n;return-1}),new(e(Zo,Xo=Pe),Zo.prototype.ready=function(e){"function"==typeof e&&(this.isActived=!0,e(this.manager),this._checkEnv(),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onWonderInit(window.QiyiPlayerProphetData))},Zo.prototype._checkEnv=function(){var e;this._testEnvChecked||(this._testEnvChecked=!0,e=Q.get("setting",{memory:!0}))},Zo.prototype.logger=function(){return mn},Zo.prototype.setPackage=function(e){this.Package=e,this.emit("ready")},Zo.prototype.addView=function(e,t){this.manager.addView(e,t)},Zo.prototype.loadSkin=function(e){this.packLoader.isSkinLoaded(e=void 0===e?{}:e)?this.manager.addView():this.packLoader.loadSkin(e)},Zo.prototype.loadAd=function(e){this.packLoader.loadAD(e)},Zo)});
/*! Built by pcw player group @11/1/2023, 3:07:09 PM */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],s=0,c=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={10:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({0:"kiwi.mat",1:"mmc.authkey",2:"pako_deflate",6:"vendors.crypto",7:"vendors.jszip",8:"vendors.pako_deflate"}[e]||e)+".ce51e93a.js"}(e);var u=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,n[1](u)}r[e]=undefined}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="//static.iqiyi.com/js/player_v2/",i.oe=function(e){throw console.error(e),e};var a=window.iqiyiPlayerJSONPCallback=window.iqiyiPlayerJSONPCallback||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=o;i(i.s=1072)}([function(e,t,n){"use strict";n.d(t,"r",(function(){return S})),n.d(t,"J",(function(){return T})),n.d(t,"i",(function(){return B})),n.d(t,"q",(function(){return z})),n.d(t,"b",(function(){return X})),n.d(t,"m",(function(){return J})),n.d(t,"n",(function(){return ee})),n.d(t,"d",(function(){return te})),n.d(t,"G",(function(){return fe})),n.d(t,"D",(function(){return pe})),n.d(t,"A",(function(){return ve})),n.d(t,"p",(function(){return me})),n.d(t,"l",(function(){return m})),n.d(t,"k",(function(){return x})),n.d(t,"z",(function(){return r})),n.d(t,"c",(function(){return Pe})),n.d(t,"s",(function(){return a})),n.d(t,"x",(function(){return c})),n.d(t,"y",(function(){return l})),n.d(t,"w",(function(){return d})),n.d(t,"t",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"H",(function(){return p})),n.d(t,"u",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"v",(function(){return Qe})),n.d(t,"e",(function(){return Je})),n.d(t,"f",(function(){return je})),n.d(t,"E",(function(){return et})),n.d(t,"F",(function(){return tt})),n.d(t,"B",(function(){return R})),n.d(t,"C",(function(){return g})),n.d(t,"a",(function(){return se})),n.d(t,"g",(function(){return ue})),n.d(t,"I",(function(){return pt})),n.d(t,"K",(function(){return ge})),n.d(t,"h",(function(){return ht})),n.d(t,"L",(function(){return It}));n(27),n(76),n(212),n(40),n(235),n(144),n(36),n(263);var r=!1,i=(n(22),n(378),n(32),n(98),n(82),n(157),Object.prototype),a=(i.toString,Function.prototype.toString.call(Object),i.hasOwnProperty);var o,s;o=Object.getPrototypeOf,s=Object;function u(){}function c(e){return"number"==typeof e&&!isNaN(e)}function l(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()}function d(e){return Array.isArray?Array.isArray(e):"[object array]"===Object.prototype.toString.call(e).toLowerCase()}function f(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,n=[],r=1;r<e.length;){var i=e.substring(r,r+2);n.push(parseInt(i,16)),r+=2}return n.push(t),"rgba(".concat(n.join(","),")")}function h(e){if(isNaN(e))return"00:00:00";var t=(e=Math.round(e))>=3600?Math.floor(e/3600):0,n=e%3600>=60?Math.floor(e%3600/60):0;return n=n>=10?n:"0"+n,e=(e=parseInt(n,10)>=0?e%3600%60:e)>=10?e:"0"+e,t>0?(t>9?t:"0"+t)+":"+n+":"+e:n+":"+e}function p(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return e.replace("http://","//").replace("https://","//").replace(".qiyipic",".iqiyipic")}function v(e){if(e)return function(){return(arguments.length>0&&arguments[0]!==undefined?arguments[0]:"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}(e)}function y(e){var t=e.key,n=e.times,r=e.hours,i=void 0===r?24:r,a=JSON.parse(window.localStorage.getItem(t)||'{ "times":0 , "temp":0}'),o=(new Date).getTime();return!a.times||(!(o-a.temp<36e5*i)||a.times<n)}function g(e,t,n,r){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return t&&function(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break}(t,(function(t,a){!n&&i(e,a)||(r&&"string"!=typeof t&&"boolean"!=typeof t?(e[a]||(e[a]={}),g(e[a],t,n,r)):e[a]=t)})),e}var m={QP005:"QP005",QP006:"QP006",QP007:"QP007",QP008:"QP008",QP009:"QP009",QP0010:"QP0010",QP0013:"QP0013",QP0014:"QP0014",QP0017:"QP0017",QP0018:"QP0018",QP0023:"QP0023",QP0025:"QP0025",QP0027:"QP0027",QP0030:"QP0030",QP0031:"QP0031",QP0033:"QP0033",QP0034:"QP0034",QP0035:"QP0035",QP0036:"QP0036",QP0037:"QP0037",QP0038:"QP0038"},_={};function b(e){return!!e&&!0!==e.headersSent}var x={get:function(e,t){t=g({memory:!1,rawStr:null},t,!0),r&&(t.memory=!1);var n=t,i=n.memory,o=n.rawStr,s="";if(i&&a.call(_,e))s=_[e];else{if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var u=r?o||"":document.cookie,c=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(u);c&&(s=c[2]||"")}"string"==typeof s&&(s=decodeURIComponent(s)),i&&(_[e]=s)}return s},set:function(e,t,n){var i=n=n||{},a=i.expires,o=i.path,s=i.domain,u=i.response;t=encodeURIComponent(t);var c=a;if("number"==typeof n.expires&&(c=a<=0?new Date(0):new Date).setTime(c.getTime()+a),r){if(b(u)&&u.cookie){var l={};o&&(l.path=o),a&&(l.expires=c.toUTCString()),s&&(l.domain=s),u.cookie(e,t,Object.assign({path:"/",secure:!0},l))}}else delete _[e],document.cookie=e+"="+t+(o?"; path="+o:"")+(a?"; expires="+c.toUTCString():"")+(s?"; domain="+s:"")},remove:function(e,t){(t=t||{}).expires=-1;var n=t.response;r?b(n)&&(n.clearCookie&&n.clearCookie(e,t),n.unstate&&n.unstate(e)):this.set(e,"",t)}};function k(){var e=new Date;return e.getFullYear()+""+(e.getMonth()+1)+e.getDate()}var w=m.QP0036;function S(e){var t=x.get(w,{memory:!0,rawStr:e||null}),n=k(),r=0;return t&&(n=(t=t.split("|"))[0],r=parseFloat(t[1])),{day:n,totalTime:r}}function T(e){var t=S(),n=k();t.day===n?t.totalTime+=e:t.totalTime=e;var r=t.totalTime;"".concat(r).replace(/\d+\./,"").length>3&&(r=r.toFixed(3)),x.set(w,n+"|"+r,{expires:31536e6,path:"/",domain:"iqiyi.com"})}var P=function(e,t){return e<<t|e>>>32-t},E=function(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a},A=function(e,t,n,r,i,a,o){return e=E(e,E(E(function(e,t,n){return e&t|~e&n}(t,n,r),i),o)),E(P(e,a),t)},I=function(e,t,n,r,i,a,o){return e=E(e,E(E(function(e,t,n){return e&n|t&~n}(t,n,r),i),o)),E(P(e,a),t)},D=function(e,t,n,r,i,a,o){return e=E(e,E(E(function(e,t,n){return e^t^n}(t,n,r),i),o)),E(P(e,a),t)},L=function(e,t,n,r,i,a,o){return e=E(e,E(E(function(e,t,n){return t^(e|~n)}(t,n,r),i),o)),E(P(e,a),t)},O=function(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n};function R(e){e+="";var t,n,r,i,a,o,s,u,c,l=Array();for(e=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e),l=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),a=Array(i-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[i-2]=n<<3,a[i-1]=n>>>29,a}(e),o=1732584193,s=4023233417,u=2562383102,c=271733878,t=0;t<l.length;t+=16)n=o,r=s,i=u,a=c,o=A(o,s,u,c,l[t+0],7,3614090360),c=A(c,o,s,u,l[t+1],12,3905402710),u=A(u,c,o,s,l[t+2],17,606105819),s=A(s,u,c,o,l[t+3],22,3250441966),o=A(o,s,u,c,l[t+4],7,4118548399),c=A(c,o,s,u,l[t+5],12,1200080426),u=A(u,c,o,s,l[t+6],17,2821735955),s=A(s,u,c,o,l[t+7],22,4249261313),o=A(o,s,u,c,l[t+8],7,1770035416),c=A(c,o,s,u,l[t+9],12,2336552879),u=A(u,c,o,s,l[t+10],17,4294925233),s=A(s,u,c,o,l[t+11],22,2304563134),o=A(o,s,u,c,l[t+12],7,1804603682),c=A(c,o,s,u,l[t+13],12,4254626195),u=A(u,c,o,s,l[t+14],17,2792965006),s=A(s,u,c,o,l[t+15],22,1236535329),o=I(o,s,u,c,l[t+1],5,4129170786),c=I(c,o,s,u,l[t+6],9,3225465664),u=I(u,c,o,s,l[t+11],14,643717713),s=I(s,u,c,o,l[t+0],20,3921069994),o=I(o,s,u,c,l[t+5],5,3593408605),c=I(c,o,s,u,l[t+10],9,38016083),u=I(u,c,o,s,l[t+15],14,3634488961),s=I(s,u,c,o,l[t+4],20,3889429448),o=I(o,s,u,c,l[t+9],5,568446438),c=I(c,o,s,u,l[t+14],9,3275163606),u=I(u,c,o,s,l[t+3],14,4107603335),s=I(s,u,c,o,l[t+8],20,1163531501),o=I(o,s,u,c,l[t+13],5,2850285829),c=I(c,o,s,u,l[t+2],9,4243563512),u=I(u,c,o,s,l[t+7],14,1735328473),s=I(s,u,c,o,l[t+12],20,2368359562),o=D(o,s,u,c,l[t+5],4,4294588738),c=D(c,o,s,u,l[t+8],11,2272392833),u=D(u,c,o,s,l[t+11],16,1839030562),s=D(s,u,c,o,l[t+14],23,4259657740),o=D(o,s,u,c,l[t+1],4,2763975236),c=D(c,o,s,u,l[t+4],11,1272893353),u=D(u,c,o,s,l[t+7],16,4139469664),s=D(s,u,c,o,l[t+10],23,3200236656),o=D(o,s,u,c,l[t+13],4,681279174),c=D(c,o,s,u,l[t+0],11,3936430074),u=D(u,c,o,s,l[t+3],16,3572445317),s=D(s,u,c,o,l[t+6],23,76029189),o=D(o,s,u,c,l[t+9],4,3654602809),c=D(c,o,s,u,l[t+12],11,3873151461),u=D(u,c,o,s,l[t+15],16,530742520),s=D(s,u,c,o,l[t+2],23,3299628645),o=L(o,s,u,c,l[t+0],6,4096336452),c=L(c,o,s,u,l[t+7],10,1126891415),u=L(u,c,o,s,l[t+14],15,2878612391),s=L(s,u,c,o,l[t+5],21,4237533241),o=L(o,s,u,c,l[t+12],6,1700485571),c=L(c,o,s,u,l[t+3],10,2399980690),u=L(u,c,o,s,l[t+10],15,4293915773),s=L(s,u,c,o,l[t+1],21,2240044497),o=L(o,s,u,c,l[t+8],6,1873313359),c=L(c,o,s,u,l[t+15],10,4264355552),u=L(u,c,o,s,l[t+6],15,2734768916),s=L(s,u,c,o,l[t+13],21,1309151649),o=L(o,s,u,c,l[t+4],6,4149444226),c=L(c,o,s,u,l[t+11],10,3174756917),u=L(u,c,o,s,l[t+2],15,718787259),s=L(s,u,c,o,l[t+9],21,3951481745),o=E(o,n),s=E(s,r),u=E(u,i),c=E(c,a);return(O(o)+O(s)+O(u)+O(c)).toLowerCase()}var C={};function M(e,t){r||(C[e]=t)}var B={generate:function(e){var t=R((e=parseInt(e,10))+"IQIYI"+(new Date).getTime());return M(e,t),t},getEpisodeId:function(e){var t;for(var n in C)if(C[n]===e){t=n;break}return parseInt(t,10)},getEventId:function(e){return C[e]||""},setEventId:M},N="01010031010000000000",F="01080031010000000000",q="03020031010000000000",j="03030031010000000000",U="02020031010000000000",V="02020031010000000000",H="02030031010000000000";function z(e){return e.browser.iPad?j:e.os.mac?F:e.os.androidTablet?q:U}var G,W=n(103),K=n.n(W),$=n(104),Y=n.n($),Q={100:{nbid:100,value:"极速",qipu:"jisu",obid:96},300:{nbid:300,value:"高清",qipu:"600",obid:2},400:{nbid:400,value:"超清",qipu:"1000",obid:3},500:{nbid:500,value:"720P",qipu:"720P",obid:4},600:{nbid:600,value:"1080P",qipu:"1080P",obid:5},601:{nbid:601,value:"爱奇艺HDR",qipu:"HDR",obid:51},610:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},700:{nbid:700,value:"2K",qipu:"2K",obid:6},800:{nbid:800,value:"4K",qipu:"4K",obid:10},1020:{nbid:1020,value:"8K",qipu:"8K",obid:41},96:{nbid:100,value:"极速",qipu:"jisu",obid:96},2:{nbid:300,value:"高清",qipu:"600",obid:2},3:{nbid:400,value:"超清",qipu:"1000",obid:3},4:{nbid:500,value:"720P",qipu:"720P",obid:4},5:{nbid:600,value:"1080P",qipu:"1080P",obid:5},51:{nbid:601,value:"爱奇艺HDR",qipu:"HDR",obid:51},27:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},6:{nbid:700,value:"2K",qipu:"2K",obid:6},10:{nbid:800,value:"4K",qipu:"4K",obid:10},41:{nbid:1020,value:"8K",qipu:"8K",obid:41}},J={getNewVd:function(e){return Q[e]?Q[e].nbid:""},getOldVd:function(e){return Q[e]?Q[e].obid:""}},X=K()((function Lt(e,t,n,r,i,a,o,s,u,c,l,d,f,h,p,v,y,g,m,_,b){Y()(this,Lt),this.vd=e,this.bid=J.getNewVd(e),this.vid=t,this.dr=y,this.fr=g,this.mk=m,this.ml=_,this.duration=r,this.vsize=i,this.realArea=a,this.isUsable=o,this.isLimit=s||!1,this.ever=p,this.code=v,u&&(this.limitReason=u||[]),this.fileFormat=n,this.playlist=c,this.drmType=l||1,null!==d&&(this.watermark=d),this.mver=parseInt(f,10),h&&(this.a=h),this.drm=b})),Z=(n(208),"-1"),ee={get:function(e){if(G)Z=G.tryGetFingerPrint();else{if("-1"===Z)try{Z=x.get("__dfp",{rawStr:e?e.cookie:null})}catch(r){Z=""}if(""!==Z){var t=Z.split("@"),n=(new Date).getTime();3==t.length&&Number(t[2])<=n&&n<=Number(t[1])&&(Z=t[0])}}return Z||""},setSDK:function(e){G=e}},te={CLEARKEY:"org.w3.clearkey",WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready",PLAYREADY_CC:"com.chromecast.playready"},ne=n(85),re=n.n(ne),ie=n(37),ae=n.n(ie);n(108),n(84),n(124),n(131),n(79),n(296),n(170),n(166);function oe(e,t,n){var i="",a={},o={},s="",u=t.toLowerCase();o.userAgent=u;var c="";c=n&&n.effectiveType?n.effectiveType:(c=u.match(/NetType\/\w+/)?u.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/","");var l=u.match(/rtrident/),d=!l&&u.match(/(ipad).*os\s([\d_]+)/),f=!l&&!d&&u.match(/(iphone\sos)\s([\d_]+)/),h=u.match(/Android\s+([\d.]+)/i),p=u.match(/(?:redmi|hm) ([\w ]+) build/i);u.match(/iqiyireader iqiyireaderversion\/([\d.]+)/i),u.match(/iqiyiversion_reader\/([\d.]+)/i);if(o.IE11=/rv\:11/.test(u),o.IE=/msie/.test(u)||o.IE11,o.IE6=/msie 6/.test(u),o.IE7=/msie 7/.test(u),o.IE8=/msie 8/.test(u),o.IE9=/msie 9/.test(u),o.IE10=/msie 10/.test(u),o.EDGE=/edge/.test(u)||/edg/.test(u),o.PWA=/\(Edge Side Panel\)/.test(u),o.UWP=/UWP/.test(u),o.iPhone=/iphone os/.test(u)&&!l,o.iPhone4=/iphone os [45]_/.test(u)&&!l,o.iPad=/ipad/.test(u)&&!l,o.iPod=/iPod/i.test(u)&&!l,o.isTouch="undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),o.CHROMEIOS=/crios/.test(u),o.CHROME=/chrome/.test(u)&&!o.EDGE,o.SAFARI=/safari/.test(u)&&!/chrome/.test(u),o.FIREFOX=/firefox/.test(u),o.mobile=/mobile/gi.test(u),o.mobileSafari=o.iPhone||o.iPhone||o.iPad,o.WECHAT=/(wechat)|(micromessenger)/gi.test(u),o.SmartTV=/SMART-TV/gi.test(u),o.BAIDU=/baidubrowser/gi.test(u),o.BAIDU_BOX=/baiduboxapp/gi.test(u),o.HUAWEI=/huaweibrowser/gi.test(u),o.VIVO=/vivobrowser/gi.test(u),o.MIUI=/miuibrowser/gi.test(u),o.MIUI_VIDEO=/miuivideo/gi.test(u),o.CHROME){var v=/chrome\/([\d\.]+) /gi.exec(u)[1];if(v){o.version=parseInt(v,10);var y=v.split(".");y.length>1&&(o.minorVersion=parseInt(y[1],10)),y.length>2&&(o.buildVersion=parseInt(y[2],10))}else o.version=0}if(o.EDGE){var g=/edge\/([\d\.]+)/gi.exec(u)||/edg\/([\d\.]+)/gi.exec(u);o.version=g?parseInt(g[1],10):0}if(o.SAFARI){var m=/version\/([\d.]+).*safari/gi.exec(u);o.version=m?parseInt(m[1],10):0}p&&(o.redmi=p);var _=/(macintosh|macintel|macppc|mac68k|macos)/i.test(u),b=/X11/.test(u)&&!_,x=/win/i.test(u)&&!b,k=/android/.test(u);a.win=x,a.mac=_,a.android=k,a.androidMobile=k&&o.mobile,a.androidTablet=k&&(!o.mobile||/pad/i.test(u)),h&&(a.version=h[1]),a.ios=!1,f&&(a.ios=!0,a.version=f[2].replace(/_/g,".")),d&&(a.ios=!0,a.version=d[2].replace(/_/g,".")),o.iPod&&(a.ios=!0),i=o.iPad?"b85da1cf3ae44351":"b6c13e26323c537d",a.isMobileTerminal=a.ios||a.android,a.android&&(o.QQ=/\sQQ/gi.test(u)&&/mqqbrowser/gi.test(u),o.QQBROWSER=!/\sQQ/g.test(u)&&/mqqbrowser/gi.test(u)),a.ios&&(o.QQ=/\sQQ/gi.test(u)&&!/mqqbrowser/gi.test(u),o.QQBROWSER=!/\sQQ/gi.test(u)&&/mqqbrowser/gi.test(u));var w=function(){return o.iPad?j:a.mac?F:a.androidTablet?q:a.ios?H:a.androidMobile?V:N},S="m3u8";/__pmode__=m3u8/.test(e)?S="m3u8":/__pmode__=mp4/.test(e)&&(S="mp4");return{browser:o,os:a,code:i,getPtid:function(){return r?w():s||w()},setPtid:function(e){s=e},browserName:function(){var e="";return o.CHROME?e="CHROME":o.SAFARI?e="SAFARI":o.FIREFOX?e="FIREFOX":o.QQ?e="QQ":o.WECHAT?e="WECHAT":o.IE?e="IE":o.IE6?e="IE6":o.IE7?e="IE7":o.IE8?e="IE8":o.IE9?e="IE9":o.IE10?e="IE10":o.EDGE?e="EDGE":o.mobileSafari?e="mobileSafari":a.ios||a.ios?e="ios":a.androidMobile?e="androidMobile":a.androidTablet&&(e="androidTablet"),e},network:c,playerMode:S,touchEventName:function(e){if(!e)return"";return o.SAFARI&&a.ios||a.android?{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e]:e}}}var se=oe("undefined"==typeof window?"":window.location.href,"undefined"==typeof navigator?"":navigator.userAgent,"undefined"==typeof navigator?"":navigator.connection);function ue(e){return r?oe(e.url,e.userAgent):se}var ce=!r&&"undefined"!=typeof window&&!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration);function le(e,t){return function(){return new Promise((function(n){var i={},a=ue(t),o=a.browser,s=a.os,u=function(e,t){if(e&&t){var n=t.win,r=t.mac;if(r&&e.SAFARI)return!0;if(r&&e.EDGE)return!0;if((n||r)&&e.CHROME)return!0}return!1}(o,s);e.forEach((function(e){var t=e.split(";")[0];if(r)(/vp09/.test(e)&&(o.CHROME&&o.version>=60||o.FIREFOX&&o.version>=59)||/av01/.test(e)&&(o.CHROME&&o.version>=79||o.FIREFOX&&o.version>=67)||/hvc1/.test(e)&&u)&&(i[e]=!0,i[t]=i[t]||i[e]);else if(MediaSource&&MediaSource.isTypeSupported)try{/hvc1/.test(e)?u&&(i[e]=MediaSource.isTypeSupported(e),i[t]=i[t]||i[e]):/dv/.test(e)?i[e]=!!window&&window.matchMedia("(color-gamut:p3)").matches:(i[e]=MediaSource.isTypeSupported(e),i[t]=i[t]||i[e])}catch(n){}})),n(i)}))}}function de(e){var t=e.drmKeySystems,n=e.svrCtx,i=new Map;return i.set("media",le(['video/mp4; codecs="hvc1.1.6.L93.90"','video/mp4; codecs="dv"','video/webm; codecs="vp09.00.40.08"','video/webm; codecs="av01.0.08M.08"'],n)),i.set("drm",function(e,t){return re()(ae.a.mark((function n(){var i,a,o;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={status:"fullfilled"},a=[],(r||ce)&&(o=[{videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]}],e.forEach((function(e){var n=null;if(r){var s=t.platform.browser;n=new Promise((function(t){switch(e){case te.PLAYREADY:case te.PLAYREADY_CC:s.EDGE&&(i[e]={persistentState:!0});break;case te.WIDEVINE:(s.CHROME&&s.version>=75||s.FIREFOX&&s.version>=47)&&(i[e]={persistentState:!0})}t()}))}else n=new Promise((function(t){var n=setTimeout((function(){i.status="pending",r()}),3e3),r=function(){clearTimeout(n),t()};try{navigator.requestMediaKeySystemAccess(e,o).then((function(t){var n=t.getConfiguration().sessionTypes,a=!!n&&n.indexOf("persistent-license")>=0;i[e]={persistentState:a},r()}))["catch"]((function(){i[e]=null,r()}))}catch(a){r()}}));n&&a.push(n)}))),n.abrupt("return",Promise.all(a).then((function(){return i})));case 4:case"end":return n.stop()}}),n)})))}(t,n)),i.set("domParser",function(e){return function(){return new Promise((function(t){var n=!1;if(r)e&&(n=!0);else try{window.DOMParser&&(n=!!new DOMParser)}catch(i){}t(n)}))}}(n)),i.set("hevc",re()(ae.a.mark((function a(){var e;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=9;break}if(e={type:"file",video:{contentType:'video/mp4;codecs="hvc1.1.6.L93.90"',width:4096,height:2160,bitrate:1e4,framerate:30}},!navigator||!navigator.mediaCapabilities){t.next=6;break}return t.abrupt("return",navigator.mediaCapabilities.decodingInfo(e));case 6:case 9:return t.abrupt("return",null);case 7:t.next=10;break;case 10:case"end":return t.stop()}}),a)})))),i}function fe(e){return he.apply(this,arguments)}function he(){return(he=re()(ae.a.mark((function e(t){var n,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],de({drmKeySystems:[te.WIDEVINE,te.PLAYREADY],svrCtx:t}).forEach((function(e,t){n.push(t),r.push(e())})),e.abrupt("return",Promise.all(r).then((function(e){for(var t={},r=0;r<n.length;r++)t[n[r]]=e[r];return t})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return e=1===parseInt(e,10)?1===parseInt(t)||"true"===t?1:2:0}function ve(e){return!!((e+="")&&e.length>2&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&(e=parseInt(e,10))>0&&e>9e7)}n(309);var ye=function(e){var t="",n="",r="",i="",a=e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/);return a&&(t=a[1],n=a[2],r=a[3],i=a[4]),{protocol:t,host:n,port:r,path:i}},ge={parse:ye,query:function(e,t){1===arguments.length&&(t=e,e=window.location.href);var n=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),r=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)",""),i=e.match(r);return i?i[2]:""},query2Json:function(e){for(var t,n,r,i=e.substr(e.lastIndexOf("?")+1).split("&"),a=i.length,o={},s=0;s<a;s++)i[s]&&(t=(r=i[s].split("=")).shift(),n=r.join("="),void 0===o[t]&&(o[t]=n));return o},filename:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n="";if(t)n=e;else{var r=ye(e);n=r&&r.path||""}var i=n.replace(/^.*[\\\/]/,"");return i.split(".")[0]}};function me(e){var t=(x.get("QC005",{memory:!0,rawStr:r&&e?e.cookie:null})||"").substring(0,1),n=(parseInt(t,16),r?e.url:window.location.href),i=r?e.platform.browser.CHROME&&e.platform.browser.version>=78:se.browser.CHROME&&se.browser.version>=78;return{canaryVP9_P2P:false,canaryVP9_CDN:false,canaryVP9:false,canaryAV1_P2P:i,canaryAV1_CDN:false,canaryAV1:i||false,canaryHEVC:"true"===ge.query(n,"__hevc__"),canaryDCache:!0,queryBid:parseInt(ge.query(n,"__bid__"))||0}}var _e,be=n(137),xe=n.n(be),ke=(n(226),Object.create||function(e){var t=function(){};return t.prototype=e,new t}),we=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},Se=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},Te=50,Pe=function(){function e(){Y()(this,e),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=ke(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}return K()(e,[{key:"setMaxListeners",value:function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this}},{key:"getMaxListeners",value:function(){return Ae(this)}},{key:"emit",value:function(e){var t,n,r,i,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=o[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:Ie(n,c,this);break;case 2:De(n,c,this,arguments[1]);break;case 3:Le(n,c,this,arguments[1],arguments[2]);break;case 4:Oe(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];Re(n,c,this,i)}return!0}},{key:"on",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{highPriority:!1};return"object"!=xe()(n)&&(n={}),Ce(this,e,t,n)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},i=Se.call(Be,r);return i.listener=n,r.wrapFn=i,i}(this,e,t)),this}},{key:"off",value:function(e,t){return Me.call(this,e,t)}},{key:"un",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){var t,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=ke(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=ke(null):delete n[e]),this;if(0===arguments.length){var i,a=we(n);for(r=0;r<a.length;++r)"off"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=ke(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.off(e,t[r]);return this}},{key:"listeners",value:function(e){return Ne(this,e,!0)}},{key:"rawListeners",value:function(e){return Ne(this,e,!1)}},{key:"listenerCount",value:function(){return e.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Fe.call(e,t)}}]),e}();try{var Ee={};Object.defineProperty&&Object.defineProperty(Ee,"x",{value:0}),_e=0===Ee.x}catch(Dt){_e=!1}function Ae(e){return e._maxListeners===undefined?Pe.defaultMaxListeners:e._maxListeners}function Ie(e,t,n){if(t)e.call(n);else for(var r=e.length,i=qe(e,r),a=0;a<r;++a)try{i[a].call(n)}catch(o){console.error(o)}}function De(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=qe(e,i),o=0;o<i;++o)try{a[o].call(n,r)}catch(s){console.error(s)}}function Le(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=qe(e,a),s=0;s<a;++s)try{o[s].call(n,r,i)}catch(u){console.error(u)}}function Oe(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=qe(e,o),u=0;u<o;++u)try{s[u].call(n,r,i,a)}catch(c){console.error(c)}}function Re(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=qe(e,i),o=0;o<i;++o)try{a[o].apply(n,r)}catch(s){console.error(s)}}function Ce(e,t,n){var r,i,a,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},s={highPriority:!!o.highPriority};if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=ke(null),e._eventsCount=0),a){if("function"==typeof a?a=i[t]=[a,n]:s.highPriority?a.shift(n):a.push(n),!a.warned&&(r=Ae(e))&&r>0&&a.length>r){a.warned=!0;var u=new Error("Possible Dispatcher memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"===("undefined"==typeof console?"undefined":xe()(console))&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=i[t]=n,++e._eventsCount;return e}function Me(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=ke(null):(delete r[e],r.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.off&&this.emit("off",e,o||t)}return this}function Be(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function Ne(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):qe(i,i.length):[]}function Fe(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function qe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}_e?Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return Te},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');Te=e}}):Pe.defaultMaxListeners=Te;n(74),n(213),n(194);var je={stringify:function(e,t,n){try{return JSON.stringify(e,t,n)}catch(r){}return""},parse:function(e,t){try{return JSON.parse(e,t)}catch(n){}return{}}},Ue=(n(214),["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);function Ve(e){var t,n,r,i={};return e?(e.split("\n").forEach((function(e){if(r=e.indexOf(":"),t=e.substr(0,r).trim().toLowerCase(),n=e.substr(r+1).trim(),t){if(i[t]&&Ue.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}var He={},ze={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},Ge={"*":null,text:null,html:null,xml:null,json:function(e){return je.parse(e)}},We={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:u,success:u,failure:u};function Ke(e){var t=[];if("object"==xe()(e))for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")}function $e(e){g(e=e||{},We);var t=e.url,n=e.dataType,i=e.params||{},a=e.success,o=e.failure;if(t){var s=function(){var n=re()(ae.a.mark((function a(){var n,o;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=Ke(i),(o={method:e.method,headers:e.headers,body:e.data||null,withCredentials:e.withCredentials,timeout:e.timeout,params:i}).url=t+(n.length>0?(/\?/i.test(t)?"&":"?")+n:""),"function"!=typeof e.beforeSend){a.next=7;break}return a.next=6,e.beforeSend(o);case 6:o=a.sent;case 7:r?c(o):u(o);case 8:case"end":return a.stop()}}),a)})));return function(){return n.apply(this,arguments)}}();s()}function u(t){var r=t.url,i=t.method,s=t.headers,u=t.body,c=t.withCredentials,d=t.timeout,f="",h=!1,p=new XMLHttpRequest,v={url:r,request:p,response:null,message:""};if(p.withCredentials=c,p.onreadystatechange=function(){var t;if(f+=", readyState = "+p.readyState,4==p.readyState)if(t=Ge[n]?Ge[n](p.responseText):p.responseText,f+=", status = "+p.status+", statusText = "+p.statusText,200==p.status){if("json"===n&&"string"==typeof t)try{t=JSON.parse(t)}catch(u){return v.message="JsonOperateError: ".concat(u.message,", ").concat(r),v.response={status:p.status,headers:s,data:t},void o(v.message,v)}a(t,{status:p.status,headers:Ve(p.getAllResponseHeaders()),data:t})}else if(!h){h=!0;var i="";try{i=JSON.stringify(t)}catch(u){i="JsonOperateError: ".concat(u.message,", ").concat(r)}f+=", data = "+i+"url = "+r,v.message="xhr error, time = "+e.timeout+f,v.response={status:p.status,headers:s,data:t},o(v.message,v,p.status)}},p.ontimeout=function(t){if(!h){h=!0;var n="xhr timeout, time = "+e.timeout+", readyState = "+p.readyState+", status = "+p.status+", data = "+je.stringify(t)+"url = "+r;v.message=n,v.response=null,o(v.message,v)}},p.open(i,r,!0),p.timeout=d,p.setRequestHeader("Accept",ze[n]),l(s))for(var y in s){null!==s[y]&&p.setRequestHeader(y,s[y])}p.send(u)}function c(e){var t=e.url,r=e.method,i=e.headers,s=e.body,u=e.withCredentials,c=e.timeout;globalThis.axios.get(t,{method:r,headers:i,body:s,timeout:c,withCredentials:u}).then((function(e){var r=e.status,i=e.headers,s=e.data,u=e.request;if(200===r)"json"===n&&"string"==typeof res&&(s=je.parse(s)),a(s,{status:r,headers:i,data:s});else{var c={message:"http fail, ".concat(r,", url=").concat(t,", headers=").concat(je.stringify(i),", detail=").concat(je.stringify(s)),request:u,response:{status:r,headers:i,data:s},url:t};o(c.message,c)}}),(function(e){o("http error, ".concat(t,", detail=").concat(je.stringify(e)),e)}))}}function Ye(){return Ye=re()(ae.a.mark((function e(t){var n,r,i,a,o,s,u,c,l,d,f,h,p,v,y,m,_,b,x,k,w,S,T;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(t=t||{},We),n=t.url,r=t.params||{},i=Ke(r),a=n+(i.length>0?(/\?/i.test(n)?"&":"?")+i:""),o=document,s=t.complete,u=t.success,c=t.failure,l=(t.callbackhead?t.callbackhead:"Q")+R(t.fixedCallback||a),d=!!t.memory,f=R(a),h=He[f],a){e.next=16;break}return e.abrupt("return");case 16:if(!(d&&h&&u)){e.next=19;break}return u(h),e.abrupt("return");case 19:if(p=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";v();var i={url:n,request:null,response:{status:-1,headers:{},data:t},message:r};switch(e){case 1:d&&(He[f]=t),u(t);break;case 0:c(i.message,i)}s(t)},v=function(){if(window[l]){window[l]=undefined;try{delete window[l]}catch(e){}}},window[l]=function(e){v(),setTimeout((function(){p(1,e)}),0)},m={},(_=o.createElement("script")).async=!0,_.type="text/javascript",_.charset=t.charset,b=function(){if(_)try{_.onload(null,!0)}catch(e){}},_.abort=b,_.onload=_.onreadystatechange=function(e,t){(t||!_.readyState||/loaded|complete/.test(_.readyState))&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),_=null,clearTimeout(y))},_.onerror=function(e){p(0,null,e?e.stack||e.message:"script onerror, message is null"),b()},y=setTimeout((function(){p(0,null,"script load timeout"),b()}),t.timeout),(x={})[t.jsonpCallback]=l,g(r,x,!0),t.isSort&&1==t.isSort){for(S in k=[],w="",t.params)k.push(S+"="+t.params[S]);for(k.sort(),T=0;T<k.length;T++)T===k.length-1?w+=k[T]:w+=k[T]+"&";m.url=n+(/\?/i.test(n)?"&":"?")+w}else m.url=a+(/\?/i.test(a)?"&":"?")+Ke(x);if(m.params=r,"function"!=typeof t.beforeSend){e.next=44;break}return e.next=40,t.beforeSend(m);case 40:if(e.t0=e.sent,e.t0){e.next=43;break}e.t0=m;case 43:m=e.t0;case 44:return _.src=m.url,o.getElementsByTagName("head")[0].appendChild(_),e.abrupt("return",_);case 47:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}var Qe={serializeParam:Ke,request:$e,json:function(e){g(e=e||{},We),e.dataType="json",$e(e)},jsonp:function(e){return Ye.apply(this,arguments)},beacon:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof t){var r=g({cache:!1},n,!0);if(e){var i=[];for(var a in!1===r.cache&&(e._=+new Date),e)i.push(a+"="+encodeURIComponent(e[a]));var o=t+(/\?/.test(t)?"&":"?")+i.join("&"),s=new Image;s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,s=null},s.src=o}}}},Je=K()((function Ot(e){return Y()(this,Ot),this.console=console,this.name=e,Ot.ExternalLogger?(this.console=new Ot.ExternalLogger(e),this.console):this.console})),Xe=n(230),Ze=n.n(Xe);function et(e){var t=null,n=r;if("string"==typeof e)try{var i=JSON.parse(e);t=i.payload[i.watermark_group[0]]}catch(y){}else l(e)&&(t=e);if(t)for(var a in t){var o=t[a],s=o.files;o.qde=n,o.qdp={};for(var u,c=0;c<s.length;c++){var d=(u=s[c]).file_name.split("?"),f=Ze()(d,2),h=f[0],p=f[1],v=ge.filename(h);o.qdp[v]||(o.qdp[v]=n?globalThis.mmcEncode(p):p),u.file_name=h}}return t}function tt(e){var t=+new Date,n=/(#EXTINF:\d+)|(\/\/.*\/([^/]+)\.ts\S*)/g;e.indexOf(".265ts")>-1&&(n=/(#EXTINF:\d+)|(\/\/.*\/([^/]+)\.265ts\S*)/g);for(var i,a=[],o=[],s=[],u=[],c=[],l=[],d=r,f={};null!==(i=n.exec(e));)if(i[0].indexOf("#EXTINF")>-1)a.push(parseInt(i[0].replace("#EXTINF:",""),10));else{var h=i[0],p=h.split("?"),v=p[0],y=p[1],g=i[3];if(y){var m=null;(m=y.match(/start=(\d+)/i))&&u.push(parseInt(m[1],10)),(m=y.match(/end=(\d+)/i))&&c.push(parseInt(m[1],10));var _=/sd=(\d+)/gi;if((m=_.exec(y))?s.push(parseInt(m[1],10)):l.push(h),!f[g]){var b=y.substring(_.lastIndex);f[g]=d?globalThis.mmcEncode(b):b}o.push("".concat(v,"?").concat(y.substring(0,_.lastIndex)))}}return r&&console.log("m3u8 parse cost:",new Date-t),{durations:a,urls:o,sds:s,starts:u,ends:c,parts:l,qde:d,qdp:f}}n(390),n(34);var nt=n(231),rt=n.n(nt),it=n(232),at=n.n(it),ot=n(179),st=n.n(ot);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st()(e);if(t){var i=st()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return at()(this,n)}}var ct=null,lt=[],dt=!1,ft=null,ht=function(e){rt()(n,e);var t=ut(n);function n(e){var r;return Y()(this,n),(r=t.call(this)).serverCtx=e,r.vipTypes=[],r.vipLv="",r.__isVip=!1,r}return K()(n,[{key:"isLogin",value:function(){var e=this.serverCtx;return""!==this.getUid(e)}},{key:"getUid",value:function(){var e=this.serverCtx,t={},n=x.get("P00003",{rawStr:e?e.cookie:null});if(null!==n&&""!==n)t.uid=n;else{var r=x.get("QC179",{rawStr:e?e.cookie:null});null!==r&&""!==r&&(r=JSON.parse(r),t.uid=r.uid)}return"undefined"==t.uid||"null"==t.uid?"":t.uid||""}},{key:"passportCookie",value:function(){var e=this.serverCtx;return x.get("P00001",{rawStr:e?e.cookie:null})||""}},{key:"isVip",value:function(e){var t=this;function n(e){var t=e.join(",");return"0"!==t&&""!==t}if(!e)return new Promise((function(e){t.getVipTypes((function(t){return e(n(t))}))}));this.getVipTypes((function(t){return e(n(t),t)}))}},{key:"getVipTypes",value:function(e){if(e){var t=this.serverCtx;if(this.isLogin()||this.clearVipTypes(),lt.push(e),r||!ct){var i=(ct=x.get(m.QP0013,{rawStr:t?t.cookie:null})).match(/[0-9]/g)||[];ct&&i.length!=ct.replace(/,/g,"").length&&(ct="")}if(ct)this.vipTypes=ct.split(","),this.vipLv=ft||"",this.__isVip=dt,n.vipTypesCallback(this.vipTypes);else{if(!r)return 1;this.isLogin()?n.vipTypesCallback([]):n.vipTypesCallback([0])}}}},{key:"clearVipTypes",value:function(){var e=this.serverCtx;x.remove(m.QP0013,{path:"/",domain:"iqiyi.com",response:e?e.response:null}),ct=null}}],[{key:"vipTypesCallback",value:function(e){for(var t=0;t<lt.length;t++)lt[t](e);lt=[]}},{key:"getVipTypes",value:function(){return ct}},{key:"setVipTypes",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};ct=e,t.writeCookie&&x.set(m.QP0013,e,{expires:1296e6,path:"/",domain:"iqiyi.com",response:t.serverCtx?t.serverCtx.response:null})}},{key:"setVipLv",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};ft=e,t.writeCookie&&x.set(m.QP0014,e,{expires:1296e6,path:"/",domain:"iqiyi.com",response:t.serverCtx?t.serverCtx.response:null})}},{key:"setIsVip",value:function(e){dt=e}}]),n}(Pe);function pt(e,t,n){var r=e.req,i=e.res,a=r.url,o=r.headers,s=o["user-agent"],u=o.cookie,c=o.referer,l=o.host,d=(o["x-forwarded-for"]&&o["x-forwarded-for"].startsWith("10.")?o["X-Server-IP"]||o["x-server-ip"]:o["x-forwarded-for"])||r.socket.remoteAddress||r.connection.remoteAddress;console.log(1,a,r.originalUrl,d);var f={request:r,response:i,remoteAddress:d,url:a,host:l,userAgent:s,cookie:u,referer:c,platform:oe(a,s),logger:t||e.logger,serverRequestId:n||e.serverRequestId};return f.user=new ht(f),f.canary=me(f),f}var vt="QC005_NATIVE",yt="QC005",gt=undefined,mt="",_t="undefined"==typeof window?"":window.webEventID||"",bt="",xt=function(){_t="undefined"==typeof window?"":window.webEventID||""},kt=function(){return R(Math.random()+"_"+Math.random())},wt=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"iqiyi.com";x.set(e,t,{expires:n||31536e6,path:"/",domain:r})},St=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t="QC006",n=x.get(t,e);return n||("undefined"!=typeof window&&(window.QiyiPlayerIsNewUser=!0),n=kt(),wt(t,n)),n},Tt=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"http://127.0.0.1:16422/get_client_ver";return new Promise((function(t){var n={ver:"5.2.15.2240",t:(new Date).getTime()||""};Qe.jsonp({url:e,method:"GET",timeout:1e3,memory:!0,params:n,success:function(e){e&&"A00000"===e.code?(window.sessionStorage&&sessionStorage.setItem("clientVer",JSON.stringify(e)),t(e.data)):t(!1)},failure:function(e){console.log("_getPCADeviceId",e),t(!1)}})}))},Pt=function(e){window.iqiyi&&window.iqiyi.nativeCallback?window.iqiyi.nativeCallback("Device","getQiyiId",null,(function(t,n){!n&&t?t&&t.qiyiId&&e(t):e(null)})):e(null)};var Et=function(e){window.iqiyi?Pt(e):function(e,t){"object"!=xe()(e)&&(e=[e]);var n=document.getElementsByTagName("head").item(0)||document.documentElement,r=[],i=e.length-1;!function a(o){r[o]=document.createElement("script"),r[o].setAttribute("type","text/javascript"),r[o].onload=r[o].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),o!=i?a(o+1):"function"==typeof t&&t(!0))},r[o].onerror=r[o].onstalled=function(){"function"==typeof t&&t(!1)},r[o].setAttribute("src",e[o]),n.appendChild(r[o])}(0)}("//statics-web.iqiyi.com/common/jssdk/iqiyiJsBridge-v2-min.js",(function(){Pt(e)}))},At=function(){var e=re()(ae.a.mark((function t(){var e,n,r=arguments;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.length>0&&r[0]!==undefined?r[0]:{};try{n=x.get(yt,e),bt&&n!==bt?(wt(vt,bt,283824e7,".iqiyi.com"),wt(yt,bt,283824e7,".iqiyi.com")):Et(function(){var t=re()(ae.a.mark((function r(t){var i,a,o,s,u,c;return ae.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!t.qiyiId){r.next=4;break}t.qiyiId!==n&&(bt=t.qiyiId,wt(vt,t.qiyiId,283824e7,".iqiyi.com"),wt(yt,t.qiyiId,283824e7,".iqiyi.com")),r.next=21;break;case 4:if(!(i=x.get(vt,e))){r.next=9;break}i!==n&&(bt=i,wt(yt,i,283824e7),window.external&&window.external.nativeCall&&(null===(a=window.external)||void 0===a||a.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-1: ".concat(i)},cmd_context:""}),""))),r.next=21;break;case 9:if(!se.os.win){r.next=21;break}return r.next=12,Tt();case 12:if(!(o=r.sent)||!o.clientid){r.next=17;break}o.clientId!==n&&(bt=o.clientid,wt(vt,o.clientid,283824e7,".iqiyi.com"),wt(yt,o.clientid,283824e7,".iqiyi.com"),window.external&&window.external.nativeCall&&(null===(s=window.external)||void 0===s||s.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-2: ".concat(o.clientid)},cmd_context:""}),""))),r.next=21;break;case 17:return r.next=19,Tt("http://127.0.0.1:16423/get_client_ver");case 19:(u=r.sent)&&u.clientid&&u.clientId!==n&&(bt=u.clientid,wt(vt,u.clientid,283824e7,".iqiyi.com"),wt(yt,u.clientid,283824e7,".iqiyi.com"),window.external&&window.external.nativeCall&&(null===(c=window.external)||void 0===c||c.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from uuid-3: ".concat(u.clientid)},cmd_context:""}),"")));case 21:case"end":return r.stop()}}),r)})));return function(e){return t.apply(this,arguments)}}())}catch(i){console.log("_getPcaQC005",i)}case 2:case"end":return t.stop()}}),t)})));return function(){return e.apply(this,arguments)}}(),It={createUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getQtsid:function(){var e,t=function(){return parseInt(new Date/1e3,10).toString()};if(e=x.get("QC008"),x.get("QC010")&&e)return e;if(/^\d{10}\.\d{10}\.\d{10}\.\d+$/.test(e))(e=e.split("."))[1]=e[2],e[2]=t(),e[3]=parseInt(e[3],10)+1;else{var n=t();e=[n,n,n,"1"]}return e.join("."),e},getJsuid:St,getFluid:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{var t=x.get(yt,e),n=t;return n||(n=kt(),wt(yt,n,283824e7)),n}catch(r){console.log("getFluid",r)}},getWeid:function(){return _t||(_t=window.webEventID||R(St()+"weid"+ +new Date)),_t},getEid:function(){var e="";return mt||(e=St(),mt=R(e+"veid"+1*new Date)),mt},getIsNewUser:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=!1;if(!e&&gt===undefined){var n=m.QP0030,r=parseInt(x.get(n),10);1===r?gt=!1:(gt=!0,wt(n,1,283824e7))}return"undefined"!=typeof window&&(window.QiyiPlayerIsNewUser===undefined&&(window.QiyiPlayerIsNewUser=!1,St()),t=window.QiyiPlayerIsNewUser),t},init:function(){try{window.addEventListener("unload",xt),window.addEventListener("beforeunload",xt),window.addEventListener("pagehide",xt)}catch(e){}},syncNativeQC005:At,setQiyiId:function(e){bt=e}}},function(e,t,n){"use strict";t.a={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_EveryStartPlay:"everystartplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_PatchStartplay:"patchstartplay",Status_MiddStoped:"middstoped",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_ADEveryStartPlay:"adeverystartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdWillPlayEnded:"adwillended",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",Status_ADLoadedMetaData:"adloadedmetadata",Status_Error:"ntferror",Status_Destroy:"ntfdestroy",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_SRC_Attaching:"srcAttaching",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSReady:"vrsready",NTF_VRSDone:"vrsdone",NTF_VRSPreloaded:"vrspreloaded",NTF_VDChangeFail:"ntfvdchangefail",NTF_AUDChanged:"ntfaudchange",NTF_AUDChangeFail:"ntfaudchangefail",NTF_ARES_Info:"ntfaresinfo",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Before_Seeking:"beforeSeeking",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_Recharge:"recharge",NTF_BuyPlay:"buyPlay",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_HandlerPlayOnMobile:"handlerPlayOnMobile",NTF_MutedStartPlay:"mutedStartPlay",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_DelayToPlay:"delaytoplay",NTF_DelayToPlay_End:"delaytoplayend",NTF_Get_Record:"getrecord",NTF_AD_Showtips:"adshowtips",NTF_PLAY_MUTED:"playfailmuted",NTF_FPS_REPORT:"playFPSReport",NTF_IVPACKAGEPARSE_Failed:"IVPackageParse_Failed",NTF_IVPACKAGEPARSE_Finished:"IVPackageParse_Finished",NTF_AD_SingleStart:"aresSingleStart",NTF_AD_SingleEnd:"aresSingleEnd",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_Seeked:"adseeked",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",NTF_AD_BLOCK:"adblock",NTF_ARES_Load:"aresload",NTF_Show_VIPPay:"showVIPPay",NTF_PREVIEW_END:"previewEnd",NTF_TW_BLOCK:"twBlock",NTF_SKIP_PRELUDE:"skipPrelude",NTF_H5_OPEN_APP:"h5openapp",NTF_H5_SHOW_ERROR_PANEL:"h5showerrorpanel",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show",HTTP_ENGINE:"HTTP",ENGINE_TYPE:"KIWI",CDN_LOADERMODE:"CDN",P2P_LOADERMODE:"P2P",EVT_OPEN_VIP:"evt_open_vip",EVT_BANNED:"evt_banned",EVT_ADMAX_2_PLAY:"admax2play",EVT_BANNED_2:"evt_banned_2",CLICK_720P:"click_720P"}},function(e,t,n){"use strict";n(136),n(70),n(159),n(17),n(88),n(218),n(30),n(257),n(110),n(101);var r=n(19),i=n(128);function a(e){try{return localStorage.getItem(e)}catch(t){return null}}function o(e,t){try{localStorage.setItem(e,t)}catch(n){}}var s=0,u=0,c=32,l=0,d=32,f=!1,h=a("absDoMain");a("onP2PLog")&&(f=!0);var p=a("downTime");if(p&&(p=parseInt(p)),p&&Date.now()-p<864e5){var v=a("downMax");v&&(v=parseInt(v)),v&&(c=v)}var y=a("upTime");if(y&&(y=parseInt(y)),y&&Date.now()-y<864e5){var g=a("upMax");g&&(g=parseInt(g)),g&&(d=g)}var m=null;var _=0,b=0,x=0,k=performance.now();var w=[];var S={preSysTime:0,downTime:0};var T=null;var P=Object.defineProperties({updateDownTime:function(e){e>0?0===S.preSysTime&&(S.preSysTime=performance.now()):0!==S.preSysTime&&(S.downTime+=performance.now()-S.preSysTime,S.preSysTime=0)},getDownTime:function(){0!==S.preSysTime&&(S.downTime+=performance.now()-S.preSysTime,S.preSysTime=performance.now());var e=S.downTime;return S.downTime=0,e},stuck:function(){var e=i.a.timestamp();e&&(5===w.length&&w.shift(),w.push(Math.floor(1e3*e)))},getStuckList:function(){if(w.length){var e=w;return w=[],e}return[]},getUserInfo:function(){if(m||(m=a("QP0022")),m){var e=m.split("|");return!e||e.length<2?{}:{userInfo:e[0]+"|"+e[1],idc:e[2],userNetType:e[0],userArea:e[1].split("-")[0],userIP:e[1].split("-")[1]}}return{}},setUserInfo:function(e){m=e,o("QP0022",e)},updateTimeStamp:function(e){if(!(performance.now()-k<=2e3)){var t=i.a.playbackRate();if(t){var n=r.a.accSub(e,b);1e3*n/t>performance.now()-k+1500||n<-1.1?(x=r.a.accAdd(x,Math.max(r.a.accSub(b,_),0)),_=b=e):b=e,k=performance.now()}}},getSumPlayTime:function(){var e=Math.floor(1e3*r.a.accAdd(x,Math.max(r.a.accSub(b,_),0)));return _=b,x=0,e},aid:0,MixWaterMark:!1,trackerStatus:0,platform:0,enableStartSpeed:!1,p2pLog:"",onLog:f,bitrate:0,readTvid:0,readBid:0,readLevelBitrate:0,everMaxBitrate:0,loadLastBitrate:0,absMaxBitrate:0,absOpen:!0,absCheck:!1,getBufferFunc:null,switchAutoDef:null,canSwitchVd:null,startPlayed:null,isAD:function(){return T&&T()},setADFunc:function(e){T=e},getReBufTimeFunc:null,sendPingBack:null,getUserInfoFunc:null,noticeDataArrived:null,checkIsMobius:null,noticeDashRequest:null,playDuration:0,tvId:"",playTvId:"",trackerIP:"",absStatus:0,absEverStatus:"",absAlgorithmDes:"",lastReadSegIndex:0,lastReadTvID:0,fileType:"",pcwBuffer:0,avgBuffer:0,avgBufferCnt:0,cdnSize:0,cdnCostTime:0,p2pSize:0,p2pCostTime:0,openDache:!0,last_errMesaage:"",last_errurl:"",last_cdnIP:"",idc:"",domain:"",loadingBy:"",hasLoadError:!1,inSourceID:"",absInitTVId:"",initMode:"idle",playMode:"idle",authorStatus:"",moviePlaying:!1,videoType:"",isADPlaying:null,preDownTime:0,downTime:0,playState:"",atkMap:new Map,nextInfo:null,lstSeekTime:0,lstPlayTime:0,vcodec:"",readSize:0,loadSize:0,readTime:0,loadTime:0,tempTestStartRWTime:-1,switchMonitorTimer:0,setbid:0,getOBid:null,firstABSRatio:"",firstABSRes:"",firstStartTime:0,majorLoadTvid:0,preLoadTime:0,preLoadSize:0,levelLoad:0,levelBid:0},{bid:{get:function(){return a("bid")},configurable:!0,enumerable:!0},downMax:{get:function(){return c},configurable:!0,enumerable:!0},cdnSpeed:{get:function(){return s},set:function(e){!function(e){(s=e)+u>c&&(o("downMax",(c=s+u).toString()),o("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},downSpeed:{get:function(){return u},set:function(e){!function(e){s+(u=e)>c&&(o("downMax",(c=s+u).toString()),o("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},upMax:{get:function(){return d},configurable:!0,enumerable:!0},upSpeed:{get:function(){return l},set:function(e){!function(e){(l=e)>d&&(o("upMax",(d=l).toString()),o("upTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},absDoMain:{get:function(){return h},configurable:!0,enumerable:!0}});t.a=P},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=0,i="ntf_";t.a={NTF_PLG_Enable:i+r++,NTF_PLG_Disable:i+r++,NTF_PLG_ALL_LOADED:i+r++,NTF_ZOOMOUT_ENTER:i+r++,NTF_ZOOMOUT_LEAVE:i+r++,NTF_VIDEO_INNER_RESIZE:i+r++,NTF_VIEW_BTN_CLICK:i+r++,NTF_Play:i+r++,NTF_Pause:i+r++,NTF_Replay:i+r++,NTF_ChangeVolume:i+r++,NTF_PlayerSmallWindowStatus:i+r++,NTF_HOTKEY_ControlbarShow:i+r++,NTF_METAPANEL_DATA:i+r++,NTF_METAPANEL_STATE_CHANGE:i+r++,NTF_METAPANEL_TRY_COLLAPSE:i+r++,NTF_BARRAGEPANEL_DATA:i+r++,NTF_RIGHTFLOATER_DATA:i+r++,NTF_PAYLAYER_DATA:i+r++,NTF_ControlbarShow:i+r++,NTF_ControlbarHide:i+r++,NTF_ControlbarPosition:i+r++,NTF_DefinitionBtnClick:i+r++,NTF_DefinitionBtnMouseEnter:i+r++,NTF_DefinitionBtnMouseLeave:i+r++,NTF_DefinitionListShow:i+r++,NTF_DefinitionListhide:i+r++,NTF_DefinitionADShow:i+r++,NTF_DefinitionADClick:i+r++,NTF_DefinitionUpdateText:i+r++,NTF_StageSizeChange:i+r++,NTF_FullScreen:i+r++,NTF_WebFullScreen:i+r++,NTF_SetDownLoad:i+r++,NTF_BarrageSelfSend:i+r++,NTF_BarrageSettingChange:i+r++,NTF_HIDE_BOTTOM_TOP:i+r++,NTF_SHOW_BOTTOM_TOP:i+r++,NTF_BOTTOM_MUTUAL_EXCLUSION:i+r++,NTF_SHOW_VIDEOLIST:i+r++,NTF_HIDE_VIDEOLIST:i+r++,NTF_VIDEOLIST_CHANGED:i+r++,NTF_VIDEOLIST_BTN_CLICK:i+r++,NTF_RF_STATE_CHANGE:i+r++,NTF_TOP_HIDE:i+r++,NTF_TOP_SHOW:i+r++,NTF_BOTTOM_HIDE:i+r++,NTF_BOTTOM_SHOW:i+r++,NTF_DOCK_RIGHT_ITEM_SHOW:i+r++,NTF_DOCK_RIGHT_ITEM_HIDE:i+r++,NTF_CLICK_PLAYLIST_BTN:i+r++,NTF_SHOW_PLAYLIST_BTN:i+r++,NTF_HIDE_PLAYLIST_BTN:i+r++,NTF_SEEKBAR_HOVER:i+r++,NTF_SHOW_HEATMAP:i+r++,NTF_HIDE_CONTROLBAR_VIDEOTIP:i+r++,NTF_SHOW_TOAST:i+r++,NTF_SHOW_TIPS:i+r++,NTF_SHOW_SETTING_BOX:i+r++,NTF_SUBTITLES_REGISTER_DOM:i+r++,NTF_USERSET_SKIP_BTN:i+r++,NTF_PROGRESS_SKIP_BTN:i+r++,NTF_KeyVolumeChange:i+r++,NTF_SHOW_LOGIN_PANEL:i+r++,NTF_SHOW_ENDPLAY_PANEL:i+r++,NTF_HIDE_ENDPLAY_PANEL:i+r++,NTF_VideoListChanged:"videolistchanged",NTF_ADDVideoList:"addvideolist",NTF_REMOVEVideoList:"removevideolist",NTF_ClientInstallChecked:"clientinstallchecked",NTF_IV_SWITCH_FromStoryLine:"ivswitchfromstoryline",NTF_IV_REPLAY:"ivreplay",NTF_IV_PLAYEND:"ivplayend",NTF_IV_INTERACTIONSTART:"ivinteractionstart",NTF_IV_INTERACTIONEND:"ivinteractionend",NTF_IV_SHOWSTROYGUIDE:"ivshowstoryguide",NTF_IV_SHOWSTROYLIST:"ivshowstorylinelist",NTF_BACK_TO_IV_MAIN:"ivbacktomain",NTF_FOLLOW_SET_INFO:"followsetinfo",NTF_FOLLOW_CHANGE_STATE:"followchangestate",NTF_STORYLINE_SHOW:i+r++,NTF_STORYLINE_HIDE:i+r++,NTF_GESTURE_ASYNC_CONTROLS:i+r++,NTF_USER_SEEK:i+r++,NTF_BanTipHide:i+r++,NTF_SVP_BTN_SHOW:i+r++,NTF_SHOW_VOICE_BTN:i+r++,NTF_HIDE_VOICE_BTN:i+r++,NTF_VOLUME_CHANGE:i+r++,NTF_SHOW_AUDIOTRACK_BTN:i+r,NTF_MORE_LIST_SHOW_SVP:i+r++,NTF_MORE_LIST_HIDE_SVP:i+r++,NTF_MORE_LIST_SHOW_AUDIO:i+r++,NTF_MORE_LIST_HIDE_AUDIO:i+r++,NTF_MORE_LIST_SHOW_VOICE:i+r++,NTF_MORE_LIST_HIDE_VOICE:i+r++,NTF_MORE_LIST_SHOW_PLAYBACKRATE:i+r++,NTF_MORE_LIST_HIDE_PLAYBACKRATE:i+r++,NTF_MORE_LIST_SHOW_DEFINITION:i+r++,NTF_MORE_LIST_HIDE_DEFINITION:i+r++,NTF_MORE_LIST_UPDATE_DESC:i+r++,NTF_WebFullScreen_BeforeChange:i+r++,NTF_WebFullScreen_AfterChange:i+r++,NTF_WebFullScreen_SetSwitch:i+r++,NTF_FullScreen_BeforeChange:i+r++,NTF_FullScreen_AfterChange:i+r++,NTF_FullScreen_SetSwitch:i+r++,NTF_VideoPercent_Changed:i+r++,NTF_RIGHTBAR_STATUS_CHANGED:i+r++,NTF_EXPANDSCREEN_STATUS_CHANGED:i+r++,NTF_Voice_Change:i+r++,NTF_CTXMenu_Copied:i+r++,NTF_Hotkey_Percent_Seek:i+r++,NTF_Hotkey_Playback_Rate:i+r++,MINI_NTF_PLAY_END:i+r++,MINI_NTF_POSTER_SHOW:i+r++,MINI_NTF_POSTER_HIDE:i+r++,Type_Play:"play",Type_Pause:"pause",Type_Replay:"replay",Type_ExitPic:"exitpicinpic",Type_SEEK_DRAGSTART:"seekdragstart",Type_SEEK_DRAGEND:"seekdragend",NTF_Barrage_SetConfigInfo:i+r++,NTF_Barrage_SetChannelConfigInfo:i+r++,NTF_Barrage_SetSwitch:i+r++,NTF_Barrage_ShowLike:i+r++,NTF_Barrage_ShowMoreLike:i+r++,NTF_Barrage_ShowReport:i+r++,NTF_Barrage_EnsureReport:i+r++,NTF_Barrage_ShowRulePage:i+r++,NTF_Barrage_NotifyBarrageData:i+r++,NTF_Barrage_Send:i+r++,NTF_Barrage_ClearBanWord:i+r++,NTF_Barrage_AddBanWord:i+r++,NTF_Barrage_RemoveBanWord:i+r++,NTF_Barrage_CatchSystemBarrage:i+r++,NTF_Barrage_NotifyGiftInfo:i+r++,NTF_Barrage_ShowSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrageButton:i+r++,NTF_Barrage_RequestBarrageData:i+r++,NTF_Subtitles_Changing:i+r++,NTF_Subtitles_Changed:i+r++,NTF_Subtitles_ChangeFailed:i+r++,NTF_FeedBack_Show:i+r++,NTF_FeedBack_Hide:i+r++,NTF_FeedBack_Panel_show:i+r++,NTF_FeedBack_getInfo:i+r++,NTF_TO_DIVERSION:i+r++,NTF_AIView_ItemClick:i+r++,NTF_AIView_AIResult:i+r++,NTF_AIView_AIFeedback:i+r++,NTF_AIView_CLOSE:i+r++,NTF_AIView_BAIKE_CLOSE:i+r++,NTF_AIView_BAIKE_STATECHANGE:i+r++,NTF_IVOS_REC_DATA_COMPLETE:i+r++,NTF_IVOS_DYN_BOX_DATA_COMPLETE:i+r++,NTF_IVOS_TIP_BOX_DATA_COMPLETE:i+r++,NTF_IVOS_PLAY_BAR_DATA_COMPLETE:i+r++,NTF_IVOS_REQUEST_IN:i+r++,NTF_IVOS_PREVIEW_CLOSE:i+r++,NTF_IVOS_PREVIEW_STARTPLAY:i+r++,NTF_IVOS_STATE_CHANGED:i+r++,NTF_IVOS_SHOW:i+r++,NTF_IVOS_HIDE:i+r++,NTF_SVP_POINTSREFRESH:i+r++,NTF_TVG_BTN_CLICK:i+r++,NTF_SHOW_KB_TIP:i+r++,NTF_CLOSE_KB_TIP:i+r++,NTF_ALBUM_AFTER_FEA:i+r++,NTF_NEXT_VIDEO_BTN_CLICK:i+r++,NTF_NEXT_VIDEO_BTN_HOVER:i+r++,NTF_HIDE_DEFINITION_ITEM:i+r++,NTF_H5_WRAPPER_TOUCH_START_TRIGGER:i+r++,NTF_H5_WRAPPER_TOUCH_MOVE_TRIGGER:i+r++,NTF_H5_WRAPPER_TOUCH_END_TRIGGER:i+r++,NTF_MOBILE_LOADERBAR_TOUCHSTART_TRIGGER:i+r++,NTF_MOBILE_LOADERBAR_TOUCHMOVE_TRIGGER:i+r++,NTF_MOBILE_LOADERBAR_TOUCHEND_TRIGGER:i+r++}},function(e,t,n){"use strict";n(130),n(191),n(218);var r=null;try{window.p2pLog=localStorage.getItem("p2pLog")}catch(c){}var i="__PB__ ",a=function(){var e=new Date;return"".concat(("0000"+e.getFullYear()).slice(-4))+"-".concat(("00"+(e.getMonth()+1)).slice(-2))+"-".concat(("00"+e.getDate()).slice(-2))+" ".concat(("00"+e.getHours()).slice(-2))+":".concat(("00"+e.getMinutes()).slice(-2))+":".concat(("00"+e.getSeconds()).slice(-2))+".".concat(("000"+e.getMilliseconds()).slice(-3))},o=0,s=[];function u(e,t){!function(){for(;s.length>1e3||o>=524288;)o-=s.shift().length;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.push(t.join(" ")),o+=s[s.length-1].length}(a(),i+t),r&&r[e](i+t),!window.p2pLog&&r||console[e](a(),i+t)}t.a=Object.defineProperties({debug:function(e){u("debug",e)},log:function(e){u("log",e)},info:function(e){u("info",e)},warn:function(e){u("warn",e)},error:function(e){u("error",e)},getLog:function(){for(;s.length>1e3||o>=524288;)o-=s.shift().length;var e=s.join("\r\n")+"\r\n";return s=[],e}},{logTarget:{set:function(e){r=e},configurable:!0,enumerable:!0}})},function(e,t,n){var r=n(592);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(105)["default"],i=n(113);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"i",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"l",(function(){return h}));var r={mobile:!1,limitP2P:"",onP2P:!0,trackerVersion:3,tracker:[],stun:[],aidList:[],defaultTracker:[],getPeerIDStep:3e4,weedOutPeerStep:3e4,connectPeerStep:2e3,NATTimeoutStep:15e3,connectMax:8,passiveMax:10,RTCMax:1500,RTCPoolSize:50,coolDownTime:3e5,switchPage:!1,closeP2PVidList:[],closeP2PNetList:[],closeP2PFileTypeList:[],closeP2PProvinceList:[]},i={openP2P:!1,p2pUpLoad:!1,memory:0,fastGC:0,cacheMaxLen:50,loadMinLen:30,loadTest:!1},a={cacheMinLen:30,cacheMaxLen:50,300:{cacheMinLen:30,cacheMaxLen:50},500:{cacheMinLen:30,cacheMaxLen:50},600:{cacheMinLen:30,cacheMaxLen:50}},o={dispatchCfg:[8e3,8e3,8e3,8e3],TTFBCfg:[8e3,8e3,8e3,8e3],rcvCfg:[8e3,8e3,8e3,8e3],reLoadCfg:[500,2e3,4e3,6e3],maxBuff:30,mergeChunk:!0},s={open:!1,dispatch:!1},u={subPieceSize:1024,chunkSize:1048576,videoDataSize:0,videoMaxSize:134217728},c={seek_optimize:!1,force_start:!1,force_down:!1,first_load:3,opt:"",reportType:"play"},l={cdn:null,dispatch:null,stuck:null,abs:null,oom:null,exception:null,noPlay:null},d={xhr:!1},f=25,h=60;t.k={version:"1.0.0"}},function(e,t,n){"use strict";t.a={M4S:"m4s",TS:"ts",FTS:"fts",DASH:"dash",VP9:"vp9",AV1:"AV1"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(0).a},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(318);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return L})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return A}));n(121),n(154),n(35),n(70),n(149);var r=n(73),i=n(2),a=n(163),o=n(11),s=n(19),u=n(267),c=n(114),l=n(128),d=n(332),f=n(118),h=!0;var p=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){n+=t[Math.floor(36*Math.random())]}return n.toLowerCase()}(66),v={size:0,sTime:0,eTime:0},y=(r.a.isHTTPS?"https":"http")+"://msg.qy.net/qos?t=9&p1=8_82_820&ct=h5_vod_load",g=!1,m=null,_=0,b=null,x=!0,k=0,w={diy_ver:d.a,diy_vernum:10,diy_uuid:"",diy_dvid:"",diy_platform:0,diy_userip:"",diy_area:"",diy_isp:"",diy_idc:"",diy_hidetime:0,diy_lifetime:0,diy_playtime:0,diy_videotime:0,diy_videotype:"",diy_count:0,diy_step:0,diy_tvid:"",diy_init:0,diy_start_bid:0,diy_set_bid:0,diy_bid:0,diy_setbid:0,diy_readbid:0,diy_start:0,diy_starttime:0,diy_lagcnt:0,diy_rebufercnt:0,diy_lagtime:0,diy_buffer:0,diy_fastinit:0,diy_fastplay:0,diy_tsrcnt:0,diy_ts_drcnt:0,diy_tsfttcnt:0,diy_ts_dfttcnt:0,diy_tssucccnt:0,diy_ts_dsucccnt:0,diy_tsftttime:0,diy_ts_dftttime:0,diy_tstime:0,diy_ts_dtime:0,diy_tssize:0,diy_ts_dsize:0,diy_tserr:"",diy_server_ip:"",diy_p2prcnt:0,diy_p2pconctime:0,diy_p2pconccnt:0,diy_tserrtype:"",diy_ts_derr:"",diy_tsurl:"",diy_ts_lagurl:"",diy_ts_durl:"",diy_ts_dlagurl:"",diy_tm:0,diy_finalerr:"",diy_dispatchcnt:0,diy_dispsucccnt:0,diy_disptime:0,diy_diserrtype:"",diy_dispatcherr:"",diy_dispatchurl:"",diy_p2pbw:0,diy_cdnbw:0,diy_usebw:0,diy_domain:"",diy_bgpreqcnt:0,diy_bgpsucccnt:0,diy_extrainfo:"",diy_info:"",diy_lstplay:0,diy_lstseek:0,diy_seekcnt:0,diy_seekstart:0,diy_seekend:0,diy_seektime:0,diy_vcodec:"",diy_mbread:"",diy_mbload:"",diy_absopt:"",diy_abs:"",diy_absfr:"",diy_absfm:"",diy_absupcnt:0,diy_absuptime:0,diy_absdncnt:0,diy_absdntime:0,diy_evermin:0,diy_evermax:0,diy_480time:0,diy_720time:0,diy_1080time:0,diy_paused:0,diy_dashrcnt:0,diy_dashsucccnt:0,diy_dashtime:0,diy_readrate:0,diy_evermaxrate:0,diy_absmaxbr:0,diy_abs_u_d:0,diy_abs_a_d:0,diy_abs_s_d:0,diy_abslagstep:0,diy_bug:"",diy_a_prebid:0,diy_a_nexbid:0,diy_absswt:0};try{localStorage.getItem("testLogOpen")}catch(C){}var S=Object.assign({},w);function T(e){b&&b.userIP||(b=s.a.getUserInfoFromCookie()),e.diy_uuid=a.b,e.diy_dvid=p,e.diy_platform=i.a.platform,e.diy_userip=b.userIP,e.diy_area=b.userArea,e.diy_isp=b.userNetType,e.diy_idc=i.a.idc,e.diy_domain=i.a.domain,e.diy_tm=Math.floor(Date.now()),e.diy_hidetime=Math.floor(u.a.hideTime()),e.diy_lifetime=Math.floor(performance.now()),e.diy_tvid=i.a.tvId,e.diy_bid=i.a.bitrate,e.diy_videotype=i.a.fileType,e.diy_count=k,e.diy_playtime=i.a.getSumPlayTime(),e.diy_abs=i.a.absAlgorithmDes,e.diy_videotime=Math.floor(1e3*l.a.timestamp()),e.diy_absopt=o.a.reportType,e.diy_lstseek=i.a.lstSeekTime,e.diy_lstplay=i.a.lstPlayTime,e.diy_vcodec=i.a.vcodec,e.diy_readbid=i.a.readBid,e.diy_setbid=i.a.setbid,f.a.levelFlush(),e.diy_evermin=f.a.everMinBid,e.diy_evermax=f.a.everMaxBid,e.diy_480time=f.a.play480Time(),e.diy_720time=f.a.play720Time(),e.diy_1080time=f.a.play1080Time(),f.a.resetTimeSum(),e.diy_readrate=i.a.readLevelBitrate,e.diy_evermaxrate=i.a.everMaxBitrate,-1!==i.a.readTime&&i.a.tempTestStartRWTime>0&&performance.now()>i.a.tempTestStartRWTime&&(e.diy_mbread=i.a.readTime.toFixed(0),e.diy_mbload=i.a.loadTime.toFixed(0),i.a.readTime=i.a.loadTime=-1),h&&i.a.firstABSRatio&&i.a.firstABSRes&&(h=!1,e.diy_absfr=i.a.firstABSRatio,e.diy_absfm=i.a.firstABSRes),e.diy_absmaxbr=i.a.absMaxBitrate,e.diy_paused=l.a.paused()?1:0}var P=performance.now(),E=0;function A(){g&&(clearTimeout(_),_=setTimeout(I,5e3,5e3))}function I(e){clearTimeout(_),5e3!==e&&3e4!==e||g&&(D(!1,e)?5e3===e?_=setTimeout(I,3e4,3e4):e=-1:_=setTimeout(I,e,e))}function D(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!g)return!1;if(!e)if(performance.now()-P>=6e4)E=0,P=performance.now();else{if(E>=20)return clearTimeout(m),m=setTimeout(D,1e3*o.l,!1,1e3*o.l),!1;E++}if(clearTimeout(m),m=0,T(S),S.diy_step=t,S.diy_buffer=i.a.avgBufferCnt>0?Math.floor(i.a.avgBuffer/i.a.avgBufferCnt*1e3):0,i.a.avgBuffer=0,i.a.avgBufferCnt=0,S.diy_buffer<=0&&S.diy_tsrcnt+S.diy_ts_drcnt<=0&&S.diy_dispatchcnt<=0&&S.diy_p2pbw<=0&&S.diy_cdnbw<=0&&""===S.diy_tserr&&""===S.diy_ts_derr&&0===S.diy_init&&0===S.diy_start&&0===S.diy_lagcnt&&0===S.diy_rebufercnt&&""===S.diy_finalerr&&t!==1e3*o.l)return e?O():m=setTimeout(D,1e3*o.l,!1,1e3*o.l),!1;if(x&&1===i.a.absStatus&&performance.now()>6e4&&!S.diy_extrainfo&&(x=!1,S.diy_extrainfo=i.a.absEverStatus),""!==S.diy_tserrtype&&!S.diy_extrainfo&&v.sTime){var n=Math.floor((v.eTime||performance.now())-v.sTime);S.diy_extrainfo="".concat(n,"-").concat(v.size)}var r="";for(var a in S)r+="&".concat(a,"=").concat(S[a]);try{k+=1;var s=new Image;s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,s=null},s.src=y+r+"&random="+Date.now()}catch(C){}return R(S,w),e?O():m=setTimeout(D,1e3*o.l,!1,1e3*o.l),!0}function L(){i.a.platform===c.a.TV&&(y=y.replace("msg.qy.net","msg.ptqy.gitv.tv")),g||(g=!0,clearTimeout(m),m=setTimeout(D,1e3*o.l,!1,1e3*o.l))}function O(){g=!1,clearTimeout(m),m=0,clearTimeout(_),_=0}function R(e,t){if(e)for(var n in t)e[n]=t[n]}t.b=S},function(e,t,n){var r=n(501),i=n(204),a=n(722);r||i(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return w}));var r=n(123),i=n.n(r),a=n(14),o=n.n(a),s=n(15),u=n.n(s),c=(n(22),n(166),n(227),n(27),n(40),n(144),n(36),n(79),n(214),n(95),n(74),n(32),n(178),n(82),n(0)),l=document,d=window,f=/^-ms-/,h=/-([a-z])/g,p=Object.prototype.toString,v=Array.prototype.slice,y=!1;try{addEventListener("test",null,Object.defineProperties({},{passive:{get:function(){return y=!0,!1},configurable:!0,enumerable:!0}}))}catch(S){}function g(e){return e.replace(f,"ms-").replace(h,(function(e,t){return t.toUpperCase()}))}function m(e,t){return e.className&&e.className.baseVal!==undefined?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class")):(" "+e.className+" ").indexOf(" "+t+" ")>=0}function _(e,t){var n=e.className&&e.className.baseVal!==undefined;m(e,t)||(n?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=(e.className?" ":"")+t)}function b(e,t){if(e.className&&e.className.baseVal!==undefined){var n=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");m(e,t)&&e.setAttribute("class",n)}else{for(var r=" "+e.className+" ";r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e.className="function"==typeof r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}}var x=function(){function e(t){return o()(this,e),this._query.call(this,t)}return u()(e,[{key:"find",value:function(t){return this._query(t,new e)}},{key:"findHook",value:function(e){return this.find('[data-player-hook="'.concat(e,'"]'))}},{key:"_query",value:function(e,t){var n,r=this,i=[];if(!e)return this;if("[object nodelist]"===p.call(e).toLowerCase())i=e;else if(e.nodeType)i.push(e);else if(t)for(n=0;n<r.length;n++)i=i.concat(v.call(r[n].querySelectorAll(e)));else i=e.__$__&&"length"in e?v.call(e):l.querySelectorAll(e);for(t=t||r,n=0;n<i.length;n++)t[n]=i[n];return t.__$__=!0,t.length=i.length,t}},{key:"_each",value:function(e){for(var t=this,n=0;n<t.length&&!1!==e.call(t[n],n,t[n]);n++);return t}},{key:"addClass",value:function(e){return this._each((function(t,n){_(n,e)}))}},{key:"removeClass",value:function(e){return this._each((function(t,n){b(n,e)}))}},{key:"replaceClass",value:function(e){return this._each((function(t,n){!function(e,t){var n=t;e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(n,e)}))}},{key:"toggleClass",value:function(e){return this._each((function(t,n){!function(e,t){m(e,t)?b(e,t):_(e,t)}(n,e)}))}},{key:"hasClass",value:function(e){return m(this[0],e)}},{key:"css",value:function(e,t){if("object"===i()(e)){for(var n in e)this.css(n,e[n]);return this}return t!==undefined?this._each((function(n,r){r.style[g(e)]=t})):(this.length>0&&(t=getComputedStyle(this[0])[g(e)]),t)}},{key:"show",value:function(){return this.css("display","")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"attr",value:function(e,t){return t!==undefined?this._each((function(n,r){r.setAttribute(e,t)})):(this.length>0&&(t=this[0].getAttribute(e)),t)}},{key:"setAttr",value:function(e){return this.css("order",e)}},{key:"removeAttr",value:function(e){this._each((function(t,n){1===n.nodeType&&n.removeAttribute(e)}))}},{key:"removeAttrOrder",value:function(){return this.css("order",null)}},{key:"children",value:function(){var e,t=[],n=this[0];if(n)for(e=n.firstChild;e;)1===e.nodeType&&t.push(e),e=e.nextSibling;return t}},{key:"parent",value:function(){var t,n=this[0];return n&&(t=n.parentNode),this._query(t,new e)}},{key:"html",value:function(e){if("string"==typeof e)this._each((function(t,n){n.innerHTML=e}));else if(this[0])return this[0].innerHTML}},{key:"append",value:function(e){var t,n,r=this,i=r[0];return i?("string"==typeof e&&(t=l.createDocumentFragment(),n=l.createElement("iqpdiv"),t.appendChild(n),n.innerHTML=e,e=n.firstChild),i.appendChild(e),n=null,r):r}},{key:"remove",value:function(){return this._each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))}},{key:"offset",value:function(){var e,t=l.documentElement,n=this[0];if(!n)return{top:0,bottom:0,left:0,right:0};e=n.getBoundingClientRect();var r=(d.pageYOffset||t.scrollTop)-(t.clientTop||0),i=(d.pageXOffset||t.scrollLeft)-(t.clientLeft||0);return{top:e.top+r,bottom:e.bottom+r,left:e.left+i,right:e.right+i}}},{key:"width",value:function(e){var t=this[0];if(!t)return 0;if(e!==undefined)return this.css("width",isNaN(e)?e:e+"px");var n=this.css("width");if(n=parseInt("100%"===n?0:n),isNaN(n)){var r=t.offsetWidth;r<=0||null==r||(n=r)}return n}},{key:"height",value:function(e){return this[0]?e!==undefined?this.css("height",isNaN(e)?e:e+"px"):parseInt(this.css("height")):0}},{key:"contains",value:function(e){var t,n=this[0];return e&&(e.nodeType?t=e:e.__$__&&(t=e[0])),!(!n||!t)&&n.contains(t)}},{key:"on",value:function(e,t,n){var r=this._events=this._events||[],i=r[e];return n=Object(c.C)({capture:!1,passive:!1,once:!1},n||{},!0),i||(i=r[e]=[]),i.push(t),this._each((function(r,i){i.addEventListener(e,t,y?n:n.capture)}))}},{key:"un",value:function(e,t){var n=this._events||[],r=n[e];return r||(r=n[e]=[]),this._each((function(n,i){var a;if(t){for(;(a=r.indexOf(t))>-1;)r.splice(a,1);i.removeEventListener(e,t)}else r.length>0&&(r.forEach((function(t){i.removeEventListener(e,t)})),r.splice(0,r.length))}))}},{key:"fire",value:function(e,t){var n=this,r=n._events=n._events||[],i=r[e];i||(i=r[e]=[]),t.data=t.data||{},n._each((function(e,n){i.forEach((function(e){e.call(n,t)}))}))}}]),e}();function k(e){return new x(e)}var w=k(document)},function(e,t,n){"use strict";n(130),n(70),n(344),n(136),n(17),n(88),n(191),n(408),n(111),n(771),n(159),n(343),n(154);var r=n(2),i=n(11),a=o("QC005");function o(e){var t="";if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);n&&(t=n[2]||"")}return"string"==typeof t&&(t=decodeURIComponent(t)),t}function s(){return r.a.getUserInfo()}t.a={fireUrl:function(e,t){if("string"==typeof t&&e){var n=new Image;n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,n=null};var r=[];for(var i in e.dur=+new Date,e)e.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(e[i]));n.src=t+"?"+r.join("&")}},accSub:function(e,t){var n,r,i,a;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}return i=Math.pow(10,Math.max(n,r)),a=n>=r?n:r,parseFloat((Math.round(e*i-t*i)/i).toFixed(a))},accAdd:function(e,t){var n,r,i;try{n=e.toString().split(".")[1].length}catch(a){n=0}try{r=t.toString().split(".")[1].length}catch(a){r=0}return i=Math.pow(10,Math.max(n,r)),Math.round(e*i+t*i)/i},trimNumber:function(e,t){t||(t=1e4);var n=t.toString().substr(1),r=Math.ceil(e);return r>0&&(n=(r+=t).toString().substr(1)),n},getCookie:o,searchPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r])return r;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i]&&(e<t[i+1]||i===t.length-1))return i;e<t[i]?r=i-1:n=i+1}return-1},searchTSPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r].ePos)return t.length;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i].sPos&&e<t[i].ePos)return i;e<t[i].sPos?r=i-1:n=i+1}return-1},getUserInfoFromCookie:s,strToNumber:function(e){var t,n=0;t=e.length>8?e.slice(0,8):e;for(var r=0;r<t.length;r++)switch(r){case 0:n+=72057594037927940*("0x"+t[r]);break;case 1:n+=281474976710656*("0x"+t[r]);break;case 2:n+=1099511627776*("0x"+t[r]);break;case 3:n+=4294967296*("0x"+t[r]);break;case 4:n+=16777216*("0x"+t[r]);break;case 5:n+=65536*("0x"+t[r]);break;case 6:n+=256*("0x"+t[r]);break;case 7:n+=1*("0x"+t[r])}return n},getQueryString:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=e.split("?")[1].match(n);return null!=r?decodeURIComponent(r[2]):null},sliceStr:function(e,t){var n="";if(e.length<=t){for(n=e;n.length<t;)n+="0";return n}var r=Math.floor(e.length/t);(t-1)*(r+1)+1<=e.length&&(r+=1);for(var i=0;n.length<t;)n+=e[i],i+=r;return n},getPureIP:function(e){var t=e.match(/(\w+):\/\/([^/:]+):?(\d*)((?:\/|$)[^?#]*)/);return t?t[2]:""},parseURL:function(e){return e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/)},isDomain:function(e){var t=e.match(/[a-z|A-Z]/g);return!!(t&&t.length>0)},shuffle:function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},ArrayBufferToStr:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=(a<16?"0"+a.toString(16):a.toString(16))+"-"}return r},ArrayBufferTo10Str:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=a.toString(10)+"-"}return r},setStringToData:function(e,t,n,r){for(var i=0;i<r;i++)i>=n.length?e[t+i]=0:e[t+i]=n.charCodeAt(i)},setNumberToData:function u(e,t,n,r){for(var i=n,a=t,o=r;o>4;)u(e,a,Math.floor(i/4294967296),o-4),i%=4294967296,a+=o-4,o-=o-4;for(var s=0;s<o;)e[a+s]=i/(1<<8*(o-s-1)),s++},getFileNameFromUrl:function(e){var t=e.indexOf(".ts");t<0&&(t=e.indexOf(".m4s")),t<0&&(t=e.indexOf(".webm")),t<0&&(t=e.indexOf(".mp4")),t<0&&(t=e.indexOf(".265ts"));var n=e.lastIndexOf("/",t);return e.slice(n+1,t)},getTrackerIP:function(e,t,n,a){if(i.h.aidList.indexOf(r.a.aid)>=0&&i.h.defaultTracker.length>0)return i.h.defaultTracker[Math.floor(Math.random()*(i.h.defaultTracker.length-1))];for(var o="",s=0;s<t.length;s++)if(e===t[s].key||"*"===t[s].key){var u=t[s].value;u&&u.length>0&&(o=u[((n-1+1)%u.length+(a||0))%u.length]);break}return o},isHit:function(){var e=a,t=s();return!!(parseInt(e.substring(0,1))<3||t&&t.userInfo&&t.userInfo.indexOf("OVERSEA")>=0)},QC005:a}},function(e,t,n){var r=n(371);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(123)["default"],i=n(119);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(106),i=n(368),a=Object.prototype;i!==a.toString&&r(a,"toString",i,{unsafe:!0})},function(e,t,n){var r=n(80),i=n(264),a=n(274),o=n(116),s=n(145),u=n(301),c=n(723),l=n(92),d=i("Reflect","construct"),f=l((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!l((function(){d((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),p=Function.apply.call(e,l,t);return s(p)?p:l}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m}));n(22),n(34);var r=n(14),i=n.n(r),a=n(15),o=n.n(a),s=n(20),u=n.n(s),c=n(21),l=n.n(c),d=n(10),f=n.n(d),h=n(0);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var v="ntf_plg_",y=0,g="//www.iqiyipic.com/common/fix/",m={SHOW:v+y++,HIDE:v+y++},_=function(e){u()(n,e);var t=p(n);function n(e,r,a,o){var s;return i()(this,n),(s=t.call(this)).view=r,s.engine=r.engine,s.name=e,s.visible=!1,s.isChildPlugin=!!o,s.enabled=!0,a&&(s.parent=a,s.plugin=a.querySelector('[data-player-hook="'.concat(e,'"]')),s.cache="plgcontainer"===a.getAttribute("data-player-hook")),s.cacheFragment=document.createDocumentFragment(),s.$query=h.K.query2Json(location.href),s}return o()(n,[{key:"_onBeforeEnableAction",value:function(){}},{key:"enable",value:function(){this.enabled||(this._onBeforeEnableAction(),this.enabled=!0,this.cache&&this.plugin&&!this.isChildPlugin&&this.parent.appendChild(this.plugin),this._onAfterEnableAction(),this.rollType=null,this.seekable=!1)}},{key:"_onAfterEnableAction",value:function(){}},{key:"_onBeforeDisableAction",value:function(){}},{key:"disable",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e&&this.rollType&&this.rollType!==e.rollType&&(this.enabled=!0),this.enabled&&(this.rollType=e.rollType,this.seekable=e.seekable,this._onBeforeDisableAction(),this.enabled=!1,this.cache&&this.plugin&&!this.isChildPlugin&&this.cacheFragment.appendChild(this.plugin),this._onAfterDisableAction())}},{key:"_onAfterDisableAction",value:function(){}},{key:"show",value:function(){this.visible=!0,this.plugin&&(this.plugin.style.display="",this.emit(m.SHOW))}},{key:"hide",value:function(){this.visible=!1,this.plugin&&(this.plugin.style.display="none",this.emit(m.HIDE))}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}},{key:"destroy",value:function(){this.plugin&&this.plugin.parentNode&&this.plugin.parentNode.removeChild(this.plugin)}},{key:"fire",value:function(e,t){this.view.emit(e,t)}}],[{key:"css",value:function(){return""}},{key:"html",value:function(){return""}},{key:"padCss",value:function(){return this.css()}},{key:"padHtml",value:function(){return this.html()}},{key:"mobileCss",value:function(){return this.css()}},{key:"mobileHtml",value:function(){return this.html()}}]),n}(h.c);t.c=_},function(e,t,n){var r=n(393)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(14),i=n.n(r),a=n(15),o=n.n(a),s=n(0),u=function(){function e(t){return i()(this,e),new(0,e.PlayerLogger)(t)}return o()(e,null,[{key:"PlayerLogger",get:function(){return window.QiyiPlayerLoader.logger()}},{key:"levels",get:function(){return e.PlayerLogger.Levels}},{key:"setLevel",value:function(t){e.PlayerLogger.setLevel(t)}},{key:"getLevel",value:function(){return e.PlayerLogger.getLevel()}},{key:"getLog",value:function(){return e.PlayerLogger.getLog()}},{key:"saveImmediately",value:function(){e.PlayerLogger.saveImmediately()}}]),e}();s.e.ExternalLogger=window.QiyiPlayerLoader?u.PlayerLogger:null,t.a=u},function(e,t,n){"use strict";var r=n(28),i=n(203);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){var r=n(29),i=n(153).f,a=n(94),o=n(106),s=n(242),u=n(356),c=n(175);e.exports=function(e,t){var n,l,d,f,h,p=e.target,v=e.global,y=e.stat;if(n=v?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(v?l:p+(y?".":"#")+l,e.forced)&&d!==undefined){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),o(n,l,f,e)}}},function(e,t,n){(function(t){var n="object",r=function(e){return e&&e.Math==Math&&e};e.exports=r(typeof globalThis==n&&globalThis)||r(typeof window==n&&window)||r(typeof self==n&&self)||r(typeof t==n&&t)||Function("return this")()}).call(this,n(237))},function(e,t,n){"use strict";var r=n(265),i=n(521),a=n(405),o=n(254),s=n(520),u="Array Iterator",c=o.set,l=o.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(28),i=n(372);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_CHECK_SHOW_LOGIN_PANEL:"checkShowLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_BARRAGE_SEND:"barrageSend",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN:"clickVideolistBtn",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE:"metaPanelStateChange",QYPLAYER_NOTIFY_RF_STATE_CHANGE:"rightFloaterStateChange",QYPLAYER_NOTIFY_TVG_BTN_CLICK:"tvgBtnClick",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend",QYPLAYER_H5_OPPEN_APP:"h5openapp",QYPLAYER_H5_SHOW_ERROR_PANEL:"h5showerrorpanel"}},function(e,t,n){var r=n(28),i=n(29),a=n(161),o=n(141),s=n(78),u=n(72),c=n(31),l=n(369),d=(i.Reflect||{}).construct,f=c((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!c((function(){d((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var i=n.prototype,c=a(u(i)?i:Object.prototype),p=Function.apply.call(e,c,t);return u(p)?p:c}})},function(e,t,n){"use strict";var r=n(80),i=n(92),a=n(403),o=n(145),s=n(183),u=n(148),c=n(430),l=n(514),d=n(404),f=n(132),h=n(397),p=f("isConcatSpreadable"),v=9007199254740991,y="Maximum allowed index exceeded",g=h>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),m=d("concat"),_=function(e){if(!o(e))return!1;var t=e[p];return t!==undefined?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!m},{concat:function(e){var t,n,r,i,a,o=s(this),d=l(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(_(a=-1===t?o:arguments[t])){if(f+(i=u(a.length))>v)throw TypeError(y);for(n=0;n<i;n++,f++)n in a&&c(d,f,a[n])}else{if(f>=v)throw TypeError(y);c(d,f++,a)}return d.length=f,d}})},function(e,t,n){"use strict";var r=n(106),i=n(78),a=n(31),o=n(248),s="toString",u=/./.toString,c=RegExp.prototype,l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=s;(l||d)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)}),{unsafe:!0})},function(e,t,n){e.exports=n(380)},function(e,t,n){var r=n(29),i=n(181),a=n(195),o=n(316),s=r.Symbol,u=i("wks");e.exports=function(e){return u[e]||(u[e]=o&&s[e]||(o?s:a)("Symbol."+e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w}));n(17),n(23);var r=n(96),i=n.n(r),a=n(4),o=n.n(a),s=n(5),u=n.n(s),c=n(8),l=n.n(c),d=n(9),f=n.n(d),h=n(3),p=n.n(h),v=(n(191),n(130),n(35),n(86)),y=n(306),g=n(160);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var _=y.a.console,b=">>>",x=function(e){l()(n,e);var t=m(n);function n(){var e;return o()(this,n),(e=t.call(this)).enable=!0,e.MSG_NAME="__log__",e}return u()(n,[{key:"info",value:function(){this.log.apply(this,arguments)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"log",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=_.log).call.apply(r,[_,b].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"debug",Array.prototype.slice.call(arguments).join("")):this.enable&&_.debug&&(r=_.debug).call.apply(r,[_,b].concat(Array.prototype.slice.call(arguments)))}},{key:"assert",value:function(e){if(this.enable&&_.assert){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=Array.prototype.slice.call(r,1);o.unshift(b),(t=_.assert).call.apply(t,[_,e].concat(i()(o)))}}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"warn",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=_.warn).call.apply(r,[_,b].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"error",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=_.error).call.apply(r,[_,b].concat(Array.prototype.slice.call(arguments)))}}]),n}(v.EventEmitter),k=new x;function w(e){_=e}},function(e,t,n){"use strict";var r=n(247),i=n(78),a=n(89),o=n(77),s=n(117),u=n(122),c=n(249),l=n(250),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n){return[function(n,r){var i=u(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,i,r):t.call(String(i),n,r)},function(e,a){var u=n(t,e,this,a);if(u.done)return u.value;var h=i(e),p=String(this),v="function"==typeof a;v||(a=String(a));var y=h.global;if(y){var g=h.unicode;h.lastIndex=0}for(var m=[];;){var _=l(h,p);if(null===_)break;if(m.push(_),!y)break;""===String(_[0])&&(h.lastIndex=c(p,o(h.lastIndex),g))}for(var b,x="",k=0,w=0;w<m.length;w++){_=m[w];for(var S=String(_[0]),T=d(f(s(_.index),p.length),0),P=[],E=1;E<_.length;E++)P.push((b=_[E])===undefined?b:String(b));var A=_.groups;if(v){var I=[S].concat(P,T,p);A!==undefined&&I.push(A);var D=String(a.apply(undefined,I))}else D=r(S,p,T,P,A,a);T>=k&&(x+=p.slice(k,T)+D,k=T+S.length)}return x+p.slice(k)}];function r(e,n,r,i,o,s){var u=r+e.length,c=i.length,l=v;return o!==undefined&&(o=a(o),l=p),t.call(s,l,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return t;if(l>c){var d=h(l/10);return 0===d?t:d<=c?i[d-1]===undefined?a.charAt(1):i[d-1]+a.charAt(1):t}s=i[l-1]}return s===undefined?"":s}))}}))},function(e,t,n){var r=n(610);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},e.exports["default"]=e.exports,e.exports.__esModule=!0),i(t,n,a||t)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},,function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(undefined)}))}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(80),i=n(92),a=n(525),o=n(116),s=n(325),u=n(148),c=n(328),l=a.ArrayBuffer,d=a.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,undefined).byteLength}))},{slice:function(e,t){if(f!==undefined&&t===undefined)return f.call(o(this),e);for(var n=o(this).byteLength,r=s(e,n),i=s(t===undefined?n:t,n),a=new(c(this,l))(u(i-r)),h=new d(this),p=new d(a),v=0;r<i;)p.setUint8(v++,h.getUint8(r++));return a}})},function(e,t,n){"use strict";var r=n(134),i=n(744),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(a(this),e,t,arguments.length>2?arguments[2]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(618),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).filter,a=n(745),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:undefined);return a(this,t)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(401).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(401).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(99),i=n(134),a=n(30),o=n(132)("iterator"),s=r.Uint8Array,u=a.values,c=a.keys,l=a.entries,d=i.aTypedArray,f=i.exportTypedArrayMethod,h=s&&s.prototype[o],p=!!h&&("values"==h.name||h.name==undefined),v=function(){return u.call(d(this))};f("entries",(function(){return l.call(d(this))})),f("keys",(function(){return c.call(d(this))})),f("values",v,!p),f(o,v,!p)},function(e,t,n){"use strict";var r=n(134),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].join;a("join",(function(e){return o.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(134),i=n(620),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(134),i=n(216).map,a=n(328),o=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:undefined,(function(e,t){return new(s(a(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(134),i=n(526).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=n(526).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var e,t=this,n=i(t).length,r=o(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}))},function(e,t,n){"use strict";var r=n(134),i=n(148),a=n(619),o=n(183),s=n(92),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){u(this);var t=a(arguments.length>1?arguments[1]:undefined,1),n=this.length,r=o(e),s=i(r.length),c=0;if(s+t>n)throw RangeError("Wrong length");for(;c<s;)this[t+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var r=n(134),i=n(328),a=n(92),o=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice;u("slice",(function(e,t){for(var n=c.call(o(this),e,t),r=i(this,this.constructor),a=0,u=n.length,l=new(s(r))(u);u>a;)l[a]=n[a++];return l}),a((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(134),i=n(216).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(134),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].sort;a("sort",(function(e){return o.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(134),i=n(148),a=n(325),o=n(328),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,u=a(e,r);return new(o(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((t===undefined?r:a(t,r))-u))}))},function(e,t,n){"use strict";var r=n(99),i=n(134),a=n(92),o=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,d=!!o&&a((function(){c.call(new o(1))}));u("toLocaleString",(function(){return c.apply(d?l.call(s(this)):s(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!a((function(){o.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(134).exportTypedArrayMethod,i=n(92),a=n(99).Uint8Array,o=a&&a.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=o.toString!=s;r("toString",s,c)},function(e,t,n){n(440)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";n(34);var r=n(43),i=n.n(r),a=n(14),o=n.n(a),s=n(15),u=n.n(s),c=n(140),l=n.n(c),d=n(20),f=n.n(d),h=n(21),p=n.n(h),v=n(10),y=n.n(v),g=n(25),m=n.n(g),_=(n(194),n(27),n(40),n(22),n(36),n(108),n(84),n(124),n(131),n(79),n(74),n(32),n(98),n(0)),b=n(13);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var k,w=new(n(26).a)("user"),S=0,T=0,P=!1,E="",A="",I=1;I=b.a.browser.iPad?23:b.a.os.androidTablet?24:1;var D=!1,L="",O=0,R=function(){return b.a.getPtid()},C=!1,M=!1,B=function(e){f()(r,e);var t=x(r);function r(){return o()(this,r),t.apply(this,arguments)}return u()(r,[{key:"isLogin",value:function(){return k?k.login:l()(y()(r.prototype),"isLogin",this).call(this)}},{key:"passportCookie",value:function(){return k&&k.P00001?k.P00001:l()(y()(r.prototype),"passportCookie",this).call(this)}},{key:"setInfo",value:function(e){var t=_.h.getVipTypes();D=""!==t&&"0"!==t,!0===(k=e).login||"true"===k.login?k.login=!0:k.login=!1,this.clearVipTypes(),this.emit("infoset")}},{key:"tvid",value:function(e){E=e}},{key:"bossStatus",value:function(e){A=e}},{key:"openHeartBeat",value:function(){P||0===T||(P=!0,0===S&&(this.onHeartBeatTimer(),S=setInterval(this.onHeartBeatTimer.bind(this),T)))}},{key:"onHeartBeatTimer",value:function(){var e={authcookie:_.k.get("P00001"),agenttype:I,cversion:2,device_id:_.L.getFluid(),paid:A,ptid:R(),viptypes:"",tv_id:E,tn:Math.random().toString().replace(".","")};_.v.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive.action",params:e,beforeSend:function(e){var t=[];for(var n in e.params)t.push(n+"="+e.params[n]);return e.url+="&sign="+function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)t+=e[n]+"|";return t+="jfaljluixn39012$#",Object(_.B)(t)}(t),e}})}},{key:"stopHeartBeat",value:function(){P=!1,0!==S&&(clearInterval(S),S=0)}},{key:"closeHeartBeat",value:function(){var e,t=this,r=+new Date,a=R(),o={authcookie:_.k.get("P00001"),agenttype:I,device_id:_.L.getFluid()||_.L.getJsuid(),tv_id:E,paid:A,viptypes:"",ptid:a,version:"4.1.1",qd_v:7,ts:r};_.v.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/off.action",params:o,beforeSend:(e=i()(m.a.mark((function s(e){var r,i,a,o;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(i in r=[],e.params)r.push(i+"="+e.params[i]);return s.prev=2,s.next=5,n.e(1).then(n.t.bind(null,576,7));case 5:a=s.sent,o=t.verifySign(r),e.url+="&qd_sc="+a.mmc(o),s.next=12;break;case 10:s.prev=10,s.t0=s["catch"](2);case 12:return w.log(e.url),s.abrupt("return",e);case 14:case"end":return s.stop()}}),s,null,[[2,10]])}))),function(t){return e.apply(this,arguments)}),isSort:!0})}},{key:"beforeunloadListener",value:function(){var e,t,n,r=this;e=window,t="beforeunload",n=function(){r.isVip((function(e){e&&r.closeHeartBeat()}))},e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}},{key:"keepalive",value:function(){var e=this,t=window.location.hostname,r=window.navigator.userAgent;if(!(t.indexOf("localwebapp.iqiyi.com")>=0||r.indexOf("QyClient/")>=0||M)){M=!0;var a,o=_.k.get("QC005_NATIVE"),s=_.k.get("QC005");if(o)if(window.external&&window.external.nativeCall)null===(a=window.external)||void 0===a||a.nativeCall("userdata",JSON.stringify({call_type:"request",cmd:"WriteLog",cmd_data:{source:"pcw",log:"log from keepalive: QC005_NATIVE: ".concat(o,", QC005: ").concat(s)},cmd_context:""}),"");var u,c=R(),l=_.k.get("P00001");l&&_.v.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive_required.action",params:{authcookie:l,agenttype:I,cversion:2,device_id:s,paid:A,ptid:c,tv_id:E,qd_v:7,viptypes:""},timeout:2e3,memory:!0,beforeSend:(u=i()(m.a.mark((function t(r){var i,a,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in i=[],r.params)i.push(a+"="+r.params[a]);return t.prev=2,t.next=5,n.e(1).then(n.t.bind(null,576,7));case 5:o=t.sent,s=e.verifySign(i),r.url+="&qd_sc="+o.mmc(s),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),function(e){return u.apply(this,arguments)}),success:function(t){if(t&&"A00000"==t.code&&t.data&&t.data.interval){var n=1e3*parseInt(t.data.interval,10);n>0&&(n<1e4&&(n=1e4),T=n,clearInterval(S),e.openHeartBeat())}},isSort:!0})}}},{key:"getVipTypes",value:function(e){1===l()(y()(r.prototype),"getVipTypes",this).call(this,e)&&(C||(C=!0,this.requestVipTypes()))}},{key:"updateVipTypes",value:function(){C||(C=!0,this.requestVipTypes())}},{key:"__isChangeVipState",value:function(e){this.isVip((function(t){w.log("isChangeVipState! preIsVip:"+D+",curIsVip: "+t),e(D!=t)}))}},{key:"clearVipTypes",value:function(){l()(y()(r.prototype),"clearVipTypes",this).call(this),C=!1,O=0}},{key:"requestVipTypes",value:function(){var e=this,t=_.k.get("P00001");if(!this.isLogin()||!t)return C=!1,void _.h.vipTypesCallback([0]);t&&_.v.request({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_.k.get("P00001"),platform:R(),version:"5.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_.L.createUUID(),vipTypes:"1,3,4,5,7,8,10,13,14,16,18,58"},timeout:2e3,memory:!0,success:function(t){C=!1;try{t=JSON.parse(t||{})}catch(d){w.error("vip_users: parse Error"),e.requestVipTypesFailed()}if("A00000"===t.code){var n=t.data||{},r=[],i="";for(var a in n){var o,s,u=n[a];if(u&&"1"==u.status)r.push(u.vipType),null!==(o=u)&&void 0!==o&&o.level&&(null===(s=u)||void 0===s?void 0:s.level)>i&&(i=u.level);u=null}r.length||r.push(0);var c=r.join(","),l=!1;r.forEach((function(e){4!=e&&1!=e&&5!=e&&3!=e||(l=!0)})),_.h.setVipTypes(c,{writeCookie:!0}),_.h.setVipLv(i,{writeCookie:!0}),_.h.setIsVip(l),w.log("requset vipTypes success! viptypes is "+c),_.h.vipTypesCallback(r)}else e.requestVipTypesFailed()},failure:function(t,n){C=!1,e.requestVipTypesFailed()}})}},{key:"requestVipTypesFailed",value:function(){O>0?(_.h.setVipTypes("1"),_.h.vipTypesCallback([1])):(this.requestVipTypes(),O++)}},{key:"getUserIPInfo",value:function(e){L?e(L):_.v.json({url:"//data.video.iqiyi.com/v.f4v",withCredentials:!1,timeout:2e3,memory:!0,success:function(t){L=t,e(t)},failure:function(t){e(t)}})}},{key:"reqVipTypes",value:function(e){var t=_.k.get("P00001");t?t&&_.v.request({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_.k.get("P00001"),platform:R(),version:"5.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_.L.createUUID(),vipTypes:"1,3,4,5,7,8,10,13,14,16,18,58"},timeout:2e3,memory:!0,success:function(t){try{t=JSON.parse(t||{})}catch(u){e([1])}if("A00000"===t.code){var n=t.data||{},r=[],i="";for(var a in n){var o=n[a];o&&"1"==o.status&&(r.push(parseInt(o.vipType)),i=o.level),o=null}r.length||r.push(0);var s=r.join(",");_.h.setVipLv(i),_.h.setVipTypes(s,{writeCookie:!0}),e(r)}else e([1]);w.info("user reqVipTypes: result = ".concat(t))},failure:function(){e([1]),w.info("user reqVipTypes: failure")}}):e([0])}},{key:"verifySign",value:function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)n===e.length-1?t+=e[n]:t+=e[n]+"&";return t}}]),r}(_.h);t.a=new B},function(e,t,n){"use strict";var r=n(80),i=n(431);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";n(70),n(111),n(159),n(136),n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(110),n(101),n(340),n(314),n(218),n(313);var r=self.navigator.userAgent.toLowerCase(),i=/(edge)\/([\w.]+)/.exec(r)||/(opr)[\/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(firefox)[\/]([\w.]+)/.exec(r)||/(iemobile)[\/]([\w.]+)/.exec(r)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],a=/(ipad)/.exec(r)||/(ipod)/.exec(r)||/(windows phone)/.exec(r)||/(iphone)/.exec(r)||/(kindle)/.exec(r)||/(android)/.exec(r)||/(windows)/.exec(r)||/(mac)/.exec(r)||/(linux)/.exec(r)||/(cros)/.exec(r)||[],o={browser:i[5]||i[3]||i[1]||"",version:i[2]||i[4]||"0",majorVersion:i[4]||i[2]||"0",platform:a[0]||""},s={};if(o.browser){s[o.browser]=!0;var u=o.majorVersion.split(".");s.version={major:parseInt(o.majorVersion,10),string:o.version},u.length>1&&(s.version.minor=parseInt(u[1],10)),u.length>2&&(s.version.build=parseInt(u[2],10))}if(o.platform&&(s[o.platform]=!0),(s.chrome||s.opr||s.safari)&&(s.webkit=!0),s.rv||s.iemobile){s.rv&&delete s.rv;var c="msie";o.browser=c,s.msie=!0}if(s.edge){delete s.edge;var l="msedge";o.browser=l,s.msedge=!0}if(s.opr){var d="opera";o.browser=d,s.opera=!0}if(s.safari&&s.android){var f="android";o.browser=f,s.android=!0}s.name=o.browser,s.platform=o.platform,s.chrome&&s.version&&s.version.major<=44&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(this.subarray(e,t))}),window.WebSocket=window.webSocket||window.WebSocket,window.URL=window.URL||window.webkitURL,window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate,t.a=Object.defineProperties({},{browser:{get:function(){return s},configurable:!0,enumerable:!0},isHTTPS:{get:function(){return/^https/gi.test(window.location.protocol)},configurable:!0,enumerable:!0},supportFetch:{get:function(){return window.fetch&&!s.msedge},configurable:!0,enumerable:!0},webSocket:{get:function(){return window.WebSocket},configurable:!0,enumerable:!0},dataVideo:{get:function(){return window.MediaSource&&window.URL},configurable:!0,enumerable:!0},canP2P:{get:function(){return!0===s.chrome&&window.RTCSessionDescription!==undefined&&window.RTCPeerConnection!==undefined&&window.RTCIceCandidate!==undefined},configurable:!0,enumerable:!0}})},function(e,t,n){"use strict";var r=n(28),i=n(31),a=n(192),o=n(72),s=n(89),u=n(77),c=n(193),l=n(245),d=n(190),f=n(38)("isConcatSpreadable"),h=9007199254740991,p="Maximum allowed index exceeded",v=!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),y=d("concat"),g=function(e){if(!o(e))return!1;var t=e[f];return t!==undefined?!!t:a(e)};r({target:"Array",proto:!0,forced:!v||!y},{concat:function(e){var t,n,r,i,a,o=s(this),d=l(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(g(a=-1===t?o:arguments[t])){if(f+(i=u(a.length))>h)throw TypeError(p);for(n=0;n<i;n++,f++)n in a&&c(d,f,a[n])}else{if(f>=h)throw TypeError(p);c(d,f++,a)}return d.length=f,d}})},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(133),n(130),n(17),n(115),n(2)),u=[],c=function(){function e(){i()(this,e),this._events={}}return o()(e,[{key:"on",value:function(e,t,n){var r=[];return this._events||(this._events={}),n&&this._events[e]&&(r=this._events[e]),r.push(t),this._events[e]=r,this}},{key:"off",value:function(e,t){if(this._events){var n=this._events[e];if(!t||Array.isArray(n)&&n.length<1)delete this._events[e];else for(var r=n?n.length:0;r--;)n[r]===t&&n.splice(r,1);return this}}},{key:"emit",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=[].slice.call(n,1),o=this._events[i];return o&&o.forEach((function(t){return t.apply(e,a)})),this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t.apply(n,a),n.off(e,r)})),this}},{key:"clear",value:function(){delete this._events}}]),e}();var l=null;t.a={globalEvent:function(){return l||(l=new c),l},getEvent:function(){return u[s.a.tvId]},newEvent:function(){return u[s.a.tvId]=new c,u[s.a.tvId]},clearEvent:function(e){u[e]&&u[e].clear()}}},function(e,t,n){"use strict";var r=n(247),i=n(251),a=n(78),o=n(122),s=n(187),u=n(249),c=n(77),l=n(250),d=n(203),f=n(31),h=[].push,p=Math.min,v=4294967295,y=!f((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=n===undefined?v:n>>>0;if(0===a)return[];if(e===undefined)return[r];if(!i(e))return t.call(r,e,a);for(var s,u,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,y=new RegExp(e.source,f+"g");(s=d.call(y,r))&&!((u=y.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=a));)y.lastIndex===s.index&&y.lastIndex++;return p===r.length?!c&&y.test("")||l.push(""):l.push(r.slice(p)),l.length>a?l.slice(0,a):l}:"0".split(undefined,0).length?function(e,n){return e===undefined&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=t==undefined?undefined:t[e];return a!==undefined?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var d=a(e),f=String(this),h=s(d,RegExp),g=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(y?"y":"g"),_=new h(y?d:"^(?:"+d.source+")",m),b=i===undefined?v:i>>>0;if(0===b)return[];if(0===f.length)return null===l(_,f)?[f]:[];for(var x=0,k=0,w=[];k<f.length;){_.lastIndex=y?k:0;var S,T=l(_,y?f:f.slice(k));if(null===T||(S=p(c(_.lastIndex+(y?0:k)),f.length))===x)k=u(f,k,g);else{if(w.push(f.slice(x,k)),w.length===b)return w;for(var P=1;P<=T.length-1;P++)if(w.push(T[P]),w.length===b)return w;k=x=S}}return w.push(f.slice(x)),w}]}),!y)},function(e,t,n){var r=n(117),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(72);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var r=n(28),i=n(174),a=n(239)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=i("indexOf");r({target:"Array",proto:!0,forced:s||u},{indexOf:function(e){return s?o.apply(this,arguments)||0:a(this,e,arguments[1])}})},function(e,t,n){var r=n(99),i=n(228).f,a=n(215),o=n(204),s=n(504),u=n(586),c=n(402);e.exports=function(e,t){var n,l,d,f,h,p=e.target,v=e.global,y=e.stat;if(n=v?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(v?l:p+(y?".":"#")+l,e.forced)&&d!==undefined){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),o(n,l,f,e)}}},function(e,t,n){var r=n(31);e.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(29),i=n(291),a=n(379),o=n(94);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(l){c.forEach=a}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));var r="iqp-big-mode",i="iqp-btn-disable",a="volumeup",o="volumedown",s="volumem",u=350,c=152,l=30},function(e,t,n){"use strict";var r,i,a,o=n(28),s=n(180),u=n(29),c=n(246),l=n(241),d=n(165),f=n(222),h=n(72),p=n(141),v=n(188),y=n(112),g=n(236),m=n(234),_=n(187),b=n(293).set,x=n(381),k=n(382),w=n(383),S=n(295),T=n(384),P=n(294),E=n(143),A=n(175),I=n(38)("species"),D="Promise",L=E.get,O=E.set,R=E.getterFor(D),C=u.Promise,M=u.TypeError,B=u.document,N=u.process,F=u.fetch,q=N&&N.versions,j=q&&q.v8||"",U=S.f,V=U,H="process"==y(N),z=!!(B&&B.createEvent&&u.dispatchEvent),G="unhandledrejection",W=A(D,(function(){var e=C.resolve(1),t=function(){},n=(e.constructor={})[I]=function(e){e(t,t)};return!((H||"function"==typeof PromiseRejectionEvent)&&(!s||e["finally"])&&e.then(t)instanceof n&&0!==j.indexOf("6.6")&&-1===P.indexOf("Chrome/66"))})),K=W||!m((function(e){C.all(e)["catch"]((function(){}))})),$=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},Y=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;x((function(){for(var i=t.value,a=1==t.state,o=0,s=function(n){var r,o,s,u=a?n.ok:n.fail,c=n.resolve,l=n.reject,d=n.domain;try{u?(a||(2===t.rejection&&Z(e,t),t.rejection=1),!0===u?r=i:(d&&d.enter(),r=u(i),d&&(d.exit(),s=!0)),r===n.promise?l(M("Promise-chain cycle")):(o=$(r))?o.call(r,c,l):c(r)):l(i)}catch(f){d&&!s&&d.exit(),l(f)}};r.length>o;)s(r[o++]);t.reactions=[],t.notified=!1,n&&!t.rejection&&J(e,t)}))}},Q=function(e,t,n){var r,i;z?((r=B.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},(i=u["on"+e])?i(r):e===G&&w("Unhandled promise rejection",n)},J=function(e,t){b.call(u,(function(){var n,r=t.value;if(X(t)&&(n=T((function(){H?N.emit("unhandledRejection",r,e):Q(G,e,r)})),t.rejection=H||X(t)?2:1,n.error))throw n.value}))},X=function(e){return 1!==e.rejection&&!e.parent},Z=function(e,t){b.call(u,(function(){H?N.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},ee=function(e,t,n,r){return function(i){e(t,n,i,r)}},te=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Y(e,t,!0))},ne=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw M("Promise can't be resolved itself");var i=$(n);i?x((function(){var r={done:!1};try{i.call(n,ee(ne,e,r,t),ee(te,e,r,t))}catch(a){te(e,r,a,t)}})):(t.value=n,t.state=1,Y(e,t,!1))}catch(a){te(e,{done:!1},a,t)}}};W&&(C=function(e){v(this,C,D),p(e),r.call(this);var t=L(this);try{e(ee(ne,this,t),ee(te,this,t))}catch(n){te(this,t,n)}},(r=function(e){O(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=l(C.prototype,{then:function(e,t){var n=R(this),r=U(_(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=H?N.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(this,n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),i=function(){var e=new r,t=L(e);this.promise=e,this.resolve=ee(ne,e,t),this.reject=ee(te,e,t)},S.f=U=function(e){return e===C||e===a?new i(e):V(e)},s||"function"!=typeof F||o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k(C,F.apply(u,arguments))}})),o({global:!0,wrap:!0,forced:W},{Promise:C}),d(C,D,!1,!0),f(D),a=c.Promise,o({target:D,stat:!0,forced:W},{reject:function(e){var t=U(this);return t.reject.call(undefined,e),t.promise}}),o({target:D,stat:!0,forced:s||W},{resolve:function(e){return k(s&&this===a?C:this,e)}}),o({target:D,stat:!0,forced:K},{all:function(e){var t=this,n=U(t),r=n.resolve,i=n.reject,a=T((function(){var n=p(t.resolve),a=[],o=0,s=1;g(e,(function(e){var u=o++,c=!1;a.push(undefined),s++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=U(t),r=n.reject,i=T((function(){var i=p(t.resolve);g(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(undefined)}))}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function c(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},c.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,undefined,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,a),!0;case 6:return l.fn.call(l.context,t,n,r,a,o),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,undefined,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,c=[],l=o.length;s<l;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&c.push(o[s]);c.length?this._events[a]=1===c.length?c[0]:c:u(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c},function(e,t,n){var r=n(81),i=n(286),a=n(78),o=n(169),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(204),i=n(116),a=n(92),o=n(432),s="toString",u=RegExp.prototype,c=u.toString,l=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(l||d)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in u)?o.call(e):n)}),{unsafe:!0})},function(e,t,n){var r=n(122);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r,i=n(81),a=n(29),o=n(72),s=n(91),u=n(238),c=n(94),l=n(106),d=n(87).f,f=n(223),h=n(240),p=n(38),v=n(195),y=a.DataView,g=y&&y.prototype,m=a.Int8Array,_=m&&m.prototype,b=a.Uint8ClampedArray,x=b&&b.prototype,k=m&&f(m),w=_&&f(_),S=Object.prototype,T=S.isPrototypeOf,P=p("toStringTag"),E=v("TYPED_ARRAY_TAG"),A=!(!a.ArrayBuffer||!a.DataView),I=A&&!!h,D=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},O=function(e){return o(e)&&s(L,u(e))};for(r in L)a[r]||(I=!1);if((!I||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},I))for(r in L)a[r]&&h(a[r],k);if((!I||!w||w===S)&&(w=k.prototype,I))for(r in L)a[r]&&h(a[r].prototype,w);if(I&&f(x)!==w&&h(x,w),i&&!s(w,P))for(r in D=!0,d(w,P,{get:function(){return o(this)?this[E]:undefined}}),L)a[r]&&c(a[r],E,r);A&&h&&f(g)!==S&&h(g,S),e.exports={NATIVE_ARRAY_BUFFER:A,NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:D&&E,aTypedArray:function(e){if(O(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(T.call(k,e))return e}else for(var t in L)if(s(L,r)){var n=a[t];if(n&&(e===n||T.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportProto:function(e,t,n){if(i){if(n)for(var r in L){var o=a[r];o&&s(o.prototype,e)&&delete o.prototype[e]}w[e]&&!n||l(w,e,n?t:I&&_[e]||t)}},exportStatic:function(e,t,n){var r,o;if(i){if(h){if(n)for(r in L)(o=a[r])&&s(o,e)&&delete o[e];if(k[e]&&!n)return;try{return l(k,e,n?t:I&&m[e]||t)}catch(u){}}for(r in L)!(o=a[r])||o[e]&&!n||l(o,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||s(L,t)},isTypedArray:O,TypedArray:k,TypedArrayPrototype:w}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){"use strict";n.d(t,"f",(function(){return F})),n.d(t,"d",(function(){return q})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return H})),n.d(t,"e",(function(){return z}));n(23);var r,i=n(4),a=n.n(i),o=n(5),s=n.n(o),u=n(8),c=n.n(u),l=n(9),d=n.n(l),f=n(3),h=n.n(f),p=(n(70),n(130),n(17),n(88),n(35),n(804)),v=n(185),y=n(39),g=n(535),m=n(1020),_=n(86),b=n(278),x=n(221),k=n.n(x),w=(n(313),n(136),n(339),n(44),n(217),n(154),n(129)),S=n.n(w),T=n(306),P=n(160),E=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}var t,n;return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.controller=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.controller,t=this.stats;this._resetTimer(),t&&(t.isTimeout?t.aborted=!1:t.aborted=!0),e&&!e.signal.aborted&&e.abort(),t&&t.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_parseRes",value:(n=k()(S.a.mark((function i(e,t){var n;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next="arraybuffer"===r.t0?3:"json"===r.t0?7:11;break;case 3:return r.next=5,t.arrayBuffer();case 5:return n=r.sent,r.abrupt("break",14);case 7:return r.next=9,t.json();case 9:return n=r.sent,r.abrupt("break",14);case 11:return r.next=13,t.text();case 13:n=r.sent;case 14:return r.abrupt("return",n);case 15:case"end":return r.stop()}}),i)}))),function(e,t){return n.apply(this,arguments)})},{key:"_initReqTimeout",value:function(){var e=this.context;this.stats;e.retryParameters.timeout>0&&(clearTimeout(this._requestTimeout),this._requestTimeout=setTimeout(this._onTimeout.bind(this),e.retryParameters.timeout))}},{key:"_doLoad",value:(t=k()(S.a.mark((function o(){var e,t,n,r,i,a,s,u,c,l,d,f,h,p,v,g,m,_,x,w,P;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=function(){return n.retry>=t.retryParameters.maxRetry||a>=400&&a<499},e=this,t=this.context,n=this.stats,r=this.speedSampler,i=this.url,u=0,c=t.callbacks,l=this.controller=new AbortController,n.requestStartMark=performance.now(),e._initReqTimeout(),o.prev=8,f=i,h={method:t.method,headers:t.headers||new Headers,body:t.body||undefined,mode:"cors",credentials:t.allowCrossSiteCredentials?"include":"same-origin",signal:l.signal,cache:"no-store"},o.next=13,T.a.fetch(f,h);case 13:if(s=o.sent,!((a=s.status)>=200&&a<300)){o.next=34;break}if(!c.onProgress){o.next=23;break}return p=s.clone().body.getReader(),(v=s.headers.get("Content-Length"))&&parseInt(v,10),g=function(){var t=k()(S.a.mark((function n(t){var r,i;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){p.read().then((function(t){var n=t.done,r=t.value;e({done:n,value:r})}),(function(t){e({done:!0})}))}));case 2:if(r=n.sent,clearTimeout(e._requestTimeout),!r.done){n.next=8;break}t&&t.close(),n.next=14;break;case 8:return(i=ArrayBuffer.isView(r.value)?r.value.buffer:null)&&(u+=i.byteLength),e._onProgress(i),t&&t.enqueue(i),n.next=14,g();case 14:case"end":return n.stop()}}),n)})));return function(e){return t.apply(this,arguments)}}(),o.next=23,g();case 23:if(!c.onSuccess){o.next=32;break}return o.next=26,e._parseRes(t.responseType,s);case 26:m=o.sent,_=performance.now()-n.requestStartMark,x=null,this.netType===b.a.SEGMENT&&(x=Number((m.byteLength/(_/1e3)).toFixed(3))),w={netCost:_,speed:x,url:i,data:m,status:a},n.aborted||(m&&r.sample(m.byteLength-u),c.onSuccess(w,n,t),this._onComplete(),n.dump=!0);case 32:o.next=48;break;case 34:if(!d()){o.next=47;break}if(!n.isTimeout){o.next=39;break}c.onTimeout&&c.onTimeout(n,t,{status:a,url:i}),o.next=44;break;case 39:if(!c.onError){o.next=44;break}return o.next=42,e._parseRes(t.responseType,s);case 42:P=o.sent,n.aborted||c.onError({status:a,url:i,response:P},t);case 44:this._onComplete(),o.next=48;break;case 47:this._retry();case 48:o.next=54;break;case 50:o.prev=50,o.t0=o["catch"](8),(o.t0 instanceof RangeError||o.t0 instanceof ReferenceError||o.t0 instanceof SyntaxError||o.t0 instanceof TypeError||o.t0 instanceof URIError)&&y.a.error("fetch ".concat(o.t0.constructor.name,": ").concat(o.t0.stack?o.t0.stack:o.t0.message?o.t0.message:o.t0));try{n.aborted||(d()?(n.isTimeout?c.onTimeout&&c.onTimeout(n,t,{status:a,url:i}):c.onError&&c.onError({status:a,response:null,url:i,error:o.t0},t),this._onComplete()):this._retry())}catch(E){y.a.error(E.stack?E.stack:E.message?E.message:E)}case 54:return o.abrupt("return",this);case 55:case"end":return o.stop()}}),o,this,[[8,50]])}))),function(){return t.apply(this,arguments)})},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onTimeout",value:function(){this.context;this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,n=this.stats,r=t.callbacks;(Object(P.k)(e)||Object(P.a)(e))&&this.speedSampler.sample(e.byteLength),r.onProgress(e,n),n.dump=!0}},{key:"_onAbort",value:function(){var e=this.context;if(!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,this.speedSampler.reset(),y.a.log("fetch onComplete,request url: ".concat(this.url)),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isSupported",value:function(){if("boolean"!=typeof r){var e=!!T.a.fetch,t=!!T.a.AbortController,n=!0;if(T.a.ReadableStream)try{new ReadableStream({})}catch(i){n=!1}else n=!1;r=e&&n&&t}return r}}]),e}(),A=E,I=n(630);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var L,O=performance&&performance.now?performance.now.bind(performance):Date.now,R=function(e){c()(n,e);var t=D(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0,e.resetTimer_=new I.a((function(){e.tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0})),e}return s()(n,[{key:"averageBps",get:function(){if(null===this.bytesAll||null===this.tInit)return 0;var e=(O()-this.tInit)/1e3;return this.bytesAll/e}},{key:"reset",value:function(){this.resetTimer_.schedule(1)}},{key:"sample",value:function(e){var t=O();if(null===this.tInit)this.tInit=t,this.tLastArrivedSecond=t,this.bytesInSecond=e;else{var n=(t-this.tLastArrivedSecond)/1e3;if(n<1?this.bytesInSecond+=e:(this.bytesInSecond=e,this.tLastArrivedSecond=t),0==n&&(n=1),n>.5){var r=this.bytesInSecond/n||0;this.bandwidth=Math.floor(Math.max(r,this.bandwidth||0))||null,this.emit("estimate",{downloadSpeed:r,bandwidth:Math.floor(Math.max(this.downloadSpeed,this.bandwidth||0))||null})}}}}]),n}(_.EventEmitter),C=(n(115),n(30),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),"moz-chunked-arraybuffer"),M=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.stats,t=this.loader;this._resetTimer(),e&&(e.isTimeout?e.aborted=!1:e.aborted=!0),t&&4!==t.readyState?t.abort():this._onAbort(),e&&e.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_doLoad",value:function(){var t=this.url,n=this.context,r=this.stats,i=this.netType,a=n.headers,o=this.loader=new XMLHttpRequest;if(r.requestStartMark=performance.now(),o.open(n.method,t,!0),n.retryParameters.timeout>0&&(this._requestTimeout=setTimeout(this._onTimeout.bind(this),n.retryParameters.timeout)),o.withCredentials=!!n.allowCrossSiteCredentials,o.onload=this._onLoad.bind(this),o.onprogress=this._onProgress.bind(this),a)if(a instanceof Headers)a.forEach?a.forEach((function(e,t){var n=t.toLowerCase();o.setRequestHeader(n,e)})):y.a.warn("Native Headers mismatch forEach");else for(var s in a){var u=s.toLowerCase();o.setRequestHeader(u,n.headers[s])}return o.responseType=n.responseType||"arraybuffer",i===b.a.SEGMENT&&"arraybuffer"===o.responseType&&e.isMozChunkedSupported()&&(o.responseType=C),o.send(n.body),this}},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onLoad",value:function(e){var t=this.context,n=this.stats,r=this.url,i=e.currentTarget,a=i.status,o=t.callbacks;if(n.aborted)this._onAbort();else if(clearTimeout(this._requestTimeout),a>=200&&a<300){var s=i.response,u=performance.now()-n.requestStartMark,c=null;if(i.responseType===C&&(s=t.totalBuffer),o.onSuccess){(Object(P.k)(s)||Object(P.a)(s))&&(c=Number(s.byteLength/(u/1e3)),this.speedSampler.sample(s.byteLength));var l={netCost:u,speed:c,status:a,data:s,url:r};o.onSuccess(l,n,t)}this._onComplete(),n.dump=!0}else n.retry>=t.retryParameters.maxRetry||a>=400&&a<499?(n.isTimeout?o.onTimeout&&o.onTimeout(n,t,{status:a,url:r}):o.onError&&o.onError({status:a,url:r,response:i.response},t),this._onComplete()):this._retry()}},{key:"_onTimeout",value:function(){this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(t){var n,r=this.context,i=this.stats,a=(this.loader,r.callbacks);t.lengthComputable&&(i.loaded?(n=t.loaded-i.loaded,this.speedSampler.sample(n)):n=t.loaded,this.speedSampler.sample(n||0),i.loaded=t.loaded,i.total=t.total);if(a.onProgress&&this.netType===b.a.SEGMENT&&e.isMozChunkedSupported()){var o=t.target?t.target.response:null;if(o){var s=new Uint8Array(o),u=r.totalBuffer?new Uint8Array(r.totalBuffer):new Uint8Array(0),c=new Uint8Array(u.byteLength+s.byteLength);c.set(u,0),c.set(s,u.byteLength),r.totalBuffer=c.buffer}o&&((Object(P.k)(o)||Object(P.a)(o))&&this.speedSampler.sample(o.byteLength),a.onProgress(o,i),i.dump=!0)}}},{key:"_onAbort",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,e.totalBuffer=null,this.speedSampler.reset(),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isMozChunkedSupported",value:function(){if("boolean"!=typeof L)if(/firefox/gi.test(navigator.userAgent.toLowerCase())){var e=new XMLHttpRequest;try{e.responseType=C}catch(t){}L=e.responseType===C}else L=!1;return L}}]),e}();function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var N="undefined"!=typeof location?location.protocol:"",F=/^http/.test(N)?N:"https:";function q(e,t){return{uris:e,method:"GET",headers:new Headers,body:null,responseType:"arraybuffer",allowCrossSiteCredentials:!1,retryParameters:t,callbacks:{onSuccess:function(e){},onError:function(){},onTimeout:function(e,t,n){},onAbort:function(){},onComplete:function(){}}}}function j(){return A.isSupported()||M.isMozChunkedSupported()}function U(){return{maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0}}function V(e,t,n){n[e]={loader:t}}var H=function(e){c()(n,e);var t=B(n);function n(e){var r;return a()(this,n),(r=t.call(this)).schemes_={},r.krt_=e,r.speedSampler_=new R,A.isSupported()?(V("http",A,r.schemes_),V("https",A,r.schemes_)):(V("http",M,r.schemes_),V("https",M,r.schemes_)),r.speedSampler_.on("estimate",(function(t){e&&Object(v.a)(e.ctx.stats,t)})),r}return s()(n,[{key:"setRuntime",value:function(e){e&&(this.krt_=e)}},{key:"unsetRuntime",value:function(){this.krt_=null}},{key:"request",value:function(e,t){var n=this.krt_,r=this.schemes_,i=this.speedSampler_;t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=Object(v.a)({maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0},t.retryParameters),t.uris=Object(v.a)({},t.uris);var a=new m.a(t.uris[0]),o=a.scheme,s=a.domain;if(o||(o=F.slice(0,-1),a.setScheme(o),t.uris[0]=a.toString()),e===b.a.SEGMENT&&n){if("http"===o&&/^https/gi.test(N))return y.a.warn("HTTP request in HTTPS Page: ".concat(a.toString())),void this.krt_.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_HTTPS_UNMATCHED_HTTP_SCHEME,a));n.ctx.stats.cdnHost=s,n.ctx.stats.netProtocol=o}var u=r[o],c=u?u.loader:null;if(!c&&n)return y.a.warn("Wrong with scheme ".concat(o,": ").concat(a.toString())),void n.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_UNSUPPORTED_SCHEME,a));var l=new c(e,t,i);return l.load(t.uris[0]),l}}]),n}(_.EventEmitter),z=new H},function(e,t,n){var r=n(81),i=n(87),a=n(173);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(28),i=n(139),a=n(273),o=i(5),s="find",u=!0;s in[]&&Array(1).find((function(){u=!1})),r({target:"Array",proto:!0,forced:u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:undefined)}}),a(s)},function(e,t,n){var r=n(724),i=n(725),a=n(591),o=n(726);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";t.a={DisPatchStatus:"disPatch.status",LoadStatus:"cdnTaskLoader.loadStatus",DisLoadStatus:"dispatchLoader.status",CdnNodeMgrStateChange:"cdnNodeMgr.stateChange"}},function(e,t,n){"use strict";var r=n(28),i=n(189),a=n(107),o=n(174),s=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||c},{join:function(e){return s.call(a(this),e===undefined?",":e)}})},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(237))},function(e,t,n){"use strict";t.a={LoaderState_ready:"LoaderState_ready",LoaderState_progress:"LoaderState_progress",LoaderState_done:"LoaderState_done",LoaderState_error:"LoaderState_error",LoaderState_error_dispatch:"LoaderState_error_dispatch",LoaderState_error_load:"LoaderState_error_load",LoaderState_dataRangeError:"DataRangeError",LoaderState_lowSpeed:"LoaderState_lowpeed",LoaderState_405:"LoaderState_405"}},function(e,t,n){var r=n(99),i=n(600),a=n(30),o=n(215),s=n(132),u=s("iterator"),c=s("toStringTag"),l=a.values;for(var d in i){var f=r[d],h=f&&f.prototype;if(h){if(h[u]!==l)try{o(h,u,l)}catch(v){h[u]=l}if(h[c]||o(h,c,d),i[d])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(v){h[p]=a[p]}}}},function(e,t,n){"use strict";function r(e){return{payload:e,offset:0,index:0}}n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s}));function i(e){var t=e.payload,n=e.offset,r=t[e.index];return r>>=7-(7&n),r&=1,o(e,1),r}function a(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=e.payload,a=e.offset,s=(e.index,8*r.length-a);if(t>s)throw new Error("Cannot get "+t+" bit(s) from offset "+a+", "+s+" available");for(var u=0,c=0;c<t;){var l=void 0;t-c>=8&&0==(7&a)?(u|=r[a>>3]<<t-1-c,l=8,o(e,8)):(u|=i(e)<<t-1-c,l=1),c+=l}return n?(32!==t&&u&1<<t-1&&(u|=-1^(1<<t)-1),u):u>>>0}function o(e,t){var n=e.offset+t;if(!(n<=8*e.payload.byteLength))throw Error("".concat("bit operator: "," can't skip ").concat(t));e.offset=n,e.index=e.offset>>3}function s(e){var t=e.offset;return 8*e.payload.byteLength-t}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(29),i=n(181),a=n(94),o=n(91),s=n(242),u=n(287),c=n(143),l=c.get,d=c.enforce,f=String(u).split("toString");i("inspectSource",(function(e){return u.call(e)})),(e.exports=function(e,t,n,i){var u=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),d(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=n:a(e,t,n)):c?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u.call(this)}))},function(e,t,n){var r=n(189),i=n(122);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(107),i=n(273),a=n(177),o=n(143),s=n(253),u="Array Iterator",c=o.set,l=o.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";n.d(t,"b",(function(){return ce})),n.d(t,"j",(function(){return se})),n.d(t,"g",(function(){return ve})),n.d(t,"h",(function(){return ge})),n.d(t,"a",(function(){return fe})),n.d(t,"i",(function(){return z})),n.d(t,"e",(function(){return $})),n.d(t,"d",(function(){return J})),n.d(t,"k",(function(){return _e})),n.d(t,"c",(function(){return Ie})),n.d(t,"f",(function(){return Le}));n(157),n(284),n(167),n(297),n(298),n(227),n(226);var r=n(411),i=n.n(r),a=n(85),o=n.n(a),s=n(230),u=n.n(s),c=n(104),l=n.n(c),d=n(103),f=n.n(d),h=n(37),p=n.n(h),v=(n(108),n(22),n(84),n(124),n(131),n(74),n(79),n(263),n(82),n(32),n(27),n(40),n(144),n(36),n(76),n(0));n(170),n(166),n(309),n(493);function y(){}var g="undefined"!=typeof window&&!!window,m="undefined"!=typeof wx&&("undefined"==typeof window||!window),_="undefined"!=typeof swan&&("undefined"==typeof window||!window),b="undefined"!=typeof qq&&("undefined"==typeof window||!window),x="undefined"!=typeof my&&("undefined"==typeof window||!window),k="undefined"!=typeof tt&&("undefined"==typeof window||!window),w={MediaType:[".ts",".m4s",".flv",".webm",".m3u8",".mp4"],UserStorageKey:"userstoragekey",RemoteControlKey:"remotecontrolkey",StorageMaxLen:5,WeiXinApplets:{requestFun:m?wx.request:y,name:"WeiXinApplets",getFun:m?wx.getStorageSync:y,setFun:m?wx.setStorageSync:y,removeFun:m?wx.removeStorageSync:y},BaiduApplets:{requestFun:_?swan.request:y,name:"BaiduApplets",getFun:_?swan.getStorageSync:y,setFun:_?swan.setStorageSync:y,removeFun:_?swan.removeStorageSync:y},QQApplets:{requestFun:b?qq.request:y,name:"QQApplets",getFun:b?qq.getStorageInfoSync:y,setFun:b?qq.setStorageSync:y,removeFun:b?qq.removeStorageSync:y},TiktokApplets:{requestFun:k?tt.request:y,name:"TiktokApplets",getFun:k?tt.getStorageSync:y,setFun:k?tt.setStorageSync:y,removeFun:k?tt.removeStorageSync:y},AlipayApplets:{requestFun:x?my.request:y,name:"AlipayApplets",getFun:x?my.getStorageSync:y,setFun:x?my.setStorageSync:y,removeFun:x?my.removeStorageSync:y},Android:"android",IOS:"ios",PC:"pc",H5:{requestFun:g?"xhr":y,name:"H5",getFun:g?window.localStorage.getItem.bind(window.localStorage):y,setFun:g?window.localStorage.setItem.bind(window.localStorage):y,removeFun:g?window.localStorage.removeItem.bind(window.localStorage):y},RemoteConfigHttpUrl:"http://puma.api.iqiyi.com/tiger/fetch?businessGroupId=9&key=",RemoteConfigHttpsUrl:"https://puma-api.iqiyi.com/tiger/fetch?businessGroupId=9&key=",Period:864e5,ContentType:{DashURl:"dash",M3U8URL:"m3u8",M3U8Content:"m3u8Content",URL:"http or https url",MP4:"mp4",Other:"other"}},S=g&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent.toLowerCase():null,T="",P="",E=null,A="",I="",D=0,L=0,O=!g||/^https/gi.test(window.location.protocol),R=-1;function C(){if(clearTimeout(L),L=null,!(D>3))try{if(T.requestFun&&"xhr"!==T.requestFun)T.requestFun({url:w.RemoteConfigHttpsUrl+escape(JSON.stringify({platform:T.name,terminal:A})),method:"GET",header:{"content-type":"application/json"},success:function(e){T.setFun(w.RemoteControlKey,JSON.stringify(e.data)),M()},fail:function(e){D++,L=setTimeout(C,3e3)}});else{var e=new XMLHttpRequest;e.timeout=5e3;var t=JSON.stringify({platform:T.name,terminal:A});e.open("GET",O?w.RemoteConfigHttpsUrl+t:w.RemoteConfigHttpUrl+t,!0),e.onload=function(t){try{T.setFun(w.RemoteControlKey,e.response),M()}catch(t){}},e.onerror=function(e){D++,L=setTimeout(C,3e3)},e.ontimeout=function(e){D++,L=setTimeout(C,3e3)},e.send()}}catch(n){}}function M(){E?E.expiredTime=Date.now()+w.Period:E={data:[],expiredTime:Date.now()+w.Period,lastIndex:-1},T.setFun(w.UserStorageKey,JSON.stringify(E))}function B(e){for(var t=-1;t++<w.MediaType.length;)if((R=e.indexOf(w.MediaType[t]))>0){I=w.MediaType[t];break}return I}function N(e){return e.indexOf("/dash?")>=0?w.ContentType.DashURl:/^https/gi.test(e)||/^http/gi.test(e)?e.indexOf(".m3u8")>0?w.ContentType.M3U8URL:e.indexOf(".mp4")>0?w.ContentType.MP4:w.ContentType.URL:/^#/gi.test(e)?w.ContentType.M3U8Content:w.ContentType.Other}function F(e,t){for(var n=e.toString(2);t.length>0;){var r=t.shift().split("_"),i=r?parseInt(r[0]):-1,a=r?parseInt(r[1]):-1;if(i>0){for(;i>n.length;)n="0"+n;n=n.substring(0,n.length-i)+a+n.substring(n.length-i+1)}}return parseInt(n,2)}function q(e,t){return j.apply(this,arguments)}function j(){return(j=o()(p.a.mark((function e(t,n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||console,e.prev=1,T="undefined"==typeof swan||window?"undefined"==typeof tt||window?"undefined"==typeof qq||window?"undefined"==typeof wx||window?"undefined"==typeof my||window?w.H5:w.AlipayApplets:w.WeiXinApplets:w.QQApplets:w.TiktokApplets:w.BaiduApplets,S&&(A=/(Android)/i.test(navigator.userAgent)?w.Android:/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?w.IOS:w.PC),P=N(t),r=T.getFun(w.UserStorageKey),E=r?JSON.parse(r):null,i=t,P===w.ContentType.DashURl?(i=V(t),(null===E||E.expiredTime<16263216e5||E.expiredTime<=Date.now())&&C()):P===w.ContentType.URL||P===w.ContentType.M3U8Content?(I=B(t),i=V(t),(null===E||E.expiredTime<=Date.now())&&C()):P===w.ContentType.M3U8URL||P===w.ContentType.MP4?(U(t),i=V(t),(null===E||E.expiredTime<=Date.now())&&C()):w.ContentType.Other,e.abrupt("return",Promise.resolve(i));case 12:return e.prev=12,e.t0=e["catch"](1),e.abrupt("return",Promise.resolve(t));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function U(e){var t=function(e){for(var t=-1;t++<w.MediaType.length;)if((R=e.indexOf(w.MediaType[t]))>0){I=w.MediaType[t];break}var n="";if(R>=0){var r=e.slice(0,R),i=r.lastIndexOf("/");n=r.slice(i+1)}return n}(e),n=!1;if(t){if(E){for(var r=0;r<E.data.length;r++)if(E.data[r]===t){n=!0;break}}else E={data:[],expiredTime:0,lastIndex:-1};n||(E.data[++E.lastIndex%w.StorageMaxLen]=t,T.setFun(w.UserStorageKey,JSON.stringify(E)))}}function V(e){var t,n,r,i=e,a=T.getFun(w.RemoteControlKey);if((a=a?JSON.parse(a):null)&&a.adapter){var o=a.adapter.add?JSON.parse(a.adapter.add).arrays:null;if(o){for(var s=[],u=0;u<o.length;u++)if("*"===o[u].type||o[u].type===I.slice(1))for(;o[u].value.length>0;)s.push(o[u].value.shift());var c=JSON.stringify(s).slice(2,-2).replace(/"/g,"").replace(/:/g,"=").replace(/},{/g,"&");if(""!==c)if(P===w.ContentType.URL)i=i.indexOf("?")>0?i+"&"+c:i+"?"+c;else if(""!=I){var l="?"===i[R+I.length]?"?":"",d=new RegExp("\\"+I+(l?"\\?":""),"g");i=i.replace(d,I+"?"+c+"&")}}var f=a.adapter.remove?JSON.parse(a.adapter.remove).arrays:null;if(f)for(var h=0;h<f.length;h++)if("*"===f[h].type||f[h].type===I.slice(1))for(;f[h].value.length>0;)for(var p=f[h].value.shift(),v=0;v>=0;){v=i.indexOf(p+"=");var y=i.slice(v).indexOf("&");y<0&&(y=i.length-1,"&"===i[v-1]&&(v-=1)),v>=0&&(i=i.replace(i.slice(v,v+y+1),""))}var g=a.adapter.modify?JSON.parse(a.adapter.modify).arrays:null;if(g)for(;g.length>0;){var m=g.shift();if("*"===m.type||m.type===P)for(;m.value.length>0;){var _=m.value.shift(),b=Object.keys(_)[0],x=parseInt((t=i,n=void 0,r=void 0,n=new RegExp("(^|&)"+b+"=([^&]*)(&|$)"),null!=(r=t.split("?")[1].match(n))?decodeURIComponent(r[2]):null));if(!isNaN(x)){var k=F(x,Object.values(_));i=i.replace(b+"="+x,b+"="+k)}}}}return i}var H=new v.e("middlekey");function z(e){return G.apply(this,arguments)}function G(){return(G=o()(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.prev=1,e.next=4,q(t,H);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),H.error(e.t0?e.t0.stack:e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var W=(v.z?"http":"https")+":",K="420a8433732a6c99d1eae98fea69e55d/dash",$={url:"".concat(W,"//").concat(v.z?"cache.video.qiyi.domain":"cache.video.iqiyi.com","/dash"),ipUrl:W+"//103.44.59.54/3ea",ipSuccess:W+"//{{IP}}/3ea/"+K,ipFail:W+"//access.if.iqiyi.com/3ea/"+K},Y="https://api.vip.iqiyi.com/services/cknsp.action",Q="https://api.vip.iqiyi.com/services/ckts.action",J={DASH:"DASH",CKNSP:"CKNSP",P00001:"P00001",P00002:"P00002",P00003:"P00003",P00004:"P00004",P00005:"P00005",P00006:"P00006",P00007:"P00007"},X=v.l.QP0034,Z=new v.e("browserSupport");function ee(e){var t=e.dp,n=e.dm,r=e.m,i=e.hvc;return{domParser:!!t,drm:n?{playready:!!n.pr,widevine:!!n.wv}:"",media:{"webm-vp9":!!r["wm-vp9"],"webm-av1":!!r["wm-av1"],"mp4-hevc":!!r["m4-hevc"],"mp4-dv":!!r["m4-dv"]},hvc:i}}function te(e){return new Promise((function(t){var n;function r(){Object(v.G)(e).then((function(n){var r=function(e){var t=e.domParser,n=e.drm,r=e.media,i=e.hevc;Z.log("drm: ".concat(v.f.stringify(n),", drm status: ").concat(n?n.status:"drm undefined",", widevine: ").concat(n&&"fullfilled"===n.status?n["com.widevine.alpha"]:undefined));var a=!1;try{a=/UWP/.test(navigator.userAgent)}catch(o){}return{v:15,dp:t?1:undefined,dm:n&&"fullfilled"===n.status?{pr:a?undefined:n["com.microsoft.playready"]?1:undefined,wv:n["com.widevine.alpha"]?1:undefined}:undefined,m:{"wm-vp9":r['video/webm; codecs="vp09.00.40.08"']?1:undefined,"wm-av1":r['video/webm; codecs="av01.0.08M.08"']?1:undefined,"m4-hevc":r['video/mp4; codecs="hvc1.1.6.L93.90"']?1:undefined,"m4-dv":r['video/mp4; codecs="dv"']?1:undefined},hvc:i&&i.supported}}(n);v.k.set(X,v.f.stringify(r),{expires:1296e6,path:"/",domain:"iqiyi.com",response:e?e.response:null}),t(ee(r))}),(function(e){console.error(e)}))}var i=v.k.get(X,{rawStr:e?e.cookie:null});i?(n=v.f.parse(i),Z.log("QP0034: ".concat(v.f.stringify(n))),n&&15==n.v?t(ee(n)):r()):r()}))}function ne(e){return new Promise((function(t,n){e.getVipTypes((function(e){e.length>0?t(e):n(e)}))}))}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=0,oe=!1;function se(){return oe}var ue=new v.e("DashRemote"),ce=function(){function e(t){l()(this,e),this.requestIsAbandoned=!1,this.vmsParams=null,this.vmsXhrRequest=null,this.svrCtx=t}return f()(e,[{key:"request",value:function(e,t,n){var r,i=e.params,a=e.retryUrl,s=e.hostUseIP,c=e.sptr,l=e.pingback,d=e.platform,f=e.vpsFeatures,h=e.mmc,y=e.mmcPrivateKey,g=e.accelerator,m=e.user,_=this,b=!!s,x=i.tvid,k=i.vid,w=i.vd,S=i.ppt,T=i.ost,P=i.spt,E=null,A=i.tryCount||0,I=Object(v.p)(_.svrCtx),D=I.canaryVP9,L=I.canaryAV1,O=(I.canaryHEVC,I.canaryDCache),R=d||Object(v.g)(_.svrCtx),C=v.k.get(v.l.QP0038,{rawStr:v.z&&_.svrCtx?_.svrCtx.cookie:null})||!1;_.svrCtx&&(m=_.svrCtx.user),c&&(c.adirqstm=+new Date);var M=Date.now();return Promise.all([te(_.svrCtx),ne(m)]).then((function(e){var s=u()(e,2),I=s[0],B=s[1];I&&(I.drm?(I.drm.widevine?(f.openBit(1,42),oe=!0,ue.log("vps feature open widevine")):f.closeBit(1,42),I.drm.playready?(f.openBit(4,5),oe=!0,ue.log("vps feature open playready")):f.closeBit(4,5),oe?(f.openBit(4,20),f.openBit(4,21),f.openBit(7,3)):(f.closeBit(4,20),f.closeBit(4,21))):(f.closeBit(1,42),f.closeBit(4,5),f.closeBit(4,20),f.closeBit(4,21)),I.media&&(console.log(L,I.domParser,I.media["webm-av1"]),L&&I.domParser&&I.media["webm-av1"]?I.drm.widevine&&R.browser.CHROME&&R.browser.version>=110?(f.openBit(7,30),f.openBit(6,8),f.openBit(4,41),f.openBit(7,28),f.openBit(7,20),"1008919900"==x&&(f.openBit(4,17),f.openBit(7,11),f.closeBit(7,20)),L=!1):"1460443197753500"==x?(f.openBit(6,1),f.openBit(6,2),f.openBit(6,3),f.openBit(6,4),f.openBit(6,5),f.openBit(6,6),f.openBit(6,7),f.openBit(4,41),f.openBit(7,28)):(L=!1,f.closeBit(4,41),f.closeBit(7,28)):(f.closeBit(4,41),f.closeBit(6,8),L=!1),console.log("hvc: ".concat(I.hvc,", isSupportDrm: ").concat(oe,", media: ").concat(I.media["mp4-hevc"])),I.hvc&&I.media["mp4-hevc"]&&!C&&!L?(ue.log("vps feature supported hevc"),D=!1,I.media["mp4-dv"]?(f.openBit(1,9),f.openBit(1,10),f.openBit(7,27)):(f.closeBit(1,9),f.closeBit(1,10),f.closeBit(7,27)),f.openBit(7,25),f.openBit(2,1),f.openBit(2,2),f.openBit(2,3),f.openBit(2,4),f.openBit(2,5),f.openBit(2,6),f.openBit(2,8),f.openBit(2,19)):(f.closeBit(2,1),f.closeBit(2,2),f.closeBit(2,3),f.closeBit(2,4),f.closeBit(2,5),f.closeBit(2,6),f.closeBit(2,8),f.closeBit(2,19),f.closeBit(4,16)),D&&I.domParser&&I.media["webm-vp9"]&&!(R.browser.EDGE&&R.browser.version<=18)?f.openBit(4,28):f.closeBit(4,28)),v.z&&f.openBit(5,25)),f.openBit(4,38),c&&(c.adirqetm=+new Date),w=601===w?600:w,c&&(c.adlstm=+new Date);var N=v.z?{qd_v:"2in",tm:(new Date).getTime()}:h.mmcd();c&&(c.adletm=+new Date);var F=ae>0?ae:N.tm;ae=0;var q=i.ugcAuthKey||"",j=v.z?d.os.mac?"01080031010000000000":"01010031010000000000":R.getPtid(),U=v.n.get(_.svrCtx);c&&(c.psdkietm=+new Date,c.vcistm=+new Date),E=_.vmsParams=function(){var e={tvid:x,bid:w,vid:k,src:j,vt:0,rs:1,uid:m.getUid()||"",ori:"pcw",ps:i.switchvd?1:0,k_uid:v.L.getFluid({rawStr:v.z&&_.svrCtx?_.svrCtx.cookie:null})||v.L.getJsuid({rawStr:v.z&&_.svrCtx?_.svrCtx.cookie:null}),pt:0,d:0,s:"",lid:0,cf:0,ct:0,authKey:Object(v.B)(Object(v.B)(q)+F+""+x),k_tag:1,dfp:U,locale:"zh_cn",pck:m.passportCookie(),k_err_retries:A,up:q,sr:1};i.apdl&&(e.apdl=i.apdl),(e=Object(v.C)(e,N)).tm=F,g&&(e.d=1,e=Object(v.C)(e,g,!0),L&&I.domParser&&I.media["webm-av1"]&&f.openBit(7,29)),T&&(e.ost=T),S&&(e.ppt=S),P&&(e.spt=P),(R.os.ios||R.os.android)&&(e.ori="h5"),i.src&&(e.src=i.src),i.preIdAll&&(e.preIdAll=i.preIdAll),i.lid&&(e.lid=i.lid,e.cf=2),e.prio&&-1!=e.prio.indexOf("m3u8")?e.k_ft1=f.getM3U8FT1():e.prio&&-1!=e.prio.indexOf("mp4")?e.k_ft1=f.getMP4FT1():(e.k_ft1=f.getFT1(),e.k_ft4=f.getFT4()),i.k_ft1&&(e.k_ft1=i.k_ft1);var t=f.getFT2();t>0&&(e.k_ft2=t);var n=f.getFT5();n>0&&(e.k_ft5=n);var r=f.getFT6();return r>0&&(e.k_ft6=r),"1008919900"==x&&(e.k_ft8="QAA"),e.k_ft7=f.getFT7(),e.fr_300="120_120_120_120_120_120",e.fr_500="120_120_120_120_120_120",e.fr_600="120_120_120_120_120_120",e.fr_800="120_120_120_120_120_120",e.fr_1020="120_120_120_120_120_120",i.nr&&(e.nr=i.nr),"0"===v.k.get("QC004",{memory:!0,rawStr:v.z&&_.svrCtx?_.svrCtx.cookie:null})&&(e.vv="821d3c731e374feaa629dcdaab7c394b"),b&&(e.ecode="701"),e.bop=v.f.stringify({version:"10.0",dfp:U||"",b_ft1:f.getBFT1()}),e}(),l&&l.sendVrsRequestPingback(E);var V=function(e){if(_.requestIsAbandoned)ue.log("vps is abandoned!!!");else{var i,a=null;v.z&&delete(a=Object.assign(_.svrCtx.request.headers,{"x-real-ip":_.svrCtx.remoteAddress||""})).host,_.vmsXhrRequest=v.v.json({url:e,params:E,memory:!0,timeout:v.z?430:5e3,headers:a||null,beforeSend:(i=o()(p.a.mark((function s(e){var t,n,i,o;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=v.K.parse(e.url).host,B.forEach((function(t){e.url+="&ut="+t,Object(v.w)(E.ut)||(E.ut=[]),E.ut.push(parseInt(t,10))})),v.z||!O){s.next=7;break}return s.next=5,z(e.url);case 5:null!==(n=s.sent)&&(e.url=n);case 7:if(i="iloveiqiyi",s.prev=8,o=e.url.replace(new RegExp("^(http|https)://"+t,"ig"),""),b&&(o=o.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),!v.z){s.next=17;break}if(y){s.next=14;break}throw"mmcPrivateKey is not provided!";case 14:i=Object(v.B)(o+y),s.next=18;break;case 17:i=h.mmc(o);case 18:s.next=23;break;case 20:s.prev=20,s.t0=s["catch"](8),ue.error("request, mmc error, catchinfo: "+(s.t0.message?s.t0.message:s.t0));case 23:return e.url+="&vf="+i,ue.log("vps load: ".concat(e.url)+(a?", \nheaders: ".concat(v.f.stringify(a)):"")+", \nrequestTime: ".concat(Date.now()-M)),r=e,s.abrupt("return",e);case 27:case"end":return s.stop()}}),s,null,[[8,20]])}))),function(e){return i.apply(this,arguments)}),success:function(e,i){if(i&&i.headers&&i.headers.rat&&(e.rat=i.headers.rat),_.requestIsAbandoned)ue.log("start vms request success callback is abandoned!!!");else if(c&&(c.vcietm=+new Date),l&&l.sendVrsReadyPingback(E,e),ue.log("vps success."),e&&v.s.call(e,"code")){var o,s,u,d,f,h;if("A00000"===e.code)v.z&&(null===(o=_.svrCtx)||void 0===o||null===(s=o.logger)||void 0===s||s.info({},"".concat(r.url),ie(ie({},r),{},{logParams:{headers:a,serverRequestId:null===(u=_.svrCtx)||void 0===u?void 0:u.serverRequestId,requestStatus:"success"}}))),t(e,i.status);else"A00020"===e.code&&e.tm&&(ae=e.tm),v.z&&(null===(d=_.svrCtx)||void 0===d||null===(f=d.logger)||void 0===f||f.error({},"".concat(r.url),ie(ie({},r),{},{logParams:{headers:a,serverRequestId:null===(h=_.svrCtx)||void 0===h?void 0:h.serverRequestId,requestStatus:"fail"}}))),n(e)}else{var p={};p.code=J.P00002,n(p)}},failure:function(e,t){var i,o,s;if(_.requestIsAbandoned)ue.log("start vms request failure callback is abandoned!!!");else{ue.error("dash fail raw json data->"+e),v.z&&(null===(i=_.svrCtx)||void 0===i||null===(o=i.logger)||void 0===o||o.error({},"".concat(r.url),ie(ie({},r),{},{logParams:{headers:a,errorData:e,requestStatus:"fail",serverRequestId:null===(s=_.svrCtx)||void 0===s?void 0:s.serverRequestId}})));var u={};u.code=J.P00001,n(u,t.response.status)}}})}};if(b)ue.info("vps ip, url = "+$.ipUrl),v.v.request({url:$.ipUrl,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";"),n=t[Math.floor(Math.random()*t.length)];ue.info("vps ip ok "),V($.ipSuccess.replace("{{IP}}",n))}else ue.info("vps ip fail, data="+e),V($.ipFail)},failure:function(e){ue.info("vps ip fail, data="+e),V($.ipFail)}});else{var H=a||$.url;V(H)}}))["catch"]((function(e){var t,r,i;v.z&&(null===(t=_.svrCtx)||void 0===t||null===(r=t.logger)||void 0===r||r.info({},"BrowserOrVipFail",{logParams:{serverRequestId:null===(i=_.svrCtx)||void 0===i?void 0:i.serverRequestId,errorMsg:JSON.stringify(e),requestStatus:"fail"}})),n(e)})),this}},{key:"getReqParams",value:function(){return this.vmsParams}},{key:"getXhrRequest",value:function(){return this.vmsXhrRequest}},{key:"setReqAbandoned",value:function(){this.requestIsAbandoned=!0}}]),e}(),le={},de=new v.e("authremote");v.h;var fe={getRequestURL:function(e,t){var n=t.user,r={version:"10.0",platform:"01010031010000000000",deviceId:v.L.getFluid()||v.L.getJsuid(),uid:n.getUid(),playType:"pcwh5",shareFlag:0,appname:"h5",dfp:v.n.get(),messageId:"h5_"+v.L.createUUID().replace(/-/gi,"")};return Object(v.C)(e,r),(e.fileFormat&&"f4v"!=e.fileFormat?Q:Y)+"?"+v.v.serializeParam(e)},getPreviewTime:function(e,t){var n=t||le[e];if(n){var r=0;return n.data&&n.data.prv&&1==n.data.prv&&(1==n.previewType?r=60*n.previewTime*1e3:3==n.previewType&&(r=1e3*n.previewTime)),r}de.log("wrong time to invoke getPreviewTime!")},getAuthUid:function(e){var t=le[e];if(t){if(t.data&&t.data.u)return t.data.u}else de.log("wrong time invoke getAuthUid is wrong!")},analyzeAuthData:function(e,t,n,r){var i=1==e.shareFlag,a=e.tvid;t&&v.s.call(t,"code")?(de.log("analyze authremote data,params: isShare = "+(i?"fgtw(分甘同味)":"")+",code = "+t.code),"A00000"===t.code?(v.z||(le[a]=t),n(a,t)):r(t.code,"CKNSP_RECHARGE_"+t.code,t)):r(null,"CKNSP_DATA_Fail")},request:function(e,t,n){var r=e.params,i=e.user,a=this,o=0;!function s(){o++;var e=a.getRequestURL(r,{user:i});2===o&&(e=e.replace(/^https/gi,"http")),v.v.json({url:e,timeout:5e3,beforeSend:function(e){return de.log("check charge definition,params: url = "+e.url),e},success:function(e){a.analyzeAuthData(r,e,t,n)},failure:function(e,t){o<2?s():n(null,"CKNSP_HTTPFail")}})}()}},he=v.z?"https":window.location.protocol;function pe(e,t,n){var r=n.platform,i=n.mmc,a=he+e.baseUrl+t,o=v.K.filename(a);if(e.isVIP){var s=e.boss.data.t||"",u=e.boss.data.u,c=i.mmc(s+o);a+="&t="+s+"&vid="+e.vid+"&ibt="+c+"&cid=afbe8fd3d73448c9&ib=8&ptime="+fe.getPreviewTime(e.tvid,e.boss)+"&QY00001="+u}else a+="&cross-domain=1&qyid="+(v.L.getFluid()||v.L.getJsuid())+"&qypid="+e.tvid+"_"+Object(v.q)(r);return a}function ve(e,t,n){for(var r=n.platform,i=n.mmc,a={types:[],audio:{}},o=[],s=e.audio,u=0;u<s.length;u++){var c={},l=s[u];-1==o.indexOf(l.lid)&&(c.id=l.lid,c.ispre=1==l.ispre?1:0,c.name=l.name||"其他",1==l.ispre&&(e.currentLid=l.lid),o.push(l.lid),a.types.push(c)),l.fs&&(a.audio=l)}if(t&&a.audio&&a.types.length>1)for(var d=a.audio.fs,f=0;f<d.length;f++)d[f].dpl=pe(e,d[f].l,{platform:r,mmc:i});return a}n(296),n(194),n(426),n(213),n(98);var ye=new v.e("AnalyzeVidls");function ge(e,t,n){var r;t||(r=[]),e=function(e){for(var t=new Map,n=e.sort((function(e,t){return e.dr-t.dr})),r=0;r<n.length;r++){var i=n[r],a=i.bid,o=i.ff,s=i.fr,u=i.dr,c=i.br,l=i.m3u8,d=i.play,f=v.z?!!d:!!l;if(t.has(a)){var h=t.get(a),p=v.z?!!h.play:!!h.m3u8,y=!p&&f||!p&&!f;if("265ts"===o&&"265ts"!==h.ff&&y){t.set(a,i);continue}if(60===s&&60!==h.fr&&y){t.set(a,i);continue}if(u===h.dr&&c===h.br&&s<h.fr)continue;a>=800&&"265ts"===o&&"265ts"===h.ff&&(2===u&&200===c&&y?t.set(a,i):2!==u||100!==c||2===h.dr&&200===h.br||!y?(1===u&&200===c&&(2!==h.dr&&200!==h.br||2!==h.dr||100!==h.br)&&y||1===u&&100===c&&2!==h.dr&&200!==h.br&&1!==h.dr&&y||4===u&&200===c&&(2!==h.dr&&200!==h.br||1!==h.dr||100!==h.br)&&y||4===u&&100===c&&2!==h.dr&&200!==h.br&&1!==h.dr&&100!==h.br&&y||l||d)&&t.set(a,i):t.set(a,i))}else t.set(a,i)}return Array.from(t.values())}(e);for(var i=function(i){var a=e[i],o=a.fs,s="",u=a.vid,c=v.m.getOldVd(a.bid);if(!c)return"continue";var l=a.dr,d=a.fr,f=a.s,h=a.drmType,p={},y=a.duration||0,g=a.vsize,m=a.mver,_=a.ever,b=a.mk||null,x=a.ml||null,k="",w=a.play,S=a.code;if(o&&a.scrsz){var T=a.scrsz.split("x");p={width:T[0],height:T[1]}}var P=null;switch(a.ff){case"f4v":case"flv":s="f4v",a.fs&&a.fs.length>0&&(k=a.fs);break;case"ts":case"265ts":var E;if(s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(k=Object(v.F)(a.m3u8)),v.z&&null!=w&&null!==(E=w.ts)&&void 0!==E&&E.l){var A=w.ts.l.split("?");2===A.length&&(A[1]=globalThis.mmcEncode(A[1]),w.ts.l=A.join("?"))}break;case"m4s":s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(k={m3u8:Object(v.E)(a.m3u8)},a.drm&&"A00000"===a.drm.code&&(k.drm={keySystemServer:a.drm.license_host},7===h?k.drm.keySystem="com.widevine.alpha":8===h&&(k.drm.keySystem="com.microsoft.playready"),ye.log("drmType="+h+",keySystem"+k.drm.keySystem+", server = "+k.drm.keySystemServer)));break;case"dash":switch(a.code){case 4:s="dash_vp9";break;case 5:if(s="dash_av1",v.z&&null!=w&&w.av1){var I="?";Object.keys(w.av1).forEach((function(e){var t=w.av1[e];if(null!=t&&t.l){var n=t.l.split(I);2===n.length&&(n[1]=globalThis.mmcEncode(n[1]),t.l=n.join(I))}if(null!=t&&t.ourl){var r=t.ourl.split(I);2===r.length&&(r[1]=globalThis.mmcEncode(r[1]),t.ourl=r.join(I))}}))}}"string"==typeof a.m3u8&&a.m3u8.length>0&&(k=a.m3u8),a.drm&&"A00000"===a.drm.code&&(P={keySystemServer:a.drm.license_host,keySystem:7===h?"com.widevine.alpha":"com.microsoft.playready",pssh:a.drm.pssh,encryptionType:a.drm.cpv||"cenc"},ye.log("drmType="+h+",keySystem"+P.keySystem+", server = "+P.keySystemServer));break;case"mp4":"string"==typeof a.mp4Url&&a.mp4Url&&(k=a.mp4Url,s="mp4")}var D=!1,L=!0,O=null;void 0!==f&&(D=!0,L=0===parseInt(f,10),O=a.vut||[]);var R=null;a.drm&&(R=a.drm.watermark||0),a.watermark&&(R=a.watermark||0);var C=new v.b(c,u,s,y,g,p,L,D,O,k,h,R,m,w,_,S,l,d,b,x,P);if(C.br=a.br,C.fs=a.fs,null!=n&&n.SEO&&(C.m3u8=a.m3u8),t)c==t&&(k?r=C:ye.log("analyze, targetVd=".concat(t," ")));else{for(var M=!1,B=0;B<r.length;B++)r[B].vd==C.vd&&(M=!0,k&&(r[B]=C));M||r.push(C)}},a=0;a<e.length;a++)i(a);return r}n(418);function me(){var e={1:{3:!0,7:!1,9:!1,10:!1,37:!1,40:!0,42:!0,48:!0,50:!0},2:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,8:!1,19:!1},4:{3:!0,5:!1,14:!0,17:!1,16:!1,27:!0,28:!1,38:!1,41:!1,46:!0,51:!0},5:{1:!0,25:!1,28:!0},6:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,8:!1},7:{3:!0,11:!1,20:!1,25:!1,27:!1,28:!1,29:!1,30:!1},b_ft1:{4:!0}};function t(t){for(var n=[],r=1;r<=64;r++)n.push(e[t][r]?1:0);return parseInt(n.reverse().join(""),2)}return{getFT1:function(){return t(1)},getFT2:function(){return t(2)},getFT4:function(){return t(4)},getFT5:function(){return t(5)},getFT6:function(){return t(6)},getFT7:function(){return t(7)},getM3U8FT1:function(){var t=[];e[1][37]=!0,e[1][38]=!0,e[1][42]=!1,e[1][50]=!0;for(var n=1;n<=64;n++)t.push(e[1][n]?1:0);return parseInt(t.reverse().join(""),2)},getMP4FT1:function(){var t=[];e[1][42]=!1,e[1][45]=!0,e[1][50]=!0;for(var n=1;n<=64;n++)t.push(e[1][n]?1:0);return parseInt(t.reverse().join(""),2)},getBFT1:function(){return t("b_ft1")},hasBit:function(t,n){return e[t][n]},openBit:function(t,n){e[t][n]=!0},closeBit:function(t,n){e[t][n]=!1}}}var _e=me(),be=(n(34),n(412)),xe=n.n(be),ke=n(231),we=n.n(ke),Se=n(232),Te=n.n(Se),Pe=n(179),Ee=n.n(Pe);n(271),n(208);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee()(e);if(t){var i=Ee()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Te()(this,n)}}var Ie=["A00001","A00003","A00004","A00020",J.P00001,J.P00002,J.P00003,J.P00004];function De(e){return null===e||e===undefined}var Le=function(e){we()(n,e);var t=Ae(n);function n(e,r){var i;l()(this,n),i=t.call(this);var a=r.ctx,o=r.logId,s=r.vid,u=r.ugcAuthKey;return i.options=r,i.tryCount=0,i.maxTryCount=2,i.usedIp=!1,i.vmsRequest=null,i.svrCtx=a?a.platform?a:Object(v.I)(a):null,i.user=i.svrCtx?i.svrCtx.user:new v.h,i.platform=i.svrCtx?i.svrCtx.platform:Object(v.g)(),i.logger=new v.e("VpsRequest[".concat(o||"-","]"),i.svrCtx),i._res={tvid:e,vid:s,ugcAuthKey:u,pcaHas4k:!1},i}return f()(n,[{key:"startRequest",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this.options,i=r.sptr,a=r.spt,o=r.pingbackQOS,s=r.vd,u=r.ppt,c=r.ost,l=r.vid,d=r.ugcAuthKey,f=r.vpsFeatures,h=r.mmc,p=r.mmcPrivateKey,y=r.pt,g=r.user,m=r.apdl;return!v.z&&window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onVRSStart(),this.tryCount++,this.usedIp=t,s=v.m.getNewVd(s),new Promise((function(r,_){e.internalResolve=r,e.internalReject=_,e.vmsRequest=new ce(e.svrCtx).request({params:{tvid:e._res.tvid||"",vid:l||"",vd:s,ppt:De(u)?"":u,ost:De(c)?"":c,tryCount:e.tryCount-1,switchvd:!1,ugcAuthKey:d||"",nr:n.nr||"",spt:a,apdl:m},retryUrl:n.retryUrl||"",hostUseIP:t,sptr:i,user:g,platform:e.platform,pingback:v.z?null:o,vpsFeatures:v.z?me():f,mmc:v.z?null:h,mmcPrivateKey:v.z?p:null,accelerator:Object(v.x)(y)?{pt:y}:null},(function(t){t.nr?e.retryRequest(t):(!v.z&&window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onVRSDone(),e.parse(t))}),(function(t,n){if(n>=400)console.log("status>400",n),e.retryRequest(t,!0);else{var r=t.data?t.data.st:"";e.reject(0,J.DASH,t.code,r)}}))}))}},{key:"retryRequest",value:function(e,t){var n=this.internalResolve,r=this.internalReject;if(t){var i=(v.z?"http":"https")+":",a="".concat(i,"//retry-cache.video.iqiyi.com/dash");this.startRequest(!1,{retryUrl:a}).then(n,r)}else if(e&&e.nr&&this.tryCount<this.maxTryCount){var o=(v.z?"http":"https")+":",s="".concat(o,"//").concat(e.rd,"/dash");this.startRequest(!1,{retryUrl:s,nr:e.nr}).then(n,r)}}},{key:"reject",value:function(e,t,n,r){var i=this.internalResolve,a=this.internalReject;if(this.logger.warn("vps load fail, level: "+e+",type:"+t+",code:"+n+",st:"+r+", retry = "+this.tryCount),!v.z&&Ie.indexOf(n)>-1){if(this.tryCount<this.maxTryCount)return void this.startRequest().then(i,a);if(!this.usedIp)return void this.startRequest(!0).then(i,a)}var o={level:e,type:t,code:n,st:r,movieinfo:this._res};this.internalReject?(this.internalReject(o),this.internalReject=undefined):this.emit("reject",o)}},{key:"resolve",value:function(){var e=this._res;this.internalResolve?(this.internalResolve(e),this.internalResolve=undefined):this.emit("resolve",e)}},{key:"parse",value:function(e){var t=this,n=this,r=n._res,i=n.logger,a=n.options.isEnjoy,o=J.DASH,s="",u=this.platform.browser;try{var c=e.data,l=c.p,d=c.ctl,f=c.program;if(!function(e){var r=e.code;if(null==e.data||!v.s.call(e.data,"st"))return i.error("movieinfo error,params:type = data.data null or st is lose"),n.reject(0,o,J.P00004),!1;if(s=parseInt(e.data.st,10),a&&(505===s||506===s))return i.warn("站外禁播"),n.reject(0,o,r,s),!1;var c={path:"/",domain:"iqiyi.com"};if(800===s&&(v.k.remove("QC191",c),v.k.remove("CA0001",c),v.k.remove("firstkey",c),v.k.remove("QYABEX",c),v.k.remove("QC021",c),!v.z&&window.localStorage&&!localStorage.getItem("dashCookieRefesh")))return window.localStorage.setItem("dashCookieRefesh",!0),void window.location.reload();if(702===s&&(u.CHROME&&u.version>=75||u.FIREFOX&&u.version>=47)&&(v.k.remove(v.l.QP0034,c),t.logger.log("delete QP0034, refresh"),!v.z&&window.localStorage&&!localStorage.getItem("dashCookieRefesh")))return window.localStorage.setItem("dashCookieRefesh",!0),void window.location.reload();var l=100<s&&s<200;return!v.z&&window.localStorage&&window.localStorage.getItem("dashCookieRefesh")&&l&&(t.logger.log("delete localStorage dashCookieRefesh"),window.localStorage.removeItem("dashCookieRefesh")),!!l||(i.error("movieinfo error,params: st = "+s),n.reject(0,o,r,s),!1)}(e))return;i.log("vps st checked"),e.rat&&(r.rat=e.rat),r.isTryWatch=!1,r.previewTime="Infinity",r.baseUrl=Object(v.H)(c.dd)||"//pcw-data.video.iqiyi.com/videos",r.tvid=c.tvid,r.albumId=c.aid||"",r.watermark=0,r.cid=c.cid,r.authShare=c.share||{},r.sid=0,r.vipTypes=c.content.vipTypes,r.ugc=Object(v.A)(r.tvid),r.bossStatus=c.content.bossStatus,r.isVIP=c.content.bossStatus>0,r.vipBlock=0==c.content.nu;var h=(null==f?void 0:f.video)&&(null==f?void 0:f.video[0])&&(null==f?void 0:f.video[0].duration);r.prelude={headTimeS:l.bts<l.bt?l.bts:-1,headTime:l.bt,tailTime:l.et,tailTimeE:h&&l.ete>0&&h-l.ete>10?l.ete:-1},r.qiyiProduced=1===c.content.isProduced,r.exclusive=1===c.content.exclusive,r.logoOpen=!0,r.topLogoOpen=!0,r.lowerLogoOpen=!0,l.lgh&&(r.lowerLogoOpen=-1==l.lgh.indexOf(2)&&-1==l.lgh.indexOf("2"),r.topLogoOpen=-1==l.lgh.indexOf(1)&&-1==l.lgh.indexOf("1"));var p,y=l.wmarkPos||0;if(r.logoOpen=-1!=y,r.ctt=0==c.content.ctt||1==c.content.ctt?c.content.ctt:-1,r.isBanned=110===parseInt(e.data.st,10),r.uvt=c.content.uvt,d)r.ctl={uip:d.uip,dfn:null===(p=d.df)||void 0===p?void 0:p.n},r.pcaHas4k=!!d.pcaHas4k;if(r.vidl=[],f&&f.video){var g,m,_;r.vidl=ge(f.video,undefined,n.svrCtx);var b=(null==d||null===(g=d.df)||void 0===g?void 0:g.r)||[],x=(null==d||null===(m=d.df)||void 0===m?void 0:m.n)||"";b=b.map((function(e){return{n:x,vd:v.m.getOldVd(e.bid),bid:e.bid,df:!0}})),(_=r.vidl).push.apply(_,xe()(b)),r.vidl.sort((function(e,t){return e.vd>t.vd})),r.vidl.unshift(r.vidl.pop()),r.vidl=n._filterZqyh(r.vidl)}if(c.parts&&c.parts.length>0){var k=c.parts[0];if(k.vs&&k.vs.length>0){var w=k.vs;w[0].ff="f4v",r.parts=ge(w,v.m.getOldVd(w[0].bid))}}if(f&&f.audio&&(r.audio=f.audio),r.duration=0,r.drmType=r.vidl.length>0?r.vidl[0].drmType:1,f&&f.stl&&f.stl.length>0){for(var S={},T=f.stl,P=0;P<T.length;P++)1==parseInt(T[P].pre)&&(r.subtitlesUrl=Object(v.H)(c.dstl)+T[P].xml),S[T[P].lid]=Object(v.H)(c.dstl)+T[P].xml;r.subtitlesUrlMap=S}var E=e.data.p.pano;!E||2!=E.type&&3!=E.type&&4!=E.type?r.is3D=0:r.is3D=2;for(var A=r.vidl,I=0;I<A.length;I++){var D=A[I];if(D.playlist||D.a&&D.mk&&D.ml){r.vd=D.vd,r.watermark=D.watermark;break}}if(c.svp&&c.svp.length>0){for(var L=c.svp,O=L.length,R={data:[],ids:""},C=0;C<O;C++){var M={id:C,stars:L[C].sl.split(","),points:[],totalTime:0};R.ids+=L[C].sl+",";for(var B=L[C].vl,N=B.length,F=0;F<N;F++){var q=Number(B[F].sp),j=Number(B[F].ep);M.points.push({startTime:q,endTime:j}),M.totalTime+=j-q}M.points.sort((function(e,t){return e.startTime-t.startTime})),R.data.push(M)}r.svpinfo=R}if(r.isVIP){var U={};if(r.vidl.length>0)r.vidl.filter((function(e){return e.vd===r.vd})).length>0&&Object(v.C)(U,{tvid:r.tvid,aid:r.albumId});var V=c.boss_ts?"boss_ts":"boss";v.s.call(c,V)&&v.s.call(c[V],"code")?fe.analyzeAuthData(U,c[V],(function(e,t){n.vipAuthSuccess(e,t)}),(function(e,t,r){n.vipAuthFail(e,t,r)})):this.vipAuth(U)}else this.resolve()}catch(H){r=null,i.error(H.stack),this.reject(0,o,J.P00003,s)}}},{key:"getIsTennisContent",value:function(){var e=this._res;if(e.vipTypes&&e.vipTypes.length>0)for(var t=0;t<e.vipTypes.length;t++)if(1==e.vipTypes[t])return!0;return!1}},{key:"vipAuthSuccess",value:function(e,t){var n=this._res,r=this.logger,i=fe.getPreviewTime(e,t);n.isTryWatch=1===parseInt(t.data.prv,10),n.previewType=t.previewType,n.previewTime=0===i?"Infinity":i,this.getIsTennisContent()?n.authTipType=10:2===parseInt(t.content.vipMode,10)?n.authTipType=6:n.authTipType=parseInt(t.data.tip_type,10),n.vipTheatre=2===parseInt(t.content.vipMode,10),1==n.previewType?n.authRTime=60*t.data.rtime*1e3:3==n.previewType&&(n.authRTime=1e3*t.data.rtime),r.log("check charge definition pass,params: isTryWatch = "+n.isTryWatch+", previewType = "+n.previewType+", previewTime = "+i),n.vidl.filter((function(e){return e.vd===n.vd})),n.boss=t,this.resolve()}},{key:"vipAuthFail",value:function(e,t,n){var r=this._res,i=this.logger,a=J.CKNSP;r.isTryWatch=!1,n&&(r.previewType=n.previewType),i.log("check charge definition error,params: code = "+e+", msg = "+t),e?55==r.uvt?this.reject(0,a,e):"Q00312"==e||"Q00311"==e||"Q00501"==e?this.reject(2,a,e):this.reject(1,a,e):this.reject(0,a,J.P00005)}},{key:"vipAuth",value:function(e){var t=this;fe.request({params:e,user:this.user},(function(e,n){t.vipAuthSuccess(e,n)}),(function(e,n,r){t.vipAuthFail(e,n,r)}))}},{key:"clear",value:function(){var e=this.vmsRequest;e&&(e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort(),this.vmsRequest=null)}},{key:"_filterZqyh",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t=!1,n=!1;return e.forEach((function(e){e.vd,1!=e.dr&&2!=e.dr||(t=t||10==e.vd,n=n||41==e.vd)})),e=e.filter((function(e){return(!t||10!=e.vd||1==e.dr||2==e.dr)&&(!n||41!=e.vd||1==e.dr||2==e.dr)}))}}]),n}(v.c)},function(e,t,n){"use strict";var r=n(519).charAt,i=n(254),a=n(520),o="String Iterator",s=i.set,u=i.getterFor(o);a(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:undefined,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(80),i=n(401).indexOf,a=n(341),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=a("indexOf");r({target:"Array",proto:!0,forced:s||!u},{indexOf:function(e){return s?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";t.a={WEB:1,MOBILE:2,TV:3,OVERSEA_WEB:4,OVERSEA_TV:5,CARS:6}},function(e,t,n){var r=n(99),i=n(600),a=n(732),o=n(215);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(l){c.forEach=a}}},function(e,t,n){var r=n(145);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";n(218);var r=0,i=0,a=0,o=0,s=0,u=0,c=0,l=0,d=0;function f(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;e===undefined&&(e=d),300===c?o+=Math.max(e-l,0):500===c?s+=Math.max(e-l,0):600===c&&(u+=Math.max(e-l,0)),t&&(c=t),l=d=e}t.a=Object.defineProperties({play480Time:function(){return Math.floor(1e3*o)},play720Time:function(){return Math.floor(1e3*s)},play1080Time:function(){return Math.floor(1e3*u)},resetTimeSum:function(){o=s=u=0},resetCal:function(){r=i=a=0,c=l=d=0},updateTimestamp:function(e,t){0===c?(c=e,l=t):c!==e&&f(t,e),d=t},levelFlush:f},{playBid:{get:function(){return r},set:function(e){r=e},configurable:!0,enumerable:!0},everMaxBid:{get:function(){return i},set:function(e){i=e},configurable:!0,enumerable:!0},everMinBid:{set:function(e){a=e},get:function(){return a},configurable:!0,enumerable:!0}})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r={},i={},a={},o=0,s={getItem:function(e){return r[e]},setItem:function(e,t){r[e]=t},removeItem:function(e){delete r[e]}},u=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return s}(),c=function(){0===o&&(clearTimeout(o),o=setTimeout((function(){for(var e in o=0,i)u.setItem(e,i[e]),delete i[e];for(var t in a)u.removeItem(t),delete a[t]}),1e3))};t.a={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return r[e]||(r[e]=u.getItem(e)),r[e]},write:function(e,t){r[e]=t,i[e]=t,c()},remove:function(e){delete r[e],a[e]=0,c()}}},function(e,t,n){var r=n(80),i=n(604);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(283),i=n(143),a=n(253),o="String Iterator",s=i.set,u=i.getterFor(o);a(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:undefined,done:!0}:(e=r(n,i,!0),t.index+=e.length,{value:e,done:!1})}))},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n(70);t.a={Access_Control_Allow_Origin_Error:/(.*Access)(?=.*Control)(?=.*Allow)(?=.*Origin)|(.*Cross)(?=.*origin)(?=.*redirection)/gi,SSL_Error:/SSL|notIsHttps|证书无效|(.*certificate)(?=.*server)(?=.*invalid)/g,DNS_Error:/指定主机名的服务器/g,Network_Error:/Loadfailed|网络连接已中断|Loadingfailed|offline|断开与互联网的连接|網絡連線中斷/gi,HTTP_4XX:/statusErr_4/,HTTP_5XX:/statusErr_5/,OOM:/tryCatchError_oom|设备上无剩余空间/,DataError:/dataError|tryCatchError_no_body|getReader/g,getErrorType:function(e){return"string"!=typeof e?"unknown":"ttfbTimeout"===e?"ttfbTimeout":"recvTimeout"===e?"recvTimeout":"timeout"===e?"timeout":"slowSpeed"===e?"slowSpeed":this.Access_Control_Allow_Origin_Error.test(e)?"Access_Control_Allow_Origin_Error":this.SSL_Error.test(e)?"SSL_Error":this.DNS_Error.test(e)?"DNS_Error":this.Network_Error.test(e)?"Network_Error":this.HTTP_4XX.test(e)?"HTTP_4XX":this.HTTP_5XX.test(e)?"HTTP_5XX":this.OOM.test(e)?(upLog("oom"),"OOM"):this.DataError.test(e)?"dataError":"unknown"}}},function(e,t,n){"use strict";t.a={timestamp:function(){var e;return(null===(e=document.querySelector("video"))||void 0===e?void 0:e.currentTime)||0},playbackRate:function(){var e;return(null===(e=document.querySelector("video"))||void 0===e?void 0:e.playbackRate)||0},bufferEnd:function(){var e,t=(null===(e=document.querySelector("video"))||void 0===e?void 0:e.buffered)||null;return t&&t.length?t.end(0):0},paused:function(){var e=document.querySelector("video");return!e||e.paused}}},function(e,t,n){e.exports=n(770)},function(e,t,n){"use strict";var r=n(80),i=n(145),a=n(403),o=n(325),s=n(148),u=n(265),c=n(430),l=n(132),d=n(404)("slice"),f=l("species"),h=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,l,d=u(this),v=s(d.length),y=o(e,v),g=o(t===undefined?v:t,v);if(a(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[f])&&(n=undefined):n=undefined,n===Array||n===undefined))return h.call(d,y,g);for(r=new(n===undefined?Array:n)(p(g-y,0)),l=0;y<g;y++,l++)y in d&&c(r,l,d[y]);return r.length=l,r}})},function(e,t,n){var r=n(29),i=n(291),a=n(108),o=n(94),s=n(38),u=s("iterator"),c=s("toStringTag"),l=a.values;for(var d in i){var f=r[d],h=f&&f.prototype;if(h){if(h[u]!==l)try{o(h,u,l)}catch(v){h[u]=l}if(h[c]||o(h,c,d),i[d])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(v){h[p]=a[p]}}}},function(e,t,n){var r=n(99),i=n(502),a=n(162),o=n(395),s=n(506),u=n(585),c=i("wks"),l=r.Symbol,d=u?l:l&&l.withoutSetter||o;e.exports=function(e){return a(c,e)&&(s||"string"==typeof c[e])||(s&&a(l,e)?c[e]=l[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,t,n){"use strict";var r=n(80),i=n(325),a=n(256),o=n(148),s=n(183),u=n(514),c=n(430),l=n(404)("splice"),d=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,r,l,v,y,g,m=s(this),_=o(m.length),b=i(e,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=f(d(a(t),0),_-b)),_+n-r>h)throw TypeError(p);for(l=u(m,r),v=0;v<r;v++)(y=b+v)in m&&c(l,v,m[y]);if(l.length=r,n<r){for(v=b;v<_-r;v++)g=v+n,(y=v+r)in m?m[g]=m[y]:delete m[g];for(v=_;v>_-r+n;v--)delete m[v-1]}else if(n>r)for(v=_-r;v>b;v--)g=v+n-1,(y=v+r-1)in m?m[g]=m[y]:delete m[g];for(v=0;v<n;v++)m[v+b]=arguments[v+2];return m.length=_-r+n,l}})},function(e,t,n){"use strict";var r,i=n(616),a=n(147),o=n(99),s=n(145),u=n(162),c=n(399),l=n(215),d=n(204),f=n(158).f,h=n(302),p=n(342),v=n(132),y=n(395),g=o.Int8Array,m=g&&g.prototype,_=o.Uint8ClampedArray,b=_&&_.prototype,x=g&&h(g),k=m&&h(m),w=Object.prototype,S=w.isPrototypeOf,T=v("toStringTag"),P=y("TYPED_ARRAY_TAG"),E=i&&!!p&&"Opera"!==c(o.opera),A=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},L=function(e){if(!s(e))return!1;var t=c(e);return u(I,t)||u(D,t)};for(r in I)o[r]||(E=!1);if((!E||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},E))for(r in I)o[r]&&p(o[r],x);if((!E||!k||k===w)&&(k=x.prototype,E))for(r in I)o[r]&&p(o[r].prototype,k);if(E&&h(b)!==k&&p(b,k),a&&!u(k,T))for(r in A=!0,f(k,T,{get:function(){return s(this)?this[P]:undefined}}),I)o[r]&&l(o[r],P,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_TAG:A&&P,aTypedArray:function(e){if(L(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(S.call(x,e))return e}else for(var t in I)if(u(I,r)){var n=o[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in I){var i=o[r];i&&u(i.prototype,e)&&delete i.prototype[e]}k[e]&&!n||d(k,e,n?t:E&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(p){if(n)for(r in I)(i=o[r])&&u(i,e)&&delete i[e];if(x[e]&&!n)return;try{return d(x,e,n?t:E&&g[e]||t)}catch(s){}}for(r in I)!(i=o[r])||i[e]&&!n||d(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=c(e);return"DataView"===t||u(I,t)||u(D,t)},isTypedArray:L,TypedArray:x,TypedArrayPrototype:k}},,function(e,t,n){var r=n(80),i=n(768);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=n(86);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(e){u()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"pipe",value:function(e){return this.on("reset",(function(){e.reset()})),this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),e}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(e){this.emit("done",e)}},{key:"reset",value:function(){this.emit("reset")}}]),n}(h.EventEmitter)},function(e,t,n){var r=n(164),i=n(189),a=n(89),o=n(77),s=n(245);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var v,y,g=a(t),m=i(g),_=r(s,p,3),b=o(m.length),x=0,k=n?h(t,b):u?h(t,0):undefined;b>x;x++)if((f||x in m)&&(y=_(v=m[x],x,g),e))if(n)k[x]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:k.push(v)}else if(l)return!1;return d?-1:c||l?l:k}}},function(e,t,n){var r=n(427);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports["default"]=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){"use strict";t.a={KIWI:"KIWI",KIWIR:"KIWIR",AD:"AD",P07001:"P07001",IVG:"IVG",IV0001:"IV0001",dataKeyMap:{A00001:2,A00101:2,A00302:32,A00301:31,U00001:22,P00001:101,P00002:102,P00007:12,304:10,401:10,405:10,406:10,493:10,411:9,491:9,501:12,502:13,505:15,506:15,601:14,602:14,701:14,702:14,706:14,711:14,Q00312:22,Q00311:22,Q00501:22,P00005:21,P07001:7001},keyMap:{1:{title:"error_code_title1",desc:"error_code_desc1"},2:"error_code_desc2",6:"error_code_desc6",7:"error_code_desc7",9:{title:"error_code_title9",desc:"&nbsp;"},10:{title:"error_code_title10",desc:"&nbsp;"},11:"error_code_desc11",12:{title:"error_code_title12",desc:"error_code_desc12"},13:{title:"error_code_title13",desc:"error_code_desc12"},14:{title:"error_code_title14",desc:"&nbsp;"},15:{title:"本视频仅限爱奇艺站点播放，请至爱奇艺网站观看",desc:"&nbsp;"},21:"error_code_desc21",22:{title:"error_code_desc22",desc:"&nbsp;"},31:{title:"error_private_selfsee",desc:"&nbsp;"},32:{title:"error_private_video",desc:"&nbsp;"},101:"error_code_desc_http",102:"error_code_desc_http",3e3:{title:"error_code_title301",desc:"&nbsp;"},3302:{title:"error_code_vda_err",desc:"&nbsp;"},3303:{title:"error_code_audio_err",desc:"&nbsp;"},7001:"error_code_desc_ad"}}},function(e,t,n){var r,i,a,o=n(355),s=n(29),u=n(72),c=n(94),l=n(91),d=n(211),f=n(182),h=s.WeakMap;if(o){var p=new h,v=p.get,y=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return v.call(p,e)||{}},a=function(e){return y.call(p,e)}}else{var m=d("state");f[m]=!0,r=function(e,t){return c(e,m,t),t},i=function(e){return l(e,m)?e[m]:{}},a=function(e){return l(e,m)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(81),i=n(29),a=n(175),o=n(252),s=n(87).f,u=n(168).f,c=n(251),l=n(248),d=n(106),f=n(31),h=n(222),p=n(38)("match"),v=i.RegExp,y=v.prototype,g=/a/g,m=/a/g,_=new v(g)!==g;if(a("RegExp",r&&(!_||f((function(){return m[p]=!1,v(g)!=g||v(m)==m||"/a/i"!=v(g,"i")}))))){for(var b=function(e,t){var n=this instanceof b,r=c(e),i=t===undefined;return!n&&r&&e.constructor===b&&i?e:o(_?new v(r&&!i?e.source:e,t):v((r=e instanceof b)?e.source:e,r&&i?l.call(e):t),n?this:y,b)},x=function(e){e in b||s(b,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},k=u(v),w=0;w<k.length;)x(k[w++]);y.constructor=b,b.prototype=y,d(i,"RegExp",b)}h("RegExp")},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},,function(e,t,n){var r=n(92);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(256),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(438),i=n(116),a=n(148),o=n(256),s=n(255),u=n(524),c=n(746),l=n(439),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,v=h?"$":"$0";return[function(n,r){var i=s(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!h&&p||"string"==typeof r&&-1===r.indexOf(v)){var s=n(t,e,this,r);if(s.done)return s.value}var y=i(e),g=String(this),m="function"==typeof r;m||(r=String(r));var _=y.global;if(_){var b=y.unicode;y.lastIndex=0}for(var x=[];;){var k=l(y,g);if(null===k)break;if(x.push(k),!_)break;""===String(k[0])&&(y.lastIndex=u(g,a(y.lastIndex),b))}for(var w,S="",T=0,P=0;P<x.length;P++){k=x[P];for(var E=String(k[0]),A=d(f(o(k.index),g.length),0),I=[],D=1;D<k.length;D++)I.push((w=k[D])===undefined?w:String(w));var L=k.groups;if(m){var O=[E].concat(I,A,g);L!==undefined&&O.push(L);var R=String(r.apply(undefined,O))}else R=c(E,g,A,I,L,r);A>=T&&(S+=g.slice(T,A)+R,T=A+E.length)}return S+g.slice(T)}]}))},function(e,t,n){"use strict";t.a="5.2.73"},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"j",(function(){return v})),n.d(t,"f",(function(){return y}));n(17),n(88),n(516);var r=Object.prototype,i=r.toString,a=Function.prototype.toString,o=a.call(Object),s=9007199254740991,u="[object Object]",c=r.hasOwnProperty,l=function(e,t){return c.call(e,t)};function d(e,t){if(e)for(var n in e)if(l(e,n)&&t(e[n],n,e))break}var f,h,p=(f=Object.getPrototypeOf,h=Object,function(e){return f(h(e))});function v(){return{}}function y(){}},function(e,t,n){var r=n(81),i=n(200),a=n(173),o=n(107),s=n(169),u=n(91),c=n(286),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return a(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(80),i=n(256),a=n(749),o=n(750),s=n(92),u=1..toFixed,c=Math.floor,l=function(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)},d=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=c(i/1e7)},f=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=c(r/t),r=r%t*1e7},h=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+o.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(e){var t,n,r,s,u=a(this),c=i(e),p=[0,0,0,0,0,0],v="",y="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*l(2,69,1))-69)<0?u*l(2,-t,1):u/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(p,0,n),r=c;r>=7;)d(p,1e7,0),r-=7;for(d(p,l(10,r,1),0),r=t-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),d(p,1,1),f(p,2),y=h(p)}else d(p,0,n),d(p,1<<-t,0),y=h(p)+o.call("0",c);return y=c>0?v+((s=y.length)<=c?"0."+o.call("0",c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c)):v+y}})},,,function(e,t,n){var r=n(28),i=n(89),a=n(176);r({target:"Object",stat:!0,forced:n(31)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,t,n){var r=n(147),i=n(584),a=n(116),o=n(323),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(438),i=n(523),a=n(116),o=n(255),s=n(328),u=n(524),c=n(148),l=n(439),d=n(431),f=n(92),h=[].push,p=Math.min,v=4294967295,y=!f((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=n===undefined?v:n>>>0;if(0===a)return[];if(e===undefined)return[r];if(!i(e))return t.call(r,e,a);for(var s,u,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,y=new RegExp(e.source,f+"g");(s=d.call(y,r))&&!((u=y.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=a));)y.lastIndex===s.index&&y.lastIndex++;return p===r.length?!c&&y.test("")||l.push(""):l.push(r.slice(p)),l.length>a?l.slice(0,a):l}:"0".split(undefined,0).length?function(e,n){return e===undefined&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=t==undefined?undefined:t[e];return a!==undefined?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var d=a(e),f=String(this),h=s(d,RegExp),g=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(y?"y":"g"),_=new h(y?d:"^(?:"+d.source+")",m),b=i===undefined?v:i>>>0;if(0===b)return[];if(0===f.length)return null===l(_,f)?[f]:[];for(var x=0,k=0,w=[];k<f.length;){_.lastIndex=y?k:0;var S,T=l(_,y?f:f.slice(k));if(null===T||(S=p(c(_.lastIndex+(y?0:k)),f.length))===x)k=u(f,k,g);else{if(w.push(f.slice(x,k)),w.length===b)return w;for(var P=1;P<=T.length-1;P++)if(w.push(T[P]),w.length===b)return w;k=x=S}}return w.push(f.slice(x)),w}]}),!y)},function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"l",(function(){return g}));var r=n(105),i=n.n(r),a=(n(70),n(152)),o=function(e){return/^https/gi.test(e||window.location.protocol)};var s=function(e){return!!e&&"object"==i()(e)},u=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a.a}(e.length)&&!h(e)},c=function(e){for(var t in e)if(Object(a.e)(e,t))return!1;return!0},l=(Array.isArray,function(e){return s(e)&&"[object arraybuffer]"===a.i.call(e).toLowerCase()}),d=function(e){return s(e)&&"[object uint8array]"===a.i.call(e).toLowerCase()},f=function(e){return"number"==typeof e&&!isNaN(e)},h=function(e){return"function"==typeof e},p=function(e){return"string"==typeof e},v=function(e){return null!==e&&"object"===i()(e)},y=function(e){return"[object map]"===a.i.call(e).toLowerCase()},g="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts},function(e,t,n){var r=n(78),i=n(282),a=n(244),o=n(182),s=n(289),u=n(243),c=n(211)("IE_PROTO"),l=function(){},d=function(){var e,t=u("iframe"),n=a.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;n--;)delete d.prototype[a[n]];return d()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=r(e),n=new l,l.prototype=null,n[c]=e):n=d(),t===undefined?n:i(n,t)},o[c]=!0},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return I}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(184),u=n.n(s),c=(n(30),n(257),n(17),n(110),n(101),n(88),n(136),n(115),n(154),n(303),n(35),n(73)),l=n(7),d=n(2),f=n(19),h=n(267),p=n(11),v=n(16),y=n(128),g=n(332),m=new Map,_=0,b=null,x=0,k="",w=null,S=f.a.QC005?f.a.QC005:Math.random().toString(36).substr(2),T=0,P=[],E=function(){function e(t){var n=this;i()(this,e),u()(this,"_onloadend",(function(e){var t=n,r=e.currentTarget,i=r.status,a=r.response;if(!r.abs_request_seq||parseInt(r.abs_request_seq)===x-1)if(i>=200&&i<300)if(a&&a.errorcode&&"0"===a.errorcode){var o=" receive Message  ~~~~~~~~~~~~~~~~~~~~quality: ";t.levelID=parseInt(a.bitrate),d.a.absAlgorithmDes=t.algorithm_des=a.algorithm_des,t.receiveCount++,""===d.a.firstABSRes&&(d.a.firstABSRes=t.levelID>t.lstBit?"up":t.lstBit===t.levelID?"keep":"down"),o+=t.levelID+" levelID "+m.get(t.levelID)+", msg_seq "+a.msg_seq+" ,algorithm "+t.algorithm_des;var s=m.get(t.levelID);if(s&&s!==T&&(T=s,d.a.getOBid&&"function"==typeof d.a.getOBid)){var u=d.a.getOBid(T);""!==u&&function(e){var t=new Date;t.setTime(t.getTime()+31536e6);try{document.cookie="QP0035=".concat(e,";domain=iqiyi.com;path=/;expires=").concat(t)}catch(n){}}(u)}a.hasOwnProperty("max_delay")&&(t._maxDelay=parseInt(a.max_delay)||0,o+=", maxDelay: ".concat(t._maxDelay)),a.hasOwnProperty("stable")&&(t._stable=parseInt(a.stable)||9e4,o+=", stable: ".concat(t._stable)),a.hasOwnProperty("hcdn_gap")&&(t._hcdnGap=Math.max(parseInt(a.hcdn_gap),5e3),o+=", hcdnGap: ".concat(t._hcdnGap)),l.a.info(o)}else l.a.error("ABS proxy return errCode "+JSON.stringify(a));else l.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~status err "+i)})),u()(this,"_onerror",(function(e){l.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~error "+e)})),u()(this,"_onabort",(function(){l.a.warn(" receive Message  ~~~~~~~~~~~~~~~~~~~~onabort")})),this._tvid=t,this.levelID=-1,m.clear(),k=d.a.absDoMain?(c.a.isHTTPS?"https":"http")+"://"+d.a.absDoMain+"/ABSRequest":(c.a.isHTTPS?"https":"http")+"://abs.video.iqiyi.com/ABSRequest",this.receiveCount=0,this.algorithm_des="defal",d.a.absAlgorithmDes="",this.lstBit=0,w||d.a.getUserInfoFunc(A),this._maxDelay=5e3,this._stable=0,this._hcdnGap=5e3,this._lstHCDNTime=0}return o()(e,[{key:"lstHCDNTime",get:function(){return this._lstHCDNTime},set:function(e){this._lstHCDNTime=e}},{key:"maxDelay",get:function(){return this._maxDelay/1e3}},{key:"stable",get:function(){return this._stable}},{key:"hcdnGap",get:function(){return Math.floor(this._hcdnGap/1e3)}},{key:"bitrate",get:function(){var e=d.a.bid;return e?parseInt(e):-1!==this.levelID&&m.has(this.levelID)?m.get(this.levelID):-1}},{key:"algorithmDes",get:function(){return this.algorithm_des}},{key:"close",value:function(){this.levelID=-1,this.receiveCount=0,this.algorithm_des="defal",d.a.absAlgorithmDes="",m.clear(),b=w=null}},{key:"reportData",value:function(e){try{var t=this._makeReportJsonData(e);if(!t||"0"===t.msg_seq&&"-1"===t.report.bandwidthEst)return!1;this._hcdnGap=Infinity,d.a.absInitTVId=e.tvid;var n=new XMLHttpRequest;n.abs_request_seq=t.msg_seq,n.responseType="json",n.onloadend=this._onloadend,n.onerror=this._onerror,n.onabort=this._onabort,n.open("POST",k,!0),n.withCredentials=!1,n.setRequestHeader("Content-Type","application/json");var r=JSON.stringify(t);n.send(r),l.a.info(" send Message  ~~~~~~~~~~~~~~~~~~~~ num "+t.msg_seq+","+r)}catch(i){return l.a.error("ABSStrategy send resquest tryCatchError"+i),!1}return!0}},{key:"_makeReportJsonData",value:function(e){var t=e.absBidBitrateMap,n=Math.floor(t.get(e.bid)*(y.a.playbackRate()||1)),r=[],i=[],a="0";if(e.dashNoReadyList.forEach((function(n){var a=parseInt(n),o=Math.floor(t.get(a)*(y.a.playbackRate()||1));if(o){m.get(o)!==a&&m.set(o,a);var s={bid:a.toString(),rate:o.toString(),size:"-1",duration:"-1",chunkcnt:e.chunk_count.toString(),segmentIndex:"-1",chunkIndex:"-1"};r.push(s),i.push(s)}})),e.nextChunkInfo.forEach((function(n){var i=Math.floor(t.get(n.bid)*(y.a.playbackRate()||1));i&&(m.get(i)!==n.bid&&m.set(i,n.bid),r.push({bid:n.bid.toString(),rate:i.toString(),size:(n.ePos-n.sPos).toString(),duration:Math.floor(1e3*(n.eTime-n.sTime)).toString(),chunkcnt:e.chunk_count.toString(),segmentIndex:n.segmentIndex.toString(),chunkIndex:n.chunkIndex.toString()})),e.switching&&e.switching===n.bid&&(e.switching=i)})),e.nextLoadChunkInfo.forEach((function(n){var r=Math.floor(t.get(n.bid)*(y.a.playbackRate()||1));r&&(i.push({bid:n.bid.toString(),rate:r.toString(),size:(n.ePos-n.sPos).toString(),duration:Math.floor(1e3*(n.eTime-n.sTime)).toString(),chunkcnt:e.chunk_count.toString(),segmentIndex:n.segmentIndex.toString(),chunkIndex:n.chunkIndex.toString()}),parseInt(n.bid)===parseInt(e.loadBid)&&(a=r.toString()))})),r.length>1){w||d.a.getUserInfoFunc(A),(isNaN(e.rebuffTime)||!e.rebuffTime||e.rebuffTime<0)&&(e.rebuffTime=0);var o=0;e.lastPlayIndex===_?o+=e.rebuffTime:(_=e.lastPlayIndex,o=e.rebuffTime),this.lstBit=n,b||(b=f.a.getUserInfoFromCookie());var s="p2p"===d.a.loadingBy?1:0;d.a.loadingBy="";var u=d.a.cdnSize>131072&&d.a.cdnCostTime>0?8*Math.round(d.a.cdnSize/(d.a.cdnCostTime/1e3)):-1,c=d.a.cdnSize,l=Math.floor(d.a.cdnCostTime);d.a.cdnSize=d.a.cdnCostTime=0,u&&(P.push(u),P.length>10&&P.shift());for(var k=0,T=0;T<P.length;T++)k+=P[T];d.a.absMaxBitrate=Math.floor(k/P.length),""===d.a.firstABSRatio&&c&&l&&(d.a.firstABSRatio=(8e3*c/l/n).toFixed(2));var E=d.a.p2pSize>131072&&d.a.p2pCostTime>0?8*Math.round(d.a.p2pSize/(d.a.p2pCostTime/1e3)):-1,D=d.a.p2pSize,L=Math.floor(d.a.p2pCostTime);return d.a.p2pSize=d.a.p2pCostTime=0,{clientid:S,page_id:v.c||v.c,version:"0.5.5",client_version:g.a,msg_seq:(x++).toString(),msgid:"3",device_type:"pc",isp:b.userNetType,city:b.userArea,isvip:w&&w.isVip?"1":"0",isp2p:s.toString(),channel_type:"movie",report:{client_time:Math.floor(performance.now()).toString(),video_time:(1e3*y.a.timestamp()).toFixed(0),tvid:e.tvid,bid:e.bid.toString(),is_start:(e.tvid!==d.a.absInitTVId?1:0).toString(),is_seek:""===e.action?"0":"1",is_audio:e.isAudio.toString(),down_time:e.done?"-1":Math.floor(Math.max(d.a.getDownTime(),l)).toString(),total_duration:Math.floor(1e3*e.duration).toString(),load_chunk_quality:a,last_chunk_quality:n.toString(),last_chunk_id:e.lastPlayIndex.toString(),last_chunk_size:(e.lastChunkInfo.ePos-e.lastChunkInfo.sPos).toString(),last_chunk_duration:Math.floor(1e3*(e.lastChunkInfo.eTime-e.lastChunkInfo.sTime)).toString(),chunk_count:e.chunk_count.toString(),buffer_level:Math.round(1e3*e.buffer_level/(y.a.playbackRate()||1)).toString(),cached_time:Math.round(1e3*e.cached_time/(y.a.playbackRate()||1)).toString(),rebuff_time:Math.round(o).toString(),bandwidthEst:u.toString(),p2p_bandwidth:E.toString(),cdn_size:c.toString(),cdn_time:l.toString(),p2p_size:D.toString(),p2p_time:L.toString(),next_chunk_info:r,next_chunk_fail:e.dash_fail_bid,next_load_chunk_info:i,buffer_array:I.bufferArray.map((function(e){return e.toString()})),bufffer_step:I.bufferUpStep.toString(),background_time:Math.floor(h.a.hideTime()).toString(),absRecord:e.absRecord,stuck:d.a.getStuckList(),endTime:e.endTime.toString(),report_type:p.a.reportType,switching:e.switching.toString()}}}}}]),e}();function A(e){w=e}t.c=E;var I={preCheckTime:0,bufferMaxSize:16,bufferArray:[],bufferUpStep:2e3}},function(e,t,n){var r=n(141);e.exports=function(e,t,n){if(r(e),t===undefined)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(87).f,i=n(91),a=n(38)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(28),i=n(72),a=n(192),o=n(172),s=n(77),u=n(107),c=n(193),l=n(190),d=n(38)("species"),f=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!l("slice")},{slice:function(e,t){var n,r,l,p=u(this),v=s(p.length),y=o(e,v),g=o(t===undefined?v:t,v);if(a(p)&&("function"!=typeof(n=p.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[d])&&(n=undefined):n=undefined,n===Array||n===undefined))return f.call(p,y,g);for(r=new(n===undefined?Array:n)(h(g-y,0)),l=0;y<g;y++,l++)y in p&&c(r,l,p[y]);return r.length=l,r}})},function(e,t,n){"use strict";var r=n(28),i=n(139),a=n(190),o=i(2);r({target:"Array",proto:!0,forced:!a("filter")},{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(288),i=n(244).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(72);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(247),i=n(78),a=n(77),o=n(122),s=n(249),u=n(250);r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),c=String(this);if(!o.global)return u(o,c);var l=o.unicode;o.lastIndex=0;for(var d,f=[],h=0;null!==(d=u(o,c));){var p=String(d[0]);f[h]=p,""===p&&(o.lastIndex=s(c,a(o.lastIndex),l)),h++}return 0===h?null:f}]}))},function(e,t,n){var r=n(498),i=n(499),a=n(420),o=n(500);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(117),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(31);e.exports=function(e,t){var n=[][e];return!n||!r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(31),i=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(288),i=n(244);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(28),i=n(172),a=n(117),o=n(77),s=n(89),u=n(245),c=n(193),l=n(190),d=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l("splice")},{splice:function(e,t){var n,r,l,v,y,g,m=s(this),_=o(m.length),b=i(e,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=f(d(a(t),0),_-b)),_+n-r>h)throw TypeError(p);for(l=u(m,r),v=0;v<r;v++)(y=b+v)in m&&c(l,v,m[y]);if(l.length=r,n<r){for(v=b;v<_-r;v++)g=v+n,(y=v+r)in m?m[g]=m[y]:delete m[g];for(v=_;v>_-r+n;v--)delete m[v-1]}else if(n>r)for(v=_-r;v>b;v--)g=v+n-1,(y=v+r-1)in m?m[g]=m[y]:delete m[g];for(v=0;v<n;v++)m[v+b]=arguments[v+2];return m.length=_-r+n,l}})},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=!1},function(e,t,n){var r=n(29),i=n(242),a=n(180),o="__core-js_shared__",s=r[o]||i(o,{});(e.exports=function(e,t){return s[e]||(s[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports={}},function(e,t,n){var r=n(255);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(152);function i(e,t){var n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],a=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return t&&Object(r.b)(t,(function(t,o){!n&&Object(r.e)(e,o)||(a&&"string"!=typeof t&&"boolean"!=typeof t?(e[o]||(e[o]={}),i(e[o],t,n,a)):e[o]=t)})),e}},function(e,t,n){var r=n(774),i=n(775),a=n(591),o=n(776);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(78),i=n(141),a=n(38)("species");e.exports=function(e,t){var n,o=r(e).constructor;return o===undefined||(n=r(o)[a])==undefined?t:i(n)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(31),i=n(112),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(31),i=n(38)("species");e.exports=function(e){return!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){"use strict";var r=n(80),i=n(400),a=n(265),o=n(341),s=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return s.call(a(this),e===undefined?",":e)}})},function(e,t,n){var r=n(112);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(169),i=n(87),a=n(173);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){"use strict";var r=n(28),i=n(141),a=n(89),o=n(31),s=n(174),u=[].sort,c=[1,2,3],l=o((function(){c.sort(undefined)})),d=o((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||f},{sort:function(e){return e===undefined?u.call(a(this)):u.call(a(this),i(e))}})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(219),i=n(634).f,a=n(409),o=n(443),s=n(784),u=n(811),c=n(686);e.exports=function(e,t){var n,l,d,f,h,p=e.target,v=e.global,y=e.stat;if(n=v?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(v?l:p+(y?".":"#")+l,e.forced)&&d!==undefined){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),o(n,l,f,e)}}},function(e,t,n){var r=n(1025);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(352)["default"],i=n(279);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(80),i=n(99),a=n(264),o=n(322),s=n(147),u=n(506),c=n(585),l=n(92),d=n(162),f=n(403),h=n(145),p=n(116),v=n(183),y=n(265),g=n(323),m=n(299),_=n(301),b=n(429),x=n(324),k=n(730),w=n(512),S=n(228),T=n(158),P=n(510),E=n(215),A=n(204),I=n(502),D=n(428),L=n(398),O=n(395),R=n(132),C=n(598),M=n(599),B=n(275),N=n(254),F=n(216).forEach,q=D("hidden"),j="Symbol",U=R("toPrimitive"),V=N.set,H=N.getterFor(j),z=Object.prototype,G=i.Symbol,W=a("JSON","stringify"),K=S.f,$=T.f,Y=k.f,Q=P.f,J=I("symbols"),X=I("op-symbols"),Z=I("string-to-symbol-registry"),ee=I("symbol-to-string-registry"),te=I("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=s&&l((function(){return 7!=_($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(z,t);r&&delete z[t],$(e,t,n),r&&e!==z&&$(z,t,r)}:$,ae=function(e,t){var n=J[e]=_(G.prototype);return V(n,{type:j,tag:e,description:t}),s||(n.description=t),n},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},se=function(e,t,n){e===z&&se(X,t,n),p(e);var r=g(t,!0);return p(n),d(J,r)?(n.enumerable?(d(e,q)&&e[q][r]&&(e[q][r]=!1),n=_(n,{enumerable:m(0,!1)})):(d(e,q)||$(e,q,m(1,{})),e[q][r]=!0),ie(e,r,n)):$(e,r,n)},ue=function(e,t){p(e);var n=y(t),r=b(n).concat(fe(n));return F(r,(function(t){s&&!ce.call(n,t)||se(e,t,n[t])})),e},ce=function(e){var t=g(e,!0),n=Q.call(this,t);return!(this===z&&d(J,t)&&!d(X,t))&&(!(n||!d(this,t)||!d(J,t)||d(this,q)&&this[q][t])||n)},le=function(e,t){var n=y(e),r=g(t,!0);if(n!==z||!d(J,r)||d(X,r)){var i=K(n,r);return!i||!d(J,r)||d(n,q)&&n[q][r]||(i.enumerable=!0),i}},de=function(e){var t=Y(y(e)),n=[];return F(t,(function(e){d(J,e)||d(L,e)||n.push(e)})),n},fe=function(e){var t=e===z,n=Y(t?X:y(e)),r=[];return F(n,(function(e){!d(J,e)||t&&!d(z,e)||r.push(J[e])})),r};(u||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==undefined?String(arguments[0]):undefined,t=O(e),n=function(e){this===z&&n.call(X,e),d(this,q)&&d(this[q],t)&&(this[q][t]=!1),ie(this,t,m(1,e))};return s&&re&&ie(z,t,{configurable:!0,set:n}),ae(t,e)},A(G.prototype,"toString",(function(){return H(this).tag})),A(G,"withoutSetter",(function(e){return ae(O(e),e)})),P.f=ce,T.f=se,S.f=le,x.f=k.f=de,w.f=fe,C.f=function(e){return ae(R(e),e)},s&&($(G.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),o||A(z,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),F(b(te),(function(e){M(e)})),r({target:j,stat:!0,forced:!u},{"for":function(e){var t=String(e);if(d(Z,t))return Z[t];var n=G(t);return Z[t]=n,ee[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(d(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return t===undefined?_(e):ue(_(e),t)},defineProperty:se,defineProperties:ue,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:de,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:l((function(){w.f(1)}))},{getOwnPropertySymbols:function(e){return w.f(v(e))}}),W)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var e=G();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(r=t,(h(t)||e!==undefined)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,W.apply(null,i)}});G.prototype[U]||E(G.prototype,U,G.prototype.valueOf),B(G,j),L[q]=!0},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(122),i="["+n(202)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$");e.exports=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(a,"")),2&t&&(e=e.replace(o,"")),e}},function(e,t){e.exports="\t\n\x0B\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r,i,a=n(248),o=RegExp.prototype.exec,s=String.prototype.replace,u=o,c=(r=/a/,i=/b*/g,o.call(r,"a"),o.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=/()??/.exec("")[1]!==undefined;(c||l)&&(u=function(e){var t,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),c&&(t=u.lastIndex),r=o.call(u,e),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)})),r}),e.exports=u},function(e,t,n){var r=n(99),i=n(215),a=n(162),o=n(504),s=n(509),u=n(254),c=u.get,l=u.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||i(n,"name",t),(u=l(n)).source||(u.source=d.join("string"==typeof t?t:""))),e!==r?(c?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t,n){var r=n(80),i=n(593);r({target:"Array",stat:!0,forced:!n(433)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){var r=n(443),i=n(1026),a=Object.prototype;i!==a.toString&&r(a,"toString",i,{unsafe:!0})},function(e,t,n){var r=n(610),i=n(184);function a(e,t,n,o){return a="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,a){var o,s=r(e,t);if(s){if((o=Object.getOwnPropertyDescriptor(s,t)).set)return o.set.call(a,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(a,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(a,t,o)}else i(a,t,n);return!0},a(e,t,n,o)}e.exports=function(e,t,n,r,i){if(!a(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(81),i=n(29),a=n(175),o=n(106),s=n(91),u=n(112),c=n(252),l=n(169),d=n(31),f=n(161),h=n(168).f,p=n(153).f,v=n(87).f,y=n(201),g="Number",m=i.Number,_=m.prototype,b=u(f(_))==g,x="trim"in String.prototype,k=function(e){var t,n,r,i,a,o,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=x?c.trim():y(c,3)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>i)return NaN;return parseInt(a,r)}return+c};if(a(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var w,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(b?d((function(){_.valueOf.call(n)})):u(n)!=g)?c(new m(k(t)),n,S):k(t)},T=r?h(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;T.length>P;P++)s(m,w=T[P])&&!s(S,w)&&v(S,w,p(m,w));S.prototype=_,_.constructor=S,o(i,g,S)}},function(e,t,n){"use strict";var r=n(80),i=n(147),a=n(99),o=n(162),s=n(145),u=n(158).f,c=n(586),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||l().description!==undefined)){var d={},f=function(){var e=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]),t=this instanceof f?new l(e):e===undefined?l():l(e);return""===e&&(d[t]=!0),t};c(f,l);var h=f.prototype=l.prototype;h.constructor=f;var p=h.toString,v="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(d,e))return"";var n=v?t.slice(7,-1):t.replace(y,"$1");return""===n?undefined:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(599)("iterator")},function(e,t,n){var r=n(181),i=n(195),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,n){var r=n(28),i=n(373);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,n){n(28)({global:!0},{globalThis:n(29)})},function(e,t,n){"use strict";var r=n(28),i=n(201);r({target:"String",proto:!0,forced:n(386)("trim")},{trim:function(){return i(this,3)}})},function(e,t,n){var r=n(147),i=n(158),a=n(299);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(326),i=n(400),a=n(183),o=n(148),s=n(514),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,d=6==e,f=7==e,h=5==e||d;return function(p,v,y,g){for(var m,_,b=a(p),x=i(b),k=r(v,y,3),w=o(x.length),S=0,T=g||s,P=t?T(p,w):n||f?T(p,0):undefined;w>S;S++)if((h||S in x)&&(_=k(m=x[S],S,b),e))if(t)P[S]=_;else if(_)switch(e){case 3:return!0;case 5:return m;case 6:return S;case 2:u.call(P,m)}else switch(e){case 4:return!1;case 7:u.call(P,m)}return d?-1:c||l?l:P}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(e,t,n){"use strict";var r=n(147),i=n(99),a=n(402),o=n(204),s=n(162),u=n(300),c=n(434),l=n(323),d=n(92),f=n(301),h=n(324).f,p=n(228).f,v=n(158).f,y=n(435).trim,g="Number",m=i.Number,_=m.prototype,b=u(f(_))==g,x=function(e){var t,n,r,i,a,o,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=y(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>i)return NaN;return parseInt(a,r)}return+c};if(a(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(b?d((function(){_.valueOf.call(n)})):u(n)!=g)?c(new m(x(t)),n,w):x(t)},S=r?h(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;S.length>T;T++)s(m,k=S[T])&&!s(w,k)&&v(w,k,p(m,k));w.prototype=_,_.constructor=w,o(i,g,w)}},function(e,t,n){var r=n(80),i=n(147);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(513)})},function(e,t,n){(function(t){var n="object",r=function(e){return e&&e.Math==Math&&e};e.exports=r(typeof globalThis==n&&globalThis)||r(typeof window==n&&window)||r(typeof self==n&&self)||r(typeof t==n&&t)||Function("return this")()}).call(this,n(237))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DEPOSIT_ERROR="DEPOSIT_ERROR",e.UPDATE_TIME_RANGES="UPDATE_TIME_RANGES",e.DEPOSIT_RAWNESS="DEPOSIT_RAWNESS",e.DEPOSIT_MANIFEST="DEPOSIT_MANIFEST",e.DEPOSIT_LOADER="DEPOSIT_LOADER",e.DEPOSIT_MUX="DEPOSIT_MUX",e.DEPOSIT_RENDERER="DEPOSIT_RENDERER",e.DEPOSIT_AUDIO="DEPOSIT_AUDIO"}(r||(r={}))},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(undefined)}))}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(377),i=n(87),a=n(38),o=n(81),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(91),i=n(89),a=n(211),o=n(290),s=a("IE_PROTO"),u=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},,function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(28),i=n(81);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(87).f})},function(e,t,n){var r=n(28),i=n(81);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(282)})},function(e,t,n){var r=n(147),i=n(510),a=n(299),o=n(265),s=n(323),u=n(162),c=n(584),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return a(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(196),i=n(692);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){var r=n(387),i=n(388),a=n(320),o=n(389);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(391);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(137)["default"],i=n(392);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(318);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(38)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},"return":function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(28),i=n(117),a=n(374),o=n(375),s=n(31),u=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=c(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+o.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(e){var t,n,r,s,u=a(this),c=i(e),l="",v="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(l="-",u=-u),u>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*p(2,69,1))-69,n=t<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=c;r>=7;)d(1e7,0),r-=7;for(d(p(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),v=h()}else d(0,n),d(1<<-t,0),v=h()+o.call("0",c);return v=c>0?l+((s=v.length)<=c?"0."+o.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c)):l+v}})},function(e,t,n){var r=n(78),i=n(281),a=n(77),o=n(164),s=n(269),u=n(319),c={};(e.exports=function(e,t,n,l,d){var f,h,p,v,y,g=o(t,n,l?2:1);if(d)f=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,v=a(e.length);v>p;p++)if((l?g(r(y=e[p])[0],y[1]):g(e[p]))===c)return c;return}f=h.call(e)}for(;!(y=f.next()).done;)if(u(f,g,y.value,l)===c)return c}).BREAK=c},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(112),i=n(38)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){var r=n(107),i=n(77),a=n(172);e.exports=function(e){return function(t,n,o){var s,u=r(t),c=i(u.length),l=a(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(376);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return r(n,i),t?e.call(n,i):n.__proto__=i,n}}():undefined)},function(e,t,n){var r=n(106);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(29),i=n(94);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(29),i=n(72),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(72),i=n(192),a=n(38)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[a])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===t?0:t)}},function(e,t,n){e.exports=n(29)},function(e,t,n){"use strict";var r=n(94),i=n(106),a=n(31),o=n(38),s=n(203),u=o("species"),c=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=o(e),h=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=h&&!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t}));if(!h||!p||"replace"===e&&!c||"split"===e&&!l){var v=/./[f],y=n(f,""[e],(function(e,t,n,r,i){return t.exec===s?h&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=y[0],m=y[1];i(String.prototype,e,g),i(RegExp.prototype,f,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)}),d&&r(RegExp.prototype[f],"sham",!0)}}},function(e,t,n){"use strict";var r=n(78);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(283);e.exports=function(e,t,n){return t+(n?r(e,t,!0).length:1)}},function(e,t,n){var r=n(112),i=n(203);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){var r=n(72),i=n(112),a=n(38)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(72),i=n(240);e.exports=function(e,t,n){var a,o=t.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&r(a)&&i&&i(e,a),e}},function(e,t,n){"use strict";var r=n(28),i=n(358),a=n(223),o=n(240),s=n(165),u=n(94),c=n(106),l=n(38),d=n(180),f=n(177),h=n(292),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),g="keys",m="values",_="entries",b=function(){return this};e.exports=function(e,t,n,l,h,x,k){i(n,t,l);var w,S,T,P=function(e){if(e===h&&L)return L;if(!v&&e in I)return I[e];switch(e){case g:case m:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",A=!1,I=e.prototype,D=I[y]||I["@@iterator"]||h&&I[h],L=!v&&D||P(h),O="Array"==t&&I.entries||D;if(O&&(w=a(O.call(new e)),p!==Object.prototype&&w.next&&(d||a(w)===p||(o?o(w,p):"function"!=typeof w[y]&&u(w,y,b)),s(w,E,!0,!0),d&&(f[E]=b))),h==m&&D&&D.name!==m&&(A=!0,L=function(){return D.call(this)}),d&&!k||I[y]===L||u(I,y,L),f[t]=L,h)if(S={values:P(m),keys:x?L:P(g),entries:P(_)},k)for(T in S)(v||A||!(T in I))&&c(I,T,S[T]);else r({target:t,proto:!0,forced:v||A},S);return S}},function(e,t,n){var r,i,a,o=n(721),s=n(99),u=n(145),c=n(215),l=n(162),d=n(503),f=n(428),h=n(398),p=s.WeakMap;if(o){var v=d.state||(d.state=new p),y=v.get,g=v.has,m=v.set;r=function(e,t){return t.facade=e,m.call(v,e,t),t},i=function(e){return y.call(v,e)||{}},a=function(e){return g.call(v,e)}}else{var _=f("state");h[_]=!0,r=function(e,t){return t.facade=e,c(e,_,t),t},i=function(e){return l(e,_)?e[_]:{}},a=function(e){return l(e,_)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(605),i=n(608);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){var r=n(80),i=n(147);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(158).f})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(219),i=n(638),a=n(684),o=n(814),s=r.Symbol,u=i("wks");e.exports=function(e){return u[e]||(u[e]=o&&s[e]||(o?s:a)("Symbol."+e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return D}));n(17),n(23);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=(n(35),n(39)),p=n(1012),v=n(86),y=n(447),g=n(414),m=n(1013),_=n(102);n(121);var b=n(1014);var x=new b.a;function k(e,t,n,r){var i,a,o=e.payload;if(t&&Object(_.a)(e))for(t===n&&(a=m.a.readUEV(o,e.offset),Object(_.e)(e,a.bitLength)),Object(_.e)(e,1),a=m.a.readUEV(o,e.offset),Object(_.e)(e,a.bitLength),r[t]=0,i=0;i<=r[t-1];i++){var s=0,u=Object(_.a)(e);u||(s=Object(_.a)(e)),(u||s)&&r[t]++}else{var c=m.a.readUEV(o,e.offset);Object(_.e)(e,c.bitLength);var l=m.a.readUEV(o,e.offset);for(Object(_.e)(e,l.bitLength),i=0;i<c.value;i++)Object(_.e)(e,m.a.readUEV(o,e.offset).bitLength),Object(_.e)(e,1);for(i=0;i<l.value;i++)Object(_.e)(e,m.a.readUEV(o,e.offset).bitLength),Object(_.e)(e,1)}}function w(e,t,n){var r,i;for(r=0;r<=t;r++)i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength),i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength),n&&(i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength),i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength)),Object(_.e)(e,1)}function S(e){var t,n,r,i=Object(_.d)(e),a=i.payload,o=[1,1],s=1,u=0,c=new Array(64),l=(14&a[0])>>1;Object(_.e)(i,8);var d=function(e,t){var n,r=e.payload.subarray(e.index),i=r[0]>>6,a=r[0]>>5&1,o=31&r[0],s=r.subarray(1,5),u=r.subarray(5,11),c=r[11];Object(_.e)(e,96);var l=[],d=[];for(n=0;n<t;n++)l[n]=Object(_.a)(e),d[n]=Object(_.a)(e);if(t>0)for(n=t;n<8;n++)Object(_.e)(e,2);for(n=0;n<t;n++)l[n]&&Object(_.e)(e,88),d[n]&&Object(_.e)(e,8);return{profile_space:i,tier_flag:a,profile_idc:o,profile_compatibility_flags:s,constraint_indicator_flags:u,level_idc:c}}(i,l),f=m.a.readUEV(a,i.offset);Object(_.e)(i,f.bitLength);var h=m.a.readUEV(a,i.offset);r=h.value,Object(_.e)(i,h.bitLength),3==r&&Object(_.e)(i,1);var p=m.a.readUEV(a,i.offset);Object(_.e)(i,p.bitLength);var v=m.a.readUEV(a,i.offset);Object(_.e)(i,v.bitLength),Object(_.a)(i)&&(n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength));var y=m.a.readUEV(a,i.offset);Object(_.e)(i,y.bitLength);var g=m.a.readUEV(a,i.offset);Object(_.e)(i,g.bitLength);var b=m.a.readUEV(a,i.offset);for(Object(_.e)(i,b.bitLength),t=Object(_.a)(i)?0:l;t<=l;t++)n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength);if(n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),Object(_.a)(i)){var S=m.a.readBit(a,i.offset);Object(_.e)(i,1),S&&function(e){var t,n,r,i;for(t=0;t<4;t++)for(n=0;n<(3==t?2:6);n++)if(Object(_.a)(e)){if(i=Math.min(64,1<<4+(t<<1)),t>1){var a=m.a.readSEV(e.payload,e.offset);Object(_.e)(e,a.bitLength)}for(r=0;r<i;r++){var o=m.a.readSEV(e.payload,e.offset);Object(_.e)(e,o.bitLength)}}else{var s=m.a.readUEV(e.payload,e.offset);Object(_.e)(e,s.bitLength)}}(i)}Object(_.e)(i,1),Object(_.e)(i,1),Object(_.a)(i)&&(Object(_.e)(i,4),Object(_.e)(i,4),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),Object(_.e)(i,1));var T=m.a.readUEV(a,i.offset);for(Object(_.e)(i,T.bitLength),t=0;t<T.value;t++)k(i,t,T.value,c);if(Object(_.a)(i)){var P=m.a.readUEV(a,i.offset);for(Object(_.e)(i,P.bitLength),t=0;t<P.value;t++){var E=Math.min(b.value+4,16);Object(_.e)(i,E),Object(_.e)(i,1)}}if(Object(_.e)(i,1),Object(_.e)(i,1),Object(_.a)(i)){if(Object(_.a)(i)){var A=m.a.readByte(a,i.offset);switch(Object(_.e)(i,8),A){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:var I=m.a.readByte(a,i.offset);Object(_.e)(i,8);var D=m.a.readByte(a,i.offset);Object(_.e)(i,8);var L=m.a.readByte(a,i.offset);Object(_.e)(i,8);var O=m.a.readByte(a,i.offset);Object(_.e)(i,8),o=[I<<8|D,L<<8|O]}o&&(s=o[0]/o[1]),255===A&&(Object(_.e)(i,16),Object(_.e)(i,16))}if(Object(_.a)(i)&&Object(_.e)(i,1),Object(_.a)(i)&&(Object(_.e)(i,3),Object(_.e)(i,1),Object(_.a)(i)&&Object(_.e)(i,24)),Object(_.a)(i)){var R=m.a.readUEV(a,i.offset);Object(_.e)(i,R.bitLength);var C=m.a.readUEV(a,i.offset);Object(_.e)(i,C.bitLength)}Object(_.e)(i,3),Object(_.a)(i)&&(n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength)),Object(_.a)(i)&&(m.a.readBit(a,i.offset,32),Object(_.e)(i,32),m.a.readBit(a,i.offset,32),Object(_.e)(i,32),Object(_.a)(i)&&(n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength)),Object(_.a)(i)&&function(e,t,n){var r,i,a=0,o=0,s=0;for(t&&(o=Object(_.a)(e),s=Object(_.a)(e),(o||s)&&((a=Object(_.a)(e))&&Object(_.e)(e,19),Object(_.e)(e,8),a&&Object(_.e)(e,4),Object(_.e)(e,15))),r=0;r<=n;r++){var u=0,c=0,l=0;Object(_.a)(e)||(l=Object(_.a)(e)),l?(i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength)):c=Object(_.a)(e),c||(i=m.a.readUEV(e.payload,e.offset),Object(_.e)(e,i.bitLength),u=i.value),o&&w(e,u,a),s&&w(e,u,a)}}(i,1,l)),Object(_.a)(i)&&(Object(_.e)(i,3),n=m.a.readUEV(a,i.offset),Object(_.e)(i,n.bitLength),u=Math.min(n.value,4095))}var M=x.readUint32(d.profile_compatibility_flags);return Object.assign(Object.assign({payload:i.payload},d),{profile_compatibility:M,chromaFormat:r,bitDepthLumaMinus8:y.value,bitDepthChromaMinus8:g.value,minSpatialSegmentationIdc:u,width:p.value*s,height:v.value*s,pixelRatio:o,fps:0,fixedFPS:!0})}var T=i()((function L(e){switch(o()(this,L),this.unit_type=e[0]>>1&63,this.data=Object(g.a)(e.subarray(2)),this.rawData=e,this.unit_type){case 32:this.vps=function(e){var t=Object(_.d)(e);Object(_.e)(t,12);var n=(14&e[1])>>1,r=1&e[1];return Object(_.e)(t,4),Object(_.e)(t,16),{payload:e,numTemporalLayers:n,temporalIdNested:r}}(this.data);break;case 33:this.sps=S(this.data);break;case 34:this.pps=function(e){var t,n=Object(_.d)(e),r=e;return t=m.a.readUEV(r,n.offset),Object(_.e)(n,t.bitLength),t=m.a.readUEV(r,n.offset),Object(_.e)(n,t.bitLength),Object(_.e)(n,7),t=m.a.readUEV(r,n.offset),Object(_.e)(n,t.bitLength),t=m.a.readUEV(r,n.offset),Object(_.e)(n,t.bitLength),t=m.a.readSEV(r,n.offset),Object(_.e)(n,t.bitLength),Object(_.e)(n,2),Object(_.a)(n)&&(t=m.a.readUEV(r,n.offset),Object(_.e)(n,t.bitLength)),t=m.a.readSEV(r,n.offset),Object(_.e)(n,t.bitLength),t=m.a.readSEV(r,n.offset),Object(_.e)(n,t.bitLength),Object(_.e)(n,4),{payload:e,tiles_enabled_flag:Object(_.a)(n),entropy_coding_sync_enabled_flag:Object(_.a)(n)}}(this.data)}}));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var E=function(e){u()(n,e);var t=P(n);function n(e){var r;return o()(this,n),(r=t.call(this)).lastState=null,r.lastNALu=null,r.lastNALuState=null,r.codecType=e,r}return i()(n,[{key:"spitNalu_",value:function(e,t,n){var r;switch(this.codecType){case 0:r=new y.a(e);break;case 1:r=new T(e)}r.pts=t,r.dts=n,this.lastNALu=r,this.emit("nalu",r)}},{key:"push",value:function(e){var t=this.lastState,n=this.lastNALuState,r=0,i=-1,a=e.pts,o=e.dts,s=e.payload,u=e.naluSizeLength;if(u){var c=0,l=0,d=0,f=s.length;do{l=0;for(var v=0;v<u;v++)l|=s[c+v]<<8*(u-v-1);(d=(c+=u)+l)>f&&(d=f),this.spitNalu_(s.subarray(c,d),a,o),c=d}while(c<f)}else{var y=s.byteLength-1,g=0;do{if(0!==s[y])break;g++,y--}while(y>0);g>=3&&(s=s.subarray(0,y+1));var m=s.length,_=0;do{var b=s[r++];if(0!==_)if(1!==_)if(b)if(1===b){if(i>=0)this.lastNALuState=_,this.spitNalu_(s.subarray(i,r-1-_),a,o);else{var x=this.lastNALu;if(x){t&&r<=4-t&&n&&(x.rawData=x.rawData.subarray(0,x.rawData.byteLength-t));var k=r-_-1;if(k>0){h.a.log("overflow NALU found: ".concat(k,"/").concat(a,"/").concat(o));var w=new p.a;w.append(x.rawData),w.append(s.subarray(0,k));var S=w.toNewBytes();w.clear(),x.rawData=S}}}r<m&&(i=r,_=0)}else _=0;else _=3;else _=b?0:2;else _=b?0:1}while(r<m);i>=0&&_>=0&&(this.lastNALuState=_,this.spitNalu_(s.subarray(i,m),a,o)),this.lastState=_}this.emit("done")}},{key:"reset",value:function(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null}}]),n}(v.EventEmitter);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var I=function(e){u()(n,e);var t=A(n);function n(){return o()(this,n),t.call(this,0)}return i()(n)}(E),D=function(e){u()(n,e);var t=A(n);function n(){return o()(this,n),t.call(this,1)}return i()(n)}(E)},,function(e,t,n){var r=n(28),i=n(357);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){var r=n(508),i=n(99),a=function(e){return"function"==typeof e?e:undefined};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(400),i=n(255);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(80),i=n(92),a=n(265),o=n(228).f,s=n(147),u=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},function(e,t,n){"use strict";var r=0,i=0;function a(){"visible"===document.visibilityState?i<=r&&(i=performance.now()):r<=i&&(r=performance.now())}t.a={init:function(){r=i=0,document.addEventListener("visibilitychange",a)},destroy:function(){r=i=0,document.removeEventListener("visibilitychange",a)},hideTime:function(){return r>i?performance.now()-r:0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=i()((function u(){o()(this,u)}));s.ERROR="Error",s.PRE_ERROR="PreError",s.TIMELINE_SWITCHING="DataStageSwitching",s.TIMELINE_SWITCHED="DataStageSwitched",s.STATE_CHANGE="StateChange"},function(e,t,n){var r=n(238),i=n(177),a=n(38)("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(182),i=n(72),a=n(91),o=n(87).f,s=n(195),u=n(360),c=s("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(e){o(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&d(e)&&!a(e,c)&&f(e),e}};r[c]=!0},function(e,t,n){"use strict";var r=n(28),i=n(139),a=n(190),o=i(1);r({target:"Array",proto:!0,forced:!a("map")},{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";n(22),n(84);var r=n(0),i={};t.a={get:function(e,t){var n=e.tvid,a=e.locale,o=n;i[o]=i[o]||new Promise((function(e,t){var i="//mesh.if.iqiyi.com/player/pcw/video/playervideoinfo?id="+n;i=a?i+"&locale="+a:i,r.v.json({url:i,memory:!0,withCredentials:!1,success:function(t){if("A00000"===t.code&&t.data){var n=t.data;e({tvid:n.videoQipuId,vid:n.vid,albumId:n.albumId,cid:n.cid,vi:n,sid:n.sid,cType:n.ctype})}else e({})},failure:function(){e({})}})})),i[o].then(t)}}},function(e,t,n){var r=n(38),i=n(161),a=n(94),o=r("unscopables"),s=Array.prototype;s[o]==undefined&&a(s,o,i(null)),e.exports=function(e){s[o][e]=!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(158).f,i=n(162),a=n(132)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(80),i=n(216).filter;r({target:"Array",proto:!0,forced:!n(404)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";var r=n(797),i=n(790),a=n(310),o=n(462),s=n(817),u=n(798),c=n(348),l=n(799),d=n(692),f=n(259),h=[].push,p=Math.min,v=4294967295,y=!f((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=n===undefined?v:n>>>0;if(0===a)return[];if(e===undefined)return[r];if(!i(e))return t.call(r,e,a);for(var s,u,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,y=new RegExp(e.source,f+"g");(s=d.call(y,r))&&!((u=y.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=a));)y.lastIndex===s.index&&y.lastIndex++;return p===r.length?!c&&y.test("")||l.push(""):l.push(r.slice(p)),l.length>a?l.slice(0,a):l}:"0".split(undefined,0).length?function(e,n){return e===undefined&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=t==undefined?undefined:t[e];return a!==undefined?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var d=a(e),f=String(this),h=s(d,RegExp),g=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(y?"y":"g"),_=new h(y?d:"^(?:"+d.source+")",m),b=i===undefined?v:i>>>0;if(0===b)return[];if(0===f.length)return null===l(_,f)?[f]:[];for(var x=0,k=0,w=[];k<f.length;){_.lastIndex=y?k:0;var S,T=l(_,y?f:f.slice(k));if(null===T||(S=p(c(_.lastIndex+(y?0:k)),f.length))===x)k=u(f,k,g);else{if(w.push(f.slice(x,k)),w.length===b)return w;for(var P=1;P<=T.length-1;P++)if(w.push(T[P]),w.length===b)return w;k=x=S}}return w.push(f.slice(x)),w}]}),!y)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.MANIFEST=0]="MANIFEST",e[e.DISPATCH=1]="DISPATCH",e[e.SEGMENT=2]="SEGMENT",e[e.LICENSE=3]="LICENSE",e[e.APP=4]="APP"}(r||(r={}))},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r,i,a,o,s;r=n(772),i=n(633).utf8,a=n(773),o=n(633).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,d=-1732584194,f=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var p=s._ff,v=s._gg,y=s._hh,g=s._ii;for(h=0;h<n.length;h+=16){var m=c,_=l,b=d,x=f;c=p(c,l,d,f,n[h+0],7,-680876936),f=p(f,c,l,d,n[h+1],12,-389564586),d=p(d,f,c,l,n[h+2],17,606105819),l=p(l,d,f,c,n[h+3],22,-1044525330),c=p(c,l,d,f,n[h+4],7,-176418897),f=p(f,c,l,d,n[h+5],12,1200080426),d=p(d,f,c,l,n[h+6],17,-1473231341),l=p(l,d,f,c,n[h+7],22,-45705983),c=p(c,l,d,f,n[h+8],7,1770035416),f=p(f,c,l,d,n[h+9],12,-1958414417),d=p(d,f,c,l,n[h+10],17,-42063),l=p(l,d,f,c,n[h+11],22,-1990404162),c=p(c,l,d,f,n[h+12],7,1804603682),f=p(f,c,l,d,n[h+13],12,-40341101),d=p(d,f,c,l,n[h+14],17,-1502002290),c=v(c,l=p(l,d,f,c,n[h+15],22,1236535329),d,f,n[h+1],5,-165796510),f=v(f,c,l,d,n[h+6],9,-1069501632),d=v(d,f,c,l,n[h+11],14,643717713),l=v(l,d,f,c,n[h+0],20,-373897302),c=v(c,l,d,f,n[h+5],5,-701558691),f=v(f,c,l,d,n[h+10],9,38016083),d=v(d,f,c,l,n[h+15],14,-660478335),l=v(l,d,f,c,n[h+4],20,-405537848),c=v(c,l,d,f,n[h+9],5,568446438),f=v(f,c,l,d,n[h+14],9,-1019803690),d=v(d,f,c,l,n[h+3],14,-187363961),l=v(l,d,f,c,n[h+8],20,1163531501),c=v(c,l,d,f,n[h+13],5,-1444681467),f=v(f,c,l,d,n[h+2],9,-51403784),d=v(d,f,c,l,n[h+7],14,1735328473),c=y(c,l=v(l,d,f,c,n[h+12],20,-1926607734),d,f,n[h+5],4,-378558),f=y(f,c,l,d,n[h+8],11,-2022574463),d=y(d,f,c,l,n[h+11],16,1839030562),l=y(l,d,f,c,n[h+14],23,-35309556),c=y(c,l,d,f,n[h+1],4,-1530992060),f=y(f,c,l,d,n[h+4],11,1272893353),d=y(d,f,c,l,n[h+7],16,-155497632),l=y(l,d,f,c,n[h+10],23,-1094730640),c=y(c,l,d,f,n[h+13],4,681279174),f=y(f,c,l,d,n[h+0],11,-358537222),d=y(d,f,c,l,n[h+3],16,-722521979),l=y(l,d,f,c,n[h+6],23,76029189),c=y(c,l,d,f,n[h+9],4,-640364487),f=y(f,c,l,d,n[h+12],11,-421815835),d=y(d,f,c,l,n[h+15],16,530742520),c=g(c,l=y(l,d,f,c,n[h+2],23,-995338651),d,f,n[h+0],6,-198630844),f=g(f,c,l,d,n[h+7],10,1126891415),d=g(d,f,c,l,n[h+14],15,-1416354905),l=g(l,d,f,c,n[h+5],21,-57434055),c=g(c,l,d,f,n[h+12],6,1700485571),f=g(f,c,l,d,n[h+3],10,-1894986606),d=g(d,f,c,l,n[h+10],15,-1051523),l=g(l,d,f,c,n[h+1],21,-2054922799),c=g(c,l,d,f,n[h+8],6,1873313359),f=g(f,c,l,d,n[h+15],10,-30611744),d=g(d,f,c,l,n[h+6],15,-1560198380),l=g(l,d,f,c,n[h+13],21,1309151649),c=g(c,l,d,f,n[h+4],6,-145523070),f=g(f,c,l,d,n[h+11],10,-1120210379),d=g(d,f,c,l,n[h+2],15,718787259),l=g(l,d,f,c,n[h+9],21,-343485551),c=c+m>>>0,l=l+_>>>0,d=d+b>>>0,f=f+x>>>0}return r.endian([c,l,d,f])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(e===undefined||null===e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},function(e,t,n){var r=n(38),i=n(177),a=r("iterator"),o=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||o[a]===e)}},function(e,t,n){var r=n(81),i=n(87),a=n(78),o=n(176);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(117),i=n(122);e.exports=function(e,t,n){var a,o,s=String(i(e)),u=r(t),c=s.length;return u<0||u>=c?n?"":undefined:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?n?s.charAt(u):a:n?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}},function(e,t,n){"use strict";var r=n(28),i=n(29),a=n(91),o=n(316),s=n(81),u=n(180),c=n(106),l=n(182),d=n(31),f=n(181),h=n(165),p=n(195),v=n(38),y=n(394),g=n(460),m=n(491),_=n(192),b=n(78),x=n(72),k=n(89),w=n(107),S=n(169),T=n(173),P=n(161),E=n(168),A=n(492),I=n(153),D=n(87),L=n(200),O=n(94),R=n(176),C=n(225),M=n(211),B=n(143),N=M("hidden"),F="Symbol",q=B.set,j=B.getterFor(F),U=I.f,V=D.f,H=A.f,z=i.Symbol,G=i.JSON,W=G&&G.stringify,K=v("toPrimitive"),$=L.f,Y=f("symbol-registry"),Q=f("symbols"),J=f("op-symbols"),X=f("wks"),Z=Object.prototype,ee=i.QObject,te=!ee||!ee.prototype||!ee.prototype.findChild,ne=s&&d((function(){return 7!=P(V({},"a",{get:function(){return V(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=U(Z,t);r&&delete Z[t],V(e,t,n),r&&e!==Z&&V(Z,t,r)}:V,re=function(e,t){var n=Q[e]=P(z.prototype);return q(n,{type:F,tag:e,description:t}),s||(n.description=t),n},ie=o&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},ae=function(e,t,n){return e===Z&&ae(J,t,n),b(e),t=S(t,!0),b(n),a(Q,t)?(n.enumerable?(a(e,N)&&e[N][t]&&(e[N][t]=!1),n=P(n,{enumerable:T(0,!1)})):(a(e,N)||V(e,N,T(1,{})),e[N][t]=!0),ne(e,t,n)):V(e,t,n)},oe=function(e,t){b(e);for(var n,r=m(t=w(t)),i=0,a=r.length;a>i;)ae(e,n=r[i++],t[n]);return e},se=function(e){var t=$.call(this,e=S(e,!0));return!(this===Z&&a(Q,e)&&!a(J,e))&&(!(t||!a(this,e)||!a(Q,e)||a(this,N)&&this[N][e])||t)},ue=function(e,t){if(e=w(e),t=S(t,!0),e!==Z||!a(Q,t)||a(J,t)){var n=U(e,t);return!n||!a(Q,t)||a(e,N)&&e[N][t]||(n.enumerable=!0),n}},ce=function(e){for(var t,n=H(w(e)),r=[],i=0;n.length>i;)a(Q,t=n[i++])||a(l,t)||r.push(t);return r},le=function(e){for(var t,n=e===Z,r=H(n?J:w(e)),i=[],o=0;r.length>o;)!a(Q,t=r[o++])||n&&!a(Z,t)||i.push(Q[t]);return i};o||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments[0]===undefined?undefined:String(arguments[0]),t=p(e),n=function(e){this===Z&&n.call(J,e),a(this,N)&&a(this[N],t)&&(this[N][t]=!1),ne(this,t,T(1,e))};return s&&te&&ne(Z,t,{configurable:!0,set:n}),re(t,e)},c(z.prototype,"toString",(function(){return j(this).tag})),L.f=se,D.f=ae,I.f=ue,E.f=A.f=ce,C.f=le,s&&(V(z.prototype,"description",{configurable:!0,get:function(){return j(this).description}}),u||c(Z,"propertyIsEnumerable",se,{unsafe:!0})),y.f=function(e){return re(v(e),e)}),r({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:z});for(var de=R(X),fe=0;de.length>fe;)g(de[fe++]);r({target:F,stat:!0,forced:!o},{"for":function(e){return a(Y,e+="")?Y[e]:Y[e]=z(e)},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");for(var t in Y)if(Y[t]===e)return t},useSetter:function(){te=!0},useSimple:function(){te=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!s},{create:function(e,t){return t===undefined?P(e):oe(P(e),t)},defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ce,getOwnPropertySymbols:le}),r({target:"Object",stat:!0,forced:d((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(k(e))}}),G&&r({target:"JSON",stat:!0,forced:!o||d((function(){var e=z();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(x(t)||e!==undefined)&&!ie(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ie(t))return t}),r[1]=t,W.apply(G,r)}}),z.prototype[K]||O(z.prototype,K,z.prototype.valueOf),h(z,F),l[N]=!0},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(81),i=n(31),a=n(243);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(181);e.exports=r("native-function-to-string",Function.toString)},function(e,t,n){var r=n(91),i=n(107),a=n(239),o=n(182),s=a(!1);e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)!r(o,n)&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~s(c,n)||c.push(n));return c}},function(e,t,n){var r=n(29).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(31);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r,i,a,o=n(223),s=n(94),u=n(91),c=n(38),l=n(180),d=c("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(i=o(o(a)))!==Object.prototype&&(r=i):f=!0),r==undefined&&(r={}),l||u(r,d)||s(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r,i,a,o=n(29),s=n(31),u=n(112),c=n(164),l=n(289),d=n(243),f=o.location,h=o.setImmediate,p=o.clearImmediate,v=o.process,y=o.MessageChannel,g=o.Dispatch,m=0,_={},b="onreadystatechange",x=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},k=function(e){return function(){x(e)}},w=function(e){x(e.data)},S=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++m]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},r(m),m},p=function(e){delete _[e]},"process"==u(v)?r=function(e){v.nextTick(k(e))}:g&&g.now?r=function(e){g.now(k(e))}:y?(a=(i=new y).port2,i.port1.onmessage=w,r=c(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(S)?r=b in d("script")?function(e){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),x(e)}}:function(e){setTimeout(k(e),0)}:(r=S,o.addEventListener("message",w,!1))),e.exports={set:h,clear:p}},function(e,t,n){var r=n(29).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(141),i=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(359),i=n(385);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:undefined)}}),i,!0)},function(e,t,n){var r=n(28),i=n(31),a=n(107),o=n(153).f,s=n(81),u=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},function(e,t,n){var r=n(28),i=n(81),a=n(317),o=n(107),s=n(153),u=n(193);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),i=s.f,c=a(r),l={},d=0;c.length>d;)(n=i(r,t=c[d++]))!==undefined&&u(l,t,n);return l}})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r,i=n(116),a=n(513),o=n(511),s=n(398),u=n(589),c=n(505),l=n(428),d=l("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(i){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete p.prototype[o[n]];return p()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[d]=e):n=p(),t===undefined?n:a(n,t)}},function(e,t,n){var r=n(162),i=n(183),a=n(428),o=n(517),s=a("IE_PROTO"),u=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){"use strict";var r=n(80),i=n(216).map;r({target:"Array",proto:!0,forced:!n(404)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";var r=n(797),i=n(310),a=n(421),o=n(348),s=n(536),u=n(462),c=n(798),l=n(799),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n){return[function(n,r){var i=u(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,i,r):t.call(String(i),n,r)},function(e,a){var u=n(t,e,this,a);if(u.done)return u.value;var h=i(e),p=String(this),v="function"==typeof a;v||(a=String(a));var y=h.global;if(y){var g=h.unicode;h.lastIndex=0}for(var m=[];;){var _=l(h,p);if(null===_)break;if(m.push(_),!y)break;""===String(_[0])&&(h.lastIndex=c(p,o(h.lastIndex),g))}for(var b,x="",k=0,w=0;w<m.length;w++){_=m[w];for(var S=String(_[0]),T=d(f(s(_.index),p.length),0),P=[],E=1;E<_.length;E++)P.push((b=_[E])===undefined?b:String(b));var A=_.groups;if(v){var I=[S].concat(P,T,p);A!==undefined&&I.push(A);var D=String(a.apply(undefined,I))}else D=r(S,p,T,P,A,a);T>=k&&(x+=p.slice(k,T)+D,k=T+S.length)}return x+p.slice(k)}];function r(e,n,r,i,o,s){var u=r+e.length,c=i.length,l=v;return o!==undefined&&(o=a(o),l=p),t.call(s,l,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return t;if(l>c){var d=h(l/10);return 0===d?t:d<=c?i[d-1]===undefined?a.charAt(1):i[d-1]+a.charAt(1):t}s=i[l-1]}return s===undefined?"":s}))}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(113),u=n.n(s),c=n(41),l=n.n(c),d=n(8),f=n.n(d),h=n(9),p=n.n(h),v=n(3),y=n.n(v),g=(n(70),n(159),n(35),n(17),n(115),n(530)),m=n(805),_=n(268),b=n(449),x=n(220);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}function w(e){var t=e.toUpperCase(),n=null;for(var r in x.a){var i=r.split("_"),a=i[0],o=i[1];if("DEPOSIT"===a&&o===t){n=x.a[r];break}}return n}var S=function(e){f()(n,e);var t=k(n);function n(e){var r;i()(this,n),(r=t.call(this,{ctx:e.runtime.ctx})).$TAG="~",r.$error=null,r.silenced=!1,r.watchingKeys=[],r.watchingCallbacks=[],r.stateSlice=null,r.$watch=function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=u()(r),i=n.watchingCallbacks;t?i.unshift(e):i.push(e)},r.$throwError=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=u()(r),i=n.$stream;if(!r.$error&&e&&(r.$error=e),t.immediately){var a=i.error;a&&i.emit(_.a.ERROR,{stream:i,error:a})}};var a=e.store,o=e.watch,s=(e.pkg,e.runtime),c=e.uuid,l=e.stream,d=e.ipc,f=e.hoc;return r.watchingKeys=Object(g.a)(o),r.$store=a,r.$krt=s,r.$ipc=d,r.$stream=l,r.streamUuid=c,r.$initStateSlice(),r.$subscribeStore(),r.$watch((function(e){r.onStoreStateChanged&&Object(b.a)((function(){r.onStoreStateChanged(e)}))}),f),r}return o()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.$TAG).concat(this.silenced?"(silence)":"","]")}},{key:"$silenced",get:function(){return this.silenced},set:function(e){this.silenced=e}},{key:"$provideArtefact",value:function(e){e&&this.$store.dispatch({type:this.$ARTEFACT_ACTION,payload:e,meta:{stream_uid:this.streamUuid}})}},{key:"$consumeArtefact",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.$store.dispatch({type:w(e),payload:t?undefined:{},meta:{stream_uid:this.streamUuid}})}},{key:"$queryArtefact",value:function(e){return this.$store.getState()[e]}},{key:"$initStateSlice",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this.$store,r=this.watchingKeys,i=this.streamUuid,a=n.getState(),o={};return r.forEach((function(n){o[n]=a[n][i]||(!0!==t&&e.stateSlice?e.stateSlice[n]:{})||{}})),this.stateSlice=o,o}},{key:"$drainBuffer",value:function(e){var t=this.$ARTEFACT_ACTION.split("_")[1].toLowerCase();this.$selfArtifact=null,this.$consumeArtefact(t,!!e&&e.delInStream)}},{key:"recoverAt",value:function(e){this.$error=null}},{key:"$subscribeStore",value:function(){var e=this,t=this.$store,n=this.streamUuid;this.$unSubscribeStore(),this.unsubscribe=t.subscribe((function(){var r=e.watchingKeys,i=e.watchingCallbacks,a=e.stateSlice,o=t.getState(),s=!1;if(a)for(var u,c=0;c<r.length;c++){var l=o[u=r[c]][n],d=a[u];if(l&&d!==l){s=!0;break}}else s=!0;s&&i.forEach((function(t){t(e.$initStateSlice())}))}))}},{key:"$unSubscribeStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"destroy",value:function(){l()(y()(n.prototype),"destroy",this).call(this),this.$error=undefined,this.streamUuid=undefined,this.stateSlice=undefined,this.$selfArtifact=undefined,this.$unSubscribeStore()}}]),n}(m.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r;n(727);if("undefined"!=typeof globalThis)r=globalThis;else if("undefined"!=typeof window)r=window;else{if("undefined"==typeof self)throw new Error("unable to locate global object");r=self}var i=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return b}));n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=(n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(415)),p=n(39),v=n(138),y=n(160);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var m=function(e){u()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this)).eventManager_=new h.a,a.debug&&(p.a.enable=!0),r.ctx_=e,r.options_=a,r}return o()(n,[{key:"endStream",get:function(){return null}},{key:"listenEndStream_",value:function(){var e=this;this.eventManager_.on(this.endStream,"data",(function(t){e.emit("ESD",t)})).on(this.endStream,"done",(function(t){e.emit("O",t)})).on(this.ctx_,"error",(function(t){e.emit("E",t)}))}},{key:"reset",value:function(){}},{key:"destroy",value:function(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}]),n}(v.a),_=function(e){u()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).eventManager_.on(r.ctx_,"info",(function(e){r.emit("demux_info",e)})),r}return o()(n,[{key:"constraintPushData_",value:function(e){var t=null;return Object(y.a)(e)||Object(y.k)(e)?t=Object(y.a)(e)?new Uint8Array(e):e:t}}]),n}(m),b=function(e){u()(n,e);var t=g(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),t.call(this,e,r)}return o()(n)}(m)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ye}));n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(35),n(23);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=(n(70),[0,0,0,0,0,0,0,0]),p=[].concat(h,[0,0,0,0]),v=[].concat(h,[1,0,0,0]),y=i()((function Qe(e){var t;o()(this,Qe);for(var n=Array.isArray(e)?e:e.type,r=!Array.isArray(e)&&!!e.boxHead,i=function(e,t){e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e.set(n,4)},a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];if(r&&1===s.length)i(t=s[0],t.byteLength);else{for(var c=s.length,l=c,d=8;l--;)d+=s[l].byteLength;try{t=new Uint8Array(d)}catch(f){throw"mp4 box ".concat(n," alloc mem err: ").concat(f.message)}for(i(t,d),l=0,d=8;l<c;l++)t.set(s[l],d),d+=s[l].byteLength}this.bytes=t})),g=y,m={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(var _ in m)if(Object.prototype.hasOwnProperty.call(m,_))for(var b=0;b<4;b++)m[_].push(_.charCodeAt(b));var x=m;function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var w=function(e){u()(n,e);var t=k(n);function n(e){o()(this,n);for(var r,i=new Uint8Array([105,115,111,109]),a=new Uint8Array([0,0,0,1]),s=new Uint8Array([97,118,99,49]),u=0;u<e.length;u++){if(r=e[u],/^hvc/gi.test(r.codec))s=new Uint8Array([104,118,99,49]);break}return t.call(this,x.ftyp,i,a,i,s)}return i()(n)}(g);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var T=function(e){u()(n,e);var t=S(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return o()(this,n),t.call(this,{type:x.mdat,boxHead:r},e)}return i()(n)}(g),P=n(96),E=n.n(P);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var I=function(e){u()(n,e);var t=A(n);function n(e){return o()(this,n),t.call(this,{type:x.mfhd,boxHead:!0},new Uint8Array([].concat(E()(p),[e>>24,e>>16&255,e>>8&255,255&e])))}return i()(n)}(y),D=Math.pow(2,32)-1;n(490);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var O=function(e){u()(n,e);var t=L(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];o()(this,n);for(var r,i=new Uint8Array(12+e.length),a=0;a<e.length;a++)r=e[a].flags,i[a+12]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.call(this,{type:x.sdtp,boxHead:!0},i)}return i()(n)}(y);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var C=function(e){u()(n,e);var t=R(n);function n(e,r){return o()(this,n),t.call(this,{type:x.tfdt,boxHead:!0},new Uint8Array([].concat(E()(v),[e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r])))}return i()(n)}(y);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var B=function(e){u()(n,e);var t=M(n);function n(e){return o()(this,n),t.call(this,{type:x.tfhd,boxHead:!0},new Uint8Array([].concat(E()(p),[e>>24,e>>16&255,e>>8&255,255&e])))}return i()(n)}(y);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var F=function(e){u()(n,e);var t=N(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=arguments.length>1?arguments[1]:undefined;o()(this,n);var i,a,s,u,c,l=e.length,d=20+16*l,f=new Uint8Array(d);r+=d,f.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,r>>>24&255,r>>>16&255,r>>>8&255,255&r],8);for(var h=0;h<l;h++)a=(i=e[h]).duration,s=i.size,u=i.flags,c=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSyncSample,61440&u.degradationPriority,15&u.degradationPriority,c>>>24&255,c>>>16&255,c>>>8&255,255&c],20+16*h);return t.call(this,{type:x.trun,boxHead:!0},f)}return i()(n)}(y);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var j=function(e){u()(n,e);var t=q(n);function n(e,r){o()(this,n);var i=e.id,a=e.samples,s=Math.floor(r/(D+1)),u=Math.floor(r%(D+1)),c=function(e){return new O(e).bytes}(a);return t.call(this,x.traf,function(e){return new B(e).bytes}(i),function(e,t){return new C(e,t).bytes}(s,u),function(e,t){return new F(e,t).bytes}(a,c.length+16+20+8+16+8+8),c)}return i()(n)}(y);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var V=function(e){u()(n,e);var t=U(n);function n(e,r,i){return o()(this,n),t.call(this,x.moof,new I(e).bytes,function(e,t){return new j(e,t).bytes}(i,r))}return i()(n)}(g);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var z=function(e){u()(n,e);var t=H(n);function n(e,r){o()(this,n),r*=e;var i=Math.floor(r/(D+1)),a=Math.floor(r%(D+1)),s=new Uint8Array([].concat(E()(v),[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return t.call(this,{type:x.mvhd,boxHead:!0},s)}return i()(n)}(y);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var W=function(e){u()(n,e);var t=G(n);function n(e){o()(this,n);var r=e.id,i=e.duration*e.timescale,a=e.width,s=e.height,u=Math.floor(i/(D+1)),c=Math.floor(i%(D+1));return t.call(this,x.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))}return i()(n)}(g);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var $=function(e){u()(n,e);var t=K(n);function n(e,r){o()(this,n),r*=e;var i=Math.floor(r/(D+1)),a=Math.floor(r%(D+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]);return t.call(this,x.mdhd,s)}return i()(n)}(g);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),J=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),X=function(e){u()(n,e);var t=Y(n);function n(e){var r;switch(o()(this,n),e){case"video":r=Q;break;case"audio":r=J}return t.call(this,x.hdlr,r)}return i()(n)}(g);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ee=(new(function(e){u()(n,e);var t=Z(n);function n(){return o()(this,n),t.call(this,{type:x.dref,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))}return i()(n)}(y))).bytes;function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ne=(new(function(e){u()(n,e);var t=te(n);function n(){return o()(this,n),t.call(this,x.dinf,ee)}return i()(n)}(y))).bytes;function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ie=(new(function(e){u()(n,e);var t=re(n);function n(){return o()(this,n),t.call(this,{type:x.smhd,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,0])))}return i()(n)}(y))).bytes;function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var oe=(new(function(e){u()(n,e);var t=ae(n);function n(){return o()(this,n),t.call(this,x.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}return i()(n)}(y))).bytes;function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ue=(new(function(e){u()(n,e);var t=se(n);function n(){return o()(this,n),t.call(this,{type:x.stco,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,0])))}return i()(n)}(y))).bytes;function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var le=(new(function(e){u()(n,e);var t=ce(n);function n(){return o()(this,n),t.call(this,{type:x.stsz,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,0,0,0,0,0])))}return i()(n)}(y))).bytes;function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var fe=(new(function(e){u()(n,e);var t=de(n);function n(){return o()(this,n),t.call(this,{type:x.stsc,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,0])))}return i()(n)}(y))).bytes;function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var pe=(new(function(e){u()(n,e);var t=he(n);function n(){return o()(this,n),t.call(this,{type:x.stts,boxHead:!0},new Uint8Array([].concat(E()(p),[0,0,0,0])))}return i()(n)}(y))).bytes;n(130);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ye=function(e){u()(n,e);var t=ve(n);function n(){return o()(this,n),t.call(this,x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))}return i()(n)}(g);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var me=function(e){u()(n,e);var t=ge(n);function n(e,r){return o()(this,n),t.call(this,x.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r]))}return i()(n)}(g);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var be=function(e){u()(n,e);var t=_e(n);function n(e,r){o()(this,n);for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];return t.call.apply(t,[this,e,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r.width>>8&255,255&r.width,r.height>>8&255,255&r.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])].concat(a))}return i()(n)}(g);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var ke=function(e){u()(n,e);var t=xe(n);function n(e,r,i){return o()(this,n),t.call(this,x.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(i)))}return i()(n)}(g),we=function(e){u()(n,e);var t=xe(n);function n(e){o()(this,n);var r,i,a,s=[],u=[];for(r=0;r<e.sps.length;r++)a=(i=e.sps[r]).byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)a=(i=e.pps[r]).byteLength,u.push(a>>>8&255),u.push(255&a),u=u.concat(Array.prototype.slice.call(i));var c=e.pixelRatio[0],l=e.pixelRatio[1];return t.call(this,x.avc1,e,new ke(e,s,u).bytes,(new ye).bytes,new me(c,l).bytes)}return i()(n)}(be);n(115);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Te=function(e){u()(n,e);var t=Se(n);function n(e,r,i,a){return o()(this,n),t.call(this,x.hvcC,function(e,t,n,r){var i;i=t.minSpatialSegmentationIdc?n.entropy_coding_sync_enabled_flag&&n.tiles_enabled_flag?0:n.entropy_coding_sync_enabled_flag?3:n.tiles_enabled_flag?2:1:0;var a=(e.payload.length&&1)+(t.payload.length&&1)+(n.payload.length&&1),o=[1,t.profile_space<<6|t.tier_flag<<5|t.profile_idc,t.profile_compatibility_flags[0],t.profile_compatibility_flags[1],t.profile_compatibility_flags[2],t.profile_compatibility_flags[3],t.constraint_indicator_flags[0],t.constraint_indicator_flags[1],t.constraint_indicator_flags[2],t.constraint_indicator_flags[3],t.constraint_indicator_flags[4],t.constraint_indicator_flags[5],t.level_idc,240&t.minSpatialSegmentationIdc>>8,255&t.minSpatialSegmentationIdc,252&i,252&t.chromaFormat,248&t.bitDepthLumaMinus8,248&t.bitDepthChromaMinus8,0,0,0|e.numTemporalLayers<<3|e.temporalIdNested<<2|3,a],s=function(e){o.push(e.length>>8,e.length),o.push.apply(o,E()(e))};return r.vps.length&&(o.push(160,0,r.vps.length),r.vps.forEach(s)),r.sps.length&&(o.push(161,0,r.sps.length),r.sps.forEach(s)),r.pps.length&&(o.push(162,0,r.pps.length),r.pps.forEach(s)),new Uint8Array(o)}(r,i,a,e))}return i()(n)}(g),Pe=function(e){u()(n,e);var t=Se(n);function n(e){o()(this,n);var r=e.pixelRatio[0],i=e.pixelRatio[1];return t.call(this,x.hvc1,e,new Te(e,e.hevc_vps,e.hevc_sps,e.hevc_pps).bytes,(new ye).bytes,new me(r,i).bytes)}return i()(n)}(be);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Ae=function(e){u()(n,e);var t=Ee(n);function n(e){o()(this,n);var r=e.sampleRate;return t.call(this,x[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}return i()(n)}(g);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var De=function(e){u()(n,e);var t=Ie(n);function n(e){o()(this,n);var r=e.config,i=r.length;return t.call(this,{type:x.esds,boxHead:!0},new Uint8Array([].concat(E()(p),[3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i]).concat(r).concat([6,1,2])))}return i()(n)}(y),Le=function(e){u()(n,e);var t=Ie(n);function n(e){o()(this,n);var r=e.sampleRate,i=e.channelCount;return t.call(this,x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,r>>8&255,255&r,0,0]),new De(e).bytes)}return i()(n)}(y);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Re=function(e){u()(n,e);var t=Oe(n);function n(e){o()(this,n);var r,i=new Uint8Array([0,0,0,0,0,0,0,1]);return r="audio"===e.type?e.isAAC||"mp3"!==e.codec?function(e){return new Le(e).bytes}(e):function(e){return new Ae(e).bytes}(e):/^hvc1/gi.test(e.codec)?function(e){return new Pe(e).bytes}(e):function(e){return new we(e).bytes}(e),t.call(this,x.stsd,i,r)}return i()(n)}(g);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Me=function(e){u()(n,e);var t=Ce(n);function n(e){return o()(this,n),t.call(this,x.stbl,function(e){return new Re(e).bytes}(e),pe,fe,le,ue)}return i()(n)}(y);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Ne=function(e){u()(n,e);var t=Be(n);function n(e){return o()(this,n),t.call(this,x.minf,"audio"===e.type?ie:oe,ne,function(e){return new Me(e).bytes}(e))}return i()(n)}(g);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var qe=function(e){u()(n,e);var t=Fe(n);function n(e){return o()(this,n),t.call(this,x.mdia,(i=e.timescale,a=e.duration,new $(i,a).bytes),(r=e.type,new X(r).bytes),function(e){return new Ne(e).bytes}(e));var r,i,a}return i()(n)}(g);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Ue=function(e){u()(n,e);var t=je(n);function n(e){return o()(this,n),t.call(this,x.trak,function(e){return new W(e).bytes}(e),function(e){return new qe(e).bytes}(e))}return i()(n)}(g);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var He=function(e){u()(n,e);var t=Ve(n);function n(e){o()(this,n);var r=e.id;return t.call(this,{type:x.trex,boxHead:!0},new Uint8Array([].concat(E()(p),[r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}return i()(n)}(y);function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var Ge=function(e){u()(n,e);var t=ze(n);function n(e){return o()(this,n),t.call.apply(t,[this,x.mvex].concat(E()(e)))}return i()(n)}(g),We=function(e){for(var t,n=e.length,r=[];n--;)r[n]=(t=e[n],new He(t).bytes);return new Ge(r).bytes};function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var $e=function(e){u()(n,e);var t=Ke(n);function n(e){o()(this,n);for(var r,i,a,s=e.length,u=[];s--;)u[s]=((r=e[s]).duration=r.duration||4294967295,new Ue(r).bytes);return t.call.apply(t,[this,x.moov,(i=e[0].timescale,a=e[0].duration,new z(i,a).bytes)].concat(u,[We(e)]))}return i()(n)}(g),Ye={initSegment:function(e){var t,n=function(e){return new $e(e).bytes}(e),r=function(e){return new w(e).bytes}(e);try{t=new Uint8Array(r.byteLength+n.byteLength)}catch(i){throw"mp4 initSegment alloc mem err ".concat(r.byteLength,"-").concat(n.byteLength)}return t.set(r),t.set(n,r.byteLength),t},moof:function(e,t,n){return function(e,t,n){return new V(e,t,n).bytes}(e,t,n)},mdat:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new T(e,t).bytes}}},function(e,t,n){var r=n(28),i=n(334);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){var r=n(285);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var r=n(196),i=n(688),a=n(647),o=i(1);r({target:"Array",proto:!0,forced:!a("map")},{map:function(e){return o(this,e,arguments[1])}})},,function(e,t,n){"use strict";var r,i,a,o,s=n(80),u=n(322),c=n(99),l=n(264),d=n(733),f=n(204),h=n(437),p=n(275),v=n(407),y=n(145),g=n(274),m=n(327),_=n(509),b=n(522),x=n(433),k=n(328),w=n(601).set,S=n(734),T=n(736),P=n(737),E=n(603),A=n(738),I=n(254),D=n(402),L=n(132),O=n(396),R=n(397),C=L("species"),M="Promise",B=I.get,N=I.set,F=I.getterFor(M),q=d,j=c.TypeError,U=c.document,V=c.process,H=l("fetch"),z=E.f,G=z,W=!!(U&&U.createEvent&&c.dispatchEvent),K="function"==typeof PromiseRejectionEvent,$="unhandledrejection",Y=D(M,(function(){if(!(_(q)!==String(q))){if(66===R)return!0;if(!O&&!K)return!0}if(u&&!q.prototype["finally"])return!0;if(R>=51&&/native code/.test(q))return!1;var e=q.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[C]=t,!(e.then((function(){}))instanceof t)})),Q=Y||!x((function(e){q.all(e)["catch"]((function(){}))})),J=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;S((function(){for(var r=e.value,i=1==e.state,a=0;n.length>a;){var o,s,u,c=n[a++],l=i?c.ok:c.fail,d=c.resolve,f=c.reject,h=c.domain;try{l?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===l?o=r:(h&&h.enter(),o=l(r),h&&(h.exit(),u=!0)),o===c.promise?f(j("Promise-chain cycle")):(s=J(o))?s.call(o,d,f):d(o)):f(r)}catch(p){h&&!u&&h.exit(),f(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Z=function(e,t,n){var r,i;W?((r=U.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!K&&(i=c["on"+e])?i(r):e===$&&P("Unhandled promise rejection",n)},ee=function(e){w.call(c,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=A((function(){O?V.emit("unhandledRejection",r,n):Z($,n,r)})),e.rejection=O||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){w.call(c,(function(){var t=e.facade;O?V.emit("rejectionHandled",t):Z("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},ae=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw j("Promise can't be resolved itself");var r=J(t);r?S((function(){var n={done:!1};try{r.call(t,re(ae,n,e),re(ie,n,e))}catch(i){ie(n,i,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(i){ie({done:!1},i,e)}}};Y&&(q=function(e){m(this,q,M),g(e),r.call(this);var t=B(this);try{e(re(ae,t),re(ie,t))}catch(n){ie(t,n)}},(r=function(e){N(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=h(q.prototype,{then:function(e,t){var n=F(this),r=z(k(this,q));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?V.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&X(n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),i=function(){var e=new r,t=B(e);this.promise=e,this.resolve=re(ae,t),this.reject=re(ie,t)},E.f=z=function(e){return e===q||e===a?new i(e):G(e)},u||"function"!=typeof d||(o=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new q((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(q,H.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:Y},{Promise:q}),p(q,M,!1,!0),v(M),a=l(M),s({target:M,stat:!0,forced:Y},{reject:function(e){var t=z(this);return t.reject.call(undefined,e),t.promise}}),s({target:M,stat:!0,forced:u||Y},{resolve:function(e){return T(u&&this===a?q:this,e)}}),s({target:M,stat:!0,forced:Q},{all:function(e){var t=this,n=z(t),r=n.resolve,i=n.reject,a=A((function(){var n=g(t.resolve),a=[],o=0,s=1;b(e,(function(e){var u=o++,c=!1;a.push(undefined),s++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=z(t),r=n.reject,i=A((function(){var i=g(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t,n){"use strict";n(30);var r=n(80),i=n(264),a=n(621),o=n(204),s=n(437),u=n(275),c=n(595),l=n(254),d=n(327),f=n(162),h=n(326),p=n(399),v=n(116),y=n(145),g=n(301),m=n(299),_=n(748),b=n(406),x=n(132),k=i("fetch"),w=i("Headers"),S=x("iterator"),T="URLSearchParams",P="URLSearchParamsIterator",E=l.set,A=l.getterFor(T),I=l.getterFor(P),D=/\+/g,L=Array(4),O=function(e){return L[e-1]||(L[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},R=function(e){try{return decodeURIComponent(e)}catch(t){return e}},C=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(r){for(;n;)t=t.replace(O(n--),R);return t}},M=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return B[e]},F=function(e){return encodeURIComponent(e).replace(M,N)},q=function(e,t){if(t)for(var n,r,i=t.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),e.push({key:C(r.shift()),value:C(r.join("="))}))},j=function(e){this.entries.length=0,q(this.entries,e)},U=function(e,t){if(e<t)throw TypeError("Not enough arguments")},V=c((function(e,t){E(this,{type:P,iterator:_(A(e).entries),kind:t})}),"Iterator",(function(){var e=I(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),H=function(){d(this,H,T);var e,t,n,r,i,a,o,s,u,c=arguments.length>0?arguments[0]:undefined,l=this,h=[];if(E(l,{type:T,entries:h,updateURL:function(){},updateSearchParams:j}),c!==undefined)if(y(c))if("function"==typeof(e=b(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((o=(a=(i=_(v(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(u in c)f(c,u)&&h.push({key:u,value:c[u]+""});else q(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},z=H.prototype;s(z,{append:function(e,t){U(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},"delete":function(e){U(arguments.length,1);for(var t=A(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){U(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){U(arguments.length,1);for(var t=A(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){U(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){U(arguments.length,1);for(var n,r=A(this),i=r.entries,a=!1,o=e+"",s=t+"",u=0;u<i.length;u++)(n=i[u]).key===o&&(a?i.splice(u--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=A(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=A(this).entries,r=h(e,arguments.length>1?arguments[1]:undefined,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),o(z,S,z.entries),o(z,"toString",(function(){for(var e,t=A(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(F(e.key)+"="+F(e.value));return n.join("&")}),{enumerable:!0}),u(H,T),r({global:!0,forced:!a},{URLSearchParams:H}),a||"function"!=typeof k||"function"!=typeof w||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(y(t=arguments[1])&&(n=t.body,p(n)===T&&((r=t.headers?new w(t.headers):new w).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:m(0,String(n)),headers:m(0,r)}))),i.push(t)),k.apply(this,i)}}),e.exports={URLSearchParams:H,getState:A}},,function(e,t,n){var r=n(31);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(29),i=n(168),a=n(225),o=n(78),s=r.Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(123)["default"],i=n(370);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(78);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(o){var a=e["return"];throw a!==undefined&&r(a.call(e)),o}}},function(e,t,n){var r=n(321);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=!1},function(e,t,n){var r=n(145);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(588),i=n(511).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(256),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},function(e,t,n){var r=n(274);e.exports=function(e,t,n){if(r(e),t===undefined)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(116),i=n(274),a=n(132)("species");e.exports=function(e,t){var n,o=r(e).constructor;return o===undefined||(n=r(o)[a])==undefined?t:i(n)}},function(e,t,n){var r=n(196),i=n(219),a=n(643),o=n(463),s=n(310),u=n(285),c=n(259),l=n(1024),d=(i.Reflect||{}).construct,f=c((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!c((function(){d((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var i=n.prototype,c=a(u(i)?i:Object.prototype),p=Function.apply.call(e,c,t);return u(p)?p:c}})},function(e,t,n){"use strict";var r=n(196),i=n(785),a=n(788),o=i(!0);r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:undefined)}}),a("includes")},function(e,t,n){"use strict";var r=n(196),i=n(789);r({target:"String",proto:!0,forced:!n(791)("includes")},{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="1.1.8-10"},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return v}));n(303),n(111),n(130),n(17),n(205),n(110),n(70),n(199),n(209),n(210),n(30),n(101);var r=n(413),i=n(4),a=n.n(i),o=n(5),s=n.n(o),u=(n(257),n(612),n(35),n(115),n(266),n(258),n(121),n(152)),c=n(160);function l(e){return!!e}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=new(function(){function e(){a()(this,e),this.cachedInjectors_=new Map}return s()(e,[{key:"validKey_",value:function(e,t,n){var r=!1,i=undefined;return n||(n=this.cachedInjectors_.get(e)),t.startsWith("$")||t in e&&(n.map((function(e){return e.key})).indexOf(t)>-1||(r=!0)),{valid:r,descriptor:i}}},{key:"ejectApi_",value:function(e,t){Object(u.e)(e,t)&&delete e[t]}},{key:"dispose",value:function(){this.cachedInjectors_.clear()}},{key:"provide",value:function(e,t){var n=this,i=this.cachedInjectors_;if(e){var a=[];i.has(e)?a=i.get(e):i.set(e,a),t.forEach((function(t){var i;n.validKey_(e,t,a).valid&&(Object(r.a)(e,(function(e){return i=Object.getOwnPropertyDescriptor(e,t)})),a.push({key:t,descriptor:i}))}))}else 0}},{key:"inject",value:function(e){var t=this.cachedInjectors_;l(e)&&t.forEach((function(t,n){t.forEach((function(t){var r=t.key,i=t.descriptor,a=void 0===i?{}:i,o=!!a.set,s=!!a.get;r in n&&(r in e||(o||s?Object.defineProperty(e,r,Object.assign(Object.assign({},a),{get:s?function(){return n[r]}:undefined,set:o?function(e){return n[r]=e}:undefined})):Object(c.d)(n[r])&&(e[r]=n[r].bind(n),e[r].__target__=n)))}))}))}},{key:"eject",value:function(e,t){var n=this;this.cachedInjectors_;l(e)&&Array.isArray(t)&&t.forEach((function(t){n.ejectApi_(e,t)}))}}]),e}());function p(e,t,n){var r=e.$__apiDescriptorQueue__=e.$__apiDescriptorQueue__||[];if(n){if(Array.isArray(r))-1==r.map((function(e){return e.key})).indexOf(t)&&r.push({key:t,descriptor:n});return n}}function v(){var e=[];return Object(r.b)(this,(function(t){var n=t.$__apiDescriptorQueue__;if(Array.isArray(n)){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;-1===e.indexOf(a.key)&&e.push(a.key)}}catch(o){i.e(o)}finally{i.f()}}})),e}},function(e,t,n){"use strict";var r=n(107),i=n(117),a=n(77),o=n(174),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0,c=o("lastIndexOf");e.exports=u||c?function(e){if(u)return s.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=Math.min(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:s},function(e,t,n){"use strict";var r,i,a,o=n(196),s=n(639),u=n(219),c=n(792),l=n(1027),d=n(687),f=n(816),h=n(285),p=n(463),v=n(1029),y=n(442),g=n(1030),m=n(1034),_=n(817),b=n(818).set,x=n(1035),k=n(1036),w=n(1037),S=n(820),T=n(1038),P=n(819),E=n(640),A=n(686),I=n(260)("species"),D="Promise",L=E.get,O=E.set,R=E.getterFor(D),C=u.Promise,M=u.TypeError,B=u.document,N=u.process,F=u.fetch,q=N&&N.versions,j=q&&q.v8||"",U=S.f,V=U,H="process"==y(N),z=!!(B&&B.createEvent&&u.dispatchEvent),G="unhandledrejection",W=A(D,(function(){var e=C.resolve(1),t=function(){},n=(e.constructor={})[I]=function(e){e(t,t)};return!((H||"function"==typeof PromiseRejectionEvent)&&(!s||e["finally"])&&e.then(t)instanceof n&&0!==j.indexOf("6.6")&&-1===P.indexOf("Chrome/66"))})),K=W||!m((function(e){C.all(e)["catch"]((function(){}))})),$=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},Y=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;x((function(){for(var i=t.value,a=1==t.state,o=0,s=function(n){var r,o,s,u=a?n.ok:n.fail,c=n.resolve,l=n.reject,d=n.domain;try{u?(a||(2===t.rejection&&Z(e,t),t.rejection=1),!0===u?r=i:(d&&d.enter(),r=u(i),d&&(d.exit(),s=!0)),r===n.promise?l(M("Promise-chain cycle")):(o=$(r))?o.call(r,c,l):c(r)):l(i)}catch(f){d&&!s&&d.exit(),l(f)}};r.length>o;)s(r[o++]);t.reactions=[],t.notified=!1,n&&!t.rejection&&J(e,t)}))}},Q=function(e,t,n){var r,i;z?((r=B.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},(i=u["on"+e])?i(r):e===G&&w("Unhandled promise rejection",n)},J=function(e,t){b.call(u,(function(){var n,r=t.value;if(X(t)&&(n=T((function(){H?N.emit("unhandledRejection",r,e):Q(G,e,r)})),t.rejection=H||X(t)?2:1,n.error))throw n.value}))},X=function(e){return 1!==e.rejection&&!e.parent},Z=function(e,t){b.call(u,(function(){H?N.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},ee=function(e,t,n,r){return function(i){e(t,n,i,r)}},te=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Y(e,t,!0))},ne=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw M("Promise can't be resolved itself");var i=$(n);i?x((function(){var r={done:!1};try{i.call(n,ee(ne,e,r,t),ee(te,e,r,t))}catch(a){te(e,r,a,t)}})):(t.value=n,t.state=1,Y(e,t,!1))}catch(a){te(e,{done:!1},a,t)}}};W&&(C=function(e){v(this,C,D),p(e),r.call(this);var t=L(this);try{e(ee(ne,this,t),ee(te,this,t))}catch(n){te(this,t,n)}},(r=function(e){O(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=l(C.prototype,{then:function(e,t){var n=R(this),r=U(_(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=H?N.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(this,n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),i=function(){var e=new r,t=L(e);this.promise=e,this.resolve=ee(ne,e,t),this.reject=ee(te,e,t)},S.f=U=function(e){return e===C||e===a?new i(e):V(e)},s||"function"!=typeof F||o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k(C,F.apply(u,arguments))}})),o({global:!0,wrap:!0,forced:W},{Promise:C}),d(C,D,!1,!0),f(D),a=c.Promise,o({target:D,stat:!0,forced:W},{reject:function(e){var t=U(this);return t.reject.call(undefined,e),t.promise}}),o({target:D,stat:!0,forced:s||W},{resolve:function(e){return k(s&&this===a?C:this,e)}}),o({target:D,stat:!0,forced:K},{all:function(e){var t=this,n=U(t),r=n.resolve,i=n.reject,a=T((function(){var n=p(t.resolve),a=[],o=0,s=1;g(e,(function(e){var u=o++,c=!1;a.push(undefined),s++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=U(t),r=n.reject,i=T((function(){var i=p(t.resolve);g(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t,n){"use strict";var r=n(196),i=n(636),a=n(441),o=n(537),s=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||c},{join:function(e){return s.call(a(this),e===undefined?",":e)}})},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}",""])},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(32);function r(e){var t=parseInt(e,10);return t<9e7&&(t=100*(t+9e5)),t}},function(e,t,n){"use strict";var r=n(80),i=n(99),a=n(525),o=n(407),s="ArrayBuffer",u=a.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==u},{ArrayBuffer:u}),o(s)},function(e,t,n){"use strict";n(110);var r,i=n(80),a=n(147),o=n(621),s=n(99),u=n(513),c=n(204),l=n(327),d=n(162),f=n(604),h=n(593),p=n(519).codeAt,v=n(747),y=n(275),g=n(314),m=n(254),_=s.URL,b=g.URLSearchParams,x=g.getState,k=m.set,w=m.getterFor("URL"),S=Math.floor,T=Math.pow,P="Invalid scheme",E="Invalid host",A="Invalid port",I=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,L=/\d/,O=/^(0x|0X)/,R=/^[0-7]+$/,C=/^\d+$/,M=/^[\dA-Fa-f]+$/,B=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,N=/[\u0000\t\u000A\u000D #/:?@[\\]]/,F=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,q=/[\t\u000A\u000D]/g,j=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return E;if(!(n=V(t.slice(1,-1))))return E;e.host=n}else if(Q(e)){if(t=v(t),B.test(t))return E;if(null===(n=U(t)))return E;e.host=n}else{if(N.test(t))return E;for(n="",r=h(t),i=0;i<r.length;i++)n+=$(r[i],z);e.host=n}},U=function(e){var t,n,r,i,a,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=O.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?C:8==a?R:M).test(i))return e;o=parseInt(i,a)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=T(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*T(256,3-r);return s},V=function(e){var t,n,r,i,a,o,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&M.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;d++}if(!L.test(f()))return;for(;L.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;d++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(o=c-l,c=7;0!=c&&o>0;)s=u[c],u[c--]=u[l+o-1],u[l+--o]=s;else if(8!=c)return;return u},H=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},z={},G=f({},z,{" ":1,'"':1,"<":1,">":1,"`":1}),W=f({},G,{"#":1,"?":1,"{":1,"}":1}),K=f({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var n=p(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(e){return d(Y,e.scheme)},J=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Z=function(e,t){var n;return 2==e.length&&I.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ee=function(e){var t;return e.length>1&&Z(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Z(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},re={},ie={},ae={},oe={},se={},ue={},ce={},le={},de={},fe={},he={},pe={},ve={},ye={},ge={},me={},_e={},be={},xe={},ke={},we={},Se=function(e,t,n,i){var a,o,s,u,c,l=n||re,f=0,p="",v=!1,y=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(F,"")),t=t.replace(q,""),a=h(t);f<=a.length;){switch(o=a[f],l){case re:if(!o||!I.test(o)){if(n)return P;l=ae;continue}p+=o.toLowerCase(),l=ie;break;case ie:if(o&&(D.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(n)return P;p="",l=ae,f=0;continue}if(n&&(Q(e)!=d(Y,p)||"file"==p&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(Q(e)&&Y[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=ye:Q(e)&&i&&i.scheme==e.scheme?l=oe:Q(e)?l=le:"/"==a[f+1]?(l=se,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=xe)}break;case ae:if(!i||i.cannotBeABaseURL&&"#"!=o)return P;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=we;break}l="file"==i.scheme?ye:ue;continue;case oe:if("/"!=o||"/"!=a[f+1]){l=ue;continue}l=de,f++;break;case se:if("/"==o){l=fe;break}l=be;continue;case ue:if(e.scheme=i.scheme,o==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&Q(e))l=ce;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=ke;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=be;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=we}break;case ce:if(!Q(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=be;continue}l=fe}else l=de;break;case le:if(l=de,"/"!=o||"/"!=p.charAt(f+1))continue;f++;break;case de:if("/"!=o&&"\\"!=o){l=fe;continue}break;case fe:if("@"==o){v&&(p="%40"+p),v=!0,s=h(p);for(var m=0;m<s.length;m++){var _=s[m];if(":"!=_||g){var b=$(_,K);g?e.password+=b:e.username+=b}else g=!0}p=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)){if(v&&""==p)return"Invalid authority";f-=h(p).length+1,p="",l=he}else p+=o;break;case he:case pe:if(n&&"file"==e.scheme){l=me;continue}if(":"!=o||y){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)){if(Q(e)&&""==p)return E;if(n&&""==p&&(J(e)||null!==e.port))return;if(u=j(e,p))return u;if(p="",l=_e,n)return;continue}"["==o?y=!0:"]"==o&&(y=!1),p+=o}else{if(""==p)return E;if(u=j(e,p))return u;if(p="",l=ve,n==pe)return}break;case ve:if(!L.test(o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)||n){if(""!=p){var x=parseInt(p,10);if(x>65535)return A;e.port=Q(e)&&x===Y[e.scheme]?null:x,p=""}if(n)return;l=_e;continue}return A}p+=o;break;case ye:if(e.scheme="file","/"==o||"\\"==o)l=ge;else{if(!i||"file"!=i.scheme){l=be;continue}if(o==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",l=ke;else{if("#"!=o){ee(a.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),te(e)),l=be;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=we}}break;case ge:if("/"==o||"\\"==o){l=me;break}i&&"file"==i.scheme&&!ee(a.slice(f).join(""))&&(Z(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=be;continue;case me:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Z(p))l=be;else if(""==p){if(e.host="",n)return;l=_e}else{if(u=j(e,p))return u;if("localhost"==e.host&&(e.host=""),n)return;p="",l=_e}continue}p+=o;break;case _e:if(Q(e)){if(l=be,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=r&&(l=be,"/"!=o))continue}else e.fragment="",l=we;else e.query="",l=ke;break;case be:if(o==r||"/"==o||"\\"==o&&Q(e)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(te(e),"/"==o||"\\"==o&&Q(e)||e.path.push("")):ne(p)?"/"==o||"\\"==o&&Q(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Z(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(o==r||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=ke):"#"==o&&(e.fragment="",l=we)}else p+=$(o,W);break;case xe:"?"==o?(e.query="",l=ke):"#"==o?(e.fragment="",l=we):o!=r&&(e.path[0]+=$(o,z));break;case ke:n||"#"!=o?o!=r&&("'"==o&&Q(e)?e.query+="%27":e.query+="#"==o?"%23":$(o,z)):(e.fragment="",l=we);break;case we:o!=r&&(e.fragment+=$(o,G))}f++}},Te=function(e){var t,n,r=l(this,Te,"URL"),i=arguments.length>1?arguments[1]:undefined,o=String(e),s=k(r,{type:"URL"});if(i!==undefined)if(i instanceof Te)t=w(i);else if(n=Se(t={},String(i)))throw TypeError(n);if(n=Se(s,o,null,t))throw TypeError(n);var u=s.searchParams=new b,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},a||(r.href=Ee.call(r),r.origin=Ae.call(r),r.protocol=Ie.call(r),r.username=De.call(r),r.password=Le.call(r),r.host=Oe.call(r),r.hostname=Re.call(r),r.port=Ce.call(r),r.pathname=Me.call(r),r.search=Be.call(r),r.searchParams=Ne.call(r),r.hash=Fe.call(r))},Pe=Te.prototype,Ee=function(){var e=w(this),t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",J(e)&&(c+=n+(r?":"+r:"")+"@"),c+=H(i),null!==a&&(c+=":"+a)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Ae=function(){var e=w(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&Q(e)?t+"://"+H(e.host)+(null!==n?":"+n:""):"null"},Ie=function(){return w(this).scheme+":"},De=function(){return w(this).username},Le=function(){return w(this).password},Oe=function(){var e=w(this),t=e.host,n=e.port;return null===t?"":null===n?H(t):H(t)+":"+n},Re=function(){var e=w(this).host;return null===e?"":H(e)},Ce=function(){var e=w(this).port;return null===e?"":String(e)},Me=function(){var e=w(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Be=function(){var e=w(this).query;return e?"?"+e:""},Ne=function(){return w(this).searchParams},Fe=function(){var e=w(this).fragment;return e?"#"+e:""},qe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&u(Pe,{href:qe(Ee,(function(e){var t=w(this),n=String(e),r=Se(t,n);if(r)throw TypeError(r);x(t.searchParams).updateSearchParams(t.query)})),origin:qe(Ae),protocol:qe(Ie,(function(e){var t=w(this);Se(t,String(e)+":",re)})),username:qe(De,(function(e){var t=w(this),n=h(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=$(n[r],K)}})),password:qe(Le,(function(e){var t=w(this),n=h(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=$(n[r],K)}})),host:qe(Oe,(function(e){var t=w(this);t.cannotBeABaseURL||Se(t,String(e),he)})),hostname:qe(Re,(function(e){var t=w(this);t.cannotBeABaseURL||Se(t,String(e),pe)})),port:qe(Ce,(function(e){var t=w(this);X(t)||(""==(e=String(e))?t.port=null:Se(t,e,ve))})),pathname:qe(Me,(function(e){var t=w(this);t.cannotBeABaseURL||(t.path=[],Se(t,e+"",_e))})),search:qe(Be,(function(e){var t=w(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Se(t,e,ke)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:qe(Ne),hash:qe(Fe,(function(e){var t=w(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Se(t,e,we)):t.fragment=null}))}),c(Pe,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),c(Pe,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),_){var je=_.createObjectURL,Ue=_.revokeObjectURL;je&&c(Te,"createObjectURL",(function(e){return je.apply(_,arguments)})),Ue&&c(Te,"revokeObjectURL",(function(e){return Ue.apply(_,arguments)}))}y(Te,"URL"),i({global:!0,forced:!o,sham:!a},{URL:Te})},function(e,t,n){"use strict";var r=n(92);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(116),i=n(597);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(a){}return function(n,a){return r(n),i(a),t?e.call(n,a):n.__proto__=a,n}}():undefined)},function(e,t,n){var r=n(80),i=n(731);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,n){"use strict";var r=n(438),i=n(116),a=n(148),o=n(255),s=n(524),u=n(439);r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),c=String(this);if(!o.global)return u(o,c);var l=o.unicode;o.lastIndex=0;for(var d,f=[],h=0;null!==(d=u(o,c));){var p=String(d[0]);f[h]=p,""===p&&(o.lastIndex=s(c,a(o.lastIndex),l)),h++}return 0===h?null:f}]}))},function(e,t,n){var r=n(80),i=n(183),a=n(429);r({target:"Object",stat:!0,forced:n(92)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(363),i=n(809),a=n(310),o=n(637),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(536),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(113),u=n.n(s),c=n(8),l=n.n(c),d=n(9),f=n.n(d),h=n(3),p=n.n(h),v=(n(121),n(415)),y=n(39),g=n(185),m=n(160);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var b=function(e){l()(n,e);var t=_(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{debug:!1};i()(this,n),(a=t.call(this))._eventManager=new v.a,o.debug&&(y.a.enable=!0);var s=Object(g.a)({},o,!1),c=Object(g.a)({},o,!1);return Array.isArray(e)&&(Object(g.a)(s,e[1]||{}),e=e[0]),Array.isArray(r)&&(Object(g.a)(c,r[1]||{}),r=r[0]),a.demuxer=new e(u()(a),s),a.remuxer=new r(u()(a),c),a._eventManager.on(a.demuxer,"demux_info",(function(e){return a.emit("demux_info",e)})).on(a.demuxer,"ESD",(function(e){return a.emit("demux_data",e)})).on(a.remuxer,"ESD",(function(e){return a.emit("remux_data",e)})).on(a.remuxer.endStream,"done",(function(){return a.emit("done")})),a}return o()(n,[{key:"push",value:function(e,t){var n=t.resetInitSegment,r=t.audioSegmentAlignPTS;"number"!=typeof r||isNaN(r)||(this.remuxer.audioAlignPTS=r),"boolean"==typeof n&&n&&this.remuxer.rebuildInitSegment(),this.config=t,this.demuxer.push(e),this._noticeIdle()}},{key:"reset",value:function(){this.demuxer.reset(),this.remuxer.reset()}},{key:"destroy",value:function(){this.demuxer.unpipe(),this.demuxer.endStream.unpipe(),this.remuxer.endStream.removeAllListeners("data"),this.remuxer.endStream.removeAllListeners("done"),this._eventManager.removeAll()}},{key:"fireErr",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.emit("error",e,t,Object.assign(Object.assign({},n),{meta:this.config&&this.config.meta||{}}))}},{key:"_noticeIdle",value:function(){var e=this,t=function(){return e.emit("__idle__")};m.l?t():setTimeout((function(){t()}),0)}}]),n}(n(138).a)},function(e,t,n){(function(n){var r;!function(n,i){e.exports=function(n){"use strict";var i,a=(n=n||{}).Base64,o="2.6.4",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(s),c=String.fromCharCode,l=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(d,l)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},v=function(e){return p(f(String(e)))},y=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?y(v(e)):v(e)},m=function(e){return g(e,!0)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var a=e[r],o=e[r+1],u=e[r+2],c=a<<16|o<<8|u;n+=s.charAt(c>>>18)+s.charAt(c>>>12&63)+(void 0!==o?s.charAt(c>>>6&63):"=")+(void 0!==u?s.charAt(63&c):"=")}return t?y(n):n});var _,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},k=function(e){return e.replace(b,x)},w=function(e){var t=e.length,n=t%4,r=(t>0?u[e.charAt(0)]<<18:0)|(t>1?u[e.charAt(1)]<<12:0)|(t>2?u[e.charAt(2)]<<6:0)|(t>3?u[e.charAt(3)]:0),i=[c(r>>>16),c(r>>>8&255),c(255&r)];return i.length-=[0,0,2,1][n],i.join("")},S=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,w)},T=function(e){return S(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},P=function(e){return k(S(e))},E=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(e){return P(E(e))};n.Uint8Array&&(_=function(e){return Uint8Array.from(T(E(e)),(function(e){return e.charCodeAt(0)}))});var I=function(){var e=n.Base64;return n.Base64=a,e};if(n.Base64={VERSION:o,atob:T,btoa:p,fromBase64:A,toBase64:g,utob:f,encode:g,encodeURI:m,btou:k,decode:A,noConflict:I,fromUint8Array:i,toUint8Array:_},"function"==typeof Object.defineProperty){var D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",D((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",D((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",D((function(){return g(this,!0)})))}}n.Meteor&&(Base64=n.Base64);e.exports?e.exports.Base64=n.Base64:(r=function(){return n.Base64}.apply(t,[]))===undefined||(e.exports=r);return{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this)}).call(this,n(237))},function(e,t,n){var r=n(581),i=n(582),a=n(420),o=n(583);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]},function(e,t,n){var r=n(29),i=n(287),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(i.call(a))},function(e,t,n){var r=n(91),i=n(317),a=n(153),o=n(87);e.exports=function(e,t){for(var n=i(t),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){"use strict";var r=n(81),i=n(31),a=n(176),o=n(225),s=n(200),u=n(89),c=n(189),l=Object.assign;e.exports=!l||i((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||a(l({},t)).join("")!=r}))?function(e,t){for(var n=u(e),i=arguments.length,l=1,d=o.f,f=s.f;i>l;)for(var h,p=c(arguments[l++]),v=d?a(p).concat(d(p)):a(p),y=v.length,g=0;y>g;)h=v[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:l},function(e,t,n){"use strict";var r=n(292).IteratorPrototype,i=n(161),a=n(173),o=n(165),s=n(177),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var r=n(28),i=n(29),a=n(175),o=n(106),s=n(270),u=n(236),c=n(188),l=n(72),d=n(31),f=n(234),h=n(165),p=n(252);e.exports=function(e,t,n,v,y){var g=i[e],m=g&&g.prototype,_=g,b=v?"set":"add",x={},k=function(e){var t=m[e];o(m,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?undefined:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof g||!(y||m.forEach&&!d((function(){(new g).entries().next()})))))_=n.getConstructor(t,e,v,b),s.REQUIRED=!0;else if(a(e,!0)){var w=new _,S=w[b](y?{}:-0,1)!=w,T=d((function(){w.has(1)})),P=f((function(e){new g(e)})),E=!y&&d((function(){for(var e=new g,t=5;t--;)e[b](t,t);return!e.has(-0)}));P||((_=t((function(t,n){c(t,_,e);var r=p(new g,t,_);return n!=undefined&&u(n,r[b],r,v),r}))).prototype=m,m.constructor=_),(T||E)&&(k("delete"),k("has"),v&&k("get")),(E||S)&&k(b),y&&m.clear&&delete m.clear}return x[e]=_,r({global:!0,forced:_!=g},x),h(_,e),y||n.setStrong(_,e,v),_}},function(e,t,n){var r=n(31);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var r=n(251),i=n(122);e.exports=function(e,t,n){if(r(t))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(i(e))}},function(e,t,n){var r=n(38)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){var r=n(259);e.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(196),i=n(285),a=n(646),o=n(786),s=n(348),u=n(441),c=n(794),l=n(647),d=n(260)("species"),f=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!l("slice")},{slice:function(e,t){var n,r,l,p=u(this),v=s(p.length),y=o(e,v),g=o(t===undefined?v:t,v);if(a(p)&&("function"!=typeof(n=p.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[d])&&(n=undefined):n=undefined,n===Array||n===undefined))return f.call(p,y,g);for(r=new(n===undefined?Array:n)(h(g-y,0)),l=0;y<g;y++,l++)y in p&&c(r,l,p[y]);return r.length=l,r}})},function(e,t,n){"use strict";(function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new P(i||[]);return r(o,"_invoke",{value:k(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==t&&n.call(m,o)&&(y=m);var _=v.prototype=h.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,s){var u=d(e[r],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e||""===e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return p.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function i(){for(;n.length;){var e=n.pop();if(e in t)return i.value=e,i.done=!1,i}return i.done=!0,i}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return Bn}));var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function d(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r["throw"](e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var p="4.0.0";function v(e,t){return new Promise((function(n){return setTimeout(n,e,t)}))}function y(){return v(0)}function g(e){return!!e&&"function"==typeof e.then}function m(e,t){try{var n=e();g(n)?n.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,n)}catch(e){t(!1,e)}}function _(e,t,n){return void 0===n&&(n=16),d(this,void 0,void 0,(function(){var r,i,a,o;return f(this,(function(s){switch(s.label){case 0:r=Array(e.length),i=Date.now(),a=0,s.label=1;case 1:return a<e.length?(r[a]=t(e[a],a),(o=Date.now())>=i+n?(i=o,[4,v(0)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++a,[3,1];case 4:return[2,r]}}))}))}function b(e){e.then(void 0,(function(){}))}function x(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function k(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function w(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function S(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function T(e,t){return[e[0]^t[0],e[1]^t[1]]}function P(e){return e=T(e,[0,e[0]>>>1]),e=T(e=k(e,[4283543511,3981806797]),[0,e[0]>>>1]),T(e=k(e,[3301882366,444984403]),[0,e[0]>>>1])}function E(e){return parseInt(e)}function A(e){return parseFloat(e)}function I(e,t){return"number"==typeof e&&isNaN(e)?t:e}function D(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function L(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function O(e,t,n){var r=Object.keys(e).filter((function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(n,e)})),i=_(r,(function(n){return function(e,t){var n=new Promise((function(n){var r=Date.now();m(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now()-r;if(!e[0])return n((function(){return{error:e[1],duration:i}}));var a=e[1];if(function(e){return"function"!=typeof e}(a))return n((function(){return{value:a,duration:i}}));n((function(){return new Promise((function(e){var t=Date.now();m(a,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=i+Date.now()-t;if(!n[0])return e({error:n[1],duration:a});e({value:n[1],duration:a})}))}))}))}))}));return b(n),function(){return n.then((function(e){return e()}))}}(e[n],t)}));return b(i),function(){return d(this,void 0,void 0,(function(){var e,t,n,a;return f(this,(function(o){switch(o.label){case 0:return[4,i];case 1:return[4,_(o.sent(),(function(e){var t=e();return b(t),t}))];case 2:return e=o.sent(),[4,Promise.all(e)];case 3:for(t=o.sent(),n={},a=0;a<r.length;++a)n[r[a]]=t[a];return[2,n]}}))}))}}function R(){var e=window,t=navigator;return D(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function C(){var e=window,t=navigator;return D(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function M(){var e=window,t=navigator;return D(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function B(){var e=window;return D(["safari"in e,!("ongestureend"in e),!("TouchEvent"in e),!("orientation"in e),"HTMLElement"in e&&!("autocapitalize"in HTMLElement.prototype),"Document"in e&&"pointerLockElement"in Document.prototype])>=4}function N(){var e,t,n=window;return D(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function F(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function q(e){var t=new Error(e);return t.name=e,t}function j(e,t,n){var r,i,a;return void 0===n&&(n=50),d(this,void 0,void 0,(function(){var o,s;return f(this,(function(u){switch(u.label){case 0:o=document,u.label=1;case 1:return o.body?[3,3]:[4,v(n)];case 2:return u.sent(),[3,1];case 3:s=o.createElement("iframe"),u.label=4;case 4:return u.trys.push([4,,10,11]),[4,new Promise((function(e,n){var r=!1,i=function(){r=!0,e()};s.onload=i,s.onerror=function(e){r=!0,n(e)};var a=s.style;a.setProperty("display","block","important"),a.position="absolute",a.top="0",a.left="0",a.visibility="hidden",t&&"srcdoc"in s?s.srcdoc=t:s.src="about:blank",o.body.appendChild(s),function u(){var e,t;r||("complete"===(null===(t=null===(e=s.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(u,10))}()}))];case 5:u.sent(),u.label=6;case 6:return(null===(i=null===(r=s.contentWindow)||void 0===r?void 0:r.document)||void 0===i?void 0:i.body)?[3,8]:[4,v(n)];case 7:return u.sent(),[3,6];case 8:return[4,e(s,s.contentWindow)];case 9:return[2,u.sent()];case 10:return null===(a=s.parentNode)||void 0===a||a.removeChild(s),[7];case 11:return[2]}}))}))}var U=["monospace","sans-serif","serif"],V=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function H(e){return e.toDataURL()}var z,G;function W(){var e=screen;return[I(A(e.availTop),null),I(A(e.width)-A(e.availWidth)-I(A(e.availLeft),0),null),I(A(e.height)-A(e.availHeight)-I(A(e.availTop),0),null),I(A(e.availLeft),null)]}function K(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function $(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function Y(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function Q(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function J(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function X(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var Z=Math,ee=function(){return 0},te={"default":[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},ne=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),re=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),ie=["FRAGMENT_SHADER","VERTEX_SHADER"],ae=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],oe="WEBGL_debug_renderer_info";function se(e){if(e.webgl)return e.webgl.context;var t,n=document.createElement("canvas");n.addEventListener("webglCreateContextError",(function(){return t=void 0}));for(var r=0,i=["webgl","experimental-webgl"];r<i.length;r++){var a=i[r];try{t=n.getContext(a)}catch(e){}if(t)break}return e.webgl={context:t},t}function ue(e,t,n){var r=e.getShaderPrecisionFormat(e[t],e[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function ce(e){return Object.keys(e.__proto__).filter(le)}function le(e){return"string"==typeof e&&!e.match(/[^A-Z0-9_x]/)}function de(){return N()}function fe(e){return"function"==typeof e.getParameter}var he={screenFrame:function(){var e=this,t=function(){var e=this;return void 0===G&&function t(){var e=W();K(e)?G=setTimeout(t,2500):(z=e,G=void 0)}(),function(){return d(e,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return K(e=W())?z?[2,h([],z,!0)]:(n=document).fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement?[4,F()]:[3,2]:[3,2];case 1:t.sent(),e=W(),t.label=2;case 2:return K(e)||(z=e),[2,e]}var n}))}))}}();return function(){return d(e,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:L(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))C()&&D([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var i=t.languages;i&&n.push(i.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return I(A(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return I(E(e),null)},n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return I(E(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,i=(r=(new Date).getFullYear(),-Math.max(A(new Date(r,0,1).getTimezoneOffset()),A(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(i>=0?"+":"").concat(Math.abs(i))},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&M()&&!B()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return D(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},s44:function(){function e(e){return matchMedia("(prefers-color-scheme: ".concat(e,")")).matches}return e("dark")?{s:0,v:!0}:e("light")?{s:0,v:!1}:{s:-1,v:null}},fonts:function(){var e=this;return j((function(t,n){var r=n.document;return d(e,void 0,void 0,(function(){var e,t,n,i,a,o,s,u,c,l,d;return f(this,(function(f){switch(f.label){case 0:return(e=r.body).style.fontSize="48px",(t=r.createElement("div")).style.setProperty("visibility","hidden","important"),n={},i={},a=function(e){var n=r.createElement("span"),i=n.style;return i.position="absolute",i.top="0",i.left="0",i.fontFamily=e,n.textContent="mmMwWLliI0O&1",t.appendChild(n),n},o=function(e,t){return a("'".concat(e,"',").concat(t))},s=function(){for(var e={},t=function(t){e[t]=U.map((function(e){return o(t,e)}))},n=0,r=V;n<r.length;n++)t(r[n]);return e},u=function(e){return U.some((function(t,r){return e[r].offsetWidth!==n[t]||e[r].offsetHeight!==i[t]}))},c=U.map(a),l=s(),e.appendChild(t),[4,y()];case 1:for(f.sent(),d=0;d<U.length;d++)n[U[d]]=c[d].offsetWidth,i[U[d]]=c[d].offsetHeight;return[2,V.filter((function(e){return u(l[e])}))]}}))}))}))},fontPreferences:function(){return function(e,t){return void 0===t&&(t=4e3),j((function(e,n){var r=n.document,i=r.body,a=i.style;a.width="".concat(t,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",C()?i.style.zoom="".concat(1/n.devicePixelRatio):M()&&(i.style.zoom="reset");var o=r.createElement("div");return o.textContent=h([],Array(t/20<<0),!0).map((function(){return"word"})).join(" "),i.appendChild(o),function(e,t){for(var n={},r={},i=0,a=Object.keys(te);i<a.length;i++){var o=a[i],s=te[o],u=s[0],c=void 0===u?{}:u,l=s[1],d=void 0===l?"mmMwWLliI0fiflO&1":l,f=e.createElement("span");f.textContent=d,f.style.whiteSpace="nowrap";for(var h=0,p=Object.keys(c);h<p.length;h++){var v=p[h],y=c[v];void 0!==y&&(f.style[v]=y)}n[o]=f,t.appendChild(e.createElement("br")),t.appendChild(f)}for(var g=0,m=Object.keys(te);g<m.length;g++)r[o=m[g]]=n[o].getBoundingClientRect().width;return r}(r,i)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}()},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(M()&&!B()&&!function(){var e=window;return D(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var i=n.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.25,r.connect(i),i.connect(n.destination),r.start(0);var a=function(e){var t=function(){},n=new Promise((function(n,r){var i=!1,a=0,o=0;e.oncomplete=function(e){return n(e.renderedBuffer)};var s=function(){setTimeout((function(){return r(q("timeout"))}),Math.min(500,o+5e3-Date.now()))};(function u(){try{var t=e.startRendering();switch(g(t)&&b(t),e.state){case"running":o=Date.now(),i&&s();break;case"suspended":document.hidden||a++,i&&a>=3?r(q("suspended")):setTimeout(u,500)}}catch(e){r(e)}})(),t=function(){i||(i=!0,o>0&&s())}}));return[n,t]}(n),o=a[0],s=a[1],u=o.then((function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return b(u),function(){return s(),u}},canvas:function(){return d(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,s;return f(this,(function(u){switch(u.label){case 0:return e=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),i=r[0],a=r[1],function(e,t){return!(!t||!e.toDataURL)}(i,a)?[3,1]:(t=n="unsupported",[3,5]);case 1:return e=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(a),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(i,a),[4,y()];case 2:return u.sent(),o=H(i),s=H(i),o===s?[3,3]:(t=n="unstable",[3,5]);case 3:return n=o,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var i=r[n],a=i[0],o=i[1],s=i[2];t.fillStyle=a,t.beginPath(),t.arc(o,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(i,a),[4,y()];case 4:u.sent(),t=H(i),u.label=5;case 5:return[2,{winding:e,geometry:t,text:n}]}}))}))},sessionStorage:function(){try{return!!window.sessionStorage}catch(r){return!0}},localStorage:function(){try{return!!window.localStorage}catch(r){return!0}},indexedDB:function(){var e,t;if(!(R()||(e=window,t=navigator,D(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!R())))try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var i=[],a=0;a<r.length;++a){var o=r[a];i.push({type:o.type,suffixes:o.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:i})}}return t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=E(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],i=window[r];i&&"object"===o(i)&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}},invertedColors:function(){return!!$("inverted")||!$("none")&&void 0},forcedColors:function(){return!!Y("active")||!Y("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return Q("no-preference")?0:Q("high")||Q("more")?1:Q("low")||Q("less")?-1:Q("forced")?10:void 0},reducedMotion:function(){return!!J("reduce")||!J("no-preference")&&void 0},hdr:function(){return!!X("high")||!X("standard")&&void 0},math:function(){var e,t=Z.acos||ee,n=Z.acosh||ee,r=Z.asin||ee,i=Z.asinh||ee,a=Z.atanh||ee,o=Z.atan||ee,s=Z.sin||ee,u=Z.sinh||ee,c=Z.cos||ee,l=Z.cosh||ee,d=Z.tan||ee,f=Z.tanh||ee,h=Z.exp||ee,p=Z.expm1||ee,v=Z.log1p||ee;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,Z.log(e+Z.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:i(1),asinhPf:Z.log(1+Z.sqrt(2)),atanh:a(.5),atanhPf:Z.log(3)/2,atan:o(.5),sin:s(-1e300),sinh:u(1),sinhPf:Z.exp(1)-1/Z.exp(1)/2,cos:c(10.000000000123),cosh:l(1),coshPf:(Z.exp(1)+1/Z.exp(1))/2,tan:d(-1e300),tanh:f(1),tanhPf:(Z.exp(2)-1)/(Z.exp(2)+1),exp:h(1),expm1:p(1),expm1Pf:Z.exp(1)-1,log1p:v(10),log1pPf:Z.log(11),powPI:Z.pow(Z.PI,-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]},applePay:function(){var e=window.ApplePaySession;if("function"!=typeof(null==e?void 0:e.canMakePayments))return-1;try{return e.canMakePayments()?1:0}catch(e){return function(e){if(e instanceof Error){if("InvalidAccessError"===e.name){if(/\bfrom\b.*\binsecure\b/i.test(e.message))return-2;if(/\bdifferent\b.*\borigin\b.*top.level\b.*\bframe\b/i.test(e.message))return-3}if("SecurityError"===e.name&&/\bthird.party iframes?.*\bnot.allowed\b/i.test(e.message))return-3}throw e}(e)}},privateClickMeasurement:function(){var e,t=document.createElement("a"),n=null!==(e=t.attributionSourceId)&&void 0!==e?e:t.attributionsourceid;return void 0===n?void 0:String(n)},webGlBasics:function(e){var t,n,r,i,a,o,s=se(e.cache);if(!s)return-1;if(!fe(s))return-2;var u=de()?null:s.getExtension(oe);return{version:(null===(t=s.getParameter(s.VERSION))||void 0===t?void 0:t.toString())||"",vendor:(null===(n=s.getParameter(s.VENDOR))||void 0===n?void 0:n.toString())||"",vendorUnmasked:u?null===(r=s.getParameter(u.UNMASKED_VENDOR_WEBGL))||void 0===r?void 0:r.toString():"",renderer:(null===(i=s.getParameter(s.RENDERER))||void 0===i?void 0:i.toString())||"",rendererUnmasked:u?null===(a=s.getParameter(u.UNMASKED_RENDERER_WEBGL))||void 0===a?void 0:a.toString():"",shadingLanguageVersion:(null===(o=s.getParameter(s.SHADING_LANGUAGE_VERSION))||void 0===o?void 0:o.toString())||""}},webGlExtensions:function(e){var t=se(e.cache);if(!t)return-1;if(!fe(t))return-2;var n=t.getSupportedExtensions(),r=t.getContextAttributes(),i=[],a=[],o=[],s=[];if(r)for(var u=0,c=Object.keys(r);u<c.length;u++){var l=c[u];i.push("".concat(l,"=").concat(r[l]))}for(var d=0,f=ce(t);d<f.length;d++){var h=t[b=f[d]];a.push("".concat(b,"=").concat(h).concat(ne.has(h)?"=".concat(t.getParameter(h)):""))}if(n)for(var p=0,v=n;p<v.length;p++){var y=v[p];if(y!==oe||!de()){var g=t.getExtension(y);if(g)for(var m=0,_=ce(g);m<_.length;m++){var b;h=g[b=_[m]],o.push("".concat(b,"=").concat(h).concat(re.has(h)?"=".concat(t.getParameter(h)):""))}}}for(var x=0,k=ie;x<k.length;x++)for(var w=k[x],S=0,T=ae;S<T.length;S++){var P=T[S],E=ue(t,w,P);s.push("".concat(w,".").concat(P,"=").concat(E.join(",")))}return o.sort(),a.sort(),{contextAttributes:i,parameters:a,shaderPrecisions:s,extensions:n,extensionParameters:o}},s24:function(){return{s:0,v:eval.toString().length}},s59:ke(xe),s60:ke((function(){var e=window,t=navigator;return Se(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!xe()})),s61:ke(be),s62:ke((function(){var e=window,t=navigator;return Se(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4})),s63:ke((function(){var e=window;return Se(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3})),s64:ke(_e),s65:ke((function(){var e=be(),t=_e();if(!e&&!t)return!1;var n=window;return Se(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2})),s68:ke((function(){var e=window;return function(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}([!("PushManager"in e),!("AudioBuffer"in e),!("RTCPeerConnection"in e),!("geolocation"in navigator),!("ServiceWorker"in e)])>=3})),s72:function(){var e=navigator.webdriver;return null==e?{s:-1,v:null}:{s:0,v:e}},s123:me((function(){var e=navigator.productSub;if(void 0===e)throw new ge(-1,"navigator.productSub is undefined");return e})),s133:me((function(){if(void 0===window.external)throw new ge(-1,"window.external is undefined");var e=window.external;if("function"!=typeof e.toString)throw new ge(-2,"window.external.toString is not a function");return e.toString()})),s136:me((function(){if(void 0===navigator.mimeTypes)throw new ge(-1,"navigator.mimeTypes is undefined");for(var e=navigator.mimeTypes,t=Object.getPrototypeOf(e)===MimeTypeArray.prototype,n=0;n<e.length;n++)t&&(t=Object.getPrototypeOf(e[n])===MimeType.prototype);return t})),s148:me((function(){if(void 0===Function.prototype.bind)throw new ge(-2,"Function.prototype.bind is undefined");return Function.prototype.bind.toString()})),s149:me((function(){if(void 0===window.process)throw new ge(-1,"window.process is undefined");return window.process})),s102:function(){return{s:0,v:!(!navigator.userAgentData||"object"!=o(navigator.userAgentData))}},s120:function(){try{throw"a"}catch(r){try{return r.toSource(),{s:0,v:!0}}catch(r){return{s:0,v:!1}}}},s146:function(){try{return objectToInspect,{s:0,v:!0}}catch(r){return{s:0,v:!1}}},s127:function(){var e,t=Object.getOwnPropertyNames(window.document);return(e="function"!=typeof window.String.prototype.match?{s:0,v:pe(t,50,63)}:{s:0,v:pe(t.filter((function(e){return null!=e.match(ve)})),50,63)}).v instanceof Array&&(e.v=e.v.filter((function(e){if(e&&e[0])return"_"!=e[0]}))),e},s128:function(){var e={s:0,v:pe(Object.getOwnPropertyNames(Object.getPrototypeOf(window.navigator)),100,63)};return e.v instanceof Array&&(e.v=e.v.sort()),e},s130:function(){return{s:0,v:["undefined"==typeof SourceBuffer?"undefined":o(SourceBuffer),"undefined"==typeof SourceBufferList?"undefined":o(SourceBufferList)]}},s132:function(){return void 0===window.close?{s:-1,v:null}:{s:0,v:window.close.toString()}},s135:function(){return void 0===navigator.mimeTypes?{s:-1,v:null}:void 0===navigator.mimeTypes.length?{s:-3,v:null}:{s:0,v:navigator.mimeTypes.length}},s139:function(){return"undefined"==typeof CSS?{s:-1,v:null}:{s:0,v:CSS.supports("backdrop-filter","blur(2px)")}},s142:function(){if("function"!=typeof window.matchMedia)return{s:-2,v:null};var e=window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)");return void 0===e.matches?{s:-1,v:null}:{s:0,v:e.matches}},s144:function(){if("function"!=typeof window.SharedArrayBuffer)return{s:-2,v:null};var e=new window.SharedArrayBuffer(1);return void 0===e.byteLength?{s:-1,v:null}:{s:0,v:e.byteLength}},s145:function(){return{s:0,v:(e=window.navigator,t=["webkitPersistentStorage","connectionSpeed"],Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((function(n,r){if(t.indexOf(r)<0){var i=e[r];"function"==typeof i&&void 0!==i.name&&n.push(i.name)}return n}),[]))};var e,t},ua:function(){return navigator.userAgent.replace(/\d/g,"")}};function pe(e,t,n){return e.slice(0,t).map((function(e){return function(e,t,n){return void 0===n&&(n="..."),e.length<=t?e:"".concat(e.slice(0,Math.max(0,t-n.length))).concat(n)}(e,n)}))}var ve=/(^(.{0,5})$)|(^.*(-|_|\$|[jJ][sS]|[uU]ser|[sS]cript|[iI]nit|[dD]river|[aA]uto|[aA]gent|[sS]end|[lL]oad|[dD]ev|[cC]all|[bB]..f|[pP]rint|[kK]it|ium|[aA]rray|[pP]romise|[sS]ymbol|[cC]reate|[cC]onst).*$)|(^([A-Z_])*$)|(^([a-z-]){0,9}$)/,ye=function(e,t){try{ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}}catch(t){console.log(222),console.log(t)}return ye(e,t)},ge=function(e){function t(n,r){var i=e.call(this,r)||this;return i.state=n,i.name="BotdError",Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ye(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function me(e){var t=function(e){return{s:0,v:e}},n=function(e){if(e instanceof ge)return{s:e.state,v:null};throw e};return function(){try{var r=e();return function(e){return!!e&&"function"==typeof e.then}(r)?r.then(t,n):t(r)}catch(e){return n(e)}}}function _e(){var e,t,n=window;return Se(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function be(){var e=window,t=navigator;return Se(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function xe(){var e=window,t=navigator;return Se(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function ke(e){return function(e,t){var n=function(e){return function(e){return"function"!=typeof e}(e)?t(e):function(){var n=e();return we(n)?n.then(t):t(n)}};return function(t){var r=e(t);return we(r)?r.then(n):n(r)}}(e,(function(e){return{s:0,v:e}}))}function we(e){return!!e&&"function"==typeof e.then}function Se(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function Te(e){var t=function(e){if(function(){var e=C(),t=N();if(!e&&!t)return!1;var n=window;return D(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}())return.4;if(M())return B()?.5:.3;var t="value"in e.platform?e.platform.value:"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}(e),n=function(e){return L(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(n))}}function Pe(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?l({name:(n=t).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):t;var n,r}),2)}function Ee(e){return function(e,t){t=t||0;var n,r=(e=e||"").length%16,i=e.length-r,a=[0,t],o=[0,t],s=[0,0],u=[0,0],c=[2277735313,289559509],l=[1291169091,658871167];for(n=0;n<i;n+=16)s=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],u=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],s=w(s=k(s,c),31),a=x(a=w(a=T(a,s=k(s,l)),27),o),a=x(k(a,[0,5]),[0,1390208809]),u=w(u=k(u,l),33),o=x(o=w(o=T(o,u=k(u,c)),31),a),o=x(k(o,[0,5]),[0,944331445]);switch(s=[0,0],u=[0,0],r){case 15:u=T(u,S([0,e.charCodeAt(n+14)],48));case 14:u=T(u,S([0,e.charCodeAt(n+13)],40));case 13:u=T(u,S([0,e.charCodeAt(n+12)],32));case 12:u=T(u,S([0,e.charCodeAt(n+11)],24));case 11:u=T(u,S([0,e.charCodeAt(n+10)],16));case 10:u=T(u,S([0,e.charCodeAt(n+9)],8));case 9:u=k(u=T(u,[0,e.charCodeAt(n+8)]),l),o=T(o,u=k(u=w(u,33),c));case 8:s=T(s,S([0,e.charCodeAt(n+7)],56));case 7:s=T(s,S([0,e.charCodeAt(n+6)],48));case 6:s=T(s,S([0,e.charCodeAt(n+5)],40));case 5:s=T(s,S([0,e.charCodeAt(n+4)],32));case 4:s=T(s,S([0,e.charCodeAt(n+3)],24));case 3:s=T(s,S([0,e.charCodeAt(n+2)],16));case 2:s=T(s,S([0,e.charCodeAt(n+1)],8));case 1:s=k(s=T(s,[0,e.charCodeAt(n)]),c),a=T(a,s=k(s=w(s,31),l))}return a=x(a=T(a,[0,e.length]),o=T(o,[0,e.length])),o=x(o,a),a=x(a=P(a),o=P(o)),o=x(o,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var i=r[n],a=e[i],o="error"in a?"error":JSON.stringify(a.value);t+="".concat(t?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(o)}return t}(e))}function Ae(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise((function(e){return n.call(window,(function(){return e()}),{timeout:t})})):v(Math.min(e,t))}(e,2*e)}function Ie(e,t){var n=Date.now();return{get:function(r){return d(this,void 0,void 0,(function(){var i,a,o;return f(this,(function(s){switch(s.label){case 0:return i=Date.now(),[4,e()];case 1:return a=s.sent(),o=function(e){var t;return{get visitorId(){return void 0===t&&(t=Ee(this.components)),t},set visitorId(e){t=e},confidence:Te(e),components:e,version:p}}(a),(t||(null==r?void 0:r.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(o.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(i-n,"\nvisitorId: ").concat(o.visitorId,"\ncomponents: ").concat(Pe(a),"\n```")),[2,o]}}))}))}}}var De={load:function(e){var t=void 0===e?{}:e,n=t.delayFallback,r=t.debug,i=t.monitoring,a=void 0===i||i;return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return a&&function(){try{if(window.__fpjs_d_m||Math.random()>=.001)return;var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(p,"/npm-monitoring"),!0),e.send()}catch(e){}}(),[4,Ae(n)];case 1:return e.sent(),[2,Ie(O(he,{cache:{},debug:r},[]),r)]}}))}))},hashComponents:Ee,componentsToDebugString:Pe},Le="4.0.0";function Oe(e,t){return new Promise((function(n){return setTimeout(n,e,t)}))}function Re(){return Oe(0)}function Ce(e){return!!e&&"function"==typeof e.then}function Me(e,t){try{var n=e();Ce(n)?n.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,n)}catch(e){t(!1,e)}}function Be(e,t,n){return void 0===n&&(n=16),d(this,void 0,void 0,(function(){var r,i,a,o;return f(this,(function(s){switch(s.label){case 0:r=Array(e.length),i=Date.now(),a=0,s.label=1;case 1:return a<e.length?(r[a]=t(e[a],a),(o=Date.now())>=i+n?(i=o,[4,Oe(0)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++a,[3,1];case 4:return[2,r]}}))}))}function Ne(e){e.then(void 0,(function(){}))}function Fe(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function qe(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function je(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function Ue(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function Ve(e,t){return[e[0]^t[0],e[1]^t[1]]}function He(e){return e=Ve(e,[0,e[0]>>>1]),e=Ve(e=qe(e,[4283543511,3981806797]),[0,e[0]>>>1]),Ve(e=qe(e,[3301882366,444984403]),[0,e[0]>>>1])}function ze(e){return parseInt(e)}function Ge(e){return parseFloat(e)}function We(e,t){return"number"==typeof e&&isNaN(e)?t:e}function Ke(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function $e(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function Ye(e,t,n){var r=Object.keys(e).filter((function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(n,e)})),i=Be(r,(function(n){return function(e,t){var n=new Promise((function(n){var r=Date.now();Me(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now()-r;if(!e[0])return n((function(){return{error:e[1],duration:i}}));var a=e[1];if(function(e){return"function"!=typeof e}(a))return n((function(){return{value:a,duration:i}}));n((function(){return new Promise((function(e){var t=Date.now();Me(a,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=i+Date.now()-t;if(!n[0])return e({error:n[1],duration:a});e({value:n[1],duration:a})}))}))}))}))}));return Ne(n),function(){return n.then((function(e){return e()}))}}(e[n],t)}));return Ne(i),function(){return d(this,void 0,void 0,(function(){var e,t,n,a;return f(this,(function(o){switch(o.label){case 0:return[4,i];case 1:return[4,Be(o.sent(),(function(e){var t=e();return Ne(t),t}))];case 2:return e=o.sent(),[4,Promise.all(e)];case 3:for(t=o.sent(),n={},a=0;a<r.length;++a)n[r[a]]=t[a];return[2,n]}}))}))}}function Qe(){var e=window,t=navigator;return Ke(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Je(){var e=window,t=navigator;return Ke(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Xe(){var e=window,t=navigator;return Ke(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function Ze(){var e=window;return Ke(["safari"in e,!("ongestureend"in e),!("TouchEvent"in e),!("orientation"in e),"HTMLElement"in e&&!("autocapitalize"in HTMLElement.prototype),"Document"in e&&"pointerLockElement"in Document.prototype])>=4}function et(){var e,t,n=window;return Ke(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function tt(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function nt(e){var t=new Error(e);return t.name=e,t}function rt(e,t,n){var r,i,a;return void 0===n&&(n=50),d(this,void 0,void 0,(function(){var o,s;return f(this,(function(u){switch(u.label){case 0:o=document,u.label=1;case 1:return o.body?[3,3]:[4,Oe(n)];case 2:return u.sent(),[3,1];case 3:s=o.createElement("iframe"),u.label=4;case 4:return u.trys.push([4,,10,11]),[4,new Promise((function(e,n){var r=!1,i=function(){r=!0,e()};s.onload=i,s.onerror=function(e){r=!0,n(e)};var a=s.style;a.setProperty("display","block","important"),a.position="absolute",a.top="0",a.left="0",a.visibility="hidden",t&&"srcdoc"in s?s.srcdoc=t:s.src="about:blank",o.body.appendChild(s),function u(){var e,t;r||("complete"===(null===(t=null===(e=s.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(u,10))}()}))];case 5:u.sent(),u.label=6;case 6:return(null===(i=null===(r=s.contentWindow)||void 0===r?void 0:r.document)||void 0===i?void 0:i.body)?[3,8]:[4,Oe(n)];case 7:return u.sent(),[3,6];case 8:return[4,e(s,s.contentWindow)];case 9:return[2,u.sent()];case 10:return null===(a=s.parentNode)||void 0===a||a.removeChild(s),[7];case 11:return[2]}}))}))}var it=["monospace","sans-serif","serif"],at=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function ot(e){return e.toDataURL()}var st,ut;function ct(){var e=screen;return[We(Ge(e.availTop),null),We(Ge(e.width)-Ge(e.availWidth)-We(Ge(e.availLeft),0),null),We(Ge(e.height)-Ge(e.availHeight)-We(Ge(e.availTop),0),null),We(Ge(e.availLeft),null)]}function lt(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function dt(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function ft(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function ht(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function pt(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function vt(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var yt=Math,gt=function(){return 0},mt={"default":[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},_t=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),bt=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),xt=["FRAGMENT_SHADER","VERTEX_SHADER"],kt=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],wt="WEBGL_debug_renderer_info";function St(e){if(e.webgl)return e.webgl.context;var t,n=document.createElement("canvas");n.addEventListener("webglCreateContextError",(function(){return t=void 0}));for(var r=0,i=["webgl","experimental-webgl"];r<i.length;r++){var a=i[r];try{t=n.getContext(a)}catch(e){}if(t)break}return e.webgl={context:t},t}function Tt(e,t,n){var r=e.getShaderPrecisionFormat(e[t],e[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function Pt(e){return Object.keys(e.__proto__).filter(Et)}function Et(e){return"string"==typeof e&&!e.match(/[^A-Z0-9_x]/)}function At(){return et()}function It(e){return"function"==typeof e.getParameter}var Dt={screenFrame:function(){var e=this,t=function(){var e=this;return void 0===ut&&function t(){var e=ct();lt(e)?ut=setTimeout(t,2500):(st=e,ut=void 0)}(),function(){return d(e,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return lt(e=ct())?st?[2,h([],st,!0)]:(n=document).fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement?[4,tt()]:[3,2]:[3,2];case 1:t.sent(),e=ct(),t.label=2;case 2:return lt(e)||(st=e),[2,e]}var n}))}))}}();return function(){return d(e,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:$e(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))Je()&&Ke([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var i=t.languages;i&&n.push(i.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return We(Ge(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return We(ze(e),null)},n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return We(ze(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,i=(r=(new Date).getFullYear(),-Math.max(Ge(new Date(r,0,1).getTimezoneOffset()),Ge(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(i>=0?"+":"").concat(Math.abs(i))},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&Xe()&&!Ze()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return Ke(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},s44:function(){function e(e){return matchMedia("(prefers-color-scheme: ".concat(e,")")).matches}return e("dark")?{s:0,v:!0}:e("light")?{s:0,v:!1}:{s:-1,v:null}},fonts:function(){var e=this;return rt((function(t,n){var r=n.document;return d(e,void 0,void 0,(function(){var e,t,n,i,a,o,s,u,c,l,d;return f(this,(function(f){switch(f.label){case 0:return(e=r.body).style.fontSize="48px",(t=r.createElement("div")).style.setProperty("visibility","hidden","important"),n={},i={},a=function(e){var n=r.createElement("span"),i=n.style;return i.position="absolute",i.top="0",i.left="0",i.fontFamily=e,n.textContent="mmMwWLliI0O&1",t.appendChild(n),n},o=function(e,t){return a("'".concat(e,"',").concat(t))},s=function(){for(var e={},t=function(t){e[t]=it.map((function(e){return o(t,e)}))},n=0,r=at;n<r.length;n++)t(r[n]);return e},u=function(e){return it.some((function(t,r){return e[r].offsetWidth!==n[t]||e[r].offsetHeight!==i[t]}))},c=it.map(a),l=s(),e.appendChild(t),[4,Re()];case 1:for(f.sent(),d=0;d<it.length;d++)n[it[d]]=c[d].offsetWidth,i[it[d]]=c[d].offsetHeight;return[2,at.filter((function(e){return u(l[e])}))]}}))}))}))},fontPreferences:function(){return function(e,t){return void 0===t&&(t=4e3),rt((function(e,n){var r=n.document,i=r.body,a=i.style;a.width="".concat(t,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",Je()?i.style.zoom="".concat(1/n.devicePixelRatio):Xe()&&(i.style.zoom="reset");var o=r.createElement("div");return o.textContent=h([],Array(t/20<<0),!0).map((function(){return"word"})).join(" "),i.appendChild(o),function(e,t){for(var n={},r={},i=0,a=Object.keys(mt);i<a.length;i++){var o=a[i],s=mt[o],u=s[0],c=void 0===u?{}:u,l=s[1],d=void 0===l?"mmMwWLliI0fiflO&1":l,f=e.createElement("span");f.textContent=d,f.style.whiteSpace="nowrap";for(var h=0,p=Object.keys(c);h<p.length;h++){var v=p[h],y=c[v];void 0!==y&&(f.style[v]=y)}n[o]=f,t.appendChild(e.createElement("br")),t.appendChild(f)}for(var g=0,m=Object.keys(mt);g<m.length;g++)r[o=m[g]]=n[o].getBoundingClientRect().width;return r}(r,i)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}()},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(Xe()&&!Ze()&&!function(){var e=window;return Ke(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var i=n.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.25,r.connect(i),i.connect(n.destination),r.start(0);var a=function(e){var t=function(){},n=new Promise((function(n,r){var i=!1,a=0,o=0;e.oncomplete=function(e){return n(e.renderedBuffer)};var s=function(){setTimeout((function(){return r(nt("timeout"))}),Math.min(500,o+5e3-Date.now()))};(function u(){try{var t=e.startRendering();switch(Ce(t)&&Ne(t),e.state){case"running":o=Date.now(),i&&s();break;case"suspended":document.hidden||a++,i&&a>=3?r(nt("suspended")):setTimeout(u,500)}}catch(e){r(e)}})(),t=function(){i||(i=!0,o>0&&s())}}));return[n,t]}(n),o=a[0],s=a[1],u=o.then((function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return Ne(u),function(){return s(),u}},canvas:function(){return d(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,s;return f(this,(function(u){switch(u.label){case 0:return e=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),i=r[0],a=r[1],function(e,t){return!(!t||!e.toDataURL)}(i,a)?[3,1]:(t=n="unsupported",[3,5]);case 1:return e=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(a),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(i,a),[4,Re()];case 2:return u.sent(),o=ot(i),s=ot(i),o===s?[3,3]:(t=n="unstable",[3,5]);case 3:return n=o,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var i=r[n],a=i[0],o=i[1],s=i[2];t.fillStyle=a,t.beginPath(),t.arc(o,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(i,a),[4,Re()];case 4:u.sent(),t=ot(i),u.label=5;case 5:return[2,{winding:e,geometry:t,text:n}]}}))}))},sessionStorage:function(){try{return!!window.sessionStorage}catch(r){return!0}},localStorage:function(){try{return!!window.localStorage}catch(r){return!0}},indexedDB:function(){var e,t;if(!(Qe()||(e=window,t=navigator,Ke(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!Qe())))try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var i=[],a=0;a<r.length;++a){var o=r[a];i.push({type:o.type,suffixes:o.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:i})}}return t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=ze(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],i=window[r];i&&"object"===o(i)&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}},invertedColors:function(){return!!dt("inverted")||!dt("none")&&void 0},forcedColors:function(){return!!ft("active")||!ft("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return ht("no-preference")?0:ht("high")||ht("more")?1:ht("low")||ht("less")?-1:ht("forced")?10:void 0},reducedMotion:function(){return!!pt("reduce")||!pt("no-preference")&&void 0},hdr:function(){return!!vt("high")||!vt("standard")&&void 0},math:function(){var e,t=yt.acos||gt,n=yt.acosh||gt,r=yt.asin||gt,i=yt.asinh||gt,a=yt.atanh||gt,o=yt.atan||gt,s=yt.sin||gt,u=yt.sinh||gt,c=yt.cos||gt,l=yt.cosh||gt,d=yt.tan||gt,f=yt.tanh||gt,h=yt.exp||gt,p=yt.expm1||gt,v=yt.log1p||gt;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,yt.log(e+yt.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:i(1),asinhPf:yt.log(1+yt.sqrt(2)),atanh:a(.5),atanhPf:yt.log(3)/2,atan:o(.5),sin:s(-1e300),sinh:u(1),sinhPf:yt.exp(1)-1/yt.exp(1)/2,cos:c(10.000000000123),cosh:l(1),coshPf:(yt.exp(1)+1/yt.exp(1))/2,tan:d(-1e300),tanh:f(1),tanhPf:(yt.exp(2)-1)/(yt.exp(2)+1),exp:h(1),expm1:p(1),expm1Pf:yt.exp(1)-1,log1p:v(10),log1pPf:yt.log(11),powPI:yt.pow(yt.PI,-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]},applePay:function(){var e=window.ApplePaySession;if("function"!=typeof(null==e?void 0:e.canMakePayments))return-1;try{return e.canMakePayments()?1:0}catch(e){return function(e){if(e instanceof Error){if("InvalidAccessError"===e.name){if(/\bfrom\b.*\binsecure\b/i.test(e.message))return-2;if(/\bdifferent\b.*\borigin\b.*top.level\b.*\bframe\b/i.test(e.message))return-3}if("SecurityError"===e.name&&/\bthird.party iframes?.*\bnot.allowed\b/i.test(e.message))return-3}throw e}(e)}},privateClickMeasurement:function(){var e,t=document.createElement("a"),n=null!==(e=t.attributionSourceId)&&void 0!==e?e:t.attributionsourceid;return void 0===n?void 0:String(n)},webGlBasics:function(e){var t,n,r,i,a,o,s=St(e.cache);if(!s)return-1;if(!It(s))return-2;var u=At()?null:s.getExtension(wt);return{version:(null===(t=s.getParameter(s.VERSION))||void 0===t?void 0:t.toString())||"",vendor:(null===(n=s.getParameter(s.VENDOR))||void 0===n?void 0:n.toString())||"",vendorUnmasked:u?null===(r=s.getParameter(u.UNMASKED_VENDOR_WEBGL))||void 0===r?void 0:r.toString():"",renderer:(null===(i=s.getParameter(s.RENDERER))||void 0===i?void 0:i.toString())||"",rendererUnmasked:u?null===(a=s.getParameter(u.UNMASKED_RENDERER_WEBGL))||void 0===a?void 0:a.toString():"",shadingLanguageVersion:(null===(o=s.getParameter(s.SHADING_LANGUAGE_VERSION))||void 0===o?void 0:o.toString())||""}},webGlExtensions:function(e){var t=St(e.cache);if(!t)return-1;if(!It(t))return-2;var n=t.getSupportedExtensions(),r=t.getContextAttributes(),i=[],a=[],o=[],s=[];if(r)for(var u=0,c=Object.keys(r);u<c.length;u++){var l=c[u];i.push("".concat(l,"=").concat(r[l]))}for(var d=0,f=Pt(t);d<f.length;d++){var h=t[b=f[d]];a.push("".concat(b,"=").concat(h).concat(_t.has(h)?"=".concat(t.getParameter(h)):""))}if(n)for(var p=0,v=n;p<v.length;p++){var y=v[p];if(y!==wt||!At()){var g=t.getExtension(y);if(g)for(var m=0,_=Pt(g);m<_.length;m++){var b;h=g[b=_[m]],o.push("".concat(b,"=").concat(h).concat(bt.has(h)?"=".concat(t.getParameter(h)):""))}}}for(var x=0,k=xt;x<k.length;x++)for(var w=k[x],S=0,T=kt;S<T.length;S++){var P=T[S],E=Tt(t,w,P);s.push("".concat(w,".").concat(P,"=").concat(E.join(",")))}return o.sort(),a.sort(),{contextAttributes:i,parameters:a,shaderPrecisions:s,extensions:n,extensionParameters:o}},s24:function(){return{s:0,v:eval.toString().length}},s59:qt(Ft),s60:qt((function(){var e=window,t=navigator;return Ut(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!Ft()})),s61:qt(Nt),s62:qt((function(){var e=window,t=navigator;return Ut(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4})),s63:qt((function(){var e=window;return Ut(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3})),s64:qt(Bt),s65:qt((function(){var e=Nt(),t=Bt();if(!e&&!t)return!1;var n=window;return Ut(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2})),s68:qt((function(){var e=window;return function(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}([!("PushManager"in e),!("AudioBuffer"in e),!("RTCPeerConnection"in e),!("geolocation"in navigator),!("ServiceWorker"in e)])>=3})),s72:function(){var e=navigator.webdriver;return null==e?{s:-1,v:null}:{s:0,v:e}},s123:Mt((function(){var e=navigator.productSub;if(void 0===e)throw new Ct(-1,"navigator.productSub is undefined");return e})),s133:Mt((function(){if(void 0===window.external)throw new Ct(-1,"window.external is undefined");var e=window.external;if("function"!=typeof e.toString)throw new Ct(-2,"window.external.toString is not a function");return e.toString()})),s136:Mt((function(){if(void 0===navigator.mimeTypes)throw new Ct(-1,"navigator.mimeTypes is undefined");for(var e=navigator.mimeTypes,t=Object.getPrototypeOf(e)===MimeTypeArray.prototype,n=0;n<e.length;n++)t&&(t=Object.getPrototypeOf(e[n])===MimeType.prototype);return t})),s148:Mt((function(){if(void 0===Function.prototype.bind)throw new Ct(-2,"Function.prototype.bind is undefined");return Function.prototype.bind.toString()})),s149:Mt((function(){if(void 0===window.process)throw new Ct(-1,"window.process is undefined");return window.process})),s102:function(){return{s:0,v:!(!navigator.userAgentData||"object"!=o(navigator.userAgentData))}},s120:function(){try{throw"a"}catch(r){try{return r.toSource(),{s:0,v:!0}}catch(r){return{s:0,v:!1}}}},s146:function(){try{return objectToInspect,{s:0,v:!0}}catch(r){return{s:0,v:!1}}},s127:function(){var e,t=Object.getOwnPropertyNames(window.document);return(e="function"!=typeof window.String.prototype.match?{s:0,v:Lt(t,50,63)}:{s:0,v:Lt(t.filter((function(e){return null!=e.match(Ot)})),50,63)}).v instanceof Array&&(e.v=e.v.filter((function(e){if(e&&e[0])return"_"!=e[0]}))),e},s128:function(){var e={s:0,v:Lt(Object.getOwnPropertyNames(Object.getPrototypeOf(window.navigator)),100,63)};return e.v instanceof Array&&(e.v=e.v.sort()),e},s130:function(){return{s:0,v:["undefined"==typeof SourceBuffer?"undefined":o(SourceBuffer),"undefined"==typeof SourceBufferList?"undefined":o(SourceBufferList)]}},s132:function(){return void 0===window.close?{s:-1,v:null}:{s:0,v:window.close.toString()}},s135:function(){return void 0===navigator.mimeTypes?{s:-1,v:null}:void 0===navigator.mimeTypes.length?{s:-3,v:null}:{s:0,v:navigator.mimeTypes.length}},s139:function(){return"undefined"==typeof CSS?{s:-1,v:null}:{s:0,v:CSS.supports("backdrop-filter","blur(2px)")}},s142:function(){if("function"!=typeof window.matchMedia)return{s:-2,v:null};var e=window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)");return void 0===e.matches?{s:-1,v:null}:{s:0,v:e.matches}},s144:function(){if("function"!=typeof window.SharedArrayBuffer)return{s:-2,v:null};var e=new window.SharedArrayBuffer(1);return void 0===e.byteLength?{s:-1,v:null}:{s:0,v:e.byteLength}},s145:function(){return{s:0,v:(e=window.navigator,t=["webkitPersistentStorage","connectionSpeed"],Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((function(n,r){if(t.indexOf(r)<0){var i=e[r];"function"==typeof i&&void 0!==i.name&&n.push(i.name)}return n}),[]))};var e,t},ua:function(){return navigator.userAgent}};function Lt(e,t,n){return e.slice(0,t).map((function(e){return function(e,t,n){return void 0===n&&(n="..."),e.length<=t?e:"".concat(e.slice(0,Math.max(0,t-n.length))).concat(n)}(e,n)}))}var Ot=/(^(.{0,5})$)|(^.*(-|_|\$|[jJ][sS]|[uU]ser|[sS]cript|[iI]nit|[dD]river|[aA]uto|[aA]gent|[sS]end|[lL]oad|[dD]ev|[cC]all|[bB]..f|[pP]rint|[kK]it|ium|[aA]rray|[pP]romise|[sS]ymbol|[cC]reate|[cC]onst).*$)|(^([A-Z_])*$)|(^([a-z-]){0,9}$)/,Rt=function(e,t){try{Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}}catch(t){console.log(222),console.log(t)}return Rt(e,t)},Ct=function(e){function t(n,r){var i=e.call(this,r)||this;return i.state=n,i.name="BotdError",Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function Mt(e){var t=function(e){return{s:0,v:e}},n=function(e){if(e instanceof Ct)return{s:e.state,v:null};throw e};return function(){try{var r=e();return function(e){return!!e&&"function"==typeof e.then}(r)?r.then(t,n):t(r)}catch(e){return n(e)}}}function Bt(){var e,t,n=window;return Ut(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function Nt(){var e=window,t=navigator;return Ut(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Ft(){var e=window,t=navigator;return Ut(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function qt(e){return function(e,t){var n=function(e){return function(e){return"function"!=typeof e}(e)?t(e):function(){var n=e();return jt(n)?n.then(t):t(n)}};return function(t){var r=e(t);return jt(r)?r.then(n):n(r)}}(e,(function(e){return{s:0,v:e}}))}function jt(e){return!!e&&"function"==typeof e.then}function Ut(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function Vt(e){var t=function(e){if(function(){var e=Je(),t=et();if(!e&&!t)return!1;var n=window;return Ke(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}())return.4;if(Xe())return Ze()?.5:.3;var t="value"in e.platform?e.platform.value:"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}(e),n=function(e){return $e(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(n))}}function Ht(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?l({name:(n=t).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):t;var n,r}),2)}function zt(e){return function(e,t){t=t||0;var n,r=(e=e||"").length%16,i=e.length-r,a=[0,t],o=[0,t],s=[0,0],u=[0,0],c=[2277735313,289559509],l=[1291169091,658871167];for(n=0;n<i;n+=16)s=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],u=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],s=je(s=qe(s,c),31),a=Fe(a=je(a=Ve(a,s=qe(s,l)),27),o),a=Fe(qe(a,[0,5]),[0,1390208809]),u=je(u=qe(u,l),33),o=Fe(o=je(o=Ve(o,u=qe(u,c)),31),a),o=Fe(qe(o,[0,5]),[0,944331445]);switch(s=[0,0],u=[0,0],r){case 15:u=Ve(u,Ue([0,e.charCodeAt(n+14)],48));case 14:u=Ve(u,Ue([0,e.charCodeAt(n+13)],40));case 13:u=Ve(u,Ue([0,e.charCodeAt(n+12)],32));case 12:u=Ve(u,Ue([0,e.charCodeAt(n+11)],24));case 11:u=Ve(u,Ue([0,e.charCodeAt(n+10)],16));case 10:u=Ve(u,Ue([0,e.charCodeAt(n+9)],8));case 9:u=qe(u=Ve(u,[0,e.charCodeAt(n+8)]),l),o=Ve(o,u=qe(u=je(u,33),c));case 8:s=Ve(s,Ue([0,e.charCodeAt(n+7)],56));case 7:s=Ve(s,Ue([0,e.charCodeAt(n+6)],48));case 6:s=Ve(s,Ue([0,e.charCodeAt(n+5)],40));case 5:s=Ve(s,Ue([0,e.charCodeAt(n+4)],32));case 4:s=Ve(s,Ue([0,e.charCodeAt(n+3)],24));case 3:s=Ve(s,Ue([0,e.charCodeAt(n+2)],16));case 2:s=Ve(s,Ue([0,e.charCodeAt(n+1)],8));case 1:s=qe(s=Ve(s,[0,e.charCodeAt(n)]),c),a=Ve(a,s=qe(s=je(s,31),l))}return a=Fe(a=Ve(a,[0,e.length]),o=Ve(o,[0,e.length])),o=Fe(o,a),a=Fe(a=He(a),o=He(o)),o=Fe(o,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var i=r[n],a=e[i],o="error"in a?"error":JSON.stringify(a.value);t+="".concat(t?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(o)}return t}(e))}function Gt(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise((function(e){return n.call(window,(function(){return e()}),{timeout:t})})):Oe(Math.min(e,t))}(e,2*e)}function Wt(e,t){var n=Date.now();return{get:function(r){return d(this,void 0,void 0,(function(){var i,a,o;return f(this,(function(s){switch(s.label){case 0:return i=Date.now(),[4,e()];case 1:return a=s.sent(),o=function(e){var t;return{get visitorId(){return void 0===t&&(t=zt(this.components)),t},set visitorId(e){t=e},confidence:Vt(e),components:e,version:Le}}(a),(t||(null==r?void 0:r.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(o.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(i-n,"\nvisitorId: ").concat(o.visitorId,"\ncomponents: ").concat(Ht(a),"\n```")),[2,o]}}))}))}}}var Kt={load:function(e){var t=void 0===e?{}:e,n=t.delayFallback,r=t.debug,i=t.monitoring,a=void 0===i||i;return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return a&&function(){try{if(window.__fpjs_d_m||Math.random()>=.001)return;var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(Le,"/npm-monitoring"),!0),e.send()}catch(e){}}(),[4,Gt(n)];case 1:return e.sent(),[2,Wt(Ye(Dt,{cache:{},debug:r},[]),r)]}}))}))},hashComponents:zt,componentsToDebugString:Ht},$t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e||{},Yt="URLSearchParams"in $t,Qt="Symbol"in $t&&"iterator"in Symbol,Jt="FileReader"in $t&&"Blob"in $t&&function(){try{return new Blob,!0}catch(r){return!1}}(),Xt="FormData"in $t,Zt="ArrayBuffer"in $t;if(Zt)var en=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],tn=ArrayBuffer.isView||function(e){return e&&en.indexOf(Object.prototype.toString.call(e))>-1};function nn(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function rn(e){return"string"!=typeof e&&(e=String(e)),e}function an(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Qt&&(t[Symbol.iterator]=function(){return t}),t}function on(e){this.map={},e instanceof on?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function sn(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function un(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function cn(e){var t=new FileReader,n=un(t);return t.readAsArrayBuffer(e),n}function ln(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function dn(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Jt&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Xt&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Yt&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Zt&&Jt&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=ln(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Zt&&(ArrayBuffer.prototype.isPrototypeOf(e)||tn(e))?this._bodyArrayBuffer=ln(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Yt&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Jt&&(this.blob=function(){var e=sn(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return sn(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(Jt)return this.blob().then(cn);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,a=sn(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,n=un(t=new FileReader),i=(r=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Xt&&(this.formData=function(){return this.text().then(pn)}),this.json=function(){return this.text().then(JSON.parse)},this}on.prototype.append=function(e,t){e=nn(e),t=rn(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},on.prototype["delete"]=function(e){delete this.map[nn(e)]},on.prototype.get=function(e){return e=nn(e),this.has(e)?this.map[e]:null},on.prototype.has=function(e){return this.map.hasOwnProperty(nn(e))},on.prototype.set=function(e,t){this.map[nn(e)]=rn(t)},on.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},on.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),an(e)},on.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),an(e)},on.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),an(e)},Qt&&(on.prototype[Symbol.iterator]=on.prototype.entries);var fn=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function hn(e,t){if(!(this instanceof hn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof hn){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new on(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new on(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),fn.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in $t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function pn(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function vn(e,t){if(!(this instanceof vn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new on(t.headers),this.url=t.url||"",this._initBody(e)}hn.prototype.clone=function(){return new hn(this,{body:this._bodyInit})},dn.call(hn.prototype),dn.call(vn.prototype),vn.prototype.clone=function(){return new vn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new on(this.headers),url:this.url})},vn.error=function(){var e=new vn(null,{status:200,statusText:""});return e.status=0,e.type="error",e};var yn=[301,302,303,307,308];vn.redirect=function(e,t){if(-1===yn.indexOf(t))throw new RangeError("Invalid status code");return new vn(null,{status:t,headers:{location:e}})};var gn=$t.DOMException;try{new gn}catch(r){(gn=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),gn.prototype.constructor=gn}function mn(e,t){return new Promise((function(n,r){var i=new hn(e,t);if(i.signal&&i.signal.aborted)return r(new gn("Aborted","AbortError"));var a=new XMLHttpRequest;function s(){a.abort()}if(a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new on,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(e){console.warn("Response "+e.message)}}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new vn(i,r))}),0)},a.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){r(new gn("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&$t.location.href?$t.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(Jt?a.responseType="blob":Zt&&(a.responseType="arraybuffer")),t&&"object"===o(t.headers)&&!(t.headers instanceof on||$t.Headers&&t.headers instanceof $t.Headers)){var u=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){u.push(nn(e)),a.setRequestHeader(e,rn(t.headers[e]))})),i.headers.forEach((function(e,t){-1===u.indexOf(t)&&a.setRequestHeader(t,e)}))}else i.headers.forEach((function(e,t){a.setRequestHeader(t,e)}));i.signal&&(i.signal.addEventListener("abort",s),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",s)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}mn.polyfill=!0,$t.fetch||($t.fetch=mn,$t.Headers=on,$t.Request=hn,$t.Response=vn);var _n=500;function bn(e){var t=document&&document.cookie;if(!e||!t)return null;var n=new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")).exec(t);return(n=n&&n[2])?decodeURIComponent(n):null}function xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&!/[\<\>]/.test(t)){var r=n.expires,i=void 0===r?0:r,a=n.domain,o=void 0===a?"":a,s=n.path,u=void 0===s?"":s,c=n.secure,l=void 0===c?"":c,d=n.session,f=void 0!==d&&d;i=new Date(Date.now()+i).toGMTString();var h="".concat(e,"=").concat(encodeURIComponent(t)).concat(u?"; path=".concat(u):"").concat(i&&!f?"; expires=".concat(i):"").concat(o?"; domain=".concat(o):"").concat(l?"; secure=".concat(l):"");try{document.cookie=h}catch(e){return h}}}function kn(e){return wn.apply(this,arguments)}function wn(){return(wn=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(n=bn("QC208")),!n){e.next=3;break}return e.abrupt("return",{visitorId:n});case 3:return e.next=5,Kt.load();case 5:return r=e.sent,e.next=8,r.get();case 8:return i=e.sent,o=i.visitorId,t||(xn("QC208",o,{path:"/",domain:"iqiyi.com",expires:63072e7}),window.localStorage&&window.localStorage.setItem("fp3_components",JSON.stringify(i.components))),console.log("fingerprint-test-result:",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(n=bn("QC206")),!n){e.next=3;break}return e.abrupt("return",{visitorId:n});case 3:return e.next=5,De.load();case 5:return r=e.sent,e.next=8,r.get();case 8:return i=e.sent,o=i.visitorId,t||(xn("QC206",o,{path:"/",domain:"iqiyi.com",expires:63072e7}),window.localStorage&&window.localStorage.setItem("fp1_components",JSON.stringify(i.components))),console.log("fingerprint-test-result:",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(e,t){return En.apply(this,arguments)}function En(){return(En=u(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("浏览器指纹：u1不能为空"),e.abrupt("return",{});case 3:if(n||(r=bn("QC207")),!r){e.next=6;break}return e.abrupt("return",{data:r});case 6:if(window.AbortController instanceof Function){e.next=8;break}return e.abrupt("return",{});case 8:return i=new AbortController,o=setTimeout((function(){i.abort(),console.log("fingerprint-test-abort"),(new Image).src="https://msg.qy.net/qos?t=9&p1=1_10_101&ct=pcw_common&rpage=fingerprint_fp2_timeout&abtest=timeout"}),_n),e.prev=10,e.next=13,mn("https://mpaas.iqiyi.com/h5/main/common/fp?body=".concat(t,"&mbd=dbm"),{signal:i?i.signal:void 0});case 13:return e.next=15,e.sent.json();case 15:return s=e.sent,clearTimeout(o),(new Image).src="https://msg.qy.net/qos?t=9&p1=1_10_101&ct=pcw_common&rpage=fingerprint_fp2_timeout&abtest=ok",console.log("fingerprint-test-u2:",s),s.data&&!n&&(xn("QC207",s.data,{path:"/",domain:"iqiyi.com",expires:63072e7}),window.localStorage&&s.context&&s.context.datas&&window.localStorage.setItem("fp2_components",JSON.stringify(s.context.datas))),e.abrupt("return",s);case 24:return e.prev=24,e.t0=e["catch"](10),console.log("fingerprint-test-e:",e.t0),e.abrupt("return",{});case 28:case"end":return e.stop()}}),e,null,[[10,24]])})))).apply(this,arguments)}function An(e){if(e){if(window.XMLHttpRequest){var t=new XMLHttpRequest;t.open("POST","https://msg.qy.net/qos",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded");var n=i({t:9,ct:"pcw_common",p1:"1_10_101",u:bn("QC005")},e);t.send("msg=".concat(JSON.stringify(n)))}}else console.error("post params参数is required!")}function In(e,t,n){var r,a,o,s=e&&e.components,u=t&&t.context&&t.context.datas,c=n&&n.components;if(window.localStorage)try{r=JSON.parse(localStorage.getItem("fp1_components")),a=JSON.parse(localStorage.getItem("fp2_components")),o=JSON.parse(localStorage.getItem("fp3_components"))}catch(e){console.error("fingerprintjs: JSON.parse(localStorage.getItem('fpN_components')) 出错了")}var l=[];return s&&r&&(s=i({},s),r=i({},r),console.log("oldFp1Components, components:",r,s),Object.keys(r).forEach((function(e){var t=r[e],n=s[e];t&&delete t.duration,n&&delete n.duration,(t=JSON.stringify(t))!==(n=JSON.stringify(n))&&l.push(e),delete r[e],delete s[e]})),l=l.concat(Object.keys(s))),a&&u&&(a=i({},a),u=i({},u),Object.keys(a).forEach((function(e){var t=a[e],n=u[e];(t=JSON.stringify(t))!==(n=JSON.stringify(n))&&l.push(e),delete a[e],delete u[e]})),l=l.concat(Object.keys(u))),o&&c&&(c=i({},c),o=i({},o),console.log("oldFp3Components, fp3Components:",o,c),Object.keys(o).forEach((function(e){var t=o[e],n=c[e];t&&delete t.duration,n&&delete n.duration,(t=JSON.stringify(t))!==(n=JSON.stringify(n))&&l.push(e),delete o[e],delete c[e]})),l=l.concat(Object.keys(c))),console.log("getUnstableComponents result:",l),l.length?l.join(","):void 0}function Dn(e,t){return Ln.apply(this,arguments)}function Ln(){return(Ln=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(!0);case 2:return r=e.sent,e.next=5,Pn(r.visitorId,!0);case 5:i=e.sent,r.visitorId&&i.data&&(o=n===i.data,An({rpage:"fingerprint_fp2_stability_5241",ps2:n,ps3:i.data,abtest:o?"stable":"unstable",vfm:o?void 0:In(r,i),rfr:r.components,lrfr:i.context&&i.context.datas}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e,t){return Rn.apply(this,arguments)}function Rn(){return(Rn=u(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(!0);case 2:return r=e.sent,e.next=5,kn(!0);case 5:i=e.sent,console.log("fingerprint _sendFp3StabilityPingback:",r,i),r.visitorId&&i.visitorId&&(o=r.visitorId===t,s=i.visitorId===n,An({rpage:"fingerprint_fp3_stability_5241",u:bn("QC005"),aid:t,ps4:r.visitorId,diy_common:o?"stable":"unstable",diy_pca_qc005:o?void 0:In(r),lrfr:r.components,rfr:n,vfm:i.visitorId,abtest:s?"stable":"unstable",ps2:s?void 0:In(void 0,void 0,i),ps3:i.components}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(e,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=u(a().mark((function e(t,n){var r,i,o,s,u,c,l,d,f,h,p,v,y,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn();case 2:return r=e.sent,i=r.visitorId,o=r.components,s=void 0===o?{f__:"get from cookie"}:o,e.next=8,Pn(i);case 8:return u=e.sent,c=u.data,l=u.context,d=void 0===l?{datas:{f__:"get from cookie"}}:l,e.next=14,kn();case 14:return f=e.sent,h=f.visitorId,p=f.components||{f__:"get from cookie"},t&&An({rpage:"fingerprint_5241",rfr:s,lrfr:d.datas,ps2:i,ps3:c,abtest:h,u:bn("QC005")}),n&&(v=s.f__?i:void 0,y=d.datas.f__?c:void 0,g=p.f__?h:void 0,v&&y&&Dn(v,y),console.log("fingerprint fp1FromCookie, fp3FromCookie:",v,g,f),v&&g&&On(v,g)),e.abrupt("return",{u1:i,u2:c});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=u(a().mark((function e(t,n){var r,i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e,t){setTimeout(e,_n,{})})),i=Cn(t,n),e.next=4,Promise.race([r,i]);case 4:return o=e.sent,s=o.u1,u=o.u2,e.abrupt("return",{u1:s,u2:u});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"undefined"!=typeof window&&(xn("QC198",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC199",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC200",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC201",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC202",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC203",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC204",void 0,{path:"/",domain:"iqiyi.com",expires:0}),xn("QC205",void 0,{path:"/",domain:"iqiyi.com",expires:0}),window.localStorage&&(localStorage.removeItem("fp1"),localStorage.removeItem("fp2")))}).call(this,n(237))},function(e,t,n){"use strict";var r=n(89),i=n(172),a=n(77);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:undefined,n),u=o>2?arguments[2]:undefined,c=u===undefined?n:i(u,n);c>s;)t[s++]=e;return t}},,function(e,t,n){"use strict";var r=n(238),i={};i[n(38)("toStringTag")]="z",e.exports="[object z]"!==String(i)?function(){return"[object "+r(this)+"]"}:i.toString},function(e,t,n){"use strict";var r=n(141),i=n(72),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t,n){var r=n(123)["default"];e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(29),i=n(201),a=n(202),o=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==o(a+"08")||22!==o(a+"0x16");e.exports=u?function(e,t){var n=i(String(e),3);return o(n,t>>>0||(s.test(n)?16:10))}:o},function(e,t,n){var r=n(29),i=n(201),a=n(202),o=r.parseFloat,s=1/o(a+"-0")!=-Infinity;e.exports=s?function(e){var t=i(String(e),3),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){var r=n(112);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var r=n(117),i=n(122);e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==Infinity)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){var r=n(72),i=n(78);e.exports=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}},function(e,t,n){var r=n(246),i=n(29),a=function(e){return"function"==typeof e?e:undefined};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(28),i=n(31),a=n(89),o=n(223),s=n(290);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){"use strict";var r=n(139),i=n(174),a=r(0),o=i("forEach");e.exports=o?function(e){return a(this,e,arguments[1])}:[].forEach},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(L){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={};function y(){}function g(){}function m(){}var _={};u(_,a,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&r.call(x,a)&&(_=x);var k=m.prototype=y.prototype=Object.create(_);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=m,u(k,"constructor",m),u(m,"constructor",g),g.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(S.prototype),u(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r,i,a,o,s,u,c,l=n(29),d=n(153).f,f=n(112),h=n(293).set,p=n(294),v=l.MutationObserver||l.WebKitMutationObserver,y=l.process,g=l.Promise,m="process"==f(y),_=d(l,"queueMicrotask"),b=_&&_.value;b||(r=function(){var e,t;for(m&&(e=y.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():a=undefined,n}}a=undefined,e&&e.enter()},m?o=function(){y.nextTick(r)}:v&&!/(iphone|ipod|ipad).*applewebkit/i.test(p)?(s=!0,u=document.createTextNode(""),new v(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s}):g&&g.resolve?(c=g.resolve(undefined),o=function(){c.then(r)}):o=function(){h.call(l,r)}),e.exports=b||function(e){var t={fn:e,next:undefined};a&&(a.next=t),i||(i=t,o()),a=t}},function(e,t,n){var r=n(78),i=n(72),a=n(295);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(29);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){"use strict";var r=n(87).f,i=n(161),a=n(241),o=n(164),s=n(188),u=n(236),c=n(253),l=n(222),d=n(81),f=n(270).fastKey,h=n(143),p=h.set,v=h.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t),p(e,{type:t,index:i(null),first:undefined,last:undefined,size:0}),d||(e.size=0),r!=undefined&&u(r,e[c],e,n)})),h=v(t),y=function(e,t,n){var r,i,a=h(e),o=g(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:undefined,removed:!1},a.first||(a.first=o),r&&(r.next=o),d?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},g=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(l.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=undefined),delete t[n.index],n=n.next;e.first=e.last=undefined,d?e.size=0:this.size=0},"delete":function(e){var t=this,n=h(t),r=g(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),d?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:undefined,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),a(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),d&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),a=v(r);c(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:undefined})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=undefined,{value:undefined,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){var r=n(31),i=n(202);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n["return"]||n["return"]()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(28),i=n(77),a=n(361),o=n(362),s="startsWith",u="".startsWith;r({target:"String",proto:!0,forced:!o(s)},{startsWith:function(e){var t=a(this,e,s),n=i(Math.min(arguments.length>1?arguments[1]:undefined,t.length)),r=String(e);return u?u.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(123)["default"];function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new O(r||[]);return s(a,"_invoke",{value:A(e,n,o)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var v="suspendedStart",y="executing",g="completed",m={};function _(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(R([])));S&&S!==a&&o.call(S,c)&&(k=S);var T=x.prototype=_.prototype=Object.create(k);function P(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,s,u){var c=p(e[i],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function A(e,n,r){var i=v;return function(a,o){if(i===y)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=I(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var c=p(e,n,r);if("normal"===c.type){if(i=r.done?g:"suspendedYield",c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator["return"]&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=x,s(T,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,d,"GeneratorFunction")),e.prototype=Object.create(T),e},n.awrap=function(e){return{__await:e}},P(E.prototype),f(E.prototype,l,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new E(h(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(T),f(T,d,"Generator"),f(T,c,(function(){return this})),f(T,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function i(){for(;n.length;){var e=n.pop();if(e in t)return i.value=e,i.done=!1,i}return i.done=!0,i}},n.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},n}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){t.f=n(38)},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(300),i=n(99);e.exports="process"==r(i.process)},function(e,t,n){var r,i,a=n(99),o=n(507),s=a.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t){e.exports={}},function(e,t,n){var r=n(501),i=n(300),a=n(132)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),a))?n:o?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(92),i=n(300),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(265),i=n(148),a=n(325),o=function(e){return function(t,n,o){var s,u=r(t),c=i(u.length),l=a(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,n){var r=n(92),i=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(300);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(92),i=n(132),a=n(397),o=i("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports={}},function(e,t,n){var r=n(399),i=n(405),a=n(132)("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(264),i=n(158),a=n(132),o=n(147),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(147),i=n(99),a=n(402),o=n(434),s=n(158).f,u=n(324).f,c=n(523),l=n(432),d=n(515),f=n(204),h=n(92),p=n(254).set,v=n(407),y=n(132)("match"),g=i.RegExp,m=g.prototype,_=/a/g,b=/a/g,x=new g(_)!==_,k=d.UNSUPPORTED_Y;if(r&&a("RegExp",!x||k||h((function(){return b[y]=!1,g(_)!=_||g(b)==b||"/a/i"!=g(_,"i")})))){for(var w=function(e,t){var n,r=this instanceof w,i=c(e),a=t===undefined;if(!r&&i&&e.constructor===w&&a)return e;x?i&&!a&&(e=e.source):e instanceof w&&(a&&(t=l.call(e)),e=e.source),k&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=o(x?new g(e,t):g(e,t),r?this:m,w);return k&&n&&p(s,{sticky:n}),s},S=function(e){e in w||s(w,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},T=u(g),P=0;T.length>P;)S(T[P++]);m.constructor=w,w.prototype=m,f(i,"RegExp",w)}v("RegExp")},function(e,t,n){var r=n(363),i=n(347),a=n(635);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=n(354),p=n(86);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){u()(n,e);var t=v(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"push",value:function(e){for(var t,n,r,i,a,o=e.pts,s=e.dts,u=e.payload,c=0,l=0;c+5<u.length;)if(255===u[c]&&240==(246&u[c+1])){if(n=2*(1&~u[c+1]),t=(3&u[c+3])<<11|u[c+4]<<3|(224&u[c+5])>>5,a=9e4*(i=1024*(1+(3&u[c+6])))/h.a[(60&u[c+2])>>>2],r=c+t,u.byteLength<r)return;var d={pts:o+l*a,dts:s+l*a,sampleCount:i,audioObjectType:1+(u[c+2]>>>6&3),channelCount:(1&u[c+2])<<2|(192&u[c+3])>>>6,sampleRate:h.a[(60&u[c+2])>>>2],samplingFrequencyIndex:(60&u[c+2])>>>2,sampleSize:16,data:u.subarray(c+7+n,r)};if(this.emit("frame",d),u.byteLength===r)return u=undefined,void this.emit("done");l++,u=u.subarray(r)}else c++}}]),n}(p.EventEmitter)},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(495),i=n(496),a=n(320),o=n(497);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n(516);function r(e,t){var n=Object.getPrototypeOf(e);null!=n&&(t(n)||r(n,t))}function i(e,t){t(e)||r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67);function r(e){var t=e,n=t.byteLength,r=new Uint8Array(0);try{r=new Uint8Array(n)}catch(o){throw"epsb alloc mem error ".concat(n)}for(var i=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(r[i]=t[a],i++);return new Uint8Array(r.buffer,0,i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(8),i=n.n(r),a=n(9),o=n.n(a),s=n(3),u=n.n(s),c=n(4),l=n.n(c),d=n(5),f=n.n(d),h=(n(35),n(17),n(23),n(86)),p=(n(130),n(133),function(){function e(){l()(this,e),this.map_={}}return f()(e,[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,this.map_[t]);return e}},{key:"remove",value:function(e,t){var n=this.map_[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}]),e}()),v=function(){function e(t,n,r){l()(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener?this.target.addEventListener(n,r,!1):this.target.on&&this.target.on(n,r,!1)}return f()(e,[{key:"off",value:function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}]),e}();function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var i=u()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o()(this,n)}}var g=function(){function e(){l()(this,e),this.bindingMap_=new p}return f()(e,[{key:"destroy",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"on",value:function(e,t,n){if(this.bindingMap_){var r=new v(e,t,n);return this.bindingMap_.push(t,r),this}}},{key:"once",value:function(e,t,n){return this.on(e,t,function(r){this.off(e,t),n(r)}.bind(this))}},{key:"off",value:function(e,t){if(!this.bindingMap_)return this;for(var n=this.bindingMap_.get(t)||[],r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.off(),this.bindingMap_.remove(t,i))}return this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}},{key:"removeAll",value:function(){if(this.bindingMap_){for(var e=this.bindingMap_.getAll(),t=0;t<e.length;++t)e[t].off();this.bindingMap_.clear()}}}]),e}();h.EventEmitter,new h.EventEmitter},,,function(e,t,n){"use strict";var r=n(28),i=n(192),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(419);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(462);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(441),i=n(788),a=n(645),o=n(640),s=n(823),u="Array Iterator",c=o.set,l=o.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r=n(141),i=n(89),a=n(189),o=n(77);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=a(c),d=o(c.length),f=u?d-1:0,h=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=h;break}if(f+=h,u?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:d>f;f+=h)f in l&&(s=t(s,l[f],f,c));return s}},,,function(e,t,n){var r=n(28),i=n(461);r({target:"Array",stat:!0,forced:!n(234)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){var r=n(10);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(502),i=n(395),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,n){var r=n(588),i=n(511);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(323),i=n(158),a=n(299);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){"use strict";var r,i,a=n(432),o=n(515),s=RegExp.prototype.exec,u=String.prototype.replace,c=s,l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),d=o.UNSUPPORTED_Y||o.BROKEN_CARET,f=/()??/.exec("")[1]!==undefined;(l||f||d)&&(c=function(e){var t,n,r,i,o=this,c=d&&o.sticky,h=a.call(o),p=o.source,v=0,y=e;return c&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),y=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",y=" "+y,v++),n=new RegExp("^(?:"+p+")",h)),f&&(n=new RegExp("^"+p+"$(?!\\s)",h)),l&&(t=o.lastIndex),r=s.call(c?n:o,y),c?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:l&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),f&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)})),r}),e.exports=c},function(e,t,n){"use strict";var r=n(116);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(132)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},"return":function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},function(e,t,n){var r=n(145),i=n(342);e.exports=function(e,t,n){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(e,o),e}},function(e,t,n){var r=n(255),i="["+n(436)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\x0B\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var r=n(204);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";n(70);var r=n(204),i=n(92),a=n(132),o=n(431),s=n(215),u=a("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),d=a("replace"),f=!!/./[d]&&""===/./[d]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var p=a(e),v=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),y=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!y||"replace"===e&&(!c||!l||f)||"split"===e&&!h){var g=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===o?v&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=m[0],b=m[1];r(String.prototype,e,_),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(300),i=n(431);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(80),i=n(99),a=n(147),o=n(741),s=n(134),u=n(525),c=n(327),l=n(299),d=n(215),f=n(148),h=n(617),p=n(619),v=n(323),y=n(162),g=n(399),m=n(145),_=n(301),b=n(342),x=n(324).f,k=n(743),w=n(216).forEach,S=n(407),T=n(158),P=n(228),E=n(254),A=n(434),I=E.get,D=E.set,L=T.f,O=P.f,R=Math.round,C=i.RangeError,M=u.ArrayBuffer,B=u.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,q=s.TypedArray,j=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,H="BYTES_PER_ELEMENT",z="Wrong length",G=function(e,t){for(var n=0,r=t.length,i=new(U(e))(r);r>n;)i[n]=t[n++];return i},W=function(e,t){L(e,t,{get:function(){return I(this)[t]}})},K=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},$=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return $(e,t=v(t,!0))?l(2,e[t]):O(e,t)},Q=function(e,t,n){return!($(e,t=v(t,!0))&&m(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?L(e,t,n):(e[t]=n.value,e)};a?(N||(P.f=Y,T.f=Q,W(j,"buffer"),W(j,"byteOffset"),W(j,"byteLength"),W(j,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:Y,defineProperty:Q}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,l="set"+e,v=i[s],y=v,g=y&&y.prototype,T={},P=function(e,t){L(e,t,{get:function(){return function(e,t){var n=I(e);return n.view[u](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=I(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[l](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};N?o&&(y=t((function(e,t,n,r){return c(e,y,s),A(m(t)?K(t)?r!==undefined?new v(t,p(n,a),r):n!==undefined?new v(t,p(n,a)):new v(t):V(t)?G(y,t):k.call(y,t):new v(h(t)),e,y)})),b&&b(y,q),w(x(v),(function(e){e in y||d(y,e,v[e])})),y.prototype=g):(y=t((function(e,t,n,r){c(e,y,s);var i,o,u,l=0,d=0;if(m(t)){if(!K(t))return V(t)?G(y,t):k.call(y,t);i=t,d=p(n,a);var v=t.byteLength;if(r===undefined){if(v%a)throw C(z);if((o=v-d)<0)throw C(z)}else if((o=f(r)*a)+d>v)throw C(z);u=o/a}else u=h(t),i=new M(o=u*a);for(D(e,{buffer:i,byteOffset:d,byteLength:o,length:u,view:new B(i)});l<u;)P(e,l++)})),b&&b(y,q),g=y.prototype=_(j)),g.constructor!==y&&d(g,"constructor",y),F&&d(g,F,s),T[s]=y,r({global:!0,forced:y!=v,sham:!N},T),H in y||d(y,H,a),H in g||d(g,H,a),S(s)}):e.exports=function(){}},function(e,t,n){var r=n(636),i=n(462);e.exports=function(e){return r(i(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(219),i=n(638),a=n(409),o=n(346),s=n(784),u=n(810),c=n(640),l=c.get,d=c.enforce,f=String(u).split("toString");i("inspectSource",(function(e){return u.call(e)})),(e.exports=function(e,t,n,i){var u=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),d(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=n:a(e,t,n)):c?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u.call(this)}))},function(e,t,n){var r=n(219),i=n(828),a=n(422),o=n(409),s=n(260),u=s("iterator"),c=s("toStringTag"),l=a.values;for(var d in i){var f=r[d],h=f&&f.prototype;if(h){if(h[u]!==l)try{o(h,u,l)}catch(v){h[u]=l}if(h[c]||o(h,c,d),i[d])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(v){h[p]=a[p]}}}},function(e,t,n){"use strict";var r=n(196),i=n(537),a=n(785)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=i("indexOf");r({target:"Array",proto:!0,forced:s||u},{indexOf:function(e){return s?o.apply(this,arguments)||0:a(this,e,arguments[1])}})},function(e,t,n){var r=n(196),i=n(1050);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(414),u=n(102);var c=n(1013),l=0;function d(e,t){for(var n,r=8,i=8,a=0;a<t;a++)0!=i&&(n=c.a.readUEV(e,l),l+=n.bitLength,i=(r+n.value+256)%256),r=e[a]}var f=i()((function h(e){switch(o()(this,h),this.rawData=e,this.unit_type=31&e[0],this.unit_type){case 7:this.sps=function(e){l=0;var t,n,r,i,a,o,s=e[0],u=e[1],f=e[2],h=e.subarray(3),p=0,v=[1,1],y=1,g=0,m=0,_=!0,b=c.a.readUEV(h,l);if(l+=b.bitLength,100==s||110==s||122==s||244==s||44==s||83==s||86==s||118==s||128==s){var x=c.a.readUEV(h,l);l+=x.bitLength,3==(g=x.value)&&(l+=1);var k=c.a.readUEV(h,l);l+=k.bitLength;var w=c.a.readUEV(h,l);if(l+=w.bitLength,l+=1,p=c.a.readBit(h,l),l+=1,p)for(var S=0;S<(3!=x.value?8:12);S++){var T=c.a.readBit(h,l);l+=1,T&&d(h,S<6?16:64)}}var P=c.a.readUEV(h,l);l+=P.bitLength;var E=c.a.readUEV(h,l),A=E.value;if(l+=E.bitLength,0===A)t=c.a.readUEV(h,l),l+=t.bitLength;else if(1===A){l+=1,n=c.a.readSEV(h,l),l+=n.bitLength,r=c.a.readSEV(h,l),l+=r.bitLength,i=c.a.readUEV(h,l),l+=i.bitLength;for(var I,D=0;D<i.value;D++)I=c.a.readSEV(h,l),l+=I.bitLength}var L=c.a.readUEV(h,l);l+=L.bitLength,l+=1;var O=c.a.readUEV(h,l);l+=O.bitLength;var R=c.a.readUEV(h,l);l+=R.bitLength;var C=c.a.readBit(h,l);l+=1,C||(l+=1),l+=1;var M=c.a.readBit(h,l);l+=1;var B=0,N=0,F=0,q=0;if(M){var j=c.a.readUEV(h,l);l+=j.bitLength,B=j.value;var U=c.a.readUEV(h,l);l+=U.bitLength,N=U.value;var V=c.a.readUEV(h,l);l+=V.bitLength,F=V.value;var H=c.a.readUEV(h,l);l+=H.bitLength,q=H.value}var z=c.a.readBit(h,l);if(l+=1,z){var G=c.a.readBit(h,l);if(l+=1,G){var W=c.a.readByte(h,l);switch(l+=8,W){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:var K=c.a.readByte(h,l);l+=8;var $=c.a.readByte(h,l);l+=8;var Y=c.a.readByte(h,l);l+=8;var Q=c.a.readByte(h,l);l+=8,v=[K<<8|$,Y<<8|Q]}v&&(y=v[0]/v[1]),255===W&&(l+=16,l+=16)}var J=c.a.readBit(h,l);l+=1,J&&(l+=1);var X=c.a.readBit(h,l);if(l+=1,X){c.a.readBit(h,l,3),l+=3,l+=1;var Z=c.a.readBit(h,l);l+=1,Z&&(l+=24)}var ee=c.a.readBit(h,l);if(l+=1,ee){var te=c.a.readUEV(h,l);l+=te.bitLength;var ne=c.a.readUEV(h,l);l+=ne.bitLength}var re=c.a.readBit(h,l);l+=1,re&&(a=c.a.readBit(h,l,32),l+=32,o=c.a.readBit(h,l,32),l+=32,_=!!c.a.readBit(h,l),l+=1,m=o/(2*a))}return{payload:h,profile_idc:s,profile_compatibility:u,level_idc:f,chromaFormat:g,width:Math.ceil((16*(O.value+1)-2*B-2*N)*y),height:(2-C)*(R.value+1)*16-2*F-2*q,pixelRatio:v,fps:m,fixedFPS:_}}(Object(s.a)(e.subarray(1)));break;case 6:this.sei=function(e){var t=0,n=0,r=Object(u.d)(e);do{t+=e[r.index]}while(255==Object(u.c)(r,8));do{n+=e[r.index]}while(255==Object(u.c)(r,8));var i=r.index+16,a=i+n;return{type:t,size:n,payload:e.subarray(i,a)}}(Object(s.a)(e.subarray(1)))}}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=!1,i=null;function a(e){r?i=e:e()}function o(e){var t=r?null:s;r=!0;try{e()}finally{t&&t()}}function s(){if(r=!1,i){var e=i;i=null,e()}}},function(e,t,n){var r=n(592),i=n(751);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports["default"]=e.exports,e.exports.__esModule=!0),a.apply(null,arguments)}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(453),i=n(454),a=n(455),o=new(n(680).a);o.register("TS_FMP4",r.b),o.register("FLV_FMP4",i.b),o.register("MP4_FMP4",a.b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(17),n(115),n(39)),u=function(){function e(t){i()(this,e),this.bytesArray=[],s.a.assert(!!t,"BmffTypes should be specified to InitSegment or MediaSegment"),this.type=t}return o()(e,[{key:"byteLength",get:function(){var e=0;return this.bytesArray.forEach((function(t){e+=t.byteLength})),e}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return ne})),n.d(t,"a",(function(){return ie}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(113),u=n.n(s),c=n(41),l=n.n(c),d=n(8),f=n.n(d),h=n(9),p=n.n(h),v=n(3),y=n.n(v),g=(n(121),n(35),n(154),n(133),n(679)),m=n(39),_=n(1016),b=n(1017),x=n(160),k=n(1015),w=n(653),S=n(307),T=n(1012),P=n(535),E=o()((function ae(e){i()(this,ae);var t,n=0,r=((15&e[1])<<8|e[2])-4-5;for(this.pmtTable=[];n<r;n+=4)if(0==(t=e[n+8]<<8|e[n+9])){var a=(31&e[10+n])<<8|e[11+n];m.a.log("packet->network_PID %0x /n/n",a)}else this.pmtTable.push({programNum:t,program_map_PID:(31&e[10+n])<<8|e[11+n]})})),A=o()((function oe(e){i()(this,oe);var t=(15&e[1])<<8|e[2],n=(15&e[10])<<8|e[11];if(!(n<0)){if(n>2)for(var r=0;r<n;){r+=e[13+r]}var a=12+n,o=t-n-9-4,s=a+o;if(a>=s)m.a.warn("es_section_pos < es_section_end ".concat(a,", ").concat(s));else{this.pes_table=[];for(var u=0;u<o;){var c=a+u,l=e[c],d=8191&(e[c+1]<<8|e[c+2]),f=4095&(e[c+3]<<8|e[c+4]);this.pes_table.push({streamType:l,PID:d}),u+=f+5}}}})),I=function(){function e(t){i()(this,e),this.pat_table=[],this.pes_streams=[]}return o()(e,[{key:"currentProgramPID",get:function(){for(var e=[],t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return e.length>0?e[0]:-1}},{key:"tracks",get:function(){return this.pes_streams}},{key:"reset",value:function(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"parse",value:function(e){0===e.PID?this._parsePat(e):1===e.PID||2===e.PID||3<=e.PID&&e.PID<=15||17===e.PID||e.PID===this.currentProgramPID&&this._parsePmt(e)}},{key:"findTrack",value:function(e){for(var t=null,n=this.pes_streams,r=0;r<n.length;r++)if(n[r].id===e){t=n[r];break}return t}},{key:"_parsePat",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new E(t),i=0;i<r.pmtTable.length;i++)this._add_pid_to_pmt(r.pmtTable[i].programNum,r.pmtTable[i].program_map_PID);return r}},{key:"_add_pid_to_pmt",value:function(e,t){var n=this.pat_table;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e)||n.push({id:e,pid:t})}},{key:"_parsePmt",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new A(t),i=0;i<r.pes_table.length;i++)this._add_pes_stream(r.pes_table[i],r);return r}},{key:"_add_pes_stream",value:function(e,t){var n=this.pes_streams;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e.PID)||n.push({id:e.PID,stream_type:e.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}}]),e}(),D=(n(217),n(138));function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var O=function(e){f()(n,e);var t=L(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this)).videoTrack=null,o.audioTrack=null,o.captionTrack=null,o.tracksGot=!1,o.context=e,o.PSI=r,o.options=a,o}return o()(n,[{key:"push",value:function(e){for(var t=this.context.config.resetInitSegment,n=e,r=!1,i=!1,a=0;a<n.length;a++)switch(n[a].type){case"video":r=!0;break;case"audio":i=!0}if(t&&!this.tracksGot&&this.PSI.tracks.length>0){this.tracksGot=!0;var o=this.PSI.tracks.length,s=r,u=i;2===o&&(s=u=!0),this.context.emit("info",{tracksExpected:o,audio:u,video:s})}for(var c,l=0;l<n.length;l++)switch((c=n[l]).type){case"video":this._complexVideo(c);break;case"audio":this._complexAudio(c);break;default:m.a.warn("unsupported track type ".concat(c.type))}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null,this.tracksGot=!1}},{key:"_complexVideo",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=e[0][0].dts,t.firstPTS=e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstDTS=e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}))}}]),n}(D.a),R=n(410),C=n(624);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var B=function(e){f()(n,e);var t=M(n);function n(e){var r;return i()(this,n),(r=t.call(this)).PSI=e,r.trackId=null,r.codec=new R.a,r.codec.on("frame",(function(e){r.frames.push(e),r.frames.byteLength+=e.data.byteLength,r.frames.trackId=r.trackId})),r.newFrames_(),r}return o()(n,[{key:"push",value:function(e){15===e.stream_type&&(this.trackId=e.pid,this.codec.push({dts:e.pes.DTS,pts:e.pes.PTS,payload:e.pes.data_byte}))}},{key:"flush",value:function(){if(this.frames.length>0){var e=this.frames.length,t=this.frames[0],n=this.frames[e-1],r=n.sampleRate*n.sampleCount/9e4;this.frames.firstDTS=t.dts,this.frames.firstPTS=t.pts,this.frames.duration=1===e?r:r+(n.pts-t.pts),this.updateTrackMeta_(t),this.emit("data",this.frames),this.reset(),this.emit("done")}}},{key:"reset",value:function(){this.trackId=null,this.newFrames_()}},{key:"newFrames_",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}},{key:"updateTrackMeta_",value:function(e){var t=this.PSI.findTrack(this.trackId),n=Object(C.a)(e.audioObjectType,e.samplingFrequencyIndex,e.channelCount);t.config=n.config,t.sampleRate=n.sampleRate,t.inputTimeScale=t.inputTimeScale||t.timescale,t.timescale=n.sampleRate,t.channelCount=n.channelCount,t.codec=n.codec,t.realCodec=n.realCodec,t.isAAC=!0}}]),n}(D.a),N=n(261),F=n(447),q=n(625);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var U=function(e){f()(n,e);var t=j(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.a,this.codec.on("nalu",(function(t){if(t instanceof F.a){if(7===t.unit_type){var n=e.PSI.findTrack(e.trackId),r=Object(q.a)(t.sps);n.codec=r.codec,n.width=t.sps.width,n.height=t.sps.height,n.profileIdc=t.sps.profile_idc,n.profileCompatibility=t.sps.profile_compatibility,n.levelIdc=t.sps.level_idc,n.pixelRatio=t.sps.pixelRatio,n.sps=[t.rawData]}else if(8===t.unit_type){e.PSI.findTrack(e.trackId).pps=[t.rawData]}e.grouping_(t)}}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(27===t){this.codec||this._initCodec(),this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){9===e.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():m.a.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts):(5===e.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e)),this.currentFrame.duration=e.dts-this.currentFrame.dts}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a),V=n(626),H=n(152);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(e){f()(n,e);var t=z(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.hevcMetVirtualAUD_=!0,r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.b,this.codec.on("nalu",(function(t){var n=e.PSI.findTrack(e.trackId);if(32===t.unit_type)n.vps=[t.rawData],n.hevc_vps=t.vps;else if(33===t.unit_type){var r=Object(V.a)(t.sps);n.codec=r.codec,n.width=t.sps.width,n.height=t.sps.height,n.profileIdc=t.sps.profile_idc,n.profileCompatibility=t.sps.profile_compatibility,n.levelIdc=t.sps.level_idc,n.pixelRatio=t.sps.pixelRatio,n.sps=[t.rawData],n.hevc_sps=t.sps}else if(34===t.unit_type)n.pps=[t.rawData],n.hevc_pps=t.pps;else if(35===t.unit_type)return;e.grouping_(t)}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(36===t||6===t){this.codec||this._initCodec(),this.stream_type=t,this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){var e;this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=(null===(e=this.prevFrame)||void 0===e?void 0:e.duration)||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){this.hevcMetVirtualAUD_&&(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():m.a.warn("hevc codec drop frame")),Object(H.e)(this.currentFrame,"keyframe")&&(this.prevFrame=this.currentFrame),this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts,this.hevcMetVirtualAUD_=!1),e.unit_type<=21&&e.unit_type>=16&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e),this.prevFrame&&(this.prevFrame.duration=e.dts-this.prevFrame.dts),6===this.stream_type?62==e.unit_type&&(this.hevcMetVirtualAUD_=!0):e.unit_type>=0&&e.unit_type<=21&&(this.hevcMetVirtualAUD_=!0)}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration;var e=0;if(this.currentFrame.length>1)for(var t=0;t<this.currentFrame.length;t++){e+=this.currentFrame[t].rawData.byteLength}else e=this.currentFrame[0].rawData.byteLength;this.gop.byteLength+=e,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var K=function(e){f()(n,e);var t=W(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return i()(this,n),(a=t.call(this)).context=e,a.PSI=r,a.options=o,a.streams=[],a}return o()(n,[{key:"initADTS_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.adtsStream=new B(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(x.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void m.a.log("drop adts, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t])}))}},{key:"initAVC_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.avcStream=new U(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(x.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void m.a.log("drop avc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"initHEVC_",value:function(){var e=this,t=this.PSI,n=this.context,r=this.streams,i=this.hevcStream=new G(t);r.push(i),i.on("data",(function(t){var r=n.config.stubTime;if(Object(x.g)(r)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<r)return void m.a.log("drop hevc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(r,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"push",value:function(e){var t=this.options,n=(this.PSI,e.stream_type);if(t.decodeCodec)switch(n){case 27:this.avcStream||this.initAVC_(),this.avcStream.push(e);break;case 6:case 36:this.hevcStream||this.initHEVC_(),this.hevcStream.push(e);break;case 15:this.adtsStream||this.initADTS_(),this.adtsStream.push(e);break;default:m.a.warn("ts elementary encounter unknown stream type ".concat(n))}else this.emit("data",e)}},{key:"flush",value:function(){for(var e=this.streams,t=0;t<this.streams.length;t++){var n=e[t];n&&n.flush()}this.emit("done")}},{key:"reset",value:function(){for(var e=0;e<this.streams.length;e++){var t=this.streams[e];t&&t.reset()}this.emit("reset")}}]),n}(D.a),$=function(){function e(t){i()(this,e);var n=t[7]>>6,r=t[8];this.PTS=0,2==(2&n)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&n)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+r)}return o()(e,[{key:"calcTimestamp_",value:function(e,t){return 536870912*(14&e[t])+(e[t+1]<<22)+(e[t+2]>>1<<15)+(e[t+3]<<7)+(e[t+4]>>1)}}]),e}();function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Q=function(e){f()(n,e);var t=Y(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).PSI=r,a.PID=null,a.cache_buffer=new T.a,a}return o()(n,[{key:"push",value:function(e){var t=this;e.PID>100&&e.PID<8191&&(-1==this.PSI.currentProgramPID?t.pushPacket_(e):this.PSI.currentProgramPID!==e.PID&&(1===e.payload_unit_start_indicator&&t.assembleOnePES_(),t.pushPacket_(e)))}},{key:"flush",value:function(){this.assembleOnePES_(),this.emit("done")}},{key:"reset",value:function(){this.clearCached_(),this.emit("reset")}},{key:"clearCached_",value:function(){this.PID=null,this.cache_buffer.clear()}},{key:"pushPacket_",value:function(e){var t=this.cache_buffer,n=t.empty;n&&0===e.payload_unit_start_indicator||(n&&(this.PID=e.PID),t.append(e.payload))}},{key:"assembleOnePES_",value:function(){var e=this.cache_buffer;if(!e.empty){var t;try{t=e.bytes}catch(a){throw"pes alloc mem err ".concat(e.byteLength)}var n=new $(t),r=this.PSI.findTrack(this.PID);if(r){var i={pid:r.id,stream_type:r.stream_type,pes:n};this.emit("data",i)}this.clearCached_()}}}]),n}(D.a),J=function(){function e(t){if(i()(this,e),this.sync_byte=t[0],this.payload_unit_start_indicator=t[1]>>6&1,this.PID=8191&(t[1]<<8|t[2]),this.afc=t[3]>>4&3,this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){var n=t[4];this.payload=t.subarray(5+n)}else this.payload=t.subarray(4)}return o()(e,[{key:"valid",value:function(){return 71===this.sync_byte&&1===this.has_payload}}]),e}();function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Z=function(e){f()(n,e);var t=X(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).cache_buffer_=new T.a,r.psi_=new I(r.ctx_),r.pesStream_=new Q(r.ctx_,r.psi_),r.elementaryStream_=new K(r.ctx_,r.psi_,a),r.complexStream_=new O(r.ctx_,r.psi_,a),r.pipe(r.pesStream_),r.pesStream_.pipe(r.elementaryStream_),r.elementaryStream_.pipe(r.complexStream_),r}return o()(n,[{key:"endStream",get:function(){var e=this.elementaryStream_;return this.options_.decodeCodec&&(e=this.complexStream_),e}},{key:"push",value:function(e){var t=this.ctx_,r=this.cache_buffer_,i=this.psi_,a=t.config,o=a.done,s=a.meta,u=l()(y()(n.prototype),"constraintPushData_",this).call(this,e),c=r.byteLength,d=null;for(s&&Object(x.g)(s.byteOffset)&&(d=s.byteOffset-c),m.a.log("hls demux received ".concat(u.byteLength," bytes, cache ").concat(c," bytes. ").concat(o?"chunk done":"")),r.append(u);r.byteLength>=188;){var f=r.cut(188);if(f){var h=new J(f);if(!h.valid()){var p="Encounter invalid ts packet, startByte: ".concat(d," endByte: ").concat(d+f.byteLength," packet_length(").concat(f.length,"), cache_length(").concat(r.byteLength,"), has_payload(").concat(h.has_payload,"), data(").concat(f,")");m.a.error(p),this.reset(),t.fireErr(P.a.MUX_TS_SYNC_BYTE,p,{startByte:d,endByte:d+f.byteLength});break}i.parse(h),this.emit("data",h),d+=f.byteLength}}r.empty&&o&&this.emit("done")}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(S.a),ee=n(1076);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ne=function(e){f()(n,e);var t=te(n);function n(){var e;return i()(this,n),(e=t.call(this,[Z,{decodeCodec:!0}],ee.a)).demuxer.endStream.pipe(e.remuxer),e}return o()(n)}(n(349).a);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ie=function(e){f()(n,e);var t=re(n);function n(e){var r;i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:w,watch:["loader","mux"],transmuxer:"TS_FMP4"}))).$TAG="TsMux",r.seekingOnceChecked_=!1;var a=u()(r),o=a.$stream,s=a.$videoMediaStartTimes_,c=a.$transmuxer,l=o.restrictor;return r.$eventManager.on(c,"E",(function(e){r.$checkMuxMetaMatched(r.$currentDataMeta,e.data.meta)&&r.$throwError(Object(k.a)(e.code,e.message,e.data))})).on(c,"I",(function(){r.tryPush_()})).on(c,"DI",(function(e){m.a.log("".concat(r.LOG_TAG," ").concat(2===e.tracksExpected?2:e.audio?"audio":"video"," track(s) found by ts mux info")),r.tracksExpected=e.tracksExpected,l.hasAudio=e.audio,l.hasVideo=e.video})).on(c,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var u=new _.a("video"===t?1:2);u.bytesArray=o,u.trackId=a,u.container=n,u.codec=i,"video"===t?l.videoInitSegment=u:"audio"===t&&(l.audioInitSegment=u),r.tryProvideArtefact_()}break;case"fragment":var c,d=e.contentType,f=e.data,h=e.duration,p=e.startDTS,v=e.startPTS,y=e.nextSegmentPTS;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(d,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(v.toFixed(3),"/").concat((v+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void m.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===d?((c=new b.a(1)).bytesArray=f,c.startTime=p,c.duration=h,s.push(c.startTime),l.videoMediaSegments.push(c)):"audio"===d&&((c=new b.a(2)).bytesArray=f,c.startTime=v,c.duration=h,l.audioMediaSegments.push(c),r.$audioSegmentAlignPTS_=y),r.tryProvideArtefact_()}})).on(c,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r}return o()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(x.c)(r)&&Object(x.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,u=r.meta,c=0;if(u){var l=u.level;a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||l==this.$currentDataMeta.level)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=u}if(!e.conf.alwaysSeekKeyframe){var d=o.currentTimeRange,f=o.currentTime;c=(d?d.end:f)||0}n.push(s,{done:r.done,stubTime:c,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:u}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(x.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):m.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){l()(y()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(g.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return ge})),n.d(t,"a",(function(){return be}));n(17),n(23);var r,i=n(4),a=n.n(i),o=n(5),s=n.n(o),u=n(113),c=n.n(u),l=n(41),d=n.n(l),f=n(8),h=n.n(f),p=n(9),v=n.n(p),y=n(3),g=n.n(y),m=(n(121),n(35),n(154),n(133),n(679)),_=n(39),b=n(1016),x=n(1017),k=n(160),w=n(1015),S=(n(115),n(217),n(30),n(44),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(624)),T=n(261),P=n(625),E=n(307),A=n(1012),I=n(535);!function(e){e[e.HEAD=0]="HEAD",e[e.BODY=1]="BODY"}(r||(r={}));var D=n(138),L=n(1014);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var R=function(e){h()(n,e);var t=O(n);function n(e){var r;a()(this,n),(r=t.call(this)).tagType=e[0],r.dataSize=16777215&r.readUint32(e,0);var i=16777215&r.readUint32(e,3),o=e[7];return r.timestamp=(o<<24)+i,r.streamId=16777215&r.readUint32(e,8),r.payload=e.subarray(11,11+r.dataSize),r.previousTagSize=r.readUint32(e,11+r.dataSize),r.totalSize=r.previousTagSize+4,r}return s()(n,[{key:"valid",value:function(){var e=this.tagType,t=this.dataSize;return this.previousTagSize===11+t&&(18===e||9===e||8===e)}}]),n}(L.a);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var M,B,N=function(e){h()(n,e);var t=C(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).ctx_=e,i.flv_=r,i.options_=o,i.cache_buffer_=new A.a,i}return s()(n,[{key:"push",value:function(e){var t,n=this.ctx_,r=this.flv_,i=this.cache_buffer_;for(i.append(e),9===r.pos&&i.byteLength>8&&(i.cut(4),r.pos+=4);i.byteLength>0&&(t=i.bytes).length>=4;){var a=11+((t[1]<<16)+(t[2]<<8)+t[3])+4;if(!(t.length>=a))break;var o=i.cut(a),s=new R(o);if(s.valid())this.emit("data",s),r.pos+=s.totalSize;else{var u="Encounter invalid flv tag, tag_length(".concat(s.previousTagSize,"), cache_length(").concat(i.byteLength,"), data(").concat(o,")");_.a.error(u),this.reset(),n.fireErr(I.a.MUX_FLV_TAG_INVALID,u)}}}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(D.a),F=N;function q(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=null,i=null;if(t){try{i=new Uint8Array(e.length+1)}catch(o){_.a.error("flv parseData failed: ".concat(o.message))}i[0]=2,i.set(e,1,e.length)}else i=e;n=j(i),t&&(n.valueLength-=1);var a=e.subarray(n.valueLength,e.byteLength);return r=j(a),{key:n.value,value:r.value,valueLength:n.valueLength+r.valueLength}}function j(e){var t={},n=0,r=new L.a;switch(e[0]){case 0:n=8,t.value=V(e.subarray(1,9)),t.valueLength=1+n;break;case 1:n=1,t.value=0!==e[1],t.valueLength=1+n;break;case 2:case 4:n=e[1]<<8|e[2],t.value=U(e.subarray(3,3+n)),t.valueLength=3+n;break;case 3:for(n=1,t.value={};0!=e[n]||0!=e[n+1]||9!=e[n+2];){var i=e.subarray(n,e.byteLength),a=q(i,!0);t.value[a.key]=a.value,n+=a.valueLength,i=null}n+=3,t.valueLength=n;break;case 5:t.value=null,n=1,t.valueLength=n;break;case 6:t.value=undefined,n=1,t.valueLength=n;break;case 7:t.value=e[1]<<8|e[2],n=3,t.valueLength=n;break;case 8:var o=e[1]<<24|e[2]<<16|e[3]<<8|e[4];n=5,t.value={};for(var s=0;s<o;s++){var u=q(e.subarray(n,e.byteLength),!0);t.value[u.key]=u.value,n+=u.valueLength}n+=3,t.valueLength=n;break;case 9:break;case 10:for(var c=[],l=r.readUint32(e,1),d=0;d<l;d++){var f=e.subarray(9*d+4+1,e.byteLength);c.push(j(f).value)}t.value=c,n=9*c.length+4+1,t.valueLength=n;break;case 11:t.value=V(e.subarray(0,8)),n=11,t.valueLength=n;break;case 12:n=e[1]<<24|e[2]<<16|e[3]<<8|e[4],t.value=U(e.subarray(5,5+n)),t.valueLength=5+n;break;default:return null}return t}function U(e){return String.fromCharCode.apply(null,e)}function V(e){var t=new Uint8Array(e),n=new DataView(t.buffer),r=n.getFloat64(0);return n=null,t=null,r}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}!function(e){e[e.AAC=10]="AAC"}(M||(M={})),function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(B||(B={}));var z,G=function(e){h()(n,e);var t=H(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).pos=0,e}return s()(n)}(D.a),W=n(654);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.AAC_RAW=1]="AAC_RAW"}(z||(z={}));var $=function(e){h()(n,e);var t=K(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).dts=r,i.pts=r,i.aacPacketType=e[0],i.payload=e.subarray(1),0===i.aacPacketType&&(i.audioSpecificConfig=Object(W.a)(i.payload)),i}return s()(n)}(L.a);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var Q,J=function(e){h()(n,e);var t=Y(n);function n(e,r){var i;switch(a()(this,n),(i=t.call(this)).soundFormat=(240&e[0])>>4,i.soundRate=(12&e[0])>>2,(2&e[0])>>1){case 0:i.sampleSize=8;break;case 1:i.sampleSize=16}if(i.soundType=1&e[0],i.soundFormat===M.AAC)i.soundData=new $(e.subarray(1),r);else _.a.error("flv tag audioData encounter unknown soundFormat ".concat(i.soundFormat));return i}return s()(n)}(L.a);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.NALU=1]="NALU",e[e.SEQUENCE_END=2]="SEQUENCE_END"}(Q||(Q={}));var Z=new T.a,ee=[];Z.on("nalu",(function(e){switch(e.unit_type){case 7:case 8:case 5:case 1:ee.push(e)}}));var te,ne=function(e){h()(n,e);var t=X(n);function n(e,r,i){var o;a()(this,n),o=t.call(this);var s=e.flv,u=e.options;if(o.avcPacketType=r[0],1===o.avcPacketType){var c=16777215&o.readUint32(r,0);o.cts=c<<8>>8}else o.cts=0;if(o.dts=i,o.pts=o.dts+o.cts,o.payload=r.subarray(4),0===o.avcPacketType)o.decoderConfigurationRecord=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=1+(3&e[4]),o=[],s=[],u=5,c=31&e[u];if(0===c)_.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No SPS");else if(c>0){c>1&&_.a.warn("Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(c)),u++;for(var l=0;l<c;l++){var d=e[u]<<8|e[u+1];u+=2,s.push(e.subarray(u,u+d)),u+=d}}var f=e[u];if(0===f)_.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No PPS");else if(f>0){f>1&&_.a.warn("Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(f)),u++;for(var h=0;h<f;h++){var p=e[u]<<8|e[u+1];u+=2,o.push(e.subarray(u,u+p)),u+=p}}return{version:t,profile:n,profileCompatibility:r,level:i,naluSizeLength:a,spsNalus:s,ppsNalus:o}}(o.payload),s.decoderConfigurationRecord=o.decoderConfigurationRecord;else if(u.decodeCodec){o.naluList=[];var l={pts:o.pts,dts:o.dts,payload:o.payload};if(!o.decoderConfigurationRecord){s.decoderConfigurationRecord&&(l.naluSizeLength=s.decoderConfigurationRecord.naluSizeLength),Z.push(l);for(var d=0;d<ee.length;d++)o.naluList.push(ee[d]);ee.splice(0,ee.length)}}return o}return s()(n)}(L.a);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}!function(e){e[e.AVC=7]="AVC"}(te||(te={}));var ie=function(e){h()(n,e);var t=re(n);function n(e,r,i){var o;if(a()(this,n),(o=t.call(this)).frameType=r[0]>>4&15,o.isKeyframe=1===o.frameType,o.codecId=15&r[0],o.codecId===te.AVC)o.videoData=new ne(e,r.subarray(1),i);else _.a.error("flv tag videoData encounter unknown codecId ".concat(o.codecId));return o}return s()(n)}(L.a);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var oe=function(e){h()(n,e);var t=ae(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).flv_=r,i.options_=o,i.pipeCtx={ctx:e,flv:r,options:o},i}return s()(n,[{key:"push",value:function(e){switch(e.tagType){case 18:this.parseScriptData_(e.payload);break;case 9:this.parseVideoData_(e);break;case 8:this.parseAudioData_(e);break;default:_.a.error("still not supported flv tag type ".concat(e.tagType))}}},{key:"flush",value:function(){this.emit("done")}},{key:"reset",value:function(){this.emit("reset")}},{key:"parseScriptData_",value:function(e){var t=this.flv_,n=function(e){var t={},n=q(e);return t[n.key]=n.value,t}(e);t.emit("data",Object.assign({type:"tag",tagType:18},n))}},{key:"parseVideoData_",value:function(e){var t=this.flv_,n=new ie(this.pipeCtx,e.payload,e.timestamp),r=Object.assign({type:"tag",tagType:9,timestamp:e.timestamp},n);t.emit("data",r)}},{key:"parseAudioData_",value:function(e){var t=this.flv_,n=new J(e.payload,e.timestamp),r=n.soundData;r.audioSpecificConfig&&(t.audioSpecificConfig=r.audioSpecificConfig);var i=Object.assign({type:"tag",tagType:8,timestamp:e.timestamp},n);t.emit("data",i)}}]),n}(D.a),se=oe;function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var ce=function(e){h()(n,e);var t=ue(n);function n(e){var r;return a()(this,n),(r=t.call(this)).signature=String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2]),r.version=e[3],r.hasAudio=(4&e[4])>>>2==1,r.hasVideo=1==(1&e[4]),r.offset=r.readUint32(e,5),r}return s()(n,[{key:"valid",value:function(){return"FLV"===this.signature}}]),n}(L.a);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var de=function(e){h()(n,e);var t=le(n);function n(e){var i,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(i=t.call(this,e,o)).cache_buffer_=new A.a,i.flv_=new G,i.flv_.stage=r.HEAD,i.body_=new F(i.ctx_,i.flv_,o),i.tags_=new se(i.ctx_,i.flv_,o),i.pipe(i.body_),i.body_.pipe(i.tags_),i}return s()(n,[{key:"endStream",get:function(){return this.flv_}},{key:"push",value:function(e){var t=this.ctx_,i=this.flv_,a=this.cache_buffer_,o=d()(g()(n.prototype),"constraintPushData_",this).call(this,e),s=this.cache_buffer_.byteLength;_.a.log("flv demux received ".concat(o.byteLength," bytes, cache ").concat(s," bytes."));var u=t.config;for(Object(k.g)(u.offsetPos)&&(i.pos=u.offsetPos),a.append(o),i.pos<9?i.stage=r.HEAD:i.stage=r.BODY;;)if(i.stage===r.HEAD){if(!(a.byteLength>=9))break;var c=a.cut(9),l=new ce(c);if(!l.valid()){t.fireErr(I.a.MUX_FLV_HEAD_SIGNATURE);break}i.emit("data",{type:"head",signature:l.signature,version:l.version,hasAudio:l.hasAudio,hasVideo:l.hasVideo,offset:l.offset}),i.stage=r.BODY,i.pos=9}else if(i.stage===r.BODY){if(a.byteLength>=4){var f=a.byteLength,h=a.bytes;a.clear(),h&&this.emit("data",h),i.pos+=f}break}u.done&&(this.reset(),i.emit("done"))}},{key:"reset",value:function(){var e=this.body_,t=this.tags_,n=this.flv_,i=this.cache_buffer_;n.stage=r.HEAD,n.pos=0,i.clear(),e.reset(),t.reset()}}]),n}(E.a),fe=n(1076),he=n(349),pe=n(185),ve=s()((function xe(){a()(this,xe)}));function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var ge=function(e){h()(n,e);var t=ye(n);function n(){var e;return a()(this,n),(e=t.call(this,[de,{decodeCodec:!0}],fe.a)).headerCodec=new T.a,e._offsetTime=0,e.demuxer.endStream.on("data",(function(t){e.isHeader?e.handleHeader_(t):e.handleFrames_(t)})).on("done",(function(){e.isHeader?(e.headerDone=!0,e.checkHeader_()):e.handleDataDone_()})).on("error",(function(e){})),e.headerCodec.on("nalu",(function(t){7===t.unit_type?(e.box.sps=!0,e.box.vc.spsnalu=t,e.box.vc.pixelRatio=t.sps.pixelRatio):8===t.unit_type&&(e.box.pps=!0,e.box.vc.ppsnalu=t),e.checkHeader_()})),e}return s()(n,[{key:"push",value:function(e,t){var r=t.offsetPos;"number"!=typeof r||isNaN(r)||r<0||(t.meta.header?(this.box=new ve,this.box.meta=t.meta,this.isHeader=!0):(this.faConfig=t.meta.vac.ac,this.fvConfig=t.meta.vac.vc,"number"==typeof t.meta.offset&&t.meta.offset>=0?this._offsetTime=1e3*t.meta.offset:this._offsetTime=0,this.isHeader=!1,this.currentFrame=[],this.newGops_()),d()(g()(n.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){if("head"===e.type)this.box.hasAudio=e.hasAudio,this.box.hasVideo=e.hasVideo;else if("tag"===e.type)switch(e.tagType){case 18:this.updateScript_(e);break;case 8:this.box.ac||this.updateAudio_(e);break;case 9:this.box.vc||this.updateVideo_(e)}}},{key:"handleFrames_",value:function(e){switch(e.tagType){case 8:this.appendAudio_(e);break;case 9:this.appendVideo_(e)}}},{key:"appendVideo_",value:function(e){var t=this;e.videoData.naluList.forEach((function(e){var n=t.currentFrame||[];0===n.length?(n.keyframe=!1,n.duration=0,n.byteLength=e.rawData.byteLength,n.naluCount=1):(n.naluCount++,n.byteLength+=e.rawData.byteLength),n.pts=90*(e.pts+t._offsetTime),n.dts=90*(e.dts+t._offsetTime),t.gop&&0===t.gop.length&&e.unit_type,5===e.unit_type&&(n.keyframe=!0),n.push(e)})),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,n=Object(pe.a)({},this.faConfig);if(n.data=t.payload,n.dts=90*(t.dts+this._offsetTime),n.pts=90*(t.pts+this._offsetTime),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var r=Object(S.a)(n.audioObjectType,n.samplingFrequencyIndex,n.channelCount);this.audioTrack.config=r.config,this.audioTrack.sampleRate=r.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=r.sampleRate,this.audioTrack.channelCount=r.channelCount,this.audioTrack.codec=r.codec,this.audioTrack.realCodec=r.realCodec}this.audioTrack.frames.push(n),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"updateScript_",value:function(e){var t=e.onMetaData;this.box.duration=t.duration,this.box.filesize=t.filesize,this.box.height=t.height,this.box.keyframePositions=t.keyframes.filepositions,this.box.keyframeTimes=t.keyframes.times,this.box.width=t.width}},{key:"updateAudio_",value:function(e){var t=e.soundData,n=t.audioSpecificConfig;this.box.ac={audioObjectType:n.audioObjectType,channelCount:n.channelConfiguration,dts:t.dts,pts:t.pts,sampleCount:1024,sampleRate:n.sampleRate,sampleSize:e.sampleSize,samplingFrequencyIndex:n.samplingFrequencyIndex,type:"audio"}}},{key:"updateVideo_",value:function(e){var t=e.videoData,n=t.decoderConfigurationRecord;this.box.naluSizeLength=n.naluSizeLength,this.box.vc={height:0,levelIdc:0,pixelRatio:[],pps:[],profileCompatibility:0,profileIdc:0,sps:[],width:0};var r=this.box.vc,i=function(e){var t=function(e){var t=[];if(e>0)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),{naluSizeLength:t.length,payload:n}};n.ppsNalus&&(r.pps=n.ppsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.pps[0])))),n.spsNalus&&(r.sps=n.spsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.sps[0])))),r.profileIdc=n.profile,r.profileCompatibility,n.profileCompatibility,r.levelIdc=n.level,r.width=this.box.width,r.height=this.box.height}},{key:"checkHeader_",value:function(){this.box.pps&&this.box.sps&&this.headerDone&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.box}),this.headerDone=!1,this.isHeader=!1)}},{key:"handleDataDone_",value:function(){if(this.gop&&this.gop.length>0){var e=this.gop[0],t={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(e.pts,0)};this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),t.gops=this.gops,t.firstDTS=e.dts,t.firstPTS=e.pts;var n=Object(P.a)(this.fvConfig.spsnalu.sps);t.codec=n.codec,Object(pe.a)(t,this.fvConfig),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:t,audioTrack:this.audioTrack}),this.audioTrack=null}}},{key:"pushFrameIntoGop_",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=[]}}]),n}(he.a),me=n(655);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var be=function(e){h()(n,e);var t=_e(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:me,watch:["loader","mux"],transmuxer:"FLV_FMP4"}))).$TAG="FlvMux",r.seekingOnceChecked_=!1;var i=c()(r),o=i.$stream,s=i.$videoMediaStartTimes_,u=i.$transmuxer,l=i.$eventManager,d=o.restrictor;return l.on(u,"E",(function(e){r.$throwError(Object(w.a)(e.code,e.message))})).on(u,"I",(function(){r.tryPush_()})).on(u,"DI",(function(e){"head"===e.type&&r.$ipc.emit("headerComplete",e.data)})).on(u,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(_.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var u=new b.a("video"===t?1:2);u.bytesArray=o,u.trackId=a,u.container=n,u.codec=i,"video"===t?d.videoInitSegment=u:"audio"===t&&(d.audioInitSegment=u),r.tryProvideArtefact_()}break;case"fragment":var c,l=e.contentType,f=e.data,h=e.duration,p=e.startDTS,v=e.startPTS;e.nextSegmentPTS;if(_.a.log("".concat(r.LOG_TAG," parsed ").concat(l,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(v.toFixed(3),"/").concat((v+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void _.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===l?((c=new x.a(1)).bytesArray=f,c.startTime=p,c.duration=h,s.push(c.startTime),d.videoMediaSegments.push(c)):"audio"===l&&((c=new x.a(2)).bytesArray=f,c.startTime=v,c.duration=h,d.audioMediaSegments.push(c)),r.tryProvideArtefact_()}})).on(u,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r.$ipc.on("flvHeader",(function(e){u.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})})),r}return s()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(k.c)(r)&&Object(k.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,u=r.meta,c=u.fragKey,l=u.byteOffset,d=0;if(a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||c==this.$currentDataMeta.fragKey)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=u,!e.conf.alwaysSeekKeyframe){var f=o.currentTimeRange,h=o.currentTime;d=(f?f.end:h)||0}n.push(s,{done:!0,stubTime:d,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:u,offsetPos:l}),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onReadDone(e.ctx.isAd),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(k.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):_.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){d()(g()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(m.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return W}));n(17),n(23);var r,i=n(4),a=n.n(i),o=n(5),s=n.n(o),u=n(113),c=n.n(u),l=n(41),d=n.n(l),f=n(8),h=n.n(f),p=n(9),v=n.n(p),y=n(3),g=n.n(y),m=(n(121),n(35),n(154),n(133),n(679)),_=n(39),b=n(1016),x=n(1017),k=n(160),w=n(1015),S=(n(30),n(44),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(217),n(101),n(136),n(115),n(624)),T=n(261),P=n(447),E=n(625),A=n(307),I=n(1012),D=n(1077),L=n(1018);!function(e){e[e.HEAD=0]="HEAD",e[e.BODY=1]="BODY"}(r||(r={}));var O,R,C=n(138);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}!function(e){e[e.AAC=10]="AAC"}(O||(O={})),function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(R||(R={}));var B=function(e){h()(n,e);var t=M(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).pos=0,e}return s()(n)}(C.a);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var F=function(e){h()(n,e);var t=N(n);function n(e){var i,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(i=t.call(this,e,o)).mp4_=new B,i.cache_buffer_=new I.a,i.mp4_.stage=r.HEAD,i}return s()(n,[{key:"endStream",get:function(){return this}},{key:"push",value:function(e){var t=this.ctx_,r=(this.mp4_,this.cache_buffer_,d()(g()(n.prototype),"constraintPushData_",this).call(this,e)),i=t.config;_.a.log("mp4 demux received ".concat(r.byteLength," bytes.")),0===i.offsetPos?this._analyzeHeader(r):this.emit("data",e),i.done&&(this.reset(),this.emit("done"))}},{key:"_analyzeHeader",value:function(e){var t=new Uint8Array(e),n=D.a.mp4toJSON(t),r=Object(L.a)(n);this.emit("data",r)}}]),n}(A.a),q=n(1076),j=n(349),U=n(185);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var H=function(e){h()(n,e);var t=V(n);function n(){var e;return a()(this,n),(e=t.call(this,[F,{decodeCodec:!0}],q.a)).headerCodec=new T.a,e.avcCodec=new T.a,e.offsetTime_=0,e.videoSampleList=[],e.audioSampleList=[],e.videoChunkList=[],e.audioChunkList=[],e.headerObj={hasVideo:!1,hasAudio:!1,f:null,ac:{},vc:{},sps:null,pps:null,spsNalu:null,ppsNalu:null,keyframeTimes:[],keyframePositions:[],naluSizeLength:0,duration:0,filesize:0,meta:null},e.demuxer.endStream.on("data",(function(t){e.isHeader?e.handleHeader_(t):e.handleMdat_(t)})).on("done",(function(){e.isHeader?e.checkHeader_():e.handleDataDone_()})).on("error",(function(e){})),e.headerCodec.on("nalu",(function(t){7===t.unit_type?(e.headerObj.spsNalu=t,e.headerObj.vc.pixelRatio=t.sps.pixelRatio,e.headerObj.vc.sps=[t.rawData]):8===t.unit_type&&(e.headerObj.ppsNalu=t,e.headerObj.vc.pps=[t.rawData]),e.checkHeader_()})),e.avcCodec.on("nalu",(function(t){5!==t.unit_type&&1!==t.unit_type||e._appendToFrame(t)})).on("done",(function(){e._pushFrameIntoGop()})),e}return s()(n,[{key:"push",value:function(e,t){var r=t.offsetPos,i=t.meta;"number"!=typeof r||isNaN(r)||r<0||(i.header?(this.isHeader=!0,this.headerObj.meta=i):(this.isHeader=!1,"number"==typeof i.offset&&i.offset>=0?this.offsetTime_=1e3*i.offset:this.offsetTime_=0,this.currentFrame=[],this.newGops_()),d()(g()(n.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){this.makeVideoTrack_(e.videTrack),this.makeAudioTrack_(e.sounTrack);for(var t={},n=e.videTrack.avc1.config,r=0;r<n.length;r++)if("avcC"===n[r].type)switch(t.sps=n[r].sps[0],t.pps=n[r].pps[0],n[r].lengthSizeMinusOne){case 0:this.headerObj.naluSizeLength=1;break;case 1:this.headerObj.naluSizeLength=2;break;case 2:this.headerObj.naluSizeLength=3;break;case 3:this.headerObj.naluSizeLength=4}if(this.videoSampleList.length>0){var i=function(e){var t=function(e){var t=[];if(e>0)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),{naluSizeLength:t.length,payload:n}};this.headerCodec.push(Object.assign({pts:0,dts:0},i(t.pps))),this.headerCodec.push(Object.assign({pts:0,dts:0},i(t.sps)))}}},{key:"handleMdat_",value:function(e){var t,n=0,r=0,i=0,a=this.config.meta.byteOffset,o=null;for(t=e.byteLength;n<t;)(o=this.getSampleByPosition_(a+n))?(i=(r=o.sample.startPosition-a)+o.sample.size,"video"==o.type?this.avcCodec.push({pts:o.sample.pts,dts:o.sample.dts,naluSizeLength:this.headerObj.naluSizeLength,payload:e.subarray(r,i)}):"audio"==o.type&&this.handleAACData_({PTS:o.sample.pts,DTS:o.sample.dts,data_byte:e.subarray(r,i)}),n+=o.sample.size):n=t;o=null}},{key:"handleAACData_",value:function(e){var t=Object.assign(Object.assign({},this.headerObj.ac),{data:e.data_byte,dts:e.DTS,pts:e.PTS});if(null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var n=Object(S.a)(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);this.audioTrack.config=n.config,this.audioTrack.sampleRate=n.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=n.sampleRate,this.audioTrack.channelCount=n.channelCount,this.audioTrack.codec=n.codec,this.audioTrack.realCodec=n.realCodec}this.audioTrack.frames.push(t),this.audioTrack.frames.byteLength+=t.data.byteLength}},{key:"getSampleByPosition_",value:function(e){for(var t=0;t<this.videoSampleList.length;t++)if(e==this.videoSampleList[t].startPosition)return{type:"video",sample:this.videoSampleList[t]};for(var n=0;n<this.audioSampleList.length;n++)if(e==this.audioSampleList[n].startPosition)return{type:"audio",sample:this.audioSampleList[n]};return null}},{key:"_appendToFrame",value:function(e){this.currentFrame=this.currentFrame||[];var t=this.currentFrame;0===t.length?(t.keyframe=!1,t.duration=0,t.byteLength=e.rawData.byteLength,t.naluCount=1):(t.naluCount++,t.byteLength+=e.rawData.byteLength),t.pts=e.pts,t.dts=e.dts,5===e.unit_type&&(t.keyframe=!0),t.push(e)}},{key:"_parseSEI",value:function(e){for(var t=e.data,n=null,r=(t[1],3+t[2]+1),i=t.length;r<i;){var a=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],o=31&t[r+4];5!=o&&1!=o||(t=t.subarray(r+4,r+4+a),n=new P.a(t)),r+=4+a}return n}},{key:"_pushFrameIntoGop",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}Array.isArray(e)&&e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=null}},{key:"_pushGopIntoGroup",value:function(){this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop)}},{key:"makeVideoTrack_",value:function(e){e||_.a.error("can't discovery video box");var t=e.stsz.entries,n=e.stco.chunkOffsets,r=e.stsc.sampleToChunks,i=e.stts.timeToSamples,a=e.ctts?e.ctts.frameIndex:[],o=e.stss.frameIndex,s=0,u=0,c=0,l=0,d=0,f=0,h=0,p=0,v=0,y=0,g=0,m=0,b=0,x=n[0];for(u=0;u<t.length;u++){var k={};if(d<=u){for(var w=0;w<r.length;w++)c===r[w].firstChunk-1&&(l=w);d+=r[l].samplesPerChunk,x=n[c],c++}h<=u&&a.length>0&&(h+=a[f].sample_count,b=a[f].sample_offset,f++),y<=u&&(y+=i[v].sampleCount,s=i[v].sampleDelta/e.mdhd.timescale,g=i[v].sampleDelta,v++),k.index=u,k.startTime=s*u,k.size=t[u],k.startPosition=x,k.endPosition=x+t[u],k.dts=9e4*m/e.mdhd.timescale,k.pts=9e4*(m+b)/e.mdhd.timescale,this.videoSampleList.push(k),x+=t[u],m+=g}for(d=r[0].samplesPerChunk,u=0,c=0;c<n.length;c++){var S={};for(l=0;l<r.length;l++)if(c===r[l].firstChunk-1){d=r[l].samplesPerChunk;break}S.samplesLength=d,S.startSamples=u,S.endSamples=u+d,S.startPosition=n[c];for(var T=0,P=S.startSamples;P<S.endSamples;P++)T+=this.videoSampleList[P].size;S.size=T,u+=d,this.videoChunkList.push(S)}for(p=0;p<o.length;p++){var E=parseInt(o[p].index,10);this.headerObj.keyframeTimes.push(this.videoSampleList[E-1].startTime),this.headerObj.keyframePositions.push(this.videoSampleList[E-1].startPosition)}this.headerObj.hasVideo=!0,this.headerObj.duration=e.mdhd.duration/e.mdhd.timescale,this.headerObj.vc.trackId=e.tkhd.trackId,this.headerObj.vc.width=e.avc1.width,this.headerObj.vc.height=e.avc1.height}},{key:"makeAudioTrack_",value:function(e){e||_.a.error("mat can't discovery soun box");var t=e.stsz.entries,n=e.stco.chunkOffsets,r=e.stsc.sampleToChunks,i=e.stts.timeToSamples,a=0,o=0,s=0,u=0,c=0,l=0,d=0,f=0,h=0,p=n[0];for(o=0;o<t.length;o++){var v={};if(c<=o){for(var y=0;y<r.length;y++)s===r[y].firstChunk-1&&(u=y);c+=r[u].samplesPerChunk,p=n[s],s++}d<=o&&(d+=i[l].sampleCount,a=i[l].sampleDelta/e.mp4a.samplerate,f=i[l].sampleDelta,l++),v.index=o,v.startTime=a*o,v.size=t[o],v.startPosition=p,v.endPosition=p+t[o],v.pts=9e4*h/e.mp4a.samplerate,v.dts=9e4*h/e.mp4a.samplerate,this.audioSampleList.push(v),p+=t[o],h+=f}for(c=r[0].samplesPerChunk,o=0,s=0;s<n.length;s++){var g={};for(u=0;u<r.length;u++)if(s===r[u].firstChunk-1){c=r[u].samplesPerChunk;break}g.samplesLength=c,g.startSamples=o,g.endSamples=o+c,g.startPosition=n[s];for(var m=0,b=g.startSamples;b<g.endSamples;b++)m+=this.audioSampleList[b].size;g.size=m,o+=c,this.audioChunkList.push(g)}var x=e.mp4a.streamDescriptor.decoderConfig.decoderSpecificInfo,k=x.audioObjectType,w=x.channelConfiguration,S=x.samplingFrequencyIndex;this.headerObj.hasAudio=!0,this.headerObj.ac.trackId=e.tkhd.trackId,this.headerObj.ac.audioObjectType=k,this.headerObj.ac.channelCount=w,this.headerObj.ac.samplingFrequencyIndex=S,this.headerObj.ac.sampleSize=e.mp4a.samplesize,this.headerObj.ac.sampleRate=e.mp4a.samplerate,this.headerObj.ac.sampleCount=i[0].sampleDelta}},{key:"handleFrames_",value:function(e){}},{key:"appendVideo_",value:function(e){var t=this;e.videoData.naluList.forEach((function(e){var n=t.currentFrame||[];0===n.length?(n.keyframe=!1,n.duration=0,n.byteLength=e.rawData.byteLength,n.naluCount=1):(n.naluCount++,n.byteLength+=e.rawData.byteLength),n.pts=90*(e.pts+t.offsetTime_),n.dts=90*(e.dts+t.offsetTime_),t.gop&&0===t.gop.length&&e.unit_type,5===e.unit_type&&(n.keyframe=!0),n.push(e)})),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,n=Object(U.a)({},this.headerObj.ac);if(n.data=t.payload,n.dts=90*(t.dts+this.offsetTime_),n.pts=90*(t.pts+this.offsetTime_),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var r=Object(S.a)(n.audioObjectType,n.samplingFrequencyIndex,n.channelCount);this.audioTrack.config=r.config,this.audioTrack.sampleRate=r.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=r.sampleRate,this.audioTrack.channelCount=r.channelCount,this.audioTrack.codec=r.codec,this.audioTrack.realCodec=r.realCodec}this.audioTrack.frames.push(n),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"checkHeader_",value:function(){this.headerObj.ppsNalu&&this.headerObj.spsNalu&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.headerObj}),this.isHeader=!1)}},{key:"handleDataDone_",value:function(){if(this.gop&&this.gop.length>0){var e=this.gop[0],t={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(e.pts,0)};this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),t.gops=this.gops,t.firstDTS=e.dts,t.firstPTS=e.pts;var n=Object(E.a)(this.headerObj.spsNalu.sps);t.codec=n.codec,Object(U.a)(t,this.headerObj.vc),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:t,audioTrack:this.audioTrack}),this.audioTrack=null}}},{key:"pushFrameIntoGop_",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=[]}}]),n}(j.a),z=n(656);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var W=function(e){h()(n,e);var t=G(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:z,watch:["loader","mux"],transmuxer:"MP4_FMP4"}))).$TAG="Mp4Mux",r.seekingOnceChecked_=!1;var i=c()(r),o=i.$stream,s=i.$videoMediaStartTimes_,u=i.$transmuxer,l=i.$eventManager,d=o.restrictor;return l.on(u,"E",(function(e){r.$throwError(Object(w.a)(e.code,e.message))})).on(u,"I",(function(){r.tryPush_()})).on(u,"DI",(function(e){"head"===e.type&&r.$ipc.emit("headerComplete",e.data)})).on(u,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(_.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var u=new b.a("video"===t?1:2);u.bytesArray=o,u.trackId=a,u.container=n,u.codec=i,"video"===t?d.videoInitSegment=u:"audio"===t&&(d.audioInitSegment=u),r.tryProvideArtefact_()}break;case"fragment":var c,l=e.contentType,f=e.data,h=e.duration,p=e.startDTS,v=e.startPTS;e.nextSegmentPTS;if(_.a.log("".concat(r.LOG_TAG," parsed ").concat(l,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(v.toFixed(3),"/").concat((v+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void _.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===l?((c=new x.a(1)).bytesArray=f,c.startTime=p,c.duration=h,s.push(c.startTime),d.videoMediaSegments.push(c)):"audio"===l&&((c=new x.a(2)).bytesArray=f,c.startTime=v,c.duration=h,d.audioMediaSegments.push(c)),r.tryProvideArtefact_()}})).on(u,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r.$ipc.on("mp4Header",(function(e){u.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})})),r}return s()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){this.$krt;var e=this.$stream,t=this.$transmuxer,n=this.$loaderArtifact,r=this.$selfArtifact,i=e.restrictor;e.renderer;if(!Object(k.c)(n)&&Object(k.c)(r)&&this.$canConsumeLoaderData()){var a=n.data,o=n.meta,s=o.fragKey,u=o.byteOffset;i.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||s==this.$currentDataMeta.fragKey)||(i.needSendInitSegment=!0,i.videoInitSegment=i.audioInitSegment=null),this.$currentDataMeta=o,t.push(a,{done:!0,stubTime:0,resetInitSegment:i.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:o,offsetPos:u}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(k.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):_.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){d()(g()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(m.a)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.IGNORABLE=0]="IGNORABLE",e[e.RECOVERABLE=1]="RECOVERABLE",e[e.CRITICAL=2]="CRITICAL"}(r||(r={}))},function(e,t,n){"use strict";var r=n(29),i=n(81),a=n(90).NATIVE_ARRAY_BUFFER,o=n(94),s=n(241),u=n(31),c=n(188),l=n(117),d=n(77),f=n(458),h=n(168).f,p=n(87).f,v=n(366),y=n(165),g=n(143),m=g.get,_=g.set,b="ArrayBuffer",x="DataView",k="Wrong index",w=r.ArrayBuffer,S=w,T=r.DataView,P=r.Math,E=r.RangeError,A=1/0,I=P.abs,D=P.pow,L=P.floor,O=P.log,R=P.LN2,C=function(e,t,n){var r,i,a,o=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?D(2,-24)-D(2,-77):0,d=e<0||0===e&&1/e<0?1:0,f=0;for((e=I(e))!=e||e===A?(i=e!=e?1:0,r=u):(r=L(O(e)/R),e*(a=D(2,-r))<1&&(r--,a*=2),(e+=r+c>=1?l/a:l*D(2,1-c))*a>=2&&(r++,a/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*a-1)*D(2,t),r+=c):(i=e*D(2,c-1)*D(2,t),r=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;o[f++]=255&r,r/=256,s-=8);return o[--f]|=128*d,o},M=function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-1/0:A;n+=D(2,t),l-=o}return(c?-1:1)*n*D(2,l-t)},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},N=function(e){return[255&e]},F=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},j=function(e){return C(e,23,4)},U=function(e){return C(e,52,8)},V=function(e,t){p(e.prototype,t,{get:function(){return m(this)[t]}})},H=function(e,t,n,r){var i=f(+n),a=m(e);if(i+t>a.byteLength)throw E(k);var o=m(a.buffer).bytes,s=i+a.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()},z=function(e,t,n,r,i,a){var o=f(+n),s=m(e);if(o+t>s.byteLength)throw E(k);for(var u=m(s.buffer).bytes,c=o+s.byteOffset,l=r(+i),d=0;d<t;d++)u[c+d]=l[a?d:t-d-1]};if(a){if(!u((function(){w(1)}))||!u((function(){new w(-1)}))||u((function(){return new w,new w(1.5),new w(NaN),w.name!=b}))){for(var G,W=(S=function(e){return c(this,S),new w(f(e))}).prototype=w.prototype,K=h(w),$=0;K.length>$;)(G=K[$++])in S||o(S,G,w[G]);W.constructor=S}var Y=new T(new S(2)),Q=T.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(T.prototype,{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},{unsafe:!0})}else S=function(e){c(this,S,b);var t=f(e);_(this,{bytes:v.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},T=function(e,t,n){c(this,T,x),c(e,S,x);var r=m(e).byteLength,a=l(t);if(a<0||a>r)throw E("Wrong offset");if(a+(n=n===undefined?r-a:d(n))>r)throw E("Wrong length");_(this,{buffer:e,byteLength:n,byteOffset:a}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},i&&(V(S,"byteLength"),V(T,"buffer"),V(T,"byteLength"),V(T,"byteOffset")),s(T.prototype,{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return B(H(this,4,e,arguments[1]))},getUint32:function(e){return B(H(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return M(H(this,4,e,arguments[1]),23)},getFloat64:function(e){return M(H(this,8,e,arguments[1]),52)},setInt8:function(e,t){z(this,1,e,N,t)},setUint8:function(e,t){z(this,1,e,N,t)},setInt16:function(e,t){z(this,2,e,F,t,arguments[2])},setUint16:function(e,t){z(this,2,e,F,t,arguments[2])},setInt32:function(e,t){z(this,4,e,q,t,arguments[2])},setUint32:function(e,t){z(this,4,e,q,t,arguments[2])},setFloat32:function(e,t){z(this,4,e,j,t,arguments[2])},setFloat64:function(e,t){z(this,8,e,U,t,arguments[2])}});y(S,b),y(T,x),t.ArrayBuffer=S,t.DataView=T},function(e,t,n){var r=n(117),i=n(77);e.exports=function(e){if(e===undefined)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){var r=n(117);e.exports=function(e,t){var n=r(e);if(n<0||n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(246),i=n(91),a=n(394),o=n(87).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";var r=n(164),i=n(89),a=n(319),o=n(281),s=n(77),u=n(193),c=n(269);e.exports=function(e){var t,n,l,d,f=i(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:undefined,y=v!==undefined,g=0,m=c(f);if(y&&(v=r(v,p>2?arguments[2]:undefined,2)),m==undefined||h==Array&&o(m))for(n=new h(t=s(f.length));t>g;g++)u(n,g,y?v(f[g],g):f[g]);else for(d=m.call(f),n=new h;!(l=d.next()).done;g++)u(n,g,y?a(d,v,[l.value,g],!0):l.value);return n.length=g,n}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){"use strict";var r=n(443),i=n(310),a=n(259),o=n(796),s="toString",u=/./.toString,c=RegExp.prototype,l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=s;(l||d)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(13);t.a={error_code_title1:"喔喔，播放失敗啦~",error_code_desc1:"試試更穩定、流暢的愛奇藝客戶端",error_code_desc2:"檢測發現您可能在使用惡意插件，請檢查並解安裝後重試",error_code_desc6:"很抱歉，你訪問的視頻丟了",error_code_desc7:"該視頻目前還未通過審核",error_code_title9:"很抱歉，該視頻已被刪除，感謝您使用愛奇藝",error_code_title10:"很抱歉，由於版權問題該視頻已下線。感謝您使用愛奇藝",error_code_desc10:"你可以試試匯集全網視頻的  愛奇藝客戶端",error_code_desc11:"很抱歉，因爲版權限制，本節目暫無法觀看",error_code_title12:"很抱歉，由於平台限制原因，該視頻無法在網頁端播放。",error_code_desc12:"請使用愛奇藝客戶端觀看",error_code_title13:"由於版權限制，您所在的地區無法觀看該視頻",error_code_title15:"由於版權限製，您所在的地區無法觀看該視頻 <br/> 請訪問 IQ.COM 觀看更多精彩內容",error_code_desc13:"更有多語言字幕，更多海外版權內容等你來看",error_code_desc14:"本視頻為作者的超級粉絲專享內容，請使用移動端愛奇藝App或隨刻App觀看",controls_tip_vrplay:"使用爱奇艺VR APP可获得更佳观影体验",error_code_title14:"應版權方要求本視頻為加密格式，此瀏覽器暫不支持播放。<br/>推薦使用最新版本的Chrome瀏覽器或使用客戶端進行觀看。"+(r.a.browser.FIREFOX?"<br/>如Firefox瀏覽器提示安裝播放組件請等待":""),error_code_desc21:"您沒有權限觀看此視頻",error_code_desc22:"您的帳號僅限2臺設備同時播放，請停止其他設備播放等待5分鍾或修改密碼",error_code_switch_flash:"播放出錯了，請點擊切換到原版Flash播放器",error_code_desc_http:"播放出錯了，請稍後刷新重試",error_code_title301:"很抱歉，當前視頻播放失敗，請刷新後再次嘗試。<br/>可點擊幫助反饋，上報播放問題，我們會盡快幫您解決~",error_code_audio_err:"很抱歉，您的系統音頻驅動可能出了問題，試試重新插拔音頻外設或重啟計算機。<br/>可點擊幫助反饋，上報播放問題~",error_code_vda_err:"硬件加速故障，試試在瀏覽器設置中關閉“硬件加速模式”，關閉後使用CPU解碼。<br/>可點擊幫助反饋，上報播放問題~",error_code_desc_ad:"喔喔...廣告無法正常播放了，開通VIP功能跳過廣告，或關閉屏蔽廣告功能",controls_tip_history:'您上次觀看至<i class="iqp-txt-selected">#time#</i> 處, 已為您自動續播。',controls_tip_skipheader:"已為您跳過片頭",controls_tip_skiptailer:"即將為您跳過片尾",controls_tip_zstip:"尊貴的星鑽VIP會員,您已使用觀影券觀看本片",controls_tip_cdtip:"尊貴的星鑽VIP會員,您已免費解鎖本劇超前點映",controls_tip_yytip:"尊貴的星鑽VIP會員,您可以免費觀看本劇",controls_tip_recharge_type1:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通VIP會員</a>',controls_tip_recharge_type4:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請立即購買，點擊 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通網球會員</a>',controls_tip_recharge_type2:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">購買本片</a>',controls_tip_recharge_type3:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券觀看</a>',controls_tip_recharge_defaultype:'免費觀看前<i class="iqp-txt-selected">preview_time</i>分鐘，完整觀看請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">立即購買</a>',controls_tip_skipheadertailer:"跳過片頭片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在緩衝",controls_tip_switching:"正在切換至",controls_tip_switchedsucc:"已切換至",controls_tip_switchwaiting:"",controls_tip_switchedfail:"畫質切換失敗，請檢查網絡並再次嘗試",controls_tip_switchedpic:"",controls_tip_playspeedguide:"在這裏可以調節播放倍速",controls_tip_speed_changed:'已開啟<i class="iqp-txt-selected">XX</i>倍速播放',controls_tip_speed_changed_n:'已恢復<i class="iqp-txt-selected">XX</i>速度播放',controls_split_tip:" (支持長按方向右鍵“→” )",controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切換到",controls_subtitles_tip_switchedsucc:"已成功切換到",controls_subtitles_tip_switchwaiting:"字幕，請稍候",controls_subtitles_tip_switchedfail:"字幕切換失敗，請檢查網絡並再次嘗試",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"選集",controls_clickplay_hover:"點擊播放",controls_clickpause_hover:"點擊暫停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"網頁全屏",controls_exitwebfullscreen_hover:"退出網頁全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下載",controls_download_mobile:"立即體驗",controls_clientdownload_mobile:"使用愛奇藝客戶端，視頻播放更流暢~",controls_cycleplay:"循環播放",controls_select_player:"播放器選擇",controls_setting_recommend:"推薦使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:"下壹條視頻 ",definition_name_limit:"極速",definition_name_limit_vd:"240P",definition_name_standard:"流暢",definition_name_standard_vd:"360P",definition_name_high:"標清",definition_name_high_vd:"480P",definition_name_superhigh:"準高清",definition_name_superhigh_vd:"720P",definition_name_720p:"準高清",definition_name_720p_vd:"720P",definition_name_1080p:"高清",definition_name_1080p_vd:"1080P",definition_name_4k:"超高清",definition_name_4k_vd:"4K",definition_name_8k:"超高清",definition_name_8k_vd:"8K",definition_name_1080P50:"高清",definition_name_1080P50_vd:"1080P50",definition_name_ad:"廣告",definition_name_auto:"智能(#definition#)",definition_name_pca4k:"客戶端 4K",error_errorcode_text:"錯誤代碼",error_tryrefresh:"立即刷新",error_jump:"立即跳轉",error_download:"使用客戶端觀看",error_help:"幫助反饋",error_refresh:"刷新重試",error_private_video:"該視頻為私密視頻，密碼輸入正確後才可播放哦",error_private_selfsee:"該視頻為私密視頻，僅發布者可見哦~",error_private_pwderror:"密碼輸入不正確，請輸入正確密碼",error_confirm:"確認",error_input_pwd:"請輸入密碼",loading_text:"正在全力加載，請稍候…",score_task_guide:"再看10分鐘即可領取積分噢~",score_task_login:"觀看任務完成，送積分兌超值好禮",score_task_success:"恭喜完成觀看視頻任務！<br>送你#score#積分獎勵",score_task_btn_info1:"查看詳情",score_task_btn_info2:"我的積分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即領取",ban_btn:"修改密碼",ban_tip_001:"賬號最多同時在2臺設備播放，終止其餘設備播放或修改密碼恢復",ban_tip_002:"檢測到賬號被多人共享，會員權益已暫停，請修改密碼",ban_tip_004:"檢測到您的帳號被嚴重分享，已永久封禁",error_maintitle:"Flash插件異常",error_fltitle:"下載官方Flash插件",error_h5title:"正在切換HTML5播放模式",error_fltip:"已安裝仍無法觀看",subtitles_switch:"字幕",subtitles_setting:"字幕設置",subtitles_back:"返回",subtitles_fontsize:"字號",subtitles_alpha:"透明度",subtitles_language:"語言",picture_in_picture:"畫中畫",contentMenu_bug:"問題反饋",contentMenu_link:"復制鏈接",contentMenu_shortcut:"快捷鍵說明",contentMenu_console:"播放狀態查詢",contentMenu_shortcut_text:"播放快捷鍵",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放 / 暫停",contentMenu_shortcut_text2_2:"：音量提高5%",contentMenu_shortcut_text2_4:"：音量降低5%",contentMenu_shortcut_text3_1:"：快退5秒",contentMenu_shortcut_text4_1:"：單次快進5秒",contentMenu_shortcut_text4_2:"長按倍速播放",contentMenu_shortcut_text5_2:"：播放上壹集",contentMenu_shortcut_text5_4:"：播放下壹集",contentMenu_shortcut_text7_2:"：進入全屏 / 退出全屏",contentMenu_shortcut_text8_2:"：開啟靜音 / 取消靜音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：退出全屏",infoPanelUnknown:"未知",infoPanelNetText:"網絡類型：",infoPanelSpeedText:"加載速度：",infoPanelWaitingText:"緩衝時長：",infoPanelLostText:"丟幀率：",infoPanelProtocolText:"視頻協議：",infoPanelCdnText:"CDN：",infoPanelSolutionText:"分辨率：",infoPanelVideoSizeText:"視圖尺寸：",infoPanelVoiceText:"音量大小：",infoPanelEngineText:"播放引擎：",infoPanelVideoTypeText:"資源類型：",infoPanelDRMText:"DRM類型：",infoPanelDebugText:"調試日誌：",infoPanelDebugBtn:"點擊下載",big_hotkey_playbackratet_text:"進行中",loading_download_speed:"加載速度:",top_tip_like:"點贊",top_tip_cancel_like:"取消點贊",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"畫面尺寸",def_vip:"會員",def_free:"限免",def_login:"登錄",audiotrack_tip_switching:"正在切換到",audiotrack_tip_switchedsucc:"已成功切換到",audiotrack_tip_switchwaiting:"請稍候...",audiotrack_tip_video:"視頻",audiotrack_tip_switchedfail:"切換失敗，請檢查網絡並再次嘗試",toast_tip_mutestartplay:"由於瀏覽器限制，請手動開啟聲音",mini_autoplay_loading:"即將播放",aiview_request:"識別中...",aiview_neterror:"訪問用戶過多, 請稍後重試",aiview_zero:"哎呀什麼都沒識別到"}},function(e,t,n){"use strict";var r=n(13);t.a={error_code_title1:"呃，播放失败啦~",error_code_desc1:"试试更稳定、流畅的爱奇艺客户端",error_code_desc2:"检测发现您可能在使用恶意插件，请检查并卸载后重试",error_code_desc6:"很抱歉，你访问的视频丢了",error_code_desc7:"该视频当前还未通过审核",error_code_title9:"很抱歉，该视频已被删除，感谢您使用爱奇艺",error_code_title10:"很抱歉，由于版权问题该视频已下线。感谢您使用爱奇艺",error_code_desc10:"你可以试试汇集全网视频的  爱奇艺客户端",error_code_desc11:"很抱歉，因为版权限制，本节目暂无法观看",error_code_title12:"很抱歉，由于平台限制原因，该视频无法在网页端播放。",error_code_desc12:"请使用爱奇艺客户端观看",error_code_title13:"由于版权限制，您所在的地区无法观看该视频",error_code_title15:"由于版权限制，您所在的地区无法观看该视频 <br/> 请访问 IQ.COM 观看更多精彩内容",error_code_desc13:"更有多语言字幕，更多海外版权内容等你来看",error_code_desc14:"本视频为作者的超级粉丝专享内容，请使用移动端爱奇艺App或随刻App观看",error_code_title14:"应版权方要求本视频为加密格式，此浏览器暂不支持播放。<br/>推荐使用最新版本的Chrome浏览器或爱奇艺客户端进行观看。"+(r.a.browser.FIREFOX?"<br/>如Firefox浏览器提示安装播放组件请等待":""),error_code_desc21:"您没有权限观看此视频",error_code_desc22:"您的账号仅限2台设备同时播放，请停止其他设备播放等待5分钟或修改密码",error_code_switch_flash:"播放出错了，请点击切换到原版Flash播放器",error_code_desc_http:"播放出错了，请稍后刷新重试",error_code_title301:"很抱歉，当前视频播放失败，请刷新后再次尝试。<br/>可点击帮助反馈，上报播放问题，我们会尽快帮您解决~",error_code_audio_err:"很抱歉，您的系统音频驱动可能出了问题，试试重新插拔音频外设或重启计算机。<br/>可点击帮助反馈，上报播放问题~",error_code_vda_err:"硬件加速故障，试试在浏览器设置中关闭“硬件加速模式”，关闭后使用CPU解码。<br/>可点击帮助反馈，上报播放问题~",error_code_desc_ad:"呃...广告无法正常播放了，开通VIP功能跳过广告，或关闭屏蔽广告功能",controls_tip_cqdb:'打开爱奇艺桌面版，观看超前点播剧集 <a href="javascript:;" class="iqp-txt-selected" data-event="download">立即体验</a>',controls_tip_vrplay:"使用爱奇艺VR APP可获得更佳观影体验",controls_tip_history:'您上次观看至<i class="iqp-txt-selected">#time#</i> 处, 已为您自动续播。',controls_tip_skipheader:"已为您跳过片头",controls_tip_skiptailer:"即将为您跳过片尾",controls_tip_zstip:"尊贵的星钻VIP会员,您已使用观影券观看本片",controls_tip_cdtip:"尊贵的星钻VIP会员,您已免费解锁本剧超前点播",controls_tip_yytip:"尊贵的星钻VIP会员，您可免费观看本剧",controls_tip_recharge_type1:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通VIP会员</a>',controls_tip_recharge_type4:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通网球会员</a>',controls_tip_recharge_type2:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">购买本片</a>',controls_tip_recharge_type3:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券观看</a>',controls_tip_recharge_defaultype:'正在试看，观看完整内容请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">购买</a>',controls_tip_skipheadertailer:"跳过片头片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在缓冲",controls_tip_switching:"正在切换至",controls_tip_switchedsucc:"已切换到至",controls_tip_switchwaiting:"",controls_tip_switchedfail:"画质切换失败，请检查网络并再次尝试",controls_tip_switchedpic:"",controls_tip_playspeedguide:"在这里可以调节播放倍速",controls_tip_speed_changed:'已开启<i class="iqp-txt-selected">XX</i>倍速播放',controls_tip_speed_changed_n:'已恢复<i class="iqp-txt-selected">XX</i>速度播放',controls_split_tip:" (支持长按方向右键“→” )",controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切换到",controls_subtitles_tip_switchedsucc:"已成功切换到",controls_subtitles_tip_switchwaiting:"字幕，请稍候",controls_subtitles_tip_switchedfail:"字幕切换失败，请检查网络并再次尝试",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"选集",controls_clickplay_hover:"点击播放",controls_clickpause_hover:"点击暂停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"网页全屏",controls_exitwebfullscreen_hover:"退出网页全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下载",controls_download_mobile:"立即体验",controls_clientdownload_mobile:"使用爱奇艺客户端，视频播放更流畅~",controls_cycleplay:"循环播放",controls_select_player:"播放器选择",controls_setting_recommend:"推荐使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:"下一条视频 ",definition_name_limit:"极速",definition_name_limit_vd:"240P",definition_name_standard:"流畅",definition_name_standard_vd:"360P",definition_name_high:"标清",definition_name_high_vd:"480P",definition_name_superhigh:"准高清",definition_name_superhigh_vd:"720P",definition_name_720p:"准高清",definition_name_720p_vd:"720P",definition_name_1080p:"高清",definition_name_1080p_vd:"1080P",definition_name_hdr:"爱奇艺",definition_name_hdr_vd:"HDR",definition_name_4k:"超高清",definition_name_4k_vd:"4K",definition_name_8k:"超高清",definition_name_8k_vd:"8K",definition_name_1080P50:"高清",definition_name_1080P50_vd:"1080P50",definition_name_ad:"广告",definition_name_auto:"智能(#definition#)",definition_name_pca4k:"客户端最高4K",error_errorcode_text:"错误代码",error_tryrefresh:"立即刷新",error_download:"使用客户端观看",error_jump:"立即跳转",error_help:"帮助反馈",error_refresh:"刷新重试",error_private_video:"该视频为私密视频，密码输入正确后才可播放哦",error_private_selfsee:"该视频为私密视频，仅发布者可见哦~",error_private_pwderror:"密码输入不正确，请输入正确密码",error_confirm:"确认",error_input_pwd:"请输入密码",loading_text:"正在全力加载，请稍候…",score_task_guide:"再看10分钟即可领取积分噢~",score_task_login:"观看任务完成，领积分兑超值好礼",score_task_success:"恭喜完成观看视频任务！<br>送你#score#积分奖励",score_task_btn_info1:"查看详情",score_task_btn_info2:"我的积分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即领取",score_task_btn_login1:"立即登录",ban_btn:"修改密码",ban_tip_001:"账号最多同时在2台设备播放，终止其余设备播放或修改密码恢复",ban_tip_002:"检测到账号被多人共享，会员权益已暂停，请修改密码",ban_tip_004:"检测到您的帐号被严重分享，已永久封禁",error_maintitle:"Flash插件异常",error_fltitle:"下载官方Flash插件",error_h5title:"正在切换HTML5播放模式",error_fltip:"已安装仍无法观看",subtitles_switch:"字幕",subtitles_setting:"字幕设置",subtitles_back:"返回",subtitles_fontsize:"字号",subtitles_alpha:"透明度",subtitles_language:"语言",picture_in_picture:"画中画",contentMenu_bug:"播放问题反馈",contentMenu_link:"复制视频链接",contentMenu_timelink:"复制当前时间的视频链接",contentMenu_shortcut:"快捷键说明",contentMenu_console:"播放状态查询",contentMenu_shortcut_text:"播放快捷键",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放 / 暂停",contentMenu_shortcut_text2_2:"：音量提高5%",contentMenu_shortcut_text2_4:"：音量降低5%",contentMenu_shortcut_text3_1:"：快退5秒",contentMenu_shortcut_text4_1:"：单次快进5秒",contentMenu_shortcut_text4_2:"长按倍速播放",contentMenu_shortcut_text5_2:"：播放上一集",contentMenu_shortcut_text5_4:"：播放下一集",contentMenu_shortcut_text7_2:"：进入全屏 / 退出全屏",contentMenu_shortcut_text8_2:"：开启静音 / 取消静音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：退出全屏",infoPanelUnknown:"未知",infoPanelNetText:"网络类型：",infoPanelSpeedText:"加载速度：",infoPanelWaitingText:"缓冲时长：",infoPanelLostText:"丢帧率：",infoPanelProtocolText:"视频协议：",infoPanelCdnText:"CDN：",infoPanelSolutionText:"分辨率：",infoPanelVideoSizeText:"视图尺寸：",infoPanelVoiceText:"音量大小：",infoPanelEngineText:"播放引擎：",infoPanelVideoTypeText:"资源类型：",infoPanelDRMText:"DRM类型：",infoPanelDebugText:"调试日志：",infoPanelDebugBtn:"点击下载",big_hotkey_playbackratet_text:"倍速播放中",loading_download_speed:"加载速度:",top_tip_like:"点赞",top_tip_cancel_like:"取消点赞",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"画面尺寸",def_vip:"VIP",def_loginE:"登录可享",def_free:"限免",def_sport:"体育会员",def_login:"登录",audiotrack_tip_switching:"正在切换到",audiotrack_tip_switchedsucc:"已成功切换到",audiotrack_tip_switchwaiting:"请稍候...",audiotrack_tip_video:"视频",audiotrack_tip_switchedfail:"切换失败,请检查网络并再次尝试",toast_tip_mutestartplay:"由于浏览器限制，请手动开启声音",mini_autoplay_loading:"即将播放",aiview_request:"识别中...",aiview_neterror:"服务器未知错误, 请稍后重试",aiview_zero:"哎呀, 什么都没识别到"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(123),i=n.n(r);function a(e,t){"object"!=i()(e)&&(e=[e]);var n=document.getElementsByTagName("head").item(0)||document.documentElement,r=[],a=e.length-1;!function o(i){r[i]=document.createElement("script"),r[i].setAttribute("type","text/javascript"),r[i].onload=r[i].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),i!=a?o(i+1):"function"==typeof t&&t(!0))},r[i].onerror=r[i].onstalled=function(){"function"==typeof t&&t(!1)},r[i].setAttribute("src",e[i]),n.appendChild(r[i])}(0)}},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,'@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}iqp,iqpdiv{display:block}.iqp-player{position:relative;width:100%;height:100%;min-width:200px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important}.iqp-player.iqp-full-screen50 video,.iqp-player.iqp-full-screen75 video{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.iqp-player.iqp-full-screen75 video{width:75%!important;height:75%!important}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none;margin:0;padding:0}.iqp-player p{margin:0;padding:0}.iqp-player .clearfix:after,.iqp-player .clearfix:before{content:"";display:table}.iqp-player .clearfix:after{clear:both}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-player-videolayer{position:relative;width:100%;height:100%}.iqp-player .iqp-player-videolayer .iqp-player-videolayer-inner{position:relative;width:100%;height:100%;overflow:hidden}.iqp-player .iqp-player-zoomout .iqp-player-videolayer{height:auto;width:auto;position:absolute;top:24px;bottom:120px;left:456px;right:24px;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.iqp-player .iqp-player-zoomout .iqp-player-videolayer .iqp-player-videolayer-inner{border-radius:8px}.iqp-player .iqp-player-zoomout .iqp-videolayer-narrow{left:536px}.iqp-player .iqp-player-zoomout .iqp-videolayer-rf-mode{left:24px;right:476px}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}.iqp-player.iqp-player-mini{cursor:pointer}.iqp-player .iqp-dock{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:50px;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;z-index:95}.iqp-player .iqp-dock .iqp-dock-item{position:relative;cursor:pointer}.iqp-player .iqp-dock .iqp-dock-item .iqp-dock-btn-item .iqp-dock-hover-tip{display:none;position:absolute;top:11px;right:55px;height:28px;line-height:28px;padding:0 8px;background:rgba(0,0,0,.5);border-radius:3px;font-size:14px;color:#fff;white-space:nowrap}.iqp-player .iqp-dock .iqp-dock-item .iqp-dock-btn-item:hover .iqp-dock-hover-tip{display:block}.iqp-player .iqp-contrl,.iqp-player .iqp-dock,.iqp-player .iqp-top{color:hsla(0,0%,100%,.9)}.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-pullup,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-pullup,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-pullup{color:#999}.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-label,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon,.iqp-player .iqp-dock .iqp-btn:hover .iqp-label,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon,.iqp-player .iqp-top .iqp-btn:hover .iqp-label{color:#00cc4c}.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-label,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon,.iqp-player .iqp-dock .iqp-btn.selected .iqp-label,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon,.iqp-player .iqp-top .iqp-btn.selected .iqp-label{color:#00be06}.iqp-player .flash-max{width:100%;height:100%}.dn,.iqp-dn1,.iqp-dn2,.iqp-dn3,.iqp-dn4,.iqp-dn5,.iqp-plg-hide{display:none!important}.bottom-public{position:absolute;bottom:0;height:56px;width:100%;z-index:100}.bottom-public .btn-pause,.bottom-public .btn-play{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:36px;height:36px;position:relative;display:inline-block;cursor:pointer}.bottom-public .bottom-public_play,.bottom-public .bottom-public_voice{background:rgba(26,26,26,.8);width:36px;height:36px;border-radius:50%;position:absolute;text-align:left}.bottom-public .bottom-public_play{left:20px}.bottom-public .bottom-public_play .btn-play{left:0;top:0;background-position:-232px -416px!important;transition:none;z-index:1}.bottom-public .bottom-public_play .btn-pause{left:0;top:0;background-position:-320px -328px!important;transition:none;z-index:1}.bottom-public .bottom-public_play:hover .btn-pause{background-position:-320px -372px!important}.bottom-public .bottom-public_play:hover .btn-play{background-position:-232px -460px!important}.bottom-public .bottom-public_voice{left:72px;text-align:left}.bottom-public .bottom-public_voice i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:36px;height:36px;position:relative;display:inline-block;cursor:pointer}.bottom-public .bottom-public_voice .voice-big{left:0;top:0;background-position:-232px -328px!important}.bottom-public .bottom-public_voice .voice-no{left:0;top:0;background-position:-276px -328px!important}.bottom-public .bottom-public_voice:hover .voice-big{background-position:-232px -372px!important}.bottom-public .bottom-public_voice:hover .voice-no{background-position:-276px -372px!important;left:0;top:0}.bottom-public .know-detail{padding:9px 15px;border-radius:30px;background:rgba(26,26,26,.7);display:block;float:right;color:#fff;margin-right:72px;line-height:18px;font-size:14px}.bottom-public .know-detail:hover{color:rgba(0,204,76,.7)}.bottom-public .public-screen{position:absolute;right:20px;text-align:left}.bottom-public .public-screen i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:36px;height:36px;position:relative;display:inline-block;cursor:pointer}.bottom-public .public-screen:hover .screen-small{background-position:-276px -460px}.bottom-public .public-screen:hover .screen-all{background-position:-320px -460px}.bottom-public .public-screen .screen-small{background-position:-276px -416px}.bottom-public .public-screen .screen-all{background-position:-320px -416px}.iqp-bottom-detail{position:absolute;bottom:66px;right:20px;width:90px;height:26px;line-height:26px;border-radius:13px;text-align:center;color:#fff;background-color:#00be06;z-index:100;cursor:pointer}.iqp-bottom-detail:before{content:"";width:28px;height:28px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) 0 -120px;float:right;-webkit-transform:scale(.5);transform:scale(.5);margin:0 2px 0 -14px}.iqp-bottom-detail:hover{background-color:#00c806}.iqp-big-mode .iqp-bottom-detail{bottom:80px}.iqp-player-icon{background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) no-repeat}@font-face{font-family:pcw-player-iconfont;src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot);src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.woff) format("woff"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.ttf) format("truetype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.svg#iconfont) format("svg")}.player-iconfont{font-family:pcw-player-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.player-iconfont.icon-shuaxin:before{content:"\\e68c"}.fade-show{opacity:0;-webkit-animation:iqp-show 2s forwards;animation:iqp-show 2s forwards}',""])},function(e,t){e.exports='<iqpdiv data-player-hook=container class=iqp-player> <iqpdiv data-player-hook=adbantip class=iqp-ban-tip-stream style=display:none> <iqpspan class=iqp-stream-switch> <iqpspan data-player-hook=txt></iqpspan> <a data-player-hook=link class="iqp-txt-selected primary pointer" target=_blank></a> </iqpspan> <svg class="iqp-icon iqp-adbantips-stream-close" id=adbantips_close data-player-hook=close> <use class="iqp-svg-symbol iqp-svg-close" xlink:href=#iqp-svg-close></use> </svg> </iqpdiv> <iqpdiv data-player-hook=ivoslayer style=display:none> </iqpdiv> <iqpdiv tabindex=-1 class=iqp-player data-player-hook=outlayer> <iqpdiv class=iqp-player-videolayer data-player-hook=videolayer> <iqpdiv class=iqp-player-videolayer-inner data-player-hook=videoinnerlayer> <video width=100% height=100% x-webkit-airplay=allow webkit-playsinline playsinline></video> <iqpdiv data-player-hook=plgcontainer> <iqpdiv class=iqp-barrage></iqpdiv> <iqpdiv data-player-hook=pageContainer> <div id=qiguanAIBox class=qiguan-baike> </div> <div id=TVGBox></div> <div id=TVGAllBox></div> </iqpdiv> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-player-innerlayer data-player-hook=innerlayer> <iqpdiv data-player-hook=sub-plgcontainer></iqpdiv> </iqpdiv> <iqpdiv class=flash-max data-player-hook=outadmax style=display:none></iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-pad" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mobile" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow custom-cache=false x-webkit-airplay=allow webkit-playsinline playsinline></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mini" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow data-style></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:12px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:18px;height:18px;margin-right:5px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat;background-size:18px 18px}",""])},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}",""])},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-player-mobile .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:263px;white-space:normal}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-bg{width:128px;height:59px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:27px;margin-left:auto;margin-right:auto;background-size:128px 59px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-line{width:225px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:225px 1.5px;margin-left:auto;margin-right:auto}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;background-size:169px 53px;margin-bottom:15px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat;background-size:90px 80px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;background-size:196px 52px;margin-bottom:22px}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}",""])},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:440px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:440px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}",""])},function(e,t){e.exports='<iqpdiv class=iqp-loading-layer data-player-hook=loading> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img lazy_src=//www.iqiyipic.com/playerLoading/pcw_vip.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_sm.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_ep.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_image> <img class=loadingImage width=100% height=100% /> <iqpdiv class=iqp-btn-mid> <iqpdiv class=iqp-mid-circle> <iqpdiv class=iqp-mid-loading> <svg aria-hidden=true class="iqp-icon iqp-icon-loading"> <use xlink:href=#iqp-svg-loading class="iqp-svg-symbol iqp-svg-loading"> </use> </svg> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_st.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loading" aria-hidden=true> <use xlink:href=#iqp-svg-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-loading-layer{position:absolute;top:0;left:0;height:100%;width:100%;z-index:110}.iqp-loading-layer .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:440px;white-space:normal}.iqp-loading-layer .iqp-logo-loading .iqp-logoload-gif{width:440px}.iqp-loading-layer .iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}",""])},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText>正在全力加载，请稍后…</iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img src=//www.iqiyipic.com/player/cn/pad_vip.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img src=//www.iqiyipic.com/player/cn/20220421/pad_produced.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img src=//www.iqiyipic.com/player/cn/pad_exclusive.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img src=//www.iqiyipic.com/player/cn/20220421/pad_common.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText>正在全力加载，请稍后…</iqpspan> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,"@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}.iqp-layer-loading .iqp-icon-loadingmini{color:#00cc36;width:32px;height:32px;-webkit-animation:iqp-rotate-360 1s infinite;animation:iqp-rotate-360 1s infinite}",""])},function(e,t){e.exports="<iqpdiv data-player-hook=loadingposter class=iqp-poster style=display:none;background-size:cover></iqpdiv>"},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loadingmini" aria-hidden=true> <use xlink:href=#iqp-svg-mini-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t){e.exports=' <iqpdiv class="iqp-layer iqp-layer-tw-guide" data-player-hook=mobiletwblock style=display:none> <iqpdiv class=iqp-layer-con> <div class=download-intlapp-tip> <p data-player-hook=twinfo>當前視頻僅支持試看5分鐘，歡迎下載APP觀看完整版</p> </div> <div> <a class=download-intlapp-btn data-player-hook=mobiledownload>下載APP觀看完整超清視頻</a> </div> <div class=download-intlapp-watch data-player-hook=mobiletwwatch> <span data-player-hook=twpreview style=display:none>試看5分鐘 > </span> <span data-player-hook=twreplay style=display:none> <i class="player-iconfont icon-shuaxin"></i>重新試看 </span> </div> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-layer-tw-guide .download-intlapp-tip{line-height:20px;font-size:14px}.iqp-layer-tw-guide .download-intlapp-btn{display:inline-block;color:#fff;height:36px;line-height:36px;min-width:88px;padding:0 16px;border-radius:2px;background-color:#00cc36;font-size:14px;margin:24px 0 16px}.iqp-layer-tw-guide .download-intlapp-watch{font-weight:600;color:#00c234;font-size:13px;line-height:16px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer}.iqp-layer-tw-guide .download-intlapp-watch .icon-shuaxin{vertical-align:-1px;margin-right:5px}",""])},function(e,t,n){(e.exports=n(71)(!1)).push([e.i,".iqp-player-vippay-popup{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;text-align:center;z-index:100}.iqp-player-vippay-popup .iqp-vippay-popup{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:510px;text-align:left;vertical-align:middle}.iqp-player-vippay-popup .iqp-popup-main{text-align:center}.iqp-player-vippay-popup .iqp-major-txt{display:inline-block;max-width:410px;text-align:left;font-size:16px;color:#fff;line-height:26px}.iqp-player-vippay-popup .iqp-btn-switch{direction:rtl}.iqp-player-vippay-popup .iqp-btn-wrap{text-align:center;font-size:0;padding:20px 0 30px;margin:0 -7px}.iqp-player-vippay-popup .iqp-vippay-btn{position:relative;display:inline-block;margin:0 7px;width:242px;height:36px;line-height:36px;background-color:#dab176;color:#582d00;border-radius:18px;text-align:center;font-size:16px;text-decoration:none;cursor:pointer;vertical-align:top;direction:ltr}.iqp-player-vippay-popup .iqp-vippay-btn:hover{color:#582d00;background-color:#e2bc81}.iqp-player-vippay-popup .iqp-vip-popup-profit{overflow:hidden}.iqp-player-vippay-popup .iqp-profit-h3{color:#c8a06a;font-size:16px;padding:4px 0 16px}.iqp-player-vippay-popup .iqp-profit-list{margin-right:-54px;*zoom:1}.iqp-player-vippay-popup .iqp-profit-item{float:left;padding-bottom:20px;padding-right:53px}.iqp-player-vippay-popup .iqp-profit-txt{font-size:12px;color:#fff}.iqp-player-vippay-popup .iqp-sprite-player-pay{display:inline-block;width:26px;height:26px;vertical-align:-8px;margin-right:7px;background:url(//www.iqiyipic.com/common/fix/site-v4/play/sprite-player-pay-200306.png) no-repeat}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-free-con-icon{background-position:0 -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-no-AD-icon{background-position:-40px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-vip-sign-icon{background-position:-80px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-request-play-icon{background-position:-120px -20px}",""])},function(e,t){e.exports=' <iqpdiv class=iqp-player-vippay-popup data-player-hook=vippay style=display:none;position:absolute;top:0;left:0;height:100%;width:100%> <iqpdiv class=iqp-vippay-popup> <iqpdiv class=iqp-popup-main> <iqp class=iqp-major-txt data-player-hook=viptxt></iqp> <iqpdiv class=iqp-btn-wrap> <a href=javascript:; class=iqp-vippay-btn data-player-hook=playbtn>立即观看</a> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-popup-intro> <iqpdiv class=iqp-vip-popup-profit> <iqph3 class=iqp-profit-h3>VIP会员尊享权益</iqph3> <ul class=iqp-profit-list> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-free-con-icon"></iqpi> <iqpspan class=iqp-profit-txt>院线新片</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-vip-sign-icon"></iqpi> <iqpspan class=iqp-profit-txt>尊贵身份</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-request-play-icon"></iqpi> <iqpspan class=iqp-profit-txt>热剧抢先看</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-no-AD-icon"></iqpi> <iqpspan class=iqp-profit-txt>广告特权</iqpspan> </li> </ul> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){"use strict";n(34);var r=n(14),i=n.n(r),a=n(15),o=n.n(a),s=n(119),u=n.n(s),c=n(20),l=n.n(c),d=n(21),f=n.n(d),h=n(10),p=n.n(h),v=(n(22),n(36),n(32),n(82),n(235),n(1)),y=n(83),g=[{name:"ID_SHOW_CONTROL_BAR",status:!0},{name:"ID_SHOW_CONTROL_BAR_SEEK_BAR",status:!0},{name:"ID_SHOW_CONTROL_BAR_SKIP_TIP",status:!1},{name:"ID_SHOW_CONTROL_BAR_VIEW_TIP",status:!1},{name:"ID_SHOW_CONTROL_BAR_PREVIEW",status:!1},{name:"ID_SHOW_CONTROL_BAR_FF",status:!1},{name:"ID_SHOW_CONTROL_BAR_LOOP_PLAY_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_NEXT_BTN",status:!0},{name:"ID_SHOW_CONTROL_BAR_TIME",status:!0},{name:"ID_SHOW_CONTROL_BAR_VOLUME",status:!0},{name:"ID_SHOW_CONTROL_BAR_FULLSCREEN",status:!0},{name:"ID_SHOW_CONTROL_BAR_SETTING",status:!1},{name:"ID_SHOW_CONTROL_BAR_CAPTURE",status:!1},{name:"ID_SHOW_CONTROL_BAR_CAPTION",status:!1},{name:"ID_SHOW_CONTROL_BAR_TRACK",status:!1},{name:"ID_SHOW_DOCK",status:!1},{name:"ID_SHOW_DOCK_SHARE",status:!1},{name:"ID_SHOW_DOCK_LIGHT",status:!1},{name:"ID_SHOW_DOCK_DEFINITION",status:!1},{name:"ID_SHOW_DOCK_DETAILS",status:!1},{name:"ID_SHOW_DOCK_OFFLINE_WATCH",status:!1},{name:"ID_SHOW_WIDESCREEN_BTN",status:!1},{name:"ID_SHOW_LOGO",status:!1},{name:"ID_SHOW_RECOMMEND",status:!1},{name:"ID_ENABLE_AD",status:!1},{name:"ID_SHOW_TIPS",status:!1},{name:"ID_SHOW_MAX_MIN_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_EXPAND_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_TVLIST_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_3D_BTN",status:!1},{name:"ID_SKIP_MIDDLE_AD",status:!1},{name:"ID_SHOW_TWO_DIMENSION_CODE_BTN",status:!1},{name:"ID_SHOW_GREEN_TAIL_BTN",status:!1},{name:"ID_SHOW_ADD_TO_TABLE_BTN",status:!1},{name:"ID_SHOW_COLLECT_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_ALWAYS",status:!1},{name:"ID_HIDE_VIDEO_LINK",status:!1},{name:"ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN",status:!1},{name:"ID_HIDE_SCORE_TASK",status:!1},{name:"ID_SHOW_CONTENT_MENU",status:!0},{name:"ID_SHOW_CONTENT_MENU_SHORTCUT",status:!0},{name:"ID_HIDE_HEAT_MAP",status:!1},{name:"ID_SHOW_SCREENSHOT",status:!1},{name:"ID_HIDE_PLAYBACKRATE",status:!1},{name:"ID_HIDE_PIPBTN",status:!1},{name:"ID_THEATER_MODE",status:!1},{name:"ID_SHOW_META_PANEL",status:!1},{name:"ID_SHOW_CLIENT_APP",status:!1},{name:"ID_SHOW_ACTIVITY",status:!1},{name:"ID_HIDE_TOP",status:!1},{name:"ID_SHOW_TVGBTN",status:!1},{name:"ID_SHOW_NEW_VIDEO_LIST",status:!1},{name:"ID_HIDE_MOBILE_BIG_PLAY",status:!1},{name:"ID_CLOSE_MOBILE_GESTURE",status:!1},{name:"ID_HIDE_MOBILE_POSTER",status:!1},{name:"ID_CLOSE_MOBILE_SPEED",status:!1}],m=n(6),_=n(0),b=n(13),x=n(18),k=n(26),w=(n(74),n(27),n(40),n(468)),S=n.n(w),T=n(469),P=n.n(T),E=n(470),A=n.n(E),I=n(471),D=n.n(I),L=n(472),O=n.n(L),R=n(24);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var M,B=function(e){l()(n,e);var t=C(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this,"container",e,r,a)).$plugin=Object(x.b)(o.plugin),o.engine.params.disableDev4898||o.initDev4898(),o.initAdBanTips(),o}return o()(n,[{key:"initDev4898",value:function(){var e=this.$plugin.findHook("outlayer");this.voiceBtnDom=undefined;var t=this,n=t.engine;t.view;e.on("mousewheel",(function(e){if(this.voiceBtnDom=this.voiceBtnDom||document.querySelector('.iqp-player-innerlayer .iqp-btn-voice[data-player-hook="voice"]'),!this.voiceBtnDom.contains(e.target)){var r=e.wheelDelta||0-e.detail;b.a.os.mac&&(r=-r),function(e){var r=n.getVolume(),i=.05;38===e?(r+=i)+i>1&&(r=1):(r-=i)-i<0&&(r=0),n.setVolume(r),t.fire(m.a.NTF_Voice_Change,{volume:r,key:38===e?y.h:y.f})}(r>0?38:40)}}))}},{key:"initAdBanTips",value:function(){var e=this,t=e.view,n=this.$plugin.findHook("adbantip"),r=document.getElementById("adbantips_close");function i(){e.$txt&&e.$txt.html(""),e.$link&&(e.$link.html(""),e.$link.un("click")),n.hide()}r&&r.addEventListener("click",(function(){i(),e.fire("close_ad_bantips")})),t.on("show_ad_bantips",(function(t){if(n){var r;if(e.$txt=n.findHook("txt"),e.$link=n.findHook("link"),e.$close=n.findHook("close"),e.$txt.html(t.detail.text1),e.$link.html(t.detail.text2||""),null!=t&&t.info)e.$link.attr("href","".concat(null==t||null===(r=t.info)||void 0===r?void 0:r.url,"?isHideNav=1&authcookie=").concat(_.k.get("P00001"),"}&agenttype=1&device_id=").concat(_.k.get("QC005"),"&ptid=").concat(null==t?void 0:t.info.ptid,"&tv_id=").concat(null==t?void 0:t.info.tvid,"&paid=").concat(null==t?void 0:t.info.bossStatus,"&qd_v=7"));n.show()}})),t.on("hide_ad_bantips",(function(){i()}))}}],[{key:"css",value:function(){return S.a.toString()}},{key:"html",value:function(){return P.a.toString()}},{key:"padHtml",value:function(){return A.a.toString()}},{key:"mobileHtml",value:function(){return D.a.toString()}},{key:"miniHtml",value:function(e){var t="";return e&&(t='style="object-fit: cover; transform: scale(1.32);"'),O.a.toString().replace("data-style",t)}}]),n}(R.c),N=(n(79),n(214),n(473)),F=n.n(N),q=n(474),j=n.n(q),U=n(475),V=n.n(U),H=n(476),z=n.n(H),G=n(477),W=n.n(G),K=n(478),$=n.n(K),Y=n(479),Q=n.n(Y),J=n(480),X=n.n(J);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function ee(e,t){(function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0})(e,t)||(e.className+=(e.className?" ":"")+t)}function te(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}var ne=function(e){l()(n,e);var t=Z(n);function n(e,r,a){var o;return i()(this,n),o=t.call(this,"loading",e,r,a),M=e.i18nLang,o.loadingType=o.plugin.querySelector('[data-player-hook="loadingType"]'),o.loading=o.plugin.querySelector('[data-player-hook="videolayerLoading"]'),o._speedTimer=-1,o.showBeginLoadingType="",o.isFadeOut=!1,o.init(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this,n=this.view,r=this.engine,i=n.fullscreen,a=n.webfullscreen,o=n.stagesize;b.a.os.ios||b.a.os.android||r.autoplay||r.isMini?this.showBeginLoading():this.hideBeginLoading();var s=function(){t.resize()};o&&o.on(s),i&&i.on("change",s),a&&a.on("change",s),this.plugin.querySelector('[data-player-hook="videoLoadingText"]')&&(this.plugin.querySelector('[data-player-hook="videoLoadingText"]').innerHTML=M.loading_text),r.on(v.a.NTF_StatusChanged,(function(e){switch(e.state){case v.a.Status_StartPlay:case v.a.Status_Playing:case v.a.Status_AdPlaying:case v.a.Status_AdStartPlay:case v.a.Status_End_Play:"image"==t.showBeginLoadingType?(t.isFadeOut=!0,t.fadeOut((function(){t.hideLoading(),t.hideBeginLoading(),t.plugin.style.opacity=1,t.beginloading.querySelector(".loadingImage").removeAttribute("src"),t.isFadeOut=!1})),t.showBeginLoadingType=""):t.isFadeOut||(t.hideLoading(),t.hideBeginLoading());break;case v.a.Status_AdWaiting:case v.a.Status_Waiting:(b.a.os.ios||b.a.os.android)&&r.getCurrenttime()<1&&t.showLoading();break;case v.a.Status_Loadstart:t.showLoading();break;case v.a.Status_Play:(b.a.os.ios||b.a.os.android)&&r.getCurrenttime()<1&&t.showLoading();case v.a.Status_PlayError:}}),{highPriority:!0}).on(v.a.NTF_AD_SingleStart,(function(){t.hideBeginLoading()})).on(v.a.NTF_VideoChange,(function(){t.showBeginLoading()})).on(v.a.NTF_DefinitionSwitched,(function(){t.hideBeginLoading()})).on(v.a.NTF_NeedUserGesture4Playback,(function(){t.hideBeginLoading()})),n.on(m.a.NTF_PAYLAYER_DATA,(function(t){switch(t.status){case 1:ee(e.plugin,"dn");break;case 0:te(e.plugin,"dn")}})).on(m.a.NTF_FeedBack_Show,(function(){ee(e.plugin,"iqp-dn1")})).on(m.a.NTF_FeedBack_Hide,(function(){te(e.plugin,"iqp-dn1")}))}},{key:"showBeginLoading",value:function(){var e=this;if(!(this.engine.isInteractVideo&&!this.engine.isIVMain)){var t=this.view.isTw?"_tw":"",n=this.view.getPlayIndex(),r=this.view.params,i=this.engine.movieinfo,a=i.tvid?i.imageLoader:r.imageLoader,o=!1,s=!1,u=!1;if(!r.hideBeginLoading){this.showBeginLoadingType="",this.beginloading&&(this.beginloading.style.display="none"),n>-1?(i=this.view.videoList[n]).isMember?o=!0:i.isQiyiProduced?s=!0:i.isExclusive&&(u=!0):r.isMember?o=!0:1==r.qiyiProduced?s=!0:1==r.exclusive&&(u=!0),this.beginloading=o?this.plugin.querySelector('[data-player-hook="videoLoadingVip'+t+'"]'):s?this.plugin.querySelector('[data-player-hook="videoLoadingQiyiProduced'+t+'"]'):u?this.plugin.querySelector('[data-player-hook="videoLoadingExclusive'+t+'"]'):this.plugin.querySelector('[data-player-hook="videoLoadingNormal'+t+'"]'),a&&this.engine.getEngineType()===v.a.ENGINE_TYPE&&!this.engine.isMini&&(this.beginloading=this.plugin.querySelector('[data-player-hook="videoLoadingNormal_image"]'),this.beginloading.querySelector(".loadingImage").setAttribute("src",a),this.showBeginLoadingType="image");var c=this.beginloading.querySelector('[data-player-hook="lazygif"]');if(c){var l=c.getAttribute("lazy_src");l&&(c.setAttribute("src",l),c.removeAttribute("lazy_src"))}this.clockDownLoad(),this._begineShow=!0,this.show(),this.beginloading.style.display="block",this.engine.once(v.a.NTF_TimeUpdate,(function(){e.hideLoading(),e.hideBeginLoading()}))}}}},{key:"hideBeginLoading",value:function(){var e;if(this._begineShow=!1,this.hide(),clearInterval(this._speedTimer),this.beginloading&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=""),this.beginloading.style.display="none",e=b.a.os.ios||b.a.os.android?this.plugin.querySelector(".iqp-logo-loading"):this.plugin.querySelector(".videoLogo_loading")))for(var t=0;t<e.length;t++)e[t].style.display="none"}},{key:"showLoading",value:function(){!0!==this._begineShow&&(this.beginloading&&(this.beginloading.style.display="none",this.clockDownLoad()),this.resize(),this.show(),this.loading.style.display="block")}},{key:"clockDownLoad",value:function(){var e=this;clearInterval(this._speedTimer),this.updateDownloadSpeed(),this._speedTimer=setInterval((function(){e.updateDownloadSpeed()}),1e3)}},{key:"hideLoading",value:function(){clearInterval(this._speedTimer),this.hide(),this.loading.style.display="none"}},{key:"resize",value:function(){this.view.getWrapperArea().width>920?ee(this.plugin,"iqp-player_w920"):te(this.plugin,"iqp-player_w920")}},{key:"fadeOut",value:function(e){var t=this,n=t.plugin,r=1e3;n.style.display="",n.style.opacity=r/1e3;!function i(){r-=80,n.style.opacity>=0?(n.style.opacity=r/1e3,window.requestAnimationFrame?requestAnimationFrame(i):setTimeout(i,16)):e.call(t)}()}},{key:"updateDownloadSpeed",value:function(){var e=this.view.getDownloadSpeed();e&&this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=M.loading_download_speed+e)}}],[{key:"css",value:function(){return $.a.toString()}},{key:"html",value:function(){return W.a.toString()}},{key:"padCss",value:function(){return z.a.toString()+j.a.toString()}},{key:"padHtml",value:function(){return X.a.toString()}},{key:"mobileCss",value:function(){return V.a.toString()+F.a.toString()}},{key:"mobileHtml",value:function(){return Q.a.toString()}}]),n}(R.c),re=n(481),ie=n.n(re),ae=n(337),oe=n.n(ae),se=n(482),ue=n.n(se),ce=n(483),le=n.n(ce);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var fe=function(e){l()(n,e);var t=de(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this,"loading",e,r,a)).loading=o.plugin.querySelector('[data-player-hook="videolayerLoading"]'),o.init(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.stagesize;this.showBeginLoading();r&&r.on((function(){e.resize()})),n.on(v.a.NTF_StatusChanged,(function(t){switch(t.state){case v.a.Status_StartPlay:case v.a.Status_Playing:case v.a.Status_AdPlaying:case v.a.Status_AdStartPlay:case v.a.Status_End_Play:e.hide(),e.toggleBegin("none");break;case v.a.Status_Loadstart:e.showLoading()}})),n.on(v.a.NTF_VideoChange,(function(){e.showBeginLoading()})),n.on(v.a.NTF_NeedUserGesture4Playback,(function(){e.hide()}))}},{key:"showBeginLoading",value:function(){var e=this.view,t=this.engine.params.imageLoader||"",n=this.engine.movieinfo;n&&n.imageLoader&&(t=n.imageLoader),""!==t?(e.loadHtml(ue.a.toString(),e.pluginContainer),this.beginloading=document.querySelector('[data-player-hook="loadingposter"]'),this.beginloading.style.backgroundImage='url("'.concat(t,'")'),this.toggleBegin("block"),this.loading.style.display="none"):this.showLoading()}},{key:"showLoading",value:function(){this.toggleBegin("none"),this.resize(),this.loading.style.display="block",this.show()}},{key:"toggleBegin",value:function(e){this.beginloading&&(this.beginloading.style.display=e)}},{key:"resize",value:function(){var e,t;this.view.getWrapperArea().width>920?function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}(e=this.plugin,t="iqp-player_w920")||(e.className+=(e.className?" ":"")+t):function(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}}],[{key:"css",value:function(){return ie.a.toString()+oe.a.toString()}},{key:"html",value:function(){return le.a.toString()}}]),n}(R.c),he=(n(95),n(484)),pe=n.n(he),ve=n(485),ye=n.n(ve);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var me=new k.a("mobiletwblock"),_e=function(e){l()(n,e);var t=ge(n);function n(e,r,a){var o;i()(this,n),o=t.call(this,"mobiletwblock",e,r,a);var s=e.pingback;o.$plugin=Object(x.b)(o.plugin),o.previewstart=!0,o.$download=o.$plugin.find('[data-player-hook="mobiledownload"]'),o.$watch=o.$plugin.find('[data-player-hook="mobiletwwatch"]'),o.$twinfo=o.$plugin.find('[data-player-hook="twinfo"]'),o.$preview=o.$plugin.find('[data-player-hook="twpreview"]'),o.$replay=o.$plugin.find('[data-player-hook="twreplay"]'),o.init();var u=function(){var e,t=o.engine.getTwBlockType();"TwBlockA"==t?(o.$plugin.show(),o.previewstart?(e="preview_start",o.$replay.hide(),o.$preview.show()):(e="preview_end",o.$preview.hide(),o.$replay.show()),s.sendTwBlockShow("player",e)):"TwBlockB"==t&&(o.$twinfo.html("一鍵下載升級版App繼續體驗更多影片"),o.$download.html("立即下載"),o.$preview.html("忍心拒絕"),o.$plugin.show(),o.$preview.show(),o.$replay.hide(),s.sendTwBlockShow("player","player_fullversion"))};o.engine.on(v.a.NTF_TW_BLOCK,(function(){u(),o.engine.pause()})),o.engine.on(v.a.NTF_VRSReady,(function(){var e=o.engine.getTwBlockType();me.log("mobiletwblock, twBlockType: "+e),o.previewstart=!0,"TwBlockA"==e&&u()})),o.engine.on(v.a.NTF_PREVIEW_END,(function(){o.previewstart=!1,u()}));var c=o.engine.getTwBlockType();return me.log("mobiletwblock, twBlockType: "+c),u(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.pingback,i=b.a.browser.isTouch?"touchend":"click";n.on(v.a.NTF_StatusChanged,(function(t){switch(t.state){case v.a.Status_Playing:case v.a.Status_AdPlaying:case v.a.Status_PlayError:e.$plugin.hide()}})),this.$download.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return e.view.callJsDoSomething("pullupapp"),void r.sendTwBlockClick("player","player_fullversion","download");var n=e.previewstart?"preview_start":"preview_end";e.view.callJsDoSomething("pullupapp",{af_adset:n}),r.sendTwBlockClick("player",n,"watchFull")})),this.$watch.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return n.play(!0),void r.sendTwBlockClick("player","player_fullversion","skip");e.previewstart?(n.play(!0),r.sendTwBlockClick("player","preview_start","continuePreview")):(n.seek(0),r.sendTwBlockClick("player","preview_end","rePreview"))}))}}],[{key:"padCss",value:function(){return ye.a.toString()}},{key:"padHtml",value:function(){return pe.a.toString()}},{key:"mobileCss",value:function(){return this.padCss()}},{key:"mobileHtml",value:function(){return this.padHtml()}}]),n}(R.c),be=n(486),xe=n.n(be),ke=n(487),we=n.n(ke);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Te=function(e){l()(n,e);var t=Se(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this,"vippay",e,r,a)).$vippay=Object(x.b)(o.plugin),o.$playbtn=o.$vippay.find('[data-player-hook="playbtn"]'),o.$playtxt=o.$vippay.find('[data-player-hook="viptxt"]'),o.$playbtn.on("click",(function(e){o.$vippay.hide(),o.engine.playproxy.playFromVipPay()})),o.engine.on(v.a.NTF_Show_VIPPay,(function(e){1===e?o.$playtxt.html("尊贵的星钻VIP会员：<br>您已免费解锁本剧所有超前点播内容"):o.$playtxt.html("尊贵的星钻VIP会员：<br>您可以免费观看星钻剧场"),o.$vippay.show(),o.view.pingback.sendBlockPingback("diamondtip")})),o.engine.on(v.a.NTF_VideoChange,(function(){o.$vippay.hide()})),o}return o()(n,null,[{key:"css",value:function(){return xe.a.toString()}},{key:"html",value:function(){return we.a.toString()}}]),n}(R.c);function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ee=function(e){l()(n,e);var t=Pe(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"init",value:function(e){var t=this;this.enable(),this._elem=e,this.handler=function(){t.isFullScreen()?(t.isEnter=!0,t.isExit=!1):(t.isEnter=!1,t.isExit=!0),t.emit("change",t.isFullScreen()?"enter":"exit")},document.addEventListener("fullscreenchange",this.handler),document.addEventListener("mozfullscreenchange",this.handler),document.addEventListener("webkitfullscreenchange",this.handler),document.addEventListener("MSFullscreenChange",this.handler),e instanceof HTMLVideoElement&&(e.addEventListener("webkitendfullscreen",this.handler),e.addEventListener("fullscreenchange",this.handler))}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"exit",value:function(){var e=this._elem;if(e)if(this.isExit=!0,this.isEnter=!1,this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.exitFullscreen)e.exitFullscreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(e.mozCancelFullScreen)e.mozCancelFullScreen();else if(e.msExitFullscreen)e.msExitFullscreen();else try{e.webkitExitFullscreen()}catch(t){}}},{key:"enter",value:function(){var e=this._elem;if(this._enable||e)if(this.isEnter=!0,this.isExit=!1,this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else try{e.webkitEnterFullScreen()}catch(t){}}},{key:"toggle",value:function(){this.isFullScreen()?this.exit():this.enter()}},{key:"isFullScreen",value:function(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("fullscreenchange",this.handler),document.removeEventListener("mozfullscreenchange",this.handler),this._elem.removeEventListener("webkitfullscreenchange",this.handler),this._elem.removeEventListener("MSFullscreenChange",this.handler),this.handler=null}}]),n}(_.c),Ae=(n(157),n(284),n(167),n(297),n(298),n(227),n(226),n(233)),Ie=n.n(Ae),De=n(171),Le=n.n(De),Oe=(n(108),n(84),n(124),n(131),n(150));function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Me="1",Be="10",Ne="101";b.a.browser.iPad?(Me="2",Be="20",Ne="202"):(b.a.os.ios||b.a.os.android)&&(Me="2",Be="20",Ne="201");var Fe=function(e){l()(n,e);var t=Ce(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbisdm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user,a=this.getLrfrPs234();Promise.all([i.isVip()]).then((function(o){var s,u=Le()(o,1)[0],c=r.getMovieInfo(),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ie()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({bstp:6,block:"B",pf:Me,p:Be,p1:Ne,c1:c.cid||"",r:c.tvid||"",u:_.L.getFluid()||"",u2:_.L.getJsuid()||"",pu:i.getUid(),pru:_.k.get("P00PRU")||"",v:Oe.a,ra:e.ra||r.getCurrentVD(),nu:_.L.getIsNewUser()||"",ve:_.L.getEid(),ce:_.L.getWeid(),hu:u?1:-1,ht:c.isVIP?1:0,mod:r.local,plyrtp:0,coop:"",isdm:n._pbisdm,videotp:c.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse",s2:"NOREF",s3:"NOREF",s4:"NOREF"},a);try{Object(_.C)(l,{as:"iloveiqiyi"})}catch(d){}s=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(_.C)(l,{wint:s}),l=Object(_.C)(l,e,t),_.v.beacon(l,"//msg.qy.net/b")}))}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendClickTitlePingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_title",t:20},!0)}},{key:"sendClickVideoPingback",value:function(){this._core.isSimple||this._send({block:"CD",rseat:"908261_select_player_image",t:20},!0)}},{key:"sendClickPlayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_play",t:20},!0)}},{key:"sendClickPauseBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_pause",t:20},!0)}},{key:"sendClickReplayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_replay",t:20},!0)}},{key:"sendClickPlayNextBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_next",t:20},!0)}},{key:"sendClickPlayCancelBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_cancel",t:20},!0)}},{key:"sendVoiceOnPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundon",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundon",e.block="K"),this._send(e,!0)}},{key:"sendVoiceOffPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundoff",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundoff",e.block="K"),this._send(e,!0)}},{key:"sendVoiceChangePingback",value:function(e){this._send({block:"CD",rseat:"908261_select_player_sound"+e,t:20},!0)}},{key:"getLrfrPs234",value:function(){var e=_.k.get("QC007")||"",t=JSON.parse(localStorage.getItem("QC007_ps234")||"{}");return this.__ps234=this.__ps234||{lrfr:e,ps2:t.ps2||"NOREF",ps3:t.ps3||"NOREF",ps4:t.ps4||"NOREF"}}}]),n}(_.c),qe=Fe,je=function(){function e(t){i()(this,e),this.elem=t,this.mutualList={},this.id=1}return o()(e,[{key:"register",value:function(e){var t=e.type,n=e.callback;if(!t||!n||"function"!=typeof n)return null;var r=++this.id;return this.mutualList[t]=this.mutualList[t]||{},this.mutualList[t][r]={enable:!0,callback:n},r}},{key:"unregister",value:function(e){var t=!1;if(!e)return t;for(var n in this.mutualList)if(this.mutualList[n][e]){delete this.mutualList[n][e],t=!0;break}return t}},{key:"enable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!0;break}}},{key:"disable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!1;break}}},{key:"enableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!0}}},{key:"disableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!1}}},{key:"fire",value:function(e,t){if(e)for(var n in this.mutualList){if(e===n){this._fire(-1,this.mutualList[n],t);break}if(this.mutualList[n][e]){this._fire(e,this.mutualList[n],t);break}}}},{key:"_fire",value:function(e,t,n){for(var r in t)r!==e&&t[r].enable&&t[r].callback(n)}}]),e}();function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ve="1",He="10",ze="101";b.a.browser.iPad?(Ve="2",He="20",ze="202"):(b.a.os.ios||b.a.os.android)&&(Ve="2",He="20",ze="201");var Ge=function(e){l()(n,e);var t=Ue(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbIsDm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user,a=r.getCurrentVD(),o=r.getMovieInfo();Promise.all([i.isVip()]).then((function(s){var u=Le()(s,1)[0],c=n;r.getVideoInfo((function(n){var s,l,d=e.ra||a;d=51===d?59:d;var f,h={bstp:6,block:"B",pf:Ve,p:He,p1:ze,aid:o.albumId||"",c1:o.cid||"",r:o.tvid||"",u:_.L.getFluid()||"",u2:_.L.getJsuid()||"",pu:i.getUid(),pru:_.k.get("P00PRU")||"",v:Oe.a,ra:d,nu:_.L.getIsNewUser()?1:0,ve:_.L.getEid(),ce:_.L.getWeid(),hu:u?null==i?void 0:i.vipTypes:-1,ht:null!=n&&null!==(s=n.vi)&&void 0!==s&&s.ht?null==n||null===(l=n.vi)||void 0===l?void 0:l.ht:"",mod:r.local,plyrtp:0,coop:"",isdm:c._pbIsDm,videotp:o.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse",s2:r.params.vfrm||"NOREF",s3:r.params.vfrmblk||"NOREF",s4:r.params.vfrmrst||"NOREF",ps2:"NOREF",ps3:"NOREF",ps4:"NOREF"};try{Object(_.C)(h,{as:"iloveiqiyi"})}catch(p){}f=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(_.C)(h,{wint:f}),r.params.abtest&&(h.abtest=r.params.abtest),h=Object(_.C)(h,e,t),_.v.beacon(h,"//msg.qy.net/b")}))}))}},{key:"sendSeekPingback",value:function(e,t,n){var r={rseat:"ply_seek",from:e,to:t,t:20};this._core.getMovieInfo().isShowHeatMap&&(r.s2="lvjing"),n?(r.a="901111_pcwh5_keyboard",this._send(r,!0)):this._send(r)}},{key:"sendSwitchVDPingback",value:function(e){this._send({rseat:"ply_cc",tra:51===e?59:e,t:20,ra:this._core.getCurrentVD()})}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendBlkPingback",value:function(e){this._send(Object(_.C)({t:21},e||{},!0),!0)}},{key:"sendBlockPingback",value:function(e){var t={block:e,t:21};this._core.getMovieInfo().isShowHeatMap&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendCttBlockPingback",value:function(e,t){var n={block:e,rpage:t,t:21};this._core.getMovieInfo().isShowHeatMap&&(n.s2="lvjing"),this._send(n,!0)}},{key:"sendCttUserActionPingback",value:function(e,t,n){this._send({block:n,rseat:e,rpage:t,t:20},!0)}},{key:"sendIVUserActionPingback",value:function(e){var t=e.rseat,n=e.r,r=e.block,i=e.rpage,a=this._core.getMovieInfo().tvid,o=this._core.getMovieInfo().albumId,s=this._core.iv_state.uniqueId;this._send({rseat:t||"",block:r||"",t:20,r:n||"",aid:o||a,sqpid:a||"",iamvid:s||"",rpage:i||""},!0)}},{key:"sendIVBlockPingback",value:function(e){var t=e.r,n=e.block,r=e.rpage,i=this._core.getMovieInfo().tvid,a={block:n||"",t:21,r:t||"",aid:this._core.getMovieInfo().albumId||i,sqpid:i||"",iamvid:this._core.iv_state.uniqueId||"",rpage:r||""};this._send(a,!0)}},{key:"sendShowControlBarPingback",value:function(){var e={block:"80720_playerctrl",t:21};this._core.getMovieInfo().isShowHeatMap&&(e.s2="lvjing"),this._send(e,!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekbar",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendShowHeatMapPingback",value:function(){this._send({block:"80720_playerctrl_lvjing",t:21,s2:"lvjing"},!0)}},{key:"showScoreTaskGuidePanel",value:function(){this._send({block:"80720_scorepannel_20m",t:21},!0)}},{key:"closeScoreTaskGuidePanel",value:function(){this._send({rseat:"80720_scorepannel_20mclose",t:20},!0)}},{key:"clickScoreTaskLoginPanel",value:function(){this._send({rseat:"80720_player_login",t:20},!0)}},{key:"showScoreTaskLoginPanel",value:function(){this._send({block:"80720_scorepannel_30mlogin",t:21},!0)}},{key:"showScoreTaskSuccessPanel",value:function(){this._send({rseat:"80720_scorepannel_30msuccess",t:20},!0)}},{key:"hoverVideoListButton",value:function(){this._send({block:"80720_playerctrl_selection",t:21},!0)}},{key:"clickVideoListButton",value:function(){this._send({block:"B",rseat:"80720_playerctrl_selection",t:20},!0)}},{key:"clickVideoListItemTitle",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickVideoListItemImage",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickSubtitlesSwitch",value:function(e){this._send({t:20,rseat:"80720_playerctrl_menu_subtitleswitch"+e},!0)}},{key:"clickSubtitlesSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle"},!0)}},{key:"clickSubtitlesFontsizeSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size"},!0)}},{key:"clickSubtitlesAlphaSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp"},!0)}},{key:"clickSubtitlesLanguageSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang"},!0)}},{key:"changeSubtitlesLanguage",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang_change"},!0)}},{key:"showSubtitlesPanel1",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel1"},!0)}},{key:"showSubtitlesPanel2",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel2"},!0)}},{key:"showContentMenu",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel"},!0)}},{key:"clickCtxMenuBugBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_feedback"},!0)}},{key:"clickCtxMenuLinkBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_linkcopy"},!0)}},{key:"clickCtxMenuShortcutBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_keyboard"},!0)}},{key:"clickCtxMenuConsoleBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_debugger"},!0)}},{key:"clickShowInfoPanelBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_state"},!0)}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendPubBlock",value:function(e){var t={block:"action_bfq",t:21};Object(_.C)(t,e),this._send(t,!0)}},{key:"sendPubClick",value:function(e){var t={block:"bfq",rseat:"80720_action_bfq",t:20};Object(_.C)(t,e),this._send(t,!0)}},{key:"sendIVOSClick",value:function(e,t){this._send({t:20,rseat:e,biz:t},!0)}},{key:"sendIVOSShow",value:function(e,t){this._send({t:21,block:e,biz:t},!0)}},{key:"sendTwBlockShow",value:function(e,t){this._send({t:21,block:t,rpage:e},!0)}},{key:"sendTwBlockClick",value:function(e,t,n){this._send({t:20,rpage:e,block:t,rseat:n},!0)}},{key:"clickDrmTipOfLaunchClient",value:function(){this._send({t:20,rpage:"pcw_playpage",block:"client_playtips",rseat:"client_playtips_goclient"},!0)}}]),n}(_.c),We=n(43),Ke=n.n(We),$e=n(25),Ye=n.n($e);function Qe(){var e=0,t=-1;if(navigator.connection){t=navigator.connection.downlink;var n=(navigator.connection.effectiveType||"").toLowerCase(),r=(navigator.connection.type||"").toLowerCase();switch(n){case"4g":e=18;break;case"3g":e=17;break;case"2g":e=16;break;case"slow-2g":e=14}switch(r){case"cellular":e=15;break;case"wifi":e=1;break;case"ethernet":e=13;break;case"bluetooth":e=21;break;case"wimax":e=22}}return{ntwk:e,downlink:t}}var Je=n(365);function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}window.__fpp___=window.__fpp___||Object(Je.a)();var Ze="1",et="10",tt="101";b.a.browser.iPad?(Ze="2",et="20",tt="202"):(b.a.os.ios||b.a.os.android)&&(Ze="2",et="20",tt="201");var nt="",rt="";function it(){if(!nt){var e=_.k.get("QC007")||"";return e&&(nt=e),nt}return nt}function at(){if(!rt){var e=_.k.get("QC008")||"";return e&&(rt=e),rt}return rt}var ot,st,ut=function(e){l()(n,e);var t=Xe(n);function n(e,r){var a;return i()(this,n),(a=t.call(this))._core=e,a._view=r,a}return o()(n,[{key:"_send",value:function(e,t){var n=this._core,r=this._view,i=n.user,a=r.fullscreen,o=n.getMovieInfo();i.isVip(function(){var r=Ke()(Ye.a.mark((function s(r,u){var c,l,d,f,h;return Ye.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.__fpp___;case 2:c=s.sent,l=c.u1,d=c.u2,f={u:_.L.getFluid()||"",pu:i.getUid(),p1:"".concat(Ze,"_").concat(et,"_").concat(tt),dfp:_.n.get(),de:_.L.getQtsid()||"",hu:r?u:-1,c1:o.cid||"",lrfr:it(),nu:_.L.getIsNewUser()?1:0,purl:window.location.href,rfr:window.document.referrer,tmplt:n.getPageTmpltType(),vfm:_.k.get(_.l.QP005)||"",bstp:6,ce:_.L.getWeid(),ntwk:Qe().ntwk,rpage:a&&a.isFullScreen()?"full_ply":"pcw_playpage",sid:at(),stime:(new Date).getTime(),rn:Math.random(),position:"",r:o.tvid||"",aid:o.albumId||"",s2:n.params.vfrm||"NOREF",s3:n.params.vfrmblk||"NOREF",s4:n.params.vfrmrst||"NOREF",ps2:"NOREF",ps3:"NOREF",ps4:"NOREF",fp1:l,fp2:d},n.params.abtest&&(f.abtest=n.params.abtest),f=Object(_.C)(f,e,t),e.bstp&&(f.bstp=e.bstp),(null==(h=n.video_opt||n.params.video_opt)?void 0:h.ply_cloud_movie)!=undefined&&(f.ply_cloud_movie=(null==h?void 0:h.ply_cloud_movie)||0),_.v.beacon(f,"//msg.qy.net/act",{cache:!0});case 12:case"end":return s.stop()}}),s)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"sendBroadPingback",value:function(e,t,n,r,i,a,o,s,u){this._core.getMovieInfo();var c={block:e,rseat:t,t:u||21,cid:r,r:i,sc1:a,sqpid:o||"",biz:s};Object(_.C)(c,!0),n?(c.a="yuyue",this._send(c,!0)):this._send(c)}},{key:"sendUserActionPingback",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=this._core,a=i.getMovieInfo(),o={block:e,rseat:t,t:20,r:a.tvid||"",aid:a.albumId||""};Object(_.C)(o,r,!0),n?(o.a="901111_pcwh5_keyboard",this._send(o,!0)):this._send(o)}},{key:"sendCttUserActionPingback",value:function(e,t,n){this._send({block:n,rseat:e,rpage:t,t:20},!0)}},{key:"send720LoginPingback",value:function(e,t,n,r,i,a){this._send({block:t,rseat:r,rpage:e,t:n,s2:i,s3:a},!0)}},{key:"sendBlockPingback",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this._core,r=n.getMovieInfo(),i={block:e,t:21};r.isShowHeatMap&&(i.s2="lvjing"),Object(_.C)(i,t,!0),this._send(i,!0)}},{key:"sendSeekPingback",value:function(e,t,n,r){this.sendUserActionPingback("80720_playerctrl","80720_playerctrl_seek",n),n&&"boolean"==typeof r&&this.sendUserActionPingback("80720_playerctrl",r?"playforward_key":"playback_key",!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekhover",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}}]),n}(_.c),ct=(n(170),n(178),document.attachEvent),lt=navigator.userAgent.match(/Trident/),dt=(ot=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return ot(e)}),ft=(st=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return st(e)});function ht(e){var t=e.target||e.srcElement;t.__resizeRAF__&&ft(t.__resizeRAF__),t.__resizeRAF__=dt((function(){var n=t.__resizeTrigger__;n&&n.__resizeListeners__.forEach((function(t){t.call(n,e)}))}))}function pt(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",ht)}var vt=function(){function e(t){i()(this,e),this.elem=t}return o()(e,[{key:"on",value:function(e){if(!this.elem.__resizeListeners__)if(this.elem.__resizeListeners__=[],ct)this.elem.__resizeTrigger__=this.elem,this.elem.attachEvent("onresize",ht);else{var t=this.elem.__resizeTrigger__=document.createElement("object");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;"),t.__resizeElement__=this.elem,t.onload=pt,t.type="text/html",lt&&this.elem.appendChild(t),t.data="about:blank",lt||this.elem.appendChild(t)}this.elem.__resizeListeners__.push(e)}},{key:"off",value:function(e){this.elem.__resizeListeners__.splice(this.elem.__resizeListeners__.indexOf(e),1),this.elem.__resizeListeners__.length||(ct?this.elem.detachEvent("onresize",ht):(this.elem.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",ht),this.elem.__resizeTrigger__=!this.elem.removeChild(this.elem.__resizeTrigger__)))}}]),e}();function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var gt="iqp-web-screen",mt=function(e){l()(n,e);var t=yt(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"__notice",value:function(){this.emit("change",this.isWebFullScreen()?"enter":"exit")}},{key:"__beforeNotice",value:function(){this.emit("beforechange",this.isWebFullScreen()?"enter":"exit")}},{key:"init",value:function(e){this.enable(),this._wrapper=e}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"initButton",value:function(e){var t=this;this._elem=e,this._enter=this._elem.querySelector('[data-player-hook="webfullenter"]'),this._exit=this._elem.querySelector('[data-player-hook="webfullexit"]'),this.handler=function(){t.toggle()},this._elem.addEventListener("click",this.handler)}},{key:"exit",value:function(){if(this.isWebFullScreen()){this.__beforeNotice(),this._elem&&(this._exit.style.display="none",this._enter.style.display="block");var e=this._wrapper.className;e=e.replace(gt," ").replace("iqp-full-screen50"," ").replace("iqp-full-screen75"," ").replace(/^\s+|\s+$/g,""),this._wrapper.className=e,document.body.style.overflow=this.__bodyOverflow,this.__notice()}}},{key:"enter",value:function(){this.isWebFullScreen()||(this.__bodyOverflow=document.body.style.overflow,this.__beforeNotice(),this._elem&&(this._exit.style.display="block",this._enter.style.display="none"),this._wrapper.className+=(this._wrapper.className?" ":"")+gt,document.body.style.overflow="hidden",this.__notice())}},{key:"toggle",value:function(){this.isWebFullScreen()?this.exit():this.enter()}},{key:"isWebFullScreen",value:function(){return!!this._wrapper&&" ".concat(this._wrapper.className," ").indexOf(" ".concat(gt," "))>=0}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("click",this.handler),this._enter=null,this._exit=null,this.handler=null}}]),n}(_.c);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var bt=new k.a("Skin.Base"),xt=function(e){l()(n,e);var t=_t(n);function n(e,r){var a;i()(this,n),a=t.call(this);var o=r.engine,s=o.i18n,c=o.local;return a.params=e,a.pack=r,a.engine=o,a.plugins={},a.conflictPanel={},a.setting=null,a.diyskin=e.diyskin||{},a.statusMap={},a.bottomShow=!1,a.topSwitch=!0,a.bottomSwitch=!0,a.i18nLang=r.lang,a.isTradition=s.isTraditionalChinese(c),a.isTw=s.isTWLocale(c),a.loadedSkinCss={},a.zoomoutMode=!1,a.metaPanelCollapse=null,a.controlItems=[],a.rfTriggerNodes=[],a.initSwitch(e),a.getUserSet(),a.engine.isMini?(a.pingback=new qe(o),a.pingbackV2=new ut(o,u()(a))):(a.pingback=new Ge(o),a.pingbackV2=new ut(o,u()(a))),a}return o()(n,[{key:"videoList",get:function(){return this.subView?this.subView.videoList:[]}},{key:"initSwitch",value:function(e){var t=e.components,n=void 0===t?"feffffe6e":t,r=[];this.skinComponents=n;for(var i=0;i<n.length;++i){for(var a=n.substr(i,1),o=parseInt(a,16).toString(2),s=o.length,u=0;u<4-s;++u)o="0"+o;r+=o}for(var c,l=1;l<g.length+1;++l)(c=g[l-1]).status="1"==r.charAt(l),this.statusMap[c.name]=c}},{key:"getUserSet",value:function(){var e=this.statusMap,t={logo:!0,ctl:!0,ctl_show_always:!1,prog:!0,play:!0,next:!0,time:!0,rate:!0,def:!0,voice:!0,set:!0,list:!0,full:!0,webfull:!0,expandScreen:!1,vinv:!0,hotkeys:!0,score:!0,recommend:!0,ctxmenu:!0,ctxmenu_shortcut:!0,audiotrack:!0,screenshot:!0,aiview:!0,luban00:!0,svp:!0,morectrol:!1,follow:!0,interact:!0,ivos:!0,theaterMode:!1,metaPanel:!1,clientLauncher:!0,interfacePosi:!0,top:!0,title:!0,tvgBtn:!0,newVideoList:!0,mobilebigplay:!0,mobilegesture:!0,mobileposter:!0,mobilespeed:!0},n=this.engine.i18n.isTWLocale();t.ctl=t.ctl&&e.ID_SHOW_CONTROL_BAR.status,t.ctl_show_always=e.ID_SHOW_CONTROL_BAR_ALWAYS.status,t.prog=t.prog&&e.ID_SHOW_CONTROL_BAR_SEEK_BAR.status,t.time=t.time&&e.ID_SHOW_CONTROL_BAR_TIME.status,t.next=t.next&&e.ID_SHOW_CONTROL_BAR_NEXT_BTN.status,t.def=t.def&&e.ID_SHOW_DOCK_DEFINITION.status,t.voice=t.voice&&e.ID_SHOW_CONTROL_BAR_VOLUME.status,t.set=t.set&&e.ID_SHOW_CONTROL_BAR_SETTING.status,t.rate=t.rate&&(e.ID_SHOW_CONTROL_BAR_SETTING.status||this.params.feedMode)&&!e.ID_HIDE_PLAYBACKRATE.status,t.webfull=t.webfull&&!e.ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN.status,t.full=t.full&&e.ID_SHOW_CONTROL_BAR_FULLSCREEN.status,t.list=t.full&&t.list&&e.ID_SHOW_CONTROL_BAR_TVLIST_BTN.status&&!n,t.score=t.score&&!e.ID_HIDE_SCORE_TASK.status&&!n,t.recommend=t.recommend&&e.ID_SHOW_RECOMMEND.status&&!n,t.ctxmenu=e.ID_SHOW_CONTENT_MENU.status,t.ctxmenu_shortcut=e.ID_SHOW_CONTENT_MENU_SHORTCUT.status,t.vinv=t.vinv&&!e.ID_HIDE_PIPBTN.status,t.audiotrack=t.audiotrack&&this.engine.audioEnabled,t.screenshot=t.screenshot&&e.ID_SHOW_SCREENSHOT.status&&!n,t.metaPanel=t.metaPanel&&e.ID_SHOW_META_PANEL.status&&!n,t.theaterMode=t.theaterMode&&e.ID_THEATER_MODE.status&&!n,t.clientLauncher=t.clientLauncher&&e.ID_SHOW_CLIENT_APP.status&&!n,t.top=t.top&&!e.ID_HIDE_TOP.status&&!n,t.tvgBtn=t.tvgBtn&&e.ID_SHOW_TVGBTN.status&&!n,t.newVideoList=t.newVideoList&&e.ID_SHOW_NEW_VIDEO_LIST.status&&!n,t.mobilebigplay=t.mobilebigplay&&!e.ID_HIDE_MOBILE_BIG_PLAY.status&&!n,t.mobilegesture=t.mobilegesture&&!e.ID_CLOSE_MOBILE_GESTURE.status&&!n,t.mobileposter=t.mobileposter&&!e.ID_HIDE_MOBILE_POSTER.status&&!n,t.mobilespeed=t.mobilespeed&&!e.ID_CLOSE_MOBILE_SPEED.status&&!n,"undefined"!=typeof this.params.isExpandScreen&&(t.expandScreen=this.params.isExpandScreen),"undefined"!=typeof this.params.isSupportedHotKey&&(t.hotkeys=this.params.isSupportedHotKey),"undefined"!=typeof this.params.isSupportedShot&&(t.screenshot=this.params.isSupportedShot),this.params.logo!==undefined&&0==this.params.logo&&(t.logo=!1),t.aiview=t.aiview&&!n,t.luban00=t.luban00&&!n,t.svp=t.svp&&!n,t.morectrol=t.morectrol&&!n,t.follow=t.follow&&!n,t.interact=t.interact&&!n,t.ivos=t.full&&t.ivos&&!n&&!this.engine.isSimple,this.setting=t,this.emit("viewsetdone")}},{key:"getCss",value:function(){if(b.a.os.isMobileTerminal){var e="";return this.isTw&&(e=_e.padCss()),b.a.browser.iPad||b.a.os.androidTablet?{key:"BASE_HTTP_TABLET",value:B.padCss()+ne.padCss()+e}:{key:"BASE_HTTP_OTHER",value:B.mobileCss()+ne.mobileCss()+e}}return this.engine.isMini?{key:"BASE_DATA_MINI",value:B.css()+fe.css()}:{key:"BASE_DATA_OTHER",value:B.css()+ne.css()+Te.css()}}},{key:"init",value:function(){var e=this.params,t=this.engine,n=t.getEngineType()===v.a.HTTP_ENGINE||b.a.os.isMobileTerminal,r=e.parentId,i=document.getElementById(r);this.playerId=r,this.parent=i,this.loadCss(this.getCss()),b.a.os.isMobileTerminal?b.a.browser.iPad||b.a.os.androidTablet?this.loadHtml(B.padHtml(),i):this.loadHtml(B.mobileHtml(),i):t.isMini?this.loadHtml(B.miniHtml("banner"==e.skinType),i):this.loadHtml(B.html(),i),this.video=i.querySelector("video"),t.isSimple||b.a.os.isMobileTerminal?this.wrapper=this.outlayer=i.querySelector('[data-player-hook="container"]'):(this.wrapper=i.querySelector('[data-player-hook="container"]'),this.outlayer=i.querySelector('[data-player-hook="outlayer"]'),this.innerlayer=i.querySelector('[data-player-hook="innerlayer"]'),this.videolayer=i.querySelector('[data-player-hook="videolayer"]'),this.videoInnerlayer=i.querySelector('[data-player-hook="videoinnerlayer"]'),this.ivoslayer=i.querySelector('[data-player-hook="ivoslayer"]'),this.$videolayer=Object(x.b)(this.videolayer),this.$videoInnerlayer=Object(x.b)(this.videoInnerlayer)),this.$container=Object(x.b)(this.wrapper),this.$outlayer=Object(x.b)(this.outlayer),this.pluginContainer=i.querySelector('[data-player-hook="plgcontainer"]'),this.subPluginContainer=i.querySelector('[data-player-hook="sub-plgcontainer"]'),this.$pluginContainer=Object(x.b)(this.pluginContainer),this.pageContainer=this.pluginContainer.querySelector('[data-player-hook="pageContainer"]'),this.pageContainer&&this.pageContainer.setAttribute("id","".concat(this.playerId,"PageContainer")),this.adContainer=i.querySelector('[data-cupid="container"]'),b.a.os.isMobileTerminal?b.a.browser.iPad||b.a.os.androidTablet?this.loadHtml(ne.padHtml(),this.outlayer):this.loadHtml(ne.mobileHtml(),this.outlayer):t.isMini?this.loadHtml(fe.html(),this.outlayer):this.loadHtml(ne.html(),this.outlayer),n||t.isMini||(this.loadHtml(Te.html(),this.outlayer),this.addPlugin(new Te(this,this.outlayer))),this.isTw&&n&&(this.loadHtml(_e.padHtml(),this.outlayer),this.addPlugin(new _e(this,this.outlayer))),this.addPlugin(new B(this,i)),t.isMini?this.addPlugin(new fe(this,this.outlayer)):this.addPlugin(new ne(this,this.outlayer)),this.webfullscreen=new mt,this.webfullscreen.init(this.outlayer),this.setting.full&&(this.fullscreen=new Ee,t.getEngineType()===v.a.HTTP_ENGINE?this.fullscreen.init(this.video):this.fullscreen.init(this.wrapper)),this.addVideoEvent(),t.init(this.video)}},{key:"addVideoEvent",value:function(){var e=this,t=this,n=t.engine,r=(t.pingback,t.pingbackV2,t.fullscreen),i=t.webfullscreen,a=n.isMini,o=function(){(r&&r.isFullScreen()||i&&i.isWebFullScreen()||n.isWebFullScreen)&&e.outlayer.offsetWidth>=1366&&e.outlayer.offsetHeight>=580?e.outlayer.classList.add(y.a):e.outlayer.classList.remove(y.a),e.emit(m.a.NTF_StageSizeChange)};r&&(this.dbClickEvent=function(t){n.isAd()||a||n.isInteracting||(t.preventDefault(),0,clearTimeout(undefined),n.ivosRuning||e.fullToggle())},b.a.os.isMobileTerminal||this.video.addEventListener("dblclick",this.dbClickEvent),n.on(v.a.NTF_Recharge,(function(){r.exit()})),r.on("change",o.bind(this))),this.webfullscreen.on("beforechange",(function(t){e.emit(m.a.NTF_WebFullScreen_BeforeChange,t)})).on("change",(function(t){var r="enter"===t;n.isWebFullScreen=!!r,o.bind(e)(),e.emit(m.a.NTF_WebFullScreen_AfterChange,t)})),this.setting.webfull&&(this.setting.autowebfull&&this.webfullscreen.enter(),this.engine.on(v.a.NTF_Recharge,(function(){e.webfullscreen.exit()}))),this.stagesize=new vt(this.pluginContainer),this.stagesize.on(o.bind(this)),this.ivoslayer&&(this.ivossize=new vt(this.ivoslayer)),this.mutualpanel=new je(this)}},{key:"checkSubView",value:function(e,t){var n=this;this.subView?this.subView[e](t):this.once("subViewInit",(function(){n.subView[e](t)}))}},{key:"addView",value:function(e){this.subView=new e(this,this.engine),this.subView.init(),this.emit("subViewInit")}},{key:"loadCss",value:function(e){var t=e.key,n=e.value;if(t&&!this.loadedSkinCss[t]){this.loadedSkinCss[t]=!0;var r=n,i=document.createElement("style");i.setAttribute("data-player-hook","playercss"),i.innerHTML=r,document.querySelector("head").appendChild(i)}}},{key:"loadHtml",value:function(e,t){var n=document.createElement("iqpdiv");n.innerHTML=e,t.appendChild(n.children[0])}},{key:"addPlugin",value:function(e){this.plugins[e.name]=e}},{key:"forEach",value:function(e){for(var t in this.plugins)this.plugins[t][e]()}},{key:"enable",value:function(){this.forEach("enable")}},{key:"disable",value:function(){this.forEach("disable")}},{key:"destroy",value:function(){for(var e in this.clickEvent&&this.video.removeEventListener("click",this.clickEvent),this.dbClickEvent&&this.video.removeEventListener("dblclick",this.dbClickEvent),this.plugins)try{this.plugins[e].destroy()}catch(t){}this.plugins={},document.getElementById(this.playerId)&&(document.getElementById(this.playerId).innerHTML="")}},{key:"callJsDoSomething",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this.engine.getMovieInfo();bt.log("call js setJsDoSomething: "+e),t.origin=this.params.origin||"h5",t.handleType=e,t.tvid=n.tvid,this.engine.isInteractVideo&&(t.isInteractVideo=this.engine.isInteractVideo,t.uniqueId=this.engine.iv_state.uniqueId),this.emit("setJsDoSomething",t)}},{key:"addVideoList",value:function(e){this.checkSubView("addVideoList",e)}},{key:"removeVideoList",value:function(e){this.checkSubView("removeVideoList",e)}},{key:"setFollowData",value:function(e){this.checkSubView("setFollowData",e)}},{key:"notifyMetaPanel",value:function(e){this.checkSubView("notifyMetaPanel",e)}},{key:"getMetaPanelInfo",value:function(){return this.subView?this.subView.getMetaPanelInfo():null}},{key:"getRightFloaterInfo",value:function(){return this.subView?this.subView.getRightFloaterInfo():null}},{key:"setBarragePanel",value:function(e){this.checkSubView("setBarragePanel",e)}},{key:"getPlayerDom",value:function(){return{wrapper:this.wrapper,outlayer:this.outlayer,innerlayer:this.innerlayer,videolayer:this.videolayer,pluginContainer:this.pluginContainer}}},{key:"noticeRightFloater",value:function(e){this.checkSubView("noticeRightFloater",e)}},{key:"setPayLayerStatus",value:function(e){this.checkSubView("setPayLayerStatus",e)}},{key:"hasNextVideo",value:function(){return!!this.subView&&this.subView.hasNextVideo()}},{key:"switchNextVideo",value:function(e){0!=e&&2!=e||!this._album_after_feature_?this.checkSubView("switchNextVideo",e):window.location.href=this._album_after_feature_.page_url}},{key:"checkAutoPlay",value:function(){this.checkSubView("checkAutoPlay")}},{key:"switchPreVideo",value:function(){this.checkSubView("switchPreVideo")}},{key:"switchVideo",value:function(e){this.engine.switchVideo(e)}},{key:"getPlayIndex",value:function(){return this.subView?this.subView.getPlayIndex():-1}},{key:"skipPrelude",value:function(e){this.checkSubView("skipPrelude",e)}},{key:"setSmallWindowMode",value:function(e){this.checkSubView("setSmallWindowMode",e)}},{key:"setQiyiUserLogin",value:function(e){this.checkSubView("setQiyiUserLogin",e)}},{key:"setRightBarStatus",value:function(e){this.checkSubView("setRightBarStatus",e)}},{key:"getRealArea",value:function(){for(var e={width:16,height:9},t=this.engine.movieinfo.vidl,n=0;n<t.length;n++)if(t[n].vd===this.engine.getCurrentVD()){e=t[n].realArea;break}return e||(e=this.getWrapperArea()),e}},{key:"getWrapperArea",value:function(){var e=getComputedStyle(this.outlayer),t=e.width;if(t=parseInt("100%"===t?0:t),isNaN(t)){var n=this.outlayer.offsetWidth;n<=0||null==n||(t=n)}return{width:t,height:parseInt(e.height)}}},{key:"getDownloadSpeed",value:function(){var e=this.engine.getDownloadSpeed();return e&&(e=e===Infinity?0:e>1e9?(e/1e9).toFixed(2)+"Gb/s":e>1e6?(e/1e6).toFixed(2)+"Mb/s":e>1e3?(e/1e3).toFixed(2)+"Kb/s":e>0?e.toFixed(2)+"b/s":0),e}},{key:"fullToggle",value:function(){var e=this.fullscreen;if(this.setting.expandScreen){var t=!!this.engine.isFullScreen,n=!!this.engine.isWebFullScreen;t?this.callJsDoSomething("exitExpandScreen",{from:"full"}):(n&&this.callJsDoSomething("exitExpandScreen",{from:"webfull"}),this.callJsDoSomething("enterExpandScreen",{from:"full"})),this.emit(m.a.NTF_FullScreen_BeforeChange,t?"enter":"exit")}else e&&e.toggle()}}]),n}(_.c);t.a=xt},,function(e,t,n){var r=n(147),i=n(158),a=n(432),o=n(515).UNSUPPORTED_Y;r&&("g"!=/./g.flags||o)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:a})},function(e,t,n){var r=n(176),i=n(225),a=n(200);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),u=a.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){var r=n(107),i=n(168).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(28),i=n(494);r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,n){var r=n(81),i=n(176),a=n(107),o=n(200).f;e.exports=function(e,t){for(var n,s=a(e),u=i(s),c=u.length,l=0,d=[];c>l;)n=u[l++],r&&!o.call(s,n)||d.push(t?[n,s[n]]:s[n]);return d}},function(e,t,n){var r=n(321);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r={};r[n(132)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(322),i=n(503);(e.exports=function(e,t){return i[e]||(i[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.9.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(99),i=n(504),a="__core-js_shared__",o=r[a]||i(a,{});e.exports=o},function(e,t,n){var r=n(99),i=n(215);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(99),i=n(145),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,n){var r=n(396),i=n(397),a=n(92);e.exports=!!Object.getOwnPropertySymbols&&!a((function(){return!Symbol.sham&&(r?38===i:i>37&&i<41)}))},function(e,t,n){var r=n(264);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(99);e.exports=r},function(e,t,n){var r=n(503),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(147),i=n(158),a=n(116),o=n(429);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(145),i=n(403),a=n(132)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[a])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(92);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(80),i=n(92),a=n(183),o=n(302),s=n(517);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){var r=n(92);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(132),i=n(405),a=r("iterator"),o=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||o[a]===e)}},function(e,t,n){var r=n(256),i=n(255),a=function(e){return function(t,n){var a,o,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":undefined:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){"use strict";var r=n(80),i=n(595),a=n(302),o=n(342),s=n(275),u=n(215),c=n(204),l=n(132),d=n(322),f=n(405),h=n(596),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),g="keys",m="values",_="entries",b=function(){return this};e.exports=function(e,t,n,l,h,x,k){i(n,t,l);var w,S,T,P=function(e){if(e===h&&L)return L;if(!v&&e in I)return I[e];switch(e){case g:case m:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",A=!1,I=e.prototype,D=I[y]||I["@@iterator"]||h&&I[h],L=!v&&D||P(h),O="Array"==t&&I.entries||D;if(O&&(w=a(O.call(new e)),p!==Object.prototype&&w.next&&(d||a(w)===p||(o?o(w,p):"function"!=typeof w[y]&&u(w,y,b)),s(w,E,!0,!0),d&&(f[E]=b))),h==m&&D&&D.name!==m&&(A=!0,L=function(){return D.call(this)}),d&&!k||I[y]===L||u(I,y,L),f[t]=L,h)if(S={values:P(m),keys:x?L:P(g),entries:P(_)},k)for(T in S)(v||A||!(T in I))&&c(I,T,S[T]);else r({target:t,proto:!0,forced:v||A},S);return S}},function(e,t,n){var r=n(132),i=n(301),a=n(158),o=r("unscopables"),s=Array.prototype;s[o]==undefined&&a.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,n){var r=n(116),i=n(518),a=n(148),o=n(326),s=n(406),u=n(594),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,h,p,v,y,g=n&&n.that,m=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),x=o(t,g,1+m+b),k=function(e){return l&&u(l),new c(!0,e)},w=function(e){return m?(r(e),b?x(e[0],e[1],k):x(e[0],e[1])):b?x(e,k):x(e)};if(_)l=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(f=0,h=a(e.length);h>f;f++)if((p=w(e[f]))&&p instanceof c)return p;return new c(!1)}l=d.call(e)}for(v=l.next;!(y=v.call(l)).done;){try{p=w(y.value)}catch(S){throw u(l),S}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},function(e,t,n){var r=n(145),i=n(300),a=n(132)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(519).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(99),i=n(147),a=n(616),o=n(215),s=n(437),u=n(92),c=n(327),l=n(256),d=n(148),f=n(617),h=n(740),p=n(302),v=n(342),y=n(324).f,g=n(158).f,m=n(618),_=n(275),b=n(254),x=b.get,k=b.set,w="ArrayBuffer",S="DataView",T="Wrong index",P=r.ArrayBuffer,E=P,A=r.DataView,I=A&&A.prototype,D=Object.prototype,L=r.RangeError,O=h.pack,R=h.unpack,C=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},B=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},N=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return O(e,23,4)},q=function(e){return O(e,52,8)},j=function(e,t){g(e.prototype,t,{get:function(){return x(this)[t]}})},U=function(e,t,n,r){var i=f(n),a=x(e);if(i+t>a.byteLength)throw L(T);var o=x(a.buffer).bytes,s=i+a.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()},V=function(e,t,n,r,i,a){var o=f(n),s=x(e);if(o+t>s.byteLength)throw L(T);for(var u=x(s.buffer).bytes,c=o+s.byteOffset,l=r(+i),d=0;d<t;d++)u[c+d]=l[a?d:t-d-1]};if(a){if(!u((function(){P(1)}))||!u((function(){new P(-1)}))||u((function(){return new P,new P(1.5),new P(NaN),P.name!=w}))){for(var H,z=(E=function(e){return c(this,E),new P(f(e))}).prototype=P.prototype,G=y(P),W=0;G.length>W;)(H=G[W++])in E||o(E,H,P[H]);z.constructor=E}v&&p(I)!==D&&v(I,D);var K=new A(new E(2)),$=I.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||s(I,{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},{unsafe:!0})}else E=function(e){c(this,E,w);var t=f(e);k(this,{bytes:m.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},A=function(e,t,n){c(this,A,S),c(e,E,S);var r=x(e).byteLength,a=l(t);if(a<0||a>r)throw L("Wrong offset");if(a+(n=n===undefined?r-a:d(n))>r)throw L("Wrong length");k(this,{buffer:e,byteLength:n,byteOffset:a}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},i&&(j(E,"byteLength"),j(A,"buffer"),j(A,"byteLength"),j(A,"byteOffset")),s(A.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:undefined);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:undefined);return t[1]<<8|t[0]},getInt32:function(e){return N(U(this,4,e,arguments.length>1?arguments[1]:undefined))},getUint32:function(e){return N(U(this,4,e,arguments.length>1?arguments[1]:undefined))>>>0},getFloat32:function(e){return R(U(this,4,e,arguments.length>1?arguments[1]:undefined),23)},getFloat64:function(e){return R(U(this,8,e,arguments.length>1?arguments[1]:undefined),52)},setInt8:function(e,t){V(this,1,e,C,t)},setUint8:function(e,t){V(this,1,e,C,t)},setInt16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:undefined)},setUint16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:undefined)},setInt32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:undefined)},setUint32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:undefined)},setFloat32:function(e,t){V(this,4,e,F,t,arguments.length>2?arguments[2]:undefined)},setFloat64:function(e,t){V(this,8,e,q,t,arguments.length>2?arguments[2]:undefined)}});_(E,w),_(A,S),e.exports={ArrayBuffer:E,DataView:A}},function(e,t,n){var r=n(274),i=n(183),a=n(400),o=n(148),s=function(e){return function(t,n,s,u){r(n);var c=i(t),l=a(c),d=o(c.length),f=e?d-1:0,h=e?-1:1;if(s<2)for(;;){if(f in l){u=l[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=h)f in l&&(u=n(u,l[f],f,c));return u}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(80),i=n(274),a=n(183),o=n(92),s=n(341),u=[],c=u.sort,l=o((function(){u.sort(undefined)})),d=o((function(){u.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||!f},{sort:function(e){return e===undefined?c.call(a(this)):c.call(a(this),i(e))}})},function(e,t,n){"use strict";var r=n(196),i=n(688),a=n(788),o=i(5),s="find",u=!0;s in[]&&Array(1).find((function(){u=!1})),r({target:"Array",proto:!0,forced:u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:undefined)}}),a(s)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(306);var i={stringify:function(e,t,n){var i="";try{i=r.a.JSON.stringify(e,t,n)}catch(a){}return i},parse:function(e,t){return r.a.JSON?r.a.JSON.parse(e,t):null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(96),i=n.n(r);n(30),n(17),n(611),n(110),n(101);function a(e){return i()(new Set(e))}},function(e,t,n){"use strict";(function(e,r){var i,a=n(651);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(a.a)(i);t.a=o}).call(this,n(237),n(739)(e))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LIB=1]="LIB",e[e.KERNEL=2]="KERNEL",e[e.NETWORK=3]="NETWORK",e[e.DRM=4]="DRM",e[e.TIMELINE=5]="TIMELINE",e[e.MANIFEST=6]="MANIFEST",e[e.LOADER=7]="LOADER",e[e.MUX=8]="MUX",e[e.AVCODEC=9]="AVCODEC",e[e.AVFORMAT=10]="AVFORMAT",e[e.RENDERER=11]="RENDERER",e[e.MAT=12]="MAT"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(17),n(23);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var p=function(e){u()(n,e);var t=h(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n)}(n(268).a);p.DESTROYING="Destroying",p.DESTROYED="Destroying",p.STREAM_ENCRYPTED="StreamEncrypted",p.MSE_ATTACHING="MSEAttaching",p.MSE_ATTACHED="MSEAttached",p.MSE_DETACHING="MSEDetaching",p.MSE_DETACHED="MediaDetached",p.MEDIA_IDLE="MediaIdle",p.BUFFER_CREATED="BufferCreated",p.BUFFER_UPDATED="BufferUpdated",p.BUFFER_EXPECTING="BufferExpecting",p.BUFFER_APPENDING="BufferAppending",p.BUFFER_APPENDED="BufferAppended",p.BUFFER_FLUSHING="BufferFlushing",p.BUFFER_FLUSHED="BufferFlushed",p.MANIFEST_LOADED="ManifestLoaded",p.DATA_EOD="DataEOD",p.AUDIO_TRACK_SWITCHED_FAILED="TrackSwitchedFailed",p.AUDIO_TRACK_SWITCHED_SUCCESS="TrackSwitchedSuccess",p.FPS_REPORT="FpsReport",p.FPS_STUCK="FpsStuck",p.DNS_PARSER_SUCCESS="DNS_PARSER_SUCCESS"},,function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NET_UNSUPPORTED_SCHEME=1e3]="NET_UNSUPPORTED_SCHEME",e[e.NET_HTTPS_UNMATCHED_HTTP_SCHEME=1001]="NET_HTTPS_UNMATCHED_HTTP_SCHEME",e[e.MFT_FAILED_TO_PARSE_M3U8=2101]="MFT_FAILED_TO_PARSE_M3U8",e[e.MFT_FAILED_TO_PARSE_FLV=2102]="MFT_FAILED_TO_PARSE_FLV",e[e.MFT_FAILED_TO_PARSE_MPD=2103]="MFT_FAILED_TO_PARSE_MPD",e[e.MFT_FAILED_TO_PARSE_JDASH=2104]="MFT_FAILED_TO_PARSE_JDASH",e[e.MFT_FAILED_TO_PARSE_MPD_XML=2301]="MFT_FAILED_TO_PARSE_MPD_XML",e[e.MFT_FAILED_TO_GET_MPD_XML=2302]="MFT_FAILED_TO_GET_MPD_XML",e[e.MEDIA_VIDEO_ERROR=3e3]="MEDIA_VIDEO_ERROR",e[e.MEDIA_SOURCE_OPERATION_FAILED=3001]="MEDIA_SOURCE_OPERATION_FAILED",e[e.MEDIA_SOURCE_OPERATION_THREW=3002]="MEDIA_SOURCE_OPERATION_THREW",e[e.MEDIA_QUOTA_EXCEEDED=3003]="MEDIA_QUOTA_EXCEEDED",e[e.MEDIA_HIGH_BUFFER=3004]="MEDIA_HIGH_BUFFER",e[e.MEDIA_PIPELINE_ERROR_DECODE=3300]="MEDIA_PIPELINE_ERROR_DECODE",e[e.MEDIA_VIDEO_DECODE_ERROR=3301]="MEDIA_VIDEO_DECODE_ERROR",e[e.MEDIA_VDA_ERROR=3302]="MEDIA_VDA_ERROR",e[e.MEDIA_AUDIO_RENDERER_ERROR=3303]="MEDIA_AUDIO_RENDERER_ERROR",e[e.MEDIA_URL_SAFE_REJECTED=3401]="MEDIA_URL_SAFE_REJECTED",e[e.UNSUPPORTED_PLAY_RANGE=4e3]="UNSUPPORTED_PLAY_RANGE",e[e.DATA_AD_ERROR=4027]="DATA_AD_ERROR",e[e.DATA_P2P_DISPATCH=4100]="DATA_P2P_DISPATCH",e[e.DATA_P2P_LOAD=4101]="DATA_P2P_LOAD",e[e.DATA_P2P_LOAD_ACCESS=4102]="DATA_P2P_LOAD_ACCESS",e[e.DATA_P2P_MEMORY_ALLOC=4103]="DATA_P2P_MEMORY_ALLOC",e[e.DATA_P2P_DASH_BYTES_LENGTH=4104]="DATA_P2P_DASH_BYTES_LENGTH",e[e.DATA_P2P_AUTH=4105]="DATA_P2P_AUTH",e[e.DATA_P2P_RANGE_ERROR=4106]="DATA_P2P_RANGE_ERROR",e[e.DATA_P2P_DATA_NULL=4107]="DATA_P2P_DATA_NULL",e[e.DATA_HLS_DISPATCH_TIMEOUT=4200]="DATA_HLS_DISPATCH_TIMEOUT",e[e.DATA_HLS_DISPATCH_ERROR=4201]="DATA_HLS_DISPATCH_ERROR",e[e.DATA_HLS_CDN_TIMEOUT=4202]="DATA_HLS_CDN_TIMEOUT",e[e.DATA_HLS_CDN_ERROR=4203]="DATA_HLS_CDN_ERROR",e[e.DATA_AUTH_Error=4204]="DATA_AUTH_Error",e[e.DATA_FLV_TIMEOUT=4301]="DATA_FLV_TIMEOUT",e[e.DATA_FLV_ERROR=4302]="DATA_FLV_ERROR",e[e.DATA_FLV_DISPATCH_ERROR=4303]="DATA_FLV_DISPATCH_ERROR",e[e.DATA_DASH_TIMEOUT=4401]="DATA_DASH_TIMEOUT",e[e.DATA_DASH_ERROR=4402]="DATA_DASH_ERROR",e[e.DATA_DASH_DISPATCH_ERROR=4403]="DATA_DASH_DISPATCH_ERROR",e[e.DATA_DASH_RANGE_ERROR=4404]="DATA_DASH_RANGE_ERROR",e[e.DATA_MP4_DISPATCH_ERROR=4501]="DATA_MP4_DISPATCH_ERROR",e[e.DATA_MP4_DISPATCH_TIMEOUT=4502]="DATA_MP4_DISPATCH_TIMEOUT",e[e.DATA_MP4_CDN_TIMEOUT=4503]="DATA_MP4_CDN_TIMEOUT",e[e.DATA_MP4_CDN_ERROR=4504]="DATA_MP4_CDN_ERROR",e[e.DATA_AUDIO_LOADED_ERROR=4601]="DATA_AUDIO_LOADED_ERROR",e[e.DATA_AUDIO_LOADED_TIMEOUT=4602]="DATA_AUDIO_LOADED_TIMEOUT",e[e.MUX_UNKNOWN_FAILED=5e3]="MUX_UNKNOWN_FAILED",e[e.MUX_WORKER_INITIALIZE=5001]="MUX_WORKER_INITIALIZE",e[e.MUX_WORKER_INTERNAL_EXCEPTION=5002]="MUX_WORKER_INTERNAL_EXCEPTION",e[e.MUX_WORKER_MESSAGE_EXCEPTION=5003]="MUX_WORKER_MESSAGE_EXCEPTION",e[e.MUX_TS_SYNC_BYTE=5100]="MUX_TS_SYNC_BYTE",e[e.MUX_FLV_TAG_INVALID=5200]="MUX_FLV_TAG_INVALID",e[e.MUX_FLV_HEAD_SIGNATURE=5201]="MUX_FLV_HEAD_SIGNATURE",e[e.MUX_FLV_NOT_EXPECTED_ADJACENT_DATA=5202]="MUX_FLV_NOT_EXPECTED_ADJACENT_DATA",e[e.MUX_M4S_FTYP_INVALID=5300]="MUX_M4S_FTYP_INVALID",e[e.DRM_NO_RECOGNIZED_KEY_SYSTEMS=6e3]="DRM_NO_RECOGNIZED_KEY_SYSTEMS",e[e.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE=6001]="DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE",e[e.DRM_FAILED_TO_CREATE_CDM=6002]="DRM_FAILED_TO_CREATE_CDM",e[e.DRM_FAILED_TO_ATTACH_TO_VIDEO=6003]="DRM_FAILED_TO_ATTACH_TO_VIDEO",e[e.DRM_INVALID_SERVER_CERTIFICATE=6004]="DRM_INVALID_SERVER_CERTIFICATE",e[e.DRM_FAILED_TO_CREATE_SESSION=6005]="DRM_FAILED_TO_CREATE_SESSION",e[e.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST=6006]="DRM_FAILED_TO_GENERATE_LICENSE_REQUEST",e[e.DRM_LICENSE_REQUEST_ERROR=6007]="DRM_LICENSE_REQUEST_ERROR",e[e.DRM_LICENSE_REQUEST_TIMEOUT=6008]="DRM_LICENSE_REQUEST_TIMEOUT",e[e.DRM_NO_LICENSE_SERVER_RESPONSE=6009]="DRM_NO_LICENSE_SERVER_RESPONSE",e[e.DRM_LICENSE_RESPONSE_REJECTED=6010]="DRM_LICENSE_RESPONSE_REJECTED",e[e.DRM_NO_LICENSE_SERVER_GIVEN=6012]="DRM_NO_LICENSE_SERVER_GIVEN",e[e.DRM_NO_RECOGNIZED_ERROR=6013]="DRM_NO_RECOGNIZED_ERROR",e[e.DRM_SERVER_REJECT_BY_LICENSE_SDK=6015]="DRM_SERVER_REJECT_BY_LICENSE_SDK"}(r||(r={}))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(259);e.exports=function(e,t){var n=[][e];return!n||!r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(196),i=n(646),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){"use strict";var r=n(196),i=n(786),a=n(536),o=n(348),s=n(421),u=n(795),c=n(794),l=n(647),d=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l("splice")},{splice:function(e,t){var n,r,l,v,y,g,m=s(this),_=o(m.length),b=i(e,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=f(d(a(t),0),_-b)),_+n-r>h)throw TypeError(p);for(l=u(m,r),v=0;v<r;v++)(y=b+v)in m&&c(l,v,m[y]);if(l.length=r,n<r){for(v=b;v<_-r;v++)g=v+n,(y=v+r)in m?m[g]=m[y]:delete m[g];for(v=_;v>_-r+n;v--)delete m[v-1]}else if(n>r)for(v=_-r;v>b;v--)g=v+n-1,(y=v+r-1)in m?m[g]=m[y]:delete m[g];for(v=0;v<n;v++)m[v+b]=arguments[v+2];return m.length=_-r+n,l}})},function(e,t,n){"use strict";var r=n(827),i=n(640),a=n(823),o="String Iterator",s=i.set,u=i.getterFor(o);a(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:undefined,done:!0}:(e=r(n,i,!0),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(196),i=n(259),a=n(646),o=n(285),s=n(421),u=n(348),c=n(794),l=n(795),d=n(647),f=n(260)("isConcatSpreadable"),h=9007199254740991,p="Maximum allowed index exceeded",v=!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),y=d("concat"),g=function(e){if(!o(e))return!1;var t=e[f];return t!==undefined?!!t:a(e)};r({target:"Array",proto:!0,forced:!v||!y},{concat:function(e){var t,n,r,i,a,o=s(this),d=l(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(g(a=-1===t?o:arguments[t])){if(f+(i=u(a.length))>h)throw TypeError(p);for(n=0;n<i;n++,f++)n in a&&c(d,f,a[n])}else{if(f>=h)throw TypeError(p);c(d,f++,a)}return d.length=f,d}})},function(e,t,n){"use strict";var r=n(196),i=n(463),a=n(421),o=n(259),s=n(537),u=[].sort,c=[1,2,3],l=o((function(){c.sort(undefined)})),d=o((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||f},{sort:function(e){return e===undefined?u.call(a(this)):u.call(a(this),i(e))}})},function(e,t,n){"use strict";var r=n(196),i=n(1044);r({target:"Array",proto:!0,forced:n(537)("reduce")},{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(196),i=n(348),a=n(789),o=n(791),s="startsWith",u="".startsWith;r({target:"String",proto:!0,forced:!o(s)},{startsWith:function(e){var t=a(this,e,s),n=i(Math.min(arguments.length>1?arguments[1]:undefined,t.length)),r=String(e);return u?u.call(t,r,n):t.slice(n,n+r.length)===r}})},,function(e,t,n){"use strict";var r=n(28),i=n(29),a=n(81),o=n(549),s=n(90),u=n(457),c=n(188),l=n(173),d=n(94),f=n(77),h=n(458),p=n(459),v=n(169),y=n(91),g=n(238),m=n(72),_=n(161),b=n(240),x=n(168).f,k=n(550),w=n(139),S=n(222),T=n(87),P=n(153),E=n(143),A=E.get,I=E.set,D=T.f,L=P.f,O=w(0),R=i.RangeError,C=u.ArrayBuffer,M=u.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,N=s.TYPED_ARRAY_TAG,F=s.TypedArray,q=s.TypedArrayPrototype,j=s.aTypedArrayConstructor,U=s.isTypedArray,V="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var n=0,r=t.length,i=new(j(e))(r);r>n;)i[n]=t[n++];return i},G=function(e,t){D(e,t,{get:function(){return A(this)[t]}})},W=function(e){var t;return e instanceof C||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},K=function(e,t){return U(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},$=function(e,t){return K(e,t=v(t,!0))?l(2,e[t]):L(e,t)},Y=function(e,t,n){return!(K(e,t=v(t,!0))&&m(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?D(e,t,n):(e[t]=n.value,e)};a?(B||(P.f=$,T.f=Y,G(q,"buffer"),G(q,"byteOffset"),G(q,"byteLength"),G(q,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:$,defineProperty:Y}),e.exports=function(e,t,n,a){var s=e+(a?"Clamped":"")+"Array",u="get"+e,l="set"+e,v=i[s],y=v,g=y&&y.prototype,w={},T=function(e,n){D(e,n,{get:function(){return function(e,n){var r=A(e);return r.view[u](n*t+r.byteOffset,!0)}(this,n)},set:function(e){return function(e,n,r){var i=A(e);a&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.view[l](n*t+i.byteOffset,r,!0)}(this,n,e)},enumerable:!0})};B?o&&(y=n((function(e,n,r,i){return c(e,y,s),m(n)?W(n)?i!==undefined?new v(n,p(r,t),i):r!==undefined?new v(n,p(r,t)):new v(n):U(n)?z(y,n):k.call(y,n):new v(h(n))})),b&&b(y,F),O(x(v),(function(e){e in y||d(y,e,v[e])})),y.prototype=g):(y=n((function(e,n,r,i){c(e,y,s);var a,o,u,l=0,d=0;if(m(n)){if(!W(n))return U(n)?z(y,n):k.call(y,n);a=n,d=p(r,t);var v=n.byteLength;if(i===undefined){if(v%t)throw R(H);if((o=v-d)<0)throw R(H)}else if((o=f(i)*t)+d>v)throw R(H);u=o/t}else u=h(n),a=new C(o=u*t);for(I(e,{buffer:a,byteOffset:d,byteLength:o,length:u,view:new M(a)});l<u;)T(e,l++)})),b&&b(y,F),g=y.prototype=_(q)),g.constructor!==y&&d(g,"constructor",y),N&&d(g,N,s),w[s]=y,r({global:!0,forced:y!=v,sham:!B},w),V in y||d(y,V,t),V in g||d(g,V,t),S(s)}):e.exports=function(){}},function(e,t,n){"use strict";var r=n(28),i=n(31),a=n(457),o=n(78),s=n(172),u=n(77),c=n(187),l=a.ArrayBuffer,d=a.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,undefined).byteLength}))},{slice:function(e,t){if(f!==undefined&&t===undefined)return f.call(o(this),e);for(var n=o(this).byteLength,r=s(e,n),i=s(t===undefined?n:t,n),a=new(c(this,l))(u(i-r)),h=new d(this),p=new d(a),v=0;r<i;)p.setUint8(v++,h.getUint8(r++));return a}})},function(e,t,n){n(546)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(29),i=n(31),a=n(234),o=n(90).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!o||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!a((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,undefined).length}))},function(e,t,n){var r=n(89),i=n(77),a=n(269),o=n(281),s=n(164),u=n(90).aTypedArrayConstructor;e.exports=function(e){var t,n,c,l,d,f=r(e),h=arguments.length,p=h>1?arguments[1]:undefined,v=p!==undefined,y=a(f);if(y!=undefined&&!o(y))for(d=y.call(f),f=[];!(l=d.next()).done;)f.push(l.value);for(v&&h>2&&(p=s(p,arguments[2],2)),n=i(f.length),c=new(u(this))(n),t=0;n>t;t++)c[t]=v?p(f[t],t):f[t];return c}},function(e,t,n){"use strict";var r=n(552),i=n(90),a=i.aTypedArray;i.exportProto("copyWithin",(function(e,t){return r.call(a(this),e,t,arguments.length>2?arguments[2]:undefined)}))},function(e,t,n){"use strict";var r=n(89),i=n(172),a=n(77);e.exports=[].copyWithin||function(e,t){var n=r(this),o=a(n.length),s=i(e,o),u=i(t,o),c=arguments.length>2?arguments[2]:undefined,l=Math.min((c===undefined?o:i(c,o))-u,o-s),d=1;for(u<s&&s<u+l&&(d=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=d,u+=d;return n}},function(e,t,n){"use strict";var r=n(139),i=n(90),a=r(4),o=i.aTypedArray;i.exportProto("every",(function(e){return a(o(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(90),i=n(366),a=r.aTypedArray;r.exportProto("fill",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(187),i=n(90),a=n(139)(2),o=i.aTypedArray,s=i.aTypedArrayConstructor;i.exportProto("filter",(function(e){for(var t=a(o(this),e,arguments.length>1?arguments[1]:undefined),n=r(this,this.constructor),i=0,u=t.length,c=new(s(n))(u);u>i;)c[i]=t[i++];return c}))},function(e,t,n){"use strict";var r=n(90),i=n(139)(5),a=r.aTypedArray;r.exportProto("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(90),i=n(139)(6),a=r.aTypedArray;r.exportProto("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(90),i=n(139)(0),a=r.aTypedArray;r.exportProto("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(239),i=n(90),a=i.aTypedArray,o=r(!0);i.exportProto("includes",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(239),i=n(90),a=i.aTypedArray,o=r(!1);i.exportProto("indexOf",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(29),i=n(108),a=n(90),o=n(38)("iterator"),s=r.Uint8Array,u=i.values,c=i.keys,l=i.entries,d=a.aTypedArray,f=a.exportProto,h=s&&s.prototype[o],p=!!h&&("values"==h.name||h.name==undefined),v=function(){return u.call(d(this))};f("entries",(function(){return l.call(d(this))})),f("keys",(function(){return c.call(d(this))})),f("values",v,!p),f(o,v,!p)},function(e,t,n){"use strict";var r=n(90),i=r.aTypedArray,a=[].join;r.exportProto("join",(function(e){return a.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(334),i=n(90),a=i.aTypedArray;i.exportProto("lastIndexOf",(function(e){return r.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(187),i=n(90),a=n(139),o=i.aTypedArray,s=i.aTypedArrayConstructor,u=a(1,(function(e,t){return new(s(r(e,e.constructor)))(t)}));i.exportProto("map",(function(e){return u(o(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(90),i=n(423),a=r.aTypedArray;r.exportProto("reduce",(function(e){return i(a(this),e,arguments.length,arguments[1],!1)}))},function(e,t,n){"use strict";var r=n(90),i=n(423),a=r.aTypedArray;r.exportProto("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments[1],!0)}))},function(e,t,n){"use strict";var r=n(90),i=r.aTypedArray;r.exportProto("reverse",(function(){for(var e,t=this,n=i(t).length,r=Math.floor(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}))},function(e,t,n){"use strict";var r=n(77),i=n(459),a=n(89),o=n(90),s=n(31),u=o.aTypedArray,c=s((function(){new Int8Array(1).set({})}));o.exportProto("set",(function(e){u(this);var t=i(arguments[1],1),n=this.length,o=a(e),s=r(o.length),c=0;if(s+t>n)throw RangeError("Wrong length");for(;c<s;)this[t+c]=o[c++]}),c)},function(e,t,n){"use strict";var r=n(187),i=n(90),a=n(31),o=i.aTypedArray,s=i.aTypedArrayConstructor,u=[].slice,c=a((function(){new Int8Array(1).slice()}));i.exportProto("slice",(function(e,t){for(var n=u.call(o(this),e,t),i=r(this,this.constructor),a=0,c=n.length,l=new(s(i))(c);c>a;)l[a]=n[a++];return l}),c)},function(e,t,n){"use strict";var r=n(90),i=n(139)(3),a=r.aTypedArray;r.exportProto("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(90),i=r.aTypedArray,a=[].sort;r.exportProto("sort",(function(e){return a.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(77),i=n(172),a=n(187),o=n(90),s=o.aTypedArray;o.exportProto("subarray",(function(e,t){var n=s(this),o=n.length,u=i(e,o);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,r((t===undefined?o:i(t,o))-u))}))},function(e,t,n){"use strict";var r=n(29),i=n(31),a=n(90),o=r.Int8Array,s=a.aTypedArray,u=[].toLocaleString,c=[].slice,l=!!o&&i((function(){u.call(new o(1))})),d=i((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!i((function(){o.prototype.toLocaleString.call([1,2])}));a.exportProto("toLocaleString",(function(){return u.apply(l?c.call(s(this)):s(this),arguments)}),d)},function(e,t,n){"use strict";var r=n(29),i=n(90),a=n(31),o=r.Uint8Array,s=o&&o.prototype,u=[].toString,c=[].join;a((function(){u.call({})}))&&(u=function(){return c.call(this)}),i.exportProto("toString",u,(s||{}).toString!=u)},,,,,,function(e,t,n){var r=n(29),i=n(164),a=Function.call;e.exports=function(e,t,n){return i(a,r[e].prototype[t],n)}},function(e,t,n){var r=n(419);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(147),i=n(92),a=n(505);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(506);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(162),i=n(587),a=n(228),o=n(158);e.exports=function(e,t){for(var n=i(t),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(264),i=n(324),a=n(512),o=n(116);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(162),i=n(265),a=n(401).indexOf,o=n(398);e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(o,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var r=n(264);e.exports=r("document","documentElement")},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(590);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(326),i=n(183),a=n(729),o=n(518),s=n(148),u=n(430),c=n(406);e.exports=function(e){var t,n,l,d,f,h,p=i(e),v="function"==typeof this?this:Array,y=arguments.length,g=y>1?arguments[1]:undefined,m=g!==undefined,_=c(p),b=0;if(m&&(g=r(g,y>2?arguments[2]:undefined,2)),_==undefined||v==Array&&o(_))for(n=new v(t=s(p.length));t>b;b++)h=m?g(p[b],b):p[b],u(n,b,h);else for(f=(d=_.call(p)).next,n=new v;!(l=f.call(d)).done;b++)h=m?a(d,g,[l.value,b],!0):l.value,u(n,b,h);return n.length=b,n}},function(e,t,n){var r=n(116);e.exports=function(e){var t=e["return"];if(t!==undefined)return r(t.call(e)).value}},function(e,t,n){"use strict";var r=n(596).IteratorPrototype,i=n(301),a=n(299),o=n(275),s=n(405),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var r,i,a,o=n(92),s=n(302),u=n(215),c=n(162),l=n(132),d=n(322),f=l("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(i=s(s(a)))!==Object.prototype&&(r=i):h=!0);var p=r==undefined||o((function(){var e={};return r[f].call(e)!==e}));p&&(r={}),d&&!p||c(r,f)||u(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var r=n(145);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(132);t.f=r},function(e,t,n){var r=n(508),i=n(162),a=n(598),o=n(158).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r,i,a,o=n(99),s=n(92),u=n(326),c=n(589),l=n(505),d=n(602),f=n(396),h=o.location,p=o.setImmediate,v=o.clearImmediate,y=o.process,g=o.MessageChannel,m=o.Dispatch,_=0,b={},x="onreadystatechange",k=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},w=function(e){return function(){k(e)}},S=function(e){k(e.data)},T=function(e){o.postMessage(e+"",h.protocol+"//"+h.host)};p&&v||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++_]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},r(_),_},v=function(e){delete b[e]},f?r=function(e){y.nextTick(w(e))}:m&&m.now?r=function(e){m.now(w(e))}:g&&!d?(a=(i=new g).port2,i.port1.onmessage=S,r=u(a.postMessage,a,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&h&&"file:"!==h.protocol&&!s(T)?(r=T,o.addEventListener("message",S,!1)):r=x in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),k(e)}}:function(e){setTimeout(w(e),0)}),e.exports={set:p,clear:v}},function(e,t,n){var r=n(507);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(274),i=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(147),i=n(92),a=n(429),o=n(512),s=n(510),u=n(183),c=n(400),l=Object.assign,d=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||a(l({},t)).join("")!=i}))?function(e,t){for(var n=u(e),i=arguments.length,l=1,d=o.f,f=s.f;i>l;)for(var h,p=c(arguments[l++]),v=d?a(p).concat(d(p)):a(p),y=v.length,g=0;y>g;)h=v[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:l},function(e,t,n){"use strict";var r=n(80),i=n(99),a=n(402),o=n(204),s=n(606),u=n(522),c=n(327),l=n(145),d=n(92),f=n(433),h=n(275),p=n(434);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),g=v?"set":"add",m=i[e],_=m&&m.prototype,b=m,x={},k=function(e){var t=_[e];o(_,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?undefined:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof m||!(y||_.forEach&&!d((function(){(new m).entries().next()})))))b=n.getConstructor(t,e,v,g),s.REQUIRED=!0;else if(a(e,!0)){var w=new b,S=w[g](y?{}:-0,1)!=w,T=d((function(){w.has(1)})),P=f((function(e){new m(e)})),E=!y&&d((function(){for(var e=new m,t=5;t--;)e[g](t,t);return!e.has(-0)}));P||((b=t((function(t,n){c(t,b,e);var r=p(new m,t,b);return n!=undefined&&u(n,r[g],{that:r,AS_ENTRIES:v}),r}))).prototype=_,_.constructor=b),(T||E)&&(k("delete"),k("has"),v&&k("get")),(E||S)&&k(g),y&&_.clear&&delete _.clear}return x[e]=b,r({global:!0,forced:b!=m},x),h(b,e),y||n.setStrong(b,e,v),b}},function(e,t,n){var r=n(398),i=n(145),a=n(162),o=n(158).f,s=n(395),u=n(607),c=s("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(e){o(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&d(e)&&!a(e,c)&&f(e),e}};r[c]=!0},function(e,t,n){var r=n(92);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(158).f,i=n(301),a=n(437),o=n(326),s=n(327),u=n(522),c=n(520),l=n(407),d=n(147),f=n(606).fastKey,h=n(254),p=h.set,v=h.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t),p(e,{type:t,index:i(null),first:undefined,last:undefined,size:0}),d||(e.size=0),r!=undefined&&u(r,e[c],{that:e,AS_ENTRIES:n})})),h=v(t),y=function(e,t,n){var r,i,a=h(e),o=g(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:undefined,removed:!1},a.first||(a.first=o),r&&(r.next=o),d?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},g=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(l.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=undefined),delete t[n.index],n=n.next;e.first=e.last=undefined,d?e.size=0:this.size=0},"delete":function(e){var t=this,n=h(t),r=g(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),d?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:undefined,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),a(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),d&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),a=v(r);c(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:undefined})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=undefined,{value:undefined,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(17),n(88);var r={create:function(){return Math.ceil(1e16*Math.random()+(new Date).getTime()).toString(32)}}},function(e,t,n){var r=n(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(605),i=n(608);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){"use strict";var r,i=n(80),a=n(228).f,o=n(148),s=n(613),u=n(255),c=n(614),l=n(322),d="".startsWith,f=Math.min,h=c("startsWith");i({target:"String",proto:!0,forced:!!(l||h||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(e){var t=String(u(this));s(e);var n=o(f(arguments.length>1?arguments[1]:undefined,t.length)),r=String(e);return d?d.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(523);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(132)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d),h=(n(35),n(86));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(e){u()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}}]),n}(h.EventEmitter)},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(256),i=n(148);e.exports=function(e){if(e===undefined)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var r=n(183),i=n(325),a=n(148);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:undefined,n),u=o>2?arguments[2]:undefined,c=u===undefined?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){var r=n(742);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){"use strict";var r=n(265),i=n(256),a=n(148),o=n(341),s=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf"),d=c||!l;e.exports=d?function(e){if(c)return u.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},function(e,t,n){var r=n(92),i=n(132),a=n(322),o=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",undefined).host}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(105),i=n.n(r);n(258),n(70),n(149),n(17),n(88),n(344),n(408),n(345),n(623),n(35),n(115),n(276),n(191),n(303),n(30),n(110),n(101),n(340),n(314);function a(e){var t={};function n(r){try{if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};e[r].call(i.exports,i,i.exports,n),i.l=!0}catch(a){throw"__webpack_require__ failed ".concat(a.stack||a.message)}return i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i()(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r["default"]||r}var o="[\\.|\\-|\\+|\\w|/|@]+",s="\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function u(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(e,t,r){var i={};i[r]=[];var a=t.toString(),c=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return i;for(var l,d=c[1],f=new RegExp("(\\\\n|\\W)"+u(d)+s,"g");l=f.exec(a);)"dll-reference"!==l[3]&&i[r].push(l[3]);for(f=new RegExp("\\("+u(d)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+s,"g");l=f.exec(a);)e[l[2]]||(i[r].push(l[1]),e[l[2]]=n(l[1]).m),i[l[2]]=i[l[2]]||[],i[l[2]].push(l[4]);for(var h,p=Object.keys(i),v=0;v<p.length;v++)for(var y=0;y<i[p[v]].length;y++)h=i[p[v]][y],isNaN(1*h)||(i[p[v]][y]=1*i[p[v]][y]);return i}function l(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function d(e,t){t=t||{};var r={main:n.m},i=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};l(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s].pop();if(i[s]=i[s]||{},!i[s][u]&&e[s][u]){i[s][u]=!0,r[s]=r[s]||[],r[s].push(u);for(var d=c(e,e[s][u],s),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return r}(r,e),o="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"}),u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(u,t.worker||{});return d.objectURL=u,d}},function(e,t,n){"use strict";var r=n(80),i=n(526).left,a=n(341),o=n(397),s=n(396);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(39),a=n(354);function o(e,t,n){var o,s,u=e;if(!(t>a.a.length-1))return r.a.browser.FIREFOX?t>=6?(e=5,s=new Array(4),o=t-3):(e=2,s=new Array(2),o=t):r.a.os.android?(e=2,s=new Array(2),o=t):(e=5,s=new Array(4),t>=6?o=t-3:(1===n&&(e=2,s=new Array(2)),o=t)),s[0]=e<<3,s[0]|=(14&t)>>1,s[1]|=(1&t)<<7,s[1]|=n<<3,5===e&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{config:s,sampleRate:a.a[t],channelCount:n,codec:"mp4a.40."+e,realCodec:"mp4a.40."+u};i.a.error("invalid sampling index:".concat(t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(17),n(88);function r(e){for(var t="avc1.",n=[e.profile_idc,e.profile_compatibility,e.level_idc],r=0;r<n.length;r++){var i=n[r].toString(16);i.length<2&&(i="0"+i),t+=i}return{codec:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(70),n(149),n(17),n(88),n(191),n(303),n(769),n(276),n(159),n(35);function r(e){var t,n,r,i=e.profile_compatibility,a=e.level_idc,o=e.profile_space,s=e.profile_idc,u=e.tier_flag,c=e.constraint_indicator_flags,l="";switch(o){case 0:l=""+s;break;case 1:l="A"+s;break;case 2:l+="B"+s;break;case 3:l+="C"+s}t=i.toString(16).replace(/0/gi,"").toUpperCase(),n=(0===u?"L":"H")+a;for(var d,f=[],h=c.length-1,p=!0;h>=0;h--)d=c[h],p&&0===d||(p=!1,f.push(d));return r=f.reverse().map((function(e){return e.toString(16).toUpperCase()})).join("."),{codec:"hvc1.".concat(l,".").concat(t,".").concat(n,".").concat(r).split(".").filter((function(e){return!!e})).join(".")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67);function r(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=function(){function e(t){i()(this,e),this._id=null,this._frequency=Infinity,this._callback=function(){t()}}return o()(e,[{key:"running",get:function(){return null!==this._id}},{key:"stop",value:function(){this.running&&(cancelAnimationFrame(this._id),this._id=null)}},{key:"start",value:function(){var e=this;this.stop(),this._id=requestAnimationFrame((function(){e._callback(),e.start()}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(111),n(133);function r(){for(var e,t=[],n=0;n<arguments.length;n++){e=n<0||arguments.length<=n?undefined:arguments[n];for(var r,i=0;i<e.length;i++){r=e[i];var a=t.indexOf(r);-1===a?t.push(r):t.splice(a,1)}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=function(){function e(t){i()(this,e),this._id=null,this._frequency=Infinity,this._callback=function(){t()}}return o()(e,[{key:"running",get:function(){return null!==this._id}},{key:"cancel",value:function(){this.running&&(clearTimeout(this._id),this._id=null)}},{key:"schedule",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e),this._id=setTimeout((function(){t._callback()}),this._frequency)}},{key:"scheduleRepeated",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e);this._id=setTimeout((function n(){t._callback(),t.running&&(t._id=setTimeout(n,t._frequency))}),this._frequency)}},{key:"adjustFrequency",value:function(e){this._frequency=1e3*e}}]),e}()},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ERROR="ERROR",e.TIMEOUT="TIMEOUT",e.ABORT="ABORT"}(r||(r={}))},function(e,t,n){"use strict";var r=n(80),i=n(216).find,a=n(521),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a(o)},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){var r=n(363),i=n(682),a=n(635),o=n(441),s=n(637),u=n(346),c=n(809),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return a(!i.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(259),i=n(442),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(285);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(219),i=n(784),a=n(639),o="__core-js_shared__",s=r[o]||i(o,{});(e.exports=function(e,t){return s[e]||(s[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t,n){var r,i,a,o=n(1021),s=n(219),u=n(285),c=n(409),l=n(346),d=n(683),f=n(641),h=s.WeakMap;if(o){var p=new h,v=p.get,y=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return v.call(p,e)||{}},a=function(e){return y.call(p,e)}}else{var m=d("state");f[m]=!0,r=function(e,t){return c(e,m,t),t},i=function(e){return l(e,m)?e[m]:{}},a=function(e){return l(e,m)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports={}},function(e,t,n){var r=n(812),i=n(787).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(310),i=n(1023),a=n(787),o=n(641),s=n(813),u=n(783),c=n(683)("IE_PROTO"),l=function(){},d=function(){var e,t=u("iframe"),n=a.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;n--;)delete d.prototype[a[n]];return d()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=r(e),n=new l,l.prototype=null,n[c]=e):n=d(),t===undefined?n:i(n,t)},o[c]=!0},function(e,t,n){var r=n(812),i=n(787);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports={}},function(e,t,n){var r=n(442);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(259),i=n(260)("species");e.exports=function(e){return!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r=n(363),i=n(219),a=n(686),o=n(829),s=n(347).f,u=n(642).f,c=n(790),l=n(796),d=n(443),f=n(259),h=n(816),p=n(260)("match"),v=i.RegExp,y=v.prototype,g=/a/g,m=/a/g,_=new v(g)!==g;if(a("RegExp",r&&(!_||f((function(){return m[p]=!1,v(g)!=g||v(m)==m||"/a/i"!=v(g,"i")}))))){for(var b=function(e,t){var n=this instanceof b,r=c(e),i=t===undefined;return!n&&r&&e.constructor===b&&i?e:o(_?new v(r&&!i?e.source:e,t):v((r=e instanceof b)?e.source:e,r&&i?l.call(e):t),n?this:y,b)},x=function(e){e in b||s(b,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},k=u(v),w=0;w<k.length;)x(k[w++]);y.constructor=b,b.prototype=y,d(i,"RegExp",b)}h("RegExp")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return XFactorManager}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(351),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(171),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(95),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(22),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(32),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(27),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(214),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(271),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(76),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_12__),XFactorManager=function(){function XFactorManager(e){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,XFactorManager),this.globalVarList=e||[]}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(XFactorManager,[{key:"clear",value:function(){this.globalVarList=[]}},{key:"reset",value:function(e){this.globalVarList=e}},{key:"setXFactor",value:function(e,t){this.globalVarList.find((function(t){return t.name===e})).initValue=t}},{key:"getXFactor",value:function(e){return this.globalVarList.find((function(t){return t.name===e}))}},{key:"getXFactorValue",value:function(){return this.getXFactor()?parseInt(this.getXFactor().initValue,10):0}},{key:"isShowInteractElement",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"isShowInteract",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"getInteractActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"getEndActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"doAlgorithm",value:function doAlgorithm(algorithmList){var self=this;if(algorithmList&&0!=algorithmList.length)return algorithmList.forEach((function(exp){var pattern=/^([A-Za-z0-9]+)(=)([A-Za-z0-9]+)(\+|-)(\d*)/,_pattern$exec=pattern.exec(exp),_pattern$exec2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec,6),v1=_pattern$exec2[1],v2=_pattern$exec2[3],e=_pattern$exec2[4],n=_pattern$exec2[5],r2=self.getXFactorValue(v2),r1=eval("".concat(r2).concat(e).concat(parseInt(n,10)));self.setXFactor(v1,r1>0?r1:0)})),self.globalVarList}},{key:"_expressParse",value:function _expressParse(item){var self=this,express=item.express,expressType=item.expressType,expressPara=item.expressPara,expressParaValue=self.getXFactorValue(expressPara.trim()),__eval=function __eval(str){var pattern=/^([A-Za-z0-9]+)([><!]=?|=)(\d*)/,_pattern$exec3=pattern.exec(str),_pattern$exec4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec3,4),k=_pattern$exec4[1],s=_pattern$exec4[2],v=_pattern$exec4[3],x=self.getXFactorValue(k);return!0===eval("".concat(x).concat(s).concat(parseInt(v,10)))},__mathParse=function(e,t,n){var r;return(r=Math[e]).call.apply(r,[null].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t.split(",").map((function(e){return e.trim()})).map((function(e){return self.getXFactorValue(e)})))))==n};switch(expressType){case"min":case"max":return __mathParse.apply(void 0,[expressType].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(express),[expressParaValue]));case"condition":return express.split("&&").map(__eval).every((function(e){return!0===e}))}}}]),XFactorManager}()},function(e,t,n){var r;r=function(e,t,r){var i=n(720);r.exports=function(){var e=i.dcdx.apply(i,arguments);return e}}.call(t,n,t,e),r===undefined||(e.exports=r)},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=new(n(680).a);function i(e){r.copyServices(e.cloneServices())}},function(e){e.exports=JSON.parse('{"name":"@mux/m2ts-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(39),i=n(102),a=n(354),o="AudioSpecificConfig";function s(e){var t=Object(i.c)(e,5);return 31==t&&(r.a.error("".concat(o," unsupported audioObjectType")),t=32+Object(i.c)(e,6)),t}function u(e){var t=0,n=Object(i.d)(e),u=s(n),c=Object(i.c)(n,4);if(15===c){r.a.error("".concat(o," unsupported samplingFrequencyIndex"));Object(i.c)(n,24,!0)}var l=Object(i.c)(n,4);if((l<0||l>=8)&&r.a.error("".concat(o," unsupported channel configuration")),5===u||29===u){if(t=5,1,29===u&&1,15==Object(i.c)(n,4))Object(i.c)(n,24);if(22==(u=s(n)))Object(i.c)(n,4)}var d=a.a[c];switch(u){case 1:case 2:case 3:case 4:case 6:case 7:case 17:case 19:case 20:case 21:case 22:case 23:!function(e,t,n,a){if(!(Object(i.b)(e)<2||(Object(i.a)(e),Object(i.a)(e)&&Object(i.b)(e)>=14&&Object(i.c)(e,14),Object(i.b)(e)<1))){var s=Object(i.a)(e);if(n||r.a.error("".concat(o," unsupported parse program_config_element")),6==a||20==a){if(Object(i.b)(e)<3)return;Object(i.e)(e,3)}s&&22==a&&Object(i.e)(e,16),17!=a&&19!=a&&20!=a&&23!=a||Object(i.e)(e,3),Object(i.b)(e)>=1&&Object(i.a)(e)&&r.a.error("".concat(o," unsupported extensionFlag3"))}}(n,0,l,u);break;default:r.a.warn("".concat(o," unsupported audioObjectType ").concat(u))}if(5!==t&&Object(i.b)(n)>=16){var f=Object(i.c)(n,11);if(695===f&&(t=s(n)),5===t&&1==Object(i.a)(n)){if(15===Object(i.c)(n,4))Object(i.c)(n,24);Object(i.b)(n)>=12&&1352==(f=Object(i.c)(n,11))&&Object(i.a)(n)}if(22===t&&1==Object(i.a)(n)){if(15==Object(i.c)(n,4))Object(i.c)(n,24);Object(i.b)(n)>=12&&1352==(f=Object(i.c)(n,11))&&Object(i.a)(n)}}return{audioObjectType:u,samplingFrequencyIndex:c,channelConfiguration:l,sampleRate:d}}},function(e){e.exports=JSON.parse('{"name":"@mux/flv-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@mux/mp4-fmp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@iqiyi-pcw-player/web-vod-p2p","version":"1.1.8-10","description":"H5_VOD_DataProver_ABS for M3U8TS , DashMP4","main":"./js/DataProvider.js","module ":"./js/DataProvider.js","scripts":{"build":"webpack","build-babel":"webpack --config webpack.config.babel.js --mode production","version-patch":"node update-version.js"},"repository":{"type":"git","url":"http://gitlab.qiyi.domain/webp2p/H5_VOD_DP_ABS.git"},"publishConfig":{"registry":"http://jfrog.cloud.qiyi.domain/api/npm/npm/"},"keywords":["H5","ABS","VOD","MSE","M3U8","TS","MPD","DRM","dashmp4"],"sideEffects":false,"dependencies":{"js-base64":"^2.5.1","md5":"^2.2.1"},"author":"wangpeng","license":"UNLICENSED","devDependencies":{"@babel/core":"^7.6.0","@babel/polyfill":"^7.6.0","@babel/preset-env":"^7.6.0","@babel/preset-react":"^7.0.0","babel-core":"^7.0.0-bridge.0","babel-loader":"^8.0.6","babel-preset-env":"^1.7.0","babelify":"^7.3.0","browserify":"^13.1.1","browserify-derequire":"^0.9.4","browserify-versionify":"^1.0.6","clean-webpack-plugin":"^3.0.0","core-js":"^3.1.3","del":"^2.2.0","gulp":"^3.9.1","gulp-babel":"^7.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^2.4.1","gulp-uglify":"^2.1.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0","webpack":"^4.10.0","webpack-cli":"^3.3.9"}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(130),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(88),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(111),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(30),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(45),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(46),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(47),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(48),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(49),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(50),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(51),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(52),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(53),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(54),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(55),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(56),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(57),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(58),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(59),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(60),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(61),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(62),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(63),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(64),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(65),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(66),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(67),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(344),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(149),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34__),_utils_Log__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7),_RunTime__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(2),_Config__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(11),_enum_EventType__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(97),_utils_Event__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(75),_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(12),_utils_Tools__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(19),_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(16),mozResponseType="moz-chunked-arraybuffer",isSupportMoz=null,xhrStatusProgress="",XHRLoader=function(){function e(t,n){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,e),this.videoType=t,this.eventID=n}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(e,[{key:"load",value:function(e,t){if(_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.sTime=performance.now(),_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.size=0,_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.eTime=0,this.tast=e,this.dataLen=0,this.loadType=t,this.loader=new XMLHttpRequest,null===isSupportMoz&&/firefox/gi.test(navigator.userAgent.toLowerCase())){try{this.loader.responseType=mozResponseType}catch(n){}isSupportMoz=this.loader.responseType===mozResponseType}if(isSupportMoz?this.loader.responseType=mozResponseType:(this.loader.responseType="arraybuffer",isSupportMoz=!1),this.taskList=[{start:this.tast.begin,end:this.tast.end}],isSupportMoz||(this.taskList=checkTask(this.tast.begin,this.tast.end,Math.min(Math.max(1024*this.tast.rate,32768),1048576),this.tast.segment.fileType)),0===this.taskList.length)return this.running=!1,_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.eTime=performance.now(),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done");_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"open"),this.check()}},{key:"close",value:function(){this.running=!1,this.loader&&this.loader.abort(),this.loader=null,this.cache&&delete this.cache}},{key:"loadStatus",value:function(e,t){if("Error"!==e&&t&&(this.tast.range={begin:this.range.start+this.base,end:this.range.start+this.base+t.byteLength},this.tast.data=t),"OK"===e){if(-1===this.range.end&&(this.range.end=this.range.start+this.base+t.byteLength),this.videoType===_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.TS)for(var n=(this.range.start+this.base)%188==0?0:188-(this.range.start+this.base)%188;n<t.byteLength;){if(71!==t[n]){for(var r="",i=n;i<Math.min(n+32,t.byteLength);i++)r+=("00"+t[i].toString(16)).slice(-2);return _utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.error("xhr load ts data check err , start pos !== 71 ,pos ,",this.range.start+this.base+n),_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.log(t.subarray(n,Math.min(n+188,t.byteLength))),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error","dataError_sync_"+(this.range.start+this.base+n)+"_"+r)}n+=188}else if(this.videoType!==_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.FTS&&t.byteLength>this.range.end-this.range.start)return _utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.error("data is not right , need range "+this.range.start+"-"+this.range.end+" dataLen "+t.byteLength),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error","dataError_contentLenNoMatch-overflow");this.dataLen+=t.byteLength,_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.size+=t.byteLength,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"progress"),this.base+=t.byteLength}else"done"===e?this.check():this.running&&(this.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",t))}},{key:"check",value:function(){if(this.taskList.length>0){this.range=this.taskList.shift();var e=this.tast.url;if(!isSupportMoz&&e.indexOf("start=")>0&&(e=changeURLArg(this.tast.url,this.range)),-1!==e.indexOf("start=")&&-1!==e.indexOf("end=")||(-1===e.indexOf("?")?-1!==this.range.end&&(e+="?start="+this.range.start+"&end="+this.range.end):-1!==this.range.end&&(e+="&start="+this.range.start+"&end="+this.range.end)),-1===e.indexOf("stauto")&&(e+="&stauto="+_RunTime__WEBPACK_IMPORTED_MODULE_36__.a.absStatus),-1===e.indexOf("ori")&&(e+="&ori=pcw"+_RunTime__WEBPACK_IMPORTED_MODULE_36__.a.platform),-1===e.indexOf("num"))e+="&num="+Date.now().toString();_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.info("[XHR Loader start ] "+this.range.start+" - "+this.range.end+" , "+e),this.running=!0,this.base=0,this.xhrLoad(e)}else this.running=!1,_utils_pingback_TimePingback__WEBPACK_IMPORTED_MODULE_42__.a.eTime=performance.now(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done")}},{key:"xhrLoad",value:function(e){this.loader||(this.loader=new XMLHttpRequest,this.loader.responseType=isSupportMoz?mozResponseType:"arraybuffer");var t=0;for(this.cache=null;null===this.cache;)try{t++,this.cache=new Uint8Array(1048576)}catch(i){if(t>_Config__WEBPACK_IMPORTED_MODULE_37__.g)return _utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.error("FetchLoader catch Uint8Array err : "+i.message),void r("tryCatchError_oom")}this.readPos=0,this.dataPos=0;var n=this;xhrStatusProgress="",this.loader.onreadystatechange=function(){xhrStatusProgress+="readyState:"+n.loader.readyState+", status:"+n.loader.status+","},this.loader.onloadend=function(e){_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.info("XHR Loader onloadend ,"+isSupportMoz);var t=e.currentTarget,r=t.status,a=t.response,o="";try{n.loader.getAllResponseHeaders().indexOf("server-address")>=0?(o=n.loader.getResponseHeader("server-address"),_RunTime__WEBPACK_IMPORTED_MODULE_36__.a.last_cdnIP=o):_RunTime__WEBPACK_IMPORTED_MODULE_36__.a.last_cdnIP=""}catch(i){}if(_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.info("XHR Loader, serverIP : "+o+", domain: "+_utils_Tools__WEBPACK_IMPORTED_MODULE_41__.a.getPureIP(n.tast.url)+", responseUrl: "+n.loader.responseURL+", status: "+r),r>=200&&r<300){if(a){var s=new Uint8Array(a);if(s&&s.byteLength>0){if(n.dataPos+s.byteLength>n.cache.byteLength){for(var u=null,c=0;null===u;)try{c++,u=new Uint8Array(n.dataPos+s.byteLength)}catch(i){if(c>_Config__WEBPACK_IMPORTED_MODULE_37__.g){if(_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.error("FetchLoader catch newUint8Array err : "+i.message),null===n.loader)return;n.loadStatus("Error","statusErr_"+r)}}var l=n.cache.subarray(n.readPos);u.set(l,0),delete n.cache,n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=u}n.cache.set(s,n.dataPos),n.dataPos+=s.byteLength}}if(n.readPos<n.dataPos&&n.loadStatus("OK",n.cache.subarray(n.readPos,n.dataPos)),null===n.loader)return;n.close(),n.loadStatus("done")}else{if(null===n.loader)return;_utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.warn("XHR Loader err , status progress, "+xhrStatusProgress),n.loadStatus("Error","statusErr_"+r)}},this.loader.onprogress=function(e){if(isSupportMoz){var t=e.target?e.target.response:null;if(t){var r=new Uint8Array(t);if(n.dataPos+r.byteLength>n.cache.byteLength){var i=new Uint8Array(n.dataPos+r.byteLength),a=n.cache.subarray(n.readPos);i.set(a,0),n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=i}n.cache.set(r,n.dataPos),n.dataPos+=r.byteLength}if(n.dataPos-n.readPos>=8192){var o=8192*Math.floor((n.dataPos-n.readPos)/8192);n.loadStatus("OK",n.cache.subarray(n.readPos,n.readPos+o)),n.readPos+=o}}};try{this.loader.open("GET",e,!0),this.loader.withCredentials=!1,this.loader.send()}catch(a){r("tryCatchError_"+a.message)}function r(e){arguments.length>1&&undefined;null!==n.loader&&(n.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+n.eventID,"Error",e))}}}]),e}();function checkTask(e,t,n,r){var i,a=_RunTime__WEBPACK_IMPORTED_MODULE_36__.a.getBufferFunc(),o=0;o="m4s"===r?Math.min(a.buffered.video.len,a.buffered.audio.len):a.len,o*=1e3;for(var s=[],u=0;e<t;)o<1e3?(u=n,o+=1e3):o<2e3?(u=2*n,o+=2e3):o<3e3?(u=3*n,o+=3e3):o<4e3?(u=4*n,o+=4e3):o<5e3?(u=5*n,o+=5e3):o<6e3?(u=6*n,o+=6e3):o<7e3?(u=7*n,o+=7e3):o<8e3?(u=8*n,o+=8e3):(u=10*n,o+=1e4),e+u<t?(t-(i=e+u)<u/2&&(i=t),s.push({start:e,end:i}),e=i):(i=t,s.push({start:e,end:i}),e=i);return _utils_Log__WEBPACK_IMPORTED_MODULE_35__.a.info("XHR Loader check list "+JSON.stringify(s)),s}function changeURLArg(url,range){var pattern1="start=([^&]*)",pattern2="end=([^&]*)",replaceText1="start="+range.start,replaceText2="end="+range.end;if(url.match(pattern1)||url.match(pattern2)){var tmp="/(start=)([^&]*)/gi";url=url.replace(eval(tmp),replaceText1);var tmp2="/(end=)([^&]*)/gi";return url=url.replace(eval(tmp2),replaceText2),url}}__webpack_exports__.a=XHRLoader},function(e){e.exports=JSON.parse('{"name":"@loader/p2p","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/jdash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@renderer/mse","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRiskAnswerToken=void 0;var r=n(803);function i(e){return"".concat("RAT_INDEX","_").concat(e)}t.parseRiskAnswerToken=function(e,t){var n=function(e){var t=null;try{var n=i(e);(t=sessionStorage.getItem(n))!==undefined&&null!==t||(t="1")}catch(r){t="1"}return t}(t),a=r.Md5.hashStr("".concat("Z3gt8PzP%7","_").concat(e,"_").concat(n));return function(e,t){try{var n=Number(e)+1;n>1e3&&(n=1);var r=i(t);sessionStorage.setItem(r,"".concat(n))}catch(a){}}(n,t),"".concat(a.substring(0,3)).concat(e.charAt(1)).concat(t.charAt(1)).concat(a.substring(3,6)).concat(e.charAt(0)).concat(t.charAt(0))}},,,,,,,,function(e,t,n){"use strict";n(34);var r=n(43),i=n.n(r),a=n(14),o=n.n(a),s=n(15),u=n.n(s),c=n(119),l=n.n(c),d=n(20),f=n.n(d),h=n(21),p=n.n(h),v=n(10),y=n.n(v),g=n(25),m=n.n(g),_=(n(79),n(208),n(212),n(32),n(166),n(22),n(84),n(82),n(26)),b=n(1),x=n(150),k=n(0),w=k.l.QP0035;function S(e){!0,k.k.set(w,e,{expires:31536e6,path:"/",domain:"iqiyi.com"})}var T,P,E=n(109),A=n(13),I=n(120),D=n(272),L=(n(157),n(284),n(167),n(297),n(298),n(227),n(226),n(233)),O=n.n(L),R=(n(74),n(98),n(27),n(144),n(36),n(178),n(142));!function(e){e[e.Roll=0]="Roll",e[e.Episode=1]="Episode",e[e.MAT=2]="MAT"}(T||(T={})),function(e){e[e.PRE_ROLL=0]="PRE_ROLL",e[e.MID_ROLL=1]="MID_ROLL",e[e.POST_ROLL=2]="POST_ROLL",e[e.INDETERMINACY_ROLL=3]="INDETERMINACY_ROLL"}(P||(P={}));var C=n(69),M=n(18),B=n(6);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var F={},q=["loadstart","ready","error","ended"],j=function(e){f()(n,e);var t=N(n);function n(e){var r;return o()(this,n),r=t.call(this),e.on(b.a.NTF_AD_NotifyManager,(function(e){r.emit(e)})),r}return u()(n)}(k.c),U=function(e){f()(n,e);var t=N(n);function n(e,r){var i,a;o()(this,n),i=t.call(this);var s=l()(i);i._isVip=!1,i._disableVideoOP=!1,i._user=C.a,i.bussiness=new j(e,r),i._container=r.adContainer,i.engine=e,i.view=r,i.beforeIsAD=!1,i.beforeSeek=0,i.logger=new _.a("AdApi[".concat(e.id,"]")),i.adEventTimestamp=null,i.adMaxStatus=!1;var u=function(t,n){var r={type:t,gas:i.getCurrentGas()};n&&(r.data=n,n.gas&&(r.gas=n.gas));var a=function(e){var t=e.type,n=e.gas,r=n?n.id:undefined;if(!n||-1==q.indexOf(t))return!0;var i=F[r];if(i){if(i[t])return!1;i[t]=!0}else F[r]={},F[r][t]=!0;return!0}(r);e.isAd()&&i.logger.info("adapi, emit, type=".concat(t,", isAd=").concat(e.isAd(),", fire = ").concat(a," obj=").concat(k.f.stringify(r))),a&&i.emit(t,r)};e.on(b.a.NTF_StatusChanged,(function(e){switch(e.state){case b.a.Status_AdLoadstart:u("loadstart",e);break;case b.a.Status_Ready:break;case b.a.Status_Play:u("play",e);break;case b.a.Status_AdPlaying:u("playing",e);break;case b.a.Status_Playing:F={},u("playing",e);break;case b.a.Status_AdPaused:case b.a.Status_Paused:u("pause",e);break;case b.a.Status_AdWaiting:case b.a.Status_Waiting:u("waiting",e);break;case b.a.Status_AdError:u("error",e);break;case b.a.Status_PlayError:F={},u("error",e);break;case b.a.Status_AdStalled:u("stalled",e);break;case b.a.Status_AdWillPlayEnded:u("willended",e);break;case b.a.Status_AdPlayEnded:case b.a.Status_End_Play:u("ended",e)}}));var c=0;e.on(b.a.NTF_AD_TimeUpdate,(function(t){clearTimeout(c),c=setTimeout((function(){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,u("timeupdate",t)}),0)})),e.on(b.a.NTF_Before_Seeking,(function(t){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.isFusionMode;s._before={beforeIsAD:t.isAd,referrerGas:t.gas,beforeSeek:r,isFusionMode:i}}));var d=function(t){t.isAD=e.isAd();var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,u("seeked",t)};e.on(b.a.NTF_AD_Seeking,(function(e){d(e)})),e.on(b.a.NTF_Seeking,(function(e){d(e)}));var f=function(t){t.isAD=e.isAd(),t.actionType="controls";var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,Object(k.C)(t,s._before),u("afterSeeked",t),s._before=undefined};e.on(b.a.NTF_AD_Seeked,(function(e){f(e)})),e.on(b.a.NTF_Seeked,(function(e){f(e)})),e.on(b.a.NTF_TimeUpdate,(function(t){u("timeupdate",t);var n=e.getCurrenttime(),r=n-a;a&&r>0&&r<1&&Object(k.J)(r),a=n})),e.on(b.a.NTF_PLAY_MUTED,(function(e){u("muted",e)}));var h=r.fullscreen;return h&&h.on("change",(function(e){u("exit"===e?"exitfullscreen":"fullscreen")})),e.on(b.a.NTF_DelayToPlay,(function(){u("pausetoplay")})),C.a.on("infoset",(function(){C.a.isVip((function(e){s._isVip=e}))})),e.on(b.a.EVT_ADMAX_2_PLAY,(function(){u("adMax_play")})),i}return u()(n,[{key:"load",value:function(e){e=e||{};var t=Array.isArray(e);t&&e.length>0||e.file&&!isNaN(e.offset)&&e.offset>=0?this.bussiness.emit("_playdata_",e):this.logger.warn("load error data parameter: isArray = ".concat(t,", ").concat(k.f.stringify(e)))}},{key:"getEngineType",value:function(){return"data"}},{key:"getCurrentGas",value:function(){return this.engine.getCurrentGas()}},{key:"abort",value:function(){this.engine.abortAres()}},{key:"isVIP",value:function(){return this._isVip}},{key:"getUserInfo",value:function(){var e=!1;return this._user.isVip((function(t){e=t})),{isVIP:e,passportCookie:this._user.passportCookie(),passportId:this._user.getUid(),isLogin:this._user.isLogin(),uaaUserId:k.L.getFluid()||k.L.getJsuid()}}},{key:"adcontainer",value:function(){return this._container}},{key:"video",value:function(){return this.engine.video()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"play",value:function(e){this._disableVideoOP||this.engine.play(e)}},{key:"pause",value:function(e){this._disableVideoOP||(this.logger.info("pause from mars isManualAction: ".concat(e)),this.engine.pause(e))}},{key:"addEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"src",value:function(){if(1!==arguments.length)return this.engine.getSrc()||"";this.logger.error("mw is not support set src!")}},{key:"volume",value:function(e){if(!e)return this.engine.getVolume();this.engine.setVolume(e)}},{key:"muted",value:function(e){if("boolean"!=typeof e)return this.engine.getMuted();this.engine.setMuted(e)}},{key:"height",value:function(){return this.view.getWrapperArea().height}},{key:"width",value:function(){return this.view.getWrapperArea().width}},{key:"currentTime",value:function(){return this.engine.getCorrectTimeObj().acurrent}},{key:"duration",value:function(){return this.engine.getCorrectTimeObj().aduration}},{key:"buffered",value:function(){return this.engine.getBufferTime()}},{key:"sendUserActionPingback",value:function(e){this.view.pingback.sendUserActionPingback(e)}},{key:"fullscreentoggle",value:function(){this.view.fullToggle()}},{key:"isFullScreen",value:function(){var e=this.view,t=e.fullscreen;return e.setting.expandScreen?!!this.engine.isFullScreen:t?t.isFullScreen():void 0}},{key:"webfullscreentoggle",value:function(){var e=this.view.webfullscreen;e&&e.toggle()}},{key:"isWebFullScreen",value:function(){var e=this.view.webfullscreen;if(e)return e.isWebFullScreen()}},{key:"videoPlayedDurationInDay",value:function(){return Object(k.r)().totalTime}},{key:"sendUserActionPingbackV2",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.view.pingbackV2.sendUserActionPingback(e,t,!1,n)}},{key:"sendBlockPingbackV2",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.view.pingbackV2.sendBlockPingback(e,t)}},{key:"setAdMaxStatus",value:function(e){var t=e.adMax,n=e.play;this.adMaxStatus=t;var r=this.view,i=document.querySelector('[data-player-hook="plgcontainer"]'),a=document.querySelector('[data-player-hook="innerlayer"]');function o(){Object(M.b)(i).show(),Object(M.b)(a).show(),r.emit(B.a.NTF_SVP_BTN_SHOW)}if(n)return this.adMaxStatus=!1,this.engine.play(),void o();t?(Object(M.b)(i).hide(),Object(M.b)(a).hide()):o()}},{key:"triggerTypeAndTime",value:function(e,t){if("video-play"===t)this.adEventTimestamp=e;else if("video-willended"===t&&this.adEventTimestamp){var n=e-this.adEventTimestamp;n<=3e3&&(this.logger.info("sendCompass, timeDiff: ".concat(n)),this.engine.pingbackQOS.sendLogToCompass("AD-EVENT-ERROR")),this.adEventTimestamp=null}}}]),n}(k.c),V="tw_t",H={locale:"cn_s",isTraditionalChinese:function(){var e=!1,t=this.locale;return t!==V&&"cn_t"!==t||(e=!0),e},isTWLocale:function(){var e=!1,t=this.locale;return t!==V&&"tw_s"!==t||(e=!0),e},local:function(){return this.locale},setLocale:function(e){this.locale=e}};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(){function e(t){o()(this,e),this.engine=t,this.logger=new _.a("AdProxy[".concat(t.id,"]")),this.adInfo={},this.concurrencyStatus=null,this.seekableMidAd={},this.delayBriefAds={},this.firstAdData=!0,this.ssrDispatchUsed=!1}return u()(e,[{key:"init",value:function(){var e=this,t=this.engine.pack;this.sdk=t.ad,this.initMiddle(t),this.initAdSdkEvent(),this.initEpisode(),window.clickAdCountdownOpen=function(){console.log("点击倒计时")};var n=!1,r=!1,i=null;this.engine.recorder?this.once(b.a.NTF_Get_Record,(function(){r=!0,n&&(i.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(i.movieinfo.vipBlock,i.movieinfo.vipTheatre,i.movieinfo.albumId,i.movieinfo.authTipType,(function(t,n){t?e.fire(b.a.NTF_Show_VIPPay,n):e.initSDK(i,n)})))})):r=!0,this.on(b.a.NTF_VRSReady,(function(t){n=!0,r?(e.logger.log("ares vrsready, isPreload = ".concat(t.movieinfo.isPreload,", tvid = ").concat(t.movieinfo.tvid,", vid = ").concat(t.movieinfo.vid)),t.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(t.movieinfo.vipBlock,t.movieinfo.vipTheatre,t.movieinfo.albumId,t.movieinfo.authTipType,(function(n,r){n?e.fire(b.a.NTF_Show_VIPPay,r):e.initSDK(t,r)}))):i=t})),this.on(b.a.NTF_VRSPreloaded,(function(t){e.initSDK(t)})),this.on(b.a.NTF_VideoChange,(function(){e.middleware._disableVideoOP=!0})),this.on(b.a.NTF_VideoChanged,(function(){e.middleware._disableVideoOP=!1,e.delayFireBriefAD()}))}},{key:"initMiddle",value:function(e){var t=this,n=e.engine,r=e.view,i=this,a=n.playproxy,o=n.episode,s=this.logger,u=this.delayBriefAds;this.view=r,this.middleware=new U(n,r),console.log("this.middleware",this.middleware),this.middleware.clickAdCountdownOpen,this.middleware.bussiness.on("_playdata_",(function(e){if(e.length!==undefined&&e.length>0)t._parseListSource(e);else{var r=e.videoEventId,c=e.mvst?k.f.parse(e.mvst):null,l=k.i.getEpisodeId(r),d=o.valid(l),f=n.movieinfo,h=!!f.current&&f.current.tvid===l,p=function(e,t){for(var n=null,r=0;r<e.length;r++)if(e[r].vd==t){n=e[r];break}return n}(f.vidl,n.getCurrentVD()),v=p?p.mver:null;if(i.concurrencyStatus=null==e?void 0:e.playOverload,c&&Object.prototype.hasOwnProperty.call(c,v)&&(e.offset=c[v]/1e3),s.info("ares notice-info, _playdata_, ares mw load"+(d?"":" invalid")+":"+k.f.stringify(e)),d){var y=0;switch(e.type){case"preroll":o.finishPres(l)?s.warn(l+": ignore ares gas, "+k.f.stringify(e)):(o.addPres(l,[e]),t._feedKernelAd(l,e,!1,0,"preroll"));break;case"briefRoll":e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],y=e.offset;var g=!1;if(h){var m=f.getPlayHead().playRealStartTime;g=!n.hasStatus(b.a.Status_EveryStartPlay)&&y<=m}g?(y=0,o.addBriefs(l,[e]),t._feedKernelAd(l,e,!1,y,"briefRoll")):(u[l]||(u[l]=[]),u[l].push({videoId:l,adData:e,offset:y}));break;case"midroll":a.getCurrenttime()<e.offset?(e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],o.addMids(l,[e]),t._feedKernelAd(l,e,!1,e.offset,"midroll")):s.warn(l+":drop ares gas, "+k.f.stringify(e))}}}}))}},{key:"_parseListSource",value:function(e){if(e.length!==undefined&&e.length>0){for(var t,n,r,i,a=this.engine,o=this.logger,s=a.playproxy,u=a.episode,c=[],l=[],d="++++ ad log, ares notice-info, _playdata_, ares mw load, isFusionMode=true, len=".concat(e.length,","),f=0;f<e.length;f++){var h=e[f],p=h.videoEventId;n=k.i.getEpisodeId(p),t=u.valid(n),i=h.type,r=h.offset,t&&s.getCurrenttime()<r&&(c.push({duration:h.duration,url:h.file,gas:h}),l.push(Object(k.C)({isFusionMode:!0},h))),d+=", id(".concat(h.id,")-offset(").concat(r,")-seekable(").concat(h.seekable,")-duration(").concat(h.duration,")-videoValid(").concat(t,");;; ")}o.log(d),c.length>0&&(u.addMids(n,l),this._feedKernelAd(n,c,!1,r,i))}}},{key:"initSDK",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,r=this.engine,i=r.params,a=r.local,o=r.playerVersion,s=r.movieinfo,u=r.adPlaySource,c=r.episode,l=r.pack,d=l.view,f=s.startPlayTime,h=s.getVDInfo(),p=e.movieinfo,v=!!p.isPreload,y=i.cid||"";p.adPlayerID&&(y=p.adPlayerID),i.isCid||!A.a.os.android&&!A.a.os.ios||(y=navigator.userAgent.indexOf("MicroMessenger")>-1?"qc_105092_300416":"qc_100001_100103");var g=i.isSupportViewpoint||!1,m=i.site||"iqiyiw",_=0;f>=h.duration&&(f=0);var b=s.getPlayTimeRanges(),x=v?s.next:s.current;if("history"===x.playStartFrom){var w=b[0][0],S=b[b.length-1][1];_=w<f&&f<S?f:w}this.startTime=_;var T=function(e){var n;t.middleware._isVip=e;var r=t.middleware.video(),s=p.tvid+"",l=Object(k.x)(p.vd)?p.vd:parseInt(t.engine.vd,10);51===l&&(l=5);var f={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:v,adPlayerId:y,episodeId:s,videoDefinition:l,showVoiceIcon:!(A.a.os.android||A.a.os.ios),videoMidware:t.middleware,isVIP:e,isSupportViewpoint:g,site:m,locale:a,passportId:C.a.getUid(),passportCookie:C.a.passportCookie(),clientVersion:o,videoContainer:r,couponCode:i.cpnc||"",couponVer:i.cpnv||"",ptid:A.a.getPtid(H.isTWLocale()),timePoint:_,playSource:u||0,theaterMode:d.setting.theaterMode},h=null===(n=window.QiyiPlayerProphetData)||void 0===n?void 0:n.a;h&&!0!==h.consumed&&"".concat(window.QiyiPlayerProphetData.tvid)===s?(h.consumed=!0,f.videoEventId=h.videoEventId,f.csr=h.data,k.i.setEventId(s,h.videoEventId)):f.videoEventId=k.i.generate(s),A.a.os.isMobileTerminal&&(f.formatType="f4v",f.terminal="iqiyiPhoneH5"),"home"===i.sourcePage?c.finishPres(s,!0):setTimeout((function(){for(var e=G({},f),n=["videoMidware","videoContainer","csr"],r=0;r<n.length;r++)delete e[n[r]];t.logger.log("ares init, excludes: [".concat(n.join(),"], ").concat(k.f.stringify(e))),t.sdk.init(f)}),0)};n!==undefined?T(n):C.a.isVip((function(e){T(e)}))}},{key:"initAdSdkEvent",value:function(){var e=this,t=this.sdk,n=this.engine,r=this.logger,i=this.delayBriefAds,a=this.view,o=n.playproxy,s=n.episode,u=n.movieinfo,c=n.skip,l=n.autoplay,d=n.pingbackQOS,f=a.$container;t.on("single_ad_start",(function(t){r.log("ares notice-info, single_ad_start"),e.adInfo.rollType=e.adInfo.rollType||"mraid",e.fire(b.a.NTF_AD_SingleStart),n.getStatusPool().add([b.a.NTF_AD_SingleStart])})),t.on("single_ad_end",(function(t){r.log("ares notice-info, single_ad_end"),e.adInfo.rollType=e.adInfo.rollType||"mraid",e.fire(b.a.NTF_AD_SingleEnd,e.adInfo),n.getStatusPool().remove([b.a.NTF_AD_SingleStart])})),t.on("roll-play",(function(t){var n,i=t.rollType,a=t.videoEventId,o=k.i.getEpisodeId(a),u=s.valid(o),c=!1,l=!1;if("midroll"==i){var d=s.getMids(o);d.length>0&&(c=d[0].seekable,l=!!d[0].isFusionMode,n=d[0].offset)}if("briefRoll"==i){var f=s.getBriefs(o);f.length>0&&(c=f[0].seekable,l=!0,n=e.startTime>0?e.startTime-f[0].duration:f[0].offset)}e.seekableMidAd["".concat(i,"_").concat(a)]&&(c=!0),r.log("ares notice-info,  roll-play".concat(u?"":" invalid",", rollType:").concat(i,", isFusionMode:").concat(l,", seekable:").concat(c,", data:").concat(k.f.stringify(t))),u&&(e.adInfo={rollType:i,videoId:o,seekable:c,isFusionMode:l,offset:n,concurrencyStatus:e.concurrencyStatus},e.fire(b.a.Status_AresPlay,e.adInfo))})),t.on("roll-ended",(function(t){var i=t.rollType,a=t.videoEventId,h=k.i.getEpisodeId(a),p=u.tvid==h,v=s.valid(h)&&p;if(r.info("ares notice-info, roll-ended, abortAllAres "+(v?"":" invalid")+k.f.stringify(t)+", videoId: "+h+", tvid: "+u.tvid),v){var y;switch(i){case"preroll":o.tempStore.__sendFinishPres||(o.tempStore.__sendFinishPres=!0,d.sendFinishPresPingback()),s.finishPres(h,!0);break;case"midroll":s.finishMids(h,!0);break;case"briefRoll":if(s.finishBriefs(h,!0),n.isAd()){f.addClass("fade-show"),setTimeout((function(){f.removeClass("fade-show")}),2e3);break}}o.abortAllAres(i),o.currentRollAdDone=!0,null!=n&&null!==(y=n.getMovieInfo())&&void 0!==y&&y.isVIP||setTimeout((function(){o.afterAd=!0}),0),e.fire(b.a.Status_AresEnded,{agent:"ares",data:{rollType:i,videoId:h}}),(c&&l||!c)&&o.isPaused()&&(r.log("manual play"),o.play())}})),t.on("roll-load-finish",(function(t){var a=t.rollType,o=t.videoEventId,c=k.i.getEpisodeId(o),l=s.valid(c),d=u.tvid==c;r.info("ares notice-info, roll-load-finish"+(l?"":" invalid")+":"+k.f.stringify(t));var f,h=n.sptr;if(h.asdkistm=t.initStartTime||0,h.asdkietm=t.initEndTime||0,h.adsrqstm=t.showStartTime||0,h.adsrqetm=t.showEndTime||0,h.adaetm=+new Date,l)switch(a){case"preroll":0!==s.getPres(c).length&&d||"boolean"!=typeof(f=s.finishPres(c))||f||s.finishPres(c,!0);break;case"briefRoll":f=s.finishBriefs(c),console.log(f),"boolean"!=typeof f||f||s.finishBriefs(c,!0),i[c]&&i[c].length&&e.delayFireBriefAD();break;case"midroll":"boolean"!=typeof(f=s.finishMids(c))||f||s.finishMids(c,!0)}})),t.on("error",(function(e){r.info("ares notice-info, error"+k.f.stringify(e)),o.brokedown(R.a.AD,R.a.P07001)})),t.on("adplayer_showtip",(function(t){r.log("ares notice-info, adplayer_showtip"),e.fire(b.a.NTF_AD_Showtips,t)})),t.on("adplayer_ad_info",(function(t){var n=(t=t||{}).data,i=n.videoEventId,a=k.i.getEpisodeId(i),o=s.valid(a);r.info("ares notice-info, adplayer_ad_info "+(o?"":" invalid")+":"+k.f.stringify(t)),o&&(n&&(Object(k.y)(n.definitionSwitchingAd)?(s.setDefinitionAd(a,t),u.aresnoticedata.definition=n):Object(k.w)(n.viewPoints)&&(u.aresnoticedata.viewPoints=n.viewPoints)),e.fire(b.a.Status_AresNoticeInfo,t))})),t.off("adplayer_ad_start"),t.on("adplayer_ad_start",(function(t){r.log("ares notice-info, adplayer_ad_start"),t&&"13"==t.ctp&&(n.adWholeCorner=!0),e.fire(b.a.NTF_AD_Start,t)})),t.off("adplayer_ad_end"),t.on("adplayer_ad_end",(function(t){r.log("ares notice-info, adplayer_ad_end"),e.fire(b.a.NTF_AD_End,t)})),t.off("pause_start"),t.on("pause_start",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_start, get audio ad info! delayTime = ".concat(t.duration)),o.setDelayPlayInfo(1e3*t.duration||2500))})),t.off("pause_end"),t.on("pause_end",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_end, get audio ad info! status = ".concat(t.status)),"common"===t.status?o.clearDelayPlayInfo(!0):o.clearDelayPlayInfo(!1))})),t.off("adplayer_ad_block"),t.on("adplayer_ad_block",(function(t){e.logger.info("ares notice-info, adplayer_ad_block, ".concat(k.f.stringify(t)," ")),t.videoEventId===o.getCurrentGas().videoEventId&&e.fire(b.a.NTF_AD_BLOCK)}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"on",value:function(e,t){this.engine.on(e,t)}},{key:"once",value:function(e,t){this.engine.once(e,t)}},{key:"clear",value:function(){}},{key:"resize",value:function(){this.sdk.resize()}},{key:"initEpisode",value:function(){var e=this,t=this.engine,n=t.playproxy,r=t.episode;r.on("finishAddPres",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=a?k.i.getEpisodeId(a.videoEventId):r;e._feedKernelAd(r,null,!0,0,"preroll"),r===o||0===i&&(o===undefined||isNaN(o))?n.concatCurFeature(r):n.concatPreloadFeature(r)})),r.on("finishAddMids",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=k.i.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"midroll")})),r.on("finishAddBriefs",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=k.i.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"briefRoll")}))}},{key:"_feedKernelAd",value:function(e,t,n,r,i){var a,o=this.engine,s=this.logger,u=o.movieinfo,c=o.playproxy,l=o.episode,d=o.sptr,f=e==u.tvid,h={},p=!1,v=[[0,Infinity]],y={isCurrent:f,components:["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],streamType:T.Roll,roll:{offset:r,done:n}};if(!n||!("preroll"===i&&0===l.getPres(e).length||"midroll"===i&&0===l.getMids(e).length||"briefRoll"===i&&0===l.getBriefs(e).length)){if("briefRoll"===i){if(!t)return;n=!0}Array.isArray(t)&&t.length>0?(h.fs=t,p=t[0].gas.seekable):t&&(h.fs=[{duration:t.duration,url:t.file,gas:t}],p=t.seekable);var g=null===(a=window.QiyiPlayerProphetData)||void 0===a?void 0:a.a;if(g&&g.consumed&&!this.ssrDispatchUsed&&g.d&&Object(k.w)(h.fs)&&h.fs.length>0){this.ssrDispatchUsed=!0;var m=k.K.filename(g.d.l),_=h.fs[0];new RegExp(m).test(_.url)&&(_.dispatched=Object(k.C)({},g.d))}if("briefRoll"===i)y.roll.category="ad::brief",y.roll.rollType=P.INDETERMINACY_ROLL;else switch(y.roll.category="ad",i){case"preroll":y.roll.rollType=P.PRE_ROLL;break;case"midroll":y.roll.rollType=P.MID_ROLL}h.offset=r,h.other={seekable:p,done:n},this.firstAdData?this.firstAdData=!1:y.parseMftOnly=!0,this.firstAdData=n,s.debug("load ad, videoId=".concat(e,", tvid=").concat(u.tvid,", type: ").concat(i,", done: ").concat(h.done,", offset: ").concat(h.offset,", seekable: ").concat(h.seekable,", isFusionMode: ").concat(h.isFusionMode)),c.tempStore.isFirstVV&&!c.tempStore.__sendFirstFrameShow&&(d.vclstm=+new Date),c.kiwi.loadSource(h,0,v,y)}}},{key:"delayFireBriefAD",value:function(){var e=this,t=this.delayBriefAds,n=this.engine,r=n.episode,i=n.movieinfo;this.engine.once(b.a.NTF_TimeUpdate,(function(){if(t[i.tvid]){for(var n,a,o,s,u=t[i.tvid].splice(0,1)[0];u;)s=!0,n=u.videoId,a=u.adData,o=u.offset,r.addBriefs(n,[a]),e._feedKernelAd(n,a,!1,o,"briefRoll"),u=t[i.tvid].splice(0,1)[0];s&&e._feedKernelAd(n,null,!0,null,"briefRoll")}}))}},{key:"getAdInfo",value:function(){return this.adInfo}},{key:"getAdLog",value:function(){if(this.sdk.fetchLogs&&"function"==typeof this.sdk.fetchLogs)return this.sdk.fetchLogs()}},{key:"destroy",value:function(){this.clear(),this.sdk.destroy()}},{key:"getAdMaxStatus",value:function(){return this.middleware.adMaxStatus}}]),e}();function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var $=function(e){return parseInt(e,10)},Y=function(e){f()(n,e);var t=K(n);function n(e){var r;return o()(this,n),(r=t.call(this)).logger=new _.a("EpisodeManager[".concat(e,"]")),r.EpisodeStore={},r}return u()(n,[{key:"_ensureDataStructure",value:function(e){var t=this.EpisodeStore[e]||{};Object(k.y)(t.pres)?(t.pres.finish=!!t.pres.finish,t.pres.queue=Object(k.w)(t.pres.queue)?t.pres.queue:[]):t.pres={finish:!1,queue:[]},Object(k.y)(t.mids)?(t.mids.finish=!!t.mids.finish,t.mids.queue=Object(k.w)(t.mids.queue)?t.mids.queue:[]):t.mids={finish:!1,queue:[]},Object(k.y)(t.briefs)?(t.briefs.finish=!!t.briefs.finish,t.briefs.queue=Object(k.w)(t.briefs.queue)?t.briefs.queue:[]):t.briefs={finish:!1,queue:[]},Object(k.y)(t.features)?(t.features.finish=!!t.features.finish,t.features.queue=Object(k.w)(t.features.queue)?t.features.queue:[]):t.features={finish:!1,queue:[]},this.EpisodeStore[e]=t}},{key:"clear",value:function(e){e=$(e),delete this.EpisodeStore[e]}},{key:"clearAll",value:function(){this.EpisodeStore={}}},{key:"_getQueue",value:function(e,t){var n=[];return e=$(e),this.valid(e)&&(n=this.EpisodeStore[e][t].queue),n}},{key:"getPres",value:function(e){return this._getQueue(e,"pres")}},{key:"getMids",value:function(e){return this._getQueue(e,"mids")}},{key:"getBriefs",value:function(e){return this._getQueue(e,"briefs")}},{key:"addPres",value:function(e,t){e=$(e),this.valid(e)&&Object(k.w)(t)&&(this.EpisodeStore[e].pres.queue=this.EpisodeStore[e].pres.queue.concat(t))}},{key:"finishPres",value:function(e,t){if(e=$(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].pres.finish;var n=this.EpisodeStore[e].pres;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddPres",{videoId:e,length:n.queue.length}),this.logger.info("finishPres "+e))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishPres invalid "+e)}}},{key:"addMids",value:function(e,t){e=$(e),this.valid(e)&&Object(k.w)(t)&&(this.EpisodeStore[e].mids.queue=this.EpisodeStore[e].mids.queue.concat(t))}},{key:"finishMids",value:function(e,t){if(e=$(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].mids.finish;var n=this.EpisodeStore[e].mids;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddMids",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishMids invalid "+e)}}},{key:"addBriefs",value:function(e,t){e=$(e),this.valid(e)&&Object(k.w)(t)&&(this.EpisodeStore[e].briefs.queue=this.EpisodeStore[e].briefs.queue.concat(t))}},{key:"finishBriefs",value:function(e,t){if(e=$(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].briefs.finish;var n=this.EpisodeStore[e].briefs;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddBriefs",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishBriefs invalid, "+e)}}},{key:"finishFeatures",value:function(e,t){if(e=$(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].features.finish;this.EpisodeStore[e].features.finish=t}}},{key:"setInfo",value:function(e,t){e=$(e),this.valid(e)&&(this.EpisodeStore[e].movieInfo=t)}},{key:"getInfo",value:function(e){var t;return this.valid(e)&&this.EpisodeStore[e]&&(t=this.EpisodeStore[e].movieInfo),t}},{key:"setDefinitionAd",value:function(e,t){e=$(e),this.valid(e)&&(this.EpisodeStore[e].definitionAdInfo=t)}},{key:"valid",value:function(e,t){if(e=$(e),"boolean"!=typeof t)return this.EpisodeStore[e]&&!0===this.EpisodeStore[e].valid?(this._ensureDataStructure(e),t=!0):t=!1,t;this._ensureDataStructure(e),this.EpisodeStore[e].valid=t}},{key:"destroy",value:function(){this.EpisodeStore={},this.removeAllListeners("finishAddPres"),this.removeAllListeners("finishAddMids"),this.removeAllListeners("finishAddBriefs")}}]),n}(k.c),Q=(n(108),n(124),n(131),n(95),n(40),n(547),n(548),n(551),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),null);function J(){return X.apply(this,arguments)}function X(){return(X=i()(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6).then(n.t.bind(null,1121,7));case 2:return(t=e.sent["default"]).enc.u8array={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r[i]=a}return r},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>2]|=(255&e[i])<<24-i%4*8;return t.lib.WordArray.create(r,n)}},e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=i()(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=4;break}return e.next=3,J();case 3:Q=e.sent;case 4:return r=function(){var e=Q.enc.Utf8.parse(n),r=Q.enc.u8array.parse(t);return Q.DES.decrypt(r.toString(Q.enc.Base64),e,{mode:Q.mode.ECB,padding:Q.pad.Pkcs7}).toString(Q.enc.Utf8)},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=i()(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=4;break}return e.next=3,J();case 3:Q=e.sent;case 4:return r=function(){var e=Q.enc.Utf8.parse(n);return Q.DES.encrypt(t,e,{mode:Q.mode.ECB,padding:Q.pad.Pkcs7}).toString()},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te={decryptByDES:function(e,t){return Z.apply(this,arguments)},encryptByDES:function(e,t){return ee.apply(this,arguments)}},ne="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==ne&&ne,re="URLSearchParams"in ne,ie="Symbol"in ne&&"iterator"in Symbol,ae="FileReader"in ne&&"Blob"in ne&&function(){try{return new Blob,!0}catch(e){return!1}}(),oe="FormData"in ne,se="ArrayBuffer"in ne;if(se)var ue=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ce=ArrayBuffer.isView||function(e){return e&&ue.indexOf(Object.prototype.toString.call(e))>-1};function le(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function de(e){return"string"!=typeof e&&(e=String(e)),e}function fe(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return ie&&(t[Symbol.iterator]=function(){return t}),t}function he(e){this.map={},e instanceof he?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function pe(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function ve(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function ye(e){var t=new FileReader,n=ve(t);return t.readAsArrayBuffer(e),n}function ge(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function me(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:ae&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:oe&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:re&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():se&&ae&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=ge(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):se&&(ArrayBuffer.prototype.isPrototypeOf(e)||ce(e))?this._bodyArrayBuffer=ge(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):re&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ae&&(this.blob=function(){var e=pe(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=pe(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(ye)}),this.text=function(){var e,t,n,r=pe(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=ve(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},oe&&(this.formData=function(){return this.text().then(xe)}),this.json=function(){return this.text().then(JSON.parse)},this}he.prototype.append=function(e,t){e=le(e),t=de(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},he.prototype["delete"]=function(e){delete this.map[le(e)]},he.prototype.get=function(e){return e=le(e),this.has(e)?this.map[e]:null},he.prototype.has=function(e){return this.map.hasOwnProperty(le(e))},he.prototype.set=function(e,t){this.map[le(e)]=de(t)},he.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},he.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),fe(e)},he.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),fe(e)},he.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),fe(e)},ie&&(he.prototype[Symbol.iterator]=he.prototype.entries);var _e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function be(e,t){if(!(this instanceof be))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof be){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new he(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new he(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),_e.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function xe(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function ke(e,t){if(!(this instanceof ke))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new he(t.headers),this.url=t.url||"",this._initBody(e)}be.prototype.clone=function(){return new be(this,{body:this._bodyInit})},me.call(be.prototype),me.call(ke.prototype),ke.prototype.clone=function(){return new ke(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new he(this.headers),url:this.url})},ke.error=function(){var e=new ke(null,{status:0,statusText:""});return e.type="error",e};var we=[301,302,303,307,308];ke.redirect=function(e,t){if(-1===we.indexOf(t))throw new RangeError("Invalid status code");return new ke(null,{status:t,headers:{location:e}})};var Se=ne.DOMException;try{new Se}catch(th){(Se=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Se.prototype.constructor=Se}function Te(e,t){return new Promise((function(n,r){var i=new be(e,t);if(i.signal&&i.signal.aborted)return r(new Se("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new he,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new ke(i,r))}),0)},a.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){r(new Se("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&ne.location.href?ne.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(ae?a.responseType="blob":se&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof he?i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,de(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",o)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)}))}Te.polyfill=!0,ne.fetch||(ne.fetch=Te,ne.Headers=he,ne.Request=be,ne.Response=ke);var Pe=window.location.protocol;/^http/.test(Pe)||(Pe="https:");var Ee={h5tmtsUrl:Pe+"//cache.m.iqiyi.com/jp/tmts/",pingbackV6Url:Pe+"//msg.qy.net/b",pingbackQosUrl:Pe+"//msg.qy.net/qos",isfanUrl:Pe+"//sns-api.iqiyi.com/apis/friend/follow.action",IVHistory:"".concat(Pe,"//iface2.iqiyi.com/lazy_cat/1.0/last_point"),IVZip:"".concat(Pe,"//iface2.iqiyi.com/lazy_cat/1.0/interact_info"),IVSevice:"".concat(Pe,"//iface2.iqiyi.com/lazy_cat/1.0/interactive"),IVFullpoints:"".concat(Pe,"//iface2.iqiyi.com/lazy_cat/1.0/full_points"),IVStoryLine:"".concat(Pe,"//iface2.iqiyi.com/lazy_cat/2.0/linear_story_line")},Ae=function(){function e(t,n){o()(this,e),this.logger=new _.a("IVPackageManager[".concat(t.id,"]")),this.engine=t,this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null,this.init(n)}return u()(e,[{key:"getIndexFile",value:function(){return this.indexFileObject||{}}},{key:"init",value:function(e){var t=this;t.params=e,t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):t._retry(e)}))}},{key:"_parseZip",value:function(e){var t=this;t.logger.info("interaction zipUrl ".concat(e)),n.e(7).then(n.t.bind(null,1120,7)).then((function(n){var r=n["default"],i=function(e){e&&(e.file(/^(?!__MACOSX).*index.*json$/)[0].async("uint8array").then(t._parseIndexFile.bind(t)),t.paraFileList=e.file(/^((?!__MACOSX).*Para.json)*$/))};t._downloadZIP(e).then(r.loadAsync,(function(){t._downloadZIP(e).then(r.loadAsync,(function(){t.engine.isInteractVideo=!1,t.engine.load(t.params)})).then(i)})).then(i)}))}},{key:"_retry",value:function(e){var t=this;t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):(t.engine.isInteractVideo=!1,t.engine.load(e))}))}},{key:"_parseIndexFile",value:function(e){var t=this;t.__parseFile(e).then((function(e){t.logger.info("interaction parseFile ok}"),t.indexFileObject=e,t.indexFileObject&&t.indexFileObject.globle&&t.indexFileObject.globle.varList&&(t.globleVarList=t.indexFileObject.globle.varList),t.indexFileObject&&t.engine.emit(b.a.NTF_IVPACKAGEPARSE_Finished,t.indexFileObject)}))}},{key:"__parseFile",value:function(e){var t=this.engine;return new Promise((function(n){try{te.decryptByDES(e,"$X&#ADvF").then((function(e){n(JSON.parse(e))}))}catch(r){t.emit(b.a.NTF_IVPACKAGEPARSE_Failed,r)}}))}},{key:"parseParaFile",value:function(e){var t=this;return t.logger.info("interaction parse ParaFile"),new Promise((function(n){t.paraFileList.find((function(t){return t.name.indexOf(e)>0})).async("uint8array").then(t.__parseFile.bind(t)).then((function(e){n(e)}))}))}},{key:"_getZipScriptURL",value:function(e){var t=this,n={uniqueId:e.tvid,protocolVersion:"1.5",app_v:x.a,platform_id:1079,lang:H.isTWLocale()?"zh_TW":"zh_CN",src:"pcw",qyid:k.L.getFluid()||k.L.getJsuid()};return t.logger.info("interaction getzipUrl ".concat(Ee.IVZip)),new Promise((function(e){k.v.json({url:Ee.IVZip,timeout:3e3,withCredentials:!0,params:n,success:function(n){if(n&&"A00000"===n.code)if(n.interactInfo&&n.interactInfo.operationVideoInfo&&n.interactInfo.operationVideoInfo.scriptUrl){var r=n.interactInfo.operationVideoInfo.scriptUrl;t.logger.info("interaction getzipUrl  ok ".concat(r)),e(r.replace("http:",window.location.protocol))}else t.logger.info("interaction getzipUrl fail, data error"),e(null);else t.logger.info("interaction getzipUrl  fail, code error"),e(null)},failure:function(){t.logger.info("interaction getzipUrl  fail, code error"),e(null)}})}))}},{key:"_downloadZIP",value:function(e){return fetch(e).then((function(e){return e.arrayBuffer()}))}},{key:"reset",value:function(){this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null}}]),e}(),Ie=(n(263),n(418),n(649)),De=function(){function e(t,n){o()(this,e),this.logger=new _.a("IVRecorder[".concat(t.id,"]")),this.engine=t,this.params=n,this.engine.on(b.a.NTF_IVPACKAGEPARSE_Finished,this._IVPackageParseSuccess.bind(this)),this.engine.on(b.a.NTF_IVPACKAGEPARSE_Failed,this._IVPackageParseFailed.bind(this))}return u()(e,[{key:"init",value:function(e){var t=this;t._initIVState(e),t._initXFactor(e.globle||{}),t._initBlockList(e),t.processHistory()}},{key:"_IVPackageParseSuccess",value:function(e){this.logger.info("interaction package parse successed"),this.init(e)}},{key:"_IVPackageParseFailed",value:function(){var e=this.engine;this.logger.warn("interaction package parse failed"),e.playproxy._eventer.brokedown(R.a.IVG,R.a.IV0001)}},{key:"_initIVState",value:function(e){var t={};t.uniqueId=this.params.tvid,t.fileName=e.base.filename,t.version=e.base.fileVersion,t.interactionMode=e.base.interactMode,t.protocolVersion=e.base.protocolVersion,t.privateCustom=e.base.privateCustom,t.isI5Custom="IPARTMENT5_LANDSCAPE"===t.privateCustom,t.storylineType=e.base.storylineType,t.isVertical="1"==e.base.playerType,t.index=0,this._setState(t)}},{key:"_setState",value:function(e){this.engine.iv_state=Object.assign(this.engine.iv_state,e)}},{key:"_initBlockList",value:function(e){this.playBlockList=e.playBlockList||[],this.interactBlockList=e.interactBlockList||[]}},{key:"_getBlockByTvid",value:function(e){return this.playBlockList.find((function(t){return t.filename==e}))}},{key:"_getInteractBlockIdByTvid",value:function(e){var t=this.playBlockList,n=this.interactBlockList,r=t.find((function(t){return t.filename==e})).blockid;return n.find((function(e){return e.inPlayBlockid==r})).blockid}},{key:"request",value:function(){var e=this,t=e.engine.iv_state;return new Promise((function(n,r){var i={uniqueId:e.params.tvid,qyid:k.L.getFluid()||k.L.getJsuid(),app_v:x.a,platform_id:1079,app_Im:H.isTWLocale()?"tw":"cn",lang:H.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",version:t.version};k.v.json({url:Ee.IVHistory,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction record, last points request successed"),n(t)):r(t)},failure:function(){r()}})}))}},{key:"_initXFactor",value:function(e){var t=this;t.engine.XFactorManager?t.engine.XFactorManager.reset(e||{}):t.engine.XFactorManager=new Ie.a(e||{})}},{key:"processHistory",value:function(){var e=this,t=e.engine,n=t.iv_state,r=function(){e.engine.isIVMain=!0,n.storyLine="0";var r=e.params.tvid,i=e._getBlockByTvid(r);e.engine.iv_state.isI5Custom&&(e.engine.iv_state.others=i?i.others:{}),e.sendAction({status:0}),e.engine.load(e.params),e.engine.emit(b.a.NTF_Get_Record),t.IVRecorder.sendAction({status:6,currentTime:0,blockId:i.blockid,playBlockId:i.blockid,tvId:r,albumId:r,switch_type:1,switch_time:0})};e.params.resetHistory?r():e.request().then((function(r){!function(r){var i={};if(i.index=parseInt(r.index||0,10),i.storyLine=r.storyLine||1,i.isFromHistory=!0,r.pathData&&0!==r.pathData.tvId){var a=r.pathData,o=a.tvId,s=a.currentTime,u=a.globleValues;e.params.tvid=o,e.params.startPlayTime=s,t.isIVMain=n.uniqueId===o,t.isIVMain?t.adPlaySource=0:t.adPlaySource=61,e._initXFactor(u)}else e.engine.isIVMain=!0;if(e.engine.iv_state.isI5Custom){var c=e._getBlockByTvid(e.params.tvid);e.engine.iv_state.others=c?c.others:{}}e.logger.info("interaction record ok, start load"),e._setState(i),t.load(e.params),t.emit(b.a.NTF_Get_Record)}(r)}),r)}},{key:"sendAction",value:function(e){var t=this,n=t.engine.iv_state;if(e.tvId){var r=t._getBlockByTvid(e.tvId);if(r.others&&"1"==r.others.IPARTMENT5_ABANDONHISTORY)return}var i={qyid:k.L.getFluid()||k.L.getJsuid(),app_v:x.a||"",platform_id:1079,app_Im:H.isTWLocale()?"tw":"cn",lang:H.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:n.uniqueId,fileName:n.fileName,version:n.version,protocolVersion:n.protocolVersion,interactionMode:n.interactionMode};Object(k.C)(i,e,!0),t.logger.info("interaction upload to service"),k.v.json({url:Ee.IVSevice,params:i,success:function(){},failure:function(){}})}},{key:"getStoryLine",value:function(){var e=this,t=e.engine.iv_state;return e.logger.info("interaction request storyline"),new Promise((function(n,r){var i={qyid:k.L.getFluid()||k.L.getJsuid(),app_v:x.a,platform_id:1079,app_Im:H.isTWLocale()?"tw":"cn",lang:H.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:t.uniqueId,fileName:t.fileName,version:t.version,protocolVersion:t.protocolVersion,language:""};k.v.json({url:Ee.IVStoryLine,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction request storyline successed"),n(t)):(e.logger.info("interaction request storyline code error"),r(t))},failure:function(){e.logger.info("interaction request storyline failed"),r()}})}))}},{key:"backToStoryLine",value:function(){var e=this,t=e.engine;e.getStoryLine().then((function(n){if(n&&n.graph){var r=n.graph.nodes;r.pop();var i=r.slice().reverse().find((function(e){return 1!==e.mark}));if(!i)return;var a={innerIV:!0};if(a.tvid=i.tvid,a.blockid=i.id,a.playBlockId=i.playBlockId,a.startPlayTime=i.currentTime,"VIDEO"===i.type)a.switchType=5;else a.switchType=2;e.sendAction({status:0,blockId:a.blockid,tvId:a.tvid,switch_type:a.switchType}),t.switchVideo(a)}}),(function(){}))}},{key:"updateParams",value:function(e){this.params=e}}]),e}();var Le,Oe=function(){function e(t){o()(this,e),this.startPlayTime=0,this.endPlayTime=0,this.goodsPoints=[],this.current={},this.next={},this.engine=t,this.aresnoticedata={},this.logger=new _.a("MovieInfo[".concat(t.id,"]"))}return u()(e,[{key:"tvid",get:function(){return this.current.tvid},set:function(e){this.current.tvid=e}},{key:"vid",get:function(){return this.current.vid},set:function(e){this.current.vid=e}},{key:"vd",get:function(){return this.current.vd},set:function(e){this.current.vd=e}},{key:"vidl",get:function(){var e=[];return Object(k.w)(this.current.vidl)&&(e=this.current.vidl),e}},{key:"adPlayerID",get:function(){return this.current.adPlayerID},set:function(e){this.current.adPlayerID=e}},{key:"isTryWatch",get:function(){return this.current.isTryWatch}},{key:"previewTime",get:function(){return this.current.previewTime}},{key:"previewType",get:function(){return this.current.previewType}},{key:"imageLoader",get:function(){return this.current.imageLoader},set:function(e){this.current.imageLoader=e}},{key:"currentLid",get:function(){return this.current.currentLid}},{key:"parts",get:function(){return this.current.parts},set:function(e){this.current.parts=e}},{key:"watermark",get:function(){return this.current.watermark},set:function(e){this.current.watermark=e}},{key:"hasSendSecondAuthRemote",get:function(){return!!this.current.hasSendSecondAuthRemote},set:function(e){this.current.hasSendSecondAuthRemote=e}},{key:"rc_code",get:function(){return this.current.rc_code},set:function(e){this.current.rc_code=e}},{key:"pcaHas4k",get:function(){return this.current.pcaHas4k}},{key:"setStartPlayTime",value:function(e,t){e<0?this.logger.error("play start time set error!"):this.startPlayTime=this.current.isTryWatch&&!t?0:e}},{key:"getPlayHead",value:function(){var e=this.getPlayTimeRanges(),t=e[0][0],n=e[e.length-1][1],r=null,i=this.startPlayTime,a=t;return t<=i&&i<n&&(a=r=i),{timeRanges:e,playHeadTime:r,playRealStartTime:a}}},{key:"initShareTime",value:function(e,t){var n=this.engine.params,r=function(e,t){var n=0,r=undefined;return e&&(n=parseInt(e,10)<0?0:parseInt(e)),t&&(r=parseInt(t,10)<0?0:parseInt(t)),{nsTime:n,neTime:r}};if(n.share_sTime||n.share_eTime){var i=r(n.share_sTime,n.share_eTime);this.current.share_start_time=i.nsTime,this.current.share_end_time=i.neTime,n.share_sTime=!1,n.share_eTime=!1}else if(e||t){var a=r(e,t);this.current.share_start_time=a.nsTime,this.current.share_end_time=a.neTime}}},{key:"getVDInfo",value:function(e,t){var n=e?this.next:this.current;t=t||n.vd;var r={};return n.vidl&&(r=n.vidl.filter((function(e){return e.vd===t}))[0]),r}},{key:"setInfo",value:function(e){k.s.call(e,"previewTime")&&(e.previewTime=+e.previewTime),this.current=e}},{key:"clear",value:function(){this.startPlayTime=0,this.endPlayTime=0,this.current={},this.next={}}},{key:"switch",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.setInfo(e||this.next),this.next={}}},{key:"preload",value:function(e){e.isPreload=!0,this.next=e}},{key:"getPlayTimeRanges",value:function(e){var t=e?this.next:this.current,n=t.prelude||{},r=function(e){var t,n,r=e.history,i=e.prelude,a=void 0===i?{}:i,o=e.share,s=0,u=r?r.time:0,c=a.isSkipPrelude?a.headTimeS>0?0:a.headTime>0?a.headTime:0:0,l=a.isSkipPrelude?a.tailTimeE>0?Infinity:a.tailTime>0?a.tailTime:Infinity:Infinity;return t=l,u>0&&u+5<t&&(n="history",s=u),a.isSkipPrelude&&a.headTimeS>0&&a.headTimeS<s&&s<a.headTime?(n="prelude",s=a.headTime):c>0&&c>=s&&(n="prelude",s=c),o&&("number"==typeof o.startTime&&o.startTime>=0&&(s=parseInt(o.startTime),n="share"),"number"==typeof o.startTime&&o.endTime&&o.endTime>=o.startTime&&(t=parseInt(o.endTime)),s>parseInt(o.endTime)&&(t=l)),{launchFrom:n,range:[s,t]}}({history:{time:t.isPreload?0:this.startPlayTime},prelude:{isSkipPrelude:this.engine.skip,headTime:n.headTime,tailTime:n.tailTime,headTimeS:n.headTimeS,tailTimeE:n.tailTimeE},share:{startTime:t.share_start_time,endTime:t.share_end_time}}),i=r.launchFrom,a=r.range;return i&&(t.playStartFrom=i),[a]}}]),e}(),Re=Oe,Ce=n(123),Me=n.n(Ce),Be=n(140),Ne=n.n(Be),Fe=(n(296),n(76),"1.2.9"),qe=n(39),je=(n(30),n(257),n(17),n(110),n(101),n(23),n(4)),Ue=n.n(je),Ve=n(5),He=n.n(Ve),ze=n(207),Ge=n.n(ze),We=n(41),Ke=n.n(We),$e=n(8),Ye=n.n($e),Qe=n(9),Je=n.n(Qe),Xe=n(3),Ze=n.n(Xe),et=n(105),tt=n.n(et);n(266),n(258),n(121),n(35),n(115);!function(e){e[e.P2P=0]="P2P",e[e.CDN=1]="CDN"}(Le||(Le={}));var nt=n(333),rt=n(268),it=n(220),at=n(305);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var st=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},ut=function(e){Ye()(n,e);var t=ot(n);function n(){return Ue()(this,n),t.apply(this,arguments)}return He()(n)}(function(){function e(){Ue()(this,e),this.start=0,this.end=0}return He()(e,[{key:"len",get:function(){return this.end-this.start}}]),e}()),ct=function(e){Ye()(n,e);var t=ot(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).skipErrorMode_=!1,e.adjustTimestampMode_=!1,e.$ARTEFACT_ACTION=it.a.DEPOSIT_LOADER,e.chunkMode=!1,e.chunkDataDone=!0,e}return He()(n,[{key:"currentLoaderMode",get:function(){return Le[this.mode]}},{key:"endOfDown",get:function(){return!!this.eod}},{key:"skipErrorMode",get:function(){return this.skipErrorMode_},set:function(e){this.skipErrorMode_=e}},{key:"adjustTimestampMode",get:function(){return this.adjustTimestampMode_},set:function(e){this.adjustTimestampMode_=e}},{key:"seek",value:function(e,t){this.$error=null,this.$krt.ctx.emit(rt.a.STATE_CHANGE,{state:"loaderseek"})}},{key:"noticeDataPump",value:function(e){this.$krt.ctx.emit(rt.a.STATE_CHANGE,{state:"loaderpump",data:e})}},{key:"recoverAt",value:function(e){Ke()(Ze()(n.prototype),"recoverAt",this).call(this,e),this.$stream.restrictor.needSendInitSegment=!0,this.seek(e)}}]),n}(at.a);st([nt.c],ct.prototype,"currentLoaderMode",null),st([nt.c],ct.prototype,"endOfDown",null);var lt=n(630),dt=n(160),ft=n(1016),ht=n(1017),pt=(n(303),n(415)),vt=n(609),yt=n(185),gt=n(86),mt=(n(70),n(111),n(149),n(159),n(93)),_t=n(278),bt=n(1020),xt=mt.f+"//103.44.59.54/3e8",kt="access.if.iqiyi.com";function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var St=function(e){Ye()(n,e);var t=wt(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments))._ipProxy=new mt.a,e._netProxy=new mt.a,e._ipRetry=0,e._parserUrl="",e._domainName="",e._parsing=!1,e._parserReq=null,e._data=null,e._ipReq=null,e}return He()(n,[{key:"doRequest",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(e){var r={userInfo:t,idc:n,url:e,domainName:undefined},i=new bt.a(r.url);r.domainName=i.domain;var a=/[a-z]/i.test(r.domainName);a?(this._parsing&&this.abort(),this._data=r,this._domainName=r.domainName,this._parsing=!0,this._request()):this.emit("success",{dmnm:r.domainName,ips:r.domainName,userinfo:r.userInfo,idc:r.idc})}}},{key:"abort",value:function(){this._parserReq&&this._parserReq.abort(),this._ipReq&&this._ipReq.abort(),this._parsing=!1,this._ipRetry=0,this._domainName="",this._data=null}},{key:"destroy",value:function(){this._parsing&&this.abort(),this._netProxy=null,this._parserReq&&(this._parserReq.destroy(),this._parserReq=null),this._ipProxy=null,this._ipReq&&(this._ipReq.destroy(),this._ipReq=null),this._parsing=!1,this._ipRetry=0,this._parserUrl="",this._domainName="",this._data=null}},{key:"_request",value:function(){var e=this;if(""!=e._parserUrl){e._parserUrl.indexOf("/3eb/")>-1&&(e._parserUrl=e._parserUrl.replace("/3eb/",""));var t=mt.f+"//"+e._parserUrl+"/3f0/hd.cloud.iqiyi.com/d?dn="+this._domainName+"&business=pcwPlayer&cross-domain=1",n=_t.a.DISPATCH,r=Object(mt.d)([t],{timeout:3e3,maxRetry:1});r.method="GET",r.responseType="text",r.callbacks={onSuccess:function(t){e._ipRetry=0,e.emit("success",{dmnm:e._domainName,ips:t.data,userinfo:e._data.userInfo,idc:e._data.idc}),e._parsing=!1,e._domainName=""},onError:function(){e._retryGetIpList()},onTimeout:function(){e._retryGetIpList()},onAbort:function(){},onComplete:function(){}},e._parserReq=e._netProxy.request(n,r)}else e._getIPList(e._request.bind(e))}},{key:"_getIPList",value:function(e){var t=this,n=xt;qe.a.log("dnsParser getting ip by: ".concat(n));var r=_t.a.DISPATCH,i=Object(mt.d)([n],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(n){if(n&&n.data)if("string"==typeof n.data){var r=n.data.split(";");t._parserUrl=r[0]}else t._parserUrl=kt;else t._parserUrl=kt;e&&e()},onError:function(n){t._parserUrl=kt,e&&e()},onTimeout:function(n,r){t._parserUrl=kt,e&&e()},onAbort:function(){},onComplete:function(){}},t._ipReq=t._ipProxy.request(r,i)}},{key:"_retryGetIpList",value:function(){var e=this;this._ipRetry<1?(this._getIPList((function(){e._request()})),this._ipRetry++):this._parsing=!1}}]),n}(gt.EventEmitter),Tt=n(533),Pt=(n(345),n(44),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(1019));function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var At,It=function(e){Ye()(n,e);var t=Et(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Ue()(this,n),(e=t.call(this))._config={maxBytesLength:104857600},e._pool={},e._byteLength=0,Object(yt.a)(e._config,r),e}return He()(n,[{key:"keys",get:function(){return Object.keys(this._pool)}},{key:"size",get:function(){return this._byteLength}},{key:"humanSize",get:function(){return Object(Pt.a)(this._byteLength)}},{key:"isSafe",get:function(){return this._byteLength<this._config.maxBytesLength}},{key:"add",value:function(e,t){this._config;var n,r=this._pool,i=r[e];i?((n=new Uint8Array(i.byteLength+t.byteLength)).set(i,0),n.set(t,i.byteLength)):n=t,this._byteLength+=t.byteLength,r[e]=n}},{key:"del",value:function(e){var t=this._pool,n=t[e];n&&(this._byteLength-=n.byteLength,t[e]=null,delete t[e])}},{key:"read",value:function(e){return this._pool[e]}},{key:"drain",value:function(){var e=this._pool;for(var t in e)this.del(t);0!==this._byteLength&&(this._pool={},this._byteLength=0)}}]),n}(gt.EventEmitter);!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.END=2]="END",e[e.ERROR=3]="ERROR"}(At||(At={}));var Dt=He()((function rh(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Ue()(this,rh),this.doRetry=!0,this.dispatch=!0,this.allowIPDispatch=!0,this.timeout=1e4,this.retryNum=2,this.ipMaxRetry=1,this.keyframesFusionSize=524288,Object(yt.a)(this,e)}));function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}function Ot(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,i=[],a=t.start(0)-n,o=t.end(t.length-1)+r;return e.forEach((function(e,t){var n=e.segments;n.length>0&&n.map((function(n,r,s){var u=n.startTime,c=n.startTime+n.duration;return n.enabled=(u>=a||c>a)&&(c<=o||u<o),n.fragIdx=t,n.fragKey=e.key,n.flattenIdx=i.length,i.push(n),n}))})),{fragments:e,segments:i}}var Rt=function(e){Ye()(n,e);var t=Lt(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this)).error=null,i.eof=!1,i.eod=!1,i.state_=At.IDLE,i.silenced_=!1,i.TAG="CdnLoader",i._eventManager=new pt.a,i._uuid=vt.a.create(),i.tickTimer_=new lt.a((function(){return i.ticker_()})),i._downFragBufferTimeLength=30,i._bufferPool=new It,i._withBufferRetryCount=0,i._noBufferRetryCount=0,i.loaderBuff_=new ut,i._loaderConfig=new Dt,i._dnsParser=new St,i.krt=e,i.ipc=r,i._ctx=e.ctx,i._cfg=e.conf,i._maxBufferTimeLength=i._cfg.maxBufferTimeLength,i._withBufferMaxRetry=i._cfg.loaderWithBufferMaxRetry,i._noBufferMaxRetry=i._cfg.loaderNoBufferMaxRetry,i._eventManager.on(i._dnsParser,Tt.a.DNS_PARSER_SUCCESS,(function(e){i._ctx.emit(Tt.a.DNS_PARSER_SUCCESS,e)})),i.tickTimer_.scheduleRepeated(i.silenced_?.5:.1),i}return He()(n,[{key:"silenced",set:function(e){this.silenced_=e,this.tickTimer_.adjustFrequency(this.silenced_?.5:.1)}},{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced_?"(silence)":"","]")}},{key:"loaderConfig",get:function(){return this._loaderConfig},set:function(e){Object(yt.a)(this._loaderConfig,e)}},{key:"state",get:function(){return this.state_},set:function(e){if(this.state_!==e){var t=this.state;this.state_=e,qe.a.log("".concat(this.LOG_TAG,": ").concat(At[t]," -> ").concat(At[e])),this.state_===At.END&&(this.eod=!0,qe.a.log("".concat(this.LOG_TAG,": EOD")))}}},{key:"reset",value:function(){this._uuid=vt.a.create(),this.eof=!1,this.eod=!1}},{key:"destroy",value:function(){this.ipc&&this.ipc.removeAllListeners(),this._eventManager.removeAll(),this._dnsParser.destroy(),this._bufferPool.drain(),this.tickTimer_.cancel(),delete this._ctx,delete this._cfg,delete this.error,delete this.tickTimer_,delete this._bufferPool,delete this._dnsParser}},{key:"ticker_",value:function(){var e=performance.now();!this.silenced_&&this.state===At.IDLE&&(this.lastGCTimestamp_==undefined||e-this.lastGCTimestamp_>5e3)&&(this.gc_&&this.gc_(),this.lastGCTimestamp_=e),this.tick_&&this.tick_()}},{key:"seek",value:function(e){qe.a.log("".concat(this.LOG_TAG," cdn loader seeking ").concat(e)),this.error=null,this.state!==At.ERROR&&this.state!==At.END||(this.state=At.IDLE),this.eod=!1,this.eof=!1}},{key:"getNextFrag",value:function(e){return null}},{key:"drainBufferPool",value:function(){this._bufferPool.drain()}},{key:"doDNSParser",value:function(e){this._dnsParser.doRequest(e.url,e.userinfo,e.idc)}},{key:"emitErr",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t&&(this.error=e),this.emit("ER",e)}}]),n}(gt.EventEmitter);n(88),n(191),n(136),n(133);function Ct(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}var Mt=n(804),Bt=n(456),Nt=n(532),Ft=n(535),qt=n(631),jt=(n(154),0),Ut="DISPATCH_EVENT_",Vt={DISPATCH_SUCCESS:Ut+jt++,DISPATCH_FAIL:Ut+jt++,DATA_LOAD_SUCCESS:Ut+jt++,DATA_LOAD_PROGRESS:Ut+jt++,DATA_LOAD_FAIL:Ut+jt++,DNS_PARSER_REQUEST:Ut+jt++},Ht=n(113),zt=n.n(Ht);function Gt(e,t,n,r,i,a){return Qt((o=Qt(Qt(t,e),Qt(r,a)))<<(s=i)|o>>>32-s,n);var o,s}function Wt(e,t,n,r,i,a,o){return Gt(t&n|~t&r,e,t,i,a,o)}function Kt(e,t,n,r,i,a,o){return Gt(t&r|n&~r,e,t,i,a,o)}function $t(e,t,n,r,i,a,o){return Gt(t^n^r,e,t,i,a,o)}function Yt(e,t,n,r,i,a,o){return Gt(n^(t|~r),e,t,i,a,o)}function Qt(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Jt(e){return function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=n,u=r,c=i,l=a;n=Wt(n,r,i,a,e[o+0],7,-680876936),a=Wt(a,n,r,i,e[o+1],12,-389564586),i=Wt(i,a,n,r,e[o+2],17,606105819),r=Wt(r,i,a,n,e[o+3],22,-1044525330),n=Wt(n,r,i,a,e[o+4],7,-176418897),a=Wt(a,n,r,i,e[o+5],12,1200080426),i=Wt(i,a,n,r,e[o+6],17,-1473231341),r=Wt(r,i,a,n,e[o+7],22,-45705983),n=Wt(n,r,i,a,e[o+8],7,1770035416),a=Wt(a,n,r,i,e[o+9],12,-1958414417),i=Wt(i,a,n,r,e[o+10],17,-42063),r=Wt(r,i,a,n,e[o+11],22,-1990404162),n=Wt(n,r,i,a,e[o+12],7,1804603682),a=Wt(a,n,r,i,e[o+13],12,-40341101),i=Wt(i,a,n,r,e[o+14],17,-1502002290),n=Kt(n,r=Wt(r,i,a,n,e[o+15],22,1236535329),i,a,e[o+1],5,-165796510),a=Kt(a,n,r,i,e[o+6],9,-1069501632),i=Kt(i,a,n,r,e[o+11],14,643717713),r=Kt(r,i,a,n,e[o+0],20,-373897302),n=Kt(n,r,i,a,e[o+5],5,-701558691),a=Kt(a,n,r,i,e[o+10],9,38016083),i=Kt(i,a,n,r,e[o+15],14,-660478335),r=Kt(r,i,a,n,e[o+4],20,-405537848),n=Kt(n,r,i,a,e[o+9],5,568446438),a=Kt(a,n,r,i,e[o+14],9,-1019803690),i=Kt(i,a,n,r,e[o+3],14,-187363961),r=Kt(r,i,a,n,e[o+8],20,1163531501),n=Kt(n,r,i,a,e[o+13],5,-1444681467),a=Kt(a,n,r,i,e[o+2],9,-51403784),i=Kt(i,a,n,r,e[o+7],14,1735328473),n=$t(n,r=Kt(r,i,a,n,e[o+12],20,-1926607734),i,a,e[o+5],4,-378558),a=$t(a,n,r,i,e[o+8],11,-2022574463),i=$t(i,a,n,r,e[o+11],16,1839030562),r=$t(r,i,a,n,e[o+14],23,-35309556),n=$t(n,r,i,a,e[o+1],4,-1530992060),a=$t(a,n,r,i,e[o+4],11,1272893353),i=$t(i,a,n,r,e[o+7],16,-155497632),r=$t(r,i,a,n,e[o+10],23,-1094730640),n=$t(n,r,i,a,e[o+13],4,681279174),a=$t(a,n,r,i,e[o+0],11,-358537222),i=$t(i,a,n,r,e[o+3],16,-722521979),r=$t(r,i,a,n,e[o+6],23,76029189),n=$t(n,r,i,a,e[o+9],4,-640364487),a=$t(a,n,r,i,e[o+12],11,-421815835),i=$t(i,a,n,r,e[o+15],16,530742520),n=Yt(n,r=$t(r,i,a,n,e[o+2],23,-995338651),i,a,e[o+0],6,-198630844),a=Yt(a,n,r,i,e[o+7],10,1126891415),i=Yt(i,a,n,r,e[o+14],15,-1416354905),r=Yt(r,i,a,n,e[o+5],21,-57434055),n=Yt(n,r,i,a,e[o+12],6,1700485571),a=Yt(a,n,r,i,e[o+3],10,-1894986606),i=Yt(i,a,n,r,e[o+10],15,-1051523),r=Yt(r,i,a,n,e[o+1],21,-2054922799),n=Yt(n,r,i,a,e[o+8],6,1873313359),a=Yt(a,n,r,i,e[o+15],10,-30611744),i=Yt(i,a,n,r,e[o+6],15,-1560198380),r=Yt(r,i,a,n,e[o+13],21,1309151649),n=Yt(n,r,i,a,e[o+4],6,-145523070),a=Yt(a,n,r,i,e[o+11],10,-1120210379),i=Yt(i,a,n,r,e[o+2],15,718787259),r=Yt(r,i,a,n,e[o+9],21,-343485551),n=Qt(n,s),r=Qt(r,u),i=Qt(i,c),a=Qt(a,l)}return Array(n,r,i,a)}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))}n(339),n(703);function Xt(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}function Zt(e){e=atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).substr(-2);return t}function en(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function tn(e,t){if(!e)return"";var n;if(e instanceof ArrayBuffer)n=e;else{var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(e)),n=r.buffer}for(var i=Math.floor(e.byteLength/2),a=new Uint16Array(i),o=new DataView(n),s=0;s<i;s++)a[s]=o.getUint16(2*s,t);return Xt(a)}function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var rn=function(e){Ye()(n,e);var t=nn(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this)).netProxy_=new mt.a,i.dispatchURI_=new bt.a(e),i.originDomain_=i.dispatchURI_.domain,i.originPath_=i.dispatchURI_.path,i.configure_=r,i}return He()(n,[{key:"startIPDispatch",value:function(){qe.a.warn("Start ip dispatch"),this._getIPList()}},{key:"_getIPList",value:function(){var e=this,t=xt,n=kt;qe.a.log("Getting ip by: ".concat(t));var r=_t.a.DISPATCH,i=Object(mt.d)([t],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(t){if(t&&t.data)if("string"==typeof t.data){var r=t.data.split(";")[0],i="{{IP}}".replace("{{IP}}",r);e._reqDispatchResult(i,!0)}else e._reqDispatchResult(n);else e._reqDispatchResult(n)},onError:function(t){e._reqDispatchResult(n)},onTimeout:function(t,r){e._reqDispatchResult(n)},onAbort:function(){e._finalError(qt.a.ABORT)},onComplete:function(){}},e.ipReq_=e.netProxy_.request(r,i)}},{key:"_prepareURLParam",value:function(e){var t=this.dispatchURI_,n=this.originPath_,r="/3eb/"+Jt(this.originDomain_)+en(n);return t.setScheme("https"),t.setDomain(e),t.setPath(r),t.query.update("ssl","1"),t.toString()}},{key:"_reqDispatchResult",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this,r=n._prepareURLParam(e);r||n.emit("FAIL"),qe.a.log("".concat(t?"ip":"domain"," proxy: ").concat(r));var i=_t.a.DISPATCH;n.netProxy_||(n.netProxy_=new mt.a);var a=Object(mt.d)([r],{timeout:n.configure_.ipTimeout,maxRetry:n.configure_.ipMaxRetry});a.method="GET",a.responseType="json",a.callbacks={onSuccess:function(e){n.emit("SUCCESS",e)},onError:function(e){e.url=r,n._finalError(qt.a.ERROR,e)},onTimeout:function(e,t){n._finalError(qt.a.TIMEOUT)},onAbort:function(){n._finalError(qt.a.ABORT)},onComplete:function(){}},n.disReq_=n.netProxy_.request(i,a)}},{key:"abort",value:function(){this.ipReq_&&this.ipReq_.abort(),this.disReq_&&this.disReq_.abort()}},{key:"destroy",value:function(){this.netProxy_=null,this.dispatchURI_=null,this.ipReq_&&(this.ipReq_.destroy(),this.ipReq_=null),this.disReq_&&(this.disReq_.destroy(),this.disReq_=null)}},{key:"_finalError",value:function(e,t){this.emit("FAIL",{reason:e,error:t})}}]),n}(gt.EventEmitter);function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var on=function(e){Ye()(n,e);var t=an(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Ue()(this,n),(e=t.call(this)).hostLaborer_=null,e.ipLaborer_=null,e.configure_={maxRetry:1,timeout:5e3,allowIpRetry:!0,ipMaxRetry:1,ipTimeout:3e3},qe.a.assert(!!r,"Dispatch url should not be empty!"),e.uri_=new bt.a(r),e.hostLaborer_=null,e.ipLaborer_=null,e.query=e.uri_.query,e.hooks={beforeLoad:function(){}},Object(yt.a)(e.configure_,i),e}return He()(n,[{key:"qkv",get:function(){var e=this.query;return{crossDomain:e.get("cross-domain"),pv:e.get("pv"),retry:e.get("retry"),client:e.get("client"),z:e.get("z"),l:e.get("l"),uid:e.get("uid"),cid:e.get("cid"),vid:e.get("vid"),t:e.get("t"),e:e.get("e"),tn:e.get("tn")}}},{key:"load",value:function(){this._startHostDispatch()}},{key:"abort",value:function(){this.hostLaborer_&&this.hostLaborer_.abort(),this.ipLaborer_&&this.ipLaborer_.abort()}},{key:"destroy",value:function(){this.hostLaborer_&&this.hostLaborer_.destroy(),this.ipLaborer_&&this.ipLaborer_.destroy()}},{key:"_startHostDispatch",value:function(){var e=this,t=this.uri_,n=this.configure_,r=_t.a.DISPATCH;e.hooks.beforeLoad(t);var i=t.toString();qe.a.log("Dispatch(normal) url: ".concat(i));var a=Object(mt.d)([i],Object(yt.a)(Object(mt.b)(),{timeout:n.timeout,maxRetry:n.maxRetry}));a.method="GET",a.responseType="json",a.callbacks=Object(yt.a)(a.callbacks,{onSuccess:function(t){var n=t.data;qe.a.log("Dispatch(normal) take ".concat(t.netCost,"ms, ").concat(JSON.stringify(n))),e.emit(Vt.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})},onError:function(t){qe.a.error("Dispatch(normal) error: ".concat(JSON.stringify(t)));var r=405===t.status&&t.response&&t.response.code&&t.response.code.indexOf("D20")>=0;!n.allowIpRetry||r?e.emit(Vt.DISPATCH_FAIL,{reason:qt.a.ERROR,error:t}):e._startIPDispatch(i)},onTimeout:function(t,r){qe.a.error("Dispatch(normal) timeout: ".concat(i)),n.allowIpRetry?e._startIPDispatch(i):e.emit(Vt.DISPATCH_FAIL,{reason:qt.a.TIMEOUT})},onAbort:function(){e.emit(Vt.DISPATCH_FAIL,{reason:qt.a.ABORT})},onComplete:function(){}}),this.hostLaborer_=mt.e.request(r,a)}},{key:"_startIPDispatch",value:function(e){var t=this;this.emit(Vt.DNS_PARSER_REQUEST,e),this.ipLaborer_=new rn(e,this.configure_),this.ipLaborer_.on("SUCCESS",(function(e){var n=e.data;qe.a.log("Dispatch(ip) take ".concat(e.netCost,"ms, ").concat(JSON.stringify(n))),t.emit(Vt.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})})),this.ipLaborer_.on("FAIL",(function(e){t.emit(Vt.DISPATCH_FAIL,{reason:e.reason,error:e.error})})),this.ipLaborer_.startIPDispatch()}}]),n}(gt.EventEmitter);function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var un=function(e){Ye()(n,e);var t=sn(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return Ue()(this,n),(e=t.call(this,r,a)).retryCount=i,e.hooks.beforeLoad=e.beforeLoad_.bind(zt()(e)),e}return He()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}(on);function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}function ln(e,t,n,r){var i="contentlength",a=new bt.a(e),o=a.query;switch(t){case 0:n!==undefined&&r!==undefined&&o.update("range","".concat(n,"-").concat(r));break;case 1:n!==undefined&&o.update("start","".concat(n)),r!==undefined&&o.update("end","".concat(r));break;default:}return n!==undefined&&r!==undefined&&o.get(i)&&o.update(i,"".concat(r-n)),a}var dn=function(e){Ye()(n,e);var t=cn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this)).dispatcher=null,r.cdnLaborer=null,r.TAG="URIRemote",r.LOG_TAG="[".concat(r.TAG,"]"),r.eventManager_=new pt.a,r.internalRetryCount_=0,r.internalMaxRetry_=1,r.allowRetry_=!0,r.allowIpDispatch_=!0,r.dnsInfo_={userinfo:"",idc:""},r.runTime=e,r}return He()(n,[{key:"startLoad",value:function(e){var t,n,r=this,i=(arguments.length>1&&undefined,e.fragment),a=i.dispatch,o={startByte:e.pieces[0].startByte,endByte:e.pieces[e.pieces.length-1].endByte};if(e.loaderConfig&&(this.internalMaxRetry_=e.loaderConfig.retryNum,this.allowRetry_=e.loaderConfig.doRetry,this.allowIpDispatch_=e.loaderConfig.allowIPDispatch),e.loaderConfig.dispatch)if(a&&a.l){var s=ln(a.l,e.rangeMode,o.startByte,o.endByte);this._loadCDNData(e,s)}else{var u=new bt.a(e.uri.toString());if(this.dispatcher&&(this.eventManager_.removeAll(),this.dispatcher.destroy()),a){var c=a.z;c&&u.query.update("z",c)}this.dispatcher=new un(u.toString(),this.internalRetryCount_,{allowIpRetry:this.allowIpDispatch_}),this.eventManager_.on(this.dispatcher,Vt.DISPATCH_SUCCESS,(function(t){var n,a;i.dispatch=t,r.dnsInfo_={userinfo:t.t,idc:t.z};var s=ln(t.l,e.rangeMode,o.startByte,o.endByte);window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisDone(null===(a=null===(n=r.runTime)||void 0===n?void 0:n.ctx)||void 0===a?void 0:a.isAd),r._loadCDNData(e,s)})).on(this.dispatcher,Vt.DNS_PARSER_REQUEST,(function(e){r._doDNS(e)})).on(this.dispatcher,Vt.DISPATCH_FAIL,(function(t){var n=t.reason,i=t.error,a=i?i.status:"";switch(n){case qt.a.TIMEOUT:r.allowRetry_&&r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r._internalRetry(e)):r.emit("FL",{category:"dispatcher-timeout",statusCode:a});break;case qt.a.ERROR:i&&405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?r.emit("FL",{category:"auth-error",statusCode:a}):r.allowRetry_&&r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r._internalRetry(e)):r.emit("FL",{category:"dispatcher-error",statusCode:a});break;case qt.a.ABORT:r.emit("AB");break;default:qe.a.warn("Unknown dispatch fail reason ".concat(n))}})),this.dispatcher.load(),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisStart(null===(n=null===(t=this.runTime)||void 0===t?void 0:t.ctx)||void 0===n?void 0:n.isAd)}else{var l=ln(e.uri.toString(),e.rangeMode,o.startByte,o.endByte);this._loadCDNData(e,l)}}},{key:"_loadCDNData",value:function(e,t){var n=this,r=t.toString(),i=_t.a.SEGMENT,a=Object(mt.d)([r],Object(yt.a)(Object(mt.b)(),{maxRetry:e.loaderConfig.retryNum,timeout:e.loaderConfig.timeout}));a.method="GET",a.callbacks=Object(yt.a)(a.callbacks,{onProgress:function(e,t){n.emit("PG",e,t)},onSuccess:function(e){var t,r,i=new Uint8Array(e.data);window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDataDone(null===(r=null===(t=null==n?void 0:n.runTime)||void 0===t?void 0:t.ctx)||void 0===r?void 0:r.isAd),qe.a.log("".concat(n.LOG_TAG," success, http-status/bytes/take(").concat(e.status,"/").concat(i.byteLength,"/").concat((e.netCost||0).toFixed(3),"ms), ").concat(Object(Pt.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",{bytes:i})},onError:function(t){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(qe.a.error("".concat(n.LOG_TAG," error after ").concat(n.internalRetryCount_," retry, http-status=").concat(t.status,", ").concat(t.url)),n._doDNS(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i,a){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(qe.a.error("".concat(n.LOG_TAG," timeout, ").concat(a.url)),n._doDNS(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),qe.a.log("".concat(n.LOG_TAG," request url: ").concat(r)),this.cdnLaborer=mt.e.request(i,a)}},{key:"_internalRetry",value:function(e){var t,n,r,i;(null===(n=null===(t=e.fragment)||void 0===t?void 0:t.dispatch)||void 0===n?void 0:n.l)&&(null===(i=null===(r=e.fragment)||void 0===r?void 0:r.dispatch)||void 0===i||delete i.l),this.startLoad(e,!0)}},{key:"_doDNS",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher&&this.dispatcher.abort(),this.cdnLaborer&&this.cdnLaborer.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher&&this.dispatcher.destroy(),delete this.dispatcher,this.cdnLaborer&&this.cdnLaborer.destroy(),delete this.cdnLaborer,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(gt.EventEmitter);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var hn=function(e){Ye()(n,e);var t=fn(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Ue()(this,n),(e=t.call(this,r)).retryCount=i,e.hooks.beforeLoad=e.beforeLoad_.bind(zt()(e)),e}return He()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}(on);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var vn=function(e){Ye()(n,e);var t=pn(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).TAG="DashUriRequest",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new pt.a,e.dispatcher_=null,e.dispatcherResultDic_={},e.cdnLaborer_=null,e.internalRetryCount_=0,e.internalMaxRetry_=2,e.dnsInfo_={userinfo:"",idc:""},e}return He()(n,[{key:"dispatcher",get:function(){return this.dispatcher_}},{key:"cdnLaborer",get:function(){return this.cdnLaborer_}},{key:"startLoad",value:function(e){var t=this,n=e.dispatchUrl,r=e.startByte,i=e.endByte,a=new bt.a(n),o=this.dispatcherResultDic_[n];if(o&&o.l){var s=ln(o.l,1,r,i);this.loadCDNData_(e,s)}else{if(this.dispatcher_&&(this.eventManager_.removeAll(),this.dispatcher_.destroy()),o){var u=o.z;u&&a.query.update("z",u)}this.dispatcher_=new hn(a.toString(),this.internalRetryCount_),this.dispatcher_.hooks.beforeLoad=function(){var e=t.internalRetryCount_;e>0&&t.dispatcher_.query.update("retry","".concat(e)),t.dispatcher_.query.update("pv","0.1"),t.dispatcher_.query.update("cross-domain","1")},this.eventManager_.on(this.dispatcher_,Vt.DISPATCH_SUCCESS,(function(a){t.dispatcherResultDic_[n]=a,t.dnsInfo_={userinfo:a.t,idc:a.z};var o=ln(a.l,1,r,i);t.loadCDNData_(e,o)})),this.eventManager_.on(this.dispatcher_,Vt.DNS_PARSER_REQUEST,(function(e){t.doDNS_(e)})),this.eventManager_.on(this.dispatcher_,Vt.DISPATCH_FAIL,(function(n){var r=n.reason,i=n.error;switch(r){case qt.a.TIMEOUT:t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-timeout"});break;case qt.a.ERROR:405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?t.emit("FL",{category:"auth-error"}):t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-error"});break;case qt.a.ABORT:t.emit("AB");break;default:qe.a.warn("Unknown dispatch fail reason ".concat(r))}})),this.dispatcher_.load()}}},{key:"loadCDNData_",value:function(e,t){var n=this,r=t.toString(),i=_t.a.SEGMENT,a=Object(mt.d)([r],Object(yt.a)(Object(mt.b)(),{timeout:1e4}));a.method="GET",a.callbacks=Object(yt.a)(a.callbacks,{onSuccess:function(e){var t=new Uint8Array(e.data);qe.a.log("".concat(n.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat(e.netCost,"ms), ").concat(Object(Pt.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",e)},onError:function(t){qe.a.log("".concat(n.LOG_TAG," cdn error, http-status=").concat(t.status,", ").concat(t.url)),n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),this.cdnLaborer_=mt.e.request(i,a)}},{key:"internalRetry_",value:function(e){var t=this.dispatcherResultDic_[e.dispatchUrl];t&&t.l&&delete t.l,this.startLoad(e)}},{key:"doDNS_",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher_&&this.dispatcher_.abort(),this.cdnLaborer_&&this.cdnLaborer_.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher_&&this.dispatcher_.destroy(),delete this.dispatcher_,this.cdnLaborer_&&this.cdnLaborer_.destroy(),delete this.cdnLaborer_,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(gt.EventEmitter);function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var gn=function(e){Ye()(n,e);var t=yn(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e))._fragments=[],i._readPos={f:-1,s:-1},i._loadPos={f:-1,s:-1},i._preErrorData=null,i._allowLoaded=!0,i._dashRemote=new vn,i._initSegment=null,i._initSegmentData=null,i.segments=[],i.TAG="DASHLoaderUnit::".concat(r),i._loaderType=r,i}return He()(n,[{key:"fragments",get:function(){return this._fragments},set:function(e){this.eof=!1,this.eod=!1,this._fragments=e,this._preErrorData=null}},{key:"initSegment",set:function(e){e!=this._initSegment&&(this._initSegmentData=null,this._initSegment=e)}},{key:"allowLoaded",set:function(e){this._allowLoaded!==e&&(this._allowLoaded=e,e&&this.state!==At.LOADING&&this.loadFragment_())}},{key:"initSegmentData",get:function(){return this._initSegmentData},set:function(e){this._initSegmentData=e}},{key:"duration",get:function(){var e=0;this._fragments.length>0&&(e=this._fragments[this._fragments.length-1].endTime);return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"bufferTime_",get:function(){return this._currentBuf&&this._currentBuf.info?this._currentBuf.info.timeLength:0}},{key:"resetReadPosByTime_",value:function(e){var t=this.findFIndexByTime_(e);if(t.f>-1){var n=this._readPos.f;t.f!==n&&(n=t.f),this.setReadPos_(n,t.s),qe.a.log("".concat(this.LOG_TAG," update readpos, time=").concat(e,", readpos=").concat(this._readPos.f,"-").concat(this._readPos.s,", loadpos=").concat(this._loadPos.f,"-").concat(this._loadPos.s))}}},{key:"findFIndexByTime_",value:function(e){for(var t=-1,n=-1,r=0;r<this._fragments.length;r++)if(e>=this._fragments[r].startTime&&e<this._fragments[r].endTime){t=r,n=this.findSegIdxByTime_(r,e);break}return-1!=t&&-1!=n||qe.a.log("".concat(this.LOG_TAG," find index error, f=").concat(t,", s=").concat(n,", time=").concat(e,", duration=").concat(this.duration,",fs=").concat(this._fragments.length)),{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=Ct(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"needLoadFrag_",value:function(e){var t=e.f>=0&&this._fragments.length>0?this._fragments[e.f]:null,n=(e.s>=0&&t.segments&&t.segments.length)>0?t.segments[e.s].status:-1;return!(!t||-1===n||2===n)}},{key:"loadFragment_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this,n=2!==t._initSegment.status,r=function(){var e,r,i,a={type:n?"init":"segment",f:t._loadPos.f,s:t._loadPos.s,response:undefined,category:undefined};if(t._eventManager.removeAll(),t._eventManager.on(t._dashRemote,"SC",(function(e){a.response=e,t.dataLoadOk_(a)})),t._eventManager.on(t._dashRemote,"FL",(function(e){a.category=e.category,t.dataLoadFail_(a)})),t._eventManager.on(t._dashRemote,"AB",(function(){t.dataLoadOnAbort_(a)})),t._eventManager.on(t._dashRemote,"DP",(function(e){t.doDNSParser(e)})),n)e=t._initSegment.uri.toString();else if(t._fragments){var o=t._fragments[a.f],s=o.segments[a.s];e=o.uri.toString(),r=s.startByte,i=s.endByte}e&&(t.state=At.LOADING,t._dashRemote.startLoad({dispatchUrl:e,startByte:r,endByte:i}))};t._fragments&&t._fragments.length>0&&t._allowLoaded&&(e?r():(!n&&t.needLoadFrag_(t._readPos)&&(t._loadPos.f=t._readPos.f,t._loadPos.s=t._readPos.s,t._updateBufferTime()),t.state!==At.LOADING&&t.state!==At.ERROR&&(n||t.bufferTime_<t._maxBufferTimeLength&&t.needLoadFrag_(t._loadPos))&&r()))}},{key:"makeErrorContext_",value:function(e){var t,n=this,r=e.type,i=e.category;if("init"==r)n._initSegment.status=3;else{var a=this._fragments[e.f];a.status=3,n._preErrorData=a}switch(i){case"dispatcher-error":case"dispatcher-timeout":t=Ft.a.DATA_DASH_DISPATCH_ERROR;break;case"auth-error":t=Ft.a.DATA_AUTH_Error;break;case"cdn-error":t=Ft.a.DATA_DASH_ERROR;break;case"cdn-timeout":t=Ft.a.DATA_DASH_TIMEOUT;break;case"cdn-range-error":t=Ft.a.DATA_DASH_RANGE_ERROR}qe.a.log("".concat(n.LOG_TAG," ,data loading error ").concat(t)),n.state=At.ERROR,n.errorChange_(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,t))}},{key:"doRetryStage_",value:function(e){var t=this,n=0===t.bufferTime_?t._noBufferRetryCount:t._withBufferRetryCount,r=0===t.bufferTime_?t._noBufferMaxRetry:t._withBufferMaxRetry;qe.a.log("".concat(this.LOG_TAG," ,data loading failure, reload, bufferTime = ").concat(t.bufferTime_,", retry = ").concat(n,", max = ").concat(r)),"auth-error"==e.category?t.makeErrorContext_(e):0===t.bufferTime_?t._noBufferRetryCount>=t._noBufferMaxRetry?t.makeErrorContext_(e):(this._noBufferRetryCount++,this.reloadSingleSegment_()):t._withBufferRetryCount>=t._withBufferMaxRetry?t.makeErrorContext_(e):(this._withBufferRetryCount++,this.reloadSingleSegment_())}},{key:"reloadSingleSegment_",value:function(){this._dashRemote.reset(),this._dashRemote.dispatcher&&this._dashRemote.dispatcher.destroy(),this._dashRemote.cdnLaborer&&this._dashRemote.cdnLaborer.destroy(),this.loadFragment_(!0)}},{key:"dataLoadOk_",value:function(e){var t=this;t._noBufferRetryCount=0,t._withBufferRetryCount=0;var n=e.f,r=e.s,i=e.response,a=e.type,o=i.status,s=i.url,u=i.speed,c=new Uint8Array(i.data);qe.a.log("".concat(t.LOG_TAG,", loaded type = ").concat(a,", ").concat(r," of frag ").concat(n,", http-status/bytes/take(").concat(o,"/").concat(c.byteLength,"/").concat(i.netCost,"ms), ").concat(Object(Pt.a)(u),"/s ").concat(s));var l=null,d=null;if("init"==a){var f=t._initSegment;t._initSegmentData=c,f.status=2}else{var h=t._fragments[n],p=h.segments[r];if(t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,c),p.status=2,c.byteLength!==p.endByte-p.startByte)return qe.a.log("".concat(t.LOG_TAG,", loaded range error, bytes = ").concat(c.byteLength,", seg = ").concat(p.endByte-p.startByte)),void t.makeErrorContext_({category:"cdn-range-error",f:n,s:r,type:a});r==h.segments.length-1?(h.status=2,h.idx==t._fragments.length-1?t.state=At.END:(l=h.idx+1,d=-1)):(l=h.idx,d=r+1),t._updateBufferTime()}t.state!==At.END&&(t.state=At.IDLE),this.emit("DA"),"init"!==a&&null!==l&&null!==d&&e.f==t._loadPos.f&&e.s==t._loadPos.s&&t.state==At.IDLE&&t.findNextLoad_(l,d),t.loadFragment_()}},{key:"dataLoadFail_",value:function(e){var t=e.f,n=e.s,r=e.type;if("init"!==r&&(this._loadPos.f!==t||this._loadPos.s!==n))return this.state=At.IDLE,void qe.a.log("".concat(this.LOG_TAG," , data loading failure, not loadpos, pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s,", obj = ").concat(e.f,"-").concat(e.s));qe.a.log("".concat(this.LOG_TAG," ,data loading failure, type = ").concat(r,", pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s)),this.loaderConfig.doRetry?this.doRetryStage_(e):this.makeErrorContext_(e)}},{key:"dataLoadOnAbort_",value:function(e){var t=e.f,n=e.s,r=e.type;qe.a.log("".concat(this.LOG_TAG,": onAbort type = ").concat(r,", ").concat(t," -> ").concat(n));try{var i="init"==r?this._initSegment:this._fragments[t].segments[n];i.status=0,this._bufferPool.del(i.poolId),this.state!==At.ERROR&&(this.state=At.IDLE)}catch(a){}}},{key:"findNextLoad_",value:function(e,t){var n=this;if(this._prePos&&e>=this._prePos.f&&(e<this._prePos.rf||e==this._prePos.rf&&t>=this._prePos.s&&t<=this._prePos.rs))return this._prePos.f=e,void(this._prePos.s=t);this._prePos={f:e,s:t},this.findNextLoad__(e,t,(function(e,t,r){if(Object(yt.a)(n._prePos,{rf:e,rs:t}),n._loadPos.f=e,n._loadPos.s=t,r)n.state=At.END;else{var i=n._fragments[e];2==i.status&&(i.status=0),n.state==At.END&&(n.state=At.IDLE)}}))}},{key:"findNextLoad__",value:function(e,t,n){var r=!1,i=!1,a=this._fragments[e];a&&a.segments.length>0&&(t=t>=0?t:0,2==a.segments[t].status?t==a.segments.length-1?(a.status=2,a.idx==this._fragments.length-1?(i=!0,r=!0):this.findNextLoad__(e+1,-1,n)):this.findNextLoad__(a.idx,t+1,n):r=!0),r&&n(e,t,i)}},{key:"_updateBufferTime",value:function(){var e=[this._loadPos.f,this._loadPos.s,this._readPos.f,this._readPos.s].join("-");if(!this._currentBuf||this._currentBuf.pos!=e){for(var t=0,n=0,r=0,i=null,a=this._readPos.f,o=this._loadPos.f,s=a;s<=o&&0!=(i=this._fragments[s].segments).length;s++){var u=s==a?this._readPos.s:0,c=s==o?this._loadPos.s:i.length-1;s==a&&(r=i[u].startTime);for(var l=!1,d=u;d<=c;d++){if(2!=i[d].status){l=!0;break}t+=i[d].duration,n+=i[d].endByte-i[d].startByte}if(l)break}this._currentBuf={pos:e,info:{start:r,byteLength:n,timeLength:t}}}}},{key:"setReadPos_",value:function(e,t){this._readPos.f=e,this._readPos.s=t,this._updateBufferTime()}},{key:"errorChange_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._error=e,this.emit("ec",e)}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._loadPos.f<0||this._loadPos.s<0||this._loadPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,u=this._loadPos.f,c=0;c<o.length;c++)n=(r=o[c]).split("-"),e=parseInt(n[1],10),t=parseInt(n[2],10),e<s||e>u?this.gcSeg_(r,e,t):e==s&&e==u?(i=this._readPos.s,a=this._loadPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==u&&t>(a=this._loadPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t],i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}},{key:"tick_",value:function(){}},{key:"read",value:function(){var e=this,t=null;if(e._readPos.f<0||0==e._fragments.length)return null;if(e._readPos.f>=e._fragments.length&&(e.eof=!0),e.eof)return null;var n=e._fragments[e._readPos.f],r=e._readPos.s>-1&&n&&n.segments.length>0?n.segments[e._readPos.s]:null;return e.bufferTime_<5&&(3==n.status||4==n.status)&&(e._error||(e.errorChange_(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,Ft.a.DATA_DASH_ERROR)),qe.a.log("".concat(e.LOG_TAG," , read data error, create _error, readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s)))),r&&2===r.status&&(t={data:e._bufferPool.read(r.poolId),meta:{uid:"".concat(r.levelId,"-").concat(r.fragIdx,"-").concat(r.idx),fragIdx:n.idx,segIdx:r.idx,level:r.levelId,fragKey:r.fragKey,segment:r}},qe.a.log("".concat(e.LOG_TAG,", read data return tagdata,type=").concat(this._loaderType,", readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s,", startTime = ").concat(r.startTime,", endtime = ").concat(r.startTime+r.duration,", levelId=").concat(r.levelId,", byte.length = ").concat(t.data.byteLength,"\n\t\t\t, total = ").concat(r.endByte-r.startByte)),n.idx==e._fragments.length-1&&e._readPos.s==n.segments.length-1?e.eof=!0:e._readPos.s==n.segments.length-1?(n=e._fragments[n.idx+1],e.setReadPos_(n.idx,0)):e.setReadPos_(e._readPos.f,e._readPos.s+1)),e.bufferTime_<e._maxBufferTimeLength&&e.loadFragment_(),t}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this.errorChange_(),!this._preErrorData||3!=this._preErrorData.status&&4!=this._preErrorData.status||(this._preErrorData.status=0),this.resetReadPosByTime_(e),this.findNextLoad_(this._readPos.f,this._readPos.s),this.loadFragment_()}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findFIndexByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n&&r?{fragment:n,segment:r}:null}},{key:"getUnreadBufInfo",value:function(){return this._currentBuf&&this._currentBuf.info?{start:this._currentBuf.info.start,byteLength:this._currentBuf.info.byteLength,timeLength:this._currentBuf.info.timeLength}:{start:0,byteLength:0,timeLength:0}}},{key:"reset",value:function(){Ke()(Ze()(n.prototype),"reset",this).call(this),this._dashRemote.reset(),this._fragments.splice(0,this._fragments.length),this._readPos.f=this._readPos.s=-1,this._loadPos.f=this._loadPos.s=-1,this._currentBuf=null,this.state=At.IDLE,this._preErrorData=null,this._dashRemote.reset()}}]),n}(Rt),mn=gn,_n=n(657);function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var xn,kn,wn=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Sn=function(e){Ye()(n,e);var t=bn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:_n,watch:["manifest","loader"]}))).$TAG="DashLoader",r.mode=Le.CDN,r.loaderDataArrived_=!1,r.loaderBuff_=new ut,r.timeGap_=5,r.videoInitConfig_=null,r.audioInitConfig_=null,r.tickTimer_=new lt.a((function(){return r.tick_()})),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return He()(n,[{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo_().buffered;return(t.video||t.audio)&&(e.start=t.video.start,e.end=t.video.start+t.video.timeLength),e}},{key:"eof",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eof&&n.eof:i?e=t.eof:a&&(e=n.eof),e}},{key:"eod",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eod&&n.eod:i?e=t.eod:a&&(e=n.eod),e}},{key:"duration",get:function(){return this.$manifestArtifact?this.$manifestArtifact.duration:0}},{key:"$silenced",get:function(){return Ke()(Ze()(n.prototype),"$silenced",this)},set:function(e){Ge()(Ze()(n.prototype),"$silenced",e,this,!0);var t=this._videoLoader,r=this._audioLoader,i=this.$stream;t&&i.restrictor.hasVideo&&(t.silenced=e),r&&i.restrictor.hasAudio&&(r.silenced=e)}},{key:"timeGap",set:function(e){this.timeGap_=e}},{key:"fragments",get:function(){var e=this._videoLoader,t=this._audioLoader,n=this.$stream.restrictor,r=n.hasAudio,i=[];return n.hasVideo?i=e.fragments:r&&(i=t.fragments),i||[]}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=e.renderer,a=n&&!Object(dt.c)(n)&&this.$manifestArtifact!==n,o=this.$selfArtifact!==r,s=this.$rendererArtifact!==i;if(a&&(this.$manifestArtifact=n),s&&(this.$rendererArtifact=i),o&&(this.$selfArtifact=r),a){this.drainBufferPool();var u=t.playRanges,c=!1;for(var l in n.tracks){var d=n.tracks[l];if(d){var f=this.setTrackConfig(d,l);c=c||f}}if(c&&(t.restrictor.needSendInitSegment=!0),this.applyRanges(u),u.length>0){var h=u.start(0);this.seek(h)}}this.pumpLoader_(),Object(dt.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.tracks.video,r=t.tracks.audio;if(n){var i=Ot(n.fragments,e),a=i.fragments,o=i.segments;this._videoLoader.fragments=a,this._videoLoader.segments=o}if(r){var s=Ot(r.fragments,e),u=s.fragments,c=s.segments;this._audioLoader.fragments=u,this._audioLoader.segments=c}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"getInitData_",value:function(e){var t,n,r,i=this._audioLoader,a=this.audioInitConfig_,o=this._videoLoader,s=this.videoInitConfig_,u=null;switch(e){case 2:n=i,u=a,t=new ft.a(2),r="audio";break;case 1:u=s,n=o,t=new ft.a(1),r="video";break;default:return}var c=n.initSegmentData;if(c){var l=u,d=l.codec,f=l.mimeType;return t.bytesArray=[c],t.container=f,t.codec=d,qe.a.log("".concat(this.LOG_TAG," ").concat(r," initSegment, codec=").concat(d,", mimeType=").concat(f,", length=").concat(c.byteLength)),t}}},{key:"pumpLoader_",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(Object(dt.c)(n)||!Object(dt.c)(r)&&null!=r||!this.loaderDataArrived_||this.eof||null!=i&&!i.expectingBuffer||0===this.buffer.len&&this.error))if(this.read_(),e.restrictor.consumable){var a=e.restrictor.consume();this.noticeDataPump(!0),this.$provideArtefact(a)}else this.noticeDataPump(!1)}},{key:"checkCDNBuffer_",value:function(){var e=this._videoLoader,t=this._audioLoader,n=this.timeGap_,r=this.$stream;if(r.restrictor.hasAudio&&t&&r.restrictor.hasVideo&&e){var i=e.initSegmentData,a=t.initSegmentData,o=e.getUnreadBufInfo().timeLength,s=t.getUnreadBufInfo().timeLength,u=!a||s<n,c=!i||o<n;e.allowLoaded=c||!u,t.allowLoaded=u||!c}}},{key:"getUnreadBufInfo_",value:function(){var e=null,t=null;return this._videoLoader&&(e=this._videoLoader.getUnreadBufInfo()),this._audioLoader&&(t=this._audioLoader.getUnreadBufInfo()),{buffered:{video:e,audio:t}}}},{key:"setTrackConfig",value:function(e,t){var n,r=this,i=this.$stream,a=e.initSegment,o=e.codec,s=e.mimeType,u="video"===t?this._preVideoInit:this._preAudioInit;return(!u||u!=a)&&((n=new mn(this.$krt,t)).on("ec",(function(e){r.$throwError(e)})).on("DA",(function(e){r._onLoaderDataArrived()})),n.silenced=this.$silenced,n.initSegment=a,"video"===t?(this._preVideoInit=a,this._videoLoader=n,this.videoInitConfig_={codec:o,mimeType:s},i.restrictor.hasVideo=!0):(this._preAudioInit=a,this._audioLoader=n,this.audioInitConfig_={codec:o,mimeType:s},i.restrictor.hasAudio=!0),!0)}},{key:"tick_",value:function(){this.checkCDNBuffer_()}},{key:"findPieceAt",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this._videoLoader,n=this._audioLoader,r=this.$stream,i=r.restrictor,a=i.hasAudio,o=i.hasVideo;return o?t.findSegmentByPTS(e):a?n.findSegmentByPTS(e):{fragment:null,segment:null}}},{key:"seek",value:function(e){arguments.length>1&&undefined,arguments.length>2&&undefined;Ke()(Ze()(n.prototype),"seek",this).call(this,e);var t=this.$stream;[{type:"video",exist:t.restrictor.hasVideo,loader:this._videoLoader},{type:"audio",exist:t.restrictor.hasAudio,loader:this._audioLoader}].forEach((function(t){var n=t.type,r=t.exist,i=t.loader;if(r){var a=e;Object(dt.f)(e)&&(a=e[n]),i.seek(a)}})),this.pumpLoader_()}},{key:"read_",value:function(){var e=this.$stream,t=e.restrictor,n=t.hasAudio,r=t.hasVideo;if(t.needSendInitSegment){var i;n&&(i=this.getInitData_(2))&&(e.restrictor.audioInitSegment=i),r&&(i=this.getInitData_(1))&&(e.restrictor.videoInitSegment=i)}else{var a=this.readCDN_();if(a)for(var o in a){var s=a[o];if(s){var u=s.contentType,c=s.bytes,l=s.segment.startTime,d=s.segment.duration;if("video"===u){var f=new ht.a(1);f.bytesArray=[c],f.startTime=l,f.duration=d,e.restrictor.videoMediaSegments.push(f)}else if("audio"===u){var h=new ht.a(2);h.bytesArray=[c],h.startTime=l,h.duration=d,e.restrictor.audioMediaSegments.push(h)}}}}}},{key:"readCDN_",value:function(){var e,t,n=this._audioLoader,r=this._videoLoader,i=this.$stream.restrictor,a=i.hasAudio,o=i.hasVideo,s=!1,u=!1;if(a&&o){var c=n.buffer.start,l=r.buffer.start;c-l>this.timeGap_?s=!0:l-c>this.timeGap_?u=!0:s=u=!0}else s=o,u=a;if(u&&!this._audioLoader.eof){var d=this._audioLoader.read();d&&(t={contentType:"audio",bytes:d.data,segment:d.meta.segment})}if(s&&!this._videoLoader.eof){var f=this._videoLoader.read();f&&(e={contentType:"video",bytes:f.data,segment:f.meta.segment})}return e||t?{video:e||null,audio:t||null}:null}},{key:"drainBufferPool",value:function(){var e=this.$stream.restrictor;e&&(this._videoLoader&&e.hasVideo&&this._videoLoader.drainBufferPool(),this._audioLoader&&e.hasAudio&&this._audioLoader.drainBufferPool())}},{key:"reset",value:function(){this._videoLoader&&this._videoLoader.reset(),this._audioLoader&&this._audioLoader.reset()}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this._videoLoader&&this._videoLoader.destroy(),this._audioLoader&&this._audioLoader.destroy(),delete this._audioLoader,delete this._videoLoader}}]),n}(ct);wn([nt.c],Sn.prototype,"fragments",null),wn([nt.c],Sn.prototype,"findPieceAt",null),(kn=xn||(xn={}))[kn.UNKNOWN=-1]="UNKNOWN",kn[kn.HLS=0]="HLS",kn[kn.JDASH=1]="JDASH",kn[kn.F4V=2]="F4V",kn[kn.FLV=2]="FLV",kn[kn.MP4=3]="MP4",kn[kn.AMP4=4]="AMP4",kn[kn.DASH_VP9=5]="DASH_VP9",kn[kn.DASH_AV1=6]="DASH_AV1";var Tn=function(){function e(t){Ue()(this,e),this.range=[],this.pieces=[],this.fragment=null,this.fragIdx=null,this.uri=null,this.rangeMode=1,this.buffer=null,this.loaderConfig=null,this.loaderConfig=t.loaderConfig,this.fragment=t.frag,this.fragIdx=t.fragIdx,this.range=t.range,this.buffer=t.bufferInfo,this.rangeMode=t.rangeMode!==undefined&&null!==t.rangeMode?t.rangeMode:this.rangeMode;var n=this.pieces;if(this.fragment.segments.length>0)for(var r=this.fragment.segments,i=this.range[0],a=this.range[1],o=i;o<=a;o++)n.push(r[o]);else n.push(this.fragment.header);if(n.length>0){var s=n[0];this.uri=s.uri}}return He()(e,[{key:"destroy",value:function(){this.pieces.splice(0,this.pieces.length),this.range.splice(0,this.range.length),this.loaderConfig=null,this.fragment=null,this.fragIdx=null,this.uri=null,this.buffer=null}}]),e}();function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var En=function(e){Ye()(n,e);var t=Pn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.poolId="",r.fragKey="",r.__qde=!1,r.__qdp=null,r.__urlStr=null,r.filename=null,r.type=e,r}return He()(n,[{key:"uri",get:function(){return null===this.__urlStr&&this.__qdp&&(this.__urlStr=this.__qdp(),this.__qdp=null),this.uri_},set:function(e){this.uri_=e}},{key:"__url",get:function(){return null===this.__urlStr&&this.__qdp&&(this.__urlStr=this.__qdp(),this.__qdp=null),this.__urlStr}}]),n}(function(){function e(){Ue()(this,e),this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri_=null,this.idx=null,this.fragIdx=null}return He()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}},{key:"uri",get:function(){return this.uri_},set:function(e){this.uri_=e}}]),e}());function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var In=function(e){Ye()(n,e);var t=An(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e,r)).TAG="flvSegmentsLoader",i.splicePTS=!1,i.skipErrorFrag=!1,i._fragments=[],i._uriRemote=new dn(i.krt),i._tempResetTime=-1,i._preLoadFIdx=-1,i._readPos={f:-1,s:-1},i._downPos={f:-1,s:-1,e:-1},i._allowFusion=!1,i.ipc.on("headerComplete",i.initSegs.bind(zt()(i))),i}return He()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e}},{key:"applyRanges",value:function(e){var t=Ot(this._fragments,e).fragments;this._playRanges=e,this.fragments=t}},{key:"addFragment",value:function(e){var t=this.fragments;if(t.length>0){var n=t[t.length-1];e.startTime=n.endTime,e.idx=n.idx+1}t.push(e),this.eof&&(this.eof=!1),this.eod&&(this.eod=!1,this.moveToNextDownPosOrEOD_()),qe.a.log("".concat(this.LOG_TAG," addfragment, length=").concat(this._fragments.length))}},{key:"creatUUID",value:function(){this._uuid=vt.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,u={start:s,byteLength:a,timeLength:o};if(0==e.length||r<0)return u;if(this.eof){if(e.length>0){var c=e[e.length-1];u.start=c.endTime}}else{var l=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===l)return this._lastBufInf;for(var d=r,f=!0,h=null;d<=t;d++){var p=e[d];if(p.segments&&p.segments.length>0&&3!=p.status&&4!=p.status){var v=p.segments,y=d===r?i:0,g=d===t?n:v.length-1;d===r&&(s=v[i].startTime);for(var m=y;m<=g;m++){var _=v[m];if(_.enabled){var b=this._bufferPool.read(_.poolId);if(b)f&&(f=!1,h=_.startTime),null!==h&&(a+=b.byteLength,o=_.endTime-h);else if(!(d===t&&m===g)){var x="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(_.poolId,", ").concat(_.fragIdx,", ").concat(_.idx,", ").concat(_.uri.toString(),", ").concat(_.levelId,", ").concat(_.flattenIdx,"}, ").concat(_.levelId,", ").concat(_.startByte,", ").concat(_.startTime);throw qe.a.error(x),new Error(x)}}}}}u.start=s,u.byteLength=a,u.timeLength=o,this._lastBufPos=l,this._lastBufInf=u}return u}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var n=this._readPos.s>-1?t.segments[this._readPos.s]:null;return n&&!n.enabled?(this.moveToNextReadPosOrEOF_(t,n),null):n&&2!==n.status?null:(n&&(e={type:xn.FLV,data:this._bufferPool.read(n.poolId),done:!0,meta:{uid:"".concat(n.levelId,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:t.idx,segIdx:n.idx,vac:t.additional,fragKey:n.fragKey,byteOffset:n.startByte}},qe.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(n.startTime,", endTime=").concat(n.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,n)),e)}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e)}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),n=t.fragment,r=t.segment;if(!n)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(n,")"));0==n.segments.length&&(this._tempResetTime=e);var i=n.idx,a=r?r.idx:0;this._readPos.f=i,this._readPos.s=a,this._downPos.f=i,this._downPos.s=a,this._downPos.e=this._downPos.s;var o=this.findPieceByPos_(this._downPos).segment;o&&2===o.status&&this.moveToNextDownPosOrEOD_(),qe.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===At.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findIdxByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n?{fragment:n,segment:r}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,n=-1,r=this._fragments.length,i=r>0?this._fragments[r-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==r-1&&e==i.endTime)){t=a,this._fragments[a].segments.length>0&&(n=this.findSegIdxByTime_(a,e));break}return{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=Ct(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){var n=Ct(this._fragments[e].segments,(function(e){return e.endByte<=t?1:e.startByte>t?-1:0}));return n?n.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.error&&this._fragments&&0!==this._fragments.length){var e=this.getUnreadBufInfo();this.state===At.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e)}}},{key:"decideLoadEndPos_",value:function(){var e=this._downPos.f,t=this._downPos.s,n=t;if(t>2)if(this._allowFusion){var r=this._fragments[e].segments,i=r[t],a=r[r.length-1];if(i){var o=this.loaderConfig.keyframesFusionSize,s=i.startByte+o;if(s>=a.endByte)n=a.idx;else{var u=this.findSegIdxByByte_(e,s);-1!==u&&(n=u)}}}else this._allowFusion=!0;return n}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(!(0==n.segments.length&&2==n.header.status||r&&2==r.status||2==n.status)){this._preLoadFIdx!==n.idx&&this.skipErrorFrag&&(this.emit("FLS",n),this._preLoadFIdx=n.idx);var i=new Tn({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:0,loaderConfig:this.loaderConfig});qe.a.log("".concat(this.LOG_TAG,": load task ").concat(i.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(n.levelId)),this.loadContiguousSegments_(i)}}},{key:"loadContiguousSegments_",value:function(e){var t=this,n=e.pieces,r=e.fragIdx,i=e.loaderConfig,a=this._eventManager,o=this._uriRemote,s=this,u=this._fragments[r],c=this._fragments.length,l=0==u.segments.length;s.state=At.LOADING;a.removeAll(),a.on(o,"PG",(function(e,t){})),a.on(o,"SC",(function(e){var i=e.bytes,a=-1,o=-1;if(l||(a=n[0].idx,o=n[n.length-1].idx),qe.a.log("".concat(s.LOG_TAG,": load ok, header:").concat(l,", seg ").concat(a,"-").concat(o," of frag ").concat(r,"->[0,").concat(c-1,"]")),l)u.header.status=2,s.state=At.IDLE,t.ipc.emit("flvHeader",{bytes:i,meta:{fragIdx:r,header:!0,uid:"".concat(u.header.levelId,"-").concat(r,"-header")}});else{for(var d=u.segments[a].startByte,f=!1,h=a;h<=o;h++){var p=u.segments[h];if(!t._bufferPool.read(p.poolId)){var v=p.startByte-d,y=p.endByte-d,g=i.subarray(v,y);t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,g),f=!0}p.status=2}s.state=At.IDLE,s.moveToNextDownPosOrEOD_(),f&&t.emit("DA")}})),a.on(o,"FL",(function(n){if(t.skipErrorFrag)t.state=At.IDLE,u.status=3,qe.a.log("".concat(s.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(n),", errorPos=").concat(JSON.stringify(t._downPos))),s.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,Ft.a.DATA_AD_ERROR),!1),t.moveToNextDownPosOrEOD_();else{var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e):i.doRetry?r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t.doFinalError_(n,e)}})),a.on(o,"AB",(function(){var e=-1,t=-1;if(!l){e=n[0].idx,t=n[n.length-1].idx;for(var i=e;i<=t;i++){var a=u.segments[i];a.status=0,s._bufferPool.del(a.poolId)}}qe.a.log("".concat(s.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(r,", header=").concat(l)),s.state!==At.ERROR&&(s.state=At.IDLE)})),a.on(o,"DP",(function(e){s.doDNSParser(e)})),o.startLoad(e)}},{key:"initSegs",value:function(e){if(0!=e.keyframePositions.length&&0!=e.keyframeTimes.length){var t=e.meta,n=t.fragIdx,r=t.uid,i=this._fragments[n],a="".concat(i.header.levelId,"-").concat(n,"-header");if(i.segments.length>0||r!==a)qe.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(i.segments.length,", cuid=").concat(a,", uid=").concat(r));else{i.additional={ac:e.ac,vc:e.vc,naluSizeLength:e.naluSizeLength},i.duration=e.duration;var o=e.keyframePositions.join(","),s=e.keyframeTimes.join(","),u=0;this.splicePTS&&(u=i.startTime);for(var c=e.keyframePositions,l=e.keyframeTimes,d=0,f=0,h=0,p=0,v=e.filesize,y=2;y<=c.length;y++){y<c.length?(h=c[y-1],p=c[y],d=0==l[y-1]?0:l[y-1],f=0==l[y]?0:l[y]):(h=c[y-1],p=v-1,d=l[y-1],f=this.splicePTS?e.duration:i.endTime);var g=new En(xn.FLV);g.uri=new bt.a(i.uri.toString()),g.idx=y-2,g.startTime=u+d,g.duration=f-d,g.startByte=h,g.endByte=p,g.poolId="flv-"+this._uuid+"-"+i.idx+"-"+g.idx,g.fragIdx=i.idx,g.fragKey=i.key,g.levelId=i.levelId,i.segments.push(g)}qe.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(o,", keyframeTimes=").concat(s,",fid=").concat(a,", segs = ").concat(i.segments.length,", levelId=").concat(i.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),this._tempResetTime>=0&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,n=0;n<t;n++){var r=this._fragments[n];e&&(0==r.segments.length?(r.duration=r.endTime-e.endTime,r.startTime=e.endTime):r.startTime=e.endTime),e=r}}},{key:"doFinalError_",value:function(e,t){var n=this,r=e.category,i=e.statusCode,a=t.fragIdx,o=t.pieces,s=n._fragments[a],u=0===s.segments.length;if(!u&&o.length>0)for(var c=0;c<o.length;c++)o[c].status=3;s.status=3,n.state=At.ERROR;var l=Ft.a.UNKNOWN;switch(r){case"auth-error":l=Ft.a.DATA_AUTH_Error;break;case"cdn-error":l=Ft.a.DATA_FLV_ERROR;break;case"cdn-timeout":l=Ft.a.DATA_FLV_TIMEOUT;break;case"dispatcher-error":case"dispatcher-timeout":l=Ft.a.DATA_FLV_DISPATCH_ERROR;break;default:n.state!==At.ERROR&&(n.state=At.IDLE)}l==Ft.a.UNKNOWN&&n.state!==At.ERROR?n.state=At.IDLE:this.error||n.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,l,i));var d="no-segment";if(!u){var f=o[0].idx,h=o.length>0&&!u?o[o.length-1].idx:f;d="seg: ".concat(f,"-").concat(h)}qe.a.log("".concat(n.LOG_TAG,": load finalError, ").concat(d," of ").concat(a,", header=").concat(u,", type=").concat(l))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),qe.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,u=this._downPos.f,c=0;c<o.length;c++)n=(r=o[c]).split("-"),e=parseInt(n[2],10),t=parseInt(n[3],10),e<s||e>u?this.gcSeg_(r,e,t):e==s&&e==u?(i=this._readPos.s,a=this._downPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==u&&t>(a=this._downPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t];if(r.segments.length>0){var i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&t.segments.length>0&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,n=e.segment,r=t.idx,i=n?n.idx:0,a=this._fragments.length,o=undefined,s=-1,u=-1,c=r;c<a;c++){var l=this._fragments[c],d=l.segments.length;if(3==l.status||4==l.status){if(!this.skipErrorFrag){o=!0;break}}else{if(0==d){s=l.idx,u=0;break}for(var f=!1,h=c==r?i+1:0;h<d;h++){var p=l.segments[h];if(p.enabled&&0==p.status){s=l.idx,u=h,f=!0;break}}if(f)break}}if(s>=0)this._downPos.f=s,this._downPos.s=u,this._downPos.e=this._downPos.s;else if(!o){var v=this._fragments[this._fragments.length-1];this._downPos.f=v.idx,this._downPos.s=v.segments.length>0?v.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=At.END}}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var n=e.idx,r=t.idx,i=this._fragments.length,a=-1,o=-1,s=!1;if(i>0){var u=this._fragments[i-1];u.segments.length>0&&u.segments[u.segments.length-1].enabled&&(s=!0);for(var c=n;c<i;c++){var l=this._fragments[c],d=l.segments.length;if(3==l.status||4==l.status||0==d){a=l.idx,o=0;break}for(var f=!1,h=c==n?r+1:0;h<d;h++){if(l.segments[h].enabled){a=l.idx,o=h,f=!0;break}}if(f)break}}a>=0?(this._readPos.f=a,this._readPos.s=o):s&&(this.eof=!0,qe.a.info("".concat(this.LOG_TAG,": EOF")))}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==At.IDLE&&(this.state===At.LOADING?this.abort_():this.state=At.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),Ke()(Ze()(n.prototype),"destroy",this).call(this)}}]),n}(Rt),Dn=n(658);function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var On=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Rn=function(e){Ye()(n,e);var t=Ln(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Dn,watch:["manifest","loader"]}))).$TAG="FlvLoader",r.mode=Le.CDN,r.chunkMode=!0,r.loaderDataArrived_=!1,r.loader_=new In(r.$krt,r.$ipc),r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})).on(r.loader_,"FLS",(function(e){r.emit("FLS",e)})),r}return He()(n,[{key:"$silenced",get:function(){return Ke()(Ze()(n.prototype),"$silenced",this)},set:function(e){Ge()(Ze()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"adjustTimestampMode",set:function(e){this.loader_.splicePTS=e,Ge()(Ze()(n.prototype),"adjustTimestampMode",e,this,!0)}},{key:"skipErrorMode",set:function(e){this.loader_.skipErrorFrag=e,e&&(this.loader_.loaderConfig=new Dt({doRetry:!1,retryNum:1,allowIPDispatch:!1,ipMaxRetry:0,timeout:5e3})),Ge()(Ze()(n.prototype),"skipErrorMode",e,this,!0)}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=n&&!Object(dt.c)(n)&&this.$manifestArtifact!==n;if(this.$selfArtifact!==r&&(this.$selfArtifact=r),i){var a=this.chunkDataDone;if(n.other&&(this.chunkDataDone=n.other.done),qe.a.log("".concat(this.LOG_TAG," manifest changed, done=").concat(this.chunkDataDone,", fragments=").concat(n.fragments.length,", levelId=").concat(n.levelId)),a){if(this.$manifestArtifact=n,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=n.fragments,this.applyRanges(t.playRanges),t.playRanges.length>0){var o=t.playRanges.start(0);this.seek(o)}}else if(n.fragments.length>0){for(var s=0;s<n.fragments.length;s++)this.loader_.addFragment(n.fragments[s]);this.applyRanges(t.playRanges)}}this.pumpLoader_(),Object(dt.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;if(!(Object(dt.c)(e)||!Object(dt.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error)){var n=this.loader_.read(),r=n&&!!n.data;this.noticeDataPump(r),r&&this.$provideArtefact(n)}}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(ct);On([nt.c],Rn.prototype,"fragments",null),On([nt.c],Rn.prototype,"findPieceAt",null);n(343);function Cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}function Mn(e,t){return parseFloat(e+"."+t)}var Bn=function(e){Ye()(n,e);var t=Cn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,e)).TAG="hlsSegmentsLoader",r._fragments=[],r._segments=[],r._hlsRemote=new dn(r.krt),r._readPos={f:-1,s:-1,b:-1},r._downPos={f:-1,s:-1,b:-1},r}return He()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragsWithSegs",set:function(e){this.eof=!1,this.eod=!1,this._fragments=e.frags,this._segments=e.segs}},{key:"fragments",get:function(){return this._fragments}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,u={start:s,byteLength:a,timeLength:o};if(0===e.length||r<0)return u;if(this.eof){if(e.length>0){var c=e[e.length-1];u.start=c.endTime}}else{var l=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===l)return this._lastBufInf;for(var d=r,f=!0,h=null;d<=t;d++){var p=e[d];if(p){var v=p.segments,y=d===r?i:0,g=d===t?n:v.length-1;d===r&&(s=v[i].startTime);for(var m=y;m<=g;m++){var _=v[m];if(_.enabled){var b=this._bufferPool.read(_.poolId);if(b)a+=b.byteLength,o+=_.duration,f&&(f=!1,h=_.startTime),null!==h&&(a+=b.byteLength,o=_.endTime-h);else if(!(d===t&&m===g)){var x="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(_.poolId,", ").concat(_.fragIdx,", ").concat(_.idx,", ").concat(_.uri.toString(),", ").concat(_.levelId,", ").concat(_.flattenIdx,"}, ").concat(_.levelId,", ").concat(_.startByte,", ").concat(_.startTime);throw qe.a.error(x),new Error(x)}}}}}u.start=s,u.byteLength=a,u.timeLength=o,this._lastBufPos=l,this._lastBufInf=u}return u}},{key:"read",value:function(){if(this.eof)return null;var e=this.findPieceByPos_(this._readPos),t=e.fragment,n=e.segment;if(!n)return null;if(!n.enabled)return this.moveToNextReadPosOrEOF_(),null;if(1!==n.status&&2!==n.status)return this.tryToSyncReadAndDownPos_(),null;var r=this._fragments.length,i=this._segments.length,a=this._readPos.f,o=this._readPos.s,s=this._readPos.b,u=n.startByte+s,c=this._bufferPool.read(n.poolId),l=null,d=!1,f=n.levelId;return s>=c.byteLength?l=null:(qe.a.log("".concat(this.LOG_TAG,": Read seg ").concat(n.poolId,", flatten idx ").concat(n.flattenIdx,"->[0,").concat(i-1,"] & inner seg idx ").concat(o,"->[0,").concat(t.segments.length-1,"] of frag ").concat(a,"->[0,").concat(r-1,"], status:").concat(n.status,", level:").concat(f,", start/duration(").concat(n.startTime.toFixed(3),"/").concat(n.duration.toFixed(3),"), bytes:").concat(n.endByte-n.startByte)),l=c.subarray(s,c.byteLength)),1===n.status?this._readPos.b=c.byteLength:2===n.status&&(d=!0,this.moveToNextReadPosOrEOF_()),{type:xn.HLS,data:l,done:d,meta:{uid:"".concat(f,"-").concat(a,"-").concat(o),level:f,fragIdx:a,segIdx:o,fragKey:n.fragKey,byteOffset:u,range:[s,c.byteLength]}}}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this._withBufferRetryCount=0,this._noBufferRetryCount=0;var t=this.findSegmentByPTS(e),r=t.fragment,i=t.segment;if(r&&i){var a=Mn(r.idx,i.idx),o=Mn(this._readPos.f,this._readPos.s),s=Mn(this._downPos.f,this._downPos.s),u=a>=o&&a<=s;this._readPos.f=r.idx,this._readPos.s=i.idx,this._readPos.b=0,this._downPos.f=r.idx,this._downPos.s=i.idx,this._downPos.b=0,2===this.findPieceByPos_(this._downPos).segment.status&&this.moveToNextDownPosOrEOD_(),u||this.state!==At.LOADING||this.abort_(),this.tick_()}else qe.a.error("Mismatch candidate pts/frag/segment(".concat(e,"/").concat(r,"/").concat(i,")"))}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findPieceByPTS_(e,this._fragments),n=null;return t&&(n=this.findPieceByPTS_(e,t.segments)),{fragment:t,segment:n}}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:Ct(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.krt.error&&this._segments&&0!==this._segments.length&&this.state===At.IDLE){var e=this.getUnreadBufInfo();if(e.timeLength>this._maxBufferTimeLength)return;this.checkLoad_(e)}}},{key:"checkLoad_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(n&&r){var i=new Tn({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this._downPos.s],bufferInfo:e,loaderConfig:this.loaderConfig});this.loadSingleSegment_(i)}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"loadSingleSegment_",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=e.pieces,i=e.fragIdx,a=e.buffer,o=this,s=r[0],u=this._fragments[i],c=this._fragments.length;if(!n){if(1===s.status)return;if(2===s.status)return}o.state=At.LOADING;var l=function(e,t){},d=function(e){var t=e.bytes,n="seg ".concat(s.idx,"->[0,").concat(u.segments.length-1,"]"),r="frag ".concat(i,"->[0,").concat(c-1,"]");o._bufferPool.del(s.poolId),o._bufferPool.add(s.poolId,t),s.status=2,qe.a.log("".concat(o.LOG_TAG,": Loaded ").concat(s.poolId,", ").concat(n," of ").concat(r)),o.isCurrentDownSeg_(s)&&o.moveToNextDownPosOrEOD_(),o.state!==At.ERROR&&(o.state=At.IDLE),o.emit("DA")},f=function(n){var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e,s):r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s)},h=function(){var e="seg ".concat(s.idx,"->[0,").concat(u.segments.length-1,"]"),t="frag ".concat(i,"->[0,").concat(c-1,"]");qe.a.log("".concat(o.LOG_TAG,": onAbort ").concat(e," of ").concat(t,", buffer ").concat(a.timeLength,"s")),s.status=0,o._bufferPool.del(s.poolId),o.state!==At.ERROR&&(o.state=At.IDLE)},p=function(e){o.doDNSParser(e)};this._eventManager.removeAll(),this._eventManager.on(this._hlsRemote,"PG",l),this._eventManager.on(this._hlsRemote,"SC",d),this._eventManager.on(this._hlsRemote,"FL",f),this._eventManager.on(this._hlsRemote,"AB",h),this._eventManager.on(this._hlsRemote,"DP",p),this._hlsRemote.startLoad(e)}},{key:"isCurrentDownSeg_",value:function(e){return!!e&&e.idx===this._downPos.s&&e.fragIdx===this._downPos.f}},{key:"doFinalError_",value:function(e,t,n){var r=this,i=e.category,a=e.statusCode,o=t.fragIdx,s=r._fragments[o],u=r._fragments.length;switch(i){case"cdn-error":case"dispatcher-error":case"auth-error":if(r.isCurrentDownSeg_(n)){n.status=3,r.state=At.ERROR,qe.a.log("".concat(r.LOG_TAG,": onError: ").concat(n.fragIdx,"-").concat(n.idx));var c=Ft.a.UNKNOWN;switch(i){case"cdn-error":c=Ft.a.DATA_HLS_CDN_ERROR;break;case"auth-error":c=Ft.a.DATA_AUTH_Error;break;case"dispatcher-error":c=Ft.a.DATA_HLS_DISPATCH_ERROR}r.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,c,a))}else{var l="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),d="frag ".concat(o,"->[0,").concat(u-1,"]");qe.a.error("".concat(r.LOG_TAG,": onError ").concat(l," of ").concat(d,", buffer ").concat(t.buffer.timeLength,"s"))}break;case"cdn-timeout":case"dispatcher-timeout":if(r.isCurrentDownSeg_(n))n.status=4,r.state=At.ERROR,qe.a.log("".concat(r.LOG_TAG,": onTimeout: ").concat(n.fragIdx,"-").concat(n.idx)),r.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,"cdn-timeout"===i?Ft.a.DATA_HLS_CDN_TIMEOUT:Ft.a.DATA_HLS_DISPATCH_TIMEOUT));else{var f="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),h="frag ".concat(o,"->[0,").concat(u-1,"]");qe.a.error("".concat(r.LOG_TAG,": onTimeout ").concat(f," of ").concat(h,", buffer ").concat(t.buffer.timeLength,"s"))}break;default:r.state!==At.ERROR&&(r.state=At.IDLE)}}},{key:"getNextAvailableSegByFlatten_",value:function(e){var t=this._segments[e];return t?t.enabled?t:this.getNextAvailableSegByFlatten_(e+1):null}},{key:"moveToNextDownPosOrEOD_",value:function(){var e=this.findPieceByPos_(this._downPos).segment,t=this.getNextAvailableSegByFlatten_(e.flattenIdx+1);t?(this._downPos.f=t.fragIdx,this._downPos.s=t.idx,this._downPos.b=0,2===t.status&&this.moveToNextDownPosOrEOD_()):this.state=At.END}},{key:"moveToNextReadPosOrEOF_",value:function(){var e=this._fragments,t=e[this._readPos.f].segments[this._readPos.s],n=e[e.length-1],r=n.segments.length>0&&n.segments[n.segments.length-1].enabled,i=this.getNextAvailableSegByFlatten_(t.flattenIdx+1)||this._segments[t.flattenIdx+1];i?(this._readPos.f=i.fragIdx,this._readPos.s=i.idx,this._readPos.b=0):r&&(this.eof=!0,qe.a.log("".concat(this.LOG_TAG,": EOF")))}},{key:"reloadSingleSegment_",value:function(e){this._hlsRemote.reset(),this._hlsRemote.dispatcher&&this._hlsRemote.dispatcher.destroy(),this._hlsRemote.cdnLaborer&&this._hlsRemote.cdnLaborer.destroy(),this.loadSingleSegment_(e,!0)}},{key:"abort_",value:function(){this._hlsRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0))for(var e=this._fragments[this._readPos.f].segments[this._readPos.s].flattenIdx,t=this._fragments[this._downPos.f].segments[this._downPos.s].flattenIdx,n=this._segments,r=this._bufferPool,i=r.keys,a=0;a<i.length;a++){var o=i[a],s=o.split("-"),u=parseInt(s[1],10),c=parseInt(s[2],10),l=this._fragments[u];if(l){var d=l.segments[c];if(d){var f=d.flattenIdx;if(f<e||f>t)n[f].status=0,r.del(o)}else r.del(o)}else r.del(o)}}},{key:"tryToSyncReadAndDownPos_",value:function(){var e=!1;(this._readPos.f>this._downPos.f||this._readPos.s>this._downPos.s)&&(e=!0),e&&(this._downPos.f=this._readPos.f,this._downPos.s=this._readPos.s,this._downPos.b=0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._readPos.f=this._readPos.s=this._readPos.b=-1,this._downPos.f=this._downPos.s=this._downPos.b=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==At.IDLE&&(this.state===At.LOADING?this.abort_():this.state=At.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._hlsRemote.reset(),Ke()(Ze()(n.prototype),"destroy",this).call(this)}}]),n}(Rt),Nn=n(659);function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var qn=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},jn=function(e){Ye()(n,e);var t=Fn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Nn,watch:["manifest","loader"]}))).mode=Le.CDN,r.rangeTSTolerance_=0,r.maxSegmentSearchTolerance_=0,r.loaderDataArrived_=!1,r.loader_=new Bn(e.runtime),r.rangeTSTolerance_=r.$krt.conf.hlsRangeTSTolerance,r.maxSegmentSearchTolerance_=r.$krt.conf.hlsMaxSegmentSearchTolerance,r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})),r}return He()(n,[{key:"$silenced",get:function(){return Ke()(Ze()(n.prototype),"$silenced",this)},set:function(e){Ge()(Ze()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=t&&!Object(dt.c)(t)&&this.$manifestArtifact!==t,i=this.$selfArtifact!==n;if(r&&(this.$manifestArtifact=t),i&&(this.$selfArtifact=n),r){this.loader_.drainBufferPool();var a=this.$stream.playRanges;if(this.applyRanges(a),a.length>0){var o=a.start(0);this.seek(o)}}this.pumpLoader_(),Object(dt.c)(t)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.isAccurateTimestamp;this.maxSegmentSearchTolerance_=n?0:this.$krt.conf.hlsMaxSegmentSearchTolerance,this.rangeTSTolerance_=n?0:this.$krt.conf.hlsRangeTSTolerance;var r=Ot(t.fragments,e,0,1),i=r.fragments,a=r.segments;this.loader_.fragsWithSegs={frags:i,segs:a,isAccurateTimestamp:n}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.loader_,t=this.$manifestArtifact,n=this.$selfArtifact;if(!(Object(dt.c)(t)||!Object(dt.c)(n)&&null!=n||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&e.error)){var r=e.read(),i=r&&!!r.data;this.noticeDataPump(i),i&&this.$provideArtefact(r)}}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(ct);function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}qn([nt.c],jn.prototype,"fragments",null),qn([nt.c],jn.prototype,"findPieceAt",null);var Vn=function(e){Ye()(n,e);var t=Un(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e,r)).TAG="mp4SegmentsLoader",i.ForeToleranceTime=.25,i.splicePTS=!1,i.skipErrorFrag=!1,i._fragments=[],i._uriRemote=new dn(i.krt),i._tempResetTime=-1,i._preLoadFIdx=-1,i._readPos={f:-1,s:-1},i._downPos={f:-1,s:-1,e:-1},i._allowFusion=!1,i.ipc.on("headerComplete",i.initSegs.bind(zt()(i))),i}return He()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e}},{key:"applyRanges",value:function(e){var t=Ot(this._fragments,e,this.ForeToleranceTime).fragments;this._playRanges=e,this.fragments=t}},{key:"creatUUID",value:function(){this._uuid=vt.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,u={start:s,byteLength:a,timeLength:o};if(0==e.length||r<0)return u;if(this.eof){if(e.length>0){var c=e[e.length-1];u.start=c.endTime}}else{var l=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===l)return this._lastBufInf;for(var d=r,f=!0,h=null;d<=t;d++){var p=e[d];if(p.segments&&p.segments.length>0&&3!=p.status&&4!=p.status){var v=p.segments,y=d===r?i:0,g=d===t?n:v.length-1;d===r&&(s=v[i].startTime);for(var m=y;m<=g;m++){var _=v[m];if(_.enabled){var b=this._bufferPool.read(_.poolId);if(b)f&&(f=!1,h=_.startTime),null!==h&&(a+=b.byteLength,o=_.endTime-h);else if(!(d===t&&m===g)){var x="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(_.poolId,", ").concat(_.fragIdx,", ").concat(_.idx,", ").concat(_.uri.toString(),", ").concat(_.levelId,", ").concat(_.flattenIdx,"}, ").concat(_.levelId,", ").concat(_.startByte,", ").concat(_.startTime);throw qe.a.error(x),new Error(x)}}}}}u.start=s,u.byteLength=a,u.timeLength=o,this._lastBufPos=l,this._lastBufInf=u}return u}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var n=this._readPos.s>-1?t.segments[this._readPos.s]:null;return n&&!n.enabled?(this.moveToNextReadPosOrEOF_(t,n),null):n&&2!==n.status?null:(n&&(e={type:xn.MP4,data:this._bufferPool.read(n.poolId),done:!0,meta:{uid:"".concat(n.levelId,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:t.idx,segIdx:n.idx,vac:t.additional,fragKey:n.fragKey,byteOffset:n.startByte}},qe.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(n.startTime,", endTime=").concat(n.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,n)),e)}},{key:"seek",value:function(e){Ke()(Ze()(n.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e)}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),n=t.fragment,r=t.segment;if(!n)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(n,")"));0==n.segments.length&&(this._tempResetTime=e);var i=n.idx,a=r?r.idx:0;this._readPos.f=i,this._readPos.s=a,this._downPos.f=i,this._downPos.s=a,this._downPos.e=this._downPos.s;var o=this.findPieceByPos_(this._downPos).segment;o&&2===o.status&&this.moveToNextDownPosOrEOD_(),qe.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===At.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findIdxByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n?{fragment:n,segment:r}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,n=-1,r=this._fragments.length,i=r>0?this._fragments[r-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==r-1&&e==i.endTime)){t=a,this._fragments[a].segments.length>0&&(n=this.findSegIdxByTime_(a,e));break}return{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=Ct(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){var n=Ct(this._fragments[e].segments,(function(e){return e.endByte<=t?1:e.startByte>t?-1:0}));return n?n.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.error&&this._fragments&&0!==this._fragments.length){var e=this.getUnreadBufInfo();this.state===At.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e)}}},{key:"decideLoadEndPos_",value:function(){var e=this._downPos.f,t=this._downPos.s,n=t;if(t>2)if(this._allowFusion){var r=this._fragments[e].segments,i=r[t],a=r[r.length-1];if(i){var o=this.loaderConfig.keyframesFusionSize,s=i.startByte+o;if(s>=a.endByte)n=a.idx;else{var u=this.findSegIdxByByte_(e,s);-1!==u&&(n=u)}}}else this._allowFusion=!0;return n}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(!(0==n.segments.length&&2==n.header.status||r&&2==r.status||2==n.status)){var i=new Tn({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:1,loaderConfig:this.loaderConfig});qe.a.log("".concat(this.LOG_TAG,": load task ").concat(i.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(n.levelId)),this.loadContiguousSegments_(i)}}},{key:"loadContiguousSegments_",value:function(e){var t=this,n=e.pieces,r=e.fragIdx,i=e.loaderConfig,a=this._eventManager,o=this._uriRemote,s=this,u=this._fragments[r],c=this._fragments.length,l=0==u.segments.length;s.state=At.LOADING;a.removeAll(),a.on(o,"PG",(function(e,t){})),a.on(o,"SC",(function(e){var i=e.bytes,a=-1,o=-1;if(l||(a=n[0].idx,o=n[n.length-1].idx),qe.a.log("".concat(s.LOG_TAG,": load ok, header:").concat(l,", seg ").concat(a,"-").concat(o," of frag ").concat(r,"->[0,").concat(c-1,"]")),l)u.header.status=2,s.state=At.IDLE,t.ipc.emit("mp4Header",{bytes:i,meta:{fragIdx:r,header:!0,uid:"".concat(u.header.levelId,"-").concat(r,"-header")}});else{for(var d=u.segments[a].startByte,f=!1,h=a;h<=o;h++){var p=u.segments[h];if(!t._bufferPool.read(p.poolId)){var v=p.startByte-d,y=p.endByte-d,g=i.subarray(v,y);t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,g),f=!0}p.status=2}s.state=At.IDLE,s.moveToNextDownPosOrEOD_(),f&&t.emit("DA")}})),a.on(o,"FL",(function(n){if(t.skipErrorFrag)t.state=At.IDLE,u.status=3,qe.a.log("".concat(s.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(n),", errorPos=").concat(JSON.stringify(t._downPos))),s.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,Ft.a.DATA_AD_ERROR),!1),t.moveToNextDownPosOrEOD_();else{var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e):i.doRetry?r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t.doFinalError_(n,e)}})),a.on(o,"AB",(function(){var e=-1,t=-1;if(!l){e=n[0].idx,t=n[n.length-1].idx;for(var i=e;i<=t;i++){var a=u.segments[i];a.status=0,s._bufferPool.del(a.poolId)}}qe.a.log("".concat(s.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(r,", header=").concat(l)),s.state!==At.ERROR&&(s.state=At.IDLE)})),o.startLoad(e)}},{key:"initSegs",value:function(e){var t=e.keyframePositions,n=e.keyframeTimes,r=e.meta,i=e.ac,a=e.vc,o=e.naluSizeLength,s=e.duration;if(0!=t.length&&0!=n.length){var u=r.fragIdx,c=r.uid,l=this._fragments[u],d=this._fragments[this._fragments.length-1],f="".concat(l.header.levelId,"-").concat(u,"-header");if(l.segments.length>0||c!==f)qe.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(l.segments.length,", cuid=").concat(f,", uid=").concat(c));else{l.additional={ac:i,vc:a,naluSizeLength:o},l.duration=s;var h=t.join(","),p=n.join(","),v=0;this.splicePTS&&(v=l.startTime);for(var y=0,g=0,m=0,_=0,b=d.endByte,x=0;x<=t.length;x++){x<t.length?(m=t[x-1],_=t[x],y=0==n[x-1]?0:n[x-1],g=0==n[x]?0:n[x]):(m=t[x-1],_=b,y=n[x-1],g=this.splicePTS?s:l.endTime);var k=new En(xn.MP4);k.uri=new bt.a(l.uri.toString()),k.idx=x,k.startTime=v+y,k.duration=g-y,k.startByte=m,k.endByte=_,k.poolId="mp4-"+this._uuid+"-"+l.idx+"-"+k.idx,k.fragIdx=l.idx,k.fragKey=l.key,k.levelId=l.levelId,l.segments.push(k)}qe.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(h,", keyframeTimes=").concat(p,",fid=").concat(f,", segs = ").concat(l.segments.length,", levelId=").concat(l.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),this._tempResetTime>=0&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,n=0;n<t;n++){var r=this._fragments[n];e&&(0==r.segments.length?(r.duration=r.endTime-e.endTime,r.startTime=e.endTime):r.startTime=e.endTime),e=r}}},{key:"doFinalError_",value:function(e,t){var n=this,r=e.category,i=e.statusCode,a=t.fragIdx,o=t.pieces,s=n._fragments[a],u=0===s.segments.length;if(!u&&o.length>0)for(var c=0;c<o.length;c++)o[c].status=3;s.status=3,n.state=At.ERROR;var l=Ft.a.UNKNOWN;switch(r){case"auth-error":l=Ft.a.DATA_AUTH_Error;break;case"cdn-error":l=Ft.a.DATA_MP4_CDN_ERROR;break;case"cdn-timeout":l=Ft.a.DATA_MP4_CDN_TIMEOUT;break;case"dispatcher-error":l=Ft.a.DATA_MP4_DISPATCH_ERROR;break;case"dispatcher-timeout":l=Ft.a.DATA_MP4_DISPATCH_TIMEOUT;break;default:n.state!==At.ERROR&&(n.state=At.IDLE)}l==Ft.a.UNKNOWN&&n.state!==At.ERROR?n.state=At.IDLE:this.error||n.emitErr(new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,l,i));var d="no-segment";if(!u){var f=o[0].idx,h=o.length>0&&!u?o[o.length-1].idx:f;d="seg: ".concat(f,"-").concat(h)}qe.a.log("".concat(n.LOG_TAG,": load finalError, ").concat(d," of ").concat(a,", header=").concat(u,", type=").concat(l))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),qe.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,u=this._downPos.f,c=0;c<o.length;c++)n=(r=o[c]).split("-"),e=parseInt(n[2],10),t=parseInt(n[3],10),e<s||e>u?this.gcSeg_(r,e,t):e==s&&e==u?(i=this._readPos.s,a=this._downPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==u&&t>(a=this._downPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t];if(r.segments.length>0){var i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&t.segments.length>0&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,n=e.segment,r=t.idx,i=n?n.idx:0,a=this._fragments.length,o=undefined,s=-1,u=-1,c=r;c<a;c++){var l=this._fragments[c],d=l.segments.length;if(3==l.status||4==l.status){if(!this.skipErrorFrag){o=!0;break}}else{if(0==d){s=l.idx,u=0;break}for(var f=!1,h=c==r?i+1:0;h<d;h++){var p=l.segments[h];if(p.enabled&&0==p.status){s=l.idx,u=h,f=!0;break}}if(f)break}}if(s>=0)this._downPos.f=s,this._downPos.s=u,this._downPos.e=this._downPos.s;else if(!o){var v=this._fragments[this._fragments.length-1];this._downPos.f=v.idx,this._downPos.s=v.segments.length>0?v.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=At.END}}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var n=e.idx,r=t.idx,i=this._fragments.length,a=-1,o=-1,s=!1;if(i>0){var u=this._fragments[i-1];u.segments.length>0&&u.segments[u.segments.length-1].enabled&&(s=!0);for(var c=n;c<i;c++){var l=this._fragments[c],d=l.segments.length;if(3==l.status||4==l.status||0==d){a=l.idx,o=0;break}for(var f=!1,h=c==n?r+1:0;h<d;h++){if(l.segments[h].enabled){a=l.idx,o=h,f=!0;break}}if(f)break}}a>=0?(this._readPos.f=a,this._readPos.s=o):s&&(this.eof=!0,qe.a.info("".concat(this.LOG_TAG,": EOF")))}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==At.IDLE&&(this.state===At.LOADING?this.abort_():this.state=At.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),Ke()(Ze()(n.prototype),"destroy",this).call(this)}}]),n}(Rt),Hn=n(660);function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Gn=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Wn=function(e){Ye()(n,e);var t=zn(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Hn,watch:["manifest","loader"]}))).$TAG="Mp4Loader",r.mode=Le.CDN,r.loaderDataArrived_=!1,r.loader_=new Vn(r.$krt,r.$ipc),r.loader_.loaderConfig=new Dt({dispatch:!1,allowIPDispatch:!1}),r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})).on(r.loader_,"FLS",(function(e){r.emit("FLS",e)})),r}return He()(n,[{key:"$silenced",get:function(){return Ke()(Ze()(n.prototype),"$silenced",this)},set:function(e){Ge()(Ze()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=n&&!Object(dt.c)(n)&&this.$manifestArtifact!==n;if(this.$selfArtifact!==r&&(this.$selfArtifact=r),i&&(qe.a.log("".concat(this.LOG_TAG," manifest changed, fragments=").concat(n.fragments.length,", levelId=").concat(n.levelId)),this.$manifestArtifact=n,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=n.fragments,this.applyRanges(t.playRanges),t.playRanges.length>0)){var a=t.playRanges.start(0);this.seek(a)}this.pumpLoader_(),Object(dt.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;if(!(Object(dt.c)(e)||!Object(dt.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error)){var n=this.loader_.read(),r=n&&!!n.data;this.noticeDataPump(r),r&&this.$provideArtefact(n)}}},{key:"seek",value:function(e){(e-=this.loader_.ForeToleranceTime)<0&&(e=0),Ke()(Ze()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(ct);Gn([nt.c],Wn.prototype,"fragments",null),Gn([nt.c],Wn.prototype,"findPieceAt",null);n(217),n(276),n(704);var Kn=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();function $n(e,t){if(e.length>1e4)return function(e,t){for(var n=-1^t,r=e.length-7,i=0;i<r;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])];for(;i<r+7;)n=n>>>8^Kn[255&(n^e[i++])];return-1^n}(e,t);for(var n=-1^t,r=e.length-3,i=0;i<r;)n=(n=(n=(n=n>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])])>>>8^Kn[255&(n^e[i++])];for(;i<r+3;)n=n>>>8^Kn[255&(n^e[i++])];return-1^n}n(313);var Yn=He()((function ih(e,t){Ue()(this,ih),this.start=e,this.end=t})),Qn=function(){function e(){Ue()(this,e),this.ranges_=[]}return He()(e,[{key:"findRange",value:function(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t<this.ranges_.length&&e>this.ranges_[t].end;)++t;return{index:t,contained:t<this.ranges_.length&&e>=this.ranges_[t].start}}},{key:"length",get:function(){return this.ranges_.length}},{key:"start",value:function(e){return this.ranges_[e].start}},{key:"end",value:function(e){return this.ranges_[e].end}},{key:"add",value:function(e,t){var n=this.findRange(e),r=this.findRange(t,n.index);n.contained&&(e=Math.min(e,this.ranges_[n.index].start)),r.contained&&(t=Math.max(t,this.ranges_[r.index].end));var i=r.index-n.index+(r.contained?1:0);this.ranges_.splice(n.index,i,new Yn(e,t))}},{key:"contain",value:function(e){return!!this.findRange(e).contained}},{key:"empty",value:function(){this.ranges_.splice(0,this.ranges_.length)}},{key:"toArray",value:function(){var e=[],t=this.ranges_;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n].start,i=t[n].end;e.push([r,i])}return e}},{key:"clone",value:function(){var t=new e;return this.toArray().forEach((function(e){t.add(e[0],e[1])})),t}}]),e}(),Jn=n(615),Xn=function(){function e(){Ue()(this,e),this.needSendAudioInitSegment_=!1,this.needSendVideoInitSegment_=!1,this.hasAudio=!0,this.hasVideo=!0,this.audioInitSegment=null,this.videoInitSegment=null,this.audioMediaSegments=[],this.videoMediaSegments=[]}return He()(e,[{key:"consumable",get:function(){var e=this.needSendInitSegment,t=this.hasVideo,n=this.hasAudio,r=this.needSendVideoInitSegment,i=this.needSendAudioInitSegment,a=this.videoInitSegment,o=this.audioInitSegment,s=this.videoMediaSegments,u=this.audioMediaSegments,c=!1;return e?i&&r?o&&a&&(c=!0):i?o&&(c=!0):r&&a&&(c=!0):(t&&s.length>0||n&&u.length>0)&&(c=!0),c}},{key:"needSendInitSegment",get:function(){return this.needSendAudioInitSegment||this.needSendVideoInitSegment},set:function(e){this.needSendVideoInitSegment=e,this.needSendAudioInitSegment=e}},{key:"needSendAudioInitSegment",get:function(){return this.hasAudio&&this.needSendAudioInitSegment_},set:function(e){this.hasAudio&&(this.needSendAudioInitSegment_=e)}},{key:"needSendVideoInitSegment",get:function(){return this.hasVideo&&this.needSendVideoInitSegment_},set:function(e){this.hasVideo&&(this.needSendVideoInitSegment_=e)}},{key:"consume",value:function(){var e=this.needSendInitSegment,t=this.needSendAudioInitSegment,n=this.needSendVideoInitSegment,r=this.videoInitSegment,i=this.audioInitSegment,a=this.audioMediaSegments,o=this.videoMediaSegments;if(e){if(t&&n){if(i&&r)return this.needSendAudioInitSegment=!1,this.needSendVideoInitSegment=!1,{segments:[i,r]}}else if(t){if(i)return this.needSendAudioInitSegment=!1,{segments:[i]}}else if(n&&r)return this.needSendVideoInitSegment=!1,{segments:[r]}}else{var s=[];if([a,o].forEach((function(e){e.length>0&&s.push(e.shift())})),s.length>0)return{segments:s}}return null}}]),e}(),Zn=[];function er(e){return Zn.indexOf(e)}function tr(e){return er(e)>-1}function nr(){var e=vt.a.create();return tr(e)?nr():function(e){return tr(e)||Zn.push(e),e}(e)}var rr=function(e,t){return{runtime:e,stream:t,store:e.store,uuid:t.uuid,ipc:t.ipc,hoc:!1}};function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var ar=function(e){Ye()(n,e);var t=ir(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).trackId=null,e._initSegment=null,e}return He()(n,[{key:"initSegment",get:function(){return this._initSegment},set:function(e){e&&(this._initSegment=e,this.emit("IU",e))}}]),n}(gt.EventEmitter);function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var sr=function(e){Ye()(n,e);var t=or(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).levelSwitching_=!1,e.silenced_=!1,e.compLiterals=[],e.mediaRanges=new Qn,e.playRanges=new Qn,e.ipc=new gt.EventEmitter,e.uuid=nr(),e.audio=null,e.audioSegmentSynced=!0,e.seekingMayIgnored=!1,e.seekedToStartPos=!1,e.hasNoticeEOD=!1,e.videoTrack=new ar,e.audioTrack=new ar,e.restrictor=new Xn,e}return He()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced?"(silence)":"","]")}},{key:"silenced",get:function(){return this.silenced_},set:function(e){this.silenced_=e,this.packList.forEach((function(t){t.$silenced=e}))}},{key:"mediaBuffer",get:function(){var e=this.renderer;return e?Object.assign(Object.assign({},e.bufferInfo(e.playHeadTime)),{buffered:{video:e.bufferInfo(e.playHeadTime,"video"),audio:e.bufferInfo(e.playHeadTime,"audio")}}):{len:0,start:0,end:0}}},{key:"dataBuffer",get:function(){var e=this.loader;return e?e.buffer:new ut}},{key:"seekable",get:function(){var e=!1;return this.manifest&&(e=this.manifest.seekable),e}},{key:"duration",get:function(){return this.renderer?this.renderer.duration:0}},{key:"currentTime",get:function(){return this.renderer?this.renderer.currentTime:0},set:function(e){this.renderer&&(this.renderer.currentTime=e)}},{key:"error",get:function(){for(var e,t=null,n=0;n<this.packList.length;n++)if((e=this.packList[n]).$error instanceof Mt.a){t=e.$error;break}return t}},{key:"levelSwitching",get:function(){return this.levelSwitching_},set:function(e){this.levelSwitching_=e}},{key:"packList",get:function(){return[this.manifest,this.loader,this.mux,this.renderer,this.audio].filter((function(e){return!!e}))}},{key:"onTheFly",set:function(e){var t=this.renderer,n=this.restrictor;e?t&&t.takeoverMediaControl():(this.clearBuffers({rendererMayKeepInit:!1}),this.restoreStatus(),t&&t.releasedMediaControl(),n.needSendInitSegment=!0)}},{key:"destroy",value:function(){var e=this.mediaRanges,t=this.playRanges,n=this.packList;e.empty(),t.empty(),this.clearBuffers(),n.forEach((function(e){e.destroy()}))}},{key:"shouldFireError",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.renderer,n=!1;return this.error&&(e&&e.len<=1||t.buffer.len<=1)&&(n=!0),n}},{key:"setup",value:function(e){}},{key:"registerAudioPack",value:function(e,t){this.audio=new e(rr(t,this))}},{key:"recoverImmediately",value:function(e){this.clearBuffers(),this.restoreStatus(),this.packList.forEach((function(t){return t.recoverAt(e)}))}},{key:"range",value:function(e,t){var n=this.loader,r=this.renderer;t&&(Array.isArray(t)?this._generateMediaRanges(t):t instanceof Qn&&(this.mediaRanges=t)),this._generatePlayRanges(e);var i=this.playRanges,a=this.mediaRanges;(null==n?void 0:n.applyRanges)&&n.applyRanges(i),r&&(r.appendWindowStart=i.start(0),r.appendWindowEnd=i.end(i.length-1)),i instanceof Qn&&i.length>0&&a instanceof Qn&&a.length>0&&qe.a.log("".concat(this.LOG_TAG," Range made, ").concat(i.length," play ").concat(i.start(0),"-").concat(i.end(i.length-1),", ").concat(a.length," media ").concat(a.start(0),"-").concat(a.end(a.length-1)))}},{key:"_generateMediaRanges",value:function(e){if(this.mediaRanges.empty(),Array.isArray(e)&&e.length>0)for(var t,n=0;t=e[n];n++)this.mediaRanges.add(t[0],t[1])}},{key:"_generatePlayRanges",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.mediaRanges,n=this.playRanges,r=t.start(0),i=t.end(t.length-1);if(n.empty(),null===e||e<i){"number"==typeof e&&e<r&&n.add(e,r);for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a);"number"==typeof e&&e>=s?e<t.start(a+1)&&n.add(e,t.start(a+1)):"number"==typeof e&&o<=e&&e<s?n.add(e,s):n.add(o,s)}}else n.add(e,Number.POSITIVE_INFINITY)}},{key:"clearBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.rendererOnlyData,n=e.rendererMayKeepInit,r=e.rendererFlushMedia,i=e.muxKeepMeta,a=e.clearVideoCache,o=this.packList,s=this.renderer,u=!!n,c="boolean"!=typeof r||r,l=!!i;qe.a.log("".concat(this.LOG_TAG," clear buffer of all packs, and ").concat(u?"will":"not"," keepInit")),o.forEach((function(e){return e.$unSubscribeStore()})),o.forEach((function(e){a&&e===s&&e.$clearVideoCacheBuffers(),t&&e===s?e.$clearOperateBuffers(null,u):e.$drainBuffer({delInStream:!0,keepInit:u,flushMedia:c,keepMuxMeta:l})})),o.forEach((function(e){e.$initStateSlice(!0)})),o.forEach((function(e){return e.$subscribeStore()}))}},{key:"restoreStatus",value:function(){this.seekingMayIgnored=!1,this.seekedToStartPos=!1,this.lastSeekTiming=undefined}},{key:"startHighResTimer",value:function(){var e;null===(e=this.renderer)||void 0===e||e.highResTimer.start()}},{key:"stopHighResTimer",value:function(){var e;null===(e=this.renderer)||void 0===e||e.highResTimer.stop()}}]),n}(Jn.a);function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var cr=function(e){Ye()(n,e);var t=ur(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).TAG="Episode",e.streamType=T.Episode,e}return He()(n,[{key:"seekable",get:function(){return!0}}]),n}(sr),lr=n(152),dr=n(11),fr=n(2),hr=(n(632),n(218),n(19)),pr=n(73),vr=n(114),yr=n(163),gr=n(7),mr="http://static.iqiyi.com/ext/common/h5Voddpcfg.json";try{localStorage.getItem("proxyConfigUrl")&&(mr=localStorage.getItem("proxyConfigUrl"))}catch(nh){}pr.a.isHTTPS&&(mr=mr.replace(/^http:/gi,"https:"));var _r=null,br=0,xr=null,kr=!1,wr=!1,Sr=Math.random();function Tr(){null!==_r&&_r.abort(),(_r=new XMLHttpRequest).responseType="json",_r.onreadystatechange=function(){if(0===_r.readyState);else if(1===_r.readyState);else if(2===_r.readyState);else if(3===_r.readyState);else if(200===_r.status)if(_r.response)try{xr=JSON.parse(JSON.stringify(_r.response)),Er(),wr=!0,Ar()}catch(nh){Pr("dataError")}else Pr("responseIsNull");else Pr("statusErr_"+_r.status)};try{fr.a.platform!==vr.a.TV&&fr.a.platform!==vr.a.OVERSEA_TV||(mr=mr.replace("static.iqiyi.com","static.ptqy.gitv.tv")),_r.open("GET",mr+"?rn="+Date.now(),!0),_r.send()}catch(e){Pr("tryCatchError")}}function Pr(e){Er(),br<5&&(br++,Tr())}function Er(){null!==_r&&_r.abort(),_r=null}function Ar(){try{if(null!==xr){dr.b.dispatchCfg=xr.cdn.dispatcher.timeout,dr.h.tracker=xr.tracker,xr.aidList&&(dr.h.aidList=xr.aidList),xr.defaultTracker&&(dr.h.defaultTracker=xr.defaultTracker),xr.pingbackSendPeriod&&(pingbackSendPeriod=xr.pingbackSendPeriod),xr.config&&(fr.a.checkIsMobius()||(dr.c.videoMaxSize=parseInt(xr.config.videoMaxSize)),dr.i.memory>0&&(dr.c.videoMaxSize=dr.i.memory),dr.h.getPeerIDStep=parseInt(xr.config.getPeerIDStep),dr.h.weedOutPeerStep=parseInt(xr.config.weedOutPeerStep),dr.h.connectPeerStep=parseInt(xr.config.connectPeerStep),dr.h.NATTimeoutStep=parseInt(xr.config.NATTimeoutStep),dr.h.connectMax=parseInt(xr.config.connectMax),dr.h.passiveMax=parseInt(xr.config.passiveMax),dr.h.RTCMax=parseInt(xr.config.RTCMax),dr.h.RTCPoolSize=parseInt(xr.config.RTCPoolSize),dr.h.coolDownTime=parseInt(xr.config.coolDownTime));var e=hr.a.getUserInfoFromCookie();if(e.userInfo){var t,n,r=e.userNetType,i=e.userArea;if(xr.closep2p&&(dr.h.closeP2PTvidList=xr.closep2p.tvidList,dr.h.closeP2PNetList=xr.closep2p.netList,dr.h.closeP2PFileTypeList=xr.closep2p.fileTypeList,dr.h.closeP2PProvinceList=xr.closep2p.provinceList?xr.closep2p.provinceList:[]),xr.dcache&&xr.dcache.open)for(var a=xr.dcache.open,o=0;o<a.length;o++){var s=a[o].ai;if(t=s.split("|")[0],n=s.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){dr.d.open=!0;break}}if(xr.dcache&&xr.dcache.dispatch&&fr.a.platform===vr.a.WEB)for(var u=xr.dcache.dispatch,c=0;c<u.length;c++){var l=u[c];if(t=l.ai.split("|")[0],n=l.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){if(!l.time){dr.d.dispatch=!0;break}for(var d=0;d<l.time.length;d++)if(Dr(l.time[d])){dr.d.dispatch=!0;break}break}}var f=xr.stun?xr.stun:xr.tracker;dr.h.stun=[];for(var h=!1,p=0;p<f.length&&!h;p++){if(r===f[p].key||"*"===f[p].key){h=!0;for(var v=0;v<f[p].value.length;v++){var y=f[p].value[v];pr.a.browser.name,dr.h.stun.push({url:"stun:"+y.split("|")[0]+":"+y.split("|")[4],urls:"stun:"+y.split("|")[0]+":"+y.split("|")[4]})}}if(hr.a.shuffle(dr.h.stun),"mozilla"===pr.a.browser.name)for(;dr.h.stun.length>2;)dr.h.stun.shift()}var g=0;if(xr.cdn.dispatch)for(;g<xr.cdn.dispatch.length;){var m=xr.cdn.dispatch[g];if(t=m.ai.split("|")[0],n=m.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){dr.b.dispatchCfg=m.timeout;break}g++}for(g=0;g<xr.cdn.cache.TTFB.length;){var _=xr.cdn.cache.TTFB[g];if(t=_.ai.split("|")[0],n=_.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){dr.b.TTFBCfg=_.timeout;break}g++}if(xr.cdn.loadTest)for(g=0;g<xr.cdn.loadTest.length;){var b=xr.cdn.loadTest[g];if(t=b.ai.split("|")[0],n=b.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n)||b.hasOwnProperty("platform")&&b.platform!==fr.a.platform&&"*"!==b.platform)){if(!b.time){dr.i.loadTest=0!==b.value;break}for(var x=0;x<b.time.length;x++)if(Dr(b.time[x])){dr.i.loadTest=0!==b.value;break}break}g++}for(xr.cdn.mergeChunk&&Ir("mergeChunk",dr.b,xr.cdn.mergeChunk,r,i),g=0;g<xr.cdn.cache.load.length;){var k=xr.cdn.cache.load[g];if(t=k.ai.split("|")[0],n=k.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){dr.b.rcvCfg=k.timeout;break}g++}g=0,dr.h.limitP2P="off";var w=!1;if(dr.h.closeP2PNetList.length>0)for(var S=0;S<dr.h.closeP2PNetList.length;S++)if(dr.h.closeP2PNetList[S]===r){w=!0;break}if(dr.h.closeP2PTvidList.length>0)for(var T=0;T<dr.h.closeP2PTvidList.length;T++)if(dr.h.closeP2PTvidList[T]===fr.a.tvId){w=!0;break}if(dr.h.closeP2PFileTypeList.length>0)for(var P=0;P<dr.h.closeP2PFileTypeList.length;P++)if(dr.h.closeP2PFileTypeList[P]===fr.a.fileType){w=!0;break}if(dr.h.closeP2PProvinceList.length>0&&dr.h.closeP2PProvinceList.indexOf(i)>=0&&(w=!0),!w)for(;g<xr.cdn.cache.p2p.length;){var E=xr.cdn.cache.p2p[g];if(t=E.ai.split("|")[0],n=E.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var A=0;A<E.time.length;){if(Dr(E.time[A])){dr.h.limitP2P="on",dr.i.openP2P=!0,dr.i.p2pUpLoad=!0;break}A++}break}g++}if(xr.platform){if(xr.platform.openP2P)for(g=0;g<xr.platform.openP2P.length;){var I=xr.platform.openP2P[g];if(I.type===fr.a.platform){dr.i.openP2P=1===I.value;break}g++}if(xr.platform.p2pUpLoad)for(g=0;g<xr.platform.p2pUpLoad.length;){var D=xr.platform.p2pUpLoad[g];if(D.type===fr.a.platform){dr.i.p2pUpLoad=1===D.value;break}g++}if(xr.platform.memory)for(g=0;g<xr.platform.memory.length;){var L=xr.platform.memory[g];if(L.type===fr.a.platform){dr.i.memory=L.value;break}g++}if(xr.platform.fastGC)for(g=0;g<xr.platform.fastGC.length;){var O=xr.platform.fastGC[g];if(O.type===fr.a.platform){dr.i.fastGC=O.value;break}g++}if(xr.platform.cacheMaxLen)for(g=0;g<xr.platform.cacheMaxLen.length;){var R=xr.platform.cacheMaxLen[g];if(R.type===fr.a.platform){dr.i.cacheMaxLen=dr.i.cacheMaxLen1080=dr.i.cacheMaxLen720=dr.i.cacheMaxLen480=R.value;break}g++}if(xr.platform.cacheMaxLen480)for(g=0;g<xr.platform.cacheMaxLen480.length;){var C=xr.platform.cacheMaxLen480[g];if(C.type===fr.a.platform){dr.i.cacheMaxLen480=C.value;break}g++}if(xr.platform.cacheMaxLen720)for(g=0;g<xr.platform.cacheMaxLen720.length;){var M=xr.platform.cacheMaxLen720[g];if(M.type===fr.a.platform){dr.i.cacheMaxLen720=M.value;break}g++}if(xr.platform.cacheMaxLen1080)for(g=0;g<xr.platform.cacheMaxLen1080.length;){var B=xr.platform.cacheMaxLen1080[g];if(B.type===fr.a.platform){dr.i.cacheMaxLen1080=B.value;break}g++}if(xr.platform.loadMinLen)for(g=0;g<xr.platform.loadMinLen.length;){var N=xr.platform.loadMinLen[g];if(N.type===fr.a.platform){dr.i.loadMinLen=N.value;break}g++}}if(g=0,xr.cdn.cache.reLoad)for(;g<xr.cdn.cache.reLoad.length;){var F=xr.cdn.cache.reLoad[g];if(t=F.ai.split("|")[0],n=F.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){dr.b.reLoadCfg=F.timeout;break}g++}var q=0;for(fr.a.absOpen=!1;q<xr.abs.open.length;){var j=xr.abs.open[q];if(t=j.ai.split("|")[0],n=j.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var U=j.time.length,V=0;V<U;){if(Dr(j.time[V])){fr.a.absOpen=!0;break}V++}break}q++}if(xr.abs.readCheck&&fr.a.absOpen)for(q=0;q<xr.abs.readCheck.length;){var H=xr.abs.readCheck[q];if(t=H.ai.split("|")[0],n=H.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var z=H.time.length,G=0;G<z;){if(Dr(H.time[G])){fr.a.absCheck=!0;break}G++}break}q++}if(xr.abs.optimize&&fr.a.absOpen&&(dr.a.opt="",xr.abs.optimize.seek_optimize&&(dr.a.opt+=Ir("seek_optimize",dr.a,xr.abs.optimize.seek_optimize,r,i)),xr.abs.optimize.force_start&&(dr.a.opt+=Ir("force_start",dr.a,xr.abs.optimize.force_start,r,i)),xr.abs.optimize.force_down&&(dr.a.opt+=Ir("force_down",dr.a,xr.abs.optimize.force_down,r,i)),xr.abs.optimize.first_load&&(dr.a.opt+=Ir("first_load",dr.a,xr.abs.optimize.first_load,r,i)),xr.abs.optimize.reportType&&Ir("reportType",dr.a,xr.abs.optimize.reportType,r,i)),xr.UpConfig&&(xr.UpConfig.cdn&&Ir("cdn",dr.j,xr.UpConfig.cdn,r,i,e.userIP),xr.UpConfig.dispatch&&Ir("dispatch",dr.j,xr.UpConfig.dispatch,r,i,e.userIP),xr.UpConfig.stuck&&Ir("stuck",dr.j,xr.UpConfig.stuck,r,i,e.userIP),xr.UpConfig.abs&&Ir("abs",dr.j,xr.UpConfig.abs,r,i,e.userIP),xr.UpConfig.oom&&Ir("oom",dr.j,xr.UpConfig.oom,r,i,e.userIP),xr.UpConfig.exception&&Ir("exception",dr.j,xr.UpConfig.exception,r,i,e.userIP),xr.UpConfig.noPlay&&Ir("noPlay",dr.j,xr.UpConfig.noPlay,r,i,e.userIP)),xr.LoadSetting){var W=xr.LoadSetting;W.cacheMinLen&&Ir("cacheMinLen",dr.e,W.cacheMinLen,r,i,e.userIP),W.cacheMaxLen&&Ir("cacheMaxLen",dr.e,W.cacheMaxLen,r,i,e.userIP),W[300]&&Ir("300",dr.e,W[300],r,i,e.userIP),W[500]&&Ir("500",dr.e,W[500],r,i,e.userIP),W[600]&&Ir("600",dr.e,W[600],r,i,e.userIP)}}}}catch(nh){gr.a.error("remote cfg error"),upLog("cc")}}function Ir(e,t,n,r,i){arguments.length>5&&undefined;if(n&&n.length)for(var a=0;a<n.length;a++){var o,s=n[a];if(s.ai){var u=n[a],c=u.ai.split("|")[0],l=u.ai.split("|")[1];if("*"!==c&&c!==r&&!("OVERSEA"===c&&r.indexOf("OVERSEA")>=0))continue;if("*"!==l&&0!==i.indexOf(l))continue}if(!(s.hasOwnProperty("platform")&&s.platform.indexOf(fr.a.platform)<0&&"*"!==s.platform)&&((!s.hasOwnProperty("time")||s.time.find((function(e){return Dr(e)})))&&!(s.hasOwnProperty("uuid")&&s.uuid!==yr.b&&"*"!==s.uuid||s.hasOwnProperty("tvid")&&s.tvid!==fr.a.tvId&&"*"!==s.tvid||s.hasOwnProperty("userIp")&&s.userIp!==(null===(o=fr.a.getUserInfo())||void 0===o?void 0:o.userIP)&&"*"!==s.userIp||s.hasOwnProperty("ratio")&&Sr>s.ratio)))return t[e]=n[a].value,"1"}return"0"}function Dr(e){if("*"===e)return!0;var t=e.split("-")[0],n=e.split("-")[1],r=e.split("-")[2],i=60*parseInt(n.split(":")[0])+parseInt(n.split(":")[1]),a=60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1]);if(i>=0&&a>i){var o=new Date,s=o.getDay().toString(),u=60*o.getHours()+o.getMinutes();if(("*"===t||s===t)&&u>=i&&u<a)return!0}return!1}var Lr=Object.defineProperties({load:function(){kr||(kr=!0,Er(),br=0,Tr())},checkConfig:Ar},{ready:{get:function(){return wr},configurable:!0,enumerable:!0}}),Or=Object.defineProperties({loader:{all:0,count:0,message:""},dispatcher:{all:0,count:0,message:""},errorFragment:null},{errorMessage:{get:function(){return"[ loader:"+this.loader.message+" , dispatcher:"+this.dispatcher.message+"]"},configurable:!0,enumerable:!0}}),Rr=n(96),Cr=n.n(Rr),Mr=(n(130),n(623),function(){function e(){Ue()(this,e),this._size=0,this._dicMap=new Map}return He()(e,[{key:"has",value:function(e){return this._dicMap.has(e)}},{key:"get",value:function(e){var t=this._dicMap.get(e);return t||null}},{key:"set",value:function(e,t){this._dicMap.has(e)||this._size++,this._dicMap.set(e,t)}},{key:"remove",value:function(e){var t=this._dicMap.get(e);return t&&(this._dicMap["delete"](e),this._size--),t}},{key:"clear",value:function(){this._size=0,this._dicMap.clear()}},{key:"values",get:function(){return this._dicMap}},{key:"size",get:function(){return this._size}}]),e}());function Br(e,t){var n=e.m3u8;if("video"===t){if(n.hasOwnProperty("video_track1")&&n.video_track1.hasOwnProperty("files"))return n.video_track1.files}else if("audio"===t&&n.hasOwnProperty("audio_track1")&&n.audio_track1.hasOwnProperty("files"))return n.audio_track1.files;return null}var Nr,Fr,qr={getM4sDuration:function(e){var t=e.m3u8;return t.hasOwnProperty("video_track1")&&t.hasOwnProperty("audio_track1")?Math.min(parseFloat(t.video_track1.duration_second),parseFloat(t.audio_track1.duration_second)):t.duration},getGapPos:function(e,t,n,r){var i=Br(e,n);if(null===i)return null;if(t>=e.duration){var a=i.length-1,o=i[a].seekable.time.length,s=i[a].seekable.pos.length;return"start"===r?{segmentIndex:a,chunkIndex:s-2,time:hr.a.accAdd(i[a].start_second,i[a].seekable.time[o-2]),pos:i[a].seekable.pos[s-2]}:{segmentIndex:a,chunkIndex:s-1,time:hr.a.accAdd(i[a].start_second,i[a].seekable.time[o-1]),pos:i[a].seekable.pos[s-1]}}for(var u=0;u<i.length;u++)if(t>=i[u].start_second&&t<hr.a.accAdd(i[u].start_second,i[u].duration_second)){for(var c=i[u].start_second,l=i[u].seekable.time,d=0;d<l.length;d++)if(t>=hr.a.accAdd(c,l[d])&&t<hr.a.accAdd(c,l[d+1]))return"start"===r?{segmentIndex:u,chunkIndex:d,time:hr.a.accAdd(c,l[d]),pos:i[u].seekable.pos[d]}:{segmentIndex:u,chunkIndex:d,time:hr.a.accAdd(c,l[d+1]),pos:i[u].seekable.pos[d+1]}}else if("end"===r&&t===hr.a.accAdd(i[u].start_second,i[u].duration_second)){var f=i[u].seekable.time.length-1;return{segmentIndex:u,chunkIndex:f-1,time:hr.a.accAdd(i[u].start_second,i[u].duration_second),pos:i[u].seekable.pos[f]}}return null},getFilesInfo:Br,getDuratioSecond:function(e,t,n){var r=qr.getFilesInfo(e,t);return n<=r.length-1?hr.a.accAdd(r[n].duration_second,r[n].start_second):0},getSegmentIdx:function(e,t){return e+t},getSegmentSize:function(e,t,n){var r=Br(e,t);return n<r.length?r[n].size:-1},getChunkSEPos:function(e,t,n,r){var i=Br(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;if(a.hasOwnProperty("pos")&&a.pos[r+1])return a.hasOwnProperty("time")?{sPos:a.pos[r],ePos:a.pos[r+1],sTime:i[n].start_second+a.time[r],eTime:i[n].start_second+(r<a.time.length-1?a.time[r+1]:i[n].start_second+i[n].duration_second)}:{sPos:a.pos[r],ePos:a.pos[r+1]}}return null},getNextChunkInfo:function(e,t,n,r){var i=Br(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r+1<a.pos.length-1?{segmentIndex:n,chunkIndex:r+1,sTime:hr.a.accAdd(i[n].start_second,a.time[r+1]),eTime:hr.a.accAdd(i[n].start_second,a.time[r+2]),sPos:a.pos[r+1],ePos:a.pos[r+2]}:n<i.length-1?(a=i[n+1].seekable,{segmentIndex:n+1,chunkIndex:0,sTime:hr.a.accAdd(i[n+1].start_second,a.time[0]),eTime:hr.a.accAdd(i[n+1].start_second,a.time[1]),sPos:a.pos[0],ePos:a.pos[1]}):null}return null},getCurChunkInfo:function(e,t,n,r){var i=Br(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r<a.pos.length-1?{segmentIndex:n,chunkIndex:r,sTime:hr.a.accAdd(i[n].start_second,a.time[r]),eTime:hr.a.accAdd(i[n].start_second,a.time[r+1]),sPos:a.pos[r],ePos:a.pos[r+1]}:null}return null},getTSGapPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8;if(t>=e.duration){var i=r.length-1,a=r[i].time.length,o=r[i].pos.length;return"start"===n?{segmentIndex:i,chunkIndex:o-1,time:hr.a.accAdd(r[i].start_second,r[i].time[a-2]),pos:r[i].pos[o-1].sPos}:{segmentIndex:i,chunkIndex:o-1,time:hr.a.accAdd(r[i].start_second,r[i].time[a-1]),pos:r[i].pos[o-1].ePos}}for(var s=0;s<r.length;s++)if(t>=r[s].start_second&&t<hr.a.accAdd(r[s].start_second,r[s].duration_second)){for(var u=r[s].start_second,c=r[s].time,l=0;l<c.length;l++)if(l===c.length-1||t>=hr.a.accAdd(u,c[l])&&t<hr.a.accAdd(u,c[l+1]))return"start"===n?{segmentIndex:s,chunkIndex:l,time:hr.a.accAdd(u,c[l]),pos:r[s].pos[l].sPos}:{segmentIndex:s,chunkIndex:l,time:hr.a.accAdd(u,c[l+1]),pos:r[s].pos[l].ePos}}else if("end"===n&&dr.b.mergeChunk&&t===hr.a.accAdd(r[s].start_second,r[s].duration_second)){var d=r[s].pos.length-1;return{segmentIndex:s,chunkIndex:d,time:hr.a.accAdd(r[s].start_second,r[s].duration_second),pos:r[s].pos[d].ePos}}return null},getTSChunkSEPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8[t];if(r){var i=r.pos;if(n<r.pos.length)return{sPos:i[n].sPos,ePos:i[n].ePos,sTime:r.start_second+r.time[n],eTime:r.start_second+(n<r.time.length-1?r.time[n+1]:r.duration_second)}}return null},getTSDuratioSecond:function(e,t){var n=e.m3u8;return hr.a.accAdd(n[t].duration_second,n[t].start_second)},getTSNextChunkInfo:function(e,t,n){var r=e.m3u8;return t>=r.length?null:n<r[t].pos.length-1?(n+=1,{sourceId:r[t].sourceID,segmentIndex:t,chunkIndex:n,sTime:hr.a.accAdd(r[t].start_second,r[t].time[n]),eTime:hr.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}):t<r.length-1&&n>=r[t].pos.length-1?(n=0,{sourceId:r[t+=1].sourceID,segmentIndex:t,chunkIndex:0,sTime:hr.a.accAdd(r[t].start_second,r[t].time[n]),eTime:hr.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}):t>=r.length-1&&n>=r[t].pos.length-1?null:void 0},getCurTSChunkInfo:function(e,t,n){var r=e.m3u8;return r&&r[t]&&n<r[t].time.length-1?{segmentIndex:t,chunkIndex:n,sTime:hr.a.accAdd(r[t].start_second,r[t].time[n]),eTime:hr.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}:null},getGapPosRound:function(e,t,n){for(var r=Br(e,n),i=0;i<r.length;i++){var a=r[i].start_second,o=Math.floor(a+r[i].duration_second),s=r[i].seekable.time;if(t-a<o-t)for(var u=0;u<s.length-1;u++){var c=s[u]+a;if(t-c<s[u+1]+a-t)return{segmentIndex:i,chunkIndex:u,time:c,pos:r[i].seekable.pos[u]}}else{var l=a+s[s.length-2],d=a+s[s.length-1];if(t<=l)for(var f=0;f<s.length-1;f++){var h=s[f]+a;if(t-h<s[f+1]+a-t)return{segmentIndex:i,chunkIndex:f,time:h,pos:r[i].seekable.pos[f]}}else if(t-l<d-t)return{segmentIndex:i,chunkIndex:s.length-2,time:l,pos:r[i].seekable.pos[s.length-2]}}}return null}},jr=qr,Ur=n(280),Vr=n.n(Ur),Hr=n(186),zr=n.n(Hr),Gr=(n(527),n(205),n(199),n(209),n(210),/[^0-9a-eA-E]+/g),Wr=16777216,Kr=65536,$r=256,Yr=0,Qr=0,Jr=null,Xr=!1;function Zr(e){if(e<=0&&(Jr=null),Jr){if(e>Jr.byteLength){var t=new Uint8Array(e);t.set(Jr,0),Jr=t}}else Jr=new Uint8Array(e)}var ei=Object.defineProperties({resetData:function(){Qr=0,Yr=0,Xr=!1},setStr:function(e){var t=Math.ceil(e.length/2);if(Jr||Zr(Yr+t),null!==Gr.exec(e))throw"EncodeBuffer setStr string need baseEnCode!";var n=e.length%2;Yr+t>Qr&&(Zr(Yr+t),Qr=Yr+t);for(var r=0;r<e.length;r+=2){var i=void 0,a=void 0;1===n&&r===e.length-1?(i=parseInt("0x"+e[r]),a=0):(i=parseInt("0x"+e[r]),a=parseInt("0x"+e[r+1])),Jr[Yr+Math.ceil(r/2)]=a+15*i}Yr+=t},setCharStr:function(e){var t=Math.ceil(e.length);Jr||Zr(Yr+t),Yr+t>Qr&&(Zr(Yr+t),Qr=Yr+t);for(var n=0;n<e.length;n++)Jr[Yr+n]=parseInt("0x"+e[n]);Yr+=t},setUTF8Str:function(e){var t=Math.ceil(e.length);Jr||Zr(Yr+t),Yr+t>Qr&&(Zr(Yr+t),Qr=Yr+t);for(var n=0;n<e.length;n++)Jr[Yr+n]=e[n].charCodeAt();Yr+=t},set8:function(e){Jr||Zr(Yr+1),Yr+1>Qr&&(Zr(Yr+1),Qr=Yr+1),Jr[Yr]=e,Yr+=1},set16:function(e){Jr||Zr(Yr+2),Yr+2>Qr&&(Zr(Yr+2),Qr=Yr+2);var t=e;t>=$r?(Jr[Yr]=Math.floor(t/$r),t%=$r):Jr[Yr]=0,Jr[Yr+1]=t,Yr+=2},set32:function(e){Jr||Zr(Yr+4),Yr+4>Qr&&(Zr(Yr+4),Qr=Yr+4);var t=e;t>=Wr?(Jr[Yr]=Math.floor(t/Wr),t%=Wr):Jr[Yr]=0,t>=Kr?(Jr[Yr+1]=Math.floor(t/Kr),t%=Kr):Jr[Yr+1]=0,t>=$r?(Jr[Yr+2]=Math.floor(t/$r),t%=$r):Jr[Yr+2]=0,Jr[Yr+3]=t,Yr+=4},setBytes:function(e,t,n){Jr||Zr(Yr+n),Yr+n>Qr&&(Zr(Yr+n),Qr=Yr+n),Jr.set(e.subarray(t,t+n),Yr),Yr+=n},clear:function(){Jr=null},toString:function(){for(var e="",t=Qr<=64?Qr:64,n=0;n<t;n++){var r=Jr[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e},crc:function(){for(Yr=Qr,Xr?Yr-=4:(Jr||Zr(Yr+4),Yr+4>Qr&&(Zr(Yr+4),Qr=Yr+4)),Nr=Math.floor(Qr/4),Fr=0;Fr<4;)Jr[Yr+Fr]=Jr[Fr*Nr],Fr++;Yr+=4,Xr=!0},getData:function(){return new Uint8Array(Jr.buffer.slice(0,Qr))},getReferData:function(){return new Uint8Array(Jr.buffer.slice(0,Qr))}},{position:{set:function(e){Yr=e},get:function(){return Yr},configurable:!0,enumerable:!0},length:{get:function(){return Qr},configurable:!0,enumerable:!0}});function ti(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ni(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ri,ii=new Mr,ai=null,oi=0,si=!1;function ui(e){var t=ii.remove(e);t&&(ai===t&&(ai=null),t.destroy())}function ci(e){var t=ii.get(e);t&&t.destroyChunk(e)}function li(e){clearTimeout(ri),oi=0;var t=di();if(0===dr.i.fastGC){for(var n=!1,r=!1,i=0;i<t.length;i++){var a=t[i].index.slice(0,1);t[i].index.slice(1);"a"===a&&ci(t[i].alias),t[i]&&(oi=t[i].memory+oi),-1!==t[i].peerCnt&&t[i].peerCnt>1e3&&(n=!0),-1!==t[i].peerCnt&&t[i].peerCnt<=1e3&&(r=!0),t[i].tvid!==fr.a.tvId&&t[i].tvid!==fr.a.lastReadTvID&&0===t[i].status&&(t[i].status=1)}if(gr.a.info("memorySize : "+oi+", "+Math.floor(oi/1024/1024)+"M"),oi>=dr.c.videoMaxSize){if(n&&r){t.sort((function(e,t){return t.peerCnt-e.peerCnt}));for(var o=0;o<t.length;o++)if(oi>dr.c.videoMaxSize&&t[o]&&1===t[o].status&&t[o].peerCnt>1e3){oi-=t[o].memory,ui(t[o].alias);break}}if(oi>=dr.c.videoMaxSize){(t=di()).sort((function(e,t){return e.shareDataNum-t.shareDataNum}));for(var s=0;s<t.length;s++)t[s].shareDataNum=0,oi>=dr.c.videoMaxSize&&t[s]&&1===t[s].status&&(oi-=t[s].memory,ui(t[s].alias));if(oi>=dr.c.videoMaxSize){(t=di()).sort((function(e,t){return parseInt(e.index.slice(1))-parseInt(t.index.slice(1))}));for(var u=0;u<t.length;u++)if(t[u]&&oi>=dr.c.videoMaxSize){var c=t[u].index.slice(0,1),l=t[u].index.slice(1);if(t[u].tvid===fr.a.tvId||t[u].tvid===fr.a.lastReadTvID)continue;"e"===c&&l<fr.a.lastReadSegIndex&&t[u].shareDataNum<10&&(oi-=t[u].memory,ui(t[u].alias))}}}}}else if(2===dr.i.fastGC&&e)for(var d=0;d<t.length;d++){var f=t[d];f&&ui(f.alias),f&&(oi=f.memory)}else for(var h=0;h<t.length;h++)t[h]&&(oi=t[h].memory+oi),gr.a.info("memorySize : "+oi+", "+Math.floor(oi/1024/1024)+"M"),t[h]&&(t[h].tvid!==fr.a.tvId&&t[h].tvid!==fr.a.lastReadTvID&&0===t[h].status&&(t[h].status=1),1===t[h].status?(oi-=t[h].memory,ui(t[h].alias)):ci(t[h].alias));ri=setTimeout(li,6e4)}function di(){var e,t=[],n=ti(ii.values);try{for(n.s();!(e=n.n()).done;){var r=zr()(e.value,2)[1];t.push(r)}}catch(th){n.e(th)}finally{n.f()}return t}var fi,hi,pi=Object.defineProperties({getSegment:function(e){return ii.get(e)},hasSegment:function(e){return ii.has(e)},setSegment:function(e,t){t&&(ii.set(e,t),si||(si=!0,li()))},removeSegment:ui,setLoadSegment:function(e){if(!ai||ai.alias!==e)if(e){var t=ii.get(e);t?(ai&&ai.clearTask(),ai&&ai.alias===t.alias||(ai=t)):ai=null}else ai&&ai.clearTask(),ai=null},getSourceDescribe:function(e){ei.resetData();var t=di(),n=0;ei.set16(e.length),ei.setCharStr(e);for(var r=0;r<t.length;r++)t[r].vid===e&&n++;ei.set16(n);for(var i=0;i<t.length;i++)if(t[i].vid===e){var a=t[i].bitmap;ei.set16(a.data.byteLength+8),ei.set32(a.alias),ei.set32(a.size),ei.setBytes(a.data,0,a.data.byteLength)}return ei.getData()},destroy:function(){var e,t=ti(ii.values);try{for(t.s();!(e=t.n()).done;){ui(zr()(e.value,1)[0])}}catch(th){t.e(th)}finally{t.f()}},onGC:li},{segmentList:{get:function(){return di()},configurable:!0,enumerable:!0},loadSegment:{get:function(){return ai},configurable:!0,enumerable:!0},memorySize:{get:function(){return oi},configurable:!0,enumerable:!0},size:{get:function(){return ii.size},configurable:!0,enumerable:!0}}),vi=function(){function e(t){Ue()(this,e),this.name=t,this._count=0}return He()(e,[{key:"toString",value:function(){return this._count.toString()}},{key:"add",value:function(e){this._count+=e}},{key:"reset",value:function(){this._count=0}}]),e}(),yi={stratus_connectCnt:new vi("scnt"),stratus_connectSuccess:new vi("sscu"),stratus_duration:new vi("sdur"),stratus_break:new vi("sbrk"),cdn_taskCnt:new vi("ctct"),cdn_progressCnt:new vi("cpct"),cdn_progressTime:new vi("cptm"),cdn_loadTime:new vi("cltm"),dispatchKey_Cnt:new vi("dkcnt"),dispatchKey_Done:new vi("dkdon"),dispatch_Cnt:new vi("dict"),dispatch_doneCount:new vi("ddct"),dispatch_duration:new vi("ddur"),change_definition:new vi("cdef"),init:function(){fi||(fi=[this.stratus_connectCnt,this.stratus_connectSuccess,this.stratus_duration,this.stratus_break,this.cdn_taskCnt,this.cdn_progressCnt,this.cdn_progressTime,this.cdn_loadTime,this.dispatchKey_Cnt,this.dispatchKey_Done,this.dispatch_Cnt,this.dispatch_doneCount,this.dispatch_duration,this.change_definition])},reset:function(){for(var e=0;e<fi.length;e++)fi[e].reset()},tail:function(e){for(var t=0;t<fi.length;t++)e[fi[t].name]=fi[t].toString()}},gi=0,mi=0,_i=0,bi=0,xi=0,ki=0,wi=0,Si=0,Ti=0,Pi=!1;function Ei(){var e;yi.init(),Pi=!0,(++Ai>=4||gi-xi+(mi-ki)+(_i-wi)>12582912)&&((e={t:"h5timing"}).lp2p=mi-ki,e.up2p=_i-wi,e.lcdn=gi-xi,e.used=bi-Si,yi.tail(e),e.dats=dr.c.videoDataSize,e.srcn=pi.size,e.plydu=fr.a.playDuration-Ti,e.lmax=fr.a.downMax,Ii(e),yi.reset(),xi=gi,ki=mi,wi=_i,Si=bi,Ti=fr.a.playDuration,Ai=0),hi=setTimeout(Ei,1e4)}var Ai=0;function Ii(e){if(Pi){var t=hr.a.getUserInfoFromCookie();e.uid=fr.a.uuid,e.uif=t.userInfo,e.tvid=fr.a.tvId,e.tkip=fr.a.trackerIP,e.lstws=t.ws,e.lstidc=t.idc,e.ver=dr.k.version,e.cal=gi,e.pal=mi}}var Di,Li,Oi=Object.defineProperties({start:function(){fr.a.platform!==vr.a.TV&&(Pi||Ei())},stop:function(){Pi=!1,clearTimeout(hi)},check:function(e){Pi&&(e.t="h5check",Ii(e))},addPBItem:function(e,t){t?e.add(t):e.add(1)}},{cdnSize:{get:function(){return gi},set:function(e){gi=e},configurable:!0,enumerable:!0},p2pSize:{get:function(){return mi},set:function(e){mi=e},configurable:!0,enumerable:!0},upSize:{get:function(){return _i},set:function(e){_i=e},configurable:!0,enumerable:!0},usedSize:{get:function(){return bi},set:function(e){bi=e},configurable:!0,enumerable:!0}}),Ri=0,Ci=0,Mi=null;var Bi=Object.defineProperties({resetData:function(e){if(e){if(e instanceof ArrayBuffer)Ci=e.byteLength,Mi=new Uint8Array(e);else{if(!(e instanceof Uint8Array))return;Ci=e.byteLength,Mi=e}Ri=0}},getStr:function(e){if(!Mi)return"";var t=Math.ceil(e/2),n=e%2;if(Ri+t>Ci&&(t=Ci-Ri),t<=0)return"";for(var r="",i=0;i<t;i++){var a=Mi[Ri+i],o=void 0;1===n&&i===t-1?r+=Math.floor(a/15).toString(16):(o=a%15,r+=Math.floor(a/15).toString(16)+o.toString(16))}return Ri+=t,r},getCharStr:function(e){if(!Mi)return"";var t=Math.ceil(e);if(Ri+t>Ci&&(t=Ci-Ri),t<=0)return"";for(var n="",r=0;r<t;r++){n+=Mi[Ri+r].toString(16)}return Ri+=t,n},getUTF8Str:function(e){if(!Mi)return"";var t=Math.ceil(e);if(Ri+t>Ci&&(t=Ci-Ri),t<=0)return"";for(var n="",r=0;r<t;r++){var i=Mi[Ri+r];n+=String.fromCharCode(i)}return Ri+=t,n},get8:function(){if(!Mi||Ri+1>Ci)return 0;var e=Mi[Ri];return Ri+=1,e},get16:function(){if(!Mi||Ri+2>Ci)return 0;var e=256*Mi[Ri]+Mi[Ri+1];return Ri+=2,e},get32:function(){if(!Mi||Ri+4>Ci)return 0;var e=16777216*Mi[Ri]+65536*Mi[Ri+1]+256*Mi[Ri+2]+Mi[Ri+3];return Ri+=4,e},getBytes:function(e){if(!Mi||Ri+e>Ci)return null;var t=Mi.subarray(Ri,Ri+e);return Ri+=e,t},clear:function(){Mi=null},crc:function(){for(Ri=Ci-4,Di=Math.floor(Ci/4),Li=0;Li<4;){if(Mi[Ri+Li]!==Mi[Li*Di])return!1;Li++}return!0},toString:function(){for(var e="",t=Ci<=64?Ci:64,n=0;n<t;n++){var r=Mi[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e}},{position:{set:function(e){Ri=e},get:function(){return Ri},configurable:!0,enumerable:!0},length:{get:function(){return Ci},configurable:!0,enumerable:!0}}),Ni=n(16),Fi=n(267),qi=n(118),ji=!0;var Ui=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){n+=t[Math.floor(36*Math.random())]}return n.toLowerCase()}(66),Vi=0,Hi=0,zi=0,Gi=(/^https/gi.test(window.location.protocol)?"https":"http")+"://h-t-65e3135d.video.iqiyi.com/video/pingback?t=9",Wi=!1,Ki=null,$i=0,Yi=null,Qi=!0,Ji=0,Xi={diy_ver:"0.0.10",diy_uuid:"",diy_dvid:"",diy_platform:0,diy_userip:"",diy_area:"",diy_isp:"",diy_idc:"",diy_hidetime:0,diy_lifetime:0,diy_playtime:0,diy_videotype:"",diy_count:0,diy_step:0,diy_tvid:"",diy_init:0,diy_switchbid:0,diy_bid:0,diy_selectbid:0,diy_starttime:0,diy_stuck:0,diy_rebufertime:0,diy_buffer:0,diy_cdnrcnt:0,diy_dcdn_drcnt:0,diy_cdnfttcnt:0,diy_dcdn_dfttcnt:0,diy_cdnsucccnt:0,diy_dcdn_dsucccnt:0,diy_cdnftttime:0,diy_dcdn_dftttime:0,diy_cdntime:0,diy_dcdn_dtime:0,diy_cdnsize:0,diy_dcdn_dsize:0,diy_cdnerr:"",diy_server_ip:"",diy_p2pconcnt:0,diy_p2pconctime:0,diy_p2psucccnt:0,diy_cdnerrtype:"",diy_dcdn_derr:"",diy_cdnurl:"",diy_dcdn_durl:"",diy_finalerr:"",diy_dispatchcnt:0,diy_dispsucccnt:0,diy_disptime:0,diy_diserrtype:"",diy_dispatcherr:"",diy_dispatchurl:"",diy_p2pbw:0,diy_usebw:0,diy_cdndomain:"",diy_bgpreqcnt:0,diy_bgpsucccnt:0,diy_extrainfo:"",diy_info:"",diy_lstplay:0,diy_lstseek:0,diy_seekcnt:0,diy_seekstart:0,diy_seektime:0,diy_vcodec:"",diy_mbread:"",diy_mbload:"",diy_absever:"",diy_absswttime:0,diy_absopencnt:0,diy_absbmaxcnt:0,diy_abswtmax:0,diy_absplaymax:0,diy_absopt:"",diy_abs:"",diy_absfr:"",diy_absfm:"",diy_evermax:0,diy_480time:0,diy_720time:0,diy_1080time:0,diy_paused:0,diy_dashrcnt:0,diy_dashsucccnt:0,diy_dashtime:0,diy_readrate:0,diy_evermaxrate:0,diy_absmaxbr:0,diy_abs_u_d:0,diy_abs_a_d:0,diy_abs_s_d:0,diy_abslagstep:0},Zi=Object.assign({},Xi);function ea(e){var t;Yi&&Yi.userIP||(Yi=hr.a.getUserInfoFromCookie()),e.diy_uuid=yr.b,e.diy_dvid=Ui,e.diy_platform=fr.a.platform,e.diy_userip=Yi.userIP,e.diy_area=Yi.userArea,e.diy_isp=Yi.userNetType,e.diy_idc=fr.a.idc,e.diy_cdndomain=fr.a.domain,e.diy_hidetime=Math.floor(Fi.a.hideTime()),e.diy_lifetime=Math.floor(performance.now()),e.diy_tvid=fr.a.tvId,e.diy_bid=fr.a.bitrate,e.diy_videotype=fr.a.fileType,e.diy_count=Ji,e.diy_playtime=fr.a.getSumPlayTime(),e.diy_abs=fr.a.absAlgorithmDes,e.diy_absopt=dr.a.reportType,e.diy_lstseek=fr.a.lstSeekTime,e.diy_lstplay=fr.a.lstPlayTime,e.diy_vcodec=fr.a.vcodec,e.diy_selectbid=fr.a.setbid,qi.a.levelFlush(),e.diy_evermax=qi.a.everMaxBid,e.diy_480time=qi.a.play480Time(),e.diy_720time=qi.a.play720Time(),e.diy_1080time=qi.a.play1080Time(),qi.a.resetTimeSum(),e.diy_readrate=fr.a.readLevelBitrate,e.diy_evermaxrate=fr.a.everMaxBitrate,-1!==fr.a.readTime&&fr.a.tempTestStartRWTime>0&&performance.now()>fr.a.tempTestStartRWTime&&(e.diy_mbread=fr.a.readTime.toFixed(0),e.diy_mbload=fr.a.loadTime.toFixed(0),fr.a.readTime=fr.a.loadTime=-1),ji&&fr.a.firstABSRatio&&fr.a.firstABSRes&&(ji=!1,e.diy_absfr=fr.a.firstABSRatio,e.diy_absfm=fr.a.firstABSRes),e.diy_paused=!(t=document.querySelector("video"))||t.paused?1:0}var ta=performance.now(),na=0;function ra(e){clearTimeout($i),5e3!==e&&3e4!==e||Wi&&(ia(!1,e)?5e3===e?$i=setTimeout(ra,3e4,3e4):e=-1:$i=setTimeout(ra,e,e))}function ia(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Wi)return!1;if(!e)if(performance.now()-ta>=6e4)na=0,ta=performance.now();else{if(na>=20)return clearTimeout(Ki),Ki=setTimeout(ia,1e3*dr.l,!1,1e3*dr.l),!1;na++}if(clearTimeout(Ki),Ki=0,ea(Zi),Zi.diy_step=t,Zi.diy_buffer=fr.a.avgBufferCnt>0?Math.floor(fr.a.avgBuffer/fr.a.avgBufferCnt*1e3):0,fr.a.avgBuffer=0,fr.a.avgBufferCnt=0,Zi.diy_buffer<=0&&Zi.diy_cdnrcnt+Zi.diy_dcdn_drcnt<=0&&Zi.diy_dispatchcnt<=0&&Zi.diy_p2pbw<=0&&Zi.diy_cdnbw<=0&&""===Zi.diy_tserr&&""===Zi.diy_dcdn_derr&&0===Zi.diy_init&&0===Zi.diy_starttime&&0===Zi.diy_stuck&&0===Zi.diy_rebufercnt&&""===Zi.diy_finalerr&&t!==1e3*dr.l)return e?aa():Ki=setTimeout(ia,1e3*dr.l,!1,1e3*dr.l),!1;if(Qi&&1===fr.a.absStatus&&performance.now()>6e4&&!Zi.diy_extrainfo&&(Qi=!1,Zi.diy_extrainfo=fr.a.absEverStatus),""!==Zi.diy_tserrtype&&!Zi.diy_extrainfo&&Hi){var n=Math.floor((zi||performance.now())-Hi);Zi.diy_extrainfo="".concat(n,"-").concat(Vi)}for(var r in Zi)"&".concat(r,"=").concat(Zi[r]);try{Ji+=1}catch(nh){}return oa(Zi,Xi),e?aa():Ki=setTimeout(ia,1e3*dr.l,!1,1e3*dr.l),!0}function aa(){Wi=!1,clearTimeout(Ki),Ki=0,clearTimeout($i),$i=0}function oa(e,t){if(e)for(var n in t)e[n]=t[n]}var sa=Zi,ua=function(){function e(t,n,r){Ue()(this,e),this.socket=null,this.trackerStateFun=r,this.uid="",this.startTime=0,this.watcherStep=0,this.retryStep=0,this.pbTimer=0,this.reconnectCnt=0,this.id=t,this.firstIPInfo=n,this.running=!0,this.open=!1,this.cdnSize=0,this.p2pSize=0,this.upSize=0,this.usedSize=0,this.connectCnt=0,this.connectDoneCnt=0,this.last_cdnSize=0,this.last_p2pSize=0,this.last_upSize=0,this.last_usedSize=0,this.lastConnectCnt=0,this.lastConnectDoneCnt=0,this.trackerIPBase=0,this.connect()}return He()(e,[{key:"connect",value:function(){if("off"!==fr.a.limitP2P&&dr.i.openP2P){if(clearTimeout(this.retryStep),this.retryStep=0,this.reconnectCnt++,this.reconnectCnt%6==3&&this.trackerIPBase++,this.reconnectCnt%6>=3||fr.a.trackerStatus){var e=hr.a.getUserInfoFromCookie(),t=hr.a.getTrackerIP(e.userNetType,dr.h.tracker,this.id,this.trackerIPBase);""!==t&&(this.firstIPInfo=t)}var n=this.firstIPInfo.split("|");this.ip=n[0],this.trackerPort=n[1],this.SDomain=n[2],this.StrackerPort=n[3],this.runWSS="wss"===n[5],fr.a.trackerIP=this.ip,Oi.addPBItem(yi.stratus_connectCnt);var r=this;try{pr.a.isHTTPS||this.runWSS?this.socket=new WebSocket("wss://"+this.SDomain+":"+this.StrackerPort+"/ws",["binary"]):this.socket=new WebSocket("ws://"+this.ip+":"+this.trackerPort+"/ws",["binary"]),this.socket.binaryType="arraybuffer",this.socket.onopen=function(e){r.onOpen.call(r,e)},this.socket.onmessage=function(e){r.onData.call(r,e)},this.socket.onerror=function(e){r.onError.call(r,e)},this.socket.onclose=function(e){r.onClose.call(r,e)},this.socket.p2pConnectTime=performance.now(),Ni.b.diy_p2prcnt++,sa.diy_p2pconcnt++,gr.a.info("tracker [START] IP : "+this.ip+":"+this.trackerPort)}catch(i){}this.startTime=Date.now(),clearTimeout(this.watcherStep),this.watcherStep=setTimeout((function(){r.heartBeat.call(r)}),6e3),clearTimeout(this.pbTimer),this.pbTimer=setTimeout((function(){r.firePB.call(r)}),2e4)}}},{key:"onOpen",value:function(e){this.socket&&this.socket.p2pConnectTime>0&&(Ni.b.diy_p2pconccnt++,sa.diy_p2psucccnt++,Ni.b.diy_p2pconctime+=Math.floor(performance.now()-this.socket.p2pConnectTime),sa.diy_p2pconctime+=Math.floor(performance.now()-this.socket.p2pConnectTime),this.socket.p2pConnectTime=0),gr.a.info("tracker [SUCCESS] IP : "+this.ip+":"+this.trackerPort),Oi.addPBItem(yi.stratus_connectSuccess),Oi.addPBItem(yi.stratus_duration,Date.now()-this.startTime),this.open=!0,this.register()}},{key:"onTimeout",value:function(){this.running&&(gr.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : connect timeout"),this.error())}},{key:"onClose",value:function(e){this.running&&(Oi.addPBItem(yi.stratus_break),gr.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onClose-"+e.data),this.error())}},{key:"onError",value:function(e){this.running&&(gr.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onError-"+e.data),this.error())}},{key:"error",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.CLOSED&&Date.now()-this.startTime>6e4){this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null;var e=this;e.retryStep=setTimeout((function(){e.connect.call(e)}),2e3)}}},{key:"onData",value:function(e){try{if("off"===fr.a.limitP2P||!dr.i.openP2P)return void this.error();if(Bi.resetData(e.data),ca=Bi.get16(),this.running&&this.socket)switch(ca){case 1:0===(ha=Bi.get16())?(da=Bi.get16(),fa=Bi.getCharStr(da),this.uid=fa,fr.a.trackerStatus=Bi.get8(),fr.a.trackerStatus&&(this.trackerIPBase++,this.socket.close()),gr.a.info("[P2P load], onRegister uid : "+this.uid),this.onMsg(ka.State_register,this.uid)):(gr.a.warn("tracker [ERROR] register error"),this.error());break;case 3:if(0===(ha=Bi.get16())){ya=Bi.get16();for(var t=0;t<ya;t++){ga=Bi.get16(),ma=Bi.getCharStr(ga),_a=Bi.get16();for(var n=0;n<_a;n++){ba=Bi.get16(),xa=Bi.getCharStr(ba),la=Bi.get32();for(var r=0;r<pi.segmentList.length;r++)pi.segmentList[r].p2pID===this.id&&pi.segmentList[r].vid===ma&&pi.segmentList[r].index===xa&&(pi.segmentList[r].peerCnt=la)}}}else 400===ha?(Oi.addPBItem(yi.stratus_break),this.error()):gr.a.warn("tracker [ERROR] update error");break;case 4:if(0===(ha=Bi.get16())){if(this.trackerStateFun){var i=Bi.get32();la=Bi.get16(),"[ ";for(var a=[],o=0;o<la;o++)da=Bi.get16(),(fa=Bi.getCharStr(da))+"-",a.push(fa);if(this.peerSegment){" ]";var s=Bi.get16(),u=[];" , vidList : [ ";for(var c=0;c<s;c++)ga=Bi.get16(),ma=Bi.getCharStr(ga),i=Bi.get32(),u.push({vid:ma,count:i}),"("+ma+":"+i+")-";" ]",this.peerSegment.checkDefinition(u),this.peerSegment=null}this.onMsg(ka.State_upDatePeers,this.uid,a)}}else 400===ha?(Oi.addPBItem(yi.stratus_break),this.error()):gr.a.warn("tracker [ERROR] query error");break;case 5:da=Bi.get16(),fa=Bi.getCharStr(da),pa=Bi.get16(),(va=Bi.getUTF8Str(pa))&&fa&&this.trackerStateFun&&this.onMsg(ka.State_candidate,fa,JSON.parse(va));break;case 6:da=Bi.get16(),fa=Bi.getCharStr(da),pa=Bi.get16(),(va=Bi.getUTF8Str(pa))&&fa&&this.trackerStateFun&&this.onMsg(ka.State_offer,fa,JSON.parse(va));break;case 7:da=Bi.get16(),fa=Bi.getCharStr(da),pa=Bi.get16(),(va=Bi.getUTF8Str(pa))&&fa&&this.trackerStateFun&&this.onMsg(ka.State_answer,fa,JSON.parse(va));break;case 2:break;default:gr.a.warn("[P2P load],tracker [ERROR] not Support token : "+ca)}}catch(l){}}},{key:"onMsg",value:function(e,t,n){throw"virtual method"}},{key:"register",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(1),ei.set16(dr.h.trackerVersion),ei.set16(this.uid.length),ei.setCharStr(this.uid),ei.set16(fr.a.platform),ei.set16(fr.a.aid.length),ei.setCharStr(fr.a.aid);var e=ei.getReferData();this.socket.send(e)}catch(t){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"unRegister",value:function(){}},{key:"heartBeat",value:function(){var e=this;if(clearTimeout(this.watcherStep),this.running&&this.open&&this.socket&&this.socket.readyState===WebSocket.OPEN){try{if(ei.resetData(),ei.set16(3),!0===dr.i.p2pUpLoad){for(var t=[],n=0;n<pi.segmentList.length;n++)pi.segmentList[n].p2pID===this.id&&(t.push(pi.segmentList[n].index),t.push(pi.segmentList[n].vid));ei.set16(t.length/2);for(var r=0;r<t.length;r+=2)ei.set16(t[r].length),ei.setCharStr(t[r]),ei.set16(t[r+1].length),ei.setCharStr(t[r+1])}var i=ei.getReferData();i&&this.socket.send(i)}catch(a){}this.pbTimer=setTimeout((function(){e.firePB.call(e)}),100)}else Oi.addPBItem(yi.stratus_break),this.error();this.watcherStep=setTimeout((function(){e.heartBeat.call(e)}),2e4)}},{key:"getPeer",value:function(e){if(this.peerSegment=e,this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{var t=e.vid,n=e.vids,r=e.index;if(ei.resetData(),ei.set16(4),ei.set16(t.length),ei.setCharStr(t),ei.set16(r.length),ei.setCharStr(r),n&&n.length>0){ei.set16(n.length);for(var i=0;i<n.length;i++)ei.set16(n[i].vid.length),ei.setCharStr(n[i].vid)}else ei.set16(1),ei.set16(t.length),ei.setCharStr(t);var a=ei.getReferData();this.socket.send(a)}catch(o){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"candidate",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{va=JSON.stringify(t),ei.resetData(),ei.set16(5),ei.set16(e.length),ei.setCharStr(e),ei.set16(va.length),ei.setUTF8Str(va);var n=ei.getReferData();this.socket.send(n)}catch(r){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"offer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{va=JSON.stringify(t),ei.resetData(),ei.set16(6),ei.set16(e.length),ei.setCharStr(e),ei.set16(va.length),ei.setUTF8Str(va);var n=ei.getReferData();this.socket.send(n)}catch(r){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"answer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{va=JSON.stringify(t),ei.resetData(),ei.set16(7),ei.set16(e.length),ei.setCharStr(e),ei.set16(va.length),ei.setUTF8Str(va);var n=ei.getReferData();this.socket.send(n)}catch(r){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"firePB",value:function(){if(clearTimeout(this.pbTimer),fr.a.platform!==vr.a.TV)if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(256),ei.set32(this.cdnSize-this.last_cdnSize),ei.set32(this.p2pSize-this.last_p2pSize),ei.set32(this.usedSize-this.last_usedSize),ei.set32(this.upSize-this.last_upSize),ei.set32(dr.c.videoDataSize),ei.set32(0),ei.set32(this.connectCnt-this.lastConnectCnt),ei.set32(this.connectDoneCnt-this.lastConnectDoneCnt),fr.a.MixWaterMark&&fr.a.sendPingBack({type:"BWReport",para:{cdnsize:this.cdnSize-this.last_cdnSize,p2psize:this.p2pSize-this.last_p2pSize,usesize:this.upSize-this.last_upSize}}),ei.set16(fr.a.platform);var e=ei.getReferData();this.socket.send(e),this.last_cdnSize=this.cdnSize,this.last_p2pSize=this.p2pSize,this.last_upSize=this.upSize,this.last_usedSize=this.usedSize,this.lastConnectCnt=this.connectCnt,this.lastConnectDoneCnt=this.connectDoneCnt}catch(t){}else Oi.addPBItem(yi.stratus_break),this.error()}},{key:"fireConnectOK",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(260),ei.set16(e.length),ei.setCharStr(e),ei.set16(t);var n=ei.getReferData();this.socket.send(n)}catch(r){}}},{key:"clear",value:function(){try{this.running=!1,this.open=!1,this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null),clearTimeout(this.retryStep),clearTimeout(this.watcherStep),clearTimeout(this.pbTimer)}catch(e){}}}]),e}(),ca=null,la=0,da=0,fa="",ha=0,pa=0,va="",ya=0,ga=0,ma="",_a=0,ba=0,xa="",ka={State_upDatePeers:"State_upDatePeers",State_register:"State_register",State_candidate:"State_candidate",State_offer:"State_offer",State_answer:"State_answer",State_Error:"State_error"},wa=ua,Sa={bundlePolicy:"max-compat",iceServers:[],iceTransportPolicy:"all",rtcpMuxPolicy:"require",candidateNetworkPolicy:"ALL"},Ta=[],Pa=[],Ea=[],Aa=0;function Ia(e){return Ta&&Ta.length>0&&-1!==Ta.indexOf(e)}var Da={has:Ia,get:function(e){var t=Ta.indexOf(e);return-1!==t?Pa[t]:null},use:function(e){if(Sa.iceServers=dr.h.stun,Sa.iceServers.length<=0)return!1;if(Ia(e))return!0;for(var t=0;t<Ea.length;t++)Date.now()-Ea[t]>3e5&&Ea.splice(t,1);if(Ta.length+Ea.length>dr.h.RTCPoolSize||Aa>dr.h.RTCMax)return!1;++Aa>=2*dr.h.RTCMax/3&&(dr.h.switchPage=!0);try{Pa.push({rtc:new RTCPeerConnection(Sa),channel:null})}catch(n){return!1}return Ta.push(e),!0},shut:function(e){var t=Ta.indexOf(e);if(-1!==t){if(delete Ta[t],Ta[t]=null,Ta.splice(t,1),null!==Pa[t].channel){delete Pa[t].channel.onopen,Pa[t].channel.onopen=null,delete Pa[t].channel.onclose,Pa[t].channel.onclose=null,delete Pa[t].channel.onerror,Pa[t].channel.onerror=null,delete Pa[t].channel.onmessage,Pa[t].channel.onmessage=null;try{Pa[t].channel.close()}catch(n){}delete Pa[t].channel,Pa[t].channel=null}if(null!==Pa[t].rtc){delete Pa[t].rtc.oniceconnectionstatechange,Pa[t].rtc.oniceconnectionstatechange=null,delete Pa[t].rtc.onicecandidate,Pa[t].rtc.onicecandidate=null,delete Pa[t].rtc.ondatachannel,Pa[t].rtc.ondatachannel=null;try{Pa[t].rtc.close()}catch(n){}delete Pa[t].rtc,Pa[t].rtc=null}Ea.push(Date.now()),delete Pa[t],Pa[t]=null,Pa.splice(t,1)}}},La=1e3,Oa=512,Ra=[],Ca=0,Ma=.024,Ba=0,Na=0,Fa=0,qa=-1,ja=1536,Ua=1536,Va=0;var Ha=Object.defineProperties({check:function(){if(!((qa=Date.now())<=Na)){if((Va=qa-Na)>=La){ja=Ua,function(){var e=0;for(var t in Ra)if(!t||Ra[t].time+Ra[t].rto+500<qa){var n=Ra.splice(e,1)[0];Ca-=n.cont}else e++}(),Na=qa;var e=Ba/Va;Ba=0,Ma+=.25*(e-Ma)}qa<=Fa||(Va=qa-Fa)>0&&(Fa=qa,function(e){for(;Ca>0&&e>1;){var t=Ra.shift();if(Ca-=t.cont,e-=t.cont,t)try{if(Da.has(t.id)&&null!==Da.get(t.id).channel&&"open"===Da.get(t.id).channel.readyState)try{Da.get(t.id).channel.send(t.args)}catch(n){}}catch(n){}}}(Math.min(Ma+Ca/La,Oa/La)*Va))}},pushTsk:function(e,t,n,r){return!(Ca>=Oa)&&(Ra.push({args:t,id:e,rto:n,time:qa,cont:r}),Ca+=r,Ba+=r,!0)},removeTsk:function(e){var t=0;for(var n in Ra)if(Ra[n].id===e){var r=Ra.splice(t,1)[0];Ca-=r.cont}else t++}},{sendMax:{set:function(e){Oa=e},configurable:!0,enumerable:!0},loadQuota:{get:function(){return ja},set:function(e){ja=e},configurable:!0,enumerable:!0},loadQuotaMax:{set:function(e){Ua=e},configurable:!0,enumerable:!0}}),za=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;Ue()(this,e),this.alias=n,this.gpID=-1,t&&(this.size=t,this.data=new Uint8Array(Math.ceil(this.size/8)))}return He()(e,[{key:"getBit",value:function(e){if(e>=0&&e<this.size){var t=e%8,n=Math.floor(e/8);return 0!=(this.data[n]&1<<t)}return!1}},{key:"setBit",value:function(e,t){if(e>=0&&e<this.size){var n=e%8,r=Math.floor(e/8);this.data[r]=!0===t?this.data[r]|1<<n:this.data[r]&~(1<<n)}}},{key:"getByte",value:function(e){return e>=0&&e+8<=this.size&&e%8==0&&255===this.data[Math.floor(e/8)]}},{key:"setByte",value:function(e,t){e>=0&&e<this.size&&e%8==0&&(this.data[Math.floor(e/8)]=t?255:0)}},{key:"checkRange",value:function(e,t){for(t>this.size&&(t=this.size);e<t;)if(e%8==0&&e+8<=t){if(255!==this.data[Math.floor(e/8)])return!1;e+=8}else{if(!this.getBit(e))return!1;e++}return!0}},{key:"toData",value:function(){return ei.resetData(),ei.set32(this.alias),ei.set32(this.size),ei.setBytes(this.data,0,this.data.byteLength),ei.getData()}},{key:"fromData",value:function(e){Bi.resetData(e),this.alias=Bi.get32(),this.size=Bi.get32(),this.data=Bi.getBytes(e.byteLength-8)}},{key:"resetGap",value:function(e){if((0===e||e)&&-1!==e)for(this.gpID=e;this.gpID<this.size&&!this.getBit(this.gpID);)this.gpID++}},{key:"toString",value:function(){for(var e="",t=0,n=this.size;t<n;)e+=this.getBit(t)?"*":"_",++t%128==0&&(e+="\r\n");return e+="|"}},{key:"reset",value:function(e){for(var t=0;t<Math.ceil(this.size/8);t++)this.data[t]=e?255:0}},{key:"clear",value:function(){delete this.data,this.head&&delete this.head}}]),e}(),Ga=za,Wa=0,Ka=0,$a=1,Ya=2,Qa=3,Ja=4,Xa=5,Za=6,eo="0",to="3",no="5",ro="7",io="11",ao="15",oo="19",so={ordered:!1},uo=function(){function e(t,n,r,i){Ue()(this,e);var a=this;if(this.peerMgr=t,this.active=r,this.peerID=n,this.ready=!1,this.timeStep=-1,this.lastEventTime=-1,this.connectionState="new",this.workTime=0,this.natUseTime=0,this.natStartTime=-1,this.rtc.oniceconnectionstatechange=function(e){a.connectionState=e.currentTarget.iceConnectionState},this.rtc.onicecandidate=function(e){e.candidate&&a.peerMgr&&a.peerMgr.candidate(a.peerID,e.candidate)},this.active){try{this.getDataChannel(this.rtc.createDataChannel(null,so))}catch(o){}this.peerMgr.connectCnt++,this.rtc.createOffer().then((function(e){a.rtc.setLocalDescription(e)["catch"]((function(e){gr.a.error("RTC set local SDP error:"+e)})),a.peerMgr&&a.peerMgr.offer(a.peerID,e)}))["catch"]((function(e){gr.a.error("RTC create offer SDP error:"+e),a.peerMgr&&a.peerMgr.removePeerNode(a.peerID,to)})),a.natStartTime=Date.now(),a.timeStep=setTimeout((function(){a.onNATTimeout.call(a)}),dr.h.NATTimeoutStep)}else this.rtc.setRemoteDescription(new RTCSessionDescription(i))["catch"]((function(e){gr.a.error("RTC set remote SDP error:"+e)})),this.rtc.ondatachannel=function(e){a.getDataChannel(e.channel)},this.rtc.createAnswer().then((function(e){a.rtc.setLocalDescription(e).then((function(){a.peerMgr&&a.peerMgr.answer(a.peerID,e)}))["catch"]((function(e){gr.a.error("RTC set local SDP error:"+e),a.peerMgr&&a.peerMgr.removePeerNode(a.peerID,to)}))}))["catch"]((function(e){gr.a.error("RTC create answer error:"+e),a.peerMgr&&a.peerMgr.removePeerNode(a.peerID,to)})),a.natStartTime=Date.now(),a.timeStep=setTimeout((function(){a.onNATTimeout.call(a)}),dr.h.NATTimeoutStep-1e3)}return He()(e,[{key:"baseCheck",value:function(){return!(-1!==this.lastEventTime&&Date.now()-this.lastEventTime>=dr.h.NATTimeoutStep)||(this.peerMgr.removePeerNode(this.peerID,no),!1)}},{key:"fireData",value:function(t,n){if(this.ready&&null!==this.rtc&&null!==this.dataChannel){var r=null;switch(t){case Ka:if((r=e.pkgQuit())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case $a:if((r=e.pkgHeartBeat(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Ya:if((r=e.pkgRequest(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Ja:if((r=e.pkgClear())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Xa:if((r=e.pkgRefuse())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Za:if((r=e.pkgDescribe(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){gr.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}}}}},{key:"onData",value:function(t){if(t&&null!==this.rtc&&null!==this.dataChannel)if(t[0]!==Wa)this.peerMgr.removePeerNode(this.peerID,ro);else switch(this.lastEventTime=Date.now(),t[1]){case Ka:this.onQuit&&this.onQuit(e.unPkgQuit(t));break;case $a:this.onHeartbeat&&this.onHeartbeat(e.unPkgHeartBeat(t));break;case Ya:this.onRequest&&this.onRequest(e.unPkgRequest(t));break;case Qa:this.onReceive&&this.onReceive(e.unPkgReceive(t));break;case Ja:this.onClear&&this.onClear(e.unPkgClear(t));break;case Xa:this.onRefuse&&this.onRefuse(e.unPkgRefuse(t));break;case Za:this.onDescribe&&this.onDescribe(e.unPkgDescribe(t))}}},{key:"onQuit",value:function(){throw"virtual method"}},{key:"onHeartbeat",value:function(){throw"virtual method"}},{key:"onRequest",value:function(){throw"virtual method"}},{key:"onReceive",value:function(){throw"virtual method"}},{key:"onClear",value:function(){throw"virtual method"}},{key:"onRefuse",value:function(){throw"virtual method"}},{key:"onDescribe",value:function(){throw"virtual method"}},{key:"getDataChannel",value:function(e){var t=this;this.dataChannel=e,this.dataChannel.onopen=function(){t.ready=!0,clearTimeout(t.timeStep),0===t.workTime&&(t.workTime=Date.now()),0===t.natUseTime&&(t.natUseTime=Date.now()-t.natStartTime),t.active&&(t.peerMgr.connectDoneCnt++,t.peerMgr.fireConnectOK(t.peerID,t.natUseTime)),t.lastEventTime=Date.now()},this.dataChannel.onclose=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,to)},this.dataChannel.onerror=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,to)},this.dataChannel.onmessage=function(e){t.onData(new Uint8Array(e.data))}}},{key:"close",value:function(){clearTimeout(this.timeStep),delete this.peerMgr,this.peerMgr=null,this.ready=!1}},{key:"rtc",get:function(){return Da.get(this.peerID).rtc}},{key:"dataChannel",get:function(){return Da.get(this.peerID).channel},set:function(e){return Da.get(this.peerID).channel=e}},{key:"offer",value:function(e){}},{key:"answer",value:function(e){this.rtc.setRemoteDescription(new RTCSessionDescription(e))["catch"]((function(e){console.log("RTC answer be reject:"+e)}))}},{key:"candidate",value:function(e){this.rtc.addIceCandidate(new RTCIceCandidate(e))["catch"]((function(e){console.log("RTC candidate fail:"+e)}))}},{key:"onNATTimeout",value:function(){this.peerMgr.removePeerNode(this.peerID,no)}}],[{key:"pkgQuit",value:function(){return ei.resetData(),ei.set8(Wa),ei.set8(Ka),ei.crc(),ei.getReferData()}},{key:"unPkgQuit",value:function(e){return Bi.resetData(e),this.QuitParam||(this.QuitParam={}),this.QuitParam.version=Bi.get8(),this.QuitParam.type=Bi.get8(),this.QuitParam.crc=Bi.crc(),this.QuitParam}},{key:"pkgHeartBeat",value:function(e){ei.resetData(),ei.set8(Wa),ei.set8($a),ei.set32(e.localID);var t=0;return null!==e.bitmap&&(t+=1),ei.set8(t),ei.set8(e.lostR),ei.set8(e.vid.length),ei.setCharStr(e.vid),ei.set8(e.sourceID.length),ei.setCharStr(e.sourceID),ei.set32(e.alias),null!==e.bitmap&&(ei.set8(e.bitmap.byteLength),ei.setBytes(e.bitmap,0,e.bitmap.byteLength)),ei.crc(),ei.getReferData()}},{key:"unPkgHeartBeat",value:function(e){Bi.resetData(e),this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.version=Bi.get8(),this.heartbeatParam.type=Bi.get8(),this.heartbeatParam.localID=Bi.get32();var t=Bi.get8();this.heartbeatParam.lostR=Bi.get8();var n=Bi.get8();return this.heartbeatParam.vid=Bi.getCharStr(n),n=Bi.get8(),this.heartbeatParam.sourceID=Bi.getCharStr(n),this.heartbeatParam.alias=Bi.get32(),1&t?(n=Bi.get8(),this.heartbeatParam.bitmap=Bi.getBytes(n)):this.heartbeatParam.bitmap=null,this.heartbeatParam.crc=Bi.crc(),this.heartbeatParam}},{key:"pkgRequest",value:function(e){if(e.length>0){for(ei.resetData(),ei.set8(Wa),ei.set8(Ya),ei.set32(e[0].alias),ei.set8(e.length);e.length>0;){var t=e.shift();ei.set32(t.subPieceID)}return ei.crc(),ei.getReferData()}return null}},{key:"unPkgRequest",value:function(e){Bi.resetData(e),this.requestParam||(this.requestParam={}),this.requestParam.version=Bi.get8(),this.requestParam.type=Bi.get8(),this.requestParam.alias=Bi.get32(),this.requestParam.taskLen=Bi.get8(),this.requestParam.requireTaskList||(this.requestParam.requireTaskList=[]),this.requestParam.requireTaskList.length=0;for(var t=0;t<this.requestParam.taskLen;)this.requestParam.requireTaskList.push(Bi.get32()),t++;return this.requestParam.crc=Bi.crc(),this.requestParam}},{key:"unPkgReceive",value:function(e){Bi.resetData(e),this.receiveParam||(this.receiveParam={}),this.receiveParam.version=Bi.get8(),this.receiveParam.type=Bi.get8(),this.receiveParam.alias=Bi.get32(),this.receiveParam.sIDList?this.receiveParam.sIDList.length=0:this.receiveParam.sIDList=[],this.receiveParam.dataList?this.receiveParam.dataList.length=0:this.receiveParam.dataList=[];for(var t=Bi.get8(),n=0;n<t;)this.receiveParam.sIDList[n]=Bi.get32(),this.receiveParam.dataList[n]=Bi.getBytes(dr.c.subPieceSize),n++;return this.receiveParam.crc=Bi.crc(),this.receiveParam}},{key:"pkgClear",value:function(){return ei.resetData(),ei.set8(Wa),ei.set8(Ja),ei.crc(),ei.getReferData()}},{key:"unPkgClear",value:function(e){return Bi.resetData(e),this.clearParam||(this.clearParam={}),this.clearParam.version=Bi.get8(),this.clearParam.type=Bi.get8(),this.clearParam.crc=Bi.crc(),this.clearParam}},{key:"pkgRefuse",value:function(){return ei.resetData(),ei.set8(Wa),ei.set8(Xa),ei.crc(),ei.getReferData()}},{key:"unPkgRefuse",value:function(e){return Bi.resetData(e),this.refuseParam||(this.refuseParam={}),this.refuseParam.version=Bi.get8(),this.refuseParam.type=Bi.get8(),this.refuseParam.crc=Bi.crc(),this.refuseParam}},{key:"pkgDescribe",value:function(e){return ei.resetData(),ei.set8(Wa),ei.set8(Za),ei.set16(e.byteLength),ei.setBytes(e,0,e.byteLength),ei.crc(),ei.getReferData()}},{key:"unPkgDescribe",value:function(e){Bi.resetData(e),this.describeParam||(this.describeParam={}),this.describeParam.version=Bi.get8(),this.describeParam.type=Bi.get8();var t=Bi.get16();return this.describeParam.describe=Bi.getBytes(t),this.describeParam.crc=Bi.crc(),this.describeParam}}]),e}();function co(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var ho=Math.floor(4294967295*Math.random()),po=new Mr,vo=function(e){Ye()(n,e);var t=fo(n);function n(e,r,i,a){var o;return Ue()(this,n),(o=t.call(this,e,r,i,a)).checked=!1,o.srtt=0,o.sdev=0,o.quota=32,o.mtu=1,o.lostR=0,o.lostHB=0,o.loadHB=0,o.rcvHB=0,o.upHB=0,o.lostCnt=0,o.loadCnt=0,o.rcvCnt=0,o.upCnt=0,o.peerInfo={loadBitmap:undefined,hasBitmap:!1,sourceID:"",alias:"",vid:"",peerLocalID:"",lostR:0},o.runTaskList=new Mr,o.srcDscr=new Mr,o.checkRTOLastTime=-1,o.heartbeatLastTime=-1,o.heartbeatCnt=6,o.createdTime=Date.now(),o}return He()(n,[{key:"check",value:function(){this.baseCheck()&&this.ready&&(this.checkHeartbeat()||this.loadTask(),this.checkRTO())}},{key:"checkHeartbeat",value:function(){if(Date.now()-this.heartbeatLastTime>3e3&&pi.loadSegment){if(this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.localID=ho,this.heartbeatParam.vid=pi.loadSegment.vid,this.heartbeatParam.alias=pi.loadSegment.alias,this.heartbeatParam.sourceID=pi.loadSegment.sourceID,pi.preLoadSegment?(this.heartbeatParam.preInfo.alias=pi.preLoadSegment.alias,this.heartbeatParam.preInfo.sourceID=pi.preLoadSegment.sourceID):(this.heartbeatParam.preInfo.alias="",this.heartbeatParam.preInfo.sourceID=""),""!==this.peerInfo.alias&&pi.hasSegment(this.peerInfo.alias)&&!0===dr.i.p2pUpLoad){var e=pi.getSegment(this.peerInfo.alias);this.heartbeatParam.bitmap=e.bitmap.toData()}else this.heartbeatParam.bitmap=null;return 0===this.loadHB?this.heartbeatParam.lostR=255:this.heartbeatParam.lostR=this.lostR,this.fireData($a,this.heartbeatParam),this.lostHB=0,this.loadHB=0,this.lostR>5?this.lostR-=5:this.lostR=0,this.heartbeatCnt++,this.heartbeatCnt>10&&(this.heartbeatCnt=0,this.fireSourceDescribe()),this.heartbeatLastTime=Date.now(),!0}return!1}},{key:"loadTask",value:function(){if(Ha.loadQuota>0&&this.peerInfo.hasBitmap&&pi.loadSegment&&this.peerInfo.loadBitmap.alias===pi.loadSegment.alias){if(this.quota<this.runTaskList.size)return;var e=Math.max(this.srtt<200?this.quota/2:this.quota/3,1),t=Math.min(this.quota-this.runTaskList.size,e);if(this.taskList||(this.taskList=[]),this.taskList.length=0,pi.loadSegment.getTasks(this.peerInfo.loadBitmap,this.taskList,t,this.timeout),t-=this.taskList.length,this.taskList.length>0){this.loadHB=this.loadHB+this.taskList.length,this.loadCnt=this.loadCnt+this.taskList.length;for(var n=0;n<this.taskList.length;n++)this.runTaskList.set(this.taskList[n].key,this.taskList[n]);this.fireData(Ya,this.taskList),Ha.loadQuota=Ha.loadQuota-n}}}},{key:"checkRTO",value:function(){if(!(Date.now()-this.checkRTOLastTime<=500)){this.checkRTOLastTime=Date.now();var e,t=0,n=co(this.runTaskList.values);try{for(n.s();!(e=n.n()).done;){var r=zr()(e.value,2)[1];if(Date.now()-r.beginTime>r.rto){t++;var i=pi.getSegment(r.alias);i&&i.recycleP2PTask(r),this.runTaskList.remove(r.key)}}}catch(th){n.e(th)}finally{n.f()}this.updateQuota(t),this.lostCnt=this.lostCnt+t,this.lostHB=this.lostHB+t,this.lostR=this.lostR+t}}},{key:"timeout",get:function(){if(0===this.srtt)return 3e3;var e=Math.min(1e3+500*this.lostR,3e3),t=this.srtt+4*this.sdev+350;return Math.min(t+e,8e3)}},{key:"update_SRTT_SDEV",value:function(e){var t;0===this.srtt?(this.srtt=e,this.sdev=e/2):(t=Math.abs(e-this.srtt),this.srtt=.875*this.srtt+.125*e,this.sdev=this.sdev+.25*(t-this.sdev))}},{key:"updateQuota",value:function(e){e?(this.quota-=Math.sqrt(e/2),this.quota<2&&(this.quota=2)):this.quota<128&&0!==this.srtt&&this.srtt>1&&this.srtt<3e3&&(this.quota+=Math.log(this.srtt+500)/50)}},{key:"onHeartbeat",value:function(e){if(e.crc){if(this.peerInfo.sourceID=e.sourceID,this.peerInfo.alias=e.alias,this.peerInfo.vid=e.vid,this.peerInfo.peerLocalID=e.localID,!1===this.checked){if(po.has(e.localID))return void this.peerMgr.removePeerNode(this.peerID,oo);po.set(e.localID,!0),this.checked=!0}var t=pi.getSegment(e.alias);t&&e.sourceID!==t.sourceID?this.peerMgr.removePeerNode(this.peerID,ao):(e.bitmap?(this.peerInfo.hasBitmap=!0,this.peerInfo.loadBitmap===undefined&&(this.peerInfo.loadBitmap=new Ga),this.peerInfo.loadBitmap.fromData(e.bitmap),pi.hasSegment(this.peerInfo.loadBitmap.alias)&&this.peerInfo.loadBitmap.resetGap(pi.getSegment(this.peerInfo.loadBitmap.alias).gpID)):this.peerInfo.hasBitmap=!1,255!==e.lostR&&(this.peerInfo.lostR=e.lostR,0===this.peerInfo.lostR?this.mtu=Math.min(this.mtu+1,16):this.mtu=Math.max(this.mtu-Math.ceil(this.peerInfo.lostR/2),1)))}else this.peerMgr.removePeerNode(this.peerID,ao)}},{key:"onRequest",value:function(e){if(e.crc){var t=e.alias;if(this.requestParam||(this.requestParam={}),this.requestParam.alias=t,this.requestParam.sIDList?this.requestParam.sIDList.length=0:this.requestParam.sIDList=[],this.requestParam.dataList?this.requestParam.dataList.length=0:this.requestParam.dataList=[],pi.getSegment(t)){for(var r=pi.getSegment(t),i=0;e.requireTaskList.length>0;){var a=e.requireTaskList.shift(),o=r.requestTask(a);o&&(i<this.mtu?(this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,this.upHB+=o.byteLength,i++):(Ha.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upCnt+=i+1),this.requestParam.dataList.length=0,this.requestParam.sIDList.length=0,i=0,this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,i++))}this.requestParam.dataList.length>0&&this.requestParam.sIDList.length>0&&this.requestParam.sIDList.length===this.requestParam.dataList.length&&Ha.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upHB+=this.requestParam.dataList.length,this.upCnt+=i+1)}}else this.peerMgr.removePeerNode(this.peerID,ao)}},{key:"onReceive",value:function(e){if(e.crc){var t=pi.getSegment(e.alias);if(t)for(var n,r;e.sIDList.length>0;){n=e.sIDList.shift(),r=e.alias.toString()+"_"+n.toString();var i=e.dataList.shift();t.addSubPiece(n,i),this.rcvHB+=i.byteLength,this.rcvCnt++,this.runTaskList.has(r)?(this.update_SRTT_SDEV(Date.now()-this.runTaskList.get(r).beginTime),this.runTaskList.remove(r)):this.update_SRTT_SDEV(this.timeout)}}else this.peerMgr.removePeerNode(this.peerID,ao)}},{key:"clearTask",value:function(){var e,t=co(this.runTaskList.values);try{for(t.s();!(e=t.n()).done;){var n=zr()(e.value,1)[0],r=this.runTaskList.remove(n);if(r){var i=pi.getSegment(r.alias);i&&i.recycleP2PTask(r)}}}catch(th){t.e(th)}finally{t.f()}}},{key:"onClear",value:function(e){e.crc?Ha.removeTsk(this.peerID):this.peerMgr.removePeerNode(this,ao)}},{key:"onRefuse",value:function(e){if(e.crc){var t,n=co(this.runTaskList.values);try{for(n.s();!(t=n.n()).done;){var r=zr()(t.value,1)[0],i=this.runTaskList.remove(r);if(i){var a=pi.getSegment(i.alias);a&&a.recycleP2PTask(i)}}}catch(th){n.e(th)}finally{n.f()}this.fireData(Ja,null)}else this.peerMgr.removePeerNode(this,ao)}},{key:"onQuit",value:function(e){e.crc?this.peerMgr.removePeerNode(this.peerID,eo):this.peerMgr.removePeerNode(this.peerID,ao)}},{key:"fireSourceDescribe",value:function(){if(this.peerInfo.vid){var e=pi.getSourceDescribe(this.peerInfo.vid);e&&e.byteLength>0&&this.fireData(Za,e)}}},{key:"onDescribe",value:function(e){if(e.crc){if(e.describe){Bi.resetData(e.describe);var t=Bi.get16(),n=Bi.getCharStr(t);if(!pi.loadSegment||n!==pi.loadSegment.vid)return;this.srcDscr.clear();for(var r=Bi.get16(),i=0;i<r;i++){t=Bi.get16();var a=new Ga;a.alias=Bi.get32(),a.size=Bi.get32(),a.data=Bi.getBytes(t-8),this.srcDscr.set(a.alias,a)}}}else this.peerMgr.removePeerNode(this.peerID,ao)}},{key:"checkHealth",value:function(e){if(this.rcvCnt<=0||this.srcDscr.size<=0)return!1;if(this.peerInfo&&this.peerInfo.hasBitmap&&this.peerInfo.alias===e)return this.peerInfo.loadBitmap.checkRange(pi.getSegment(e).gpID,pi.getSegment(e).gpID+8);if(this.srcDscr.has(e)){var t=this.srcDscr.get(e);if(t)return t.checkRange(pi.getSegment(e).gpID,pi.getSegment(e).gpID+8)}return!1}},{key:"peerClose",value:function(e){""!==this.peerInfo.peerLocalID&&po.has(this.peerInfo.peerLocalID)&&e!==oo&&po.remove(this.peerInfo.peerLocalID),this.clearTask(),this.close(),delete this.peerMgr,this.peerMgr=null}},{key:"protected",get:function(){return Date.now()-this.createdTime<=3e4}},{key:"reset",value:function(){this.rcvHB=0,this.upHB=0}},{key:"log",get:function(){return" [ "+(this.active?this.ready?"open ":"idle ":"passv")+" ] , nat : "+hr.a.trimNumber(this.natUseTime/1e3,10)+" s , rcvHB : "+hr.a.trimNumber(this.rcvHB/1024,1e3)+" K , rcvCnt : "+hr.a.trimNumber(this.rcvCnt,1e6)+", upHB : "+hr.a.trimNumber(this.upHB/1024,1e3)+" K , upCnt : "+hr.a.trimNumber(this.upCnt,1e6)+", lostHB : "+hr.a.trimNumber(this.lostHB/1024,1e3)+" K , lostCnt : "+hr.a.trimNumber(this.lostCnt,1e5)+"\r\n"}}],[{key:"pkgReceive",value:function(e){for(ei.resetData(),ei.set8(Wa),ei.set8(Qa),ei.set32(e.alias),ei.set8(e.sIDList.length);e.sIDList.length>0;)ei.set32(e.sIDList.shift()),ei.setBytes(e.dataList.shift(),0,dr.c.subPieceSize);return ei.crc(),ei.getReferData()}}]),n}(uo);function yo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return go(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var _o=0,bo=new Mr,xo="",ko=-1,wo=!1,So="",To=function(e){Ye()(n,e);var t=mo(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e,r,(function(e,t,n){this.onMsg(e,t,n)}))).localID="",i.workPeers=new Mr,i.trackerPeers=[],i.upTaskSum=0,i.downTaskSum=0,i.upSpeed=0,i.downSpeed=0,i}return He()(n,[{key:"onMsg",value:function(e,t,n){switch(e){case ka.State_register:this.localID=t;break;case ka.State_upDatePeers:this.localID=t,this.updatePeers(n);break;case ka.State_candidate:this.workPeers.has(t)&&this.workPeers.get(t).candidate(n);break;case ka.State_offer:this.workPeers.has(t)||this.acceptPeer(t,n);break;case ka.State_answer:this.workPeers.has(t)&&this.workPeers.get(t).answer(n);case ka.State_Error:}}},{key:"onTimer",value:function(){var e,t=yo(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){zr()(e.value,2)[1].check()}}catch(th){t.e(th)}finally{t.f()}}},{key:"check",value:function(e){pi.loadSegment&&pi.loadSegment.alias!==So&&(wo=!0),this.addPeer(),this.weedOutPeer(),this.connectPeer(),this.upSpeed=0,this.downSpeed=0,xo="",e&&(xo+=" ---- tracker ID : "+this.id+" , IP : "+this.ip+" , localD : "+this.localID+"\r\n");var t,n=yo(this.workPeers.values);try{for(n.s();!(t=n.n()).done;){var r=zr()(t.value,2)[1];e&&(xo+=r.log),this.upSpeed+=r.upHB,this.downSpeed+=r.rcvHB,this.upTaskSum+=r.upHB,this.downTaskSum+=r.rcvHB,r.reset()}}catch(th){n.e(th)}finally{n.f()}return xo}},{key:"addPeer",value:function(){(!this.getPeerMark||wo||this.getPeerMark+dr.h.getPeerIDStep<Date.now())&&pi.loadSegment&&!pi.loadSegment.done&&pi.loadSegment.p2pID===this.id&&(So=pi.loadSegment.alias,wo=!1,this.getPeerMark=Date.now(),this.getPeer(pi.loadSegment))}},{key:"weedOutPeer",value:function(){if(!this.weedOutPeerMark||this.weedOutPeerMark+dr.h.weedOutPeerStep<Date.now()){this.weedOutPeerMark=Date.now();var e,t="",n=0,r=yo(this.workPeers.values);try{for(r.s();!(e=r.n()).done;){var i=zr()(e.value,1)[0],a=this.workPeers.get(i);if(a&&!a["protected"]){var o=a.rcvCnt-(a.rcvCntLT?a.rcvCntLT:0);a.rcvCntLT=a.rcvCnt;var s=a.upCnt-(a.upCntLT?a.upCntLT:0);a.upCntLT=a.upCnt,(s+o<n||0===n)&&(n=s+o,t=a.peerID)}}}catch(th){r.e(th)}finally{r.f()}this.workPeers.size>6&&""!==t&&this.removePeerNode(t,io)}}},{key:"connectPeer",value:function(){if(-1===ko||Date.now()-ko>dr.h.connectPeerStep)for(var e=0;e<this.trackerPeers.length&&_o<dr.h.connectMax;){e++;var t=this.trackerPeers.shift();if(t&&!this.checkErrPeerID(t)){if(!Da.use(t)){this.trackerPeers.push(t);continue}this.workPeers.set(t,new vo(this,t,!0)),_o<dr.h.connectMax&&_o++,ko=Date.now();break}}}},{key:"acceptPeer",value:function(e,t){if(_o<dr.h.passiveMax&&!this.workPeers.has(e)&&Date.now()-ko>dr.h.connectPeerStep){if(!Da.use(e))return void this.trackerPeers.push(e);this.workPeers.set(e,new vo(this,e,!1,t)),_o<dr.h.passiveMax&&_o++,ko=Date.now()}}},{key:"checkErrPeerID",value:function(e){if(null===e||""===e||e===this.localID)return!0;if(this.workPeers.has(e))return!0;var t=bo.get(e);return t&&Date.now()-t.time<t.duration}},{key:"updatePeers",value:function(e){if(e){this.trackerPeers.length=0;for(var t=0;t<e.length;t++){var n=e[t];this.workPeers.has(n)||null===n||""===n||n===this.localID||this.trackerPeers.push(n)}this.connectPeer()}}},{key:"clearTask",value:function(){var e,t=yo(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){zr()(e.value,2)[1].clearTask()}}catch(th){t.e(th)}finally{t.f()}}},{key:"checkP2PHealth",value:function(e){var t,n=0,r=yo(this.workPeers.values);try{for(r.s();!(t=r.n()).done;){var i=zr()(t.value,2)[1];i.checkHealth(e)?n++:this.workPeers.size>6&&this.removePeerNode(i.peerID,eo)}}catch(th){r.e(th)}finally{r.f()}return n}},{key:"removePeerNode",value:function(e,t){if(this.workPeers.has(e)){this.workPeers.get(e).peerClose(t),this.workPeers.remove(e),Da.shut(e),_o>0&&_o--;var n={};if(n.time=Date.now(),t===no)n.duration=12e4;else n.duration=6e4;var r=bo.get(e);r?bo.set(e,{time:n.time,duration:r.duration+n.duration}):bo.set(e,n)}}},{key:"destroy",value:function(){var e,t=yo(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){var n=zr()(e.value,1)[0];this.removePeerNode(n,eo),_o>0&&_o--}}catch(th){t.e(th)}finally{t.f()}this.workPeers.clear(),this.trackerPeers.length=0,this.clear()}}]),n}(wa),Po=null,Eo=null,Ao=0,Io=!1,Do=30;function Lo(){if(Do>=30){Do=0;var e=0,t=0;fr.a.p2pLog="",Po&&(fr.a.p2pLog+=Po.check(fr.a.onLog),e+=Po.upSpeed,t+=Po.downSpeed),Eo&&(fr.a.p2pLog+=Eo.check(fr.a.onLog),e+=Eo.upSpeed,t+=Eo.downSpeed),fr.a.downSpeed=t,fr.a.upSpeed=e;var n=Math.min(Math.max(fr.a.upMax,32),768);Math.ceil(Date.now()/1e3%100)<=20?Ha.sendMax=1.2*n:Ha.sendMax=.6*n,pi.loadSegment&&(Ha.loadQuotaMax=2.5*pi.loadSegment.rate)}Do%2==0?(Ha.check(),Do++):(Do++,Po&&Po.onTimer(),Eo&&Eo.onTimer()),Ao=setTimeout(Lo,33)}var Oo,Ro,Co,Mo,Bo,No,Fo={startProxy:function(e,t){Io||(Lo(),Io=!0),null===Po?Po=new To(e,t):null===Eo?Eo=new To(e,t):Po.upTaskSum>Eo.upTaskSum?(Eo.destroy(),Eo=new To(e,t)):(Po.destroy(),Po=new To(e,t))},getProxyByID:function(e){return Po&&e===Po.id?Po:Eo&&e===Eo.id?Eo:null},hasProxyByID:function(e){return!(!Po||e!==Po.id)||Eo&&e===Eo.id},getProxyByIPInfo:function(e){return Po&&e===Po.firstIPInfo?Po:Eo&&e===Eo.firstIPInfo?Eo:null},hasProxyByIPInfo:function(e){return!(!Po||e!==Po.firstIPInfo)||Eo&&e===Eo.firstIPInfo},destroy:function(){Po&&Po.destroy(),Eo&&Eo.destroy(),Io&&(clearTimeout(Ao),Ao=0,Io=!1)}},qo=function(){function e(t,n,r){Ue()(this,e),this.index=n,this.base=r,this.size=t,this.u8a=null}return He()(e,[{key:"setData",value:function(e,t){if(!this.u8a){dr.c.videoDataSize+=this.size,this.u8a=null;for(var n=0;null===this.u8a;)try{n++,this.u8a=new Uint8Array(this.size)}catch(th){if(n>dr.g)return gr.a.error("setData Uint8Array tryCatchError"),!1}}return this.u8a.set(e,t-this.base),!0}},{key:"getData",value:function(e,t){return this.u8a?this.u8a.subarray(e-this.base,e-this.base+t):null}},{key:"clear",value:function(){this.u8a&&(dr.c.videoDataSize-=this.size,delete this.u8a)}},{key:"memory",get:function(){return this.u8a?this.size:0}}]),e}(),jo=0,Uo=dr.c.chunkSize,Vo=dr.c.subPieceSize,Ho=function(){function e(t){Ue()(this,e),this.readSize=Math.ceil(t/Vo)*Vo,this.chunkNum=Math.ceil(this.readSize/Uo),this.dataArr=[],this.readLastIndex=0;for(var n=0;n<this.chunkNum;)this.dataArr.push(new qo(Uo,n,n*Uo)),n++}return He()(e,[{key:"readBytes",value:function(e,t){if(Ro=(Oo=e)+t-1,Oo>=this.readSize||t<=0||Ro>=this.readSize)throw gr.a.warn("readBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+Oo+" _eRGPos : "+Ro+" dataLen: "+t),"readBytes param Error!";Co=Math.floor(Oo/Uo),Mo=Math.floor(Ro/Uo);for(var n=0,r=null,i=0;null===r;)try{i++,r=new Uint8Array(t)}catch(nh){if(i>dr.g)return gr.a.error("readBytes Uint8Array tryCatchError"),++jo>dr.g&&(Or.errorStage="memoryAllocErr",Or.errorFragment=this),null}for(;Co<=Mo;){Oo>=(Bo=Co*Uo)&&(Bo=Oo),(No=Co*Uo+Uo-1)>=Ro&&(No=Ro);var a=this.dataArr[Co].getData(Bo,No-Bo+1);a&&r.set(a,n),n+=No-Bo+1,Co++}return this.readLastIndex=Math.floor((e+t)/Uo),r}},{key:"writeBytes",value:function(e,t,n){if(Ro=(Oo=t)+n-1,Oo>=this.readSize||n<=0||Ro>this.readSize||!e)throw gr.a.warn("writeBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+Oo+" _eRGPos : "+Ro+" dataLen: "+n),"writeBytes param Error!";Co=Math.floor(Oo/Uo),Mo=Math.floor(Ro/Uo);for(var r=0;Co<=Mo;){if(Oo>=(Bo=Co*Uo)&&(Bo=Oo),(No=Co*Uo+Uo-1)>=Ro&&(No=Ro),!this.dataArr[Co].setData(e.subarray(r,r+(No-Bo+1)),Bo)){++jo>dr.g&&(Or.errorStage="memoryAllocErr",Or.errorFragment=this);break}r+=No-Bo+1,Co++}return r}},{key:"clear",value:function(){for(var e=0;e<this.chunkNum;)this.dataArr[e]&&this.dataArr[e].clear(),e++;delete this.dataArr}},{key:"remove",value:function(){for(var e=0;e<this.readLastIndex;)this.dataArr[e]&&this.dataArr[e].clear(),e++}},{key:"freeChunk",value:function(e,t){for(var n=Math.floor(e/Uo),r=Math.floor((e+t)/Uo);n<r;)this.dataArr[n]&&this.dataArr[n].clear(),n++}},{key:"memory",get:function(){if(!this.dataArr)return 0;for(var e=0,t=0;e<this.chunkNum;)this.dataArr[e]&&(t+=this.dataArr[e].memory),e++;return t}},{key:"resetReadLastIndex",value:function(){this.readLastIndex=0}}]),e}(),zo=new Mr;var Go={create:function(e,t){zo.has(e)||zo.set(e,new Ho(t))},get:function(e){return zo.get(e)},remove:function(e){zo.has(e)&&(zo.get(e).clear(),zo.remove(e))},removeChunk:function(e){zo.has(e)&&zo.get(e).remove()},freeChunk:function(e,t,n){zo.has(e)&&zo.get(e).freeChunk(t,n)}},Wo=function(){function e(t,n){Ue()(this,e),this.rto=3e3,this.alias=t,this.subPieceID=n,this.beginTime=Date.now()}return He()(e,[{key:"key",get:function(){return this.alias.toString()+"_"+this.subPieceID.toString()}},{key:"timeOut",get:function(){return this.beginTime+this.rto}}]),e}(),Ko=n(12),$o=256,Yo=262144,Qo=dr.c.subPieceSize,Jo=[105,115,111,109],Xo=function(){function e(t,n,r,i,a,o,s,u,c,l,d,f,h,p){Ue()(this,e),this.tvid=n,this.sourceID=r,this.vid=s,this.p2pID=u,this.alias=o,this.peerCnt=-1,this.vids=l,this.size=t,this.index=a,this.posList=h,this.refreshFun=null,this._dataLen=0,this.shareDataNum=0,this.status=0,this.ceSID=0,this.gpSID=0,this.pieceNum=Math.ceil(this.size/Yo),this.subPcNum=Math.ceil(this.size/Qo),this.bitmap=new Ga(this.pieceNum,this.alias),this.subBitmap=new Ga(this.subPcNum,this.alias),this.runSubBitmap=new Ga(this.subPcNum,this.alias),this.bsID=-1,this.esID=this.subPcNum,this.fragmentName="",this.fileType=d,this.seekable=f,this.rate=c,this.p2pStartTime=performance.now(),this._checkDataStep=0,this._notifyDataStep=0,this._p2pCheckDataStep=0,this._TMPKeyList=[],this._TMPDataList=[],this._TMPRcvCnt=0,this._tsLoadDone=!1,this.dataErrCount=0,this.endPos=0,this.averageBitrate=p,Go.create(this.alias,this.size)}return He()(e,[{key:"tsLoadDone",get:function(){return this._tsLoadDone},set:function(e){this._tsLoadDone=e}},{key:"dataLen",get:function(){return this._dataLen},set:function(e){this._dataLen=e}},{key:"state",get:function(){return this.status},set:function(e){this.status=e}},{key:"setPosList",value:function(e){this.seekable=e}},{key:"setRange",value:function(e,t){var n=Math.floor(this.bsID/$o);this.bitmap.getBit(n)&&!this.subBitmap.checkRange(n*$o,(n+1)*$o)&&this.bitmap.setBit(n,!1);var r=Math.ceil(this.esID/$o);this.bitmap.getBit(r)&&!this.subBitmap.checkRange(r*$o,(r+1)*$o)&&this.bitmap.setBit(r,!1),this.ePos=t,this.bsID=Math.floor(e/Qo),this.esID=Math.ceil(t/Qo),this.checkGpSID(this.bsID),this.checkCEPos(this.bsID),gr.a.info("segment.setRange , index = "+this.index+",range "+e+"-"+t+" ,cePos "+this.cePos),this.refreshFun&&this.refreshFun.call(null);var i=Go.get(this.alias);i&&i.resetReadLastIndex()}},{key:"addData",value:function(e,t,n){arguments.length>3&&undefined;var r=Go.get(this.alias);if(r){n=r.writeBytes(t,e,n);for(var i=Math.ceil(e/Qo),a=e+n>=this.size?this.subPcNum:Math.floor((e+n)/Qo);i<a;)this.subBitmap.setBit(i,!0),this.runSubBitmap.setBit(i,!0),i++;this._dataLen+=n;var o=this;fr.a.pcwBuffer<2||0===e&&8192===n?this.checkData():0===this._checkDataStep&&(this._checkDataStep=setTimeout((function(){o&&o.checkData.call(o)}),500)),"load"===dr.a.reportType&&(this.checkCEPos(this.ceSID),this.refreshFun&&this.refreshFun())}else gr.a.warn("segment is null when addData ,index "+this.index+", rate "+this.rate)}},{key:"checkData",value:function(){var e=this;clearTimeout(this._checkDataStep),this._checkDataStep=0,this.checkGpSID(this.gpSID);for(var t=Math.floor(this.bsID/$o),n=Math.ceil(this.size/Yo);t<n;){var r=t*$o,i=(t+1)*$o;this.bsID>=r&&this.bsID<=i&&(r=this.bsID),this.esID>=r&&this.esID<=i&&(i=this.esID),this.subBitmap.checkRange(r,i)&&this.bitmap.setBit(t,!0),t++}var a=this.ceSID;this.checkCEPos(this.ceSID),this.refreshFun&&this.refreshFun(),a<this.ceSID&&fr.a.noticeDataArrived&&(this._notifyDataStep||(this._notifyDataStep=setTimeout((function(){e._notifyDataStep=0,fr.a.noticeDataArrived()}),1)))}},{key:"getData",value:function(e,t){if(2===dr.i.fastGC){var n=Go.get(this.alias).readBytes(e,t);return n&&n.byteLength&&this.freeChunk(this.alias,e,n.byteLength),n}return Go.get(this.alias).readBytes(e,t)}},{key:"hasData",value:function(e,t){for(var n=Math.floor(e/Qo),r=Math.ceil(Math.min(e+t,this.size)/Qo);n<r;){if(!this.subBitmap.getBit(n))return!1;n++}return!0}},{key:"checkCEPos",value:function(e){for(var t=e!==undefined?e:this.ceSID;t<this.subPcNum&&this.subBitmap.getBit(t);)t++;this.ceSID=Math.min(t,this.subPcNum)}},{key:"deleteRange",value:function(e,t,n){for(var r=Math.min(e+t,this.size),i=Math.floor(e/Qo),a=Math.ceil(r/Qo);i<a;)this.subBitmap.setBit(i,!1),this.runSubBitmap.setBit(i,!1),i++;for(var o=Math.floor(e/Yo),s=Math.ceil(r/Yo);o<s;)this.bitmap.setBit(o,!1),o++;n||(this.checkGpSID(this.bsID),this.checkCEPos(this.bsID))}},{key:"checkTask",value:function(e,t){var n=Math.floor(e/Qo),r=Math.min(this.subPcNum,Math.ceil(t/Qo));(r-n)*Qo+dr.c.videoDataSize>dr.c.videoMaxSize&&2===dr.i.fastGC&&(r=n+Math.floor((dr.c.videoMaxSize-dr.c.videoDataSize)/Qo));for(var i=[],a=0,o=-1,s=-1;n<r;)this.subBitmap.getBit(n)?(-1!==o&&a++,a>=32&&(i.push({begin:o*Qo,end:Math.min((s+1)*Qo,this.size)}),o=-1,s=-1,a=0)):(a=0,-1===o&&(o=n),s=n,this.runSubBitmap.setBit(n,!0)),n++;return-1!==o&&i.push({begin:o*Qo,end:Math.min((s+1)*Qo,this.size)}),this.checkGpSID(this.gpSID),i}},{key:"recycleCDNTask",value:function(e){for(var t,n,r,i=0;i<e.length;i++)for(t=e[i],n=Math.floor(t.begin/Qo),r=Math.min(this.subPcNum,Math.ceil(t.end/Qo));n<r;)this.subBitmap.getBit(n)||this.runSubBitmap.setBit(n,!1),n++;this.checkGpSID(this.bsID),this.checkCEPos(this.bsID)}},{key:"recycleP2PTask",value:function(e){!this.subBitmap.getBit(e.subPieceID)&&this.runSubBitmap.getBit(e.subPieceID)&&(this.runSubBitmap.setBit(e.subPieceID,!1),e.subPieceID<this.gpSID&&this.checkGpSID(e.subPieceID))}},{key:"checkGpSID",value:function(e){for(this.gpSID=e;this.gpSID<this.subPcNum&&!(!this.runSubBitmap.getBit(this.gpSID)&&!this.subBitmap.getBit(this.gpSID)&&this.gpSID>=this.bsID&&this.gpSID<=this.esID);)this.gpSID++}},{key:"addSubPiece",value:function(e,t){if(""===fr.a.loadingBy&&(fr.a.loadingBy="p2p"),t&&t.byteLength>0&&(fr.a.p2pSize+=t.byteLength,fr.a.p2pCostTime+=performance.now()-this.p2pStartTime,this.p2pStartTime=performance.now()),this.fileType===Ko.a.TS){var n=0,r=e*Qo;for(0!==e&&(n=188-r%188);n<t.byteLength&&r+n<this.ePos;){if(71!==t[n])return this.dataErrCount++,void gr.a.error("Segment reveive p2p load data err ,pos "+(r+n)+" ,dataErrCount "+this.dataErrCount);n+=188}}else if(this.fileType.indexOf(Ko.a.M4S)>=0){var i=e*Qo,a=i+t.byteLength,o=hr.a.searchPosIndex(i,this.seekable);if((o=o>=0?o+1:0)<this.seekable.length-1&&this.seekable[o]>=i&&this.seekable[o]+12<=a)for(var s=this.seekable[o]-i+8,u=0;u<Jo.length;){if(t[s+u]!==Jo[u])return this.dataErrCount++,void gr.a.error("Segment reveive p2p load webm data err ,pos "+s+" ,dataErrCount "+this.dataErrCount);u++}}if(this._TMPRcvCnt++,Qo===t.byteLength&&-1===this._TMPKeyList.indexOf(e)){for(var c=!1,l=0;l<this._TMPKeyList.length;l++)if(this._TMPKeyList[l]*Qo+this._TMPDataList[l].byteLength===e*Qo){c=!0;var d=new Uint8Array(this._TMPDataList[l].byteLength+t.byteLength);d.set(this._TMPDataList[l],0),d.set(t,this._TMPDataList[l].byteLength),this._TMPDataList[l]=d;break}if(c||(this._TMPKeyList.push(e),this._TMPDataList.push(t)),this._TMPRcvCnt>=50)this.mergeData();else if(0===this._p2pCheckDataStep){var f=this;this._p2pCheckDataStep=setTimeout((function(){f&&f.mergeData.call(f)}),100)}Oi.p2pSize=Qo+Oi.p2pSize,Ni.b.diy_p2pbw+=Qo,sa.diy_p2pbw+=Qo,this.peerMgr&&(this.peerMgr.p2pSize=Qo+this.peerMgr.p2pSize)}}},{key:"mergeData",value:function(){for(clearTimeout(this._p2pCheckDataStep),this._p2pCheckDataStep=0;this._TMPKeyList.length>0;){var e=this._TMPDataList.shift();this.addData(this._TMPKeyList.shift()*Qo,e,e.byteLength)}this._TMPRcvCnt=0}},{key:"pieceNeed",value:function(e){return e>=this.bID&&e<=this.eID&&!this.bitmap.getBit(e)}},{key:"subPieceNeed",value:function(e){return e>=this.bsID&&e<=this.esID&&!this.subBitmap.getBit(e)}},{key:"getTasks",value:function(e,t,n,r){if(e&&e.alias===this.alias&&!(this.gpSID>=this.esID)){var i=e,a=Math.max(this.gpID,i.gpID),o=Math.min(Math.ceil(this.esID/$o),a+16);if(!((o-a)*$o*Qo+dr.c.videoDataSize>dr.c.videoMaxSize&&2===dr.i.fastGC)){for(var s=this.gpSID;a<o&&t.length<n;){if(i.getBit(a)&&this.pieceNeed(a)){s=a*$o;var u=Math.min((a+1)*$o,this.subPcNum);for(this.gpSID>s&&this.gpSID<u&&(s=this.gpSID);s<u&&t.length<n;){if(this.subPieceNeed(s)){var c=new Wo(this.alias,s);c.rto=r,t.push(c),this.runSubBitmap.setBit(s,!0)}s++}}a++}t.length>0&&this.checkGpSID(this.gpSID)}}}},{key:"clearTask",value:function(){this.peerMgr&&this.peerMgr.clearTask()}},{key:"checkP2PHealth",value:function(){return this.peerMgr?this.peerMgr.checkP2PHealth(this.alias):0}},{key:"requestTask",value:function(e){return this.subBitmap.getBit(e)?(this.shareDataNum++,Oi.upSize=Oi.upSize+Qo,this.peerMgr&&(this.peerMgr.upSize=Qo+this.peerMgr.upSize),this.getData(e*Qo,Qo)):null}},{key:"checkDefinition",value:function(e){if(this.vidsDesc=" [ ",this.vids&&this.vids.length>0&&e.length>0)for(var t=0;t<this.vids.length;t++){for(var n=0;n<e.length;n++)if(this.vids[t].vid===e[n].vid){this.vids[t].count=e[n].count;break}this.vidsDesc+=this.vids[t].bid+":"+(this.vids[t].count===undefined?0:this.vids[t].count)+(t<this.vids.length-1?" , ":"")}this.vidsDesc+=" ]"}},{key:"peerMgr",get:function(){return Fo.getProxyByID(this.p2pID)}},{key:"cePos",get:function(){return Math.min(this.ceSID*Qo,this.size)}},{key:"done",get:function(){return this.ceSID>0&&this.ceSID>=this.esID}},{key:"gpID",get:function(){return Math.floor(this.gpSID/$o)}},{key:"eID",get:function(){return Math.ceil(this.esID/$o)}},{key:"bID",get:function(){return Math.floor(this.bsID/$o)}},{key:"approachEnd",get:function(){return this.cePos>=this.size-5242880}},{key:"memory",get:function(){return Go.get(this.alias)?Go.get(this.alias).memory:0}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"toDataString",value:function(e,t,n){for(var r="",i=Math.floor((-1!==e?e:t)/Yo),a=0,o=Math.floor(t/Yo),s=Math.floor(n/Yo),u=Math.ceil(this.size/Yo),c=this.gpID,l=Math.floor(this.ceSID/$o),d="";a<u;)this.bitmap.getBit(a)?(d="*",l===a&&c===a?d="(EG)":l===a?d="E":c===a&&(d="G")):(d="_",l===a&&c===a?d="(eg)":l===a?d="e":c===a&&(d="g")),i!==undefined&&i===a&&(d="R"),o===a&&(d="‹"+d),s===a&&(d+="›"),r+=d,++a%128==0&&(r+="\r");return r+="┛"}},{key:"destroy",value:function(){gr.a.info("Segment be destroy : "+this.index+" bidRdate :"+this.rate+" tvid : "+this.tvid),this.bitmap.clear(),this.subBitmap.clear(),this.runSubBitmap.clear(),Go.remove(this.alias)}},{key:"freeChunk",value:function(e,t,n){this.destroyChunk(e),gr.a.info("Segment ready to clear data, segmentIndex: ".concat(this.index,", startPos: ").concat(t,", length: ").concat(n))}},{key:"destroyChunk",value:function(e){var t=Go.get(e);if(t){var n=t.readLastIndex*dr.c.chunkSize;n>0&&(gr.a.info("Segment ready to clear data ,pos "+n+" , segment "+this.index),this.deleteRange(0,n,!0),Go.removeChunk(e))}}}]),e}(),Zo=Xo,es=n(100),ts=(n(612),n(97)),ns=n(75),rs=function(){function e(t,n,r){Ue()(this,e);var i=t;this.sourceID=n,this.type=r,this.loader=new XMLHttpRequest,this.loader.responseType="json";var a=this;a.loader.onreadystatechange=function(){if(a.loader.readyState+",",0===a.loader.readyState);else if(1===a.loader.readyState);else if(2===a.loader.readyState);else if(3===a.loader.readyState);else if(200===a.loader.status)if(a.loader.response)if(a.loader.response.hasOwnProperty("uri")){var e=JSON.parse(JSON.stringify(a.loader.response));if(hr.a.getFileNameFromUrl(e.uri)!==a.sourceID)return;a.destroy(),ns.a.getEvent().emit(ts.a.DisLoadStatus+a.type,"done",e)}else o("responseHasNoUri");else o("responseIsNull");else{var t="";if(a.loader.response||405===a.loader.status){a.loader.response&&(t=JSON.stringify(a.loader.response),gr.a.error("Dispatch failure,message "+t),a.loader.response.code)}o("statusErr_"+a.loader.status)}};try{a.loader.open("GET",i,!0),a.loader.withCredentials=!1,gr.a.info("DispatchByXhr url "+i),a.loader.send()}catch(s){o("tryCatchError_"+s.message)}function o(e){a.loader&&(a.destroy(),ns.a.getEvent().emit(ts.a.DisLoadStatus+a.type,"error",e))}}return He()(e,[{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),e}(),is=n(350),as=function(){function e(t,n,r){Ue()(this,e),this.running=!0,this.sourceID=n,this.type=r,this.load(t)}return He()(e,[{key:"load",value:function(e){var t=this;gr.a.info("DispatchByFetch url "+e),fetch(e,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){if(e.status>=400||e.status<200){if(!t.running)return;t.onError("statusErr_"+e.status)}else{if(!t.running)return;e.json().then((function(e){hr.a.getFileNameFromUrl(e.uri)===t.sourceID&&(t.running=!1,ns.a.getEvent().emit(ts.a.DisLoadStatus+t.type,"done",e))}))}}))["catch"]((function(e){t.onError("tryCatchError_"+e.message)}))}},{key:"onError",value:function(e){"statusErr_405"===e&&gr.a.error("Dispatch failure,message "+e),this.running&&(this.running=!1,ns.a.getEvent().emit(ts.a.DisLoadStatus+this.type,"error",e))}},{key:"destroy",value:function(){this.running=!1}}]),e}(),os=as,ss="cn",us="oversea",cs=864e5,ls="pipeIps",ds="pipeTime",fs={ip1:"116.211.198.237",ip2:"39.156.54.66",ip3:"103.44.59.54"},hs={ip:"access-spip.iq.com"},ps=0,vs="",ys=[],gs="",ms=[],_s=null;function bs(){if(!_s&&(gs&&(ys.length>0&&gs===ys[0]&&(ys.shift(),console.log("p2p",{bgpStep:"superIp.remove",ip:gs})),gs=""),ys.length>0&&(gs=ys[0]),gs)){var e=(/^https/gi.test(window.location.protocol)?"https://":"http://")+gs+"/"+(vs===us?"7d0":"3e8")+"/?rn="+Date.now();(_s=new XMLHttpRequest).responseType="text",_s.onreadystatechange=function(){if(4===_s.readyState){var e=_s.status;if(200!==e&&206!==e||!_s.response)_s=null;else{var t=_s.response;ks(ds,Date.now()),ks(ls,t);for(var n=t.split(";");n.length>0;)ms.push(n.shift());_s=null,console.log("p2p",{bgpStep:"pipeIps.request.success",superIp:gs,ipArr:ms,now:Date.now()})}}};try{_s.open("GET",e,!0),_s.send(),_s.timeout=8e3}catch(nh){_s=null}}}function xs(e){try{return localStorage.getItem(e)}catch(nh){return null}}function ks(e,t){try{localStorage.setItem(e,t)}catch(nh){}}var ws=Object.defineProperties({CN:ss,OverSea:us,checkPipeIps:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(0===ps&&0===ys.length&&(e===ss||e===us)){vs=e,ps=Date.now();var t=e===ss?fs:hs;for(var n in t)t[n]&&ys.push(t[n]);console.log("p2p",{bgpStep:"superIp.init",superIpArr:ys})}if(0===ms.length){var r=xs(ds),i=xs(ls),a=0;if(i&&i.length>0&&(a=parseInt(r)),i&&(a<=0||Date.now()-a<=cs)){for(var o=i.split(";");o.length>0;)ms.push(o.shift());console.log("p2p",{bgpStep:"pipeIp.read.success",pipeIpArr:ms,pipeTime:a,now:Date.now()})}}},getPipeIp:function(){return ms.length>0?ms[0]:vs===ss?(bs(),"access.if.iqiyi.com"):vs===us?(bs(),"access.iq.com"):void 0},removePipeIp:function(e){if(ms.length>0&&e===ms[0]){ms.shift();for(var t="",n=0;n<ms.length;n++)t.length>0?t+=";"+ms[n]:t+=ms[n];ks(ls,t),console.log("p2p",{bgpStep:"pipeIp.remove",ip:e,leftIpArr:ms})}}},{disBusiness:{get:function(){return"3eb"},configurable:!0,enumerable:!0},DNSBusiness:{get:function(){return"3f0"},configurable:!0,enumerable:!0}}),Ss=n(127),Ts=new Map;function Ps(e,t){Ts.set(e,t)}function Es(e){return Ts.get(e)}var As={setDArr:Ps,getDArr:Es,remove:function(e){e&&Ts["delete"](e)},clear:function(){Ts.clear()},setFastPlayDarr:function(e){if(fr.a.enableStartSpeed&&e&&e.ts&&e.ts.l){var t=hr.a.getFileNameFromUrl(e.ts.l);if(t)Ps(t,[{URL:e.ts.l,fastPlay:!0,z:e.ts.z}]),fr.a.inSourceID=t,e.ts.t&&e.ts.z&&fr.a.setUserInfo(e.ts.t+"|"+e.ts.z)}},updateSpeed:function(e,t,n){var r=Es(e);if(r)for(var i=0;i<r.length;i++){if(r[i].URL.split("/")[2]===t){r[i].real_speed=n;break}}},updateStatus:function(e,t,n){var r=Es(e);if(r&&t&&n)for(var i=0;i<r.length;i++)if(r[i].URL.split("/")[2].indexOf(t)>=0){r[i].real_status=n;break}},selectDUnit:function(e){var t=Es(e);if(!t||t.length<=0)return null;for(var n=null,r=0;r<t.length;r++)if(!t[r].real_status){if(!t[r].real_low_speed)return t[r];null===n&&(n=t[r])}return n},updateLowSpeed:function(e,t,n){n=Math.max(n,1);var r=Es(e);if(r&&t)for(var i=0;i<r.length;i++)if(r[i].URL.split("/")[2].indexOf(t)>=0){r[i].real_low_speed=n;break}}},Is=null,Ds=null,Ls="",Os=function(){function e(){Ue()(this,e)}return He()(e,[{key:"start",value:function(e,t){this.segment=e;var n=this.segment.dispatchUrl;-1===n.indexOf("?")?n+="?pv=0.1":n+="&pv=0.1",n+="&cross-domain=1",n+="&mss=1",n+="&stauto="+fr.a.absStatus;var r=fr.a.atkMap.get(e.tvid);r&&r.length&&-1===n.indexOf("&atk=")&&(n+="&atk="+r.shift());try{if(t>0&&this.segment.errIDCList.length<3&&this.segment.errIDCList.length>0&&(n+="&retry="+this.segment.errIDCList.length.toString(),n+="&z="+this.segment.errIDCList.toLocaleString().replace(/,/g,"|")),this.segment.dispatchOnError&&(this.segment.dispatchOnError%3==1||this.segment.dispatchOnError%3==2)){var i=hr.a.parseURL(n);n=fr.a.platform===vr.a.WEB?n.replace(i[2]+i[4],ws.getPipeIp()+"/3eb/"+Vr()(i[2])+is.Base64.encode(i[4])):n.replace(i[2],ws.getPipeIp()+"/3eb/"+i[2]),pr.a.isHTTPS&&(n+="&ssl=1")}Is=Date.now(),Ni.b.diy_dispatchcnt++,sa.diy_dispatchcnt++,n&&n.indexOf("/3eb/")>0&&(Ni.b.diy_bgpreqcnt++,sa.diy_bgpreqcnt++),Ls=n,Oi.addPBItem(yi.dispatch_Cnt),ns.a.getEvent().off(ts.a.DisLoadStatus+this.segment.type),ns.a.getEvent().once(ts.a.DisLoadStatus+this.segment.type,this.disLoadStatus.bind(this)),dr.f.xhr||!pr.a.supportFetch||this.segment.dispatchOnError&&this.segment.dispatchOnError%1!=0?this.loader=new rs(n,this.segment.sourceID,this.segment.type):this.loader=new os(n,this.segment.sourceID,this.segment.type),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisStart()}catch(a){this.disError("tryCatchError_"+a.message)}}},{key:"disLoadStatus",value:function(e,t,n){"done"===e?this.disDone(t):this.disError(t,n)}},{key:"disDone",value:function(e){Ni.b.diy_disptime+=Math.floor(Date.now()-Is),Ni.b.diy_dispsucccnt++,sa.diy_disptime+=Math.floor(Date.now()-Is),sa.diy_dispsucccnt++,Ls&&Ls.indexOf("/3eb/")>0&&(Ni.b.diy_bgpsucccnt++,sa.diy_bgpsucccnt++),Oi.addPBItem(yi.dispatch_doneCount),Oi.addPBItem(yi.dispatch_duration,Date.now()-Is),gr.a.info("Dispatch [NORMAL / VIP DONE] data : "+JSON.stringify(e)+", isHttps : "+pr.a.isHTTPS+", sourceID : "+this.segment.sourceID);var t=e.d[0].URL;if(pr.a.isHTTPS&&t.indexOf("https:")<0)return gr.a.error("Dispatch match check err,https Dispatch return http"),void this.disError("notIsHttps");if(Ds&&Ds===this.segment.tvid||(As.clear(),Ds=this.segment.tvid),e.re){for(var n=!1,r=e.d.length-1;r>=0;r--)"dcache"!==e.d[r].z&&(n=!0,fr.a.setUserInfo(e.re+"|"+e.d[r].z));!n&&fr.a.setUserInfo(e.re+"|"+e.d[e.d.length-1].z)}if(Lr.checkConfig(),hr.a.getFileNameFromUrl(e.uri)===this.segment.sourceID){if(dr.d.open){for(var i=e.d,a=[],o=0;o<i.length;o++){var s=i[o];"dcache"===s.z&&a.push(s)}a.length>0?As.setDArr(this.segment.sourceID,a):As.setDArr(this.segment.sourceID,e.d)}else As.setDArr(this.segment.sourceID,e.d);if(pr.a.canP2P&&"off"!==dr.h.limitP2P&&!0===dr.h.onP2P&&dr.i.openP2P&&!this.segment.onTracker){var u=hr.a.getUserInfoFromCookie();if(u.userNetType){var c=hr.a.getTrackerIP(u.userNetType,dr.h.tracker,this.segment.p2pID);""!==c&&(gr.a.info("AND tracker Dispatch [DONE] IP : "+c),this.segment.setTrackerIP(c))}}this.clearIn(),ns.a.getEvent().emit(ts.a.DisPatchStatus+this.segment.type),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisDone()}}},{key:"disError",value:function(e){Ni.b.diy_dispatcherr=encodeURIComponent(e),Ni.b.diy_dispatchurl=encodeURIComponent(Ls),Ni.b.diy_diserrtype=Ss.a.getErrorType(e),sa.diy_dispatcherr=encodeURIComponent(e),sa.diy_dispatchurl=encodeURIComponent(Ls),sa.diy_diserrtype=Ss.a.getErrorType(e),this.clearIn(),ns.a.getEvent().emit(ts.a.DisPatchStatus+this.segment.type,e)}},{key:"clearIn",value:function(e){this.loader&&(this.loader.destroy(),this.loader=null),e&&ns.a.getEvent().off(ts.a.DisLoadStatus+this.segment.type)}},{key:"clear",value:function(){this.clearIn(!0),ns.a.getEvent().off(ts.a.DacheDisLoadStatus+this.segment.type),this.destroyDcacheDisLoader()}},{key:"destroyDcacheDisLoader",value:function(){this.disDcacheDisLoader&&(this.disDcacheDisLoader.destroy(),this.disDcacheDisLoader=null)}}]),e}(),Rs=function(){function e(t,n){Ue()(this,e),this.type=e.type,this.videoType=t,this.eventID=n}return He()(e,[{key:"load",value:function(e,t){Ni.a.size=0,Ni.a.sTime=performance.now(),Ni.a.eTime=0,this.AllTask=e;var n=0;for(this.cache=null,this.loadType=t;null===this.cache;)try{n++,this.cache=new Uint8Array(1048576)}catch(nh){if(n>dr.g)return gr.a.error("FetchLoader catch Uint8Array err : "+nh.message),void this.onError("tryCatchError_oom")}if(this.AllTask&&this.AllTask.url){this.running=!0,this.reader=null,this.readPos=0,this.dataPos=0,this.base=0,this.dataLen=0,this.readLength=0,this.checkSyncHead=!1;var r=this.AllTask.url;if(-1!==r.indexOf("start")&&-1!==r.indexOf("end")||(-1===r.indexOf("?")?-1!==this.AllTask.end&&(r+="?start="+this.AllTask.begin+"&end="+this.AllTask.end):-1!==this.AllTask.end&&(r+="&start="+this.AllTask.begin+"&end="+this.AllTask.end),gr.a.debug("load start: "+this.AllTask.begin+" end: "+this.AllTask.end)),-1===r.indexOf("stauto")&&(r+="&stauto="+fr.a.absStatus),-1===r.indexOf("ori")&&(r+="&ori=pcw"+fr.a.platform),-1===r.indexOf("num"))r+="&num="+Date.now().toString();gr.a.info("[Fetch start load url] "+r);var i=this;fetch(r,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){var t=e.headers?e.headers.get("server-address"):"";if(fr.a.last_cdnIP=t,gr.a.info("fetch Loader, serverIP : "+t+", domain: "+hr.a.getPureIP(i.AllTask.url)+", responseUrl: "+e.url+", status: "+e.status),e.status>=400||e.status<200){if(!i.running)return;i.onError("statusErr_"+e.status)}else if(e.body){if(i.reader=e.body.getReader(),!i.running){if(i.reader)try{i.reader.cancel(),i.reader=null}catch(r){}return}i.pump()}else{var n=e.headers?e.headers.get("content-length"):-1;i.onError("tryCatchError_no_body_"+n)}}))["catch"]((function(e){if(fr.a.last_cdnIP="",i.running)i.onError("tryCatchError_"+e.message.replace(/\s+/g,""));else if(i.reader)try{i.reader.cancel(),i.reader=null}catch(t){}}))}else this.onError("taskError")}},{key:"pump",value:function(){var e=this;if(e.reader)return e.reader.read().then((function(t){if(e.running){var n=t.value;if(n){if(n.byteLength&&(Ni.a.size+=n.byteLength),e.videoType===Ko.a.TS)for(var r=(e.AllTask.begin+e.dataLen)%188==0?0:188-(e.AllTask.begin+e.dataLen)%188;r<n.byteLength;){if(71!==n[r]){for(var i="",a=r;a<Math.min(r+32,n.byteLength);a++)i+=("00"+n[a].toString(16)).slice(-2);return gr.a.error("ts data check err , start pos !== 71 ,pos ",e.AllTask.begin+e.dataLen+r),gr.a.log(n.subarray(r,Math.min(r+188,n.byteLength))),void e.onError("dataError_sync_"+(e.AllTask.begin+e.dataLen+r)+"_"+i)}r+=188}e.dataLen+=n.byteLength;try{if(e.dataPos+n.byteLength>e.cache.byteLength){for(var o=null,s=0;null===o;)try{s++,o=new Uint8Array(e.dataPos+n.byteLength)}catch(nh){if(s>dr.g)return gr.a.error("FetchLoader catch newUint8Array err : "+nh.message),void e.onError("tryCatchError_oom")}var u=e.cache.subarray(e.readPos);o.set(u,0),delete e.cache,e.dataPos=e.dataPos-e.readPos,e.base+=e.readPos,e.readPos=0,e.cache=o}e.cache.set(n,e.dataPos),e.dataPos+=n.byteLength}catch(nh){return gr.a.error("FetchLoader catch err : "+nh.message),void e.onError("dataError_"+nh.message.replace(/\s+/g,""))}}if(e.dataPos-e.readPos>=8192){var c=8192*Math.floor((e.dataPos-e.readPos)/8192);if(e.AllTask.data=e.cache.subarray(e.readPos,e.readPos+c),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.readPos+c},e.videoType!==Ko.a.FTS&&e.AllTask.range.end>e.AllTask.end)return gr.a.error("data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base),void e.onError("dataError_contentLenNoMatch-overflow");e.readLength+=c,ns.a.getEvent().emit(ts.a.LoadStatus+e.eventID,"progress"),e.readPos+=c}if(e.running){if(-1===e.AllTask.end&&-1!==e.AllTask.segment.size&&(e.AllTask.end=e.AllTask.segment.size),t.done||-1!==e.AllTask.end&&e.AllTask.begin+e.base+e.dataPos>=e.AllTask.end){if(e.readPos<e.dataPos){if(e.AllTask.data=e.cache.subarray(e.readPos,e.dataPos),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.dataPos},"fts"!==e.videoType&&e.AllTask&&e.AllTask.range.end>e.AllTask.end)return gr.a.error("~~ data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base+",needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError("dataError_contentLenNoMatch-overflow");e.readLength+=e.dataPos-e.readPos,ns.a.getEvent().emit(ts.a.LoadStatus+e.eventID,"progress"),e.readPos=e.dataPos}if(e.dataLen!==e.readLength)gr.a.error("~~chunkLen: "+e.dataLen+" readLen: "+e.readLength);else if(e.AllTask&&e.dataLen!==e.AllTask.end-e.AllTask.begin)return gr.a.error("need dataLen is not match receive dataLen,needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError("dataError_contentLenNoMatch-"+(e.AllTask.end-e.AllTask.begin)+"-"+e.dataLen);return e.close(),Ni.a.eTime=performance.now(),void ns.a.getEvent().emit(ts.a.LoadStatus+e.eventID,"done")}return e.pump()}}else if(e.reader)try{e.reader.cancel(),e.reader=null}catch(l){}}))}},{key:"onError",value:function(e){if(this.running){if(this.running=!1,this.AllTask=null,this.reader)try{this.reader.cancel(),this.reader=null}catch(t){}ns.a.getEvent().emit(ts.a.LoadStatus+this.eventID,"error",e)}}},{key:"close",value:function(){if(this.running&&(this.running=!1,this.AllTask=null,this.reader))try{this.reader.cancel(),this.reader=null}catch(e){}this.cache&&delete this.cache}}],[{key:"type",get:function(){return"fetch"}}]),e}(),Cs=Rs,Ms=n(662),Bs=1,Ns=2,Fs=3,qs=(n(314),n(777),n(340),null),js="",Us=!1;function Vs(){try{qs&&qs.abort()}catch(nh){}qs=null,js=""}var Hs={start:function ah(e,t,n,r){if(!Us)if(Lr.ready){Us=!0,js=t,qs&&(qs.close(),qs=null);var i=e;-1===i.indexOf("?")?i+="?pv=0.1":i+="&pv=0.1",i+="&cross-domain=1",i+="&mss=1",i+="&stauto="+fr.a.absStatus;var a=fr.a.atkMap.get(r);if(a&&a.length&&-1===i.indexOf("&atk="))i+="&atk="+a.shift();try{var o=new URLSearchParams(new URL(n).search).get("qd_sc");o&&(i+="&ac_qd_sc="+o),(qs=new XMLHttpRequest).responseType="json",qs.onreadystatechange=function(){if(4===qs.readyState){if(200===qs.status&&qs.response.hasOwnProperty("uri")){var e=JSON.parse(JSON.stringify(qs.response));if(js&&hr.a.getFileNameFromUrl(e.uri)===js){var t=e.d,n=As.getDArr(js);if(n&&1===n.length&&t&&t.length>0){new URL(n[0].URL).host;var r=fr.a.domain+"__"+e.re;if(pr.a.isHTTPS)for(var i=0;i<t.length;i++)if(r=r+"__"+new URL(t[i].URL).host+"__"+t[i].z,t[i].URL.indexOf("https")<0)return void Vs();Ni.b.diy_extrainfo=r,sa.diy_extrainfo=r,Object(Ni.e)(),ia(),As.setDArr(js,t)}}}Vs()}},qs.open("GET",i,!0),qs.withCredentials=!1,qs.send()}catch(nh){Vs()}}else setTimeout(ah,200,e,t,n,r)},stop:Vs};function zs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ws=new Map,Ks=setTimeout($s,12e4);function $s(e){clearTimeout(Ks);var t,n=hr.a.getUserInfoFromCookie(),r=zs(Ws);try{for(r.s();!(t=r.n()).done;){var i=zr()(t.value,2),a=i[0],o=i[1],s=a.split("|"),u={dmnm:s[0],idc:s[1],type:Fs,total:o.total,failcnt:o.failcnt,userinfo:n.userArea,l_err:fr.a.last_errMesaage,l_url:fr.a.last_errurl};fr.a.last_errMesaage="",fr.a.last_errurl="",fr.a.sendPingBack({type:"DNSParser",para:u}),Ws["delete"](a)}}catch(th){r.e(th)}finally{r.f()}e||(Ks=setTimeout($s,12e4))}var Ys=["0","1","2","3","4","5","6","7","8","9"];function Qs(e){for(var t="",n=0;n<e;n++){var r=Math.floor(Math.random()*Ys.length);t+=Ys[r]}return t.toLowerCase()}var Js=function(){function e(){Ue()(this,e),this.tskList=null,this.curLoadTskIndex=0,this.tsk=null,this.retryCnt=0,this.stateChange=null,this.segment=null,this.startTime=-1,this.loader=null,this._loadStage="",this.dispatcher=null,this.domain="",this.idc="",this.ftt=!1}return He()(e,[{key:"load",value:function(e,t,n,r,i){if(this.segment&&this.close(!1),this.segment=e,this.retryCnt=n,this.urlIndex=r,this.CDNStateChangeEventID=i,this.tskList=t,this.tsk=null,this.url="",As.selectDUnit(this.segment.sourceID)){if(this.segment&&pr.a.canP2P&&"off"!==dr.h.limitP2P&&!0===dr.h.onP2P&&dr.i.openP2P&&!this.segment.onTracker){var a=hr.a.getUserInfoFromCookie();if(a.userNetType){var o=hr.a.getTrackerIP(a.userNetType,dr.h.tracker,this.segment.p2pID);""!==o&&(gr.a.info("AND tracker Dispatch [DONE] IP : "+o),this.segment.setTrackerIP(o))}}this._loadStage="CDN",this.createLoader(),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_ready),this.checkConTracker(),this.checkTask()}else this._loadStage="dispatch",this.startDisPatch()}},{key:"createLoader",value:function(){dr.f.xhr||"mozilla"===pr.a.browser.name||"firefox"===pr.a.browser.name&&pr.a.browser.version.major<65||"chrome"===pr.a.browser.name&&pr.a.browser.version.major<43||"msedge"===pr.a.browser.name&&pr.a.browser.version.major<14||"safari"===pr.a.browser.name&&(pr.a.browser.version.major<10||10===pr.a.browser.version.major&&pr.a.browser.version.minor<1)||this.retryCnt%2==1?this.loader=new Ms.a(this.segment.fileType,this.CDNStateChangeEventID):this.loader=new Cs(this.segment.fileType,this.CDNStateChangeEventID)}},{key:"checkConTracker",value:function(){if(pr.a.canP2P&&"off"!==dr.h.limitP2P&&!0===dr.h.onP2P&&dr.i.openP2P&&!this.segment.onTracker){Lr.checkConfig();var e=hr.a.getUserInfoFromCookie(),t=hr.a.getTrackerIP(e.userNetType,dr.h.tracker,this.segment.p2pID);""!==t&&(gr.a.info("AND tracker Dispatch [DONE] IP : "+t),this.segment.setTrackerIP(t))}}},{key:"disPatchDone",value:function(){this.segment&&(this.createLoader(),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_ready),this._loadStage="CDN",this.checkConTracker(),this.checkTask())}},{key:"disPatchErr",value:function(e){this.segment&&(this.close(!0),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_error,es.a.LoaderState_error_dispatch,e,""))}},{key:"startDisPatch",value:function(){Ni.b.diy_tsrcnt+Ni.b.diy_ts_drcnt>0&&Object(Ni.e)(),sa.diy_cdnrcnt+sa.diy_dcdn_drcnt>0&&ia(),this.dispatcher||(this.dispatcher=new Os),ns.a.getEvent().once(ts.a.DisPatchStatus+this.segment.type,this.disPatchStatus.bind(this)),this.dispatcher.start(this.segment,this.retryCnt)}},{key:"disPatchStatus",value:function(e){e?this.disPatchErr(e):this.disPatchDone()}},{key:"checkTask",value:function(){var e,t,n,r;if(this.segment&&this.tskList)if(this.curLoadTskIndex>this.tskList.length-1&&!this.tsk)this._loadStage="",this.close(!1),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_done);else{var i=As.selectDUnit(this.segment.sourceID);if(i){fr.a.inSourceID===this.segment.sourceID&&i.fastPlay&&Hs.start(this.segment.dispatchUrl,this.segment.sourceID,i.URL,this.segment.tvid);var a=i.URL;if(this.segment.idc=this.idc=i.z,pr.a.isHTTPS&&(a=a.replace(/^http:/gi,"https:")),fr.a.vcodec=a.indexOf(".265ts")>0?"hevc":"avc",this.segment.fileType.indexOf(Ko.a.TS)>=0||this.segment.fileType===Ko.a.DASH){var o=null;o=this.segment.fileType===Ko.a.TS||this.segment.fileType===Ko.a.DASH?{startPos:this.tskList[this.curLoadTskIndex].begin,endPos:this.tskList[this.curLoadTskIndex].end,contentlength:this.tskList[this.curLoadTskIndex].end-this.tskList[this.curLoadTskIndex].begin}:this.segment.loadInfo,this.segment.dataUrl=function(e,t,n){if(!t)return"";t.indexOf("&start=")>0?t=(t=t.replace(/\&start=[0-9.]+&/g,"&start="+n.startPos+"&")).replace(/\&start=[0-9.]+$/g,"&start="+n.startPos):t.indexOf("?start=")>0&&(t=(t=t.replace(/\?start=[0-9.]+&/g,"?start="+n.startPos+"&")).replace(/\?start=[0-9.]+$/g,"?start="+n.startPos));t.indexOf("&end=")>0?t=(t=t.replace(/\&end=[0-9.]+&/g,"&end="+n.endPos+"&")).replace(/\&end=[0-9.]+$/g,"&end="+n.endPos):t.indexOf("?end=")>0&&(t=(t=t.replace(/\?end=[0-9.]+&/g,"?end="+n.endPos+"&")).replace(/\?end=[0-9.]+$/g,"?end="+n.endPos));t.indexOf("&contentlength=")>0?t=(t=t.replace(/\&contentlength=[0-9.]+&/g,"&contentlength="+n.contentlength+"&")).replace(/\&contentlength=[0-9.]+$/g,"&contentlength="+n.contentlength):t.indexOf("?contentlength=")>0&&(t=(t=t.replace(/\?contentlength=[0-9.]+&/g,"?contentlength="+n.contentlength+"&")).replace(/\?contentlength=[0-9.]+$/g,"?contentlength="+n.contentlength));return t}(this.segment.fileType,a,o)}else this.segment.fileType.indexOf(Ko.a.M4S)>=0&&(this.segment.dataUrl=a);this.url=this.segment.dataUrl,this.tsk=this.tskList[this.curLoadTskIndex++];var s=hr.a.getPureIP(this.url);fr.a.domain&&fr.a.domain!==s&&(Object(Ni.e)(),ia()),fr.a.idc=this.idc,fr.a.domain=this.segment.ip=this.domain=s;var u=this.url.indexOf(s),c=this.segment.fileType;this.segment.fileType.indexOf(Ko.a.TS)>=0&&(c=Ko.a.TS);var l=this.url.indexOf("."+c);this.tsk.path=this.url.slice(u+s.length,l+4),this.tsk.url=this.url,fr.a.atkMap.has(this.segment.tvid)&&(-1!==this.url.indexOf("&atk=")?this.tsk.url=this.url=this.url.replace(/\&atk=[0-9a-zA-Z]+/,"&atk="+Qs(10)):-1!==this.url.indexOf("?atk=")&&(this.tsk.url=this.url=this.url.replace(/\?atk=[0-9a-zA-Z]+/,"&atk="+Qs(10)))),this.tsk.rate=this.segment.rate,this.tsk.ip=s+":80",this.tsk.segment=this.segment,this.tsk.data=null,this.tsk.range=null,ns.a.getEvent().on(ts.a.LoadStatus+this.CDNStateChangeEventID,this.loaderStateChange.bind(this)),"dcache"===this.idc?(Ni.b.diy_ts_drcnt++,sa.diy_dcdn_drcnt++):(Ni.b.diy_tsrcnt++,sa.diy_cdnrcnt++),this.ftt=!0;try{this.startTime=Date.now(),e=this.domain,t=this.idc,n=e+"|"+t,(r=Ws.get(n))?Ws.set(n,{total:r.total+1,failcnt:r.failcnt}):Ws.set(n,{total:1,failcnt:0}),this.loader.load(this.tsk,this.segment.loadType)}catch(d){this.segment&&(this.close(!0),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_error,es.a.LoaderState_error_load,"trycatchError",""))}}else this.startDisPatch(),Hs.stop()}}},{key:"loaderStateChange",value:function(e,t){if(this.segment)switch(e){case"progress":this.tsk&&this.tsk.data&&this.tsk.range&&(this.tsk.range.end-this.tsk.range.begin!==this.tsk.data.byteLength&&gr.a.error("data len is not right ,url = "+this.segment.dataUrl+"range "+this.tsk.range.begin+"-"+this.tsk.range.end),this.ftt&&("dcache"===this.idc?(Ni.b.diy_ts_dfttcnt++,Ni.b.diy_ts_dftttime+=Math.floor(Date.now()-this.startTime),sa.diy_dcdn_dfttcnt++,sa.diy_dcdn_dftttime+=Math.floor(Date.now()-this.startTime)):(Ni.b.diy_tsfttcnt++,Ni.b.diy_tsftttime+=Math.floor(Date.now()-this.startTime),sa.diy_cdnfttcnt++,sa.diy_cdnftttime+=Math.floor(Date.now()-this.startTime)),this.ftt=!1),"dcache"===this.idc?(Ni.b.diy_ts_dsize+=this.tsk.data.byteLength,sa.diy_dcdn_dsize+=this.tsk.data.byteLength):(Ni.b.diy_tssize+=this.tsk.data.byteLength,sa.diy_cdnsize+=this.tsk.data.byteLength),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_progress,this.tsk.data,this.tsk.range.begin,this.tsk.range.end-this.tsk.range.begin),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDataDone());break;case"done":fr.a.hasLoadError=!1,gr.a.info("load [DONE] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index : "+this.segment.index),this.tsk=null,this.checkTask(),"dcache"===this.idc?(Ni.b.diy_ts_dtime+=Math.floor(Date.now()-this.startTime),Ni.b.diy_ts_dsucccnt++,sa.diy_dcdn_dtime+=Math.floor(Date.now()-this.startTime),sa.diy_dcdn_dsucccnt++):(Ni.b.diy_tstime+=Math.floor(Date.now()-this.startTime),Ni.b.diy_tssucccnt++,sa.diy_cdntime+=Math.floor(Date.now()-this.startTime),sa.diy_cdnsucccnt++);break;case"error":fr.a.hasLoadError=!0,"dcache"===this.idc?(Ni.b.diy_ts_derr=encodeURIComponent(t),Ni.b.diy_ts_durl=encodeURIComponent(this.segment?this.segment.dataUrl:""),sa.diy_dcdn_derr=encodeURIComponent(t),sa.diy_dcdn_durl=encodeURIComponent(this.segment?this.segment.dataUrl:"")):(Ni.b.diy_tserr=encodeURIComponent(t),Ni.b.diy_tsurl=encodeURIComponent(this.segment?this.segment.dataUrl:""),Ni.b.diy_tserrtype=Ss.a.getErrorType(t),sa.diy_cdnerr=encodeURIComponent(t),sa.diy_cdnurl=encodeURIComponent(this.segment?this.segment.dataUrl:""),sa.diy_cdnerrtype=Ss.a.getErrorType(t)),Object(Ni.e)(),ia(),fr.a.last_errMesaage=t,fr.a.last_errurl=this.segment?this.segment.dataUrl:"",gr.a.info("load [error] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index-"+this.segment.index+" errDetail-"+t),ns.a.getEvent().emit(this.CDNStateChangeEventID,es.a.LoaderState_error,es.a.LoaderState_error_load,t,"")}}},{key:"close",value:function(e){this.tskList=null,this.tsk=null,ns.a.getEvent().off(ts.a.DisPatchStatus+this.segment.type),this.dispatcher&&this.dispatcher.clear(),this.dispatcher=null,this.segment=null,this.loader&&(e||this.loader.type===Cs.type)&&this.loader.running&&this.loader.close(),this.loader=null,ns.a.getEvent().off(ts.a.LoadStatus+this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.segment}},{key:"loadStage",get:function(){return this._loadStage},set:function(e){this._loadStage=e}},{key:"curLoadTskIdx",get:function(){return this.curLoadTskIndex},set:function(e){this.curLoadTskIndex=e}},{key:"doMainName",get:function(){return this.domain}},{key:"dataUrl",get:function(){return this.url}},{key:"curIDC",get:function(){return this.idc}}]),e}(),Xs="",Zs=null,eu="",tu=/[a-z]/i,nu=[];var ru=function(e,t,n){if(e&&!(nu.indexOf(e)>=0)){if(!tu.test(e)){var r=hr.a.getUserInfoFromCookie(),i={dmnm:e,ips:e,userinfo:r.userInfo,idc:n||r.idc,type:t};return gr.a.debug("fetch DNSParser"+JSON.stringify(i)),void fr.a.sendPingBack({type:"DNSParser",para:i})}if(n&&fr.a.last_cdnIP&&""!==fr.a.last_cdnIP){var a=hr.a.getUserInfoFromCookie(),o={dmnm:eu,ips:fr.a.last_cdnIP,userinfo:a.userArea,idc:n||a.idc,type:t};return nu.push(eu),gr.a.info("DNSParser"+JSON.stringify(o)),void fr.a.sendPingBack({type:"DNSParser",para:o})}eu=e,Xs="http://"+ws.getPipeIp()+"/3f0/hd.cloud.iqiyi.com/d?dn="+eu+"&business=pcwPlayer&cross-domain=1",pr.a.isHTTPS&&(Xs=Xs.replace(/^http:/gi,"https:")),(Zs=new XMLHttpRequest).responseType="text",Zs.onreadystatechange=function(){if(4===Zs.readyState){if(Zs.status>=200&&Zs.status<300&&Zs.response){var e=hr.a.getUserInfoFromCookie(),r="";Zs.response&&(r=Zs.response);var i={dmnm:eu,ips:r,userinfo:e.userArea,idc:n||e.idc,type:t};nu.push(eu),gr.a.info("xhr DNSParser"+JSON.stringify(i)),fr.a.sendPingBack({type:"DNSParser",para:i})}Zs&&(Zs.abort(),Zs=null)}};try{Zs.open("GET",Xs,!0),gr.a.info("Xhr DNSParser Xhr url "+Xs),Zs.send()}catch(nh){gr.a.error("xhr dns err-"+nh.message),Zs&&Zs.abort()}}},iu=!1,au=!1,ou=0,su=[];function uu(e){return e<dr.b.dispatchCfg.length?dr.b.dispatchCfg[e]:dr.b.dispatchCfg[dr.b.dispatchCfg.length-1]}var cu=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.videoSegment=null,this.loadTaskList=null,this._dispatchErrCnt=0,this._loadErrCnt=0,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,this.cdnTaskLoader=null,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.reportLowSpeed=!1}},{key:"load",value:function(e,t,n,r){this.fireError||0===t.length||(this.videoSegment=e,this.loadTaskList=t,this.loaderIndex=n,this.urlIndex=r||-1,iu=!1,this.CDNStateChangeEventID=++ou,this.startTime=Date.now(),clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),uu(this.dispatchTimeoutCnt)),this.cdnTaskLoader=new Js,ns.a.getEvent().on(this.CDNStateChangeEventID,this.stateChange.bind(this)),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,0,this.urlIndex,this.CDNStateChangeEventID),Oi.addPBItem(yi.cdn_taskCnt))}},{key:"_reLoad",value:function(){var e;(clearTimeout(this.retryStep),this.retryStep=0,!this.loadTaskList||this.cdnTaskLoader.curLoadTskIndex-1>=this.loadTaskList.length)||(this.startTime=Date.now(),this.videoSegment&&(this.cdnTaskLoader.curLoadTskIdx>0&&this.cdnTaskLoader.curLoadTskIdx--,e=this.videoSegment.fileType!==Ko.a.FTS?this.videoSegment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end):[{begin:this.loadTaskList[0].begin,end:this.loadTaskList[this.loadTaskList.length-1].end}]),e&&0!==e.length?(Oi.addPBItem(yi.cdn_taskCnt),this.loadTaskList=e,this.urlIndex=-1,this.videoSegment.fileType===Ko.a.FTS&&(this.videoSegment.segment.dataLen=0,iu=!1),clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),uu(this.dispatchTimeoutCnt)),gr.a.warn("reLoad !!!!!!!!!!!~~"+JSON.stringify(e)+", loaderIndex : "+this.loaderIndex+", retryCnt : "+this.retryCnt),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,this.retryCnt,this.urlIndex,this.CDNStateChangeEventID)):this.onComplete())}},{key:"onDispatchTimeOut",value:function(){!this.loadTaskList||this.fireError||this.retryStep>0||(this.dispatchTimeoutCnt++,Ni.b.diy_dispatcherr="timeout",Ni.b.diy_diserrtype=Ss.a.getErrorType("timeout"),Ni.b.diy_dispatchurl=encodeURIComponent(this.videoSegment?this.videoSegment.dispatchUrl:""),sa.diy_dispatcherr="timeout",sa.diy_diserrtype=Ss.a.getErrorType("timeout"),sa.diy_dispatchurl=encodeURIComponent(this.videoSegment?this.videoSegment.dispatchUrl:""),this.stateChange(es.a.LoaderState_error,es.a.LoaderState_error_dispatch,"timeout",Date.now()-this.startTime))}},{key:"onRcvTimeOut",value:function(){if(!(!this.loadTaskList||this.fireError||this.retryStep>0)){var e=!!this.cdnTaskLoader&&"dcache"===this.cdnTaskLoader.idc;this.hitProgress?(e?(Ni.b.diy_ts_derr="recvTimeout",Ni.b.diy_ts_durl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:""),sa.diy_dcdn_derr="recvTimeout",sa.diy_dcdn_durl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:"")):(Ni.b.diy_tserr="recvTimeout",Ni.b.diy_tsurl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:""),sa.diy_cdnerr="recvTimeout",sa.diy_cdnurl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:"")),Ni.b.diy_tserrtype=Ss.a.getErrorType("recvTimeout"),sa.diy_cdnerrtype=Ss.a.getErrorType("recvTimeout"),Object(Ni.e)(),ia(),this.rcvTimeoutCnt++,this.stateChange(es.a.LoaderState_error,es.a.LoaderState_error_load,"recvTimeout",Date.now()-this.startTime)):(e?(Ni.b.diy_ts_derr="ttfbTimeout",Ni.b.diy_ts_durl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:""),sa.diy_dcdn_derr="ttfbTimeout",sa.diy_dcdn_durl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:"")):(Ni.b.diy_tserr="ttfbTimeout",Ni.b.diy_tsurl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:""),sa.diy_cdnerr="ttfbTimeout",sa.diy_cdnurl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:"")),Ni.b.diy_tserrtype=Ss.a.getErrorType("ttfbTimeout"),sa.diy_cdnerrtype=Ss.a.getErrorType("ttfbTimeout"),Object(Ni.e)(),ia(),this.TTFBTimeoutCnt++,this.stateChange(es.a.LoaderState_error,es.a.LoaderState_error_load,"ttfbTimeout",Date.now()-this.startTime))}}},{key:"stateChange",value:function(e,t,n,r){var i,a;if(!(!this.loadTaskList||this.fireError||this.retryStep>0))switch(e){case es.a.LoaderState_ready:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(a=this.TTFBTimeoutCnt)<dr.b.TTFBCfg.length?dr.b.TTFBCfg[a]:dr.b.TTFBCfg[dr.b.TTFBCfg.length-1]);break;case es.a.LoaderState_progress:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(i=this.rcvTimeoutCnt)<dr.b.rcvCfg.length?dr.b.rcvCfg[i]:dr.b.rcvCfg[dr.b.rcvCfg.length-1]),this.onProgress(t,n,r);break;case es.a.LoaderState_done:clearTimeout(this.timerStep),this.timerStep=0,this.onComplete();break;case es.a.LoaderState_error:clearTimeout(this.timerStep),this.timerStep=0,this.onError(t,n,r)}}},{key:"onProgress",value:function(e,t,n){if(this.hitProgress||(Oi.addPBItem(yi.cdn_progressCnt),Oi.addPBItem(yi.cdn_progressTime,Date.now()-this.startTime),this.hitProgress=!0),Oi.addPBItem(yi.cdn_loadTime,Date.now()-this.startTime),fr.a.cdnSize+=n,fr.a.cdnCostTime+=Date.now()-this.startTime,this.startTime=Date.now(),this.loadSizeForSpeed+=n,-1===this.loadTimeForSpeed)this.loadTimeForSpeed=Date.now();else if(Date.now()-this.loadTimeForSpeed>1e3&&(this.speed=Math.floor(this.loadSizeForSpeed/(Date.now()-this.loadTimeForSpeed)),gr.a.info("load SPEED(Bytes/S)　：　"+1e3*this.speed+" , averageBitrate : "+this.videoSegment.averageBitrate),As.updateSpeed(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,this.speed),fr.a.cdnSpeed=this.speed,this.loadSizeForSpeed=0,this.loadTimeForSpeed=Date.now(),this.speedLowCnt=this.speed<this.videoSegment.averageBitrate?this.speedLowCnt+1:Math.max(this.speedLowCnt-1,0),this.speedLowCnt>5)){gr.a.info("load lowSpeed ,idc:"+this.cdnTaskLoader.curIDC+",doMainName:"+this.cdnTaskLoader.doMainName),fr.a.cdnSpeed=0,this.speedLowCnt=0;var r=this.videoSegment.checkP2PHealth();if(r>=3+Math.ceil(this.speed/100))Or.loader.message="load-lowSpeed-"+this.videoSegment.idc+"-"+this.videoSegment.ip+"-"+this.videoSegment.sourceID,this.clear(!0),this.videoSegment.setOnP2P(15e3),gr.a.info("start pure P2P state! health peers : "+r+" , cdnSpeed(Bytes/ms) : "+1e3*this.speed+" , byteRate : "+this.videoSegment.averageBitrate);else if(this.speed<1.2*this.videoSegment.averageBitrate&&("dcache"===this.cdnTaskLoader.idc?(Ni.b.diy_ts_dlagurl=encodeURIComponent(this.cdnTaskLoader.dataUrl),sa.diy_dcdn_dlagurl=encodeURIComponent(this.cdnTaskLoader.dataUrl)):Ni.b.diy_ts_lagurl=encodeURIComponent(this.cdnTaskLoader.dataUrl),Ni.b.diy_tserrtype="slowSpeed",sa.diy_cdnerrtype="slowSpeed"),this.speed<this.videoSegment.averageBitrate/2&&(!au&&hr.a.isHit()&&(this.cdnTaskLoader.doMainName?ru(this.cdnTaskLoader.doMainName,Bs,this.cdnTaskLoader.curIDC):this.videoSegment.dispatchUrl&&ru(hr.a.getPureIP(this.videoSegment.dispatchUrl),Bs,this.cdnTaskLoader.curIDC),au=!0),"video"===this.videoSegment.type)){iu=!0;for(var i="",a=0;a<this.loadTaskList.length;a++)i+=this.loadTaskList[a].begin+" - "+this.loadTaskList[a].end+", ";gr.a.info("lowSpeedFlag ,range, "+i),As.updateLowSpeed(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,this.speed),ns.a.getEvent().emit(ts.a.CdnNodeMgrStateChange+this.videoSegment.type,es.a.LoaderState_lowSpeed,"",this.loaderIndex)}}n>0&&(Ni.b.diy_cdnbw+=n,this.videoSegment.pushData(e,t,n),this.videoSegment.rate===fr.a.levelBid&&(fr.a.levelLoad+=n))}},{key:"onComplete",value:function(){if(this.videoSegment.fileType===Ko.a.FTS){if(iu)return;this.videoSegment.loadDone=!0}this.videoSegment.clearEndOnP2PTime(),this.hitProgress||(Oi.addPBItem(yi.cdn_progressCnt),Oi.addPBItem(yi.cdn_progressTime,Date.now()-this.startTime)),Oi.addPBItem(yi.cdn_loadTime,Date.now()-this.startTime),this.startTime=Date.now(),fr.a.cdnSpeed=0,this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!1)}},{key:"onError",value:function(e,t,n){switch(clearTimeout(this.retryStep),this.retryStep=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),e){case es.a.LoaderState_error_dispatch:if(Or.dispatcher.message="dispatch-"+t+NaN+n+":index = "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,gr.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt "+this.retryCnt+", msg : "+n+" ,loaderIndex : "+this.loaderIndex),"statusErr_405"===t&&su.filter((function(e){return Date.now()-e<36e4})).length<1){for(this.clear(!0),As.remove(this.videoSegment.sourceID),this.videoSegment.dataUrl="";su.length>10;)su.shift();return su.push(Date.now()),void ns.a.globalEvent().emit(es.a.LoaderState_405,this.videoSegment.tvid)}this.videoSegment.dispatchOnError===undefined&&(this.videoSegment.dispatchOnError=0),this.videoSegment.dispatchOnError+=1,3===this.videoSegment.dispatchOnError&&this.videoSegment.dispatchUrl&&ru(hr.a.getPureIP(this.videoSegment.dispatchUrl),Ns);break;case es.a.LoaderState_error_load:fr.a.enableStartSpeed&&fr.a.inSourceID===this.videoSegment.sourceID&&(fr.a.playMode="normal"),"string"==typeof t&&t.startsWith("dataError")&&this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end),this.cdnTaskLoader&&(ru(this.cdnTaskLoader.doMainName,Ns,this.cdnTaskLoader.curIDC),As.updateStatus(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,Ns),r=this.cdnTaskLoader.doMainName,i=this.cdnTaskLoader.curIDC,a=r+"|"+i,(o=Ws.get(a))?Ws.set(a,{total:o.total,failcnt:o.failcnt+1}):Ws.set(a,{total:0,failcnt:1})),As.selectDUnit(this.videoSegment.sourceID)||As.remove(this.videoSegment.sourceID),this.cdnTaskLoader&&-1===this.videoSegment.errIDCList.indexOf(this.cdnTaskLoader.curIDC)&&this.videoSegment.errIDCList.push(this.cdnTaskLoader.curIDC),fr.a.cdnSpeed=0,Or.loader.message="load-"+t+" message- "+n+" idc - "+this.videoSegment.idc+"-"+this.videoSegment.ip+" index- "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,gr.a.error("load [Error] range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n+" ,loaderIndex : "+this.loaderIndex);break;default:gr.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n)}var r,i,a,o;if(clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.videoSegment.checkP2PHealth()>=4)return gr.a.info("load [Error],start pure P2P state,url "+this.cdnTaskLoader.dataUrl),this.clear(!0),void this.videoSegment.setOnP2P(15e3);if(this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.retryCnt++,this.retryCnt>dr.b.dispatchCfg.length){this.retryCnt=0;var s=fr.a.getBufferFunc();(this.videoSegment.fileType.indexOf(Ko.a.M4S)>=0?Math.min(s.buffered.video.len,s.buffered.audio.len):s.len)<2?(this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,this.fireError=!0,gr.a.error("load [FINAL Error] !!!, loaderIndex "+this.loaderIndex),ns.a.getEvent().emit(ts.a.CdnNodeMgrStateChange+this.videoSegment.type,e,t,this.loaderIndex)):this.retryStep=setTimeout(this._reLoad.bind(this),2e3)}else this.retryStep=setTimeout(this._reLoad.bind(this),2e3)}},{key:"clear",value:function(e){this.loadTaskList&&this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.startTime=0,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),e||(this.fireError=!1),this.loaderIndex=-1,ns.a.getEvent().off(this.CDNStateChangeEventID)}},{key:"mssNodeReset",value:function(){this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),ns.a.getEvent().off(this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.loadTaskList}},{key:"cdnSpeed",get:function(){return this.speed}},{key:"loadStage",get:function(){return this.cdnTaskLoader.loadStage},set:function(e){this.cdnTaskLoader.loadStage=e}},{key:"isError",get:function(){return this.fireError}}]),e}(),lu="0";var du="dispatch",fu="cdn";function hu(){switch(fr.a.platform){case 2:return"PHW";case 3:return"TVW";case 4:return"OPCW";case 5:return"OTVW";default:return"PCW"}}function pu(e){if(!(Fi.a.hideTime()>3e4)&&e&&dr.j.hasOwnProperty(e)){var t=dr.j[e];if(t&&t.hasOwnProperty("up")&&t.up){var n=parseInt(function(){if("0"!==lu)return lu;try{return localStorage.getItem("webSDKUpTime")||"0"}catch(nh){return"0"}}());if(!(t.hasOwnProperty("interval")&&Date.now()-n<t.interval))try{!function(){try{lu=Date.now().toFixed(0),localStorage.setItem("webSDKUpTime",lu)}catch(nh){}}(),gr.a.info("send Log, errType: "+e);var r="",i="I3d5gaNy";fr.a.platform===vr.a.TV?r="api-feedback.ptqy.gitv.tv":fr.a.platform===vr.a.OVERSEA_WEB||fr.a.platform===vr.a.OVERSEA_TV?(r="api-feedback.iq.com",i="error_log"):r="api-feedback.iqiyi.com";var a="http".concat(pr.a.isHTTPS?"s":"","://").concat(r,"/feedbacks"),o=new XMLHttpRequest;o.responseType="json",o.open("POST",a,!0),o.setRequestHeader("Content-Type","application/json");var s={entranceId:i,problems:[{type:"websdk"}],feedbackLog:gr.a.getLog(),attachedInfo:{playtype:"VOD",platform:hu()+"Core",errtype:e,uuid:yr.b,tvid:fr.a.tvId}};o.send(JSON.stringify(s))}catch(nh){}}}}var vu=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.loadTaskList=null,this.segment&&(this.resetLoader(),ns.a.getEvent().off(ts.a.CdnNodeMgrStateChange+this.segment.type)),this.segment=null,this.loaderList=[]}},{key:"resetLoader",value:function(){for(var e=0;e<this.loaderList.length;e++)this.loaderList[e]&&(this.loaderList[e].clear(!1),this.loaderList[e]=null)}},{key:"load",value:function(e,t){if(!this.loadTaskList&&!this.fireError&&0!==t.length){this.segment=e,this.loadTaskList=t,ns.a.getEvent().on(ts.a.CdnNodeMgrStateChange+this.segment.type,this.stateChange.bind(this));var n=new cu;this.loaderList.push(n),n.load(this.segment,this.loadTaskList,-1)}}},{key:"stateChange",value:function(e,t,n){if(this.segment&&this.loadTaskList)switch(e){case es.a.LoaderState_error_dispatch:case es.a.LoaderState_error_load:for(var r=!0,i=0;i<this.loaderList.length;i++)if(!this.loaderList[i].isError){r=!1;break}r?this.cdnFinalErrFun(e,t):this.loaderList[n<0?0:n].clear(!0)}}},{key:"cdnFinalErrFun",value:function(e,t){gr.a.error("all  loader [FINAL Error]!!!!!!!!!!!!!!!!"),$s(!0),e===es.a.LoaderState_error_dispatch?(Or.errorStage="dispatch",Ni.b.diy_finalerr="1",sa.diy_finalerr="1",upLog(du)):(Or.errorStage="load",Ni.b.diy_finalerr="21",sa.diy_finalerr="21",upLog(fu)),Object(Ni.e)(!0),ia(!0),Oi.check({rec:"fail",etyp:Or.errorStage,info:Or.loader.message}),Or.errorFragment=this}},{key:"checkTastList",value:function(){this.segment.fileType!==Ko.a.FTS&&(this.loadTaskList=this.segment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end));for(var e=0,t="",n=0;n<this.loadTaskList.length;n++)e+=this.loadTaskList[n].end-this.loadTaskList[n].begin,t+=this.loadTaskList[n].begin+" - "+this.loadTaskList[n].end+", ";var r=As.getDArr(this.segment.sourceID),i=r?r.length:0;if(0===i||1===i)return{loaderNum:i,tastList:this.loadTaskList};var a=Math.min(Math.max(1,Math.floor(e/1048576)),i);if(gr.a.info("MSS loader checkTastList, NeedLoaderLen "+e+", needLoaderNum "+a+", tastList "+t),a<=this.loadTaskList.length)return{loaderNum:a,tastList:this.loadTaskList};for(var o=[],s=Math.ceil(e/a),u=this.loadTaskList[0].begin,c=0,l=0;l<a;l++)c<this.loadTaskList.length&&(u+s<=this.loadTaskList[c].end?(o.push({begin:u,end:u+s}),u+=s):(o.push({begin:u,end:this.loadTaskList[c].end}),u=this.loadTaskList[c].end),u>=this.loadTaskList[c].end&&++c<this.loadTaskList.length&&(u=this.loadTaskList[c].begin));for(;c<this.loadTaskList.length;)u<this.loadTaskList[c].end&&o.push({begin:u,end:this.loadTaskList[c].end}),u=this.loadTaskList[c].end,++c<this.loadTaskList.length&&(u=this.loadTaskList[c].begin);return gr.a.info("MSS loader split tast res ,  "+JSON.stringify(o)),{loaderNum:a,tastList:o}}},{key:"running",get:function(){if(!this.loaderList)return!1;for(var e=0;e<this.loaderList.length;e++)if(this.loaderList[e].running)return!0;return this.reset(),!1}}]),e}(),yu="video",gu="audio",mu=new vu,_u=new vu;function bu(e,t,n){var r="",i=parseInt(n.substring(1));return r=i>=16?hr.a.sliceStr(e+t,5)+n.substring(0,1)+i.toString(16):hr.a.sliceStr(e+t,5)+n.substring(0,1)+"0"+i.toString(16),parseInt("0x"+r)}var xu=function(){function e(t){Ue()(this,e),this.dispatchError=!1,this.dispatchUrl=t.dispatchUrl,this.tvid=t.tvid,this.rate=t.levelId,this.vids=t.vids,this.vid=t.vid,this.albumID=t.albumID.toString(),this.sourceID=t.sourceID,this.oriIndex=t.oriIndex,this.index=t.index,this.type=t.trackerType,this.startPos=t.startPos,this.endPos=t.endPos,this.posList=t.posList,this.size=t.size,this.duration=t.duration,this.lastCEPos=-1,this.startTime=t.startTime<0?0:t.startTime,this.endTime=t.endTime<0?864e5:t.endTime,this.endOnP2PTime=0,this.fileType=t.videoType,this.realIdx=t.realSegIdx,this.averageBitrate=this.size&&this.duration?Math.floor(this.size/(1e3*this.duration)):0,this.alias=bu(this.sourceID,this.vid,this.realIdx),this.fragmentName=this.alias+"_"+this.index+"|"+this.showStartTime+"-"+this.showEndTime,this.idc="",this.ip="",this.errIDCList=[],""!==this.albumID&&"0"!==this.albumID&&this.albumID!==undefined&&0!==this.albumID?this.p2pID=parseInt("0x"+Vr()(this.albumID).substr(0,10)).toString():""!==this.tvid&&"0"!==this.tvid&&this.tvid!==undefined&&0!==this.tvid?this.p2pID=parseInt("0x"+Vr()(this.tvid).substr(0,10)).toString():this.p2pID=this.vid}return He()(e,[{key:"onTracker",get:function(){return Fo.hasProxyByID(this.p2pID)}},{key:"checkCreateSegment",value:function(){if(this.segment){if(this.segment.alias===this.alias&&this.segment.size===this.size){0!==this.segment.state&&(this.segment.state=0);var e=this;return this.segment.refreshFun=function(){e&&e.refreshBuffer.call(e)},gr.a.info("segment is exit"),this.segment.setRange(this.startPos,this.endPos),void(this.seekable&&this.segment.setPosList(this.seekable))}gr.a.info("segment is exit,but size or alias is match,so remove"),pi.removeSegment(this.alias)}var t=new Zo(this.size,this.tvid,this.sourceID,this.albumID,this.realIdx,this.alias,this.vid,this.p2pID,this.rate,this.vids,this.fileType,this.seekable,this.posList,this.averageBitrate);pi.setSegment(this.alias,t);var n=this;this.segment.refreshFun=function(){n&&n.refreshBuffer.call(n)},this.segment.setRange(this.startPos,this.endPos)}},{key:"loadData",value:function(e,t){if(this.segment){0!==this.segment.state&&(this.segment.state=0),this.fileType===Ko.a.FTS&&(this.segment.dataLen=0);var n=this.checkTask(e,t);if(0===n.length)return this.segment.checkData(),void gr.a.info("data is already have,not need load~~~ "+this.index+" : "+e+"-"+t+" state: "+this.segment.state+" cePos "+this.segment.cePos+",curCEPos "+this.lastCEPos);"video"===this.type?(gr.a.info("after checkTask ,video loadPoint  range = "+JSON.stringify(n)),mu.load(this,n)):(gr.a.info("after checkTask ,audio loadPoint  range = "+JSON.stringify(n)),_u.load(this,n))}}},{key:"p2pLoadSegment",value:function(){"video"===this.type&&this.segment&&this.segment.dataErrCount<10&&pi.setLoadSegment(this.alias)}},{key:"isOnP2P",get:function(){return this.endOnP2PTime>0&&Date.now()<=this.endOnP2PTime}},{key:"segment",get:function(){return pi.getSegment(this.alias)}},{key:"setOnP2P",value:function(e){this.endOnP2PTime=e+Date.now(),this.type===yu&&(vu.loadStage="P2P")}},{key:"clearEndOnP2PTime",value:function(){this.endOnP2PTime=-1}},{key:"checkTask",value:function(e,t){return this.segment?this.fileType===Ko.a.FTS?[{begin:e,end:t}]:this.segment.checkTask(e,t):(gr.a.error("checkTask return null,because of segment is null"),null)}},{key:"dataUrl",get:function(){return this.segment.dataUrl},set:function(e){this.segment.dataUrl=e}},{key:"done",get:function(){return!!this.segment&&(this.fileType===Ko.a.M4S||this.fileType===Ko.a.DASH||this.fileType===Ko.a.TS?this.segment.done:this.fileType===Ko.a.FTS?this.segment.tsLoadDone:void 0)}},{key:"checkP2PHealth",value:function(){return this.segment?this.segment.checkP2PHealth():0}},{key:"clearData",value:function(e,t){this.segment&&this.segment.deleteRange(e,t-e)}},{key:"updateLoadRange",value:function(e,t){this.segment&&this.segment.setRange(e,t)}},{key:"setTrackerIP",value:function(e){Fo&&(Fo.hasProxyByIPInfo(e)?Fo.getProxyByIPInfo(e).id=this.p2pID:Fo.startProxy(this.p2pID,e))}},{key:"recycleCDNTask",value:function(e){this.segment&&this.segment.recycleCDNTask(e)}},{key:"refreshBuffer",value:function(){this.segment&&(-1!==this.endPos?this.lastCEPos=Math.min(this.segment.cePos,this.endPos):this.lastCEPos=this.segment.cePos)}},{key:"updateCePos",value:function(e){this.segment?this.lastCEPos=e:this.lastCEPos=-1}}]),e}();function ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var wu=function(e){Ye()(n,e);var t=ku(n);function n(e,r){return Ue()(this,n),t.call(this,e,r)}return He()(n,[{key:"pushData",value:function(e,t,n){return this.segment?((-1===fr.a.tempTestStartRWTime||performance.now()<fr.a.tempTestStartRWTime)&&this.averageBitrate&&(fr.a.loadSize+=n,fr.a.loadTime=fr.a.loadSize/this.averageBitrate),fr.a.loadingBy="cdn",fr.a.preLoadSize+=n,this.segment.addData(t,e,n,"cdn"),Oi.cdnSize=n+Oi.cdnSize,this.segment.peerMgr&&(this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0):(gr.a.warn("pushData segment is null"),!0)}}]),n}(xu);function Su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Tu=function(e){Ye()(n,e);var t=Su(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e,r)).loadInfo=e.loadInfo,i}return He()(n,[{key:"pushData",value:function(e,t,n){if(!this.segment)return gr.a.warn("pushData segment is null"),!0;var r=t-this.loadInfo.startPos,i=e.byteLength;return fr.a.loadingBy="cdn",this.segment.addData(r,e,i),Oi.cdnSize=n+Oi.cdnSize,this.segment.peerMgr?(this.segment.peerMgr.cdnSize=i+this.segment.peerMgr.cdnSize,!0):void 0}},{key:"loadDone",get:function(){return this.segment.tsLoadDone},set:function(e){this.segment.tsLoadDone=e}}]),n}(xu);function Pu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Eu=function(e){Ye()(n,e);var t=Pu(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,e,r)).seekable=e.seekable,i}return He()(n,[{key:"pushData",value:function(e,t,n){return!this.segment||(fr.a.loadingBy="cdn",this.segment.addData(t,e,n,"cdn"),this.type===yu&&((-1===fr.a.tempTestStartRWTime||performance.now()<fr.a.tempTestStartRWTime)&&this.averageBitrate&&(fr.a.loadSize+=n,fr.a.loadTime=fr.a.loadSize/this.averageBitrate),Oi.cdnSize=n+Oi.cdnSize),this.segment.peerMgr&&this.type===yu&&(this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0)}},{key:"dataLen",get:function(){return this.segment.dataLen}}]),n}(xu),Au=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.bid=0,this.time=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.dataFlag=!1,this.flag="start"}},{key:"toString",value:function(){return"{bid: ".concat(this.bid,", time: ").concat(this.time,", segmentIndex: ").concat(this.segmentIndex,", chunkIndex: ").concat(this.chunkIndex,"}")}}]),e}(),Iu=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.levelID=-1,this.startTime=0,this.endTime=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.cEndTime=0,this.endPos=0,this.init=!1}}]),e}(),Du=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.levelID=-1,this.segmentIndex=0,this.chunkIndex=0,this.time=0,this.tvid=0}}]),e}(),Lu=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.duration_second=0,this.size=0,this.file_name=null,this.start_second=0,this.pos=[],this.time=[0],this.sourceID=null,this.loadInfo=[],this.quoteSegment=null}}]),e}(),Ou=function(){function e(){Ue()(this,e),this.reset()}return He()(e,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.seekable={pos:[],time:[]},this.sourceID=null,this.loadInfo=[],this.size=0}}]),e}(),Ru=(n(344),function(){function e(t,n){Ue()(this,e),this._type=t,this._i=n.i,this._idxs=n.idxs,this._pidx=n.pidx,this._fidxs=n.fidxs,this._l=n.l,this._t=n.t,this._z=n.z,this._ourl=n.ourl,this._fs=n.fs,this._hf=n.hf,this._av1_t=n.av1_t,this._av1_ts=n.av1_ts,this._timescale=n.timescale;for(var r=0;r<this._av1_ts.length;r++)if(this._av1_ts[r]>this._av1_t){this._ed=this._av1_ts[r];break}this._ed="v"===this._type?Math.floor(this._ed/1e3):Math.floor(this._ed/this._timescale);try{this._spos=n.l.match(/start=(\d+)/)[1]||0,this._epos=n.l.match(/end=(\d+)/)[1]||0}catch(nh){this._spos=this._epos=0,gr.a.error("cannot find range in play node")}this._dInfoArr=[{URL:n.l,z:n.z,re:n.t}],this._loader=null,this._data=null,this._errIDCList=[],this._cdnErrCnt=0,this._dispatchErrCnt=0,this._startCDNLoad()}return He()(e,[{key:"data",get:function(){return this._data}},{key:"ed",get:function(){return this._ed}},{key:"index",get:function(){return this._i-1}},{key:"spos",get:function(){return this._spos}},{key:"loadDone",get:function(){return null!==this._data}},{key:"done",value:function(e){return this.loadDone&&(this._i===this._idxs||this._ed>=e)}},{key:"close",value:function(){this._loader&&(this._loader.abort(),this._loader=null),this._data=null,this._dInfoArr.length=0,this._errIDCList.length=0}},{key:"_startCDNLoad",value:function(){var e=this;if(!this._loader)if(0!==this._dInfoArr.length){var t=this._dInfoArr[0].URL;try{-1===t.indexOf("stauto")&&(t+="&stauto=".concat(fr.a.absStatus)),-1===t.indexOf("ori")&&(t+="&ori=pcw".concat(fr.a.platform)),-1===t.indexOf("num")&&(t+="&num=".concat(Date.now().toString())),-1===t.indexOf("?")&&(t=t.replace(/&/,"?")),pr.a.isHTTPS&&(t=t.replace(/^http:/gi,"https:")),gr.a.info("PlayNode.load.start, type: ".concat(this._type,", url: ").concat(t)),this._xhr=new XMLHttpRequest,this._xhr.responseType="arraybuffer",this._xhr.open("GET",t,!0),this._xhr.withCredentials=!1,this._xhr.send(),this._xhr.startTime=performance.now(),Ni.b.diy_tsrcnt++,this._xhr.onreadystatechange=function(){if(e._xhr&&4===e._xhr.readyState)if(e._xhr.status>=200&&e._xhr.status<=206){var n=e._xhr.response;if(!n)throw new Error("responseIsNull");var r=new Uint8Array(n);if(!r.byteLength)throw new Error("responseIsEmpty");e._data=r,gr.a.info("PlayNode.load.success, type: ".concat(e._type,", size: ").concat(r.byteLength)),e._cdnErrCnt=0,Ni.b.diy_cdnbw+=r.byteLength,Ni.b.diy_tssize+=r.byteLength,Ni.b.diy_tsfttcnt++,Ni.b.diy_tsftttime+=Math.floor(performance.now()-e._xhr.startTime),Ni.b.diy_tssucccnt++,Ni.b.diy_tstime+=Math.floor(performance.now()-e._xhr.startTime),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDataDone()}else e._onCDNError(t,"statusErr_".concat(e._xhr.status))}}catch(nh){this._onCDNError(t,"tryCatchError_".concat(nh.message))}}else this._startDispatch()}},{key:"_onCDNError",value:function(e,t){var n,r,i,a,o=this;this.close(),this._dInfoArr.shift(),Ni.b.diy_tsurl=e,Ni.b.diy_tserr=t,Ni.b.diy_tserrtype=Ss.a.getErrorType(t),gr.a.warn("PlayNode.load.error, type: ".concat(this._type,", url: ").concat(e,", errMsg: ").concat(t));var s=fr.a.getBufferFunc();this._cdnErrCnt>=3&&Math.min((null==s||null===(n=s.buffered)||void 0===n||null===(r=n.video)||void 0===r?void 0:r.len)||0,(null==s||null===(i=s.buffered)||void 0===i||null===(a=i.audio)||void 0===a?void 0:a.len)||0)<2?(gr.a.error("loader [FINAL Error], type: ".concat(this._type,", type: cdn, errMsg: ").concat(t)),Or.errorStage="load",Or.errorFragment=this,Ni.b.diy_finalerr="1",Object(Ni.e)(!0)):this._timer=setTimeout((function(){o._startCDNLoad()}),1e3+1e3*this._cdnErrCnt++)}},{key:"_startDispatch",value:function(){var e=this;if(!this._loader){var t=this._ourl;try{if(t+=-1===t.indexOf("?")?"?pv=0.1":"&pv=0.1",t+="&cross-domain=1",t+="&mss=1",t+="&stauto="+fr.a.absStatus,this._dispatchErrCnt>0&&this._errIDCList.length>0&&this._errIDCList.length<3&&(this._errIDCList.length>0&&this._errIDCList.length<3&&(t+="&retry=".concat(this._errIDCList.length.toString()),t+="&z=".concat(this._errIDCList.toLocaleString().replace(/,/g,"|"))),this._dispatchErrCnt%2==0)){var n=hr.a.parseURL(t);t=fr.a.platform===vr.a.WEB?t.replace(n[2]+n[4],ws.getPipeIp()+"/3eb/"+Vr()(n[2])+is.Base64.encode(n[4])):t.replace(n[2],ws.getPipeIp()+"/3eb/"+n[2]),pr.a.isHTTPS&&(t+="&&ssl=1")}window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisStart(),this._xhr=new XMLHttpRequest,this._xhr.responseType="json",this._xhr.open("GET",t,!0),this._xhr.withCredentials=!1,this._xhr.send(),this._xhr.startTime=performance.now(),Ni.b.diy_dispatchcnt++,t.indexOf("/3eb/")>=0&&Ni.b.diy_bgpreqcnt++,this._xhr.onreadystatechange=function(){if(e._xhr&&4===e._xhr.readyState)if(e._xhr.status>=200&&e._xhr.status<=206){e._dispatchErrCnt=0,Ni.b.diy_dispsucccnt++,Ni.b.diy_disptime+=Math.floor(performance.now()-e._xhr.startTime),t.indexOf("/3eb/")>=0&&Ni.b.diy_bgpsucccnt++;var n=e._xhr.response;if(!n)throw new Error("responseIsNull");if(!n.hasOwnProperty("uri"))throw new Error("responseHasNoUri");gr.a.info("PlayNode.dispatch.success, type: ".concat(e._type,", data: ").concat(JSON.stringify(n),", isHttps: ").concat(pr.a.isHTTPS));var r=JSON.parse(JSON.stringify(n));if(!r.d||0===r.d.length)throw new Error("responseNoCDNUrl");if(pr.a.isHTTPS)for(var i=0;i<r.d.length;i++)if(r.d[i].URL.indexOf("https")<0)throw new Error("notIsHttps");for(var a=0;a<r.d.length;a++)e._dInfoArr.push(r.d[a]);window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisDone(),e.close(),e._startCDNLoad()}else e._onDispatchError(t,"","statusErr_".concat(e._xhr.status))},gr.a.info("PlayNode.dispatch.start, type: ".concat(this._type,", url: ").concat(t))}catch(nh){this._onDispatchError(t,"","tryCatchError_".concat(nh.message))}}}},{key:"_onDispatchError",value:function(e,t){var n,r,i,a,o=this;this.close(),Ni.b.diy_dispatchurl=e,Ni.b.diy_dispatcherr=t,Ni.b.diy_diserrtype=Ss.a.getErrorType(t),gr.a.warn("PlayNode.dispatch.error, type: ".concat(this._type,", url: ").concat(e,", errMsg: ").concat(t));var s=fr.a.getBufferFunc();this._dispatchErrCnt>=3&&Math.min((null==s||null===(n=s.buffered)||void 0===n||null===(r=n.video)||void 0===r?void 0:r.len)||0,(null==s||null===(i=s.buffered)||void 0===i||null===(a=i.audio)||void 0===a?void 0:a.len)||0)<2?(gr.a.error("loader [FINAL Error], type: ".concat(this._type,", type: dispatch, errMsg: ").concat(t)),Or.errorStage="load",Or.errorFragment=this,Ni.b.diy_finalerr="21",Object(Ni.e)(!0)):this._timer=setTimeout((function(){o._startDispatch()}),1e3+1e3*this._dispatchErrCnt++)}}]),e}()),Cu=function(){function e(t,n,r){Ue()(this,e),this._tvid=t,this._vd=new Ru("v",n),this._ad=new Ru("a",r)}return He()(e,[{key:"destroy",value:function(){this._vd.close(),this._ad.close(),this._vd=this._ad=null}},{key:"read",value:function(e,t){var n=this._vd,r=this._ad;return n.loadDone&&r.loadDone?(gr.a.info("read playNode data ok, bid: ".concat(e,", v.ed: ").concat(n.ed,", a.ed: ").concat(r.ed)),{tvid:this._tvid,bid:e,loadDone:n.done(t)&&r.done(t),type:Ko.a.DASH,video:{data:n.data,index:n.index,spos:n.spos,chunkEOF:!0},audio:{data:r.data,index:r.index,spos:r.spos,chunkEOF:!0}}):{}}},{key:"endPointer",get:function(){return{v:{chunkId:this._vd.index,ed:this._vd.ed},a:{chunkId:this._ad.index,ed:this._ad.ed}}}}]),e}(),Mu=[200,300,500,600];var Bu=function(){function e(t,n){Ue()(this,e),this.close(),this.tvid=t,this._initSegmentLoader=n}return He()(e,[{key:"close",value:function(){this._bidTovidList=null,this._absEverBidMap=new Map,this._absBidEverMap=new Map,this._absBidBitrateMap=new Map,this._absBidReadyList=[],this._absBidList=[],this.absBidVidMap=new Map,this.bidInitUrlMap=new Map}},{key:"vidList",get:function(){return this._bidTovidList}},{key:"absBidBitrateMap",get:function(){return this._absBidBitrateMap}},{key:"getAbsBidListFromBid",value:function(e){var t=this._absBidEverMap.get(e);return t&&this._absEverBidMap.get(t)||[e]}},{key:"parser",value:function(e,t){var n=this;this._bidTovidList||(this._bidTovidList=t.vidlist),t.vidlist&&0===this._absBidList.length&&(t.vidlist.forEach((function(e){-1===Mu.indexOf(e.bid)||e.hasOwnProperty("canplay")&&!e.canplay||(n._absBidList.push(e.bid),e.vsize&&e.duration&&n._absBidBitrateMap.set(e.bid,Math.floor(8*e.vsize/e.duration))),n.absBidVidMap.set(e.bid,e.vid)})),t.everList&&t.everList.forEach((function(e){if(e.ever&&n._absBidList.indexOf(e.bid)>=0){n._absBidEverMap.set(e.bid,e.ever);var t=n._absEverBidMap.get(e.ever)||[];t.push(e.bid),n._absEverBidMap.set(e.ever,t)}})),0===this._absEverBidMap.size?fr.a.absEverStatus="abs_no_ever":this._absBidEverMap.size===this._absBidList.length?fr.a.absEverStatus=1===this._absEverBidMap.size?"abs_ever_same":"abs_ever_not_same":fr.a.absEverStatus="abs_partial_ever"),-1!==Mu.indexOf(t.bid)&&this._absBidReadyList.indexOf(t.bid)<0&&this._absBidReadyList.push(t.bid);var r=null;return t.type===Ko.a.M4S||t.type===Ko.a.DASH?r=function(e,t,n,r,i){var a={},o=null,s=null,u=0,c=null,l=null,d={video_track1:{files:[]},audio_track1:{files:[]}};if(Ni.b.diy_info="",sa.diy_info="",r===Ko.a.M4S)Ni.b.diy_info+="m4s_",sa.diy_info+="m4s_",o=jr.getFilesInfo({m3u8:n},"video"),s=jr.getFilesInfo({m3u8:n},"audio"),a.duration=jr.getM4sDuration({m3u8:n});else{if(r!==Ko.a.DASH)return null;if(!n.video||!n.audio)return null;Ni.b.diy_info+="dash_",sa.diy_info+="dash_",o=n.video.segments,s=n.audio.segments,(n.video.duration||n.audio.duration)&&(a.duration=n.video.duration?n.video.duration:n.audio.duration)}for(var f=0,h=0,p={},v=0,y={a:0,b:0,c:0},g=0;g<o.length;g++)if(null!==o[g]&&o[g].hasOwnProperty("seekable")&&o[g].seekable.hasOwnProperty("pos")&&o[g].seekable.hasOwnProperty("time")){y.a++,d.video_track1.files[g]=o[g];var m=o[g].seekable,_=m.pos.length;m.pos[_-1]!==o[g].size&&m.pos.push(o[g].size),m.time[_-1]!==o[g].duration_second&&m.time.push(o[g].duration_second),o[g].sourceID=hr.a.getFileNameFromUrl(o[g].file_name),h+=m.time.length-1,d.video_track1.files[g].seekable=m}else if(null!==o[g]&&o[g].hasOwnProperty("seekable")&&o[g].seekable.hasOwnProperty("pos_start")){if(y.b++,c=o[g].file_name.toString(),0===g||c!==l.file_name||o[g-1].pos_end!==o[g].pos_start?(0===g?h=o.length:(l.size=o[g-1].seekable.pos_end,l.duration_second=hr.a.accSub(o[g].start_second,l.start_second),l.seekable.time.push(l.duration_second),d.video_track1.files.push(l),p[l.sourceID]={size:l.size,idx:v},0===o[g].seekable.pos_start&&v++),(l=new Ou).file_name=c,l.start_second=o[g].start_second,l.seekable.time.push(hr.a.accSub(o[g].start_second,l.start_second)),l.seekable.pos.push(o[g].seekable.pos_start),l.seekable.pos.push(o[g].seekable.pos_end),l.sourceID=hr.a.getFileNameFromUrl(c)):(l.seekable.pos.push(o[g].seekable.pos_end),l.seekable.time.push(hr.a.accSub(o[g].start_second,l.start_second))),g===o.length-1){l.size=o[g].seekable.pos_end,l.duration_second=hr.a.accAdd(l.seekable.time[l.seekable.time.length-1],o[g].duration_second),l.seekable.time.push(l.duration_second),d.video_track1.files.push(l),p[l.sourceID]={size:l.size,idx:v};var b=0,x=d.video_track1.files;for(Object.keys(p).length!==x.length?fr.a.MixWaterMark=!0:fr.a.MixWaterMark=!1;b<x.length;)x[b].size=p[x[b].sourceID].size,x[b].realIdx=p[x[b].sourceID].idx,b++}}else{y.c++;var k=hr.a.getFileNameFromUrl(o[g].uri.toString());if(0===g){var w=n.video.init;(l=new Ou).file_name=w.uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),l.seekable.pos.push(w.startByte),l.seekable.pos.push(w.endByte),l.seekable.time.push(0),l.size=w.endByte,l.start_second=-1,l.realIdx=v,d.video_track1.files.push(l),i.initDispatchUrlMap.set("v".concat(t),l.file_name),v++,(l=new Ou).file_name=o[g].uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),u=o[g].endByte,l.seekable.pos.push(o[g].startByte),l.seekable.pos.push(o[g].endByte),l.seekable.time.push(hr.a.accSub(o[g].startTime,l.start_second)),h=o.length}else u===o[g].startByte&&l.sourceID===k?(l.seekable.pos.push(o[g].endByte),l.seekable.time.push(hr.a.accSub(o[g].startTime,l.start_second)),u=o[g].endByte):(l.size=o[g-1].endByte,l.duration_second=hr.a.accSub(o[g].startTime,l.start_second),l.seekable.time.push(l.duration_second),d.video_track1.files.push(l),p[l.sourceID]={size:l.size,idx:v},0===o[g].startByte&&v++,(l=new Ou).file_name=o[g].uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),u=o[g].endByte,l.start_second=o[g].startTime,l.seekable.pos.push(o[g].startByte),l.seekable.pos.push(o[g].endByte),l.seekable.time.push(hr.a.accSub(o[g].startTime,l.start_second)));if(g===o.length-1){l.size=o[g].endByte,l.duration_second=hr.a.accAdd(l.seekable.time[l.seekable.time.length-1],o[g].duration),l.seekable.time.push(l.duration_second),d.video_track1.files.push(l),p[l.sourceID]={size:l.size,idx:v};var S=1,T=d.video_track1.files;for(Object.keys(p).length!==T.length-1?fr.a.MixWaterMark=!0:fr.a.MixWaterMark=!1;S<T.length;)T[S].size=p[T[S].sourceID].size,T[S].realIdx=p[T[S].sourceID].idx,S++}}Ni.b.diy_info+="v_"+y.a+"_"+y.b+"_"+y.c+"_",sa.diy_info+="v_"+y.a+"_"+y.b+"_"+y.c+"_",y.a=y.b=y.c=0;for(var P=0;P<s.length;P++)if(null!==s[P]&&s[P].hasOwnProperty("seekable")&&s[P].seekable.hasOwnProperty("pos")&&s[P].seekable.hasOwnProperty("time")){y.a++,d.audio_track1.files[P]=s[P];var E=s[P].seekable,A=E.pos.length;E.pos[A-1]!==s[P].size&&E.pos.push(s[P].size),E.time[A-1]!==s[P].duration_second&&E.time.push(s[P].duration_second),s[P].sourceID=hr.a.getFileNameFromUrl(s[P].file_name),d.audio_track1.files[P].seekable=E}else if(y.c++,0===P){var I=n.audio.init;(l=new Ou).file_name=I.uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),l.seekable.pos.push(I.startByte),l.seekable.pos.push(I.endByte),l.seekable.time.push(0),l.size=I.endByte,l.start_second=-1,d.audio_track1.files.push(l),i.initDispatchUrlMap.set("a".concat(t),l.file_name),(l=new Ou).file_name=s[P].uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),u=s[P].endByte,l.seekable.pos.push(s[P].startByte),l.seekable.pos.push(s[P].endByte),l.seekable.time.push(hr.a.accSub(s[P].startTime,l.start_second))}else u===s[P].startByte?(l.seekable.pos.push(s[P].endByte),l.seekable.time.push(hr.a.accSub(s[P].startTime,l.start_second)),u=s[P].endByte):(l.size=s[P-1].endByte,l.duration_second=hr.a.accSub(s[P].startTime,l.start_second),l.seekable.time.push(l.duration_second),d.audio_track1.files.push(l),(l=new Ou).file_name=s[P].uri.toString(),l.sourceID=hr.a.getFileNameFromUrl(l.file_name),u=s[P].endByte,l.start_second=s[P].startTime,l.seekable.pos.push(s[P].startByte),l.seekable.pos.push(s[P].endByte)),P===s.length-1&&(l.size=s[P].endByte,l.duration_second=hr.a.accSub(a.duration,l.start_second),l.seekable.time.push(l.duration_second),d.audio_track1.files.push(l));return Ni.b.diy_info+="a_"+y.a+"_"+y.c,sa.diy_info+="a_"+y.a+"_"+y.c,a.m3u8=d,{info:a,chunkNum:h,size:f}}(0,t.bid,t.dataFlow,t.type,this._initSegmentLoader):t.type===Ko.a.TS&&(fr.a.enableStartSpeed&&t.dataFlow.play&&As.setFastPlayDarr(t.dataFlow.play),r=function(e){var t={},n=0,r={};if(e){var i=[],a=0,o=e.length,s=new Lu,u=0;s.start_second=a,fr.a.enableStartSpeed?(s.sourceID=e[0].filename,s.quoteSegment=e[0]):(s.file_name=e[0].__url,s.sourceID=hr.a.getFileNameFromUrl(s.file_name));for(var c=0,l=0,d=0,f=0;f<o;f++){if(f>0){var h=fr.a.enableStartSpeed?e[f].filename:hr.a.getFileNameFromUrl(e[f].__url),p=e[f].startByte;p===c&&h===s.sourceID||(s.duration_second=hr.a.accSub(d,s.start_second),s.size=c,i.push(s),t[s.sourceID]={size:s.size,idx:n},0===p&&n++,s=new Lu,fr.a.enableStartSpeed?s.sourceID=e[f].filename:(s.file_name=e[f].__url,s.sourceID=hr.a.getFileNameFromUrl(s.file_name)),s.start_second=d,s.quoteSegment=e[f])}var v=e[f].startByte,y=e[f].endByte;u+=y-v,f<o-1?l=e[f+1].startTime:r.duration=l=d+e[f].duration,c=y,s.pos.push({sPos:v,ePos:y});var g={};g.startPos=v,g.endPos=c,g.contentlength=g.endPos-g.startPos,g.sd=d,s.loadInfo.push(g),s.time.push(hr.a.accSub(l,s.start_second)),d=l}s.duration_second=hr.a.accSub(l,s.start_second),s.size=c,t[s.sourceID]={size:s.size,idx:n},i.push(s),Object.keys(t).length!==i.length?fr.a.MixWaterMark=!0:fr.a.MixWaterMark=!1;for(var m=0;m<i.length;)i[m].size=t[i[m].sourceID].size,i[m].realIdx=t[i[m].sourceID].idx,m++;return r.m3u8=i,{info:r,chunkNum:o,size:u}}}(t.dataFlow.stream)),r?(r.info.vsize=r.size||t.vsize,r.info.vid=t.vid,r.info.chunkNum=r.chunkNum,{levelID:t.bid,data:r.info}):null}},{key:"parseAV1PlayNode",value:function(e,t,n){var r=e.ah,i=e.vh,a=e.ad,o=e.vd,s=this._initSegmentLoader.initDispatchUrlMap,u=this._initSegmentLoader.initCDNDInfoArrMap;return r.type=a.type="a",i.type=o.type="v",[r,i].forEach((function(e){e&&(e.hasOwnProperty("ourl")&&e.ourl&&s.set("".concat(e.type).concat(t),e.ourl),e.hasOwnProperty("l")&&e.l&&u.set("".concat(e.type).concat(t),{URL:e.l,z:e.z,re:e.t}))})),this._initSegmentLoader.load(t,"v"),this._initSegmentLoader.load(t,"a"),new Cu(n,o,a)}}]),e}(),Nu=n(128),Fu=function(){function e(t,n,r,i){Ue()(this,e),fr.a.vcodec="av1",this._dispatchUrlMap=t,this._dataMap=n,this._key=r,this._timer=0,this._dispatchErrCnt=0,this._dInfoArr=i.get(r)?[i.get(r)]:[],this._errIDCList=[],this._cdnErrCnt=0,this._xhr=null,this._startCDNLoad()}return He()(e,[{key:"close",value:function(){if(this._xhr){try{this._xhr.abort()}catch(nh){}this._xhr=null}this._timer&&(clearTimeout(this._timer),this._timer=0)}},{key:"_onDispatchError",value:function(e,t){var n,r,i,a,o=this;this.close(),Ni.b.diy_dispatchurl=e,Ni.b.diy_dispatcherr=t,Ni.b.diy_diserrtype=Ss.a.getErrorType(t),sa.diy_dispatchurl=e,sa.diy_dispatcherr=t,sa.diy_diserrtype=Ss.a.getErrorType(t),gr.a.warn("InitSegment.dispatch.error, key: ".concat(this._key,", url: ").concat(e,", errMsg: ").concat(t));var s=fr.a.getBufferFunc();this._dispatchErrCnt>=3&&Math.min((null==s||null===(n=s.buffered)||void 0===n||null===(r=n.video)||void 0===r?void 0:r.len)||0,(null==s||null===(i=s.buffered)||void 0===i||null===(a=i.audio)||void 0===a?void 0:a.len)||0)<2?(gr.a.error("loader [FINAL Error], key: ".concat(this._key,", type: dispatch, errMsg: ").concat(t)),Or.errorStage="load",Or.errorFragment=this,Ni.b.diy_finalerr="21",sa.diy_finalerr="21",Object(Ni.e)(!0),ia(!0)):this._timer=setTimeout((function(){o._startDispatch()}),1e3+1e3*this._dispatchErrCnt++)}},{key:"_onCDNError",value:function(e,t){var n,r,i,a,o=this;this.close(),this._dInfoArr.shift(),Ni.b.diy_tsurl=e,Ni.b.diy_tserr=t,Ni.b.diy_tserrtype=Ss.a.getErrorType(t),sa.diy_cdnurl=e,sa.diy_cdnerr=t,sa.diy_cdnerrtype=Ss.a.getErrorType(t),gr.a.warn("InitSegment.load.error, key: ".concat(this._key,", url: ").concat(e,", errMsg: ").concat(t));var s=fr.a.getBufferFunc();this._cdnErrCnt>=3&&Math.min((null==s||null===(n=s.buffered)||void 0===n||null===(r=n.video)||void 0===r?void 0:r.len)||0,(null==s||null===(i=s.buffered)||void 0===i||null===(a=i.audio)||void 0===a?void 0:a.len)||0)<2?(gr.a.error("loader [FINAL Error], key: ".concat(this._key,", type: cdn, errMsg: ").concat(t)),Or.errorStage="load",Or.errorFragment=this,Ni.b.diy_finalerr="1",sa.diy_finalerr="1",Object(Ni.e)(!0),ia(!0)):this._timer=setTimeout((function(){o._startCDNLoad()}),1e3+1e3*this._cdnErrCnt++)}},{key:"_startCDNLoad",value:function(){var e=this;if(!this._xhr)if(0!==this._dInfoArr.length){var t=this._dInfoArr[0].URL;try{-1===t.indexOf("stauto")&&(t+="&stauto=".concat(fr.a.absStatus)),-1===t.indexOf("ori")&&(t+="&ori=pcw".concat(fr.a.platform)),-1===t.indexOf("num")&&(t+="&num=".concat(Date.now().toString())),-1===t.indexOf("?")&&(t=t.replace(/&/,"?")),pr.a.isHTTPS&&(t=t.replace(/^http:/gi,"https:")),gr.a.info("InitSegment.load.start, key: ".concat(this._key,", url: ").concat(t)),this._xhr=new XMLHttpRequest,this._xhr.responseType="arraybuffer",this._xhr.open("GET",t,!0),this._xhr.withCredentials=!1,this._xhr.send(),this._xhr.startTime=performance.now(),Ni.b.diy_tsrcnt++,sa.diy_cdnrcnt++,this._xhr.onreadystatechange=function(){if(e._xhr&&4===e._xhr.readyState)if(e._xhr.status>=200&&e._xhr.status<=206){var n=e._xhr.response;if(!n)throw new Error("responseIsNull");var r=new Uint8Array(n);if(!r.byteLength)throw new Error("responseIsEmpty");e._dataMap.set(e._key,r),gr.a.info("InitSegment.load.success, key: ".concat(e._key,", size: ").concat(r.byteLength)),e._cdnErrCnt=0,Ni.b.diy_cdnbw+=r.byteLength,Ni.b.diy_tssize+=r.byteLength,Ni.b.diy_tsfttcnt++,Ni.b.diy_tsftttime+=Math.floor(performance.now()-e._xhr.startTime),Ni.b.diy_tssucccnt++,Ni.b.diy_tstime+=Math.floor(performance.now()-e._xhr.startTime),sa.diy_cdnsize+=r.byteLength,sa.diy_cdnfttcnt++,sa.diy_cdnftttime+=Math.floor(performance.now()-e._xhr.startTime),sa.diy_cdnsucccnt++,sa.diy_cdntime+=Math.floor(performance.now()-e._xhr.startTime),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDataDone()}else e._onCDNError(t,"statusErr_".concat(e._xhr.status))}}catch(nh){this._onCDNError(t,"tryCatchError_".concat(nh.message))}}else this._startDispatch()}},{key:"_startDispatch",value:function(){var e=this;if(!this._xhr){var t=this._dispatchUrlMap.get(this._key);if(t)try{if(t+=-1===t.indexOf("?")?"?pv=0.1":"&pv=0.1",t+="&cross-domain=1",t+="&mss=1",t+="&stauto="+fr.a.absStatus,this._dispatchErrCnt>0&&this._errIDCList.length>0&&this._errIDCList.length<3&&(this._errIDCList.length>0&&this._errIDCList.length<3&&(t+="&retry=".concat(this._errIDCList.length.toString()),t+="&z=".concat(this._errIDCList.toLocaleString().replace(/,/g,"|"))),this._dispatchErrCnt%2==0)){var n=hr.a.parseURL(t);t=fr.a.platform===vr.a.WEB?t.replace(n[2]+n[4],ws.getPipeIp()+"/3eb/"+Vr()(n[2])+is.Base64.encode(n[4])):t.replace(n[2],ws.getPipeIp()+"/3eb/"+n[2]),pr.a.isHTTPS&&(t+="&&ssl=1")}window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisStart(),this._xhr=new XMLHttpRequest,this._xhr.responseType="json",this._xhr.open("GET",t,!0),this._xhr.withCredentials=!1,this._xhr.send(),this._xhr.startTime=performance.now(),Ni.b.diy_dispatchcnt++,sa.diy_dispatchcnt++,t.indexOf("/3eb/")>=0&&(Ni.b.diy_bgpreqcnt++,sa.diy_bgpreqcnt++),this._xhr.onreadystatechange=function(){if(e._xhr&&4===e._xhr.readyState)if(e._xhr.status>=200&&e._xhr.status<=206){e._dispatchErrCnt=0,Ni.b.diy_dispsucccnt++,Ni.b.diy_disptime+=Math.floor(performance.now()-e._xhr.startTime),sa.diy_dispsucccnt++,sa.diy_disptime+=Math.floor(performance.now()-e._xhr.startTime),t.indexOf("/3eb/")>=0&&(Ni.b.diy_bgpsucccnt++,sa.diy_bgpsucccnt++);var n=e._xhr.response;if(!n)throw new Error("responseIsNull");if(!n.hasOwnProperty("uri"))throw new Error("responseHasNoUri");gr.a.info("InitSegment.dispatch.success, key: ".concat(e._key,", data: ").concat(JSON.stringify(n),", isHttps: ").concat(pr.a.isHTTPS));var r=JSON.parse(JSON.stringify(n));if(!r.d||0===r.d.length)throw new Error("responseNoCDNUrl");if(pr.a.isHTTPS)for(var i=0;i<r.d.length;i++)if(r.d[i].URL.indexOf("https")<0)throw new Error("notIsHttps");for(var a=0;a<r.d.length;a++)e._dInfoArr.push(r.d[a]);e.close(),e._startCDNLoad(),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onDisDone()}else e._onDispatchError(t,"","statusErr_".concat(e._xhr.status))},gr.a.info("InitSegment.dispatch.start, key: ".concat(this._key,", url: ").concat(t))}catch(nh){this._onDispatchError(t,"","tryCatchError_".concat(nh.message))}}}}]),e}(),qu=function(){function e(){Ue()(this,e),this._loaderMap=new Map,this._dataMap=new Map,this._dispatchUrlMap=new Map,this._cdnDInfoArrMap=new Map}return He()(e,[{key:"load",value:function(e,t){var n="".concat(t).concat(e);this._dataMap.has(n)||this._loaderMap.has(n)||this._dispatchUrlMap.has(n)&&this._loaderMap.set(n,new Fu(this._dispatchUrlMap,this._dataMap,n,this._cdnDInfoArrMap))}},{key:"reset",value:function(){this._loaderMap.forEach((function(e){return e.close()})),this._loaderMap.clear(),this._dispatchUrlMap.clear(),this._dataMap.clear(),gr.a.info("InitSegmentLoader.reset")}},{key:"initDispatchUrlMap",get:function(){return this._dispatchUrlMap}},{key:"initCDNDInfoArrMap",get:function(){return this._cdnDInfoArrMap}},{key:"initDataMap",get:function(){return this._dataMap}}]),e}(),ju=undefined,Uu=undefined,Vu=undefined,Hu=undefined,zu=undefined,Gu=Object.defineProperties({},{absNoADNoMaxPlay:{set:function(e){Uu===undefined?(ju=e,gr.a.info("page first abs open: "+e)):e||(ju=!1)},configurable:!0,enumerable:!0},startPlayTime:{set:function(e){Uu===undefined&&(Uu=e,gr.a.info("page first start play"))},configurable:!0,enumerable:!0},absReport:{set:function(e){Hu===undefined&&(Hu=e,gr.a.info("page first abs report"))},configurable:!0,enumerable:!0},absSwtMaxBidTime:{set:function(e){zu===undefined&&(zu=performance.now(),ju?Hu>0?(Ni.b.diy_abs_a_d=Math.floor(e-Hu),sa.diy_abs_a_d=Math.floor(e-Hu),gr.a.info("page first abs switch to max consume: "+Ni.b.diy_abs_a_d||!1)):gr.a.error("page first abs switch to max error"):gr.a.warn("page first abs switch to max invalid"))},configurable:!0,enumerable:!0},playToMaxBidTime:{set:function(e){Vu===undefined&&(Vu=1,ju?(Uu>0?(Ni.b.diy_abs_u_d=Math.floor(performance.now()),sa.diy_abs_u_d=Math.floor(performance.now()),gr.a.info("page first play to max bid, play consume time: "+Ni.b.diy_abs_u_d||!1)):gr.a.error("page first play to max bid, no start time"),zu>0?(Ni.b.diy_abs_s_d=Math.floor(e-zu),sa.diy_abs_s_d=Math.floor(e-zu),gr.a.info("page first play to max bid, switch consume time: "+Ni.b.diy_abs_s_d||!1)):gr.a.info("page first play to max bid, no switch to max start time")):gr.a.warn("page first play to max invalid"))},configurable:!0,enumerable:!0}}),Wu=!0,Ku={read:{bid:0,segmentIndex:0,chunkIndex:0,time:0,pos:0},load:{bid:0,segmentIndex:0,chunkIndex:0,time:0,pos:0},play:{bid:0,segmentIndex:0,chunkIndex:0,time:0},abs:{action:"",bid:0,segmentIndex:0,chunkIndex:0,time:0}};try{localStorage.getItem("CDNTest")&&!0}catch(nh){}var $u=function(){function e(){Ue()(this,e),this._seekDone=!1,this._videoLoad=!1,this._audioLoad=!1,this._seekEndTime=!1,this._seekCauseVideoSwitchBid=!1,this._seekCauseAudioSwitchBid=!1,this._videoChunkComplete=!0,this._audioChunkComplete=!0,this._switchVideoPointer=new Du,this._switchAudioPointer=new Du,this.absRecord=JSON.parse(JSON.stringify(Ku)),this.dashInfo=null,this.levelMgr=null,this.dashRequestMap=new Map,this._levelID=0,this._absStrategy=null,this._readPointer=null,this._loadPointer=null,this._readAudioPointer=null,this._loadAudioPointer=null,this._p2pLoaderPointer=null,this.curLoadSegment=null,this.curLoadAudioSegment=null,this.videoFormatType=null,this.rangeSTime=-1,this.rangeETime=-1,this.audioDone=!1,this.videoDone=!1,this.absTocbs=!1,this.event=null,this.curFeedBid=0,this.buffTimer=-1,this.playChunkEndTimeList=[],this.playTimeMontorTimer=0,this.readWorking=!1,this.action="",this._loadChunkInfo={segmentIndex:0,chunkIdx:0,chunkStartTime:0},this._lstReadCETime=0,this._seekTime=0,this.firstInStable=!0,this.initSegmentLoader=new qu,this.halfChunk=!1,this.m3u8CDN=null,this.m3u8ED=null,this._loadSwitchTime=0,this._loadSwitchMethod=""}return He()(e,[{key:"lastAbsLoadSwitchTime",value:function(){this._loadSwitchTime&&this._loadSwitchMethod&&(Ni.b.diy_absswt="up"===this._loadSwitchMethod?Math.floor(performance.now()-this._loadSwitchTime):Math.floor(this._loadSwitchTime-performance.now()),this._loadSwitchTime=0,this._loadSwitchMethod="")}},{key:"done",get:function(){return this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?this.videoDone&&this.audioDone:this.videoDone}},{key:"resetLoader",value:function(){mu.reset(),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||_u.reset()}},{key:"resetDoneStatus",value:function(){this.videoDone=!1,this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||(this.audioDone=!1)}},{key:"refreshLoadRange",value:function(e){e[0][1]>this.rangeETime&&this.done&&this.resetDoneStatus(),this.rangeSTime=e[0][0],this.rangeETime=e[0][1],gr.a.info("refreshLoadRange time ,start "+this.rangeSTime+", end "+this.rangeETime)}},{key:"feed",value:function(e,t,n){var r,i;fr.a.tvId=this.tvid=e,this.event?this.event.clear():this.event=ns.a.newEvent(),this.curFeedBid=n.bid,null===this.levelMgr&&(this.levelMgr=new Mr),this.dashInfo&&this.dashInfo.tvid===this.tvid||(this.levelMgr.clear(),this.dashInfo=new Bu(e,this.initSegmentLoader));var a,o,s=this.dashInfo.parser(e,n);if(s&&this.levelMgr.set(s.levelID,s.data),n.atkList&&n.atkList.length&&!fr.a.atkMap.has(e)){var u=[];n.atkList.forEach((function(e){u.push(e)})),fr.a.atkMap.set(e,u)}(this.rangeSTime=t[0][0],this.rangeETime=t[0][1],gr.a.info("feed time range ,start "+this.rangeSTime+", end "+this.rangeETime+",Type "+n.type),fr.a.fileType=this.videoFormatType=n.type,fr.a.aid=n.aid,this.videoFormatType===Ko.a.DASH&&null!==(r=n.dataFlow)&&void 0!==r&&null!==(i=r.play)&&void 0!==i&&i.av1&&null===this.m3u8CDN)&&(this.m3u8CDN=this.dashInfo.parseAV1PlayNode(null===(a=n.dataFlow)||void 0===a||null===(o=a.play)||void 0===o?void 0:o.av1,n.bid,this.tvid),this.m3u8ED=this.m3u8CDN.endPointer)}},{key:"clearSegmentUrl",value:function(){this.curLoadSegment&&!this.curLoadSegment.dispatchError&&this.curLoadSegment.dispatchUrl&&(gr.a.info("clear video dispatchUrl,  bid: ".concat(this.curLoadSegment.rate,", url: ").concat(this.curLoadSegment.dispatchUrl)),this.curLoadSegment.dispatchUrl="",this.curLoadSegment.dispatchError=!0),this.curLoadAudioSegment&&!this.curLoadAudioSegment.dispatchError&&this.curLoadAudioSegment.dispatchUrl&&(gr.a.info("clear audio dispatchUrl bid: ".concat(this.curLoadAudioSegment.rate,", url: ").concat(this.curLoadAudioSegment.dispatchUrl)),this.curLoadAudioSegment.dispatchUrl="",this.curLoadAudioSegment.dispatchError=!0)}},{key:"segmentError",get:function(){return this.curLoadSegment&&this.curLoadSegment.dispatchError||this.curLoadAudioSegment&&this.curLoadAudioSegment.dispatchError}},{key:"setDefList",value:function(e){var t=this;this.dashInfo&&e&&e.length&&e.forEach((function(e){var n=t.dashInfo.parser(t.tvid,e);if(n){if(t.levelMgr.set(n.levelID,n.data),t.dashRequestMap.has(n.levelID)){var r=t.dashRequestMap.get(n.levelID),i=Math.floor(performance.now()-r.time);r.time=performance.time,r.status="success",Ni.b.diy_dashsucccnt++,Ni.b.diy_dashtime+=i,sa.diy_dashsucccnt++,sa.diy_dashtime+=i,gr.a.info("DashMovie.setDefList, bid: ".concat(n.levelID,", time: ").concat(i,", failCnt: ").concat(r.failCnt))}else gr.a.info("DashMovie.setDefList, tvid: ".concat(t.tvid,", bid: ").concat(n.levelID));if(t.segmentError){var a=n.data,o=null,s=null;t.videoFormatType===Ko.a.M4S||t.videoFormatType===Ko.a.DASH?(o=jr.getFilesInfo(a,yu),s=jr.getFilesInfo(a,gu)):t.videoFormatType.indexOf(Ko.a.TS)>=0&&(o=a.m3u8),t.curLoadSegment&&!t.curLoadSegment.dispatchUrl&&n.levelID===t.curLoadSegment.rate&&o&&(fr.a.enableStartSpeed&&(o[t.curLoadSegment.oriIndex].file_name=o[t.curLoadSegment.oriIndex].quoteSegment.uri.toString()),t.curLoadSegment.dispatchUrl=o[t.curLoadSegment.oriIndex].file_name,t.curLoadSegment.dispatchError=!1,gr.a.info("refresh video dispatchUrl success, url: "+t.curLoadSegment.dispatchUrl)),t.curLoadAudioSegment&&!t.curLoadAudioSegment.dispatchUrl&&n===t.curLoadAudioSegment.rate&&s&&(fr.a.enableStartSpeed&&(s[t.curLoadAudioSegment.oriIndex].file_name=s[t.curLoadAudioSegment.oriIndex].quoteSegment.uri.toString()),t.curLoadAudioSegment.dispatchUrl=s[t.curLoadAudioSegment.oriIndex].file_name,t.curLoadAudioSegment.dispatchError=!1,gr.a.info("refresh audio dispatchUrl success, url: "+t.curLoadAudioSegment.dispatchUrl))}}}))}},{key:"setDefFail",value:function(e){if(this.dashRequestMap.has(e)){var t=this.dashRequestMap.get(e),n=Math.floor(performance.now()-t.time);gr.a.info("DashMovie.setDefFail, bid: ".concat(e,", time: ").concat(n)),t.failCnt++,t.time=performance.now(),t.status="fail",t.failCnt>=3&&this._setReadLevelInfo()}else gr.a.warn("DashMovie.setDefFail, warning, bid: ".concat(e))}},{key:"_setReadLevelInfo",value:function(){if(this.dashInfo&&this._readPointer&&this._readPointer.bid){fr.a.readTvid=this.tvid,fr.a.readBid=this._readPointer.bid;var e=this.dashInfo.absBidBitrateMap;fr.a.readLevelBitrate=e.get(fr.a.readBid),fr.a.everMaxBitrate=e.get(this._getCurEverMaxBid(fr.a.readBid))}}},{key:"absQOS",value:function(e){var t,n;-1===this._levelID&&-1!==e&&(Ni.b.diy_a_prebid=qi.a.playBid||(null===(t=this._readPointer)||void 0===t?void 0:t.bid)||(null===(n=this._loadPointer)||void 0===n?void 0:n.levelID),Ni.b.diy_a_nexbid=e)}},{key:"checkBitRate",value:function(e){if(null===this.dashInfo)return null;this.halfChunk=!1,fr.a.playTvId===this.tvid&&this._signalQOS(),Gu.absNoADNoMaxPlay=-1===this._levelID&&!fr.a.isAD()&&this.curLoadBid!==this._getCurEverMaxBid(this.curLoadBid),-1===this._levelID?null===this._absStrategy&&(this._absStrategy=new yr.c(this.tvid),this._loadPointer&&(this._absStrategy.lstHCDNTime=this._loadPointer.cEndTime||0)):(null!==this._absStrategy&&(this._absStrategy.close(),this._absStrategy=null),this._switchVideoPointer.tvid===this.tvid&&(-1!==this._switchVideoPointer.levelID&&this._switchVideoPointer.reset(),-1!==this._switchAudioPointer.levelID&&this._switchAudioPointer.reset()),this.levelMgr.get(e)||(this.m3u8CDN||this.m3u8ED?gr.a.warn("wait m3u8 load down"):gr.a.error("need feed first ,bitRate : ",e)))}},{key:"curLoadBid",get:function(){var e,t;return(null===(e=this._loadPointer)||void 0===e?void 0:e.levelID)||(null===(t=this.curLoadSegment)||void 0===t?void 0:t.rate)||this.curFeedBid}},{key:"userBid",get:function(){return this._levelID}},{key:"levelID",get:function(){return-1===this._levelID?fr.a.absOpen&&this._absStrategy&&this._absStrategy.bitrate>0&&this.levelMgr.has(this._absStrategy.bitrate)?this._absStrategy.bitrate:this._loadPointer&&this._loadPointer.levelID>0&&this.levelMgr.has(this._loadPointer.levelID)?this._loadPointer.levelID:this.curLoadSegment&&this.curLoadSegment.rate>0&&this.levelMgr.has(this.curLoadSegment.rate)?this.curLoadSegment.rate:this.curFeedBid:this._levelID},set:function(e){this._levelID=e,this.action="swicthBid",yr.a.bufferArray.length=0,fr.a.cdnSize=fr.a.cdnCostTime=0,fr.a.p2pSize=fr.a.p2pCostTime=0,fr.a.getStuckList(),fr.a.getReBufTimeFunc()}},{key:"_selectedLevelID",get:function(){return-1===this._levelID?fr.a.absOpen&&this._absStrategy&&this._absStrategy.bitrate>0&&this.levelMgr.has(this._absStrategy.bitrate)?this._absStrategy.bitrate:this._loadPointer&&this._loadPointer.levelID>0&&this.levelMgr.has(this._loadPointer.levelID)?this._loadPointer.levelID:this.curLoadSegment&&this.curLoadSegment.rate>0&&this.levelMgr.has(this.curLoadSegment.rate)?this.curLoadSegment.rate:this.curFeedBid:this._levelID||this.curFeedBid}},{key:"_innerSeek",value:function(){if(this.levelMgr.has(this.curFeedBid)){var e=this.m3u8ED,t=e.v,n=e.a;this.m3u8ED=null,gr.a.info("inner seek start, bid: ".concat(this.curFeedBid,", vET: ").concat(t.ed,", aET: ").concat(n.ed));var r=this.curFeedBid;fr.a.bitrate=r;var i=this.levelMgr.get(r);if(Math.min(t.ed,n.ed)>=i.duration)return this._seekEndTime=!0,this.videoDone=!0,this.audioDone=!0,void gr.a.warn("while inner seek, time is bigger than duration, seek.time "+Math.min(t.ed,n.ed)+", duration: "+i.duration);var a=jr.getGapPosRound(i,t.ed,yu);gr.a.info("inner seek video pointer: "+JSON.stringify(a)),this._absStrategy&&(this._absStrategy.lstHCDNTime=a.time),this._readPointer=new Au,this._readPointer.time=a.time,this._readPointer.segmentIndex=a.segmentIndex,this._readPointer.chunkIndex=a.chunkIndex,this._readPointer.bid=r,this._readPointer.chunkPos=a.pos,this._loadPointer=new Iu,this._loadPointer.startTime=a.time,this._loadPointer.cEndTime=a.time,this._loadPointer.segmentIndex=a.segmentIndex,this._loadPointer.chunkIndex=a.chunkIndex,this._loadPointer.chunkPos=a.pos,this._loadPointer.levelID=r,this._p2pLoaderPointer=new Iu,this._p2pLoaderPointer.levelID=r;var o=jr.getGapPosRound(i,n.ed,gu);gr.a.info("inner seek video pointer: "+JSON.stringify(o)),this._loadAudioPointer=new Iu,this._loadAudioPointer.startTime=o.time,this._loadAudioPointer.cEndTime=o.time,this._loadAudioPointer.segmentIndex=o.segmentIndex,this._loadAudioPointer.chunkIndex=o.chunkIndex,this._loadAudioPointer.chunkPos=o.pos,this._loadAudioPointer.levelID=r,this._readAudioPointer=new Au,this._readAudioPointer.time=o.time,this._readAudioPointer.segmentIndex=o.segmentIndex,this._readAudioPointer.chunkIndex=o.chunkIndex,this._readAudioPointer.chunkPos=o.pos,this._readAudioPointer.bid=r,this.action="seek"}else gr.a.warn("check load, feed dash no ready")}},{key:"seek",value:function(e,t){this._lstReadCETime=0,fr.a.cdnSize=fr.a.cdnCostTime=0,fr.a.p2pSize=fr.a.p2pCostTime=0,fr.a.getStuckList(),fr.a.getReBufTimeFunc(),this._seekEndTime=!1;var n=this._selectedLevelID;0===n&&gr.a.error("need set bitrate first!"),null===this.dashInfo&&gr.a.error("need feed first!"),(e<0||e===undefined)&&(e=this.rangeSTime),this._seekTime=e;var r=this.levelMgr.get(n);if(!r)return this.m3u8CDN||this.m3u8ED?void gr.a.warn("while seek, m3u8 level info is not ready"):void gr.a.error(" while seek ,levelInfo is null ,bid "+n);var i=-1===this._levelID&&this._readPointer&&this._readPointer.bid!==n&&!0;if(t||(this._switchVideoPointer.reset(),this._switchAudioPointer.reset()),this._videoChunkComplete=!0,this._audioChunkComplete=!0,this.absTocbs=!1,e>=r.duration)return this._seekEndTime=!0,this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(this.videoDone=!0,this.audioDone=!0):this.videoDone=!0,void gr.a.warn("while seek, time is bigger than duration, seek.time "+e+", duration: "+r.duration);var a=null;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?a=jr.getGapPos(r,e,yu,"start"):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(a=jr.getTSGapPos(r,e,"start")),null!==a){this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||_u.reset(),mu.reset(!1),this._seekDone=!0,this.resetDoneStatus(),e<this.rangeSTime?(this.rangeSTime=e,gr.a.info("seek update time start  range ,start "+this.rangeSTime+", end "+this.rangeETime)):e>this.rangeETime&&(this.rangeETime=Math.min(r.duration,this.rangeETime),gr.a.info("seek update time end range ,start "+this.rangeSTime+", end "+this.rangeETime)),null===this._readPointer&&(this._readPointer=new Au);var o=this._readPointer.segmentIndex;if(this.changeSegmentState(r,"e",a.segmentIndex,0),gr.a.info("seek update readPointer call changeSegmentState set 0 : e"+a.segmentIndex),this._absStrategy&&(this._absStrategy.lstHCDNTime=a.time),this._readPointer.time=a.time,this._readPointer.segmentIndex=a.segmentIndex,this._readPointer.chunkIndex=a.chunkIndex,-1===this._levelID&&0!==this._readPointer.bid&&this._readPointer.bid!==n?this._readPointer.bid=this._readPointer.bid:this._readPointer.bid=n,i&&(this._switchVideoPointer.time=this._readPointer.time,this._switchVideoPointer.tvid=this.tvid,this._switchVideoPointer.levelID=n,this._switchVideoPointer.segmentIndex=this._readPointer.segmentIndex,this._switchVideoPointer.chunkIndex=this._readPointer.chunkIndex,this._seekCauseVideoSwitchBid=!0,gr.a.info("seek cause this._switchVideoPointer ,"+JSON.stringify(this._switchVideoPointer)+this.tvid)),this.videoFormatType===Ko.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=a.pos,o!==this._readPointer.segmentIndex&&(this.changeSegmentState(r,"e",o,1),gr.a.info("seek update readPointer call changeSegmentState set 1 : e"+o)),null===this._loadPointer&&(this._loadPointer=new Iu),this._loadPointer.startTime=a.time,this._loadPointer.cEndTime=a.time,this._loadPointer.segmentIndex=a.segmentIndex,this._loadPointer.chunkIndex=a.chunkIndex,this._loadPointer.loadStartIdx=a.chunkIndex,this._loadPointer.chunkPos=a.pos,this._loadPointer.levelID=n,fr.a.bitrate=n,this._loadChunkInfo.segmentIndex=a.segmentIndex,this._loadChunkInfo.chunkIdx=a.chunkIndex,this._loadChunkInfo.chunkStartTime=a.time,this._p2pLoaderPointer||(this._p2pLoaderPointer=new Iu),this._p2pLoaderPointer.levelID=n,this.curLoadSegment){var s=parseInt(this.curLoadSegment.index.slice(1));this._loadPointer.segmentIndex!==s?(this.changeSegmentState(r,"e",s,1),gr.a.info("seek update loadPointer call changeSegmentState set 1 : e"+s+", bid: "+this.curLoadSegment.rate)):(this.curLoadSegment.updateCePos(a.pos),this.curLoadSegment.updateLoadRange(this._loadPointer.chunkPos,this.curLoadSegment.endPos),gr.a.info("seek update loadPointer call updateCePos set 1 : e"+a.pos+", bid: "+this.curLoadSegment.rate))}if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){var u=jr.getGapPos(r,e,gu,"start");if(null===u)gr.a.error("Dash.seek fetch audio start point is null,time = "+e);else{null===this._loadAudioPointer&&(this._loadAudioPointer=new Iu),this.changeSegmentState(r,"a",u.segmentIndex,0),gr.a.info("seek call changeSegmentState set 0 : a"+u.segmentIndex);var c=this._loadAudioPointer.segmentIndex;this._loadAudioPointer.startTime=u.time,this._loadAudioPointer.cEndTime=u.time,this._loadAudioPointer.segmentIndex=u.segmentIndex,this._loadAudioPointer.chunkIndex=u.chunkIndex,this._loadAudioPointer.chunkPos=u.pos,this._loadAudioPointer.levelID=n,i&&(this._switchAudioPointer.time=this._loadAudioPointer.startTime,this._switchAudioPointer.tvid=this.tvid,this._switchAudioPointer.levelID=n,this._switchAudioPointer.segmentIndex=this._loadAudioPointer.segmentIndex,this._switchAudioPointer.chunkIndex=this._loadAudioPointer.chunkIndex,this._seekCauseAudioSwitchBid=!0,gr.a.info("seek cause this._switchAudioPointer ,"+JSON.stringify(this._switchAudioPointer))),c!==this._loadAudioPointer.segmentIndex&&(this.changeSegmentState(r,"a",c,1),gr.a.info("seek loadAudioPointer call changeSegmentState set 1 : a"+c)),null===this._readAudioPointer&&(this._readAudioPointer=new Au);var l=this._readAudioPointer.segmentIndex;this._readAudioPointer.time=u.time,this._readAudioPointer.segmentIndex=u.segmentIndex,this._readAudioPointer.chunkIndex=u.chunkIndex,this._readAudioPointer.chunkPos=u.pos,-1===this._levelID&&0!==this._readAudioPointer.bid&&this._readAudioPointer.bid!==n?this._readAudioPointer.bid=this._readAudioPointer.bid:this._readAudioPointer.bid=n,l!==this._readAudioPointer.segmentIndex?(this.changeSegmentState(r,"a",l,1),gr.a.info("seek call changeSegmentState 1, a"+l)):this.curLoadAudioSegment&&(this.curLoadAudioSegment.updateCePos(u.pos),this.curLoadAudioSegment.updateLoadRange(this._loadAudioPointer.chunkPos,this.curLoadAudioSegment.endPos))}}this.action="seek",this._checkStopPlayTimer()}else gr.a.error("Dash.seek fetch video start point is null,time = "+e)}},{key:"_signalQOS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;qi.a.levelFlush(),(qi.a.play480Time()||qi.a.play720Time()||qi.a.play1080Time())&&(Object(Ni.e)(),ia()),e&&qi.a.resetCal()}},{key:"_checkStartPlayTimer",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;0===this.playTimeMontorTimer&&(fr.a.playTvId===this.tvid&&this._signalQOS(t),this.playTimeMontorTimer=setInterval((function(){if(!fr.a.isAD()&&fr.a.playTvId===e.tvid){var t=Nu.a.timestamp();if(t)if(fr.a.updateTimeStamp(t),e.playChunkEndTimeList.length)if(qi.a.playBid!==e.playChunkEndTimeList[0].bid&&(qi.a.playBid=e.playChunkEndTimeList[0].bid,qi.a.everMaxBid=Math.max.apply(Math,Cr()(e.dashInfo.getAbsBidListFromBid(qi.a.playBid))),qi.a.everMinBid=e._getCurEverMinBid(qi.a.playBid)),e._absStrategy&&e.playChunkEndTimeList[0].bid===e._getCurEverMaxBid(e.playChunkEndTimeList[0].bid)&&(Gu.playToMaxBidTime=performance.now()),t>e.playChunkEndTimeList[0].chunkEndTime){var n=e.playChunkEndTimeList.shift();qi.a.updateTimestamp(n.bid,t),e._absStrategy&&e.playChunkEndTimeList.length&&(e.playChunkEndTimeList[0].bid===e._getCurEverMaxBid(e.playChunkEndTimeList[0].bid)||n.bid===e._getCurEverMaxBid(n.bid))&&(Gu.playToMaxBidTime=performance.now());var r=e.absRecord.play;r.bid=n.bid,r.time=Math.floor(1e3*n.chunkEndTime),r.segmentIndex=n.segmentIndex,r.chunkIndex=n.chunkIndex,e.reportDataByPlay(n.bid,n.segmentIndex,n.chunkIndex)&&(e.action="")}else qi.a.updateTimestamp(e.playChunkEndTimeList[0].bid,t);else gr.a.error("playTimeMonitorTimer no chunk list")}}),1e3))}},{key:"_checkStopPlayTimer",value:function(){this.playTimeMontorTimer&&(clearInterval(this.playTimeMontorTimer),this.playTimeMontorTimer=0),this.playChunkEndTimeList=[]}},{key:"read",value:function(e){if(!this.readWorking&&!fr.a.isAD()&&fr.a.playTvId===this.tvid){if(this.recordBid&&fr.a.canSwitchVd()&&(gr.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),fr.a.switchAutoDef(this.recordBid),this.recordBid=0),this.readWorking=!0,!fr.a.isAD()&&fr.a.absCheck&&this._absStrategy&&this.videoFormatType===Ko.a.TS&&!this.segmentError&&!Or.errorFragment&&!this.done){var t=fr.a.getBufferFunc().len;t=+t.toFixed(3);var n=this.buffer;if(t=hr.a.accAdd(t,n),this.check(t),this._lstReadCETime-Nu.a.timestamp()>=3&&"stuck"!==fr.a.playState)return null}if(this.m3u8CDN&&this.videoFormatType===Ko.a.DASH){if(e)return this.getInitData(this.curFeedBid);var r=this.m3u8CDN.read(this.curFeedBid,this.rangeETime);return r.video&&(this.m3u8CDN.destroy(),this.m3u8CDN=null),r}if(null!==this._readPointer&&(this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||null!==this._readAudioPointer))if(null!==this.levelMgr){var i=!1,a=!1,o=!1,s=!1,u=!1;if(this.absTocbs)gr.a.info("abs switch cbs ing,so wait switch finished start read");else if(!this._seekDone){if(0===this._readPointer.bid&&(this._readPointer.bid=this._selectedLevelID),this._readAudioPointer&&0===this._readAudioPointer.bid&&(this._readAudioPointer.bid=this._selectedLevelID),-1===this._levelID&&-1!==this._switchVideoPointer.levelID&&(this.videoFormatType.indexOf(Ko.a.TS)>=0||(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&-1!==this._switchAudioPointer.levelID)&&(this._readPointer.time>=this._switchVideoPointer.time&&this._videoChunkComplete&&(i=!0),!i&&this._switchVideoPointer.time>this._readPointer.time&&(s=!0),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||(this._readAudioPointer.time>=this._switchAudioPointer.time&&this._audioChunkComplete&&(a=!0),!a&&this._switchAudioPointer.time>this._readAudioPointer.time&&(u=!0)),i&&(this.videoFormatType.indexOf(Ko.a.TS)>=0||(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&a))){if(!fr.a.canSwitchVd()&&this.videoFormatType.indexOf(Ko.a.TS)<0)return void gr.a.debug("playback not allow switch level");o=!0,this._seekCauseVideoSwitchBid||(this.changeSegmentState(this.levelMgr.get(this._readPointer.bid),"e",this._readPointer.segmentIndex,1),this._seekCauseVideoSwitchBid=!1),this._readPointer.bid=this._switchVideoPointer.levelID,this._readPointer.segmentIndex=this._switchVideoPointer.segmentIndex,this._readPointer.chunkIndex=this._switchVideoPointer.chunkIndex,this._readPointer.time=this._switchVideoPointer.time;var c=this.levelMgr.get(this._readPointer.bid);if(c){var l=null;(l=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getChunkSEPos(c,yu,this._readPointer.segmentIndex,this._readPointer.chunkIndex):jr.getTSChunkSEPos(c,this._readPointer.segmentIndex,this._readPointer.chunkIndex))?this.videoFormatType===Ko.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=l.sPos:gr.a.error("switch readPointer chunkGapPos is null ,bid  "+JSON.stringify(this._readPointer))}else gr.a.error("switch readPointer levelInfo is null ,bid  "+this._readPointer.bid);if(gr.a.info("read Video pointer switch level "+JSON.stringify(this._readPointer)),this._switchVideoPointer.reset(),this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){this._seekCauseAudioSwitchBid||(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),this._seekCauseAudioSwitchBid=!1),this._readAudioPointer.bid=this._switchAudioPointer.levelID,this._readAudioPointer.segmentIndex=this._switchAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex=this._switchAudioPointer.chunkIndex,this._readAudioPointer.time=this._switchAudioPointer.time;var d=jr.getChunkSEPos(c,gu,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);if(d)this._readAudioPointer.chunkPos=d.sPos;else{gr.a.error("switch readAudioPointer audioChunkPos is null");var f=jr.getGapPos(c,this._switchAudioPointer.time,gu,"start");f?(this._readAudioPointer.segmentIndex=f.segmentIndex,this._readAudioPointer.chunkIndex=f.chunkIndex,this._readAudioPointer.chunkPos=f.pos,this._readAudioPointer.time=f.time):gr.a.error("switch readAudioPointer startGap is null ")}gr.a.info("read Audio pointer switch level "+JSON.stringify(this._readAudioPointer)),this._switchAudioPointer.reset()}return fr.a.canSwitchVd()||this.videoFormatType!==Ko.a.TS?(gr.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),fr.a.switchAutoDef(this._readPointer.bid)):(gr.a.info("ABS switch bid , wait notice pcw ,"+this._readPointer.bid),this.recordBid=this._readPointer.bid),fr.a.readTvid===this.tvid&&fr.a.readBid===this._readPointer.bid||this._setReadLevelInfo(),this._readPointer.dataFlag=!1,this._readAudioPointer&&(this._readAudioPointer.dataFlag=!1),gr.a.info("AI switch bid success"),void(fr.a.switchMonitorTimer&&(clearTimeout(fr.a.switchMonitorTimer),fr.a.switchMonitorTimer=0))}if(fr.a.readTvid===this.tvid&&fr.a.readBid===this._readPointer.bid||this._setReadLevelInfo(),-1===this._levelID||this._readPointer.bid===this._levelID){var h=this.levelMgr.get(this._readPointer.bid);if(h!==undefined){var p=null,v=null,y=null;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(v=(p=jr.getFilesInfo(h,yu))[this._readPointer.segmentIndex].seekable.time,y=p[this._readPointer.segmentIndex].seekable.pos):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(v=(p=h.m3u8)[this._readPointer.segmentIndex].time,y=p[this._readPointer.segmentIndex].pos),this._seekEndTime){if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){var g=Yu(p,p.length-1,p[p.length-1].seekable.pos.length-1),m=jr.getFilesInfo(h,gu),_=Yu(m,m.length-1,m[m.length-1].seekable.pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:Ko.a.M4S,video:{chunkEOF:!0,data:null,index:g},audio:{chunkEOF:!0,data:null,index:_}}}var b=Yu(p,p.length-1,p[p.length-1].pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:"ts",stream:{chunkEOF:!0,data:null,index:b}}}if(e&&this.videoFormatType===Ko.a.DASH)return this.getInitData(this._readPointer.bid);var x="",k=p[this._readPointer.segmentIndex].sourceID,w=p[this._readPointer.segmentIndex].realIdx!==undefined?p[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,S=bu(k,h.vid,"e"+w),T=null;T=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getChunkSEPos(h,yu,this._readPointer.segmentIndex,this._readPointer.chunkIndex):jr.getTSChunkSEPos(h,this._readPointer.segmentIndex,this._readPointer.chunkIndex);var P=pi.getSegment(S),E=0;if(T&&P)if(this.videoFormatType===Ko.a.M4S){var A=T.ePos-this._readPointer.chunkPos;P.hasData(this._readPointer.chunkPos,A)&&(E=A)}else if(this.videoFormatType===Ko.a.DASH){if(this._readPointer.time<this.rangeETime){var I=T.ePos-this._readPointer.chunkPos;P.hasData(this._readPointer.chunkPos,I)&&(E=I)}}else if(this.videoFormatType===Ko.a.TS){var D=Math.min(P.cePos,T.ePos)-this._readPointer.chunkPos;P.hasData(this._readPointer.chunkPos,D)&&(E=D)}else this.videoFormatType===Ko.a.FTS&&(E=P.dataLen-this._readPointer.chunkPos);var L,O=null;if(this.videoFormatType.indexOf(Ko.a.TS)>=0||this._readPointer.time<=this._readAudioPointer.time||Math.round(this._readPointer.time)-Math.round(this._readAudioPointer.time)<15||s)if(!i||o)if(P&&E>0)if(O=P.getData(this._readPointer.chunkPos,E),(-1===fr.a.tempTestStartRWTime||performance.now()<fr.a.tempTestStartRWTime)&&P.averageBitrate)fr.a.readSize+=(null===(L=O)||void 0===L?void 0:L.byteLength)||0,fr.a.readTime=fr.a.readSize/P.averageBitrate;var R=Yu(p,this._readPointer.segmentIndex,this._readPointer.chunkIndex);this.videoFormatType===Ko.a.DASH&&R--,O&&(x+="~~~~~read video data ok,, tvid: ".concat(this.tvid,", bid = ")+this._readPointer.bid+" index = "+R+" startPos = "+this._readPointer.chunkPos+" endPos = "+(this._readPointer.chunkPos+E),this._readPointer.chunkPos+=O.length,this._readPointer.dataFlag=!0);var C=!1;if(O&&(this._videoChunkComplete=!1,this.videoFormatType===Ko.a.FTS?P&&P.tsLoadDone&&this._readPointer.chunkPos===P.dataLen&&(C=!0,this._videoChunkComplete=!0):T&&this._readPointer.chunkPos>=T.ePos&&(C=!0,this._videoChunkComplete=!0,x+=", chunkDone: ".concat(C)),fr.a.platform===vr.a.WEB&&T&&T.eTime&&(!this.playChunkEndTimeList.length||T.eTime>this.playChunkEndTimeList[this.playChunkEndTimeList.length-1].chunkEndTime))){this._checkStartPlayTimer(T.sTime),this.playChunkEndTimeList.push({bid:this._readPointer.bid,segmentIndex:this._readPointer.segmentIndex,chunkIndex:this._readPointer.chunkIndex,chunkStartTime:T.sTime,chunkEndTime:T.eTime});var M=this.absRecord.read;M.bid=this._readPointer.bid,M.time=Math.floor(1e3*T.sTime||0),M.segmentIndex=this._readPointer.segmentIndex,M.chunkIndex=this._readPointer.chunkIndex,M.b=1}if(C){if(T&&(this.absRecord.read.pos=T.ePos-T.sPos,this._lstReadCETime=T.eTime||0),fr.a.platform===vr.a.WEB&&T&&T.eTime){var B=this.absRecord.read;B.bid=this._readPointer.bid,B.time=Math.floor(1e3*T.eTime),B.segmentIndex=this._readPointer.segmentIndex,B.chunkIndex=this._readPointer.chunkIndex,B.b=0}if(this._readPointer.segmentIndex<=p.length-1){if((this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&this._readPointer.chunkIndex<y.length-1&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=y.length-1))if(this._readPointer.segmentIndex<p.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,w!==(p[this._readPointer.segmentIndex].realIdx!==undefined?p[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(h,"e",this._readPointer.segmentIndex-1,1),gr.a.info("read  call changeSegmentState set 1, e"+this._readPointer.segmentIndex-1));var N=jr.getChunkSEPos(h,yu,this._readPointer.segmentIndex,this._readPointer.chunkIndex);N&&(this._readPointer.chunkPos=N.sPos)}else this.changeSegmentState(h,"e",this._readPointer.segmentIndex,1),gr.a.info("~~~~~read video data finish ~~ segmentIndex "+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));if(this.videoFormatType.indexOf("ts")>=0&&this._readPointer.chunkIndex<y.length&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=y.length))if(this._readPointer.segmentIndex<p.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,w!==(p[this._readPointer.segmentIndex].realIdx!==undefined?p[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(h,"e",this._readPointer.segmentIndex-1,1),gr.a.info("read  call changeSegmentState set 1, e"+(this._readPointer.segmentIndex-1)));var F=jr.getTSChunkSEPos(h,this._readPointer.segmentIndex,this._readPointer.chunkIndex);F&&(this._readPointer.chunkPos=F.sPos)}else this.changeSegmentState(h,"e",this._readPointer.segmentIndex,1),gr.a.info("~~~~~read video data finish ~~"+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));var q=v[this._readPointer.chunkIndex];this._readPointer.time=hr.a.accAdd(p[this._readPointer.segmentIndex].start_second,q),x+=" ,video_time = "+this._readPointer.time}}else this.absRecord.read.chunkIndex!==this._readPointer.chunkIndex&&(this.absRecord.read.chunkIndex=this._readPointer.chunkIndex,this._readPointer.pos=0),T&&(this.absRecord.read.pos=this._readPointer.chunkPos-T.sPos);var j=null,U=0,V=null,H=null,z=null,G=0,W=!1,K="";if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){var $=this.levelMgr.get(this._readAudioPointer.bid);if(V=jr.getFilesInfo($,gu),this._readAudioPointer.time<=this._readPointer.time||Math.round(this._readAudioPointer.time)-Math.round(this._readPointer.time)<15||u){z=jr.getChunkSEPos($,gu,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);var Y=bu(V[this._readAudioPointer.segmentIndex].sourceID,$.vid,"a"+this._readAudioPointer.segmentIndex);if(H=pi.getSegment(Y),z&&H){var Q=z.ePos-this._readAudioPointer.chunkPos;a&&!o||(this.videoFormatType!==Ko.a.DASH?H.hasData(this._readAudioPointer.chunkPos,Q)&&(U=Q):this._readAudioPointer.time<this.rangeETime&&H.hasData(this._readAudioPointer.chunkPos,Q)&&(U=Q))}H&&U>0&&(j=H.getData(this._readAudioPointer.chunkPos,U))}if(G=Yu(V,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex),this.videoFormatType===Ko.a.DASH&&G--,j&&(K+="~~~~~read audio data ok, bid = "+this._readAudioPointer.bid+" index = "+G+" startPos = "+this._readAudioPointer.chunkPos+" endPos = "+(this._readAudioPointer.chunkPos+U),this._readAudioPointer.chunkPos+=j.length,this._readAudioPointer.dataFlag=!0,this._audioChunkComplete=!1),j&&z&&this._readAudioPointer.chunkPos>=z.ePos&&(W=!0,this._audioChunkComplete=!0),W){var J=V[this._readAudioPointer.segmentIndex].seekable.pos.length-1;if(this._readAudioPointer.segmentIndex<=V.length-1&&this._readAudioPointer.chunkIndex<J&&(this._readAudioPointer.chunkIndex++,this._readAudioPointer.chunkIndex>=J))if(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),gr.a.info("read  call changeSegmentState set 1, a"+this._readAudioPointer.segmentIndex),this._readAudioPointer.segmentIndex<V.length-1){this._readAudioPointer.segmentIndex++,this._readAudioPointer.chunkPos=0,this._readAudioPointer.chunkIndex=0;var X=jr.getChunkSEPos($,gu,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);X&&(this._readAudioPointer.chunkPos=X.sPos)}else gr.a.info("~~~~~read audio data finish ~~"+this._readAudioPointer.segmentIndex+" chunkIndex "+(this._readAudioPointer.chunkIndex-1));var Z=V[this._readAudioPointer.segmentIndex].seekable.time[this._readAudioPointer.chunkIndex];this._readAudioPointer.time=hr.a.accAdd(V[this._readAudioPointer.segmentIndex].start_second,Z),K+=" ,audio_time = "+this._readAudioPointer.time}}return fr.a.lastReadSegIndex=p[this._readPointer.segmentIndex].realIdx!==undefined?p[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,fr.a.lastReadTvID=P?P.tvid:"",this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?P||H?(""!==x&&gr.a.info(x),""!==K&&gr.a.info(K),Ni.b.diy_usebw+=O?O.byteLength:0,Ni.b.diy_usebw+=j?j.byteLength:0,sa.diy_usebw+=O?O.byteLength:0,sa.diy_usebw+=j?j.byteLength:0,{tvid:P?P.tvid:H.tvid,bid:P?P.rate:H.rate,loadDone:this.done,type:this.videoFormatType===Ko.a.DASH?Ko.a.DASH:Ko.a.M4S,video:{chunkEOF:C||this.videoFormatType===Ko.a.DASH&&this._readPointer.time>=this.rangeETime,data:O,index:R,spos:O?this._readPointer.chunkPos-O.length:this._readPointer.chunkPos},audio:{chunkEOF:W||this.videoFormatType===Ko.a.DASH&&this._readAudioPointer.time>=this.rangeETime,data:j,index:G,spos:j?this._readAudioPointer.chunkPos-j.length:this._readAudioPointer.chunkPos}}):{}:this.videoFormatType!==Ko.a.TS&&this.videoFormatType!==Ko.a.FTS||!P?{}:(""!==x&&gr.a.info(x),""!==K&&gr.a.info(K),Ni.b.diy_usebw+=O?O.byteLength:0,sa.diy_usebw+=O?O.byteLength:0,{tvid:P.tvid,bid:P.rate,loadDone:this.done,type:Ko.a.TS,stream:{chunkEOF:C,data:O,index:R,spos:O?this._readPointer.chunkPos-O.length:this._readPointer.chunkPos}})}gr.a.warn("DashMove.read, readPointer bid with levelInfo is null,bid = "+this._readPointer.bid)}}}else gr.a.warn("levelMgr is null,wait~~")}}},{key:"getPlayBuffer",value:function(){var e=fr.a.getBufferFunc();return this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len}},{key:"refreshcEndTime",value:function(e,t){if(this.curLoadSegment){var n,r,i,a=null,o=parseInt(this.curLoadSegment.index.slice(1));if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){if(n=e[o].seekable.pos,r=t[this._loadAudioPointer.segmentIndex].seekable.pos,i=e[o].seekable.time,a=t[this._loadAudioPointer.segmentIndex].seekable.time,this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH&&0!==o){var s=hr.a.searchPosIndex(this.curLoadSegment.lastCEPos,n);s>=0&&(this._loadPointer.cEndTime=hr.a.accAdd(e[o].start_second,i[s]))}if(this.curLoadAudioSegment&&(this.videoFormatType!==Ko.a.DASH||"a0"!==this.curLoadAudioSegment.index)){var u=hr.a.searchPosIndex(this.curLoadAudioSegment.lastCEPos,r);u>=0&&(this._loadAudioPointer.cEndTime=hr.a.accAdd(t[this._loadAudioPointer.segmentIndex].start_second,a[u]))}}else if(this.videoFormatType.indexOf(Ko.a.TS)>=0)if(n=e[o].pos,i=e[o].time,this.videoFormatType===Ko.a.TS){var c=hr.a.searchTSPosIndex(this.curLoadSegment.lastCEPos,n);if(c>=0){this._loadPointer.cEndTime=hr.a.accAdd(e[o].start_second,i[c]);var l=this.absRecord.load;if(l.bid=this._loadPointer.levelID,l.time=Math.floor(1e3*this._loadPointer.cEndTime),l.segmentIndex=o,l.chunkIndex=c,c<=n.length-1?l.pos=this.curLoadSegment.lastCEPos-(n[c]?n[c].sPos:0):c===n.length&&(l.segmentIndex++,l.chunkIndex=0,l.pos=0),"play"===dr.a.reportType&&this._absStrategy&&this._absStrategy.hcdnGap&&this._loadPointer.cEndTime>=this._absStrategy.lstHCDNTime+this._absStrategy.hcdnGap)if(this.playChunkEndTimeList.length){var d=this.playChunkEndTimeList[0];this.reportDataByPlay(d.bid,d.segmentIndex,d.chunkIndex)&&(this.action="")}else this._readPointer&&this._readPointer.bid&&this.reportDataByPlay(this._readPointer.bid,this._readPointer.segmentIndex,this._readPointer.chunkIndex)&&(this.action="")}}else this.videoFormatType===Ko.a.FTS&&this.curLoadSegment.loadDone&&(this._loadPointer.cEndTime=hr.a.accAdd(e[this._loadPointer.segmentIndex].start_second,i[this._loadPointer.chunkIndex+1]))}}},{key:"signalABS",value:function(){if(Gu.startPlayTime=performance.now(),this._absStrategy&&this.playChunkEndTimeList.length){var e=this.playChunkEndTimeList[0];e.bid===this._getCurEverMaxBid(e.bid)&&(Gu.playToMaxBidTime=performance.now()),this.reportDataByPlay(e.bid,e.segmentIndex,e.chunkIndex)&&(this.action="")}}},{key:"check",value:function(e){if(null===this._loadPointer&&(this.m3u8ED?this._innerSeek():(gr.a.info("check load, loadPointer is null,call seek~~~"),this.seek(this.rangeSTime,!0))),null!==this._loadPointer){var t=this._selectedLevelID,n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID;-1===this._levelID&&(this.recordBid&&fr.a.canSwitchVd()&&(gr.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),fr.a.switchAutoDef(this.recordBid),this.recordBid=0),this._checkABSSwtDashReady(),n!==t&&(this._seekDone||-1!==this._switchVideoPointer.levelID||(!fr.a.startPlayed()||!this._readPointer.dataFlag||!fr.a.canSwitchVd())&&this.videoFormatType&&this.videoFormatType.indexOf(Ko.a.TS)<0||this._readAudioPointer&&!this._readAudioPointer.dataFlag||n>t&&this.done)?(t=this.curLoadSegment.rate,this.absRecord.abs.action="no"):this.absRecord.abs.bid=t,n!==t&&(fr.a.switchMonitorTimer||(fr.a.playTvId!==this.tvid||fr.a.isAD()||(fr.a.switchMonitorTimer=setTimeout((function(){clearTimeout(fr.a.switchMonitorTimer),fr.a.switchMonitorTimer=0,upLog("abs")}),3e4)),gr.a.info("AI switch bid start, bid: ".concat(t,", time: ").concat(Math.floor(performance.now())))))),this._videoLoad=!1,this._audioLoad=!1,(-1!==this._levelID||this.absTocbs)&&(this.videoFormatType!==Ko.a.DASH&&this.videoFormatType!==Ko.a.M4S||this._loadAudioPointer||(this._loadAudioPointer=new Iu,this._readAudioPointer=new Au,this._loadAudioPointer.levelID=this._loadPointer.levelID,this._loadAudioPointer.cEndTime=this._readPointer.time,this._readAudioPointer.bid=this._readPointer.bid,this._readAudioPointer.time=this._readPointer.time),this.videoFormatType.indexOf(Ko.a.TS)>=0&&this._loadAudioPointer&&(this._loadAudioPointer=null,this._readAudioPointer=null),(n!==t||this.absTocbs)&&(gr.a.info("load switch video bidrate changed from "+n+" to "+t),e=this.getPlayBuffer(),mu.reset()),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||this._loadAudioPointer.levelID===t&&!this.absTocbs||(gr.a.info("load switch  audio bidrate changed from "+this._loadAudioPointer.levelID+" to "+t+",buffer "+e),_u.reset()));var r=this.levelMgr.get(t);if(null!==r){var i=null,a=null;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(i=jr.getFilesInfo(r,yu),a=jr.getFilesInfo(r,gu)):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(i=r.m3u8),!this._seekDone)if(t===n)this.refreshcEndTime(i,a);else if(-1===this._levelID){var o=this.getFileList(n);this.refreshcEndTime(o.vFList,o.aFList)}n!==t||this.absTocbs?(this.videoDone=!1,this.audioDone=!1):this.checkVideoLoadDone(r,i),pi.memorySize<dr.c.videoMaxSize&&this.checkP2PLoad(r,i,t,n),n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID;var s=30,u=50,c=dr.e[this._loadPointer.levelID.toString()];if(c?(s=c.cacheMinLen,u=c.cacheMaxLen):(s=dr.e.cacheMinLen,u=dr.e.cacheMaxLen),e>=s)return fr.a.updateDownTime(0),void(this._seekDone&&(this._seekDone=!1));e<0&&(e=0);var l=!1,d=!1;if(-1===this._levelID&&(n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t)&&(n!==t&&(this._loadPointer.cEndTime>this._readPointer.time||this._videoChunkComplete?(this.halfChunk=!1,l=!0,this.absRecord.abs.action="ready"):(this.halfChunk=!0,this.absRecord.abs.action="no")),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||this._loadAudioPointer.levelID===t||(this._loadAudioPointer.cEndTime>this._readAudioPointer.time||this._audioChunkComplete)&&(d=!0),l&&(gr.a.info("ABS ,video can switch bid"),mu.reset(),this.updateCEPos(yu,n,Math.max(this._loadPointer.cEndTime,this._readPointer.time))),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||!d||(gr.a.info("ABS ,audio can switch bid"),_u.reset(),this.updateCEPos(gu,this._loadAudioPointer.levelID,Math.max(this._loadAudioPointer.cEndTime,this._readAudioPointer.time)))),this._loadPointer.levelID!==n&&mu.reset(),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||this._loadAudioPointer.levelID===n||_u.reset(),this.checkCDNLoad(),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||this._loadAudioPointer.levelID!==t||this.checkAudioLoadDone(r),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||(this._loadPointer.levelID===t&&this._videoLoad&&this._loadPointer.cEndTime>this._loadAudioPointer.cEndTime&&Math.floor(this._loadPointer.cEndTime)-Math.floor(this._loadAudioPointer.cEndTime)>15&&(this._videoLoad=!1),this._loadAudioPointer.levelID===t&&this._audioLoad&&this._loadAudioPointer.cEndTime>this._loadPointer.cEndTime&&Math.floor(this._loadAudioPointer.cEndTime)-Math.floor(this._loadPointer.cEndTime)>15&&(this._audioLoad=!1)),this.done&&this.absTocbs&&this._loadPointer.levelID===t&&(mu.reset(),_u.reset(),this._videoLoad=!0,this._audioLoad=!0),this._videoLoad||this._audioLoad){var f=Math.min(hr.a.accSub(u,e),30);if(dr.b.mergeChunk||(f=Math.min(f,2)),fr.a.updateDownTime(1),-1!==this._levelID){if(this.absTocbs||n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t){mu.reset();var h=0;this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(h=this._readPointer.time,(this.absTocbs||n!==t)&&gr.a.info("CBS video switch bid, time "+h)):h=Math.max(this.rangeSTime,fr.a.getBufferFunc().end),(this.absTocbs||n!==t)&&gr.a.info("CBS switch bidrate , start video loadPoint  time = "+h,"levelID = "+t),this._loadPointer.levelID=t,fr.a.bitrate=t;var p=null;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?p=jr.getGapPos(r,h,yu,"start"):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(p=jr.getTSGapPos(r,h,"start")),p?(this.changeSegmentState(r,"e",p.segmentIndex,0),this._loadPointer.segmentIndex=p.segmentIndex,this._loadPointer.chunkPos=p.pos,this._loadPointer.startTime=p.time,this._loadPointer.cEndTime=p.time,p.segmentIndex!==this._readPointer.segmentIndex&&this.changeSegmentState(r,"e",this._readPointer.segmentIndex,1),(this.absTocbs||n!==t)&&(this._readPointer.bid=this._loadPointer.levelID,this._readPointer.segmentIndex=p.segmentIndex,this._readPointer.chunkIndex=p.chunkIndex,this._readPointer.time=p.time,this.videoFormatType===Ko.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=p.pos,gr.a.info("CBS switch bidrate ,start _readPointer "+JSON.stringify(this._readPointer)))):gr.a.error("CBS switch bidrate, calculate startPoint is null "),this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH){_u.reset(),this._loadAudioPointer.levelID=this._loadPointer.levelID;var v=this._readAudioPointer.time;gr.a.info("CBS audio switch bid, time "+v);var y=jr.getGapPos(r,v,gu,"start");gr.a.info("CBS switch bidrate,start audio Point "+JSON.stringify(y)),y&&(this.changeSegmentState(r,"a",y.segmentIndex,0),this._loadAudioPointer.segmentIndex=y.segmentIndex,this._loadAudioPointer.chunkPos=y.pos,this._loadAudioPointer.startTime=y.time,this._loadAudioPointer.cEndTime=y.time,y.segmentIndex!==this._readAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",this._readAudioPointer.segmentIndex,1),this._readAudioPointer.bid=this._loadPointer.levelID,this._readAudioPointer.segmentIndex=y.segmentIndex,this._readAudioPointer.chunkIndex=y.chunkIndex,this._readAudioPointer.chunkPos=y.pos,this._readAudioPointer.time=y.time,gr.a.info("CBS switch bidrate, start readAudioPointer "+JSON.stringify(this._readAudioPointer)))}this._seekDone=!0}var g=null;this._videoLoad&&!this._seekDone&&(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?g=jr.getGapPos(r,this._loadPointer.cEndTime,yu,"start"):this.videoFormatType!==Ko.a.TS&&this.videoFormatType!==Ko.a.FTS||(g=jr.getTSGapPos(r,this._loadPointer.cEndTime,"start")),g?(g.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",g.segmentIndex,0),this._loadPointer.segmentIndex=g.segmentIndex,this._loadPointer.loadStartIdx=g.chunkIndex,this._loadPointer.chunkPos=g.pos,fr.a.bitrate=this._loadPointer.levelID=t,this._loadPointer.startTime=g.time):gr.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime));var m=0;if(m=this.calculateVideoLoadTime(f,r,i),this._seekDone&&(m=Math.min(1,m)),this._videoLoad){var _=null,b=hr.a.accAdd(this._loadPointer.startTime,m);this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?_=jr.getGapPos(r,b,yu,"end"):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(_=jr.getTSGapPos(r,b,"end")),_&&(this._loadPointer.endPos=_.pos,this._loadPointer.chunkIndex=_.chunkIndex,this._loadPointer.endTime=b)}if(this._videoLoad){if(this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==t||!this.curLoadSegment.segment){var x=this.constructorSegmentInfo(i,r,yu);this.createSegmentProxy(yu,x),this.curLoadSegment.checkCreateSegment()}gr.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.videoFormatType===Ko.a.DASH&&this.initSegmentLoader.load(this._loadPointer.levelID,"v"),this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos)):gr.a.error("~~~~~~video Load error"+JSON.stringify(this._loadPointer))}var k=null,w=0;if(this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||!this._audioLoad||(w=this.calculateAudioLoadTime(f,r)),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||!this._audioLoad||this._seekDone||((k=jr.getGapPos(r,this._loadAudioPointer.cEndTime,gu,"start"))?(k.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",k.segmentIndex,0),this._loadAudioPointer.segmentIndex=k.segmentIndex,this._loadAudioPointer.chunkPos=k.pos,this._loadAudioPointer.levelID=t,this._loadAudioPointer.startTime=k.time):gr.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)),(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&this._audioLoad){var S=hr.a.accAdd(this._loadAudioPointer.startTime,w),T=jr.getGapPos(r,S,gu,"end");T&&(this._loadAudioPointer.endPos=T.pos,this._loadAudioPointer.chunkIndex=T.chunkIndex)}if((this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&this._audioLoad){if(this.absTocbs||!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==t||!this.curLoadAudioSegment.segment){var P=this.constructorSegmentInfo(a,r,gu);this.createSegmentProxy(gu,P),this.curLoadAudioSegment.checkCreateSegment()}gr.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.videoFormatType===Ko.a.DASH&&this.initSegmentLoader.load(this._loadAudioPointer.levelID,"a"),this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos)):gr.a.error("load audio point is error !!!!!!!")}this.absTocbs&&(this.absTocbs=!1)}else{if(this._videoLoad){-1!==this.rangeETime&&this._loadPointer.startTime>=this.rangeETime&&gr.a.info("loadPointer startTime >= rangeETime,this._loadPointer.startTime = "+this._loadPointer.startTime+"rangeETime"+this.rangeETime);var E=l?t:n,A=this.getFileList(E);if(!A)return void gr.a.error("levelInfo and fileList is null ,bid = "+E);r=A.levelInfo,i=A.vFList;var I=null;if(!this._seekDone){if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)I=jr.getGapPos(r,this._loadPointer.cEndTime,yu,"start");else if(this.videoFormatType===Ko.a.TS||this.videoFormatType===Ko.a.FTS)if(l&&this._absStrategy&&this._readPointer.time<=this._loadPointer.cEndTime){var D=fr.a.isAD()||fr.a.majorLoadTvid!==fr.a.playTvId?this._readPointer.time:Nu.a.timestamp()||0,L=this._absStrategy.maxDelay,O=this._loadPointer.cEndTime;if(O!==this._readPointer.time){var R=D+L,C=jr.getTSGapPos(r,R,"start");if(C.time<=this._readPointer.time)if(this._videoChunkComplete)O=this._readPointer.time,I=jr.getTSGapPos(r,O,"start"),gr.a.info("[CDN loader], load switch use curRead, playTime: ".concat(D,", switchTime: ").concat(O)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(this._loadPointer.cEndTime,", maxDelay: ").concat(L));else{var M=jr.getTSGapPos(r,this._readPointer.time,yu,"end");M.time>this._readPointer.time?(O=M.time,I=jr.getTSGapPos(r,O,"start"),gr.a.info("[CDN loader], load switch use nextRead, playTime: ".concat(D,", switchTime: ").concat(O)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(this._loadPointer.cEndTime,", maxDelay: ").concat(L))):(I=jr.getTSGapPos(r,O,"start"),gr.a.error("[CDN loader], load switch use none, playTime: ".concat(D)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(O,", maxDelay: ").concat(L)),upLog("abs"))}else C.time>this._readPointer.time&&C.time<O?(O=C.time,I=jr.getTSGapPos(r,O,"start"),gr.a.info("[CDN loader], load switch use maxDelay, playTime: ".concat(D,", switchTime: ").concat(O)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(this._loadPointer.cEndTime,", maxDelay: ").concat(L))):(I=jr.getTSGapPos(r,O,"start"),gr.a.warn("[CDN loader], load switch cannot use maxDelay, maxTime: ".concat(C.time,", loadETime: ").concat(O,", readETime: ").concat(this._readPointer.time)))}else I=jr.getTSGapPos(r,this._loadPointer.cEndTime,"start"),gr.a.warn("[CDN loader], load switch use readTime: ".concat(this._readPointer.time))}else I=jr.getTSGapPos(r,this._loadPointer.cEndTime,"start");I?(I.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",I.segmentIndex,0),this._loadPointer.segmentIndex=I.segmentIndex,this._loadPointer.chunkPos=I.pos,this._loadPointer.loadStartIdx=I.chunkIndex,l?(gr.a.info("ABS video switch  bid from "+this._loadPointer.levelID+" to "+t),fr.a.bitrate=this._loadPointer.levelID=t):fr.a.bitrate=this._loadPointer.levelID=n,this._loadPointer.startTime=I.time):gr.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime)}var B=null,N=this.calculateVideoLoadTime(f,r,i);this._seekDone&&(N=Math.min(1,N));var F=hr.a.accAdd(this._loadPointer.startTime,N);if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?B=jr.getGapPos(r,F,yu,"end"):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(B=jr.getTSGapPos(r,F,"end")),B&&(this._loadPointer.endPos=B.pos,this._loadPointer.chunkIndex=B.chunkIndex,this._loadPointer.endTime=F),l){this._absStrategy&&(this._absStrategy.lstHCDNTime=I.time),this._loadPointer.cEndTime=I.time,this._switchVideoPointer.levelID=this._loadPointer.levelID,this._switchVideoPointer.segmentIndex=I.segmentIndex,this._switchVideoPointer.chunkIndex=I.chunkIndex,this._switchVideoPointer.time=this._loadPointer.startTime,this._switchVideoPointer.tvid=this.tvid;var q=this.absRecord.abs;q.bid=this._switchVideoPointer.levelID,q.time=Math.floor(1e3*this._loadPointer.startTime),q.segmentIndex=this._switchVideoPointer.segmentIndex,q.chunkIndex=this._switchVideoPointer.chunkIndex,yr.a.bufferArray.length=0,this._switchPb(),gr.a.info("load ABS switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)+" this._switchVideoPointer "+JSON.stringify(this._switchVideoPointer)+this.tvid)}else gr.a.info("load ABS NO switch bid,  loadPointer: "+JSON.stringify(this._loadPointer));if(!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==this._loadPointer.levelID||!this.curLoadSegment.segment){var j=this.constructorSegmentInfo(i,r,yu);this.createSegmentProxy(yu,j),this.curLoadSegment.checkCreateSegment()}gr.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.videoFormatType===Ko.a.DASH&&this.initSegmentLoader.load(this._loadPointer.levelID,"v"),this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos)):gr.a.error("_loadPointer.endPos <= _loadPointer.chunkPos")}if((this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&this._audioLoad){var U=d?t:this._loadAudioPointer.levelID,V=this.getFileList(U);V&&(r=V.levelInfo,a=V.aFList);var H=this.calculateAudioLoadTime(f,r),z=null;if(!this._seekDone){var G=this._loadAudioPointer.cEndTime;d&&(G=Math.min(this._loadAudioPointer.cEndTime,this._loadPointer.cEndTime),G=Math.max(G,this._readAudioPointer.time)),(z=jr.getGapPos(r,G,gu,"start"))?(z.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",z.segmentIndex,0),this._loadAudioPointer.segmentIndex=z.segmentIndex,this._loadAudioPointer.chunkPos=z.pos,d&&(this._loadAudioPointer.levelID=t),this._loadAudioPointer.cEndTime=this._loadAudioPointer.startTime=z.time):gr.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)}var W=hr.a.accAdd(this._loadAudioPointer.startTime,H),K=jr.getGapPos(r,W,gu,"end");if(K&&(this._loadAudioPointer.endPos=K.pos,this._loadAudioPointer.chunkIndex=K.chunkIndex),d?(gr.a.info("ABS Audio switch  bid from "+this.curLoadAudioSegment.rate+" to "+t),this._switchAudioPointer.levelID=this._loadAudioPointer.levelID,this._switchAudioPointer.segmentIndex=z.segmentIndex,this._switchAudioPointer.chunkIndex=this._seekDone?this._loadAudioPointer.chunkIndex:z.chunkIndex,this._switchAudioPointer.time=this._loadAudioPointer.startTime,this._switchAudioPointer.tvid=this.tvid,gr.a.info("load ,ABS Audio switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)+" this._switchAudioPointer "+JSON.stringify(this._switchAudioPointer))):gr.a.info("ABS Audio No switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)),!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==this._loadAudioPointer.levelID||!this.curLoadAudioSegment.segment){var $=this.constructorSegmentInfo(a,r,gu);this.createSegmentProxy(gu,$),this.curLoadAudioSegment.checkCreateSegment()}gr.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.videoFormatType===Ko.a.DASH&&this.initSegmentLoader.load(this._loadAudioPointer.levelID,"a"),this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos)):gr.a.error("_loadAudioPointer.endPos <= _loadAudioPointer.chunkPos")}}this._seekDone=!1}else this._seekDone&&(this._seekDone=!1)}else gr.a.warn("m3u8 is null,need call feed first ~~ ,bidrate = "+t)}}},{key:"buffer",get:function(){var e=0;return this._readPointer&&this._loadPointer&&this._loadPointer.cEndTime>=this._readPointer.time&&(e=hr.a.accSub(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||this._readAudioPointer&&this._loadAudioPointer&&this._loadAudioPointer.cEndTime>=this._readAudioPointer.time&&(e=Math.min(hr.a.accSub(this._loadAudioPointer.cEndTime,this._readAudioPointer.time),e)),e}},{key:"reset",value:function(){if(gr.a.info("~~~dashMove reset ~~~"),this.m3u8CDN=null,this.initSegmentLoader.reset(),fr.a.switchMonitorTimer&&(clearTimeout(fr.a.switchMonitorTimer),fr.a.switchMonitorTimer=0),this.dashRequestMap.clear(),this.absRecord=JSON.parse(JSON.stringify(Ku)),this.videoDone=!1,this.audioDone=!1,this.levelMgr)for(var e in this.levelMgr){var t=this.levelMgr.get(e),n=null;if(t&&(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?n=jr.getFilesInfo(t,yu):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(n=t.m3u8)),n)for(var r=0;r<n.length;r++)this.changeSegmentState(t,"e",r,1);if((this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH)&&t){var i=jr.getFilesInfo(t,gu);if(i)for(var a=0;a<i.length;a++)this.changeSegmentState(t,"a",a,1)}}null!==this.dashInfo&&(ns.a.clearEvent(this.tvid),this.event=null,this.dashInfo.close(),this.dashInfo=null),null!==this._absStrategy&&this._absStrategy.close(),this._absStrategy=null,null!==this._readPointer&&(this._readPointer=null),null!==this._readAudioPointer&&(this._readAudioPointer=null),null!==this._loadPointer&&(this._loadPointer=null),null!==this._loadAudioPointer&&(this._loadAudioPointer=null),null!==this._p2pLoaderPointer&&(this._p2pLoaderPointer=null),null!==this.levelMgr&&this.levelMgr.clear(),this.levelMgr=null,this.curLoadAudioSegment&&(this.curLoadAudioSegment=null),this.curLoadSegment=null,this._levelID=0,this.absTocbs=!1,this.curFeedBid=0,clearInterval(this.playTimeMontorTimer),this.playChunkEndTimeList=[],this.halfChunk=!1}},{key:"errFun",value:function(e){gr.a.error("new segment return err"+e)}},{key:"createSegmentProxy",value:function(e,t){switch(t.videoType){case Ko.a.FTS:this.curLoadSegment=new Tu(t);break;case Ko.a.TS:this.curLoadSegment=new wu(t);break;case Ko.a.DASH:case Ko.a.M4S:e===yu?this.curLoadSegment=new Eu(t):this.curLoadAudioSegment=new Eu(t);break;default:gr.a.error("mediaInfo.videoType is invaild when  createSegmentProxy, "+t.videoType)}}},{key:"constructorSegmentInfo",value:function(e,t,n){var r,i=null,a=yu;fr.a.videoType=this.videoFormatType,n===yu?(r=this._loadPointer,i="e"):n===gu?(r=this._loadAudioPointer,i="a",a=gu):"p2p"===n&&(r=this._p2pLoaderPointer,i="e");var o=r.chunkPos,s=r.startTime;null===e[r.segmentIndex].file_name&&fr.a.enableStartSpeed&&(e[r.segmentIndex].file_name=e[r.segmentIndex].quoteSegment.uri.toString());var u=e[r.segmentIndex].file_name,c=e[r.segmentIndex].realIdx!==undefined?e[r.segmentIndex].realIdx:r.segmentIndex,l=0,d=0,f=0,h=null;this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(l=e[r.segmentIndex].size,f=e[r.segmentIndex].duration_second,d=(h=e[r.segmentIndex].seekable.pos)[h.length-1]):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(l=parseInt(e[r.segmentIndex].size),f=e[r.segmentIndex].duration_second,d=(h=e[r.segmentIndex].pos)[h.length-1].ePos);var p=e[r.segmentIndex].sourceID;pr.a.isHTTPS&&u&&(u=u.replace(/^http:/gi,"https:"));var v=0;v=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getDuratioSecond(t,a,r.segmentIndex):jr.getTSDuratioSecond(t,r.segmentIndex);var y=null;return this.videoFormatType!==Ko.a.DASH&&this.videoFormatType!==Ko.a.M4S||"e"!==i||(y=e[r.segmentIndex].seekable.pos),{oriIndex:r.segmentIndex,levelId:r.levelID,tvid:this.tvid,dispatchUrl:u,startTime:s,endTime:v,vid:t.vid,index:i+r.segmentIndex,size:l,duration:f,startPos:o,endPos:d,vids:this.dashInfo.vidList,videoType:this.videoFormatType,albumID:fr.a.aid,trackerType:a,sourceID:p,loadInfo:{},seekable:y,realSegIdx:i+c,posList:h}}},{key:"changeSegmentState",value:function(e,t,n,r){if(e){var i="a"===t?gu:yu,a=null;if(!(n>=(a=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getFilesInfo(e,i):e.m3u8).length)){var o=bu(a[n].sourceID,e.vid,t+(a[n].realIdx!==undefined?a[n].realIdx:n)),s=pi.getSegment(o);s&&(s.state=r,gr.a.info("changeSegmentState "+t+n+" bid: "+e.bid+" status : "+s.state))}}}},{key:"getNextChunkInfo",value:function(e,t,n){var r=this;if(e&&e.length){var i=[];return e.forEach((function(e){var a=r.levelMgr.get(e);if(a){var o=null;(o=r.videoFormatType===Ko.a.M4S||r.videoFormatType===Ko.a.DASH?jr.getNextChunkInfo(a,yu,t,n):jr.getTSNextChunkInfo(a,t,n))?(o.bid=e,i.push(o)):i.push({bid:e,sPos:0,ePos:-11,sTime:0,eTime:-11,segmentIndex:-11,chunkIndex:-11})}})),i}return null}},{key:"reportDataByPlay",value:function(e,t,n){var r=this;if(fr.a.majorLoadTvid!==this.tvid)return!1;if(!this._absStrategy||!fr.a.absOpen||-1!==this._levelID||!this._loadPointer)return!1;if(fr.a.tvId!==this.tvid)return!1;this._absStrategy.lstHCDNTime=this._loadPointer.cEndTime;var i=this.levelMgr.get(e);if(i){var a=null,o=null;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(a=jr.getFilesInfo(i,yu),o=jr.getCurChunkInfo(i,yu,t,n)):(a=i.m3u8,o=jr.getCurTSChunkInfo(i,t,n)),a&&o){var s=Yu(a,t,n);if(s>=i.chunkNum-1)return!1;var u=this.dashInfo.getAbsBidListFromBid(e);if(1===u.length)return;var c=e,l=0,d=[],f=[];if(u.forEach((function(e){r._levelDashValid(e)&&(l++,c=Math.max(c,e),r.levelMgr.has(e)||d.push(e.toString())),r.levelMgr.has(e)||f.push(e.toString())})),l<=1||c===e&&this._absStrategy.stable&&1e3*this.buffer>=this._absStrategy.stable||this.done){if(!this.firstInStable)return;this.firstInStable=!1}else this.firstInStable=!0;var h=this.getNextChunkInfo(u,t,n),p=this.getNextChunkInfo(u,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex);if(h&&h.length&&p&&p.length){var v,y,g=0,m=-1;if(fr.a.isAD()||fr.a.playTvId!==fr.a.majorLoadTvid)null!==(v=this._readPointer)&&void 0!==v&&v.bid&&(m=this.playChunkEndTimeList.length?this.playChunkEndTimeList[0].bid:this._readPointer.bid);else{var _=Nu.a.timestamp();if(_&&this.playChunkEndTimeList.length)if(_<this.playChunkEndTimeList[0].chunkEndTime)m=this.playChunkEndTimeList[0].bid;else for(var b=0;b<this.playChunkEndTimeList.length-1;b++)if(_>=this.playChunkEndTimeList[b].chunkEndTime&&_<this.playChunkEndTimeList[b+1].chunkEndTime){m=this.playChunkEndTimeList[b+1].bid;break}}-1===m&&null!==(y=this._readPointer)&&void 0!==y&&y.bid&&(m=this._readPointer.bid),g=-1!==this._switchVideoPointer.levelID?this._switchVideoPointer.levelID:m!==this._loadPointer.levelID?this._loadPointer.levelID:0;var x={tvid:this.tvid,bid:e,loadBid:this._loadPointer.levelID,lastPlayIndex:s,rebuffTime:fr.a.getReBufTimeFunc(),chunk_count:i.chunkNum,duration:i.duration,buffer_level:fr.a.isAD()||fr.a.majorLoadTvid!==fr.a.playTvId?0:Math.max(this.getPlayBuffer(),this._readPointer.time-Math.max(Nu.a.timestamp(),this._seekTime)),cached_time:this.buffer,lastChunkInfo:o,nextChunkInfo:h,nextLoadChunkInfo:p,isAudio:this.curLoadAudioSegment?1:0,dash_fail_bid:f,absRecord:this.absRecord,done:this.done,endTime:Math.floor(1e3*(this.rangeETime===Infinity?0:this.rangeETime)),action:this.action,absBidBitrateMap:this.dashInfo.absBidBitrateMap,bidList:u,switching:g,dashNoReadyList:d};return Gu.absReport=performance.now(),this._absStrategy.reportData(x)}}}}},{key:"checkCDNLoad",value:function(){mu.running||this.curLoadSegment&&this.curLoadSegment.isOnP2P||this.videoDone||(this._videoLoad=!0),this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH||_u.running||this.audioDone||(this._audioLoad=!0)}},{key:"checkAudioLoadDone",value:function(e){if(!(this.audioDone||this._seekDone||this.videoFormatType!==Ko.a.M4S&&this.videoFormatType!==Ko.a.DASH))if(this.rangeETime>0&&this._loadAudioPointer.cEndTime>=this.rangeETime)this.audioDone=!0,this._audioLoad=!1;else{var t=jr.getFilesInfo(e,gu);if(e){var n=t.length-1,r=t[n].size;this._loadAudioPointer.segmentIndex>=n&&this.curLoadAudioSegment&&this.curLoadAudioSegment.lastCEPos>=r?(this.audioDone=!0,this._audioLoad=!1):this.audioDone=!1}}}},{key:"checkVideoLoadDone",value:function(e,t){if(!this.videoDone&&!this._seekDone&&e)if(this.rangeETime>0&&this._loadPointer.cEndTime>=this.rangeETime)this.videoDone=!0,this._videoLoad=!1,gr.a.info("cEndTime >= rangeTime or duration,videoDone!!!!, cEndTime "+this._loadPointer.cEndTime+",duration "+e.duration+",rangeEndTime "+this.rangeETime);else{var n=t.length-1,r=t[n].size;this.curLoadSegment&&parseInt(this.curLoadSegment.index.slice(1))>=n&&this.curLoadSegment.lastCEPos>=r?(this.videoDone=!0,this._videoLoad=!1,gr.a.info("segmentIndex and  chunkIndex is Max,videoDone!!!! ")):this.videoDone=!1}}},{key:"checkP2PLoad",value:function(e,t,n,r){if(this.videoFormatType!==Ko.a.FTS&&"off"!==dr.h.limitP2P&&pr.a.canP2P&&dr.i.openP2P&&!this.videoDone){this._p2pLoaderPointer||(this._p2pLoaderPointer=new Iu,this._p2pLoaderPointer.levelID=n);var i=!1;if((this._seekDone||!this.curLoadSegment||"e"+this._p2pLoaderPointer.segmentIndex!==this.curLoadSegment.index||this._p2pLoaderPointer.levelID!==n||this._p2pLoaderPointer.levelID!==r||this.absTocbs||this.curLoadSegment.done||r<n)&&(i=!0),i&&this.videoFormatType===Ko.a.DASH&&this.curLoadSegment&&"e0"===this.curLoadSegment.index&&(i=!1),i){var a=this._loadPointer.cEndTime,o=!1,s=!1;if(-1!==this._levelID)(this._p2pLoaderPointer.levelID!==n||this.absTocbs)&&(gr.a.info("[P2P loader],CBS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n,this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(a=this._readPointer.time,gr.a.info("CBS video switch bid, time "+a)):a=Math.max(this.rangeSTime,fr.a.getBufferFunc().end),s=!0,mu.reset());else if(-1===this._levelID)if(r!==n)if(this._loadPointer.cEndTime>this._readPointer.time||this._videoChunkComplete?(this.halfChunk=!1,o=!0,this.absRecord.abs.action="ready"):(this.halfChunk=!0,this.absRecord.abs.action="no"),o)mu.reset(),this.updateCEPos(yu,r,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),gr.a.info("[P2P loader],ABS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n;else{if(!this._seekDone&&this.curLoadSegment&&!this.curLoadSegment.done)return;this._p2pLoaderPointer.levelID=r;var u=this.getFileList(this._p2pLoaderPointer.levelID);u&&(e=u.levelInfo,t=u.vFList)}else this._p2pLoaderPointer.levelID!==n&&(this._p2pLoaderPointer.levelID=n);if(!this.videoDone){var c=null;if(o&&this._absStrategy&&this.videoFormatType===Ko.a.TS&&this._readPointer.time<=this._loadPointer.cEndTime){var l=fr.a.isAD()||fr.a.majorLoadTvid!==fr.a.playTvId?this._readPointer.time:Nu.a.timestamp()||0,d=this._absStrategy.maxDelay;if(a!==this._readPointer.time){var f=l+d,h=jr.getTSGapPos(e,f,"start");if(h.time<=this._readPointer.time)if(this._videoChunkComplete)a=this._readPointer.time,gr.a.info("[P2P loader], load switch use curRead, playTime: ".concat(l,", switchTime: ").concat(a)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(this._loadPointer.cEndTime,", maxDelay: ").concat(d));else{var p=jr.getTSGapPos(e,this._readPointer.time,yu,"end");p.time>this._readPointer.time?(a=p.time,gr.a.info("[P2P loader], load switch use nextRead, playTime: ".concat(l,", switchTime: ").concat(a)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(this._loadPointer.cEndTime,", maxDelay: ").concat(d))):(gr.a.error("[P2P loader], load switch use none, playTime: ".concat(l)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(a,", maxDelay: ").concat(d)),upLog("abs"))}else h.time>this._readPointer.time&&h.time<a?(gr.a.info("[P2P loader], load switch use maxDelay, playTime: ".concat(l,", switchTime: ").concat(h.time)+", readTime: ".concat(this._readPointer.time,", loadTime: ").concat(a,", maxDelay: ").concat(d)),a=h.time):(gr.a.warn("[P2P loader], load switch cannot use maxDelay, maxTime: ".concat(h.time,", loadETime: ").concat(a,", readETime: ").concat(this._readPointer.time,", playTime: ").concat(l)),upLog("abs"))}}if(!(c=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getGapPos(e,a,yu,"start"):jr.getTSGapPos(e,a,"start")))return void gr.a.error("[P2P loader], find start Point is null,time "+a+",bid "+n);var v=null;v=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?t[c.segmentIndex].seekable:t[c.segmentIndex];var y=0;if(this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(y=v.pos.length-2,this._p2pLoaderPointer.endPos=v.pos[y+1]):(y=v.pos.length-1,this._p2pLoaderPointer.endPos=v.pos[y].ePos),this._p2pLoaderPointer.chunkIndex=y,this._p2pLoaderPointer.segmentIndex=c.segmentIndex,this._p2pLoaderPointer.startTime=c.time,this._p2pLoaderPointer.chunkPos=c.pos,s&&(this._readPointer.bid=this._p2pLoaderPointer.levelID,this._readPointer.segmentIndex=this._p2pLoaderPointer.segmentIndex,this._readPointer.chunkIndex=c.chunkIndex,this._readPointer.time=this._p2pLoaderPointer.startTime,this.videoFormatType===Ko.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=c.pos,this._loadPointer.cEndTime=c.time,gr.a.info("[P2P load] , p2p switch  bid , readPointer"+JSON.stringify(this._readPointer)+", cEndTime "+this._loadPointer.cEndTime)),o){this._absStrategy&&(this._absStrategy.lstHCDNTime=c.time),this._switchVideoPointer.levelID=this._p2pLoaderPointer.levelID,this._switchVideoPointer.segmentIndex=this._p2pLoaderPointer.segmentIndex,this._switchVideoPointer.chunkIndex=c.chunkIndex,this._switchVideoPointer.time=this._p2pLoaderPointer.startTime,this._switchVideoPointer.tvid=this.tvid,this._loadPointer.cEndTime=c.time;var g=this.absRecord.abs;g.bid=this._switchVideoPointer.levelID,g.time=this._switchVideoPointer.time,g.segmentIndex=this._switchVideoPointer.segmentIndex,g.chunkIndex=this._switchVideoPointer.chunkIndex,yr.a.bufferArray.length=0,this._switchPb(),gr.a.info("[P2P loader],ABS switch  bid , this._switchVideoPointer "+JSON.stringify(this._switchVideoPointer)+this.tvid)}if(this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._p2pLoaderPointer.segmentIndex||this.curLoadSegment.rate!==this._p2pLoaderPointer.levelID||!this.curLoadSegment.segment){var m=this.constructorSegmentInfo(t,e,"p2p");this.createSegmentProxy(yu,m),this.curLoadSegment.checkCreateSegment()}this.absTocbs&&this.videoFormatType===Ko.a.TS&&(this.absTocbs=!1),gr.a.info("[P2P load] , ~~~~~~video Load point"+JSON.stringify(this._p2pLoaderPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this.curLoadSegment.p2pLoadSegment()}}}}},{key:"clearLoadPint",value:function(){this._loadPointer=null}},{key:"algorithmDes",get:function(){return-1===this._levelID&&this._absStrategy?this._loadPointer&&this._loadPointer.levelID&&this.dashInfo&&1===this.dashInfo.getAbsBidListFromBid(this._loadPointer.levelID).length?"null":this._absStrategy.algorithmDes:"close"}},{key:"bandwidth",get:function(){return mu&&mu.running?1e3*fr.a.cdnSpeed:fr.a.downSpeed}},{key:"calculateVideoLoadTime",value:function(e,t,n){var r=0;r=this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?jr.getDuratioSecond(t,yu,this._loadPointer.segmentIndex):jr.getTSDuratioSecond(t,this._loadPointer.segmentIndex);var i=hr.a.accSub(r,this._loadPointer.cEndTime);i<=0&&this._loadPointer.segmentIndex<n.length-1&&(i=1);var a=Math.min(e,i);return-1!==this.rangeETime&&this._loadPointer.cEndTime+a>=this.rangeETime&&(a=hr.a.accSub(this.rangeETime,this._loadPointer.cEndTime),gr.a.warn("fix loadDuration ~~~,loadPointerTime = "+this._loadPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),this.videoFormatType===Ko.a.FTS&&(a=1),a}},{key:"calculateAudioLoadTime",value:function(e,t){var n=jr.getDuratioSecond(t,gu,this._loadAudioPointer.segmentIndex),r=hr.a.accSub(n,this._loadAudioPointer.cEndTime),i=Math.max(1,Math.min(e,r));return-1!==this.rangeETime&&this._loadAudioPointer.cEndTime+i>=this.rangeETime&&(i=hr.a.accSub(this.rangeETime,this._loadAudioPointer.cEndTime),gr.a.info("fix audioLoadDuration ~~~_loadAudioPointer = "+this._loadAudioPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),i}},{key:"updateCEPos",value:function(e,t,n){var r=this.levelMgr.get(t);if(r){var i=null;this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?i=jr.getGapPos(r,n,e,"start"):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(i=jr.getTSGapPos(r,n,"start")),i&&(e===yu&&this.curLoadSegment&&this.curLoadSegment.cePos>i.pos&&(gr.a.info("updateCEPos,LevelID  "+t+" before "+this.curLoadSegment.lastCEPos+" now "+i.pos+" point "+JSON.stringify(i)),this.curLoadSegment.updateCePos(i.pos)),e===gu&&this.curLoadAudioSegment&&this.curLoadAudioSegment.cePos>i.pos&&this.curLoadAudioSegment.updateCePos(i.pos))}}},{key:"getFileList",value:function(e){var t=this.levelMgr.get(e);if(t){var n=null,r=null;return this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?(n=jr.getFilesInfo(t,yu),r=jr.getFilesInfo(t,gu)):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(n=t.m3u8),{vFList:n,aFList:r,levelInfo:t}}return null}},{key:"checkData",value:function(e,t,n,r){var i=this.levelMgr.get(e),a=null;this.videoFormatType===Ko.a.DASH&&t++,this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?a=jr.getFilesInfo(i,yu):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(a=i.m3u8);var o=null,s=null;this.videoFormatType===Ko.a.DASH&&(s=hr.a.searchPosIndex(n,a[t].seekable.pos))>=0&&(o=jr.getChunkSEPos(i,yu,t,s))&&gr.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", index "+s+", startPos "+o.sPos+",endPos "+o.ePos);var u=bu(a[t].sourceID,i.vid,"e"+(a[t].realIdx!==undefined?a[t].realIdx:t)),c=pi.getSegment(u);if(c){var l=As.selectDUnit(c.sourceID);if(l){var d="dataError_tvId{".concat(this.tvid,"}_bid{").concat(e,"}_index{").concat(t,"}_[").concat(n,",").concat(r,"]");l&&"dcache"===l.z?(Ni.b.diy_ts_durl=encodeURIComponent(l.URL),Ni.b.diy_ts_derr=encodeURIComponent(d),Ni.b.diy_tserrtype=Ss.a.getErrorType(d),sa.diy_dcdn_durl=encodeURIComponent(l.URL),sa.diy_dcdn_derr=encodeURIComponent(d),sa.diy_cdnerrtype=Ss.a.getErrorType(d)):(Ni.b.diy_tsurl=encodeURIComponent(l.URL),Ni.b.diy_tserr=encodeURIComponent(d),Ni.b.diy_tserrtype=Ss.a.getErrorType(d),sa.diy_cdnurl=encodeURIComponent(l.URL),sa.diy_cdnerr=encodeURIComponent(d),sa.diy_cdnerrtype=Ss.a.getErrorType(d)),Wu&&(Wu=!1,Object(Ni.e)(),ia(),ru(hr.a.getPureIP(l.URL),Ns,l.z))}var f=Math.min(188,r-n),h=c.getData(n,f);if(gr.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+n+",endPos "+(n+f)),gr.a.log(h),o){var p=o.ePos-188,v=c.getData(p,188);gr.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+p+",endPos "+o.ePos),gr.a.log(v)}}pi.destroy()}},{key:"Log",get:function(){var e=this.curLoadSegment?this.curLoadSegment.rate.toString():"null",t="┏┯┯┯┯┯┯┯┯┯┯┯┯┯┯┯┯P2PLog -- "+dr.k.version+"--LevelID--"+e+"┯┯┯┯┯┯┯┯┯┯┯┯┓\r\n";t+=" [ cdnSpeed : "+hr.a.trimNumber(fr.a.cdnSpeed,1e5)+"K , cdnSize : "+hr.a.trimNumber(Oi.cdnSize/1048576)+"M , loading : "+mu.running+" ] \r\n [ p2pSpeed : "+hr.a.trimNumber(fr.a.downSpeed/1024,1e5)+"K , p2pSize : "+hr.a.trimNumber(Oi.p2pSize/1048576)+"M , p2pLoadRate : "+(Oi.p2pSize/(Oi.cdnSize+Oi.p2pSize)*100).toFixed(2)+"% ] \r\n [ upSpeed  : "+hr.a.trimNumber(fr.a.upSpeed/1024,1e5)+"K , upSize  : "+hr.a.trimNumber(Oi.upSize/1048576)+"M ] \r\n < downMax : "+Math.ceil(fr.a.downMax/1024)+"K ,  upMax : "+Math.ceil(fr.a.upMax/1024)+"K >\r\n";var n=this.levelMgr.get(this._readPointer.bid),r=null;this.videoFormatType===Ko.a.M4S||this.videoFormatType===Ko.a.DASH?r=jr.getFilesInfo(n,yu):this.videoFormatType.indexOf(Ko.a.TS)>=0&&(r=n.m3u8);var i=bu(r[this._readPointer.segmentIndex].sourceID,n.vid,"e"+(r[this._readPointer.segmentIndex].realIdx!==undefined?r[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)),a=pi.getSegment(i);return a&&(t+=" RD | "+a.toDataString(this._readPointer.chunkPos)+"\r\n"),this.curLoadSegment.segment&&(t+=" LD | "+this.curLoadSegment.segment.toDataString(-1)+"\r\n",t+=(this.curLoadSegment.segment.vidsDesc!==undefined?this.curLoadSegment.segment.vidsDesc:" [ ]")+"\r\n"),t+=fr.a.p2pLog,t+="┗┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┛\r\n"}},{key:"clearData",value:function(e){pi.destroy()}},{key:"_switchPb",value:function(){if(this._switchVideoPointer&&this._loadPointer&&this._readPointer&&this._switchVideoPointer.levelID!==this._readPointer.bid){var e=Math.floor(1e3*(this._switchVideoPointer.time-(fr.a.isAD()||fr.a.majorLoadTvid!==fr.a.playTvId?this._readPointer.time:Nu.a.timestamp()||this._readPointer.time)));this._switchVideoPointer.levelID>this._readPointer.bid?(Ni.b.diy_absupcnt++,Ni.b.diy_absuptime+=e,this._loadSwitchMethod="up"):(Ni.b.diy_absdncnt++,Ni.b.diy_absdntime+=e,this._loadSwitchMethod="down"),this._loadSwitchTime=performance.now(),fr.a.levelLoad=0,fr.a.levelBid=this._switchVideoPointer.levelID}}},{key:"_checkABSSwtDashReady",value:function(){if(this._absStrategy){var e=this._absStrategy.bitrate;if(e>0&&e===this._getCurEverMaxBid(e)&&(Gu.absSwtMaxBidTime=performance.now()),(e<=0||this.levelMgr.has(e))&&(e=this._getCurEverMinBid(this._loadPointer.levelID)),e<=0)return;if(!this.levelMgr.has(e)&&fr.a.noticeDashRequest)if(this.dashRequestMap.has(e)){var t=this.dashRequestMap.get(e);"fail"===t.status&&t.failCnt<3&&performance.now()-t.time>=1500&&(gr.a.info("DashMovie.request dash, tvid: ".concat(this.tvid,", bid: ").concat(e,", failCnt: ").concat(t.failCnt)),t.status="start",t.time=performance.now(),fr.a.noticeDashRequest(this.tvid,e,this.dashInfo.absBidVidMap.get(e)),Ni.b.diy_dashrcnt++,sa.diy_dashrcnt++)}else gr.a.info("DashMovie.request dash, tvid: ".concat(this.tvid,", bid: ").concat(e,", requestCnt: 1")),this.dashRequestMap.set(e,{status:"start",time:performance.now(),failCnt:0}),fr.a.noticeDashRequest(this.tvid,e,this.dashInfo.absBidVidMap.get(e)),Ni.b.diy_dashrcnt++,sa.diy_dashrcnt++}}},{key:"_levelDashValid",value:function(e){return this.levelMgr&&(this.levelMgr.has(e)||fr.a.noticeDashRequest&&(!this.dashRequestMap.has(e)||this.dashRequestMap.get(e).failCnt<3)||!fr.a.noticeDashRequest&&(!fr.a.firstStartTime||performance.now()-fr.a.firstStartTime<=3e4))}},{key:"_getCurEverMinBid",value:function(e){return this.dashInfo?Math.min.apply(Math,Cr()(this.dashInfo.getAbsBidListFromBid(e))):e}},{key:"_getCurEverMaxBid",value:function(e){return this.dashInfo?Math.max.apply(Math,Cr()(this.dashInfo.getAbsBidListFromBid(e))):e}},{key:"absWithoutMax",get:function(){var e=this;if(!(this._absStrategy&&this.dashInfo&&this.levelMgr&&this.levelMgr.size))return!1;var t=this.curLoadBid;return t<this.dashInfo.getAbsBidListFromBid(t).reduce((function(t,n){return n>t&&(e.levelMgr.has(n)||!e.dashRequestMap.has(n)||e.dashRequestMap.get(n).failCnt<3)?n:t}),t)}},{key:"absStuckReason",get:function(){if(this._absStrategy&&this._absStrategy.bitrate&&this._loadPointer&&this._loadPointer.levelID>0){if(this._loadPointer.levelID===this._getCurEverMinBid(this._loadPointer.levelID))return 5;var e=this._absStrategy.bitrate;if(e<=0)return 6;if(e>=this._loadPointer.levelID&&e!==this._getCurEverMinBid(e))return 1;if(this.levelMgr&&!this.levelMgr.has(e))return 2;if(this.halfChunk)return 3;if(fr.a.levelLoad<131072)return 4}return 0}},{key:"getInitData",value:function(e){var t=this.initSegmentLoader.initDataMap.get("v".concat(e)),n=this.initSegmentLoader.initDataMap.get("a".concat(e));if(t&&n)return gr.a.info("read initSegment data ok, tvid: ".concat(this.tvid,", bid: ").concat(e)),{tvid:this.tvid,bid:e,loadDone:!1,type:Ko.a.DASH,video:{data:t},audio:{data:n}}}}]),e}();function Yu(e,t,n){for(var r=0,i=0;i<=t;i++)i<t?e[i].hasOwnProperty("seekable")?r+=e[i].seekable.pos.length-1:r+=e[i].pos.length:r+=n;return r}var Qu=He()((function oh(){Ue()(this,oh),this.f4vloader=new XMLHttpRequest,this.f4vloader.responseType="json",this.f4vloader.onloadend=function(e){var t=e.currentTarget,n=t.status;if(n>=200&&n<300){var r=t.response;r.t&&r.z&&(fr.a.setUserInfo(r.t+"|"+r.z),Lr.checkConfig())}};try{this.f4vloader.open("GET",(pr.a.isHTTPS?"https":"http")+"://data.video.iqiyi.com/v.f4v?random="+Date.now(),!0),this.f4vloader.send()}catch(nh){console.log(nh)}})),Ju=n(184),Xu=n.n(Ju),Zu=new(function(){function e(){var t=this;Ue()(this,e),Xu()(this,"lag",!1),Xu()(this,"rebufferTime",""),Xu()(this,"initCnt",0),Xu()(this,"init",!1),Xu()(this,"start",!1),Xu()(this,"startCnt",0);var n=Date.now(),r=0,i=[],a=0,o=0,s=0,u=0;setInterval((function(){var e=localStorage.getItem("vod_pingback_states");e&&(i=JSON.parse(e));var c="",l=!1;if(t.init&&(c+="I[".concat(t.changeTimeFormat(),"]"),t.start||(l=!0,c+="N"),t.init=!1,i.push(c)),t.initCnt>3&&(t.initCnt=0,localStorage.setItem("vod_pingback_initcnt",0),gr.a.info("vod_pingback_states: |".concat(i.join(""),"|")),upLog("noPlay")),Date.now()-n>=1e4){r++,n=Date.now(),t.start&&(c+="S[".concat(t.changeTimeFormat(),"]"),t.start=!1),t.lag&&(c+="K",t.rebufferTime&&(c+="R",t.lag=!1,t.rebufferTime="")),l||t.lag||(Nu.a.paused()?c+="P":c+="-");var d=Math.round(Ni.b.diy_tstime-o+Ni.b.diy_ts_dtime-u==0?0:(Ni.b.diy_tssize-a+Ni.b.diy_ts_dsize-s)/1024/((Ni.b.diy_tstime-o+Ni.b.diy_ts_dtime-u)/1e3));d&&d>0&&(c+="".concat(d),a=Ni.b.diy_tssize,s=Ni.b.diy_ts_dsize,o=Ni.b.diy_tstime,u=Ni.b.diy_ts_dtime),c.length>1&&(c="(".concat(c,")")),i.push(c),i.length>180&&(i=i.slice(i.length-180)),r>=6&&(r=0,console.info("vod_pingback_states:","|".concat(i.join(""),"|")))}"visible"===document.visibilityState&&localStorage.setItem("vod_pingback_states",JSON.stringify(i))}),1e3)}return He()(e,[{key:"setLag",value:function(){this.lag=!0}},{key:"setRebuff",value:function(e){this.rebufferTime=e}},{key:"setInit",value:function(){var e=parseInt(localStorage.getItem("vod_pingback_initcnt"))||0;this.init=!0,this.initCnt=e+1,this.startCnt=0,localStorage.setItem("vod_pingback_initcnt",this.initCnt)}},{key:"setStart",value:function(){this.start=!0,this.startCnt++,1===this.startCnt&&localStorage.setItem("vod_pingback_initcnt",0)}},{key:"changeTimeFormat",value:function(){var e=new Date;return(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}}]),e}()),ec=n(332),tc=!1,nc=0,rc=0,ic=0,ac=0,oc=0,sc=0,uc=!1,cc=0,lc=0,dc=!0;function fc(){var e=sc;return sc=0,e}var hc=null,pc=function(){function e(){Ue()(this,e),window.upLog=pu;var t=0,n=0;hc||(hc=setInterval((function(){var e=Nu.a.timestamp(),r=Nu.a.bufferEnd();tc&&e&&r?(n===e&&r-e<=3&&pu.stuck&&pu.stuck.timeout?t>=pu.stuck.timeout?(upLog("stuck"),t=0):t+=3e3:t=0,n=e):(t=0,n=0)}),3e3)),gr.a.info("p2pSdk.init, version: "+ec.a)}return He()(e,[{key:"init",value:function(e){var t=this;dc&&(dc=!1,fr.a.platform=e.platform?e.platform:vr.a.WEB,fr.a.enableStartSpeed=fr.a.platform===vr.a.WEB||fr.a.platform===vr.a.OVERSEA_WEB,fr.a.platform===vr.a.OVERSEA_WEB||fr.a.platform===vr.a.OVERSEA_TV?(ws.checkPipeIps(ws.OverSea),dr.b.dispatchCfg=[1e4,2e4,2e4,2e4],dr.b.TTFBCfg=[1e4,2e4,2e4,2e4],dr.b.rcvCfg=[1e4,2e4,2e4,2e4]):ws.checkPipeIps(ws.CN),fr.a.enableStartSpeed&&new Qu,Fi.a.init(),Lr.load(),this.currentList=new $u,this.nextList=new $u,this.nextListFeedDone=!1),e.xhr&&(dr.f.xhr=!0),gr.a.logTarget=e.logger,fr.a.getOBid=e.getOldVd,fr.a.getBufferFunc=e.getBufferFunc,fr.a.getReBufTimeFunc=fc,window["switch"]=fr.a.switchAutoDef=e.switchAutoDef,fr.a.canSwitchVd=e.canSwitchVd,fr.a.startPlayed=e.startPlayed,fr.a.isAd=e.isAd,fr.a.sendPingBack=e.sendPingBack,fr.a.getUserInfoFunc=e.getUserInfo,fr.a.noticeDataArrived=e.noticeDataArrived,fr.a.checkIsMobius=e.checkIsMobius,fr.a.noticeDashRequest=e.noticeDashRequest,fr.a.setADFunc(e.isAd),Object(Ni.f)(),3===fr.a.platform&&(Gi=Gi.replace("msg.qy.net","msg.ptqy.gitv.tv")),Wi||(Wi=!0,clearTimeout(Ki),Ki=setTimeout(ia,1e3*dr.l,!1,1e3*dr.l)),ns.a.globalEvent().on(es.a.LoaderState_405,(function(n){t.currentList?t.currentList.clearSegmentUrl():t.nextList&&t.nextList.clearSegmentUrl(),e.noticeRefreshMovieData&&e.noticeRefreshMovieData(n)}))}},{key:"notifyP2P",value:function(e,t){switch(e){case"p2pInit":fr.a.playState="init",rc=performance.now(),this.checkInit();break;case"playing":if(fr.a.playState="playing",fr.a.moviePlaying=!0,uc=!1,lc>0&&(Ni.b.diy_seekend++,Ni.b.diy_seektime+=Math.floor(performance.now()-lc),sa.diy_seekend++,sa.diy_seektime+=Math.floor(performance.now()-lc),lc=0),-1===nc&&tc&&rc>0&&(0===fr.a.firstStartTime&&(fr.a.firstStartTime=performance.now()),tc=!1,Ni.b.diy_start++,Zu.setStart(),Ni.b.diy_starttime+=Math.floor(performance.now()-rc),sa.diy_starttime+=Math.floor(performance.now()-rc),Ni.b.diy_fastplay="fast"===fr.a.playMode?1:0,sa.diy_fastplay="fast"===fr.a.playMode?1:0,fr.a.playMode="normal",Object(Ni.e)(),ia(),rc=-1,this.currentList&&this.currentList.signalABS()),0!==ic){Ni.b.diy_rebufercnt++,sa.diy_rebufercnt++,sc+=performance.now()-ic,Zu.setRebuff(sc),Ni.b.diy_lagtime+=Math.floor(performance.now()-ic),sa.diy_rebufertime+=Math.floor(performance.now()-ic),ic=0;var n=this._getBuffLen();fr.a.avgBufferCnt<=0&&(fr.a.avgBuffer+=n,fr.a.avgBufferCnt++),Object(Ni.e)(),ia()}break;case"waiting":if(fr.a.playState="stuck",!uc){Ni.b.diy_abslagstep=this.currentList?this.currentList.absStuckReason:0,sa.diy_abslagstep=this.currentList?this.currentList.absStuckReason:0,ic=performance.now(),Ni.b.diy_lagcnt++,sa.diy_stuck++,Zu.setLag();var r=this._getBuffLen();fr.a.avgBufferCnt<=0&&(fr.a.avgBuffer+=r,fr.a.avgBufferCnt++),Object(Ni.e)(),ia(),fr.a.stuck()}this.currentList&&this.currentList.lastAbsLoadSwitchTime();break;case"error":fr.a.playState="error",Ni.b.diy_finalerr=encodeURIComponent(t),sa.diy_finalerr=encodeURIComponent(t),Object(Ni.e)(!0),ia(!0)}}},{key:"checkInit",value:function(){rc>0&&nc>0&&!tc&&(fr.a.playState="pbInit",tc=!0,nc=-1,Ni.b.diy_init++,sa.diy_init++,Ni.b.diy_fastinit="fast"===fr.a.initMode?1:0,Zu.setInit(),fr.a.initMode="normal",Object(Ni.e)(),ia(),Object(Ni.d)(),Wi&&(clearTimeout($i),$i=setTimeout(ra,5e3,5e3)),-1===fr.a.tempTestStartRWTime&&(fr.a.tempTestStartRWTime=performance.now()+1e3))}},{key:"feed",value:function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:undefined;arguments.length>5&&arguments[5]!==undefined||undefined;if(fr.a.platform===vr.a.MOBILE){var a=JSON.parse(t),o=a.tvid.toString(),s={aid:a.aid,bid:a.bid,type:a.type,vid:a.vid,vsize:a.vsize,ever:null,dataFlow:i};this.feedInner(o,n,r,s)}else this.feedInner(e,t,n,r)}},{key:"feedInner",value:function(e,t,n,r){n?(fr.a.playTvId=e,fr.a.moviePlaying=!1,fr.a.enableStartSpeed&&"idle"===fr.a.initMode&&(fr.a.initMode=r.dataFlow&&r.dataFlow.play?"fast":"normal",fr.a.playMode=fr.a.initMode),this.currentList&&this.currentList.tvid===e&&fr.a.platform===vr.a.TV&&(this.currentList.reset(),this.recover(-1)),tc=!1,nc=performance.now(),this.checkInit(),gr.a.info("DataProvider.feed current, tvid: "+e),this.currentList.feed(e,t,r),this.nextListFeedDone&&this.nextList.clearLoadPint()):(gr.a.info("DataProvider.feed next, tvid: "+e),this.nextList.reset(),this.nextList.feed(e,t,r),this.nextListFeedDone=!0)}},{key:"setBitrate",value:function(e,t){if(this.currentList.tvid===e)this.currentList.absQOS(t),0!==this.currentList.curLoadBid?(Ni.b.diy_set_bid=t,sa.diy_switchbid=t):Ni.b.diy_start_bid=t,gr.a.info("DataProvider set current bitrate : "+t),-1!==this.currentList._levelID&&-1===t?(gr.a.info(" CBS  to ABS !!!!!!!!!!"),this.currentList.cbsToAbs=!0):this.currentList.cbsToAbs=!1,-1===this.currentList._levelID&&-1!==t?(gr.a.info(" ABS  to CBS!!!!!!!!!!"),this.currentList.absTocbs=!0):this.currentList.absTocbs=!1,this.currentList.levelID=t,this.currentList.checkBitRate(t),this.currentList.resetDoneStatus(),-1===t&&(fr.a.absStatus=1),fr.a.setbid=t;else{var n=this.currentList&&-1===this.currentList.userBid&&this.currentList.curLoadBid>0?this.currentList.userBid:t;gr.a.info("DataProvider set next move bitrate : "+t+", fixTo "+n),t=n,this.nextList.levelID=t,this.nextList.checkBitRate(t),this._run()}}},{key:"_run",value:function(){clearTimeout(this._runnerStep);try{if(!Or.errorFragment){var e=fr.a.getBufferFunc(),t=0;t=+(t=this.currentList.videoFormatType===Ko.a.M4S||this.currentList.videoFormatType===Ko.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len).toFixed(3),fr.a.pcwBuffer=t,t=hr.a.accAdd(t,this.currentList.buffer),++oc>=50&&(fr.a.avgBuffer+=t,fr.a.avgBufferCnt++,oc=0);var n=!1;if(performance.now()-yr.a.preCheckTime>=yr.a.bufferUpStep&&(yr.a.preCheckTime=performance.now(),n=!0),this.currentList.done?this.currentList.absWithoutMax?(fr.a.majorLoadTvid=this.currentList.tvid,this.currentList.segmentError||this.currentList.check(t),this.nextListFeedDone&&(t+=this.nextList.buffer,this.nextList.segmentError||this.nextList.check(t))):this.nextListFeedDone&&(fr.a.majorLoadTvid=this.nextList.tvid,t+=this.nextList.buffer,this.nextList.segmentError||this.nextList.check(t)):(fr.a.majorLoadTvid=this.currentList.tvid,this.currentList.segmentError||this.currentList.check(t)),n){var r=yr.a.bufferArray;for(r.push((1e3*t/(Nu.a.playbackRate()||1)).toFixed(0));r.length>yr.a.bufferMaxSize;)r.shift()}}fr.a.onLog&&++ac>=10&&(console.info(this.currentList.Log),ac=0)}catch(nh){gr.a.error("error catch: "+nh),upLog("exception")}this._runnerStep=setTimeout(this._run.bind(this),100)}},{key:"seek",value:function(e,t){var n=this;if(yr.a.bufferArray.length=0,fr.a.atkMap.size&&fr.a.atkMap.forEach((function(e,t){t!==n.currentList.tvid&&t!==n.nextList.tvid&&fr.a.atkMap["delete"](t)})),uc&&(Ni.b.diy_bug="".concat(cc,"-").concat(t||0)),cc=t||0,uc=!0,Or.errorFragment=null,Or.errorStage="",Or.loader.count=0,Or.dispatcher.count=0,t=t?+t.toFixed(3):t,this.currentList.tvid===e){if(gr.a.info("DataProvider.seek currentList tvid = "+e+" time = "+t),this.nextListFeedDone&&this.nextList.clearLoadPint(),2===dr.i.fastGC&&pi.onGC(!0),this.currentList.seek(t),this._run(),Ni.b.diy_seekcnt++,sa.diy_seekcnt++,0!==ic){Ni.b.diy_rebufercnt++,sc+=performance.now()-ic,Ni.b.diy_lagtime+=Math.floor(performance.now()-ic),sa.diy_rebufertime+=Math.floor(performance.now()-ic),ic=0;var r=this._getBuffLen();fr.a.avgBufferCnt<=0&&(fr.a.avgBuffer+=r,fr.a.avgBufferCnt++),Object(Ni.e)(),ia()}}else if(this.nextList.tvid===e){fr.a.playTvId=e,fr.a.moviePlaying=!1,tc=!1,nc=performance.now(),this.checkInit(),gr.a.info("DataProvider.seek nextList tvid = "+e+" time ="+t),this.currentList.reset();var i=this.currentList;this.currentList=this.nextList,this.nextList=i,this.nextListFeedDone=!1,t&&t!==this.currentList.rangeSTime||!this.currentList._readPointer?(this.currentList.seek(t),2===dr.i.fastGC&&pi.onGC(!0),this._run()):gr.a.warn("DataProvider.seek warn, seek.time: "+t+", rangeSTime: "+this.currentList.rangeSTime),Ni.b.diy_seekcnt++,sa.diy_seekcnt++}fr.a.moviePlaying?(lc>0&&performance.now()-lc<=5e3&&(Ni.b.diy_seekstart-=1,sa.diy_seekstart-=1),lc=performance.now(),Ni.b.diy_seekstart++,sa.diy_seekstart++,fr.a.lstSeekTime=Math.floor(performance.now())):fr.a.lstPlayTime=Math.floor(performance.now()),Oi.start()}},{key:"read",value:function(e){var t=this.currentList.read(e);return this.currentList.readWorking=!1,t}},{key:"setDefList",value:function(e,t){!t||t.length<0||(this.currentList.tvid===e?this.currentList.setDefList(t):this.nextList.setDefList(t))}},{key:"setDefFail",value:function(e,t){this.currentList.tvid===e?this.currentList.setDefFail(t):this.nextList.tvid===e?this.nextList.setDefFail(t):gr.a.info("DataProvider.setDefFail, tvid: ".concat(e,", bid: ").concat(t))}},{key:"error",get:function(){return Or.errorFragment?Or.errorStage:""}},{key:"stats",get:function(){var e=function(){if(mu.running||_u.running){var e=fr.a.cdnSpeed>0?fr.a.cdnSpeed:fr.a.cdnCostTime>0?fr.a.cdnSize/fr.a.cdnCostTime:0;return{domain:fr.a.domain,bw:1e3*e,bps:1e3*e}}return{domian:"",bw:fr.a.downSpeed,bps:0}}();return{bandwidth:e.bw,bps:e.bps,cdnHost:e.domain,netProtocol:pr.a.isHTTPS?"https":"http"}}},{key:"algorithmDes",get:function(){return this.currentList.algorithmDes}},{key:"close",value:function(){uc=!1,gr.a.info("~~dataProvider close,clear data~~"),2===dr.i.fastGC&&pi.onGC(!0),clearTimeout(this._runnerStep),this.currentList.reset(),this.nextList.reset(),this.nextListFeedDone=!1,Or.errorFragment=null,Or.errorStage="",Or.loader.count=0,Or.dispatcher.count=0,rc=0,ic=0}},{key:"getBuffTime",value:function(){var e=this.currentList.buffer,t=0;return this.currentList._readPointer&&(t=this.currentList._readPointer.time),this.currentList._readAudioPointer&&(t=Math.min(this.currentList._readAudioPointer.time,t)),{start:t,length:e}}},{key:"refreshLoadRange",value:function(e,t){this.currentList.tvid===e&&this.currentList.refreshLoadRange(t)}},{key:"checkData",value:function(e,t,n,r){this.currentList.checkData(e,t,n,r)}},{key:"recover",value:function(e){this.currentList.clearData(e)}},{key:"_getBuffLen",value:function(){var e=fr.a.getBufferFunc(),t=0;return e&&(t=this.currentList.videoFormatType===Ko.a.M4S||this.currentList.videoFormatType===Ko.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len),t}}],[{key:"version",get:function(){return ec.a}}]),e}();window.DataProvider=pc,window.QIYI_HTML5_P2P_PlayBack_0002=pc;var vc=pc;function yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var gc=n(661).version,mc=null,_c=!1,bc=!1;var xc=function(e){Ye()(n,e);var t=yc(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).absing=!1,e.ABS_LEVEL_ID=-1,e.LOG_TAG="[P2PConnector]",e._initd=!1,e.__p=new vc,e._closed=!1,e._currentTvid=null,e._nextTvid=null,e._loaderBuff=new ut,e._getBufferFunc=null,e._reBufTimeFunc=null,e._refreshTvid="",e}return He()(n,[{key:"isClosed",get:function(){return this._closed}},{key:"buffer",get:function(){if(this.__p){var e=this.__p.getBuffTime();this._loaderBuff.start=e.start,this._loaderBuff.end=e.start+e.length}return this._loaderBuff}},{key:"stats",get:function(){return this.__p?this.__p.stats:{bandwidth:0,bps:0,cdnHost:"",netProtocol:""}}},{key:"algot",get:function(){return this.__p?this.__p.algorithmDes:""}},{key:"error",get:function(){if(this.__p){var e=Ft.a.UNKNOWN;switch(this.__p.error){case"dispatch":e=Ft.a.DATA_P2P_DISPATCH;break;case"load":e=Ft.a.DATA_P2P_LOAD;break;case"loadAccessErr":e=Ft.a.DATA_P2P_LOAD_ACCESS;break;case"memoryAllocErr":e=Ft.a.DATA_P2P_MEMORY_ALLOC;break;case"authorFailed":e=Ft.a.DATA_P2P_AUTH;break;case"loadDataRangeError":e=Ft.a.DATA_P2P_RANGE_ERROR;break;case"dataNULL":e=Ft.a.DATA_P2P_DATA_NULL}if(e!==Ft.a.UNKNOWN)return new Mt.a(Bt.a.CRITICAL,Nt.a.LOADER,e,"")}return null}},{key:"init",value:function(e){if(!this._initd&&this.__p){this._getBufferFunc=e.getBufferFunc,this._reBufTimeFunc=e.reBufTimeFunc;var t=this,n={logger:qe.a,getBufferFunc:function(){return t._getBufferFunc()},reBufTimeFunc:function(){return t._reBufTimeFunc()},platform:e.p2pPlatform,startPlayed:e.startPlayed,canSwitchVd:e.canSwitchVd,checkIsMobius:e.checkIsMobius,getUserInfo:e.getUserInfo,sendPingBack:e.sendPingBack,switchAutoDef:e.switchAutoDef,noticeRefreshMovieData:function(e){t._refreshTvid!==e&&(t._refreshTvid=e,t.emit("AE",e))},noticeDataArrived:function(){t.emit("DR")},isAd:e.isAd,getOldVd:e.getOldVd,noticeDashRequest:e.noticeDashRequest};qe.a.log("".concat(this.LOG_TAG," p2p init")),this.__p.init(n)}}},{key:"setBitrate",value:function(e,t){this.__p&&(qe.a.log("".concat(this.LOG_TAG," setBitrate ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setBitrate(e,t))}},{key:"feed",value:function(e,t,n,r){if(this.__p&&r.bid&&r.dataFlow)if(this._nextTvid==e)qe.a.log("".concat(this.LOG_TAG," feed switch: ").concat(this._currentTvid," -> ").concat(e)),this._currentTvid=this._nextTvid,this._nextTvid=null;else{var i=!this._currentTvid||this._currentTvid===e,a=r.bid,o=r.type;qe.a.log("".concat(this.LOG_TAG," feed ").concat(e,"(").concat(i?"cur":"next","-").concat(n,"), range=[").concat(t,"], bid=").concat(a,", type=").concat(o)),this.__p.feed(e,t,i,r),n?this._currentTvid=e:this._nextTvid=e}else qe.a.log("".concat(this.LOG_TAG," feed error, p2p is null or data error"))}},{key:"seek",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(qe.a.log("".concat(this.LOG_TAG," seek ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.seek(e,t))}},{key:"read",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=this.hasFeed_(e);return this.__p&&r&&((n=this.__p.read(t))&&(n.stream&&n.stream.data&&(_c=bc=!0),n.video&&n.video.data&&(_c=!0),n.audio&&n.audio.data&&(bc=!0)),bc&&_c&&window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onReadDone()),n}},{key:"refreshLoadRange",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(qe.a.log("".concat(this.LOG_TAG," refresh range ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.refreshLoadRange(e+"",t))}},{key:"checkData",value:function(e,t,n,r){if(this.__p)try{this.__p.checkData(e,t,n,r)}catch(nh){qe.a.log("".concat(this.LOG_TAG," checkData failure: ").concat(nh.stack||nh.message))}}},{key:"checkSwitch",value:function(e){this.__p&&this._currentTvid!=e&&this._nextTvid==e&&(this._currentTvid=this._nextTvid,this._nextTvid=null,this.__p.seek(e),this.absing&&this.setBitrate(e,this.ABS_LEVEL_ID))}},{key:"recover",value:function(e){this.__p&&(qe.a.log("".concat(this.LOG_TAG," recover, time=").concat(e)),this.__p.recover(e))}},{key:"close",value:function(){var e=!!this._currentTvid||!!this._nextTvid;this.__p&&!this.isClosed&&e&&(qe.a.log("".concat(this.LOG_TAG," close")),this.__p.close(),this._closed=!0,this._currentTvid=null,this._nextTvid=null)}},{key:"setDefList",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(qe.a.log("".concat(this.LOG_TAG," setDefList, length=").concat(t.length,", close=").concat(this._closed,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setDefList(e,t),this._refreshTvid="")}},{key:"notifyP2P",value:function(e){this.__p&&(this.__p.notifyP2P(e),qe.a.log("notifyP2P state = ".concat(e)))}},{key:"setDefFail",value:function(e,t){this.__p&&(this.__p.setDefFail(e,t),qe.a.log("setDefFail, tvid: ".concat(e,", bid: ").concat(t)))}},{key:"hasFeed_",value:function(e){return this._currentTvid==e||this._nextTvid==e}},{key:"getPosMarkById_",value:function(e){var t="~~";return null!=e&&""!=e&&(this._currentTvid===e?t="current":this._nextTvid===e&&(t="next")),t}}]),n}(gt.EventEmitter),kc=n(663);function wc(e,t,n){var r=e.length;if(t>r-1||t===r-1&&n)return qe.a.log("eof by loader end, ".concat(t,"-").concat(r)),!0;if(!n)return!1;var i=e[t+1],a=!i.enabled;return a&&qe.a.log("eof by next disable, ".concat(t,"-").concat(r,"-").concat(i.enabled)),a}function Sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Tc=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Pc="dash",Ec=function(e){Ye()(n,e);var t=Sc(n);function n(e){var r;Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:kc,watch:["manifest","loader","renderer"]}))).mode=Le.P2P,r.$TAG="P2PLoader",r.READNULL_MAX_COUNT=10,r._p2p=null,r._tvid="",r._timeRange=null,r._eof=!1,r._eod=!1,r.isSwitchLevel=!1,r.p2pSeekNodata=!0,r.curVideoEndTime_=null,r.curAudioEndTime_=null,r.tempDefList_=null,r.baseLog_="",r.tickTimer_=new lt.a((function(){return r.tick_()})),r._readNullCount=0,r.pushDefListNeedChangeManifest=!1,r.onDataArrived_=function(){r._pumpLoader()},r.onAuthExpired_=function(e){var t=r.$krt.params.dynamic.noticeRefreshMovieData;r._tvid==e&&(r.$silenced||t())},r.onKrlPreError_=function(e){var t=r.$manifestArtifact.manifestType;if(!r.$silenced)if(t===xn.HLS&&e.category===Nt.a.MUX){if(e.data[1]&&e.data[1].meta){var n=e.data[1],i=n.startByte,a=n.endByte,o=e.data[1].meta,s=o.level,u=o.fragIdx;r._p2p.checkData(s,u,i,a)}}else if(!(t!==xn.DASH_AV1&&t!==xn.DASH_VP9||e.code!==Ft.a.MEDIA_VIDEO_ERROR&&e.code!==Ft.a.MEDIA_SOURCE_OPERATION_FAILED&&e.code!==Ft.a.MEDIA_SOURCE_OPERATION_THREW)&&r.lastReadMainSegment_){var c=r.lastReadMainSegment_,l=c.startByte,d=c.endByte;d-l>200&&(d=l+200),r._p2p.checkData(c.levelId,c.fragIdx,l,d)}},r.onKrlStateChange_=function(e){var t=e.state,n=void 0===t?"":t,i=e.shouldEmit,a=void 0!==i&&i;if(n&&r._p2p&&a&&!r._ctx.isAd)switch(n){case"p2pInit":case"playing":case"waiting":case"error":r._p2p.notifyP2P(n)}};var i=function(){var e=!0;return null==mc&&(e=!1,mc=new xc),{isCache:e,sdk:mc}}(),a=i.sdk,o=i.isCache;return r._ctx=e.runtime.ctx,r._p2p=a,o||r._initP2P(),r._bind(),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return He()(n,[{key:"$silenced",get:function(){return Ke()(Ze()(n.prototype),"$silenced",this)},set:function(e){Ge()(Ze()(n.prototype),"$silenced",e,this,!0),!1===e&&this._tvid&&(this._p2p.checkSwitch(this._tvid),this._pumpLoader())}},{key:"buffer",get:function(){return this._p2p.buffer}},{key:"duration",get:function(){var e=0,t=null,n=null;if(this.$manifestArtifact&&!Object(dt.c)(this.$manifestArtifact))switch(this.$manifestArtifact.manifestType){case xn.HLS:var r=this.$manifestArtifact.segments;r.length>0&&(e=(t=r[r.length-1]).startTime+t.duration);break;case xn.DASH_AV1:var i=this.$manifestArtifact,a=i.isSink,o=i.duration;if(a)e=o;else{e=(n=this.$manifestArtifact.tracks).video?n.video.duration:0;var s=n.audio?n.audio.duration:0;0===e?e=s:e>0&&s>0&&(e=Math.min(e,s))}break;case xn.DASH_VP9:case xn.JDASH:e=(n=this.$manifestArtifact.tracks).video?n.video.duration:0;var u=n.audio?n.audio.duration:0;0===e?e=u:e>0&&u>0&&(e=Math.min(e,u))}return e}},{key:"algot",get:function(){return this._p2p.algot}},{key:"eof",get:function(){return this._eof}},{key:"eod",get:function(){return this._eod}},{key:"fragments",get:function(){var e,t=[];if(this.$manifestArtifact)switch(this.$manifestArtifact.manifestType){case xn.HLS:t=(e=this.$manifestArtifact).fragments;break;case xn.DASH_VP9:case xn.DASH_AV1:case xn.JDASH:e.tracks.video?t=e.tracks.video.fragments:e.tracks.audio&&(t=e.tracks.audio.fragments)}return t||[]}},{key:"p2pVersion",get:function(){return gc}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this._tvid="",this._timeRange=null,this._eof=!1,this._eod=!1,this.$manifestArtifact=null,this.$rendererArtifact=null,this.lastReadMainSegment_=null,this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.tempDefList_=null,this.tickTimer_.cancel(),this._unbind()}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=e.renderer,i=this.$manifestArtifact!==t,a=this.$selfArtifact!==n,o=this.$rendererArtifact!==r,s=!1,u=!1;i&&t&&!Object(dt.c)(t)&&((t.other||{}).fromlist?this._pushDefList(t):this.$manifestArtifact!==t&&(this._changeManifest(t),s=!0),u=!0);o&&(s=!0,this.$rendererArtifact=r),a&&(s=!0,this.$selfArtifact=n),s&&this._pumpLoader(),u&&this.$consumeArtefact("manifest")}},{key:"seek",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];Ke()(Ze()(n.prototype),"seek",this).call(this,e),this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.lastReadMainSegment_=null;var r=this.$manifestArtifact.manifestType;t&&(this._p2p.absing||r==xn.DASH_AV1||r==xn.DASH_VP9||r==xn.JDASH)||(this._p2p.seek(this._tvid,e),this.p2pSeekNodata=!0,this._pumpLoader())}},{key:"setDefFail",value:function(e,t){this._p2p.setDefFail(e,t)}},{key:"findPieceAt",value:function(e){if(this.$manifestArtifact){var t=null,n=null,r=null;switch(this.$manifestArtifact.manifestType){case xn.HLS:t=this.$manifestArtifact,(n=this.findPieceByPTS_(e,t.fragments))&&(r=this.findPieceByPTS_(e,n.segments));break;case xn.DASH_VP9:case xn.DASH_AV1:case xn.JDASH:t=this.$manifestArtifact,r=this.findPieceByPTS_(e,t.tracks.video.segments)}return r?{fragment:n,segment:r}:null}}},{key:"tick_",value:function(){Object(yt.a)(this._ctx.stats,this._p2p.stats),this._pumpLoader()}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:Ct(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"changeAbsState",value:function(e){this._p2p.absing=e,e&&(this.tempDefList_=null,this._p2p.setBitrate(this._tvid,this._p2p.ABS_LEVEL_ID))}},{key:"applyRanges",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this.$manifestArtifact&&0!==e.length){this._eod=this._eof=!1,this._timeRange=e,this._constructSegmentsByRange(this.$manifestArtifact);var n=[[e.start(0),e.end(e.length-1)]];t&&this._p2p.refreshLoadRange(this._tvid,n)}}},{key:"recoverAt",value:function(e){this._p2p.recover(e),Ke()(Ze()(n.prototype),"recoverAt",this).call(this,e)}},{key:"_initP2P",value:function(){var e=this,t=this.$krt,n=this.$stream,r=this.$silenced,i=this._p2p,a=this._ctx,o=t.params.dynamic,s=o.checkIsMobius,u=o.getUserInfo,c=o.sendPingBack,l=o.switchAutoDef,d=o.absing,f=o.startPlayed,h=o.p2pPlatform,p=o.getOldVd,v=o.noticeDashRequest;r||(i.absing=d);this._p2p.init({p2pPlatform:h,getBufferFunc:function(){var t=n.renderer.buffer;return null!==e.curVideoEndTime_&&null!==e.curAudioEndTime_&&(t.buffered.audio.end=e.curVideoEndTime_,t.buffered.video.end=e.curAudioEndTime_),t},reBufTimeFunc:function(){return 0},canSwitchVd:function(){var t=f()&&!n.renderer.updating&&!a.isAd&&a.allowSwitchVariant;return qe.a.log("".concat(e.LOG_TAG," p2p get canSwitchVd, check=").concat(t)),t},startPlayed:f||lr.f,checkIsMobius:s||lr.f,getUserInfo:u||lr.f,sendPingBack:c||lr.f,switchAutoDef:l||lr.f,getOldVd:p||lr.f,isAd:function(){return!!a.isAd},noticeDashRequest:v})}},{key:"_bind",value:function(){var e=this._p2p;this.$krt.ctx.on(rt.a.PRE_ERROR,this.onKrlPreError_),this.$krt.ctx.on(rt.a.STATE_CHANGE,this.onKrlStateChange_),e.on("DR",this.onDataArrived_),e.on("AE",this.onAuthExpired_)}},{key:"_unbind",value:function(){var e=this._p2p;this.$krt.ctx.off(rt.a.PRE_ERROR,this.onKrlPreError_),this.$krt.ctx.off(rt.a.STATE_CHANGE,this.onKrlStateChange_),e.off("DR",this.onDataArrived_),e.off("AE",this.onAuthExpired_)}},{key:"_pushDefList",value:function(e){if(!this.$silenced){var t=e.other;this.pushDefListNeedChangeManifest&&(this.$manifestArtifact=e,this.pushDefListNeedChangeManifest=!1);var n=t.listdone,r=t.abstvid,i=t.absbid,a=t.abssuccess,o=t.absfail;null==this.tempDefList_&&(this.tempDefList_=[]);var s=this._getP2PItemData(e);this.tempDefList_.push(s),n&&this._p2p.setDefList(this._tvid,this.tempDefList_),a&&this._p2p.setDefList(r,[s]),o&&this._p2p.setDefFail(r,i)}}},{key:"_changeManifest",value:function(e){var t=this.$silenced,n=this.$stream,r=this._p2p,i=e.manifestType,a=e.levelId,o=e.metadata,s=e.other,u=e.isSwitchLevel,c=e.isSink;this.isSwitchLevel=u;var l=Number(a),d=s.tvid,f=s.aid,h=s.vidlist,p=s.feed,v=s.everList,y=s.atkList;d+="",f+="";var g=this.$manifestArtifact?this.$manifestArtifact.levelId:"null";qe.a.log("".concat(this.LOG_TAG," ").concat(xn[i]," manifest changed, tvid: ").concat(this._tvid,"->").concat(d,", bid: ").concat(g,"->").concat(l,", metadata=").concat(JSON.stringify(o))),this.baseLog_="".concat((xn[i]||"").toLowerCase(),", tvid=").concat(d,", bid=").concat(l),this.$manifestArtifact=e,this.pushDefListNeedChangeManifest=c;var m=n.playRanges;if(this.applyRanges(m,!1),this._tvid=d,n.restrictor.needSendInitSegment=!0,"false"!==p&&!1!==p){var _=[[m.start(0),m.end(m.length-1)]],b={vidlist:h,aid:f,everList:v,atkList:y},x=this._getP2PItemData(e);this.baseLog_+=", type=".concat(x.type),Object(yt.a)(b,x),r.feed(this._tvid,_,!t,b),!r.absing||t||u?r.setBitrate(this._tvid,l):r.setBitrate(this._tvid,r.ABS_LEVEL_ID),u||t||r.seek(this._tvid,m.start(0))}}},{key:"_getP2PItemData",value:function(e){var t=e.manifestType,n=e.levelId,r=e.other,i={bid:n,vid:r.vid+""||"",type:"",vsize:r.vsize||0,dataFlow:null},a="manifest data, ";switch(t){case xn.HLS:var o=e.segments,s=e.accelerator;i.dataFlow={stream:o},s&&(i.dataFlow.play=s),i.type="ts",a+="type=hls, bid=".concat(n,", segments.len=").concat(o.length);break;case xn.DASH_VP9:case xn.DASH_AV1:var u=e.tracks,c=e.accelerator;if(c)i.dataFlow={play:c},i.type=t==xn.JDASH?"m4s":Pc;else{var l=u.video,d=u.audio,f=d.segments[d.segments.length-1],h=l.segments[l.segments.length-1];i.dataFlow={audio:{duration:f.startTime+f.duration,init:d.initSegment,segments:d.segments},video:{duration:h.startTime+h.duration,init:l.initSegment,segments:l.segments}},i.type=t==xn.JDASH?"m4s":Pc,a="type=".concat(i.type,", bid=").concat(n,", audio.segs.len = ").concat(d.segments.length,", video.segs.len = ").concat(l.segments.length)}break;case xn.JDASH:var p=e,v=p.source;v.drm=p.other.drm,i.dataFlow=v,i.type="m4s",a="type=".concat(i.type,", bid=").concat(n)}return qe.a.log("".concat(this.LOG_TAG," ").concat(a)),i}},{key:"_constructSegmentsByRange",value:function(e){var t=this._timeRange;if(t){var n=function(e){for(var n=t.start(0),r=t.end(t.length-1),i=0;i<e.length;i++){var a=e[i],o=a.startTime,s=a.endTime;a.enabled=(o>=n||s>n)&&(s<=r||o<r)}};switch(e.manifestType){case xn.HLS:n(e.segments);break;case xn.DASH_VP9:case xn.DASH_AV1:if(!e.isSink){var r=e.tracks,i=r.video,a=r.audio;n(i.segments),n(a.segments)}case xn.JDASH:}}}},{key:"_pumpLoader",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(!n||Object(dt.c)(n)||!Object(dt.c)(r)&&null!=r||null==i||i.expectingBuffer!==undefined&&"boolean"!=typeof i.expectingBuffer||!1===i.expectingBuffer||this.eof||this.$silenced||this.$error&&0===this.buffer.len||this.$error&&(this.$error.code===Ft.a.DATA_P2P_DASH_BYTES_LENGTH||this.$error.code===Ft.a.MUX_M4S_FTYP_INVALID))){var a=this._p2p.error;if(a)this.$throwError(a);else{var o=!1;o=e.restrictor.needSendInitSegment&&n.manifestType!==xn.HLS?this._readInitSegment():this._readData(),this.noticeDataPump(o)}}}},{key:"_readInitSegment",value:function(){var e=this.$stream,t=!1;if(!this.$manifestArtifact)return t;var n=this.$manifestArtifact,r=n.manifestType,i=n.metadata,a=i.hasVideo,o=i.hasAudio,s=null,u=null,c=[],l=this.$manifestArtifact,d=null,f=null;switch(r){case xn.JDASH:d=l.tracks.video,f=l.tracks.audio,d&&((s=new ft.a(1)).bytesArray=[d.initSegment],s.container="video/mp4",s.codec=d.codec,c.push(s)),f&&((u=new ft.a(2)).bytesArray=[f.initSegment],u.container="audio/mp4",u.codec=f.codec,c.push(u));break;case xn.DASH_VP9:case xn.DASH_AV1:var h=this._p2p.read(this._tvid,!0);if(h){var p=h.video?h.video.data:null,v=h.audio?h.audio.data:null;(p||v)&&(d=l.tracks.video,f=l.tracks.audio,d&&p&&((s=new ft.a(1)).bytesArray=[p],s.container=d.mimeType,s.codec=d.codec,c.push(s)),f&&v&&((u=new ft.a(2)).bytesArray=[v],u.container=f.mimeType,u.codec=f.codec,c.push(u)))}}return(a&&o&&s&&u||a&&s||o&&u)&&(e.restrictor.needSendInitSegment=!1,t=!0,qe.a.log("".concat(this.LOG_TAG," read initSegment, length=").concat(c.length)),this.$provideArtefact({segments:c})),t}},{key:"_readData",value:function(){var e=this._p2p.read(this._tvid,!1),t=!1;if(e&&!Object(dt.c)(e)){this.p2pSeekNodata=!1;var n=e.type,r=this.$manifestArtifact.manifestType;"ts"==(n=n.toLowerCase())&&r==xn.HLS&&(t=this._parseHLS(this.$manifestArtifact.segments,e)),("m4s"==n&&r==xn.JDASH||n==Pc&&(r==xn.DASH_VP9||r==xn.DASH_AV1))&&(t=this._parseDash(this.$manifestArtifact.tracks,e))}else if(this.$stream instanceof cr&&null===e&&!this.isSwitchLevel&&this.p2pSeekNodata){var i=this.$stream,a=i.renderer,o=i.currentTime;a.$withinBuffer(o)||(this._readNullCount+=1,this._readNullCount>=this.READNULL_MAX_COUNT&&(this.$stream.clearBuffers({clearVideoCache:!0,rendererMayKeepInit:!0,muxKeepMeta:!0}),qe.a.log("clearBuffers,p2pResult = ".concat(e,", currentTime = ").concat(o)),this._readNullCount=0))}return t}},{key:"_parseHLS",value:function(e,t){var n=e,r=t.bid,i=t.loadDone,a=t.stream,o=null,s=!1;if(a){var u=a.index,c=a.data,l=a.chunkEOF,d=a.spos,f=n[u],h=r||f.levelId;if(this._eof=wc(n,u,l),this._eod=i,c){var p=c.byteLength;qe.a.log("read hls, done=".concat(l,", uid=").concat(h,"-").concat(f.fragIdx,"-").concat(f.idx,", startByte=").concat(f.startByte,", endByte=").concat(f.endByte,", total=").concat(f.endByte-f.startByte,", byteOffset=").concat(d,", data.byteLength=").concat(p,", startTime=").concat(f.startTime,", endTime=").concat(f.startTime+f.duration,", eof=").concat(this._eof,", eod=").concat(this._eod)),o={type:xn.HLS,data:c,done:l,meta:{uid:"".concat(h,"-").concat(f.fragIdx,"-").concat(f.idx," "),level:h,fragIdx:f.fragIdx,segIdx:f.idx,fragKey:f.fragKey,byteOffset:d}}}}return o&&(s=!0,this.$provideArtefact(o)),s}},{key:"_parseDash",value:function(e,t){var n,r,i,a,o=this,s=t.bid,u=t.loadDone,c=t.video,l=t.audio,d=e.video?e.video.segments:null,f=e.audio?e.audio.segments:null,h="",p=[],v=null,y=!!f&&f.length>0,g=!!d&&d.length>0,m=!1,_=this.$manifestArtifact.manifestType;return d||f?([{type:"video",result:c,segments:d},{type:"audio",result:l,segments:f}].filter((function(e){var t=e.result;return!(!t||!t.data)})).forEach((function(e){var n=e.type,r=e.result,u=e.segments,c=r.index,l=u[c],d=l.endByte-l.startByte,f="video"===n?1:2,y="".concat(s,"-").concat(l.fragIdx,"-").concat(l.idx);if("m4s"!==t.type&&_!==xn.JDASH&&r.data.length!==d&&0!==d)v=!0,i=Nt.a.LOADER,a=Ft.a.DATA_P2P_DASH_BYTES_LENGTH,h+="\n".concat(n," byteLength error, p2p=").concat(r.data.length,", manifest=").concat(d,", uid=").concat(y);else if("m4s"!==t.type||function(e,t){var n=!0,r=1===t?[0,0,0,36,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,97,118,99,49,99,109,102,115]:[0,0,0,32,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,99,109,102,115],i=r.length;if(e.length<i)n=!1;else for(var a=0;a<i;a++)if(r[a]!==e[a]){if(28===a&&104===e[a])continue;n=!1;break}return n}(r.data,f)){var g=new ht.a(f);g.bytesArray=[r.data],g.startTime=l.startTime||0,g.duration=l.duration||0,p.push(g),h+="\nreceived ".concat(n," ").concat(c," segment, uid=").concat(y,", startTime=").concat(l.startTime,", duration=").concat(l.duration),/firefox/gi.test(navigator.userAgent)||(h+=", crc32=".concat(Jt($n(g.bytesArray[0]).toString()))),1===f?(o.lastReadMainSegment_=l,o.curVideoEndTime_=l.endTime):o.curAudioEndTime_=l.endTime}else{v=!0,i=Nt.a.LOADER,a=Ft.a.MUX_M4S_FTYP_INVALID;var m="Encounter invalid m4s ftyp, startByte: ".concat(l.startByte," endByte: ").concat(l.endByte,", data(").concat(r.data.subarray(0,100),")");qe.a.error(m)}})),n=!y||wc(f,l.index,!!l.data||l.chunkEOF),r=!g||wc(d,c.index,!!c.data||c.chunkEOF),this._eof=r&&n,this._eod=u,v&&this.$throwError(new Mt.a(Bt.a.CRITICAL,i,a,"")),p.length>0&&(m=!0,qe.a.log("".concat(this.LOG_TAG," read data, ").concat(this.baseLog_,", eof=").concat(this._eof,", eod=").concat(this._eod,", ").concat(h)),this.$provideArtefact({segments:p})),m):m}}]),n}(ct);function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}Tc([nt.c],Ec.prototype,"fragments",null),Tc([nt.c],Ec.prototype,"p2pVersion",null),Tc([nt.c],Ec.prototype,"setDefFail",null),Tc([nt.c],Ec.prototype,"findPieceAt",null);var Ic=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Dc=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Lc=function(e){Ye()(n,e);var t=Ac(n);function n(e){var r;Ue()(this,n);var i=e.manifestType,a=Dc(e,["manifestType"]);return(r=t.call(this,a)).$ARTEFACT_ACTION=it.a.DEPOSIT_MANIFEST,r.seekable_=!0,r.manifestType=i,r}return He()(n,[{key:"currentManifestType",get:function(){var e=this.manifestType;return e===undefined||null===e?null:e}},{key:"dynamicStuckMonitorPeriod",get:function(){this.currentManifestType;return this.$krt.conf.fpsStuckMonitoringPeriod}},{key:"seekable",get:function(){return this.seekable_},set:function(e){this.seekable_=e}}]),n}(at.a);Ic([nt.c],Lc.prototype,"currentManifestType",null);var Oc=He()((function sh(){Ue()(this,sh),this.hasAudio=!1,this.hasVideo=!1}));function Rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Cc=function(e){Ye()(n,e);var t=Rc(n);function n(e){var r;return Ue()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.seekable=!0,r.mediumStartByte=null,r.mediumEndByte=null,r.uri=null,r.segments=[],r.header=null,r.dispatch=null,r.gas=null,r.loadstart=!1,r.offset=0,r.key=vt.a.create(),r.filename=null,r.type=e,r}return He()(n)}(function(){function e(){Ue()(this,e),this.idx=null,this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.segments=[]}return He()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}},{key:"totalByte",get:function(){return this.endByte-this.startByte}}]),e}());n(779);function Mc(e,t){var n=new DOMParser,r=null,i=null;try{i=n.parseFromString(e.trim(),"text/xml")}catch(a){throw"XML DOMParser parseFromString error: ".concat(a.message)}return i&&i.documentElement.tagName==t&&(r=i.documentElement),r&&r.getElementsByTagName("parsererror").length>0?null:r}function Bc(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,i=null,a=e.getAttribute(t);return null!=a&&(i=n(a)),null==i?r:i}function Nc(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function Fc(e,t){var n=qc(e,t);return 1!=n.length?null:n[0]}function qc(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function jc(e,t){return Array.from(e.childNodes).filter((function(e){return e.nodeType===t}))}var Uc=n(129),Vc=n.n(Uc),Hc=Vc.a.mark(Wc);function zc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wc(e){var t,n,r,i,a,o;return Vc.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=-1,n=undefined,r=undefined,i=zc(e),s.prev=4,i.s();case 6:if((a=i.n()).done){s.next=16;break}if(o=a.value,!(t>=0)){s.next=11;break}return s.next=11,{i:t,item:r,prev:n,next:o};case 11:t++,n=r,r=o;case 14:s.next=6;break;case 16:s.next=21;break;case 18:s.prev=18,s.t0=s["catch"](4),i.e(s.t0);case 21:return s.prev=21,i.f(),s.finish(21);case 24:if(-1==t){s.next=27;break}return s.next=27,{i:t,prev:n,item:r,next:undefined};case 27:case"end":return s.stop()}}),Hc,null,[[4,18,21,24]])}n(408);function Kc(e){return null!=e}function $c(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return qe.a.warn("Invalid duration string: ".concat(e)),null;var n=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(n)?n:null}function Yc(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=Number(t[1]);if(!isFinite(n))return null;var r=Number(t[2]);return isFinite(r)?{start:n,end:r}:null}function Qc(e){var t,n;return n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(n)?null:n}function Jc(e){var t=Number(e);return t%1==0&&t>0?t:null}function Xc(e){var t=Number(e);return t%1==0&&t>=0?t:null}function Zc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tl(e,t){return e.filter((function(e){return e.contentType==t}))}function nl(e,t){var n,r,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(e||t)if(e&&t){var a,o=Zc(e.streams);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=Zc(t.streams);try{for(c.s();!(s=c.n()).done;){var l=s.value;n=(l.bandwidth||0)+(u.bandwidth||0),r={language:e.language,primary:e.main||t.main,audio:u,video:l,bandwidth:n},i.push(r)}}catch(th){c.e(th)}finally{c.f()}}}catch(th){o.e(th)}finally{o.f()}}else{var d,f=e||t,h=Zc(f.streams);try{for(h.s();!(d=h.n()).done;){var p=d.value;n=p.bandwidth||0,r={language:f.language||"und",primary:f.main,audio:e?p:null,video:t?p:null,bandwidth:n},i.push(r)}}catch(th){h.e(th)}finally{h.f()}}}function rl(e,t){e.period=t,e.period.id||(qe.a.log("No Period ID given for Period with start time ".concat(t.start,",  Assigning a default")),e.period.id="__qvs_period_"+t.start);var n=qc(t.node,"AdaptationSet").map((function(t){return function(e,t){var n,r,i,a=t.getAttribute("id"),o=t.getAttribute("contentType")||"",s=t.getAttribute("segmentAlignment"),u=t.getAttribute("lang")||"und",c=qc(t,"Representation"),l="text"===o;"video"===o&&(n=Bc(t,"width",Xc),r=Bc(t,"height",Xc),i=Bc(t,"frameRate",Qc));e.adaptationSet={id:a,contentType:o,segmentAlignment:s,language:u,width:n,height:r,frameRate:i};var d=c.map((function(t){return function(e,t,n){var r,i=e.adaptationSet,a=i.contentType,o=t.getAttribute("id"),s=t.getAttribute("mimeType")||"",u=t.getAttribute("codecs"),c=Bc(t,"bandwidth",Jc)||0,l=Fc(t,"SegmentBase"),d=Fc(t,"SegmentList"),f=Fc(t,"SegmentTemplate"),h=qc(t,"BaseURL").map(Nc),p={contentType:a,id:o,mimeType:s,codecs:u,bandwidth:c,baseUris:h,segmentBase:l,segmentList:d,segmentTemplate:f};"audio"===a&&(p.audioSamplingRate=Xc(t.getAttribute("audioSamplingRate")));switch(a){case"video":p.width=Bc(t,"width",Xc),p.height=Bc(t,"height",Xc),p.frameRate=Bc(t,"frameRate",Qc);break;case"audio":p.audioSamplingRate=Xc(t.getAttribute("audioSamplingRate"))}if(e.representation=p,!function(e){var t=0;if(t+=e.segmentBase?1:0,t+=e.segmentList?1:0,0==(t+=e.segmentTemplate?1:0))return qe.a.warn("Representation does not contain a segment information source: the Representation must contain one of SegmentBase, SegmentList"),!1;1!=t&&(qe.a.warn("Representation ".concat(e.id," contains multiple segment information sources: the Representation should only contain one of SegmentBase,SegmentList, or SegmentTemplate.")),e.segmentBase?(qe.a.log("Using SegmentBase by default."),e.segmentList=null,e.segmentTemplate=null):(qe.a.log("Using SegmentList by default."),e.segmentTemplate=null));return!0}(p))return qe.a.warn("Skipping Representation",p),null;p.segmentList?r=function(e,t){var n=e.representation,r=n.contentType,i=Fc(t,"Initialization"),a=qc(t,"SegmentURL"),o=Xc(t.getAttribute("startNumber")||""),s=NaN;if("video"===r)s=1e3;else{if("audio"!==r)throw"mpd unknown ".concat(r);s=n.audioSamplingRate}var u={range:Bc(i,"range",Yc,{start:0,end:null}),url:Bc(i,"sourceURL",(function(e){return e}))},c=a.map((function(t,n){t.getAttribute("indexRange")&&!e.indexRangeWarningGiven&&(e.indexRangeWarningGiven=!0);var r=Xc(Bc(t,"t",Xc));0===n&&(r=0);var i=Xc(Bc(t,"d",Xc)),a=Bc(t,"media",(function(e){return e}));return{startTime:r,duration:i,range:Bc(t,"mediaRange",Yc,{start:0,end:null}),url:a}}));c.length>1&&(c[0].duration=c[1].startTime);0==o&&(qe.a.warn("SegmentList@startNumber must be > 0"),o=1);return{startNumber:o,timescale:s,initUri:u,mediaUris:c}}(e,p.segmentList):p.segmentBase||p.segmentTemplate?qe.a.error("mpd parser still not support parse segmentBase or segmentTemplate"):qe.a.error("Must have Segment* with non-text streams.");return Object.assign({id:i.id,originalId:p.id,segmentIndex:null,mimeType:p.mimeType,codecs:p.codecs,frameRate:p.frameRate||i.frameRate,bandwidth:p.bandwidth,width:p.width||i.width,height:p.height||i.height,language:n,type:a,channelsCount:p.numChannels},r)}(e,t,u)})).filter((function(e){return!!e}));if(0==d.length){if(l)return null;throw new Error("DASH_EMPTY_ADAPTATION_SET")}if(!e.adaptationSet.contentType||"application"==e.adaptationSet.contentType){var f=d[0].mimeType;d[0].codecs;e.adaptationSet.contentType=function(e){return e.split("/")[0]}(f);var h,p=Zc(d);try{for(p.s();!(h=p.n()).done;){h.value.type=e.adaptationSet.contentType}}catch(th){p.e(th)}finally{p.f()}}var v=c.map((function(e){return e.getAttribute("id")})).filter(Kc);return{id:e.adaptationSet.id,contentType:e.adaptationSet.contentType,language:u,streams:d,representationIds:v}}(e,t)})).filter(Kc),r=tl(n,"video"),i=tl(n,"audio");if(!r.length&&!i.length)throw"DASH_EMPTY_PERIOD";i.length||(i=[null]),r.length||(r=[null]);var a,o=[],s=Zc(i);try{for(s.s();!(a=s.n()).done;){var u,c=a.value,l=Zc(r);try{for(l.s();!(u=l.n()).done;){nl(c,u.value,o)}}catch(th){l.e(th)}finally{l.f()}}}catch(th){s.e(th)}finally{s.f()}return{startTime:t.start,variants:o}}var il={parseClipList:function(e){var t=Fc(e,"clip_list"),n={},r={BaseURL:"baseUrl",remote_path:"url",start_ts_in_ms:{name:"startTime",parser:Xc},duration_in_ms:{name:"duration",parser:Xc},start_pos:{name:"startByte",parser:Xc},end_pos:{name:"endByte",parser:Xc},type:"type",size:{name:"size",parser:Xc}};return t&&qc(t,"clip").map((function(e){var t={type:null};jc(e,Node.ELEMENT_NODE).map((function(e){var n=r[e.tagName];if(n){var i="string"==typeof n?n:n.name,a=Nc(e);n.parser&&(a=n.parser(a)),t[i]=a}})),Array.isArray(n[t.type])||(n[t.type]=[]),n[t.type].push(t)})),n},parseDuration:$c,parsePeriods:function(e,t){var n,r=[],i=qc(t,"Period"),a=e.presentationDuration,o=0,s=Zc(Wc(i));try{for(s.s();!(n=s.n()).done;){var u=n.value,c=u.i,l=u.item,d=u.next,f=l.getAttribute("id"),h=Bc(l,"start",$c,o),p=Bc(l,"duration",$c),v=null;if(d){var y=Bc(d,"start",$c);null!=y&&(v=y-h)}else null!=a&&(v=a-h);v&&p&&Math.abs(v-p)>.06666666666666667&&qe.a.warn("There is a gap/overlap between mpd Periods"),null==v&&(v=p);var g=rl(e,{id:f,start:h,duration:v,node:l,isLastPeriod:null==v||!d});if(r.push(g),null==v){d&&qe.a.warn("Skipping Period",c+1,"and any subsequent Periods:","Period",c+1,"does not have a valid start time.",d),o=null;break}o=h+v}}catch(th){s.e(th)}finally{s.f()}return null!=a?(o!=a&&qe.a.warn("@mediaPresentationDuration does not match the total duration of all Periods."),{periods:r,duration:a,durationDerivedFromPeriods:!1}):{periods:r,duration:o,durationDerivedFromPeriods:!0}}},al=n(664);function ol(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ul(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var cl=function(e){Ye()(n,e);var t=ul(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:al,watch:["rawness","error"],manifestType:xn.UNKNOWN}))).$TAG="DashManifest",r._netProxy=new mt.a,r._netProxy=new mt.a,r}return He()(n,[{key:"onStoreStateChanged",value:function(e){var t=this;if(!Object(dt.c)(e.rawness)){var n=this.$stream.renderer,r=e.rawness.mpd,i=e.rawness.bid,a=e.rawness.other,o=(e.rawness.type,e.rawness.drm),s=Object(dt.j)(i)?parseInt(i,10):i;if(this.manifestType=xn.DASH_AV1,Object(dt.j)(r)){var u;if((u=this.generateArtefact_(r,s,a)).isSwitchLevel=!!e.rawness.isSwitchLevel,u.tracks.video){var c=u.tracks.video.codec;if(/vp09/gi.test(c))this.manifestType=xn.DASH_VP9;else{if(!/av01/gi.test(c))return void qe.a.error("".concat(this.LOG_TAG," unsupported dash manifest codec ").concat(c));this.manifestType=xn.DASH_AV1}}n&&o&&(n.drmInfo=o),this.$provideArtefact(u)}else if(Object(dt.h)(r)){var l=r.playlist,d=new Oc,f=l.accelerator,h=void 0===f?{}:f,p=l.mk,v=void 0===p?{}:p,y=l.ml,g=void 0===y?"":y,m=l.duration,_=[],b=[];if(h.av1){Object.keys(h.av1).forEach((function(e){"ad"!==e&&"ah"!==e||(d.hasAudio=!0),"vd"!==e&&"vh"!==e||(d.hasVideo=!0);var n=h.av1[e];if(n.ourl=t.urlccm(n.ourl),n.l=t.urlccm(n.l),n.idxs)for(var r=0;r<n.idxs;r++){var i=new En(xn.DASH_AV1);i.startByte=0,i.endByte=0,"ad"===e&&b.push(i),"vd"===e&&_.push(i)}}));var x={levelId:s,other:a,duration:m,manifestType:this.manifestType,isSwitchLevel:!1,accelerator:h,metadata:d,tracks:{audio:{mimeType:"audio/mp4",codec:"mp4a.40.2",segments:b},video:{mimeType:"video/mp4",codec:"av01.0.08M.08",segments:_}},isSink:!0};this.$provideArtefact(x)}g&&this.getMPD(g,s,a,v)}else this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_MPD));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n,r){var i=this;try{var a=function(){var a,o=vt.a.create(),s=new Oc,u={},c=Mc(e,"MPD"),l=Bc(c,"mediaPresentationDuration",il.parseDuration),d={presentationDuration:l},f=xn.DASH_AV1,h=ol(il.parsePeriods(d,c).periods);try{var p=function(){var e=a.value.variants,n=(void 0===e?[]:e)[0],c=!!n.video,d=!!n.audio;s.hasAudio=d,s.hasVideo=c;var h=[];d&&h.push("audio"),c&&h.push("video"),h.forEach((function(e){var a={},s=n[e],c=s.initUri,d=s.codecs,h=s.mimeType,p=s.timescale,v=new En(f);if(r){var y=i.getUrl(c.url,r);c.url=y.url,v.filename=y.filename}v.uri=new bt.a(c.url),Object(dt.e)()&&v.uri.setScheme("https"),v.startByte=0,v.endByte=0,a.codec=d,a.mimeType=h,a.initSegment=v,a.segments=[],a.type=e,a.duration=l,a.fragments=[];for(var g=0,m=s.mediaUris.length,_=null,b=null,x=0;x<m;x++){var k=x===m-1,w=s.mediaUris[x],S=w.url,T=w.startTime,P=w.duration,E=w.range,A=S.split("?")[0];if(A!==_){if(b&&a.fragments.push(b),g=0,_=A,(b=new Cc(f)).idx=a.fragments.length+1,b.levelId=t,r){var I=i.getUrl(S,r);S=I.url,b.filename=I.filename}b.uri=new bt.a(S),Object(dt.e)()&&b.uri.setScheme("https"),b.startTime=T,b.duration=P,b.mediumStartByte=E.start,b.mediumEndByte=E.end+1,b.startByte=0,b.endByte=b.mediumEndByte-b.mediumStartByte}else g++,b.duration+=P,b.mediumEndByte+=E.end,k&&a.fragments.push(b);var D=E.start,L=E.end+1,O=D-b.mediumStartByte,R=L-b.mediumStartByte,C=new bt.a(S);T=w.startTime/p,P=w.duration/p,k&&(P=a.duration-T),C.query.update("start",O+""),C.query.update("end",R+""),Object(dt.e)()&&C.setScheme("https");var M=new En(f);M.uri=C,M.idx=g,M.fragIdx=b.idx,M.filename=b.filename,M.startTime=T,M.duration=P,M.startByte=O,M.endByte=R,M.poolId=o+"-"+b.idx+"-"+g,M.levelId=t,a.segments.push(M),b.segments.push(M)}u[e]=a}))};for(h.s();!(a=h.n()).done;)p()}catch(th){h.e(th)}finally{h.f()}if(!Object(dt.c)(u))return{v:{duration:l,manifestType:f,isSwitchLevel:!1,levelId:t,metadata:s,tracks:u,other:n}}}();if("object"===tt()(a))return a.v}catch(nh){qe.a.error("".concat(this.LOG_TAG," mpd parsed fail: ").concat(nh.stack," - ").concat(nh.message)),this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_MPD_XML))}return null}},{key:"urlccm",value:function(e){var t=this.$krt.params.dynamic;Object(dt.e)()&&/^http:/i.test(e)&&(e=e.replace(/^http:/i,"https:"));var n=e.split("?");return 2===n.length&&(n[1]=t.ccm(n[1]),e=n.join("?")),e}},{key:"getMPD",value:function(e,t,n,r){Object(dt.e)()&&/^http:/i.test(e)&&(e=e.replace(/^http:/i,"https:"));var i=this,a=Object(mt.d)([e],Object(yt.a)(Object(mt.b)(),{timeout:5e3}));a.responseType="text",a.callbacks=Object(yt.a)(a.callbacks,{onSuccess:function(e){qe.a.log("".concat(this.LOG_TAG," getMPD done"));var a=Object.assign({},n);if(e.data){a&&(a.fromlist=!0,a.listdone=!0);var o=i.generateArtefact_(e.data,t,a,r);qe.a.log("".concat(this.LOG_TAG," parse mpd done")),i.$provideArtefact(o)}},onError:function(e){qe.a.error("".concat(i.LOG_TAG," get MPD error, http-status=").concat(e.status,", ").concat(e.url)),this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_GET_MPD_XML))},onTimeout:function(e,t,n){qe.a.error("".concat(i.LOG_TAG," get MPD timeout, ").concat(n.url)),this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_GET_MPD_XML))},onAbort:function(){},onComplete:function(){}}),this._netProxy.request(_t.a.MANIFEST,a)}},{key:"getUrl",value:function(e,t){if(!k.K.query(e)){var n=k.K.filename(e),r=null;return Object.keys(t).forEach((function(e){-1!==e.indexOf(n)&&(r=t[e])})),{url:e=r?e+"?"+r:e,filename:n}}}}]),n}(Lc),ll=n(665);function dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var fl=function(e){Ye()(n,e);var t=dl(n);function n(e){return Ue()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:ll,watch:["rawness","error"],manifestType:xn.FLV}))}return He()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(dt.c)(e.rawness)){var t=e.rawness.fs,n=e.rawness.bid,r=Object(dt.j)(n)?parseInt(n,10):n,i=e.rawness.other;if(Array.isArray(t)||i.done){var a=this.generateArtefact_(t,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,a.other=i,this.$provideArtefact(a)}else{try{qe.a.error(JSON.stringify(e.rawness))}catch(nh){}this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_FLV))}this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t){var n=new Oc;n.hasAudio=!0,n.hasVideo=!0;var r={manifestType:xn.FLV,isSwitchLevel:!1,levelId:t,metadata:n,fragments:[],segments:[],other:{}};if(e&&e.length>0)for(var i=e.length,a=null,o=0,s=0;s<i;++s){var u=e[s];(a=new Cc(xn.FLV)).idx=s,a.startTime=o,a.duration=u.duration,a.dispatch=u.dispatched||null,o+=u.duration,a.uri=new bt.a(u.url),a.levelId=t,u.gas&&(a.gas=u.gas),Object(dt.e)()&&a.uri.setScheme("https");var c=new En(xn.FLV);c.startByte=0,c.endByte=9e3,c.uri=new bt.a(u.url),c.fragIdx=s,a.header=c,c.levelId=t,Object(dt.e)()&&c.uri.setScheme("https"),r.fragments.push(a)}return r}}]),n}(Lc),hl=n(666);function pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var vl=function(e){Ye()(n,e);var t=pl(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:hl,watch:["rawness","error"],manifestType:xn.HLS}))).$TAG="HlsManifest",r}return He()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(dt.c)(e.rawness)){var t=e.rawness.m3u8,n=e.rawness.bid,r=e.rawness.other,i=Object(dt.j)(n)?parseInt(n,10):n;if(this.valid_(t)){var a=this.generateArtefact_(t,i,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(a)}else this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_M3U8));this.$consumeArtefact("rawness")}}},{key:"valid_",value:function(e){return Object(dt.j)(e)||Object(k.y)(e)}},{key:"generateArtefact_",value:function(e,t,n){var r,i,a=this,o=this.$krt.params.dynamic,s=vt.a.create(),u=new Oc;u.hasAudio=!0,u.hasVideo=!0;var c=Object(k.y)(e)?e:Object(k.F)(e),l=c.durations,d=c.urls,f=c.sds,h=c.starts,p=c.ends,v=c.qde,y=c.qdp,g=c.accelerator,m={},_=d.length,b=Object(k.w)(f)&&f.length>0,x={manifestType:xn.HLS,isSwitchLevel:!1,levelId:t,metadata:u,fragments:[],segments:[],isAccurateTimestamp:b,accelerator:g,other:n};if(_>0){var w,S,T,P,E,A=null,I=0,D=0,L=0;if(b&&(f[0]=0),(null===(r=null==g?void 0:g.ts)||void 0===r?void 0:r.l)&&!(null===(i=null==g?void 0:g.ts)||void 0===i?void 0:i.isde)){var O=g.ts.l.split("?");O[1]=o.ccm(O[1]),g.ts.l=O.join("?"),g.ts.isde=!0,A=k.K.filename(O[0])}for(var R=function(e){var n=e===_-1,r=mt.f+d[e],i=new bt.a(r),u=l[e],c=h[e],O=p[e],R=void 0;if(n&&0===u&&(u=.04),!T||T!==i.path){if(T&&(R=w),(w=new Cc(xn.HLS)).idx=I,w.filename=k.K.filename(i.path,!0),null!==A&&null===w.dispatch&&new RegExp(A).test(i.path)){var C=g.ts;Object(dt.e)()&&/^http:/i.test(C.l)&&(C.l=C.l.replace(/^http:/i,"https:")),w.dispatch=C}D=0,x.fragments.push(w),I+=1}var M=new En(xn.HLS);M.uri=i,M.idx=D,M.startByte=c,M.endByte=O,M.poolId=s+"-"+w.idx+"-"+D,M.levelId=t,M.duration=u,M.fragIdx=w.idx,M.fragKey=w.key,M.filename=w.filename,M.flattenIdx=x.segments.length,M.__qde=v,M.__qdp=function(){var e="",t=M.filename;return v?(m[t]||(m[t]=o.ccm(y[t])),e=m[t]):e=y[t],i.query.add(e.replace(/^&/i,"")),i.toString()},D+=1,b?(L=f[e]/1e3,E>-1&&L<E&&(qe.a.log("".concat(a.LOG_TAG," manifest correct sd , ").concat(L," -> ").concat(E+P.duration)),L=E+P.duration),M.startTime=L,P&&(P.duration=L-P.startTime),P=M,E=L):(M.startTime=L,L+=u),x.segments.push(M),w.segments.push(M),R&&a.resetFragInfo_(R,S,t),n&&a.resetFragInfo_(w,r,t),T=i.path,S=r},C=0;C<_;C++)R(C)}return x}},{key:"resetFragInfo_",value:function(e,t,n){var r=e.segments[0],i=e.segments[e.segments.length-1];e.startTime=r.startTime,e.duration=i.startTime+i.duration-e.startTime,e.levelId=n;var a=r.startByte,o=i.endByte;e.uri=new bt.a(t),e.uri.query.get("start")&&e.uri.query.update("start","".concat(a)),e.uri.query.get("contentlength")&&e.uri.query.update("contentlength","".concat(o-a)),e.uri.query.get("sd")&&e.uri.query.update("sd","".concat(1e3*r.startTime))}}]),n}(Lc);function yl(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function gl(e,t){var n=Xt(e);t=t==undefined||t;var r=btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")}function ml(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}var _l=n(667);function bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var xl=function(e){Ye()(n,e);var t=bl(n);function n(e){return Ue()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:_l,watch:["rawness","error"],manifestType:xn.JDASH}))}return He()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(dt.c)(e.rawness)){var t=this.$stream.renderer,n=e.rawness,r=n.m3u8,i=n.drm,a=n.bid,o=n.other,s=Object(k.y)(r)?r:Object(k.E)(r);if(s){var u=Object(dt.j)(a)?parseInt(a,10):a,c=this.generateArtefact_(s,u,o);c.isSwitchLevel=!!e.rawness.isSwitchLevel,t&&(t.drmInfo=i),this.$provideArtefact(c)}else this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_JDASH));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){var r=vt.a.create(),i=new Oc,a={};for(var o in e)if("object"===tt()(e[o])&&Array.isArray(e[o].type)&&/(video|audio)/gi.test(e[o].type.join(""))){var s=e[o],u=s.files.length,c={type:Array.isArray(s.type)?s.type[0]:s.type,duration:parseInt(s.duration_second,10),codec:s.codec,initDataType:s.encryption_scheme,initSegment:yl(s.codec_init),segments:[]};u>0&&(s.files[0].seekable.hasOwnProperty("pos")?this.parseOldData_(c.segments,s.files,c.duration,r,t,s.qde,s.qdp):s.files[0].seekable.hasOwnProperty("pos_start")&&this.parseNewData_(c.segments,s.files,r,t,s.qde,s.qdp)),a[c.type]=c,"audio"===c.type?i.hasAudio=!0:"video"===c.type&&(i.hasVideo=!0)}return Object(dt.c)(a)?null:{manifestType:xn.JDASH,isSwitchLevel:!1,levelId:t,metadata:i,tracks:a,other:n,source:e}}},{key:"parseOldData_",value:function(e,t,n,r,i,a,o){for(var s,u={},c=0,l=t.length;c<l;c++){var d=t[c],f=d.size,h=d.start_second,p=c===l-1;s=this.normalizeUrl_(d,u,a,o);for(var v,y,g,m=0;m<d.seekable.time.length;m++)y=e[e.length-1],g=d.seekable.pos[m+1],(v=new En(xn.JDASH)).uri=new bt.a(s),Object(dt.e)()&&v.uri.setScheme("https"),v.idx=m,v.poolId=r+"-"+v.idx,v.levelId=i,v.startTime=h+d.seekable.time[m],y&&(y.duration=v.startTime-y.startTime,p&&"number"!=typeof g&&(v.duration=n-v.startTime)),v.startByte=d.seekable.pos[m],v.endByte="number"==typeof g?g:f,e.push(v)}}},{key:"parseNewData_",value:function(e,t,n,r,i,a){for(var o,s={},u=0,c=t.length;u<c;u++){var l=t[u],d=this.normalizeUrl_(l,s,i,a);(o=new En(xn.JDASH)).uri=new bt.a(d),Object(dt.e)()&&o.uri.setScheme("https"),o.idx=u,o.poolId=n+"-"+o.idx,o.levelId=r,o.duration=l.seekable.time_end-l.seekable.time_start,o.startTime=l.start_second,o.startByte=l.seekable.pos_start,o.endByte=l.seekable.pos_end,e.push(o)}}},{key:"normalizeUrl_",value:function(e,t,n,r){var i=this.$krt.params.dynamic,a="",o=k.K.filename(e.file_name);n?(t[o]||(t[o]=i.ccm(r[o])),a=t[o]):a=r[o];var s=[e.file_name.split("?")[0],a].join("?");return e.file_name=s,s}}]),n}(Lc),kl=n(668);function wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Sl=function(e){Ye()(n,e);var t=wl(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:kl,watch:["rawness","error"],manifestType:xn.MP4}))).$TAG="Mp4Manifest",r}return He()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(dt.c)(e.rawness)){var t=e.rawness,n=t.src,r=t.levelId,i=t.duration,a=t.byteLength,o=t.other;if(Object(dt.j)(n)){var s=this.generateArtefact_(n,Object(dt.j)(r)?parseInt(r,10):r,i,a,o);s.isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(s)}else this.$throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.MANIFEST,Ft.a.MFT_FAILED_TO_PARSE_M3U8));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n,r,i){vt.a.create();var a=new Oc;a.hasAudio=!0,a.hasVideo=!0;var o={manifestType:xn.MP4,isSwitchLevel:!1,levelId:t,metadata:a,fragments:[],segments:[],isAccurateTimestamp:!1,other:i},s=new Cc(xn.MP4),u=new bt.a(e);u.setScheme("https"),s.idx=0,s.levelId=t,s.uri=u,s.startTime=0,s.duration=n,s.startByte=0,s.endByte=r;var c=new En(xn.MP4);return c.startByte=0,c.endByte=Math.floor(.02*s.totalByte),c.uri=new bt.a(e),c.fragIdx=s.idx,s.header=c,c.levelId=t,Object(dt.e)()&&c.uri.setScheme("https"),o.fragments.push(s),o}}]),n}(Lc),Tl=n(454),Pl=n(453),El=n(455),Al=n(628);function Il(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Dl=function(e){Ye()(n,e);var t=Il(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).variantAudioMode=!1,e.$ARTEFACT_ACTION=it.a.DEPOSIT_RENDERER,e.highResTimer=new Al.a((function(){return e.checkHighResTimeupdate_()})),e}return He()(n,[{key:"appendWindowStart",get:function(){return this.appendWindowStart_},set:function(e){this.appendWindowStart_=e}},{key:"appendWindowEnd",get:function(){return this.appendWindowEnd_},set:function(e){this.appendWindowEnd_=e}},{key:"hasOperateBufferData",get:function(){return!1}},{key:"currentTimeRange",get:function(){var e=null,t=this.buffered,n=this.currentTime;if(t)for(var r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(i<=n&&n<a){e={start:i,end:a};break}}return e}},{key:"drmInfo",set:function(e){}},{key:"bufferInfo",value:function(e,t){return{len:0,start:0,end:0}}},{key:"takeoverMediaControl",value:function(){}},{key:"releasedMediaControl",value:function(){}},{key:"$withinBuffer",value:function(e,t,n){}},{key:"$clearOperateBuffers",value:function(e){arguments.length>1&&undefined}},{key:"$clearVideoCacheBuffers",value:function(){}},{key:"$flushBuffer",value:function(e,t,n){}},{key:"$drainBuffer",value:function(e){Ke()(Ze()(n.prototype),"$drainBuffer",this).call(this,e),this.hasOperateBufferData&&this.$clearOperateBuffers(null,!!e.keepInit),!1!==e.flushMedia&&this.$flushBuffer()}},{key:"checkHighResTimeupdate_",value:function(){}}]),n}(at.a),Ll=n(221),Ol=n.n(Ll),Rl=(n(781),n(782),new Uint8Array([10,178,2,8,3,18,16,153,75,133,49,202,175,120,35,184,85,5,60,251,56,41,180,24,229,132,139,214,5,34,142,2,48,130,1,10,2,130,1,1,0,173,188,172,242,201,171,92,176,7,198,96,157,222,119,76,120,208,81,120,242,46,147,239,190,102,21,104,43,121,143,181,56,91,166,179,185,0,138,222,127,154,201,112,251,199,108,202,125,228,135,188,121,44,55,129,188,241,126,7,90,62,216,149,122,126,232,110,19,251,191,22,226,176,108,175,48,185,240,170,148,33,36,225,222,52,104,28,221,88,239,200,49,155,234,19,145,193,19,98,116,67,72,49,81,190,53,255,164,75,74,167,161,89,105,104,50,95,220,200,174,74,181,115,30,192,243,65,185,252,142,121,46,140,174,68,112,140,49,84,28,135,128,110,67,38,124,124,194,110,179,55,38,19,157,83,28,107,90,30,210,73,121,247,112,12,62,217,231,167,5,178,203,137,211,8,41,166,110,167,215,242,176,236,185,105,4,25,126,221,164,251,240,192,186,97,41,102,71,179,187,181,8,10,122,216,138,154,82,128,218,191,190,240,32,167,166,250,197,176,31,85,129,128,135,254,132,143,11,188,118,55,120,184,133,167,96,84,37,32,232,218,215,244,216,83,199,86,68,153,167,87,250,185,192,143,5,2,3,1,0,1,58,5,105,113,105,121,105,18,128,3,108,85,242,237,185,42,124,70,211,70,134,94,29,126,167,210,209,177,68,127,56,85,77,151,232,211,106,176,194,114,231,35,138,254,226,24,103,180,63,213,255,88,78,161,119,227,11,232,63,81,58,217,15,10,248,108,248,9,224,110,34,66,36,242,70,85,25,202,189,138,14,172,160,0,225,62,55,122,142,182,214,253,43,147,147,172,193,45,41,185,82,136,1,108,126,93,154,60,131,2,115,138,221,67,238,227,92,138,215,173,249,188,229,18,241,188,29,154,33,119,37,124,152,48,13,139,88,101,233,120,14,106,200,154,192,69,245,11,234,109,144,181,128,189,62,127,37,163,117,190,137,153,101,44,51,198,56,56,241,141,166,196,99,89,247,121,28,93,172,201,215,51,241,219,174,29,213,241,48,23,46,83,167,192,43,87,89,12,65,41,112,220,202,12,81,32,254,158,20,39,242,219,178,209,60,199,40,41,253,166,234,0,49,130,127,231,122,26,210,230,238,26,166,206,219,252,89,107,158,29,26,220,58,93,94,87,252,97,37,66,128,184,119,48,176,82,32,96,26,4,144,167,56,8,99,44,129,38,4,251,10,80,13,212,186,8,249,178,81,164,255,10,183,199,177,181,141,126,254,100,119,73,224,216,201,222,242,154,32,224,182,205,245,104,142,137,142,103,93,162,83,65,239,129,35,70,120,115,163,162,49,132,80,43,96,189,121,132,177,206,43,162,19,129,194,34,25,51,148,131,63,139,91,109,98,55,45,182,139,28,53,232,226,68,232,251,89,36,230,82,228,65,33,135,221,199,47,45,97,230,2,4,169,22,186,228,190,216,95,132,241,171,220,132,144,233,72,186,244,205,60,38,90,246]));function Cl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ml(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ml(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bl="<<EME>>",Nl=function(){function e(){Ue()(this,e),this.destroyed_=!1,this.sessions=[],this.licenseRequests=[],this.drmInfo=null,this.eventManager_=new pt.a}var t,n,r,i;return He()(e,[{key:"setup",value:function(e,t,n){this.runtime_=e,this.mediaElem_=t,this.sessions=[],this.licenseRequests=[],n&&this.setDrmInfo(n),this.eventManager_.on(t,"encrypted",this.onEncrypted_.bind(this))}},{key:"destroy",value:function(){this.eventManager_.removeAll(),this.reset(),this.runtime_=null,this.mediaElem_=null,this.licenseRequests=null,this.sessions=null,this.drmInfo=null,this.destroyed_=!0}},{key:"reset",value:function(){if(!this.destroyed_){var e=this.sessions,t=this.licenseRequests,n=this.eventManager_;this.mediaElem_;if(Array.isArray(e)&&e.length>0){for(var r=function(t){var r=e[t].session,i=r.sessionId;n.off(r,"message"),n.off(r,"keystatuseschange"),r.close().then((function(){}))["catch"]((function(){qe.a.warn("".concat(Bl," session ").concat(i," closed failed"))}))},i=0;i<e.length;i++)r(i);e.splice(0,e.length)}Array.isArray(t)&&t.length>0&&t.splice(0,t.length)}}},{key:"setDrmInfo",value:function(e){e?(this.drmInfo={keySystem:e.keySystem,licenseServerUri:e.keySystemServer,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null},e.pssh&&this.initDRMInfo_(yl(e.pssh))):this.drmInfo=null}},{key:"initDRMInfo_",value:function(e){var t=this;this.drmInfo;return new Promise((function(){t.onEncrypted_({initData:e,initDataType:"cenc"})}))}},{key:"onEncrypted_",value:(i=Ol()(Vc.a.mark((function a(e){var t,n,r,i,o;return Vc.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.mediaElem_,n=this.runtime_,r=new Uint8Array(e.initData),i=e.initDataType,qe.a.log("".concat(Bl," Encrypted initDataType/initData(").concat(i,"/").concat(r.length,")")),t.mediaKeys){a.next=45;break}return a.prev=5,a.next=8,this.queryMediaKeys_();case 8:o=a.sent,a.next=24;break;case 11:if(a.prev=11,a.t0=a["catch"](5),this.queryMediaKeysPromise_=null,0!==a.t0){a.next=18;break}return a.abrupt("return",n.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE)));case 18:if(1!==a.t0){a.next=22;break}return a.abrupt("return",n.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_FAILED_TO_CREATE_CDM)));case 22:return qe.a.error("".concat(Bl," queryMediaKeys unknown error: ").concat(Object(dt.i)(a.t0)?a.t0.message:a.t0||"unknown")),a.abrupt("return",n.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,Ft.a.DRM_NO_RECOGNIZED_ERROR)));case 24:return a.prev=24,a.next=27,this.setMediaKeys_(t,o);case 27:if(t.mediaKeys){a.next=30;break}throw this.setMediaKeysPromise_=null,"video.mediaKeys can't access";case 30:a.next=36;break;case 32:return a.prev=32,a.t1=a["catch"](24),qe.a.error("".concat(Bl," setMediaKeys error: ").concat(Object(dt.i)(a.t1)?a.t1.message:a.t1||"unknown")),a.abrupt("return",n.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_FAILED_TO_ATTACH_TO_VIDEO)));case 36:return a.prev=36,a.next=39,this.setServerCertificate_(o);case 39:a.next=45;break;case 41:return a.prev=41,a.t2=a["catch"](36),qe.a.warn("".concat(Bl," setServerCertificate fail: ").concat(a.t2.message)),a.abrupt("return",n.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_INVALID_SERVER_CERTIFICATE)));case 45:return a.prev=45,a.next=48,this.createSession_(t,i,r);case 48:a.next=54;break;case 50:a.prev=50,a.t3=a["catch"](45),qe.a.error("".concat(Bl," createSession unknown fail: ").concat(Object(dt.i)(a.t3)?a.t3.message:a.t3||"unknown")),n.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,Ft.a.DRM_NO_RECOGNIZED_ERROR));case 54:case"end":return a.stop()}}),a,this,[[5,11],[24,32],[36,41],[45,50]])}))),function(e){return i.apply(this,arguments)})},{key:"setServerCertificate_",value:(r=Ol()(Vc.a.mark((function o(e){var t,n,r;return Vc.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((t=this.drmInfo).keySystem===k.d.WIDEVINE&&(t.serverCertificate=Rl),!t.serverCertificate||!t.serverCertificate.length){i.next=9;break}return n=!1,this.setServerCertificatePromise_||(this.setServerCertificatePromise_=e.setServerCertificate(t.serverCertificate),n=!0),i.next=7,this.setServerCertificatePromise_;case 7:r=i.sent,n&&(r?qe.a.log("".concat(Bl," The server certificate has been set by the key system(").concat(t.keySystem,").")):qe.a.warn("".concat(Bl," The server certificate has been ignored because it's not supported by the key system(").concat(t.keySystem,").")));case 9:case"end":return i.stop()}}),o,this)}))),function(e){return r.apply(this,arguments)})},{key:"queryMediaKeys_",value:function(){var e=this.drmInfo;return this.queryMediaKeysPromise_||(this.queryMediaKeysPromise_=new Promise((function(t,n){var r=[],i='audio/mp4; codecs="mp4a.40.5"',a='video/mp4; codecs="avc1.64001f"';"undefined"==typeof MediaKeySystemAccess.prototype.getConfiguration?(qe.a.warn("Detected obsolete navigator.requestMediaKeySystem options style."),r=[{initDataType:"cenc",distinctiveIdentifier:"optional",persistentState:"optional",videoType:a,audioType:i}]):r=[{initDataTypes:["cenc"],distinctiveIdentifier:"optional",persistentState:"optional",videoCapabilities:[{contentType:a}],audioCapabilities:[{contentType:i}]}],navigator.requestMediaKeySystemAccess(e.keySystem,r).then((function(e){e.getConfiguration();return e.createMediaKeys()}),(function(e){qe.a.error("".concat(Bl," requestMediaKeySystemAccess fail: ").concat(Object(dt.i)(e)?e.message:e||"unknown")),n(0)})).then((function(e){t(e)}),(function(e){qe.a.error("".concat(Bl," createMediaKeys fail: ").concat(Object(dt.i)(e)?e.message:e||"unknown")),n(1)}))}))),this.queryMediaKeysPromise_}},{key:"setMediaKeys_",value:(n=Ol()(Vc.a.mark((function s(e,t){return Vc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setMediaKeysPromise_||(this.setMediaKeysPromise_=e.setMediaKeys(t)),n.abrupt("return",this.setMediaKeysPromise_);case 2:case"end":return n.stop()}}),s,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"createSession_",value:(t=Ol()(Vc.a.mark((function u(e,t,n){var r,i,a,o,s;return Vc.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:r=this.runtime_,i=this.sessions,a=this.eventManager_,o=0;case 2:if(!(o<i.length)){u.next=8;break}if(!ml(n,i[o].initData)){u.next=5;break}return u.abrupt("return",qe.a.log("".concat(Bl," Ignoring duplicate init data.")));case 5:++o,u.next=2;break;case 8:u.prev=8,s=e.mediaKeys.createSession(),u.next=16;break;case 12:return u.prev=12,u.t0=u["catch"](8),qe.a.error("".concat(Bl," ").concat(u.t0.message)),u.abrupt("return",r.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_FAILED_TO_CREATE_SESSION)));case 16:return i.push({initData:n,session:s,loaded:!1,oldExpiration:Infinity}),a.on(s,"message",this.onMediaKeySessionMessage_.bind(this)).on(s,"keystatuseschange",this.onMediaKeySessionStatusChange_.bind(this)),u.next=20,s.generateRequest(t,n)["catch"]((function(t){qe.a.error("".concat(Bl," Session.generateRequest fail: ").concat(Object(dt.i)(t)?t.message:t||"unknown",", mediaKeys is ").concat(e?tt()(e.mediaKeys):"placeholder")),r.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST))}));case 20:case"end":return u.stop()}}),u,this,[[8,12]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"onMediaKeySessionMessage_",value:function(e){var t=this.runtime_,n=this.drmInfo,r=this.licenseRequests,i=this.mediaElem_,a=t.conf,o=e.target,s=e.message,u=e.messageType,c=n.licenseServerUri;if(!c)return t.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,Ft.a.DRM_NO_LICENSE_SERVER_GIVEN));qe.a.log("".concat(Bl," Sending license request for session ").concat(o.sessionId," of type ").concat(u,": ").concat(c));var l=Object(mt.d)([c],Object(yt.a)(Object(mt.b)(),a.drm.retryParameters));l.method="POST",l.body=s,l.callbacks=Object(yt.a)(l.callbacks,{onSuccess:function(e){return Ol()(Vc.a.mark((function n(){var r,a,s,u;return Vc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data,a=e.status,!((s=r)&&s.byteLength>0)){n.next=16;break}return u=new Uint8Array(s),qe.a.log("".concat(Bl," License got, updating session ").concat(o.sessionId)),n.prev=5,n.next=8,o.update(u);case 8:n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](5),qe.a.error("".concat(Bl," update() failed, ").concat(n.t0.message,", video.mediaKeys is ").concat(i?tt()(i.mediaKeys):"placeholder",", ").concat(u,",")),t.throwError(new Mt.a(Mt.a.severity.RECOVERABLE,Mt.a.category.DRM,Ft.a.DRM_LICENSE_RESPONSE_REJECTED,n.t0.message));case 14:n.next=18;break;case 16:qe.a.warn("".concat(Bl," License server status: ").concat(a,", data: ").concat(s?s.byteLength:"NULL")),t.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,204===a?Ft.a.DRM_SERVER_REJECT_BY_LICENSE_SDK:Ft.a.DRM_NO_LICENSE_SERVER_RESPONSE));case 18:case"end":return n.stop()}}),n,null,[[5,10]])})))()},onError:function(){t.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,Ft.a.DRM_LICENSE_REQUEST_ERROR))},onTimeout:function(e,n){t.throwError(new Mt.a(Mt.a.severity.CRITICAL,Mt.a.category.DRM,Ft.a.DRM_LICENSE_REQUEST_TIMEOUT))},onAbort:function(){},onComplete:function(){}}),n.keySystem!==k.d.PLAYREADY&&n.keySystem!==k.d.PLAYREADY_CC||this.unpackPlayReadyRequest_(l);var d=mt.e.request(_t.a.LICENSE,l);r.push(d)}},{key:"unpackPlayReadyRequest_",value:function(e){var t=tn(e.body,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(new DOMParser).parseFromString(t,"application/xml"),r=n.getElementsByTagName("HttpHeader"),i=0;i<r.length;++i){var a=r[i].querySelector("name").textContent,o=r[i].querySelector("value").textContent;e.headers instanceof Headers?e.headers.append(a,o):e.headers[a]=o}var s=n.querySelector("Challenge");e.body=yl(s.textContent).buffer}else{var u="Content-Type",c="text/xml; charset=utf-8";e.headers instanceof Headers?e.headers.append(u,c):e.headers[u]=c}}},{key:"onMediaKeySessionStatusChange_",value:function(e){var t=e.target,n=t.keyStatuses;if(this.drmInfo.keySystem==k.d.PLAYREADY)this.onSessionStatusChangePlayready_(n,t.sessionId);else{var r,i=Cl(n.entries());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a[0],s=a[1],u=Zt(gl(new Uint8Array(o)));qe.a.log("".concat(Bl," SessionId=").concat(t.sessionId," keyId=").concat(u," status=").concat(s))}}catch(th){i.e(th)}finally{i.f()}}}},{key:"onSessionStatusChangePlayready_",value:function(e,t){var n=this;e.forEach((function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if(n.drmInfo.keySystem==k.d.PLAYREADY&&16==r.byteLength){var a=new DataView(r),o=a.getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}n.drmInfo.keySystem==k.d.PLAYREADY&&"status-pending"==e&&(e="usable");var c=Zt(gl(new Uint8Array(r)));qe.a.log("SessionId="+t+" keyId="+c+" status="+e)}))}}]),e}(),Fl=function(){function e(){var t=this;Ue()(this,e),this.checkFPSTimer_=new lt.a((function(){return t.checkFPSInterval_()})),this.shouldReport_=!1,this.fpsFrequency_=1,this.decodeFrameStuckCount_=0}return He()(e,[{key:"playbackQuality",get:function(){var e=this.mediaElem_,t=0,n=0,r=0;if("function"==typeof e.getVideoPlaybackQuality){var i=e.getVideoPlaybackQuality();n=i.totalVideoFrames,r=i.droppedVideoFrames,t=n}else{var a=e.webkitDecodedFrameCount,o=e.webkitDroppedFrameCount;void 0!==a&&void 0!==o&&(o=o,t=a=a)}return{totalVideoFrames:t,decodedVideoFrames:n,droppedVideoFrames:r}}},{key:"setup",value:function(e,t,n,r){this.runtime_=e,this.mediaElem_=n,this.stream_=t,this.dynamicStuckMonitorPeriod_=Object(dt.g)(r)?r:e.conf.fpsStuckMonitoringPeriod}},{key:"onMSEAttaching",value:function(){this.checkFPSTimer_.scheduleRepeated(this.fpsFrequency_)}},{key:"startReportFPS",value:function(){this.shouldReport_=!0}},{key:"stopReportFPS",value:function(){this.shouldReport_=!1}},{key:"checkAndFixStuck_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.stream_,i=document.hidden;"boolean"==typeof i&&!i&&!n.paused&&4===n.readyState&&r.mediaBuffer.len>1&&(r.levelSwitching?this.decodeFrameStuckCount_=0:this.decodeFrameStuckCount_>this.dynamicStuckMonitorPeriod_?(t.ctx.emit(Tt.a.FPS_STUCK),this.decodeFrameStuckCount_=0,t.ctx.recoverMedia()):0===e?this.decodeFrameStuckCount_++:this.decodeFrameStuckCount_=0)}},{key:"checkFPS_",value:function(e,t){var n=this.runtime_,r=performance.now();if(e){if(this.lastCheckFPSTime_){this.lastCheckFPSTime_;var i=t-this.lastDroppedFrames_,a=e-this.lastDecodedFrames_;this.shouldReport_&&n.ctx.emit(Tt.a.FPS_REPORT,{currentDropped:i,currentDecoded:a}),this.checkAndFixStuck_(a)}this.lastCheckFPSTime_=r,this.lastDroppedFrames_=t,this.lastDecodedFrames_=e}}},{key:"checkFPSInterval_",value:function(){if(this.mediaElem_){var e=this.playbackQuality,t=e.totalVideoFrames,n=e.droppedVideoFrames;this.checkFPS_(t,n)}}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.runtime_=null,this.stream_=null,this.shouldReport_=!1}},{key:"reset",value:function(){this.checkFPSTimer_&&this.checkFPSTimer_.cancel(),this.lastCheckFPSTime_=null,this.lastDroppedFrames_=null,this.lastDecodedFrames_=null}}]),e}();function ql(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;var n=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(n=.5);for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0==r||e.end(r-1)-t<=n)&&r>0)return r;return null}var jl=function(){function e(t,n,r){Ue()(this,e),this.stalled=null,this.stallReported=!1,this.nudgeRetry=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r,this.stalledGap_=1e3*n.conf.highBufferThreshold}return He()(e,[{key:"destroy",value:function(){this.reset(),this.mediaElem_=null}},{key:"reset",value:function(){this.stalled=null,this.nudgeRetry=0}},{key:"onMediaIdle",value:function(e){this.checkBuffer_(e)}},{key:"checkBuffer_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.plugin_,i=t.conf,a=n.currentTime,o=e.playHeadTime,s=this.mediaElem_;if(!t.error&&s&&r.sourceBufferManager&&!r.sourceBufferManager.bufferOperating){var u=r.sourceBufferManager,c=u.bufferInfo(a);if(u.hasVideoBuffer||u.hasAudioBuffer){var l=ql(n.buffered,a);if(null===l)c.len<i.bufferExpectLength*Math.max(1,n.playbackRate)&&r.emit(Tt.a.BUFFER_EXPECTING,c);else[{type:"video",buffered:u.videoBuffered},{type:"audio",buffered:u.audioBuffered}].forEach((function(e,t,n){var r=e.type,i=e.buffered,o=ql(i,a);if(Object(dt.g)(o)&&o>0){var s={start:i.start(o-1),end:i.end(o-1)},u={start:i.start(o),end:i.end(o)};qe.a.warn("met ".concat(r," gap, currentTime: ").concat(a,", gapIndex: ").concat(o,", gapRange: ").concat(s.end,"-").concat(u.start,", buffered length: ").concat(i.length))}}));if(c.len>=0){var d=s.readyState,f=!(s.paused&&d>1||s.ended),h=performance.now();if(0===c.len&&n.seeking&&(this.stalled=null),d>=3&&this.resetStalledGap(),a!==o)this.stallReported&&(qe.a.warn("video not stuck anymore @".concat(a,", after ").concat(Math.round((h-this.stalled)/1e3),"s")),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(f){var p=this.stalled?h-this.stalled:0;if(!this.stalled)return void(this.stalled=h);if(p>=1e3&&(this.stallReported||(this.stallReported=!0,qe.a.warn("video stalling @".concat(a," due to low buffer")))),!u.updating){var v=u.bufferInfo(a);this.tryFixBufferStall_(v,p,l)}}}}else r.emit(Tt.a.BUFFER_EXPECTING,c)}}},{key:"tryFixBufferStall_",value:function(e,t,n){var r=this.runtime_,i=this.mediaElem_;if(r.ctx.allowJumpGapDirectly&&null!==n){var a=i.buffered.start(n)+.08;qe.a.log("fix gap index ".concat(n,", jump to ").concat(a)),i.currentTime=a}else e.len>.5&&t>this.stalledGap_&&(this.stalled=null,this.tryNudgeBuffer_())}},{key:"tryNudgeBuffer_",value:function(){var e=this.runtime_,t=this.mediaElem_,n=t.currentTime,r=(this.nudgeRetry||0)+1;this.nudgeRetry=r;var i=e.conf;if(r<=i.nudgeMaxRetry){var a=n+r*i.nudgeOffset;qe.a.log("adjust currentTime ".concat(n,"->").concat(a)),t.currentTime=a}else qe.a.error("still stuck in high buffer @".concat(n," after ").concat(i.nudgeMaxRetry)),e.throwError(new Mt.a(Bt.a.RECOVERABLE,Nt.a.RENDERER,Ft.a.MEDIA_HIGH_BUFFER))}},{key:"resetStalledGap",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=1e3*this.runtime_.conf.highBufferThreshold;this.stalledGap_=e?t+1e3:t}}]),e}();function Ul(e,t,n){var r=[];if(t)for(var i=0;i<t.length;i++)r.push({start:t.start(i),end:t.end(i)});return function(e,t,n){var r,i,a,o,s,u=[];for(e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end})),s=0;s<e.length;s++){var c=u.length;if(c){var l=u[c-1].end;e[s].start-l<n?e[s].end>l&&(u[c-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=a=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(t+n>=d&&t<f)i=d,r=(a=f)-t;else if(t+n<d){o=d;break}}return{len:r,start:i,end:a,nextStart:o}}(r,e,n)}var Vl=function(){function e(t,n,r){var i=this;Ue()(this,e),this.eventManager_=new pt.a,this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAddBufQueue_=[],this.audioAddBufQueue_=[],this.videoDelBufQueue_=[],this.audioDelBufQueue_=[],this.appendTimer_=new lt.a((function(){return i.checkAppend_()})),this.audioAppendStarted_=!1,this.videoAppendStarted_=!1,this.appendWindowEnd=Number.POSITIVE_INFINITY,this.appendWindowStart=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r}return He()(e,[{key:"updating",get:function(){return this.audioBufferUpdating||this.videoBufferUpdating||this.videoAppendStarted_||this.audioAppendStarted_}},{key:"videoBufferUpdating",get:function(){var e=this.videoSourceBuffer;return!!e&&e.updating}},{key:"audioBufferUpdating",get:function(){var e=this.audioSourceBuffer;return!!e&&e.updating}},{key:"bufferOperating",get:function(){return this.hasOperateBufferData||this.updating}},{key:"sourceBuffersCreated",get:function(){return this.sourceBuffersCreated_}},{key:"hasVideoBuffer",get:function(){return!!this.videoSourceBuffer}},{key:"hasAudioBuffer",get:function(){return!!this.audioSourceBuffer}},{key:"videoBuffered",get:function(){var e=null,t=this.videoSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioBuffered",get:function(){var e=null,t=this.audioSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioAppendStart",get:function(){if(Array.isArray(this.audioAddBufQueue_)){var e=this.audioAddBufQueue_[0];if(e.segment instanceof ht.a)return e.segment.startTime}return null}},{key:"videoAppendStart",get:function(){if(Array.isArray(this.videoAddBufQueue_)){var e=this.videoAddBufQueue_[0];if(e.segment instanceof ht.a)return e.segment.startTime}return null}},{key:"hasOperateBufferData",get:function(){var e=!1;return(this.videoAddBufQueue_&&this.videoAddBufQueue_.length>0||this.audioAddBufQueue_&&this.audioAddBufQueue_.length>0||this.videoDelBufQueue_&&this.videoDelBufQueue_.length>0||this.audioDelBufQueue_&&this.audioDelBufQueue_.length>0)&&(e=!0),e}},{key:"empty",get:function(){var e=this.videoSourceBuffer,t=this.audioSourceBuffer;return(!e||e&&this.existInMSE_(e)&&0===e.buffered.length)&&(!t||t&&this.existInMSE_(t)&&0===t.buffered.length)}},{key:"reset",value:function(){[this.videoAddBufQueue_,this.videoDelBufQueue_,this.audioAddBufQueue_,this.audioDelBufQueue_].forEach((function(e){e.length>0&&e.splice(0,e.length)})),this.unbind_(),this.appendTimer_.cancel(),this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAppendStarted_=this.audioAppendStarted_=!1,this.appendWindowStart=0,this.appendWindowEnd=Number.POSITIVE_INFINITY}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.appendTimer_=null,this.videoAddBufQueue_=this.audioAddBufQueue_=this.videoDelBufQueue_=this.audioDelBufQueue_=null,this.onUpdate_=this.onUpdateStart_=this.onUpdateEnd_=this.onError_=this.onAbort_=null}},{key:"abort",value:function(){var e=this.plugin_,t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=this.videoBufferUpdating,i=this.audioBufferUpdating,a=e.mse;if(a&&"open"===a.readyState&&Object(dt.b)(a.sourceBuffers)&&a.sourceBuffers.length>0){if(r&&this.existInMSE_(t))try{t.abort()}catch(nh){qe.a.warn("video source buffer abort error, ".concat(nh?nh.message||nh:""))}if(i&&this.existInMSE_(n))try{n.abort()}catch(nh){qe.a.warn("audio source buffer abort error, ".concat(nh?nh.message||nh:""))}}}},{key:"withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=this.audioSourceBuffer,i=this.videoSourceBuffer,a=[],o=[];return this.existInMSE_(r)&&a.push(r),this.existInMSE_(i)&&a.push(i),a.forEach((function(r){for(var i=r.buffered,a=0;a<i.length;a++)if(e>=i.start(a)+t&&e<i.end(a)-n){o.push(!0);break}})),o.length===a.length}},{key:"bufferInfo",value:function(e,t){var n,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.runtime_.conf.maxBufferHole;switch(t){case"video":var i=this.videoSourceBuffer;n=this.existInMSE_(i)?i.buffered:null;break;case"audio":var a=this.audioSourceBuffer;n=this.existInMSE_(a)?a.buffered:null;break;default:this.mediaElem_&&(n=this.mediaElem_.buffered)}return Ul(e,n,r)}},{key:"clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n="video"!==e,r="audio"!==e;[{clear:n,bufQueue:this.audioAddBufQueue_},{clear:r,bufQueue:this.videoAddBufQueue_}].forEach((function(e){var n=e.clear,r=e.bufQueue;if(n&&r.length>0)if(t){var i=r.filter((function(e){return e.segment instanceof ft.a}));r.splice(0,r.length),i.forEach((function(e){return r.push(e)}))}else r.splice(0,r.length)}))}},{key:"clearVideoCacheBuffers",value:function(){if(!this.videoSourceBuffer.updating&&this.videoSourceBuffer.buffered&&this.videoSourceBuffer.buffered.length>0){var e=this.videoSourceBuffer.buffered.start(0),t=this.videoSourceBuffer.buffered.end(0);this.videoSourceBuffer.remove(e,t)}}},{key:"onMSEDetaching",value:function(){this.abort()}},{key:"onBufferCreated",value:function(e){this.unbind_(),this.sourceBuffersCreated_=!0,this.existInMSE_(e.videoSourceBuffer)&&(this.videoSourceBuffer=e.videoSourceBuffer),this.existInMSE_(e.audioSourceBuffer)&&(this.audioSourceBuffer=e.audioSourceBuffer),this.bind_(),this.checkAppend_()}},{key:"onBufferAppending",value:function(e){for(var t=this,n=function(n){var r=e[n],i=r.type;r.bytesArray.forEach((function(e,n){(1===i?t.videoAddBufQueue_:t.audioAddBufQueue_).push({bufferSource:e,index:n,segment:r})}))},r=0;r<e.length;r++)n(r);(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&this.appending_()}},{key:"onBufferFlushing",value:function(e,t,n){var r=this.plugin_,i=this.empty,a=this.videoSourceBuffer,o=this.audioSourceBuffer;i||"closed"===r.mse.readyState?setTimeout((function(){r.emit(Tt.a.BUFFER_FLUSHED)}),10):(!a||n&&"video"!==n||this.videoDelBufQueue_.push({start:e,end:t}),!o||n&&"audio"!==n||this.audioDelBufQueue_.push({start:e,end:t}),this.flushing_())}},{key:"existInMSE_",value:function(e){var t=this.plugin_,n=!1;if(!t.mse||!e)return n;var r=t.mse.sourceBuffers;if(Object(dt.b)(r))for(var i=0;i<r.length;i++)if(r[i]===e){n=!0;break}return n}},{key:"intersectBuffer_",value:function(e,t,n){var r=!1;if(e)for(var i,a,o=e.buffered,s=0;s<o.length;s++)if(i=o.start(s),a=o.end(s),!(n<=i||t>=a)){r=!0;break}return r}},{key:"appending_",value:function(){var e,t=this,n=this.plugin_,r=this.runtime_,i=this.mediaElem_,a=this.videoSourceBuffer,o=this.audioSourceBuffer;if(!(r.error||i&&i.error))if("closed"!==n.mse.readyState&&(a||o)){n.emit(Tt.a.BUFFER_APPENDING);for(var s=[{contentType:"video",sb:a,adds:this.videoAddBufQueue_},{contentType:"audio",sb:o,adds:this.audioAddBufQueue_}],u=0;u<s.length;u++){var c=s[u],l=c.sb,d=!1;if(c.adds.length>0&&l&&!l.updating)if("break"===function(){var n=c.adds.shift(),a=n.bufferSource,o=n.index,s=n.segment,u=s.byteLength,f=c.contentType;"video"===f?t.videoAppendStarted_=!0:"audio"===f&&(t.audioAppendStarted_=!0);try{var h=1===s.type?"video":"audio";if(s instanceof ht.a){var p=s.startTime,v=s.duration,y=p+v,g=1===s.bytesArray.length?"".concat(h):"".concat(o+1,"/").concat(s.bytesArray.length," pieces of ").concat(h);qe.a.log("append ".concat(g," buffer, start/end/duration(").concat(p.toFixed(3),"/").concat(y.toFixed(3),"/").concat(v.toFixed(3),")"))}else s instanceof ft.a&&qe.a.log("append ".concat(h," initSegment"));l.bufferedLength_=l.buffered.length,l.updateType_="+",l.appendBuffer(a),window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onMSEDone(null===(e=null==r?void 0:r.ctx)||void 0===e?void 0:e.isAd)}catch(th){qe.a.warn("".concat(f," sourceBuffer, append/currentTime/readyState(").concat(u,"/").concat(t.mediaElem_.currentTime,"/").concat(i.readyState,"): ").concat(th.stack||th.message)),d=!0,setTimeout((function(){22===th.code?r.throwError(new Mt.a(Bt.a.RECOVERABLE,Nt.a.RENDERER,Ft.a.MEDIA_QUOTA_EXCEEDED,f)):r.throwError(new Mt.a(Bt.a.CRITICAL,Nt.a.RENDERER,Ft.a.MEDIA_SOURCE_OPERATION_THREW,f,th))}),0)}if(d)return"break"}())break}}else this.appendTimer_.cancel(),this.appendTimer_.schedule(.1)}},{key:"flushing_",value:function(){var e=this,t=this.plugin_,n=this.audioSourceBuffer,r=this.videoSourceBuffer,i=t.mse.readyState,a=!1;return[n,r].filter((function(t){return e.existInMSE_(t)})).forEach((function(t){if("closed"===i||t.updating)"open"!==i&&qe.a.warn("flushing sb.updating: ".concat(t.updating,", mediaSource state: ").concat(i));else{for(var r,o=t===n?"audio":"video",s=t===n?e.audioDelBufQueue_:e.videoDelBufQueue_;s.length&&(r=s.shift(),!e.intersectBuffer_(t,r.start,r.end));)r=null;r&&(r.end===Number.POSITIVE_INFINITY&&(r.end=t.buffered.end(t.buffered.length-1)),t.bufferedLength_=t.buffered.length,t.updateType_="-",a=!0,qe.a.log("flushing ".concat(o," [").concat(r.start,",").concat(r.end,"] of ").concat(t.buffered.length," ranges, pos:").concat(e.mediaElem_.currentTime)),t.remove(r.start,r.end))}})),a}},{key:"bind_",value:function(){var e=this;[{contentType:"video",sourceBuffer:this.videoSourceBuffer},{contentType:"audio",sourceBuffer:this.audioSourceBuffer}].filter((function(t){return e.existInMSE_(t.sourceBuffer)})).forEach((function(t){var n=t.contentType,r=t.sourceBuffer;e.eventManager_.on(r,"updatestart",e.onUpdateStart_.bind(e)),e.eventManager_.on(r,"update",e.onUpdate_.bind(e)),e.eventManager_.on(r,"updateend",e.onUpdateEnd_.bind(e)),e.eventManager_.on(r,"abort",e.onAbort_.bind(e)),e.eventManager_.on(r,"error",e.onError_.bind(e,n))}))}},{key:"unbind_",value:function(){this.eventManager_.removeAll()}},{key:"onUpdateStart_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=undefined,i=e.target;t&&i===t?r="video":n&&i===n&&(r="audio"),qe.a.log("".concat(r," source buffer update start"))}},{key:"onUpdate_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=(undefined,e.target);t&&r===t?("video",this.videoAppendStarted_=!1):n&&r===n&&("audio",this.audioAppendStarted_=!1)}},{key:"onUpdateEnd_",value:function(e){var t,n=this.plugin_,r=this.videoSourceBuffer,i=this.audioSourceBuffer,a=undefined,o=e.target,s=o.bufferedLength_;if(r&&o===r?t="video":i&&o===i&&(t="audio"),"+"===o.updateType_?a="append":"-"===o.updateType_&&(a="remove"),n.emit(Tt.a.BUFFER_UPDATED,{target:o,sourceBufferType:t,operateType:a,previousBufferedLength:s,vsb:r,asb:i}),this.videoDelBufQueue_.length>0||this.audioDelBufQueue_.length>0){if(this.flushing_())return}else"-"===o.updateType_&&(o.updateType_="",n.emit(Tt.a.BUFFER_FLUSHED));this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0?this.appending_():"+"===o.updateType_&&(o.updateType_="",n.emit(Tt.a.BUFFER_APPENDED)),qe.a.log("".concat(t," source buffer update end")+"".concat(""))}},{key:"onAbort_",value:function(){this.audioAppendStarted_=this.audioAppendStarted_=!1,qe.a.warn("source buffer met abort.'")}},{key:"onError_",value:function(e,t){var n=this.runtime_,r=this.appendTimer_,i=this.mediaElem_,a=t.timeStamp,o=t.target,s=t.currentTarget,u=t.srcElement,c=i.error||{},l=c.code,d=c.message,f=s||o||u;r.cancel(),this.audioAppendStarted_=this.videoAppendStarted_=!1,qe.a.error("".concat(e," source buffer met error, timeStamp(").concat(a,"), mode(").concat(f.mode,"), mediaError(").concat(l,"/").concat(d,")")),n.throwError(new Mt.a(Bt.a.RECOVERABLE,Nt.a.RENDERER,Ft.a.MEDIA_SOURCE_OPERATION_FAILED))}},{key:"checkAppend_",value:function(){(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&(this.appending_(),this.appendTimer_.schedule(.1))}}]),e}();function Hl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var zl=function(e){Ye()(n,e);var t=Hl(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).sourceBuffers_={},e.numberOfSourceBuffersExpected_=2,e}return He()(n,[{key:"mse",get:function(){return this.mse_}},{key:"isEndOfStream",get:function(){return"ended"===this.mse_.readyState}},{key:"setup",value:function(e,t){this.runtime_=e,this.mediaElem_=t,this.eventManager_=new pt.a,this.sourceBufferManager=new Vl(this,e,t),this.gapManager=new jl(this,e,t)}},{key:"appendBuffer",value:function(e){for(var t=this.sourceBuffers_,n=!1,r=0;r<e.length;r++){var i=e[r],a=i.type;t[a]||(t[a]={created:!1,sourceBuffer:null,segment:i},n=!0)}n&&this.tryCreateSourceBuffers_(),this.sourceBufferManager.onBufferAppending(e)}},{key:"reset",value:function(){var e,t;null===(e=this.gapManager)||void 0===e||e.reset(),null===(t=this.sourceBufferManager)||void 0===t||t.reset(),this.detachMediaElement_(),this.sourceOpenEventTrulyFired_=!1,qe.a.log("new MediaSource"),this.mse_=new MediaSource,this.attachMediaElement_()}},{key:"destroy",value:function(){this.detachMediaElement_(),this.sourceBufferManager&&(this.sourceBufferManager.destroy(),this.sourceBufferManager=null),this.eventManager_&&(this.eventManager_.destroy(),this.eventManager_=null),this.runtime_=null,this.mediaElem_=null,this.mse_=null,this.sourceOpenEventTrulyFired_=!1,this.sourceBuffers_={}}},{key:"endOfStream",value:function(){var e=this.mediaElem_,t=this.mse_,n="open"===t.readyState,r=e.readyState>=1;if(n&&r)return this.sourceBufferManager&&this.sourceBufferManager.updating&&this.abortSourceBuffer(),qe.a.log("end of stream!"),t.endOfStream(),!0;var i="no reason";return n?r||(i="video readyState(".concat(t.readyState,") has no metadata")):i="mediaSource readyState is ".concat(t.readyState),qe.a.log("end of stream, but ".concat(i)),!1}},{key:"attachMediaElement_",value:function(){this.bind_(),this.emit(Tt.a.MSE_ATTACHING,this.mse_)}},{key:"detachMediaElement_",value:function(){this.emit(Tt.a.MSE_DETACHING),this.removeSourceBuffers_(),this.unbind_(),this.emit(Tt.a.MSE_DETACHED)}},{key:"tryCreateSourceBuffers_",value:function(){var e=this.runtime_,t=this.mse_,n=this.sourceBuffers_,r=this.sourceOpenEventTrulyFired_,i=this.numberOfSourceBuffersExpected_,a=Object.keys(n).length;if(t&&"open"===t.readyState&&r&&i===a){var o={};for(var s in n){var u=parseInt(s,10),c=n[u],l=c.segment,d=void 0;if(!c.created)try{var f="".concat(l.container,";codecs=").concat(l.codec);qe.a.log("creating sourceBuffer(".concat(f,")")),d=t.addSourceBuffer("".concat(f)),c.created=!0,c.sourceBuffer=d}catch(nh){return qe.a.error("mse add source error ".concat(nh.stack||nh.message)),e.throwError(new Mt.a(Bt.a.RECOVERABLE,Nt.a.RENDERER,Ft.a.MEDIA_SOURCE_OPERATION_FAILED))}1===u?o.videoSourceBuffer=d:2===u&&(o.audioSourceBuffer=d)}this.emit(Tt.a.BUFFER_CREATED,o),this.sourceBufferManager.onBufferCreated(o)}else qe.a.log("mse readystate/sourceopen(".concat(t?t.readyState:null,"/").concat(r,"), expected/got(").concat(i,"/").concat(a,")"))}},{key:"removeSourceBuffers_",value:function(){var e=this.mse_,t=this.sourceBuffers_;if(t&&Object.keys(t).length>0){for(var n in t){var r=t[n],i=r.sourceBuffer;r.sourceBuffer=null;try{r.created&&i&&e.removeSourceBuffer(i)}catch(th){}}this.sourceBuffers_={}}}},{key:"bind_",value:function(){var e=this.mse_,t=this.eventManager_;t.on(e,"error",this._onError.bind(this)),t.on(e,"opened",this._onOpened.bind(this)),t.on(e,"closed",this._onClosed.bind(this)),t.on(e,"sourceopen",this._onSourceOpened.bind(this)),t.on(e,"sourceended",this._onSourceEnded.bind(this))}},{key:"unbind_",value:function(){var e=this.eventManager_;e&&e.removeAll()}},{key:"_onError",value:function(){}},{key:"_onOpened",value:function(){}},{key:"_onClosed",value:function(){this.mse_}},{key:"_onSourceOpened",value:function(){this.runtime_;var e=this.mse_,t=this.eventManager_,n=this.mediaElem_;e.sourceBuffers&&e.sourceBuffers.length>0?qe.a.log("mse opened error, buffer length = ".concat(e.sourceBuffers.length)):(this.sourceOpenEventTrulyFired_=!0,qe.a.log("media source opened"),this.emit(Tt.a.MSE_ATTACHED,e),URL.revokeObjectURL(n.src),t.off(e,"sourceopen"),this.tryCreateSourceBuffers_())}},{key:"_onSourceEnded",value:function(){}},{key:"abortSourceBuffer",value:function(){this.sourceBufferManager&&this.sourceBufferManager.abort()}}]),n}(gt.EventEmitter),Gl=n(669);function Wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Kl=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},$l=function(e){Ye()(n,e);var t=Wl(n);function n(e){var r;return Ue()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Gl,watch:[e.stream.mux?"mux":"loader","renderer","audio"]}))).$TAG="Media",r.playing_=!1,r.prevCurrentTime_=null,r.emePlugin_=new Nl,r.msePlugin_=new zl,r.fpsPlugin_=new Fl,r.idleTimer_=new lt.a((function(){return r.checkIdle()})),r.tryDecodeBlobUrl_=!1,r}return He()(n,[{key:"currentTime",get:function(){return this.mediaElement?this.mediaElement.currentTime:0},set:function(e){var t=this.readyState,n=this.mediaElement;Object(dt.g)(e)&&n&&(this.playHeadTime=e,t>0&&(this.mediaElement.currentTime=e))}},{key:"duration",get:function(){return this.mediaElement?this.mediaElement.duration:NaN}},{key:"mediaElement",get:function(){return this.mediaElem_}},{key:"readyState",get:function(){return this.mediaElem_?this.mediaElem_.readyState:0}},{key:"paused",get:function(){return!this.mediaElem_||this.mediaElem_.paused}},{key:"ended",get:function(){return!this.mediaElem_||this.mediaElem_.ended}},{key:"loop",get:function(){return!!this.mediaElem_&&this.mediaElem_.loop},set:function(e){this.mediaElem_&&(this.mediaElem_.loop=e)}},{key:"playbackRate",get:function(){var e=1;return this.mediaElem_&&"number"!=typeof(e=this.mediaElem_.playbackRate)&&(e=1),e}},{key:"buffered",get:function(){return this.mediaElem_?this.mediaElem_.buffered:null}},{key:"error",get:function(){return this.mediaElem_?this.mediaElem_.error:null}},{key:"seeking",get:function(){return!!this.mediaElem_&&this.mediaElem_.seeking}},{key:"updating",get:function(){return!!this.s_&&this.s_.updating}},{key:"buffer",get:function(){var e=this.playHeadTime;return Object.assign(Object.assign({},this.bufferInfo(e)),{buffered:{video:this.bufferInfo(e,"video"),audio:this.bufferInfo(e,"audio")}})}},{key:"hasOperateBufferData",get:function(){return!!this.s_&&this.s_.hasOperateBufferData}},{key:"bufferOperating",get:function(){return!!this.s_&&this.s_.bufferOperating}},{key:"drmInfo",set:function(e){this.drmConfig_=e,this.emePlugin_.setDrmInfo(e)}},{key:"takeoverMediaControl",value:function(){qe.a.log("".concat(this.LOG_TAG," takeover media control")),this.initMediaContainer_(),this.initPlugin_(),this.bind_(),this.reset()}},{key:"releasedMediaControl",value:function(){var e=this.LOG_TAG,t=this.mediaElem_,n=this.blobUrl_,r=this.idleTimer_;if(t){var i=t.src;qe.a.log("".concat(e," release media control, ").concat(i,", ").concat(i===n)),r.cancel(),this.unbind_(),this.unloadPlugin_(),i===n&&(t.removeAttribute("src"),t.load()),this.blobUrl_=null,this.mediaElem_=null}}},{key:"initMediaContainer_",value:function(){var e=this.$krt.rootElement;e instanceof HTMLVideoElement?this.mediaElem_=e:e instanceof HTMLMediaElement||(this.mediaElem_=document.createElement("video"),e.appendChild(this.mediaElement))}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=t.mux?e.mux:e.loader,r=this.$selfArtifact!==e.renderer,i=this.depsArtefact_!==n,a=this.audioArtefact_!==e.audio;if(i&&(this.depsArtefact_=n),r&&(this.$selfArtifact=e.renderer),a&&(this.audioArtefact_=e.audio),i||a){if(i){var o=n.segments;Array.isArray(o)&&o.length>0&&o.filter((function(e){return e instanceof ft.a})).forEach((function(e){switch(e.type){case 2:t.audioTrack.initSegment=e;break;case 1:t.videoTrack.initSegment=e}}))}this.checkIdle()}}},{key:"hasUnConsumedArtefact_",value:function(){var e=this.variantAudioMode,t=this.depsArtefact_,n=this.audioArtefact_,r=!!t&&!Object(dt.c)(t);if(e){var i=!!n&&!Object(dt.c)(n);r=r||i}return r}},{key:"tryAppendBuffer_",value:function(){if(!this.hasUnConsumedArtefact_())return!1;var e=this.$stream,t=this.variantAudioMode,n=this.depsArtefact_,r=this.audioArtefact_,i=this.$selfArtifact,a=(null==n?void 0:n.segments)||[],o=(null==r?void 0:r.segments)||[],s=[];if(t){var u=a.filter((function(e){return 2===e.type&&e instanceof ht.a})).length>0;u?e.audioSegmentSynced&&o.length>0&&(s=a.filter((function(e){return 1===e.type})).concat(o)):s=a.filter((function(e){return 1===e.type}))}else s=a;if(s.length>0){for(var c=!1,l=[],d=!1,f=0;f<s.length;f++){var h=s[f];if(h){if(!c){var p=this.currentTime-10;p>0&&this.$withinBuffer(p)&&this.$flushBuffer(0,p),c=!0}d=d||h instanceof ht.a,l.push(h)}}if(l.length>0)return d&&(i&&!1===i.expectingBuffer||this.$provideArtefact({expectingBuffer:!1})),this.msePlugin_.appendBuffer(l),this.$consumeArtefact(e.mux?"mux":"loader"),t&&o.length>0&&this.$consumeArtefact("audio"),!0}return!1}},{key:"initPlugin_",value:function(){this.emePlugin_.setup(this.$krt,this.mediaElem_,this.drmConfig_),this.msePlugin_.setup(this.$krt,this.mediaElem_),this.s_=this.msePlugin_.sourceBufferManager,this.fpsPlugin_.setup(this.$krt,this.$stream,this.mediaElem_,this.$stream.manifest.dynamicStuckMonitorPeriod)}},{key:"unloadPlugin_",value:function(){this.s_=null,this.msePlugin_.destroy(),this.emePlugin_.destroy(),this.fpsPlugin_.destroy()}},{key:"onMSEAttaching_",value:function(e){var t=this.$stream,n=this.mediaElement,r=this.fpsPlugin_;t.emit(Tt.a.MSE_ATTACHING,{stream:t}),this.playHeadTime=0,n.load(),this.blobUrl_=URL.createObjectURL(e),qe.a.log("DomString: ".concat(this.blobUrl_,", ").concat(this.tryDecodeBlobUrl_)),this.tryDecodeBlobUrl_&&/%3A\/\//g.test(this.blobUrl_)&&(this.blobUrl_=decodeURIComponent(this.blobUrl_),n.blobUrlMalformed=!0,qe.a.log("DecodedDomString: ".concat(this.blobUrl_))),this.tryDecodeBlobUrl_=!1,n.src=this.blobUrl_,r.onMSEAttaching()}},{key:"onMSEAttached_",value:function(e){var t=this.$stream;e.duration=t.loader.duration,t.emit(Tt.a.MSE_ATTACHED,e)}},{key:"onMseBufferCreated_",value:function(){var e=this.$stream;e.emit(Tt.a.BUFFER_CREATED,{stream:e})}},{key:"onMseAppending_",value:function(e){var t=this.$stream;t.emit(Tt.a.BUFFER_APPENDING,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseUpdated_",value:function(e){var t=this.$krt,n=this.msePlugin_,r=this.$stream,i=this.mediaElem_,a=e.sourceBufferType,o=e.operateType,s=e.previousBufferedLength;e.vsb;if(t.conf.alwaysSeekKeyframe&&"append"===o&&"video"===a&&0===s&&i.buffered&&i.buffered.length>0){var u=i.buffered.start(0),c=i.buffered.end(0),l=i.currentTime;k.a.browser.EDGE&&(u+=.08);var d=l.toFixed(3),f=u.toFixed(3),h=c.toFixed(3);d!==f&&d!==h&&(qe.a.log("Due to alwaysSeekKeyframe, seeking to video buffered start@".concat(f,", cur(").concat(d,")")),r.seekingMayIgnored=!0,i.currentTime=parseFloat(f))}this.isSatisfyEosCondition()?n.endOfStream():this.hasOperateBufferData||this.updating||this.checkIdle()}},{key:"onMseAppended_",value:function(e){var t=this.$stream;t.emit(Tt.a.BUFFER_APPENDED,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseBufferExpect_",value:function(e){var t=this.$stream,n=this.$selfArtifact;if(!this.$error&&this.error)return qe.a.log("The event is not fired by media elem"),void this.onError_();t.shouldFireError(e)?this.$throwError(null,{immediately:!0}):this.tryAppendBuffer_()||n&&!0===n.expectingBuffer||this.$provideArtefact({expectingBuffer:!0})}},{key:"onMseBufferFlushed_",value:function(){this.$stream.emit(Tt.a.BUFFER_FLUSHED)}},{key:"isSatisfyEosCondition",value:function(){var e=this.$stream,t=this.variantAudioMode,n=e.loader,r=e.mux,i=e.audio;return(t?n.eof&&i.eof:!n||n.eof)&&(!r||r.idle)&&!this.hasUnConsumedArtefact_()&&this.isSafetyToEOS_()}},{key:"isSafetyToEOS_",value:function(){var e=this.msePlugin_;return!e.sourceBufferManager.hasOperateBufferData&&!e.sourceBufferManager.updating&&!e.isEndOfStream}},{key:"play",value:function(){this.mediaElement.play()}},{key:"pause",value:function(){this.mediaElement.pause()}},{key:"recoverAt",value:function(e){var t;this.$error&&this.$error.code===Ft.a.MEDIA_VIDEO_ERROR&&this.$error.message==undefined&&(this.tryDecodeBlobUrl_=!0),Ke()(Ze()(n.prototype),"recoverAt",this).call(this,e);var r=this.msePlugin_;this.$stream.seekingMayIgnored=!0,this.releasedMediaControl(),this.takeoverMediaControl(),null===(t=r.gapManager)||void 0===t||t.resetStalledGap(!0)}},{key:"reset",value:function(){var e=this.fpsPlugin_,t=this.msePlugin_,n=this.emePlugin_;this.idleTimer_.schedule(0),t.abortSourceBuffer(),e.reset(),n.reset(),t.reset(),this.playing_=!1}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this.drmConfig_=null,this.releasedMediaControl()}},{key:"checkIdle",value:function(){var e,t=this.$krt,n=this.idleTimer_,r=this.msePlugin_;n.running&&(t.error||r&&(null===(e=r.gapManager)||void 0===e||e.onMediaIdle({playHeadTime:this.playHeadTime})),n.schedule(.1))}},{key:"checkHighResTimeupdate_",value:function(){Ke()(Ze()(n.prototype),"checkHighResTimeupdate_",this).call(this);var e=this.mediaElem_;e&&!e.paused&&this.prevCurrentTime_!=e.currentTime&&(this.prevCurrentTime_=e.currentTime,this.stateChange_("highrestimeupdate"))}},{key:"bind_",value:function(){var e=this.$eventManager,t=this.mediaElem_,n=this.msePlugin_;e.on(n,Tt.a.MSE_ATTACHING,this.onMSEAttaching_.bind(this)).on(n,Tt.a.MSE_ATTACHED,this.onMSEAttached_.bind(this)).on(n,Tt.a.BUFFER_CREATED,this.onMseBufferCreated_.bind(this)).on(n,Tt.a.BUFFER_APPENDING,this.onMseAppending_.bind(this)).on(n,Tt.a.BUFFER_UPDATED,this.onMseUpdated_.bind(this)).on(n,Tt.a.BUFFER_APPENDED,this.onMseAppended_.bind(this)).on(n,Tt.a.BUFFER_EXPECTING,this.onMseBufferExpect_.bind(this)).on(n,Tt.a.BUFFER_FLUSHED,this.onMseBufferFlushed_.bind(this)),e.on(t,"error",this.onError_.bind(this)).on(t,"encrypted",this.onEncrypted_.bind(this)).on(t,"canplay",this.onCanplay_.bind(this)).on(t,"loadstart",this.onLoadstart_.bind(this)).on(t,"loadedmetadata",this.onLoadedMetadata_.bind(this)).on(t,"playing",this.onPlaying_.bind(this)).on(t,"waiting",this.onWaiting_.bind(this)).on(t,"pause",this.onPause_.bind(this)).on(t,"ended",this.onEnded_.bind(this)).on(t,"timeupdate",this.onTimeUpdate_.bind(this)).on(t,"seeking",this.onSeeking_.bind(this)).on(t,"seeked",this.onSeeked_.bind(this))}},{key:"unbind_",value:function(){this.$eventManager.removeAll()}},{key:"onError_",value:function(){var e,t=null===(e=this.mediaElem_)||void 0===e?void 0:e.error;if(t){var n=t.code,r=t.msExtendedCode,i=t.message;switch(n){case 1:break;case 2:case 3:case 4:r&&(r<0&&(r+=Math.pow(2,32)),r=r.toString(16)),qe.a.error("".concat(this.LOG_TAG," error, code(").concat(n,"), message(").concat(i,"), extended(").concat(r,"), readyState(").concat(this.readyState,")"));var a=navigator.userAgent.toLowerCase();if(-1!==a.indexOf("bytespider")||-1!==a.indexOf("headlesschrome"))return;var o=Ft.a.MEDIA_VIDEO_ERROR;/PIPELINE_ERROR_DECODE/.test(i)?o=/video decode error/.test(i)?Ft.a.MEDIA_VIDEO_DECODE_ERROR:/VDA Error/.test(i)?Ft.a.MEDIA_VDA_ERROR:Ft.a.MEDIA_PIPELINE_ERROR_DECODE:/AUDIO_RENDERER/.test(i)?o=Ft.a.MEDIA_AUDIO_RENDERER_ERROR:/URL safety check/.test(i)&&(o=Ft.a.MEDIA_URL_SAFE_REJECTED);var s=new Mt.a(Bt.a.RECOVERABLE,Nt.a.RENDERER,o,n,i,r);s.message=i,this.$throwError(s,{immediately:!0})}}}},{key:"onTimeUpdate_",value:function(){var e=this.currentTime,t=this.readyState;if(!(this.paused||t<=1||this.playHeadTime===e)){var n=this.mediaElem_,r=this.seeking,i=this.duration,a=this.appendWindowEnd;if(this.playHeadTime=e,e>0&&e>=a&&!r){var o=this;n.addEventListener("pause",(function t(){n.removeEventListener("pause",t,!1),o.noticeStreamStop_("timer")}),!1),qe.a.info("pause from mse, currentTime: ".concat(e,",appendWindowEnd: ").concat(a)),this.pause()}else if(t>=3){var s=new Event("playing");s.isSimulating_=!0,this.onPlaying_(s)}e+.5>i&&this.stateChange_("willended"),r||this.stateChange_("timeupdate")}}},{key:"onLoadstart_",value:function(){this.stateChange_("loadstart")}},{key:"onLoadedMetadata_",value:function(){this.stateChange_("loadedmetadata")}},{key:"onCanplay_",value:function(){this.stateChange_("canplay")}},{key:"onSeeking_",value:function(){var e,t=this.$krt,n=this.msePlugin_,r=this.currentTime,i=this.duration,a=this.buffer;if(this.playing_=!1,this.playHeadTime=r,qe.a.log("seeking(".concat(r,"), duration(").concat(i,")")),null===(e=n.gapManager)||void 0===e||e.resetStalledGap(!0),k.a.browser.SAFARI){if(r<t.conf.safariMinStartTime)return void(this.currentTime=t.conf.safariMinStartTime)}else if(r<1&&a.len>0){var o=a.start;if(o<1&&r<o)return void(this.currentTime=o)}i>1&&r>i-1?this.currentTime=i-1:this.stateChange_("seeking")}},{key:"onSeeked_",value:function(){this.stateChange_("seeked")}},{key:"onPause_",value:function(){this.playing_=!1,this.highResTimer.stop(),this.stateChange_("pause")}},{key:"onEnded_",value:function(){this.stateChange_("beforeended"),this.stateChange_("ended"),this.stateChange_("afterended")}},{key:"onPlaying_",value:function(e){var t;!this.playing_&&(!e.isSimulating_&&this.readyState>1||e.isSimulating_)&&(this.playing_=!0,window&&window.playbackPageStageStatus&&window.playbackPageStageStatus.onVideoDone(null===(t=this.ctx_)||void 0===t?void 0:t.isAd),this.stateChange_("playing"))}},{key:"onWaiting_",value:function(){this.playing_=!1,this.highResTimer.stop(),this.stateChange_("waiting")}},{key:"onEncrypted_",value:function(e){this.$stream.emit(Tt.a.STREAM_ENCRYPTED,e)}},{key:"noticeStreamStop_",value:function(e){qe.a.log("stream stop, by the ".concat(e)),this.onEnded_()}},{key:"stateChange_",value:function(e){var t=this.$stream;t.emit(Tt.a.STATE_CHANGE,{stream:t,state:e})}},{key:"$withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this.s_)return this.s_.withinBuffer(e,t,n)}},{key:"$flushBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:undefined;this.s_&&this.s_.onBufferFlushing(e,t,n)}},{key:"bufferInfo",value:function(e,t){return this.s_?this.s_.bufferInfo(e,t,this.$krt.conf.maxBufferHole):{len:0,start:0,end:0}}},{key:"$drainBuffer",value:function(e){Ke()(Ze()(n.prototype),"$drainBuffer",this).call(this,e),this.depsArtefact_=null,this.audioArtefact_=null}},{key:"$clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.s_&&this.s_.clearOperateBuffers(e,t)}},{key:"$clearVideoCacheBuffers",value:function(){this.s_&&this.s_.clearVideoCacheBuffers()}},{key:"startReportFPS",value:function(){this.fpsPlugin_.startReportFPS()}},{key:"stopReportFPS",value:function(){this.fpsPlugin_.stopReportFPS()}}]),n}(Dl);Kl([nt.c],$l.prototype,"currentTime",null),Kl([nt.c],$l.prototype,"duration",null),Kl([nt.c],$l.prototype,"mediaElement",null),Kl([nt.c],$l.prototype,"play",null),Kl([nt.c],$l.prototype,"pause",null),Kl([nt.c],$l.prototype,"startReportFPS",null),Kl([nt.c],$l.prototype,"stopReportFPS",null);var Yl=n(451),Ql=n(531),Jl=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xl={INIT:"@@redux/INIT"+Jl(),REPLACE:"@@redux/REPLACE"+Jl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jl()}};function Zl(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ed(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=undefined),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(ed)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!Zl(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Xl.REPLACE})}function p(){var e,t=d;return e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}},e[Ql.a]=function(){return this},e}return f({type:Xl.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:h})[Ql.a]=p,r}function td(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function nd(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(undefined,{type:Xl.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(undefined,{type:Xl.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Xl.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(nh){a=nh}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],d=c(l,t);if(void 0===d){var f=td(u,t);throw new Error(f)}i[u]=d,r=r||d!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function id(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function ad(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(n,!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function od(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function sd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return ad({},n,{dispatch:r=od.apply(void 0,a)(n.dispatch)})}}}function ud(e){var t=[],n=t;function r(){n===t&&(n=t.slice())}function i(e){var t=!0;return r(),n.push(e),function(){if(t){t=!1,r();var i=n.indexOf(e);n.splice(i,1)}}}function a(){for(var e=t=n,r=0;r<e.length;r++)e[r]()}function o(){e(a)}return function(e){return function(){var t=e.apply(void 0,arguments),n=t.subscribe;function r(){var e=t.dispatch.apply(t,arguments);return o(),e}return Object.assign(Object.assign({},t),{dispatch:r,subscribe:i,subscribeImmediate:n})}}}var cd=n(449);function ld(e){return function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=arguments.length>1?arguments[1]:undefined,r=n.type,i=n.payload,a=n.meta;if(r===e&&a&&a.stream_uid){if(e===it.a.DEPOSIT_ERROR&&!(i instanceof Mt.a))throw"Error state should be use type KernelError";if(i==undefined){var o=Object.assign({},t);return delete o[a.stream_uid],o}return Object.assign(Object.assign({},t),Xu()({},a.stream_uid,i))}return t}}var dd={error:ld(it.a.DEPOSIT_ERROR),rawness:ld(it.a.DEPOSIT_RAWNESS),manifest:ld(it.a.DEPOSIT_MANIFEST),loader:ld(it.a.DEPOSIT_LOADER),mux:ld(it.a.DEPOSIT_MUX),renderer:ld(it.a.DEPOSIT_RENDERER)},fd={};function hd(){return nd(Object.assign(Object.assign({},dd),fd))}function pd(){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=[],n=[sd.apply(void 0,t),ud(cd.b)],r=od;return ed(hd(),e,r.apply(void 0,n))}({})}function vd(e,t,n){return function(e,t,n){var r={type:e},i=arguments.length;return t instanceof Error&&(r.error=!0),2===i?r.payload=t:3===i&&(r.payload=t,r.meta=n),r}(e,t,n)}var yd=n(652);function gd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var md,_d=function(e){Ye()(n,e);var t=gd(n);function n(){var e;return Ue()(this,n),(e=t.apply(this,arguments)).TAG="Roll",e.streamType=T.Roll,e}return He()(n,[{key:"isAd",get:function(){return"ad"===this.rollCategory||/^ad::/gi.test(this.rollCategory)}}]),n}(sr);!function(e){e.BEGIN="B",e.END="E",e.PLAYING_CHANGED="PC",e.PLAYING_PROGRESS="PP"}(md||(md={}));n(611);function bd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xd(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var wd=function(e){Ye()(n,e);var t=kd(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this,{ctx:e.ctx})).playingStream_=null,i.set_=new Set,i.secClockTimer_=new lt.a((function(){return i.secCronJob_()})),i.runtime=e,i.isPreload=r,r||i.$eventManager.on(zt()(i),md.BEGIN,(function(){i.secClockTimer_.scheduleRepeated(1)})),i}return He()(n,[{key:"playingStream",get:function(){return this.playingStream_},set:function(e){var t=this.runtime;if(!this.isPreload&&this.has(e)){t.error&&(t.error=null);var n=this.playingStream_;n&&(n.onTheFly=!1,n.packList.forEach((function(e){e.unbindApis()}))),qe.a.log("timeline change playing stream to ".concat(e.TAG).concat(e instanceof _d?"("+e.rollCategory+")":"")),this.playingStream_=e,e.onTheFly=!0,e.packList.forEach((function(e){e.bindApis()})),this.emit(md.PLAYING_CHANGED,e)}}},{key:"streams",get:function(){return this.set_.values()}},{key:"isRolling",get:function(){var e=this.playingStream;return!!e&&e instanceof _d}},{key:"rollingType",get:function(){return this.isRolling?this.playingStream.rollType:null}},{key:"episodeStream",get:function(){var e,t=null,n=bd(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof cr){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"rollStream",get:function(){var e,t=null,n=bd(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof _d){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"size",get:function(){return this.set_.size}},{key:"secCronJob_",value:function(){}},{key:"startSchedules",value:function(){this.destroySchedules()}},{key:"destroySchedules",value:function(){}},{key:"destroy",value:function(){Ke()(Ze()(n.prototype),"destroy",this).call(this),this.destroySchedules(),this.clear(),this.secClockTimer_.cancel(),this.playingStream_=null}},{key:"reset",value:function(){qe.a.log("timeline reset"),this.playingStream_=null}},{key:"clear",value:function(){this.playingStream_=null,this.set_.clear()}},{key:"endOfPlayingStream",value:function(){this.tryToSwitchStream(!0)}},{key:"tryToSwitchStream",value:function(){arguments.length>0&&undefined,this.playingStream}},{key:"findAdaptedStream",value:function(e){return null}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"configureRoll",value:function(e,t){}}]),n}(n(805).a),Sd=n(629),Td=n(529);var Pd={},Ed=function(){function e(t,n){Ue()(this,e),this.stream=null,this.isAbortCurrentGas=!1,this.currentTime_=null,this.runtime=t,this.eventManger_=new pt.a,this.timeline_=n}return He()(e,[{key:"isAbortedCurrentGas",get:function(){return this.isAbortCurrentGas},set:function(e){this.isAbortCurrentGas=e}},{key:"syncMediaTiming",value:function(e){var t=this.stream;if(t){var n=t.loader,r=t.renderer.currentTime,i=Object(dt.g)(e)&&e>=0?e:Object(dt.g)(r)?r:0,a=n.findPieceAt(i),o=!1;if(this.currentFrag_){var s=this.currentFrag_.startTime,u=this.currentFrag_.endTime;if(i>=s&&i<u)i+.5>=u&&this.stateChange_("willended");else if(i>=u){n.fragments.length>0&&this.currentFrag_!==n.fragments[n.fragments.length-1]&&(this.stateChange_("ended"),o=!0)}}this.currentTime_=i,this.currentFrag_=a?a.fragment:this.currentFrag_,this.currentFrag_.loadstart||(this.currentFrag_.loadstart=!0,this.stateChange_("loadstart")),this.checkCurrentGasStatus()&&o&&t.renderer&&t.renderer.readyState>=2&&this.stateChange_("playing")}}},{key:"connectStream",value:function(e){var t=this;this.stream=e;var n=e.loader;n.fragments.length>0?this.syncMediaTiming():this.eventManger_.once(n,"FLS",(function(e){0===e.idx&&t.syncMediaTiming()}))}},{key:"disconnectStream",value:function(){this.stream=null,this.currentTime_=null,this.currentFrag_=null,this.eventManger_.removeAll()}},{key:"getCurrentGas",value:function(){var e=this.stream,t=this.currentTime_;if(e){var n=e.loader,r=e.renderer,i=null!==t?t:r.currentTime;i>n.duration&&(i=n.duration);var a=n.fragments,o=n.findPieceAt(i);if(o&&o.fragment){var s=o.fragment;return{gas:s.gas||null,fragIdx:a.indexOf(s),fragment:s}}}return null}},{key:"abortCurrentGas",value:function(e){var t=this.stream,n=t.renderer,r=t.loader,i=t.rollType,a=e.fragIdx,o=(e.fragment,r.fragments.find((function(e,t){return t>a&&3!=e.status&&4!=e.status})));if(k.a.os.ios||k.a.os.android){if(!o)return void this.timeline_.abortRollingStream(i);if(o.startTime>n.duration)return void this.timeline_.abortRollingStream(i)}if(o){var s=o.startTime;n.readyState>0?(qe.a.info("abort current fragment, currentTime = ".concat(n.currentTime,", targetTime = ").concat(s,", end: ").concat(n.buffered&&n.buffered.length>0?n.buffered.end(0):"null")),this.isAbortCurrentGas=!0,n.currentTime=s):(qe.a.info("syncMediaTiming && seek, currentTime = ".concat(n.currentTime,", targetTime = ").concat(s,", end: ").concat(n.buffered&&n.buffered.length>0?n.buffered.end(0):"null")),this.syncMediaTiming(s),this.timeline_.seekStream(s,this.stream))}}},{key:"checkCurrentGasStatus",value:function(){var e=this.runtime,t=this.stream,n=!0,r=this.currentFrag_;return!r||3!=r.status&&4!=r.status||(n=!1,e.throwError(t.error)),n}},{key:"stateChange_",value:function(e){this.runtime.ctx.emit(Tt.a.STATE_CHANGE,{state:e})}}]),e}();function Ad(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Id(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Ld=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":tt()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Od=function(e){Ye()(a,e);var t,r,i=Dd(a);function a(e,t){var n;Ue()(this,a),(n=i.call(this,e,t)).playingStreamBufferEnd_=null,n.briefs={};var r,o,s,u=e.params.dynamic.externals;return t||(u&&Object(yt.a)(Pd,u),r=e.store,o="audio",s=ld(it.a.DEPOSIT_AUDIO),fd[o]=s,r.replaceReducer(hd())),Object(yd.b)(Yl.a),mt.e.setRuntime(e),n}return He()(a,[{key:"playingStream",get:function(){return Ke()(Ze()(a.prototype),"playingStream",this)},set:function(e){e instanceof _d&&e.isAd?(this.adManager||(this.adManager=new Ed(this.runtime,this)),this.adManager.connectStream(e)):this.adManager&&this.adManager.disconnectStream(),this.playingStreamBufferEnd_=null,Ge()(Ze()(a.prototype),"playingStream",e,this,!0),this.isAd||this.runtime.ctx.emit(Tt.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0})}},{key:"eot",get:function(){var e=!0,t=this.playingStream;return t&&(e=t.renderer.loop||t===this.episodeStream&&!this.hasAvailablePatch||t==this.patchStream),e}},{key:"isAd",get:function(){var e=!1;return this.isRolling&&(e=this.playingStream.isAd),e}},{key:"isQBBPatching",get:function(){var e=this.playingStream,t=!!e;return t&&(t=e===this.patchStream),t}},{key:"patchStream",get:function(){var e,t=null,n=Ad(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof _d&&"patch"===r.rollCategory){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"hasAvailablePatch",get:function(){var e=this.patchStream;return e&&!e.error}},{key:"matStream",get:function(){var e,t=null,n=Ad(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof _d&&"mat"===r.rollCategory){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"episodeStream",get:function(){var e,t=null,n=Ad(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof cr){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"bufferInfo",get:function(){return{media:this.mediaBufferInfo,data:this.dataBufferInfo}}},{key:"mediaBufferInfo",get:function(){var e=this.playingStream;return e?e.mediaBuffer:{len:0,start:0,end:0}}},{key:"dataBufferInfo",get:function(){var e=this.playingStream;return e?e.dataBuffer:new ut}},{key:"normalAdRollStream",get:function(){var e,t=null,n=Ad(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof _d&&"ad"===r.rollCategory){t=r;break}}}catch(th){n.e(th)}finally{n.f()}return t}},{key:"destroy",value:function(){this.reset(),mt.e.unsetRuntime(),this.adManager=null}},{key:"reset",value:function(){Ke()(Ze()(a.prototype),"reset",this).call(this);var e,t=this.adManager,n=Ad(this.streams);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(th){n.e(th)}finally{n.f()}this.clear(),t&&t.disconnectStream(),this.briefs={}}},{key:"onStateChange_",value:function(e){var t=e.state,n=e.stream,r=n.renderer,i=(n.loader,n.mux,n.playRanges,this.runtime),a=this.adManager,o=i.recoverProcedure,s=!0;switch(t){case"loadstart":s=!1;break;case"loadedmetadata":n.seekedToStartPos||(n.seekedToStartPos=!0,this.seekToStartPos_(n));break;case"afterended":r.loop||this.endOfPlayingStream();break;case"seeking":var u=r.currentTime;o.progressing&&(o.status=o.levels.MEDIA_SEEKING),n instanceof _d&&n.isAd&&a.syncMediaTiming(),n.lastSeekTiming=performance.now(),n.seekingMayIgnored||r.$withinBuffer(u)||(n.clearBuffers({rendererMayKeepInit:!0,muxKeepMeta:!0}),this.seekStream(u,n)),n.seekingMayIgnored=!1;break;case"seeked":n.lastSeekTiming&&qe.a.log("seeking->seeked take ".concat((performance.now()-n.lastSeekTiming).toFixed(3),"ms"));break;case"highrestimeupdate":case"timeupdate":n instanceof _d?n.isAd&&a.syncMediaTiming():this.tryToSwitchStream(!1);break;case"waiting":var c=r.bufferInfo(n.currentTime).len;(r.readyState>=3&&!k.a.browser.EDGE||!r.seeking&&r.updating||c>.1||c<=.1&&n.error||n.loader.buffer.len>0)&&(s=!1);break;case"playing":o.progressing&&(o.status=o.levels.STOP)}s&&n===this.playingStream&&(e.shouldEmit=s,this.runtime.ctx.emit(Tt.a.STATE_CHANGE,e))}},{key:"onError_",value:function(e){var t=this.runtime,n=this.playingStream,r=this.adManager,i=t.recoverProcedure,a=e.stream,o=e.error;i.progressing&&(i.status=i.levels.STOP),a&&a===n&&(a instanceof _d&&a.isAd?o.category===Nt.a.RENDERER?(qe.a.error("ad met renderer error"),t.throwError(o)):r.checkCurrentGasStatus()||(qe.a.error("ad met error abortCurrentADGas from vodTimeline"),this.abortCurrentADGas()):t.throwError(o))}},{key:"onMediaAttaching_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(Tt.a.MSE_ATTACHING)}},{key:"onMediaBufferCreated_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(Tt.a.BUFFER_CREATED)}},{key:"onMediaBufferAppending_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(Tt.a.BUFFER_APPENDING)}},{key:"onMediaBufferAppended_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(Tt.a.BUFFER_APPENDED)}},{key:"seekStream",value:function(e,t){arguments.length>2&&undefined;var n=this.runtime,r=n.recoverProcedure,i=t.loader,a=t.audio;r.progressing&&(r.status=r.levels.DATA_SEEKING),t.range(e),i.seek(e);var o=a;o&&o.seek(e)}},{key:"seekToStartPos_",value:function(e){var t=this.runtime,n=e.renderer,r=e.playRanges,i=t.recoverProcedure;if(r.length>0)if(i.progressing){i.status=i.levels.MEDIA_METADATA;var a=i.targetTime;a>=0&&(qe.a.log("media recover, seek media by recover point ".concat(a)),n.currentTime=a)}else{var o=r.start(0);if(k.a.browser.SAFARI){var s=t.conf.safariMinStartTime;o<s&&(o=s)}o>0&&(e.seekingMayIgnored=!0,qe.a.log("seek to ".concat(o," by metadata~")),n.currentTime=o)}else qe.a.warn("playRanges is empty, pls fix it.")}},{key:"secCronJob_",value:function(){var e=this.runtime,t=this.playingStream;if(t){var n=this.bufferInfo.data.end;n!==this.playingStreamBufferEnd_&&(this.playingStreamBufferEnd_=n,e.ctx.emit(Tt.a.STATE_CHANGE,{state:"progress"})),!t.hasNoticeEOD&&t.loader.eod&&(t instanceof cr?(t.hasNoticeEOD=!0,e.ctx.emit(Tt.a.STATE_CHANGE,{state:"EOP"})):t instanceof _d&&(t.hasNoticeEOD=!0,e.ctx.emit(Tt.a.STATE_CHANGE,{state:"EOR"})))}}},{key:"configureRoll",value:function(e,t){var n=e.offset,r=e.done;t.rollType=e.rollType,t.rollCategory=e.category,t.done=!!r,r&&"ad::brief"!==t.rollCategory||(t.offset=n)}},{key:"add",value:function(e){var t=!1,n=!1;if(e instanceof _d){if(t=!0,e.isAd){switch(e.rollCategory){case"ad":if(this.normalAdRollStream)return qe.a.error("Timeline should has only one normal ad roll stream"),this;if(e.rollType===P.PRE_ROLL&&this.episodeStream)return qe.a.error("Timeline now has a episode stream, but add a pre-ad"),this;break;case"ad::brief":var r=e.offset,i=this.briefs[r]=this.briefs[r]||[],a=i.length;t=!0,a>0&&(i[a-1].next=e),i.push(e)}e.loader.adjustTimestampMode=!0,e.loader.skipErrorMode=!0}else if(this.patchStream)return qe.a.error("Timeline should has only one patch stream"),this}else if(e instanceof cr&&(n=!0,this.episodeStream))return qe.a.error("Timeline should has only one episode stream"),this;return this.$eventManager.on(e,Tt.a.ERROR,this.onError_.bind(this)).on(e,Tt.a.STATE_CHANGE,this.onStateChange_.bind(this)).on(e,Tt.a.BUFFER_CREATED,this.onMediaBufferCreated_.bind(this)).on(e,Tt.a.BUFFER_APPENDING,this.onMediaBufferAppending_.bind(this)).on(e,Tt.a.BUFFER_APPENDED,this.onMediaBufferAppended_.bind(this)).on(e,Tt.a.MSE_ATTACHING,this.onMediaAttaching_.bind(this)),this.set_.add(e),1===this.size&&(t||n)&&(this.playingStream=e,this.emit(md.BEGIN),this.startSchedules()),this}},{key:"delete",value:function(e){if(e instanceof _d&&"ad::brief"===e.rollCategory){var t=e.offset,n=this.briefs[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}}return this.$eventManager.off(e,Tt.a.STATE_CHANGE).off(e,Tt.a.BUFFER_CREATED).off(e,Tt.a.ERROR).off(e,Tt.a.MSE_ATTACHING),this.set_["delete"](e),this}},{key:"findAdaptedStream",value:function(e){var t,n=null,r=e.streamType,i=e.roll,a=e.components,o=Ad(this.streams);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.streamType===r&&(s instanceof cr||i&&s instanceof _d&&s.rollType===i.rollType&&"ad::brief"!==s.rollCategory&&s.rollCategory===i.category)&&(0===a.length||0===Object(Sd.a)(a,s.compLiterals).length)){n=s;break}}}catch(th){o.e(th)}finally{o.f()}return n}},{key:"tryToSwitchStream",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this.playingStream;if(t){var n=t instanceof cr,r=this.normalAdRollStream,i=this.episodeStream,a=this.patchStream,o=this.matStream,s=2,u=!1;if(t instanceof _d){if(!e)return;if("ad"===t.rollCategory){var c=t.rollType;switch(this["delete"](t),t.destroy(),c){case P.PRE_ROLL:var l=0,d=this.briefs[l]||[];d.length>0?this.playingStream=d.shift():i&&(this.playingStream=i,this.runtime.ctx.emit(Tt.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0}));break;case P.MID_ROLL:i&&(this.playingStream=i);break;case P.POST_ROLL:this.emit(md.END)}}else"ad::brief"===t.rollCategory?(this["delete"](t),t.destroy(),t.next?this.playingStream=t.next:i&&(this.playingStream=i,this.runtime.ctx.emit(Tt.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0}))):"patch"===t.rollCategory&&e&&(this["delete"](t),t.destroy(),r&&r.rollType==P.POST_ROLL?this.playingStream=r:this.emit(md.END))}else if(n)if(e)this.hasAvailablePatch?this.playingStream=a:r&&r.rollType==P.POST_ROLL?this.playingStream=r:this.emit(md.END);else{if(r&&r.rollType===P.MID_ROLL){var f=r.offset,h=t.currentTime;if(h>=f)return t.stopHighResTimer(),this.playingStream=r,this.seekStream(h+.1,t),void(o&&(o.needInitSegment=!0));h>=f-s?(u=!0,t.startHighResTimer()):t.stopHighResTimer()}var p=this.briefs,v=Object.keys(p);if(v.length>0){var y;for(y=0;y<v.length;y++){var g=v[y],m=p[g];Array.isArray(m)&&0!==m.length||delete p[g]}var _=Object.keys(p).sort().map((function(e){return parseFloat(e)}));if(_.length>0)for(y=0;y<_.length;y++){var b=_[y],x=t.currentTime,k=Math.floor(x),w=Math.round(b);if(k>w)delete p[b];else{if(k===w)return t.stopHighResTimer(),this.playingStream=p[b].shift(),this.seekStream(x+.1,t),void(o&&(o.needInitSegment=!0));u||(x>=b-s?(u=!0,t.startHighResTimer()):t.stopHighResTimer())}}}}}}},{key:"switchLevel",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],i=arguments.length>4&&arguments[4]!==undefined&&arguments[4],a=this.$eventManager,o=this.playingStream,s=this.runtime,u=o.renderer,c=o.loader,l=o.playRanges,d=u.currentTime,f=o.loader.findPieceAt(d);if(o.levelSwitching=!0,r&&o.clearBuffers({rendererOnlyData:!0}),s.provideRawToStore(e,o),t)this.seekStream(l.start(0),o);else if(n||!u.currentTimeRange)r&&(a.once(o,Tt.a.BUFFER_FLUSHED,(function(){c.seek(u.currentTime)})),u.$flushBuffer());else if(!i){var h=u.bufferInfo(d);this.seekStream(h.end,o,!0),f&&f.segment.startTime>1&&u.$flushBuffer(0,f.segment.startTime-1)}}},{key:"getCurrentADGas",value:function(){if(this.isAd){var e=this.adManager.getCurrentGas();if(e&&e.gas)return e.gas}return null}},{key:"abortCurrentADGas",value:function(){var e=this,t=this.adManager,n=this.runtime;if(t&&this.isAd){var r=t.getCurrentGas();if(r){var i=t.stream,a=i.loader,o=i.rollType,s=r.fragIdx,u=0;if(a.fragments&&a.fragments.length>2)a.fragments.forEach((function(e){3!=e.status&&4!=e.status||u++}));1===a.fragments.length&&(k.a.os.ios||k.a.os.android)&&setTimeout((function(){e.episodeStream&&(e.playingStream=e.episodeStream)}),1e3);var c=s===a.fragments.length-u-1;n.error&&(n.error=null),c?(qe.a.info("abortRollingStream"),this.abortRollingStream(o)):(qe.a.info("abortCurrentGas: ".concat(Td.a.stringify(r))),t.abortCurrentGas(r))}}}},{key:"abortRollingStream",value:function(e,t){var n=this;if(this.isRolling&&(null===e||e===this.rollingType)){if(Object(dt.g)(t)){!function(e){var t=n.episodeStream;n.matStream;if(t){var r=!1,i=t.duration,a=e;if(0===i)return;e<0?(r=!0,e=0):e>i&&(r=!0,e=i<=1?0:i-1),r&&qe.a.warn("episode recovery point is fixed from ".concat(a," to ").concat(e)),n.seekStream(e,t)}}(t)}this.endOfPlayingStream()}}},{key:"isAbortedCurrentGas",value:function(){if(this.adManager)return this.adManager.isAbortedCurrentGas}},{key:"setAbortedCurrentGas",value:function(e){this.adManager.isAbortedCurrentGas=e}},{key:"switchAudioTrack",value:(r=Ol()(Vc.a.mark((function o(e){var t,n,r,i=arguments;return Vc.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=i.length>1&&i[1]!==undefined&&i[1],this.playingStream){a.next=3;break}return a.abrupt("return");case 3:t="boolean"==typeof t?t:this.runtime.conf.switchVariantImmediate,n=this.playingStream.renderer,r="immediate: ".concat(t),e?(t&&n.$flushBuffer(),qe.a.log("switch to variant audio track, ".concat(r)),n.variantAudioMode=!0):(qe.a.log("switch to original audio track, ".concat(r)),n.variantAudioMode=!1),this.loadAltAudio_(e,t);case 8:case"end":return a.stop()}}),o,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadAltAudio_",value:(t=Ol()(Vc.a.mark((function s(e,t){var r,i,a,o,u,c,l,d;return Vc.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.e(0).then(n.bind(null,1123));case 2:if(r=s.sent,i=r.MAT,a=this.runtime,o=this.playingStream,u=o.renderer,(c=o.audio)||(o.registerAudioPack(i,a),c=o.audio),!e){s.next=14;break}return c.enabled=!0,s.next=12,c.push(e);case 12:s.next=17;break;case 14:c.enabled=!1,c.reset(),o.mux||(o.restrictor.needSendAudioInitSegment=!0);case 17:o.clearBuffers({rendererFlushMedia:!1}),l=u.currentTime,d=t?l:u.bufferInfo(l).end,this.seekStream(d,o,!0);case 21:case"end":return s.stop()}}),s,this)}))),function(e,n){return t.apply(this,arguments)})}]),a}(wd);Ld([nt.c],Od.prototype,"eot",null),Ld([nt.c],Od.prototype,"isAd",null),Ld([nt.c],Od.prototype,"isQBBPatching",null),Ld([nt.c],Od.prototype,"patchStream",null),Ld([nt.c],Od.prototype,"episodeStream",null),Ld([nt.c],Od.prototype,"bufferInfo",null),Ld([nt.c],Od.prototype,"mediaBufferInfo",null),Ld([nt.c],Od.prototype,"dataBufferInfo",null),Ld([nt.c],Od.prototype,"add",null),Ld([nt.c],Od.prototype,"delete",null),Ld([nt.c],Od.prototype,"getCurrentADGas",null),Ld([nt.c],Od.prototype,"abortCurrentADGas",null),Ld([nt.c],Od.prototype,"abortRollingStream",null),Ld([nt.c],Od.prototype,"isAbortedCurrentGas",null),Ld([nt.c],Od.prototype,"setAbortedCurrentGas",null),Ld([nt.c],Od.prototype,"switchAudioTrack",null);var Rd=new Map;Rd.set("events",Tt.a),Rd.set("manifestTypes",xn),Rd.set("errorCodes",Ft.a),Rd.set("timeline/pcw-vod",Od),Rd.set("manifest/hls",vl),Rd.set("manifest/hls-265",vl),Rd.set("loader/hls",jn),Rd.set("mux/m2ts-mp4",Pl.a),Rd.set("manifest/flv",fl),Rd.set("loader/flv",Rn),Rd.set("mux/flv-mp4",Tl.a),Rd.set("manifest/jdash",xl),Rd.set("manifest/dash",cl),Rd.set("loader/dash",Sn),Rd.set("manifest/mp4",Sl),Rd.set("loader/mp4",Wn),Rd.set("mux/mp4-fmp4",El.a),Rd.set("loader/p2p",Ec),Rd.set("renderer/mse",$l);var Cd=new Map;function Md(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n],i=Cd.get(r);qe.a.assert(!!i,"the <<".concat(r,">> component is not installed")),i&&t.push(i)}return t}n(516);var Bd=n(679);function Nd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Fd=function(e){Ye()(n,e);var t=Nd(n);function n(){return Ue()(this,n),t.apply(this,arguments)}return He()(n)}(Jn.a);function qd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var jd=function(e){Ye()(n,e);var t=qd(n);function n(e){var r;return Ue()(this,n),(r=t.call(this)).isPreload=!1,r.isPreload=!!e,r}return He()(n,[{key:"destroy",value:function(){this.timeline&&(this.timeline.destroy(),this.timeline=null)}},{key:"reset",value:function(){this.timeline&&this.timeline.reset()}},{key:"setup",value:function(e,t){var n=e.params.dynamic.timeline,r=t.get(n);this.timeline=new r(e,this.isPreload)}},{key:"registerPacksIntoStream",value:function(e,t,n){var r,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,o=arguments.length>5?arguments[5]:undefined,s=Md(t);switch(e){case T.Roll:r=new _d;break;case T.Episode:r=new cr;break;default:qe.a.error("kernel met unknown content streamType ".concat(e))}for(var u=0;u<s.length;u++){var c=s[u],l=Object.getPrototypeOf(c);switch(l){case Lc:r.manifest=new c(rr(n,r));break;case ct:r.loader=new c(rr(n,r));break;case Bd.a:r.mux=new c(rr(n,r));break;case Dl:r.renderer=new c(rr(n,r))}}return r.silenced=this.isPreload,r.compLiterals=t,r.range(i,a),r instanceof _d&&this.timeline.configureRoll(o.roll,r),this.timeline.add(r),r}}]),n}(Fd);var Ud,Vd={components:{manifest:[],loader:[],mux:[],renderer:[]}},Hd=He()((function uh(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Ue()(this,uh),this.muxWorker=!0,this.switchVariantImmediate=!1,this.alwaysSeekKeyframe=!1,this.bufferExpectLength=3,this.mediaMaxDuration=86400,this.highBufferThreshold=3,this.nudgeOffset=.1,this.nudgeMaxRetry=3,this.maxBufferHole=.5,this.maxBufferTimeLength=60,this.hlsRangeTSTolerance=5,this.hlsMaxSegmentSearchTolerance=.25,this.drm={retryParameters:{maxRetry:3,timeout:6e3}},this.datasource={retryParameters:{maxRetry:2,timeout:2e4}},this.loaderWithBufferMaxRetry=3,this.loaderNoBufferMaxRetry=1,this.fpsStuckMonitoringPeriod=5,this.safariMinStartTime=.2;var t=k.a.browser,n=t.CHROME&&(t.version<50||50===t.version&&t.buildVersion<2661);this.alwaysSeekKeyframe=!!(n||t.EDGE||t.IE),Object(yt.a)(this,e)})),zd=He()((function ch(){Ue()(this,ch),this.global={},this.dynamic={}}));!function(e){e[e.STOP=0]="STOP",e[e.START=1]="START",e[e.MEDIA_METADATA=2]="MEDIA_METADATA",e[e.MEDIA_SEEKING=3]="MEDIA_SEEKING",e[e.DATA_SEEKING=4]="DATA_SEEKING"}(Ud||(Ud={}));var Gd=function(){function e(){Ue()(this,e),this._status=Ud.STOP,this.levels=Ud,this.targetTime=null}return He()(e,[{key:"progressing",get:function(){return this.status>=Ud.START}},{key:"status",get:function(){return this._status},set:function(e){if(e===Ud.STOP)this.targetTime=null;else if(e!=this._status+1)return;qe.a.log("recover status is ".concat(e)),this._status=e}}]),e}();function Wd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Kd=function(e){Ye()(n,e);var t=Wd(n);function n(e){var r;return Ue()(this,n),(r=t.call(this)).params=new zd,r.conf=new Hd,r.store=pd(),r.recoverProcedure=new Gd,r.ctx=e,r}return He()(n,[{key:"mixinConfigure",value:function(e){var t=this.conf;for(var n in e)Object(lr.e)(t,n)&&Object(yt.a)(t,Xu()({},n,e[n]))}},{key:"mixinDynamicParams",value:function(e){Object(yt.a)(this.params.dynamic,e||{})}},{key:"throwError",value:function(e){var t=this.ctx,n=this.recoverProcedure;(qe.a.assert(e instanceof Mt.a,"Wrong error type!"),null==this.error&&e instanceof Mt.a)&&(this.error=e,e.severity===Bt.a.RECOVERABLE&&n.progressing&&(n.status=n.levels.STOP),t.emit(rt.a.PRE_ERROR,e),t.emit(rt.a.ERROR,e))}},{key:"provideRawToStore",value:function(e,t){this.store.dispatch(vd(it.a.DEPOSIT_RAWNESS,e,{stream_uid:t.uuid}))}}]),n}(gt.EventEmitter);function $d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yd(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=Ze()(e);if(t){var i=Ze()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je()(this,n)}}var Jd=new Qn;Jd.add(0,Number.POSITIVE_INFINITY);var Xd=function(e){Ye()(n,e);var t=Qd(n);function n(e,r){var i;return Ue()(this,n),(i=t.call(this)).eventManager_=new pt.a,i.allowJumpGapDirectly=!1,i.stats={},i.runtime=new Kd(zt()(i)),i.config=i.runtime.conf,i.syntheticCfg=Vd,i.runtime.rootElement="string"==typeof e?document.querySelector(e):e,Object(yt.a)(i.runtime.params,r||{}),i.runtime.mixinConfigure(r),i.runtime.mixinDynamicParams(r),i.initContent_(!0),i}return He()(n,[{key:"timeRanges",get:function(){return null},set:function(e){this.current.timeline.playingStream.range(null,e)}},{key:"isRolling",get:function(){return this.current.timeline.isRolling}},{key:"rebooting",get:function(){return this.runtime.recoverProcedure.progressing}},{key:"allowSwitchVariant",get:function(){var e=this.current.timeline.playingStream,t=e.loader,n=e.renderer;return!t.eof||n.hasOperateBufferData}},{key:"preloaded",get:function(){return!!this.preload&&this.preload.timeline.size>0}},{key:"options_",value:function(e){return Object(yt.a)({streamType:T.Episode,dynamicArgs:{},components:[],isCurrent:!0,parseMftOnly:!1},e||{})}},{key:"initContent_",value:function(e){var t,n=this;return e?this.current=t=new jd(!1):this.preload=t=new jd(!0),t.setup(this.runtime,Cd),e&&(t.timeline.bindApis(),this.eventManager_.on(t.timeline,md.END,(function(){n.preloaded&&n.switchCS_()}))),t}},{key:"switchCS_",value:function(){var e=this.current,t=this.preload;this.emit(rt.a.TIMELINE_SWITCHING),qe.a.log("switch timeline content");var n,r=$d(e.timeline.streams);try{for(r.s();!(n=r.n()).done;){n.value.destroy()}}catch(th){r.e(th)}finally{r.f()}e.timeline.clear();var i,a=$d(t.timeline.streams);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.silenced=!1,e.timeline.add(o)}}catch(th){a.e(th)}finally{a.f()}t.timeline.clear(),this.emit(rt.a.TIMELINE_SWITCHED)}},{key:"loadSource",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Jd,r=arguments.length>3?arguments[3]:undefined,i=this.options_(r);i.isCurrent||this.preload||this.initContent_(!1);var a=i.isCurrent,o=i.components,s=i.dynamicArgs,u=i.streamType,c=(i.parseMftOnly,i.roll,this.runtime),l=this.current,d=this.preload,f=a?l:d,h=f.timeline.findAdaptedStream(i);c.mixinDynamicParams(s),h||(h=f.registerPacksIntoStream(u,o,c,t,n,r)),c.provideRawToStore(e,h)}},{key:"switchLevel",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3],i=arguments.length>4?arguments[4]:undefined,a=this.runtime,o=this.current,s=this.options_(i),u=s.components,c=s.dynamicArgs,l=s.streamType,d=o.timeline.playingStream,f=d.renderer,h=d.mediaRanges,p=f.currentTime,v=!1;if(a.mixinDynamicParams(c),i&&Array.isArray(u)&&Object(Sd.a)(u,d.compLiterals).length>1){var y=h.clone();this.reset(),o.registerPacksIntoStream(l,u,a,p,y,i),v=!0}e.isSwitchLevel=!0,qe.a.log("switching level, immediate: ".concat(t,", paused: ").concat(f.paused,", clearBuffer: ").concat(n,", abr: ").concat(r,", currentTimeRange: ").concat(Td.a.stringify(f.currentTimeRange))),o.timeline.switchLevel(e,v,t,n,r)}},{key:"recoverMedia",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1,t=this.runtime,n=this.current,r=.5,i=t.recoverProcedure,a=n.timeline.playingStream;a&&((e=(e=Object(dt.j)(e)?parseFloat(e):e)>=0?e:a.currentTime)>=a.duration-r&&(e=a.duration-r),qe.a.log("kernel will recovery from ".concat(e)),t.error=null,i.status=i.levels.START,i.targetTime=e,a.recoverImmediately(e))}},{key:"reset",value:function(){[this.current,this.preload].forEach((function(e){e&&e.reset()}))}},{key:"destroy",value:function(){[this.current,this.preload].forEach((function(e){e&&e.destroy()})),this.eventManager_.destroy()}}]),n}(gt.EventEmitter);!function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t||e.clear(),e.forEach((function(e,t){Cd.has(t)?qe.a.warn("kernel encounter duplicate component ".concat(e.constructor.name," from glue")):Cd.set(t,e)}))}(Rd);var Zd=Cd.get("events")||rt.a,ef=Cd.get("manifestTypes")||{},tf=Cd.get("errorCodes")||{},nf=n(338),rf=n(650),af=n.n(rf),of={Status_Idle:"idle",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadFailed:"error",Status_LoadedMetaData:"loadedmetadata",Status_Canplay:"canplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Will_Stoped:"willended",Status_Stoped:"ended",Status_Stalled:"stalled",Status_Playing_Fail:"muted",NTF_StatusChanged:"statusChanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",Action_Type_Controls:"controls",Action_Type_Code:"code",Action_Type_Native:"native"};function sf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var uf={},cf=function(e){f()(n,e);var t=sf(n);function n(e){var r;return o()(this,n),(r=t.call(this))._curStatus="",r.hasSeeking=!1,r.seekableFlag=!0,r.__beforeSeekTime=0,r._userGesturePlayed=!1,r._currentManualAction=null,r._currentCodeActionList=[],r.isFirstPlay=!0,r.isBeforeReadyPlayed=!1,r.delogger=new _.a("Decode[".concat(e.id,"]")),r}return u()(n,[{key:"init",value:function(e){var t=this,n=arguments;this._video=e;var r=function(n){if(""!==e.src){var r=n.status;t.emit(of.NTF_StatusChanged,n),t._curStatus=r,r===of.Status_Playing?t._playing=!0:t._playing=!1}},i=function(e){if(t._currentManualAction&&t._currentManualAction===e)return t._currentManualAction=null,of.Action_Type_Controls;if(-1!=t._currentCodeActionList.indexOf(e)){var n=t._currentCodeActionList.indexOf(e);return t._currentCodeActionList.splice(n,1),of.Action_Type_Code}return of.Action_Type_Native};this._setSrc=function(e){1===n.length&&(t.__beforeSeekTime=0,t._video.setAttribute("src",e),A.a.os.ios||t._video.load())},uf.loadstart=function(){t.__beforeSeekTime=0,r({status:of.Status_Loadstart,actionType:of.Action_Type_Native})},e.addEventListener("loadstart",uf.loadstart),uf.error=function(){t.__beforeSeekTime=0,r({status:of.Status_LoadFailed,actionType:of.Action_Type_Native})},e.addEventListener("error",uf.error),uf.stalled=function(){r({status:of.Status_Stalled,actionType:of.Action_Type_Native})},e.addEventListener("stalled",uf.stalled),uf.loadedmetadata=function(){r({status:of.Status_LoadedMetaData,actionType:of.Action_Type_Native})},e.addEventListener("loadedmetadata",uf.loadedmetadata),uf.canplay=function(){r({status:of.Status_Canplay,actionType:of.Action_Type_Native})},e.addEventListener("canplay",uf.canplay),uf.ended=function(){if(!1===t.seekableFlag&&Math.abs(t._getDecodeDuration()-t.__beforeSeekTime)>2)return t._seek(t.__beforeSeekTime)},e.addEventListener("ended",uf.ended),uf.canplaythrough=function(){t.emit({type:of.NTF_CanPlayThrough,data:{actionType:of.Action_Type_Native}})},e.addEventListener("canplaythrough",uf.canplaythrough),uf.volumechange=function(){t.emit(of.NTF_VolumeChanged,{data:t._video.volume,actionType:of.Action_Type_Native})},e.addEventListener("volumechange",uf.volumechange),uf.ratechange=function(){t.emit(of.NTF_RateChanged,{data:t._video.playbackRate,actionType:of.Action_Type_Native})},e.addEventListener("ratechange",uf.ratechange);var a=(new Date).getTime(),o=0;uf.timeupdate=function(){var n=t.getCurrenttime();if(!e.seeking&&Math.abs(n-t.__beforeSeekTime)<1.2)t.__beforeSeekTime=n;else if(!1===t.seekableFlag)return t._seek(t.__beforeSeekTime);if(!("number"==typeof e.readyState&&e.readyState<=1||t.isPaused())){var r=(new Date).getTime();r-a>500&&(clearTimeout(o),a=r,o=setTimeout((function(){t.isPaused()||t.emit(of.NTF_TimeUpdate,{current:t.getCurrenttime(),duration:t.getDuration(),buffer:t.getBufferTime(),actionType:of.Action_Type_Native})}),0)),t._playing||(t.hasSeeking=!1)}},e.addEventListener("timeupdate",uf.timeupdate),r({status:of.Status_Idle}),this._statusChanged=r,this._checkActionType=i}},{key:"video",value:function(){return this._video}},{key:"removeAllEventsListener",value:function(){this._video.removeEventListener("loadstart",uf.loadstart),this._video.removeEventListener("error",uf.error),this._video.removeEventListener("stalled",uf.stalled),this._video.removeEventListener("loadedmetadata",uf.loadedmetadata),this._video.removeEventListener("canplay",uf.canplay),this._video.removeEventListener("pause",uf.pause),this._video.removeEventListener("play",uf.play),this._video.removeEventListener("playing",uf.playing),this._video.removeEventListener("waiting",uf.waiting),this._video.removeEventListener("ended",uf.ended),this._video.removeEventListener("canplaythrough",uf.canplaythrough),this._video.removeEventListener("volumechange",uf.volumechange),this._video.removeEventListener("durationchange",uf.durationchange),this._video.removeEventListener("timeupdate",uf.timeupdate),this._video.removeEventListener("progress",uf.progress)}},{key:"play",value:function(e){var t=this,n=t._video;if(0!==n.readyState){e?this._currentManualAction=of.Status_Play:this._currentCodeActionList.push(of.Status_Play);var r=function(){t.delogger.log("decode play really invoked!");var e=n.play();if(e!==undefined){var r=new Promise((function(t,n){e.then((function(){t()}))["catch"]((function(e){n(e)}))}));return r["catch"]((function(e){t.delogger.warn("decode play got: "+e.message)})),r}};return A.a.os.isMobileTerminal?(this.engine.params.isMute&&this.isFirstPlay&&this.engine.setMuted(!0),this.isFirstPlay=!1,r()):r()}this.isBeforeReadyPlayed=!0}},{key:"pause",value:function(e,t){var n=this._video.networkState;(t||0!==n&&3!==n)&&(this._video.readyState&&(e?this._currentManualAction=of.Status_Paused:this._currentCodeActionList.push(of.Status_Paused),this._video.pause()))}},{key:"isPaused",value:function(){return this._video.paused}},{key:"replay",value:function(){this._video.play(this._video.src)}},{key:"_seek",value:function(e,t){var n=this;if(!this._checkSeek||!1!==this._checkSeek(e)){this.hasSeeking=!0;var r=this._video.seekable;1===r.length&&r.end(0)>e?(t?this._currentManualAction=of.NTF_Seeking:this._currentCodeActionList.push(of.NTF_Seeking),e>=0&&e<=this.getDuration()&&(this._video.currentTime=e),this.isPaused()&&this.play()):setTimeout((function(){n._seek(e)}),10)}}},{key:"isSeeking",value:function(){return this.hasSeeking}},{key:"setDecodeSrc",value:function(e,t){var n=this;n._setSrc(e),this.delogger.debug("decode src current time :"+t);try{n._video.duration=0,n._video.buffered.length=0,t>0?n._video.addEventListener("loadedmetadata",(function e(){t<n.getDuration()&&n._seek(t),n._video.removeEventListener("loadedmetadata",e)}),!1):n._video.currentTime=0}catch(nh){}}},{key:"getSrc",value:function(){return this._video.src}},{key:"getAudioTracks",value:function(){return this._video.audioTracks}},{key:"setAudioTracks",value:function(){}},{key:"getBuffered",value:function(){return this._video.buffered}},{key:"getDecodeCurrenttime",value:function(){var e=this.getDecodeDuration(),t=this._video.currentTime||0;return t<e?t:e}},{key:"getDecodeDuration",value:function(){return this._video.duration||0}},{key:"getVolume",value:function(){return this._video.volume}},{key:"setVolume",value:function(e){e>1&&(e=1),this._video.volume=e}},{key:"userGesturePlayed",value:function(){this._userGesturePlayed=!0}},{key:"getPlaybackRate",value:function(){return this._video.playbackRate}},{key:"setPlaybackRate",value:function(e){e>0&&(this.delogger.log("playbackRate => ".concat(e)),this._video.playbackRate=e)}}]),n}(k.c),lf=function(){function e(t){o()(this,e),this.logger=new _.a("DataProvider[".concat(t.id,"]")),this.engine=t,this.AllProviders={},this._retryMax=2,this._timer=null}return u()(e,[{key:"getPid",value:function(e){return e+""}},{key:"hasPreload",value:function(e){return!(!this.AllProviders[e]||"fulfilled"!==this.AllProviders[e].st)}},{key:"getData",value:function(e){return this.AllProviders[e].data}},{key:"clearAll",value:function(e){for(var t in this.AllProviders){if(e)new RegExp("^".concat(e,"_*")).test(t)&&(this.AllProviders[t].dq&&this.AllProviders[t].dq.clear(),delete this.AllProviders[t]);else this.AllProviders[t].dq&&this.AllProviders[t].dq.clear()}e||(this.AllProviders={}),this.logger.info("clear data provider & abandon vms request. tvid = "+e)}},{key:"getPromise",value:function(e,t){var r,a=this,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},s=o.apdl,u=this,c=u.engine,l=u.AllProviders,d=u._timer,f=this.getPid(e);return d&&(clearTimeout(d),u._timer=null),l[f]&&"pending"===l[f].st?r=l[f].pm:(r=new Promise((function(r,o){if(u.hasPreload(f))r(u.getData(f));else{var d,h,p;l[f]={st:"pending",data:undefined,pm:null,dq:null,retryNum:0},u._retryNum=0;var v=function(e){e.dataProviderPID=f,l[f]&&(l[f].st="fulfilled",l[f].data=e,l[f].dq=p),r(e)},y=function(e){var t,n=E.c.indexOf(null==e||null===(t=e.code)||void 0===t?void 0:t.toString())>-1;n&&(l[f].retryNum<u._retryMax?(l[f].retryNum++,p.tryCount=0,p.startRequest()):n=!1),n||(o(e),l[f]&&(l[f].st="rejected",l[f].data=e,l[f].dq=p))},g=null===(d=window.QiyiPlayerProphetData)||void 0===d?void 0:d.v;u.logger.info("server vps success, serverRequestId: ".concat(null===(h=window.QiyiPlayerProphetData)||void 0===h?void 0:h.serverRequestId)),g&&!0!==g.consumed?(g.consumed=!0,v(g)):a._timer=setTimeout(i()(m.a.mark((function _(){var r;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.e(1).then(n.t.bind(null,576,7));case 2:r=i.sent,(p=new E.f(e,{vid:t,vd:c.vd,logId:c.id,ugcAuthKey:c.movieinfo.ugcAuthKey,ppt:c.ppt,isEnjoy:c.isEnjoy,ost:c.ost,sptr:c.sptr,spt:c.spt,pingbackQOS:c.pingbackQOS,vpsFeatures:E.k,mmc:r,user:C.a,apdl:s===undefined?c.params.apdl:s})).startRequest().then(v,y);case 5:case"end":return i.stop()}}),_)}))),0)}})),l[f].pm=r),r}},{key:"clearCache",value:function(e){var t=this,n=this.getPid(e);t.AllProviders[n]&&delete t.AllProviders[n],t._timer&&(clearTimeout(t._timer),t._timer=null)}}]),e}(),df=window.location.protocol,ff=function(e,t){if(e)if(/[a-z]/i.test(e)){var n=function(){var n=i()(m.a.mark((function r(n){var i,a;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=k.K.parse(e),a=n+"/3f0/hd.cloud.iqiyi.com/d?dn="+i.host+"&business=pcwPlayer&cross-domain=1",k.v.request({url:a,withCredentials:!1,success:function(e){t(e)},failure:function(e){t(e)}});case 3:case"end":return r.stop()}}),r)})));return function(e){return n.apply(this,arguments)}}();k.v.request({url:E.e.ipUrl,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";");n(df+"//"+t[0])}},failure:function(e){}})}else t(e)},hf=n(467),pf="1",vf="10",yf="101";A.a.browser.iPad?(pf="2",vf="20",yf="202"):(A.a.os.ios||A.a.os.android)&&(pf="2",vf="20",yf="201");var gf="window";A.a.os.ios||A.a.os.mac?gf="mac":A.a.os.android&&(gf="android");var mf=new k.c,_f=new Promise((function(e){var t=setTimeout((function(){e()}),2e3);mf.once("ok",(function(){clearTimeout(t),e(),mf=null}))})),bf=new(function(){function e(){o()(this,e)}return u()(e,[{key:"os",get:function(){return gf}},{key:"pf",get:function(){return pf}},{key:"p",get:function(){return vf}},{key:"p1",get:function(){return yf}},{key:"p_code",get:function(){return this.pf+"_"+this.p+"_"+this.p1}},{key:"getDrmType",value:function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1;break;case 8:t=2}return t}},{key:"getPingbackDfp",value:function(e){function t(){return k.n.get()}return new Promise((function(n){_f.then((function(){var r=t();r?n(r):e&&parseInt(e.t,10)>0?"undefined"==typeof window.dfp?Object(hf.a)("//security.iqiyi.com/static/cook/v1/cooksdk.js",(function(e){e&&"undefined"!=typeof window.dfp?(k.n.setSDK(window.dfp),n(t())):n("")})):(k.n.setSDK(window.dfp),n(t())):n("")}))}))}},{key:"browserName",value:function(){return A.a.browserName()}},{key:"noticeSenderFlush",value:function(){clearTimeout(this.__timer),this.__timer=setTimeout((function(){mf&&mf.emit("ok")}),50)}}]),e}());function xf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var kf=[],wf=[],Sf=function(e){f()(n,e);var t=xf(n);function n(){return o()(this,n),t.call(this)}return u()(n,[{key:"add",value:function(e,t){if(Object(k.w)(e))for(var n=0;n<e.length;n++)this.add(e[n],t);else{var r=!0===t?wf:kf;-1===r.indexOf(e)&&r.push(e)}}},{key:"remove",value:function(e){if(Object(k.w)(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var n=kf.indexOf(e);n>-1&&kf.splice(n,1)}}},{key:"removeAll",value:function(){kf.splice(0,kf.length)}},{key:"has",value:function(e){return kf.concat(wf).indexOf(e)>-1}}]),n}(k.c),Tf=function(){function e(t,n){o()(this,e),this.proxy=t.playproxy,this.engine=t,this.logger=new _.a("PlayProxyEvent[".concat(t.id,"]")),this.initFeatureDuration(),this.initSkipTailTime(),this.initDecode(),this.initKernelEvent(),C.a.beforeunloadListener();var r=this;this.unloadEvent=function(){t.pingbackV6.sendEndPlayPingback(3),t.pingbackV6.sendClosePingBack(),r.sendStuckdetl(1),t.pingbackV6.sendWaitingPingback(r.proxy.isAd())},window.addEventListener("beforeunload",this.unloadEvent),this.visibilityChange((function(){t.pingbackV6.sendClosePingBack()})),this._needPlay=!0,this._recoverMediaNum=0,this._recoverMediaPerNum=0,this._recoverMediaMax=3,this._dashAuthNum=0,this._dashAuthMax=2,this._isRequestAuthing=!1,this.followUpNextLoadFlag=!1,this.statusPool=new Sf,this.showLogin=!1,this.abtest=null,this.isDianShiJu=!1,this.PCW_1_film_reco=null}var t,n;return u()(e,[{key:"_statusChanged",value:function(e,t,n){var r=this.proxy,i=this.logger,a=this.getData();a.state=e,t&&(a.actionType=t.actionType||of.Action_Type_Native,t.gas&&(a.gas=t.gas),t.spend&&(a.spend=t.spend)),r.currStatus===e&&!0!==n||(this.updateStatusPool(e),r.currStatus=e,r.fire(b.a.NTF_StatusChanged,a),i.debug("core status changed: "+e))}},{key:"initDecode",value:(n=i()(m.a.mark((function r(){var e,t,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=this.proxy,t=this.engine,this.movieinfo,n=this,e.on(of.NTF_StatusChanged,(function(r){switch(r.status){case of.Status_Loadstart:e.isAd()||"ad"===r.eventOrigin?"ad"===r.eventOrigin?n._statusChanged(b.a.Status_AdLoadstart,r,!0):n._statusChanged(b.a.Status_AdLoadstart,r):(C.a.tvid(t.getMovieInfo().tvid),C.a.bossStatus(t.movieinfo.current.bossStatus)),C.a.stopHeartBeat();break;case of.Status_Canplay:e.isAd()&&n._statusChanged(b.a.Status_Ready,r);break;case of.Status_Loaddone:n._statusChanged(b.a.Status_Loaddone,r);break;case of.Status_Stalled:e.isAd()&&n._statusChanged(b.a.Status_AdStalled,r);break;case of.Status_LoadFailed:e.isAd()?(n._statusChanged(b.a.Status_AdError,r),e.kiwi.isAbortedCurrentGas()&&(this.logger.info("error && isAbortedCurrentGas to abortAllares"),t.pingbackQOS.sendLogToCompass("KIWI-AD-LOAD-ERROR"),e.abortAllAres())):(e._timeMark=0,n._statusChanged(b.a.Status_PlayError,r)),n.followUpNextLoadFlag||(n.followUpNextLoadFlag=!0,e.fire(b.a.NTF_FollowUpNextLoad,"")),C.a.stopHeartBeat();break;case of.Status_Play:e.isAd()&&e.kiwi.setAbortedCurrentGas(!1),n._statusChanged(b.a.Status_Play,r);break;case of.Status_Will_Stoped:e.isAd()&&n._statusChanged(b.a.Status_AdWillPlayEnded,r)}})),[[of.NTF_CanPlayThrough,b.a.NTF_CanPlayThrough,b.a.NTF_AD_CanPlayThrough],[of.NTF_VolumeChanged,b.a.NTF_VolumeChanged,b.a.NTF_AD_VolumeChanged],[of.NTF_DurationChanged,b.a.NTF_DurationChanged,b.a.NTF_AD_DurationChanged],[of.NTF_TimeUpdate,b.a.NTF_TimeUpdate,b.a.NTF_AD_TimeUpdate],[of.NTF_Progress,b.a.NTF_Progress,b.a.NTF_AD_Progress],[of.NTF_RateChanged,b.a.NTF_RateChanged,b.a.NTF_AD_RateChanged]].forEach((function(t){t[0]==of.NTF_TimeUpdate?e.on(t[0],(function(n){var r=(new Date).getTime();0===e._timeMark&&(e._timeMark=r),e.isAd()||e.isPatch()||e.currStatus==of.Status_Stalled||e.currStatus==of.Status_Waiting||e.currStatus==of.Status_Paused||e.currStatus==of.Status_Stoped||e.currStatus==of.Status_LoadFailed||(e._playingDuration+=r-e._timeMark,e._playingSpend+=r-e._timeMark,e._maxpt=Math.max(e._maxpt,n.current)),e._timeMark=r,e.fire(e.isAd()?t[2]:t[1],n)})):e.on(t[0],(function(n){e.fire(e.isAd()?t[2]:t[1],n)}))}));case 4:case"end":return r.stop()}}),r,this)}))),function(){return n.apply(this,arguments)})},{key:"initFeatureDuration",value:function(){var e=this,t=this.proxy;this.lastCurrentTime=undefined,t.on(of.NTF_TimeUpdate,(function(){if(!t.isAd()&&!t.isPatch()){var n=t.getCurrenttime();e.lastCurrentTime=n;var r=1e3*t.getCurrenttime();t.checkAppendPatch(),t.checkAuthTime(r),e._checkSecondAuthTime(r)}}))}},{key:"initSkipTailTime",value:function(){var e=this,t=this.proxy,n=this.engine;t.on(of.NTF_TimeUpdate,(function(){if("1"===e.PCW_1_film_reco&&!t.isAd()&&!t.isPatch()){var r,i=t.getCurrenttime();e.lastCurrentTime=i;var a=1e3*t.getCurrenttime(),o=-1===n.getSkipTailTime()||0===n.getSkipTailTime()?t.getDuration():n.getSkipTailTime();1===(null==n||null===(r=n.getMovieInfo())||void 0===r?void 0:r.cid)&&!t.isTailTime&&t.getDuration()&&-1===n.getMovieInfo().ctt&&a>=1e3*(o-180)&&(t.isTailTime=!0,t.fire(b.a.TVG_SCROLL,{is_scroll:!0}))}}))}},{key:"updateStatusPool",value:function(e){var t=this.statusPool;switch(e){case b.a.Status_StartPlay:t.add([b.a.Status_StartPlay],!0);break;case b.a.Status_EveryStartPlay:t.add([b.a.Status_EveryStartPlay]),bf.noticeSenderFlush();break;case b.a.Status_AdStartPlay:t.add([b.a.Status_AdStartPlay],!0);break;case b.a.Status_ADEveryStartPlay:t.add([b.a.Status_ADEveryStartPlay]),bf.noticeSenderFlush();break;case b.a.Status_Playing:t.add([b.a.Status_Play,b.a.Status_Playing]),t.remove([b.a.Status_Idle,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play,b.a.Status_Paused,b.a.Status_Waiting]);break;case b.a.Status_Paused:t.add(b.a.Status_Paused),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play]);break;case b.a.Status_Waiting:t.add(b.a.Status_Waiting),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Paused,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play]);break;case b.a.Status_PlayError:t.add(b.a.Status_PlayError),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing]),bf.noticeSenderFlush();break;case b.a.Status_Stoped:t.add(b.a.Status_Stoped),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting]);break;case b.a.Status_End_Play:t.add(b.a.Status_End_Play),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting])}}},{key:"getData",value:function(){var e=this.engine,t=e.movieinfo,n=e.playerVersion,r={},i=t.current;return r.tvid=i.tvid,r.vid=i.vid,r.albumId=i.albumId||"",r.cid=i.cid||"",r.duration=i.duration||"",r.privateVideo="0",r.origin="",r.playerVersion=n,r.uvt=i.uvt,r}},{key:"_checkSecondAuthTime",value:function(e){var t=this,n=this.logger,r=this.engine,i=this.proxy,a=i.kiwi,o=r.movieinfo,s=i._playingSpend,u=o.current;if(!this._isRequestAuthing&&u.isVIP&&!u.hasSendSecondAuthRemote&&s>u.authRTime)try{var c=o.getVDInfo(),l={};if("ts"===c.fileFormat||"mp4"===c.fileFormat)Object(k.C)(l,u.authShare),Object(k.C)(l,{tvid:u.tvid,aid:u.albumId,vid:c.vid,cid:u.cid,timeSpan:Math.floor(1e3*i.getCurrenttime()),fileFormat:c.fileFormat,shareFlag:1});else{if("f4v"!==c.fileFormat)return;for(var d,f=0;f<a.fragments.length;f++)if(e/1e3<=a.fragments[f].endTime){d=a.fragments[f];break}d||(d=a.fragments[0]);var h=d.uri.toString();l=k.K.query2Json(h);var p=k.K.filename(window.location.protocol+""+h);Object(k.C)(l,{filename:p,tvid:u.tvid,aid:u.albumId,fileFormat:c.fileFormat,shareFlag:1})}this._isRequestAuthing=!0,E.a.request({params:l,user:C.a},(function(){n.debug("second boss "),t._isRequestAuthing=!1,u.hasSendSecondAuthRemote=!0}),(function(){t._isRequestAuthing=!1,u.hasSendSecondAuthRemote=!0}))}catch(nh){n.error(nh&&nh.stack?nh.stack:nh)}}},{key:"destory",value:function(){var e=this.proxy.kiwi;e.off(Zd.ERROR,this.onKernelError),e.off(Zd.STATE_CHANGE,this.onStatusChanged),e.off(Zd.MSE_ATTACHING,this.onMediaAttaching),e.off(Zd.BUFFER_CREATED,this.onMediaBufferCreated),e.off(Zd.BUFFER_APPENDING,this.onMediaBufferAppending),e.off(Zd.BUFFER_APPENDED,this.onMediaBufferAppended),e.off(Zd.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),e.off(Zd.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),e.off(Zd.DNS_PARSER_SUCCESS,this.onDNSParser),window.removeEventListener("beforeunload",this.unloadEvent),this.lastCurrentTime=undefined}},{key:"initKernelEvent",value:function(){var e=this,t=this.proxy.kiwi;this.onKernelError=function(t){return e._onKernelError(t)},this.onStatusChanged=function(t){return e._onStatusChanged(t)},this.onMediaAttaching=function(t){return e._onMediaAttaching(t)},this.onMediaBufferCreated=function(t){return e._onMediaBufferCreated(t)},this.onMediaBufferAppending=function(t){return e._onMediaBufferAppending(t)},this.onMediaBufferAppended=function(t){return e._onMediaBufferAppended(t)},this.onDataSourceStageSwitching=function(t){return e._onDataSourceStageSwitching(t)},this.onDataSourceStageSwitched=function(t){return e._onDataSourceStageSwitched(t)},this.onDNSParser=function(t){return e._onDNSParser(t)},t.on(Zd.ERROR,this.onKernelError),t.on(Zd.STATE_CHANGE,this.onStatusChanged),t.on(Zd.BUFFER_CREATED,this.onMediaBufferCreated),t.on(Zd.BUFFER_APPENDING,this.onMediaBufferAppending),t.on(Zd.BUFFER_APPENDED,this.onMediaBufferAppended),t.on(Zd.MSE_ATTACHING,this.onMediaAttaching),t.on(Zd.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),t.on(Zd.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),t.on(Zd.DNS_PARSER_SUCCESS,this.onDNSParser)}},{key:"_onKernelError",value:function(e){var t=e.severity,n=e.category,r=e.code,i=e.data&&e.data.length>0&&e.data[0]?e.data[0].gas:null,a=this.proxy,o=this.logger,s=this.engine,u=s.pingbackQOS,c=s.pingbackV6,l=s.movieinfo;if(c.sendWaitingPingback(a.isAd()),r==tf.DATA_AUTH_Error&&"CDN"==s.getCurrLoaderMode()&&this._dashAuthNum<this._dashAuthMax){var d=l.getVDInfo();this._dashAuthNum++,o.log("kiwi auth error, num="+this._dashAuthNum),a.switchVdAction({vd:d.vd,bid:d.bid,fileFormat:d.fileFormat})}else if(t===Bt.a.RECOVERABLE&&(r===tf.MEDIA_HIGH_BUFFER&&this._recoverMediaPerNum<this._recoverMediaMax||r!==tf.MEDIA_HIGH_BUFFER&&this._recoverMediaNum<this._recoverMediaMax)){var f=a.getCurrenttime(),h=this._recoverMediaNum;r==tf.MEDIA_HIGH_BUFFER?(this._recoverMediaPerNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaPerNum++,h=this._recoverMediaPerNum):(this._recoverMediaNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaNum++,h=this._recoverMediaNum),1==h&&u.sendLogToCompass("KIWIR-"+Nt.a[n]+"-"+r);var p=R.a.KIWIR+"-"+r+"-"+h;if(c.sendErrorPlayPingback("",p),a.hasSeeking=!0,o.warn("errorCode: ".concat(p,", ErrorSeverity.RECOVERABLE： ").concat(Bt.a.RECOVERABLE)),1==s.getVideoCoding())return void this.hevcDemotion();a.kiwi.recoverMedia()}else if(t===Bt.a.IGNORABLE){if(a.isAd()){var v=R.a.KIWI+"-"+r;u.sendLogToCompass(R.a.AD+"-"+v),c.sendErrorPlayPingback("",v)}a._statusChanged({status:of.Status_LoadFailed,actionType:!1,gas:i||s._getCurrentGas()})}else if(a._statusChanged({status:of.Status_LoadFailed,actionType:!1,gas:i||a.getCurrentGas()}),a.isAd()){var y=R.a.KIWI+"-4703";u.sendLogToCompass(R.a.AD+"-"+y),c.sendErrorPlayPingback("",y),o.warn("kernel error: KIWI-"+r)}else o.error("kernel error: "+Nt.a[n]+"-"+r+", "+e.data.join("-")+", recoveryNum="+this._recoverMediaNum),this.brokedown(R.a.KIWI,r)}},{key:"codePlay",value:function(){var e=this.engine,t=this.proxy,n=this.logger;this.statusPool;this._needPlay=!1;var r=t.play();r&&(t._duringPlay=!0,r.then((function(){var r,i,a,o,s,u,c;(t._duringPlay=!1,e.mutedstartplay=!1,n.log("Automatic playback started!"),null==t||!t.afterAd||null!==C.a&&void 0!==C.a&&C.a.isLogin())||(self.isDianShiJu=!(2!==(null==e||null===(r=e.getMovieInfo())||void 0===r?void 0:r.cid)&&1!==(null==e||null===(i=e.getMovieInfo())||void 0===i?void 0:i.cid)&&4!==(null==e||null===(a=e.getMovieInfo())||void 0===a?void 0:a.cid)&&6!==(null==e||null===(o=e.getMovieInfo())||void 0===o?void 0:o.cid)||null!=e&&null!==(s=e.getMovieInfo())&&void 0!==s&&s.isVIP||1!==(null==e||null===(u=e.getMovieInfo())||void 0===u?void 0:u.ctype)),self.isDianShiJu&&(t.afterAd=!1,t.fire(b.a.AUTO_CHECK_LOGIN,{from:"afterAdCheck",albumId:null==e||null===(c=e.getMovieInfo())||void 0===c?void 0:c.albumId,time:(new Date).getTime()})))}),(function(r){r&&("NotAllowedError"===r.name||r.message&&/the user didn't interact with the document first/gi.test(r.message))?(n.warn("Automatic playback failed, muted video and then try to play!"),e.mutedstart=!0,e.setVolume(0,!0),t.fire(b.a.NTF_PLAY_MUTED,{status:"playfailmuted"}),t.play().then((function(){n.warn("Play muted playback successful!"),t._duringPlay=!1,t.fire(b.a.NTF_MutedStartPlay),e.mutedstartplay=!0}),(function(){t._duringPlay=!1,t._needPlay=!0,n.warn("Play muted playback failed, & Show a UI element to let the user manually start playback.!"),t._canGetVideoInfo(!0),t.fire(b.a.NTF_NeedUserGesture4Playback)}))):(t._duringPlay=!1,t._needPlay=!0)})))}},{key:"_onStatusChanged",value:(t=i()(m.a.mark((function a(e){var t,n,r,i,o,s,u,c,l,d,f,h,p,v,y,g,_,x,w,S,T,P,E,I,D,L;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.engine,n=this.proxy,r=this.logger,i=this.statusPool,o=t.sptr,s=t.sbtr,u=t.pingbackV6,c=t.pingbackQOS,t.movieinfo,l=n.isPatch(),"playing"!==(d=e.state)&&"pause"!==d&&"stop"!==d&&"error"!==d||(n.hasSeeking=!1),!l||-1!==["loadedmetadata","playing","ended"].indexOf(d)){a.next=8;break}return a.abrupt("return");case 8:a.t0=d,a.next="loadedmetadata"===a.t0?11:"playing"===a.t0?27:"pause"===a.t0?71:"waiting"===a.t0?76:"seeking"===a.t0?83:"seeked"===a.t0?91:"progress"===a.t0?97:"EOR"===a.t0?99:"EOP"===a.t0?101:"willended"===a.t0?103:"beforeended"===a.t0?105:"ended"===a.t0?107:"loadstart"===a.t0?112:"loaderseek"===a.t0?114:"loaderpump"===a.t0?116:"muxswallow"===a.t0?118:"muxspit"===a.t0?120:"error"===a.t0?122:123;break;case 11:if(!t.autoplay||!this._needPlay||n._videoSwitchPause){a.next=20;break}if(!t.isPatch()){a.next=15;break}return n.play(),a.abrupt("return");case 15:if(!t.errorcode||"A00302"===t.errorcode.code||!n.isAd()){a.next=17;break}return a.abrupt("return");case 17:this.codePlay(),a.next=23;break;case 20:f=n.currentRollAdDone&&t.hasStatus(b.a.Status_AdStartPlay),h=!t.hasStatus(b.a.Status_AdStartPlay)&&n.isBeforeReadyPlayed,A.a.os.isMobileTerminal&&!t.autoplay&&(f||h)?(this.codePlay(),n.currentRollAdDone=!1):(n.pause(),r.warn("Pause video! cause params => autoplay=false or autoplay=0 "),n._canGetVideoInfo(!0),n.fire(b.a.NTF_NeedUserGesture4Playback));case 23:return n._videoSwitchPause=undefined,n._videoSwitching=undefined,n.isAd()||this._statusChanged(b.a.Status_LoadedMetaData,e),a.abrupt("break",123);case 27:if(n._videoSwitchPause=undefined,n._notPlayTimer&&(clearTimeout(n._notPlayTimer),n._notPlayTimer=null),n.tempStore.isFirstVV&&!n.tempStore.__sendFirstFrameShow&&(n.tempStore.__sendFirstFrameShow=!0,o.plyaetm=+new Date,o.adUsedTime=o.adaetm-o.adastm,o.plyUsedTime=o.plyaetm-o.plyastm,o.ffetm=o.plyaetm,n.isAd()?(o.ffstm=o.psdklstm-1,o.ffetm=o.psdklstm-1,o.vcletm=o.plyaetm):(o.vclstm=o.psdklstm-1,o.vcletm=o.psdklstm-1,o.ffetm=o.plyaetm),this.getUserIpInfo()),n._paused=!1,p={status:of.Status_Play,actionType:n._checkActionType(of.Status_Play)},v=n.currStatus,y=n.isDelayPlay(),g=!1,s.isSeekingStatus()&&s.mediaPlaying(),n._statusChanged(p),n.isAd()){a.next=55;break}if(n._firstPlay&&(n._firstPlay=!1,g=!0,n._canGetVideoInfo(!0),this._statusChanged(b.a.Status_StartPlay,p)),i.has(b.a.Status_EveryStartPlay)||this._statusChanged(b.a.Status_EveryStartPlay,p),!l){a.next=46;break}return n._patchFirstPlay&&(n._patchFirstPlay=!1,this._statusChanged(b.a.Status_PatchStartplay,p)),this._statusChanged(b.a.Status_Playing,p),a.abrupt("return");case 46:n._patchFirstPlay=!0;case 47:this._statusChanged(b.a.Status_Playing,p),g&&u.sendTimingPingback(),v!==b.a.Status_Waiting&&v!==b.a.Status_Play||(u.sendPlayingPingback(),u.sendWaitingPingback(n.isAd())),n.tempStore.__sendMovieFirstFrameShow||(n.tempStore.__sendMovieFirstFrameShow=!0,u.sendStartPlayPingback(),n.tempStore.isFirstVV&&(c.sendPlayTimeRecord(),"play"===k.K.query("__pmobius__")&&c.sendLogToCompass("MOBIUS-MOVIE-".concat(n.kiwi.currentLoaderMode.toUpperCase())))),C.a.openHeartBeat(),C.a.keepalive(),a.next=60;break;case 55:n._patchFirstPlay=!1,n._ADFirstPlay&&(n._ADFirstPlay=!1,n._canGetVideoInfo(!0),this._statusChanged(b.a.Status_AdStartPlay,p),r.log("ad start play,params: info = cur ad!")),i.has(b.a.Status_ADEveryStartPlay)||this._statusChanged(b.a.Status_ADEveryStartPlay,p),"play"===k.K.query("__pmobius__")&&c.sendLogToCompass("MOBIUS-AD"),this._statusChanged(b.a.Status_AdPlaying,p);case 60:return C.a.updateVipTypes(),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,_={},t.isInteractVideo&&(_.uniqueId=t.iv_state.uniqueId,_.isInteractVideo=!0,_.tvid=t.getMovieInfo().tvid,_.vid=t.getMovieInfo().vid),n.fire(b.a.NTF_FollowUpNextLoad,_)),y&&n.clearDelayPlayInfo(!1),n.tempStore.__nsta||(n.tempStore.__nsta=!0,t.notyfyADInfo({type:"video-play"})),n.tempStore.__sendADStartPPB||(n.tempStore.__sendADStartPPB=!0,u.sendADStartPlayPingback()),this.sendStuckdetl(2),s.isSeekingStatus()&&(s.end(),c.sendSeekBenchmark(),"seek"===k.K.query("__pmobius__")&&c.sendLogToCompass("MOBIUS-SEEK-".concat(s.cost))),n.video().blobUrlMalformed&&(n.video().blobUrlMalformed=!1,c.sendLogToCompass("URLBLOB_WAKED")),this._dashAuthNum=0,this._recoverMediaPerNum=0,a.abrupt("break",123);case 71:return n._paused=!0,x={status:of.Status_Paused,actionType:n._checkActionType(of.Status_Paused)},n._statusChanged(x),n.isAd()?this._statusChanged(b.a.Status_AdPaused,x):(n._timeMark=0,this._statusChanged(b.a.Status_Paused,x),C.a.stopHeartBeat()),a.abrupt("break",123);case 76:return n._paused=!0,w={status:of.Status_Waiting,actionType:n._checkActionType(of.Status_Waiting)},S=n.isAd(),n._statusChanged(w),S?this._statusChanged(b.a.Status_AdWaiting,w):(n._timeMark=0,this._statusChanged(b.a.Status_Waiting,w),C.a.stopHeartBeat()),(S||n._firstPlay)&&(!S||n._ADFirstPlay)||n.hasSeeking||n.kiwi.rebooting||!n.tempStore.__nsta||(u.waitingStartTime=+new Date),a.abrupt("break",123);case 83:return T=n.getCurrenttime(),P=n.getDuration(),n._videoSwitchPause=undefined,n._paused=!0,s.mediaSeeking(),n.fire(n.isAd()?b.a.NTF_AD_Seeking:b.a.NTF_Seeking,{current:T,duration:P,actionType:n._checkActionType(of.NTF_Seeking)}),this.lastCurrentTime=undefined,a.abrupt("break",123);case 91:return E=n.getCurrenttime(),I=n.getDuration(),n.hasSeeking=!1,s.mediaSeeked(),n.fire(n.isAd()?b.a.NTF_AD_Seeked:b.a.NTF_Seeked,{current:E,duration:I,actionType:of.Action_Type_Code}),a.abrupt("break",123);case 97:return n.fire(of.NTF_Progress,{buffer:n.getBufferTime()}),a.abrupt("break",123);case 99:return t.episode.finishPres(t.getMovieInfo().tvid,!0),a.abrupt("break",123);case 101:return n._statusChanged({status:of.Status_Loaddone,actionType:!1}),a.abrupt("break",123);case 103:return n._statusChanged({status:of.Status_Will_Stoped,actionType:!1}),a.abrupt("break",123);case 105:return n.kiwi.loop=t.cyclePlay,a.abrupt("break",123);case 107:return n._paused=!0,D=t.getMovieInfo(),L={status:of.Status_Stoped},(n.isAd()||!n.isAd()&&n.checkAuthTime(D.isVIP&&D.previewTime<Infinity?D.previewTime+1:1e3*n.getCurrenttime()))&&(n._statusChanged(L),this._clearWaitingTime(),n.isAd()?this._statusChanged(b.a.Status_AdPlayEnded,L):(n._timeMark=0,n.isLast()&&this._statusChanged(b.a.Status_Stoped,L)),C.a.stopHeartBeat()),a.abrupt("break",123);case 112:return(n.isAd()||e.gas)&&n._statusChanged({status:of.Status_Loadstart,eventOrigin:"ad",gas:e.gas}),a.abrupt("break",123);case 114:return s.isSeekingStatus()&&s.seekLoader(),a.abrupt("break",123);case 116:return s.isSeekingStatus()&&s.pumpLoader(e.data),a.abrupt("break",123);case 118:return s.isSeekingStatus()&&s.muxSwallow(),a.abrupt("break",123);case 120:return s.isSeekingStatus()&&s.muxspit(),a.abrupt("break",123);case 122:n.isAd()&&n.kiwi.isAbortedCurrentGas()&&(this.logger.info("error && isAbortedCurrentGas to abortAllares"),c.sendLogToCompass("KIWI-AD-LOAD-ERROR"),n.abortAllAres());case 123:case"end":return a.stop()}}),a,this)}))),function(e){return t.apply(this,arguments)})},{key:"_onMediaBufferCreated",value:function(){this._needPlay=!0}},{key:"_onMediaBufferAppending",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppending()}},{key:"_onMediaBufferAppended",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppended()}},{key:"_onMediaAttaching",value:function(){this.proxy.fire(b.a.NTF_SRC_Attaching)}},{key:"_onDataSourceStageSwitching",value:function(){var e=this.proxy;if(clearTimeout(e._switchDelayTimer),clearTimeout(e._switchAudioDelayTimer),e._switchDelayTimer=null,e._switchAudioDelayTimer=null,e.switchVmsRequest&&e.switchVmsRequest){var t=e.switchVmsRequest.getXhrRequest();t&&t.abort&&t.abort()}}},{key:"_onDataSourceStageSwitched",value:function(){this._recoverMediaNum=0}},{key:"_onDNSParser",value:function(e){this.logger.info("DNSParser => "+k.f.stringify(e)),this.engine.pingbackQOS.sendQOSReport({type:"DNSParser",para:e})}},{key:"brokedown",value:function(e,t,n){var r=this.proxy,i=this.engine,a=this.logger,o=i.pingbackV6,s=i.pingbackQOS;r.pause();var u=this.getData();u.type=e,u.code=t,u.st=n||"";var c=e+"-"+t;if(n&&(c+="-"+n),512==n&&Object(E.j)())r.fire(b.a.NTF_BuyPlay,u);else{a.info("playproxy brokedown, pingback, ec = ".concat(c)),t&&t!==R.a.P07001&&o.sendErrorPlayPingback("",c,n),i.errorcode=u,r.fire(b.a.NTF_Error,u),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,r.fire(b.a.NTF_FollowUpNextLoad,""));var l=E.e.url,d=this;ff(l,(function(e){d.logger.info("request, dnsparser, info = "+e+",url = "+l),d.getUserIpInfo((function(){s.sendLogToCompass(c)}))}))}}},{key:"getUserIpInfo",value:function(e){var t=this;C.a.getUserIPInfo((function(n){var r=C.a.getUid(),i="";r||(i=k.k.get("P00002")),t.logger.info("user info, uid = "+r+", P00002 = "+i+", P00003 = "+k.k.get("P00003")+",v.f4v = "+k.f.stringify(n)),e&&e()}))}},{key:"_clearWaitingTime",value:function(){this.engine.pingbackV6.clearWaitingTime()}},{key:"sendStuckdetl",value:function(e){var t=this.engine.pingbackV6;t.waitingStartTime>0&&this.engine.pingbackQOS.sendStuckdetl(e,t.waitingStartTime,this.proxy.isAd())}},{key:"hevcDemotion",value:function(){var e=k.k.get(k.l.QP0034);(e=e&&k.f.parse(e))&&e.hvc&&(this.engine.pingbackQOS.sendHEVCDemotion(),k.k.set(k.l.QP0038,1,{expires:12e4,path:"/",domain:"iqiyi.com",response:null}),this.logger.warn("hevc demotion from error"),setTimeout((function(){window.location.reload()}),300))}},{key:"visibilityChange",value:function(e){var t,n;A.a.os.isMobileTerminal&&("undefined"!=typeof document.hidden?(t="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,(function(){document[t]&&(console.log("页面被置于后台"),e())}),!1))}}]),e}(),Pf=n(670);function Ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ef(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function If(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Df=window.location.protocol,Lf=function(e){f()(x,e);var t,r,a,s,c,l,d,h,p,v,g=If(x);function x(e){var t;return o()(this,x),(t=g.call(this,e)).logger=new _.a("PlayProxy[".concat(e.id,"]")),t.engine=e,t.knlRevision=Fe,t.currStatus="",t._firstPlay=!0,t._ADFirstPlay=!0,t._patchFirstPlay=!0,t._timeMark=0,t._vdsSwitch=!1,t._playingDuration=0,t._playingSpend=0,t._maxpt=0,t._skipHT=0,t._skipTT=0,t.__canGetVideoInfo=!1,t._autoVdEnable=!1,t._autoVdUsing=!1,t.autoVdValue=-1,t.tempStore={isFirstVV:!0},t.failProgramKey=undefined,t._isAllowSeek=!0,t._isAllowPlay=!0,t._isDelayPlay=!1,t._delayPlayTime=0,t._delayTimer=null,t._absDashRequests=[],t._absDashResponses=[],t._isMobiusTest="performance"===k.K.query("__pmobius__")&&"true"==k.K.query("debug"),t._videoMark=(new Date).getTime(),t.rat="",t.currentRollAdDone=!1,t.afterAd=!1,t.showLogin=!1,t.isTailTime=!1,t._notPlayTimer=setTimeout((function(){t.engine.pingbackQOS.sendLogToCompass("TIMEOUT-60S-NOT-PLAY")}),6e4),t}return u()(x,[{key:"canaryCdnLoader",value:function(){if(!this.p2pEnabled())return!0;var e=k.K.query("__ploader__");if(e){if("cdn"===e)return!0;if("p2p"===e)return!1}return!1}},{key:"init",value:function(e,t){Ne()(y()(x.prototype),"init",this).call(this,e);var n=this,r=this.engine,i=r.pack,a=(r.pingbackQOS,r.canary);this.useVP9P2P=a.canaryVP9_P2P,this.useAV1P2P=a.canaryAV1_P2P,this.useCDNLoader=this.canaryCdnLoader(t),this.provider=new lf(this.engine),i.ad||(this.adDisable=!0);var o=new _.a("");Object(qe.b)(o);var s,u,c=(s=e,u={muxWorker:!0,timeline:"timeline/pcw-vod"},qe.a.log("kiwi version is ".concat(Fe)),new Xd(s,u));window.kiwi=this.kiwi=c,c.on(Zd.FPS_REPORT,(function(e){n.fire(b.a.NTF_FPS_REPORT,e)})),this._eventer=new Tf(this.engine),!!this.engine.params.sourcePage&&"home"==this.engine.params.sourcePage||this.useCDNLoader||0!=a.queryBid||(this._autoVdEnable=!0,1===parseInt(k.k.get(k.l.QP0025),10)?this._autoVdUsing=!1:(this._autoVdUsing=!0,"string"==typeof this.autoVdValue&&(this.autoVdValue=Number(this.autoVdValue)))),this.getAdLog()}},{key:"p2pEnabled",value:function(e){if(!window.Map||A.a.browser.WECHAT)return!1;if(this.engine.params.feedMode||this.engine.isMini)return!1;if(e){var t=this._transformFFToKernelKnown(e),n="false"!==I.a.read("QiyiPlayerP2P");return t===ef.JDASH||n&&(t===ef.DASH_AV1||t===ef.DASH_VP9||t===ef.HLS)}return!0}},{key:"load",value:function(e){var t=this,n=this.engine,r=this.logger,a=this.provider,o=this.kiwi,s=this.engine,u=s.episode,c=s.movieinfo,l=e.tvid,d=e.vid,f=e.ugcAuthKey,h=e.imageLoader,p=e.startPlayTime,v=e.isSupportAI,y=e.isAdvanceEnd,g=e.share_sTime,_=e.share_eTime,x=e.video_opt,k=e.apdl,w=this.hasPreload(l),S="load movieInfo, tvid=".concat(l,", vid=").concat(d);if(n.preVideoParam||(n.preVideoParam=e),c.tvid!=l||c.vid!==d||f||n.isInteractVideo){var T="check failProgramKey, tvid = ".concat(l," , key = ").concat(this.failProgramKey);if(this.failProgramKey&&this.failProgramKey.tvid&&(T+=",key.tvid = ".concat(this.failProgramKey.tvid,", num = ").concat(this.failProgramKey.num),this.failProgramKey.tvid==l&&this.failProgramKey.num>=3))r.info(T);else{parseInt(l,10)<9e7&&r.error("Core Player load movie info error,params: msg = "+l+"is invalid qipu id"),this._firstPlay=!0,this._ADFirstPlay=!0,this._patchFirstPlay=!0,c.setStartPlayTime(p>0?p:0),c.tvid&&u.clear(c.tvid),f&&(c.ugcAuthKey=f||"",a.clearCache(l)),n.adWholeCorner=!1;var P=c.current;c.current={preparing:!0,tvid:l,vid:d,albumId:e.albumId,adPlayerID:e.cid,imageLoader:h,isPreload:w,isAdvanceEnd:e.isAdvanceEnd,video_opt:x},P.tvid&&(S+=", preTvid=".concat(P.tvid),this.fire(b.a.NTF_VideoChange,{preMovieInfo:P,curMovieInfo:c.current})),u.valid(l,!0),clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.fire(b.a.NTF_VRSStart,{data:this._eventer.getData(),movieinfo:c.current}),this.clearDelayPlayInfo(!1),r.info(S),a.getPromise(l,d,{apdl:k}).then(function(){var a=i()(m.a.mark((function o(i){var a,s,d;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i.prelude&&(t._skipHT=i.prelude.headTime,t._skipTT=i.prelude.tailTime,t._skipHTS=i.prelude.headTimeS,t._skipTTE=i.prelude.tailTimeE),!i.parts){o.next=7;break}return o.next=4,t.getPatchData(i.parts,i);case 4:a=o.sent,i.parts=a,r.info("load movieInfo ok, has parts, type = ".concat(a.type));case 7:if(i.imageLoader=h||"",i.isSupportAI=Boolean(v),i.isAdvanceEnd=Boolean(y),i.video_opt=x,e.cid&&(i.adPlayerID=e.cid),c["switch"](i),c.initShareTime(g,_),s=c.current,u.setInfo(l,s),d=c.getVDInfo(),s.duration=d.duration,t.fire(b.a.NTF_VRSReady,{data:t._eventer.getData(),movieinfo:s}),n.eventlog.vrsready=!0,P.tvid&&t.fireChanged(),!t.adDisable&&!u.finishPres(l)){o.next=24;break}return o.next=24,t.concatCurFeature(l);case 24:s.isPreload=!1,s.preparing=!1,t.fire(b.a.NTF_VRSDone);case 27:case"end":return o.stop()}}),o)})));return function(e){return a.apply(this,arguments)}}(),(function(e){var n="check failProgramKey ++, tvid = ".concat(l," , key = ").concat(t.failProgramKey);t.failProgramKey?t.failProgramKey.tvid==l&&t.failProgramKey.num++:t.failProgramKey={tvid:l,num:1},n+=",key.tvid = ".concat(t.failProgramKey.tvid,", num = ").concat(t.failProgramKey.num),r.info(n),c.setInfo(e.movieinfo);var i=e.level,a=e.type,s=e.code,u=e.st;switch(i){case 0:case 2:o.reset(),t._eventer.brokedown(a,s,u);break;case 1:o.reset(),t.noticeRecharge(s);break;default:r.error(e&&e.stack?e.stack:e)}c.current.preparing=!1,t.fire(b.a.NTF_VRSDone),P.tvid&&t.fireChanged()}))}}else r.error("tvid vid should not the same")}},{key:"preload",value:function(e,t){var n=this,r=this.engine,a=r.episode,o=r.movieinfo;a.valid(e,!0),this.provider.getPromise(e,t).then((function(t){n.checkVipPay(t.vipBlock,t.vipTheatre,t.albumId,t.authTipType,function(){var r=i()(m.a.mark((function s(r){var i;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n.logger.info("preload movieInfo ok,checkVipPay = ".concat(r," ")),!r){s.next=3;break}return s.abrupt("return");case 3:if(!t.parts){s.next=9;break}return s.next=6,n.getPatchData(t.parts,t);case 6:i=s.sent,t.parts=i,n.logger.info("preload movieInfo ok, has parts, type = ".concat(i.type));case 9:o.preload(t),a.setInfo(e,t),n.fire(b.a.NTF_VRSPreloaded,{movieinfo:t});case 12:case"end":return s.stop()}}),s)})));return function(e){return r.apply(this,arguments)}}())}),(function(e){n.logger.warn("preload movie which requires auth: "+k.f.stringify(e))}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"getCurrentGas",value:function(){var e=this.engine;return this.isAd()?this.kiwi.getCurrentADGas():{videoEventId:k.i.getEventId(e.movieinfo.tvid)}}},{key:"isAd",value:function(){return this.kiwi.isAd}},{key:"isPatch",value:function(){return!!this.engine.movieinfo.parts&&this.kiwi.isQBBPatching}},{key:"isLast",value:function(){return!!this.kiwi.eot}},{key:"_transformFFToKernelKnown",value:function(e){var t;if(e in ef)t=e;else switch(e){case"flv":case"f4v":t=ef.FLV;break;case"ts":case"265ts":t=ef.HLS;break;case"m4s":t=ef.JDASH;break;case"dash_vp9":t=ef.DASH_VP9;break;case"dash_av1":t=ef.DASH_AV1;break;case"mp4":t=ef.MP4;break;default:var n="unhandled movie info fileFormat: ".concat(e,".");throw this.logger.error(n),new Error(n)}return t}},{key:"_getManifest",value:(v=i()(m.a.mark((function w(e,t){var r,i,a,o,s,u,c,l,d,f,h,p,v,y,g,_,b,x,S,T,P,A,I,D,L,O,R,M,B,N,F,q,j,U,V,H,z,G;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:a=[],o=this.p2pEnabled(e.fileFormat),s=t.isVIP,u=t.boss,c=t.vid,l=t.tvid,d=t.albumId,f=t.baseUrl,m.t0=e.fileFormat,m.next="ts"===m.t0?6:"265ts"===m.t0?11:"f4v"===m.t0?16:"m4s"===m.t0?59:"mp4"===m.t0?63:"dash_vp9"===m.t0||"dash_av1"===m.t0?67:74;break;case 6:return r=ef.HLS,Object(k.y)(e.playlist)&&e.a&&(e.playlist.accelerator=e.a),i={m3u8:e.playlist,bid:e.bid},a=["manifest/hls",o?"loader/p2p":"loader/hls","mux/m2ts-mp4","renderer/mse"],m.abrupt("break",74);case 11:return r=ef.HLS,Object(k.y)(e.playlist)&&e.a&&(e.playlist.accelerator=e.a),i={m3u8:e.playlist,bid:e.bid},a=["manifest/hls-265",o?"loader/p2p":"loader/hls","mux/m2ts-mp4","renderer/mse"],m.abrupt("break",74);case 16:r=ef.F4V,a=["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],i={bid:e.bid,fs:[]},v=e.playlist.length,h=k.L.getFluid(),p+="&su="+h,p+="&mi=tv_"+d+"_"+l+"_"+c,p+="&ct="+e.vd,p+="&retry=",p+="&client=",p+="&z=",p+="&bt=",p+="&e=",y=E.a.getPreviewTime(l,u)||Infinity,g=0,_=0;case 32:if(!(_<v)){m.next=58;break}if(b=e.playlist[_],x=b.d,S=b.l,!(y>0&&g>=y)){m.next=36;break}return m.abrupt("break",58);case 36:if(g=x,T=Df+f+S+(/\.f4v$/gi.test(S)?"?":"&")+p,!s){m.next=52;break}return-1==T.indexOf("&vid=")&&(T+="vid="+c),P=u.data.t,A=E.a.getAuthUid(l)||u.data.u,T+="&t="+P,-1==(T+="&cid=afbe8fd3d73448c9").indexOf("&ib=")&&(T+="&ib=8"),-1==T.indexOf("&ptime=")&&(y=y==Infinity?0:y,T+="&ptime="+y),T+="&QY00001="+A,I=P+k.K.filename(T),m.next=50,n.e(1).then(n.t.bind(null,576,7));case 50:D=m.sent,T+="&ibt="+D.mmc(I,I);case 52:-1==T.indexOf("&pv=")&&(T+="&pv=0.1"),-1==T.indexOf("&qyid=")&&(T+="&qyid="+h),i.fs.push({duration:x/1e3,url:T});case 55:_++,m.next=32;break;case 58:return m.abrupt("break",74);case 59:return r=ef.JDASH,i=Af({bid:e.bid},e.playlist),a=["manifest/jdash","loader/p2p","renderer/mse"],m.abrupt("break",74);case 63:return r=ef.MP4,i={src:e.playlist,levelId:e.bid,duration:e.duration,byteLength:e.vsize},a=["manifest/mp4","loader/mp4","mux/mp4-fmp4","renderer/mse"],m.abrupt("break",74);case 67:return"dash_vp9"===e.fileFormat?r=ef.DASH_VP9:"dash_av1"===e.fileFormat?r=ef.DASH_AV1:this.logger.error("DASH unknown codec ".concat(e.code)),a=["manifest/dash",o?"loader/p2p":"loader/dash","renderer/mse"],L=e.playlist,!e.playlist&&e.a&&e.mk&&e.ml&&(L={playlist:{accelerator:e.a,mk:e.mk,ml:e.ml,duration:e.duration}}),i={mpd:L,bid:e.bid,type:r},e.drm&&(i.drm=e.drm),m.abrupt("break",74);case 74:if(!o){m.next=84;break}return i.other={tvid:t.tvid,vid:e.vid,vsize:e.vsize,aid:t.albumId,vidlist:[],everList:[],atkList:this.getAtkList(t)},O="",m.next=79,C.a.isVip();case 79:for(R=m.sent,M=C.a.isLogin(),B=0;B<t.vidl.length;B++)N=t.vidl[B],(F=N.bid)&&(q=N.vid,j=N.fileFormat,U=N.ever||"",V=N.vsize,H=N.duration,z=500===F&&M||F>500&&R||F<500||t.isTryWatch,O+=", ".concat(F,"-").concat(q,"-").concat(j,"-").concat(z),i.other.vidlist.push({bid:F,vid:q,vsize:V,duration:H,canplay:z}),i.other.everList.push({bid:F,ever:U}));G=i.other.vidlist,this.logger.info("vidlist: ".concat(O,", length = ").concat(G.length));case 84:return m.abrupt("return",{components:a,manifestType:r,manifestContent:i});case 85:case"end":return m.stop()}}),w,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getAtkList",value:function(e){var t=[];try{var n=!1;if(e.rat&&(this.rat&&this.rat===e.rat?n=!1:(this.rat=e.rat,n=!0)),n)for(var r=0;r<30;r++){var i=Object(Pf.parseRiskAnswerToken)(e.rat,e.tvid+"");t.push(i)}return t}catch(nh){return[]}}},{key:"getManifestTypes",value:function(){return ef}},{key:"clear",value:function(){var e=this.engine,t=e.adproxy,n=e.episode;this.adDisable||t.clear(),this.tempStore={isFirstVV:!1},this._vdsSwitch=!1,this.currStatus="",clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.kiwi.reset(),n.clearAll(),this._clearAbsDashHttp(),this.engine.errorcode=undefined}},{key:"getAdLog",value:function(){var e=this;clearTimeout(this.getLogTimeout);var t=this.engine.adproxy,n="";!this.adDisable&&t&&(n=t.getAdLog()),this.logger.adInfo(n),this.getLogTimeout=setTimeout((function(){e.getAdLog()}),3e4)}},{key:"destory",value:function(){this.clear(),this.provider.clearAll(),this._eventer.destory(),this.kiwi.destroy(),this.removeAllEventsListener()}},{key:"_getDataFlow",value:function(e){var t=undefined,n="getDataFlow, ..";if(e&&(t={},e.segments&&(t.stream=e.segments,n="getDataFlow, segments length = ".concat(t.stream.length)),e.tracks)){var r=e.tracks,i=r.video,a=r.audio;t.audio={duration:a.duration,init:a.initSegment,segments:a.segments},t.video={duration:i.duration,init:i.initSegment,segments:i.segments},n="getDataFlow, audio.length = ".concat(a.segments.length,"， video.length=").concat(i.segments.length)}return this.logger.info(n),t}},{key:"getDynamicArgs",value:function(){var e=this,t=this.engine;if(!this.p2pEnabled())return null;var n=t.pingbackV6,r=t.pingbackQOS;return{checkIsMobius:function(){return e._isMobiusTest},switchAutoDef:function(r){var i=k.m.getOldVd(r);if(e.isAd())e.logger.info("p2p dashUpdated error , levelID or streamInfo is undefined");else{var a=e.getCurrentVD(),o=k.m.getNewVd(a);e.logger.info("p2p switchAutoDef, auto=".concat(t.autoVdUsing,", vd = ").concat(a," -> ").concat(i,", levelID = ").concat(o," -> ").concat(r)),e.switchVdAction(i,!0),t.autoVdUsing&&(parseInt(r)>parseInt(o)?n.sendAutoUpToVDPingback(i,a):parseInt(r)<parseInt(o)&&n.sendAutoDwnToVDPingback(i,a))}},noticeRefreshMovieData:function(){e.provider.clearAll(),e.setDefList(!0)},getUserInfo:function(e){C.a.isVip((function(t){e({uid:C.a.getUid(),isVip:t})}))},sendPingBack:function(e){r.sendQOSReport(e)},startPlayed:function(){return!e._firstPlay},getOldVd:function(e){return k.m.getOldVd(e)},ccm:af.a,abs:!0,noticeDashRequest:function(t,n,r){e.logger.info("p2p noticeDashRequest tvid: ".concat(t,", bid: ").concat(n,", vid: ").concat(r)),e.getAbsDefData(t,n,r)}}}},{key:"concatCurFeature",value:(p=i()(m.a.mark((function S(e){var t,n,r,i,a,o,s,u,c,l,d,f,h,p,v,y,g,_,b;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=this.engine,n=this.provider,r=this.logger,i=this.kiwi,a=t.movieinfo,o=t.episode,s=t.sptr,u=a.getVDInfo(),c=a.current,l=a.startPlayTime,d=n.getPid(c.tvid),f=n.getData(d),m.next=8,this._getManifest(u,c);case 8:if(h=m.sent,p=h.manifestContent,v=h.components,this.p2pEnabled(u.fileFormat)&&(p.other.feed=!0,p.other.fromlist=!1,p.other.listdone=!1),f&&!o.finishFeatures(e)){m.next=15;break}return r.info("".concat(d," still not ready")),m.abrupt("return");case 15:u.duration>0&&(c.duration=u.duration,l>=c.duration&&(a.startPlayTime=0)),y=a.getPlayHead(),g=y.timeRanges,_=y.playHeadTime,this._eventer._recoverMediaNum=0,p&&(o.finishFeatures(e,!0),r.info("concat cur episode: ".concat(e,", vd:").concat(u.vd,", bid:").concat(u.bid,", fileFormat:").concat(u.fileFormat,",playHeadTime:").concat(_,",timeRanges:").concat(g,"，duration: ").concat(c.duration,", other: ").concat(k.f.stringify(p.other))),this.tempStore.isFirstVV&&!this.tempStore.__sendFirstFrameShow&&(s.ffstm=+new Date),i.loadSource(p,_,g,{streamType:T.Episode,components:v,dynamicArgs:this.getDynamicArgs()}),t.autoVdUsing&&(b=i.episodeStream)&&b.loader.changeAbsState(!0));case 19:case"end":return m.stop()}}),S,this)}))),function(e){return p.apply(this,arguments)})},{key:"concatPreloadFeature",value:(h=i()(m.a.mark((function L(e){var t,n,r,i,a,o,s,u,c,l,d;return m.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=this.logger,n=this.kiwi,r=this.engine,i=r.movieinfo,a=r.episode,o=a.getInfo(e),s=i.getPlayTimeRanges(!0),u=i.getVDInfo(!0),f.next=7,this._getManifest(u,o);case 7:c=f.sent,l=c.manifestContent,d=c.components,this.p2pEnabled(u.fileFormat)&&(l.other.feed=!0,l.other.fromlist=!1,l.other.listdone=!1),t.log("concat preload episode: ".concat(e)),a.finishFeatures(e,!0),n.loadSource(l,null,s,{isCurrent:!1,streamType:T.Episode,components:d,dynamicArgs:this.getDynamicArgs()});case 14:case"end":return f.stop()}}),L,this)}))),function(e){return h.apply(this,arguments)})},{key:"checkPreload",value:function(){var e=!0,t=this.engine.getMovieInfo(),n=this.getCurrenttime(),r=this.getDuration();return e=(e=(e=(e=(e=e&&!this.isAd())&&!this.engine.cyclePlay)&&this.kiwi.endOfDown)&&t.previewTime===Infinity)&&r-n>=5}},{key:"getCurrenttime",value:function(){var e=0,t=this.getDuration();if(this.isAd()){var n=this._getAdTimeObj();e=n.curTime,t=n.duration}else e=this.getDecodeCurrenttime();return e<t||isNaN(t)?e:t}},{key:"getDuration",value:function(){var e=0,t=this.engine.movieinfo,n=t.current,r=t.getVDInfo();return this.isAd()?e=this._getAdTimeObj().duration:(e=n.isVIP&&n.isTryWatch&&r?r.duration:this.kiwi.duration,r&&A.a.os.isMobileTerminal&&(e=r.duration)),e}},{key:"_getAdTimeObj",value:function(){var e=0,t=0,n=!1,r=this.engine,i=this.kiwi,a=r.episode,o=r.adproxy;if(this.isAd()){var s=o.getAdInfo();if("midroll"==s.rollType){var u=a.getMids(s.videoId);u.length>0&&(n=!!u[0].isFusionMode)}if(n)e=i.currentTime,t=i.duration;else if(e=i.currentTime||0,i.findPieceAt){var c=i.findPieceAt(e);c&&(e-=c.fragment.startTime,t=c.fragment.duration)}}return{curTime:e,duration:t}}},{key:"refresh",value:function(e){var t,n;"object"==Me()(e)?(t=e,n=e.type):(t={},n=e);var r=this.engine.movieinfo,i=r.current,a=i.tvid,o=i.vid,s=i.adPlayerID;a&&(r.next.isPreload=!1,r.clear(),this.clear(),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(b.a.Status_Idle),this.provider.clearAll(a),this.logger.log("Core Player refresh， type = "+n),this.fire(b.a.NTF_VideoRefresh),this.load(Af({tvid:a,vid:o,cid:s},t)))}},{key:"abortAres",value:function(){this.isAd()&&this.kiwi.abortCurrentADGas()}},{key:"abortAllAres",value:function(e,t){var n=this;setTimeout((function(){n.logger.info("abort all ".concat(e," roll, movieRecoverPoint=").concat(t));var r=null;switch(e){case"preroll":r=P.PRE_ROLL;break;case"midroll":r=P.MID_ROLL;break;case"briefRoll":r=P.INDETERMINACY_ROLL}if(t!==undefined){var i=n.isAd();n.fire(b.a.NTF_Before_Seeking,{currentTime:n.getCurrenttime(),isAd:i,gas:i?n.getCurrentGas():undefined})}n.kiwi.abortRollingStream(r,t)}),0)}},{key:"lockSeek",value:function(){this._isAllowSeek=!1}},{key:"unlockSeek",value:function(){this._isAllowSeek=!0}},{key:"lockPlay",value:function(){this._isAllowPlay=!1}},{key:"unlockPlay",value:function(){this._isAllowPlay=!0}},{key:"pause",value:function(e,t){this._duringPlay&&!t||(this._videoSwitching&&t&&(this._videoSwitchPause=!0),this.logger.log("Engine:request pause actionType =".concat(e,", force=").concat(t)),Ne()(y()(x.prototype),"pause",this).call(this,e,t))}},{key:"seek",value:function(e,t,n,r){var i=this.engine,a=i.pingbackV6;i.currentRate;if(this._isAllowSeek){var o=this.getDuration();e>o&&(e=Math.floor(o));var s=this.isAd();this.logger.log("Engine:seek(".concat(e,"), duration (").concat(o,"),isManualAction=").concat(t,", isAd=").concat(s)),this.fire(b.a.NTF_Before_Seeking,{currentTime:this.getCurrenttime(),isAd:s,gas:s?this.getCurrentGas():undefined}),e=parseFloat(e),this.hasSeeking=!0,this.checkAuthTime(1e3*e)&&(t?(this._currentManualAction=of.NTF_Seeking,this.getCurrenttime()?a.sendSeekPingback("drag",e,Math.floor(this.getCurrenttime())):this.logger.log("Engine:start time access error")):(this._currentCodeActionList.push(of.NTF_Seeking),"issvp"===r&&a.sendSeekPingback("ta_auto",e,Math.floor(this.getCurrenttime()))),this.checkchangerange(e),this.kiwi.currentTime=e,this.isPaused()&&!n&&this.play())}}},{key:"checkchangerange",value:function(e){if(this.engine.skip&&this._skipTT>0&&e>this._skipTT){var t=[[0,this.getDuration()]];this.kiwi.timeRanges=t}}},{key:"checkAuthTime",value:function(e){var t=!0,n=this.engine.getMovieInfo();return n.isVIP&&e>=n.previewTime&&(A.a.os.isMobileTerminal&&this.noticeRecharge("Q00304"),t=!1,this.engine.emit("seek_open_vip")),t}},{key:"noticeVidChanged",value:function(e,t){var n=this.engine.movieinfo;e?(n.vd=t,this.engine.vd=t,this.logger.log("definition changed: ".concat(t))):this.logger.log("definition changeFail: ".concat(t)),this._vdsSwitch=!1,this.fire(b.a.NTF_DefinitionSwitched,{curVD:t,success:e,isManualAction:this.__isManualAction}),this.__isManualAction=!1}},{key:"switchData",value:(d=i()(m.a.mark((function O(e){var t,n,r,i,a,o,s,u,c,l,d,f,h,p,v,y,g,_,b,x=this,k=arguments;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=k.length>1&&k[1]!==undefined&&k[1],n=this.kiwi,r=this.engine,i=this.logger,a=r.movieinfo,o=r.autoVdUsing,s=!1,u=e.vd,m.next=7,this._getManifest(e,a.current);case 7:if(c=m.sent,l=c.manifestType,d=c.manifestContent,f=c.components,!n.allowSwitchVariant){m.next=25;break}h=n.currentManifestType,p=null!==h&&l!==h,y=!(v=!(!o||!t))&&l!==ef.DASH_AV1&&l!=ef.DASH_VP9&&l!==ef.JDASH,p&&(s=!0),this.p2pEnabled(e.fileFormat)&&(d.other.feed=!t,d.other.fromlist=!1,d.other.listdone=!1),(g=a.getVDInfo()).fileFormat!==e.fileFormat&&(_={components:f}),i.info("switchVD: ".concat(g.vd,"->").concat(e.vd,", ").concat(g.bid,"->").concat(e.bid,", ").concat(g.fileFormat,"->").concat(e.fileFormat,", fromP2P=").concat(t,", absing=").concat(o)),n.switchLevel(d,s,y,v,_),m.next=27;break;case 25:return i.warn("switchVD, failed, this stream will end, can't switch variant!"),m.abrupt("return");case 27:t?this.noticeVidChanged(!0,u):s||this.video().readyState<3?this.once(of.NTF_TimeUpdate,(function(){x.noticeVidChanged(!0,u)})):(b=parseInt(1e3*n.bufferInfo.media.len/this.getPlaybackRate()+"",10),this.logger.log("will switch Variant after: "+b/1e3+"s"),this._switchDelayTimer=setTimeout((function(){x.noticeVidChanged(!0,u)}),b)),this.switchVmsRequest=this.switchVmsResponse=null;case 29:case"end":return m.stop()}}),O,this)}))),function(e){return d.apply(this,arguments)})},{key:"switchDefinition",value:function(e,t,n){var r=this.engine;e===this.getCurrentVD()&&!r.autoVdUsing||e===this.autoVdValue&&(r.autoVdUsing||!r.autoVdEnabled)||(e===this.autoVdValue?(this.switchVdAction(e),this.fire(b.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.fire(b.a.NTF_DefinitionSwitched,{curVD:e,success:!0,isManualAction:!0})):(this.__isManualAction=t,this._vdsSwitch=!0,this.fire(b.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.switchVdAction(e)))}},{key:"switchAudioTrack",value:(l=i()(m.a.mark((function R(e){var t,r,i,a,o,s,u,c,l,d,f,h,p,v,y=this;return m.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,n.e(1).then(n.t.bind(null,576,7));case 2:if(r=g.sent,i=this.engine,a=i.movieinfo,o=i.pingbackQOS,s=i.sptr,u=i.spt,c=a.current,l=null===(t=c.audl)||void 0===t?void 0:t.types,!(Array.isArray(l)&&l.length<=1)){g.next=8;break}return g.abrupt("return");case 8:c.oldLid=c.currentLid||"",d=a.vidl,f=c.vid,h=this.getCurrentVD(),this.logger.log("switch audio: ".concat(c.oldLid,"->").concat(e)),p=0;case 14:if(!(p<d.length)){g.next=21;break}if(d[p].vd!=h){g.next=18;break}return f=d[p].vid,g.abrupt("break",21);case 18:p++,g.next=14;break;case 21:for(h=k.m.getNewVd(h),v=0;v<l.length;v++)l[v].id===e&&(1!==l[v].ispre?(new E.b).request({params:{tvid:c.tvid,vid:f,vd:h,lid:e,tryCount:0,switchvd:!0,spt:u},pingback:o,platform:A.a,hostUseIP:!1,sptr:s,vpsFeatures:E.k,mmc:r,user:C.a},(function(t){if(t.data&&t.data.st){var n=parseInt(t.data.st,10),i=t.data,a=i.boss_ts?"boss_ts":"boss";if(100<n&&n<200)if(i.program&&i.program.audio){i[a]&&i[a].code&&c.boss&&c.boss.data&&(c.boss=i[a]),c.audio=i.program.audio;var o=Object(E.g)(c,!0,{platform:A.a,mmc:r});c.audl=o,o&&o.audio?y._switchAudio(o.audio,e):y.getAdFail()}else y.getAdFail();else y.getAdFail()}else y.getAdFail()}),(function(){y.getAdFail()})):this._switchAudio(null,e));case 23:case"end":return g.stop()}}),R,this)}))),function(e){return l.apply(this,arguments)})},{key:"switchVdAction",value:(c=i()(m.a.mark((function M(e){var t,n,r,i,a,o,s,u,c,l,d,f,h,p,v=this,y=arguments;return m.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(t=y.length>1&&y[1]!==undefined&&y[1],n=this.engine,r=this.logger,i=this.kiwi,a=n.movieinfo,o=n.sptr,s=n.pingbackQOS,u=n.spt,c=i.episodeStream,e!=this.autoVdValue){g.next=10;break}return this._autoVdUsing=!0,c&&c.loader.changeAbsState&&c.loader.changeAbsState(!0),r.log("switchVD, changed, -> ".concat(e,", changeABS -> true, absing = ").concat(n.autoVdUsing)),k.k.set(k.l.QP0025,"0",{expires:2592e5,path:"/",domain:"iqiyi.com"}),g.abrupt("return");case 10:if("object"===Me()(e)&&(e=e.vd),l=a.getVDInfo(!1,e),this.p2pEnabled(l.fileFormat)&&!t&&(r.log("switchVD, changed, -> ".concat(e,", changeABS -> false")),this._autoVdUsing=!1,k.k.set(k.l.QP0025,"1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),c&&c.loader.changeAbsState&&c.loader.changeAbsState(!1)),!l.playlist){g.next=18;break}this.switchData(l,t),g.next=23;break;case 18:return d=a.current,f=d.tvid,h=d.vid,p=d.ugcAuthKey,r.info("switchVD, tvid=".concat(f,", vid=").concat(h,", isLogin=").concat(C.a.isLogin(),", vd=").concat(l.vd,", bid=").concat(l.bid)),g.next=22,this.requestDash({params:{tvid:f,vid:l.vid,vd:l.bid,tryCount:0,switchvd:!0,spt:u,ugcAuthKey:p},pingback:s,sptr:o,hostUseIP:!1},{targetVd:l.vd,fileFormat:l.fileFormat},(function(e){if(e){for(var n=a.current.vidl,i=0;i<n.length;i++)if(n[i].vd==e.vd){n[i]=e;break}v.switchData(e,t)}else r.info("switchVD, load movieInfo from vrs failed, fromP2P=".concat(t)),t||v.noticeVidChanged(!1,l.vd)}));case 22:this.switchVmsRequest=g.sent;case 23:case"end":return g.stop()}}),M,this)}))),function(e){return c.apply(this,arguments)})},{key:"getAdFail",value:function(){var e=this.logger,t=this.engine,n=t.pingbackQOS,r=t.getMovieInfo();r.currentLid=r.oldLid,this.fire(b.a.NTF_AudioSwitched,{success:!1}),e.info("switch audio Fail!"),n.sendLogToCompass("KIWI-SWITCH-AUDIO-FAIL")}},{key:"_switchAudio",value:function(e,t){var n=this,r=this.logger,i=this.kiwi,a=this.engine.getMovieInfo();if(i.switchAudioTrack(e,!1),this.video().readyState<3)this.once(of.NTF_TimeUpdate,(function(){a.currentLid=t,n.fire(b.a.NTF_AudioSwitched,{success:!0})}));else{var o,s,u=i.bufferInfo.media,c=null!==(o=u.buffered)&&void 0!==o&&o.audio?null===(s=u.buffered)||void 0===s?void 0:s.audio:u,l=parseInt(1e3*c.len/this.getPlaybackRate()+"",10);r.log("will switch audio after: "+l/1e3+"s"),this._switchAudioDelayTimer=setTimeout((function(){a.currentLid=t,n.fire(b.a.NTF_AudioSwitched,{success:!0})}),l)}}},{key:"getBufferTime",value:function(){var e=0;return this.isAd()||(e=this.kiwi.dataBufferInfo.end),e}},{key:"setSkipPrelude",value:function(){var e=this.kiwi,t=this.engine,n=t.movieinfo,r=t.skip,i=n.getPlayTimeRanges();if(this._skipTailTipped=!1,e.timeRanges=i,n.parts)if(r){if(this._skipTT>0){var a=e.patchStream;a&&this._skipTT>0&&e["delete"](a)}}else n.parts.patchFeeded_=!1}},{key:"adjustTimeRange",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this.engine.movieinfo,r=n.current,i=n.next,a=r;if(t&&(a=i),e.length>0){var o=a.duration,s=e[0][e[0].length-1],u=1;o>0&&s<o&&s+u>=o?s=o:s+=u,e[0][e[0].length-1]=s}return e}},{key:"getCurrentVD",value:function(){return parseInt(this.engine.movieinfo.vd,10)}},{key:"_canGetVideoInfo",value:function(e){var t=this;this.__canGetVideoInfo=e,e&&this.getVideoInfo((function(e){if(e){var n=t.engine.getMovieInfo();e.sid&&(n.sid=e.sid,n.albumId=e.sid),n.ctype=e.cType}}))}},{key:"getVideoInfo",value:function(e){var t=this,n=t.engine,r=n.movieinfo,i=n.local,a=r.current,o=r.next;if(t.__canGetVideoInfo){var s=a;s.tvid||(s=o),D.a.get({tvid:s.tvid,vid:s.vid,locale:i},(function(n){n.vi&&(t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom?(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH):(n.vi.isI5Custom=!1,n.vi.IPARTMENT5_DANMUSWITCH="0")),e(n)}))}else setTimeout((function(){var n={tvid:a.tvid,vid:a.vid,albumId:a.albumId,cid:a.cid,vi:{vid:a.vid,videoQipuId:a.tvid}};t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom&&(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH),e(n)}),0)}},{key:"getVideoInfoByTvid",value:function(e,t){D.a.get({tvid:e,vid:"",locale:this.engine.local},(function(e){t(e)}))}},{key:"hasPreload",value:function(e){var t=this.engine.episode;return e+="",t.finishPres(e)&&t.finishFeatures(e)}},{key:"switchVideo",value:function(e){var t=this.logger,n=this.engine,r=n.movieinfo,i=n.pingbackV6,a=e.tvid,o=e.vid,s=e.cid,u=e.imageLoader,c=e.vfrm,l=e.vfrmblk,d=e.vfrmrst,f=e.startPlayTime,h=e.isSupportAI,p=e.share_sTime,v=e.share_eTime,y=e.isAdvanceEnd,g=e.video_opt,m=e.apdl,_=e.innerIV,x=e.interactionType,w=e.isEnabledInteraction,S=r.current,T=r.next,P=!0===e.autoSwitch&&!!this.hasPreload(a,o);if(this.failProgramKey=undefined,this._videoSwitchPause=undefined,this._videoSwitching=!0,this.afterAd=!1,this.showLogin=!1,this.isTailTime=!1,n.preVideoParam=e,a=Object(nf.a)(a),parseInt(a)===parseInt(S.tvid)&&!n.isInteractVideo)t.info("switch video,params: data =   ".concat(k.f.stringify(e),", engine.isInteractVideo: ").concat(n.isInteractVideo," , tvid: ").concat(a,", current.tvid: ").concat(S.tvid,"   switch fail : Tvid is same"));else{var E={vfrm:c||"",vfrmblk:l||"",vfrmrst:d||"",vfrmtp:e.autoSwitch?3:0,vvauto:e.autoSwitch?4:2,bkt:e.bkt||"",e:e.e||"",stype:e.stype||"",r_area:e.r_area||"",r_source:e.r_source||""};i.setvvfrom(e.vvfrom),i.setPlayPingbackInfo(E),i.sendEndPlayPingback(P?1:2,S.tvid),i.sendWaitingPingback(this.isAd());this.provider.clearAll(S.tvid),this._clearAbsDashHttp(),P?this.tempStore={isFirstVV:!1}:(T.isPreload=!1,this.pause(),this.clear(P),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(b.a.Status_Idle)),this._preplaying_spend=this._playingSpend,this._playingSpend=0,this._maxpt=0,this._videoMark=(new Date).getTime(),function(){e.autoSwitch=P;var r="\nswitch video:"+k.f.stringify(e)+", ivosRuning="+n.ivosRuning,i="\n"+new Array(r.length).join("-");t.log(i+r+i)}();var I,D=1==Number(w)&&(1==Number(x)||0==Number(x))&&!A.a.browser.EDGE;if(this.engine.isIVSubSwitch=!1,D)I=!0,n.isInteractVideo=!0,n.adPlaySource=0,n.others={},n.isIVMain=I,n.interactionMode=x+"",n.initInteractVideo({tvid:a,vid:o||n.params.vid,cid:s,imageLoader:u,isSupportAI:h,isAdvanceEnd:y,resetHistory:!0});else{_?(I=a===n.iv_state.uniqueId,n.interactionMode=n.iv_state.interactionMode,n.isInteractVideo=!0,n.isIVMain=I,n.adPlaySource=61,n.isIVSubSwitch=!0):(n.isInteractVideo=!1,n.adPlaySource=0,n.others={});var L={tvid:a,vid:o||n.params.vid,cid:s,startPlayTime:f,imageLoader:u,isSupportAI:h,isAdvanceEnd:y,video_opt:g,apdl:m};p!==undefined&&(L.share_sTime=p),v!==undefined&&(L.share_eTime=v),this.load(L)}}}},{key:"hasStatus",value:function(e){return this._eventer.statusPool.has(e)}},{key:"getStatusPool",value:function(){return this._eventer.statusPool}},{key:"setEndPlay",value:function(e){this._eventer._statusChanged(b.a.Status_End_Play,e)}},{key:"fireChanged",value:function(){var e=this;e.getVideoInfo((function(t){var n,r,i=e._eventer.getData();(i.vi=t.vi||{},i.vi.vid=i.vid,e.engine.isInteractVideo)?D.a.get({tvid:e.engine.iv_state.uniqueId,vid:i.vid},(function(t){i.vi.unique_vu=t.vi.vu,e.engine.iv_state.isI5Custom&&(i.vi.isI5Custom=!0,i.vi.IPARTMENT5_DANMUSWITCH=e.engine.iv_state.others.IPARTMENT5_DANMUSWITCH||"0"),e.fire(b.a.NTF_VideoChanged,i)})):(null===(n=e.engine.movieinfo)||void 0===n||null===(r=n.current)||void 0===r?void 0:r.tvid)==t.tvid?e.fire(b.a.NTF_VideoChanged,i):(new Image).src="//msg.qy.net/qos?t=11&rpage=vue-ssr&ct=rech_order_er_"+t.tvid+"_"+window.location.hostname+window.location.pathname;e.logger.info("core videoChanged")}))}},{key:"noticeRecharge",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=this.engine,a=i.movieinfo,o=i.params;a.rc_code=e;var s=!1;if(a.vipTypes&&a.vipTypes.length>0)for(var u=0;u<a.vipTypes.length;u++)1==a.vipTypes[u]&&(s=!0);var c=a.vipTypes||[],l=-1!=c.indexOf(1)||-1!=c.indexOf(6);this.pause(!1,!0);var d={tvid:a.tvid,vid:a.vid,code:e,isTennisContent:s,from:t||0,origin:o.origin||o.parentId,vipTypes:a.vipTypes,s3:l?this.hasSeeking?"S109":"S110":"NOREF",s4:l?"SHIKAN":"NOREF",s2:l?window.location.href:"NOREF",emptionType:this.engine.emptionType||0,_event:r._event};n&&""!=n&&(d.urlType=n),this.engine.isInteractVideo&&(d.isInteractVideo=!0,d.uniqueId=this.engine.iv_state.uniqueId);var f=this.engine.getMovieInfo();this.fire(b.a.NTF_Recharge,Object.assign({_v:f},d,r))}},{key:"checkAppendPatch",value:function(){var e=this.engine,t=this.kiwi,n=e.movieinfo,r=e.skip,i=n.parts;if(!(r&&this._skipTT>0)&&i&&!i.patchFeeded_&&(i.patchFeeded_=!0,!t.patchStream)){var a=i.data,o=i.components;t.loadSource(a,null,[[0,Infinity]],{streamType:T.Roll,components:o,roll:{rollType:P.POST_ROLL,category:"patch"}})}}},{key:"getPatchData",value:(s=i()(m.a.mark((function B(e,t){var n,r;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=null,!e.isParsed){i.next=3;break}return i.abrupt("return",e);case 3:if(!e||!t){i.next=8;break}return i.next=6,this._getManifest(e,t);case 6:(r=i.sent).manifestType===ef.F4V&&(r.manifestContent.isAD=!1,r.manifestContent.done=!0,r.manifestContent.rollType=P.POST_ROLL,n={type:r.manifestType,data:r.manifestContent,components:r.components,isParsed:!0});case 8:return i.abrupt("return",n);case 9:case"end":return i.stop()}}),B,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"setDelayPlayInfo",value:function(e){this._isDelayPlay=!0,this._delayPlayTime=e}},{key:"clearDelayPlayInfo",value:function(e){this.fire(b.a.NTF_DelayToPlay_End),clearTimeout(this._delayTimer),this._isDelayPlay=!1,this._delayPlayTime=0,this._delayTimer=null,e&&this.play()}},{key:"play",value:function(e){var t=this,n=this;if(n._isAllowPlay)if(n._isDelayPlay)n.fire(b.a.NTF_DelayToPlay,n._delayPlayTime),n._delayTimer||(this.logger.log("playproxy delay play, timeout start!"),n._delayTimer=setTimeout((function(){t.logger.debug("playproxy delay play, timeout end!"),n.fire(b.a.NTF_DelayToPlay_End),n._delayTimer=null,n._isDelayPlay=!1,n._delayPlayTime=0,Ne()(y()(x.prototype),"play",t).call(t,e)}),n._delayPlayTime));else{if(!this.engine.adproxy.getAdMaxStatus())return Ne()(y()(x.prototype),"play",this).call(this,e);this.engine.emit(b.a.EVT_ADMAX_2_PLAY)}}},{key:"isDelayPlay",value:function(){return this.isDelayPlay}},{key:"checkVipPay",value:function(e,t,n,r,i){var a=C.a.getUid()||"",o=this;e||t?(e&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=I.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&5==s?C.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isVip ").concat(n)),-1!==e.indexOf(4)?r(!0,1):r(!1,n)}),!0):r(!1)}else r(!1)}(e,n,r,i),t&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=I.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&6==s?C.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(n)),-1!==e.indexOf(4)?r(!0,2):r(!1,n)}),!0):r(!1)}else r(!1)}(t,n,r,i)):i(!1)}},{key:"playFromVipPay",value:function(){var e=this.engine.movieinfo.current,t=e.albumId,n=C.a.getUid()||"",r=I.a.read("vipLayer")||"",i=n+"+"+t;if(""!==r){var a=r.split("||");if(a.length>=5)for(var o=0;o<4;o++)i+="||"+a[o];else i=i+"||"+r}I.a.write("vipLayer",i),this.engine.adproxy.initSDK({data:this._eventer.getData(),movieinfo:e})}},{key:"getMP4URLByTvid",value:(a=i()(m.a.mark((function N(e,t){var r,i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=this.engine.spt,a.next=3,n.e(1).then(n.t.bind(null,576,7));case 3:i=a.sent,(new E.b).request({params:{tvid:e,vid:"",k_ft1:"721829383634948",spt:r},hostUseIP:!1,vpsFeatures:E.k,mmc:i,user:C.a},(function(e){var n="";if(e.data&&e.data.st){var r=e.data,i=r.program,a=r.st,o=parseInt(a,10);if(100<o&&o<200&&i&&i.video)for(var s=0;s<i.video.length;s++)i.video[s].mp4Url&&(n=i.video[s].mp4Url)}t(n)}),(function(){t("")}));case 5:case"end":return a.stop()}}),N,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"setDefList",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this,r=this._absDashRequests,a=this._absDashResponses,o=this.engine,s=o.movieinfo,u=o.autoVdUsing,c=o.spt,l=s.current,d=[],f=s.getVDInfo();u?d=l.vidl:t&&(d=[f]);for(var h=d.length,p=0,v=function(){p++;var e=a;if(p==h&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t];r&&(r.other.feed=!1,r.other.fromlist=!0,r.other.listdone=t==e.length-1,n.kiwi.loadSource(r,0,[[]],{streamType:T.Episode,parseMftOnly:!0}))}n._clearAbsDashHttp()}},y=0;y<h;y++)if(d[y].isUsable&&601!==d[y].bid){var g=d[y];t||!g.playlist&&g.vid!==l.vid?function(){var t=i()(m.a.mark((function o(t){var s;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.requestDash({params:{tvid:l.tvid,vid:t.vid,vd:t.bid,switchvd:!0,spt:c}},{targetVd:t.vd,fileFormat:u?f.fileFormat:t.fileFormat},function(){var n=i()(m.a.mark((function o(n){var i,u,c;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((i=r.indexOf(s))>-1&&r.splice(i,1),!n){o.next=10;break}return t.playlist=n.playlist,t.realArea=n.realArea,o.next=7,e._getManifest(n,l);case 7:u=o.sent,c=u.manifestContent,a.push(c);case 10:v();case 11:case"end":return o.stop()}}),o)})));return function(e){return n.apply(this,arguments)}}());case 2:s=o.sent,r.push(s);case 4:case"end":return o.stop()}}),o)})));return function(e){return t.apply(this,arguments)}}()(g):v()}else v()}},{key:"getAbsDefData",value:(r=i()(m.a.mark((function F(e,t,n){var r,a,o,s,u,c,l,d,f,h;return m.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return r=this,a=this._absDashRequests,o=this._absDashResponses,s=this.engine,u=s.movieinfo,c=s.spt,l=u.current,d=u.getVDInfo(),f=k.m.getOldVd(t),p.next=8,r.requestDash({params:{tvid:e,vid:n,vd:t,switchvd:!0,spt:c}},{targetVd:f,fileFormat:d.fileFormat},function(){var n=i()(m.a.mark((function a(n){var i,s,c,d,f,h,p;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=17;break}i=u.current.vidl,s=0;case 3:if(!(s<i.length)){a.next=10;break}if(i[s].vd!=n.vd){a.next=7;break}return i[s]=n,a.abrupt("break",10);case 7:s++,a.next=3;break;case 10:return a.next=12,r._getManifest(n,l);case 12:c=a.sent,(d=c.manifestContent)&&(d.other.feed=!1,d.other.fromlist=!0,d.other.abssuccess=!0,d.other.abstvid=e,d.other.absbid=t,r.kiwi.loadSource(d,0,[[]],{streamType:T.Episode,parseMftOnly:!0}),o.push(d)),a.next=24;break;case 17:return f=u.getVDInfo(),a.next=20,r._getManifest(f,l);case 20:h=a.sent,(p=h.manifestContent)&&(p.other.feed=!1,p.other.fromlist=!0,p.other.absfail=!0,p.other.abstvid=e,p.other.absbid=t),r.kiwi.loadSource(p,0,[[]],{streamType:T.Episode,parseMftOnly:!0});case 24:case"end":return a.stop()}}),a)})));return function(e){return n.apply(this,arguments)}}());case 8:h=p.sent,a.push(h);case 10:case"end":return p.stop()}}),F,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"requestDash",value:(t=i()(m.a.mark((function q(e,t,r){var i,a;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(1).then(n.t.bind(null,576,7));case 2:return i=o.sent,a=e.params.vid,o.abrupt("return",(new E.b).request(Object(k.C)(e,{vpsFeatures:E.k,mmc:i,user:C.a}),(function(e){var n,i;if(e.data&&e.data.program&&e.data.program.video){var o=e.data,s=o.program,u=o.st,c=parseInt(u,10);if(100<c&&c<200&&s.video){var l=t.targetVd,d=t.fileFormat,f=Object(E.h)(s.video,l);if(f&&f.vid==a&&(!d||d==f.fileFormat)){var h=e.data.boss_ts?"boss_ts":"boss";e.data[h]&&(i=e.data[h]),n=f}}}r(n,i)}),(function(){r()})));case 5:case"end":return o.stop()}}),q)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_clearAbsDashHttp",value:function(){this._absDashRequests.forEach((function(e){e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort()})),this._absDashResponses.splice(0,this._absDashResponses.length),this._absDashRequests.splice(0,this._absDashRequests.length)}}]),x}(cf),Of=Lf,Rf=(n(271),"QiyiRecord"),Cf="//l-rcd.iqiyi.com/apis/qiyirc/setrc.php",Mf=function(){function e(t){o()(this,e);var n,r=this,i=!1,a=function(){i||(i=!0,r._record())};r.logger=new _.a("recorder".concat(t.id)),r._core=t,r._isSwitchingDefinition=!1,t.on(b.a.NTF_StatusChanged,(function(e){var i=e.state;if(i===b.a.Status_Playing&&r.startTimer(),i===b.a.Status_Paused||i===b.a.Status_Waiting||i===b.a.Status_Stoped){if(i===b.a.Status_Waiting){if(t.isSeeking())return;if(t.getCurrenttime()<=1)return}if(Math.abs(t.getDuration()-t.getCurrenttime())<=1&&i!==b.a.Status_Stoped)return;n&&clearTimeout(n),r.stopTimer(),r._record(i===b.a.Status_Stoped)}})),t.on(b.a.NTF_Seeked,(function(e){var i=parseInt(e.current,10)||0;n&&clearTimeout(n),n=setTimeout((function(){n=null,t.isAd()||r._record(i)}),1e3)})),t.on(b.a.NTF_DefinitionSwitching,(function(){r._isSwitchingDefinition=!0})),t.on(b.a.NTF_DefinitionSwitched,(function(){r._isSwitchingDefinition=!1})).on(b.a.NTF_VideoChanged,(function(){r._isSwitchingDefinition=!1})),t.once(b.a.NTF_VRSStart,(function(e){t.isInteractVideo||r._getCurrent(e.data.tvid)})),window.addEventListener("unload",a),window.addEventListener("beforeunload",a),window.addEventListener("pagehide",a)}return u()(e,[{key:"stopTimer",value:function(){var e=this;e._timer&&(clearInterval(e._timer),e._timer=null)}},{key:"startTimer",value:function(){var e=this;e._timer||(setTimeout((function(){return e._record()}),5e3),e._timer=setInterval((function(){return e._record()}),12e4))}},{key:"getCKUid",value:function(){return A.a.os.ios||A.a.os.android?k.L.getJsuid():k.L.getFluid()}},{key:"_getCurrent",value:function(e){var t=this;function n(e){var n=e.tvid,r=e.historyTime,i=t._core.getMovieInfo();"".concat(i.tvid)==="".concat(n)?(t.logger.log("Movie History, isLogin="+C.a.isLogin()+", time="+r),t._setStartPlayTime(r),t._core.emit(b.a.NTF_Get_Record)):t._core.emit(b.a.NTF_Get_Record)}function r(r){if(r&&r.videoPlayTime>10){var i={tvid:e,historyTime:r.videoPlayTime};t._core.eventlog.vrsready?n(i):t._core.once(b.a.NTF_VRSReady,(function(){n(i)}))}else t._core.emit(b.a.NTF_Get_Record);t.startTimer()}function i(){var i,a,o=t.getRecordFromStorage(e),s=null===(i=window.QiyiPlayerProphetData)||void 0===i?void 0:i.l,u=((null===(a=window.QiyiPlayerProphetData)||void 0===a?void 0:a.v)||{}).isTryWatch,c=void 0!==u&&u;if(s&&!0!==s.consumed){s.consumed=!0;var l=s.history;o&&o.videoPlayTime&&!c&&l<o.videoPlayTime&&(l=o.videoPlayTime),n({tvid:e,historyTime:l})}else{var d={};d.tvId=e,d.agent_type=1,C.a.isLogin()?k.v.json({url:"//l-rcd.iqiyi.com/apis/qiyirc/getvplay",params:d,timeout:5e3,success:function(e){t._core.pingbackQOS.sendRecordRequest(1);var n=e.data;o&&o.videoPlayTime&&(n||(n=o),n&&o.videoPlayTime>n.videoPlayTime&&(n=o)),r(n)},failure:function(){t._core.pingbackQOS.sendRecordRequest(0),t._core.emit(b.a.NTF_Get_Record)}}):r(c?null:o)}}t._isSwitchingDefinition||(e?i():t._core.getVideoInfo((function(e){i(e.tvid)})))}},{key:"_setStartPlayTime",value:function(e){this.logger.log("play time point from record："+e),this._core.movieinfo.setStartPlayTime(e)}},{key:"_record",value:function(){var e=this,t=!1,n=null;if(arguments.length>0){var r=arguments[0];"boolean"==typeof r?(t=r)&&(n=0):"number"==typeof r&&(n=r)}null===n&&(n=parseInt(e._core.getCurrenttime(),10)||0),e._core.isInteractVideo&&!e._core.isIVMain||e._core.ivosRuning||!e._core.isRecordProgress||e._core.getVideoInfo((function(r){if(C.a.isLogin()){var i=A.a.browser.ipad||A.a.browser.ipod?21:11,a={tvId:r.tvid,terminalId:i,agent_type:1},o=e._core.pingbackV6._getParams(),s=o.s2,u=o.r_area,c={tm:e._core.getPlayingSpend(),ve:e._core.getPlayingTimeMark(),s2:s,s3:e._core.params.vfrmblk||"",vvauto:!0===e._core.autoplay?4:2,r_area:u};a.me=JSON.stringify(c),a.videoPlayTime=n,(a.videoPlayTime>0&&a.videoPlayTime<e._core.getDuration()&!e._core.isAd()&&!e._core.isPatch()||t)&&(e.logger.log("record history："+a.videoPlayTime+", tvid: "+a.tvId+(t?"":", duration: "+e._core.getDuration())),k.v.json({url:Cf,params:a}),e.delRecordAtStorage(r.tvid))}else e._core.isAd()||e.recordAtStorage({videoPlayTime:n,tvId:r.tvid})}))}},{key:"delRecordAtStorage",value:function(e){var t=I.a.read(Rf);if(t){var n=!1;t=(t=JSON.parse(t)).filter((function(t){if(t.tvId!==e)return t;n=!0})),n&&I.a.write(Rf,JSON.stringify(t))}}},{key:"recordAtStorage",value:function(e){var t=I.a.read(Rf);t?(t=JSON.parse(t)).find((function(t){return t.tvId===e.tvId}))?t=t.map((function(t){return t.tvId===e.tvId&&(t=e),t})):t.length>=10?(t=t.slice(1,t.length)).push(e):t.push(e):(t=[]).push(e);I.a.write(Rf,JSON.stringify(t))}},{key:"getRecordFromStorage",value:function(e){var t=I.a.read(Rf);return t?(t=JSON.parse(t)).find((function(t){return t.tvId==e})):null}}]),e}(),Bf=Mf;function Nf(e){return Ff.apply(this,arguments)}function Ff(){return(Ff=i()(m.a.mark((function e(t){var r,i,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(8),n.e(2)]).then(n.bind(null,1122));case 2:r=e.sent["default"],i=_.a.getLog(),a=r.gzip(i),(o=new XMLHttpRequest).open("POST","//qosp.iqiyi.com/crashlog?source=pcwplayer"),o.setRequestHeader("Content-Encoding","gzip"),o.setRequestHeader("Content-Type","application/octet-stream"),o.setRequestHeader("File-Name",t),o.send(a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qf="",jf=document.hidden,Uf=(new _.a("PingbackQOS"),function(){function e(t){o()(this,e),this._core=t,qf=t.playerVersion,this._vvfrom=t.params.vvfrom}var t;return u()(e,[{key:"sendVrsRequestPingback",value:function(){this._send({t:"init"})}},{key:"sendVrsReadyPingback",value:function(){this._send({t:"ready"})}},{key:"sendFinishPresPingback",value:function(){this._send({t:11})}},{key:"sendPlayTimeRecord",value:function(){var e,t,n=this._core.sptr,r=n.plyastm,i=n.plyUsedTime;if(!(i<0)&&/\/(v|w)_/.test(window.location.href)){this._send({t:10,psdklstm:0,psdkletm:n.psdkletm-n.psdklstm,psdkistm:n.psdkistm-r,psdkietm:n.psdkietm-r,vcistm:n.vcistm-r,vcietm:n.vcietm-r,asdklstm:n.asdklstm-r,asdkletm:n.asdkletm-r,asdkistm:null!==(e=window.QiyiPlayerProphetData)&&void 0!==e&&e.v?1:0,asdkietm:null!==(t=window.QiyiPlayerProphetData)&&void 0!==t&&t.a?1:0,adirqstm:n.adirqstm-r,adirqetm:n.adirqetm-r,adsrqstm:n.adsrqstm-r,adsrqetm:n.adsrqetm-r,adlstm:n.adlstm-r,adletm:n.adletm-r,adastm:n.adastm-r,adaetm:n.adaetm-r,plyastm:n.plyastm-r,plyaetm:n.plyaetm-r,ffstm:n.ffstm-r,ffetm:n.ffetm-r,vclstm:n.vclstm-r,vcletm:n.vcletm-r});var a=n.plyaetm-r;a>0&&a<1e4&&this.sendPlayerActionTime(a);var o=Math.random();if(.4<o&&o<.5){var s="TIMING_START_PLAY_".concat(jf);i>1e4&&i<2e4?this.sendLogToCompass("".concat(s,"_10_20")):i>=2e4&&this.sendLogToCompass("".concat(s,"_20"))}}}},{key:"sendSeekBenchmark",value:function(){var e=this._core,t=e.sbtr;0===t.diy_apc||null===t.diy_apstm||t.diy_muxtm>=t.diy_setm||this._send({t:9,ct:"pcwseektc",diy_ismob:k.K.query("__pmobius__")?1:0,diy_manifesttp:e.getCurrManifestType(),diy_sstm:t.diy_sstm,diy_setm:t.diy_setm,diy_vsitm:t.diy_vsitm,diy_vsdtm:t.diy_vsdtm,diy_vptm:t.diy_vptm,diy_lstm:t.diy_lstm,diy_frdtm:t.diy_frdtm,diy_rdc:t.diy_rdc,diy_rdtm:t.diy_rdtm||0,diy_muxc:t.diy_muxc||0,diy_muxstm:t.diy_muxstm||0,diy_muxtm:t.diy_muxtm||0,diy_apc:t.diy_apc,diy_apstm:t.diy_apstm,diy_aptm:t.diy_aptm||0,diy_fdlc:t.diy_fdlc,diy_fdlt:t.diy_fdlt})}},{key:"sendQOSReport",value:function(e){var t={t:11};switch(Object(k.C)(t,e.para),e.type){case"chunkCheck":t.ct="vcut";break;case"DNSParser":t.ct="dlscherr";break;case"BWReport":t.ct="dlbw"}this._send(t)}},{key:"sendStuckdetl",value:function(e,t,n){var r=+new Date-t,i=n?"ad":"video";this._send({t:11,ct:"stuckdetl",jampt:i,isquit:e,replayt:r})}},{key:"sendPlayerActionTime",value:function(e){this._send({t:11,ct:"player",plyaetm:e,rpage:"vue-ssr"})}},{key:"sendHEVCDemotion",value:function(){this._send({t:9,ct:"hevc_demotion",diy_hevcdemotion:1})}},{key:"sendRecordRequest",value:function(e){this._send({t:9,ct:"pcw_common",diy_player_record:e})}},{key:"_send",value:function(e){var t=this._core,n=t.getVideoCoding(),r=t.getMovieInfo(),i=51===(r.vd||"")?59:r.vd||"",a={u:k.L.getFluid()||"",pu:C.a.getUid()||"",p1:bf.p_code,v:qf,ce:k.L.getWeid(),c1:r.cid||"",r:r.tvid||"",ve:k.L.getEid(),de:k.L.getQtsid()||"",pt:t.getCurrenttime(),isdm:0,ra:i,mod:H.local()||"",purl:window.location.href,tmplt:t.getPageTmpltType(),ptid:A.a.getPtid(H.isTWLocale()),os:bf.os,re:window.screen.width+"x"+window.screen.height,nu:k.L.getIsNewUser()?1:0,vfm:k.k.get(k.l.QP005)||"",ispre:t.isTryWatch()?1:0,videotp:"undefined"!=typeof r.is3D?r.is3D:"",drm:bf.getDrmType(r),plyrv:"",rfr:window.document.referrer,fatherid:r.albumId||"",stauto:t.autoVdUsing?1:0,vvfrom:this._vvfrom||"",wtmk:r.watermark||0,algot:t.autoVdAlgot,br:A.a.browser.userAgent,krv:t.kernelVersion||"0.0.0",duby:0},o=t.getCurrManifestType();null!==o&&(-1==o&&Math.random()<.1&&this.sendLogToCompass("mft1"),1===n&&(o=7),Object(k.C)(a,{mft:o}));var s=-1;switch(t.getCurrLoaderMode()){case"CDN":s=0;break;case"P2P":s=1}var u,c=0,l=0,d=-1;if(navigator.connection){var f=navigator.connection.downlink,h=(navigator.connection.effectiveType||"").toLowerCase(),p=(navigator.connection.type||"").toLowerCase();switch(h){case"4g":l=18;break;case"3g":l=17;break;case"2g":l=16;break;case"slow-2g":l=14}switch(p){case"cellular":l=15;break;case"wifi":l=1;break;case"ethernet":l=13;break;case"bluetooth":l=21;break;case"wimax":l=22}var v=t.getDataBufferInfo();v&&(d=v.len),c=f,Object(k.C)(a,{bw:c,ntwk:l,dl:d,ldt:s})}Object(k.C)(e,a),u=e,bf.getPingbackDfp(u).then((function(e){t.getVideoInfo((function(t){C.a.isVip((function(n,r){var i,a={rn:Math.random(),dfp:e,stime:(new Date).getTime(),hu:n?r:-1,ht:null===(i=t.vi)||void 0===i?void 0:i.ht};Object(k.C)(a,u),k.v.beacon(a,Ee.pingbackQosUrl)}))}))}))}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"sendLogToCompass",value:(t=i()(m.a.mark((function n(e){var t,r,i,a,o,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=this._core,r=t.getManifestTypes(),i=t.getCurrManifestType(),a="OTHER"+i,o=(e||"").replace(/-/gi,"_"),n.t0=i,n.next=n.t0===r.HLS?8:n.t0===r.F4V||n.t0===r.FLV?10:n.t0===r.DASH_VP9?12:n.t0===r.DASH_AV1?14:n.t0===r.JDASH?16:18;break;case 8:return a="HLS",n.abrupt("break",18);case 10:return a="F4V",n.abrupt("break",18);case 12:return a="VP9",n.abrupt("break",18);case 14:return a="AV1",n.abrupt("break",18);case 16:return a="JDASH",n.abrupt("break",18);case 18:(s=[]).push(bf.browserName()),s.push(H.isTWLocale()?"TW":"CN"),s.push(a),s.push(o),s.push((qf||"").replace(/\./gi,"")),s.push(k.i.getEventId(t.getMovieInfo().tvid)),Nf(s.join("_"));case 26:case"end":return n.stop()}}),n,this)}))),function(e){return t.apply(this,arguments)})}]),e}()),Vf=n(365);function Hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hf(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.__fpp___=window.__fpp___||Object(Vf.a)();var Gf={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},Wf=function(){function e(t){o()(this,e),this._timer=0,this._core=t,this._sentWaitingBeacon=!1,this._lastFireData={},this._isfan="",this._outerParams={},this._vvfrom=t.params.vvfrom,this.__endpingback=undefined,this.__pingbackList={start:0,vvauto:undefined},this._pbtime=0,this._closesend=!0,this.waitingStartTime=0}return u()(e,[{key:"sendADStartPlayPingback",value:function(){this.__endpingback=undefined,this._send({t:15,pt:""},!0)}},{key:"sendStartPlayPingback",value:function(){var e=this._core,t=e.getMovieInfo(),n={t:1};this.__endpingback=undefined,!self.sendFirstVVAbtest&&e.firstVV&&"history"===t.playStartFrom&&(n.abtest="history",self.sendFirstVVAbtest=!0),this._startPing_tvid=t.tvid,this._send(n)}},{key:"sendTimingPingback",value:function(){this._timer=0;var e=this,t=0,n=1e3;clearTimeout(this._timer),e.firstSendFlag=!0;!function r(){var i;if(e._core.hasStatus(b.a.Status_Playing)){if(t+=n,e._pbtime+=n,e._pbtime%15e3==0&&e.firstSendFlag)e.firstSendFlag=!1,e._send({t:2,tm:15e3,speed:null===(i=e._core)||void 0===i?void 0:i.currentRate}),e._pbtime=0;else if(e._pbtime%3e4==0){var a;e._send({t:2,tm:3e4,speed:null===(a=e._core)||void 0===a?void 0:a.currentRate}),e._pbtime=0}}else if((e._core.hasStatus(b.a.Status_Paused)||e._core.hasStatus(b.a.Status_Waiting))&&e._pbtime){var o;e._send({t:2,tm:e._pbtime,speed:null===(o=e._core)||void 0===o?void 0:o.currentRate}),e._pbtime=0}if(t%6e4==0&&e._core.getCurrStatus()===b.a.Status_Playing){var s=C.a.isLogin()?k.l.QP008:k.l.QP007,u=k.k.get(s);u=""===u?0:parseInt(u,10),u+=60,k.k.set(s,u,{expires:31536e6,path:"/",domain:"iqiyi.com"})}clearTimeout(e._timer),e._timer=setTimeout(r,n)}()}},{key:"sendClosePingBack",value:function(e){var t=this;t._send({t:2,tm:t._pbtime,r:e},!0),t._pbtime=0,t.firstSendFlag=!0}},{key:"sendEndPlayPingback",value:function(e,t){var n=this._core.playproxy,r=n._playingSpend||0;if(0!==r&&this.__endpingback===undefined){this.__endpingback=!0;var i,a=this._core.getMovieInfo(),o=this._core.currentRate,s=parseInt(n._maxpt||0),u=this._core.params,c=51===(a.vd||"")?59:a.vd||"";switch(t=t||a.tvid,this.sendClosePingBack(this._startPing_tvid||t),e){case 1:i=4;break;case 2:i=6;break;case 3:i=7;break;case 4:i=11;break;case 5:i=9;break;default:i=0}var l={t:13,tm:r,maxpt:s,endtp:i,speed:o};this._lastFireData.t?Object(k.C)(l,this._lastFireData):(Object(k.C)(l,{r:t,ra:c,vfrmtp:!0===u.autoplay?1:0}),u.vvauto&&(l.vvauto=!0===u.autoplay?4:2),Object(k.C)(l,this._outerParams,!0),u.vvauto||delete l.vvauto);var d=k.K.query2Json(window.location.href);d.caid&&(l.caid=d.caid),l.vvauto=this._isMainPage()?4:l.vvauto,l.pt=Math.floor(1e3*this._core.getCurrenttime()),this._send(l,!0)}}},{key:"sendSeekPingback",value:function(e,t,n){this._send({t:5,a:e,drgfr:n,drgto:t})}},{key:"sendWaitingPingback",value:function(e){if(this.waitingStartTime){var t=this._core.getCDNInfo().host,n=(this._core.isSeeking(),+new Date-this.waitingStartTime);e?(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"ad",stu_sc:1,isquit:0,cdnadr:t,replayt:n})),this.sendErrorPlayPingback("","4016"),this.sendErrorPlayPingback("","KIWI-4016")):(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"video",stu_sc:1,isquit:0,cdnadr:t,replayt:n})),this.sendErrorPlayPingback("","4015"),this.sendErrorPlayPingback("","KIWI-4015")),this.clearWaitingTime()}}},{key:"sendAutoUpToVDPingback",value:function(e,t){this._send({t:12,fa:5,ra:t,upto:e},!0)}},{key:"sendAutoDwnToVDPingback",value:function(e,t){this._send({t:12,fa:4,ra:t,dwnto:e},!0)}},{key:"sendPlayingPingback",value:function(){this._sentWaitingBeacon&&(this._sentWaitingBeacon=!1)}},{key:"sendErrorPlayPingback",value:function(e,t,n){var r="www.iqiyi.com"===window.location.host;if(!("/"===window.location.pathname&&r)){var i=t||Gf[e];this._send({t:0,ec:i,psrc:n||""})}}},{key:"_send",value:function(e,t){var n=this,r=this._core,a=r.logger,o=r.pingbackQOS,s=n._getParams(e);bf.getPingbackDfp(e).then((function(u){r.getVideoInfo((function(c){C.a.isVip(function(){var l=i()(m.a.mark((function d(i,l){var f,h,p,v,y,g,_,b;return m.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return p=n.getRaMax(i),v=n.getVBRMax(p),d.next=4,window.__fpp___;case 4:y=d.sent,g=y.u1,_=y.u2,Object(k.C)(s,{rn:Math.random(),dfp:u,stime:(new Date).getTime(),r:c.tvid||"",aid:c.albumId||c.tvid||"",hu:i?l:-1,ramax:p,vbrmax:v,ht:null!=c&&null!==(f=c.vi)&&void 0!==f&&f.ht?null==c||null===(h=c.vi)||void 0===h?void 0:h.ht:"",fp1:g,fp2:_}),Object(k.C)(s,e,t),n._lastFireData=s,b=Ee.pingbackV6Url,0==e.t&&(b=Ee.pingbackQosUrl),k.v.beacon(s,b),r.params.sourcePage&&(1==e.t?(a.info("send pingback, t=1, vvauto=".concat(s.vvauto,",  pms=").concat(k.f.stringify(s))),n.__pingbackList.start++,n.__pingbackList.vvauto=s.vvauto):13==e.t&&(a.info("send pingback, t=13, vvauto=".concat(s.vvauto,",  pms=").concat(k.f.stringify(s))),(0==n.__pingbackList.start||4==n.__pingbackList.vvauto&&4!==s.vvauto)&&(a.info("send pingback, t=1|13, checkerror"),o.sendLogToCompass("pingback")),n.__pingbackList={start:0,vvauto:undefined}));case 14:case"end":return d.stop()}}),d)})));return function(e,t){return l.apply(this,arguments)}}())}))}))}},{key:"_getParams",value:function(e){var t,n=this,r=this._core,i=r.getMovieInfo(),a=r.getCurrLoaderMode(),o=-1,s=51===(i.vd||"")?59:i.vd||"",u=k.K.query2Json(window.location.href);switch(a){case"CDN":o=0;break;case"P2P":o=1}var c=n.getLrfrPs234(),l=zf(zf({u:k.L.getFluid()||"",pu:C.a.getUid()||"NOREF",p1:bf.p_code,v:r.playerVersion,ce:k.L.getWeid(),de:k.L.getQtsid()||"",c1:i.cid||"",ve:k.L.getEid(),pt:Math.floor(1e3*r.getCurrenttime()),isdm:0,duby:0,ra:s,clt:""},c),{},{br:A.a.browser.userAgent,mod:H.local()||"",purl:window.location.href,tmplt:r.getPageTmpltType(),ptid:A.a.getPtid(H.isTWLocale()),os:bf.os,nu:k.L.getIsNewUser()?1:0,vfm:u.vfm||k.k.get(k.l.QP005)||"",coop:"",ispre:r.isTryWatch()?1:0,videotp:"undefined"!=typeof i.is3D?i.is3D:"",drm:bf.getDrmType(i),plyrv:"",rfr:window.document.referrer,fatherid:r.params.fatherid||i.albumId||"",themeid:r.params.themeid||i.albumId||"",stauto:r.autoVdUsing?1:0,algot:r.autoVdAlgot,vvfrom:n._vvfrom||"",vfrmtp:!0===r.params.autoplay?1:0,pagev:r.params.pagev||"",engt:2,ldt:o,krv:r.kernelVersion||"0.0.0",wtmk:i.watermark||0,duration:1e3*r.getDuration(),bkt:n._outerParams.bkt||r.params.bkt,e:n._outerParams.e||r.params.e,stype:n._outerParams.stype||r.params.stype,r_area:n._outerParams.r_area||r.params.r_area,r_source:n._outerParams.r_source||r.params.r_source,vvauto:2,s2:r.params.vfrm||"NOREF",s3:r.params.vfrmblk||"NOREF",s4:r.params.vfrmrst||"NOREF",pwa_mode:A.a.browser.PWA});r.picInPic&&(l.s4="80720_playerctrl_picinpic"),r.params.abtest&&(l.abtest=r.params.abtest),u.recext&&(l.recext=decodeURIComponent(u.recext)),r.params.vvauto&&(l.vvauto=!0===r.params.autoplay?4:2,n._outerParams&&n._outerParams.vvauto&&(l.vvauto=n._outerParams.vvauto)),e&&(Object(k.C)(l,{fv:e.fv||u.fv||""}),e.t&&(Object(k.C)(l,{s3:r.params.vfrmblk||"NOREF"}),2==e.t&&Object(k.C)(l,{vbr:n.getVBR()}),!r.ivosRuning||1!=e.t&&2!=e.t&&13!=e.t&&15!=e.t&&8!=e.t||(l.aid=i.albumId,l.r=i.tvid,l.biz=r.currentBlockid,l.s3="006191_ivos_videoshow")));var d,f,h=r.getCurrManifestType(),p=r.getVideoCoding();if(null!==h&&-1!==h&&(1===p&&(h=7),Object(k.C)(l,{mft:h})),null!==h&&-1!==h){switch(h){case 0:d=2;break;case 1:d=7;break;case 2:d=0;break;case 3:d=5;break;case 5:d=110;break;case 6:d=101;break;case 7:d=1}Object(k.C)(l,{ra1:d})}var v=r.params.vfrm||"NOREF";r.isFullScreen?(v="901111_pcwh5_browerfull",f=4):r.isWebFullScreen?(v="901111_pcwh5_pagefull",f=7):f=r.isSmallWindowMode||r.picInPic?2:3,Object(k.C)(l,{wint:f,s2:v});var y=0,g=0,m=-1;if(navigator.connection){var _=navigator.connection.downlink,b=(navigator.connection.effectiveType||"").toLowerCase(),x=(navigator.connection.type||"").toLowerCase();switch(b){case"4g":g=18;break;case"3g":g=17;break;case"2g":g=16;break;case"slow-2g":g=14}switch(x){case"cellular":g=15;break;case"wifi":g=1;break;case"ethernet":g=13;break;case"bluetooth":g=21;break;case"wimax":g=22}var w=r.getDataBufferInfo();w&&(m=w.len),y=_,Object(k.C)(l,{bw:y,ntwk:g,dl:m})}"{}"==k.f.stringify(n._outerParams)||r.ivosRuning||Object(k.C)(l,n._outerParams,!0),r.isInteractVideo&&"0"==r.interactionMode&&!r.isIVMain&&(l.iamvid=r.iv_state&&r.iv_state.uniqueId||""),-1!=i.ctt&&u.fv&&(l.fv=u.fv),l.rank=u.rank||l.rank;var S,T=r.movieinfo.current;(null==T||null===(t=T.video_opt)||void 0===t?void 0:t.ply_cloud_movie)!=undefined&&(l.ply_cloud_movie=(null==T||null===(S=T.video_opt)||void 0===S?void 0:S.ply_cloud_movie)||0);return l}},{key:"getVBR",value:function(){var e=this._core,t=e.getDuration(),n=0;if(e.movieinfo&&0!==t&&!e.isAd()){var r=e.movieinfo.getVDInfo().vsize;n=parseInt(r/t)}return n}},{key:"setPlayPingbackInfo",value:function(e){var t={},n=this._core;e.vfrm&&(t.s2=e.vfrm||"NOREF"),e.vfrmblk&&(t.s3=e.vfrmblk||"NOREF"),e.vfrmrst&&(t.s4=e.vfrmrst||"NOREF",t.rank=e.vfrmrst),e.vfrmtp&&(t.vfrmtp=e.vfrmtp),n.params.vvauto&&(t.vvauto=e.vvauto||n.params.vvauto),delete e.vvauto,delete e.vfrm,delete e.vfrmblk,delete e.vfrmrst,delete e.vfrmtp,t=Object(k.C)(t,e,!0),this._outerParams=Object(k.C)(this._outerParams,t,!0)}},{key:"destory",value:function(){console.log("~~~~~~ ddd",this._timer),clearTimeout(this._timer),this._timer=-1}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"getLrfrPs234",value:function(){var e=k.k.get("QC007")||"",t=JSON.parse(localStorage.getItem("QC007_ps234")||"{}");return this.__ps234=this.__ps234||{lrfr:e,ps2:t.ps2||"NOREF",ps3:t.ps3||"NOREF",ps4:t.ps4||"NOREF"}}},{key:"getRaMax",value:function(e){var t=2;return C.a.isLogin()&&(t=4),e&&(t=5),t}},{key:"getVBRMax",value:function(e){var t=this._core.movieinfo.vidl,n=0,r=null;return t.length>0&&t.forEach((function(t){t.vd===e&&(r=t)})),r&&!this._core.isAd()&&(n=parseInt(r.vsize/r.duration)),n}},{key:"_isMainPage",value:function(){return"/"==window.location.pathname}},{key:"clearWaitingTime",value:function(){this.waitingStartTime=0}}]),e}(),Kf=0,$f=1,Yf=2,Qf=function(){return performance.now()},Jf=function(){function e(){o()(this,e),this.status=Kf,this.benchmark=null,this._initData()}return u()(e,[{key:"cost",get:function(){return this.diy_setm||0}},{key:"_initData",value:function(){this.loaderStat={count:0,timeCost:0,lastPumpTime:null},this.muxStat={count:0,timeCost:0,lastSpitTime:null,lastPushTime:null},this.mediaStat={count:0,timeCost:0,lastAppendTime:null},this.authStat={count:0,timeCost:0,lastTime:null},this.diy_sstm=0,this.diy_setm=null,this.diy_vsitm=null,this.diy_vsdtm=null,this.diy_vptm=null,this.diy_lstm=null,this.diy_frdtm=null,this.diy_rdc=null,this.diy_rdtm=null,this.diy_muxc=null,this.diy_muxstm=null,this.diy_muxtm=null,this.diy_apc=null,this.diy_apstm=null,this.diy_aptm=null,this.diy_fdlc=0,this.diy_fdlt=0}},{key:"_update",value:function(e,t){this.status===$f&&Object.prototype.hasOwnProperty.call(this,e)&&null!==this.benchmark&&(this[e]=null==t?Math.round(Qf()-this.benchmark):t)}},{key:"start",value:function(){this.status=$f,this.benchmark=Qf(),this._initData()}},{key:"end",value:function(){this._update("diy_setm"),this.status=Yf}},{key:"isSeekingStatus",value:function(){return this.status===$f}},{key:"mediaSeeking",value:function(){this._update("diy_vsitm")}},{key:"mediaSeeked",value:function(){this._update("diy_vsdtm")}},{key:"mediaPlaying",value:function(){null==this.diy_vsdtm&&this._update("diy_vsdtm"),this._update("diy_vptm")}},{key:"seekLoader",value:function(){this._update("diy_lstm")}},{key:"pumpLoader",value:function(e){var t=this.loaderStat;e?(null===this.diy_frdtm&&this._update("diy_frdtm"),t.lastPumpTime&&(t.timeCost+=Math.round(Qf()-t.lastPumpTime)),t.lastPumpTime=null):t.lastPumpTime||(t.lastPumpTime=Qf()),t.count++,t.count>0&&this._update("diy_rdc",t.count),t.timeCost>0&&this._update("diy_rdtm",t.timeCost)}},{key:"muxSwallow",value:function(){var e=this.muxStat;e.count++,e.lastPushTime=Qf(),e.lastSpitTime=null}},{key:"muxspit",value:function(){var e=this.muxStat,t=Qf();null===e.lastSpitTime?e.timeCost+=Math.round(t-e.lastPushTime):e.timeCost+=Math.round(t-e.lastSpitTime),null===this.diy_muxstm&&this._update("diy_muxstm"),e.count>0&&this._update("diy_muxc",e.count),e.timeCost>0&&this._update("diy_muxtm",e.timeCost),e.lastSpitTime=t}},{key:"sbAppending",value:function(){this.mediaStat.lastAppendTime=Qf()}},{key:"sbAppended",value:function(){var e=this.mediaStat;e.count++,null!==e.lastAppendTime&&(e.timeCost+=Math.round(Qf()-e.lastAppendTime)),null===this.diy_apstm&&this._update("diy_apstm"),e.count>0&&this._update("diy_apc",e.count),e.timeCost>0&&this._update("diy_aptm",e.timeCost)}},{key:"authkeyInvoking",value:function(){this.authStat.lastTime=Qf()}},{key:"authkeyInvoked",value:function(){var e=this.authStat;null!==e.lastTime&&(e.count++,e.timeCost+=Math.round(Qf()-e.lastTime),this._update("diy_fdlc",e.count),this._update("diy_fdlt",e.timeCost))}}]),e}(),Xf=u()((function lh(e){o()(this,lh);var t=+new Date;this.psdklstm=e.pgct||t,this.psdkletm=t,this.psdkistm=t,this.psdkietm=t,this.vcistm=0,this.vcietm=0,this.ffstm=0,this.ffetm=0,this.vclstm=0,this.vcletm=0,this.asdklstm=t,this.asdkletm=t,this.asdkistm=0,this.asdkietm=0,this.adirqstm=0,this.adirqetm=0,this.adsrqstm=0,this.adsrqetm=0,this.adlstm=0,this.adletm=0,this.adastm=t,this.adaetm=0,this.plyastm=t,this.plyaetm=0,this.adUsedTime=0,this.plyUsedTime=0}));function Zf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nh){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var eh=function(e){f()(r,e);var t,n=Zf(r);function r(e,t){var i;o()(this,r),(i=n.call(this)).pack=t,i.params=e,i.eventlog={vrsready:!1},i.adWholeCorner=!1,i.id=e.parentId,i.ppt=e.ppt||"0",i.local=e.local||"cn_s",i.cyclePlay=!!e.cyclePlay,i.ost=Object(k.D)(e.ost,e.bd),i.isEnjoy="enjoy"==e.playerType,i.playbackrate=e.playrate,i.playratelist=e.playratelist,i.isMobilePlaybackRate=!1,i.poster=e.poster;var a=e.skinType||"";return i.isMini=!!a,i.isBanner=a.indexOf("banner")>-1,i.isSimple="simple"==a||i.isBanner,i.boss=e.boss||!1,i.playerVersion=x.a||e.playerVersion,i.spt=e.transmissionOption&&e.transmissionOption.spt?e.transmissionOption.spt:"",i.isClassic=!1,i.autoStop=!1,"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay?i.autoplay=!1:i.autoplay=!0,i.isInteractVideo=!(1!=Number(e.isEnabledInteraction)||1!=Number(e.interactionType)&&0!=Number(e.interactionType)||A.a.browser.EDGE||H.isTWLocale()),e.isRecordProgress||!1!==e.isRecordProgress&&"false"!==e.isRecordProgress?i.isRecordProgress=!0:i.isRecordProgress=!1,i.interactionMode=e.interactionType,i.isIVMain=i.isInteractVideo,i.iv_state={},i.isInteracting=!1,i.adPlaySource=null,i.ivosRuning=!1,i.ivosBoxRuning=!1,i.emptionType=0,e.qiyiId&&k.L.setQiyiId(e.qiyiId),k.L.syncNativeQC005(),i.canary=Object(k.p)(),i.sptr=new Xf(e),i.sbtr=new Jf,i.pingbackV6=new Wf(l()(i)),i.pingbackQOS=new Uf(l()(i)),i.movieinfo=new Re(l()(i)),i.i18n=H,i.user=C.a,i.VI=D.a,i.picInPic=!1,i.isFullScreen=!1,i.isWebFullScreen=!1,i.isSmallWindowMode=e.isSmallWindowMode||!1,i.setMaxListeners(25),H.setLocale(i.local),e.pcaPtid&&A.a.setPtid(e.pcaPtid),i.firstVV=!0,i.logger=new _.a("DataEngine[".concat(i.id,"]")),i.mutedstart=!1,i.isInstallClient=!1,i.isDisableHotkey=!!e.isDisableHotkey,i.VEID=k.i,i.video_opt=undefined,i}return u()(r,[{key:"kernelVersion",get:function(){return this.playproxy.knlRevision}},{key:"p2pVersion",get:function(){return this.playproxy.kiwi.p2pVersion||""}},{key:"audioEnabled",get:function(){return E.k.hasBit(1,3)&&!(A.a.browser.FIREFOX||A.a.browser.EDGE)}},{key:"vd",get:function(){var e=function(e){var t=e.ctx,n=e.platform,r=e.engine,i=e.user,a=e.entryParams,o=e.canary,s=parseInt(k.k.get(w)||2,10),u=!1;if((k.z||r&&!0!==r.__vdInit__)&&(s=parseInt(k.k.get(w,{rawStr:(null==t?void 0:t.cookie)||""})||2,10),n.browser.WECHAT&&(s=4),r&&(r.__vdInit__=!0,!r.playproxy._autoVdUsing||96!=s&&1!=s||(s=2,u=!0)),i.isLogin()&&k.k.get(k.l.QP0023)&&(s=4,r&&(r.playproxy._autoVdUsing=!1),k.k.set(k.l.QP0025,"1",{expires:2592e5,path:"/",domain:"iqiyi.com",response:t?t.response:null}),k.k.remove(k.l.QP0023,{path:"/",domain:"iqiyi.com",response:t?t.response:null}),u=!0),o&&o.queryBid>0&&(s=k.m.getOldVd(o.queryBid),u=!0)),96===s||1===s||2===s||i.isLogin()||(s=2,n.browser.WECHAT&&(s=4),u=!0),u&&S(s),"5938935125359500"==="".concat(a.tvid)&&(r&&(r.playproxy._autoVdUsing=!1),a.vd=4),a.vd!==undefined)if(i.isLogin()){var c=k.k.get(k.l.QP0035)||a.vd,l=k.m.getNewVd(c);s=l>k.m.getNewVd(a.vd)?l:a.vd}else s=a.vd;var d;return((null==r?void 0:r.video_opt)!=undefined?r.video_opt.is_ticket_tail:null===(d=a.video_opt)||void 0===d?void 0:d.is_ticket_tail)&&(s=5),{quality:s,autoFlag:!1}}({platform:A.a,engine:this,user:C.a,entryParams:this.params,canary:this.canary}),t=e.quality;e.autoFlag;return t},set:function(e){S(e)}},{key:"autoVdValue",get:function(){return this.playproxy.autoVdValue}},{key:"autoVdEnabled",get:function(){var e=this.movieinfo,t=this.playproxy,n=e.getVDInfo(),r=undefined;return n&&(r=n.fileFormat),t.p2pEnabled(r)&&t._autoVdEnable}},{key:"autoVdUsing",get:function(){return(!!this.__vdInit__||!!this.vd)&&this.playproxy._autoVdUsing&&this.autoVdEnabled}},{key:"autoVdAlgot",get:function(){var e="";if(this.autoVdUsing&&this.getCurrLoaderMode()===b.a.P2P_LOADERMODE){var t=this.playproxy.kiwi.episodeStream;t&&(e=t.loader.algot)}return e}},{key:"voice",get:function(){var e=Number(this.params.voice)||parseFloat(I.a.read("QiyiPlayerVoice"));return isNaN(e)&&(e=.6),Number(e)>1&&(e=1),e}},{key:"skip",get:function(){var e=k.k.get("QC157",{memory:!0});return"1"!==e&&"noskip"!==e},set:function(e){e?k.k.remove("QC157",{path:"/",domain:"iqiyi.com"}):k.k.set("QC157","1",{expires:31536e6,path:"/",domain:"iqiyi.com"})}},{key:"getMovieInfo",value:function(){return this.movieinfo.current}},{key:"init",value:function(e){var t=this;t.logger.log("DataEngine Init"),t._v=e,t.episode=new Y(t.id);try{t.isInteractVideo?t.initInteractVideo(t.params):t._initNormalVideo()}catch(n){console.log(n)}}},{key:"initInteractVideo",value:function(e){var t=this;t._initPlayProxy(),t.pack.ad&&!t.adproxy&&(t.adproxy=new W(t),t.adproxy.init()),t.IVRecorder?t.IVRecorder.updateParams(e):t.IVRecorder=new De(t,e),t.recorder||(t.recorder=new Bf(t)),t.initInteractPackage(e)}},{key:"initInteractPackage",value:function(e){var t=this;t.IVPackageManager?(t.IVPackageManager.reset(),t.IVPackageManager.init(e)):t.IVPackageManager=new Ae(t,e)}},{key:"_initPlayProxy",value:function(){var e=this;e.playproxy||(e.playproxy=new Of(e),e.playproxy.init(e._v,e.params.channelID),e._initVolume())}},{key:"_initAdProxy",value:function(){var e=this;if(e.pack.ad&&!e.adproxy)e.adproxy=new W(e),e.adproxy.init();else{var t=function(){};e.adproxy={clear:t,resize:t,getAdInfo:t}}}},{key:"_initVolume",value:function(){var e=this;e._tempvolume=e.voice,1==parseInt(this.params.isMute,10)||1==this.params.isMute||"true"==this.params.isMute||this.params.masflag?e.setVolume(0,!0):e.setVolume(e.voice)}},{key:"_initNormalVideo",value:function(){this.isMini||(this.recorder=new Bf(this)),this.playproxy=new Of(this),this._initAdProxy(),this.playproxy.init(this._v,this.params.channelID),this._initVolume(),this.load(this.params)}},{key:"load",value:function(e){this.playproxy.load(e)}},{key:"preload",value:function(e,t){this.autoStop||this.playproxy.preload(e,t)}},{key:"checkPreload",value:function(){return this.playproxy.checkPreload()}},{key:"refresh",value:function(e){this.playproxy.refresh(e)}},{key:"getCurrentGas",value:function(){return this.playproxy.getCurrentGas()}},{key:"abort",value:function(){this.playproxy.pause(!1,!0),this.autoplay=!1}},{key:"abortAres",value:function(){this.playproxy.abortAres()}},{key:"abortAllAres",value:function(e){this.playproxy.abortAllAres(e)}},{key:"abortAllAresAndSeek",value:function(e,t){this.playproxy.abortAllAres(e,t)}},{key:"video",value:function(){return this.playproxy.video()}},{key:"play",value:function(e){this.playproxy.play(e)}},{key:"pause",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.pause(e,t)}},{key:"isPaused",value:function(){return this.playproxy.isPaused()}},{key:"replay",value:function(){this.playproxy.replay(),this.pingbackV6.sendStartPlayPingback(),this.pingbackV6.sendADStartPlayPingback()}},{key:"seek",value:function(e,t,n,r){this.playproxy.isPatch()||this.playproxy.seek(e,t,n,r)}},{key:"lockSeek",value:function(){this.playproxy.lockSeek()}},{key:"unlockSeek",value:function(){this.playproxy.unlockSeek()}},{key:"isSeeking",value:function(){return!!this.playproxy.hasSeeking}},{key:"switchDefinition",value:function(e,t,n){this.playproxy.switchDefinition(e,t,n)}},{key:"isSwitchingDefinition",value:function(){return this.playproxy._vdsSwitch}},{key:"switchAudioDefinition",value:function(e){this.movieinfo.currentLid!==e&&(this.emit(b.a.NTF_AudioSwitching,e),this.playproxy.switchAudioTrack(e))}},{key:"getBufferTime",value:function(){return this.playproxy.getBufferTime()}},{key:"getSrc",value:function(){return this.playproxy.getSrc()}},{key:"setMuted",value:function(e){var t=this.getVolume();this._tempvolume=t>0?t:this._tempvolume||.6,e?this.setVolume(0):this.setVolume(this._tempvolume)}},{key:"getMuted",value:function(){return 0===this.getVolume()}},{key:"getPlayingDuration",value:function(){return this.playproxy._playingDuration}},{key:"getPlayingSpend",value:function(){return this.playproxy._playingSpend}},{key:"getPlayingTimeMark",value:function(){return this.playproxy._videoMark}},{key:"getSkipHeaderTime",value:function(){var e=this.playproxy._skipHT,t=parseInt(this.getDuration());return e>=t&&(e=t-1),e}},{key:"getSkipTailTime",value:function(){return this.playproxy._skipTT}},{key:"isSkipPrelude",value:function(e,t){var n=this.skip;if("boolean"!=typeof e)return n;n!=e&&(this.skip=e,!0!==t&&this.playproxy.setSkipPrelude(),this.emit(b.a.NTF_SKIP_PRELUDE,{flag:e}))}},{key:"setStartPlayTime",value:function(e,t){this.movieinfo.setStartPlayTime(e,t)}},{key:"getStartPlayTime",value:function(){return this.movieinfo.startPlayTime}},{key:"getEndPlayTime",value:function(){return this.movieinfo.endPlayTime}},{key:"getDuration",value:function(){return this.playproxy.getDuration()}},{key:"getVolume",value:function(){return this.playproxy.getVolume()}},{key:"setVolume",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.setVolume(e),this.playproxy.video().muted=t}},{key:"getVipTypes",value:function(){return this.getMovieInfo().vipTypes}},{key:"getCurrentVD",value:function(){return this.playproxy.getCurrentVD()}},{key:"getPlayInfo",value:(t=i()(m.a.mark((function a(e){var t,n,r,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=function(){return(o=i()(m.a.mark((function e(){var r,i,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((r={}).tvid=n.tvid,r.vid=n.vid,r.cid=n.cid,r.albumId=n.albumId,r.duration=t.getDuration(),r.rate=t.getCurrentVD(),r.vidl=t.movieinfo.vidl,r.previewImageUrl=n.previewImageUrl,r.preImageUrl=n.preImageUrl,r.audio=n.audio,r.mvi=n,i=t._getCall.slice(0),t._getCall=[],a=0;a<i.length;a++)i[a]&&function(e){setTimeout((function(){e(r)}),0)}(i[a]);i=null;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return o.apply(this,arguments)},(t=this)._getCall=t._getCall||[],t._getCall.push(e),!(n=t.getMovieInfo()).preparing){a.next=10;break}t.playproxy.on(b.a.NTF_VRSDone,r),a.next=12;break;case 10:return a.next=12,r();case 12:case"end":return a.stop()}}),a,this)}))),function(e){return t.apply(this,arguments)})},{key:"getVideoInfo",value:function(e){this.playproxy.getVideoInfo(e)}},{key:"getVideoInfoByTvid",value:function(e,t){this.playproxy.getVideoInfoByTvid(e,t)}},{key:"getCurrStatus",value:function(){return this.playproxy.currStatus}},{key:"isAd",value:function(){return this.playproxy.isAd()}},{key:"isPatch",value:function(){return this.playproxy.isPatch()}},{key:"getCurrentAdInfo",value:function(){var e={};return this.isAd()&&(e=this.adproxy.getAdInfo()),e}},{key:"switchVideo",value:function(e){this.firstVV=!1,"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay||0==e.autoplay?this.autoplay=!1:"true"!==e.autoplay&&!0!==e.autoplay&&"1"!=e.autoplay&&1!=e.autoplay||(this.autoplay=!0),this.video_opt=e.video_opt||{},this.playproxy.switchVideo(e)}},{key:"isTryWatch",value:function(){return this.movieinfo.isTryWatch}},{key:"getPreviewType",value:function(){return parseInt(this.movieinfo.previewType||-1,10)}},{key:"getPreviewTime",value:function(){return this.movieinfo.previewTime||Infinity}},{key:"recharge",value:function(e,t,n,r){this.playproxy.noticeRecharge(e,t,n,r)}},{key:"hasStatus",value:function(e){return this.playproxy.hasStatus(e)}},{key:"getStatusPool",value:function(){return this.playproxy.getStatusPool()}},{key:"destroy",value:function(){this.episode.destroy(),this.adproxy.destroy(),this.playproxy.destory(),this.movieinfo.clear(),this.recorder.stopTimer(),this.pingbackV6.destory(),this.emit(b.a.Status_Destroy)}},{key:"getPlaybackRate",value:function(){return this.playproxy.getPlaybackRate()}},{key:"setPlaybackRate",value:function(e){this.playproxy.setPlaybackRate(e)}},{key:"getCurrenttime",value:function(){return this.playproxy.getCurrenttime()}},{key:"getEngineType",value:function(){return b.a.ENGINE_TYPE}},{key:"getPageTmpltType",value:function(){return this.params.pageTmpltType}},{key:"un",value:function(e,t){return this.off(e,t),this}},{key:"getVideoMuted",value:function(){return this.playproxy.video().muted}},{key:"resize",value:function(){this.adproxy.resize()}},{key:"jsNotifyAdManager",value:function(e){this.emit(b.a.NTF_AD_NotifyManager,e)}},{key:"notyfyADInfo",value:function(e){this.adproxy.sdk&&this.adproxy.sdk.emit(e.type,e.data)}},{key:"setEndPlay",value:function(e){this.playproxy.setEndPlay(e)}},{key:"getCurrManifestType",value:function(){return this.playproxy.kiwi.currentManifestType}},{key:"getManifestTypes",value:function(){return this.playproxy.getManifestTypes()}},{key:"getDownloadSpeed",value:function(){return this.playproxy?this.getCurrLoaderMode()===b.a.CDN_LOADERMODE?this.playproxy.kiwi.stats.downloadSpeed:this.playproxy.kiwi.stats.bandwidth:null}},{key:"getCDNInfo",value:function(){if(this.getCurrLoaderMode()===b.a.CDN_LOADERMODE){var e=this.playproxy.kiwi.stats;return{protocol:e.netProtocol||"",host:e.cdnHost||""}}var t=this.playproxy.kiwi.stats;return{protocol:t.netProtocol||"",host:t.cdnHost||""}}},{key:"startFireFPSEvent",value:function(){try{this.playproxy.kiwi.startReportFPS()}catch(nh){}}},{key:"stopFireFPSEvent",value:function(){try{this.playproxy.kiwi.stopReportFPS()}catch(nh){}}},{key:"getCurrLoaderMode",value:function(){return this.playproxy.kiwi.currentLoaderMode}},{key:"getDataBufferInfo",value:function(){return this.playproxy.kiwi.dataBufferInfo}},{key:"setPlayPingbackInfo",value:function(e){this.pingbackV6&&this.pingbackV6.setPlayPingbackInfo(e)}},{key:"setDelayPlayInfo",value:function(e){this.playproxy.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.playproxy.clearDelayPlayInfo(e)}},{key:"getBufferInfo",value:function(){return this.playproxy.kiwi.bufferInfo}},{key:"getMP4URLByTvid",value:function(e,t){this.playproxy.getMP4URLByTvid(e,t)}},{key:"getCorrectTimeObj",value:function(){var e,t,n=this.getDuration(),r=this.getCurrenttime(),i=!1,a="",o=this.getCurrentAdInfo();o.isFusionMode&&o.seekable?(t=n+this.movieinfo.current.duration,e=r+o.offset,i=!0,a=o.rollType):(e=r,t=n);return{current:r,cduration:n,acurrent:e,aduration:t,isFusionMode:i,rollType:a}}},{key:"isFusionMode",value:function(){var e=this.getCurrentAdInfo();return e&&e.isFusionMode}},{key:"getAbResult",value:function(){var e={platform:"1_10_101",deviceId:k.k.get("QC005")||0,uid:k.k.get("P00003")||0,version:"1.0.0.1"};return this._abtestPromise=this._abtestPromise||new Promise((function(t){k.v.json({url:"//mesh.if.iqiyi.com/portal/pcw/abtest",params:e,withCredentials:!1,success:function(e){e&&"A00000"==e.code?(e.data.abResults.mergeAbtest=e.data.mergeAbtest,t(e.data.abResults)):t({})},failure:function(){t({})}})})),this._abtestPromise}},{key:"getNewAbResult",value:function(){var e={deviceId:k.k.get("QC005")||0,version:"10.10.0.0"};return this._newAbtestPromise=this._newAbtestPromise||new Promise((function(t){k.v.json({url:"//mesh.if.iqiyi.com/portal/pcw/abtestPeople",params:e,withCredentials:!1,success:function(e){e&&"A00000"==e.code?(e.data.abResults.mergeAbtest=e.data.mergeAbtest,t(e.data.abResults)):t({})},failure:function(){t({})}})})),this._newAbtestPromise}},{key:"lockPlay",value:function(){this.playproxy.lockPlay()}},{key:"unlockPlay",value:function(){this.playproxy.unlockPlay()}},{key:"getVideoCoding",value:function(){var e=this,t=this.getMovieInfo(),n=null;return t&&t.vidl&&t.vidl.length>0&&t.vidl.forEach((function(t){t.vd===e.vd&&(n=t.code)})),n}},{key:"userGesturePlayed",value:function(){this.playproxy.userGesturePlayed()}},{key:"blockVideoEvents",value:function(){this.canFireVideoEvts=!1}},{key:"resumeVideoEvents",value:function(){this.canFireVideoEvts=!0}}]),r}(k.c);t.a=eh},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(41),u=n.n(s),c=n(8),l=n.n(c),d=n(9),f=n.n(d),h=n(3),p=n.n(h),v=(n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(133),n(160)),y=n(39),g=n(268),m=n(220),_=n(305),b=n(96),x=n.n(b),k=n(113),w=n.n(k),S=(n(35),n(70),n(149),n(88),n(110),n(101),n(340),n(314),n(115),n(154),n(339),n(415)),T=n(185),P=n(622),E=n(138),A=n(1019),I=n(652),D=function(){function e(){i()(this,e),this.msg=null,this.repostCount=0}return o()(e,[{key:"clear",value:function(){this.msg=null,this.repostCount=0}}]),e}();function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var O=function(e){l()(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this))._eventManager=new S.a,r._error=null,r._mux=null,r._w=null,r._idle=!0,r._dryRun=!0,r._workerSignal=new D,r._args={transmuxer:e,options:a},Object(T.a)(a,{debug:!1,enableWorker:!0},!1),r._onWorkerMessage=r._onWorkerMessage.bind(w()(r)),r._onWorkerError=r._onWorkerError.bind(w()(r)),r._initialize(),r}return o()(n,[{key:"error",get:function(){return this._error}},{key:"idle",get:function(){return this._idle},set:function(e){this._idle=e,e&&this.emit("I")}},{key:"_initialize",value:function(){var e,t,n=this,r=this._args,i=r.transmuxer,a=r.options,o=function(){e=n._mux=I.a.resolve(i)};if(this.idle=!1,a.enableWorker&&"undefined"!=typeof window.Worker)try{var s="".concat(i.toLowerCase().replace(/-/gi,"_"),"_").concat((new Date).getTime().toString(32).substring(3)),u=performance.now();y.a.log("spawn a worker thread ".concat(s)),(t=this._w=Object(P.a)(752,{worker:{name:s}})).__name__=s,t.initAt=u,t.addEventListener("message",this._onWorkerMessage),t.addEventListener("error",this._onWorkerError),t.addEventListener("messageerror",this._onWorkerMessageError),y.a.log("worker options ".concat(JSON.stringify(a))),this._postMessage(t,"__init__",{transmuxer:i,options:a})}catch(c){this._w&&URL.revokeObjectURL(this._w.objectURL),delete this._w,y.a.error("error while initializing mux-worker & fallback on mux-inline: ".concat(c.stack)),o()}else o();e&&([["__idle__",function(){n.idle=!0}],["error",function(e,t,r){return setTimeout((function(){return n._emitError(e,t,r)}),0)}],["demux_info",function(e){return setTimeout((function(){return n._emitDemuxInfo(e)}),0)}],["demux_data",function(e){return setTimeout((function(){return n._emitDemuxData(e)}),0)}],["remux_data",function(e){return setTimeout((function(){return n._emitRemuxData(e)}),0)}],["done",function(){return setTimeout((function(){return n._emitDone()}),0)}]].forEach((function(t){n._eventManager.on(e,t[0],t[1])})),this.idle=!0)}},{key:"_postMessage",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];y.a.log("mux send msg to ".concat(e.__name__," worker: ").concat(t)),this._workerSignal.msg=[e,t,n,r],e.postMessage({cmd:t,msg:n},r)}},{key:"_terminateWorker",value:function(){var e=this._w;e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.removeEventListener("messageerror",this._onWorkerMessageError),e.terminate(),y.a.log("terminate a ".concat(e.__name__," worker thread"))}},{key:"push",value:function(e){var t,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this._w;if(Object(v.a)(e)||Object(v.k)(e))if(t=Object(v.a)(t)?new Uint8Array(t):e,y.a.log("mux push buf ".concat(Object(A.a)(t.byteLength),", stubTime ").concat(n.stubTime)),this._dryRun=!1,this.idle=!1,this.emit("P"),r){var i=[];this._postMessage(r,"push",{buf:t,conf:n},i)}else this._mux.push(t,n)}},{key:"reset",value:function(){if(this._error=null,!this._dryRun){var e=this._w;y.a.log("mux reset ".concat(e?"worker@"+e.__name__:"inline")),e?(this._workerSignal.clear(),this._postMessage(e,"reset")):this._mux.reset()}}},{key:"destroy",value:function(){this._w?(this._workerSignal.clear(),this._terminateWorker()):(this._mux.destroy(),this._eventManager.destroy()),this._error=null}},{key:"_onWorkerMessage",value:function(e){var t=e.data,n=e.target;if(null===t)this._handleACK(null);else{var r=t.cmd,i=t.msg;switch(r){case"__ACK__":this._handleACK(i);break;case"__init__":y.a.log("worker ".concat(n.__name__," initialized, cost ").concat((performance.now()-n.initAt).toFixed(3),"ms")),URL.revokeObjectURL(this._w.objectURL);break;case"__idle__":this.idle=!0;break;case"__log__":this._emitLog(i.type,i.message);break;case"error":this._emitError(i.code,i.message,i.data);break;case"demux_info":this._emitDemuxInfo(i);break;case"demux_data":this._emitDemuxData(i);break;case"remux_data":this._emitRemuxData(i);break;case"done":this._emitDone()}}}},{key:"_onWorkerError",value:function(e){var t=e.target||e.srcElement,n=t?t.__name__:"",r="worker ".concat(n," error, ").concat(e.message);y.a.warn(r),this._emitError(0,r)}},{key:"_onWorkerMessageError",value:function(e){var t="Worker met error while receiving message, ".concat(e);y.a.warn(t),this._emitError(1,t)}},{key:"_handleACK",value:function(e){if(e)this._workerSignal.clear();else if(y.a.warn("master thread received worker ack signal: ".concat(e)),this._workerSignal.msg)if(this._workerSignal.repostCount<10)this._workerSignal.repostCount++,y.a.warn("Repost the cache signal to worker at ".concat(this._workerSignal.repostCount," time")),this._postMessage.apply(this,x()(this._workerSignal.msg));else{var t="Worker ack message beyond repost count";y.a.warn(t),this._emitError(1,t)}}},{key:"_emitLog",value:function(e,t){y.a[e]&&y.a[e]("w: ".concat(t))}},{key:"_emitError",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this._error={code:e,message:t,data:n},this.emit("E",this._error)}},{key:"_emitDemuxInfo",value:function(e){this.emit("DI",e)}},{key:"_emitRemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("D",e)}},{key:"_emitDemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("DD",e)}},{key:"_emitDone",value:function(e){this.emit("O",e)}}]),n}(E.a);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var C=function(e){l()(n,e);var t=R(n);function n(e){var r;i()(this,n),(r=t.call(this,e)).$ARTEFACT_ACTION=m.a.DEPOSIT_MUX,r.$videoMediaStartTimes_=[];var a=e.transmuxer,o=e.enableWorker;return r.$transmuxer=new O(a,{enableWorker:"boolean"==typeof o?o:e.runtime.conf.muxWorker}),r.$eventManager.on(r.$transmuxer,"P",(function(){r.$noticeMuxAspect("swallow")})).on(r.$transmuxer,"D",(function(){r.$noticeMuxAspect("spit")})),r}return o()(n,[{key:"idle",get:function(){return this.$transmuxer.idle}},{key:"$canConsumeLoaderData",value:function(){return!this.$error&&this.$transmuxer.idle&&!this.$stream.restrictor.consumable}},{key:"$constraintPushData_",value:function(e){var t=null;return Object(v.a)(e)||Object(v.k)(e)?t=Object(v.a)(e)?new Uint8Array(e):e:t}},{key:"$drainBuffer",value:function(e){y.a.log("mux clear cached data");var t=this.$stream,r=this.$transmuxer,i=this.$videoMediaStartTimes_,a=t.restrictor,o=a.videoMediaSegments,s=a.audioMediaSegments;o.splice(0,o.length),s.splice(0,s.length),i.splice(0,i.length),r.reset(),e.keepMuxMeta||(this.$currentDataMeta=null),this.$loaderArtifact=null,this.$audioSegmentAlignPTS_=undefined,u()(p()(n.prototype),"$drainBuffer",this).call(this,e)}},{key:"$checkMuxMetaMatched",value:function(e,t){var n=!1;return t&&e?n=e.uid===t.uid:t===undefined&&e===undefined&&(n=!0),n}},{key:"reset",value:function(){}},{key:"$noticeMuxAspect",value:function(e){this.$krt.ctx.emit(g.a.STATE_CHANGE,{state:"mux"+e})}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(130),n(17),n(205),n(110),n(70),n(199),n(209),n(210),n(30),n(101);var r=n(450),i=n.n(r),a=n(4),o=n.n(a),s=n(5),u=n.n(s),c=(n(111),n(185)),l=n(160),d=n(152);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){function e(){o()(this,e),this.services={}}return u()(e,[{key:"cloneServices",value:function(){return Object(c.a)({},this.services)}},{key:"copyServices",value:function(e){this.services=Object(c.a)({},e)}},{key:"register",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];if(Object(l.h)(e)){var i=e;if(Object(d.e)(this.services,i.name))return void 0;this.services[i.name]={name:i.name,className:i["class"],args:i.args,shared:i.shared,compiled:null}}else{if(Object(d.e)(this.services,e))throw new Error("Service '".concat(e,"' already exists"));if(!Object(l.d)(t))throw new Error("Parameter 'className' should be a class constructor");this.services[e]={name:e,className:t,args:n,shared:r,compiled:null}}}},{key:"registerMulti",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.register(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"remove",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");delete this.services[e]}},{key:"has",value:function(e){return!("undefined"==typeof this.services[e])}},{key:"resolve",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");var t=this.services[e];if(t.shared&&null!==t.compiled)return t.compiled;var n=[];for(var r in t.args){var a=t.args[r],o=void 0;if("string"==typeof a)if(0===a.indexOf(":")){var s=a.substring(1);o=this.resolve(s)}else o=a;else o=a;n.push(o)}var u=i()(t.className,n);return t.shared&&(t.compiled=u),u}}]),e}()},function(e,t,n){var r=n(1053)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(638),i=n(684),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(259),i=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(347).f,i=n(346),a=n(260)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){var r=n(793),i=n(636),a=n(421),o=n(348),s=n(795);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var v,y,g=a(t),m=i(g),_=r(s,p,3),b=o(m.length),x=0,k=n?h(t,b):u?h(t,0):undefined;b>x;x++)if((f||x in m)&&(y=_(v=m[x],x,g),e))if(n)k[x]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:k.push(v)}else if(l)return!1;return d?-1:c||l?l:k}}},function(e,t,n){"use strict";var r=n(196),i=n(219),a=n(346),o=n(814),s=n(363),u=n(639),c=n(443),l=n(641),d=n(259),f=n(638),h=n(687),p=n(684),v=n(260),y=n(821),g=n(822),m=n(1039),_=n(646),b=n(310),x=n(285),k=n(421),w=n(441),S=n(637),T=n(635),P=n(643),E=n(642),A=n(1040),I=n(634),D=n(347),L=n(682),O=n(409),R=n(644),C=n(685),M=n(683),B=n(640),N=M("hidden"),F="Symbol",q=B.set,j=B.getterFor(F),U=I.f,V=D.f,H=A.f,z=i.Symbol,G=i.JSON,W=G&&G.stringify,K=v("toPrimitive"),$=L.f,Y=f("symbol-registry"),Q=f("symbols"),J=f("op-symbols"),X=f("wks"),Z=Object.prototype,ee=i.QObject,te=!ee||!ee.prototype||!ee.prototype.findChild,ne=s&&d((function(){return 7!=P(V({},"a",{get:function(){return V(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=U(Z,t);r&&delete Z[t],V(e,t,n),r&&e!==Z&&V(Z,t,r)}:V,re=function(e,t){var n=Q[e]=P(z.prototype);return q(n,{type:F,tag:e,description:t}),s||(n.description=t),n},ie=o&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},ae=function(e,t,n){return e===Z&&ae(J,t,n),b(e),t=S(t,!0),b(n),a(Q,t)?(n.enumerable?(a(e,N)&&e[N][t]&&(e[N][t]=!1),n=P(n,{enumerable:T(0,!1)})):(a(e,N)||V(e,N,T(1,{})),e[N][t]=!0),ne(e,t,n)):V(e,t,n)},oe=function(e,t){b(e);for(var n,r=m(t=w(t)),i=0,a=r.length;a>i;)ae(e,n=r[i++],t[n]);return e},se=function(e){var t=$.call(this,e=S(e,!0));return!(this===Z&&a(Q,e)&&!a(J,e))&&(!(t||!a(this,e)||!a(Q,e)||a(this,N)&&this[N][e])||t)},ue=function(e,t){if(e=w(e),t=S(t,!0),e!==Z||!a(Q,t)||a(J,t)){var n=U(e,t);return!n||!a(Q,t)||a(e,N)&&e[N][t]||(n.enumerable=!0),n}},ce=function(e){for(var t,n=H(w(e)),r=[],i=0;n.length>i;)a(Q,t=n[i++])||a(l,t)||r.push(t);return r},le=function(e){for(var t,n=e===Z,r=H(n?J:w(e)),i=[],o=0;r.length>o;)!a(Q,t=r[o++])||n&&!a(Z,t)||i.push(Q[t]);return i};o||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments[0]===undefined?undefined:String(arguments[0]),t=p(e),n=function(e){this===Z&&n.call(J,e),a(this,N)&&a(this[N],t)&&(this[N][t]=!1),ne(this,t,T(1,e))};return s&&te&&ne(Z,t,{configurable:!0,set:n}),re(t,e)},c(z.prototype,"toString",(function(){return j(this).tag})),L.f=se,D.f=ae,I.f=ue,E.f=A.f=ce,C.f=le,s&&(V(z.prototype,"description",{configurable:!0,get:function(){return j(this).description}}),u||c(Z,"propertyIsEnumerable",se,{unsafe:!0})),y.f=function(e){return re(v(e),e)}),r({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:z});for(var de=R(X),fe=0;de.length>fe;)g(de[fe++]);r({target:F,stat:!0,forced:!o},{"for":function(e){return a(Y,e+="")?Y[e]:Y[e]=z(e)},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");for(var t in Y)if(Y[t]===e)return t},useSetter:function(){te=!0},useSimple:function(){te=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!s},{create:function(e,t){return t===undefined?P(e):oe(P(e),t)},defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ce,getOwnPropertySymbols:le}),r({target:"Object",stat:!0,forced:d((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(k(e))}}),G&&r({target:"JSON",stat:!0,forced:!o||d((function(){var e=z();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(x(t)||e!==undefined)&&!ie(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ie(t))return t}),r[1]=t,W.apply(G,r)}}),z.prototype[K]||O(z.prototype,K,z.prototype.valueOf),h(z,F),l[N]=!0},function(e,t,n){"use strict";var r=n(196),i=n(363),a=n(219),o=n(346),s=n(285),u=n(347).f,c=n(811),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||l().description!==undefined)){var d={},f=function(){var e=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]),t=this instanceof f?new l(e):e===undefined?l():l(e);return""===e&&(d[t]=!0),t};c(f,l);var h=f.prototype=l.prototype;h.constructor=f;var p=h.toString,v="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(d,e))return"";var n=v?t.slice(7,-1):t.replace(y,"$1");return""===n?undefined:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(822)("iterator")},function(e,t,n){"use strict";var r,i,a=n(796),o=RegExp.prototype.exec,s=String.prototype.replace,u=o,c=(r=/a/,i=/b*/g,o.call(r,"a"),o.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=/()??/.exec("")[1]!==undefined;(c||l)&&(u=function(e){var t,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),c&&(t=u.lastIndex),r=o.call(u,e),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)})),r}),e.exports=u},function(e,t,n){var r=n(219),i=n(828),a=n(1045),o=n(409);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(l){c.forEach=a}}},function(e,t,n){var r=n(196),i=n(1046);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";var r=n(196),i=n(688),a=n(647),o=i(2);r({target:"Array",proto:!0,forced:!a("filter")},{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(462),i="["+n(697)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$");e.exports=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(a,"")),2&t&&(e=e.replace(o,"")),e}},function(e,t){e.exports="\t\n\x0B\f\r                　\u2028\u2029\ufeff"},,,,,function(e,t,n){n(440)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(440)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(440)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},,,,,,,,,,function(e,t,n){e.exports=n(715)},function(e,t,n){n(34);var r=n(246);e.exports=r.Reflect.construct},function(e,t,n){e.exports=n(717)},function(e,t,n){n(40);var r=n(580);e.exports=r("String","replace")},function(e,t,n){e.exports=n(719)},function(e,t,n){n(76);var r=n(580);e.exports=r("String","split")},function(module,exports,__webpack_require__){function _qda(){var e=["BwvTB3j5igLUAxrPywXPEMvY","ugLQs2S","ntaWmtuYmMXJu3HKtq","wgf0ELu","Cu5szw4","DxPTugC","u25freK","s3rqt2u","uvHlvKe","zMXVB3i","vLndr2y","zwX3tKG","BwHxA3q","AhrWBMC","z1fuDNG","uhjVz3jHBsb0zxjTAw5HDgvKihDPDgGGzxHPDcG","rw1Pze8","vgLRCMu","zhLUq2fSBf8","AxnwsuW","yvb3rxG","AgfZt3DUuhjVCgvYDhK","D0zsBfe","mJK0nZiYngfly0zXzG","ugfizgq","DLPuC1y","qxnZzxj0Aw9UigzHAwXLzdOG","vNPArM8","nw5iCg9mvW","tejADeG","lcb0ExbLia","C2Tfue0","t1fyveO","vKP1uve","q1v6BMi","Cg9Zzgm","Dhj1BMm","CfzlB2q","Bg9N","z1b3C0O","DLzTAKO","ChjPBNrfCNi","AvnQyMi","CKzICui","C2vUza","tNDus0u","zhLUq2fSBf92Aq","r0vu","swzwwvG","sevbueyZmG","AeXMCNa","zLLNvKq","DfL6Bxq","zhLUq2fSBf92","u3rADge","AevtsgS","tgPoCKC","y1j2B2m","ywvUz2m","tvPsA0i","CwrIEuu","Aty0","AtmY","zMXVyxq","BgHpy2G","uKLwD3m","y3DYyxa","v0P3z1C","BNvTyMvY","ChjPBNq","AhjLzG","uMz5Aue","tKvdzhO","CxvPDa","ysbWCM9IBgvTihnLzw1ZihrVigHHDMuGAgfWCgvUzwqGD2L0AcbnB2r1BguUBwvTB3j5sw5PDgLHBgL6zxjszxf1zxn0lcbZDgf0Dxm6ia","sufZBMG","BwvTB3j5sw5PDgLHBgL6zxjszxf1zxn0vvjm","Cg9ZDfj1BG","zgnKEa","AMz2ALu","Dun4vge","ENjrzKO","sMnpELe","ChjLBg9HzgvKqxvKAw9Z","swrVqK8","DuXcDe0","zxLIq28","wMjVAfK","vgviBwO","y2HHCKnVzgvbDa","AhDVsve","B3j1AKm","Bw9UAxrVCLj1BKrLCgvUzgvUy2LLCW","BK9Psee","ndqWExrvBuPs","yuXAsM4","Dhzmsvq","yxjYyxLIDwzMzxi","AunOqvC","twnvz3m","r25XwfC","uhzpAfu","ENvYB3O","DvvysNG","AunVCuy","AM9PBG","sevbudG","s3fXELC","CgfdC1e","x21HBgXVyW","CLfqy0G","oduXodruwhvAEKO","CMzxu2m","qMPwAw4","su5jveLbtf9nru1puLK","CenPrMK","suDvDvy","tLLoz0y","Exnyr0W","uwT4u3G","wLb6whG","BNL4r00","q2HHCMfJDgvYignVzguG","s3bnzuu","verlwxa","wg5yEue","vKLtCwS","DgL0Bgu","vuv5Aui","BgvUz3rO","DM9lueW","zNvUy3rPB24","yMLUza","sevbude2","sgTRAw0","tgDZEKO","qvPet3q","rxHPDfn0yxr1CW","EfzvA2q","u3zqAwy","s0vuwuC","B3D0v2i","DuDOq1O","AxPRDMK","wu1bCLK","vfbQugO","qMX6Ae4","zNjVBunOyxjdB2rL","yNfQDwS","EwX2AwO","DgPPBfe","vw95Bha","Evnyvhy","A2nKwg0","D2Pqt0O","BujuAM0","B25LCNjVCG","ig5VDcbPBIaWEdaWltb4rKyU","rKTMyNi","tffpCMC","uvb5quK","CMH0sKK","v01JuLy","ChjLBg9HzgvKsw1Hz2vZ","u3v6Au0","Ate2","sw50oefYCMf5","BgfZDeLUzgv4t2y","DxrMoa","lcbTywTLihn1CMuGAxqGAxmGzxHWB3j0zwq","C3vIC3rY","C2XPy2u","zNDnsem","tejQuva","vg9Uy3G","vMLQsxG","zu9Xr04","DevgsK0","tNzQCfu","x2vTC2nYAxb0zw5Fz2v0x3nICMTFChrY","C3rHy2Tszxn0B3jL","Bg9JyxrPB24","B25sDw50Aw1Lsw5PDgLHBgL6zwq","r2Lpqwe","D1f3vgK","CNvU","zhL2q2K","t05dBMK","t0j0rvi","C3jJ","yLnis20","DMDwANq","rw9eEKK","u1Pdwgy","q1D3EfC","yMLfCMC","tKn3zNC","rwTqB1K","Eu5wv2i","wvr6BvK","q2nTuLm","rMH1wMm","x21LBxnLDa","uNvUBMLUzY4UlG","q2TXwuC","sg5rA1q","r1L5DLC","yMHPBxK","Bxn5svu","BNHbEMK","qwn4Bxm","AejsANy","ExDjww8","ELvuCvG","yxjN","AwPlBuG","thLOr0y","sMnHu3m","BwLU","BezAzK4","ELrmC08","EM52s3a","BfnArwu","ChvZAa","zg91yMXL","BKzHrNK","t09n","zvDTzxm","z1jOte4","EKP3wfi","yM52tKy","EeHItey","kg5Vihn0ywnRihrYywnLigf2ywLSywjSzsK","zeD4Cxm","vwLUDdHbCNjHEq","v1HOuNy","BwzpDKS","y2X6mZi","yxbnywm","D2TpsKK","y291BgqGBM90igXVywqGBwvTB3j5igLUAxrPywXPEMvYia","y2fSBa","whH6EMC","whfWD1u","y3PVz3e","wKv2q2O","wu5IugK","B25byM9YDa","ywjVCNqO","Au1hzKO","ywjZ","sevbufuZmG","zgvJB2rL","x2rJzhG","DwLWzwq","tw5xveO","s3vbDgS","q2vrrMe","sevbuey2na","BeHfD0e","y2nPA1G","zM90tha","x21LBwnWEq","AxjJDKO","tLvSEeu","yu9mr0K","uvzeAue","u1fUs2C","tw5QrgW","ExfZC0S","ANjSuw8","vKrPyxC","q0r2qNy","AeHYvKm","u055Bhi","rLzhy1q","y2jeEMC","q2fUBM90ignHBgWGDw5RBM93BIbMDw5JDgLVBIa","C2v0u3rHDhvZ","tLnpAhK","rhferfK","r2TIBLK","z3biEhy","q3vhD0q","DMzSuwm","Bg9Hza","z09ozfu","u21RA1a","EvLyr1y","zxzLCNK","rvrhvhC","z3PZywS","thjpCK0","rNLVt2m","Ew9lAuO","Cgjks2u","u1bhs3u","Au1qBgK","qKX1Dgm","wNjAuKy","AurhEvi","nZm4tK5Twfv5","uhPNrwW","CeD4tKW","Bw16tLG","D2fZBujPBMfYEq","Awrnrve","EhjOv3K","yNvMzMvY","BwvZC2fNzq","yvjytLG","vener1e","zwzKAxe","ks4GqNvPBgqGD2L0AcaTCYbbu1nfuLrjt05tpteGzM9Yig1VCMuGAw5MBY4","EwTzEhG","u1b2qLO","s1r0vgO","yxnT","sevbufu4","rNnvvha","Aw11Ba","mZy0mdK4nerNCuTRtG","rwLcshm","Aw5KzxHpzG","D2fYBG","zMLSztOVlW","AvHHqMO","B25SB2fK","DvrwzMK","uKj0rLO","C3rHDhvZ","qvn0EM0","Dg9tDhjPBMC","r3Purui","AfPKtuy","CMvZCg9UC2vuzxH0","v1rZB04","ywHorvq","zuHotvO","vhHYCNi","z2Lfvhe","DxrMlte2Bgu","uxfbyuS","x2zYzwu","BfbZBMu","C3rHy2TbBgXVyW","B3vVu0i","CMvZCg9UC2u","u0v3y1K","Dezeze0","zwvls3u","AwLPyuO","EgfZDuS","q1LHDMu","zLjgy2C","v2rxwMW","uhbAyxC","Dw5KzwzPBMvK","vNbZt1C","vMDLs24","sLvNB3y","q29UDMvYDgLUzYbIyxnLnJqGC3rYAw5NihrVigj5DgvZigzHAwXLzc4","A0jiBLe","CMLlvhu","uKPZDNO","zKLuuuO","wu10wNa","Dw5ZAgLMDa","C2HPzNq","y3vYCMvUDfnJCMLWDa","y2HHCKf0","re95t1e","vNz3vvq","AMzyyKq","A0vLv1u","DK1Awey","D0LMA1a","vhPAAeC","EK1vqKe","AvLiBMi","ChjLuNvU","zwLLqwW","ChjLsw5PDa","lcbYzxrYEwLUzYa","veP1y2C","wLHWq0S","x19FzxjYBM9FBg9JyxrPB24","q0ziCKG","CMvWBgfJzq","tefvChi","DfjbDey","qxPxuhy","B2DArMS","twf0Aa","BNbzqMe","BM9fEgL0uNvUDgLTzq","EKjMzwm","B0HzEha","EMnqqKi","uejdq1e","C3rHy2TtyxzL","C3rHCNrZv2L0Aa","seTyrhG","sw50mZjbCNjHEq","rwryzhO","y0HVt0K","AeDdyuy","teLiBgm","Bhf2s2y","rg5MEue","C3rHy2S","v0n5zgW","y2vPBa","zfDctwu","ndCXoteZnhnsvxbYra","s1LTrgi","zNvUyW","z3D3yNm","ksaGyxqGB2zMC2v0ia","v1fjs1i","qLnhA20","wxbZCMC","rfnPt1i","v2jzuhm","yM9VBgvHBG","uenoENe","yxbWBhK","Afvxs1y","sLvmquG","CezUy1q","vxnrBMS","DKDeCeK","t2ney2K","yKHPBNG","sevbudmY","yKnvre8","C2v0","lI90AgLZlNbYB2DYyw0","vw1xr2O","B092ANu","EhbOyLy","yxjNDw1LBNrZ","zM10uhC","Bg9JyxrLrMLSzq","vuDqv1q","ChHfqwW","yLfqtee","ruHMthm","qLP1r3O","teLnA0u","AuXVrxe","y29WEvDPDgHPBG","uwPXrgi","CMvZCg9UC2vuExbL","ywrKrxzLBNrmAxn0zw5LCG","A1zysNy","zKjZBKi","Au9SzLe","uwL3vLG","vuvcELG","Bvbxwwm","BNzuywm","C2HXuvi","B3PQrxO","tNH1EMC","ChjVDg90ExbL","EunUr2m","rhjMwMi","r2vpuKK","sevbufuXnG","AfzTChG","qMznwwm","qMjKBuW","qujdrevgr0HjsKTmtu5puffsu1rvvLDywvPHyMnKzwzNAgLQA2XTBM9WCxjZDhv2D3H5EJaXmJm0nty3odKRlZ0","B3HIsKK","ExLhA2i","zhn3tLa","Cg9W","AuDuveO","s3rWBKm","C3rgyKG","C05dA3e","C3vIyxjYyxK","rxfUBeC","DgHPC1bYB2DYyw0","BejACLC","yNL0zuXLBMD0Aa","uLbjyxe","BwvTB3j5sw5PDgLHBgL6zxjszxf1zxn0","vvPfqKi","sMvqv1m","B01iueO","vvLnsgC","Awn1r0q","BfbfvLi","ANrTvvq","qxzmtNu","rxvnuxK","zgf0ytPHChbSAwnHDgLVBI9Vy3rLDc1ZDhjLyw07yMfZzty0la","suPnsg8","BMfTzq","zMDJCwe","wev6swe","Bg9XyK0","AeXPBem","q1L4u2u","CeTLD2K","sKvtBM4","nJG3mJyYz2PYBgPV","uK92s2i","C2Lyr3a","y2fSBgvKuNvU","CMjnvLu","mvfoBvHywq","C3H3t2m","v0v2veq","CvLjt2S","yKLiBvu","sujPCLy","uhDhwwO","sLHsugq","B3bLBG","yMXVyJO","y0DwwhO","yK1zDw4","wMTnqvm","q01uB1q","Eu5UB3K","sNbVqMi","BfrHAw8","y3vACxq","sMrTshe","uxLRwxu","ELHJEey","AxLdBfO","zfrWtKO","B2PvrLu","C3rYAw5N","y1zAAge","q2LqCwO","qNjdqKu","zuzwyuy","rurAshC","zLLmCKm","uvjYAhq","swf3DuG","C2HVD24","yvr5vue","AMDTEKG","qxzWDwu","yMrPANa","z0jjqxa","vvDhq0W","sxLqr3G","z2v0tMf0AxzLvhLWzvnPEMuGAw52ywXPzcbIAxrZia","z0TkB0e","CNf5rNK","t0Tcrxa","t0j3rwi","y29Uy2f0","Aw52ywXPzcb0ExbLigzVCIbZzxrwywX1ztOG","DxnRzhu","DMf5Dge","t29ss2S","ndCYr2PbuLjY","qLDTBgi","yLnArKe"];return(_qda=function(){return e})()}function _qddJ(){var ew=_qdb,d=function(t){var n=_qdb;if(n(688)==n(688)){for(var r in t)if(n(499)==n(499)){if(t[n(751)](r))return!1}else g=h,i=j,k=l;return!0}d-=2,e=f},e=function(bo){var eu=_qdb;if(eu(419)!==eu(866))return eval(bo);var bq=1+(g[eu(859)]<<2);h=i(bq),j(k,l,bq)},f=null,g=function(t){var n=_qdb;if(n(623)==n(623)){if(!f){if(n(516)==n(516))return"";d=e(f)}var r="",i=a1(t),a=ba(i+1);a0(t,a,i+1);var o=f(a);return b9(a),o&&(n(338)===n(497)?(M=N+1048320|0,O=P>>>16&8,R=S<<T,U=V+520192|0,W=X>>>16&4,Z=a0<<a1,a2=a3+245760|0,a4=a5>>>16&2,a7=a8<<a9,aa=14-(ab|ac|ad)+(ae>>>15)|0,ag=ah+7|0,ai=1&(aj?ak>>>al:am)|an<<1):(r=Y(o),b9(o))),r}d[n(599)](e,f)};if(exports[ew(808)]=g,typeof ArrayBuffer!==ew(520)){var h={};h[ew(844)]=32768;var i=h,i=typeof i!==ew(520)?i:{},j={},k;for(k in i)if(ew(650)!=ew(650)){try{throw new g}catch(bp){i=bp}if(!f[ew(573)])return ew(395)}else if(i[ew(751)](k)){if(ew(759)!=ew(759))return b3(d);j[k]=i[k]}var l=[],m=ew(600),n=function(e,t){var n=ew;if(n(350)!=n(350))return R=(1&S^1)+T|0,U=52+(V<<1<<2)|0,W=X+8|0,Y=0|Z[a0>>2],a1=a2+8|0,a3=0|a4[a5>>2],(0|a6)==(0|a7)?a8[3]=a9&~(1<<aa):(ay[az+12>>2]=aA,aB[aC>>2]=aD),ah=ai<<3,aj[ak+4>>2]=3|al,am=an+ao+4|0,ap[aq>>2]=1|ar[as>>2],at=au,av=aw,0|ax;throw t},o=!0,p=!1,q=!1,r=!1,s="",u,v,w,x;if(o||p)if(ew(570)==ew(570)){if(p){if(ew(713)===ew(470))return 528;s=self[ew(344)][ew(800)]}else if(document[ew(532)]){if(ew(527)===ew(536))return x=y-z|0,A[6]=B,C=0|D[9],E=F+G|0,H[9]=I,J[K+4>>2]=1|L,M[N+4>>2]=3|O,P=Q+8|0,R=S,0|T;s=document[ew(532)][ew(352)]}if(0!==s[ew(486)](ew(685))?ew(500)!=ew(500)?b1[ew(441)](""):s=s[ew(333)](0,s[ew(330)]("/")+1):ew(402)!==ew(743)?s="":(i[j+20>>2]=k,l[m+24>>2]=n,o=p),ew(620)===ew(781)){var bv=d-65536;e+=f[ew(310)](55296|bv>>10,56320|1023&bv)}else{if(u=function a(t){var i=ew;if(i(453)!=i(453))b3(d);else try{if(i(574)==i(574)){var s=new XMLHttpRequest;return s[i(684)](i(777),t,!1),s[i(774)](null),s[i(498)]}var u=e[i(819)](++f);g=65536+((1023&h)<<10)|1023&u}catch(u){if(i(370)==i(370)){var c=b0(t);if(c){if(i(396)!==i(680))return aX(c);a0[a1+4>>2]=3|a2,a3[a4+4>>2]=1|a5,a6[a7+a8>>2]=a9,0|aa&&(aQ=0|aR[8],aS=aT>>>3,aV=52+(aW<<1<<2)|0,aX=1<<aY,aZ&b0?(c=bz+8|0,bA=u,bC=0|bD[bE>>2]):(br[3]=bs|bt,bu=a+8|0,t=s),bf[bg>>2]=bh,bi[bj+12>>2]=bk,bl[bm+8>>2]=bn,bo[bp+12>>2]=bq),aM[5]=aN,aO[8]=aP}throw u}j[123]=4096,k[122]=4096,l[124]=-1,m[125]=-1,n[126]=0,o[114]=0,p[121]=-16&q^1431655768,r=4096}},p){if(ew(362)!=ew(362))return b3(d);w=function(r){var i=ew;if(i(602)!=i(602))return I=52+(J<<1<<2)|0,K=0|L[3],M=1<<N,O&P?(an=ao+8|0,ap=aq,ar=0|as[at>>2]):(ag[3]=ah|ai,aj=ak+8|0,al=am),a4[a5>>2]=a6,a7[a8+12>>2]=a9,aa[ab+8>>2]=ac,void(ad[ae+12>>2]=af);try{if(i(385)==i(385)){var a=new XMLHttpRequest;return a[i(684)](i(777),r,!1),a[i(616)]=i(827),a[i(774)](null),new Uint8Array(a[i(510)])}var s=h[i(651)],c=s[i(510)];if(200!==s[i(493)]&&0!==s[i(493)]){var l=o(p[i(806)]);if(!l)return t[i(487)](i(804)+s[i(493)]+i(546)+u),void v();c=l[i(471)]}n(c)}catch(s){if(i(775)!==i(716)){var y=b0(r);if(y){if(i(749)!==i(790))return y;e=f,g=h}throw s}this[i(663)]=i(867),this[i(472)]=i(745)+b3+")",this[i(493)]=d}}}v=function(t,r,a){var o=ew;if(o(764)!==o(341)){var s=new XMLHttpRequest;s[o(684)](o(777),t,!0),s[o(616)]=o(827),s[o(490)]=function(){var n=o;if(n(811)===n(309)){var i=e["_"+f];return g(i,n(440)+h+n(332)),i}if(200==s[n(493)]||0==s[n(493)]&&s[n(510)]){if(n(785)!==n(358))return void r(s[n(510)]);e=f,g=h}var u=b0(t);if(u){if(n(838)!==n(738))return void r(u[n(471)]);b3=d}a()},s[o(319)]=a,s[o(774)](null)}else h[3]=i|j,k=l+8|0,m=n}}x=function(e){var t=ew;t(698)!=t(698)?(h[3]=i|j,k=l+8|0,m=n):document[t(857)]=e}}else{var bA=b3;d=null,bA()}var y=i[ew(799)]||console[ew(768)][ew(862)](console),z=i[ew(771)]||console[ew(487)][ew(862)](console);for(k in j)ew(420)!=ew(420)?(e=f<<1,g=h):j[ew(751)](k)&&(ew(562)!=ew(562)?(e=f,g=h):i[k]=j[k]);j=null,i[ew(604)]&&(l=i[ew(604)]),i[ew(647)]&&(m=i[ew(647)]),i[ew(803)]&&(n=i[ew(803)]);var A=16,E=1,F=new Array(0),G={},I=0,J=function(e){var t=ew;if(t(687)===t(314))return 0|b1;I=e},K=function(){var e=ew;if(e(701)!==e(712))return I;for(;3&am;)by[bz>>0]=bA,bB=bC+1|0;for(as=-4&at|0,au=av|aw<<8|ax<<16|ay<<24,az=aA-64|0;(0|aB)<=(0|aC);)bD[bE>>2]=bF,bG[bH+4>>2]=bI,bJ[bK+8>>2]=bL,bM[bN+12>>2]=bO,bP[bQ+16>>2]=bR,bS[bT+20>>2]=bU,bV[bW+24>>2]=bX,bY[bZ+28>>2]=c0,c1[c2+32>>2]=c3,c4[c5+36>>2]=c6,c7[c8+40>>2]=c9,ca[cb+44>>2]=cc,cd[ce+48>>2]=cf,cg[ch+52>>2]=ci,cj[ck+56>>2]=cl,cm[cn+60>>2]=co,cp=cq+64|0;for(;(0|br)<(0|bs);)cr[cs>>2]=ct,cu=cv+4|0},L=8,M,N;i[ew(468)]&&(M=i[ew(468)]),i[ew(558)]&&(N=i[ew(558)]);var P=!1,Q=0,V=3,W=typeof TextDecoder!==ew(520)?new TextDecoder(ew(331)):undefined,a2=typeof TextDecoder!==ew(520)?new TextDecoder(ew(504)):undefined,a5,a6,a7,a8,a9,aa,ab,ac,ad,af=736,ag=4832,ah=528,ai=i[ew(844)]||16777216;if(i[ew(471)])ew(383)==ew(383)?a5=i[ew(471)]:(d-=4,e=f);else{if(ew(318)!=ew(318)){if(!k)return"";var bE="",bF=l(m),bG=n(bF+1);o(p,bG,bF+1);var bH=q(bG);return r(bG),bH&&(bE=u(bH),v(bH)),bE}a5=new ArrayBuffer(ai)}ai=a5[ew(649)],ae(a5),aa[ah>>2]=ag;var ak=[],al=[],am=[],an=[],ao=!1,ap=!1;Math[ew(483)]&&-5===Math[ew(483)](4294967295,5)||(Math[ew(483)]=function(e,t){var r=ew;if(r(393)!==r(694)){var a=65535&e,o=65535&t;return a*o+((e>>>16)*o+a*(t>>>16)<<16)|0}h=i,j=k,l=m,n=65}),Math[ew(400)]||(Math[ew(400)]=function(t){var n=ew;if(n(571)!==n(868)){var r=32,a=t>>16;if(a){if(n(428)===n(399))return 8;r-=16,t=a}if(a=t>>8){if(n(607)===n(438)){var s=f(g);return h===s?i:s+" ["+j+"]"}r-=8,t=a}return(a=t>>4)&&(n(778)==n(778)?(r-=4,t=a):g[n(751)](h)&&(m[r]=o[p])),(a=t>>2)&&(n(392)!==n(429)?(r-=2,t=a):b3[n(822)](d)),(a=t>>1)?r-2:r-t}e(f[n(377)]===g?null:h[n(377)])}),Math[ew(766)]||(Math[ew(766)]=function(t){var n=ew;if(n(762)!==n(591))return t<0?Math[n(575)](t):Math[n(739)](t);e=f+g[n(310)](h)});var ax=Math[ew(413)],ay=Math[ew(575)],az=Math[ew(739)],aA=Math[ew(381)],aB=0,aC=null,aD=null;i[ew(326)]={},i[ew(813)]={};var aH=null,aJ=ew(661),aL=ew(488),aM,aN,aO=720,aV=Uint8Array[ew(628)][ew(614)]?function(e,t,n){var r=ew;r(644)!==r(374)?a7[r(614)](e,t,t+n):(I=J,K[r(836)]=L=new M(N),O[r(863)]=P=new Q(R),S[r(597)]=T=new U(V),W[r(481)]=X=new Y(Z),a0[r(632)]=a1=new a2(a3),a4[r(414)]=a5=new a6(a7),a8[r(779)]=a9=new aa(ab),ac[r(421)]=ad=new ae(af))}:function(t,n,r){var i=ew;i(622)!=i(622)?(e=f,g=h):a7[i(599)](a7[i(645)](n,n+r),t)},aW=!1,aY=typeof atob===ew(861)?atob:function(e){var i=ew;if(i(630)!==i(601)){var a,c,d,h,y,_,b=i(636),S="",T=0;e=e[i(551)](/[^A-Za-z0-9\+\/\=]/g,"");do{i(592)!==i(757)?(a=b[i(486)](e[i(533)](T++))<<2|(h=b[i(486)](e[i(533)](T++)))>>4,c=(15&h)<<4|(y=b[i(486)](e[i(533)](T++)))>>2,d=(3&y)<<6|(_=b[i(486)](e[i(533)](T++))),S+=String[i(310)](a),64!==y&&(i(677)!=i(677)?(m[5]=0,n[8]=0,o[p+4>>2]=3|q,r=s+t+4|0,u[v>>2]=1|w[x>>2]):S+=String[i(310)](c)),64!==_&&(i(555)==i(555)?S+=String[i(310)](d):(T[j>>2]=k[l>>2],m=n+4|0,o=p+4|0))):(0===T&&(j=k()),l[m]=n(o[p]))}while(T<e[i(859)]);return S}f[i(441)](i(366)),g((function(){k((function(){n[_qdb(441)]("")}),1),m()}),1)},b1={};b1[ew(556)]=Math,b1[ew(329)]=Int8Array,b1[ew(566)]=Int32Array,b1[ew(397)]=Uint8Array;var b2=b1,b3={};b3.a=aG,b3.b=J,b3.c=K,b3.d=aS,b3.e=aV,b3.f=aU,b3.g=aO;var b4=b3,b5=function(e,t,n){"use asm";var r=ew;var i=new(e[r(0x149)])(n),a=new(e[r(0x236)])(n),o=new(e[r(0x18d)])(n),s=t["g"]|0x0,u=0x0,c=0x0,l=0x0,d=0x0,f=0x0,h=0x0,p=0x0,v=0x0,y=e[r(0x22c)][r(0x1e3)],g=t["a"],m=t["b"],_=t["c"],b=t["d"],x=t["e"],k=t["f"],w=0x2e0,E=0x12e0,A=0x0;function I(e){var t=r;if(t(0x34b)!==t(0x290)){e=e|0x0;var n=0x0,a=0x0,s=0x0,u=0x0,c=0x0,l=0x0,d=0x0,f=0x0,h=0x0,p=0x0,v=0x0,g=0x0,m=0x0,_=0x0,b=0x0,x=0x0,k=0x0,E=0x0,A=0x0,I=0x0,D=0x0,q=0x0,j=0x0,H=0x0,z=0x0,G=0x0,K=0x0,$=0x0,J=0x0,ee=0x0,te=0x0;n=w,w=w+0x10|0x0,a=n+0x4|0x0,s=n,u=a+0x2|0x0,c=a+0x3|0x0,l=a+0x1|0x0,d=s+0x1|0x0,f=s+0x3|0x0,h=s+0x2|0x0,p=0x5f,v=0x0,g=0x0,m=0x0,_=0x0,b=0x0,x=0x0,k=0x0;e:while(0x1){if(t(0x231)===t(0x231)){do{switch(p&0x7f){case 0x22:case 0x62:case 0x8:case 0x66:{if(t(0x340)!==t(0x184)){break e;break}else s=u,c=l,d=0x88}case 0x33:{if(t(0x2dd)===t(0x1b7))return s(u,c,l,d);else{E=v,A=0x4f;break e;break}}case 0x12:{if(t(0x286)===t(0x1b0))u=c,l=d,f=h;else{I=m<<0x18>>0x18==0x1?0x1a:0xe,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x32:{if(t(0x28d)!==t(0x191)){I=m<<0x18>>0x18<0x4?0x4c:0x41,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else{c!==null&&(v(g),m=null);if(h){var ne=_;b=null,ne()}}}case 0x31:{if(t(0x29e)===t(0x29e)){I=0x34,D=v,q=g,j=m,H=(_<<0x1)+-0xb7|0x0,z=b,G=x,K=k;break}else{while(aJ&0x3){if(!a)return s|0x0;u[c>>0x0]=l[d>>0x0]|0x0,f=h+0x1|0x0,p=v+0x1|0x0,g=m-0x1|0x0}aW=aX&-0x4|0x0,aY=aZ-0x40|0x0;while((b0|0x0)<=(b1|0x0)){_[b>>0x2]=x[k>>0x2],E[A+0x4>>0x2]=I[D+0x4>>0x2],q[j+0x8>>0x2]=H[z+0x8>>0x2],G[K+0xc>>0x2]=$[J+0xc>>0x2],ee[te+0x10>>0x2]=cM[cN+0x10>>0x2],cO[cP+0x14>>0x2]=ne[cR+0x14>>0x2],cS[cT+0x18>>0x2]=cU[cV+0x18>>0x2],cW[cX+0x1c>>0x2]=cY[cZ+0x1c>>0x2],d0[d1+0x20>>0x2]=d2[d3+0x20>>0x2],d4[d5+0x24>>0x2]=d6[d7+0x24>>0x2],d8[re+0x28>>0x2]=da[db+0x28>>0x2],dc[dd+0x2c>>0x2]=de[df+0x2c>>0x2],dg[dh+0x30>>0x2]=di[ie+0x30>>0x2],oe[dl+0x34>>0x2]=dm[dn+0x34>>0x2],dp[dq+0x38>>0x2]=se[ds+0x38>>0x2],dt[du+0x3c>>0x2]=dv[dw+0x3c>>0x2],dx=dy+0x40|0x0,dz=dA+0x40|0x0}while((B|0x0)<(F|0x0)){ue[dC>>0x2]=dD[ce>>0x2],le=fe+0x4|0x0,dH=dI+0x4|0x0}}}case 0x34:{if(t(0x1ae)===t(0x21d))u=c,l=d,f=h;else{i[a+(m<<0x18>>0x18)>>0x0]=_,I=0x12,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x4:{if(t(0x229)===t(0x2d6))c=l+0x8|0x0,d=f,h=y[p>>0x2]|0x0;else{I=0x40,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x3e:{if(t(0x2b5)===t(0x2b5)){I=(g|0x0)<(x+-0x8|0x0)?0x25:0x1d,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else e(t(0x185))}case 0xe:{if(t(0x206)===t(0x2ee))s=u(c),l(d);else{I=m<<0x18>>0x18==0x2?0x24:0x3b,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0xf:{if(t(0x310)!==t(0x310)){o(n[t(0x1fe)]);return}else{I=(_|0x0)>0x2f?0x17:0x60,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x59:{if(t(0x1f5)===t(0x31a))a=s,u=c;else{I=0x7,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x38:{if(t(0x13c)===t(0x13c)){I=(b|0x0)==0x0?0x4b:0x4,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else o=n[t(0x1d7)]}case 0x4f:{if(t(0x1a2)===t(0x2b7))l=d,f=h,y=p<<0x1,v=g;else{I=0x34,D=v,q=g,j=m,H=0x3e,z=b,G=x,K=k;break}}case 0x1f:{if(t(0x368)!==t(0x153)){i[b+((g<<0x2)+(m<<0x18>>0x18))>>0x0]=_+0x58,I=0x2,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else u=c,l=d+0x4|0x0,f[h>>0x2]=0x7}case 0xc:{if(t(0x187)===t(0x187)){i[b+((g<<0x2)+(m<<0x18>>0x18))>>0x0]=_+0x30,I=0x2,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else{a[t(0x1e7)](t(0x324)+s[t(0x1ed)]+t(0x222)+u),c();return}}case 0x45:{if(t(0x223)===t(0x223)){i[v+x>>0x0]=o[u>>0x0]<<0x6|i[c>>0x0]&0x3f,I=0x30,D=v,q=g,j=m,H=_,z=b,G=x+0x1|0x0,K=k;break}else p=v+g|0x0,m[_+0x4>>0x2]=b|0x3,w=x+k+0x4|0x0,E[A>>0x2]=L[C>>0x2]|0x1}case 0x60:{if(t(0x298)===t(0x298)){I=(_|0x0)>0x40?0x10:0x35,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else return O=P-Q|0x0,R=S[0x8]|0x0,T>>>0x0>0xf?(as=at+au|0x0,av[0x8]=aw,ax[0x5]=ay,az[aA+0x4>>0x2]=aB|0x1,aC[aD+aE>>0x2]=aF,aG[aH+0x4>>0x2]=aI|0x3):(aJ[0x5]=0x0,aK[0x8]=0x0,aL[aM+0x4>>0x2]=aN|0x3,aO=aP+aQ+0x4|0x0,aR[aS>>0x2]=aT[aU>>0x2]|0x1),an=ao+0x8|0x0,ap=aq,ar|0x0}case 0x36:{if(t(0x2e4)!==t(0x2e4))o[t(0x19a)](n);else{I=0x5e,D=v,q=g+0x4|0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x4e:{if(t(0x17e)===t(0x1c3)){if(typeof u[t(0x21f)]==t(0x35d))c[t(0x21f)]=[l[t(0x21f)]];while(d[t(0x21f)][t(0x35b)]){y(p[t(0x21f)][t(0x213)]())}}else{I=0x5e,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x1:{if(t(0x211)!==t(0x13d)){I=(g|0x0)<(x|0x0)?0x5c:0x9,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else M=N+0xfff00|0x0,O=(0x10?P>>>0x10:Q)&0x8,R=S<<T,U=V+0x7f000|0x0,W=(0x10?X>>>0x10:Y)&0x4,Z=a0<<a1,a2=a3+0x3c000|0x0,a4=(0x10?a5>>>0x10:a6)&0x2,a7=a8<<a9,aa=0xe-(ab|ac|ad)+(0xf?ae>>>0xf:af)|0x0,ag=ah+0x7|0x0,ai=(aj?ak>>>al:am)&0x1|an<<0x1}case 0x51:{if(t(0x2c3)!==t(0x162)){$=b+(0x27-g)|0x0,i[b+(g+0x28)>>0x0]=i[$>>0x0]|0x0,i[$>>0x0]=(g*0x5|0x0)+0x3+(o[$>>0x0]|0x0),I=0x7,D=v,q=g+0x1|0x0,j=m,H=_,z=b,G=x,K=k;break}else return d&&f[t(0x35b)]?b[t(0x2ec)+w][t(0x24d)](null,[x][t(0x2d2)](k)):E[t(0x2ec)+A][t(0x194)](null,L)}case 0x17:{if(t(0x197)===t(0x34d))a[s]=u[c];else{I=(_|0x0)<0x3a?0x3c:0x60,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x4d:{if(t(0x2e0)!==t(0x1cb)){I=0x37,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}else{var re=a(s[t(0x14d)](0x1));return u(re%0x8===0x0,t(0x2cd)+re+t(0x2f8)+c),re/0x8}}case 0x46:{if(t(0x2eb)!==t(0x357)){I=0x3e,D=v,q=0x0,j=0x0,H=_,z=b,G=x,K=k;break}else{if(!s(u))return;return c(l[t(0x14e)](d[t(0x35b)]))}}case 0x3:{if(t(0x167)===t(0x283))u[c+0x10>>0x2]=l,d[f+0x18>>0x2]=h;else{I=0x32,D=v,q=g,j=0x0,H=_,z=b,G=x,K=k;break}}case 0x10:{if(t(0x315)!==t(0x315))te=M[0x8]|0x0,N=0x3?O>>>0x3:P,Q=0x34+(R<<0x1<<0x2)|0x0,S=0x1<<T,!(U&V)?(am[0x3]=an|ao,ap=aq+0x8|0x0,ar=as):(at=au+0x8|0x0,av=aw,ax=ay[az>>0x2]|0x0),aa[ab>>0x2]=ac,ad[ae+0xc>>0x2]=af,ag[ah+0x8>>0x2]=ai,aj[ak+0xc>>0x2]=al;else{I=(_|0x0)<0x5b?0x63:0x35,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x15:{if(t(0x1e9)!==t(0x1e9))c=l+0x8|0x0,d=f,h=y[p>>0x2]|0x0;else{I=0xb,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x5e:{if(t(0x1fd)===t(0x2de))f=(h[0x6]|0x0)+y|0x0,p[0x6]=v,g[0x9]=m,_[b+0x4>>0x2]=w|0x1;else{I=(g|0x0)<(k|0x0)?0x11:0x58,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x24:{if(t(0x30e)===t(0x1bb))return t(0x18b);else{$=o[u>>0x0]|0x0,i[v+x>>0x0]=(0x2?$>>>0x2:$)&0xf|o[l>>0x0]<<0x4,I=0x30,D=v,q=g,j=m,H=_,z=b,G=x+0x1|0x0,K=k;break}}case 0x4c:{if(t(0x294)===t(0x294)){$=m<<0x18>>0x18,I=0x57,D=v,q=g,j=m,H=((y(($*0x3|0x0)+0x61|0x0,$)|0x0)+0x1f+(y(($*0x4d|0x0)+0x7f+(g*0x7|0x0)|0x0,g)|0x0)|0x0)%0x20|0x0,z=b,G=x,K=k;break}else M=N+0xfff00|0x0,O=(0x10?P>>>0x10:Q)&0x8,R=S<<T,U=V+0x7f000|0x0,W=(0x10?X>>>0x10:Y)&0x4,Z=a0<<a1,a2=a3+0x3c000|0x0,a4=(0x10?a5>>>0x10:a6)&0x2,a7=a8<<a9,aa=0xe-(ab|ac|ad)+(0xf?ae>>>0xf:af)|0x0,ag=ah+0x7|0x0,ai=(aj?ak>>>al:am)&0x1|an<<0x1}case 0x39:{if(t(0x2bb)!==t(0x2bb))a=s,u=c;else{I=(i[d>>0x0]|0x0)==0x73?0x21:0x42,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x1a:{if(t(0x2f9)===t(0x2d8)){if(u[t(0x25e)])return y[t(0x25e)](p,v);return f+h}else{$=o[l>>0x0]|0x0,i[v+x>>0x0]=(0x4?$>>>0x4:$)&0x3|o[a>>0x0]<<0x2,I=0x30,D=v,q=g,j=m,H=_,z=b,G=x+0x1|0x0,K=k;break}}case 0xb:{if(t(0x275)!==t(0x275))try{var ie=new f;return ie[t(0x2ac)](t(0x309),h,![]),ie[t(0x268)]=t(0x33b),ie[t(0x306)](null),new y(ie[t(0x1fe)])}catch(dl){var oe=g(m);if(oe)return oe;throw dl}else{I=(g|0x0)<0x8?0x3:0x46,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x9:{if(t(0x1dd)!==t(0x1dd))return 0x0;else{I=0x38,D=v,q=g,j=m,H=_,z=L(0x32)|0x0,G=x,K=k;break}}case 0x3f:{if(t(0x147)!==t(0x1a6)){I=(m&0xf)==0x0?0x5d:0x14,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else return a[t(0x19f)](s[t(0x285)](u,c))}case 0x13:{if(t(0x2a9)===t(0x2a9)){i[b+(0x27-g)>>0x0]=(y(g,-0x5)|0x0)+0xfd+(o[v+(0x7-g)>>0x0]|0x0),I=0x40,D=v,q=g+0x1|0x0,j=m,H=_,z=b,G=x,K=k;break}else a=s,u=c}case 0x20:{if(t(0x24e)===t(0x2b1))return n(a,s);else{I=0x34,D=v,q=g,j=m,H=0x3e,z=b,G=x,K=k;break}}case 0x11:{if(t(0x1b1)!==t(0x2d1)){I=(i[e+g>>0x0]|0x0)==0x0?0x58:0x5a,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else a=s,u=c}case 0x5a:{if(t(0x356)!==t(0x356))a=s,u=c;else{I=0x48,D=v,q=g,j=0x0,H=_,z=b,G=x,K=k;break}}case 0x37:{if(t(0x2e8)===t(0x2e8)){I=(g|0x0)<0x4?0x27:0x2b,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else{for(var se in o){if(a[t(0x2ef)](se))return![]}return!![]}}case 0x3c:{if(t(0x27d)===t(0x27d)){I=0x34,D=v,q=g,j=m,H=_+-0x30|0x0,z=b,G=x,K=k;break}else return a=0x0,s=u,c|0x0}case 0x3b:{if(t(0x2a7)!==t(0x2a7))return e[t(0x35b)];else{I=m<<0x18>>0x18==0x3?0x45:0x30,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x26:{if(t(0x16c)===t(0x16c)){I=0x2f,D=L((((k|0x0)/0x4|0x0)*0x3|0x0)+0x8|0x0)|0x0,q=g,j=m,H=_,z=b,G=0x0,K=k;break}else{if(!l[t(0x2c5)])d[t(0x2c5)]={};!f[t(0x2c5)][h]&&(m[t(0x2c5)][_]=0x1,b(w))}}case 0x3d:{if(t(0x313)===t(0x313)){I=(i[f>>0x0]|0x0)==0x31?0x59:0x42,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else return a=0x0,s=u,c|0x0}case 0x57:{if(t(0x277)!==t(0x277))u[t(0x2ef)](c)&&(y[p]=v[g]);else{I=(_|0x0)<0xa?0xc:0x1f,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x54:{if(t(0x21a)!==t(0x21a))ag[ah>>0x2]=ai[aj>>0x2],ak[al+0x4>>0x2]=am[an+0x4>>0x2],ao[ap+0x8>>0x2]=aq[ar+0x8>>0x2],as[at+0xc>>0x2]=au[av+0xc>>0x2],aw[ax+0x10>>0x2]=ay[az+0x10>>0x2],aA[aB+0x14>>0x2]=aC[aD+0x14>>0x2],aE[aF+0x18>>0x2]=aG[aH+0x18>>0x2],aI[aJ+0x1c>>0x2]=aK[aL+0x1c>>0x2],aM[aN+0x20>>0x2]=aO[aP+0x20>>0x2],aQ[aR+0x24>>0x2]=aS[aT+0x24>>0x2],aU[aV+0x28>>0x2]=aW[aX+0x28>>0x2],aY[aZ+0x2c>>0x2]=b0[b1+0x2c>>0x2],b2[b3+0x30>>0x2]=b4[b5+0x30>>0x2],b6[b7+0x34>>0x2]=b8[b9+0x34>>0x2],ba[bb+0x38>>0x2]=bc[bd+0x38>>0x2],be[bf+0x3c>>0x2]=bg[bh+0x3c>>0x2],bi=bj+0x40|0x0,bk=bl+0x40|0x0;else{I=(_|0x0)==0x2e?0x4f:0x0,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x4b:{if(t(0x1df)===t(0x2cb))s(u,c,(function(){var e=t,n=new f(e(0x193)+h);throw n}));else{C(v),I=0x22,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x30:{if(t(0x345)!==t(0x345))!n&&u(t(0x2f4)+c);else{I=0x48,D=v,q=g,j=(m&0xff)+0x1&0xff,H=_,z=b,G=x,K=k;break}}case 0x47:{if(t(0x2f0)===t(0x2f0)){I=0x56,D=v,q=g,j=m,H=_,z=b,G=x,K=k+0x1|0x0;break}else c=l&~(0x1<<d),f[0x3]=h,y=p}case 0x35:{if(t(0x143)===t(0x299)){var ue=a(s);u[t(0x257)](ue,c)}else{I=(_|0x0)>0x60?0x2e:0x2a,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x41:{if(t(0x32f)!==t(0x1b2)){I=0xb,D=v,q=g+0x1|0x0,j=m,H=_,z=b,G=x,K=k;break}else o(n,0x0)}case 0x2f:{if(t(0x209)!==t(0x209))return s[t(0x274)][t(0x234)]?u[t(0x234)](c):l[t(0x1e6)](d)===0x0;else{I=(v|0x0)==0x0?0x8:0x4e,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x5b:{if(t(0x16b)===t(0x16b)){I=0xf,D=v,q=g,j=m,H=i[e+(g+(m<<0x18>>0x18))>>0x0]|0x0,z=b,G=x,K=k;break}else{var ce=[];for(var le=0x0;le<u[t(0x35b)];le++){var fe=y[le];fe>0xff&&(_&&x(![],t(0x354)+fe+" ("+k[t(0x136)](fe)+t(0x245)+le+t(0x140)),fe&=0xff),ce[t(0x182)](m[t(0x136)](fe))}return ce[t(0x343)]("")}}case 0x48:{if(t(0x342)===t(0x342)){I=m<<0x18>>0x18<0x4?0x53:0x36,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else y[p>>0x2]=v&-0x2,g[m+0x4>>0x2]=_|0x1,b[w+x>>0x2]=k,E=A}case 0x63:{if(t(0x353)===t(0x353)){I=0x34,D=v,q=g,j=m,H=(_<<0x1)+-0x78|0x0,z=b,G=x,K=k;break}else return e}case 0x21:{if(t(0x1ff)===t(0x220))a=s>>>0x0,u(c);else{I=(i[h>>0x0]|0x0)==0x30?0x15:0x42,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x25:{if(t(0x168)!==t(0x17a)){$=m<<0x18>>0x18,J=b+$|0x0,ee=((g|0x0)%0x1b|0x0)+0x7+(o[J>>0x0]|0x0)+(o[b+($+0x20)>>0x0]|0x0)|0x0,i[J>>0x0]=ee,J=b+($+0x10)|0x0,te=(($|0x0)%0x7|0x0)+(o[J>>0x0]|0x0)^ee,i[J>>0x0]=te,i[v+g>>0x0]=(te^o[v+(g+0x8)>>0x0])-ee,I=0x3f,D=v,q=g,j=$+0x1&0xff,H=_,z=b,G=x,K=k;break}else c[0x3]=l|d,f=h+0x8|0x0,y=p}case 0x40:{if(t(0x2b2)!==t(0x2b2))c=l+0x8|0x0,d=f,h=y[p>>0x2]|0x0;else{I=(g|0x0)<0x8?0x13:0x4d,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x5d:{if(t(0x151)===t(0x2b4)){if(d[t(0x327)]){if(typeof b[t(0x327)]==t(0x35d))w[t(0x327)]=[x[t(0x327)]];while(k[t(0x327)][t(0x35b)]){L(C[t(0x327)][t(0x213)]())}}m(_)}else{I=0x14,D=v,q=g,j=0x0,H=_,z=b,G=x,K=k;break}}case 0x5f:{if(t(0x355)===t(0x1b5))o=n[t(0x1d7)];else{I=0x56,D=v,q=g,j=m,H=_,z=b,G=x,K=0x0;break}}case 0x5c:{if(t(0x2fd)===t(0x2fd)){$=(g|0x0)%0x20|0x0,ee=(((y(($*0x5|0x0)+0x1f|0x0,$)|0x0)+0x9|0x0)%0x5e|0x0)+0x20|0x0,te=v+g|0x0,i[te>>0x0]=(ee^o[te>>0x0])-((g|0x0)%0x9|0x0),I=0x1,D=v,q=g+0x1|0x0,j=ee&0xff,H=$,z=b,G=x,K=k;break}else o(n[t(0x21f)][t(0x213)]())}case 0xa:{if(t(0x174)===t(0x174)){I=(k|0x0)<0x20?0x66:0x26,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else o=n[t(0x158)][t(0x320)]}case 0x2a:{if(t(0x302)===t(0x302)){I=(_|0x0)==0x5f?0x20:0x54,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else c=l+0x8|0x0,d=f,h=y[p>>0x2]|0x0}case 0x0:{if(t(0x360)===t(0x2ab))h=y[p+0x8>>0x2]|0x0,v[g+0xc>>0x2]=m,_[b+0x8>>0x2]=w,x=k;else{I=(_|0x0)==0x2d?0x23:0x34,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x2e:{if(t(0x1aa)===t(0x32a))c[0x3]=l|d,f=h+0x8|0x0,y=p;else{I=(_|0x0)<0x7b?0x31:0x2a,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x27:{if(t(0x196)!==t(0x35a)){i[s+g>>0x0]=i[b+(g+0x24)>>0x0]^i[b+(g+0x20)>>0x0],I=0x37,D=v,q=g+0x1|0x0,j=m,H=_,z=b,G=x,K=k;break}else e=!![]}case 0x42:{if(t(0x271)!==t(0x271))a[t(0x2c5)][s]=0x1,u(c);else{C(v),C(b),I=0x62,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x53:{if(t(0x17b)===t(0x1d9)){if(typeof u[t(0x327)]==t(0x35d))c[t(0x327)]=[l[t(0x327)]];while(d[t(0x327)][t(0x35b)]){y(p[t(0x327)][t(0x213)]())}}else{I=(g+(m<<0x18>>0x18)|0x0)<(k|0x0)?0x5b:0x36,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x7:{if(t(0x210)!==t(0x210)){l=d|0x0;var he=0x0;return he=f,h=y+p|0x0,v=g+0xf&-0x10,he|0x0}else{I=(g|0x0)<0x8?0x51:0x39,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x58:{if(t(0x267)!==t(0x267))throw new e(t(0x20c));else{I=0x1,D=v,q=0x0,j=m,H=_,z=b,G=x,K=k;break}}case 0x23:{if(t(0x264)!==t(0x264))a=s,u=c;else{I=0x34,D=v,q=g,j=m,H=0x3f,z=b,G=x,K=k;break}}case 0x1d:{if(t(0x28c)===t(0x322))a=s,u=c;else{i[v+(x+-0x8)>>0x0]=0x0,C(b),I=0x33,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x2b:{if(t(0x178)!==t(0x242)){I=(i[s>>0x0]|0x0)==0x6a?0x3d:0x42,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}else{if(o[t(0x2ef)](n))return![]}}case 0x56:{if(t(0x253)!==t(0x253)){L=C-0x4|0x0;while((I|0x0)<(D|0x0)){W[X>>0x0]=Y[Z>>0x0]|0x0,a0[a1+0x1>>0x0]=a2[a3+0x1>>0x0]|0x0,a4[a5+0x2>>0x0]=a6[a7+0x2>>0x0]|0x0,a8[a9+0x3>>0x0]=aa[ab+0x3>>0x0]|0x0,ac=ad+0x4|0x0,ae=af+0x4|0x0}}else{I=(i[e+k>>0x0]|0x0)==0x0?0xa:0x47,D=v,q=g,j=m,H=_,z=b,G=x,K=k;break}}case 0x2:{if(t(0x133)===t(0x133)){I=0x32,D=v,q=g,j=(m&0xff)+0x1&0xff,H=_,z=b,G=x,K=k;break}else{if(f[t(0x289)])h=new y(p);v[t(0x257)](g,m);if(_[t(0x28b)])delete b[t(0x28b)][t(0x1fe)];w(t(0x2da))}}case 0x14:{if(t(0x186)===t(0x1ce)){var pe=l[t(0x333)](d);if(pe>=0xd800&&pe<=0xdfff)pe=0x10000+((pe&0x3ff)<<0xa)|f[t(0x333)](++h)&0x3ff;if(pe<=0x7f)++y;else{if(pe<=0x7ff)p+=0x2;else{if(pe<=0xffff)v+=0x3;else g+=0x4}}}else{I=0x3e,D=v,q=g+0x1|0x0,j=m,H=_,z=b,G=x,K=k;break}}default:{if(t(0x2fb)!==t(0x2fb)){var ve=l[d];ve>0xff&&(m&&x(![],t(0x354)+ve+" ("+k[t(0x136)](ve)+t(0x245)+E+t(0x140)),ve&=0xff),v[t(0x182)](g[t(0x136)](ve))}else I=p,D=v,q=g,j=m,H=_,z=b,G=x,K=k}}}while(0x0);p=I,v=D,g=q,m=j,_=H,b=z,x=G,k=K}else u[c+0x10>>0x2]=l,d[f+0x18>>0x2]=h}if((A|0x0)==0x4f){if(t(0x163)!==t(0x226))return w=n,E|0x0;else n[t(0x308)](a,s[t(0x179)])}return E=0x0,w=n,E|0x0}else a=s,u=c}function D(){var e=r;if(e(0x1ee)===e(0x1ee))return 0x8;else o[e(0x359)]=s}function L(e){var t=r;e=e|0x0;var n=0x0,i=0x0,o=0x0,s=0x0,u=0x0,c=0x0,l=0x0,d=0x0,f=0x0,h=0x0,p=0x0,v=0x0,y=0x0,g=0x0,m=0x0,_=0x0,b=0x0,x=0x0,k=0x0,S=0x0,T=0x0,P=0x0,E=0x0,A=0x0,I=0x0,L=0x0,O=0x0,R=0x0,C=0x0,M=0x0,N=0x0,F=0x0,q=0x0,j=0x0,U=0x0,V=0x0,H=0x0,z=0x0,G=0x0,W=0x0,K=0x0,$=0x0,Y=0x0,Q=0x0,J=0x0,X=0x0,Z=0x0,ee=0x0,te=0x0,ne=0x0,re=0x0,ie=0x0,oe=0x0,se=0x0,ue=0x0,ce=0x0,le=0x0,de=0x0,fe=0x0,he=0x0,pe=0x0,ve=0x0,ye=0x0,ge=0x0,me=0x0,_e=0x0,be=0x0,xe=0x0,ke=0x0,we=0x0,Se=0x0,Te=0x0,Pe=0x0,Ee=0x0,Ae=0x0,Ie=0x0,De=0x0,Le=0x0,Oe=0x0,Re=0x0,Ce=0x0,Me=0x0,Be=0x0,Ne=0x0,Fe=0x0,qe=0x0,je=0x0;n=w,w=w+0x10|0x0,i=n;do{if(e>>>0x0<0xf5){if(t(0x270)===t(0x270)){o=e>>>0x0<0xb?0x10:e+0xb&-0x8,s=0x3?o>>>0x3:o,u=a[0x3]|0x0,c=s?u>>>s:u;if(c&0x3|0x0){if(t(0x21e)!==t(0x21e)){var Ue=i(o),Ve=new s(Ue[t(0x35b)]);for(var He=0x0;He<Ue[t(0x35b)];++He){Ve[He]=Ue[t(0x333)](He)}return Ve}else{l=(c&0x1^0x1)+s|0x0,d=0x34+(l<<0x1<<0x2)|0x0,f=d+0x8|0x0,h=a[f>>0x2]|0x0,p=h+0x8|0x0,v=a[p>>0x2]|0x0;if((v|0x0)==(d|0x0))a[0x3]=u&~(0x1<<l);else t(0x169)!==t(0x1c2)?(a[v+0xc>>0x2]=d,a[f>>0x2]=v):(x[k>>0x0]=S[D>>0x0]|0x0,T[P+0x1>>0x0]=B[E+0x1>>0x0]|0x0,A[I+0x2>>0x0]=L[O+0x2>>0x0]|0x0,R[C+0x3>>0x0]=M[N+0x3>>0x0]|0x0,F=q+0x4|0x0,j=U+0x4|0x0);return v=l<<0x3,a[h+0x4>>0x2]=v|0x3,l=h+v+0x4|0x0,a[l>>0x2]=a[l>>0x2]|0x1,y=p,w=n,y|0x0}}p=a[0x5]|0x0;if(o>>>0x0>p>>>0x0){if(t(0x23c)!==t(0x23c)){if(!p)return v|0x0;y[g>>0x0]=m[_>>0x0]|0x0,b=w+0x1|0x0,x=k+0x1|0x0,S=D-0x1|0x0}else{if(c|0x0){if(t(0x1d3)===t(0x1d3)){l=0x2<<s,v=c<<s&(l|0x0-l),l=(v&0x0-v)+-0x1|0x0,v=(0xc?l>>>0xc:l)&0x10,s=v?l>>>v:l,l=(0x5?s>>>0x5:s)&0x8,c=l?s>>>l:s,s=(0x2?c>>>0x2:c)&0x4,h=s?c>>>s:c,c=(0x1?h>>>0x1:h)&0x2,f=c?h>>>c:h,h=(0x1?f>>>0x1:f)&0x1,d=(l|v|s|c|h)+(h?f>>>h:f)|0x0,f=0x34+(d<<0x1<<0x2)|0x0,h=f+0x8|0x0,c=a[h>>0x2]|0x0,s=c+0x8|0x0,v=a[s>>0x2]|0x0;if((v|0x0)==(f|0x0))t(0x1d2)!==t(0x292)?(l=u&~(0x1<<d),a[0x3]=l,g=l):n[t(0x336)](i);else{if(t(0x2ce)===t(0x175))return a;else a[v+0xc>>0x2]=f,a[h>>0x2]=v,g=u}v=d<<0x3,d=v-o|0x0,a[c+0x4>>0x2]=o|0x3,h=c+o|0x0,a[h+0x4>>0x2]=d|0x1,a[c+v>>0x2]=d;if(p|0x0){if(t(0x21b)===t(0x144)){for(var ze=0x0;ze<c[t(0x35b)];++ze){y[g++>>0x0]=m[t(0x333)](ze)}if(!h)p[v>>0x0]=0x0}else v=a[0x8]|0x0,c=0x3?p>>>0x3:p,f=0x34+(c<<0x1<<0x2)|0x0,l=0x1<<c,!(g&l)?t(0x28f)!==t(0x28f)?c[t(0x179)]===l?y[t(0x30f)](g):m[t(0x308)](_,b[t(0x179)]):(a[0x3]=g|l,m=f+0x8|0x0,_=f):t(0x205)!==t(0x201)?(l=f+0x8|0x0,m=l,_=a[l>>0x2]|0x0):(o=s,u=c),a[m>>0x2]=v,a[_+0xc>>0x2]=v,a[v+0x8>>0x2]=_,a[v+0xc>>0x2]=f}return a[0x5]=d,a[0x8]=h,y=s,w=n,y|0x0}else h=p[v+0x8>>0x2]|0x0,y[g+0xc>>0x2]=m,_[b+0x8>>0x2]=w,x=k}s=a[0x4]|0x0;if(s){if(t(0x1bc)!==t(0x1bc))i+=o[t(0x136)](s);else{h=(s&0x0-s)+-0x1|0x0,d=(0xc?h>>>0xc:h)&0x10,f=d?h>>>d:h,h=(0x5?f>>>0x5:f)&0x8,v=h?f>>>h:f,f=(0x2?v>>>0x2:v)&0x4,l=f?v>>>f:v,v=(0x1?l>>>0x1:l)&0x2,c=v?l>>>v:l,l=(0x1?c>>>0x1:c)&0x1,b=a[0x13c+((h|d|f|v|l)+(l?c>>>l:c)<<0x2)>>0x2]|0x0,c=(a[b+0x4>>0x2]&-0x8)-o|0x0,l=b,v=b;while(0x1){if(t(0x2be)===t(0x224))o=s,u=c;else{b=a[l+0x10>>0x2]|0x0;if(!b){if(t(0x13b)===t(0x13b)){f=a[l+0x14>>0x2]|0x0;if(!f)break;else x=f}else l[d+0xc>>0x2]=f,h[p>>0x2]=v,y=g}else x=b;b=(a[x+0x4>>0x2]&-0x8)-o|0x0,f=b>>>0x0<c>>>0x0,c=f?b:c,l=x,v=f?x:v}}l=v+o|0x0;if(l>>>0x0>v>>>0x0){if(t(0x31d)!==t(0x31d))n[t(0x212)](i);else{f=a[v+0x18>>0x2]|0x0,b=a[v+0xc>>0x2]|0x0;do{if((b|0x0)==(v|0x0)){if(t(0x33c)===t(0x301)){var Ge=t(0x27c),We="",Ke,$e,Ye,Qe,Je,Xe,Ze,et=0x0;f=h[t(0x227)](/[^A-Za-z0-9\+\/\=]/g,"");do{Qe=Ge[t(0x1e6)](x[t(0x215)](et++)),Je=Ge[t(0x1e6)](k[t(0x215)](et++)),Xe=Ge[t(0x1e6)](S[t(0x215)](et++)),Ze=Ge[t(0x1e6)](D[t(0x215)](et++)),Ke=Qe<<0x2|Je>>0x4,$e=(Je&0xf)<<0x4|Xe>>0x2,Ye=(Xe&0x3)<<0x6|Ze,We=We+T[t(0x136)](Ke),Xe!==0x40&&(We=We+E[t(0x136)]($e)),Ze!==0x40&&(We=We+A[t(0x136)](Ye))}while(et<w[t(0x35b)]);return We}else{d=v+0x14|0x0,h=a[d>>0x2]|0x0;if(!h){if(t(0x247)===t(0x247)){k=v+0x10|0x0,S=a[k>>0x2]|0x0;if(!S){if(t(0x19c)!==t(0x263)){T=0x0;break}else v=y+g|0x0,m[_+0x4>>0x2]=b|0x3,w=x+k+0x4|0x0,S[D>>0x2]=T[P>>0x2]|0x1}else{if(t(0x170)===t(0x1c8))try{var Ke=Ye(d),$e=new f(Ke[t(0x35b)]);for(var Ye=0x0;Ye<Ke[t(0x35b)];++Ye){$e[Ye]=Ke[t(0x333)](Ye)}return $e}catch(Qe){throw new p(t(0x20c))}else P=S,E=k}}else j=U+0xfff00|0x0,V=(0x10?H>>>0x10:z)&0x8,G=W<<K,$=Y+0x7f000|0x0,Q=(0x10?J>>>0x10:X)&0x4,Z=a0<<a1,a2=a3+0x3c000|0x0,a4=(0x10?a5>>>0x10:a6)&0x2,a7=a8<<a9,ne=0xe-(ab|ac|ad)+(0xf?ae>>>0xf:af)|0x0,ag=ah+0x7|0x0,ai=(aj?ak>>>al:am)&0x1|an<<0x1}else t(0x1c9)!==t(0x1c9)?s[t(0x266)](u,c,l+d):(P=h,E=d);d=P,h=E;while(0x1){if(t(0x2f2)===t(0x2f2)){k=d+0x14|0x0,S=a[k>>0x2]|0x0;if(!S){if(t(0x1eb)===t(0x1eb)){A=d+0x10|0x0,I=a[A>>0x2]|0x0;if(!I)break;else t(0x2cf)===t(0x2cf)?(L=I,O=A):n=i[t(0x214)][t(0x160)]}else s[u>>0x0]=c,l=d+0x1|0x0}else t(0x335)!==t(0x358)?(L=S,O=k):(n=0x0,i=0x8f);d=L,h=O}else u[c+0x14>>0x2]=l,d[f+0x18>>0x2]=h}a[h>>0x2]=0x0,T=d}}else t(0x1a1)!==t(0x1a1)?(i((function(){var e=t;u[e(0x1b9)]("")}),0x1),s()):(k=a[v+0x8>>0x2]|0x0,a[k+0xc>>0x2]=b,a[b+0x8>>0x2]=k,T=b)}while(0x0);do{if(f|0x0){if(t(0x252)!==t(0x350)){b=a[v+0x1c>>0x2]|0x0,k=0x13c+(b<<0x2)|0x0;if((v|0x0)==(a[k>>0x2]|0x0)){if(t(0x1b4)===t(0x31b)){var tt=new l;tt[t(0x2ac)](t(0x309),d,!![]),tt[t(0x268)]=t(0x33b),tt[t(0x1ea)]=function e(){var n=t;if(tt[n(0x1ed)]==0xc8||tt[n(0x1ed)]==0x0&&tt[n(0x1fe)]){B(tt[n(0x1fe)]);return}var r=e(D);if(r){E(r[n(0x1d7)]);return}P()},tt[t(0x13f)]=g,tt[t(0x306)](null)}else{a[k>>0x2]=T;if(!T){if(t(0x1c7)===t(0x1c7)){a[0x4]=s&~(0x1<<b);break}else q=j[0x8]|0x0,U=0x3?V>>>0x3:H,z=0x34+(G<<0x1<<0x2)|0x0,W=0x1<<K,!($&Y)?(am[0x3]=an|ao,ap=aq+0x8|0x0,ar=as):(at=au+0x8|0x0,av=aw,ax=ay[az>>0x2]|0x0),ne[ab>>0x2]=ac,ad[ae+0xc>>0x2]=af,ag[ah+0x8>>0x2]=ai,aj[ak+0xc>>0x2]=al}}}else{if(t(0x230)!==t(0x15f)){b=f+0x10|0x0,a[((a[b>>0x2]|0x0)==(v|0x0)?b:f+0x14|0x0)>>0x2]=T;if(!T)break}else{var nt=/\b__Z[\w\d_]+/g;return n[t(0x227)](nt,(function(e){var t=nt(e);return e===t?e:t+" ["+e+"]"}))}}a[T+0x18>>0x2]=f,b=a[v+0x10>>0x2]|0x0,b|0x0&&(t(0x2c7)===t(0x2c7)?(a[T+0x10>>0x2]=b,a[b+0x18>>0x2]=T):(X[Z>>0x2]=a0,a1[a2+0x4>>0x2]=a3,a4[a5+0x8>>0x2]=a6,a7[a8+0xc>>0x2]=a9,ne[ab+0x10>>0x2]=ac,ad[ae+0x14>>0x2]=af,ag[ah+0x18>>0x2]=ai,aj[ak+0x1c>>0x2]=al,am[an+0x20>>0x2]=ao,ap[aq+0x24>>0x2]=ar,as[at+0x28>>0x2]=au,av[aw+0x2c>>0x2]=ax,ay[az+0x30>>0x2]=aA,aB[aC+0x34>>0x2]=aD,aE[aF+0x38>>0x2]=aG,aH[aI+0x3c>>0x2]=aJ,aK=aL+0x40|0x0)),b=a[v+0x14>>0x2]|0x0,b|0x0&&(t(0x1a7)===t(0x272)?(u[c+0xc>>0x2]=l,d[f>>0x2]=h):(a[T+0x14>>0x2]=b,a[b+0x18>>0x2]=T))}else{h[t(0x19a)]&&S[t(0x19a)](D);y+="",g(m),_=!![],b=0x1,w=t(0x19b)+x+t(0x1dc);var rt=k;throw rt}}}while(0x0);if(c>>>0x0<0x10)t(0x2d5)===t(0x352)?n(i[t(0x1d7)]):(f=c+o|0x0,a[v+0x4>>0x2]=f|0x3,s=v+f+0x4|0x0,a[s>>0x2]=a[s>>0x2]|0x1);else{if(t(0x254)!==t(0x254))h=p[v+0x8>>0x2]|0x0,y[g+0xc>>0x2]=m,_[b+0x8>>0x2]=w,x=k;else{a[v+0x4>>0x2]=o|0x3,a[l+0x4>>0x2]=c|0x1,a[l+c>>0x2]=c;if(p|0x0){if(t(0x2e1)===t(0x2e1))s=a[0x8]|0x0,f=0x3?p>>>0x3:p,b=0x34+(f<<0x1<<0x2)|0x0,k=0x1<<f,!(k&u)?t(0x239)!==t(0x239)?i=new o(s):(a[0x3]=k|u,R=b+0x8|0x0,C=b):t(0x18a)!==t(0x18a)?o[s]=u[c]:(k=b+0x8|0x0,R=k,C=a[k>>0x2]|0x0),a[R>>0x2]=s,a[C+0xc>>0x2]=s,a[s+0x8>>0x2]=C,a[s+0xc>>0x2]=b;else{p=v||[];var it=y[t(0x1c4)]((function(e){var n=t;return e===n(0x31e)})),ot=g!==t(0x2bc);if(ot&&it&&!m)return T(P);return function(){return it(ot,A,I,arguments,L)}}}a[0x5]=c,a[0x8]=l}}return y=v+0x8|0x0,w=n,y|0x0}}else M=o}}else M=o}}else M=o}else o=s+u[t(0x136)](c)}else{if(e>>>0x0<=0xffffffbf){b=e+0xb|0x0,s=b&-0x8,k=a[0x4]|0x0;if(k){f=0x0-s|0x0,S=0x8?b>>>0x8:b;if(S){if(s>>>0x0>0xffffff)N=0x1f;else b=S+0xfff00|0x0,A=(0x10?b>>>0x10:b)&0x8,b=S<<A,S=b+0x7f000|0x0,I=(0x10?S>>>0x10:S)&0x4,S=b<<I,b=S+0x3c000|0x0,F=(0x10?b>>>0x10:b)&0x2,b=S<<F,S=0xe-(I|A|F)+(0xf?b>>>0xf:b)|0x0,b=S+0x7|0x0,N=(b?s>>>b:s)&0x1|S<<0x1}else N=0x0;S=a[0x13c+(N<<0x2)>>0x2]|0x0;e:do{if(!S)q=f,j=0x0,U=0x0,V=0x3d;else{b=f,F=0x0,A=s<<((N|0x0)==0x1f?0x0:0x19-(0x1?N>>>0x1:N)|0x0),I=S,H=0x0;while(0x1){z=(a[I+0x4>>0x2]&-0x8)-s|0x0;if(z>>>0x0<b>>>0x0){if(!z){G=0x0,W=I,K=I,V=0x41;break e}else $=z,Y=I}else $=b,Y=H;z=a[I+0x14>>0x2]|0x0,I=a[I+0x10+((0x1f?A>>>0x1f:A)<<0x2)>>0x2]|0x0,Q=(z|0x0)==0x0|(z|0x0)==(I|0x0)?F:z;if(!I){q=$,j=Q,U=Y,V=0x3d;break}else b=$,F=Q,A=A<<0x1,H=Y}}}while(0x0);if((V|0x0)==0x3d){if((j|0x0)==0x0&(U|0x0)==0x0){S=0x2<<N,f=(S|0x0-S)&k;if(!f){M=s;break}S=(f&0x0-f)+-0x1|0x0,f=(0xc?S>>>0xc:S)&0x10,o=f?S>>>f:S,S=(0x5?o>>>0x5:o)&0x8,v=S?o>>>S:o,o=(0x2?v>>>0x2:v)&0x4,l=o?v>>>o:v,v=(0x1?l>>>0x1:l)&0x2,c=v?l>>>v:l,l=(0x1?c>>>0x1:c)&0x1,J=a[0x13c+((S|f|o|v|l)+(l?c>>>l:c)<<0x2)>>0x2]|0x0,X=0x0}else J=j,X=U;!J?(Z=q,ee=X):(G=q,W=J,K=X,V=0x41)}if((V|0x0)==0x41){c=G,l=W,v=K;while(0x1){o=(a[l+0x4>>0x2]&-0x8)-s|0x0,f=o>>>0x0<c>>>0x0,S=f?o:c,o=f?l:v,f=a[l+0x10>>0x2]|0x0;if(!f)te=a[l+0x14>>0x2]|0x0;else te=f;if(!te){Z=S,ee=o;break}else c=S,l=te,v=o}}if(((ee|0x0)!=0x0?Z>>>0x0<((a[0x5]|0x0)-s|0x0)>>>0x0:0x0)?(v=ee+s|0x0,v>>>0x0>ee>>>0x0):0x0){l=a[ee+0x18>>0x2]|0x0,c=a[ee+0xc>>0x2]|0x0;do{if((c|0x0)==(ee|0x0)){o=ee+0x14|0x0,S=a[o>>0x2]|0x0;if(!S){f=ee+0x10|0x0,u=a[f>>0x2]|0x0;if(!u){ne=0x0;break}else re=u,ie=f}else re=S,ie=o;o=re,S=ie;while(0x1){f=o+0x14|0x0,u=a[f>>0x2]|0x0;if(!u){p=o+0x10|0x0,H=a[p>>0x2]|0x0;if(!H)break;else oe=H,se=p}else oe=u,se=f;o=oe,S=se}a[S>>0x2]=0x0,ne=o}else f=a[ee+0x8>>0x2]|0x0,a[f+0xc>>0x2]=c,a[c+0x8>>0x2]=f,ne=c}while(0x0);do{if(l){c=a[ee+0x1c>>0x2]|0x0,f=0x13c+(c<<0x2)|0x0;if((ee|0x0)==(a[f>>0x2]|0x0)){a[f>>0x2]=ne;if(!ne){f=k&~(0x1<<c),a[0x4]=f,ue=f;break}}else{f=l+0x10|0x0,a[((a[f>>0x2]|0x0)==(ee|0x0)?f:l+0x14|0x0)>>0x2]=ne;if(!ne){ue=k;break}}a[ne+0x18>>0x2]=l,f=a[ee+0x10>>0x2]|0x0;f|0x0&&(a[ne+0x10>>0x2]=f,a[f+0x18>>0x2]=ne);f=a[ee+0x14>>0x2]|0x0;if(f)a[ne+0x14>>0x2]=f,a[f+0x18>>0x2]=ne,ue=k;else ue=k}else ue=k}while(0x0);e:do{if(Z>>>0x0<0x10)k=Z+s|0x0,a[ee+0x4>>0x2]=k|0x3,l=ee+k+0x4|0x0,a[l>>0x2]=a[l>>0x2]|0x1;else{a[ee+0x4>>0x2]=s|0x3,a[v+0x4>>0x2]=Z|0x1,a[v+Z>>0x2]=Z,l=0x3?Z>>>0x3:Z;if(Z>>>0x0<0x100){k=0x34+(l<<0x1<<0x2)|0x0,f=a[0x3]|0x0,c=0x1<<l;!(f&c)?(a[0x3]=f|c,ce=k+0x8|0x0,le=k):(c=k+0x8|0x0,ce=c,le=a[c>>0x2]|0x0);a[ce>>0x2]=v,a[le+0xc>>0x2]=v,a[v+0x8>>0x2]=le,a[v+0xc>>0x2]=k;break}k=0x8?Z>>>0x8:Z;if(k){if(Z>>>0x0>0xffffff)de=0x1f;else c=k+0xfff00|0x0,f=(0x10?c>>>0x10:c)&0x8,c=k<<f,k=c+0x7f000|0x0,l=(0x10?k>>>0x10:k)&0x4,k=c<<l,c=k+0x3c000|0x0,u=(0x10?c>>>0x10:c)&0x2,c=k<<u,k=0xe-(l|f|u)+(0xf?c>>>0xf:c)|0x0,c=k+0x7|0x0,de=(c?Z>>>c:Z)&0x1|k<<0x1}else de=0x0;k=0x13c+(de<<0x2)|0x0,a[v+0x1c>>0x2]=de,c=v+0x10|0x0,a[c+0x4>>0x2]=0x0,a[c>>0x2]=0x0,c=0x1<<de;if(!(ue&c)){a[0x4]=ue|c,a[k>>0x2]=v,a[v+0x18>>0x2]=k,a[v+0xc>>0x2]=v,a[v+0x8>>0x2]=v;break}c=a[k>>0x2]|0x0;t:do{if((a[c+0x4>>0x2]&-0x8|0x0)==(Z|0x0))fe=c;else{k=Z<<((de|0x0)==0x1f?0x0:0x19-(0x1?de>>>0x1:de)|0x0),u=c;while(0x1){he=u+0x10+((0x1f?k>>>0x1f:k)<<0x2)|0x0,f=a[he>>0x2]|0x0;if(!f)break;if((a[f+0x4>>0x2]&-0x8|0x0)==(Z|0x0)){fe=f;break t}else k=k<<0x1,u=f}a[he>>0x2]=v,a[v+0x18>>0x2]=u,a[v+0xc>>0x2]=v,a[v+0x8>>0x2]=v;break e}}while(0x0);c=fe+0x8|0x0,o=a[c>>0x2]|0x0,a[o+0xc>>0x2]=v,a[c>>0x2]=v,a[v+0x8>>0x2]=o,a[v+0xc>>0x2]=fe,a[v+0x18>>0x2]=0x0}}while(0x0);return y=ee+0x8|0x0,w=n,y|0x0}else M=s}else M=s}else M=-0x1}}while(0x0);ee=a[0x5]|0x0;if(ee>>>0x0>=M>>>0x0)return fe=ee-M|0x0,he=a[0x8]|0x0,fe>>>0x0>0xf?(Z=he+M|0x0,a[0x8]=Z,a[0x5]=fe,a[Z+0x4>>0x2]=fe|0x1,a[he+ee>>0x2]=fe,a[he+0x4>>0x2]=M|0x3):(a[0x5]=0x0,a[0x8]=0x0,a[he+0x4>>0x2]=ee|0x3,fe=he+ee+0x4|0x0,a[fe>>0x2]=a[fe>>0x2]|0x1),y=he+0x8|0x0,w=n,y|0x0;he=a[0x6]|0x0;if(he>>>0x0>M>>>0x0)return fe=he-M|0x0,a[0x6]=fe,ee=a[0x9]|0x0,Z=ee+M|0x0,a[0x9]=Z,a[Z+0x4>>0x2]=fe|0x1,a[ee+0x4>>0x2]=M|0x3,y=ee+0x8|0x0,w=n,y|0x0;if(!(a[0x79]|0x0))a[0x7b]=0x1000,a[0x7a]=0x1000,a[0x7c]=-0x1,a[0x7d]=-0x1,a[0x7e]=0x0,a[0x72]=0x0,a[0x79]=i&-0x10^0x55555558,pe=0x1000;else pe=a[0x7b]|0x0;i=M+0x30|0x0,ee=M+0x2f|0x0,fe=pe+ee|0x0,Z=0x0-pe|0x0,pe=fe&Z;if(pe>>>0x0<=M>>>0x0)return y=0x0,w=n,y|0x0;de=a[0x71]|0x0;if(de|0x0?(ue=a[0x6f]|0x0,le=ue+pe|0x0,le>>>0x0<=ue>>>0x0|le>>>0x0>de>>>0x0):0x0)return y=0x0,w=n,y|0x0;e:do{if(!(a[0x72]&0x4)){de=a[0x9]|0x0;t:do{if(de){le=0x1cc;while(0x1){ue=a[le>>0x2]|0x0;if(ue>>>0x0<=de>>>0x0?(ue+(a[le+0x4>>0x2]|0x0)|0x0)>>>0x0>de>>>0x0:0x0)break;ue=a[le+0x8>>0x2]|0x0;if(!ue){V=0x80;break t}else le=ue}ue=fe-he&Z;if(ue>>>0x0<0x7fffffff){ce=B(ue)|0x0;if((ce|0x0)==((a[le>>0x2]|0x0)+(a[le+0x4>>0x2]|0x0)|0x0)){if((ce|0x0)==(-0x1|0x0))ve=ue;else{ye=ce,ge=ue,V=0x91;break e}}else me=ce,_e=ue,V=0x88}else ve=0x0}else V=0x80}while(0x0);do{if((V|0x0)==0x80){de=B(0x0)|0x0;if((de|0x0)!=(-0x1|0x0)?(s=de,ue=a[0x7a]|0x0,ce=ue+-0x1|0x0,ne=((ce&s|0x0)==0x0?0x0:(ce+s&0x0-ue)-s|0x0)+pe|0x0,s=a[0x6f]|0x0,ue=ne+s|0x0,ne>>>0x0>M>>>0x0&ne>>>0x0<0x7fffffff):0x0){ce=a[0x71]|0x0;if(ce|0x0?ue>>>0x0<=s>>>0x0|ue>>>0x0>ce>>>0x0:0x0){ve=0x0;break}ce=B(ne)|0x0;if((ce|0x0)==(de|0x0)){ye=de,ge=ne,V=0x91;break e}else me=ce,_e=ne,V=0x88}else ve=0x0}}while(0x0);do{if((V|0x0)==0x88){ne=0x0-_e|0x0;if(!(i>>>0x0>_e>>>0x0&(_e>>>0x0<0x7fffffff&(me|0x0)!=(-0x1|0x0)))){if((me|0x0)==(-0x1|0x0)){ve=0x0;break}else{ye=me,ge=_e,V=0x91;break e}}ce=a[0x7b]|0x0,de=ee-_e+ce&0x0-ce;if(de>>>0x0>=0x7fffffff){ye=me,ge=_e,V=0x91;break e}if((B(de)|0x0)==(-0x1|0x0)){B(ne)|0x0,ve=0x0;break}else{ye=me,ge=de+_e|0x0,V=0x91;break e}}}while(0x0);a[0x72]=a[0x72]|0x4,be=ve,V=0x8f}else be=0x0,V=0x8f}while(0x0);(((V|0x0)==0x8f?pe>>>0x0<0x7fffffff:0x0)?(ve=B(pe)|0x0,pe=B(0x0)|0x0,_e=pe-ve|0x0,me=_e>>>0x0>(M+0x28|0x0)>>>0x0,!((ve|0x0)==(-0x1|0x0)|me^0x1|ve>>>0x0<pe>>>0x0&((ve|0x0)!=(-0x1|0x0)&(pe|0x0)!=(-0x1|0x0))^0x1)):0x0)&&(ye=ve,ge=me?_e:be,V=0x91);if((V|0x0)==0x91){be=(a[0x6f]|0x0)+ge|0x0,a[0x6f]=be;if(be>>>0x0>(a[0x70]|0x0)>>>0x0)a[0x70]=be;be=a[0x9]|0x0;e:do{if(be){_e=0x1cc;while(0x1){xe=a[_e>>0x2]|0x0,ke=a[_e+0x4>>0x2]|0x0;if((ye|0x0)==(xe+ke|0x0)){V=0x9a;break}me=a[_e+0x8>>0x2]|0x0;if(!me)break;else _e=me}if(((V|0x0)==0x9a?(me=_e+0x4|0x0,(a[_e+0xc>>0x2]&0x8|0x0)==0x0):0x0)?ye>>>0x0>be>>>0x0&xe>>>0x0<=be>>>0x0:0x0){a[me>>0x2]=ke+ge,me=(a[0x6]|0x0)+ge|0x0,ve=be+0x8|0x0,pe=(ve&0x7|0x0)==0x0?0x0:0x0-ve&0x7,ve=be+pe|0x0,ee=me-pe|0x0,a[0x9]=ve,a[0x6]=ee,a[ve+0x4>>0x2]=ee|0x1,a[be+me+0x4>>0x2]=0x28,a[0xa]=a[0x7d];break}if(ye>>>0x0<(a[0x7]|0x0)>>>0x0)a[0x7]=ye;me=ye+ge|0x0,ee=0x1cc;while(0x1){if((a[ee>>0x2]|0x0)==(me|0x0)){V=0xa2;break}ve=a[ee+0x8>>0x2]|0x0;if(!ve)break;else ee=ve}if((V|0x0)==0xa2?(a[ee+0xc>>0x2]&0x8|0x0)==0x0:0x0){a[ee>>0x2]=ye,_e=ee+0x4|0x0,a[_e>>0x2]=(a[_e>>0x2]|0x0)+ge,_e=ye+0x8|0x0,ve=ye+((_e&0x7|0x0)==0x0?0x0:0x0-_e&0x7)|0x0,_e=me+0x8|0x0,pe=me+((_e&0x7|0x0)==0x0?0x0:0x0-_e&0x7)|0x0,_e=ve+M|0x0,i=pe-ve-M|0x0,a[ve+0x4>>0x2]=M|0x3;t:do{if((be|0x0)==(pe|0x0))Z=(a[0x6]|0x0)+i|0x0,a[0x6]=Z,a[0x9]=_e,a[_e+0x4>>0x2]=Z|0x1;else{if((a[0x8]|0x0)==(pe|0x0)){Z=(a[0x5]|0x0)+i|0x0,a[0x5]=Z,a[0x8]=_e,a[_e+0x4>>0x2]=Z|0x1,a[_e+Z>>0x2]=Z;break}Z=a[pe+0x4>>0x2]|0x0;if((Z&0x3|0x0)==0x1){he=Z&-0x8,fe=0x3?Z>>>0x3:Z;n:do{if(Z>>>0x0<0x100){de=a[pe+0x8>>0x2]|0x0,ne=a[pe+0xc>>0x2]|0x0;if((ne|0x0)==(de|0x0)){a[0x3]=a[0x3]&~(0x1<<fe);break}else{a[de+0xc>>0x2]=ne,a[ne+0x8>>0x2]=de;break}}else{de=a[pe+0x18>>0x2]|0x0,ne=a[pe+0xc>>0x2]|0x0;do{if((ne|0x0)==(pe|0x0)){ce=pe+0x10|0x0,ue=ce+0x4|0x0,s=a[ue>>0x2]|0x0;if(!s){se=a[ce>>0x2]|0x0;if(!se){we=0x0;break}else Se=se,Te=ce}else Se=s,Te=ue;ue=Se,s=Te;while(0x1){ce=ue+0x14|0x0,se=a[ce>>0x2]|0x0;if(!se){oe=ue+0x10|0x0,ie=a[oe>>0x2]|0x0;if(!ie)break;else Pe=ie,Ee=oe}else Pe=se,Ee=ce;ue=Pe,s=Ee}a[s>>0x2]=0x0,we=ue}else ce=a[pe+0x8>>0x2]|0x0,a[ce+0xc>>0x2]=ne,a[ne+0x8>>0x2]=ce,we=ne}while(0x0);if(!de)break;ne=a[pe+0x1c>>0x2]|0x0,u=0x13c+(ne<<0x2)|0x0;do{if((a[u>>0x2]|0x0)!=(pe|0x0)){ce=de+0x10|0x0,a[((a[ce>>0x2]|0x0)==(pe|0x0)?ce:de+0x14|0x0)>>0x2]=we;if(!we)break n}else{a[u>>0x2]=we;if(we|0x0)break;a[0x4]=a[0x4]&~(0x1<<ne);break n}}while(0x0);a[we+0x18>>0x2]=de,ne=pe+0x10|0x0,u=a[ne>>0x2]|0x0;u|0x0&&(a[we+0x10>>0x2]=u,a[u+0x18>>0x2]=we);u=a[ne+0x4>>0x2]|0x0;if(!u)break;a[we+0x14>>0x2]=u,a[u+0x18>>0x2]=we}}while(0x0);Ae=pe+he|0x0,Ie=he+i|0x0}else Ae=pe,Ie=i;fe=Ae+0x4|0x0,a[fe>>0x2]=a[fe>>0x2]&-0x2,a[_e+0x4>>0x2]=Ie|0x1,a[_e+Ie>>0x2]=Ie,fe=0x3?Ie>>>0x3:Ie;if(Ie>>>0x0<0x100){Z=0x34+(fe<<0x1<<0x2)|0x0,le=a[0x3]|0x0,u=0x1<<fe;!(le&u)?(a[0x3]=le|u,De=Z+0x8|0x0,Le=Z):(u=Z+0x8|0x0,De=u,Le=a[u>>0x2]|0x0);a[De>>0x2]=_e,a[Le+0xc>>0x2]=_e,a[_e+0x8>>0x2]=Le,a[_e+0xc>>0x2]=Z;break}Z=0x8?Ie>>>0x8:Ie;do{if(!Z)Oe=0x0;else{if(Ie>>>0x0>0xffffff){Oe=0x1f;break}u=Z+0xfff00|0x0,le=(0x10?u>>>0x10:u)&0x8,u=Z<<le,fe=u+0x7f000|0x0,ne=(0x10?fe>>>0x10:fe)&0x4,fe=u<<ne,u=fe+0x3c000|0x0,ce=(0x10?u>>>0x10:u)&0x2,u=fe<<ce,fe=0xe-(ne|le|ce)+(0xf?u>>>0xf:u)|0x0,u=fe+0x7|0x0,Oe=(u?Ie>>>u:Ie)&0x1|fe<<0x1}}while(0x0);Z=0x13c+(Oe<<0x2)|0x0,a[_e+0x1c>>0x2]=Oe,he=_e+0x10|0x0,a[he+0x4>>0x2]=0x0,a[he>>0x2]=0x0,he=a[0x4]|0x0,fe=0x1<<Oe;if(!(he&fe)){a[0x4]=he|fe,a[Z>>0x2]=_e,a[_e+0x18>>0x2]=Z,a[_e+0xc>>0x2]=_e,a[_e+0x8>>0x2]=_e;break}fe=a[Z>>0x2]|0x0;n:do{if((a[fe+0x4>>0x2]&-0x8|0x0)==(Ie|0x0))Re=fe;else{Z=Ie<<((Oe|0x0)==0x1f?0x0:0x19-(0x1?Oe>>>0x1:Oe)|0x0),he=fe;while(0x1){Ce=he+0x10+((0x1f?Z>>>0x1f:Z)<<0x2)|0x0,u=a[Ce>>0x2]|0x0;if(!u)break;if((a[u+0x4>>0x2]&-0x8|0x0)==(Ie|0x0)){Re=u;break n}else Z=Z<<0x1,he=u}a[Ce>>0x2]=_e,a[_e+0x18>>0x2]=he,a[_e+0xc>>0x2]=_e,a[_e+0x8>>0x2]=_e;break t}}while(0x0);fe=Re+0x8|0x0,Z=a[fe>>0x2]|0x0,a[Z+0xc>>0x2]=_e,a[fe>>0x2]=_e,a[_e+0x8>>0x2]=Z,a[_e+0xc>>0x2]=Re,a[_e+0x18>>0x2]=0x0}}while(0x0);return y=ve+0x8|0x0,w=n,y|0x0}_e=0x1cc;while(0x1){i=a[_e>>0x2]|0x0;if(i>>>0x0<=be>>>0x0?(Me=i+(a[_e+0x4>>0x2]|0x0)|0x0,Me>>>0x0>be>>>0x0):0x0)break;_e=a[_e+0x8>>0x2]|0x0}_e=Me+-0x2f|0x0,ve=_e+0x8|0x0,i=_e+((ve&0x7|0x0)==0x0?0x0:0x0-ve&0x7)|0x0,ve=be+0x10|0x0,_e=i>>>0x0<ve>>>0x0?be:i,i=_e+0x8|0x0,pe=ge+-0x28|0x0,me=ye+0x8|0x0,ee=(me&0x7|0x0)==0x0?0x0:0x0-me&0x7,me=ye+ee|0x0,Z=pe-ee|0x0,a[0x9]=me,a[0x6]=Z,a[me+0x4>>0x2]=Z|0x1,a[ye+pe+0x4>>0x2]=0x28,a[0xa]=a[0x7d],pe=_e+0x4|0x0,a[pe>>0x2]=0x1b,a[i>>0x2]=a[0x73],a[i+0x4>>0x2]=a[0x74],a[i+0x8>>0x2]=a[0x75],a[i+0xc>>0x2]=a[0x76],a[0x73]=ye,a[0x74]=ge,a[0x76]=0x0,a[0x75]=i,i=_e+0x18|0x0;do{Z=i,i=i+0x4|0x0,a[i>>0x2]=0x7}while((Z+0x8|0x0)>>>0x0<Me>>>0x0);if((_e|0x0)!=(be|0x0)){i=_e-be|0x0,a[pe>>0x2]=a[pe>>0x2]&-0x2,a[be+0x4>>0x2]=i|0x1,a[_e>>0x2]=i,Z=0x3?i>>>0x3:i;if(i>>>0x0<0x100){me=0x34+(Z<<0x1<<0x2)|0x0,ee=a[0x3]|0x0,fe=0x1<<Z;!(ee&fe)?(a[0x3]=ee|fe,Be=me+0x8|0x0,Ne=me):(fe=me+0x8|0x0,Be=fe,Ne=a[fe>>0x2]|0x0);a[Be>>0x2]=be,a[Ne+0xc>>0x2]=be,a[be+0x8>>0x2]=Ne,a[be+0xc>>0x2]=me;break}me=0x8?i>>>0x8:i;if(me){if(i>>>0x0>0xffffff)Fe=0x1f;else fe=me+0xfff00|0x0,ee=(0x10?fe>>>0x10:fe)&0x8,fe=me<<ee,me=fe+0x7f000|0x0,Z=(0x10?me>>>0x10:me)&0x4,me=fe<<Z,fe=me+0x3c000|0x0,de=(0x10?fe>>>0x10:fe)&0x2,fe=me<<de,me=0xe-(Z|ee|de)+(0xf?fe>>>0xf:fe)|0x0,fe=me+0x7|0x0,Fe=(fe?i>>>fe:i)&0x1|me<<0x1}else Fe=0x0;me=0x13c+(Fe<<0x2)|0x0,a[be+0x1c>>0x2]=Fe,a[be+0x14>>0x2]=0x0,a[ve>>0x2]=0x0,fe=a[0x4]|0x0,de=0x1<<Fe;if(!(fe&de)){a[0x4]=fe|de,a[me>>0x2]=be,a[be+0x18>>0x2]=me,a[be+0xc>>0x2]=be,a[be+0x8>>0x2]=be;break}de=a[me>>0x2]|0x0;t:do{if((a[de+0x4>>0x2]&-0x8|0x0)==(i|0x0))qe=de;else{me=i<<((Fe|0x0)==0x1f?0x0:0x19-(0x1?Fe>>>0x1:Fe)|0x0),fe=de;while(0x1){je=fe+0x10+((0x1f?me>>>0x1f:me)<<0x2)|0x0,ee=a[je>>0x2]|0x0;if(!ee)break;if((a[ee+0x4>>0x2]&-0x8|0x0)==(i|0x0)){qe=ee;break t}else me=me<<0x1,fe=ee}a[je>>0x2]=be,a[be+0x18>>0x2]=fe,a[be+0xc>>0x2]=be,a[be+0x8>>0x2]=be;break e}}while(0x0);i=qe+0x8|0x0,de=a[i>>0x2]|0x0,a[de+0xc>>0x2]=be,a[i>>0x2]=be,a[be+0x8>>0x2]=de,a[be+0xc>>0x2]=qe,a[be+0x18>>0x2]=0x0}}else{de=a[0x7]|0x0;if((de|0x0)==0x0|ye>>>0x0<de>>>0x0)a[0x7]=ye;a[0x73]=ye,a[0x74]=ge,a[0x76]=0x0,a[0xc]=a[0x79],a[0xb]=-0x1,a[0x10]=0x34,a[0xf]=0x34,a[0x12]=0x3c,a[0x11]=0x3c,a[0x14]=0x44,a[0x13]=0x44,a[0x16]=0x4c,a[0x15]=0x4c,a[0x18]=0x54,a[0x17]=0x54,a[0x1a]=0x5c,a[0x19]=0x5c,a[0x1c]=0x64,a[0x1b]=0x64,a[0x1e]=0x6c,a[0x1d]=0x6c,a[0x20]=0x74,a[0x1f]=0x74,a[0x22]=0x7c,a[0x21]=0x7c,a[0x24]=0x84,a[0x23]=0x84,a[0x26]=0x8c,a[0x25]=0x8c,a[0x28]=0x94,a[0x27]=0x94,a[0x2a]=0x9c,a[0x29]=0x9c,a[0x2c]=0xa4,a[0x2b]=0xa4,a[0x2e]=0xac,a[0x2d]=0xac,a[0x30]=0xb4,a[0x2f]=0xb4,a[0x32]=0xbc,a[0x31]=0xbc,a[0x34]=0xc4,a[0x33]=0xc4,a[0x36]=0xcc,a[0x35]=0xcc,a[0x38]=0xd4,a[0x37]=0xd4,a[0x3a]=0xdc,a[0x39]=0xdc,a[0x3c]=0xe4,a[0x3b]=0xe4,a[0x3e]=0xec,a[0x3d]=0xec,a[0x40]=0xf4,a[0x3f]=0xf4,a[0x42]=0xfc,a[0x41]=0xfc,a[0x44]=0x104,a[0x43]=0x104,a[0x46]=0x10c,a[0x45]=0x10c,a[0x48]=0x114,a[0x47]=0x114,a[0x4a]=0x11c,a[0x49]=0x11c,a[0x4c]=0x124,a[0x4b]=0x124,a[0x4e]=0x12c,a[0x4d]=0x12c,de=ge+-0x28|0x0,i=ye+0x8|0x0,ve=(i&0x7|0x0)==0x0?0x0:0x0-i&0x7,i=ye+ve|0x0,_e=de-ve|0x0,a[0x9]=i,a[0x6]=_e,a[i+0x4>>0x2]=_e|0x1,a[ye+de+0x4>>0x2]=0x28,a[0xa]=a[0x7d]}}while(0x0);ye=a[0x6]|0x0;if(ye>>>0x0>M>>>0x0)return ge=ye-M|0x0,a[0x6]=ge,ye=a[0x9]|0x0,be=ye+M|0x0,a[0x9]=be,a[be+0x4>>0x2]=ge|0x1,a[ye+0x4>>0x2]=M|0x3,y=ye+0x8|0x0,w=n,y|0x0}return a[(D()|0x0)>>0x2]=0x30,y=0x0,w=n,y|0x0}function C(e){e=e|0x0;var t=0x0,n=0x0,r=0x0,i=0x0,o=0x0,s=0x0,u=0x0,c=0x0,l=0x0,d=0x0,f=0x0,h=0x0,p=0x0,v=0x0,y=0x0,g=0x0,m=0x0,_=0x0,b=0x0,x=0x0,k=0x0,w=0x0,S=0x0,T=0x0,P=0x0,E=0x0,A=0x0,I=0x0,D=0x0,L=0x0,O=0x0,R=0x0,C=0x0;if(!e)return;t=e+-0x8|0x0,n=a[0x7]|0x0,r=a[e+-0x4>>0x2]|0x0,e=r&-0x8,i=t+e|0x0;do{if(!(r&0x1)){o=a[t>>0x2]|0x0;if(!(r&0x3))return;s=t+(0x0-o)|0x0,u=o+e|0x0;if(s>>>0x0<n>>>0x0)return;if((a[0x8]|0x0)==(s|0x0)){c=i+0x4|0x0,l=a[c>>0x2]|0x0;if((l&0x3|0x0)!=0x3){d=s,f=s,h=u;break}a[0x5]=u,a[c>>0x2]=l&-0x2,a[s+0x4>>0x2]=u|0x1,a[s+u>>0x2]=u;return}l=0x3?o>>>0x3:o;if(o>>>0x0<0x100){o=a[s+0x8>>0x2]|0x0,c=a[s+0xc>>0x2]|0x0;if((c|0x0)==(o|0x0)){a[0x3]=a[0x3]&~(0x1<<l),d=s,f=s,h=u;break}else{a[o+0xc>>0x2]=c,a[c+0x8>>0x2]=o,d=s,f=s,h=u;break}}o=a[s+0x18>>0x2]|0x0,c=a[s+0xc>>0x2]|0x0;do{if((c|0x0)==(s|0x0)){l=s+0x10|0x0,p=l+0x4|0x0,v=a[p>>0x2]|0x0;if(!v){y=a[l>>0x2]|0x0;if(!y){g=0x0;break}else m=y,_=l}else m=v,_=p;p=m,v=_;while(0x1){l=p+0x14|0x0,y=a[l>>0x2]|0x0;if(!y){b=p+0x10|0x0,x=a[b>>0x2]|0x0;if(!x)break;else k=x,w=b}else k=y,w=l;p=k,v=w}a[v>>0x2]=0x0,g=p}else l=a[s+0x8>>0x2]|0x0,a[l+0xc>>0x2]=c,a[c+0x8>>0x2]=l,g=c}while(0x0);if(o){c=a[s+0x1c>>0x2]|0x0,l=0x13c+(c<<0x2)|0x0;if((a[l>>0x2]|0x0)==(s|0x0)){a[l>>0x2]=g;if(!g){a[0x4]=a[0x4]&~(0x1<<c),d=s,f=s,h=u;break}}else{c=o+0x10|0x0,a[((a[c>>0x2]|0x0)==(s|0x0)?c:o+0x14|0x0)>>0x2]=g;if(!g){d=s,f=s,h=u;break}}a[g+0x18>>0x2]=o,c=s+0x10|0x0,l=a[c>>0x2]|0x0,l|0x0&&(a[g+0x10>>0x2]=l,a[l+0x18>>0x2]=g),l=a[c+0x4>>0x2]|0x0,l?(a[g+0x14>>0x2]=l,a[l+0x18>>0x2]=g,d=s,f=s,h=u):(d=s,f=s,h=u)}else d=s,f=s,h=u}else d=t,f=t,h=e}while(0x0);if(d>>>0x0>=i>>>0x0)return;e=i+0x4|0x0,t=a[e>>0x2]|0x0;if(!(t&0x1))return;if(!(t&0x2)){if((a[0x9]|0x0)==(i|0x0)){g=(a[0x6]|0x0)+h|0x0,a[0x6]=g,a[0x9]=f,a[f+0x4>>0x2]=g|0x1;if((f|0x0)!=(a[0x8]|0x0))return;a[0x8]=0x0,a[0x5]=0x0;return}if((a[0x8]|0x0)==(i|0x0)){g=(a[0x5]|0x0)+h|0x0,a[0x5]=g,a[0x8]=d,a[f+0x4>>0x2]=g|0x1,a[d+g>>0x2]=g;return}g=(t&-0x8)+h|0x0,w=0x3?t>>>0x3:t;do{if(t>>>0x0<0x100){k=a[i+0x8>>0x2]|0x0,_=a[i+0xc>>0x2]|0x0;if((_|0x0)==(k|0x0)){a[0x3]=a[0x3]&~(0x1<<w);break}else{a[k+0xc>>0x2]=_,a[_+0x8>>0x2]=k;break}}else{k=a[i+0x18>>0x2]|0x0,_=a[i+0xc>>0x2]|0x0;do{if((_|0x0)==(i|0x0)){m=i+0x10|0x0,n=m+0x4|0x0,r=a[n>>0x2]|0x0;if(!r){l=a[m>>0x2]|0x0;if(!l){S=0x0;break}else T=l,P=m}else T=r,P=n;n=T,r=P;while(0x1){m=n+0x14|0x0,l=a[m>>0x2]|0x0;if(!l){c=n+0x10|0x0,y=a[c>>0x2]|0x0;if(!y)break;else E=y,A=c}else E=l,A=m;n=E,r=A}a[r>>0x2]=0x0,S=n}else p=a[i+0x8>>0x2]|0x0,a[p+0xc>>0x2]=_,a[_+0x8>>0x2]=p,S=_}while(0x0);if(k|0x0){_=a[i+0x1c>>0x2]|0x0,u=0x13c+(_<<0x2)|0x0;if((a[u>>0x2]|0x0)==(i|0x0)){a[u>>0x2]=S;if(!S){a[0x4]=a[0x4]&~(0x1<<_);break}}else{_=k+0x10|0x0,a[((a[_>>0x2]|0x0)==(i|0x0)?_:k+0x14|0x0)>>0x2]=S;if(!S)break}a[S+0x18>>0x2]=k,_=i+0x10|0x0,u=a[_>>0x2]|0x0,u|0x0&&(a[S+0x10>>0x2]=u,a[u+0x18>>0x2]=S),u=a[_+0x4>>0x2]|0x0,u|0x0&&(a[S+0x14>>0x2]=u,a[u+0x18>>0x2]=S)}}}while(0x0);a[f+0x4>>0x2]=g|0x1,a[d+g>>0x2]=g;if((f|0x0)==(a[0x8]|0x0)){a[0x5]=g;return}else I=g}else a[e>>0x2]=t&-0x2,a[f+0x4>>0x2]=h|0x1,a[d+h>>0x2]=h,I=h;h=0x3?I>>>0x3:I;if(I>>>0x0<0x100){d=0x34+(h<<0x1<<0x2)|0x0,t=a[0x3]|0x0,e=0x1<<h;!(t&e)?(a[0x3]=t|e,D=d+0x8|0x0,L=d):(e=d+0x8|0x0,D=e,L=a[e>>0x2]|0x0);a[D>>0x2]=f,a[L+0xc>>0x2]=f,a[f+0x8>>0x2]=L,a[f+0xc>>0x2]=d;return}d=0x8?I>>>0x8:I;if(d){if(I>>>0x0>0xffffff)O=0x1f;else L=d+0xfff00|0x0,D=(0x10?L>>>0x10:L)&0x8,L=d<<D,d=L+0x7f000|0x0,e=(0x10?d>>>0x10:d)&0x4,d=L<<e,L=d+0x3c000|0x0,t=(0x10?L>>>0x10:L)&0x2,L=d<<t,d=0xe-(e|D|t)+(0xf?L>>>0xf:L)|0x0,L=d+0x7|0x0,O=(L?I>>>L:I)&0x1|d<<0x1}else O=0x0;d=0x13c+(O<<0x2)|0x0,a[f+0x1c>>0x2]=O,a[f+0x14>>0x2]=0x0,a[f+0x10>>0x2]=0x0,L=a[0x4]|0x0,t=0x1<<O;e:do{if(!(L&t))a[0x4]=L|t,a[d>>0x2]=f,a[f+0x18>>0x2]=d,a[f+0xc>>0x2]=f,a[f+0x8>>0x2]=f;else{D=a[d>>0x2]|0x0;t:do{if((a[D+0x4>>0x2]&-0x8|0x0)==(I|0x0))R=D;else{e=I<<((O|0x0)==0x1f?0x0:0x19-(0x1?O>>>0x1:O)|0x0),h=D;while(0x1){C=h+0x10+((0x1f?e>>>0x1f:e)<<0x2)|0x0,g=a[C>>0x2]|0x0;if(!g)break;if((a[g+0x4>>0x2]&-0x8|0x0)==(I|0x0)){R=g;break t}else e=e<<0x1,h=g}a[C>>0x2]=f,a[f+0x18>>0x2]=h,a[f+0xc>>0x2]=f,a[f+0x8>>0x2]=f;break e}}while(0x0);D=R+0x8|0x0,k=a[D>>0x2]|0x0,a[k+0xc>>0x2]=f,a[D>>0x2]=f,a[f+0x8>>0x2]=k,a[f+0xc>>0x2]=R,a[f+0x18>>0x2]=0x0}}while(0x0);f=(a[0xb]|0x0)+-0x1|0x0,a[0xb]=f;if(f|0x0)return;f=0x1d4;while(0x1){R=a[f>>0x2]|0x0;if(!R)break;else f=R+0x8|0x0}a[0xb]=-0x1;return}function B(e){e=e|0x0;var t=0x0,n=0x0,r=0x0,i=0x0;t=e+0x3&-0x4,e=H()|0x0,n=a[e>>0x2]|0x0,r=n+t|0x0;do{if((t|0x0)<0x1|r>>>0x0>n>>>0x0){if(r>>>0x0>(b()|0x0)>>>0x0?(k(r|0x0)|0x0)==0x0:0x0)break;return a[e>>0x2]=r,i=n,i|0x0}}while(0x0);return a[(D()|0x0)>>0x2]=0x30,i=-0x1,i|0x0}function F(e){e=e|0x0;var t=0x0;return t=w,w=w+e|0x0,w=w+0xf&-0x10,t|0x0}function q(e){e=e|0x0,w=e}function j(){return w|0x0}function H(){return 0x210}function z(e,t,n){e=e|0x0,t=t|0x0,n=n|0x0;var r=0x0,o=0x0,s=0x0;if((n|0x0)>=0x200)return x(e|0x0,t|0x0,n|0x0)|0x0,e|0x0;r=e|0x0,o=e+n|0x0;if((e&0x3)==(t&0x3)){while(e&0x3){if(!n)return r|0x0;i[e>>0x0]=i[t>>0x0]|0x0,e=e+0x1|0x0,t=t+0x1|0x0,n=n-0x1|0x0}s=o&-0x4|0x0,n=s-0x40|0x0;while((e|0x0)<=(n|0x0)){a[e>>0x2]=a[t>>0x2],a[e+0x4>>0x2]=a[t+0x4>>0x2],a[e+0x8>>0x2]=a[t+0x8>>0x2],a[e+0xc>>0x2]=a[t+0xc>>0x2],a[e+0x10>>0x2]=a[t+0x10>>0x2],a[e+0x14>>0x2]=a[t+0x14>>0x2],a[e+0x18>>0x2]=a[t+0x18>>0x2],a[e+0x1c>>0x2]=a[t+0x1c>>0x2],a[e+0x20>>0x2]=a[t+0x20>>0x2],a[e+0x24>>0x2]=a[t+0x24>>0x2],a[e+0x28>>0x2]=a[t+0x28>>0x2],a[e+0x2c>>0x2]=a[t+0x2c>>0x2],a[e+0x30>>0x2]=a[t+0x30>>0x2],a[e+0x34>>0x2]=a[t+0x34>>0x2],a[e+0x38>>0x2]=a[t+0x38>>0x2],a[e+0x3c>>0x2]=a[t+0x3c>>0x2],e=e+0x40|0x0,t=t+0x40|0x0}while((e|0x0)<(s|0x0)){a[e>>0x2]=a[t>>0x2],e=e+0x4|0x0,t=t+0x4|0x0}}else{s=o-0x4|0x0;while((e|0x0)<(s|0x0)){i[e>>0x0]=i[t>>0x0]|0x0,i[e+0x1>>0x0]=i[t+0x1>>0x0]|0x0,i[e+0x2>>0x0]=i[t+0x2>>0x0]|0x0,i[e+0x3>>0x0]=i[t+0x3>>0x0]|0x0,e=e+0x4|0x0,t=t+0x4|0x0}}while((e|0x0)<(o|0x0)){i[e>>0x0]=i[t>>0x0]|0x0,e=e+0x1|0x0,t=t+0x1|0x0}return r|0x0}function G(e,t,n){e=e|0x0,t=t|0x0,n=n|0x0;var r=0x0,o=0x0,s=0x0,u=0x0;r=e+n|0x0,t=t&0xff;if((n|0x0)>=0x43){while(e&0x3){i[e>>0x0]=t,e=e+0x1|0x0}o=r&-0x4|0x0,s=t|t<<0x8|t<<0x10|t<<0x18,u=o-0x40|0x0;while((e|0x0)<=(u|0x0)){a[e>>0x2]=s,a[e+0x4>>0x2]=s,a[e+0x8>>0x2]=s,a[e+0xc>>0x2]=s,a[e+0x10>>0x2]=s,a[e+0x14>>0x2]=s,a[e+0x18>>0x2]=s,a[e+0x1c>>0x2]=s,a[e+0x20>>0x2]=s,a[e+0x24>>0x2]=s,a[e+0x28>>0x2]=s,a[e+0x2c>>0x2]=s,a[e+0x30>>0x2]=s,a[e+0x34>>0x2]=s,a[e+0x38>>0x2]=s,a[e+0x3c>>0x2]=s,e=e+0x40|0x0}while((e|0x0)<(o|0x0)){a[e>>0x2]=s,e=e+0x4|0x0}}while((e|0x0)<(r|0x0)){i[e>>0x0]=t,e=e+0x1|0x0}return r-n|0x0}var K={};return K[r(0x225)]=D,K[r(0x1a0)]=I,K[r(0x156)]=H,K[r(0x1fa)]=C,K[r(0x347)]=L,K[r(0x1a9)]=z,K[r(0x16d)]=G,K[r(0x1fc)]=F,K[r(0x157)]=q,K[r(0x233)]=j,K}(b2,b4,a5),b6=i[ew(549)]=b5[ew(549)],b7=i[ew(416)]=b5[ew(416)],b8=i[ew(342)]=b5[ew(342)],b9=i[ew(506)]=b5[ew(506)],ba=i[ew(839)]=b5[ew(839)],bb=i[ew(425)]=b5[ew(425)],bc=i[ew(365)]=b5[ew(365)],bd=i[ew(508)]=b5[ew(508)],be=i[ew(343)]=b5[ew(343)],bf=i[ew(563)]=b5[ew(563)],bl;if(i[ew(480)]=b5,i[ew(796)]=U,aH)if(!aK(aH)&&(aH=t(aH)),q||r){var bg=w(aH);a7[ew(599)](bg,L)}else{aE(ew(730));var bh=function(e){var t=ew;e[t(649)]&&(e=new Uint8Array(e)),a7[t(599)](e,L),i[t(651)]&&delete i[t(651)][t(510)],aF(t(730))},bi=function(){v(aH,bh,(function(){throw new Error(_qdb(403)+aH)}))},bj=b0(aH);if(bj)bh(bj[ew(471)]);else if(i[ew(651)]){var bk=function(){var e=ew,t=i[e(651)],n=t[e(510)];if(200!==t[e(493)]&&0!==t[e(493)]){var r=b0(i[e(806)]);if(!r)return console[e(487)](e(804)+t[e(493)]+e(546)+aH),void bi();n=r[e(471)]}bh(n)};i[ew(651)][ew(510)]?setTimeout(bk,0):i[ew(651)][ew(617)](ew(448),bk)}else bi()}if(aD=function a(){bl||bn(),bl||(aD=a)},i[ew(348)]=bn,i[ew(545)])for(typeof i[ew(545)]==ew(861)&&(i[ew(545)]=[i[ew(545)]]);i[ew(545)][ew(859)]>0;)i[ew(545)][ew(640)]()();N=!0,bn(),f=i[ew(796)](ew(808),ew(798),[ew(798)])}function t(t){var n=ew;if(n(463)==n(463)){if(i[n(606)]){if(n(322)!==n(842))return i[n(606)](t,s);var r=e(f[n(859)]);return g(h,r),r}return s+t}e=f,g=h}function B(e){var t=ew;if(t(446)!==t(405)){var n=aa[ah>>2],r=n+e+15&-16;return aa[ah>>2]=r,n}g[t(599)](h[t(645)](i,j+k),l)}function C(t){var a=ew;if(a(662)===a(816))h=i+8|0,j=k,l=0|m[n>>2];else switch(t){case"i1":case"i8":return 1;case a(328):return 2;case a(792):return 4;case a(791):return 8;case a(793):return 4;case a(387):return 8;default:if(a(398)===a(818))e=f<<1,g=h;else{if("*"===t[t[a(859)]-1]){if(a(482)!=a(482))throw new b3(a(403)+d);return 4}if("i"===t[0]){if(a(576)===a(831))return f(0|g,0|h,0|i),0|j;var u=Number(t[a(333)](1));return R(u%8==0,a(717)+u+a(760)+t),u/8}if(a(724)==a(724))return 0;h&&o(!1,a(852)+p+" ("+q[a(310)](r)+a(581)+s+a(320)),n&=255}}}function D(e){var t=ew;t(502)==t(502)?(D[t(709)]||(D[t(709)]={}),D[t(709)][e]||(t(720)!==t(474)?(D[t(709)][e]=1,z(e)):(aQ=0|aR[7],0==(0|aS)|aT>>>0<aU>>>0&&(aV[7]=aW),aX[115]=aY,aZ[116]=b0,b1[118]=0,b2[12]=b3[121],b4[11]=-1,b5[16]=52,b6[15]=52,b7[18]=60,b8[17]=60,b9[20]=68,ba[19]=68,bb[22]=76,bc[21]=76,bd[24]=84,be[23]=84,bf[26]=92,bg[25]=92,bh[28]=100,bi[27]=100,bj[30]=108,bk[29]=108,bl[32]=116,bm[31]=116,bn[34]=124,bo[33]=124,bp[36]=132,bq[35]=132,br[38]=140,bs[37]=140,bt[40]=148,bu[39]=148,bv[42]=156,bw[41]=156,bx[44]=164,by[43]=164,bz[46]=172,bA[45]=172,bB[48]=180,e[47]=180,bD[50]=188,bE[49]=188,bF[52]=196,bG[51]=196,bH[54]=204,bI[53]=204,bJ[56]=212,bK[55]=212,bL[58]=220,bM[57]=220,bN[60]=228,bO[59]=228,bP[62]=236,bQ[61]=236,bR[64]=244,bS[63]=244,bT[66]=252,bU[65]=252,bV[68]=260,bW[67]=260,bX[70]=268,bY[69]=268,bZ[72]=276,c0[71]=276,c1[74]=284,c2[73]=284,c3[76]=292,c4[75]=292,c5[78]=300,c6[77]=300,c7=c8+-40|0,c9=ca+8|0,cb=0==(7&cc|0)?0:0-cd&7,ce=cf+cg|0,ch=ci-cj|0,ck[9]=cl,cm[6]=cn,co[cp+4>>2]=1|cq,cr[cs+ct+4>>2]=40,cu[10]=cv[125]))):b3[5]=d}function H(e,a,u){var c=ew;if(c(805)!==c(703)){if(!u||!u[c(859)]){if(c(369)!=c(369)){var d=0;if(null!==i&&j!==k&&0!==l){var v=1+(q[c(859)]<<2);d=r(v),s(t,d,v)}return d}return i[c(748)+e][c(404)](null,a)}if(c(825)!==c(313))return i[c(748)+e][c(589)](null,[a][c(722)](u));if(j)return;if(k=!0,l[c(674)]=!0,m)return;n(),o(),p[c(345)]&&q[c(345)](),r()}else f=g,h=i,j=136}function O(e,i,a,c){var d=ew;if(d(582)!==d(817))switch("*"===(a=a||"i8")[d(533)](a[d(859)]-1)&&(a=d(792)),a){case"i1":case"i8":a6[e>>0]=i;break;case d(328):a8[e>>1]=i;break;case d(792):aa[e>>2]=i;break;case d(791):aN=[i>>>0,(aM=i,+ax(aM)>=1?aM>0?(0|aA(+az(aM/4294967296),4294967295))>>>0:~~+ay((aM-+(~~aM>>>0))/4294967296)>>>0:0)],aa[e>>2]=aN[0],aa[e+4>>2]=aN[1];break;case d(793):ac[e>>2]=i;break;case d(387):ad[e>>3]=i;break;default:aG(d(723)+a)}else l=0|m[n+8>>2],o[p+12>>2]=q,r[s+8>>2]=t,u=v}function R(t,n){var r=ew;r(814)===r(325)?b1[r(545)][r(640)]()():!t&&(r(526)==r(526)?aG(r(756)+n):(e=f,g=h))}function S(t){var n=ew;if(n(823)==n(823)){var r=i["_"+t];return R(r,n(440)+t+n(332)),r}e=f<<1,g=h}function T(t,n,r,i,a){var o=ew;if(o(496)!==o(731)){var u={string:function(e){var t=o;if(t(610)!==t(691)){var n=0;if(null!==e&&e!==undefined&&0!==e)if(t(465)==t(465)){var r=1+(e[t(859)]<<2);a0(e,n=bd(r),r)}else b3[t(651)][t(617)](t(448),d);return n}try{var i=new k;return i[t(684)](t(777),l,!1),i[t(774)](null),i[t(498)]}catch(b){var a=p(q);if(a)return s(a);throw b}},array:function(e){var t=o;if(t(505)!==t(667)){var n=bd(e[t(859)]);return a3(e,n),n}return x=y-z|0,A[6]=B,C=0|D[9],E=F+G|0,H[9]=I,J[K+4>>2]=1|L,M[N+4>>2]=3|O,P=Q+8|0,R=S,0|T}};var c=S(t),v=[],m=0;if(i){if(o(608)===o(840)){var _=65535&f,b=g>>>16,w=65535&h;return _*w+((e>>>16)*w+_*b<<16)|0}for(var U=0;U<i[o(859)];U++){if(o(639)!=o(639))return f?g(h,U,j):"";var V=u[r[U]];if(V)o(627)===o(585)?(d=!0,e(f)):(0===m&&(m=bf()),v[U]=V(i[U]));else{if(o(826)!=o(826))return e[o(748)+f][o(589)](null,[g][o(722)](h));v[U]=i[U]}}}var W=c[o(589)](null,v);return W=function(e){var t=o;if(t(409)===t(668)){for(var r=0,i=0;i<d[t(859)];++i){var a=g[t(819)](i);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&h[t(819)](++i)),a<=127?++r:r+=a<=2047?2:a<=65535?3:4}return r}return n===t(700)?Y(e):n===t(587)?Boolean(e):e}(W),0!==m&&be(m),W}f=g,h=0,U=0,j=61}function U(t,r,a,o){var s=ew;if(s(860)==s(860)){var u=(a=a||[])[s(452)]((function(t){var n=s;if(n(729)!==n(772))return t===n(798);e=(15&f)<<12|g<<6|h}));if(r!==s(700)&&u&&!o){if(s(873)==s(873))return S(t);N=O[s(486)](P[s(533)](Q++)),R=S[s(486)](T[s(533)](U++)),V=W[s(486)](X[s(533)](Y++)),Z=a0[s(486)](a1[s(533)](a2++)),a3=a4<<2|a5>>4,a6=(15&a7)<<4|a8>>2,a9=(3&aa)<<6|ab,ac=ad+ae[s(310)](af),64!==ag&&(aq=ar+as[s(310)](at)),64!==al&&(au=av+aw[s(310)](ax))}return function(){var e=s;if(e(335)!==e(846))return T(t,r,a,arguments,o);b3=d}}h[3]=i|j,k=l+8|0,m=n}function X(a,c,_){var b=ew;if(b(340)==b(340)){for(var S=c+_,T=c;a[T]&&!(T>=S);)++T;if(T-c>16&&a[b(645)]&&W){if(b(580)!==b(593))return W[b(415)](a[b(645)](c,T));e=f,g=h}else if(b(648)===b(741))d-=16,e=f;else for(var P="";c<T;)if(b(525)==b(525)){var O=a[c++];if(!(128&O)){if(b(708)==b(708)){P+=String[b(310)](O);continue}e[f]=g[h]}var R=63&a[c++];if(192==(224&O)){if(b(427)==b(427)){P+=String[b(310)]((31&O)<<6|R);continue}var N=o[p[q]];N?(0===C&&(D=E()),F[G]=N(H[I])):J[K]=L[M]}var U=63&a[c++];if(224==(240&O))b(512)==b(512)?O=(15&O)<<12|R<<6|U:(h[3]=i|j,k=l+8|0,m=n);else{if(b(454)===b(507))return b1===b(798);O=(7&O)<<18|R<<12|U<<6|63&a[c++]}if(O<65536)b(619)===b(442)?e[f]=g[b(819)](h):P+=String[b(310)](O);else{if(b(865)===b(478))return o=(0|p[5])+q|0,r[5]=s,t[8]=u,v[w+4>>2]=1|x,void(y[z+A>>2]=B);var V=O-65536;P+=String[b(310)](55296|V>>10,56320|1023&V)}}else i[j>>0]=0|k[l>>0],m=n+1|0,o=p+1|0;return P}for(typeof f[b(545)]==b(861)&&(g[b(545)]=[h[b(545)]]);i[b(545)][b(859)]>0;)k[b(545)][b(640)]()()}function Y(e,t){var n=ew;return n(380)==n(380)?e?X(a7,e,t):"":b1}function Z(t,n,i,a){var u=ew;if(u(773)!==u(557)){if(!(a>0))return 0;for(var c=i,v=i+a-1,y=0;y<t[u(859)];++y)if(u(367)==u(367)){var m=t[u(819)](y);if(m>=55296&&m<=57343){if(u(659)!=u(659))return b3(d);m=65536+((1023&m)<<10)|1023&t[u(819)](++y)}if(m<=127)if(u(697)!=u(697)){var _=h(y[u(806)]);if(!_)return p[u(487)](u(804)+q[u(493)]+u(546)+r),void s();o=_[u(471)]}else{if(i>=v)break;n[i++]=m}else if(m<=2047)if(u(605)===u(356))g[h+16>>2]=y,j[k+24>>2]=l;else{if(i+1>=v)break;n[i++]=192|m>>6,n[i++]=128|63&m}else if(m<=65535)if(u(871)===u(321))f[g>>2]=h,y=j+4|0;else{if(i+2>=v)break;n[i++]=224|m>>12,n[i++]=128|m>>6&63,n[i++]=128|63&m}else{if(u(535)===u(767))throw b1;if(i+3>=v)break;n[i++]=240|m>>18,n[i++]=128|m>>12&63,n[i++]=128|m>>6&63,n[i++]=128|63&m}}else e=f,g=h;return n[i]=0,i-c}g=h,y=j,k=l}function a0(e,t,n){var r=ew;if(r(870)==r(870))return Z(e,a7,t,n);g[h+16>>2]=i,j[k+24>>2]=l}function a1(e){var t=ew;if(t(869)==t(869)){for(var r=0,i=0;i<e[t(859)];++i)if(t(461)!==t(788)){var a=e[t(819)](i);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e[t(819)](++i)),a<=127?++r:r+=a<=2047?2:a<=65535?3:4}else h=i,j=k?l:m,n=145;return r}for(var o=0;o<k[t(859)];o++){var s=a[v[o]];s?(0===D&&(E=F()),G[o]=s(H[o])):I[o]=J[o]}}function a3(t,n){var r=ew;r(746)!==r(346)?a6[r(599)](t,n):(e=0|f,g=h)}function a4(t,n,r){var i=ew;if(i(540)===i(801))return d[i(606)](e,f);for(var a=0;a<t[i(859)];++a)i(654)!=i(654)?(g[h+20>>2]=a,j[k+24>>2]=l):a6[n++>>0]=t[i(819)](a);r||(a6[n>>0]=0)}function ae(e){var t=ew;t(567)==t(567)?(a5=e,i[t(836)]=a6=new Int8Array(e),i[t(863)]=a8=new Int16Array(e),i[t(597)]=aa=new Int32Array(e),i[t(481)]=a7=new Uint8Array(e),i[t(632)]=a9=new Uint16Array(e),i[t(414)]=ab=new Uint32Array(e),i[t(779)]=ac=new Float32Array(e),i[t(421)]=ad=new Float64Array(e)):b3[t(783)](d)}function aj(a){var c=ew;if(c(849)!=c(849)){if(o=(0|p[6])+q|0,r[6]=s,t[9]=u,v[w+4>>2]=1|x,(0|y)!=(0|z[8]))return;return A[8]=0,void(B[5]=0)}for(;a[c(859)]>0;)if(c(371)===c(786))m[n+20>>2]=o,p[q+24>>2]=r,s=t,u=v,w=x;else{var _=a[c(531)]();if(typeof _==c(861)){if(c(522)==c(522)){_(i);continue}e++,f[c(822)]&&i[c(822)](j)}var b=_[c(579)];typeof b===c(798)?c(586)!==c(537)?_[c(377)]===undefined?c(633)===c(554)?(e=f,g=h):i[c(783)](b):c(618)===c(565)?(l=0|m[n+8>>2],o[p+12>>2]=q,r[s+8>>2]=t,u=v):i[c(776)](b,_[c(377)]):b3(c(756)+d):c(666)!==c(311)?b(_[c(377)]===undefined?null:_[c(377)]):e[f++>>0]=g[c(819)](h)}}function aq(){var t=ew;if(t(638)===t(308))throw new b1;if(i[t(543)])if(t(742)==t(742))for(typeof i[t(543)]==t(861)&&(i[t(543)]=[i[t(543)]]);i[t(543)][t(859)];)t(657)!==t(820)?av(i[t(543)][t(531)]()):d=e[t(333)](0,f[t(330)]("/")+1);else b1="";aj(ak)}function ar(){var e=ew;e(669)==e(669)?(ao=!0,aj(al)):b3(d[e(807)][e(531)]())}function as(){var e=ew;e(435)!=e(435)?f(!1,e(852)+g+" ("+h[e(310)](i)+e(581)+j+e(320)):aj(am)}function at(){var t=ew;t(559)==t(559)?ap=!0:(e=f<<1,g=h)}function au(){var n=ew;if(n(704)!=n(704)){var a=new d;return a[n(684)](n(777),e,!1),a[n(616)]=n(827),a[n(774)](null),new f(a[n(510)])}if(i[n(807)]){if(n(706)===n(710)){if("*"===h[i[n(859)]-1])return 4;if("i"===j[0]){var c=o(p[n(333)](1));return q(c%8==0,n(717)+c+n(760)+r),c/8}return 0}for(typeof i[n(807)]==n(861)&&(i[n(807)]=[i[n(807)]]);i[n(807)][n(859)];)n(534)===n(641)?(q=r,s=t,u=v,w=x,y=z,A=B,C=D,E=F):aw(i[n(807)][n(531)]())}aj(an)}function av(e){var n=ew;n(375)==n(375)?ak[n(530)](e):(p[4]=q|r,s[t>>2]=u,v[w+24>>2]=x,y[z+12>>2]=A,B[C+8>>2]=D)}function aw(e){var t=ew;t(830)!==t(696)?an[t(530)](e):b3(d[t(471)])}function aE(e){var t=ew;t(603)!==t(492)&&(aB++,i[t(822)]&&(t(384)==t(384)?i[t(822)](aB):(f[g>>0]=h,i=j+1|0)))}function aF(n){var a=ew;if(a(584)===a(673)){var c=d(e);if(c)return c;throw f}if(aB--,i[a(822)])if(a(523)===a(613)){if(200==j[a(493)]||0==k[a(493)]&&l[a(510)])return void s(t[a(510)]);var v=o(p);if(v)return void u(v[a(471)]);r()}else i[a(822)](aB);if(0==aB)if(a(686)===a(812))b1();else if(null!==aC&&(a(445)==a(445)?(clearInterval(aC),aC=null):(d-=8,e=f)),aD){if(a(485)!=a(485)){var y=e(f);if(y)return i(y);throw h}var g=aD;aD=null,g()}}function aG(e){var t=ew;if(t(469)!==t(424)){if(i[t(410)]){if(t(635)!=t(635))return"";i[t(410)](e)}throw z(e+=""),P=!0,Q=1,e=t(411)+e+t(476)}b3[t(530)](d)}function aI(t,n){var r=ew;if(r(460)==r(460))return String[r(628)][r(564)]?t[r(564)](n):0===t[r(486)](n);e=f,g=h}function aK(e){var t=ew;if(t(347)!=t(347)){var n=new b3;return n[t(684)](t(777),d,!1),n[t(774)](null),n[t(498)]}return aI(e,aJ)}function aP(e){var t=ew;if(t(568)!==t(357))return e;g[h+16>>2]=i,j[k+24>>2]=l}function aQ(e){var t=ew;if(t(621)===t(447)){var n=f[g>>2],r=n+h+15&-16;return i[j>>2]=r,n}return e[t(551)](/\b__Z[\w\d_]+/g,(function(e){var n=t;if(n(336)!==n(609)){var r=aP(e);return e===r?e:r+" ["+e+"]"}}))}function aR(){var n=ew;if(n(847)==n(847)){var a=new Error;if(!a[n(573)])if(n(675)===n(642))r=s+t|0,u[8]=v,w[5]=x,y[z+4>>2]=1|A,B[C+D>>2]=E,F[G+4>>2]=3|H;else{try{if(n(458)==n(458))throw new Error;f||g(),h||(i=j)}catch(bJ){n(705)===n(714)?(bJ=f,g=h):a=bJ}if(!a[n(573)]){if(n(449)!==n(829))return n(395);if(j[n(543)])for(typeof s[n(543)]==n(861)&&(t[n(543)]=[u[n(543)]]);v[n(543)][n(859)];)y(z[n(543)][n(531)]());q(r)}}return a[n(573)][n(495)]()}e=f,g=h}function aS(){var t=ew;return t(514)===t(519)?d[t(748)+e][t(404)](null,f):a7[t(859)]}function aT(e){var t=ew;if(t(552)===t(672))return 4;aG(t(389))}function aU(t){var n=ew;n(634)==n(634)?aT(t>>>=0):(e=f,g=h)}function aX(t){var n=ew;if(n(809)==n(809)){for(var r=[],i=0;i<t[n(859)];i++)if(n(678)===n(833))g=(7&h)<<18|i<<12|j<<6|63&k[l++];else{var a=t[i];if(a>255){if(n(475)!=n(475))return f(g,h,i,arguments,j);aW&&(n(780)!==n(735)?R(!1,n(852)+a+" ("+String[n(310)](a)+n(581)+i+n(320)):(e=f,g=h)),a&=255}r[n(386)](String[n(310)](a))}return r[n(835)]("")}return f<0?g[n(575)](h):i[n(739)](j)}function aZ(t){var r=ew;if(r(682)===r(349))e=f,g=h;else try{if(r(503)==r(503)){for(var i=aY(t),a=new Uint8Array(i[r(859)]),o=0;o<i[r(859)];++o)r(431)!==r(408)?a[o]=i[r(819)](o):b1();return a}d(e),f=null}catch(bM){if(r(755)!==r(515))throw new Error(r(524));h=o+8|0,j=k,l=0|m[n>>2]}}function b0(t){var r=ew;return r(312)===r(353)?(d=e,0|f):aK(t)?aZ(t[r(334)](aJ[r(859)])):r(598)!==r(588)?void 0:h===r(700)?i(j):k===r(587)?l(m):n}function bm(e){var t=ew;this[t(663)]=t(867),this[t(472)]=t(745)+e+")",this[t(493)]=e}function bn(e){var t=ew;function n(){var e=_qdb;bl||(bl=!0,i[e(674)]=!0,P||(ar(),as(),i[e(345)]&&i[e(345)](),au()))}e=e||l,aB>0||(aq(),aB>0||(i[t(441)]?(i[t(441)](t(366)),setTimeout((function(){setTimeout((function(){i[_qdb(441)]("")}),1),n()}),1)):n()))}}function _qdb(e,t){var n=_qda();return _qdb=function(t,r){var i=n[t-=307];if(_qdb.pAFWMz===undefined){var a=function(e){for(var t,n,r="",i="",a=0,o=0;n=e.charAt(o++);~n&&(t=a%4?64*t+n:n,a++%4)?r+=String.fromCharCode(255&t>>(-2*a&6)):0)n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var s=0,u=r.length;s<u;s++)i+="%"+("00"+r.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(i)};_qdb.mfaevw=a,e=arguments,_qdb.pAFWMz=!0}var o=n[0],s=t+o,u=e[s];return u?i=u:(i=_qdb.mfaevw(i),e[s]=i),i},_qdb(e,t)}!function(e,t){for(var n=_qdb,r=e();;)try{if(601942===-parseInt(n(676))/1*(-parseInt(n(671))/2)+parseInt(n(753))/3+-parseInt(n(484))/4+-parseInt(n(758))/5*(parseInt(n(732))/6)+parseInt(n(577))/7+-parseInt(n(727))/8*(-parseInt(n(464))/9)+-parseInt(n(824))/10*(-parseInt(n(841))/11))break;r.push(r.shift())}catch(i){r.push(r.shift())}}(_qda),_qddJ()},function(e,t,n){var r=n(99),i=n(509),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(i(a))},function(e,t,n){"use strict";var r=n(501),i=n(399);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){"use strict";var r=n(274),i=n(145),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t,n){var r=n(590);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){n(728)},function(e,t,n){n(80)({global:!0},{globalThis:n(99)})},function(e,t,n){var r=n(116),i=n(594);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},function(e,t,n){var r=n(265),i=n(324).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(99),i=n(435).trim,a=n(436),o=r.parseFloat,s=1/o(a+"-0")!=-Infinity;e.exports=s?function(e){var t=i(String(e)),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){"use strict";var r=n(216).forEach,i=n(341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:undefined)}},function(e,t,n){var r=n(99);e.exports=r.Promise},function(e,t,n){var r,i,a,o,s,u,c,l,d=n(99),f=n(228).f,h=n(601).set,p=n(602),v=n(735),y=n(396),g=d.MutationObserver||d.WebKitMutationObserver,m=d.document,_=d.process,b=d.Promise,x=f(d,"queueMicrotask"),k=x&&x.value;k||(r=function(){var e,t;for(y&&(e=_.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():a=undefined,n}}a=undefined,e&&e.enter()},p||y||v||!g||!m?b&&b.resolve?(c=b.resolve(undefined),l=c.then,o=function(){l.call(c,r)}):o=y?function(){_.nextTick(r)}:function(){h.call(d,r)}:(s=!0,u=m.createTextNode(""),new g(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s})),e.exports=k||function(e){var t={fn:e,next:undefined};a&&(a.next=t),i||(i=t,o()),a=t}},function(e,t,n){var r=n(507);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(116),i=n(145),a=n(603);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(99);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2;e.exports={pack:function(e,t,s){var u,c,l,d=new Array(s),f=8*s-t-1,h=(1<<f)-1,p=h>>1,v=23===t?r(2,-24)-r(2,-77):0,y=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===Infinity?(c=e!=e?1:0,u=h):(u=i(a(e)/o),e*(l=r(2,-u))<1&&(u--,l*=2),(e+=u+p>=1?v/l:v*r(2,1-p))*l>=2&&(u++,l/=2),u+p>=h?(c=0,u=h):u+p>=1?(c=(e*l-1)*r(2,t),u+=p):(c=e*r(2,p-1)*r(2,t),u=0));t>=8;d[g++]=255&c,c/=256,t-=8);for(u=u<<t|c,f+=t;f>0;d[g++]=255&u,u/=256,f-=8);return d[--g]|=128*y,d},unpack:function(e,t){var n,i=e.length,a=8*i-t-1,o=(1<<a)-1,s=o>>1,u=a-7,c=i-1,l=e[c--],d=127&l;for(l>>=7;u>0;d=256*d+e[c],c--,u-=8);for(n=d&(1<<-u)-1,d>>=-u,u+=t;u>0;n=256*n+e[c],c--,u-=8);if(0===d)d=1-s;else{if(d===o)return n?NaN:l?-Infinity:Infinity;n+=r(2,t),d-=s}return(l?-1:1)*n*r(2,d-t)}}},function(e,t,n){var r=n(99),i=n(92),a=n(433),o=n(134).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!o||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!a((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,undefined).length}))},function(e,t,n){var r=n(256);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(183),i=n(148),a=n(406),o=n(518),s=n(326),u=n(134).aTypedArrayConstructor;e.exports=function(e){var t,n,c,l,d,f,h=r(e),p=arguments.length,v=p>1?arguments[1]:undefined,y=v!==undefined,g=a(h);if(g!=undefined&&!o(g))for(f=(d=g.call(h)).next,h=[];!(l=f.call(d)).done;)h.push(l.value);for(y&&p>2&&(v=s(v,arguments[2],2)),n=i(h.length),c=new(u(this))(n),t=0;n>t;t++)c[t]=y?v(h[t],t):h[t];return c}},function(e,t,n){"use strict";var r=n(183),i=n(325),a=n(148),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=a(n.length),u=i(e,s),c=i(t,s),l=arguments.length>2?arguments[2]:undefined,d=o((l===undefined?s:i(l,s))-c,s-u),f=1;for(c<u&&u<c+d&&(f=-1,c+=d-1,u+=d-1);d-- >0;)c in n?n[u]=n[c]:delete n[u],u+=f,c+=f;return n}},function(e,t,n){var r=n(134).aTypedArrayConstructor,i=n(328);e.exports=function(e,t){for(var n=i(e,e.constructor),a=0,o=t.length,s=new(r(n))(o);o>a;)s[a]=t[a++];return s}},function(e,t,n){var r=n(183),i=Math.floor,a="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,u,c,l){var d=n+e.length,f=u.length,h=s;return c!==undefined&&(c=r(c),h=o),a.call(l,h,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=c[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?u[l-1]===undefined?a.charAt(1):u[l-1]+a.charAt(1):r}o=u[s-1]}return o===undefined?"":o}))}},function(e,t,n){"use strict";var r=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",s=Math.floor,u=String.fromCharCode,c=function(e){return e+22+75*(e<26)},l=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;r+=36)e=s(e/35);return s(r+36*e/(e+38))},d=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);var n,i,a=e.length,d=128,f=0,h=72;for(n=0;n<e.length;n++)(i=e[n])<128&&t.push(u(i));var p=t.length,v=p;for(p&&t.push("-");v<a;){var y=r;for(n=0;n<e.length;n++)(i=e[n])>=d&&i<y&&(y=i);var g=v+1;if(y-d>s((r-f)/g))throw RangeError(o);for(f+=(y-d)*g,d=y,n=0;n<e.length;n++){if((i=e[n])<d&&++f>r)throw RangeError(o);if(i==d){for(var m=f,_=36;;_+=36){var b=_<=h?1:_>=h+26?26:_-h;if(m<b)break;var x=m-b,k=36-b;t.push(u(c(b+x%k))),m=s(x/k)}t.push(u(c(m))),h=l(f,g,v==p),f=0,++v}}++f,++d}return t.join("")};e.exports=function(e){var t,n,r=[],o=e.toLowerCase().replace(a,".").split(".");for(t=0;t<o.length;t++)n=o[t],r.push(i.test(n)?"xn--"+d(n):n);return r.join(".")}},function(e,t,n){var r=n(116),i=n(406);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){var r=n(300);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var r=n(256),i=n(255);e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==Infinity)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);n(339),n(44),n(17),n(115),n(753);var r=n(415),i=n(39),a=n(451);t["default"]=function(e){var t,n=new r.a;function o(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];e.postMessage({cmd:t,msg:n},r)}e.addEventListener("message",(function(e){if(null===e.data)o("__ACK__",!1);else{var r=e.data,s=r.cmd,u=r.msg;switch(o("__ACK__",!0),s){case"__init__":try{var c=u.options,l=u.transmuxer;c.debug&&(i.a.enable=!0),t=a.a.resolve(l),n.on(i.a,i.a.MSG_NAME,(function(e,t){return o("__log__",{type:e,message:t})})).on(t,"__idle__",(function(){return o("__idle__")})).on(t,"error",(function(e,t,n){return o("error",{code:e,message:t,data:n})})).on(t,"demux_info",(function(e){return o("demux_info",e)})).on(t,"demux_data",(function(e){var t=[];e.data instanceof ArrayBuffer&&t.push(e.data),o("demux_data",e,t)})).on(t,"remux_data",(function(e){var t=[],n=e.data;Array.isArray(n)&&n.forEach((function(e){e instanceof ArrayBuffer&&t.push(e)})),o("remux_data",e,t)})).on(t,"done",(function(){return o("done")})),o("__init__"),o("__idle__")}catch(e){throw"worker __init__ fail ".concat(e.stack||e.message)}break;case"push":t.push(u.buf,u.conf);break;case"reset":t&&t.reset()}}}))}},function(e,t,n){var r=n(754);e.exports=r},function(e,t,n){n(755),n(23),n(756),n(757),n(758),n(759),n(760),n(761),n(762),n(763),n(764),n(765),n(766),n(767);var r=n(508);e.exports=r.Reflect},function(e,t,n){var r=n(80),i=n(264),a=n(274),o=n(116),s=n(92),u=i("Reflect","apply"),c=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){u((function(){}))}))},{apply:function(e,t,n){return a(e),o(n),u?u(e,t,n):c.call(e,t,n)}})},function(e,t,n){var r=n(80),i=n(147),a=n(116),o=n(323),s=n(158);r({target:"Reflect",stat:!0,forced:n(92)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){a(e);var r=o(t,!0);a(n);try{return s.f(e,r,n),!0}catch(i){return!1}}})},function(e,t,n){var r=n(80),i=n(116),a=n(228).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(80),i=n(145),a=n(116),o=n(162),s=n(228),u=n(302);r({target:"Reflect",stat:!0},{get:function c(e,t){var n,r,l=arguments.length<3?e:arguments[2];return a(e)===l?e[t]:(n=s.f(e,t))?o(n,"value")?n.value:n.get===undefined?undefined:n.get.call(l):i(r=u(e))?c(r,t,l):void 0}})},function(e,t,n){var r=n(80),i=n(147),a=n(116),o=n(228);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},function(e,t,n){var r=n(80),i=n(116),a=n(302);r({target:"Reflect",stat:!0,sham:!n(517)},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){n(80)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(80),i=n(116),a=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,n){n(80)({target:"Reflect",stat:!0},{ownKeys:n(587)})},function(e,t,n){var r=n(80),i=n(264),a=n(116);r({target:"Reflect",stat:!0,sham:!n(607)},{preventExtensions:function(e){a(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},function(e,t,n){var r=n(80),i=n(116),a=n(145),o=n(162),s=n(92),u=n(158),c=n(228),l=n(302),d=n(299);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function f(e,t,n){var r,s,h=arguments.length<4?e:arguments[3],p=c.f(i(e),t);if(!p){if(a(s=l(e)))return f(s,t,n,h);p=d(0)}if(o(p,"value")){if(!1===p.writable||!a(h))return!1;if(r=c.f(h,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(h,t,r)}else u.f(h,t,d(0,n));return!0}return p.set!==undefined&&(p.set.call(h,n),!0)}})},function(e,t,n){var r=n(80),i=n(116),a=n(597),o=n(342);o&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),a(t);try{return o(e,t),!0}catch(n){return!1}}})},function(e,t,n){var r=n(80),i=n(99),a=n(275);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},function(e,t,n){var r=n(99),i=n(435).trim,a=n(436),o=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==o(a+"08")||22!==o(a+"0x16");e.exports=u?function(e,t){var n=i(String(e));return o(n,t>>>0||(s.test(n)?16:10))}:o},function(e,t,n){"use strict";var r=n(80),i=n(403),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(L){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={};function y(){}function g(){}function m(){}var _={};_[a]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&r.call(x,a)&&(_=x);var k=m.prototype=y.prototype=Object.create(_);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=k.constructor=m,m.constructor=g,g.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),u(k,s,"Generator"),k[a]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(80),i=n(620);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?t.push(n.charAt(i>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=undefined;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(438),i=n(116),a=n(255),o=n(778),s=n(439);r("search",1,(function(e,t,n){return[function(t){var n=a(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),u=String(this),c=a.lastIndex;o(c,0)||(a.lastIndex=0);var l=s(a,u);return o(a.lastIndex,c)||(a.lastIndex=c),null===l?-1:l.index}]}))},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(80),i=n(435).trim;r({target:"String",proto:!0,forced:n(780)("trim")},{trim:function(){return i(this)}})},function(e,t,n){var r=n(92),i=n(436);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t,n){"use strict";var r=n(80),i=n(401).includes,a=n(521);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a("includes")},function(e,t,n){"use strict";var r=n(80),i=n(613),a=n(255);r({target:"String",proto:!0,forced:!n(614)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){var r=n(219),i=n(285),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,n){var r=n(219),i=n(409);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(441),i=n(348),a=n(786);e.exports=function(e){return function(t,n,o){var s,u=r(t),c=i(u.length),l=a(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(536),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(260),i=n(643),a=n(409),o=r("unscopables"),s=Array.prototype;s[o]==undefined&&a(s,o,i(null)),e.exports=function(e){s[o][e]=!0}},function(e,t,n){var r=n(790),i=n(462);e.exports=function(e,t,n){if(r(t))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(i(e))}},function(e,t,n){var r=n(285),i=n(442),a=n(260)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(260)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){e.exports=n(219)},function(e,t,n){var r=n(463);e.exports=function(e,t,n){if(r(e),t===undefined)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var r=n(637),i=n(347),a=n(635);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){var r=n(285),i=n(646),a=n(260)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[a])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(310);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(409),i=n(443),a=n(259),o=n(260),s=n(692),u=o("species"),c=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=o(e),h=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=h&&!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t}));if(!h||!p||"replace"===e&&!c||"split"===e&&!l){var v=/./[f],y=n(f,""[e],(function(e,t,n,r,i){return t.exec===s?h&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=y[0],m=y[1];i(String.prototype,e,g),i(RegExp.prototype,f,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)}),d&&r(RegExp.prototype[f],"sham",!0)}}},function(e,t,n){"use strict";var r=n(827);e.exports=function(e,t,n){return t+(n?r(e,t,!0).length:1)}},function(e,t,n){var r=n(442),i=n(692);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(196),i=n(696);r({target:"String",proto:!0,forced:n(1051)("trim")},{trim:function(){return i(this,3)}})},function(e,t,n){var r=n(196),i=n(1052);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},,function(e,t,n){"use strict";n.r(t),n.d(t,"Md5",(function(){return r})),n.d(t,"Md5FileHasher",(function(){return i})),n.d(t,"ParallelHasher",(function(){return a}));class r{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){const t=r.hexChars,n=r.hexOut;let i,a,o,s;for(s=0;s<4;s+=1)for(a=8*s,i=e[s],o=0;o<8;o+=2)n[a+1+o]=t.charAt(15&i),i>>>=4,n[a+0+o]=t.charAt(15&i),i>>>=4;return n.join("")}static _md5cycle(e,t){let n=e[0],r=e[1],i=e[2],a=e[3];n+=(r&i|~r&a)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[2]+606105819|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[10]-42063|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+i|0,n+=(r&a|i&~a)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[11]+643717713|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[15]-660478335|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[3]-187363961|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+i|0,n+=(r^i^a)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[7]-155497632|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[3]-722521979|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[15]+530742520|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+i|0,n+=(i^(r|~a))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[10]-1051523|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[2]+718787259|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this}appendStr(e){const t=this._buffer8,n=this._buffer32;let i,a,o=this._bufferLength;for(a=0;a<e.length;a+=1){if(i=e.charCodeAt(a),i<128)t[o++]=i;else if(i<2048)t[o++]=192+(i>>>6),t[o++]=63&i|128;else if(i<55296||i>56319)t[o++]=224+(i>>>12),t[o++]=i>>>6&63|128,t[o++]=63&i|128;else{if(i=1024*(i-55296)+(e.charCodeAt(++a)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[o++]=240+(i>>>18),t[o++]=i>>>12&63|128,t[o++]=i>>>6&63|128,t[o++]=63&i|128}o>=64&&(this._dataLength+=64,r._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){const t=this._buffer8,n=this._buffer32;let i,a=this._bufferLength,o=0;for(;;){for(i=Math.min(e.length-o,64-a);i--;)t[a++]=e.charCodeAt(o++);if(a<64)break;this._dataLength+=64,r._md5cycle(this._state,n),a=0}return this._bufferLength=a,this}appendByteArray(e){const t=this._buffer8,n=this._buffer32;let i,a=this._bufferLength,o=0;for(;;){for(i=Math.min(e.length-o,64-a);i--;)t[a++]=e[o++];if(a<64)break;this._dataLength+=64,r._md5cycle(this._state,n),a=0}return this._bufferLength=a,this}getState(){const e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){const t=e.buffer,n=e.state,r=this._state;let i;for(this._dataLength=e.length,this._bufferLength=e.buflen,r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(e=!1){const t=this._bufferLength,n=this._buffer8,i=this._buffer32,a=1+(t>>2);this._dataLength+=t;const o=8*this._dataLength;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,i.set(r.buffer32Identity.subarray(a),a),t>55&&(r._md5cycle(this._state,i),i.set(r.buffer32Identity)),o<=4294967295)i[14]=o;else{const e=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;const t=parseInt(e[2],16),n=parseInt(e[1],16)||0;i[14]=t,i[15]=n}return r._md5cycle(this._state,i),e?this._state:r._hex(this._state)}}if(r.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),r.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r.hexChars="0123456789abcdef",r.hexOut=[],r.onePassHasher=new r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello"))throw new Error("Md5 self test failed.");class i{constructor(e,t=!0,n=1048576){this._callback=e,this._async=t,this._partSize=n,this._configureReader()}hash(e){const t=this;t._blob=e,t._part=0,t._md5=new r,t._processPart()}_fail(){this._callback({success:!1,result:"data read failed"})}_hashData(e){let t=this;t._md5.appendByteArray(new Uint8Array(e.target.result)),t._part*t._partSize>=t._blob.size?t._callback({success:!0,result:t._md5.end()}):t._processPart()}_processPart(){const e=this;let t,n=0;e._part+=1,e._blob.size>e._partSize?(n=e._part*e._partSize,n>e._blob.size&&(n=e._blob.size),t=e._blob.slice((e._part-1)*e._partSize,n)):t=e._blob,e._async?e._reader.readAsArrayBuffer(t):setTimeout((()=>{try{e._hashData({target:{result:e._reader.readAsArrayBuffer(t)}})}catch(n){e._fail()}}),0)}_configureReader(){const e=this;e._async?(e._reader=new FileReader,e._reader.onload=e._hashData.bind(e),e._reader.onerror=e._fail.bind(e),e._reader.onabort=e._fail.bind(e)):e._reader=new FileReaderSync}}class a{constructor(e,t){this._queue=[],this._ready=!0;const n=this;Worker?(n._hashWorker=new Worker(e,t),n._hashWorker.onmessage=n._recievedMessage.bind(n),n._hashWorker.onerror=e=>{n._ready=!1,console.error("Hash worker failure",e)}):(n._ready=!1,console.error("Web Workers are not supported in this browser"))}hash(e){const t=this;let n;return n=new Promise(((n,r)=>{t._queue.push({blob:e,resolve:n,reject:r}),t._processNext()})),n}terminate(){this._ready=!1,this._hashWorker.terminate()}_processNext(){this._ready&&!this._processing&&this._queue.length>0&&(this._processing=this._queue.pop(),this._hashWorker.postMessage(this._processing.blob))}_recievedMessage(e){var t,n;const r=e.data;r.success?null===(t=this._processing)||void 0===t||t.resolve(r.result):null===(n=this._processing)||void 0===n||n.reject(r.result),this._processing=undefined,this._processNext()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(35),n(529)),u=n(532),c=n(456),l=function(){function e(t,n,r){i()(this,e),this.severity=t,this.category=n,this.code=r;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];this.data=o}return o()(e,[{key:"toString",value:function(){return"".concat(e.MESSAGE_HEAD," ").concat(s.a.stringify(this,null,"  "))}}]),e}();l.severity=c.a,l.category=u.a,l.MESSAGE_HEAD="KIWI:"},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(113),u=n.n(s),c=n(8),l=n.n(c),d=n(9),f=n.n(d),h=n(3),p=n.n(h),v=(n(133),n(86)),y=n(333),g=n(415);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var _=function(e){l()(n,e);var t=m(n);function n(e){var r;return i()(this,n),(r=t.call(this)).$apiKeys=y.b.call(u()(r)),r.$eventManager=new g.a,r.ctx_=e.ctx,r.$apiInjector=y.a,r}return o()(n,[{key:"bindApis",value:function(){y.a.provide(this,this.$apiKeys),y.a.inject(this.ctx_),y.a.dispose()}},{key:"unbindApis",value:function(){y.a.eject(this.ctx_,this.$apiKeys)}},{key:"destroy",value:function(){this.$eventManager.destroy(),this.unbindApis(),this.$apiKeys.splice(0,this.$apiKeys.length)}}]),n}(v.EventEmitter);_.$__apiDescriptorQueue__=[]},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(undefined)}))}},e.exports.__esModule=!0,e.exports["default"]=e.exports},,,function(e,t,n){var r=n(363),i=n(259),a=n(783);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(638);e.exports=r("native-function-to-string",Function.toString)},function(e,t,n){var r=n(346),i=n(1022),a=n(634),o=n(347);e.exports=function(e,t){for(var n=i(t),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(346),i=n(441),a=n(785),o=n(641),s=a(!1);e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)!r(o,n)&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~s(c,n)||c.push(n));return c}},function(e,t,n){var r=n(219).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(259);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(442),i=n(260)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){"use strict";var r=n(1028),i=n(347),a=n(260),o=n(363),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(310),i=n(463),a=n(260)("species");e.exports=function(e,t){var n,o=r(e).constructor;return o===undefined||(n=r(o)[a])==undefined?t:i(n)}},function(e,t,n){var r,i,a,o=n(219),s=n(259),u=n(442),c=n(793),l=n(813),d=n(783),f=o.location,h=o.setImmediate,p=o.clearImmediate,v=o.process,y=o.MessageChannel,g=o.Dispatch,m=0,_={},b="onreadystatechange",x=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},k=function(e){return function(){x(e)}},w=function(e){x(e.data)},S=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++m]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},r(m),m},p=function(e){delete _[e]},"process"==u(v)?r=function(e){v.nextTick(k(e))}:g&&g.now?r=function(e){g.now(k(e))}:y?(a=(i=new y).port2,i.port1.onmessage=w,r=c(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(S)?r=b in d("script")?function(e){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),x(e)}}:function(e){setTimeout(k(e),0)}:(r=S,o.addEventListener("message",w,!1))),e.exports={set:h,clear:p}},function(e,t,n){var r=n(219).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(463),i=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){t.f=n(260)},function(e,t,n){var r=n(792),i=n(346),a=n(821),o=n(347).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";var r=n(196),i=n(1041),a=n(825),o=n(826),s=n(687),u=n(409),c=n(443),l=n(260),d=n(639),f=n(645),h=n(824),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),g="keys",m="values",_="entries",b=function(){return this};e.exports=function(e,t,n,l,h,x,k){i(n,t,l);var w,S,T,P=function(e){if(e===h&&L)return L;if(!v&&e in I)return I[e];switch(e){case g:case m:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",A=!1,I=e.prototype,D=I[y]||I["@@iterator"]||h&&I[h],L=!v&&D||P(h),O="Array"==t&&I.entries||D;if(O&&(w=a(O.call(new e)),p!==Object.prototype&&w.next&&(d||a(w)===p||(o?o(w,p):"function"!=typeof w[y]&&u(w,y,b)),s(w,E,!0,!0),d&&(f[E]=b))),h==m&&D&&D.name!==m&&(A=!0,L=function(){return D.call(this)}),d&&!k||I[y]===L||u(I,y,L),f[t]=L,h)if(S={values:P(m),keys:x?L:P(g),entries:P(_)},k)for(T in S)(v||A||!(T in I))&&c(I,T,S[T]);else r({target:t,proto:!0,forced:v||A},S);return S}},function(e,t,n){"use strict";var r,i,a,o=n(825),s=n(409),u=n(346),c=n(260),l=n(639),d=c("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(i=o(o(a)))!==Object.prototype&&(r=i):f=!0),r==undefined&&(r={}),l||u(r,d)||s(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r=n(346),i=n(421),a=n(683),o=n(1042),s=a("IE_PROTO"),u=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){var r=n(1043);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return r(n,i),t?e.call(n,i):n.__proto__=i,n}}():undefined)},function(e,t,n){var r=n(536),i=n(462);e.exports=function(e,t,n){var a,o,s=String(i(e)),u=r(t),c=s.length;return u<0||u>=c?n?"":undefined:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?n?s.charAt(u):a:n?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(285),i=n(826);e.exports=function(e,t,n){var a,o=t.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&r(a)&&i&&i(e,a),e}},function(e,t,n){var r=n(196),i=n(421),a=n(644);r({target:"Object",stat:!0,forced:n(259)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,t,n){var r=n(259);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(196),i=n(348),a=n(789),o=n(791),s="endsWith",u="".endsWith,c=Math.min;r({target:"String",proto:!0,forced:!o(s)},{endsWith:function(e){var t=a(this,e,s),n=arguments.length>1?arguments[1]:undefined,r=i(t.length),o=n===undefined?r:c(i(n),r),l=String(e);return u?u.call(t,l,o):t.slice(o-l.length,o)===l}})},,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return et}));var r=n(806),i=n.n(r),a=n(352),o=n.n(a),s=n(125),u=n.n(s),c=n(126),l=n.n(c),d=n(681),f=n.n(d);n(689),n(690),n(206),n(691),n(422),n(540),n(444),n(464),n(364),n(229),n(304),n(277),n(541),n(542),n(539),n(538),n(445),n(543),n(330),n(331),n(336),n(528),n(544),n(311),n(1054),n(446),n(1055),n(648),n(830),n(1057),n(693),n(800),n(1058),n(335),n(694),n(695);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var p=Object.prototype,v=function(e){var t=p.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},y=function(e){return h(e)},g=function(e,t){return p.hasOwnProperty.call(e,t)},m=function(e){return e==Infinity||e==-Infinity},_=function(e){return!isNaN(e)&&"number"==v(e)},b=function(e){return!(!_(e)||m(e))},x=function(e){return!!b(e)&&0==e%1},k=function(e){if(e){var t=y(e);return"object"==t||"function"==t}return!1},w=function(e){return k(e)&&"function"!=v(e)},S=function(e){return!(!e||"object"!=v(e))&&(!e.nodeType&&!e.setInterval)},T=function(e){return"string"==v(e)},P=function(e){if(!E(e)&&w(e)){var t=e.length;if(x(t)&&t>=0)return!0}return!1},E=function(e){return!(!e||e.window!=e)},A={_class:v,_type:y,owns:g,nan:function(e){return e!=e},bool:function(e){return"boolean"==v(e)},infinite:m,number:_,iod:b,decimal:function(e){return!!b(e)&&0!=e%1},integer:x,oof:k,object:w,hash:S,plainObject:S,undef:function(e){return"undefined"==y(e)},fn:function(e){return"function"==v(e)},string:T,nos:function(e){return b(e)||T(e)},array:function(e){return"array"==v(e)},arraylike:P,window:E,empty:function(e){if(T(e)||P(e))return 0===e.length;if(S(e))for(var t in e)if(g(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==v(e)}},I=function(){var e={};e.is=A,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){l(t,(function(t,n){A.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=c,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=u,e.includes=function(e,t){return-1!=u(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),A.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=l,e.keys=function(e){var t=[];return l(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return l(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&A.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function u(e,t){return A.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function c(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function l(e,t){if(e)for(var n in e)if(A.owns(e,n)&&!1===t(e[n],n,e))break;return e}function d(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return l(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return d(e).toLowerCase()},e.upper=function(e){return d(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==u(e,t)},e.tostr=d,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&A.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},A.string(t)&&(t=t.split(/ +/)),c(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return l(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=d(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){A.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return A.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},l(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,u=Date.now();function c(){return!(u-o>n)&&!(a&&u-s>a)}function l(e,t,n){return o=Date.now(),e.apply(t,n)}function d(){i&&(clearTimeout(i),i=null)}function f(){u=Date.now();var e=c();s=u;var a=this,o=arguments;d(),e?r.trailing&&(i=setTimeout((function(){l(t,a,o)}),n)):l(t,a,o)}return r.leading||(o=u),f.cancel=d,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(A.array(e))return e;var t=[];return d(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}();function D(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function L(e,t,n,r,i,a){return D((o=D(D(t,e),D(r,a)))<<(s=i)|o>>>32-s,n);var o,s}function O(e,t,n,r,i,a,o){return L(t&n|~t&r,e,t,i,a,o)}function R(e,t,n,r,i,a,o){return L(t&r|n&~r,e,t,i,a,o)}function C(e,t,n,r,i,a,o){return L(t^n^r,e,t,i,a,o)}function M(e,t,n,r,i,a,o){return L(n^(t|~r),e,t,i,a,o)}function B(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,o,s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)r=s,i=u,a=c,o=l,s=O(s,u,c,l,e[n],7,-680876936),l=O(l,s,u,c,e[n+1],12,-389564586),c=O(c,l,s,u,e[n+2],17,606105819),u=O(u,c,l,s,e[n+3],22,-1044525330),s=O(s,u,c,l,e[n+4],7,-176418897),l=O(l,s,u,c,e[n+5],12,1200080426),c=O(c,l,s,u,e[n+6],17,-1473231341),u=O(u,c,l,s,e[n+7],22,-45705983),s=O(s,u,c,l,e[n+8],7,1770035416),l=O(l,s,u,c,e[n+9],12,-1958414417),c=O(c,l,s,u,e[n+10],17,-42063),u=O(u,c,l,s,e[n+11],22,-1990404162),s=O(s,u,c,l,e[n+12],7,1804603682),l=O(l,s,u,c,e[n+13],12,-40341101),c=O(c,l,s,u,e[n+14],17,-1502002290),s=R(s,u=O(u,c,l,s,e[n+15],22,1236535329),c,l,e[n+1],5,-165796510),l=R(l,s,u,c,e[n+6],9,-1069501632),c=R(c,l,s,u,e[n+11],14,643717713),u=R(u,c,l,s,e[n],20,-373897302),s=R(s,u,c,l,e[n+5],5,-701558691),l=R(l,s,u,c,e[n+10],9,38016083),c=R(c,l,s,u,e[n+15],14,-660478335),u=R(u,c,l,s,e[n+4],20,-405537848),s=R(s,u,c,l,e[n+9],5,568446438),l=R(l,s,u,c,e[n+14],9,-1019803690),c=R(c,l,s,u,e[n+3],14,-187363961),u=R(u,c,l,s,e[n+8],20,1163531501),s=R(s,u,c,l,e[n+13],5,-1444681467),l=R(l,s,u,c,e[n+2],9,-51403784),c=R(c,l,s,u,e[n+7],14,1735328473),s=C(s,u=R(u,c,l,s,e[n+12],20,-1926607734),c,l,e[n+5],4,-378558),l=C(l,s,u,c,e[n+8],11,-2022574463),c=C(c,l,s,u,e[n+11],16,1839030562),u=C(u,c,l,s,e[n+14],23,-35309556),s=C(s,u,c,l,e[n+1],4,-1530992060),l=C(l,s,u,c,e[n+4],11,1272893353),c=C(c,l,s,u,e[n+7],16,-155497632),u=C(u,c,l,s,e[n+10],23,-1094730640),s=C(s,u,c,l,e[n+13],4,681279174),l=C(l,s,u,c,e[n],11,-358537222),c=C(c,l,s,u,e[n+3],16,-722521979),u=C(u,c,l,s,e[n+6],23,76029189),s=C(s,u,c,l,e[n+9],4,-640364487),l=C(l,s,u,c,e[n+12],11,-421815835),c=C(c,l,s,u,e[n+15],16,530742520),s=M(s,u=C(u,c,l,s,e[n+2],23,-995338651),c,l,e[n],6,-198630844),l=M(l,s,u,c,e[n+7],10,1126891415),c=M(c,l,s,u,e[n+14],15,-1416354905),u=M(u,c,l,s,e[n+5],21,-57434055),s=M(s,u,c,l,e[n+12],6,1700485571),l=M(l,s,u,c,e[n+3],10,-1894986606),c=M(c,l,s,u,e[n+10],15,-1051523),u=M(u,c,l,s,e[n+1],21,-2054922799),s=M(s,u,c,l,e[n+8],6,1873313359),l=M(l,s,u,c,e[n+15],10,-30611744),c=M(c,l,s,u,e[n+6],15,-1560198380),u=M(u,c,l,s,e[n+13],21,1309151649),s=M(s,u,c,l,e[n+4],6,-145523070),l=M(l,s,u,c,e[n+11],10,-1120210379),c=M(c,l,s,u,e[n+2],15,718787259),u=M(u,c,l,s,e[n+9],21,-343485551),s=D(s,r),u=D(u,i),c=D(c,a),l=D(l,o);return[s,u,c,l]}function N(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function F(e){var t,n=[];for(n[(e.length>>2)-1]=undefined,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function q(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function j(e){return unescape(encodeURIComponent(e))}function U(e){return function(e){return N(B(F(e),8*e.length))}(j(e))}function V(e,t){return function(e,t){var n,r,i=F(e),a=[],o=[];for(a[15]=o[15]=undefined,i.length>16&&(i=B(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=B(a.concat(F(t)),512+8*t.length),N(B(o.concat(r),640))}(j(e),j(t))}function H(e,t,n){return t?n?V(t,e):q(V(t,e)):n?U(e):q(U(e))}var z=I.is,G={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[undefined]};function W(e,t,n){return n=I.find(arguments,(function(e){return z.object(e)})),e=z.nos(e)?e:undefined,t=z.nos(t)?t:undefined,n=I.extend({},G,n,{sep:e,eq:t})}var K=function(e,t,n,r){e+="";var i=(r=W(t,n,r)).decode;return e=e.split(r.sep),I.reduce(e,(function(e,t){if(2==(t=t.split(r.eq)).length){var n=t[0],a=t[1];if(!r.keepRaw)try{n=i(n),a=i(a)}catch(o){}e[n]=a}return e}),{})},$=function(e,t,n,r){r=W(t,n,r);var i=I.keys(e),a=r.sort;a&&(z.fn(a)?i.sort(a):i.sort());var o=r.encode,s=[];return I.each(i,(function(t){var n=e[t];I.includes(r.ignoreValues,n)||((z.nan(n)||null==n)&&(n=""),r.keepRaw||(t=o(t),n=o(n)),s.push(t+r.eq+n))})),s.join(r.sep)};"http https ftp gopher file".split(" ");function Y(e,t){var n=[],r=I.indexOf(e,t);return-1==r?n[0]=e:(n[0]=e.slice(0,r),n[1]=e.slice(r+t.length)),n}var Q=function(e,t){if("string"!=typeof e)return e;var n,r,i={};i.href=e,r=(n=Y(e,"#"))[0],n[1]&&(i.hash="#"+n[1]),n=function(e,t){var n="";return e=e.replace(t,(function(e){return n=e,""})),[n,e]}(r,/^[a-zA-Z][a-zA-Z0-9+-.]*:/),r=n[1],i.protocol=n[0].toLowerCase(),r=(n=Y(r,"?"))[0];var a=n[1];if(t&&(a=K(a)),i.query=a,"/"!=r.charAt(0)&&i.schema)return i.opaque=r,i;I.startsWith(r,"//")&&(n=Y(r=r.slice(2),"/"),i.pathname="/"+unescape(n[1]||""),n=function(e){var t=Y(e,"@"),n=t[0],r=t[1];r||(r=t[0],n=null);return[n,r]}(n[0]),i.auth=n[0],n=Y(n[1],":"),i.hostname=n[0],i.port=~~n[1]);return i};function J(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:I.invert(t)}}J("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),J("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");var X=I.is,Z={1:300,2:600,3:1126.4,4:1536,5:3072,10:8192,96:170},ee=I.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));I.curry((function nt(e,t){var n={};e&&t&&I.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(A.object(i)){var a=i.type||function(e){return A._class(e)}(t),o=i.name;"object"==a?n[o]=nt(i.child,t):"array"==a&&(n[o]=I.map(t,(function(e){return nt(i.child,e)})))}else n[i]=t}));return n}));var te=function rt(e,t){var n={};return e&&t&&I.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(I.is.object(i)){var a=i.type||function(e){return I.is._class(e)}(t),o=i.name;"object"==a?n[o]=rt(i.child,t):"array"==a&&(n[o]=I.map(t,(function(e){return rt(i.child,e)})))}else n[i]=t})),n};function ne(){}function re(e,t,n,r){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return t&&function(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break}(t,(function(t,a){!n&&i(e,a)||(r&&"string"!=typeof t&&"boolean"!=typeof t?(e[a]||(e[a]={}),re(e[a],t,n,r)):e[a]=t)})),e}Function.prototype.toString.call(Object);var ie=function(e,t){return e<<t|e>>>32-t},ae=function(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a},oe=function(e,t,n,r,i,a,o){return e=ae(e,ae(ae(function(e,t,n){return e&t|~e&n}(t,n,r),i),o)),ae(ie(e,a),t)},se=function(e,t,n,r,i,a,o){return e=ae(e,ae(ae(function(e,t,n){return e&n|t&~n}(t,n,r),i),o)),ae(ie(e,a),t)},ue=function(e,t,n,r,i,a,o){return e=ae(e,ae(ae(function(e,t,n){return e^t^n}(t,n,r),i),o)),ae(ie(e,a),t)},ce=function(e,t,n,r,i,a,o){return e=ae(e,ae(ae(function(e,t,n){return t^(e|~n)}(t,n,r),i),o)),ae(ie(e,a),t)},le=function(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n};function de(e){e+="";var t,n,r,i,a,o,s,u,c,l=Array();for(e=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e),l=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),a=Array(i-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[i-2]=n<<3,a[i-1]=n>>>29,a}(e),o=1732584193,s=4023233417,u=2562383102,c=271733878,t=0;t<l.length;t+=16)n=o,r=s,i=u,a=c,o=oe(o,s,u,c,l[t+0],7,3614090360),c=oe(c,o,s,u,l[t+1],12,3905402710),u=oe(u,c,o,s,l[t+2],17,606105819),s=oe(s,u,c,o,l[t+3],22,3250441966),o=oe(o,s,u,c,l[t+4],7,4118548399),c=oe(c,o,s,u,l[t+5],12,1200080426),u=oe(u,c,o,s,l[t+6],17,2821735955),s=oe(s,u,c,o,l[t+7],22,4249261313),o=oe(o,s,u,c,l[t+8],7,1770035416),c=oe(c,o,s,u,l[t+9],12,2336552879),u=oe(u,c,o,s,l[t+10],17,4294925233),s=oe(s,u,c,o,l[t+11],22,2304563134),o=oe(o,s,u,c,l[t+12],7,1804603682),c=oe(c,o,s,u,l[t+13],12,4254626195),u=oe(u,c,o,s,l[t+14],17,2792965006),s=oe(s,u,c,o,l[t+15],22,1236535329),o=se(o,s,u,c,l[t+1],5,4129170786),c=se(c,o,s,u,l[t+6],9,3225465664),u=se(u,c,o,s,l[t+11],14,643717713),s=se(s,u,c,o,l[t+0],20,3921069994),o=se(o,s,u,c,l[t+5],5,3593408605),c=se(c,o,s,u,l[t+10],9,38016083),u=se(u,c,o,s,l[t+15],14,3634488961),s=se(s,u,c,o,l[t+4],20,3889429448),o=se(o,s,u,c,l[t+9],5,568446438),c=se(c,o,s,u,l[t+14],9,3275163606),u=se(u,c,o,s,l[t+3],14,4107603335),s=se(s,u,c,o,l[t+8],20,1163531501),o=se(o,s,u,c,l[t+13],5,2850285829),c=se(c,o,s,u,l[t+2],9,4243563512),u=se(u,c,o,s,l[t+7],14,1735328473),s=se(s,u,c,o,l[t+12],20,2368359562),o=ue(o,s,u,c,l[t+5],4,4294588738),c=ue(c,o,s,u,l[t+8],11,2272392833),u=ue(u,c,o,s,l[t+11],16,1839030562),s=ue(s,u,c,o,l[t+14],23,4259657740),o=ue(o,s,u,c,l[t+1],4,2763975236),c=ue(c,o,s,u,l[t+4],11,1272893353),u=ue(u,c,o,s,l[t+7],16,4139469664),s=ue(s,u,c,o,l[t+10],23,3200236656),o=ue(o,s,u,c,l[t+13],4,681279174),c=ue(c,o,s,u,l[t+0],11,3936430074),u=ue(u,c,o,s,l[t+3],16,3572445317),s=ue(s,u,c,o,l[t+6],23,76029189),o=ue(o,s,u,c,l[t+9],4,3654602809),c=ue(c,o,s,u,l[t+12],11,3873151461),u=ue(u,c,o,s,l[t+15],16,530742520),s=ue(s,u,c,o,l[t+2],23,3299628645),o=ce(o,s,u,c,l[t+0],6,4096336452),c=ce(c,o,s,u,l[t+7],10,1126891415),u=ce(u,c,o,s,l[t+14],15,2878612391),s=ce(s,u,c,o,l[t+5],21,4237533241),o=ce(o,s,u,c,l[t+12],6,1700485571),c=ce(c,o,s,u,l[t+3],10,2399980690),u=ce(u,c,o,s,l[t+10],15,4293915773),s=ce(s,u,c,o,l[t+1],21,2240044497),o=ce(o,s,u,c,l[t+8],6,1873313359),c=ce(c,o,s,u,l[t+15],10,4264355552),u=ce(u,c,o,s,l[t+6],15,2734768916),s=ce(s,u,c,o,l[t+13],21,1309151649),o=ce(o,s,u,c,l[t+4],6,4149444226),c=ce(c,o,s,u,l[t+11],10,3174756917),u=ce(u,c,o,s,l[t+2],15,718787259),s=ce(s,u,c,o,l[t+9],21,3951481745),o=ae(o,n),s=ae(s,r),u=ae(u,i),c=ae(c,a);return(le(o)+le(s)+le(u)+le(c)).toLowerCase()}!function(e,t,n){var r="",i={},a={},o="",s=t.toLowerCase();a.userAgent=s;var u="";u=n&&n.effectiveType?n.effectiveType:(u=s.match(/NetType\/\w+/)?s.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/","");var c=s.match(/rtrident/),l=!c&&s.match(/(ipad).*os\s([\d_]+)/),d=!c&&!l&&s.match(/(iphone\sos)\s([\d_]+)/),f=s.match(/Android\s+([\d.]+)/i),h=s.match(/(?:redmi|hm) ([\w ]+) build/i);if(s.match(/iqiyireader iqiyireaderversion\/([\d.]+)/i),s.match(/iqiyiversion_reader\/([\d.]+)/i),a.IE11=/rv\:11/.test(s),a.IE=/msie/.test(s)||a.IE11,a.IE6=/msie 6/.test(s),a.IE7=/msie 7/.test(s),a.IE8=/msie 8/.test(s),a.IE9=/msie 9/.test(s),a.IE10=/msie 10/.test(s),a.EDGE=/edge/.test(s)||/edg/.test(s),a.PWA=/\(Edge Side Panel\)/.test(s),a.UWP=/UWP/.test(s),a.iPhone=/iphone os/.test(s)&&!c,a.iPhone4=/iphone os [45]_/.test(s)&&!c,a.iPad=/ipad/.test(s)&&!c,a.iPod=/iPod/i.test(s)&&!c,a.isTouch="undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),a.CHROMEIOS=/crios/.test(s),a.CHROME=/chrome/.test(s)&&!a.EDGE,a.SAFARI=/safari/.test(s)&&!/chrome/.test(s),a.FIREFOX=/firefox/.test(s),a.mobile=/mobile/gi.test(s),a.mobileSafari=a.iPhone||a.iPhone||a.iPad,a.QQ=/QQBrowser/gi.test(s),a.WECHAT=/(wechat)|(micromessenger)/gi.test(s),a.SmartTV=/SMART-TV/gi.test(s),a.BAIDU=/baidubrowser/gi.test(s),a.BAIDU_BOX=/baiduboxapp/gi.test(s),a.HUAWEI=/huaweibrowser/gi.test(s),a.VIVO=/vivobrowser/gi.test(s),a.MIUI=/miuibrowser/gi.test(s),a.MIUI_VIDEO=/miuivideo/gi.test(s),a.CHROME){var p=/chrome\/([\d\.]+) /gi.exec(s)[1];if(p){a.version=parseInt(p,10);var v=p.split(".");v.length>1&&(a.minorVersion=parseInt(v[1],10)),v.length>2&&(a.buildVersion=parseInt(v[2],10))}else a.version=0}if(a.EDGE){var y=/edge\/([\d\.]+)/gi.exec(s)||/edg\/([\d\.]+)/gi.exec(s);a.version=y?parseInt(y[1],10):0}if(a.SAFARI){var g=/version\/([\d.]+).*safari/gi.exec(s);a.version=g?parseInt(g[1],10):0}h&&(a.redmi=h);var m=/(macintosh|macintel|macppc|mac68k|macos)/i.test(s),_=/X11/.test(s)&&!m,b=/win/i.test(s)&&!_,x=/android/.test(s);i.win=b,i.mac=m,i.android=x,i.androidMobile=x&&a.mobile,i.androidTablet=x&&(!a.mobile||/pad/i.test(s)),f&&(i.version=f[1]),i.ios=!1,d&&(i.ios=!0,i.version=d[2].replace(/_/g,".")),l&&(i.ios=!0,i.version=l[2].replace(/_/g,".")),a.iPod&&(i.ios=!0),r=a.iPad?"b85da1cf3ae44351":"b6c13e26323c537d";var k=function(){var e="01";(a.iPhone||i.android)&&(e="02"),(a.iPad||i.androidTablet)&&(e="03");var t="01";i.android&&(t="02"),i.ios&&(t="03"),i.mac&&"02"!==e&&"03"!==e&&(t="08");return e+t+"0031010000000000"},w="m3u8";/__pmode__=m3u8/.test(e)?w="m3u8":/__pmode__=mp4/.test(e)&&(w="mp4")}("undefined"==typeof window?"":window.location.href,"undefined"==typeof navigator?"":navigator.userAgent,"undefined"==typeof navigator?"":navigator.connection);var fe,he=function(e){var t="",n="",r="",i="",a=e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/);return a&&(t=a[1],n=a[2],r=a[3],i=a[4]),{protocol:t,host:n,port:r,path:i}},pe=he,ve=Object.create||function(e){var t=function(){};return t.prototype=e,new t},ye=Object.keys||function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t);return t},ge=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},me=50,_e=function(){function e(){u()(this,e),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=ve(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}return l()(e,[{key:"setMaxListeners",value:function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this}},{key:"getMaxListeners",value:function(){return xe(this)}},{key:"emit",value:function(e){var t,n,r,i,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=o[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:ke(n,c,this);break;case 2:we(n,c,this,arguments[1]);break;case 3:Se(n,c,this,arguments[1],arguments[2]);break;case 4:Te(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];Pe(n,c,this,i)}return!0}},{key:"on",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{highPriority:!1};return"object"!=o()(n)&&(n={}),Ee(this,e,t,n)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},i=ge.call(Ie,r);return i.listener=n,r.wrapFn=i,i}(this,e,t)),this}},{key:"off",value:function(e,t){return Ae.call(this,e,t)}},{key:"un",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){var t,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=ve(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=ve(null):delete n[e]),this;if(0===arguments.length){var i,a=ye(n);for(r=0;r<a.length;++r)"off"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=ve(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.off(e,t[r]);return this}},{key:"listeners",value:function(e){return De(this,e,!0)}},{key:"rawListeners",value:function(e){return De(this,e,!1)}},{key:"listenerCount",value:function(){return e.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Le.call(e,t)}}]),e}();try{var be={};Object.defineProperty&&Object.defineProperty(be,"x",{value:0}),fe=0===be.x}catch(tt){fe=!1}function xe(e){return e._maxListeners===undefined?_e.defaultMaxListeners:e._maxListeners}function ke(e,t,n){if(t)e.call(n);else for(var r=e.length,i=Oe(e,r),a=0;a<r;++a)try{i[a].call(n)}catch(o){console.error(o)}}function we(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=Oe(e,i),o=0;o<i;++o)try{a[o].call(n,r)}catch(s){console.error(s)}}function Se(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=Oe(e,a),s=0;s<a;++s)try{o[s].call(n,r,i)}catch(u){console.error(u)}}function Te(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=Oe(e,o),u=0;u<o;++u)try{s[u].call(n,r,i,a)}catch(c){console.error(c)}}function Pe(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=Oe(e,i),o=0;o<i;++o)try{a[o].apply(n,r)}catch(s){console.error(s)}}function Ee(e,t,n){var r,i,a,s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},u={highPriority:!!s.highPriority};if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=ve(null),e._eventsCount=0),a){if("function"==typeof a?a=i[t]=[a,n]:u.highPriority?a.shift(n):a.push(n),!a.warned&&(r=xe(e))&&r>0&&a.length>r){a.warned=!0;var c=new Error("Possible Dispatcher memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,"object"===("undefined"==typeof console?"undefined":o()(console))&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else a=i[t]=n,++e._eventsCount;return e}function Ae(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=ve(null):(delete r[e],r.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.off&&this.emit("off",e,o||t)}return this}function Ie(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function De(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):Oe(i,i.length):[]}function Le(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Oe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}fe?Object.defineProperty(_e,"defaultMaxListeners",{enumerable:!0,get:function(){return me},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');me=e}}):_e.defaultMaxListeners=me;var Re={stringify:function(e,t,n){try{return JSON.stringify(e,t,n)}catch(r){}return""},parse:function(e,t){try{return JSON.parse(e,t)}catch(n){}return{}}},Ce=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];function Me(e){var t,n,r,i={};return e?(e.split("\n").forEach((function(e){if(r=e.indexOf(":"),t=e.substr(0,r).trim().toLowerCase(),n=e.substr(r+1).trim(),t){if(i[t]&&Ce.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}var Be={},Ne={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},Fe={"*":null,text:null,html:null,xml:null,json:function(e){return Re.parse(e)}},qe={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:ne,success:ne,failure:ne};function je(e){var t=[];if("object"==o()(e))for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")}function Ue(e){re(e=e||{},qe);var t=e.url,n=e.dataType,r=e.params||{},a=e.success,o=e.failure;if(t){var s=function(){var n=i()(f.a.mark((function a(){var n,i;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=je(r),(i={method:e.method,headers:e.headers,body:e.data||null,withCredentials:e.withCredentials,timeout:e.timeout,params:r}).url=t+(n.length>0?(/\?/i.test(t)?"&":"?")+n:""),"function"!=typeof e.beforeSend){a.next=7;break}return a.next=6,e.beforeSend(i);case 6:i=a.sent;case 7:u(i);case 8:case"end":return a.stop()}}),a)})));return function(){return n.apply(this,arguments)}}();s()}function u(t){var r=t.url,i=t.method,s=t.headers,u=t.body,c=t.withCredentials,l=t.timeout,d="",f=!1,h=new XMLHttpRequest,p={url:r,request:h,response:null,message:""};if(h.withCredentials=c,h.onreadystatechange=function(){var t;if(d+=", readyState = "+h.readyState,4==h.readyState)if(t=Fe[n]?Fe[n](h.responseText):h.responseText,d+=", status = "+h.status+", statusText = "+h.statusText,200==h.status){if("json"===n&&"string"==typeof t)try{t=JSON.parse(t)}catch(u){return p.message="JsonOperateError: ".concat(u.message,", ").concat(r),p.response={status:h.status,headers:s,data:t},void o(p.message,p)}a(t,{status:h.status,headers:Me(h.getAllResponseHeaders()),data:t})}else if(!f){f=!0;var i="";try{i=JSON.stringify(t)}catch(u){i="JsonOperateError: ".concat(u.message,", ").concat(r)}d+=", data = "+i+"url = "+r,p.message="xhr error, time = "+e.timeout+d,p.response={status:h.status,headers:s,data:t},o(p.message,p)}},h.ontimeout=function(t){if(!f){f=!0;var n="xhr timeout, time = "+e.timeout+", readyState = "+h.readyState+", status = "+h.status+", data = "+Re.stringify(t)+"url = "+r;p.message=n,p.response=null,o(p.message,p)}},h.open(i,r,!0),h.timeout=l,h.setRequestHeader("Accept",Ne[n]),function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()}(s))for(var v in s){null!==s[v]&&h.setRequestHeader(v,s[v])}h.send(u)}}function Ve(){return Ve=i()(f.a.mark((function e(t){var n,r,i,a,o,s,u,c,l,d,h,p,v,y,g,m,_,b,x,k,w,S,T;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(t=t||{},qe),n=t.url,r=t.params||{},i=je(r),a=n+(i.length>0?(/\?/i.test(n)?"&":"?")+i:""),o=document,s=t.complete,u=t.success,c=t.failure,l=(t.callbackhead?t.callbackhead:"Q")+de(t.fixedCallback||a),d=!!t.memory,h=de(a),p=Be[h],a){e.next=16;break}return e.abrupt("return");case 16:if(!(d&&p&&u)){e.next=19;break}return u(p),e.abrupt("return");case 19:if(v=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";y();var i={url:n,request:null,response:{status:-1,headers:{},data:t},message:r};switch(e){case 1:d&&(Be[h]=t),u(t);break;case 0:c(i.message,i)}s(t)},y=function(){if(window[l]){window[l]=undefined;try{delete window[l]}catch(e){}}},window[l]=function(e){y(),setTimeout((function(){v(1,e)}),0)},m={},(_=o.createElement("script")).async=!0,_.type="text/javascript",_.charset=t.charset,b=function(){if(_)try{_.onload(null,!0)}catch(e){}},_.abort=b,_.onload=_.onreadystatechange=function(e,t){(t||!_.readyState||/loaded|complete/.test(_.readyState))&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),_=null,clearTimeout(g))},_.onerror=function(e){v(0,null,e?e.stack||e.message:"script onerror, message is null"),b()},g=setTimeout((function(){v(0,null,"script load timeout"),b()}),t.timeout),(x={})[t.jsonpCallback]=l,re(r,x,!0),t.isSort&&1==t.isSort){for(S in k=[],w="",t.params)k.push(S+"="+t.params[S]);for(k.sort(),T=0;T<k.length;T++)T===k.length-1?w+=k[T]:w+=k[T]+"&";m.url=n+(/\?/i.test(n)?"&":"?")+w}else m.url=a+(/\?/i.test(a)?"&":"?")+je(x);if(m.params=r,"function"!=typeof t.beforeSend){e.next=44;break}return e.next=40,t.beforeSend(m);case 40:if(e.t0=e.sent,e.t0){e.next=43;break}e.t0=m;case 43:m=e.t0;case 44:return _.src=m.url,o.getElementsByTagName("head")[0].appendChild(_),e.abrupt("return",_);case 47:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}var He=Ue,ze=function(e){re(e=e||{},qe),e.dataType="json",Ue(e)},Ge=function(e){return Ve.apply(this,arguments)},We={isServer:void 0!==e&&"undefined"==typeof window},Ke={i:"i",ap:"ap",fa:"fa",adPlayerId:"d",uaaUserId:"a",cupidUserId:"n",passportId:"pi",requestId:"rid",timestamp:"h",g:"g",episodeId:"b",albumId:"h",channelId:"k",cuepointType:"y",adZoneId:"azt",startTime:"st",sequenceId:"si",referrer:"reh",userAgent:"m",continuingVideoPlayedCount:"vn",continuingVideoPlayedDuration:"vd",continuingAdPlayedDuration:"vad",isVIP:"v",passportCookie:"pc",network:"nw",needPolicy:"po",isPreload:"x",couponCode:"cc",couponVer:"mv",url:"ul",videoPlayedDurationInDay:"cd",adPlayedDurationInDay:"ca",midrollPointsPlayedInView:"nm",lastRollCompleteInterval:"in",lastMidrollRequestTime:"lm",clientVersion:"e",sdkVersion:"r",searchQuery:"sq",prerollOrderItemIds:"poi",pauseRequestTimes:"pt",playSource:"ps",requestIndex:"rix",vvId:"o",usePartnerData:"upd",ptid:"ptid",timePoint:"tp",vft:"vft",idx:"idx",azd:"azd"},$e={version:"version",errorCode:"errorCode",serverError:"serverError",httpCookieId:"cupidUserId",ims:"ims",inv:{name:"inventory",type:"object",child:{fi:"forbiddenInventory",ri:"rawInventory",oi:"originalInventory",di:"deliveredInventory"}},vipCheckConflict:{name:"vipCheckConflict",type:"object",child:{isVIP:"isVIP",code:"code",message:"message"}},pbp:"pingbackParam",pc:"pingbackConfig",midrollPoints:{name:"midrollPoints",type:"object",child:{autoChoose:"autoChoose",nextMidroll:"nextMidroll"}},vipCheckResult:{name:"vipCheckResult",type:"object",child:{isVIP:"isVIP",userVipType:"userVipType"}},vdi:{name:"videoInfo",type:"object",child:{dsa:"disableSkipAd",vd:"videoDuration",ai:"albumId",vt:"videoType"}},futureSlots:{name:"policySlots",type:"array",child:{type:"cuepointType",startTime:"startTimes",adZoneId:"adZoneId",duration:"duration",sequenceId:"sequenceId"}},adSlots:{name:"slots",type:"array",child:{type:"cuepointType",adZoneId:"adZoneId",startTime:"startTime",emptyTracking:{name:"emptyTracking",type:"object",child:{timeSlices:"timeSlices",params:"trackingParam"}},ads:{name:"ads",type:"array",child:{comment:"comment",order:"order",orderItemId:"orderItemId",orderItemType:"orderItemType",timePosition:"timeSlices",p:"priority",deliverType:"deliverType",impressionTime:"impressionTime",skipTime:"skipTime",settle:"settle",targetAd:"targetedAd",dsp:"isDSP",dspId:"dspId",dspType:"dspType",dspIcon:"dspIcon",endTime:"endTime",creativeId:"creativeId",creativeType:"creativeType",templateType:"templateType",creativeObject:"creativeObject",clickThroughUrl:"clickThrough",clickThroughType:"clickThroughType",clickTracking:{name:"clickTracking",type:"object",child:{adxTracking:"exchangeTracking",cupidTracking:"cupidTracking",thirdPartyTracking:"thirdPartyTracking"}},impressionTracking:{name:"impressionTracking",type:"object",child:{adxTracking:"exchangeTracking",cupidTracking:"cupidTracking",thirdPartyTracking:"thirdPartyTracking"}},eventTracking:{name:"eventTracking",type:"array",child:{event:"event",tracking:"trackings"}},iqiyiTracking:{name:"iqiyiTracking",type:"object",child:{cupidTracking:{name:"cupidTracking",type:"object",child:{events:"events",params:"trackingParam"}},adxTracking:{name:"exchangeTracking",type:"object",child:{events:"events",params:"trackingParam"}}}},startTime:"startTime",fullCorner:{name:"fullCorner",type:"object",child:{si:"showInterval",sd:"showDuration"}},acceleratable:"seekable",toast:"toast",qrShowStyle:"qrShowStyle",coExtra:"crex",h5TemplateLink:"h5tl"}}}},cupidExtras:{name:"cupidExtras",type:"object",child:{clientIp:"clientIp"}}},Ye=function(e,t){if(!e)return!0;if(!t)return!0;var n=Qe(t);return!n||!1!==n.upd},Qe=function(e){var t;if(!e)return!1;try{t=JSON.parse(e)}catch(n){return console.log("parse upd error",n),!1}return t},Je=I.is,Xe=function(e){return function(e,t){var n=Date.now();return new Promise((function(r,i){(function(e,t,n,r){return void 0===r&&(r=!1),new Promise((function(i,a){var o,s;We.isServer?(o=He,s={url:e,timeout:t,withCredentials:!1}):n?(o=Ge,s={url:e,timeout:t||1e4,jsonpCallback:"cb"}):(o=ze,s={url:e,timeout:t,withCredentials:r}),o(Object.assign(s,{success:function(e,t){i({data:e,headers:t&&t.headers||{}})},failure:function(e,t){console.log("request error:",e);var n="error";t.response?e.indexOf("JsonOperateError")>-1&&(n="parsererror"):n="timeout",a({message:e,type:n})}}))}))})(e,t.timeout,!0,!0).then((function(e){var i=I.extend({},e.data),a=function(e){var t,n=te($e,e);n.clientIp=null===(t=n.cupidExtras)||void 0===t?void 0:t.clientIp,n.isMixer=!0;var r=n.slots;if(!r||Je.empty(r))return n.slots=[],n;return null==r||r.forEach((function(e){var t=e.ads;null==t||t.forEach((function(e){e.creative={creativeId:e.creativeId,creativeObject:e.creativeObject,creativeType:e.creativeType,templateType:e.templateType},e.ies=[],e.macroSubstitutionMap={}}))})),n}(e.data),o=e.headers["set-cookie"]||null,s=[];We.isServer&&(s=function(e,t){var n=e.slots;if(n&&n.length>0){var r=n.filter((function(e){return 1==e.cuepointType}));return r&&r[0]&&r[0].ads?r[0].ads.map((function(e){var n=function(e,t,n){e=e||{};var r=Z[t]||1024,i=I.map(ee,(function(t){var i=-1,a=t.key,o=e[a];return n==t.videoFormat&&(o=e[a],X.empty(o)||(i=2e3+(t.priority||0),r>=t.minBandwidth?i+=t.minBandwidth:i+=1/t.minBandwidth)),I.extend({score:i,video:o},t)})),a=I.max(i,(function(e){return e.score}));if(a.score>0){var o="g",s=a.minBandwidth;return s<=170?o="b":s>1536&&(o="c"),a.videoDefinition=t,a.definitionLevel=o,a}}((e.creative||{}).creativeObject,t,"f4v");if(n&&n.video){var r=n.video;return(r=r.split("?"))[0]}return""})):[]}return[]}(a,t.videoDefinition)),r({showResponse:a,playUrls:s,isMixer:!0,originRes:i,duration:Date.now()-n,isServer:We.isServer,vvId:t.vvId,requestId:t.requestId,cookies:o})}))["catch"]((function(e){i({vvId:t.vvId,isMixer:!0,requestId:t.requestId,error:e.type,message:e.message,duration:Date.now()-n})}))}))}(Ze(e),e)},Ze=function(e){var t=function(e){var t=Object.assign(e,{timestamp:Date.now(),adPlayerId:e.adPlayerId||"qc_100001_100226",isVIP:e.isVIP?1:0,isPreload:e.isPreload?5:0,usePartnerData:Ye(e.passportCookie,e.usePartnerData)?0:1,referrer:pe(e.referrer).host},e.playedInfo,e.continuingInfo),n=e.cuepointList;n&&n.length>0&&(1==n.length?t=Object.assign(t,n[0]):t.cuepointType=n.map((function(e){return e.cuepointType})).join(","));We.isServer&&(t.g=e.ip,t.sdkVersion="8.7.0-mars",t.vvId=(r=e.episodeId,i=e.uaaUserId,H([r,i,Date.now(),Math.random()].join(""))),t.requestId=e.requestId=H([e.vvId,Date.now()].join("")),t.vft="",t.needPolicy=1,t.continuingVideoPlayedCount=0,t.continuingVideoPlayedDuration=0,t.continuingAdPlayedDuration=0,t.cuepointType="1,15",e.adPlayerId&&(t.couponCode=e.couponCode,t.couponVer=e.couponVer));var r,i;t.i="pcw",1==t.needPolicy&&(t.fa="0,2,3,6,10,11,13,15,114");return t}(e),n=function(e){return te(Ke,e)}(t),r=function(e,t){var n=We.isServer?"http://api.cupid.qiyi.smart":"https://t7z.cupid.iqiyi.com",r="/mixer",i=function(e){var t=Q(e,!0).query,n="w y z".split(" "),r=I.only(t,n);if(I.keys(r).length==n.length)return r}(t.origin||t.url);if(i){var a=i.w;e=Object.assign({},{pv:a},e)}return n+r+"?"+$(e)}(n,e);return r};var et=function(e){return e.adPlayerId&&e.couponCode&&(e.couponCode=H(e.adPlayerId+e.url+"iqiyi-cupid")),Xe(e)}}).call(this,n(994))},function(e){e.exports=JSON.parse('{"name":"@iqiyi-ad-fe/cupid-mars","version":"8.7.3","description":"cupid beta sdk for PCW","directories":{"example":"examples"},"publishConfig":{"registry":"http://jfrog.cloud.qiyi.domain:80/api/npm/npm/"},"main":"./dist/mars.js","private":true,"scripts":{"clean":"rm -rf ../dist","dev":"webpack --inline --progress --mode development --config webpack.config.js --colors --watch","eslint":"./node_modules/.bin/eslint","lint":"npm run eslint core && npm run eslint view && echo \'perfect!\'","build":"npm run clean && npm run lint && webpack"},"author":"heke","devDependencies":{"@babel/cli":"^7.4.4","@babel/core":"^7.4.5","@babel/polyfill":"^7.4.4","@babel/plugin-syntax-dynamic-import":"^7.2.0","@babel/plugin-transform-new-target":"^7.12.1","@babel/plugin-transform-runtime":"^7.5.5","@babel/preset-env":"^7.4.5","@babel/plugin-transform-modules-commonjs":"^7.1.0","babel-plugin-transform-es5-property-mutators":"^6.24.1","babel-eslint":"^10.0.2","babel-loader":"^8.0.5","css-loader":"^2.1.1","core-js":"^3.1.3","eslint":"^6.0.1","less":"^3.9.0","less-loader":"^5.0.0","style-loader":"^0.23.1","webpack":"^4.29.6","webpack-cli":"^3.3.0","yarn":"^1.15.2"},"browserslist":["chrome >= 34","safari >= 8","firefox >= 42","edge >= 12"],"dependencies":{"@iqiyi-ad-fe/cupid-pingback":"0.0.4","@iqiyi-ad-fe/cupid-show":"2.1.0","@iqiyi-ad-fe/cupid-vast-parser":"0.0.1","@iqiyi-ad-fe/min-utils":"^1.0.1","@iqiyi-pcw-player/shared-utils":"^1.0.67","animejs":"^3.2.1","es6-promise":"^4.2.8","html-loader":"^0.5.5","qr-code-with-logo":"^1.1.0"}}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a);n(30),n(44),n(17),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(35),n(133);function s(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:50,n=0,r=null;null===r;)try{n++,r=new Uint8Array(e)}catch(i){if(n>t)throw"alloc_memory_error@new: ".concat(i.message,", ").concat(e)}return r}var u=function(){function e(){i()(this,e),this.byteLength=0,this.list_=[]}return o()(e,[{key:"bytes",get:function(){var e=this.list_,t=e.length,n=null;return 1===t?n=e[0]:t>1&&(n=this.toNewBytes()),n}},{key:"empty",get:function(){return 0===this.list_.length}},{key:"bufferList",get:function(){return this.list_}},{key:"clear",value:function(){var e=this.list_.length;e>0&&this.list_.splice(0,e),this.byteLength=0}},{key:"toNewBytes",value:function(){for(var e=this.list_,t=e.length,n=s(this.byteLength),r=0,i=0;r<t;r++){var a=e[r];n.set(a,i),i+=a.byteLength}return n}},{key:"append",value:function(t){var n=this.list_;if(t instanceof e){n=this.list_=n.concat(t.bufferList);for(var r,i=0;i<n.length;i++)r=n[i],this.byteLength+=r.byteLength}else n.push(t),this.byteLength+=t.byteLength}},{key:"cut",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n=null;if(e>0&&!this.empty){for(var r=this.list_,i=0,a=0;r.length>0;){var o=r.shift();if(0!==a){var s=e-i;if(o.byteLength>=s){t&&n.set(o.subarray(0,s),i),(o=o.subarray(s)).byteLength>0&&r.unshift(o);break}t&&n.set(o,i),i+=o.byteLength;break}if(o.byteLength>=e){t&&(n=o.subarray(0,e)),o.byteLength>e&&(o=o.subarray(e),r.unshift(o));break}if(t){try{n=new Uint8Array(e)}catch(u){throw"alloc_memory_error@cut: ".concat(e," ").concat(u.message)}n.set(o,0)}i+=o.byteLength,a++}this.byteLength-=e}return n}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(136);function r(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,r=0,i="",a=t;a<t+n;a++)r=7-a%8,i+=e[Math.floor(a/8)]>>r&1;return parseInt(i,2)}function i(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=[],r=8*e.byteLength,i=!1,a=0,o=0,s="",u=t;u<r;u++)if(a=7-u%8,o=e[Math.floor(u/8)]>>a&1,!i){if(0!==o){i=!0,t=u;break}n.push(0)}for(var c=n.length+1,l=t;l<t+c;l++)a=7-l%8,s+=o=e[Math.floor(l/8)]>>a&1;return{bitLength:n.length+c,value:parseInt(s,2)-1}}var a={readUEV:i,readSEV:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=i(e,t),r=n.value,a=Math.pow(-1,r+1)*Math.ceil(r/2);return{bitLength:n.bitLength,value:a}},readBit:r,readByte:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return r(e,t,8)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a);n(339),n(44),n(17);function s(e){var t=0;return ArrayBuffer.isView(e)&&(t=e.byteOffset,e=e.buffer),new DataView(e,t)}var u=function(){function e(){i()(this,e)}return o()(e,[{key:"readUint32",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return s(e).getUint32(t,n)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(450),i=n.n(r),a=(n(35),n(456)),o=n(804),s=n(532),u=n(535);function c(e,t){var n=u.a.MUX_UNKNOWN_FAILED,r=a.a.CRITICAL;switch(e){case 0:n=u.a.MUX_WORKER_INTERNAL_EXCEPTION,r=a.a.RECOVERABLE;break;case 1:n=u.a.MUX_WORKER_MESSAGE_EXCEPTION;break;default:n=e}for(var c=arguments.length,l=new Array(c>2?c-2:0),d=2;d<c;d++)l[d-2]=arguments[d];return i()(o.a,[r,s.a.MUX,n,t].concat(l))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(17),n(23);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var p=function(e){u()(n,e);var t=h(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).container="",r.codec="",r.trackId=null,r}return i()(n)}(n(452).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(17),n(23);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(8),u=n.n(s),c=n(9),l=n.n(c),d=n(3),f=n.n(d);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var p=function(e){u()(n,e);var t=h(n);function n(e){return o()(this,n),t.call(this,e)}return i()(n)}(n(452).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(121);var r=n(152);function i(e){var t={};if(Array.isArray(e))for(var n="boxes",a=0;a<e.length;a++){var o=e[a],s=o.type,u=t,c=i(o.boxes);switch(o.type){case"trak":u=t[c.handlerType+"Track"]={};break;case"hdlr":t.handlerType=o.handlerType}Object(r.e)(o,n)&&Object.assign(u,c),"trak"!==o.type&&(t[s]=o)}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(217),n(154),n(70),n(149),n(17),n(88),n(191);var r=/^(b|B)$/,i={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(isNaN(e))return"";var n=[],o=0,s=!0===t.bits,u=!0===t.unix,c=t.base||2,l=void 0!==t.round?t.round:u?1:2,d=void 0!==t.separator&&t.separator||"",f=void 0!==t.spacer?t.spacer:"",h=t.symbols||t.suffixes||{},p=2===c&&t.standard||"jedec",v=t.output||"string",y=!0===t.fullform,g=t.fullforms instanceof Array?t.fullforms:[],m=void 0!==t.exponent?t.exponent:-1,_=Number(e),b=_<0,x=c>2?1e3:1024;return b&&(_=-_),(-1===m||isNaN(m))&&(m=Math.floor(Math.log(_)/Math.log(x)))<0&&(m=0),m>8&&(m=8),0===_?(n[0]=0,n[1]=u?"":i[p][s?"bits":"bytes"][m]):(o=_/(2===c?Math.pow(2,10*m):Math.pow(1e3,m)),s&&(o*=8)>=x&&m<8&&(o/=x,m++),n[0]=Number(o.toFixed(m>0?l:0)),n[1]=10===c&&1===m?s?"kb":"kB":i[p][s?"bits":"bytes"][m],u&&(n[1]="jedec"===p?n[1].charAt(0):m>0?n[1].replace(/B$/,""):n[1],r.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),b&&(n[0]=-n[0]),n[1]=h[n[1]]||n[1],"array"===v?n:"exponent"===v?m:"object"===v?{value:n[0],suffix:n[1],symbol:n[1]}:(y&&(n[1]=g[m]?g[m]:a[p][m]+(s?"bit":"byte")+(1===n[0]?"":"s")),d.length>0&&(n[0]=n[0].toString().replace(".",d)),n.join(f))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(105),i=n.n(r),a=n(4),o=n.n(a),s=n(5),u=n.n(s);n(17),n(88),n(70),n(149),n(159),n(111),n(35),n(191),n(408),n(344),n(217);function c(e){var t=e.charCodeAt(0);return"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function l(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")}function d(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];if("string"==typeof e){var r=encodeURI(e).replace(t,c);return n&&(r=l(r)),r}return null}var f=function(){function e(t){o()(this,e),this.encodedQuery_=t||null,this.count_=null}return u()(e,[{key:"ensureKeyMapInitialized_",value:function(){this.keyMap_||(this.keyMap_={},this.count_=0,this.encodedQuery_&&this.deserialized_(this.encodedQuery_))}},{key:"deserialized_",value:function(e){for(var t=(e=e.replace(/^&/,"")).split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null,a=null;r>=0?(i=t[n].substring(0,r),a=t[n].substring(r+1)):i=t[n],i=decodeURIComponent(i.replace(/\+/g," ")),a=a||"",this.add(i,decodeURIComponent(a.replace(/\+/g," ")))}}},{key:"getCount",value:function(){return this.ensureKeyMapInitialized_(),this.count_}},{key:"add",value:function(e,t){if(1===arguments.length)this.deserialized_(e);else{this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var n=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];n||(this.keyMap_[e]=n=[]),n.push(t),this.count_++}return this}},{key:"update",value:function(e,t){return this.ensureKeyMapInitialized_(),this.encodedQuery_=null,(this.keyMap_[e]=[]).push(t),this}},{key:"get",value:function(e){return this.ensureKeyMapInitialized_(),this.keyMap_[e]}},{key:"clone",value:function(){var t=new e;if(t.encodedQuery_=this.encodedQuery_,this.keyMap_){var n={};for(var r in this.keyMap_)n[r]=this.keyMap_[r].concat();t.keyMap_=n,t.count_=this.count_}return t}},{key:"toString",value:function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e=[];for(var t in this.keyMap_)for(var n=encodeURIComponent(t),r=this.keyMap_[t],i=0;i<r.length;i++){var a=n;a+="="+encodeURIComponent(r[i]),e.push(a)}return this.encodedQuery_=e.join("&")}},{key:"toDecodedString",value:function(){return h.decodeOrEmpty(this.toString())}}]),e}(),h=function(){function e(t){var n;o()(this,e),this._scheme="",this._domain="",this._port=null,this._userInfo="",this._path="",this._query=new f,this._hash="",this._reDisallowedInQuery=/[\#\?@]/g,this._reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,this._reDisallowedInRelativePath=/[\#\?:]/g,this._reDisallowedInAbsolutePath=/[\#\?]/g,this._reDisallowedInFragment=/#/g,"object"===i()(t)&&t instanceof e?(this.setScheme(t.scheme),this.setUserInfo(t.userInfo),this.setDomain(t.domain),this.setPort(t.port),this.setPath(t.path),this.setQueryData(t.query.clone()),this.setHash(t.hash)):t&&(n=this.split(String(t)))?(this.setScheme(n[1]||"",!0),this.setUserInfo(n[2]||"",!0),this.setDomain(n[3]||"",!0),this.setPort(n[4]),this.setPath(n[5]||"",!0),this.setQueryData(n[6]||"",!0),this.setHash(n[7]||"",!0)):this._query=new f(null)}return u()(e,[{key:"scheme",get:function(){return this._scheme}},{key:"domain",get:function(){return this._domain}},{key:"port",get:function(){return this._port}},{key:"userInfo",get:function(){return this._userInfo}},{key:"path",get:function(){return this._path}},{key:"hash",get:function(){return this._hash}},{key:"query",get:function(){return this._query}},{key:"setScheme",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._scheme=n?e.decodeOrEmpty(t,!0):t,this._scheme&&(this._scheme=this._scheme.replace(/:$/,"")),this}},{key:"toString",value:function(){var e=[],t=this.scheme;t&&e.push(d(t,this._reDisallowedInSchemeOrUserInfo,!0),":");var n=this.getDomain();if(n){e.push("//");var r=this.userInfo;r&&e.push(d(r,this._reDisallowedInSchemeOrUserInfo,!0),"@"),e.push(l(encodeURIComponent(n)));var i=this.port;null!=i&&e.push(":",String(i))}var a=this.path;a&&(this.hasDomain()&&"/"!=a.charAt(0)&&e.push("/"),e.push(d(a,"/"==a.charAt(0)?this._reDisallowedInAbsolutePath:this._reDisallowedInRelativePath,!0)));var o=this.getEncodedQuery();o&&e.push("?",o);var s=this.hash;return s&&e.push("#",d(s,this._reDisallowedInFragment)),e.join("")}},{key:"clone",value:function(){return new e(this.toString())}},{key:"split",value:function(e){var t=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");return e.match(t)}},{key:"setUserInfo",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._userInfo=n?e.decodeOrEmpty(t):t,this}},{key:"hasDomain",value:function(){return!!this._domain}},{key:"setDomain",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._domain=n?e.decodeOrEmpty(t,!0):t,this}},{key:"getDomain",value:function(){return this._domain}},{key:"setPort",value:function(e){if(e){var t=Number(e);if(isNaN(t)||t<0)throw Error("Bad port number "+t);this._port=t}else this._port=null;return this}},{key:"setPath",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._path=n?e.decodeOrEmpty(t,!0):t,this}},{key:"setQueryData",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return"object"===i()(e)&&e instanceof f?this._query=e:(t||(e=d(e,this._reDisallowedInQuery)),this._query=new f(e)),this}},{key:"getEncodedQuery",value:function(){return this._query.toString()}},{key:"setHash",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._hash=n?e.decodeOrEmpty(t):t,this}}],[{key:"decodeOrEmpty",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return e?t?decodeURI(e):decodeURIComponent(e):""}}]),e}()},function(e,t,n){var r=n(219),i=n(810),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(i.call(a))},function(e,t,n){var r=n(219),i=n(642),a=n(685),o=n(310),s=r.Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(363),i=n(347),a=n(310),o=n(644);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){"use strict";var r=n(463),i=n(285),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(815),i={};i[n(260)("toStringTag")]="z",e.exports="[object z]"!==String(i)?function(){return"[object "+r(this)+"]"}:i.toString},function(e,t,n){var r=n(443);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(792),i=n(219),a=function(e){return"function"==typeof e?e:undefined};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(310),i=n(1031),a=n(348),o=n(793),s=n(1032),u=n(1033),c={};(e.exports=function(e,t,n,l,d){var f,h,p,v,y,g=o(t,n,l?2:1);if(d)f=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,v=a(e.length);v>p;p++)if((l?g(r(y=e[p])[0],y[1]):g(e[p]))===c)return c;return}f=h.call(e)}for(;!(y=f.next()).done;)if(u(f,g,y.value,l)===c)return c}).BREAK=c},function(e,t,n){var r=n(260),i=n(645),a=r("iterator"),o=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||o[a]===e)}},function(e,t,n){var r=n(815),i=n(645),a=n(260)("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(310);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(o){var a=e["return"];throw a!==undefined&&r(a.call(e)),o}}},function(e,t,n){var r=n(260)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},"return":function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},function(e,t,n){var r,i,a,o,s,u,c,l=n(219),d=n(634).f,f=n(442),h=n(818).set,p=n(819),v=l.MutationObserver||l.WebKitMutationObserver,y=l.process,g=l.Promise,m="process"==f(y),_=d(l,"queueMicrotask"),b=_&&_.value;b||(r=function(){var e,t;for(m&&(e=y.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():a=undefined,n}}a=undefined,e&&e.enter()},m?o=function(){y.nextTick(r)}:v&&!/(iphone|ipod|ipad).*applewebkit/i.test(p)?(s=!0,u=document.createTextNode(""),new v(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s}):g&&g.resolve?(c=g.resolve(undefined),o=function(){c.then(r)}):o=function(){h.call(l,r)}),e.exports=b||function(e){var t={fn:e,next:undefined};a&&(a.next=t),i||(i=t,o()),a=t}},function(e,t,n){var r=n(310),i=n(285),a=n(820);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(219);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){var r=n(644),i=n(685),a=n(682);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),u=a.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){var r=n(441),i=n(642).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(824).IteratorPrototype,i=n(643),a=n(635),o=n(687),s=n(645),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,c,!1,!0),s[c]=u,e}},function(e,t,n){var r=n(259);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(285),i=n(310);e.exports=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}},function(e,t,n){var r=n(463),i=n(421),a=n(636),o=n(348);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=a(c),d=o(c.length),f=u?d-1:0,h=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=h;break}if(f+=h,u?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:d>f;f+=h)f in l&&(s=t(s,l[f],f,c));return s}},function(e,t,n){"use strict";var r=n(688),i=n(537),a=r(0),o=i("forEach");e.exports=o?function(e){return a(this,e,arguments[1])}:[].forEach},function(e,t,n){"use strict";var r=n(363),i=n(259),a=n(644),o=n(685),s=n(682),u=n(421),c=n(636),l=Object.assign;e.exports=!l||i((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||a(l({},t)).join("")!=r}))?function(e,t){for(var n=u(e),i=arguments.length,l=1,d=o.f,f=s.f;i>l;)for(var h,p=c(arguments[l++]),v=d?a(p).concat(d(p)):a(p),y=v.length,g=0;y>g;)h=v[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:l},function(e,t,n){var r=n(196),i=n(831),a=n(259),o=n(285),s=n(1048).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){u(1)})),sham:!i},{freeze:function(e){return u&&o(e)?u(s(e)):e}})},function(e,t,n){var r=n(641),i=n(285),a=n(346),o=n(347).f,s=n(684),u=n(831),c=s("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(e){o(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&d(e)&&!a(e,c)&&f(e),e}};r[c]=!0},function(e,t,n){"use strict";var r=n(363),i=n(219),a=n(686),o=n(443),s=n(346),u=n(442),c=n(829),l=n(637),d=n(259),f=n(643),h=n(642).f,p=n(634).f,v=n(347).f,y=n(696),g="Number",m=i.Number,_=m.prototype,b=u(f(_))==g,x="trim"in String.prototype,k=function(e){var t,n,r,i,a,o,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=x?c.trim():y(c,3)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>i)return NaN;return parseInt(a,r)}return+c};if(a(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var w,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(b?d((function(){_.valueOf.call(n)})):u(n)!=g)?c(new m(k(t)),n,S):k(t)},T=r?h(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;T.length>P;P++)s(m,w=T[P])&&!s(S,w)&&v(S,w,p(m,w));S.prototype=_,_.constructor=S,o(i,g,S)}},function(e,t,n){var r=n(219),i=n(696),a=n(697),o=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==o(a+"08")||22!==o(a+"0x16");e.exports=u?function(e,t){var n=i(String(e),3);return o(n,t>>>0||(s.test(n)?16:10))}:o},function(e,t,n){var r=n(259),i=n(697);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t,n){var r=n(219),i=n(696),a=n(697),o=r.parseFloat,s=1/o(a+"-0")!=-Infinity;e.exports=s?function(e){var t=i(String(e),3),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){var r=n(352)["default"];function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new P(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=d;var h={};function p(){}function v(){}function y(){}var g={};l(g,s,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(E([])));_&&_!==n&&a.call(_,s)&&(g=_);var b=y.prototype=p.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,s,u){var c=f(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(undefined===n){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=undefined,w(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:undefined,done:!0}}return v.prototype=y,l(b,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},x(k.prototype),l(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(d(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=undefined)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=undefined),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(797),i=n(310),a=n(348),o=n(462),s=n(798),u=n(799);r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),c=String(this);if(!o.global)return u(o,c);var l=o.unicode;o.lastIndex=0;for(var d,f=[],h=0;null!==(d=u(o,c));){var p=String(d[0]);f[h]=p,""===p&&(o.lastIndex=s(c,a(o.lastIndex),l)),h++}return 0===h?null:f}]}))},function(e,t,n){var r=n(196),i=n(1056);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){"use strict";var r=n(441),i=n(536),a=n(348),o=n(537),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0,c=o("lastIndexOf");e.exports=u||c?function(e){if(u)return s.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=Math.min(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:s},function(e,t,n){var r=n(196),i=n(363);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(347).f})},function(e,t,n){n(196)({global:!0},{globalThis:n(219)})},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(22),n(34);var r=n(14),i=n.n(r),a=n(15),o=n.n(a),s=n(119),u=n.n(s),c=n(20),l=n.n(c),d=n(21),f=n.n(d),h=n(10),p=n.n(h),v=(n(74),n(32),n(714),n(716),n(718),n(33)),y=n(1),g=n(150),m=n(465),_=n(6),b=n(466),x=n(678),k=n(0),w=n(338),S=n(26),T=(n(329),n(352)),P=n.n(T),E=n(125),A=n.n(E),I=n(126),D=n.n(I),L=n(197),O=n.n(L),R=n(198),C=n.n(R),M=n(151),B=n.n(M),N=(n(330),n(331),n(206),n(335),n(364),n(311),n(336),n(538),n(539),function(){function e(){A()(this,e)}return D()(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this}},{key:"once",value:function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this}},{key:"off",value:function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this}},{key:"listeners",value:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]}},{key:"hasListeners",value:function(e){return!!this.listeners(e).length}}]),e}());N.prototype.addEventListener=N.prototype.on,N.prototype.removeEventListener=N.prototype.off;n(689),n(690),n(691),n(422),n(540),n(444),n(464),n(229),n(304),n(277),n(541),n(542),n(445),n(543),n(528),n(544);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}var q=Object.prototype,j=function(e){var t=q.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},U=function(e){return F(e)},V=function(e,t){return q.hasOwnProperty.call(e,t)},H=function(e){return e==Infinity||e==-Infinity},z=function(e){return!isNaN(e)&&"number"==j(e)},G=function(e){return!(!z(e)||H(e))},W=function(e){return!!G(e)&&0==e%1},K=function(e){if(e){var t=U(e);return"object"==t||"function"==t}return!1},$=function(e){return K(e)&&"function"!=j(e)},Y=function(e){return!(!e||"object"!=j(e))&&(!e.nodeType&&!e.setInterval)},Q=function(e){return"string"==j(e)},J=function(e){if(!X(e)&&$(e)){var t=e.length;if(W(t)&&t>=0)return!0}return!1},X=function(e){return!(!e||e.window!=e)},Z={_class:j,_type:U,owns:V,nan:function(e){return e!=e},bool:function(e){return"boolean"==j(e)},infinite:H,number:z,iod:G,decimal:function(e){return!!G(e)&&0!=e%1},integer:W,oof:K,object:$,hash:Y,plainObject:Y,undef:function(e){return"undefined"==U(e)},fn:function(e){return"function"==j(e)},string:Q,nos:function(e){return G(e)||Q(e)},array:function(e){return"array"==j(e)},arraylike:J,window:X,empty:function(e){if(Q(e)||J(e))return 0===e.length;if(Y(e))for(var t in e)if(V(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==j(e)}},ee=function(){var e={};e.is=Z,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){l(t,(function(t,n){Z.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=c,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=u,e.includes=function(e,t){return-1!=u(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),Z.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=l,e.keys=function(e){var t=[];return l(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return l(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&Z.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function u(e,t){return Z.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function c(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function l(e,t){if(e)for(var n in e)if(Z.owns(e,n)&&!1===t(e[n],n,e))break;return e}function d(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return l(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return d(e).toLowerCase()},e.upper=function(e){return d(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==u(e,t)},e.tostr=d,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&Z.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},Z.string(t)&&(t=t.split(/ +/)),c(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return l(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=d(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){Z.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return Z.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},l(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,u=Date.now();function c(){return!(u-o>n)&&!(a&&u-s>a)}function l(e,t,n){return o=Date.now(),e.apply(t,n)}function d(){i&&(clearTimeout(i),i=null)}function f(){u=Date.now();var e=c();s=u;var a=this,o=arguments;d(),e?r.trailing&&(i=setTimeout((function(){l(t,a,o)}),n)):l(t,a,o)}return r.leading||(o=u),f.cancel=d,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(Z.array(e))return e;var t=[];return d(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}(),te=function(e){var t;e=ee.tostr(e);for(var n=[],r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n.push(t):t<2048?n.push(192|t>>6,128|63&t):t<55296||t>=57344?n.push(224|t>>12,128|t>>6&63,128|63&t):n.push(239,191,189);return n},ne=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){if((n=e[i])>224)r=(15&n)<<12,r|=(63&(n=e[++i]))<<6,r|=63&(n=e[++i]);else if(n>192)r=(31&n)<<6,r|=(63&(n=e[++i]))<<6;else{if(n>128)throw new Error("InvalidCharacterError");r=n}t.push(String.fromCharCode(r))}return t.join("")};function re(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ie(e,t,n,r,i,a){return re((o=re(re(t,e),re(r,a)))<<(s=i)|o>>>32-s,n);var o,s}function ae(e,t,n,r,i,a,o){return ie(t&n|~t&r,e,t,i,a,o)}function oe(e,t,n,r,i,a,o){return ie(t&r|n&~r,e,t,i,a,o)}function se(e,t,n,r,i,a,o){return ie(t^n^r,e,t,i,a,o)}function ue(e,t,n,r,i,a,o){return ie(n^(t|~r),e,t,i,a,o)}function ce(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,o,s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)r=s,i=u,a=c,o=l,s=ae(s,u,c,l,e[n],7,-680876936),l=ae(l,s,u,c,e[n+1],12,-389564586),c=ae(c,l,s,u,e[n+2],17,606105819),u=ae(u,c,l,s,e[n+3],22,-1044525330),s=ae(s,u,c,l,e[n+4],7,-176418897),l=ae(l,s,u,c,e[n+5],12,1200080426),c=ae(c,l,s,u,e[n+6],17,-1473231341),u=ae(u,c,l,s,e[n+7],22,-45705983),s=ae(s,u,c,l,e[n+8],7,1770035416),l=ae(l,s,u,c,e[n+9],12,-1958414417),c=ae(c,l,s,u,e[n+10],17,-42063),u=ae(u,c,l,s,e[n+11],22,-1990404162),s=ae(s,u,c,l,e[n+12],7,1804603682),l=ae(l,s,u,c,e[n+13],12,-40341101),c=ae(c,l,s,u,e[n+14],17,-1502002290),s=oe(s,u=ae(u,c,l,s,e[n+15],22,1236535329),c,l,e[n+1],5,-165796510),l=oe(l,s,u,c,e[n+6],9,-1069501632),c=oe(c,l,s,u,e[n+11],14,643717713),u=oe(u,c,l,s,e[n],20,-373897302),s=oe(s,u,c,l,e[n+5],5,-701558691),l=oe(l,s,u,c,e[n+10],9,38016083),c=oe(c,l,s,u,e[n+15],14,-660478335),u=oe(u,c,l,s,e[n+4],20,-405537848),s=oe(s,u,c,l,e[n+9],5,568446438),l=oe(l,s,u,c,e[n+14],9,-1019803690),c=oe(c,l,s,u,e[n+3],14,-187363961),u=oe(u,c,l,s,e[n+8],20,1163531501),s=oe(s,u,c,l,e[n+13],5,-1444681467),l=oe(l,s,u,c,e[n+2],9,-51403784),c=oe(c,l,s,u,e[n+7],14,1735328473),s=se(s,u=oe(u,c,l,s,e[n+12],20,-1926607734),c,l,e[n+5],4,-378558),l=se(l,s,u,c,e[n+8],11,-2022574463),c=se(c,l,s,u,e[n+11],16,1839030562),u=se(u,c,l,s,e[n+14],23,-35309556),s=se(s,u,c,l,e[n+1],4,-1530992060),l=se(l,s,u,c,e[n+4],11,1272893353),c=se(c,l,s,u,e[n+7],16,-155497632),u=se(u,c,l,s,e[n+10],23,-1094730640),s=se(s,u,c,l,e[n+13],4,681279174),l=se(l,s,u,c,e[n],11,-358537222),c=se(c,l,s,u,e[n+3],16,-722521979),u=se(u,c,l,s,e[n+6],23,76029189),s=se(s,u,c,l,e[n+9],4,-640364487),l=se(l,s,u,c,e[n+12],11,-421815835),c=se(c,l,s,u,e[n+15],16,530742520),s=ue(s,u=se(u,c,l,s,e[n+2],23,-995338651),c,l,e[n],6,-198630844),l=ue(l,s,u,c,e[n+7],10,1126891415),c=ue(c,l,s,u,e[n+14],15,-1416354905),u=ue(u,c,l,s,e[n+5],21,-57434055),s=ue(s,u,c,l,e[n+12],6,1700485571),l=ue(l,s,u,c,e[n+3],10,-1894986606),c=ue(c,l,s,u,e[n+10],15,-1051523),u=ue(u,c,l,s,e[n+1],21,-2054922799),s=ue(s,u,c,l,e[n+8],6,1873313359),l=ue(l,s,u,c,e[n+15],10,-30611744),c=ue(c,l,s,u,e[n+6],15,-1560198380),u=ue(u,c,l,s,e[n+13],21,1309151649),s=ue(s,u,c,l,e[n+4],6,-145523070),l=ue(l,s,u,c,e[n+11],10,-1120210379),c=ue(c,l,s,u,e[n+2],15,718787259),u=ue(u,c,l,s,e[n+9],21,-343485551),s=re(s,r),u=re(u,i),c=re(c,a),l=re(l,o);return[s,u,c,l]}function le(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function de(e){var t,n=[];for(n[(e.length>>2)-1]=undefined,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function fe(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function he(e){return unescape(encodeURIComponent(e))}function pe(e){return function(e){return le(ce(de(e),8*e.length))}(he(e))}function ve(e,t){return function(e,t){var n,r,i=de(e),a=[],o=[];for(a[15]=o[15]=undefined,i.length>16&&(i=ce(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=ce(a.concat(de(t)),512+8*t.length),le(ce(o.concat(r),640))}(he(e),he(t))}function ye(e,t,n){return t?n?ve(t,e):fe(ve(t,e)):n?pe(e):fe(pe(e))}var ge=ee.is,me={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[undefined]};function _e(e,t,n){return n=ee.find(arguments,(function(e){return ge.object(e)})),e=ge.nos(e)?e:undefined,t=ge.nos(t)?t:undefined,n=ee.extend({},me,n,{sep:e,eq:t})}var be=function(e,t,n,r){e+="";var i=(r=_e(t,n,r)).decode;return e=e.split(r.sep),ee.reduce(e,(function(e,t){if(2==(t=t.split(r.eq)).length){var n=t[0],a=t[1];if(!r.keepRaw)try{n=i(n),a=i(a)}catch(o){}e[n]=a}return e}),{})},xe=function(e,t,n,r){r=_e(t,n,r);var i=ee.keys(e),a=r.sort;a&&(ge.fn(a)?i.sort(a):i.sort());var o=r.encode,s=[];return ee.each(i,(function(t){var n=e[t];ee.includes(r.ignoreValues,n)||((ge.nan(n)||null==n)&&(n=""),r.keepRaw||(t=o(t),n=o(n)),s.push(t+r.eq+n))})),s.join(r.sep)};"http https ftp gopher file".split(" ");function ke(e,t){var n=[],r=ee.indexOf(e,t);return-1==r?n[0]=e:(n[0]=e.slice(0,r),n[1]=e.slice(r+t.length)),n}var we=function(e,t){if("string"!=typeof e)return e;var n,r,i={};i.href=e,r=(n=ke(e,"#"))[0],n[1]&&(i.hash="#"+n[1]),n=function(e,t){var n="";return e=e.replace(t,(function(e){return n=e,""})),[n,e]}(r,/^[a-zA-Z][a-zA-Z0-9+-.]*:/),r=n[1],i.protocol=n[0].toLowerCase(),r=(n=ke(r,"?"))[0];var a=n[1];if(t&&(a=be(a)),i.query=a,"/"!=r.charAt(0)&&i.schema)return i.opaque=r,i;ee.startsWith(r,"//")&&(n=ke(r=r.slice(2),"/"),i.pathname="/"+unescape(n[1]||""),n=function(e){var t=ke(e,"@"),n=t[0],r=t[1];r||(r=t[0],n=null);return[n,r]}(n[0]),i.auth=n[0],n=ke(n[1],":"),i.hostname=n[0],i.port=~~n[1]);return i};var Se=Oe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Te=Oe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function Pe(e,t){var n=Ee(e,t);return ne(n)}function Ee(e,t){var n=Se;((t=t||{}).useURL||null==t.useURL&&function(e){return/[-_]/.test(e)}(e))&&(n=Te),e=e.replace(/\s+$/,"").replace(/=+$/,"").replace(/[\n\r]/g,"");for(var r=ee.map(e.split(""),(function(e){return~~n.decodeMap[e]})),i=[],a=0;a<r.length;a+=4){var o=Le(ee.slice(r,a,a+4));i.push.apply(i,o)}return i}function Ae(e,t){return Ie(te(e),t)}function Ie(e,t){var n=Se;(t=t||{}).useURL&&(n=Te);for(var r=[],i=0;i<e.length;i+=3)r.push.apply(r,De(ee.slice(e,i,i+3)));return r=ee.map(r,(function(e){return n.encodeMap[e]||"="})),r.join("")}function De(e){var t=[];return null==e[2]?t[3]=64:t[3]=63&e[2],null==e[1]?t[2]=64:t[2]=(15&e[1])<<2|e[2]>>6,t[1]=(3&e[0])<<4|e[1]>>4,t[0]=e[0]>>2,t}function Le(e){var t=[];return null!=e[3]&&(t[2]=((3&e[2])<<6)+e[3]),null!=e[2]&&(t[1]=((15&e[1])<<4)+((60&e[2])>>2)),null!=e[1]&&(t[0]=(e[0]<<2)+((48&e[1])>>4)),t}function Oe(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:ee.invert(t)}}var Re={encode:Ae,btoa:Ae,decode:Pe,atob:Pe,encodeBytes:Ie,decodeToBytes:Ee},Ce=ee.is,Me={1:300,2:600,3:1126.4,4:1536,5:3072,10:8192,96:170},Be=ee.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Fe="contextName",qe=function(e){O()(n,e);var t=Ne(n);function n(e){var r;return A()(this,n),(r=t.call(this))[Fe]=e,r}return D()(n,[{key:"setParent",value:function(e){if(e){this[e[Fe]]=this.parent=e}}},{key:"getParentByName",value:function(e){for(var t=this;t;){if(t[Fe]==e)return t;t=t.parent}}},{key:"getVal",value:function(e){for(var t=this;t;){if(ee.has(t,e))return t[e];t=t.parent}}},{key:"getMultiVals",value:function(e){var t=this,n={};return ee.each(e,(function(e){n[e]=t.getVal(e)})),n}},{key:"getParam",value:function(){for(var e=this,t=6,n=[];t--&&e;)n.push(e),e=e.parent;return n.reverse(),n.unshift({}),ee.extend.apply(ee,n)}}]),n}(N);n(648);var je,Ue,Ve=function Gi(e,t,n,r){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return t&&function(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break}(t,(function(t,a){!n&&i(e,a)||(r&&"string"!=typeof t&&"boolean"!=typeof t?(e[a]||(e[a]={}),Gi(e[a],t,n,r)):e[a]=t)})),e},He={},ze={get:function(e,t){var n="";if((t=Ve({memory:!1},t,!0)).memory&&He.hasOwnProperty(e))n=He[e];else{if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var r=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);r&&(n=r[2]||"")}"string"==typeof n&&(n=decodeURIComponent(n)),t.memory&&(He[e]=n)}return n},set:function(e,t,n){n=n||{},t=encodeURIComponent(t);var r=n.expires;"number"==typeof n.expires&&(r=n.expires<=0?new Date(0):new Date).setTime(r.getTime()+n.expires),delete He[e],document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(r?"; expires="+r.toUTCString():"")+(n.domain?"; domain="+n.domain:"")},remove:function(e,t){(t=t||{}).expires=-1,this.set(e,"",t)}},Ge=(n(693),Object.prototype.toString),We=function(e){switch(Ge.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==P()(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(t){if(t instanceof TypeError)return"arguments"}return null===e?"null":e===undefined?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":P()(e)},Ke=+Date.now(),$e=window.document,Ye=/^(?:text|application)\/javascript/i,Qe=/^(?:text|application)\/xml/i,Je="application/json",Xe="text/html",Ze=/^\s*$/,et=function Wi(e){var t=dt({},e||{});for(je in Wi.settings)t[je]===undefined&&(t[je]=Wi.settings[je]);nt(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host);var n=t.dataType,r=/=\?/.test(t.url);if("jsonp"==n||r)return r||(t.url=st(t.url,t.jsonpCallback+"=?")),Wi.JSONP(t);t.url||(t.url=window.location.toString()),ut(t);var i,a=t.accepts[n],o={},s=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,u=Wi.settings.xhr();t.crossDomain||(o["X-Requested-With"]="XMLHttpRequest"),a&&(o.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),u.overrideMimeType&&u.overrideMimeType(a)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(o["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=dt(o,t.headers||{}),u.onreadystatechange=function(){if(4==u.readyState){clearTimeout(i);var e,r=!1;if(u.status>=200&&u.status<300||304==u.status||0==u.status&&"file:"==s){n=n||function(e){return e&&(e==Xe?"html":e==Je?"json":Ye.test(e)?"script":Qe.test(e)&&"xml")||"text"}(u.getResponseHeader("content-type")),e=u.responseText;try{"script"==n?(0,eval)(e):"xml"==n?e=u.responseXML:"json"==n&&(e=Ze.test(e)?null:JSON.parse(e))}catch(a){r=a}r?it(r,"parsererror",u,t):rt(e,u,t)}else it(null,"error",u,t)}};var c=!("async"in t)||t.async;for(Ue in u.open(t.type,t.url,c),t.headers)u.setRequestHeader(Ue,t.headers[Ue]);return!1===function(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===tt(t,n,"ajaxBeforeSend",[e,t]))return!1;tt(t,n,"ajaxSend",[e,t])}(u,t)?(u.abort(),!1):(t.timeout>0&&(i=setTimeout((function(){u.onreadystatechange=ot,u.abort(),it(null,"timeout",u,t)}),t.timeout)),u.send(t.data?t.data:null),u)};function tt(e,t,n,r){if(e.global)return!0}function nt(e){e.global&&0==et.active++&&tt(e)}function rt(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),tt(n),at(i,t,n)}function it(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),tt(r),at(t,n,r)}function at(e,t,n){var r=n.context;n.complete.call(r,t,e),tt(n),function(e){e.global&&!--et.active&&tt(e)}(n)}function ot(){}function st(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function ut(e){var t,n,r;"object"===We(e.data)&&(e.data=(t=e.data,(r=[]).add=function(e,t){this.push(ct(e)+"="+ct(t))},lt(r,t,n),r.join("&").replace("%20","+"))),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=st(e.url,e.data))}et.active=0,et.JSONP=function(e){if(!("type"in e))return et(e);var t,n="jsonp"+ ++Ke,r=$e.createElement("script"),i={abort:function(){r.parentNode&&r.parentNode.removeChild(r),n in window&&(window[n]=ot),at("abort",i,e)}},a=$e.getElementsByTagName("head")[0]||$e.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error(e,"error")}),window[n]=function(a){var o;clearTimeout(t),r.parentNode&&r.parentNode.removeChild(r),delete window[n],e.checkParserError&&(o=a,"object"!=P()(o)||"[object object]"!=Object.prototype.toString.call(o).toLowerCase()||o.length)?e.error(e,"parsererror"):rt(a,i,e)},ut(e),r.src=e.url.replace(/\?(.+)=\?/,"?$1="+n),a.insertBefore(r,a.firstChild),e.timeout>0&&(t=setTimeout((function(){i.abort(),at("timeout",i,e)}),e.timeout)),i},et.settings={type:"GET",beforeSend:ot,success:ot,error:ot,complete:ot,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:Je,xml:"application/xml, text/xml",html:Xe,text:"text/plain"},crossDomain:!1,timeout:0,checkParserError:!1},et.get=function(e,t){return et({url:e,success:t})},et.post=function(e,t,n,r){return"function"===We(t)&&(r=r||n,n=t,t=null),et({type:"POST",url:e,data:t,success:n,dataType:r})},et.getJSON=function(e,t){return et({url:e,success:t,dataType:"json"})};var ct=encodeURIComponent;function lt(e,t,n,r){var i="array"===We(t);for(var a in t){var o=t[a];r&&(a=n?r:r+"["+(i?"":a)+"]"),!r&&i?e.add(o.name,o.value):(n?"array"===We(o):"object"===We(o))?lt(e,o,n,a):e.add(a,o)}}function dt(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach((function(t){for(je in t)t[je]!==undefined&&(e[je]=t[je])})),e}var ft=et;n(830),n(694),n(1047);function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}var pt=Object.prototype,vt=function(e){var t=pt.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},yt=function(e){return ht(e)},gt=function(e,t){return pt.hasOwnProperty.call(e,t)},mt=function(e){return e==Infinity||e==-Infinity},_t=function(e){return!isNaN(e)&&"number"==vt(e)},bt=function(e){return!(!_t(e)||mt(e))},xt=function(e){return!!bt(e)&&0==e%1},kt=function(e){if(e){var t=yt(e);return"object"==t||"function"==t}return!1},wt=function(e){return kt(e)&&"function"!=vt(e)},St=function(e){return!(!e||"object"!=vt(e))&&(!e.nodeType&&!e.setInterval)},Tt=function(e){return"string"==vt(e)},Pt=function(e){if(!Et(e)&&wt(e)){var t=e.length;if(xt(t)&&t>=0)return!0}return!1},Et=function(e){return!(!e||e.window!=e)},At={_class:vt,_type:yt,owns:gt,nan:function(e){return e!=e},bool:function(e){return"boolean"==vt(e)},infinite:mt,number:_t,iod:bt,decimal:function(e){return!!bt(e)&&0!=e%1},integer:xt,oof:kt,object:wt,hash:St,plainObject:St,undef:function(e){return"undefined"==yt(e)},fn:function(e){return"function"==vt(e)},string:Tt,nos:function(e){return bt(e)||Tt(e)},array:function(e){return"array"==vt(e)},arraylike:Pt,window:Et,empty:function(e){if(Tt(e)||Pt(e))return 0===e.length;if(St(e))for(var t in e)if(gt(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==vt(e)}},It=function(){var e={};e.is=At,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){l(t,(function(t,n){At.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=c,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=u,e.includes=function(e,t){return-1!=u(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),At.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=l,e.keys=function(e){var t=[];return l(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return l(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&At.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function u(e,t){return At.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function c(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function l(e,t){if(e)for(var n in e)if(At.owns(e,n)&&!1===t(e[n],n,e))break;return e}function d(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return l(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return d(e).toLowerCase()},e.upper=function(e){return d(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==u(e,t)},e.tostr=d,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&At.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},At.string(t)&&(t=t.split(/ +/)),c(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return l(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=d(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){At.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return At.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},l(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,u=Date.now();function c(){return!(u-o>n)&&!(a&&u-s>a)}function l(e,t,n){return o=Date.now(),e.apply(t,n)}function d(){i&&(clearTimeout(i),i=null)}function f(){u=Date.now();var e=c();s=u;var a=this,o=arguments;d(),e?r.trailing&&(i=setTimeout((function(){l(t,a,o)}),n)):l(t,a,o)}return r.leading||(o=u),f.cancel=d,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(At.array(e))return e;var t=[];return d(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}();var Dt=It.is,Lt={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[undefined]};function Ot(e,t,n){return n=It.find(arguments,(function(e){return Dt.object(e)})),e=Dt.nos(e)?e:undefined,t=Dt.nos(t)?t:undefined,n=It.extend({},Lt,n,{sep:e,eq:t})}var Rt=function(e,t,n,r){r=Ot(t,n,r);var i=It.keys(e),a=r.sort;a&&(Dt.fn(a)?i.sort(a):i.sort());var o=r.encode,s=[];return It.each(i,(function(t){var n=e[t];It.includes(r.ignoreValues,n)||((Dt.nan(n)||null==n)&&(n=""),r.keepRaw||(t=o(t),n=o(n)),s.push(t+r.eq+n))})),s.join(r.sep)};"http https ftp gopher file".split(" ");Ct("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ct("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function Ct(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:It.invert(t)}}It.is,It.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));var Mt=It.curry((function Ki(e,t){var n={};e&&t&&It.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(At.object(i)){var a=i.type||function(e){return At._class(e)}(t),o=i.name;"object"==a?n[o]=Ki(i.child,t):"array"==a&&(n[o]=It.map(t,(function(e){return Ki(i.child,e)})))}else n[i]=t}));return n}));var Bt={visit:"v",player:"pl",policy:"p",show:"s",template:"tp",creative:"c",tracking:"t",exchange:"x",mixer:"m",statistics:"st",ad:"a",inventory:"i",questionnaireInquiry:"qi"},Nt={success:"s",error:"e",load:"l",skip:"sk",skipClick:"sc",click:"clk",impression:"imp",adblock:"adb",close:"cls",start:"st",unsupported:"uns"},Ft={pingbackType:"p",subtype:"t",uaaUserId:"u",cupidUserId:"a",episodeId:"v",userIP:"l",tvId:"v",albumId:"b",channelId:"c",vvId:"e",adPlayerId:"y",customInfo:"x",timestamp:"s",videoDuration:"d",videoEventId:"e",isVIP:"g",isPreload:"pl",playSource:"ps",adClientVersion:"av",videoClientVersion:"vv",passportId:"pp",location:"lc",qixiaoLocation:"qxlc",sdkVersion:"av",clientVersion:"vv",requestId:"rid",network:"nw",sequenceId:"sq",orderItemId:"od",creativeId:"ct",dspId:"dp",adInfo:"ai",adStrategy:"as",rawInventory:"ri",originalInventory:"oi",deliveredInventory:"di",forbiddenInventory:"fi",requestDuration:"rd",requestCount:"rc",reqCount:"rc",errorCode:"ec",errCode:"ec",errorMessage:"em",errMessage:"em",errMsg:"em",timeStamp:"s",trackingPlatformType:"tpt",isOffline:"ol",templateType:"tt"},qt=It.is,jt=["isVIP","isPreload"],Ut=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.pingbackType=e.pingbackType,this.subtype=e.subtype,this.params=e,this.pingbackParam=t,this.params.timeStamp=Date.now()}return e.prototype.init=function(){return this.getType().normalizeParam().compressParamKey().assignPingbackParam().stringifyParams().getUrl().send()},e.prototype.getType=function(){return this.params.pingbackType=Bt[this.params.pingbackType]||this.params.pingbackType,this.params.subtype=Nt[this.params.subtype]||this.params.subtype,this},e.prototype.normalizeParam=function(){var e=this;jt.forEach((function(t){e.params[t]=e.params[t]?1:0}));var t=this.params.errorMessage;return qt.string(t)&&t.length>300&&(t=t.slice(0,150)+"||"+t.slice(t.length-150),this.params.errorMessage=t),this},e.prototype.compressParamKey=function(){return this.params=Mt(Ft)(this.params),this},e.prototype.assignPingbackParam=function(){var e=this;return Object.keys(this.params).forEach((function(t){e.params[t]=encodeURIComponent(e.params[t])})),this.params=Object.assign({},this.params,this.pingbackParam),this},e.prototype.stringifyParams=function(){return this.params=Rt(this.params,undefined,undefined,{keepRaw:!0}),this},e.prototype.getUrl=function(){return this.url="https://msg.qy.net/cp2.gif?"+this.params,this},e.prototype.send=function(){this.url&&("undefined"!=typeof swan?swan.request({isNeedCookie:!0,url:this.url,method:"GET",ping:!0,data:{},header:{},complete:function(){swan.hideLoading()}}):(console.log("pingback npm send success",this.params,this.pingbackParam,this.url),(new Image).src=this.url))},e}(),Vt=["pingbackType","subtype","uaaUserId","cupidUserId","isVIP","userIP","tvId","albumId","episodeId","channelId","exclusiveStatusIqiyi","videoDuration","videoEventId","vvId","isVIPMovie","playSource","adPlayerId","timeStamp","adClientVersion","videoClientVersion","passportId","customInfo","sdkVersion","clientVersion"],Ht=["qixiaoLocation","requestId","requestDuration","requestCount","errorCode","errorMessage","adInfo"],zt=[].concat(Vt).concat(["location","isOffline","isPreload"]),Gt=[].concat(Vt).concat(Ht),Wt=[].concat(Vt).concat(Ht),Kt=[].concat(Vt).concat(Ht),$t=[].concat(Vt).concat(Ht),Yt=[].concat(Vt).concat(["qixiaoLocation","requestId","isOffline","rawInventory","originalInventory","deliveredInventory","forbiddenInventory"]),Qt=[].concat(Vt).concat(["qixiaoLocation","requestId","sequenceId","orderItemId","creativeId","dspId","adInfo","adStrategy","templateType"]),Jt=Object.freeze({__proto__:null,visitParams:zt,showParams:Gt,creativeParams:Wt,trackingParams:Kt,statisticsParams:$t,inventoryParams:Yt,adParams:Qt});function Xt(e,t){void 0===e&&(e={}),t!=undefined&&(e=Object.assign({},function(e){var t=6,n=[];for(;t--&&e;)n.push(e),e=e.parent;return n.reverse(),n.unshift({}),It.extend.apply(It,n)}(e),t))&&e.getVal&&(e.pingbackParam=Object.assign({},e.getVal("pingbackParam")||{},t.pingbackParam||{}));var n=e.pingbackType+"Params",r=It.only(e,Jt[n]||Kt),i=e.pingbackParam;return new Ut(r,i).init()}var Zt=ee.is,en=function(e){return ze.get(e)||""},tn=function(e,t,n){return ze.set(e,t,n)},nn=function(e){var t=(e=e||{}).slot||{},n=e.creative||{},r=[t.cuepointType,e.dspId,e.orderItemId,n.creativeId,n.templateType];return(r=ee.map(r,(function(e){return null==e&&(e=""),e}))).join("||")},rn=function(e){var t=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),n=0===document.createElement("canvas").toDataURL("image/heic").indexOf("data:image/heic");return/\.jpg$/.test(e)?(e+="?caplist=jpg",t&&(e+=",webp"),n&&(e+=",heic"),e):e},an=function(e,t){var n=new Image;return new Promise((function(r,i){var a=function(){n.removeEventListener("load",s),n.removeEventListener("error",o)},o=function(){a(),i("error")},s=function(){a(),r(n)};t&&setTimeout((function(){a(),i("timeout")}),t),e=e.replace(/^(https:|http:)/,""),e=rn(e),n.addEventListener("load",s),n.addEventListener("error",o),n.setAttribute("src",e)}))},on=function(e,t,n){e=e||{},t=t||{},t={width:Zt.number(t.width)?t.width:Infinity,height:Zt.number(t.height)?t.height:Infinity},n={width:(n=n||{}).width||0,height:n.height||0};var r=Math.max(n.width/e.width,n.height/e.height),i=Math.min(t.width/e.width,t.height/e.height);return r>i&&(r=i=NaN),{min:r,max:i}},sn=function(e){var t=NaN;Zt.string(e)&&(e=e.split(","));var n=ee.first(e);if(!n)return t;if("string"!=typeof n)return t;var r=n.charCodeAt(0);return(r>47&&r<58||r>64&&r<91)&&(t=r),t},un=function(){if(document.createElement("video").canPlayType){var e=document.createElement("video"),t=e.canPlayType('video/ogg; codecs="theora, vorbis"');if(t)return"probably"==t;var n=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');return!!n&&"probably"==n}return!1},cn=n(279),ln=n.n(cn),dn=(n(695),n(1049),function(){function e(){A()(this,e),this.init()}return D()(e,[{key:"init",value:function(){this._timerIdMap={timeout:{},interval:{}}}},{key:"run",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"interval",n=arguments.length>1?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16.7,i=Date.now,a=i(),o=[i(),Math.random()].join(""),s=function u(){e.setIdMap(o,t,u),i()-a>=r&&("interval"===t&&(a=i(),a),n(),"timeout"===t&&e.clearTimeout(o))};return this.setIdMap(o,t,s),o}},{key:"setIdMap",value:function(e,t,n){var r=requestAnimationFrame(n);this._timerIdMap[t][e]=r}},{key:"setTimeout",value:function(e,t){return this.run("timeout",e,t)}},{key:"clearTimeout",value:function(e){cancelAnimationFrame(this._timerIdMap.timeout[e])}},{key:"setInterval",value:function(e,t){return this.run("interval",e,t)}},{key:"clearInterval",value:function(e){cancelAnimationFrame(this._timerIdMap.interval[e])}}]),e}());function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var hn=function(e){O()(n,e);var t=fn(n);function n(e,r){var i;return A()(this,n),(i=t.call(this)).repeatCount=r||Infinity,i.interval=e,i.reset(),i.raf=new dn,i}return D()(n,[{key:"reset",value:function(){this.stop(),this.currentCount=0}},{key:"stop",value:function(){this.running&&(this.raf.clearInterval(this.timer),this.timer=null),this.running=!1}},{key:"start",value:function(){var e=this;e.running||(e.timer=this.raf.setInterval((function(){e.currentCount++,e.emit("timer"),e.currentCount==e.repeatCount&&(e.emit("timerComplete"),e.stop())}),e.interval)),e.running=!0}}]),n}(N);hn.interval=function(e,t,n){var r=new hn(t,n);return r.on("timer",e),r.start(),r},hn.timeout=function(e,t){return hn.interval(e,t,1)};var pn=ee.is,vn=function(){function e(t){A()(this,e),this.sdk=t,this.mw=t.videoMidware,this.init()}return D()(e,[{key:"init",value:function(){this.initDom()}},{key:"initDom",value:function(){var e=this.mw.adcontainer();this.$container=yn("<div></div>"),this.$content=yn('<div style="font-size:18px;color:#ffffff;margin-top:12px;text-align:center;line-height:34px;">呃...广告被拦截，无法正常播放了，<span style="color:#ff6000;"></span>秒后播放正片</br>关闭拦截插件并刷新页面，可恢复正常</div>'),this.$vipContent=yn('<div style="font-size:14px;line-height:24px;margin-top: 20px;">加入<span style="color:#00be06;cursor:pointer;">爱奇艺VIP</span>，尊享会员特权，轻轻松松跳广告</div>'),this.$container.appendChild(this.$content),this.$container.appendChild(this.$vipContent),this.$container.style.display="none",e.appendChild(this.$container),this.bindEvt()}},{key:"triggerCBK",value:function(e){this.sdk.currentVV.disableVideo(),this.$container.style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000;color:#fff;z-index:500;",this.sdk.isblocked=!0,this.initCD(e)}},{key:"bindEvt",value:function(){var e=this;e.$vipContent.querySelector("span").addEventListener("click",(function(){e.pullCashier()}))}},{key:"initCD",value:function(e){var t=this,n=t.getBlackscreenDuration(e),r=t.$content.querySelector("span");r.innerText=n;var i=new hn(1e3,n);i.on("timer",(function(){r.innerText=n-i.currentCount})),i.on("timerComplete",(function(){t.stopBlackScreen(i)})),t.timer||i.start(),t.timer=i}},{key:"stopBlackScreen",value:function(e){var t=this;(e=e||t.timer)&&e.stop(),t.timer=null,t.$container.style.display="none",t.sdk.currentVV.enableVideo()}},{key:"getBlackscreenDuration",value:function(e){var t=e instanceof Request?e:e.getParentByName("request");return t&&t.blackscreenDuration?t.blackscreenDuration:45}},{key:"pullCashier",value:function(){var e=this.sdk.currentVV;!function(e){var t=e.viewInfo;if(t.isSportsVideo)return void function(e){var t=(ee.get(window,"playerSDK")||{}).xinyingCashier,n=e.episodeId,r=window.location.href;if(pn.fn(t)){return void t({cid:n||"",s2:r,s3:"S1002",s4:"tiaoguanggao"})}var i="https://sports.iqiyi.com/sport/member.html?sportCash=true&s2="+encodeURIComponent(r)+"&s3=S1002&s4=tiaoguanggao";gn(i)}(t);!function(e){var t=ee.get(window,"Q.external.initVipPay"),n=(ee.get(window,"playerSDK")||{}).vipCashier,r={platform:"b6c13e26323c537d",albumId:e.albumId||0,fc:"a3aa77e4bb08fdd9"};if(pn.fn(n))n(r);else if(pn.fn(t))t(r);else{var i="https://serv.vip.iqiyi.com/order/preview.action?pid=a0226bd958843452";for(var a in r)i+="&"+a+"="+r[a];gn(i)}}(t)}({skipAdParams:null,viewInfo:{albumId:e.albumId,episodeId:e.episodeId,isSportsVideo:e.isSportsVideo()}})}}]),e}(),yn=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},gn=ee.throttle((function(e,t){window.open(e,t||"_blank")}),500,{trailing:!1});n(446),n(800),n(801),n(832);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}var _n=Object.prototype,bn=function(e){var t=_n.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},xn=function(e){return mn(e)},kn=function(e,t){return _n.hasOwnProperty.call(e,t)},wn=function(e){return e==Infinity||e==-Infinity},Sn=function(e){return!isNaN(e)&&"number"==bn(e)},Tn=function(e){return!(!Sn(e)||wn(e))},Pn=function(e){return!!Tn(e)&&0==e%1},En=function(e){if(e){var t=xn(e);return"object"==t||"function"==t}return!1},An=function(e){return En(e)&&"function"!=bn(e)},In=function(e){return!(!e||"object"!=bn(e))&&(!e.nodeType&&!e.setInterval)},Dn=function(e){return"string"==bn(e)},Ln=function(e){if(!On(e)&&An(e)){var t=e.length;if(Pn(t)&&t>=0)return!0}return!1},On=function(e){return!(!e||e.window!=e)},Rn={_class:bn,_type:xn,owns:kn,nan:function(e){return e!=e},bool:function(e){return"boolean"==bn(e)},infinite:wn,number:Sn,iod:Tn,decimal:function(e){return!!Tn(e)&&0!=e%1},integer:Pn,oof:En,object:An,hash:In,plainObject:In,undef:function(e){return"undefined"==xn(e)},fn:function(e){return"function"==bn(e)},string:Dn,nos:function(e){return Tn(e)||Dn(e)},array:function(e){return"array"==bn(e)},arraylike:Ln,window:On,empty:function(e){if(Dn(e)||Ln(e))return 0===e.length;if(In(e))for(var t in e)if(kn(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==bn(e)}},Cn=function(){var e={};e.is=Rn,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){l(t,(function(t,n){Rn.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=c,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=u,e.includes=function(e,t){return-1!=u(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),Rn.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=l,e.keys=function(e){var t=[];return l(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return l(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&Rn.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function u(e,t){return Rn.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function c(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function l(e,t){if(e)for(var n in e)if(Rn.owns(e,n)&&!1===t(e[n],n,e))break;return e}function d(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return l(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return d(e).toLowerCase()},e.upper=function(e){return d(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==u(e,t)},e.tostr=d,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&Rn.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},Rn.string(t)&&(t=t.split(/ +/)),c(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return l(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=d(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){Rn.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return Rn.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},l(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,u=Date.now();function c(){return!(u-o>n)&&!(a&&u-s>a)}function l(e,t,n){return o=Date.now(),e.apply(t,n)}function d(){i&&(clearTimeout(i),i=null)}function f(){u=Date.now();var e=c();s=u;var a=this,o=arguments;d(),e?r.trailing&&(i=setTimeout((function(){l(t,a,o)}),n)):l(t,a,o)}return r.leading||(o=u),f.cancel=d,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(Rn.array(e))return e;var t=[];return d(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}();Cn.is,encodeURIComponent,decodeURIComponent,undefined;"http https ftp gopher file".split(" ");Mn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Mn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function Mn(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:Cn.invert(t)}}Cn.is,Cn.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));Cn.curry((function $i(e,t){var n={};e&&t&&Cn.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(Rn.object(i)){var a=i.type||function(e){return Rn._class(e)}(t),o=i.name;"object"==a?n[o]=$i(i.child,t):"array"==a&&(n[o]=Cn.map(t,(function(e){return $i(i.child,e)})))}else n[i]=t}));return n}));var Bn=function(){this.version="1.3.4";var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},t=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){return this.parseXML(this.stringToXML(e),t)},this.parseXML=function(r,i){for(var a in i)e[a]=i[a];var o={},s=0,u="";if(e.xmlns&&r.namespaceURI&&(o[e.namespaceKey]=r.namespaceURI),r.attributes&&r.attributes.length>0){for(var c={};s<r.attributes.length;s++){var l=r.attributes.item(s);p={};var d="";d=e.stripAttrPrefix?l.name.replace(t,""):l.name,e.grokAttr?p[e.valueKey]=this.grokType(l.value.replace(n,"")):p[e.valueKey]=l.value.replace(n,""),e.xmlns&&l.namespaceURI&&(p[e.namespaceKey]=l.namespaceURI),e.attrsAsObject?c[d]=p:o[e.attrKey+d]=p}e.attrsAsObject&&(o[e.attrKey]=c)}if(r.hasChildNodes())for(var f,h,p,v=0;v<r.childNodes.length;v++)4===(f=r.childNodes.item(v)).nodeType?e.mergeCDATA?u+=f.nodeValue:o.hasOwnProperty(e.cdataKey)?(o[e.cdataKey].constructor!==Array&&(o[e.cdataKey]=[o[e.cdataKey]]),o[e.cdataKey].push(f.nodeValue)):e.childrenAsArray?(o[e.cdataKey]=[],o[e.cdataKey].push(f.nodeValue)):o[e.cdataKey]=f.nodeValue:3===f.nodeType?u+=f.nodeValue:1===f.nodeType&&(0===s&&(o={}),h=e.stripElemPrefix?f.nodeName.replace(t,""):f.nodeName,p=Bn.parseXML(f),o.hasOwnProperty(h)?(o[h].constructor!==Array&&(o[h]=[o[h]]),o[h].push(p)):(e.childrenAsArray?(o[h]=[],o[h].push(p)):o[h]=p,s++));else u||(e.childrenAsArray?(o[e.textKey]=[],o[e.textKey].push(null)):o[e.textKey]=null);if(u)if(e.grokText){var y=this.grokType(u.replace(n,""));null!==y&&y!==undefined&&(o[e.textKey]=y)}else e.normalize?o[e.textKey]=u.replace(n,"").replace(/\s+/g," "):o[e.textKey]=u.replace(n,"");return o},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(t){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(n){return null}},this}.call({});function Nn(e,t,n,r){if(e&&t){var i=e.split(t);if(n=Cn.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=Nn(e,a,n))}}return e}function Fn(e){var t,n={};if(Rn.string(e))try{(t=Bn.parseString(e,{attrKey:"attr",textKey:"#text"})).html&&!t.VAST&&(n.error="parse error")}catch(_){n.error=_}else t=e;if(t.VAST){var r=qn(t.VAST[0].Ad),i=qn(r.Wrapper),a=qn(r.InLine);if(i){var o=qn(i.VASTAdTagURI);n.redirect=Un(o)}var s=i||a;if(s){var u=jn(s.Impression);n.impressionTrackings=Cn.compact(Cn.map(u,(function(e){return Un(e)})));var c=qn(s.Creatives[0].Creative);if(c){var l=qn(c.Linear),d=qn(l.Duration);n.duration=Un(d);var f=qn(l.AdParameters);n.adParameters=Un(f);try{var h=qn(l.VideoClicks[0].ClickThrough);n.clickThrough=Un(h),n.clickThroughType=Vn(h,"type")||""}catch(b){n.clickThrough=""}try{var p=qn(l.Icons[0].Icon[0].StaticResource);n.icon=Un(p)}catch(b){n.icon=""}var v=void 0;try{v=qn(l.MediaFiles[0].MediaFile)}catch(b){}n.creativeUrl=Un(v)||"",n.creativeWidth=Vn(v,"width")||"",n.creativeHeight=Vn(v,"height")||"";try{var y=jn(l.VideoClicks[0].ClickTracking);n.clickTrackings=Cn.compact(Cn.map(y,(function(e){return Un(e)})))}catch(b){n.clickTrackings=[]}var g=[];try{g=jn(l.TrackingEvents[0].Tracking)}catch(b){g=[]}var m=n.eventTracking={};Cn.each(g,(function(e){var t=Vn(e,"event");Rn.array(m[t])||(m[t]=[]);var n=Un(e);n&&m[t].push(n)}))}}}return n.isEmpty=function(e){if(!e.VAST)return!0;var t=e.VAST[0]&&qn(e.VAST[0].Ad);return!t||!qn(t.InLine)&&!qn(t.Wrapper)}(t),n}function qn(e){return e&&e instanceof Array?e[0]:e}function jn(e){return e&&e instanceof Array?e:[e]}function Un(e){return e&&e["#text"]&&e["#text"][0]?e["#text"]:""}function Vn(e,t){return e&&e.attr&&e.attr[t]&&e.attr[t]._value}var Hn={"image/jpeg":{extensions:["jpg","jpeg","jpe"]},"image/gif":{extensions:["gif"]},"image/png":{extensions:["png"]},"image/webp":{extensions:["webp"]},"application/x-shockwave-flash":{extensions:["swf"]},"video/mp4":{extensions:["mp4","mp4v","mpg4"]},"video/x-flv":{extensions:["flv"]},"video/x-f4v":{extensions:["f4v"]},"video/webm":{extensions:["webm"]},"text/html":{extensions:["html","htm","shtml"]}};function zn(e){return function(e){e=ee.lower(e);var t=ee.keys(Hn);return ee.find(t,(function(t){return ee.includes(Hn[t].extensions,e)}))}(e)}var Gn=function(e){return function(e){return ee.includes(e,"image")?"image":ee.includes(e,"flash")?"swf":ee.includes(e,"video")?"video":ee.includes(e,"html")?"html":void 0}(Wn(e))},Wn=function(e){if(e=we(e)){var t=e.pathname,n=(r=t,i=(r+="").split("."),"."+ee.last(i));return zn(n=ee.slice(n,1))}var r,i};function Kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var $n=function(e){O()(n,e);var t=Kn(n);function n(e,r){var i;return A()(this,n),(i=t.call(this)).type=e,i.ad=r,i.creativeObject=r.creative.creativeObject,i.vv=r.getParentByName("vv"),i.log=i.vv.sdk.logger.getLogger(e+":"+r.id),i.$adContainer=i.vv.mw.adcontainer(),i.$adzone=document.createElement("div"),r.$adzone=i.$adzone,r.$adzone.setAttribute("data-adzone",r.slot.adZoneId),i}return D()(n,[{key:"emitCreativeError",value:function(e,t){var n=this.ad;"timeout"==e?n.emit("error",{data:{creativeUrl:t},message:"creative timeout"}):n.emit("error",{data:{creativeUrl:t},message:"creative http error"})}},{key:"loadImage",value:function(e,t){var n=this;return t=t||3e4,"image/gif"==Wn(e)&&(e=e+"?"+Date.now()),an(e,t)["catch"]((function(t){return"timeout"===t?n.emitCreativeError("timeout",e):n.emitCreativeError("error",e),Promise.reject(t)}))}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=ee.once((function(){e.timer&&e.timer.stop(),e.timer=null,e.ad.emit("complete",{type:"timer-complete"})})),r=e.getDuration();if(r>0&&Infinity!=r){var i=e.timer=new hn(1e3,r);i.on("timer",(function(){t.remain=t.duration-i.currentCount,e.updateCountdown()})),i.on("timerComplete",n),i.reset(),i.start()}}},{key:"fakeHide",value:function(){var e=this;e.$adzone.style.position="absolute",e.$adzone.style.width="600px",e.$adzone.style.height="300px",e.$adzone.style.top="10px",e.$adzone.style.left="10px",e.$adzone.style.display="",e.$adzone.style.visibility="hidden"}},{key:"putOnDocument",value:function(){var e=this;e.$adzone.style.position="absolute",e.hasPutOnDoc||("viewPoint"!=e.type&&e.$adzone.appendChild(e.creativeElement),e.$adzone.parentNode||(e.$adContainer.appendChild(e.$adzone),e.hasPutOnDoc=!0))}},{key:"tryAddStyle",value:function(e){var t=this;this.vv.sdk.setViewController((function(){e&&e(),t.addStyle()}))}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("clickAndOpen")},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}},{key:"addStyle",value:function(){var e=this,t=e.vv.sdk.viewController;e.$adzone.setAttribute("adId",e.ad.id),e.$adzone.setAttribute("templateType",e.type),0!=e.creativeObject.isCloseable&&t.addCloseBtn(e);var n=!!e.creativeObject.needAdBadge,r=e.option||{};r.type=e.template,n&&t.addAdBadge(e.$adzone,r);var i=!!e.creativeObject.showMuteButton,a=e.ad.slot.cuepointType;("video"==e.creativeObject.renderType&&i||6===a&&"roll"===e.type)&&t.addVolumnBtn(e)}},{key:"destroyAdzone",value:function(){var e=this,t=e.ad,n=t.slot.cuepointType;"roll"==e.type&&6!==n||(e.log("destroy adzone"),t.$adzone.parentNode&&t.$adzone.parentNode.removeChild(t.$adzone),t.$adzone.removeEventListener("click",e.clickHandler),t.$adzone.innerHTML="",t.$adzone.setAttribute("data-adzone",""))}},{key:"updateCountdown",value:function(){var e,t=this,n=t.ad;if(t.onFirstPlaying(),e=n.remain,t.log("countdown",n.remain+"/"+n.duration),e<0)return t.log("countdown < 0 不应该发生"),void n.abort()}},{key:"pause",value:function(){var e=this;e.log("pause"),e.timer&&e.timer.stop()}},{key:"resume",value:function(){var e=this;e.log("resume"),e.timer&&e.timer.start()}},{key:"stop",value:function(){var e=this;e.log("stop"),e.timer&&e.timer.stop(),e.timer=null,e.isStopped=!0,e.destroyAdzone()}},{key:"reset",value:function(){this.isStopped=!1,this.hasPlaying=!1}},{key:"resize",value:function(){}},{key:"abort",value:function(){}},{key:"getDuration",value:function(){return Infinity}},{key:"detectCollision",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.willDefinitelyCollide,n=this,r=n.ad,i=n.$adzone||{},a=i.style,o=n.vv.adCollisionDetection,s={id:r.id,x:a.left.replace("px",""),y:a.top.replace("px",""),width:a.width.replace("px",""),height:a.height.replace("px",""),willDefinitelyCollide:t};o.addAdIntoCollisingList(s),o.notifyWholeCornerToHide()}}]),n}(N),Yn={impression:0,click:1,push:2,trueview:3,close:4,start:10,firstQuartile:11,midpoint:12,thirdQuartile:13,complete:14,downloadStart:20,downloaded:21},Qn={"1q":"firstQuartile",mid:"midpoint","3q":"thirdQuartile",stop:"complete",sp:"complete"},Jn=ee.is,Xn=ee.curry((function Yi(e,t){var n={};e&&t&&ee.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(Jn.object(i)){var a=i.type||function(e){return Jn._class(e)}(t),o=i.name;"object"==a?n[o]=Yi(i.child,t):"array"==a&&(n[o]=ee.map(t,(function(e){return Yi(i.child,e)})))}else n[i]=t}));return n}));var Zn=ee.is;function er(e,t){return ee.trim(function(e,t){return nr(e,t||e.clickThrough,1)}(e,t||e.clickThrough))}function tr(e,t,n){return t=ee.trim(nr(e,t,n))}function nr(e,t,n){t=t||"",t=ee.trim(t);var r,i=function(e){var t=e.getVal("userIP"),n=e.getVal("cupidUserId"),r=e.getVal("uaaUserId"),i=e.getVal("requestId"),a=e.getVal("clickArea"),o=e.getVal("trueviewSource");return{"[UDID]":n,"[M_IDFA]":r,"[IDFA]":n,"[IQIYI_HCID]":n,"[IQIYI_FCID]":r,"[QIYI_ID]":r,__UDID__:n,__IP__:t,"[M_ADIP]":t,"[M%5fADIP]":t,__QRID__:i,__REQUESTID__:i,"[QIYI_AUTHCOOKIE]":e.getVal("passportCookie"),"[IQIYI_OFFSET]":e.getPlayedTime(),CUPID_IAP:"1_10_101",CUPID_CLA:a,CUPID_TRS:o}}(e),a={},o=!0;ee.each(ee.compact(e.ies),(function(i){var s=ee.some(i.domain,(function(e){return!!function(e,t){if((t=we(t)).hostname==e||ee.endsWith(t.hostname,"."+e))return!0;return!1}(e,t)&&(r=e,!0)}));if(s)if(isNaN(n))o=!0,a=ee.extend(a,i.macroSubstitutionMap);else{var u=r+"utils"+n;if(e.iesKeyReplaced[u])return o=!1,!1;var c=ee.extend({},i.macroSubstitutionMap);for(var l in c)c[l]=c[l]+"utils"+n;a=ee.extend(a,c)}}));var s=t;if(o&&!Zn.empty(a)&&(s=rr(s,a,!0))!==t){var u=r+"utils"+n;e.iesKeyReplaced[u]=!0}t=rr(s,i,!0);var c=function(e){var t=Date.now(),n=e.getVal("deltaTime");Zn.integer(n)&&(t+=n);return t}(e);return t=function(e,t){return t=t||Date.now(),rr(e,{"[timestamp]":t,"[M_timestamp]":t,"[TIMESTAMP]":t,"[randnum]":t,__timeStamp__:t,__TS__:t},!0)}(t,c),t}function rr(e,t,n){return ee.forIn(t,(function(t,r){e=ir(e,r,t,n)})),e}function ir(e,t,n,r){if(e&&t){var i=e.split(t);if(n=ee.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=ir(e,a,n))}}return e}var ar=ee.is,or="https://t7z.cupid.iqiyi.com",sr=Xn({type:"a",timestamp:"b",videoEventId:"r",securityCode:"s",md5Version:"ve",uploadId:"up",clientVersion:"cv",sdkVersion:"sv",startTime:"st",extendTrackingInfo:"eti"}),ur=function(){function e(){A()(this,e)}return D()(e,[{key:"init",value:function(e){var t=this;return t.compressedParam={},t.uncompressedParam={},t.trackingParam={},e instanceof qe&&(t.context=e),t}},{key:"addCompressedParam",value:function(e){return ee.extend(this.compressedParam,e),this}},{key:"addUncompressedParam",value:function(e){return ee.extend(this.uncompressedParam,e),this}},{key:"addTrackingParam",value:function(e){return ee.extend(this.trackingParam,e),this}},{key:"setType",value:function(e){var t=this,n="qilin"==e;t.isQilin=n;var r="exchange"==e;return t.isExchange=r,t.type=e,t}},{key:"addFrontendParam",value:function(){var e=this,t={md5Version:1},n=e.context;return n&&(t.uploadId=n.getVal("uploadId"),t.clientVersion=n.getVal("clientVersion"),t.sdkVersion=n.getVal("sdkVersion"),t.videoEventId=n.getVal("vvId"),t.startTime=n.getVal("startTime")||0,t.extendTrackingInfo=n.getVal("extendTrackingInfo")),e.isQilin&&n&&(t={extendTrackingInfo:n.getVal("extendTrackingInfo")}),e.addUncompressedParam(t),e}},{key:"mergeUncompressedParam",value:function(){var e=this,t=sr(e.uncompressedParam);return e.addCompressedParam(t),e}},{key:"setEvent",value:function(t){var n=this;return n.eventName=e.normalizeEventName(t),n.eventCode=e.getEventCodeByName(n.eventName),n.compressedParam.a=n.uncompressedParam.type=n.eventCode,n}},{key:"encryptParam",value:function(){var t=this;if(!t.isQilin){var n=e.encryptCupid;t.isExchange&&(n=e.encryptExchange),n(t.compressedParam,t.context,t.trackingParam)}return t}},{key:"getUrl",value:function(){var t=this,n=e.cupidUrl,r="";t.isExchange&&(n=e.exchangeUrl),t.isQilin&&(n=e.qilinUrl);var i=t.compressedParam||{},a=t.trackingParam||{},o={};return ee.forIn(i,(function(e,t){ee.has(a,t)||(o[t]=e)})),ar.empty(a)||(r="&"+xe(a,"&","=",{keepRaw:!0})),n=n+"?"+xe(o)+r,t.isQilin&&(n=tr(t.context,n,t.eventCode)),t.url=n,t}},{key:"_send",value:function(e){var t=this,n=Date.now(),r=t.url;return/https/i.test(window.location.protocol)&&(r=r.replace(/^http:/,"https:")),ft({url:r,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,success:function(r,i){t.response={textStatus:i,duration:Date.now()-n,data:r},e()},error:function(){t.response={textStatus:"timeout",duration:Date.now()-n,data:"error"},e()},complete:function(r,i){"timeout"==i&&(t.response={textStatus:i,duration:Date.now()-n,data:"error"},e())}}),t}},{key:"send",value:function(e){return this.addFrontendParam().mergeUncompressedParam().encryptParam().getUrl()._send(e)}},{key:"sendPingback",value:function(e){var t,n=this,r={pingbackType:"tracking",subtype:"success",requestCount:-1},i=n.response;ee.includes(i.data,"ok")?r.requestDuration=i.duration:(r.subtype="error",t=601,"timeout"==i.textStatus?t=602:"success"!=i.textStatus&&(t=603)),n.isExchange?(r.pingbackType="exchange",ar.number(t)&&(t+=500)):n.isQixiao&&(r.pingbackType=undefined,ar.number(t)&&(t+=900)),r.errorCode=t;var a=n.context;"slot"==n.context.ContextName&&(a={slot:n.context}),r.adInfo=nn(a),r.pingbackParam=Object.assign({},r.pingbackParam,e),Xt(n.context,r)}}],[{key:"getEventCodeByName",value:function(e){return Yn[e]}},{key:"normalizeEventName",value:function(e){return e=Qn[e]||e}},{key:"encryptCupid",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=ee.map("a b c d r".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=ye(i.join("")+"cupid")}},{key:"encryptExchange",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=ee.map("a v b c r d q".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=ye(i.join("")+"qax-track")}},{key:"send",value:function(t,n,r,i,a,o){var s=new e;e.qilinUrl=o||"http://t7z.cupid.iqiyi.com/dsp_track3",s.init(r).addTrackingParam(n).addUncompressedParam(t).setType(i).setEvent(a).send((function(){s.sendPingback()}))}},{key:"sendEmptyTracking",value:function(t,n,r,i,a,o){var s=new e;e.qilinUrl=o||"http://t7z.cupid.iqiyi.com/dsp_track3",s.init(r).addTrackingParam(n).addUncompressedParam(t).setType(i).setEvent(a).send((function(){s.sendPingback()}))}}]),e}();ur.cupidUrl=or+"/track2",ur.exchangeUrl=or+"/etx";var cr=function(){function e(t,n){A()(this,e);var r=this;t instanceof qe&&(r.context=t),r.eventName=ur.normalizeEventName(n),r.eventCode=ur.getEventCodeByName(r.eventName)}return D()(e,[{key:"sendAll",value:function(){var e=this;e.sendCupid(),e.sendExchange(),e.sendQiLin(),e.sendThirdParty()}},{key:"sendCupid",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=ee.get(t,"iqiyiTracking.cupidTracking")||{};if(ee.includes(n.events,e.eventCode)){var r=n.trackingParam;ur.send({},r,t,"cupid",e.eventName)}}}},{key:"sendExchange",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=ee.get(t,"iqiyiTracking.exchangeTracking")||{};if(ee.includes(n.events,e.eventCode)){var r=n.trackingParam;ur.send({},r,t,"exchange",e.eventName)}}}},{key:"sendQiLin",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=ee.get(t,"iqiyiTracking.qilinTracking")||{};if(ee.includes(n.events,e.eventCode)){var r=n.trackingParam,i=n.trackingUrl;ur.send({},r,t,"qilin",e.eventName,i)}}}},{key:"sendThirdParty",value:function(){var e=this,t=e.getThirdParty(),n=e.context.getVal("pingbackConfig")||{},r=ee.keys(n);ee.each(t,(function(t){var i,a=ee.find(r,(function(e){return ee.startsWith(t,e)}));if(a){var o=new ur;o.context=e.context,o.url=t,o.isQixiao=!0,o._send((function(){o.sendPingback(n[a])}))}else i=t,(new Image).src=i}))}},{key:"getThirdParty",value:function(){var e=this,t=e.context;if("ad"!=t.contextName)return[];var n=e.eventName,r=ee.get(t,n+"Tracking.thirdPartyTracking"),i=ee.get(t,["eventTracking",n]),a=ee.compact(ee.union(r,i));return ee.map(a,(function(n){return tr(t,n,e.eventCode)}))}}],[{key:"send",value:function(t,n){new e(t,n).sendAll()}}]),e}(),lr="postMessage"in window,dr=function(){function e(t){A()(this,e);var n=this;t=t||{},n.type=t.type,n.callback=null,n.element=t.element,n.aresToEos()}return D()(e,[{key:"aresToEos",value:function(){var e=this;lr||(e.element.contentWindow.navigator.eosMessage=function(t){e.callback(t)})}},{key:"listen",value:function(e){var t=e||function(){};this.callback=t,lr&&window.addEventListener("message",this.callback,!1)}},{key:"send",value:function(e){lr?this.element.contentWindow.postMessage(e,"*"):(0,window.navigator.eosMessage)({data:e})}}]),e}();function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var hr=function(e){O()(n,e);var t=fr(n);function n(e,r){var i;return A()(this,n),(i=t.call(this,e,r)).mw=i.vv.mw,i.$video=i.vv.mw.video(),i.isOutVideo=!1,i.isRatioFixed=!0,i.canExpand=!0,"roll"==i.type&&(i.renderType="roll",r.$adzone=i.$adzone=i.$adContainer),i.creativeUrl=i.creativeUrl||i.creativeObject.url,i.renderType=i.renderType||Gn(i.creativeObject.url),"mraid"==i.type&&(i.creativeMode="Interactive"),i.hasPlaying=!1,i.hasH5tl=r.h5tl&&r.crex,i.size={},i.isSkippableAd="skippable"==r.deliverName(),i.showGuide=!1,i}return D()(n,[{key:"load",value:function(){var e=this,t=this.ad;return"mraid"==e.type&&e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),new Promise((function(n,r){if(e.isStopped)return r(new Error("has ended"));if(e.trySetCrazyMode(),e.log("load"),"roll"==e.renderType){var i=e.vv,a="mp4";/data/i.test(i.mw.getEngineType())&&(a="f4v");var o=function(e,t,n){e=e||{};var r=Me[t]||1024,i=ee.map(Be,(function(t){var i=-1,a=t.key,o=e[a];return n==t.videoFormat&&(o=e[a],Ce.empty(o)||(i=2e3+(t.priority||0),r>=t.minBandwidth?i+=t.minBandwidth:i+=1/t.minBandwidth)),ee.extend({score:i,video:o},t)})),a=ee.max(i,(function(e){return e.score}));if(a.score>0){var o="g",s=a.minBandwidth;return s<=170?o="b":s>1536&&(o="c"),a.videoDefinition=t,a.definitionLevel=o,a}}(t.creative.creativeObject,i.videoDefinition,a);if(o){e.log("matched ad video",o),t.matchedVideo=o;var s=o.video;"mp4"==a&&(s+="?pv=0.2"),e.creativeUrl=t.creativeUrl=s,n()}else{var u=new Error("fail to match ad video",t.creative.creativeObject);t.emit("error",u),r(u)}}else if("html"==e.renderType)n(e.loadMraid()),t.error||t.emit("creativeLoad");else{r(new Error("unknown template render type"))}}))}},{key:"bindPlayingEvt",value:function(){var e=this.ad,t=this;if("roll"==t.renderType){e.on("video-playing",(function n(){var r=e.slot.ads[e.index()-1],i=!0;r&&("ended"==r.state||r.error||e.error||(i=!1)),i||e.slot.isSeekableOriginalSlot()?(t.onFirstPlaying(),e.off("video-playing",n)):t.log("invalid playing")}))}}},{key:"loadRollToVideo",value:function(){var e=this.ad,t=this.vv.mw,n=this,r=e.getParentByName("sdk");if("roll"==n.renderType){e.on("video-playing",(function a(){var t=e.slot.ads[e.index()-1],r=!0;t&&("ended"==t.state||t.error||e.error||(r=!1)),r?(n.onFirstPlaying(),e.off("video-playing",a)):n.log("invalid playing")}));var i={file:n.creativeUrl,id:e.id,type:e.typeName(),seekable:Boolean(e.seekable)||15==e.slot.cuepointType,offset:parseInt(e.slot.startTime),videoEventId:n.vv.videoEventId,duration:e.duration,mvst:e.slot.makeVersionStartTime||"",orderItemType:e.orderItemType,playOverload:r.vipCheckConflict&&"A10001"===r.vipCheckConflict.code?1:0};i.file=i.file.replace(/\.qiyi\.com/,".iqiyi.com"),i.file=i.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),this.log("video load",i,i.videoEventId,e.slot.startTime,e.slot.makeVersionStartTime),t.load(i),0===e.index()&&(r.loadEndTime=Date.now())}}},{key:"loadMraid",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide(),e.putOnDocument();var i=function(t){var n=t.data;if(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(r){return void e.log("parse data error",r)}n.key==e.msgKey&&("clickandopen"==n.type||"interactive"==n.type?(e.ad.hasInteracted||(e.ad.hasInteracted=!0),"clickandopen"==n.type&&e.ad.emit("clickAndOpen",n.data)):"error"==n.type&&e.log("mraid creative error",n.data))}},a=function(){var r;clearTimeout(o);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(e.message=new dr({type:"mraid",element:e.creativeElement}),e.message.listen(i),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},o=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("mraid html creative load error timeout"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}),1e4);e.creativeElement.addEventListener("load",a);var s=e.creativeUrl.replace(/^(https:|http:)/,"")+"?isMute=1&domain="+document.domain;e.creativeElement.setAttribute("src",s)}))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad,n=t.slot,r=t.order>1?t.slot.ads[t.order-2]:null;e.vv.stopVideo(e.ad.typeName()),t.isSeekableOriginalRoll()&&e.vv.schedule&&e.vv.schedule.bindAfterSeekedEvt(),t.remain=t.duration,e.log("on first playing"),t.emit("impression"),e.slotDuration=pr(t.slot.ads),n.hasSkippableAdInSlot&&(e.skippableDuration=vr(t.slot.ads)),e.initProgress();var i=t.deliverName();if("brief"==i&&t.toast)t.getParentByName("sdk").emit("adplayer_showtip",{des:t.toast,time:2});"vip"==i||"origin"==i||"sports-vip"==i||"brief"==i||"overlay-brief"==i||("skippable"==i?i=r&&"skippable"==r.deliverName()?"skippable-after":"skippable-before":"trueView"==i?i="trueview-before":"roll"==e.type?i="normal":"mraid"==e.type&&(i="rolllike")),e.setVideoOptions(i,t,!0),e.hasH5tl?e.setWebview(t):t.qrShowStyle&&e.setQrStyle(t)}}},{key:"setWebview",value:function(e){var t=this.vv.sdk;t.setViewController((function(){t.rollView.setWebview(e)}))}},{key:"setQrStyle",value:function(e){var t=this.vv.sdk;t.setViewController((function(){t.rollView.setQrStyle(e)}))}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=e.vv.mw;t.quartiles=[{position:1/4,event:"1q"},{position:.5,event:"mid"},{position:3/4,event:"3q"},{position:1,event:"sp"}];var r=e.isSkippableAd?t.duration+5:t.duration,i=ee.once((function(){e.timer&&e.timer.stop(),e.timer=null,ee.remove(t.quartiles,(function(e){return cr.send(t,e.event),t.emit("pingback",{subtype:e.event}),!0}));var r=n?n.duration()-n.currentTime():0,i=e.ad.hasPlayed&&"origin"==t.deliverName()&&Boolean(t.seekable)?"replayComplete":"complete";t.slot.isSeekableOriginalSlot()?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),500):r>0&&r<1?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),1e3):e.ad.emit(i,{type:"timer-complete"})}));if(r>0&&!e.timer){var a=e.timer=new hn(1e3,r);a.on("timer",(function(){t.remain=t.duration-a.currentCount,e.updateCountdown(),e.vv.adPlayedDurationInView++,ee.remove(t.quartiles,(function(n){var r=Math.round(t.duration*n.position);if(a.currentCount==r)return e.log("match quartile",n.event,a.currentCount),cr.send(t,n.event),t.emit("pingback",{subtype:n.event}),"sp"==n.event&&e.isSkippableAd&&t.sendPlayDurationPingback(t.duration),!0}))})),a.on("timerComplete",i),a.reset(),a.start()}t.on("video-ended",(function(){i()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.log("ready play roll"),e.isStopped)return n("ended");if("roll"==e.renderType)return e.detectCollision({willDefinitelyCollide:!0}),t();if(e.vv.sdk.emit("single_ad_start",{type:"rollLike"}),e.log("rollLike start play"),e.vv.isCurrentVV&&e.vv.disableVideo(),e.vv.schedule.setCurrentAd(e.ad.id),e.$adzone.style.zIndex="3000",e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement&&e.creativeElement.contentWindow&&e.message){e.msgKey=e.vv.videoEventId+Date.now();try{e.message.send(JSON.stringify({type:"ready",key:e.msgKey}))}catch(r){e.log("stringify data error",r),n(r)}}yr(e.$adzone),yr(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resume",value:function(){var e=this;return e.log("resume"),e.timer&&e.timer.start(),e.midrollTip&&e.midrollTip.start(),Promise.resolve()}},{key:"pause",value:function(){var e=this;e.log("pause");var t=e.vv.sdk,n="";t.rollView&&(n=t.rollView.options&&t.rollView.options.theme),e.log("isSKippable pause:",e.isSkippableAd,n,!(e.isSkippableAd&&ee.includes(n,"guide"))),!e.timer||e.isSkippableAd&&ee.includes(n,"guide")||(e.log("timer stop"),this.timer.stop())}},{key:"updateCountdown",value:function(){var e=this,t=e.ad;e.onFirstPlaying();var n,r,i=t.slot,a=i.ads,o=e.isSkippableAd?t.remain+5:t.remain,s=e.isSkippableAd?t.duration+5:t.duration;if(a.length<=1)n=o;else{var u=ee.slice(a,t.index()+1);n=o+pr(u),e.log("countdown",o+"/"+s,n+"/"+e.slotDuration),i.hasSkippableAdInSlot&&(r=o+vr(u)+5)}var c=e.vv.sdk;if(c.viewController&&c.rollView&&n>=0){var l="mraid"==e.type&&e.ad.hasInteracted;c.rollView.updateCountdown(n,l)}if(i.hasSkippableAdInSlot&&!e.isSkippableAd&&c.viewController&&c.rollView&&(e.log("skippable countdown",r+"/"+e.skippableDuration),c.rollView.updateSkippableCountdown(r)),"trueView"==t.deliverName()){var d=t.duration-t.remain;if(d>=t.impressionTime&&t.emit("trueview"),c.rollView){var f=c.rollView.options&&c.rollView.options.theme;if(ee.includes(f,"before")){var h=t.skipTime-d;h<=0?(e.log("trueview can skip now"),c.rollView.trySetOptions({theme:"trueview-after",ad:t}),c.rollView.updateCountdown(n)):(e.log("trueview countdown",h+"/"+t.skipTime),c.rollView.updateTrueViewCountdown(h))}}}if(e.isSkippableAd){var p=t.duration-t.remain,v=e.mw.duration()-e.mw.currentTime();if(p>=t.impressionTime&&t.emit("trueview"),c.rollView){var y=c.rollView.options&&c.rollView.options.theme;if(ee.includes(y,"before")){var g=5-p;g<=0&&!e.skippableCanSkip?(e.log("skippable can skip now"),e.skippableCanSkip=!0,c.rollView.useTheme("skippable-after",t),c.rollView.updateCountdown(n)):(e.log("skippable countdown",g+"/"+e.skippableDuration),c.rollView.updateSkippableCountdown(g))}v>=1&&t.remain<=0&&!e.showGuide&&(e.showGuide=!0,e.log("video play problem and load guide"),e.loadGuide())}}}},{key:"setVideoOptions",value:function(e,t,n){var r=this,i=r.vv.sdk;i.setViewController((function(){i.rollView&&(i.rollView.trySetOptions({theme:e,ad:t}),n&&i.rollView.setVipTitle(e,r),r.updateCountdown())}))}},{key:"trySetCrazyMode",value:function(){var e=this;if("mraid"==e.type){var t=e.vv.mw.isFullScreen();e.isOutVideo=!1,e.isRatioFixed=!1,t&&(e.canExpand=!1)}}},{key:"resize",value:function(){var e=this;if(!e.isStopped){var t=e.size;if(t.videoWidth=e.$video.offsetWidth,t.videoHeight=e.$video.offsetHeight,e.setPosition(),e.$adzone.style.width=t.videoWidth+"px",e.$adzone.style.height=t.videoHeight+"px",e.$adzone.style.top=t.y,e.$adzone.style.left=t.x,e.detectCollision({willDefinitelyCollide:!0}),e.hasH5tl){var n=e.vv.sdk;n.rollView&&n.rollView.resizeWebview()}else if(e.ad.qrShowStyle){var r=e.vv.sdk;r.rollView&&(r.rollView.resizeQrStyle(e.ad),r.rollView.resizeQrMask())}}}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.vv.mw,r=(n.width()-e.$video.offsetWidth)/2,i=(n.height()-e.$video.offsetHeight)/2;t.x=r,t.y=i}},{key:"stop",value:function(e){var t=this;(e=e||{},t.log("stop template",e),t.timer&&t.timer.stop(),t.timer=null,t.isStopped=!0,t.message=null,t.destroyAdzone(),"roll"==t.type&&e.abort&&t.vv.isCurrentVV()&&t.vv.schedule.getCurrentAd()==t.ad&&(t.isSkippableAd&&t.vv.mw.play(),t.log("force abort video"),t.vv.mw.abort()),t.vv.schedule.getCurrentAd()==t.ad&&t.setVideoOptions(),"mraid"==t.type)&&(t.vv.schedule.removeCurrentAd(),t.vv.sdk.emit("single_ad_end",{type:"rollLike"}),t.log("rollLike stop"),t.vv.isCurrentVV()&&t.vv.enableVideo())}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=NaN),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"loadGuide",value:function(){var e,t=this,n=t.mw,r=t.ad,i=r.slot.ads,a=t.vv.sdk,o=t.isSkippableAd?r.remain+5:r.remain,s=t.isSkippableAd?r.duration+5:r.duration;i.length<=1?e=o:(e=o+pr(ee.slice(i,r.index()+1)),t.log("countdown",o+"/"+s,e+"/"+t.slotDuration));a.rollView&&(a.rollView.updateCountdown(e),a.rollView.trySetOptions({theme:"skippable-guide",ad:r})),t.log("load guide and call mw pause"),n.pause()}}]),n}($n);function pr(e){return ee.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}function vr(e){return ee.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e:e+t.duration}),0)}function yr(e){e.style.display="",e.style.visibility=""}function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var mr=function(e){O()(n,e);var t=gr(n);function n(e,r){return A()(this,n),t.call(this,e,r)}return D()(n,[{key:"load",value:function(){var e=this,t=e.ad,n=e.vv;t.creative.creativeObject.url=rn(t.creative.creativeObject.url);var r=ee.extend({id:t.id,orderItemId:t.orderItemId,adZoneId:t.slot.adZoneId,templateType:t.creative.templateType,startTime:t.slot.startTime},t.creative.creativeObject);return n.sdk.emit("adplayer_ad_info",{type:"definitionSwitchingAd",data:{definitionSwitchingAd:r,tvId:n.episodeId,videoEventId:n.videoEventId}}),e.log("notify player definitionSwitchingAd",r),Promise.resolve()}},{key:"play",value:function(){return Promise.resolve()}}]),n}($n);function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var br=function(e){O()(n,e);var t=_r(n);function n(e,r){var i;A()(this,n),i=t.call(this,e,r);var a=ln()(i);return a.isRatioFixed=!0,a.canExpand=!0,a.creativeUrl=a.creativeUrl||a.creativeObject.url,"roll"===a.type&&(a.creativeObject.playCount=a.creativeObject.playCount||5,a.creativeObject.width=a.creativeObject.width||480,a.creativeObject.height=a.creativeObject.height||272,a.creativeObject.widthScale=a.creativeObject.widthScale||.57,a.creativeObject.heightScale=a.creativeObject.heightScale||.57,a.creativeUrl=a.creativeObject.m400Url),"mobile_flow_new"===a.type&&(a.creativeObject.width=a.creativeObject.width||600,a.creativeObject.height=a.creativeObject.height||300,a.creativeObject.widthScale=a.creativeObject.widthScale||.57,a.creativeObject.heightScale=a.creativeObject.heightScale||.57,a.creativeObject.duration=0),a.renderType=a.renderType||Gn(a.creativeUrl),a.isSuperShow=!!a.creativeObject.actUrl,a.size={},ee.includes(["image","html","video"],a.renderType)||a.ad.emit("error",new Error("unknown render type: "+a.creativeUrl)),a.hasPlaying=!1,a.hasPutOnDoc=!1,a.hasOpenVolumn=!1,i}return D()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){if(e.isStopped&&r(new Error("has ended")),e.log("load"),"image"==e.renderType){n(e.loadImage(e.creativeUrl,5e3).then((function(t){e.creativeElement=t,e.size.creativeRawWidth=t.width,e.size.creativeRawHeight=t.height})))}else"html"==e.renderType?n(e.loadHtml()):"video"==e.renderType&&n(e.loadVideo());t.error||t.emit("creativeLoad")}))}},{key:"loadVideo",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("video");r.style.width="100%",r.style.height="100%",r.setAttribute("preload","auto"),r.muted=!0,e.creativeElement=r;var i=e.creativeObject.playCount||1;e.fakeHide();var a=setTimeout((function(){e.creativeElement.removeEventListener("loadstart",o),e.log("video creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),15e3),o=function(){var t;e.log("video pause load start");try{t=e.creativeElement}catch(r){e.log("video creative can not get contentDocument:",r)}t?(t.addEventListener("click",d),t.addEventListener("ended",u),t.addEventListener("error",c),t.addEventListener("canplay",l)):(e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},s=1,u=function(){var t=this;e.log("current play ended",s+"/"+i),s<i?(t.currentTime=0,t.play(),s++):(t.pause(),e.ad.emit("complete"))},c=function(){e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))},l=function(){clearTimeout(a),e.size.creativeRawWidth=e.creativeObject.width,e.size.creativeRawHeight=e.creativeObject.height,e.log("current play count",s+"/"+i),t()},d=function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("click")},f=e.creativeUrl,h=we(f),p=un();if(p&&/.+\.mp4$/.test(h.href)){e.creativeElement.addEventListener("loadstart",o),h.query&&!/pv=0.2/.test(h.query)?f+="&pv=0.2":h.query||(f+="?pv=0.2");var v=f.replace(/^(https:|http:)/,"");v=v.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.creativeElement.setAttribute("src",v),e.putOnDocument()}else e.log("browser support error or video format error",p),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}))}},{key:"loadHtml",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide();var i=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("html creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),1e4),a=function(){var r;clearTimeout(i);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(r.addEventListener("click",(function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("click")})),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))};e.creativeElement.addEventListener("load",a);var o=e.creativeUrl.replace(/^(https:|http:)/,"");e.creativeElement.setAttribute("src",o+"?isMute=1&domain="+document.domain),e.putOnDocument()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");if(e.isSuperShow){var r=1e3*e.creativeObject.actDuration||2e3;an(e.creativeObject.actUrl).then((function(t){e.actCreativeElement=t,e.creativeElement.style.display="none",e.superShowPlaying=!0,e.showSuperShow(),e.tryAddStyle(),e.ad.emit("impression"),setTimeout((function(){e.actCreativeElement.style.display="none",e.superShowPlaying=!1,e.ad.aborted||e._play()}),r)}))["catch"]((function(){e.superShowPlaying=!1,e._play()}))}else e._play();t()}))}},{key:"_play",value:function(){var e=this;e.log("play"),e.creativeObject.isSuperPause||(e.$adzone.style.boxShadow="#000 0px 0px 1.4rem"),e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement.style.display="",e.$adzone.style.zIndex=80,e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),xr(e.$adzone),e.$adContainer&&xr(e.$adContainer),e.resize(!0),e.isAudioPause()&&e.initAudio(),"video"==e.renderType&&e.creativeElement&&e.creativeElement.play(),e.notifyPlayerAudioPauseStart(),e.onFirstPlaying()}},{key:"showSuperShow",value:function(){var e=this;e.actCreativeElement.style.width="100%",e.actCreativeElement.style.height="100%",e.actCreativeElement.style.visibility="",e.$adzone.appendChild(e.actCreativeElement),e.$adContainer.appendChild(e.$adzone),xr(e.$adzone),e.$adContainer&&xr(e.$adContainer),e.resizeSuperShow()}},{key:"resizeSuperShow",value:function(){var e=this,t={},n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.actWidth||980,t.creativeHeight=r.actHeight||540;var i=[980,540];t.boxWidth=t.videoWidth*r.actWidthScale||i[0],t.boxHeight=t.videoHeight*r.actHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=on({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});a.max?(t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(t),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.$adzone.style.position="absolute",e.log("resize supershow",t)):e.log("fail to resize"),e.detectCollision()}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing"),t.emit("impression"),"video"!=e.renderType&&e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon),1==t.targetedAd&&(e.log("precise ad and add icon"),t.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then((function(e){e.addEventListener("click",(function(){window.open("http://www.iqiyi.com/common/secret.html")}))}))),Infinity!=e.ad.duration&&"video"!=e.renderType&&e.updateCountdown();var n=e.vv.sdk;e.ad.qrShowStyle&&n.pauseView&&n.pauseView.setQrStyle(e.ad,e.size)}}},{key:"resize",value:function(){var e=this;if(e.superShowPlaying)e.resizeSuperShow();else{var t=e.size,n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.width,t.creativeHeight=r.height,t.creativeWidth=t.creativeWidth||e.size.creativeRawWidth||300,t.creativeHeight=t.creativeHeight||e.size.creativeRawHeight||250,r.width==e.size.creativeRawWidth&&r.height==e.size.creativeRawHeight||e.log("实际尺寸与填写尺寸不同");var i=[600,500];t.boxWidth=t.videoWidth*r.widthScale||i[0],t.boxHeight=t.videoHeight*r.heightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=on({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});if(a.max){t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(e.size),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px";var o=e.vv.sdk;e.ad.qrShowStyle&&o.pauseView&&(o.pauseView.resizeQrStyle(t),o.rollView.resizeQrMask()),e.log("resize",t)}else e.log("fail to resize");e.detectCollision()}}},{key:"setPosition",value:function(e){var t=this.vv.mw,n=t.video(),r=(t.width()-n.offsetWidth)/2,i=(t.height()-n.offsetHeight)/2;e.x=r+(e.videoWidth-e.computedWidth)/2,e.y=i+(e.videoHeight-e.computedHeight)/2}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"toggleVideoVolumn",value:function(){var e=this,t=e.ad,n=e.creativeElement;n.muted=!n.muted;var r=n.muted;if(e.log("video pause muted",r),!r){e.hasOpenVolumn||(e.hasOpenVolumn=!0,Xt(t,{pingbackType:"statistics",subtype:"clk",customInfo:"volume_button;vss:1"}));var i=e.vv.mw.volume();n.volume=i||.15,e.log("video pause volume",n.volume)}return r}},{key:"isAudioPause",value:function(){return!!this.creativeObject.audioUrl}},{key:"initAudio",value:function(){var e=this;e.$audio=document.createElement("audio"),e.$audio.preload="auto";var t=e.creativeObject.audioUrl,n=we(t);n.query&&!/pv=0.2/.test(n.query)?t+="&pv=0.2":n.query||(t+="?pv=0.2"),e.$audio.src=t.replace(/^(https:|http:)/,""),e.vv.audioPause=e.ad,e.bindAudioEvt()}},{key:"closeAudioPause",value:function(e){var t=this;if(!t.isStopped&&!t.hasClosed)if(t.hasClosed=!0,"manual"!=e)if(t.$audio&&!t.audioError){t.$adzone.classList.add("cupid-fade-out");var n=t.vv.mw.volume();t.log("audio volume",n),t.$audio.volume=n,t.$audio.play()}else t.abortAudioPause();else t.abortAudioPause(e)}},{key:"bindAudioEvt",value:function(){var e=this;e.$audio&&(e.$audio.addEventListener("play",(function(){e.log("audio start play"),e.audioPlayed=!0,e.sendAudioPingback(0)})),e.$audio.addEventListener("ended",(function(){e.log("audio ended"),e.$audio=null,e.sendAudioPingback(1),e.abortAudioPause()})),e.$audio.addEventListener("error",(function(){e.audioError=!0,e.$audio=null,e.audioPlayed&&e.abortAudioPause()})))}},{key:"notifyPlayerAudioPauseEnd",value:function(e){var t=this,n=t.vv.sdk;t.log("notify player pause end, is audio:",t.isAudioPause()),n.emit("pause_end",{type:t.isAudioPause()?"audio":"common",status:e||"common"})}},{key:"notifyPlayerAudioPauseStart",value:function(){var e=this,t=e.vv.sdk;e.log("notify player pause start, is audio:",e.isAudioPause()),t.emit("pause_start",{type:e.isAudioPause()?"audio":"common",duration:e.isAudioPause()?2.5:0})}},{key:"abortAudioPause",value:function(e){var t=this;t.vv.audioPause=null,t.notifyPlayerAudioPauseEnd(e),t.ad.abort()}},{key:"sendAudioPingback",value:function(e){Xt(this.ad,{pingbackType:"statistics",subtype:"auu",customInfo:xe({acp:e},",",":")})}}]),n}($n);function xr(e){e.style.display="",e.style.visibility=""}function kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var wr=function(e){O()(n,e);var t=kr(n);function n(e,r){var i;A()(this,n),i=t.call(this,e,r);var a=ln()(i);return a.size={},a.creativeObject=r.creative.creativeObject,a.creativeUrl=a.creativeUrl||a.creativeObject.creativeUrl,a.renderType=a.renderType||Gn(a.creativeUrl),a.option={position:"bottom-left"},"image"!==a.renderType&&a.ad.emit("error",new Error("unknown render type: "+a.creativeUrl)),i}return D()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.$adzone.style.zIndex=e.creativeObject.zIndex||80,e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),Sr(e.$adzone),e.$adContainer&&Sr(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=ee.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("实际尺寸与填写尺寸不同")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=on({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,u=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+u,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.remain=t.duration,e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e}}]),n}($n);function Sr(e){e.style.display="",e.style.visibility=""}var Tr=function(){function e(t,n){A()(this,e);var r=n.vv.sdk;this.log=r.logger.getLogger("wholeCornerTimer"),this.status=this.initStatus(t),this.timer=this.initTimer(),this.ad=n.ad,this.view=n.vv}return D()(e,[{key:"initStatus",value:function(e){return{showStatus:{duration:e.showDuration,showedSeconds:0,currentSlice:0},hideStatus:{duration:e.showInterval,hidedSeconds:0,currentSlice:0},display:!0}}},{key:"initTimer",value:function(){var e=new hn(1e3);return e.on("timer",this.timerHandler.bind(this)),e}},{key:"timerHandler",value:function(){var e=this.status;(function(e){var t=e.display,n=e.hideStatus;return!t&&n.duration===n.hidedSeconds})(e)&&this.resetToShow(),function(e){var t=e.display,n=e.showStatus;return t&&n.duration===n.showedSeconds}(e)&&this.resetToHide(),e.display&&this.updateShowStatus(),e.display||this.updateHideStatus()}},{key:"resetToShow",value:function(){var e=this.status,t=this.timer,n=this.view.adCollisionDetection;e.display=!0,e.showStatus.currentSlice++,e.hideStatus.hidedSeconds=0,n.wholeCornerCollidedWithOriginalList()?(n.notifyWholeCornerToHide(),t.running&&t.stop()):n.notifyWholeCornerToShow()}},{key:"resetToHide",value:function(){var e=this.status,t=this.view.adCollisionDetection;e.display=!1,e.hideStatus.currentSlice++,e.showStatus.showedSeconds=0,t.wholeCornerCollidedWithOriginalList()?t.notifyWholeCornerToHide():t.notifyWholeCornerToHide({forceHide:!0})}},{key:"updateShowStatus",value:function(){this.status.showStatus.showedSeconds++;var e=this.status.showStatus;e.showedSeconds,e.duration}},{key:"updateHideStatus",value:function(){this.status.hideStatus.hidedSeconds++;var e=this.status.hideStatus;e.hidedSeconds,e.duration}}]),e}();function Pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Er=function(e){O()(n,e);var t=Pr(n);function n(e,r){var i;A()(this,n),i=t.call(this,e,r);var a=ln()(i);return a.vv.wholeCorner=r,a.isRatioFixed=!0,a.size={},a.creativeObject=r.creative.creativeObject,a.creativeUrl=a.creativeUrl||a.creativeObject.creativeUrl,a.renderType=a.renderType||Gn(a.creativeUrl),a.option={position:"bottom-left"},"image"!==a.renderType&&a.ad.emit("error",new Error("unknown render type: "+a.creativeUrl)),i}return D()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.initTimerController(),Ar(e.$adzone),e.$adContainer&&Ar(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"pause",value:function(){this.log("pause")}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=ee.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("实际尺寸与填写尺寸不同")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=on({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"detectCollision",value:function(){var e=this,t=e.ad,n=(e.$adzone||{}).style,r=e.vv.adCollisionDetection,i={id:t.id,x:n.left.replace("px",""),y:n.top.replace("px",""),width:n.width.replace("px",""),height:n.height.replace("px",""),willDefinitelyCollide:!0};e.wholeCornerTimerController&&(i.timer=e.wholeCornerTimerController.timer,i.timerStatus=e.wholeCornerTimerController.status),r.setWholeCorner(i),r.notifyWholeCornerToShow()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,u=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+u,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"initTimerController",value:function(){var e=this,t=e.ad,n=t&&t.fullCorner?t.fullCorner:{};e.isInterval=!(!n.showDuration||!n.showInterval),e.isInterval&&(e.wholeCornerTimerController=new Tr(n,e),e.timer=e.wholeCornerTimerController.timer,e.timer.start())}}]),n}($n);function Ar(e){e.style.display="",e.style.visibility=""}function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Dr=function(e){O()(n,e);var t=Ir(n);function n(e,r){var i;A()(this,n),i=t.call(this,e,r);var a=ln()(i);return a.creativeUrl=a.creativeUrl||a.creativeObject.url,a.backgroundImg=a.creativeObject.backgroundImg||"//pic0.iqiyipic.com/lequ/20221124/fdf9a664e95a4fceb3b34e23d2f50445.jpg",a.subMaterialImgUrl=a.creativeObject.subMaterialImgUrl||"//pic1.iqiyipic.com/lequ/20221124/5307160cfcc445e68a00c24f1cc5ea4c.png",a.hasPlaying=!1,"roll"===a.type&&(a.creativeObject.playCount=a.creativeObject.playCount||5,a.creativeUrl=a.creativeObject.m400Url),"mobile_flow_new"===a.type&&(a.creativeObject.duration=0),a.renderType=a.renderType||Gn(a.creativeUrl),a.size={},ee.includes(["image","video"],a.renderType)||a.ad.emit("error",new Error("unknown render type: "+a.creativeUrl)),i}return D()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){e.isStopped&&r(new Error("has ended"));var i=5e3,a=an(e.backgroundImg,i).then((function(t){e.$backgroundImg=t,e.size.backgroundImg={width:t.width,height:t.height}})),o=an(e.subMaterialImgUrl,i).then((function(t){e.$subMaterialImg=t,e.size.subMaterialImg={width:t.width,height:t.height}})),s=Promise.resolve("cPromise");s="video"==e.renderType?e.loadVideo():an(e.creativeUrl,i).then((function(t){e.$creativeElement=t,e.size.creativeElement={width:t.width,height:t.height}})),Promise.all([a,o,s].map((function(t,n){return t["catch"]((function(){return 2===n?(e.emitCreativeError("error",e.creativeUrl),"error"):"success"}))}))).then((function(i){"error"===i[2]?r(new Error("creative load error")):(e.log("load creative success"),t.emit("creativeLoad"),n("creative load success"))}))["catch"]((function(t){e.log("load promise error",t.message),r(t)})),e.log("load creativeUrl")}))}},{key:"loadVideo",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("video");r.setAttribute("preload","auto"),r.muted=!0,e.$creativeElement=r;var i=e.creativeObject.playCount||1,a=setTimeout((function(){e.$creativeElement.removeEventListener("loadstart",o),e.log("video creative load error timeout"),n(new Error("creative error"))}),15e3),o=function(){var t;e.log("video pause load start");try{t=e.$creativeElement}catch(r){e.log("video creative can not get contentDocument:",r)}t?(t.addEventListener("ended",u),t.addEventListener("error",c),t.addEventListener("canplay",l)):(e.log("video creative load error"),n(new Error("creative error")))},s=1,u=function(){var t=this;e.log("current play ended",s+"/"+i),s<i?(t.currentTime=0,t.play(),s++):(t.pause(),e.ad.emit("complete"))},c=function(){e.log("video creative load error"),n(new Error("creative error"))},l=function(){clearTimeout(a),e.size.creativeRawWidth=e.creativeObject.width,e.size.creativeRawHeight=e.creativeObject.height,e.log("current play count",s+"/"+i),t()},d=e.creativeUrl,f=we(d),h=un();if(h&&/.+\.mp4$/.test(f.href)){e.$creativeElement.addEventListener("loadstart",o),f.query&&!/pv=0.2/.test(f.query)?d+="&pv=0.2":f.query||(d+="?pv=0.2");var p=d.replace(/^(https:|http:)/,"");p=p.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.$creativeElement.setAttribute("src",p)}else e.log("browser support error or video format error",h),n(new Error("creative error"))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");e._play(),t()}))}},{key:"_play",value:function(){var e=this.vv.sdk,t=e.videoMidware;this.log("pause max _play"),this.view=e.viewController&&e.viewController.pauseMaxView,this.view?(this.log("pause max view init"),t.setAdMaxStatus({adMax:!0,play:!1}),this.view.init(this.$creativeElement,this.$subMaterialImg,this.$backgroundImg,this.ad),this.view.canPlay?("video"==this.renderType&&this.$creativeElement&&this.$creativeElement.play(),this.onFirstPlaying()):(this.ad.emit("error",new Error("pause max can not play")),this.ad.abort())):this.ad.emit("error",new Error("no ui"))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing"),t.emit("impression"),"video"!=e.renderType&&e.initProgress(),Infinity!=e.ad.duration&&"video"!=e.renderType&&e.updateCountdown()}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"exit",value:function(){var e=this.vv.sdk;this.log("pause max resize"),this.view=e.viewController&&e.viewController.pauseMaxView,this.view&&this.view.exitAnime()}},{key:"stop",value:function(){var e=this;e.timer&&e.timer.stop(),e.timer=null,e.isStopped=!0,e.log("pause max abort")}},{key:"toggleVideoVolumn",value:function(){var e=this,t=e.ad,n=e.$creativeElement;n.muted=!n.muted;var r=n.muted;if(e.log("video pause muted",r),!r){e.hasOpenVolumn||(e.hasOpenVolumn=!0,Xt(t,{pingbackType:"statistics",subtype:"clk",customInfo:"volume_button;vss:1"}));var i=e.vv.mw.volume();n.volume=i||.15,e.log("video pause volume",n.volume)}return r}}]),n}($n),Lr={roll:hr,crazy:hr,mraid:hr,common_pause:br,definition_switching:mr,common_overlay:wr,whole_corner:Er,PauseMax:Dr};var Or,Rr,Cr={0:"page",1:"preroll",2:"midroll",3:"postroll",4:"corner",5:"mark",6:"pause",7:"toolbar",8:"viewPoint",9:"overlay",10:"common_overlay",11:"common_overlay",13:"whole_corner",15:"briefRoll"},Mr={1:"PMP",2:"trueView",3:"vip",4:"origin",6:"skippable",7:"sports-vip",8:"brief",9:"brief",12:"overlay-brief",13:"brief",37:"pause-max",39:"pause-max"},Br={0:{negative:[32,128]},32:{positive:[32,128]}},Nr={CODE_S_HTTP_ERROR:301,CODE_S_PARSE_ERROR:304,CODE_VIDEO_HTTP_ERROR:504,CODE_S_INVALID_PLAYER:308,CODE_S_PARAM_ERROR:305,CODE_S_COUPON_NOT_FOUND:309},Fr=function(){function e(){A()(this,e)}return D()(e,[{key:"parse",value:function(e){try{e=JSON.parse(e)}catch(t){}return e}},{key:"stringify",value:function(e){try{e=JSON.stringify(e)}catch(t){}return e}},{key:"set",value:function(e,t){t=this.stringify(t);try{localStorage[e]=t}catch(n){}}},{key:"get",value:function(e){var t;try{t=localStorage[e],t=this.parse(t)}catch(n){}return t}}]),e}(),qr=new(function(){function e(t,n){A()(this,e);var r=this;r.store=n,r.key=t,r.data=r.store.get(t)}return D()(e,[{key:"save",value:function(){this.store.set(this.key,this.data),document.cookie="QP0037="+this.data.adPlayedDurationInDay+"; Max-Age=31104000; Domain=.iqiyi.com; Path=/"}}]),e}())("mars",new Fr);Or=qr.data||{},Rr=(new Date).getDay()!=new Date(Or.timestamp).getDay(),Or.timestamp&&!Rr||(qr.data={timestamp:(new Date).getTime(),adPlayedDurationInDay:0,videoPlayedDurationInDay:0},qr.save()),qr.save();var jr=qr;function Ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Vr=ee.is,Hr=function(e){O()(n,e);var t=Ur(n);function n(e,r){var i;A()(this,n),i=t.call(this,"ad");var a=ln()(i);return ee.extend(a,e),a.setParent(r),a.slot=r,a.state="idle",a.memory={},a.elements=[],a.bindEvent(),a.init(),a.setAdMap(),i}return D()(n,[{key:"init",value:function(){var e=this;e.playTimes=0,e.iesKeyReplaced={},e.id=ee.compact(["ad",e.getVal("videoEventId"),ee.uid(),e.comment]).join("-");var t,n,r=e.getParentByName("sdk");e.debug=r.logger.getLogger("ad:"+e.id),e.timeSlices=ee.split(e.timeSlices,","),e.impressionTracking=e.impressionTracking||{},e.clickTracking=e.clickTracking||{},e.eventTracking=(t=e.eventTracking,n={},ee.each(t,(function(e){if(e){var t=e.event;Vr.array(n[t])||(n[t]=[]),ee.each(e.trackings,(function(e){n[t].push(e)}))}})),n),e.creative=e.creative||{},e.vast&&function(e,t,n){if(t){var r=Fn(t,e.debug);n("parsed vast",r,t),r.isEmpty?(n("empty vast"),e.sendThirdPartyPingback({errorCode:904,errorMessage:t})):r.error?(n("vast xml parse error",r.error),e.sendThirdPartyPingback({errorCode:903,errorMessage:t})):(function(e,t){if(e&&t){var n="${SETTLEMENT}";Cn.each("redirect clickThrough creativeUrl".split(" "),(function(r){e[r]=Nn(e[r],n,t)})),e.clickTrackings=Cn.map(e.clickTrackings,(function(e){return Nn(e,n,t)})),e.impressionTrackings=Cn.map(e.impressionTrackings,(function(e){return Nn(e,n,t)})),Cn.mapValues(e.eventTracking,(function(e){return Cn.map(e,(function(e){return Nn(e,n,t)}))}))}}(r,e.settle),r.clickThrough&&(e.clickThrough=r.clickThrough),e.dspIcon||(e.dspIcon=r.icon),e.impressionTracking.thirdPartyTracking=ee.union(e.impressionTracking.thirdPartyTracking,r.impressionTrackings),e.clickTracking.thirdPartyTracking=ee.union(e.clickTracking.thirdPartyTracking,r.clickTrackings),ee.forIn(r.eventTracking,(function(t,n){e.eventTracking[n]=e.eventTracking[n]||[],e.eventTracking[n]=ee.union(e.eventTracking[n],t)})),e.creative.creativeObject=function(e,t,n){t=t||{},"common_overlay"==e?t.creativeUrl=n.creativeUrl||t.creativeUrl:t.url=n.creativeUrl||t.url;return t}(e.creative.templateType,e.creative.creativeObject,r))}}(e,ee.get(e,"vast.vastObject"),e.debug),e.creative.rawCreativeObject=e.creative.creativeObject,e.creative.creativeObject=function(e){var t={};return ee.forIn(e,(function(e,n){if(Vr.string(e)&&(e=ee.trim(e)),"true"==e)e=!0;else if("false"==e)e=!1;else{var r=parseFloat(e);r==e&&(e=r)}t[n]=e})),t}(e.creative.creativeObject),e.duration=e.creative.creativeObject.duration,e.seekable=e.seekable||0,e.clickArea="",e.trueviewSource=1,e.adInfo=nn(e),this.handleAdMsm()}},{key:"handleAdMsm",value:function(){var e=this;e.macroSubstitutionMap&&ee.forIn(e.macroSubstitutionMap,(function(t,n){t=Re.decode(t),t=encodeURIComponent(t),e.macroSubstitutionMap[n]=t}))}},{key:"bindEvent",value:function(){!function(e){e.on("video-playing",(function(){e.slot.show.request.vv.videoState="playing"})),e.on("video-play",(function(){e.slot.show.request.vv.videoState="play",e.play()})),e.on("video-loadstart",(function(){e.emit("creativeLoad")})),e.on("video-pause",(function(){e.slot.show.request.vv.videoState="paused",e.pause()})),e.on("video-willended",(function(){var t=e.template;e.debug("ad willended type and state",e.deliverName(),e.state),"skippable"==e.deliverName()&&"ended"!=e.state&&(t.showGuide=!0,t.loadGuide())})),e.on("video-ended",(function(){e.emit("complete",{type:"video-ended"})})),e.on("video-error",(function(){var t=e.getParentByName("vv");if(t.sdk.setViewController(),e.template){e.emit("error",{message:"creative http error",data:{creativeUrl:e.template.creativeUrl}});var n=t.schedule;(e==n.getCurrentAd()||t.isCurrentVV()&&0==e.index())&&e.abort()}})),e.on("click",ee.throttle((function(){e.debug("click",e.adInfo),cr.send(e,"click"),"skippable"==e.deliverName()&&e.emit("trueview")}),500,{trailing:!1})),e.once("impression",(function(){if(!e.hasImpressed)if("ended"!=e.state||e.slot.isViewPoint()){e.debug("impression",e.creative.templateType,e.orderItemId),e.hasImpressed=!0,e.handleConflict(),e.slot.sendEmptyTrackingBeforeTimeSlice(sn(e.timeSlices)),cr.send(e,"impression");var t=e.slot.show.request;if(t.sendInventory(),Gr(e)){e.debug("roll ad start");var n=t.vv;n.onNetworkFree(),function(e){var t=1===e.slot.cuepointType,n=e.index()===e.slot.ads.length-1;return t&&n}(e)&&n.schedule&&n.schedule.requestWholeCorner(),e.emit("pingback",{subtype:"start"}),cr.send(e,"start")}}else e.debug("impression 失败, 广告已结束",e)})),e.once("trueview",(function(){e.debug("trueview",e.creative.templateType,e.orderItemId),cr.send(e,"trueview")})),e.on("skip",(function(t){e.debug("click skip");var n=t||!1;ee.includes(["trueView","vip","sports-vip"],e.deliverName())||n?e.debug("not send skip click"):e.emit("pingback",{subtype:"skipClick"});var r=e.getParentByName("sdk");if(e.isSkippable()||n){e.debug("skip success");var i={subtype:"skip",customInfo:{ofs:e.getPlayedTime(),skt:e.getSkippedType()}};if("skippable"==e.deliverName()){var a={tag:e.getSkippedStage(),tnr:e.getSlotLength(),cor:e.getVal("order")};ee.extend(i.customInfo,a)}if(e.emit("pingback",i),"skippable"==e.deliverName()&&e.sendPlayDurationPingback(e.getPlayedTime()),"trueView"==e.deliverName()||"skippable"==e.deliverName()){var o={fe_ofs:e.getPlayedTime(),fe_tag:e.getSkippedStage()};e.extendTrackingInfo=xe(o,";",":"),cr.send(e,"close")}r.rollView&&r.rollView.pingback("ply_adskpd"),ee.each(e.slot.ads,(function(e){e.skipped=!0})),e.emit("end",{type:"skip"})}else if(r.viewController){if(r.vipCheckConflict&&"A10001"===r.vipCheckConflict.code)return;r.viewController.pullCashier(e)}})),e.once("creativeLoad",(function(){Xt(e,{pingbackType:"creative",subtype:"load",customInfo:ee.get(e,"matchedVideo.definitionLevel")})})),e.on("clickAndOpen",(function(t,n){e.h5tl||(e.hasImpressed||e.slot.isViewPoint()?(e.emit("click"),e.emit("open",t,n)):e.debug("has not impressed"))})),e.on("open",ee.throttle((function(t,n){if(e.debug("open"),Vr.element(t)){var r=t;t=r.getAttribute("href"),n=n||r.getAttribute("target")}t=t||er(e),ee.size(t)>2&&window.open(t,n||"_blank")}),500,{trailing:!1})),e.once("complete",(function(t){e.debug("complete");var n=e.getParentByName("vv");(Gr(e)&&(jr.data.adPlayedDurationInDay+=e.duration,jr.save()),"pause"==zr(e))?n.schedule.loadPause({from:e,requestIndex:e.slot.show.request.requestIndex+1}):e.emit("end",t)})),e.once("end",(function(t){if(t=t||{},e.debug("end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}if(Wr(e)){var r=e.getParentByName("vv");ee.remove(r.currentOverlayAds,(function(t){return e==t}))}ee.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),e.slot.isViewPoint()&&e.slot.hasNotifiedStart&&(e.slot.notifyPlayer("adplayer_ad_end"),e.slot.complete()),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?Yr(e):$r(e)})),e.on("replayComplete",(function(t){e.debug("complete replay"),Gr(e)&&(jr.data.adPlayedDurationInDay+=e.duration,jr.save()),e.emit("replayEnd",t)})),e.on("replayEnd",(function(t){if(t=t||{},e.debug("replay end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}ee.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?Yr(e):$r(e)})),e.on("pingback",(function(t){var n=ee.map(e.slot.ads,(function(e){return e.timeSlices.join("")})).join("|"),r=t.customInfo||{};r.rpt=e.playTimes-1,e.isSeekableOriginalRoll()&&ee.includes(["1q","mid","3q","sp"],t.subtype)&&(r.sek=e.isSeeked?1:0);var i=e.slot.show.request;i.adBreak&&(t.sequenceId=i.adBreak.sequenceId),t=ee.extend({},t,{pingbackType:"ad",orderItemId:e.orderItemId,creativeId:e.creative.creativeId,dspId:e.dspId,adStrategy:[e.slot.cuepointType,e.timeSlices.join(""),n].join(":"),customInfo:xe(r,",",":")}),Xt(e,t)})),e.on("tracking",(function(t){t&&cr.send(e,t)})),e.on("progressReseted",(function(t,n){var r=e.template.timer;r&&(r.stop(),Vr.number(t)&&!n&&(r.currentCount=t,t===e.duration?(r.emit("timerComplete"),e.debug("after ad progress reset to complete",t)):(r.start(),e.debug("after ad progress reset to",t,e.template.timer.currentCount))))})),e.on("error",(function(t){t=t||{},e.debug("error",t.message,t.data,e.adInfo),e.error=t;var n=t.message;if("creative http error"==n||"creative timeout"==n){var r=ee.get(t,"data.creativeUrl"),i="creative timeout"==n?505:504;e.emit("creativeError",r,i)}setTimeout((function(){e.state="error"}))})),e.once("creativeError",(function(t,n){Xt(e,{pingbackType:"creative",subtype:"error",errorCode:n,errorMessage:t,requestCount:-1})})),e.on("closePauseMax",(function(){Xt(e,{pingbackType:"statistics",subtype:"close"})}))}(this)}},{key:"index",value:function(){return ee.indexOf(this.slot.ads,this)}},{key:"tryLoadToVideo",value:function(){var e=this;return e.load().then((function(){return e.isLiving((function(){return e.template.loadRollToVideo()}))}))["catch"]((function(t){var n=e.slot.show.request;n.noCreativeUrlAds&&"fail to match ad video"==t.message&&n.noCreativeUrlAds.push(t.data),e.debug("load to video fail",t)}))}},{key:"updateLoadStatusAndInitTemplate",value:function(){var e=this;return e.debug("ready to update ad load status and init template"),e.load().then((function(){return e.isLiving((function(){return e.template.bindPlayingEvt()}))}))["catch"]((function(t){e.debug("update ad load status and init template fail",t)}))}},{key:"load",value:function(){var e=this;return"ended"==e.state?Promise.reject("ended"):e.initTemplate().then((function(){return e.memory.load=e.memory.load||new Promise((function(t){e.debug("load"),e.state="loading",t(e.template.load())})),e.memory.load}))}},{key:"initTemplate",value:function(){var e=this;return e.isLiving((function(){return e.memory.initTemplate=e.memory.initTemplate||new Promise((function(t,n){e.template=function(e){var t=e.creative.templateType,n=e.slot.cuepointType,r=e.deliverName(),i=Lr[t];if(6===n&&(i=1!=e.orderItemType||"pause-max"===r?Dr:br),i)return new i(t,e)}(e),e.template?(e.duration=e.template.getDuration(),isNaN(e.duration)?n(new Error("invalid duration")):(e.debug("init template success"),"trueView"!=e.deliverName()&&"skippable"!=e.deliverName()||(e.impressionTime=function(e,t){var n=ee.endsWith(e,"%"),r=parseFloat(e);n&&(e=t*r/100);e>=0&&e<=t||(e=t/2);return e=parseInt(e)}(e.impressionTime,e.duration),e.skipTime=function(e,t){(e=parseInt(e))>=0&&e<=t||(e=Math.min(5,t));return e}(e.skipTime,e.duration)),t())):(Xt(e,{pingbackType:"statistics",subtype:"unsupported"}),n(new Error("unknown template:"+e.creative.templateType)))}))["catch"]((function(t){return e.emit("error",t),Promise.reject(t)})),e.memory.initTemplate}))}},{key:"setAdMap",value:function(){this.getParentByName("sdk").adMap[this.id]=this}},{key:"getPlayedTime",value:function(){return(this.duration||0)-(this.remain||0)}},{key:"play",value:function(){var e=this;return e.isLiving((function(){return e.load()})).then((function(){return e.isLiving((function(){if("paused"==e.slot.show.request.vv.videoState&&Gr(e)&&"roll"==e.template.type)return Promise.resolve();if(e.notAutoPlayNext=!1,"paused"==e.state)return e.resume();if("playing"!=e.state||e.slot.isSeekableOriginalSlot()&&"playing"==e.state){e.playTimes++,e.state="playing";var t=e.slot.show.request,n=t.from;return"pause"==t.type&&t.from&&(n.isPauseMax()&&e.isPauseMax()?(console.log("come here"),n.abort(!0)):n.isPauseMax()?(n.template.exit(),n.abort(!0)):n.abort()),e.isConflict()?Promise.reject(new Error("conflict")):(Wr(e)&&e.getParentByName("vv").currentOverlayAds.push(e),(e.slot.isViewPoint()||e.slot.isWholeCorner())&&e.slot.notifyPlayer("adplayer_ad_start"),e.debug("ad template play"),!e.isPauseMax()&&n&&n.isPauseMax()?setTimeout((function(){return e.template.play()}),600):e.template.play())}}))}))["catch"]((function(t){if(e.error=e.error||t,e.debug("play error",e.error.message),e.error&&e.emit("end",{type:"error"}),"ended"!==e.error)return Promise.reject(t)}))}},{key:"resume",value:function(){var e=this;return e.isLiving((function(){e.debug("resume");var t=e.template;return e.state="playing",t&&Vr.fn(t.resume)?t.resume():t.play()}))}},{key:"isPauseMax",value:function(){var e=this;return"pause-max"===e.deliverName()||6===e.slot.cuepointType&&1!=e.orderItemType}},{key:"tryPlayNextAd",value:function(){var e=this,t=e.slot.ads[e.index()+1];t?t.skipped?t.tryPlayNextAd():(e.debug("play next ad"),t.play()):e.skipped||e.aborted?e.slot.end():e.slot.complete(3)}},{key:"abort",value:function(e){if(this.aborted=!0,this.emit("end",{type:"abort"}),"common_pause"==this.creative.templateType){var t=this.getParentByName("sdk"),n=t.videoMidware;t.rollView&&t.rollView.closeQrMask(),t.viewController&&t.viewController.pauseMaxView&&!e&&(n.setAdMaxStatus({adMax:!1,play:!1}),t.viewController.pauseMaxView.destroy())}}},{key:"pause",value:function(){var e=this;return e.isLiving((function(){e.state="paused",e.template.pause()}))}},{key:"isLiving",value:function(e){var t,n=this;if(n.error?t=n.error:"ended"==n.state&&(t="ended"),t&&!n.canReplay())return Promise.reject(t);if(n.error)return Promise.reject(t);var r=e();return Promise.resolve(r)}},{key:"deliverName",value:function(){return Mr[this.deliverType]||""}},{key:"typeName",value:function(){return zr(this)}},{key:"hasDspIcon",value:function(){return!(1!=this.isDSP||!this.dspIcon)}},{key:"putIcon",value:function(e,t){var n=this;return t=t||{},/\.qiyipic\.com/.test(e)&&(e=e.replace(/\.qiyipic\.com/,".iqiyipic.com")),an(e).then((function(r){return n.$adzone?(n.debug("put icon",e),r.style.bottom=(t.bottom||0)+"px",r.style.left=(t.left||0)+"px",r.style.width="25px",r.style.height="25px",r.style.position="absolute",n.$adzone.appendChild(r),n.elements.push(r),r):new Error("no adzone")}))}},{key:"reset",value:function(){var e=this;e.debug("reset"),e.off(),e.bindEvent(),e.state="idle";var t=e.template;t&&t.reset&&t.reset()}},{key:"isConflict",value:function(){if(Wr(this)){var e=this.slot.show.request.vv.currentOverlayAds,t=ee.some(e,(function(e){return e.slot.isViewPoint()}));if(t)return!0}return!1}},{key:"handleConflict",value:function(){var e=this,t=e.slot.show.request,n=t.vv.currentOverlayAds;"pause"!=t.type&&"midroll"!=t.type||ee.each(n,(function(e){var n=e.$adzone;n&&(n.style.display="none"),"midroll"==t.type&&e.pause()}));var r=ee.filter(n,(function(t){if(e!=t){if(e.slot.adZoneId==t.slot.adZoneId)return!0;if(e.slot.isViewPoint())return!0}return!1}));ee.each(r,(function(t){e.debug("same adzone conflict",e.orderItemId,"kill",t.orderItemId),t.abort()}))}},{key:"isSkippable",value:function(){return!!ee.includes(["trueView","vip","sports-vip"],this.deliverName())||function(e){var t=e.getParentByName("vv"),n=t.sdk;if(!n.isVIP)return!1;if("tw"===n.locale&&n.isVIP)return!0;var r=t.videoInfo.videoType||0,i=n.vipCheckResult.userVipType||0,a=Br[r];if(!a)return!0;if(ee.has(a,"positive"))return function(e,t){return Kr(e,t)>0}(a.positive,i);if(ee.has(a,"negative"))return!function(e,t){return Kr(e,t)===t}(a.negative,i)}(this)}},{key:"getSkippedType",value:function(){return{2:1,3:2,6:4,7:5}[this.deliverType]}},{key:"resize",value:function(){var e=this;return e.isLiving((function(){"paused"!=e.state&&"playing"!=e.state||e.template.resize()}))}},{key:"isSeekableOriginalRoll",value:function(){return"origin"==this.deliverName()&&Boolean(this.seekable)||15==this.slot.cuepointType}},{key:"canReplay",value:function(){return this.slot.isSeekableOriginalSlot()}},{key:"sendThirdPartyPingback",value:function(e){Xt(this,ee.extend({pingbackType:"statistics",subtype:"tps"},e))}},{key:"getSkippedStage",value:function(){return this.remain<=0?2:1}},{key:"getSlotLength",value:function(){return this.slot.ads.length}},{key:"sendPlayDurationPingback",value:function(e){Xt(this,{pingbackType:"statistics",subtype:"vpd",customInfo:"pt:0,pc:1,pd:"+e+",pg:"+e})}}]),n}(qe);function zr(e){var t=e.slot.cuepointType||-1;return Cr[t]||t}function Gr(e){return ee.includes([1,2,3,15],e.slot.cuepointType)}function Wr(e){return ee.includes([8,10,11],e.slot.cuepointType)}function Kr(e,t){return Array.isArray(e)?"number"!=typeof t?0:ee.sum(e)&t:0}function $r(e){var t=e.slot,n=e.getParentByName("vv").adCollisionDetection;t.isWholeCorner()||(n.removeAd(e.id),e.debug("wholecorner isvalid",n.wholeCornerIsValid(),";wholecorner status",n.getWholeCorner().showing),n.notifyWholeCornerToShow())}function Yr(e){var t=e.getParentByName("vv").adCollisionDetection;t.setWholeCorner({}),t.notifyWholeCornerToHide()}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Jr=ee.is,Xr=function(e){O()(n,e);var t=Qr(n);function n(e,r,i){var a;A()(this,n),a=t.call(this,"slot");var o=ln()(a);return o.setParent(i),ee.extend(o,e),o.show=r,o.state="idle",o.id=ee.uid(),o.debug=i.vv.sdk.logger.getLogger("slot"),o.hasNotifiedStart=!1,o.hasInited=!0,o.hasRequestedVipDoc=!1,o.skipAdParams={},o.parseAd(),o.hasSkippableAdInSlot=o.hasSkippableAdInSlots(),a}return D()(n,[{key:"parseAd",value:function(){var e=this;this.ads=this.ads.map((function(t){return new Hr(t,e)}))}},{key:"play",value:function(){var e=this;if(1===e.cuepointType&&e.initSlotInfo(),Jr.empty(e.ads))0xe8d4a512a0!=e.adZoneId&&e.complete(0);else{var t=e.ads[0];t&&(e.notifyPlayer("adplayer_ad_start"),e.state="playing",t.play())}}},{key:"abort",value:function(){var e=this;"ended"!=e.state&&(e.debug("abort"),ee.each(e.ads,(function(e){e.abort()})),e.end())}},{key:"hasImpressed",value:function(){return ee.some(this.ads,(function(e){return e.hasImpressed}))}},{key:"tryLoadToVideo",value:function(){return ee.reduce(this.ads,(function(e,t){return e.then((function(){return t.tryLoadToVideo()}))}),Promise.resolve())}},{key:"loadAllAdsToVideo",value:function(){var e=this;return e.debug("slot loadAllAdsToVideo",e),Promise.all(ee.map(e.ads,(function(e){return e.updateLoadStatusAndInitTemplate()}))).then((function(){var t=ee.map(e.ads,(function(t){var n={file:t.template.creativeUrl,id:t.id,type:t.typeName(),seekable:Boolean(t.seekable)||15==t.slot.cuepointType,offset:parseInt(t.slot.startTime),videoEventId:e.request.vv.videoEventId,duration:t.duration,mvst:t.slot.makeVersionStartTime||""};return n.file=n.file.replace(/\.qiyi\.com/,".iqiyi.com"),n.file=n.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.debug("video load",n,n.videoEventId,t.slot.startTime,t.slot.makeVersionStartTime),n}));e.debug("video load all Ads",t),e.request.vv.mw.load(t)}))}},{key:"complete",value:function(){var e=this;if(e.debug("slot complete",e.state),e.sendEmptyTrackingBeforeTimeSlice(Infinity),2==e.cuepointType&&e.hasImpressed()){var t=e.request.adBreak;t&&!t.hasMidrollPlayed&&(t.hasMidrollPlayed=!0,e.request.vv.midrollPointsPlayedInView++)}e.isSeekableOriginalSlot()&&ee.map(e.ads,(function(e){"ended"!==e.state&&e.emit("replayComplete",{type:"timer-complete"})})),e.end()}},{key:"isViewPoint",value:function(){return ee.includes([8],this.cuepointType)}},{key:"isWholeCorner",value:function(){return ee.includes([13],this.cuepointType)}},{key:"isSeekableOriginalSlot",value:function(){var e=ee.includes([2],this.cuepointType),t=this.ads||[],n=ee.every(t,(function(e){return"origin"==e.deliverName()&&Boolean(e.seekable)}));return e&&n&&t.length>1}},{key:"index",value:function(){return ee.indexOf(this.request.slots,this)}},{key:"end",value:function(){var e=this;(e.hasNotifiedStart&&e.notifyPlayer("adplayer_ad_end"),ee.includes([1,2,3],e.cuepointType))&&(e.request.vv.lastRollCompleteTime=Date.now());if("preroll"==e.request.type)return e.state="ended",e.debug("preroll slot ended"),1!=e.cuepointType||Jr.empty(e.ads)||e.request.vv.startVideo("preroll"),void e.playNextSlot();"ended"==e.state||e.isViewPoint()||(e.state="ended",e.debug("slot ended"),e.request.end())}},{key:"playNextSlot",value:function(){var e=this,t=e.request.slots[e.index()+1];t?Jr.empty(t.ads)?t.end():t.play():15==e.cuepointType?e.request.end("briefRoll"):e.request.end()}},{key:"reset",value:function(){this.state="idle",ee.each(this.ads,(function(e){e.reset()}))}},{key:"sendEmptyTrackingBeforeTimeSlice",value:function(e){var t=this,n=t.emptyTracking||{};isNaN(e)||ee.remove(n.timeSlices,(function(r){var i=sn(r.w);if(!isNaN(i)&&i<=e){t.debug("send empty tracking before",e,t.adZoneId);var a=ee.extend({},r,n.trackingParam);return ur.sendEmptyTracking({},a,t,"cupid","impression",""),!0}}))}},{key:"notifyPlayer",value:function(e){var t=this,n=t.getParentByName("sdk"),r={ctp:t.cuepointType,id:t.id};t.cuepointType>=1&&(t.hasNotifiedStart=!("adplayer_ad_start"!=e),t.debug("slot notifyPlayer:",e,r),n.emit(e,r))}},{key:"initSlotInfo",value:function(){var e=this.request;e.blackscreenDuration=this.countRollDuration(),e.noCreativeUrlAds=[],e.errCreativeUrlAds=[]}},{key:"countRollDuration",value:function(){var e=this;if(!e)return 0;if(Jr.empty(e.ads))return 0;var t=e.ads;return ee.reduce(t,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}},{key:"hasSkippableAdInSlots",value:function(){var e=this.ads;return ee.some(e,(function(e){return"skippable"==e.deliverName()}))}},{key:"calcRollDurationBefore",value:function(e){if(!this)return 0;var t=this.ads;if(Jr.empty(t))return 0;var n=e.index(),r=ee.slice(t,0,n);return Jr.empty(r)?0:ee.reduce(r,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}}]),n}(qe);function Zr(e){"preroll"!=e.type||function(){var e=function(){var e=en("QC175");if(!e)return!1;try{e=JSON.parse(e)}catch(t){return console.log("parse qc175 error",t),!1}return e}();if(!e)return!1;var t=e.ct||0;return(new Date).getTime()-t<864e5}()||setTimeout(ei,0)}function ei(){var e=ze.get("P00001")||"";if(e){var t="https://userpref.iqiyi.com/apis/userpref/list.action?"+xe({authcookie:e,props:"upd",agentType:1});ft({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,success:function(e,t){var n=e||{};if("success"==t&&"A00000"==n.code){var r={upd:"1"!==((n.data||{}).upd||{}).value,ct:(new Date).getTime()};tn("QC175",JSON.stringify(r),{path:"/",domain:"iqiyi.com"})}}})}}var ti=n(838),ni=function(){function e(t){A()(this,e),this.requestCount=0,this.max=2,this.request=t,this.param={},this.debug=t.vv.sdk.logger.getLogger("show")}return D()(e,[{key:"load",value:function(){var e=this,t=this.request.vv;return"preroll"==this.request.type&&t.csr?new Promise((function(n){n(e.onComplete(t.csr))})):this.sendRequest()}},{key:"sendRequest",value:function(){var e=this,t=this;return t.setParam(),new Promise((function(n){Object(ti.a)(t.param).then((function(r){t.debug("origin resopnse",r),n(e.onComplete(r))}))["catch"]((function(r){t.debug("show request error",r.message),n(e.onComplete(r))}))}))}},{key:"setParam",value:function(){var e=this.request,t=e.vv.sdk,n=e.vv;t.updateUser(n);var r=function(){var e=window.location.href,t="";try{t=decodeURIComponent(e)}catch(n){}return t=(t=t.split("?")[0].split("#")[0]).replace(/[\u200B-\u200D\uFEFF]/g,"")}(),i=Object.assign({requestId:e.requestId,vft:e.vft,needPolicy:e.needPolicy?1:0,cuepointList:e.cuepointList,videoDuration:e.videoDuration,requestIndex:e.requestIndex,vvId:e.vvId,couponVer:n.couponVer,couponCode:n.couponCode,pauseRequestTimes:e.vv&&e.vv.pauseRequestTimes,prerollOrderItemIds:e.vv&&e.vv.prerollOrderItemIds,referrer:window.document.referrer,url:r,origin:window.location.href,isVIP:t.isVIP,ptid:t.ptid,timePoint:t.timePoint,sdkVersion:t.sdkVersion,timeout:1e4,usePartnerData:en("QC175")},e.getMultiVals(["adPlayerId","uaaUserId","passportId","episodeId","isPreload","clientVersion","passportCookie","playSource"])),a=n.getContinuingVVs();i.continuingInfo={continuingVideoPlayedCount:a.length,continuingVideoPlayedDuration:ee.sumBy(a,"videoDuration"),continuingAdPlayedDuration:ee.sumBy(a.concat(n),"adPlayedDurationInView")};var o={adPlayedDurationInDay:jr.data.adPlayedDurationInDay},s=n.mw.videoPlayedDurationInDay();return s&&(s=parseInt(s)),o.videoPlayedDurationInDay=s||0,"midroll"==e.type&&(o.midrollPointsPlayedInView=n.midrollPointsPlayedInView,o.lastMidrollRequestTime=n.lastMidrollRequestTime,n.lastRollCompleteTime&&(o.lastRollCompleteInterval=Math.round((Date.now()-n.lastRollCompleteTime)/1e3))),i.playedInfo=o,this.param=i,this.debug("show param:",i),i}},{key:"onComplete",value:function(e){var t=this,n=t.request.vv.sdk,r=e.duration;"preroll"==t.request.type&&(n.showTime=r),t.requestCount++;var i={pingbackType:"mixer",requestDuration:r};if(e.error){var a={timeout:702,parsererror:704,error:701};return i.errorCode=a[e.error]||301,t.requestCount<t.max?(i.requestCount=t.requestCount,i.subtype="error",Xt(t.request,i),t.debug("show request retry",t.requestCount),t.sendRequest()):(i.requestCount=-1,i.subtype="error",Xt(t.request,i),{error:e.error,errorCode:a[e.error]||301})}return t.debug("show url",e.originRes&&e.originRes.dru),t.debug("response",e.originRes),i.requestCount=-1,t.parsedShow=function(e,t,n){var r=e,i=t.request;if(r.pingbackParam&&(i.pingbackParam=r.pingbackParam),r.request=i,r.errorCode){n.subtype="error",n.errorCode={302400:305,302500:306,302503:307,302600:308}[r.errorCode],n.errorMessage=r.serverError;var a=1==(r.slots&&r.slots[0]||{}).cuepointType;if(305===n.errorCode||308===n.errorCode&&"preroll"==i.type&&a){if(Xt(i,n),305===n.errorCode)return{error:"paramerror",data:r};if(308===n.errorCode)return{error:"invalidplayer",data:r}}}else{n.subtype="success";var o=i.vv.sdk,s=i.vv;if(r.cupidUserId&&(o.cupidUserId=r.cupidUserId),r.serverTime&&(i.deltaTime=t.deltaTime=r.serverTime-Date.now()),r.pingbackConfig&&(i.pingbackConfig=r.pingbackConfig),r.clientIP){var u=Re.atob(r.clientIP);o.userIP=u}o.isVIP=o.getUser().isVIP,r.videoInfo&&(s.disableSkipAd=r.videoInfo.disableSkipAd,s.videoInfo=r.videoInfo,ee.extend(s,r.videoInfo)),r.vipCheckConflict&&(o.isVIP=1==r.vipCheckConflict.isVIP),o.vipCheckConflict=r.vipCheckConflict||{},o.vipCheckResult=r.vipCheckResult||{}}return r.slots=r.slots.map((function(e){return new Xr(e,r,i)})),i.slots=r.slots,Xt(i,n),r}(e.showResponse,t,i),Zr(t.request),t.parsedShow}}]),e}();function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var ii=ee.is,ai="requestId adBreak cuepointList needPolicy requestIndex from type vft".split(" "),oi=function(e){O()(n,e);var t=ri(n);function n(e,r){var i;return A()(this,n),i=t.call(this,"request"),ln()(i).setParent(r),i.state="idle",i.debug=r.sdk.logger.getLogger("request"),i.type=e.type,i.init(e),i}return D()(n,[{key:"init",value:function(e){var t=this;ee.extend(this,ee.only(e,ai));var n=e.requestId||ye([this.vv.vvId,Date.now()].join(""));t.id=t.requestId=n,t.vvId=t.vv.vvId}},{key:"load",value:function(){var e=this;if("ended"!=e.state)return e.memoryLoad=e.memoryLoad||new Promise((function(t,n){e.state="loading",(e.show=new ni(e)).load().then((function(n){ii.empty(n.policySlots)||e.vv.schedule.setPolicy(n.policySlots);var r=e.vv.sdk;if(e.isRoll()){var i;r.requestEndTime=r.loadStartTime=Date.now();var a=e.getSlotByCpt(n.slots,15);if("preroll"==e.type?(i=e.getSlotByCpt(n.slots,1),a&&e.vv.schedule.completeBriefRoll(a)):"midroll"==e.type&&(i=n.slots&&n.slots[0]),i&&!ii.empty(i.ads)){if("preroll"==e.type){var o=[];ee.each(i.ads,(function(e){o.push(e.orderItemId)})),e.vv.prerollOrderItemIds=o.join(",")}"mraid"==i.ads[0].creative.templateType&&(r.setViewController(),e.debug("mraid and request vc")),i.isSeekableOriginalSlot()?i.loadAllAdsToVideo().then((function(){e.vv.startLoadVideo({reason:"load complete",rollType:e.type})})):i.tryLoadToVideo(r).then((function(){e.loadBriefRoll(a,{reason:"load complete",rollType:e.type})}))["catch"]((function(){r.loadEndTime=r.loadEndTime||Date.now(),e.loadBriefRoll(a,{reason:"load fail",rollType:e.type})})),"midroll"==e.type&&(e.vv.lastMidrollRequestTime=i.startTime,e.vv.schedule.bindVideoTimeEvt(i.startTime-5,(function(){r.setViewController((function(){r.rollView&&r.rollView.startMidrollTip()}))})))}else r.loadEndTime=Date.now(),e.loadBriefRoll(a,{reason:"noad",rollType:e.type})}if(e.isWholeCorner()&&e.vv.schedule.initWholeCorner(n.slots),!ii.empty(n.conf)){var s=n.conf||{};r.reqMiaozhenTime=s.reqMiaozhenTime||0,r.miaozhenJsonPUrl=s.miaozhenJsonPUrl||"",e.debug("reqMiaozhenTime: ",r.reqMiaozhenTime,", miaozhenJsonPUrl: ",r.miaozhenJsonPUrl)}r.cupidServerTimeGap=n.serverTime-Date.now(),e.debug("cupidServerTimeGap: ",r.cupidServerTimeGap),t(n)}))["catch"]((function(t){e.debug("show error",t),e.end(),n(t)}))})),e.memoryLoad}},{key:"loadBriefRoll",value:function(e,t){var n=this,r=n.vv.sdk;e&&!ii.empty(e.ads)?e.tryLoadToVideo(r).then((function(){n.vv.startLoadVideo({reason:"load complete",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)}))["catch"]((function(){n.vv.startLoadVideo({reason:"load fail",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)})):("preroll"==n.type&&n.vv.startLoadVideo({reason:"noad",rollType:"briefRoll"}),n.vv.startLoadVideo(t))}},{key:"play",value:function(){var e=this;"ended"!=e.state&&e.load().then((function(t){if("ended"!=e.state){if(t.error&&"preroll"==e.type)return e.showErrorHandler(t),void e.end();if(t)if(e.trySendInventoryDirectly(t.slots),"secondary"==e.type){var n=[];ee.each(t.slots,(function(t){8==t.cuepointType?n.push(t):(e.debug("slot cpt",t.cuepointType),t.play())}))}else{var r=t.slots;"preroll"==e.type&&r&&r.length>0&&r.sort((function(e,t){return e.cuepointType-t.cuepointType}));var i=r[0];e.state="playing",i?i.play():e.end()}else e.end()}}))["catch"]((function(t){e.debug("error",t)}))}},{key:"showErrorHandler",value:function(e){var t={paramerror:305,invalidplayer:308,parsererror:304,error:301}[e.error]||301;this.pullAdblockBlackScreen(this,{errorCode:t,errorMessage:e.error,requestCount:this.show.requestCount,cupidUserId:e&&e.data&&e.data.cupidUserId})}},{key:"end",value:function(e){var t=this;t.state="ended",t.sendInventory(),t.isRoll()&&"ended"!=t.vv.state&&t.vv.startVideo(e||t.type)}},{key:"isRoll",value:function(){return"preroll"==this.type||"midroll"==this.type||"briefRoll"==this.type}},{key:"isWholeCorner",value:function(){return"whole_corner"==this.type}},{key:"abort",value:function(){var e=this;if(e.show&&e.show.ajax&&e.show.ajax.abort(),e.slots){var t=e.slots;ee.each(t,(function(e){e.abort()}))}e.end()}},{key:"reset",value:function(){ee.each(this.slots,(function(e){e.reset()}))}},{key:"trySendInventoryDirectly",value:function(e){(ii.empty(e)||"secondary"==this.type)&&this.sendInventory()}},{key:"sendInventory",value:function(){var e=this;if(!e.inventorySent)if(e.inventorySent=!0,e.show&&e.show.parsedShow&&e.show.parsedShow.inventory){e.debug("send inventory");var t=ee.only(e.show.parsedShow.inventory,"originalInventory rawInventory deliveredInventory forbiddenInventory");Xt(e,ee.extend({pingbackType:"inventory",subtype:"success"},t))}else e.debug("no data to send inventory")}},{key:"pullAdblockBlackScreen",value:function(e,t){var n=this,r=n.vv.sdk;if(!r.isPreload){var i=r.getUser(),a=i.isVIP;if(n.debug("vip status:",a,i),!a&&"iqiyiw"==r.site){var o=t.errorCode;!o||-1==ee.values(Nr).indexOf(o)||(r.emit("adplayer_ad_block",{videoEventId:n.vv.getVal("videoEventId")}),n.debug("notify player adblock"),r.setViewController((function(){r.viewController?r.viewController.blackscreen.triggerAdblockCBK(e):(n.debug("pull min adblock"),r.adblocCBK||(r.adblocCBK=new vn(r)),r.adblocCBK.triggerCBK(e),t&&(t.customInfo="mars_view")),t&&(t.pingbackType="statistics",t.subtype="adblock",Xt(e,t))})))}}}},{key:"getSlotByCpt",value:function(e,t){return ee.find(e,(function(e){return e.cuepointType==t}))}}]),n}(qe);var si=ee.is,ui=function(){function e(t){A()(this,e),t=t||{};var n=this;n.startTime=t.startTime,n.cuepointType=t.cuepointType,n.adZoneId=t.adZoneId,n.sequenceId=t.sequenceId,n.adZoneStyle=t.adZoneStyle,n.state=null,n.request=null,n.hasLoaded=t.hasLoaded||!1,n.ad=t.ad||null,n.slot=t.slot||null,n.priority=0,2==n.cuepointType?n.priority=10:8==n.cuepointType&&(n.priority=9)}return D()(e,[{key:"addInfo",value:function(e){e=e||{};this.slot=e.slot||null}},{key:"isMid",value:function(){return!!(ee.includes([2,10,11,13,15],this.cuepointType)&&this.startTime>0)}},{key:"isOverlay",value:function(){return!!ee.includes([8,10,11],this.cuepointType)}},{key:"isValid",value:function(){return si.number(this.startTime)&&si.number(this.cuepointType)}},{key:"isLoaded",value:function(){return!!(this.request||this.ad||8==this.cuepointType||13==this.cuepointType||this.hasLoaded)}},{key:"refresh",value:function(){this.request=null,this.hasPlayed=!1,this.hasLoaded=!1}},{key:"canLoad",value:function(e){return e>=this.startTime-10&&e<=this.startTime}},{key:"abort",value:function(){this.request?this.request.abort():this.ad&&this.ad.abort()}}]),e}(),ci=ee.is;function li(e){e&&e.sort((function(e,t){var n=e.cuepointType-t.cuepointType;return 0==n&&(n=e.startTime-t.startTime),n}))}function di(e){var t=ee.filter(e,(function(e){return!fi(e)})),n=ee.map(t,(function(e){return e.priority})),r=ee.max(n);return e=ee.filter(e,(function(e){return!(r!=e.priority&&!fi(e)&&13!==e.cuepointType)||(e.state="banned",!1)}))}function fi(e){if(8!==e.cuepointType)return!1;var t=e.slot||{};return ci.empty(t.ads)}function hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var pi=ee.is,vi=function(e){O()(n,e);var t=hi(n);function n(e){var r;A()(this,n),r=t.call(this);var i=ln()(r);return i.vv=e,i.videoEventId=e.videoEventId,i.mw=i.vv.mw,i.bindMwEvent(),i.log=e.sdk.logger.getLogger("schedule:"+e.videoEventId),i.adBreaks=[],i.allAdBreaks=[],i.midrollPoints={},i.currentAdId=null,i.hasBindSeeked=!1,i.enabled=!0,i.running=!1,i.init(),r}return D()(n,[{key:"init",value:function(){var e=this;e.binVideoEvent(),e.fetchAndPlayPreroll(),e.log("schedule inited")}},{key:"bindMwEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked loadstart afterSeeked pausetoplay".split(" "),t=this;t.handleMwEvt=function(e){var n=e.type,r=ee.includes(["play","playing","timeupdate"],n),i=e.gas||{};if(t.enabled||("error"==n||"loadstart"==n)&&i.id){var a=i.id;if(i.videoEventId!==t.videoEventId)return;if(r){var o=t.vv.sdk;t.loadedVC||(t.loadedVC=!0,o.setViewController(),t.vv.onNetworkFree())}if(t.emit(n,e),a){var s=t.vv.sdk.adMap[a];if(s)return(r||"seeked"===n&&s.slot.isSeekableOriginalSlot())&&t.setCurrentAd(a,s,e),t.stopTimer(),void t.emitToAd(s,"video-"+n,e);t.log("error!, fail to find ad",i),t.mw.abort()}else t.startTimer();t.removeCurrentAd()}else t.mw.pause()},e.forEach((function(e){t.mw.on(e,t.handleMwEvt)}))}},{key:"binVideoEvent",value:function(){var e=this;e.timerHandler=function(t){e.currentTime=Math.round(e.mw.currentTime());var n=ee.get(t,"data.actionType"),r=ee.get(t,"data");if("seeked"==t.type&&(e.log("seeked",e.currentTime,n),"controls"==n&&(e.onUserSeeked(r),e.disableAutoChooseMidroll("用户 seek"))),"afterSeeked"==t.type&&(e.log("after seeked",e.currentTime,n),"controls"==n&&e.afterUserSeeked(r)),null==e.lastTime){var i=ee.get(e,"midrollPoints.nextMidroll");i>0&&i<e.currentTime&&e.disableAutoChooseMidroll("开播时间晚于自动中插点")}if(e.lastTime!=e.currentTime&&e.updateVideoTime(t),!(e.vv.ipdxReqErrCount>2)){var a=e.vv.sdk.reqMiaozhenTime;if(pi.number(a)&&a>0){var o=function(){var e=en("idx")||"";if(!e)return!1;var t={};try{t=JSON.parse(e)}catch(r){return console.log("idx parse error",r),!1}if(!Zt.object(t))return!1;if(!t.ip)return!1;if(!t.geocode)return!1;if(!t.exptime)return!1;var n="ip:"+t.ip.replace(/X/g,".")+",gc:"+t.geocode+",ept:"+t.exptime;return ee.extend(t,{idx:n})}(),s=e.vv.sdk.cupidServerTimeGap?e.vv.sdk.cupidServerTimeGap+Date.now():Date.now(),u=o&&1e3*+o.exptime-s<3e5;if(!o||u){var c=e.currentTime>a,l=e.vv.sdk.isWaitingIpdxResponse;c&&!l&&(e.log("isIpdxOverdue:",u,"ipdxInfo:",o),e.log("hasReachReqMiaozhenTime: ",c,"isWaitingIpdxResponse:",l),function(e){var t=e.sdk.miaozhenJsonPUrl;if(t){var n={pingbackType:"ipdx",subtype:"error",errorMessage:t};e.sdk.isWaitingIpdxResponse=!0;var r=!1;ft({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,checkParserError:!0,success:function(t,r){var i=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();if("success"==r){var a=t;a&&a.ip&&a.geocode&&a.exptime?i>new Date(1e3*+a.exptime-3e5).getTime()?(e.ipdxReqErrCount++,Xt(e,ee.extend(n,{errorCode:1905,customeInfo:xe({rsp:a,crt:i},",",":")}))):(tn("idx",JSON.stringify(a),{expires:new Date(Date.now()+31536e6)}),Xt(e,{pingbackType:"ipdx",subtype:"success",customInfo:xe({rsp:a,crt:i},",",":")})):a&&-1==a.code?(e.ipdxReqErrCount++,Xt(e,ee.extend(n,{errorCode:1904,customeInfo:xe({rsp:a,crt:i},",",":")}))):(e.ipdxReqErrCount++,Xt(e,ee.extend(n,{errorCode:1906,customeInfo:xe({rsp:a,crt:i},",",":")})))}e.sdk.isWaitingIpdxResponse=!1},error:function(t,i){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,r=!0,Xt(e,"parsererror"===i?ee.extend(n,{errorCode:1903,customeInfo:xe({crt:a},",",":")}):ee.extend(n,{errorCode:1901,customeInfo:xe({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1},complete:function(t,i){if("timeout"===i&&!r){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,Xt(e,ee.extend(n,{errorCode:1902,customeInfo:xe({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1}}})}else e.ipdxReqErrCount++}(e.vv))}}}},e.playHandler=function(){if(e.running){var t=e.mw.currentTime();e.log("video play",t),e.tryToStopPause();var n=e.midrollPoints;if(n&&n.autoChoose){var r=n.nextMidrollPoint;-1!=r&&r<t&&e.disableAutoChooseMidroll("自动中插点在当前时间前面")}null==e.getCurrentAd()&&e.showAndResume()}},e.pauseHandler=function(t){var n=ee.get(t,"data.actionType");(e.log("pause",n),"controls"==n)&&(e.mw.currentTime()&&e.running&&(e.vv.pauseTimes++,e.loadPause(),e.pauseOtherAd()))},e.bindAudioEvt()}},{key:"unbindMWEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked afterSeeked loadstart pausetoplay".split(" "),t=this;e.forEach((function(e){t.mw.off(e,t.handleMwEvt)})),t.off()}},{key:"bindAfterSeekedEvt",value:function(){var e=this;e.hasBindSeeked||(e.hasBindSeeked=!0,e.on("afterSeeked",e.timerHandler))}},{key:"loadPause",value:function(e){var t=this;t.log("load pause"),(e=e||{}).requestIndex=e.requestIndex||1;var n=[{cuepointType:6,sequenceId:t.vv.pauseTimes,startTime:t.currentTime}];t.vv.pauseRequestTimes++,t.newAdRequest({adBreak:n[0],requestIndex:e.requestIndex,cuepointList:n,needPolicy:!1,from:e.from,type:"pause"},t.vv).play()}},{key:"tryToStopPause",value:function(){ee.remove(this.vv.requests,(function(e){if("pause"==e.type)return e.abort(),!0}))}},{key:"pauseOtherAd",value:function(){ee.each(this.vv.requests,(function(e){ee.each(e.slots,(function(e){ee.each(e.ads,(function(e){ee.includes(["playing","paused"],e.state)&&e.pause()}))}))}))}},{key:"showAndResume",value:function(){var e=this;ee.each(e.vv.requests,(function(e){ee.each(e.slots,(function(e){ee.each(e.ads,(function(e){ee.includes(["playing","paused"],e.state)&&e.resume()}))}))})),ee.each(e.vv.currentOverlayAds,(function(t){e.log("show and resume current overlay",t.creative.templateType,t.orderItemId);var n=t.$adzone;n&&(n.style.display="",n.style.visibility="")}))}},{key:"emitToAd",value:function(e,t,n){if(e&&!/timeupdate/.test(t)){var r=Date.now();this.log("emit",t,e.id,r),e.emit(t,n),this.mw&&this.mw.triggerTypeAndTime&&(this.mw.triggerTypeAndTime(r,t),this.log("call triggerTypeAndTime ",r))}}},{key:"setCurrentAd",value:function(e,t){var n=this;t=t||{},n.lastNotNullAdId=n.currentAdId?n.currentAdId:n.lastNotNullAdId,n.lastAdId=n.currentAdId,n.currentAdId=e,n.lastAdId!=n.currentAdId&&n.log("current roll changed ",n.lastAdId," => ",n.currentAdId,t.type)}},{key:"getCurrentAd",value:function(){var e=this,t=e.vv.sdk;return e.currentAdId?t.adMap[e.currentAdId]:null}},{key:"removeCurrentAd",value:function(){this.setCurrentAd(null,{type:"remove"})}},{key:"fetchAndPlayPreroll",value:function(){var e=this;e.vv.sdk.initEndTime=e.vv.sdk.requestStartTime=Date.now();var t="";e.vv.csr&&e.vv.csr.requestId&&(t=e.vv.csr.requestId);var n=e.newAdRequest({needPolicy:!0,cuepointList:[{cuepointType:1},{cuepointType:15}],type:"preroll",vft:e.vv.isPreload?"13":"",requestId:t},e.vv);e.vv.isPreload||n.play()}},{key:"requestSecondaryAd",value:function(){var e=this;e.log("try load viewpoint and definitionswitching");var t=e.getPageAdBreaks();pi.empty(t.dsAdBreaks)||this.newAdRequest({needPolicy:!1,type:"secondary",cuepointList:t.dsAdBreaks},e.vv).play()}},{key:"requestWholeCorner",value:function(){var e=this,t=e.getAdBreaksByType(13);pi.empty(t)||(e.log("start to load whole corner"),this.newAdRequest({adBreak:t,requestIndex:e.vv.requestIndex,cuepointList:t,needPolicy:!1,from:e.vv,type:"whole_corner"},e.vv))}},{key:"newAdRequest",value:function(e,t){var n=new oi(e,t);return this.vv.requests.push(n),n.load(),n}},{key:"initWholeCorner",value:function(e){var t=this;if(pi.empty(e))t.log("no whole_corner schedule");else{var n=ee.map(e,(function(e){var t=e.ads?e.ads[0]:null;return{ad:t,slot:e,startTime:t&&t.startTime?t.startTime:0,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}));t.log("init whole corner",n),t.addBreaks(n),t.hasWholeCornerAdBreak=!0}}},{key:"completeBriefRoll",value:function(e){var t=this;e?(t.log("complete brief roll",e),t.completeAdBreak(e)):t.log("no brief roll slot")}},{key:"setPolicy",value:function(e){var t=this;t.allAdBreaks=function(e){var t=[];return ee.each(e,(function(e){ci.empty(e.startTimes)?t.push(new ui({sequenceId:e.sequenceId,startTime:e.startTimes,cuepointType:e.cuepointType,adZoneId:e.adZoneId,hasLoaded:15==e.cuepointType,adZoneStyle:e.adZoneStyle})):ee.each(e.startTimes,(function(n,r){t.push(new ui({startTime:n,cuepointType:e.cuepointType,adZoneId:e.adZoneId,sequenceId:r+1,adZoneStyle:e.adZoneStyle,hasLoaded:15==e.cuepointType}))}))})),t}(e),t.adBreaks=t.allAdBreaks.filter((function(e){return e.isMid()})),li(t.adBreaks),t.log("set policy",t.adBreaks)}},{key:"getAdBreaksByType",value:function(e){return ee.filter(this.allAdBreaks,(function(t){return ee.isMatch(t,{cuepointType:e})}))}},{key:"getPageAdBreaks",value:function(){var e=[],t=[];return ee.each(this.allAdBreaks,(function(n){n&&0==n.cuepointType&&0xe8d4a512a0==n.adZoneId&&(n.cuepointType=114,delete n.adZoneId,t.push(n)),n&&0==n.cuepointType&&0xe8d4a512a0!=n.adZoneId&&e.push(n)})),{otherPageAdBreaks:e,dsAdBreaks:t}}},{key:"addBreaks",value:function(e){var t=this;e=ee.map(e,(function(e){return new ui(e)})),ee.each(e,(function(e){e.isValid()&&t.adBreaks.push(e)})),li(t.adBreaks)}},{key:"completeAdBreak",value:function(e){var t=e.startTime,n=e.cuepointType;ee.each(this.adBreaks,(function(r){r.startTime===t&&r.cuepointType===n&&r.addInfo({slot:e})}))}},{key:"bindAudioEvt",value:function(){var e=this;e.on("pausetoplay",(function(){e.log("on pausetoplay");var t=e.vv&&e.vv.audioPause;t&&t.template.closeAudioPause()}))}},{key:"startTimer",value:function(){var e=this;e.running||(e.running=!0,e.log("start schedule timer"),e.on("timeupdate",e.timerHandler),e.on("seeked",e.timerHandler),e.on("play",e.playHandler),e.on("pause",e.pauseHandler))}},{key:"stopTimer",value:function(){var e=this;e.running&&(e.log("stop schedule timer"),e.off("timeupdate",e.timerHandler),e.off("seeked",e.timerHandler),e.off("play",e.playHandler),e.off("pause",e.pauseHandler),e.running=!1)}},{key:"updateVideoTime",value:function(){var e=this;0==e.currentTime%10&&e.log("update video time",e.currentTime),e.emit("videotime:"+e.currentTime),e.lastTime=e.currentTime,e.adBreaksTimeHandler()}},{key:"adBreaksTimeHandler",value:function(){var e=this,t=[],n=[];ee.each(e.adBreaks,(function(r){"banned"!==r.state&&(r.isLoaded()||r.canLoad(e.currentTime)&&(e.log("adBreak canLoad",r),t.push(r),r.hasPlayed=!1),r.isLoaded()&&(e.currentTime==r.startTime||13===r.cuepointType&&e.currentTime>r.startTime)&&(r.hasPlayed||(n.push(r),r.hasPlayed=!0)))}));var r=di(t),i=di(n);r.length!=t.length&&e.log("adbreaks to load conflict",r,t),i.length!=n.length&&e.log("adbreaks to play conflict",i,n),ee.each(r,(function(t){e.log("adbreak load and fill",t);var n=t.cuepointType;t.request=e.newAdRequest({needPolicy:!1,cuepointList:[t],adBreak:t,vft:"",type:Cr[n]||n},e.vv)})),ee.each(i,(function(t){var n=t.request,r=t.ad;e.log("adbreak to play",n,t),n?n.play():r?(r.slot.show.request.reset(),r.play()):8!=t.cuepointType&&13!=t.cuepointType&&15!=t.cuepointType||!t.slot||t.slot.complete(1)}))}},{key:"onUserSeeked",value:function(e){var t=this,n=t.currentTime;t.log("onUserSeeked",e),e.beforeIsAD||ee.each(t.adBreaks,(function(r){r.startTime>n&&13!=r.cuepointType&&(r.isLoaded()&&r.hasPlayed||15==r.cuepointType&&t.currentTime<t.lastTime&&t.lastTime>r.startTime&&t.currentTime<r.startTime&&!e.isAD)&&(r.abort(),r.refresh())}))}},{key:"setAutoChooseMidRoll",value:function(e){var t=this;e&&pi.bool(e.autoChoose)&&(t.log("自动中插点",e),t.midrollPoints=e,e.autoChoose?t.enableAutoChooseMidroll(e.nextMidroll):t.disableAutoChooseMidroll("初始化"))}},{key:"enableAutoChooseMidroll",value:function(e){var t=this;t.currentTime>e?t.log("当前时间晚于自动中插点"):(t.log("启用自动中插点",e),ee.each(t.adBreaks,(function(t){2==t.cuepointType&&(t.startTime==e?t.state=null:t.state="banned")})))}},{key:"disableAutoChooseMidroll",value:function(e){var t=this;!1!==t.midrollPoints.autoChoose&&(t.log("停用自动中插点",e,t.midrollPoints),t.midrollPoints={autoChoose:!1},ee.each(t.adBreaks,(function(e){2==e.cuepointType&&(e.state=null)})))}},{key:"ban",value:function(e){var t=ee.filter(this.adBreaks,(function(t){return ee.isMatch(t,e)}));ee.each(t,(function(e){e.state="banned"})),this.log("ban ad breaks",e,t)}},{key:"removeConflictSlotsByViewPoints",value:function(e){var t=this,n=t.adBreaks;if(n&&e){var r=ee.map(e,(function(e){return e.slot.startTime}));t.adBreaks=ee.filter(n,(function(e){var n=ee.includes([4,9,10,11],e.cuepointType),i=ee.includes(r,e.startTime);return!(n&&i)||(t.log("remove conflict points",{startTime:e.startTime,cuepointType:e.cuepointType}),!1)}))}}},{key:"afterUserSeeked",value:function(e){e.beforeIsAD&&this.afterUserSeekedInOriginalRoll(e)}},{key:"afterUserSeekedInOriginalRoll",value:function(e){var t=this,n=t.getCurrentAd()||null,r=Boolean(e.isFusionMode)||!1,i=(r?Number(e.current):t.currentTime)||0,a=Boolean(e.beforeIsAD)||!1,o=Number(e.beforeSeek)||0,s=Boolean(e.isAD)||!1,u=(e.referrerGas||{}).id,c={isFusionMode:r,beforeIsAD:a,beforeSeek:o,referrerGasId:u,afterIsAD:s,afterSeek:i,ad:n||null};if(r){var l=t.vv.sdk,d=u||t.lastAdId||t.lastNotNullAdId,f=l.adMap[d]||{},h=f.slot||null;if(h&&h.isSeekableOriginalSlot()){t.log("after seeked in origin midroll of fusion mode",c),t.seekHandlerInFusionMode(c);var p=t.calcBeforeSeekOfs(c);Xt(f,{pingbackType:"statistics",subtype:"seek",customInfo:xe({ofs:Math.round(p)},",",":")}),f.isSeeked=!0}}else{if(n&&n.isSeekableOriginalRoll())t.log("after seeked in midroll of split mode",c),t.seekHandlerInSplitMode(c),Xt(n,{pingbackType:"statistics",subtype:"seek",customInfo:xe({ofs:Math.round(o)},",",":")}),n.isSeeked=!0}}},{key:"seekHandlerInSplitMode",value:function(e){var t=e.ad;if(t){var n=Math.round(e.afterSeek),r=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.afterIsAD,i=e.afterSeek,a=n<i,o=t&&r&&!a;if(t&&r&&a)return"forwardInAd";if(o)return"backwardInAd"}(e);"forwardInAd"!==r&&"backwardInAd"!==r||(this.log("seek movement in original midroll",r),t.emit("progressReseted",n))}}},{key:"seekHandlerInFusionMode",value:function(e){var t=this,n=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.referrerGasId,i=e.afterIsAD,a=e.afterSeek,o=(e.ad||{}).id,s=t&&!i,u=t&&i,c=pi.empty(r),l=pi.empty(o),d=r===o,f=n<a;if(s)return"outofAd";if(u&&d&&!c&&!l)return"inSameAd";if(u&&!d&&!c&&!l&&f)return"forwardCrossAds";if(u&&!d&&!c&&!l&&!f)return"backwardCrossAds"}(e),r=e.referrerGasId,i=e.afterSeek,a=e.ad,o=t.vv.sdk,s=r||t.lastAdId||t.lastNotNullAdId,u=o.adMap[s]||{};if(t.log("seek handler in fusion mode type",n),"outofAd"===n){u.notAutoPlayNext=!0;var c=u.duration||15;return u.emit("progressReseted",c,!0),void u.slot.complete(2)}if("inSameAd"!==n){if("forwardCrossAds"===n||"backwardCrossAds"===n){u.notAutoPlayNext=!0;var l=u.duration||15,d=this.calcOfsInFusionMode(i,a);u.emit("progressReseted",l),a.template.hasPlaying=!1,a.emit("progressReseted",d)}}else{var f=this.calcOfsInFusionMode(i,a);a.emit("progressReseted",f)}}},{key:"calcBeforeSeekOfs",value:function(e){var t=e.isFusionMode,n=t.isFusionMode,r=t.beforeSeek,i=t.beforeAd;return n?i?this.calcOfsInFusionMode(r,i):0:r}},{key:"calcOfsInFusionMode",value:function(e,t){var n=t.getParentByName("slot")||{},r=e-n.startTime-n.calcRollDurationBefore(t);return r>0?r:0}},{key:"bindVideoTimeEvt",value:function(e,t){this.on("videotime:"+e,t)}}]),n}(N);var yi=function(){function e(t){A()(this,e),this.log=t.sdk.logger.getLogger("collisionDetection"),this.vv=t,this.needDetectingList=[],this.wholeCorner={}}return D()(e,[{key:"addAdIntoCollisingList",value:function(e){if(e.id){var t=gi(this.needDetectingList,e.id);-1==t?this.needDetectingList.push(e):this.needDetectingList[t]=e}}},{key:"removeAd",value:function(e){var t=gi(this.needDetectingList,e);-1!=t&&this.needDetectingList.splice(t,1)}},{key:"wholeCornerCollidedWithOriginalList",value:function(){var e=this.wholeCorner;return!!this.wholeCornerIsValid()&&this.isCollidedWithOriginalList(e)}},{key:"isCollidedWithOriginalList",value:function(e){for(var t=this.needDetectingList,n=!1,r=0;r<t.length;r++)if(this.checkCollision(t[r],e)){n=!0;break}return n}},{key:"notifyWholeCornerToShow",value:function(){var e=this.wholeCorner;if(e&&e.id&&!e.showing&&!this.wholeCornerCollidedWithOriginalList()){var t=this.vv.wholeCorner.$adzone;if(!t)return;if(e.timer&&e.timer.running&&!e.timerStatus.display)return;e.timer&&!e.timer.running&&e.timer.start(),t.style.display="",t.style.visibility="",this.wholeCorner.showing=!0}}},{key:"notifyWholeCornerToHide",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this.wholeCorner,n=t&&t.id&&t.showing,r=this.wholeCornerCollidedWithOriginalList(),i=r||e.forceHide;if(n&&i){var a=this.vv.wholeCorner.$adzone;if(!a)return;if(t.timer&&!t.timer.running)return;t.timer&&t.timer.running&&r&&t.timer.stop(),a.style.display="none",a.style.visibility="hidden",this.wholeCorner.showing=!1}}},{key:"setWholeCorner",value:function(e){this.wholeCorner=e}},{key:"getWholeCorner",value:function(){return this.wholeCorner}},{key:"wholeCornerIsValid",value:function(){return!(!this.wholeCorner||!this.wholeCorner.id)}},{key:"checkCollision",value:function(e,t){if(e.willDefinitelyCollide)return!0;var n=e.y,r=e.x,i=parseFloat(e.x)+parseFloat(e.width),a=parseFloat(e.y)+parseFloat(e.height),o=t.y,s=t.x,u=parseFloat(t.x)+parseFloat(t.width),c=parseFloat(t.y)+parseFloat(t.height);return!(a<o||r>u||n>c||i<s)}}]),e}();function gi(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r].id==t){n=r;break}return n}function mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var _i="videoEventId channelId episodeId albumId videoDefinition videoDuration autoload playSource isPreload isSupportViewpoint couponCode couponVer isAutoMapPlayerId vvId csr".split(" "),bi=function(e){O()(n,e);var t=mi(n);function n(e,r){var i;A()(this,n),i=t.call(this,"vv");var a=ln()(i);return a.setParent(e),a.mw=e.videoMidware,a.state="idle",a.requests=[],a.prerollOrderItemIds="",a.videoInfo={},a.lastRollCompleteTime=NaN,a.lastMidrollRequestTime=0,a.midrollPointsPlayedInView=0,a.adPlayedDurationInView=0,a.currentOverlayAds=[],a.pauseTimes=0,a.pauseRequestTimes=0,a.isBusy=!0,a.isAutoMapPlayerId=e.rawAdPlayerId!=e.adPlayerId,a.log=e.logger.getLogger("vv:"+e.videoEventId),a.ipdxReqErrCount=0,a.init(r),i}return D()(n,[{key:"init",value:function(e){var t=this,n=t.sdk;(e=ee.extend({playSource:0,isPreload:!1,isAutoMapPlayerId:n.rawAdPlayerId!=n.adPlayerId},e)).vvId=e.csr&&e.csr.vvId||function(e){return ye([e.episodeId,e.uaaUserId,Date.now(),Math.random()].join(""))}(e);var r=ee.only(e,_i);t.log("vv init:",r),ee.extend(t,r),t.setCookieFromCsr(e),Xt(t,{pingbackType:"visit",subtype:"success",playSource:r.playSource||0,location:ee.get(window,"location.href"),customInfo:t.sdk.script}),t.isPreload&&t.sdk.currentVV&&(t.continueFromVV=t.sdk.currentVV),t.schedule=new vi(t),t.adCollisionDetection=new yi(t)}},{key:"startVideo",value:function(e){var t=this;if(!0!==t.isVideoPlaying&&"ended"!=t.state){var n={rollType:e,videoEventId:t.videoEventId},r="roll-ended";t.log(r,n),t.sdk.emit(r,n),t.schedule&&!t.schedule.hasWholeCornerAdBreak&&t.schedule.requestWholeCorner(),t.schedule&&t.schedule.startTimer(),t.isVideoPlaying=!0,t.sdk.rollView&&t.sdk.rollView.removeOptions("video start")}}},{key:"stopVideo",value:function(e){var t=this;if(!1!==t.isVideoPlaying){var n={rollType:e,videoEventId:t.videoEventId},r="roll-play";t.log(r,n),t.sdk.emit(r,n),t.schedule&&t.schedule.stopTimer(),t.sdk.rollView&&t.sdk.rollView.midrollTip.end(),t.isVideoPlaying=!1}}},{key:"isCurrentVV",value:function(){return this==this.sdk.currentVV}},{key:"exitFullscreen",value:function(){var e=this.mw;e.isWebFullScreen&&e.isWebFullScreen()&&(this.log("退出网页全屏"),e.webfullscreentoggle()),e.isFullScreen()&&(this.log("退出全屏"),e.fullscreentoggle())}},{key:"disableVideo",value:function(){this.log("disable video"),this.schedule.enabled=!1;var e=this.sdk;e.setViewController((function(){e.rollView&&e.rollView.showMask()})),this.mw.pause()}},{key:"enableVideo",value:function(){this.log("enable video"),this.schedule.enabled=!0,this.mw.play();var e=this.sdk;e.rollView&&e.rollView.hideMask()}},{key:"onNetworkFree",value:function(){var e=this;e.isBusy&&(e.log("networt free"),e.isBusy=!1,e.schedule.requestSecondaryAd())}},{key:"abort",value:function(){var e=this;if("ended"!=e.state){e.log("abort"),e.state="ended",e.schedule&&(e.schedule.stopTimer(),e.schedule.unbindMWEvent());var t=e.sdk;e.log("notify player clear viewpoint"),t.emit("adplayer_ad_info",{type:"clear_viewpoint",data:{templateType:"viewPoint",adZoneId:e.viewPointAdZoneId,videoEventId:e.videoEventId}}),ee.each(e.requests,(function(e){e.abort()})),this.stopBlackScreen()}}},{key:"resize",value:function(){ee.each(this.requests,(function(e){"ended"!=e.state&&ee.each(e.slots,(function(e){"ended"!=e.state&&ee.each(e.ads,(function(e){"ended"!=e.state&&e.resize()}))}))}))}},{key:"isSportsVideo",value:function(){return this.videoInfo&&32==this.videoInfo.videoType}},{key:"getContinuingVVs",value:function(){for(var e=[],t=this.continueFromVV;t;)e.push(t),t=t.continueFromVV;return e}},{key:"startLoadVideo",value:function(e){var t=this;if("ended"!=t.state){e=e||{};var n="roll-load-finish",r=t.sdk,i={rollType:e.rollType,reason:e.reason,videoEventId:t.getVal("videoEventId")};if("preroll"==e.rollType)ee.extend(i,{showTime:r.showTime,requestStartTime:r.requestStartTime,requestEndTime:r.requestEndTime,requestTime:r.requestEndTime-r.requestStartTime,initStartTime:r.initStartTime,initEndTime:r.initEndTime,initTime:r.initEndTime-r.initStartTime,loadStartTime:r.loadStartTime,loadEndTime:r.loadEndTime,loadTime:r.loadEndTime-r.loadStartTime}),Xt(t,{pingbackType:"statistics",subtype:"adl",customInfo:"lt:"+(Date.now()-r.initStartTime)+",st:"+r.showTime});t.log(n,i),r.emit(n,i)}}},{key:"stopBlackScreen",value:function(){var e=this.sdk;e.setViewController((function(){e.viewController?e.viewController.blackscreen.stopBlackScreen():e.adblocCBK&&e.adblocCBK.stopBlackScreen()}))}},{key:"setCookieFromCsr",value:function(e){e.csr&&e.csr.cookies&&e.csr.cookies.length>0&&e.csr.cookies.forEach((function(e){document.cookie=e}))}}]),n}(qe);var xi,ki=n(839),wi="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" "),Si="color:inherit",Ti=0,Pi={},Ei=function(){};window.console&&(Ei=function(e,t){var n=Date.now(),r=n-(xi||n),i="color:"+function(e){Pi[e]||(Pi[e]=wi[Ti++%wi.length]);return Pi[e]}(e.name);xi=n;var a="%c"+e.name+"%c",o=[null,i,Si];ee.each(e.data,(function(e){o.push(e),a+=" %o"})),o.push(i),a+="%c +"+r+"ms",o[0]=a,function(e,t){Function.prototype.apply.call(console[e],console,t)}("log",o)});var Ai=Ei,Ii=ee.is,Di={level:0,MAX_LOG_LEN:3e3,debugKey:"debug",defaultLevelName:"log",defaultName:"default",_name:"",prefix:"",outputer:Ai},Li=function(){function e(t){A()(this,e);var n=this;n.key=t,n.logger=[],n.logs=[],ee.extend(n,Di),n.init()}return D()(e,[{key:"init",value:function(){var e,t=this;if(t.prefix=t.key+":",t.key)try{e=localStorage[t.key]}catch(n){}t._name=e,t.pattern=function(e){var t=[],n=[];e&&Ii.string(e)&&ee.each(e.split(/[\s,]+/),(function(e){"-"===(e=e.replace(/\*/g,".*?")).charAt(0)?t.push(new RegExp("^"+ee.slice(e,1)+"$")):n.push(new RegExp("^"+e+"$"))}));return{skips:t,names:n}}(e),t.enabled=t.isNameMatch(e)}},{key:"isNameMatch",value:function(e){var t=this.pattern;if(!e)return!1;function n(t){return t.test(e)}return!ee.some(t.skips,n)&&!!ee.some(t.names,n)}},{key:"getLogger",value:function(e){var t=this;e=e||t.defaultName;var n=t.logger[e];return n||(n=t.logger[e]=function(){t.print(e,arguments)}),n}},{key:"print",value:function(e,t){var n=this,r={name:"["+function(){var e;try{e=(new Date).toISOString()}catch(t){e=(new Date).toString()}return e}()+"]["+e+"]",key:n.key,data:t};n.logFilter(r,n.lastLog),n.enabled&&n.outputer(r,n)}},{key:"logFilter",value:function(e){e.time=Date.now(),this.saveLog(e)}},{key:"saveLog",value:function(e){var t=this;t.logs.push(e),t.logs.length>t.MAX_LOG_LEN&&t.logs.shift()}}]),e}();function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var i=B()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C()(this,n)}}var Ri=ki.version+"-mars",Ci="qc_100001_100226",Mi=function(e){O()(n,e);var t=Oi(n);function n(e){var r;return A()(this,n),(r=t.call(this,"sdk")).playerId=e.playerId||"noPlayerId",r.script=ee.get(window,"document.currentScript.src"),r.vvCnt=0,r.vvs=[],r.adPlayedDurationInDay=0,r.version=r.sdkVersion=Ri,r.adMap={},r.logger=new Li("mars-"+r.playerId),r.debug=r.logger.getLogger("sdk"),r}return D()(n,[{key:"init",value:function(e){this.initStartTime=Date.now(),this.debug("sdk init","is vip:",e.isVIP,Ri,e),(e=ee.extend({},e)).episodeId=e.episodeId||e.tvId,e.isVIP=e.isVIP||!1,e.timePoint=e.timePoint||0,e.site=e.site||"iqiyiw",e.theaterMode=e.theaterMode||!1,ee.extend(this,e),this.locale&&(ee.includes(["tw_t","cn_t"],this.locale)?this.locale="tw":this.locale="cn"),ee.includes(this.locale,"tw")&&(this.adPlayerId=this.adPlayerId||"qc_105136_100610",this.debug("tw cid",this.adPlayerId));var t,n=this.adPlayerId;this.adPlayerId=function(e){t=e,ee.startsWith(t,"qc_")&&t.length=="qc_100001_100000".length||(e=Ci);var t;return e}(n),e.isPreload?this.rawAdPlayerId=this.adPlayerId:this.rawAdPlayerId=this.rawAdPlayerId||n,this.uaaUserId=this.uaaUserId||(t=ze.get("QC005"),Zt.empty(t)&&(t=ze.get("QC006")),t||""),this.debug("cupid-show-response:",e.csr);var r=new bi(this,e);this.vvCnt++,e.isPreload?this.preloadVV=r:(this.switchView(),this.currentVV=r),this.vvs.push(r),this.bindEvent()}},{key:"switchView",value:function(e){var t=this;this.debug("switch view",e||"normal"),t.rollView&&t.rollView.midrollTip&&t.rollView.midrollTip.end(),ee.remove(t.vvs,(function(e){return e.abort(),!0})),t.currentVV=null,t.preloadVV=null,t.videoMidware&&t.videoMidware.play()}},{key:"playPreload",value:function(){var e=this,t=this;if(this.debug("play preload"),ee.remove(t.vvs,(function(n){return n==t.currentVV&&(e.debug("abort vv"),n.abort(),t.currentVV=null,t.videoMidware.play(),e.debug("remove current vv"),!0)})),this.debug("play preload vv"),t.preloadVV){t.currentVV=t.preloadVV,t.preloadVV=null;var n=t.currentVV.requests[0];n&&n.play()}}},{key:"bindEvent",value:function(){var e=this,t=this;t.on("video-play",(function(){e.debug("player notify video play"),e.setViewController()})),t.binResize(t.videoMidware.video()),t.on("click",(function(n){if(e.debug("click",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];i&&"definitionswitching"==n.type&&i.emit("clickAndOpen")}})),t.on("impression",(function(n){if(e.debug("impression",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];i&&"definitionswitching"==n.type&&i.emit("impression")}})),t.on("impressionAdZone",(function(e){this.debug("impressionAdZone",e);var n=e.data.adZoneId,r=t.currentVV;r&&n&&ee.each(r.requests,(function(e){ee.each(e.slots,(function(e){e.adZoneId==n&&e.sendEmptyTrackingBeforeTimeSlice(Infinity)}))}))}))}},{key:"binResize",value:function(e){var t=this,n=new hn(100,50),r=e.offsetWidth;function i(){var n=e.offsetWidth;n==r||(t.debug("video resize",r,"==>",n),t.resize(),r=n)}n.on("timer",i),window.addEventListener("resize",(function(){i()}))}},{key:"getUser",value:function(){var e=this,t=ee.only(e,"isVIP passportId passportCookie uaaUserId cupidUserId");if(e.videoMidware){var n=e.videoMidware.getUserInfo();ee.extend(t,n)}return t||{}}},{key:"updateUser",value:function(){var e=this.getUser();return this.debug("update user info",e),ee.extend(this,e),e}},{key:"loadVC",value:function(){var e,t=this,n=this;if(n.memoryLoadVC)return n.memoryLoadVC;if(window.Mars_V)e=Promise.resolve(window.Mars_V);else{var r="//static.iqiyi.com/js/common/mars_v.js?t="+Date.now(),i=document.createElement("script"),a=document.getElementsByTagName("script")[0];i.async=!0,e=new Promise((function(e){t.debug("load view controller"),i.src=r,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){i.onload=null,e()},i.onerror=function(){e()},setTimeout((function(){e()}),8e3),a.parentNode.insertBefore(i,a)}))}return n.memoryLoadVC=n.memoryLoadVC||e,n.memoryLoadVC}},{key:"setViewController",value:function(e){var t=this;t.viewController&&e?e():t.loadVC().then((function(){!t.viewController&&window.Mars_V&&(t.ajax=ft,t.viewController=window.Mars_V.init(t),t.rollView=t.viewController.rollView,t.pauseView=t.viewController.pauseView),e&&e()}))}},{key:"resize",value:function(){this.currentVV&&this.currentVV.resize()}},{key:"destroy",value:function(){var e=this;e.switchView("destroy"),e=null}},{key:"fetchLogs",value:function(){this.debug("fetch logs",this.logger.logs.length);var e,t,n=this.logger.logs.slice(-500);return e="mars",t=n,ee.map(t,(function(t){var n=["["+e+"]["+(t.key||"")+"]["+t.name+"]"];return ee.each(t.data,(function(e){if("object"==P()(e))try{e=JSON.stringify(e)}catch(t){}n.push(String(e))})),n.join(" ")})).join("\r\n")}}]),n}(qe);var Bi={init:function(e){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=new Mi(e);return window.Mars[t.playerId]=t,t}(e)}};"undefined"!=typeof window&&(window.Mars?Bi=window.Mars:window.Mars=Bi);var Ni=Bi,Fi=n(488);function qi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ji,Ui,Vi,Hi=new S.a("Wonder.Data.PC"),zi=function(e){l()(n,e);var t=qi(n);function n(e,r){var a;return i()(this,n),a=t.call(this),e.playerType="wonder",e.tvid=Object(w.a)(e.tvid),a.adapter=r,a.ad=Ni.init({playerId:e.parentId}),a.engine=new x.a(e,u()(a)),a.lang=b.a,a.engine.i18n.isTraditionalChinese()&&(a.lang=m.a),a.view=new Fi.a(e,u()(a)),a.view.init(),k.L.init(),a.initEvent(),a}return o()(n,[{key:"initEvent",value:function(){var e=this.engine,t=this.adapter,n=!1,r=!1;function i(e,n){if(e===v.a.QYPLAYER_FOLLOW_UPNEXT_LOAD){if(r)return;r=!0}Hi.log("adapter emit: ".concat(e)+(e===v.a.QYPLAYER_NOTIFY_TIMEUPDATE?"-".concat(n.current):"")),t.fire({type:e,data:n})}function a(e,n){(n=n||{}).state=e.toLocaleLowerCase(),Hi.info("state change: "+JSON.stringify(n)),t.fire({type:v.a.QYPLAYER_STATE_CHANGE,data:n})}e.on(y.a.NTF_StatusChanged,(function(n){switch(n.state){case y.a.Status_AdStartPlay:a(v.a.QYPLAYER_STATUS_AD_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case y.a.Status_AdPlaying:a(v.a.QYPLAYER_STATUS_AD_PLAYING,n);break;case y.a.Status_AdPaused:a(v.a.QYPLAYER_STATUS_AD_PAUSED,n);break;case y.a.Status_Loadstart:i(v.a.QYPLAYER_H5_VIDEO_LOADSTART);break;case y.a.Status_LoadedMetaData:i(v.a.QYPLAYER_H5_VIDEO_LOADEDMETADATA);break;case y.a.Status_StartPlay:a(v.a.QYPLAYER_STATUS_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case y.a.Status_Waiting:e.isSeeking()||a(v.a.QYPLAYER_STATUS_WAITING,n);break;case y.a.Status_Paused:a(v.a.QYPLAYER_STATUS_PAUSED,n);break;case y.a.Status_Playing:a(v.a.QYPLAYER_STATUS_PLAYING,n);break;case y.a.Status_Stoped:a(v.a.QYPLAYER_STATUS_STOPED,n);break;case y.a.Status_End_Play:a(v.a.QYPLAYER_STATUS_END_PLAY,n);break;case y.a.Status_PlayError:a(v.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini})}})).on(y.a.NTF_VRSReady,(function(e){i(v.a.QYPLAYER_STATUS_DATA_READY,e.data)})).on(y.a.NTF_CanPlayThrough,(function(){})).on(y.a.NTF_VolumeChanged,(function(e){n&&i(v.a.QYPLAYER_H5_VOLUME_CHANGED,e),n=!0})).on(y.a.NTF_DurationChanged,(function(e){i(v.a.QYPLAYER_H5_DURATION_CHANGED,e)})).on(y.a.NTF_VideoChanged,(function(t){e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId,t.isIVSubSwitch=e.isIVSubSwitch),i(v.a.QYPLAYER_VIDEO_CHANGE,t)})).on(y.a.NTF_VideoChange,(function(t){t.playerVersion=g.a,e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId),i(v.a.QYPLAYER_VID_CHANGE,t)})).on(y.a.NTF_FollowUpNextLoad,(function(e){i(v.a.QYPLAYER_FOLLOW_UPNEXT_LOAD,e)})).on(y.a.NTF_AD_Start,(function(e){i(v.a.QYPLAYER_NOTIFY_AD_START,e)})).on(y.a.NTF_AD_End,(function(e){i(v.a.QYPLAYER_NOTIFY_AD_END,e)})).on(y.a.Status_AresNoticeInfo,(function(e){i(e.type,e.data)})).on(y.a.NTF_TimeUpdate,(function(e){i(v.a.QYPLAYER_NOTIFY_TIMEUPDATE,e)})).on(y.a.NTF_Seeking,(function(e){i(v.a.QYPLAYER_STATUS_SEEKING,e)})).on(y.a.NTF_NeedUserGesture4Playback,(function(n){Hi.info("需要用户授权开播"),e.needUserGesture4Playback=!0,t.loadSkin({isMini:e.isMini}),i(v.a.QYPLAYER_NOTIFY_NeedUserGesture4Playback,n)})).on(y.a.NTF_Error,(function(n){a(v.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini}),"A00011"===n.code&&(i(v.a.QYPLAYER_RECHARGE,{code:"Q00310",from:""}),i(v.a.QYPLAYER_FOLLOW_UPNEXT_LOAD))})).on(y.a.NTF_Recharge,(function(n){t.loadSkin({isMini:e.isMini}),i(v.a.QYPLAYER_RECHARGE,n)})).on(y.a.NTF_BuyPlay,(function(e){i(v.a.QYPLAYER_BuyPlay,e)})).on(y.a.NTF_AD_BLOCK,(function(e){i(v.a.QYPLAYER_NOTIFY_AD_BLOCK,e)})).on(y.a.EVT_OPEN_VIP,(function(e){i(y.a.EVT_OPEN_VIP,e)})).on(y.a.EVT_BANNED,(function(e){i(y.a.EVT_BANNED,e)})).on(y.a.AUTO_CHECK_LOGIN,(function(e){i(v.a.QYPLAYER_CHECK_SHOW_LOGIN_PANEL,e)})).on(y.a.TVG_SCROLL,(function(e){i(v.a.TVG_SCROLL,e)})),this.view.on(v.a.QYPLAYER_FIND_GOODS,(function(e){i(v.a.QYPLAYER_FIND_GOODS,e)})).on(v.a.QYPLAYER_DOSOMETHING,(function(e){i(v.a.QYPLAYER_DOSOMETHING,e)})).on(_.a.NTF_SHOW_LOGIN_PANEL,(function(e){i(v.a.QYPLAYER_SHOW_LOGIN_PANEL,e)})).on(_.a.NTF_WebFullScreen_BeforeChange,(function(e){i(v.a.QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(_.a.NTF_WebFullScreen_AfterChange,(function(e){var t="enter"===e;i(v.a.QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE,t)})).on(_.a.NTF_FullScreen_BeforeChange,(function(e){i(v.a.QYPLAYER_FULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(_.a.NTF_FullScreen_AfterChange,(function(e){var t="enter"===e;i(v.a.QYPLAYER_FULLSCREEN_AFTER_CHANGE,t)})).on(_.a.NTF_FeedBack_Show,(function(){i(v.a.QYPLAYER_NOTIFY_FEEDBACK_SHOW)})).on(_.a.NTF_FeedBack_Hide,(function(){i(v.a.QYPLAYER_NOTIFY_FEEDBACK_HIDE)})).on(_.a.NTF_FeedBack_Panel_show,(function(e){i(v.a.QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW,e)})).on(_.a.NTF_USER_SEEK,(function(){i(v.a.QYPLAYER_NOTIFY_USER_SEEK)})).on(_.a.NTF_AIView_AIResult,(function(e){i(v.a.QYPLAYER_NOTIFY_AI_STAR_INFO,e)})).on(_.a.NTF_AIView_AIFeedback,(function(e){i(v.a.QYPLAYER_NOTIFY_AI_FEEDBACK,e)})).on(_.a.NTF_AIView_CLOSE,(function(e){i(v.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(_.a.NTF_AIView_BAIKE_CLOSE,(function(e){i(v.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(_.a.NTF_SHOW_VIDEOLIST,(function(e){i(v.a.QYPLAYER_NOTIFY_SHOW_VIDEOLIST,e)})).on(_.a.NTF_VIDEOLIST_BTN_CLICK,(function(e){i(v.a.QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN,e)})).on(_.a.NTF_IV_INTERACTIONSTART,(function(e){i(v.a.QYPLAYER_NOTIFY_INTERACTION_START,e)})).on(_.a.NTF_IV_INTERACTIONEND,(function(e){i(v.a.QYPLAYER_NOTIFY_INTERACTION_END,e)})).on(_.a.NTF_Barrage_Send,(function(e){i(v.a.QYPLAYER_BARRAGE_SEND,e)})).on(_.a.NTF_METAPANEL_STATE_CHANGE,(function(e){i(v.a.QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE,e)})).on(_.a.NTF_RF_STATE_CHANGE,(function(e){i(v.a.QYPLAYER_NOTIFY_RF_STATE_CHANGE,e)})).on(_.a.NTF_TVG_BTN_CLICK,(function(e){i(v.a.QYPLAYER_NOTIFY_TVG_BTN_CLICK,e)})).on(_.a.NTF_PAYLAYER_DATA,(function(n){1===n.status&&t.loadSkin({isMini:e.isMini})}))}},{key:"addView",value:function(e){this.view.addView(e)}},{key:"load",value:function(e){Hi.info("js call func load(加载视频), data = "+e),this.engine.load(e)}},{key:"destroy",value:function(){this.engine.destroy(),this.view.destroy()}},{key:"play",value:function(e){Hi.info("js call func play(播放)");var t=!1;e&&e.withUserGesture&&(t=!0),this.engine.play(t)}},{key:"resume",value:function(){Hi.info("js call func resume"),this.engine.play()}},{key:"replay",value:function(){Hi.info("js call func replay"),this.engine.replay()}},{key:"pause",value:function(){Hi.info("js call func pause , patch = ".concat(this.engine.isPatch(),", switching=").concat(this.engine.playproxy._videoSwitching)),this.engine.isPatch()||(this.engine.playproxy._videoSwitching?this.engine.pause(!0,!0):this.engine.pause())}},{key:"seek",value:function(e){Hi.info("js call func seek, time = "+e),this.engine.seek(e)}},{key:"seekN",value:function(e){if("number"==typeof e&&isFinite(e)){Hi.info("js call func seekN, time = "+e);var t=this.engine.getCurrenttime();this.engine.seek(t+e)}}},{key:"setPlayPingbackInfo",value:function(e){Hi.info("js call func setPlayPingbackInfo, param = "+k.f.stringify(e)),this.engine.setPlayPingbackInfo(e)}},{key:"stop",value:function(){Hi.info("js call func stop(停止播放)"),this.engine.stop()}},{key:"getMuted",value:function(){return this.engine.getMuted()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"setMuted",value:function(e){this.engine.setMuted(e)}},{key:"getPlayInfo",value:function(e){var t=this.engine,n=this.view;t.getPlayInfo((function(r){var i={},a=t.getDuration(),o=n.getRealArea();i.tvid=r.tvid,i.vid=r.vid,i.cid=r.cid,i.albumId=r.albumId,i.categoryId=r.cid,i.currentTime=t.getCurrenttime(),i.totalDuration=isNaN(a)?undefined:1e3*a,i.bufferTime=t.getBufferTime(),i.currentDefination=r.rate,i.currentTrack="",i.currentStatus=t.getCurrStatus(),i.isTryWatch=t.isTryWatch()?"1":"0",i.isPause=t.isPaused()?"1":"0",i.width=parseInt(o.width),i.height=parseInt(o.height),i.vipTypes=t.getVipTypes(),i.playerVersion=r.playerVersion,i.ctt=t.getMovieInfo().ctt,i.pcaHas4k=t.getMovieInfo().pcaHas4k,i.vidl=r.vidl,e&&"function"==typeof e&&e(i)}))}},{key:"getVideoInfo",value:function(e){this.engine.getVideoInfo(e)}},{key:"setQiyiUserLogin",value:function(e){Hi.info("js call func setQiyiUserLogin(修改登录状态), param = "+k.f.stringify(e)),this.view.setQiyiUserLogin(e)}},{key:"switchVideo",value:function(e){Hi.info("js call func switchVideo(影片切换), param = "+k.f.stringify(e)),this.engine.switchVideo(e)}},{key:"switchNextVideo",value:function(){Hi.info("js call func switchNextVideo(下一集)"),this.view.switchNextVideo()}},{key:"switchPreVideo",value:function(){Hi.info("js call func switchPreVideo(上一集)"),this.view.switchPreVideo()}},{key:"addVideoList",value:function(e){Hi.info("js call func addVideoList(添加联播列表)"),this.view.addVideoList(e)}},{key:"removeVideoList",value:function(e){Hi.info("js call func removeVideoList(从联播列表删除), data = "+e),this.view.removeVideoList(e)}},{key:"setSmallWindowMode",value:function(e){this.view.setSmallWindowMode(e)}},{key:"jsNotifyAdManager",value:function(e){this.engine.jsNotifyAdManager(e)}},{key:"getQiyiPlayerLog",value:function(e){try{this["package"].getQiyiPlayerLog(e)}catch(t){}}},{key:"clearBanWord",value:function(){this.view.emit(_.a.NTF_Barrage_ClearBanWord)}},{key:"addBanWord",value:function(e){this.view.emit(_.a.NTF_Barrage_AddBanWord,e)}},{key:"removeBanWord",value:function(e){this.view.emit(_.a.NTF_Barrage_RemoveBanWord,e)}},{key:"notyfyADInfo",value:function(e){this.engine.notyfyADInfo(e)}},{key:"setRightBarStatus",value:function(e){e&&e.type&&(Hi.info("js call func setRightBarStatus, param = "+k.f.stringify(e)),this.view.setRightBarStatus(e))}},{key:"setExpandScreenStatus",value:function(e){e&&this.view.emit(_.a.NTF_EXPANDSCREEN_STATUS_CHANGED,e)}},{key:"getQiyiPlayerInfo",value:function(e){this.getPlayInfo(e)}},{key:"setPlayerWebFullScreen",value:function(e){this.view.emit(_.a.NTF_WebFullScreen_SetSwitch,e)}},{key:"setPlayerFullScreen",value:function(e){this.view.emit(_.a.NTF_FullScreen_SetSwitch,e)}},{key:"setDelayPlayInfo",value:function(e){this.engine.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.engine.clearDelayPlayInfo(e)}},{key:"addPlayListView",value:function(e){e.request=!0,this.view.emit(_.a.NTF_ADDVideoList,e)}},{key:"getSwitchVideoType",value:function(){this.view._switchVideoType}},{key:"exitPicInPic",value:function(){this.view.emit(_.a.Type_ExitPic)}},{key:"showToast",value:function(e){this.view.emit(_.a.NTF_SHOW_TOAST,{txt:e})}},{key:"refresh",value:function(e){this.engine.refresh(e)}},{key:"backToStoryLine",value:function(e){var t=this.engine.IVRecorder;t&&t.backToStoryLine(e)}},{key:"backToIVMain",value:function(e){this.view.emit(_.a.NTF_BACK_TO_IV_MAIN,e)}},{key:"setFollowData",value:function(e){Hi.info("js call func setFollowData, data = ".concat(k.f.stringify(e))),this.view.setFollowData(e)}},{key:"changeFollowState",value:function(e){Hi.info("js call func changeFollowState, data = ".concat(k.f.stringify(e))),this.view.emit(_.a.NTF_FOLLOW_CHANGE_STATE,e)}},{key:"changeAIBaikeState",value:function(e){Hi.info("js call func changeAIBaikeState, data = ".concat(k.f.stringify(e))),this.view.emit(_.a.NTF_AIView_BAIKE_STATECHANGE,e)}},{key:"setBarrageState",value:function(e){try{Hi.info("js call func setBarrageState, data = ".concat(k.f.stringify(e))),e.index!==undefined&&e.focus!==undefined&&(this.view.barrageFocux==undefined&&(this.view.barrageFocux=[]),this.view.barrageFocux[parseInt(e.index)]=e.focus)}catch(t){console.log(t)}}},{key:"getFeedbackInfo",value:function(){this.view.emit(_.a.NTF_FeedBack_getInfo)}},{key:"showTips",value:function(e){var t=e.text,n=void 0===t?"":t,r=e.time,i=void 0===r?2e3:r,a=e.isCoexist,o=void 0===a||a;this.view.emit(_.a.NTF_SHOW_TIPS,{text:n,time:i,isCoexist:o})}},{key:"notifyMetaPanel",value:function(e){this.view.notifyMetaPanel(e)}},{key:"getMetaPanelInfo",value:function(){return this.view.getMetaPanelInfo()}},{key:"getRightFloaterInfo",value:function(){return this.view.getRightFloaterInfo()}},{key:"noticeRightFloater",value:function(e){this.view.noticeRightFloater(e)}},{key:"setPayLayerStatus",value:function(e){this.view.setPayLayerStatus(e)}},{key:"setBarragePanel",value:function(e){this.view.setBarragePanel(e)}},{key:"getPlayerDom",value:function(){return this.view.getPlayerDom()}},{key:"showKbTip",value:function(e){this.view.emit(_.a.NTF_SHOW_KB_TIP,e)}},{key:"closeKbTip",value:function(){this.view.emit(_.a.NTF_CLOSE_KB_TIP)}},{key:"setAlbumAfterFeature",value:function(e){this.view.emit(_.a.NTF_ALBUM_AFTER_FEA,e)}},{key:"getCurrentTime",value:function(){return this.engine.getCurrenttime()}},{key:"skipPrelude",value:function(e){this.view.skipPrelude(e)}},{key:"noticePlayerHideDefinition",value:function(e){return this.view.emit(_.a.NTF_HIDE_DEFINITION_ITEM,e)}}]),n}(k.c);t["default"]=zi;ji="wonder.data.pc",Ui=window.QiyiPlayerLoader||{},Vi=!!Ui.packLoader.usedGrayUrl[ji],Ui.packageName===ji&&(!Vi&&Ui.isSyncing||!Ui.isSyncing)&&Ui.setPackage(zi)},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));n(17),n(23);var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(113),u=n.n(s),c=n(8),l=n.n(c),d=n(9),f=n.n(d),h=n(41),p=n.n(h),v=n(3),y=n.n(v),g=(n(133),n(307)),m=n(138),_=(n(35),n(154),n(30),n(44),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(627)),b=n(39),x=n(1012),k=n(308),w=function(){function e(t){i()(this,e),this.audioSequenceNumber=1,this.cacheBuffer=new x.a,this.context=t}return o()(e,[{key:"parse",value:function(e){var t=null,n=e.tracks.audioTrack;n&&(this.loopAACFrames_(n,e.audioTimeOffset),n.samples.length>0&&(t={type:"fragment",contentType:"audio",arrayBufferList:this.remuxAudio_(n),duration:(this.nextSegmentPts-this.curSegmentPts)/n.inputTimeScale,startDTS:this.curSegmentPts/n.inputTimeScale,startPTS:this.curSegmentPts/n.inputTimeScale,nextSegmentPTS:this.nextSegmentPts}));return t}},{key:"reset",value:function(){this.audioSequenceNumber=1,this.nextSegmentPts=undefined,this.cacheBuffer.clear()}},{key:"remuxAudio_",value:function(e){var t=this.cacheBuffer,n=k.a.moof(this.audioSequenceNumber,e.baseMediaDecodeTime,e),r=k.a.mdat(this.mdat,!0);this.audioSequenceNumber++,t.append(n),t.append(r);var i=t.toNewBytes();return t.clear(),[i.buffer]}},{key:"loopAACFrames_",value:function(e,t){var n=e.frames,r=e.codec,i=e.realCodec,a=e.channelCount,o=e.timescale,s=e.inputTimeScale,u=e.isAAC,c=this.nextSegmentPts,l=s/o,d=(u?1024:1152)*l;if(e.samples=[],0!==n.length){var f="number"==typeof c&&!isNaN(c)&&c>0&&(Math.abs(t-c)<.1*s||Math.abs(n[0].pts-c)<20*d);f||(b.a.log("audio track consecutive fragments as being contiguous: ".concat(f)),c=t);for(var h,p=0;p<n.length;){var v=(h=n[p]).pts-c,y=Math.abs(1e3*v/s);if(v<=-1*d)b.a.warn("Dropping 1 audio sample @ ".concat((c/e.inputTimeScale).toFixed(3),"s due to ").concat(Math.round(y)," ms overlap.")),n.byteLength-=h.data.byteLength,n.splice(p,1);else if(v>=1*d&&y<1e4&&c){var g=Math.round(v/d);b.a.warn("Injecting ".concat(g," audio frame (").concat(r,"/").concat(i,"/").concat(a,") @ ").concat((c/s).toFixed(3),"s due to ").concat(Math.round(1e3*v/s)," ms gap."));for(var m=0;m<g;m++){var x=Math.max(c,0),k=Object(_.a)(i,a);k||(b.a.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),k=h.data.subarray()),n.byteLength+=k.byteLength,n.splice(p,0,{data:k,pts:x,dts:x}),c+=d,p++}h.pts=h.dts=c,c+=d,p++}else h.pts=h.dts=c,c+=d,p++}if(0!==n.length){var w=n[0],S=Math.max(w.pts,0);e.baseMediaDecodeTime=S/l;for(var T,P,E=0,A=8,I=new Uint8Array(A+n.byteLength);E<n.length;E++)T=n[E],P=n[E+1],e.samples.push({size:T.data.byteLength,duration:P?Math.round((P.pts-T.pts)/l):0,cts:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:0}}),I.set(T.data,A),A+=T.data.byteLength;e.samples.length>=2&&(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration),this.nextSegmentPts=c,this.curSegmentPts=S,this.mdat=I}}}}]),e}(),S=function(){function e(t){i()(this,e),this._hasVideoIS=!1,this._hasAudioIS=!1,this.context=t}return o()(e,[{key:"needParseIS",get:function(){return!(this._hasVideoIS&&this._hasAudioIS)}},{key:"parse",value:function(e){for(var t=[],n=e.tracks||[],r=0;r<n.length;r++){var i=n[r];switch(i.type){case"video":this._hasVideoIS||(this._hasVideoIS=!0,i.container="video/mp4",t.push(this._initSegment(i)));break;case"audio":this._hasAudioIS||(this._hasAudioIS=!0,i.container="audio/mp4",t.push(this._initSegment(i)))}}return t}},{key:"reset",value:function(){this._hasVideoIS=!1,this._hasAudioIS=!1}},{key:"_initSegment",value:function(e){var t=k.a.initSegment([e]);return{type:"initSegment",contentType:e.type,container:e.container,codec:e.codec,trackId:e.id,arrayBufferList:[t.buffer]}}}]),e}(),T=n(0),P=n(185),E=function(){function e(t){i()(this,e),this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer=new x.a,this.context=t}return o()(e,[{key:"parse",value:function(e){var t=null,n=e.tracks.videoTrack;n&&(this.loopGOPs_(n),t={type:"fragment",contentType:"video",arrayBufferList:this.remuxVideo_(n),duration:(this.nextSegmentDts-n.firstDTS)/n.timescale,startDTS:n.firstDTS/n.timescale,startPTS:n.firstPTS/n.timescale});return t}},{key:"reset",value:function(){this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer.clear()}},{key:"remuxVideo_",value:function(e){var t=this.cacheBuffer,n=k.a.moof(this.videoSequenceNumber,e.baseMediaDecodeTime,e),r=k.a.mdat(this.mdat,!0);this.videoSequenceNumber++,t.append(n),t.append(r);var i=t.toNewBytes();return t.clear(),[i.buffer]}},{key:"loopGOPs_",value:function(e){var t,n,r,i,a,o,s,u,c,l,d,f=0,h=e.gops,p=-1,v=8;e.samples=[];var y=h[0],g=y[0],m=h[h.length-1],_=m[m.length-1];a=Math.max(g.dts,0),o=Math.max(g.pts,0),s=Math.max(_.dts,0),u=o,T.a.browser.SAFARI&&(f=Math.round((s-a)/(h.frameLength-1)));var k=h.length&&this.nextSegmentDts&&(Math.abs((a-this.nextSegmentDts)/e.timescale)<.1||Math.abs(o-this.nextSegmentPts)<e.timescale/5);if("boolean"==typeof k&&(k=!0),k){var w=Math.round((a-this.nextSegmentDts)/90);if(w)if(w>1){var S=g.duration/90,E=w%S*90,A=Math.ceil(w/S)||0;for(b.a.warn("AVC:".concat(w," ms hole between fragments detected @").concat((this.nextSegmentDts/90).toFixed(3),"ms, filling it ").concat(A," I-frame")),i=0;i<A;i++){var I=Math.max(this.nextSegmentDts,0),D=Math.max(this.nextSegmentPts,0),L=Object(P.a)([],g,!0);L.dts=I,L.pts=D,0===i&&(a=I,o=D),i===A-1&&E>0&&(L.duration=E),this.nextSegmentDts+=L.duration,this.nextSegmentPts+=L.duration,h.byteLength+=L.byteLength,h.naluCount+=L.naluCount,y.splice(i,0,L)}}else w<-1&&b.a.log("AVC:".concat(-w," ms overlapping between fragments detected"))}var O=v+h.byteLength+4*h.naluCount,R=Object(x.b)(O),C=new DataView(R.buffer);for(C.setUint32(0,O),t=0;t<h.length;t++)for(c=h[t],n=0;n<c.length;n++){l=c[n],p+=1,T.a.browser.SAFARI?l.dts=a+p*f:l.dts=Math.max(l.dts,a),l.pts=Math.max(l.pts,l.dts);var M={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1},cts:undefined,duration:undefined};for(T.a.browser.SAFARI?M.cts=Math.max(0,f*Math.round((l.pts-l.dts)/f)):M.cts=l.pts-l.dts,M.duration=l.duration,M.size=4*l.length,(l.keyframe||T.a.browser.CHROME&&0===e.samples.length)&&(M.flags.dependsOn=2,M.flags.isDependedOn=1,M.flags.isNonSyncSample=0),r=0;r<l.length;r++)d=l[r],M.size+=d.rawData.byteLength,C.setUint32(v,d.rawData.byteLength),v+=4,R.set(d.rawData,v),v+=d.rawData.byteLength;e.samples.push(M),u=Math.max(u,l.pts)}e.firstDTS=a,e.firstPTS=o,e.baseMediaDecodeTime=a;var B=e.samples[e.samples.length-1].duration;this.nextSegmentPts=u+B,this.nextSegmentDts=s+B,this.mdat=R}}]),e}();function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var I=function(e){l()(n,e);var t=A(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this)).context=e,r.options=a,r._initComplexer=new S(e),r._audioComplexer=new w(e),r._videoComplexer=new E(e),r}return o()(n,[{key:"audioAlignPTS",set:function(e){this._audioComplexer.nextSegmentPts=e}},{key:"push",value:function(e){var t=this.context;if(this._initComplexer.needParseIS){var n=this._initComplexer.parse(e),r=n.length;if(r>0)for(var i=0;i<r;i++){var a=n[i];this.emit("data",{fragmentType:"initSegment",contentType:a.contentType,container:a.container,codec:a.codec,trackId:a.trackId,data:a.arrayBufferList,meta:t.config?t.config.meta:null})}}if(this._audioComplexer){var o=this._audioComplexer.parse(e);o&&this.emit("data",{fragmentType:"fragment",contentType:o.contentType,data:o.arrayBufferList,startDTS:o.startDTS,startPTS:o.startPTS,duration:o.duration,nextSegmentPTS:o.nextSegmentPTS,meta:t.config?t.config.meta:null})}if(this._videoComplexer){var s=this._videoComplexer.parse(e);s&&this.emit("data",{fragmentType:"fragment",contentType:s.contentType,data:s.arrayBufferList,startDTS:s.startDTS,startPTS:s.startPTS,duration:s.duration,meta:t.config?t.config.meta:null})}}},{key:"rebuildInitSegment",value:function(){this._initComplexer.reset()}},{key:"reset",value:function(){this._initComplexer.reset(),this._audioComplexer.reset(),this._videoComplexer.reset()}}]),n}(m.a);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var L=function(e){l()(n,e);var t=D(n);function n(e){var r,a,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(a=t.call(this,e,o)).tracks=[],a._syncDTS=0,a._syncPTS=0,a._complexStream=new I(e,o),a.pipe(a._complexStream),p()((r=u()(a),y()(n.prototype)),"listenEndStream_",r).call(r),a}return o()(n,[{key:"audioAlignPTS",set:function(e){this._complexStream.audioAlignPTS=e}},{key:"endStream",get:function(){return this._complexStream}},{key:"push",value:function(e){var t=this.tracks,n=e.videoTrack,r=e.audioTrack,i=e.captionTrack;n&&!t.videoTrack&&(t.push(n),t.videoTrack=n),r&&!t.audioTrack&&(t.push(r),t.audioTrack=r),i&&!t.captionTrack&&(t.push(i),t.captionTrack=i);var a=n?n.firstDTS:0,o=r?r.firstDTS:0;if(r&&r.frames&&n&&n.gops){var s=r.firstDTS-n.firstDTS;o=a+Math.max(0,s)}this.emit("data",{audioTimeOffset:o,videoTimeOffset:a,tracks:this.tracks}),this.tracks.splice(0,this.tracks.length),this.tracks.videoTrack=null,this.tracks.audioTrack=null,this.tracks.captionTrack=null}},{key:"rebuildInitSegment",value:function(){this._complexStream.rebuildInitSegment()}},{key:"reset",value:function(){this.tracks=[],this._syncDTS=0,this._syncPTS=0,this.emit("reset")}}]),n}(g.b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n(44),n(17),n(30),n(68),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(121),n(702),n(101),n(490),n(23);var r=n(8),i=n.n(r),a=n(9),o=n.n(a),s=n(3),u=n.n(s),c=n(4),l=n.n(c),d=n(5),f=n.n(d),h=n(654);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var i=u()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o()(this,n)}}var v=function(){function e(t){l()(this,e);var n=0,r=t[0],i=this.readESLen_(t.subarray(++n)),a=i.length,o=i.byteLength;this.tag=r,this.sizeByteLength=o,this.length=a,this.dataBuffer=t.subarray(1+this.sizeByteLength)}return f()(e,[{key:"readESLen_",value:function(e){var t,n,r=0;for(n=0;n<4&&(t=(128&e[n])>>7,r=(127&e[n])+(r<<7),0!==t);++n);return{byteLength:++n,length:r}}}]),e}(),y=function(e){i()(n,e);var t=p(n);function n(e,r,i){var a;if(l()(this,n),5!==(a=t.call(this,e)).tag)throw Error("DecoderSpecificInfo invalid");if(e=a.dataBuffer,5===r&&64===i){var o=Object(h.a)(e),s=o.audioObjectType,u=o.samplingFrequencyIndex,c=o.channelConfiguration;a.audioObjectType=s,a.samplingFrequencyIndex=u,a.channelConfiguration=c}return a}return f()(n)}(v),g=function(e){i()(n,e);var t=p(n);function n(e){var r;if(l()(this,n),4!==(r=t.call(this,e)).tag)throw Error("DecoderConfigDescriptor invalid");return e=r.dataBuffer,r.objectProfileIndication=e[0],r.streamType=e[1]>>2,r.bufferSize=e[2]<<16|e[3]<<8|e[4],r.maxBitrate=e[5]<<24|e[6]<<16|e[7]<<8|e[8],r.avgBitrate=e[9]<<24|e[10]<<16|e[11]<<8|e[12],r.decoderSpecificInfo=new y(e.subarray(13),r.streamType,r.objectProfileIndication),r}return f()(n)}(v),m=function(e){i()(n,e);var t=p(n);function n(e){var r;if(l()(this,n),3!==(r=t.call(this,e)).tag)throw Error("ESDescriptor invalid");e=r.dataBuffer,r.esId=e[0]<<8|e[1];var i=e[2]>>7,a=e[2]>>6&1,o=e[2]>>5&1;r.streamPriority=31&e[2];var s=3;return i&&(s+=2),a&&(s+=2),o&&(s+=2),r.decoderConfig=new g(e.subarray(s)),r}return f()(n)}(v),_=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},b=function(e){return new Date(1e3*e-20828448e5)},x=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},k={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:w(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),new Uint8Array(e.subarray(1,4));return Object.assign({},new m(e.subarray(4)))},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:_(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(_(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:w(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:w(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:_(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(decodeURIComponent(t.name)),t},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:"",creationTime:new Date,modificationTime:new Date,timescale:0,duration:0};return 1===i.version?(r+=4,i.creationTime=b(n.getUint32(r)),r+=8,i.modificationTime=b(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=b(n.getUint32(r)),r+=4,i.modificationTime=b(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((960&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:w(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:w(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536,streamDescriptor:undefined};return e.byteLength>28&&(n.streamDescriptor=w(e.subarray(28))[0]),n},moof:function(e){return{boxes:w(e)}},moov:function(e){return{boxes:w(e)}},mvex:function(e){return{boxes:w(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),creationTime:new Date,modificationTime:new Date,timescale:0,duration:0,rate:0,volume:0,matrix:new Uint32Array(0),nextTrackId:0};return 1===r.version?(n+=4,r.creationTime=b(t.getUint32(n)),n+=8,r.modificationTime=b(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=b(t.getUint32(n)),n+=4,r.modificationTime=b(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},stbl:function(e){return{boxes:w(e)}},stco:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=t.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),entryCount:n,chunkOffsets:[]},i=8;n;i+=4,n--)r.chunkOffsets.push(t.getUint32(i));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),boxes:w(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},stss:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),frameIndex:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.frameIndex.push({index:n.getUint32(t)});return r},ctts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),frameIndex:[]},i=n.getUint32(4);if(0==r.version)for(t=8;i;t+=8,i--)r.frameIndex.push({sample_count:n.getUint32(t),sample_offset:n.getUint32(t+4)});else for(t=8;i;t+=8,i--)r.frameIndex.push({sample_count:n.getUint32(t),sample_offset:n.getInt32(t+4)});return r},styp:function(e){return k.ftyp(e)},tfdt:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),creationTime:new Date,modificationTime:new Date,trackId:0,duration:0,layer:0,alternateGroup:0,volume:0,width:0,height:0,matrix:new Uint32Array(0)};return 1===r.version?(n+=4,r.creationTime=b(t.getUint32(n)),n+=8,r.modificationTime=b(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=b(t.getUint32(n)),n+=4,r.modificationTime=b(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/16,r},traf:function(e){return{boxes:w(e)}},trak:function(e){return{boxes:w(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],l=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getUint32(d),d+=4),a&&l&&(t={flags:x(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),c&&(t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),l--);l--;)t={},o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),u&&(t.flags=x(e.subarray(d,d+4)),d+=4),c&&(t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}}},w=function(e){for(var t,n,r,i,a=0,o=[],s=new DataView(e.buffer,e.byteOffset,e.byteLength);a<e.byteLength;)t=s.getUint32(a),n=_(e.subarray(a+4,a+8)),r=t>1?a+t:e.byteLength,(i=(k[n]||function(e){return{data:e}})(e.subarray(a+8,r))).size=t,i.type=n,o.push(i),a=r;return o},S={mp4toJSON:w}}]);