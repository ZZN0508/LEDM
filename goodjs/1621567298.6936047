/*!
 * [Project Name]
 * ABS-CBN Corporation 2017
 */
var ABSCBN=function(){"use strict";function e(){i.uninav(),i.imgLoad(),i.loadMore(),i.carousel(),i.lastestFilter(),i.search();var e=new Parallax(".parallax",{safeHeight:0});e.init();var n=$("#side-nav > ul > li > a");$(n).each(function(e,i){"javascript:void(0);"!==$(this).attr("href")&&"javascript:void(0)"!==$(this).attr("href")||$(this).attr("target","")})}var i={uninav:function(){var e=window.location.origin;$("header").uninav({type:"default",sso:!1,referrer:"abscbn",uninav:!0,oldsearch:!1,clientId:"abscbn",redirectURI:e+"/callback",domainKey:"abscbn",defaultLogin:!0,adblock:!0}),$(".uninav-icon-search-corphub:not(.search-button)").on("click",function(e){e.preventDefault(),$("#mobile-search").show(),$(".search-form").children('input[type="search"]').val(""),$(".search-form").children("span").removeClass("active")}),$(".uninav-close-corphub").on("click",function(e){e.preventDefault(),$("#mobile-search").hide(),$(".search-form").children('input[type="search"]').val(""),$(".search-form").children("span").removeClass("active")}),$(".navbar-toggle").on("click",function(){$("#side-nav , .wrapper").toggleClass("active"),$(".wrapper #nav-open").remove(),$(".wrapper").prepend('<div id="nav-open"></div>'),$("#side-nav ul.sub-nav").slideUp(),$("#side-nav > ul > li > i").removeClass("active"),setTimeout(function(){calcWidth()},600)}),$("body").on("click","#nav-open",function(){$(".navbar-toggle").trigger("click")}),$.each($("body #side-nav").find(".sub-nav"),function(){var e=$(this).find("li").length,i='<i class="fa fa-angle-down"></i>';e>0&&$(this).parent().append(i)}),$(document).on("click","#side-nav ul li .fa-angle-down",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).siblings("a").removeClass("active"),$(this).siblings("ul.sub-nav").slideUp()):($("#side-nav ul.sub-nav").slideUp(),$("#side-nav ul li .fa-angle-down, #side-nav ul li a").removeClass("active"),$(this).siblings("ul.sub-nav").slideToggle(),$(this).toggleClass("active"),$(this).siblings("a").toggleClass("active"))}),$("#mobile-nav").on("click",function(){$(".header-nav").slideToggle(),$(this).find("i").toggleClass("active")})},imgLoad:function(){var e=$(".img-display");e.each(function(){var e=$(this).find("img").attr("src").trim();$(this).css({"background-image":'url("'+e+'")'})})},loadMore:function(){$(".list-stories li").slice(0,5).show(),$(".load-more").on("click",function(e){e.preventDefault();var i=$(".list-stories li:hidden");i.slice(0,5).fadeIn(),$(this).fadeOut("slow")})},carousel:function(){$(".content-carousel").slick({infinite:!1,slidesToShow:2,slidesToScroll:1,mobileFirst:!0,adaptiveHeight:!0,nextArrow:'<button type="button" class="slick-next"><i class="fas fa-angle-right" aria-hidden="true"></i></button>',prevArrow:'<button type="button" class="slick-prev"><i class="fas fa-angle-left" aria-hidden="true"></i></button>',responsive:[{breakpoint:768,settings:{slidesToShow:3.3,slidesToScroll:1}},{breakpoint:960,settings:{slidesToShow:3.7,slidesToScroll:1}},{breakpoint:1240,settings:{slidesToShow:3.5,slidesToScroll:1}}]}),$(".experience-carousel").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,nextArrow:'<button type="button" class="slick-next"><i class="fas fa-angle-right" aria-hidden="true"></i></button>',prevArrow:'<button type="button" class="slick-prev"><i class="fas fa-angle-left" aria-hidden="true"></i></button>',adaptiveHeight:!0}),$(".shop-carousel").slick({infinite:!0,slidesToShow:2,slidesToScroll:1,adaptiveHeight:!0,nextArrow:'<button type="button" class="slick-next"><i class="fas fa-angle-right" aria-hidden="true"></i></button>',prevArrow:'<button type="button" class="slick-prev"><i class="fas fa-angle-left" aria-hidden="true"></i></button>',mobileFirst:!0,responsive:[{breakpoint:768,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:960,settings:{slidesToShow:5,slidesToScroll:1}}]})},lastestFilter:function(){$(".filter").find("li:nth-child(2)").addClass("active");var e=$(".filter").find("li.active a").data("tab");$('#latest-container .content[data-section="'+e+'"]').show(),$(".filter").on("click","a",function(e){e.preventDefault(),$(".filter li").removeClass("active"),$(this).parent().addClass("active"),$("#latest-container .content").hide();var i=$(this).data("tab");$('#latest-container .content[data-section="'+i+'"]').show()})},search:function(){$(".search-button").on("click",function(e){e.preventDefault();var i=$(".search-form ").children('input[type="search"]').val();window.location=window.location.origin+"/search?q="+encodeURIComponent(i)}),$(document).on("click",".btn-searchPage",function(e){e.preventDefault();var i=$(".search-bar ").children("input").val();window.location=window.location.origin+"/search?q="+encodeURIComponent(i)}),$(".search-bar").children("input").keypress(function(e){if(13==e.which){e.preventDefault();var i=$(".search-bar ").children("input").val();window.location=window.location.origin+"/search?q="+encodeURIComponent(i)}}),$(".search-form").children('input[type="search"]').keypress(function(e){if(13==e.which){e.preventDefault();var i=$(".search-form ").children('input[type="search"]').val();window.location=window.location.origin+"/search?q="+encodeURIComponent(i)}})}};return{init:e}}();jQuery(document).ready(function(e){ABSCBN.init()});