(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[8],{38:function(e,t){var r,n,o,i,c,a,u,s,d,f;r=$.Deferred(),n=0,o=function(){++n>=2&&r.resolve()},i=!1,c=setTimeout((function(){i=!0,o()}),3500),$(window).on("load",(function(){i||(clearTimeout(c),o())})),TT.on("reportReady",(function(){o()}),!0),d=function(e){var t=[];$.each(e,(function(e,r){if(r){var n="pos="+r.pos+",resid="+(r.rsc||0)+(r.ren?",uid="+r.ren:"");t.push("{"+n+"}")}})),s((function(){try{ya.reportProductEvent({eid:"pageview/position",extra_ext:"["+t.join(",")+"]"})}catch(e){}}))},a=[],u=null,f=function(e){e&&(clearTimeout(u),a.push(e),a.length>=10?(d(a),a=[]):u=setTimeout((function(){d(a),a=[]}),2e3))},(s=function(e){r.done(e)})((function(){$(".J_g_resource").each((function(e){f($(this).data())})),$("body").on("click",".J_g_resource",(function(e){var t=$(this).data();if(t)try{ya.reportProductEvent({eid:"click/position",position:t.pos,resourceid:t.rsc,ayyuid:t.ren})}catch(e){}}))})),TT.event.on("TT_RSC_EXPS",f)},6:function(e,t,r){"use strict";r.r(t),r.d(t,"reportEvent",(function(){return h})),r.d(t,"reportEventApply",(function(){return w})),r.d(t,"reportEventPosition",(function(){return b}));var n=r(5),o=r(16);function i(e,t,r){var n=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");if(o.type="text/javascript",o.async=!0,o.charset="utf-8",r)for(var i in r)r.hasOwnProperty(i)&&o.setAttribute(i,r[i]);o.src=e,o.onload=o.onreadystatechange=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||(t&&t(),o.onload=o.onreadystatechange=null)},n.insertBefore(o,null)}function c(e,t,r,n,o){var i=e+"="+t+"; domain="+r+"; path="+n;o>0&&(i=i+"; expires="+o.toGMTString()),document.cookie=i}var a=null,u=function(){function e(t){this.initInstance=new Promise((function(r,n){e.getSdk().then((function(e){r(new e(t))})).catch((function(e){r({getABExtParam:function(){return Promise.resolve({})}})}))}))}return e.prototype.getConfig=function(){var e=this;return new Promise((function(t,r){var n=setTimeout((function(){n=null,t({})}),5e3);e.initInstance.then((function(e){return e.getABExtParam()})).catch((function(e){return{}})).then((function(e){null!==n&&(clearTimeout(n),t(e))}))}))},e.getSdk=function(){return null===a&&(a=new Promise((function(e,t){var r=window;r.ABTEST?e(r.ABTEST):o.default.load("abtest").then((function(){if(!r.ABTEST)throw new Error("UNKNOWN");e(r.ABTEST)})).catch((function(n){i("https://static-jw.msstatic.com/rp/v2/abtest.min.js",(function(){r.ABTEST?e(r.ABTEST):t(n)}))}))}))),a},e}();function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(38);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=new $.Deferred;function g(e,t){if(e.reportProductStartUp({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,ref:t.ref}),e.startProductHeartbeat({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,ref:t.ref}),e.reportProductEvent({eid:t.eid,eid_desc:t.eid_desc,rso:t.rso,rso_desc:t.rso_desc,ref:t.ref}),t.rso)try{sessionStorage.setItem("ya_rso",t.rso),c("ya_rso",t.rso,TT.domainForWriteCookie,"/")}catch(e){}var r=HUYA_UTIL.getCookieVal("guid");r&&e.setExtParam("sguid="+r);var n=new Image,o={eid:t.eid,url:location.href,mid:YA.mid.get(),t:(new Date).getTime()+"_"+Math.floor(1e9*Math.random())};n.src="https://www.huya.com/d.gif?"+$.param(o),setTimeout((function(){n=null}),200)}function m(e){"function"==typeof e&&y.done(e)}function v(e,t,r,n){var o=r.eid,i=r.eid_desc;if(e.reportProductEvent(p({ref:t},r)),n){var a="string"==typeof n?n:i||o;try{sessionStorage.setItem("ya_eid",a)}catch(e){c("ya_eid",a,TT.domainForWriteCookie,"/")}}}function h(e,t){e&&m((function(r,n){return v(r,n.ref,e,t)}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n="{}";if(r)try{n=JSON.stringify(r)}catch(e){console.error(e)}h({eid:e,eid_desc:t,prop:n})}var b={click:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=e.cref,n=e.traceid,o=e.uid,i=e.gid;m((function(e,c){var a=c.ref,u="";try{u=JSON.stringify([{cref:r,ref:a,traceid:n,uid:o,gid:i}])}catch(e){}u&&v(e,a,p(p({},t),{},{eid:"click/position",eid_desc:"点击/资源位",extra:u}),r)}))}},view:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120,o=[],i=Object(n.throttle)((function(){e(o.splice(0,t)),o.length>0&&i()}),r);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.push(t),i()}}((function(e){m((function(t,r){var n=r.ref,o="",i=e.map((function(e){return e[0]})).filter((function(e){return!!e})).map((function(e){return p({ref:n},e)}));if(i.length>0)try{o=JSON.stringify(i)}catch(e){}o&&v(t,n,{eid:"pageview/position",eid_desc:"曝光/资源位",extra:o})}))}))},_={init:Object(n.once)((function(e){var t=e.eid,r=e.eid_desc,n=e.roomInfo,c=e.profileInfo,a="huya_web",s=HUYA_UTIL.getCookieVal("udb_uid")||0,d=HUYA_UTIL.getCookieVal("guid")||"";o.default.load("ya",{loader:function(e){var t=e.lib,r=e.timeout;return new Promise((function(e,n){var o=setTimeout(n,r);i(t.url,(function(){clearTimeout(o),e()}),{pro:a,id:"yaScript"})}))}}).catch((function(e){return new Promise((function(e,t){i("//static-jw.msstatic.com/rp/v2/ya-huya.finall.min.js",e,{pro:a,id:"yaScript"})}))})).then((function(){if("function"==typeof window.YA){var e=function(e){var t=e.pro,r=e.eid,n=e.eid_desc,o=e.profileInfo,i=function(e){var t,r={};if(-1!=(t=e.indexOf("?")))for(var n=e.substring(t+1,e.length).split("&"),o=[],i=0,c=n.length;i<c;i++)r[(o=n[i].split("="))[0]]=o[1];return r}(location.search),c="";try{c=sessionStorage.getItem("ya_eid")||""}catch(e){c=YA.cookie.get("ya_eid")||""}var a={pro:t,pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("udb_uid")||"",pageType:"root",rso:i.promoter||i.rso||i.from||"",rso_desc:i.promoter_desc||i.rso_desc||"",eid:r,eid_desc:n,ref:c};return{ya:new YA(a.pro,a.pas,Object.assign({pageType:a.pageType,yyuid:a.yyuid},o&&{ayyuid:o.lp,cid:"".concat(o.lp,"/").concat(o.lp)})),source:a}}({pro:a,eid:t,eid_desc:r,profileInfo:c}),n=e.ya,o=e.source;window.ya=n,new u({platform:"web",businessId:"huya",guid:d,uid:s,env:!1,variable:{client_mid:HUYA_UTIL.getCookieVal("__yamid_new")||""}}).getConfig().then((function(e){if(e&&e.mpExperiment&&n.setExtParam("oexp="+e.mpExperiment),e)try{localStorage.setItem("TT_AB_TEST_CONF",JSON.stringify(e))}catch(e){}g(n,o),y.resolve(n,o)})).catch((function(){g(n,o),y.resolve(n,o)}))}}));var f={pro:a,uid:s,pid:c?c.lp:0,anmosuid:HUYA_UTIL.getCookieVal("udbAnonymousUid")||0,sguid:d,curl:location.href,watchVideo:n&&n.isOn?1:0,replay:n&&n.isReplay?1:0};!function(e){if(window.navigator&&navigator.sendBeacon){var t=!1;try{t=navigator.sendBeacon(e)}catch(e){}t||((new Image).src=e)}else(new Image).src=e}("https://l.web.huya.com/index.php?m=HuyaWeb&do=check&".concat($.param(f)))})),ready:m,reportEvent:h,reportEventPosition:b};_.ready((function(){return TT.emit("reportReady")})),function(e){!function(e){var t=this;$("body").on("click",".clickstat",(function(t){var r=$(this),n=r.attr("eid")||r.data("eid"),o=r.attr("eid_desc")||r.data("edesc"),i=r.attr("href");if(n){var c="".concat(n).replace(/^click\//,"");e.reportEvent({eid:n,eid_desc:o},-1!="".concat(i).indexOf(TT.domain.main)?c:"")}})),$("body").on("click",".new-clickstat",(function(){var t=$(this),r=t.attr("href"),n=null;try{var o=t.attr("report")||t.data("report");n=$.parseJSON(o)}catch(e){}n&&e.reportEvent(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n),-1!="".concat(r).indexOf(TT.domain.main)?n.position:"")})),$("body").on("click",".third-clickstat",(function(){var e=$(t).data("thirdstat");e&&((new Image).src=e)}))}(e)}(_);t.default=_}}]);