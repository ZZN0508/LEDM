(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[382],{96909:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};e.default=n},84487:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};e.default=n},15071:function(t,e,n){"use strict";var r;function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(66816));e.default=a,t.exports=a},60362:function(t,e,n){"use strict";var r;function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(47495));e.default=a,t.exports=a},93100:function(t,e,n){"use strict";n.d(e,{Z:function(){return ut}});var r=n(77513),i=n(61529),a=n(59002),o=n(9758),s=n(58220),l=n(74710),u=n(26779),c=n(77185),h=n(80268),f=n(26486),d=n.n(f),p,m=(0,c.createContext)({}),v=n(54239),g=n(2451),y=n(40840),_=n(37296),x=n(61036),b=n(54643),w=n(61522),M=n(54980),S=n(22985),E=n(45699),T=n(31370),C=n(35384),k=n(40722),A=n(50090),P=n(82635),L=n(71015),D="data-rc-order",R="data-rc-priority",I="rc-util-key",N=new Map;function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):I}function F(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body;var e}function z(t){return"queue"===t?"prependQueue":t?"prepend":"append"}function U(t){return Array.from((N.get(t)||t).children).filter((function(t){return"STYLE"===t.tagName}))}function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,P.Z)())return null;var n=e.csp,r=e.prepend,i=e.priority,a=void 0===i?0:i,o=z(r),s="prependQueue"===o,l=document.createElement("style");l.setAttribute(D,o),s&&a&&l.setAttribute(R,"".concat(a)),null!=n&&n.nonce&&(l.nonce=null==n?void 0:n.nonce),l.innerHTML=t;var u=F(e),c=u.firstChild;if(r){if(s){var h=U(u).filter((function(t){if(!["prepend","prependQueue"].includes(t.getAttribute(D)))return!1;var e=Number(t.getAttribute(R)||0);return a>=e}));if(h.length)return u.insertBefore(l,h[h.length-1].nextSibling),l}u.insertBefore(l,c)}else u.appendChild(l);return l}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=F(e);return U(n).find((function(n){return n.getAttribute(O(e))===t}))}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=B(t,e);if(n){var r=F(e);r.removeChild(n)}}function G(t,e){var n=N.get(t);if(!n||!(0,L.Z)(document,n)){var r=V("",e),i=r.parentNode;N.set(t,i),t.removeChild(r)}}function W(){N.clear()}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=F(n);G(r,n);var i=B(e,n);if(i){var a,o,s;if(null!==(a=n.csp)&&void 0!==a&&a.nonce&&i.nonce!==(null===(o=n.csp)||void 0===o?void 0:o.nonce))i.nonce=null===(s=n.csp)||void 0===s?void 0:s.nonce;return i.innerHTML!==t&&(i.innerHTML=t),i}var l=V(t,n);return l.setAttribute(O(n),e),l}var j=n(83830);function q(t,e){(0,w.ZP)(t,"[@ant-design/icons] ".concat(e))}function X(t){return"object"===_typeof(t)&&"string"==typeof t.name&&"string"==typeof t.theme&&("object"===_typeof(t.icon)||"function"==typeof t.icon)}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var r=t[n];if("class"===n)e.className=r,delete e.class;else delete e[n],e[camelCase(n)]=r;return e}),{})}function K(t,e,n){return n?React.createElement(t.tag,_objectSpread(_objectSpread({key:e},Y(t.attrs)),n),(t.children||[]).map((function(n,r){return K(n,"".concat(e,"-").concat(t.tag,"-").concat(r))}))):React.createElement(t.tag,_objectSpread({key:e},Y(t.attrs)),(t.children||[]).map((function(n,r){return K(n,"".concat(e,"-").concat(t.tag,"-").concat(r))})))}function J(t){return generateColor(t)[0]}function Q(t){return t?Array.isArray(t)?t:[t]:[]}var $={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},tt="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",et=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,n=(0,c.useContext)(m),r=n.csp;(0,c.useEffect)((function(){Z(e,"@ant-design-icons",{prepend:!0,csp:r})}),[])},nt=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],rt=c.forwardRef((function(t,e){var n=t.className,r=t.component,i=t.viewBox,a=t.spin,o=t.rotate,s=t.tabIndex,f=t.onClick,p=t.children,v=(0,u.Z)(t,nt);q(Boolean(r||p),"Should have `component` prop or `children`."),et();var g=c.useContext(m),y=g.prefixCls,_=void 0===y?"anticon":y,x=g.rootClassName,b=d()(x,_,n),w=d()((0,h.Z)({},"".concat(_,"-spin"),!!a)),M=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,S=(0,l.Z)((0,l.Z)({},$),{},{className:w,style:M,viewBox:i});i||delete S.viewBox;var E=function t(){return r?c.createElement(r,(0,l.Z)({},S),p):p?(q(Boolean(i)||1===c.Children.count(p)&&c.isValidElement(p)&&"use"===c.Children.only(p).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),c.createElement("svg",(0,l.Z)((0,l.Z)({},S),{},{viewBox:i}),p)):null},T=s;return void 0===T&&f&&(T=-1),c.createElement("span",(0,l.Z)((0,l.Z)({role:"img"},v),{},{ref:e,tabIndex:T,onClick:f,className:b}),E())}));rt.displayName="AntdIcon";var it=rt,at=["type","children"],ot=new Set;function st(t){return Boolean("string"==typeof t&&t.length&&!ot.has(t))}function lt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t[e];if(st(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),t.length>e+1&&(r.onload=function(){lt(t,e+1)},r.onerror=function(){lt(t,e+1)}),ot.add(n),document.body.appendChild(r)}}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scriptUrl,n=t.extraCommonProps,r=void 0===n?{}:n;e&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(e)?lt(e.reverse()):lt([e]));var i=c.forwardRef((function(t,e){var n=t.type,i=t.children,a=(0,u.Z)(t,at),o=null;return t.type&&(o=c.createElement("use",{xlinkHref:"#".concat(n)})),i&&(o=i),c.createElement(it,(0,l.Z)((0,l.Z)((0,l.Z)({},r),a),{},{ref:e}),o)}));return i.displayName="Iconfont",i}},66816:function(t,e,n){"use strict";n(77513),n(61529),n(9758),n(48595),n(58220),n(29858);var r=n(57957),i=n(5773);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(26801)),o=c(n(77185)),s=r(n(96909)),l=r(n(99790));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function t(r){return r?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}var h=function t(e,n){return o.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:n,icon:s.default}))};h.displayName="EllipsisOutlined";var f=o.forwardRef(h);e.default=f},47495:function(t,e,n){"use strict";n(77513),n(61529),n(9758),n(48595),n(58220),n(29858);var r=n(57957),i=n(5773);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(26801)),o=c(n(77185)),s=r(n(84487)),l=r(n(99790));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function t(r){return r?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}var h=function t(e,n){return o.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:n,icon:s.default}))};h.displayName="PlusOutlined";var f=o.forwardRef(h);e.default=f},58247:function(t,e,n){"use strict";n.d(e,{Z:function(){return O}});var r=n(59329),i=n(47721),a=n(61529),o=n(82205),s=n(77513),l=n(9758),u=n(58220),c=n(77185),h=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function f(t,e){void 0===t&&(t=!1);var n=h((0,c.useState)(t),2),r=n[0],i=n[1],a;return[r,(0,c.useMemo)((function(){var n=void 0===e?!t:e,r,a,o,s;return{toggle:function e(){return i((function(e){return e===t?n:t}))},set:function t(e){return i(e)},setLeft:function e(){return i(t)},setRight:function t(){return i(n)}}}),[])]}var d=f,p=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function m(t){void 0===t&&(t=!1);var e=p(d(t),2),n=e[0],r=e[1],i=r.toggle,a=r.set,o;return[n,(0,c.useMemo)((function(){var t,e;return{toggle:i,set:function t(e){return a(!!e)},setTrue:function t(){return a(!0)},setFalse:function t(){return a(!1)}}}),[])]}function v(t){var e=(0,c.useRef)(t);return e.current=t,e}var g=v,y=n(14520),_,x=!("undefined"==typeof window||!window.document||!window.document.createElement);function b(t,e){var n;if(x)return t?n=(0,y.mf)(t)?t():"current"in t?t.current:t:e}var w=n(37296),M=n(80409);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}var E,T=function t(e){M.Z&&((0,y.mf)(e)||console.error("useUnmount expected parameter is a function, got ".concat(S(e))));var n=g(e);(0,c.useEffect)((function(){return function(){n.current()}}),[])},C=n(10607);function k(t,e){if(t===e)return!0;for(var n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}var A,P,L,D=function t(e){var n;return function t(n,r,i){var a=(0,c.useRef)(!1),o=(0,c.useRef)([]),s=(0,c.useRef)([]),l=(0,c.useRef)();e((function(){var t,e,u=(Array.isArray(i)?i:[i]).map((function(t){return b(t)}));if(!a.current)return a.current=!0,o.current=u,s.current=r,void(l.current=n());u.length===o.current.length&&k(u,o.current)&&k(r,s.current)||(null===(t=l.current)||void 0===t||t.call(l),o.current=u,s.current=r,l.current=n())})),T((function(){var t;null===(t=l.current)||void 0===t||t.call(l),a.current=!1}))}}(c.useEffect);function R(t,e,n){void 0===n&&(n={});var r=g(e);D((function(){var e=b(n.target,window);if(null==e?void 0:e.addEventListener){var i=function t(e){return r.current(e)};return e.addEventListener(t,i,{capture:n.capture,once:n.once,passive:n.passive}),function(){e.removeEventListener(t,i,{capture:n.capture})}}}),[t,n.capture,n.once,n.passive],n.target)}var I=R,N=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},O=function(t,e){var n=e||{},r=n.onEnter,i=n.onLeave,a=n.onChange,o=N(m(!1),2),s=o[0],l=o[1],u=l.setTrue,c=l.setFalse;return I("mouseenter",(function(){null==r||r(),u(),null==a||a(!0)}),{target:t}),I("mouseleave",(function(){null==i||i(),c(),null==a||a(!1)}),{target:t}),s}},26826:function(t,e,n){"use strict";var r;n(77513),n(61529),n(9758),n(48595),n(58220),n(29858),n(61036),n(45699);var i=n(57957),a=n(5773);r={value:!0},e.Z=h;var o=i(n(93923)),s=i(n(11006)),l=c(n(77185));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function t(r){return r?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function h(){var t=l.useState([]),e=(0,s.default)(t,2),n=e[0],r=e[1],i;return[n,l.useCallback((function(t){return r((function(e){return[].concat((0,o.default)(e),[t])})),function(){r((function(e){return e.filter((function(e){return e!==t}))}))}}),[])]}},50523:function(t,e,n){"use strict";var r;n(61036),r={value:!0},r=e.mL=void 0;var i=function t(){return{height:0,opacity:0}},a=function t(e){return{height:e.scrollHeight,opacity:1}},o,s=function t(e,n){return!0===(null==n?void 0:n.deadline)||"height"===n.propertyName},l={motionName:"ant-motion-collapse",onAppearStart:i,onEnterStart:i,onAppearActive:a,onEnterActive:a,onLeaveStart:function t(e){return{height:e.offsetHeight}},onLeaveActive:i,onAppearEnd:s,onEnterEnd:s,onLeaveEnd:s,motionDeadline:500},u=function t(e,n,r){return void 0!==r?r:"".concat(e,"-").concat(n)},c;e.mL=u,r=l},5607:function(t,e,n){"use strict";var r;n(61529);var i=n(57957);r={value:!0},r=r=e.jD=void 0;var a=i(n(45145)),o=function t(){return(0,a.default)()&&window.document.documentElement},s,l,u;e.jD=o,r=function t(e){if(o()){var n=Array.isArray(e)?e:[e],r=window.document.documentElement;return n.some((function(t){return t in r.style}))}return!1},r=function t(){if(!o())return!1;if(void 0!==l)return l;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),l=1===e.scrollHeight,document.body.removeChild(e),l}},17407:function(t,e,n){"use strict";var r=n(57957);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(77185)),a=r(n(16194)),o=r(n(53536)),s=function t(){return{width:0,opacity:0,transform:"scale(0)"}},l=function t(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},u,c=function t(e){var n=e.prefixCls,r,u,c=!!e.loading;return e.existIcon?i.default.createElement("span",{className:"".concat(n,"-loading-icon")},i.default.createElement(o.default,null)):i.default.createElement(a.default,{visible:c,motionName:"".concat(n,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:s,onAppearActive:l,onEnterStart:s,onEnterActive:l,onLeaveStart:l,onLeaveActive:s},(function(t,e){var r=t.className,a=t.style;return i.default.createElement("span",{className:"".concat(n,"-loading-icon"),style:a,ref:e},i.default.createElement(o.default,{className:r}))}))};e.default=c},48881:function(t,e,n){"use strict";n(77513),n(61529),n(9758),n(48595),n(58220),n(29858),n(71796),n(59329),n(61036);var r=n(57957),i=n(5773);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(80937)),o=r(n(22060)),s=f(n(77185)),l=r(n(26486)),u=n(39417),c=r(n(73087));function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function t(r){return r?n:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=h(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}var d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},p,m=function t(e){return s.createElement(u.ConfigConsumer,null,(function(t){var n,r=t.getPrefixCls,i=t.direction,u=e.prefixCls,h=e.size,f=e.className,p=d(e,["prefixCls","size","className"]),m=r("btn-group",u),v="";switch(h){case"large":v="lg";break;case"small":v="sm";break;case"middle":case void 0:break;default:console.warn(new c.default(h))}var g=(0,l.default)(m,(n={},(0,o.default)(n,"".concat(m,"-").concat(v),v),(0,o.default)(n,"".concat(m,"-rtl"),"rtl"===i),n),f);return s.createElement("div",(0,a.default)({},p,{className:g}))}))};e.default=m},20526:function(t,e,n){"use strict";n(77513),n(61529),n(9758),n(48595),n(58220),n(29858),n(71796),n(59329),n(83639),n(86612),n(51395),n(66054),n(98452),n(61036),n(37296);var r=n(57957),i=n(5773);Object.defineProperty(e,"__esModule",{value:!0}),e.convertLegacyProps=R,e.default=void 0;var a=r(n(80937)),o=r(n(22060)),s=r(n(11006)),l=r(n(5773)),u=b(n(77185)),c=r(n(26486)),h=r(n(42936)),f=r(n(48881)),d=n(39417),p=r(n(19575)),m=n(70787),v=r(n(36170)),g=r(n(66049)),y=r(n(17407)),_=n(17162);function x(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(x=function t(r){return r?n:e})(t)}function b(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=x(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}var w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},M=/^[\u4e00-\u9fa5]{2}$/,S=M.test.bind(M);function E(t){return"string"==typeof t}function T(t){return"text"===t||"link"===t}function C(t){return u.isValidElement(t)&&t.type===u.Fragment}function k(t,e){if(null!=t){var n=e?" ":"";return"string"!=typeof t&&"number"!=typeof t&&E(t.type)&&S(t.props.children)?(0,_.cloneElement)(t,{children:t.props.children.split("").join(n)}):"string"==typeof t?S(t)?u.createElement("span",null,t.split("").join(n)):u.createElement("span",null,t):C(t)?u.createElement("span",null,t):t}}function A(t,e){var n=!1,r=[];return u.Children.forEach(t,(function(t){var e=(0,l.default)(t),i="string"===e||"number"===e;if(n&&i){var a=r.length-1,o=r[a];r[a]="".concat(o).concat(t)}else r.push(t);n=i})),u.Children.map(r,(function(t){return k(t,e)}))}var P=(0,m.tuple)("default","primary","ghost","dashed","link","text"),L=(0,m.tuple)("circle","round"),D=(0,m.tuple)("submit","button","reset");function R(t){return"danger"===t?{danger:!0}:{type:t}}var I=function t(e,n){var r,i=e.loading,f=void 0!==i&&i,m=e.prefixCls,_=e.type,x=e.danger,b=e.shape,M=e.size,E=e.className,C=e.children,k=e.icon,P=e.ghost,L=void 0!==P&&P,D=e.block,R=void 0!==D&&D,I=e.htmlType,N=void 0===I?"button":I,O=w(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),F=u.useContext(g.default),z=u.useState(!!f),U=(0,s.default)(z,2),V=U[0],B=U[1],H=u.useState(!1),G=(0,s.default)(H,2),W=G[0],Z=G[1],j=u.useContext(d.ConfigContext),q=j.getPrefixCls,X=j.autoInsertSpaceInButton,Y=j.direction,K=n||u.createRef(),J=u.useRef(),Q=function t(){return 1===u.Children.count(C)&&!k&&!T(_)},$=function t(){if(K&&K.current&&!1!==X){var e=K.current.textContent;Q()&&S(e)?W||Z(!0):W&&Z(!1)}},tt;tt="object"===(0,l.default)(f)&&f.delay?f.delay||!0:!!f,u.useEffect((function(){clearTimeout(J.current),"number"==typeof tt?J.current=window.setTimeout((function(){B(tt)}),tt):B(tt)}),[tt]),u.useEffect($,[K]);var et=function t(n){var r,i=e.onClick,a=e.disabled;V||a?n.preventDefault():null===(r=i)||void 0===r||r(n)};(0,v.default)(!("string"==typeof k&&k.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(k,"` at https://ant.design/components/icon")),(0,v.default)(!(L&&T(_)),"Button","`link` or `text` button can't be a `ghost` button.");var nt=q("btn",m),rt=!1!==X,it="";switch(M||F){case"large":it="lg";break;case"small":it="sm"}var at=V?"loading":k,ot=(0,c.default)(nt,(r={},(0,o.default)(r,"".concat(nt,"-").concat(_),_),(0,o.default)(r,"".concat(nt,"-").concat(b),b),(0,o.default)(r,"".concat(nt,"-").concat(it),it),(0,o.default)(r,"".concat(nt,"-icon-only"),!C&&0!==C&&!!at),(0,o.default)(r,"".concat(nt,"-background-ghost"),L&&!T(_)),(0,o.default)(r,"".concat(nt,"-loading"),V),(0,o.default)(r,"".concat(nt,"-two-chinese-chars"),W&&rt),(0,o.default)(r,"".concat(nt,"-block"),R),(0,o.default)(r,"".concat(nt,"-dangerous"),!!x),(0,o.default)(r,"".concat(nt,"-rtl"),"rtl"===Y),r),E),st=k&&!V?k:u.createElement(y.default,{existIcon:!!k,prefixCls:nt,loading:!!V}),lt=C||0===C?A(C,Q()&&rt):null,ut=(0,h.default)(O,["navigate"]);if(void 0!==ut.href)return u.createElement("a",(0,a.default)({},ut,{className:ot,onClick:et,ref:K}),st,lt);var ct=u.createElement("button",(0,a.default)({},O,{type:N,className:ot,onClick:et,ref:K}),st,lt);return T(_)?ct:u.createElement(p.default,null,ct)},N=u.forwardRef(I);N.displayName="Button",N.Group=f.default,N.__ANT_BUTTON=!0;var O=N;e.default=O},34510:function(t,e,n){"use strict";var r,i=n(57957);r={value:!0},e.Z=void 0;var a,o=i(n(20526)).default;e.Z=o},1290:function(t,e,n){"use strict";var r;n(77513),n(61529),n(9758),n(48595),n(58220),n(29858),n(71796),n(59329),n(61036),n(35384);var i=n(57957),a=n(5773);r={value:!0},e.Z=void 0;var o=i(n(80937)),s=i(n(22060)),l=y(n(77185)),u=y(n(2980)),c=i(n(26486)),h=i(n(15071)),f=i(n(60362)),d=i(n(47382)),p=i(n(36170)),m=n(39417),v=i(n(66049));function g(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(g=function t(r){return r?n:e})(t)}function y(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=g(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}var _=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function x(t){var e=t.type,n=t.className,r=t.size,i=t.onEdit,a=t.hideAdd,g=t.centered,y=t.addIcon,x=_(t,["type","className","size","onEdit","hideAdd","centered","addIcon"]),b=x.prefixCls,w=x.moreIcon,M=void 0===w?l.createElement(h.default,null):w,S=l.useContext(m.ConfigContext),E=S.getPrefixCls,T=S.direction,C=E("tabs",b),k;"editable-card"===e&&(k={onEdit:function t(e,n){var r=n.key,a=n.event;null==i||i("add"===e?a:r,e)},removeIcon:l.createElement(d.default,null),addIcon:y||l.createElement(f.default,null),showAdd:!0!==a});var A=E();return(0,p.default)(!("onPrevClick"in x)&&!("onNextClick"in x),"Tabs","`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead."),l.createElement(v.default.Consumer,null,(function(t){var i,a=void 0!==r?r:t;return l.createElement(u.default,(0,o.default)({direction:T,moreTransitionName:"".concat(A,"-slide-up")},x,{className:(0,c.default)((i={},(0,s.default)(i,"".concat(C,"-").concat(a),a),(0,s.default)(i,"".concat(C,"-card"),["card","editable-card"].includes(e)),(0,s.default)(i,"".concat(C,"-editable-card"),"editable-card"===e),(0,s.default)(i,"".concat(C,"-centered"),g),i),n),editable:k,moreIcon:M,prefixCls:C}))}))}x.TabPane=u.TabPane;var b=x;e.Z=b},95317:function(t,e,n){"use strict";var r=n(26508),i=n(77185),a=n(72076),o=i.forwardRef((function(t,e){var n={},o=i.createElement("svg",(0,r.Z)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),i.createElement("defs",null),i.createElement("path",{d:"M251.392 161.877l7.168 6.23 256.683 256.682L771.84 168.107a64 64 0 0196.768 83.285l-6.23 7.168-256.682 256.683L862.379 771.84a64 64 0 01-83.371 96.768l-7.168-6.23-256.597-256.682L258.56 862.379a64 64 0 01-96.683-83.371l6.23-7.168 256.682-256.597L168.107 258.56a64 64 0 0174.581-102.144l8.704 5.461z"}));return i.createElement(a.Z,(0,r.Z)({},t,{svg:o,ref:e}))}));o.displayName="CloseBoldOutlined",e.Z=o},14963:function(t,e,n){"use strict";var r=n(26508),i=n(77185),a=n(72076),o=i.forwardRef((function(t,e){var n={},o=i.createElement("svg",(0,r.Z)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),i.createElement("defs",null),i.createElement("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64zm0 85.333c-200.299 0-362.667 162.368-362.667 362.667S311.701 874.667 512 874.667 874.667 712.299 874.667 512 712.299 149.333 512 149.333zm-64 210.539a21.333 21.333 0 0111.84 3.563L656.043 494.25a21.333 21.333 0 010 35.498L459.84 660.565a21.333 21.333 0 01-33.173-17.792V381.227A21.333 21.333 0 01448 359.893z"}));return i.createElement(a.Z,(0,r.Z)({},t,{svg:o,ref:e}))}));o.displayName="PlayOutlined",e.Z=o},87930:function(t,e,n){"use strict";var r=n(26508),i=n(77185),a=n(72076),o=i.forwardRef((function(t,e){var n={},o=i.createElement("svg",(0,r.Z)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),i.createElement("defs",null),i.createElement("path",{d:"M512 64c174.507 0 316.373 139.67 319.936 313.301L832 384v64h42.667A85.333 85.333 0 01960 533.333V704a85.333 85.333 0 01-85.333 85.333l-46.934.022c-19.413 95.488-102.549 167.808-203.093 170.56l-5.973.085H511.7a42.667 42.667 0 01-3.2-85.227l3.2-.106h106.966a128 128 0 00127.914-123.2l.086-4.8V384c0-129.6-105.067-234.667-234.667-234.667-127.552 0-231.317 101.76-234.581 228.523l-.086 6.144v405.333h-128A85.333 85.333 0 0164 704V533.333A85.333 85.333 0 01149.333 448H192v-64c0-176.725 143.275-320 320-320zM192 533.333h-42.667V704H192V533.333zm682.667 0H832V704h42.667V533.333z"}));return i.createElement(a.Z,(0,r.Z)({},t,{svg:o,ref:e}))}));o.displayName="ServiceOutlined",e.Z=o},72076:function(t,e,n){"use strict";n.d(e,{Z:function(){return D}});var r=n(26508),i=n(83935),a=n(77185),o=n(26486),s=n.n(o),l=n(54239),u=n(2451),c=n(61529),h=n(40840),f=n(37296),d=n(59329),p=n(47721),m=n(82205),v=n(77513),g=n(9758),y=n(58220),_=n(10101),x=n(83061);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){(0,_.default)(t,"[@d-design/icons] "+e)}function M(t){return"object"===b(t)&&"string"==typeof t.name&&"string"==typeof t.theme&&("object"===b(t.icon)||"function"==typeof t.icon)}function S(t){return void 0===t&&(t={}),Object.keys(t).reduce((function(e,n){var r=t[n];if("class"===n)e.className=r,delete e.class;else e[n]=r;return e}),{})}function E(t,e,n){return n?React.createElement(t.tag,_extends({key:e},S(t.attrs),n),(t.children||[]).map((function(n,r){return E(n,e+"-"+t.tag+"-"+r)}))):React.createElement(t.tag,_extends({key:e},S(t.attrs)),(t.children||[]).map((function(n,r){return E(n,e+"-"+t.tag+"-"+r)})))}function T(t){return t?Array.isArray(t)?t:[t]:[]}var C={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},k="\n.dd-icon-btn {\n  padding: 4px;\n  display: inline-block;\n  border-radius: 4px;\n  color: var(--common_level1_base_color, rgba(23,26,29,1));\n}\n\n.dd-icon-btn:hover {\n  background-color: var(--common_overlay_hover_color, rgba(0, 0, 0, 0.08));\n}\n\n.dd-icon-btn:active {\n  background-color: var(--common_overlay_press_color, rgba(0, 0, 0, 0.16));\n}\n\n.dd-icon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.dd-icon > * {\n  line-height: 1;\n}\n.dd-icon svg {\n  display: inline-block;\n}\n.dd-icon::before {\n  display: none;\n}\n\n.dd-icon-spin::before,\n.dd-icon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",A=function t(e){void 0===e&&(e=k),(0,a.useEffect)((function(){(0,x.updateCSS)(e,"dd-icons",{prepend:!0})}),[])},P=["className","component","svg","viewBox","spin","hover","rotate","tabIndex","onClick","children"],L=a.forwardRef((function(t,e){var n,o=t.className,l=t.component,u=t.svg,c=t.viewBox,h=t.spin,f=t.hover,d=t.rotate,p=t.tabIndex,m=t.onClick,v=t.children,g=(0,i.Z)(t,P);w(Boolean(l||v||u),"Should have `component` prop or `children` or `svg`. "),A();var y=s()("dd-icon",o,((n={})["dd-icon-btn"]=f,n)),_=s()({"dd-icon-spin":!!h}),x=d?{msTransform:"rotate("+d+"deg)",transform:"rotate("+d+"deg)"}:void 0,b=(0,r.Z)({},C,{className:_,style:x,viewBox:c});c||delete b.viewBox;var M=function t(){return u||(l?a.createElement(l,b,v):v?(w(Boolean(c)||1===a.Children.count(v)&&a.isValidElement(v)&&"use"===a.Children.only(v).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),a.createElement("svg",(0,r.Z)({},b,{viewBox:c}),v)):null)},S=p;return void 0===S&&m&&(S=-1),a.createElement("span",(0,r.Z)({role:"img"},g,{ref:e,tabIndex:S,onClick:m,className:y}),M())}));L.displayName="DDIcon";var D=L},59030:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r=n(77513),i=n(61529),a=n(59002),o=n(9758),s=n(58220),l=n(26508),u=n(83935),c=n(77185),h=n(72076),f=["type","children"],d=new Set;function p(t){return Boolean("string"==typeof t&&t.length&&!d.has(t))}function m(t,e){void 0===e&&(e=0);var n=t[e];if(p(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),t.length>e+1&&(r.onload=function(){m(t,e+1)},r.onerror=function(){m(t,e+1)}),d.add(n),document.body.appendChild(r)}}function v(t){void 0===t&&(t={});var e=t,n=e.scriptUrl,r=e.extraCommonProps,i=void 0===r?{}:r;n&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(n)?m(n.reverse()):m([n]));var a=c.forwardRef((function(t,e){var n=t.type,r=t.children,a=(0,u.Z)(t,f),o=null;return t.type&&(o=c.createElement("use",{xlinkHref:"#"+n})),r&&(o=r),c.createElement(h.Z,(0,l.Z)({},i,a,{ref:e}),o)}));return a.displayName="Iconfont",a}var g=v},63096:function(t,e,n){"use strict";var r,i=n(57957);r=!0,e.Z=void 0;var a=i(n(80937)),o=i(n(77185)),s=i(n(72281)),l=o.default.forwardRef((function(t,e){var n={},r=o.default.createElement("svg",(0,a.default)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),o.default.createElement("defs",null),o.default.createElement("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64zm243.499 289.835a42.667 42.667 0 00-60.331 0L450.347 598.613 352.34 484.672l-2.389-2.56a42.667 42.667 0 00-62.293 58.197l128 148.843 2.389 2.56a42.667 42.667 0 0060.117-.213L755.5 414.165l2.496-2.709a42.667 42.667 0 00-2.496-57.621z"}));return o.default.createElement(s.default,(0,a.default)({},t,{svg:r,ref:e}))}));l.displayName="AchieveFilled";var u=l;e.Z=u},46023:function(t,e,n){"use strict";var r,i=n(57957);r=!0,e.Z=void 0;var a=i(n(80937)),o=i(n(77185)),s=i(n(72281)),l=o.default.forwardRef((function(t,e){var n={},r=o.default.createElement("svg",(0,a.default)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),o.default.createElement("defs",null),o.default.createElement("path",{d:"M843.861 180.139a42.667 42.667 0 012.176 58.005l-2.176 2.347L572.331 512l271.53 271.53a42.667 42.667 0 01-58.005 62.507l-2.347-2.176L512 572.331 240.47 843.86a42.667 42.667 0 01-62.507-58.005l2.176-2.347L451.627 512 180.139 240.47a42.667 42.667 0 0158.005-62.507l2.347 2.176L512 451.627l271.53-271.488a42.667 42.667 0 0160.331 0z"}));return o.default.createElement(s.default,(0,a.default)({},t,{svg:r,ref:e}))}));l.displayName="CloseOutlined";var u=l;e.Z=u},14036:function(t,e,n){"use strict";var r,i=n(57957);r=!0,e.Z=void 0;var a=i(n(80937)),o=i(n(77185)),s=i(n(72281)),l=o.default.forwardRef((function(t,e){var n={},r=o.default.createElement("svg",(0,a.default)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),o.default.createElement("defs",null),o.default.createElement("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64zM406.4 346.07a42.667 42.667 0 00-62.827 57.62l2.496 2.71L451.627 512l-105.6 105.6a42.667 42.667 0 0057.642 62.827l2.71-2.496 105.6-105.6 105.6 105.6a42.667 42.667 0 0062.826-57.622l-2.496-2.709L572.31 512l105.6-105.6a42.667 42.667 0 00-57.621-62.827l-2.71 2.496-105.6 105.6-105.6-105.6z"}));return o.default.createElement(s.default,(0,a.default)({},t,{svg:r,ref:e}))}));l.displayName="EliminateFilled";var u=l;e.Z=u},47839:function(t,e,n){"use strict";var r,i=n(57957);r=!0,e.Z=void 0;var a=i(n(80937)),o=i(n(77185)),s=i(n(72281)),l=o.default.forwardRef((function(t,e){var n={},r=o.default.createElement("svg",(0,a.default)({className:"dt__icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},n),o.default.createElement("defs",null),o.default.createElement("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64zm0 576a42.667 42.667 0 100 85.333A42.667 42.667 0 00512 640zm6.677-341.333h-13.354a42.667 42.667 0 00-42.667 43.285l.15 3.179 20.16 225.642a29.163 29.163 0 0057.685 2.774l.384-2.774 20.16-225.642a42.667 42.667 0 00-42.518-46.464z"}));return o.default.createElement(s.default,(0,a.default)({},t,{svg:r,ref:e}))}));l.displayName="WarningFilled";var u=l;e.Z=u},74994:function(t,e,n){"use strict";n.d(e,{Z:function(){return mn}});var r=n(36024),i=n(71796),a=n(59329),o=n(77185),s=n(26508),l=n(85021),u=n(61529),c=n(63670),h=n(40840),f=n(74809),d=n(57338),p=n(9967),m=n(29161),v=n(7674),g=n(80268),y=n(91002),_=n(5589),x=n(32459),b=n(82635),w=n(92832),M=n(83639),S=n(7688),E=n(86612),T=n(57973),C=n(60638),k=n(61036),A=n(47075),P=n(40722),L=n(62434),D;function R(t){if("undefined"==typeof document)return 0;if(t||void 0===D){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var i=e.offsetWidth;n.style.overflow="scroll";var a=e.offsetWidth;i===a&&(a=n.clientWidth),document.body.removeChild(n),D=i-a}return D}function I(t){var e=t.match(/^(.*)px$/),n=Number(null==e?void 0:e[1]);return Number.isNaN(n)?R():n}function N(t){if(!("undefined"!=typeof document&&t&&t instanceof Element))return{width:0,height:0};var e=getComputedStyle(t,"::-webkit-scrollbar"),n=e.width,r=e.height;return{width:I(n),height:I(r)}}var O=n(98452);function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return{};var n=e.element,r=void 0===n?document.body:n,i={},a=Object.keys(t);return a.forEach((function(t){i[t]=r.style[t]})),a.forEach((function(e){r.style[e]=t[e]})),i}var z=F;function U(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var V={},B=function(t){if(U()||t){var e="ant-scrolling-effect",n=new RegExp("".concat(e),"g"),r=document.body.className;if(t){if(!n.test(r))return;return z(V),V={},void(document.body.className=r.replace(n,"").trim())}var i=R();if(i&&(V=z({position:"relative",width:"calc(100% - ".concat(i,"px)")}),!n.test(r))){var a="".concat(r," ").concat(e);document.body.className=a.trim()}}},H=n(77513),G=n(54980),W=n(9758),Z=n(58220),j=n(50090),q=n(45699),X=n(42886),Y=0,K=[],J="ant-scrolling-effect",Q=new RegExp("".concat(J),"g"),$=new Map,tt=(0,d.Z)((function t(e){var n=this;(0,f.Z)(this,t),(0,g.Z)(this,"lockTarget",void 0),(0,g.Z)(this,"options",void 0),(0,g.Z)(this,"getContainer",(function(){var t;return null===(t=n.options)||void 0===t?void 0:t.container})),(0,g.Z)(this,"reLock",(function(t){var e=K.find((function(t){var e;return t.target===n.lockTarget}));e&&n.unLock(),n.options=t,e&&(e.options=t,n.lock())})),(0,g.Z)(this,"lock",(function(){var t;if(!K.some((function(t){var e;return t.target===n.lockTarget})))if(K.some((function(t){var e,r=t.options;return(null==r?void 0:r.container)===(null===(e=n.options)||void 0===e?void 0:e.container)})))K=[].concat((0,X.Z)(K),[{target:n.lockTarget,options:n.options}]);else{var e=0,r=(null===(t=n.options)||void 0===t?void 0:t.container)||document.body;(r===document.body&&window.innerWidth-document.documentElement.clientWidth>0||r.scrollHeight>r.clientHeight)&&"hidden"!==getComputedStyle(r).overflow&&(e=R());var i=r.className;if(0===K.filter((function(t){var e,r=t.options;return(null==r?void 0:r.container)===(null===(e=n.options)||void 0===e?void 0:e.container)})).length&&$.set(r,z({width:0!==e?"calc(100% - ".concat(e,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:r})),!Q.test(i)){var a="".concat(i," ").concat(J);r.className=a.trim()}K=[].concat((0,X.Z)(K),[{target:n.lockTarget,options:n.options}])}})),(0,g.Z)(this,"unLock",(function(){var t,e=K.find((function(t){var e;return t.target===n.lockTarget}));if(K=K.filter((function(t){var e;return t.target!==n.lockTarget})),e&&!K.some((function(t){var n,r=t.options;return(null==r?void 0:r.container)===(null===(n=e.options)||void 0===n?void 0:n.container)}))){var r=(null===(t=n.options)||void 0===t?void 0:t.container)||document.body,i=r.className;Q.test(i)&&(z($.get(r),{element:r}),$.delete(r),r.className=r.className.replace(Q,"").trim())}})),this.lockTarget=Y++,this.options=e})),et=0,nt=(0,b.Z)();function rt(){return 0}var it={},at=function t(e){if(!nt)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===(0,y.Z)(e)&&e instanceof window.HTMLElement)return e}return document.body},ot=function(t){(0,m.Z)(n,t);var e=(0,v.Z)(n);function n(t){var r;return(0,f.Z)(this,n),r=e.call(this,t),(0,g.Z)((0,p.Z)(r),"container",void 0),(0,g.Z)((0,p.Z)(r),"componentRef",o.createRef()),(0,g.Z)((0,p.Z)(r),"rafId",void 0),(0,g.Z)((0,p.Z)(r),"scrollLocker",void 0),(0,g.Z)((0,p.Z)(r),"renderComponent",void 0),(0,g.Z)((0,p.Z)(r),"updateScrollLocker",(function(t){var e,n=(t||{}).visible,i=r.props,a=i.getContainer,o=i.visible;o&&o!==n&&nt&&at(a)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:at(a)})})),(0,g.Z)((0,p.Z)(r),"updateOpenCount",(function(t){var e=t||{},n=e.visible,i=e.getContainer,a=r.props,o=a.visible,s=a.getContainer,l;o!==n&&nt&&at(s)===document.body&&(o&&!n?et+=1:t&&(et-=1)),("function"==typeof s&&"function"==typeof i?s.toString()!==i.toString():s!==i)&&r.removeCurrentContainer()})),(0,g.Z)((0,p.Z)(r),"attachToParent",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||r.container&&!r.container.parentNode){var e=at(r.props.getContainer);return!!e&&(e.appendChild(r.container),!0)}return!0})),(0,g.Z)((0,p.Z)(r),"getContainer",(function(){return nt?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null})),(0,g.Z)((0,p.Z)(r),"setWrapperClassName",(function(){var t=r.props.wrapperClassName;r.container&&t&&t!==r.container.className&&(r.container.className=t)})),(0,g.Z)((0,p.Z)(r),"removeCurrentContainer",(function(){var t,e;null===(t=r.container)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(r.container)})),(0,g.Z)((0,p.Z)(r),"switchScrollingEffect",(function(){1!==et||Object.keys(it).length?et||(z(it),it={},B(!0)):(B(),it=z({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))})),r.scrollLocker=new tt({container:at(t.getContainer)}),r}return(0,d.Z)(n,[{key:"componentDidMount",value:function t(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=(0,_.Z)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function t(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function t(){var e=this.props,n=e.visible,r=e.getContainer;nt&&at(r)===document.body&&(et=n&&et?et-1:et),this.removeCurrentContainer(),_.Z.cancel(this.rafId)}},{key:"render",value:function t(){var e=this.props,n=e.children,r=e.forceRender,i=e.visible,a=null,s={getOpenCount:function t(){return et},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(r||i||this.componentRef.current)&&(a=o.createElement(x.Z,{getContainer:this.getContainer,ref:this.componentRef},n(s))),a}}]),n}(o.Component),st=ot,lt=n(74710),ut=n(26486),ct=n.n(ut),ht=n(85373),ft=n(71015),dt=n(66054),pt=n(35384),mt=n(54175),vt,gt="onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError",yt="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat(gt).split(/[\s\n]+/),_t="aria-",xt="data-";function bt(t,e){return 0===t.indexOf(e)}function wt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n;n=!1===e?{aria:!0,data:!0,attr:!0}:!0===e?{aria:!0}:(0,lt.Z)({},e);var r={};return Object.keys(t).forEach((function(e){(n.aria&&("role"===e||bt(e,_t))||n.data&&bt(e,xt)||n.attr&&yt.includes(e))&&(r[e]=t[e])})),r}var Mt=n(16194);function St(t){var e=t.prefixCls,n=t.style,r=t.visible,i=t.maskProps,a=t.motionName;return o.createElement(Mt.default,{key:"mask",visible:r,motionName:a,leavedClassName:"".concat(e,"-mask-hidden")},(function(t){var r=t.className,a=t.style;return o.createElement("div",(0,s.Z)({style:(0,lt.Z)((0,lt.Z)({},a),n),className:ct()("".concat(e,"-mask"),r)},i))}))}function Et(t,e,n){var r=e;return!r&&n&&(r="".concat(t,"-").concat(n)),r}var Tt=-1;function Ct(){return Tt+=1}function kt(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var i=t.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function At(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},r=t.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=kt(i),n.top+=kt(i,!0),n}var Pt=o.memo((function(t){var e;return t.children}),(function(t,e){var n;return!e.shouldUpdate})),Lt={width:0,height:0,overflow:"hidden",outline:"none"},Dt=o.forwardRef((function(t,e){var n=t.closable,r=t.prefixCls,i=t.width,a=t.height,u=t.footer,c=t.title,h=t.closeIcon,f=t.style,d=t.className,p=t.visible,m=t.forceRender,v=t.bodyStyle,g=t.bodyProps,y=t.children,_=t.destroyOnClose,x=t.modalRender,b=t.motionName,w=t.ariaId,M=t.onClose,S=t.onVisibleChanged,E=t.onMouseDown,T=t.onMouseUp,C=t.mousePosition,k=(0,o.useRef)(),A=(0,o.useRef)(),P=(0,o.useRef)();o.useImperativeHandle(e,(function(){return{focus:function t(){var e;null===(e=k.current)||void 0===e||e.focus()},changeActive:function t(e){var n,r=document.activeElement;e&&r===A.current?k.current.focus():e||r!==k.current||A.current.focus()}}}));var L=o.useState(),D=(0,l.Z)(L,2),R=D[0],I=D[1],N={},O,F,z;function U(){var t=At(P.current);I(C?"".concat(C.x-t.left,"px ").concat(C.y-t.top,"px"):"")}void 0!==i&&(N.width=i),void 0!==a&&(N.height=a),R&&(N.transformOrigin=R),u&&(O=o.createElement("div",{className:"".concat(r,"-footer")},u)),c&&(F=o.createElement("div",{className:"".concat(r,"-header")},o.createElement("div",{className:"".concat(r,"-title"),id:w},c))),n&&(z=o.createElement("button",{type:"button",onClick:M,"aria-label":"Close",className:"".concat(r,"-close")},h||o.createElement("span",{className:"".concat(r,"-close-x")})));var V=o.createElement("div",{className:"".concat(r,"-content")},z,F,o.createElement("div",(0,s.Z)({className:"".concat(r,"-body"),style:v},g),y),O);return o.createElement(Mt.default,{visible:p,onVisibleChanged:S,onAppearPrepare:U,onEnterPrepare:U,forceRender:m,motionName:b,removeOnLeave:_,ref:P},(function(t,e){var n=t.className,i=t.style;return o.createElement("div",{key:"dialog-element",role:"document",ref:e,style:(0,lt.Z)((0,lt.Z)((0,lt.Z)({},i),f),N),className:ct()(r,d,n),onMouseDown:E,onMouseUp:T},o.createElement("div",{tabIndex:0,ref:k,style:Lt,"aria-hidden":"true"}),o.createElement(Pt,{shouldUpdate:p||m},x?x(V):V),o.createElement("div",{tabIndex:0,ref:A,style:Lt,"aria-hidden":"true"}))}))}));Dt.displayName="Content";var Rt=Dt;function It(t){var e=t.prefixCls,n=void 0===e?"rc-dialog":e,r=t.zIndex,i=t.visible,a=void 0!==i&&i,u=t.keyboard,c=void 0===u||u,h=t.focusTriggerAfterClose,f=void 0===h||h,d=t.scrollLocker,p=t.title,m=t.wrapStyle,v=t.wrapClassName,g=t.wrapProps,y=t.onClose,_=t.afterClose,x=t.transitionName,b=t.animation,w=t.closable,M=void 0===w||w,S=t.mask,E=void 0===S||S,T=t.maskTransitionName,C=t.maskAnimation,k=t.maskClosable,A=void 0===k||k,P=t.maskStyle,L=t.maskProps,D=(0,o.useRef)(),R=(0,o.useRef)(),I=(0,o.useRef)(),N=o.useState(a),O=(0,l.Z)(N,2),F=O[0],z=O[1],U=(0,o.useRef)();function V(t){if(t){var e;if(!(0,ft.Z)(R.current,document.activeElement))D.current=document.activeElement,null===(e=I.current)||void 0===e||e.focus()}else{if(z(!1),E&&D.current&&f){try{D.current.focus({preventScroll:!0})}catch(t){}D.current=null}F&&(null==_||_())}}function B(t){null==y||y(t)}U.current||(U.current="rcDialogTitle".concat(Ct()));var H=(0,o.useRef)(!1),G=(0,o.useRef)(),W=function t(){clearTimeout(G.current),H.current=!0},Z=function t(){G.current=setTimeout((function(){H.current=!1}))},j=null;function q(t){if(c&&t.keyCode===ht.Z.ESC)return t.stopPropagation(),void B(t);a&&t.keyCode===ht.Z.TAB&&I.current.changeActive(!t.shiftKey)}return A&&(j=function t(e){H.current?H.current=!1:R.current===e.target&&B(e)}),(0,o.useEffect)((function(){return a&&z(!0),function(){}}),[a]),(0,o.useEffect)((function(){return function(){clearTimeout(G.current)}}),[]),(0,o.useEffect)((function(){return F?(null==d||d.lock(),null==d?void 0:d.unLock):function(){}}),[F,d]),o.createElement("div",(0,s.Z)({className:"".concat(n,"-root")},wt(t,{data:!0})),o.createElement(St,{prefixCls:n,visible:E&&a,motionName:Et(n,T,C),style:(0,lt.Z)({zIndex:r},P),maskProps:L}),o.createElement("div",(0,s.Z)({tabIndex:-1,onKeyDown:q,className:ct()("".concat(n,"-wrap"),v),ref:R,onClick:j,role:"dialog","aria-labelledby":p?U.current:null,style:(0,lt.Z)((0,lt.Z)({zIndex:r},m),{},{display:F?null:"none"})},g),o.createElement(Rt,(0,s.Z)({},t,{onMouseDown:W,onMouseUp:Z,ref:I,closable:M,ariaId:U.current,prefixCls:n,visible:a,onClose:B,onVisibleChanged:V,motionName:Et(n,x,b)}))))}var Nt=function t(e){var n=e.visible,r=e.getContainer,i=e.forceRender,a=e.destroyOnClose,u=void 0!==a&&a,c=e.afterClose,h=o.useState(n),f=(0,l.Z)(h,2),d=f[0],p=f[1];return o.useEffect((function(){n&&p(!0)}),[n]),!1===r?o.createElement(It,(0,s.Z)({},e,{getOpenCount:function t(){return 2}})):i||!u||d?o.createElement(st,{visible:n,forceRender:i,getContainer:r},(function(t){return o.createElement(It,(0,s.Z)({},e,{destroyOnClose:u,afterClose:function t(){null==c||c(),p(!1)}},t))})):null};Nt.displayName="Dialog";var Ot,Ft=Nt,zt=n(47382),Ut=n.n(zt),Vt=n(47721),Bt=n(82205),Ht=n(33739),Gt=n(26826),Wt=n(34510),Zt=n(20526),jt=n(29586),qt=function(){return qt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qt.apply(this,arguments)},Xt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Yt=function(t,e,n){if(n||2===arguments.length)for(var r=0,i=e.length,a;r<i;r++)!a&&r in e||(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Kt=function t(e){var n=o.useRef(!1),r=o.useRef(null),i=Xt(o.useState(!1),2),a=i[0],s=i[1];o.useEffect((function(){var t;if(e.autoFocus){var n=r.current;t=setTimeout((function(){return n.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var l=function t(r){var i=e.closeModal;r&&r.then&&(s(!0),r.then((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,Yt([],Xt(t),!1))}),(function(t){console.error(t),s(!1),n.current=!1})))},u=function t(){var r=e.actionFn,i=e.closeModal;if(!n.current)if(n.current=!0,r){var a;if(r.length)a=r(i),n.current=!1;else if(!(a=r()))return void i();l(a)}else i()},c=e.type,h=e.children,f=e.prefixCls,d=e.buttonProps;return o.createElement(jt.ZP,{autoInsertSpaceInButton:!1},o.createElement(Wt.Z,qt({},(0,Zt.convertLegacyProps)(c),{onClick:u,loading:a,prefixCls:f},d,{ref:r}),h))},Jt=Kt,Qt=n(36170),$t=n(50523),te=function t(e){var n,r,i=e.icon,a=e.onCancel,s=e.onOk,l=e.close,u=e.zIndex,c=e.afterClose,h=e.visible,f=e.keyboard,d=e.centered,p=e.getContainer,m=e.maskStyle,v=e.okText,g=e.okButtonProps,y=e.cancelText,_=e.cancelButtonProps,x=e.direction,b=e.prefixCls,w=e.rootPrefixCls,M=e.bodyStyle,S=e.closable,E=void 0!==S&&S,T=e.closeIcon,C=e.modalRender,k=e.focusTriggerAfterClose;(0,Qt.default)(!("string"==typeof i&&i.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(i,"` at https://ant.design/components/icon"));var A=e.okType||"primary",P="".concat(b,"-confirm"),L=!("okCancel"in e)||e.okCancel,D=e.width||416,R=e.style||{},I=void 0===e.mask||e.mask,N=void 0!==e.maskClosable&&e.maskClosable,O=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),F=ct()(P,"".concat(P,"-").concat(e.type),((n={})["".concat(P,"-rtl")]="rtl"===x,n),e.className),z=L&&o.createElement(Jt,{actionFn:a,closeModal:l,autoFocus:"cancel"===O,buttonProps:_,prefixCls:"".concat(w,"-btn")},y);return o.createElement(Ye,{prefixCls:b,className:F,wrapClassName:ct()((r={},r["".concat(P,"-centered")]=!!e.centered,r)),onCancel:function t(){return l({triggerCancel:!0})},visible:h,title:"",footer:"",transitionName:(0,$t.mL)(w,"zoom",e.transitionName),maskTransitionName:(0,$t.mL)(w,"fade",e.maskTransitionName),mask:I,maskClosable:N,maskStyle:m,style:R,width:D,zIndex:u,afterClose:c,keyboard:f,centered:d,getContainer:p,closable:E,closeIcon:T,modalRender:C,focusTriggerAfterClose:k},o.createElement("div",{className:"".concat(P,"-body-wrapper")},o.createElement(jt.ZP,{prefixCls:w},o.createElement("div",{className:"".concat(P,"-body ").concat(i?"":"no-icon"),style:M},i,void 0===e.title?null:o.createElement("span",{className:"".concat(P,"-title")},e.title),o.createElement("div",{className:"".concat(P,"-content")},e.content))),o.createElement("div",{className:"".concat(P,"-btns")},z,o.createElement(Jt,{type:A,actionFn:s,closeModal:l,autoFocus:"ok"===O,buttonProps:g,prefixCls:"".concat(w,"-btn")},v))))},ee=te,ne=n(16773),re=ne.default,ie=n(83470),ae=n(39417),oe=function(){return oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oe.apply(this,arguments)},se=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},le=function t(e,n){var r=e.afterClose,i=e.config,a=se(o.useState(!0),2),s=a[0],l=a[1],u=se(o.useState(i),2),c=u[0],h=u[1],f=o.useContext(ae.ConfigContext),d=f.direction,p=f.getPrefixCls,m=p("modal"),v=p();function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l(!1);var n=t.some((function(t){return t&&t.triggerCancel}));c.onCancel&&n&&c.onCancel()}return o.useImperativeHandle(n,(function(){return{destroy:g,update:function t(e){h((function(t){return oe(oe({},t),e)}))}}})),o.createElement(ie.default,{componentName:"Modal",defaultLocale:re.Modal},(function(t){return o.createElement(ee,oe({prefixCls:m,rootPrefixCls:v},c,{close:g,visible:s,afterClose:r,okText:c.okText||(c.okCancel?t.okText:t.justOkText),direction:d,cancelText:c.cancelText||t.cancelText}))}))},ue=o.forwardRef(le),ce=n(49525),he=n(52623),fe=n(81777),de=n.n(fe),pe=n(89949),me=n.n(pe),ve=n(8837),ge=n.n(ve),ye=n(66957),_e=n.n(ye),xe=function(){return xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xe.apply(this,arguments)},be=xe({},ne.default.Modal);function we(t){be=t?xe(xe({},be),t):xe({},defaultLocale.Modal)}function Me(){return be}var Se=function(){return Se=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Se.apply(this,arguments)},Ee=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Te=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Ce=function(t,e,n){if(n||2===arguments.length)for(var r=0,i=e.length,a;r<i;r++)!a&&r in e||(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},ke="";function Ae(){return ke}function Pe(t){var e=document.createElement("div");document.body.appendChild(e);var n=Se(Se({},t),{close:a,visible:!0});function r(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=he.unmountComponentAtNode(e);i&&e.parentNode&&e.parentNode.removeChild(e);var o=n.some((function(t){return t&&t.triggerCancel}));t.onCancel&&o&&t.onCancel.apply(t,Ce([],Te(n),!1));for(var s=0;s<je.length;s++){var l=je[s];if(l===a){je.splice(s,1);break}}}function i(t){var n=t.okText,r=t.cancelText,i=t.prefixCls,a=Ee(t,["okText","cancelText","prefixCls"]);setTimeout((function(){var t=Me(),s,l=(0,(0,ae.globalConfig)().getPrefixCls)(void 0,Ae()),u=i||"".concat(l,"-modal");he.render(o.createElement(ee,Se({},a,{prefixCls:u,rootPrefixCls:l,okText:n||(a.okCancel?t.okText:t.justOkText),cancelText:r||t.cancelText})),e)}))}function a(){for(var e=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];i(n=Se(Se({},n),{visible:!1,afterClose:function n(){"function"==typeof t.afterClose&&t.afterClose(),r.apply(e,a)}}))}function s(t){i(n="function"==typeof t?t(n):Se(Se({},n),t))}return i(n),je.push(a),{destroy:a,update:s}}function Le(t){return Se(Se({icon:o.createElement(_e(),null),okCancel:!1},t),{type:"warning"})}function De(t){return Se(Se({icon:o.createElement(de(),null),okCancel:!1},t),{type:"info"})}function Re(t){return Se(Se({icon:o.createElement(me(),null),okCancel:!1},t),{type:"success"})}function Ie(t){return Se(Se({icon:o.createElement(ge(),null),okCancel:!1},t),{type:"error"})}function Ne(t){return Se(Se({icon:o.createElement(_e(),null),okCancel:!0},t),{type:"confirm"})}function Oe(t){var e=t.rootPrefixCls;(0,Qt.default)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),ke=e}var Fe=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ze=function(t,e,n){if(n||2===arguments.length)for(var r=0,i=e.length,a;r<i;r++)!a&&r in e||(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Ue=0,Ve=o.memo(o.forwardRef((function(t,e){var n=Fe((0,Gt.Z)(),2),r=n[0],i=n[1];return o.useImperativeHandle(e,(function(){return{patchElement:i}}),[]),o.createElement(o.Fragment,null,r)})));function Be(){var t=o.useRef(null),e=Fe(o.useState([]),2),n=e[0],r=e[1];o.useEffect((function(){var t;n.length&&(ze([],Fe(n),!1).forEach((function(t){t()})),r([]))}),[n]);var i=o.useCallback((function(e){return function n(i){var a;Ue+=1;var s=o.createRef(),l,u=o.createElement(ue,{key:"modal-".concat(Ue),config:e(i),ref:s,afterClose:function t(){l()}});return l=null===(a=t.current)||void 0===a?void 0:a.patchElement(u),{destroy:function t(){function e(){var t;null===(t=s.current)||void 0===t||t.destroy()}s.current?e():r((function(t){return ze(ze([],Fe(t),!1),[e],!1)}))},update:function t(e){function n(){var t;null===(t=s.current)||void 0===t||t.update(e)}s.current?n():r((function(t){return ze(ze([],Fe(t),!1),[n],!1)}))}}}}),[]),a;return[o.useMemo((function(){return{info:i(De),success:i(Re),error:i(Ie),warning:i(Le),confirm:i(Ne)}}),[]),o.createElement(Ve,{ref:t})]}var He=n(5607),Ge=function(){return Ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ge.apply(this,arguments)},We=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ze,je=[],qe=function t(e){Ze={x:e.pageX,y:e.pageY},setTimeout((function(){Ze=null}),100)};(0,He.jD)()&&document.documentElement.addEventListener("click",qe,!0);var Xe=function t(e){var n,r=o.useContext(ae.ConfigContext),i=r.getPopupContainer,a=r.getPrefixCls,s=r.direction,l=function t(n){var r=e.onCancel;null==r||r(n)},u=function t(n){var r=e.onOk;null==r||r(n)},c=function t(n){var r=e.okText,i=e.okType,a=e.cancelText,s=e.confirmLoading;return o.createElement(o.Fragment,null,o.createElement(Wt.Z,Ge({onClick:l},e.cancelButtonProps),a||n.cancelText),o.createElement(Wt.Z,Ge({},(0,Zt.convertLegacyProps)(i),{loading:s,onClick:u},e.okButtonProps),r||n.okText))},h=e.prefixCls,f=e.footer,d=e.visible,p=e.wrapClassName,m=e.centered,v=e.getContainer,g=e.closeIcon,y=e.focusTriggerAfterClose,_=void 0===y||y,x=We(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),b=a("modal",h),w=a(),M=o.createElement(ie.default,{componentName:"Modal",defaultLocale:Me()},c),S=o.createElement("span",{className:"".concat(b,"-close-x")},g||o.createElement(Ut(),{className:"".concat(b,"-close-icon")})),E=ct()(p,((n={})["".concat(b,"-centered")]=!!m,n["".concat(b,"-wrap-rtl")]="rtl"===s,n));return o.createElement(Ft,Ge({},x,{getContainer:void 0===v?i:v,prefixCls:b,wrapClassName:E,footer:void 0===f?M:f,visible:d,mousePosition:Ze,onClose:l,closeIcon:S,focusTriggerAfterClose:_,transitionName:(0,$t.mL)(w,"zoom",e.transitionName),maskTransitionName:(0,$t.mL)(w,"fade",e.maskTransitionName)}))};Xe.useModal=Be,Xe.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var Ye=Xe;function Ke(t){return Pe(Le(t))}var Je=Ye;Je.info=function t(e){return Pe(De(e))},Je.success=function t(e){return Pe(Re(e))},Je.error=function t(e){return Pe(Ie(e))},Je.warning=Ke,Je.warn=Ke,Je.confirm=function t(e){return Pe(Ne(e))},Je.destroyAll=function t(){for(;je.length;){var e=je.pop();e&&e()}},Je.config=Oe;var Qe=Je,$e=n(46023),tn=n(63096),en=n(47839),nn=n(14036),rn=n(889),an=n.n(rn),on=n(34977),sn=n(98314),ln=n(57219),un=n(68556),cn=n(72086),hn=function(){return hn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hn.apply(this,arguments)},fn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},dn;!function(t){t.DIALOG="dialog"}(dn||(dn={}));var pn=function t(e){var n=e.type,r=e.className,i=e.cancelButtonProps,a=e.okButtonProps,s=e.style,l=fn(e,["type","className","cancelButtonProps","okButtonProps","style"]),u=n===dn.DIALOG?"dialog":"",c=ct()(r,u);return o.createElement(jt.ZP,{autoInsertSpaceInButton:!1},o.createElement(Qe,hn({centered:!(null==s?void 0:s.top),style:s,width:n===dn.DIALOG?"260":void 0,prefixCls:on.dn,className:c,cancelButtonProps:hn({prefixCls:on.to,type:"default"},i),okButtonProps:hn({prefixCls:on.to},a),closeIcon:o.createElement($e.Z,{className:"".concat(on.dn,"-close-icon")}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},l),e.children))};pn.confirm=function(t){Qe.config({rootPrefixCls:on.E3}),Qe.confirm(hn({prefixCls:on.dn,width:460,icon:o.createElement(en.Z,null),cancelButtonProps:{type:"default"},okButtonProps:{type:"primary"},centered:!0,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},t))},pn.info=function(t){Qe.config({rootPrefixCls:on.E3});var e=hn({prefixCls:on.dn,width:460,centered:!0,okText:"\u6211\u77e5\u9053\u4e86",icon:o.createElement(an(),null)},t);Qe.info(e)},pn.success=function(t){Qe.config({rootPrefixCls:on.E3});var e=hn({prefixCls:on.dn,width:460,centered:!0,okText:"\u6211\u77e5\u9053\u4e86",icon:o.createElement(tn.Z,null)},t);Qe.success(e)},pn.error=function(t){Qe.config({rootPrefixCls:on.E3});var e=hn({prefixCls:on.dn,width:460,centered:!0,okText:"\u6211\u77e5\u9053\u4e86",icon:o.createElement(nn.Z,null)},t);Qe.error(e)},pn.warning=function(t){Qe.config({rootPrefixCls:on.E3});var e=hn({prefixCls:on.dn,width:460,centered:!0,okText:"\u6211\u77e5\u9053\u4e86",icon:o.createElement(en.Z,null)},t);Qe.warning(e)};var mn=pn},87844:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r=n(36024),i=n(71796),a=n(59329),o=n(1290),s=n(34977),l=n(77185),u=n(98314),c=n(77533),h=n(26486),f=n.n(h),d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},d.apply(this,arguments)},p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},m=o.Z.TabPane,v=function t(e){var n=e.size,r=e.defaultActiveKey,i=e.activeKey,a=e.tabBarMargin,u=e.className,c=p(e,["size","defaultActiveKey","activeKey","tabBarMargin","className"]),h=f()(u,a?"tab-bar-margin":"");return l.createElement(o.Z,d({size:"medium"===n?"middle":n,tabPosition:"top",prefixCls:s.Iz,defaultActiveKey:void 0!==r?r+"":void 0,activeKey:void 0!==i?i+"":void 0,className:h},c),e.children)};v.TabPane=m;var g=v},47734:function(t,e,n){var r,i,a,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}n(89137),n(29858),n(77513),n(79927),n(61529),n(53020),n(73123),n(8342),n(21061),n(36643),n(78320),n(44080),n(50954),n(63865),n(54759),n(51710),n(87270),n(57915),n(94676),n(46475),n(20387),n(27064),n(4966),n(90461),n(43357),n(58902),n(11979),n(16276),n(67493),n(69301),n(35072),n(59329),n(47721),n(82205),n(9758),n(58220),n(83639),n(86612),n(63670),n(96358),n(90066),n(69559),n(66054),n(71796),n(51395),n(49525),n(57973),n(54239),n(1871),n(40722),n(61036),n(33739),n(60638),n(45699),n(12822),n(98452),n(36024),"undefined"!=typeof navigator&&(a=this,o=function(){"use strict";var t="http://www.w3.org/2000/svg",r="",i=!1,a=-999999,o=function t(e){i=!!e},s=function t(){return i},l=function t(e){r=e},u=function t(){return r};function c(t){return document.createElement(t)}function h(t,e){var n,r=t.length,i;for(n=0;n<r;n+=1)for(var a in i=t[n].prototype)Object.prototype.hasOwnProperty.call(i,a)&&(e.prototype[a]=i[a])}function f(t,e){return Object.getOwnPropertyDescriptor(t,e)}function d(t){function e(){}return e.prototype=t,e}var p=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function t(e){this.audios.push(e)},pause:function t(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].pause()},resume:function t(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].resume()},setRate:function t(e){var n,r=this.audios.length;for(n=0;n<r;n+=1)this.audios[n].setRate(e)},createAudio:function t(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function t(){this.isPlaying=!0},seek:function t(){this.isPlaying=!1},playing:function t(){},rate:function t(){},setVolume:function t(){}}},setAudioFactory:function t(e){this.audioFactory=e},setVolume:function t(e){this._volume=e,this._updateVolume()},mute:function t(){this._isMuted=!0,this._updateVolume()},unmute:function t(){this._isMuted=!1,this._updateVolume()},getVolume:function t(){return this._volume},_updateVolume:function t(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),m=function(){function t(t,e){var n=0,r=[],i;switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(n=0;n<e;n+=1)r.push(i);return r}function e(e,n){return"float32"===e?new Float32Array(n):"int16"===e?new Int16Array(n):"uint8c"===e?new Uint8ClampedArray(n):t(e,n)}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?e:t}();function v(t){return Array.apply(null,{length:t})}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(t)}var y=!0,_=null,x=null,b="",w=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),M=!1,S=Math.pow,E=Math.sqrt,T=Math.floor,C=Math.max,k=Math.min,A={};function P(){return{}}!function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,n=t.length;for(e=0;e<n;e+=1)A[t[e]]=Math[t[e]]}(),A.random=Math.random,A.abs=function(t){var e;if("object"===g(t)&&t.length){var n=v(t.length),r,i=t.length;for(r=0;r<i;r+=1)n[r]=Math.abs(t[r]);return n}return Math.abs(t)};var L=150,D=Math.PI/180,R=.5519;function I(t){M=!!t}function N(t){return M?Math.round(t):t}function O(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function F(t,e,n,r){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=r<0?-1:1}function z(t,e){this.type=t,this.direction=e<0?-1:1}function U(t,e,n,r){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=r<0?-1:1}function V(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function B(t,e){this.type=t,this.target=e}function H(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function G(t){this.type="configError",this.nativeError=t}function W(t,e){this.type=t,this.nativeError=e}var Z=(j=0,function t(){return b+"__lottie_element_"+(j+=1)}),j;function q(t,e,n){var r,i,a,o,s,l,u,c;switch(l=n*(1-e),u=n*(1-(s=6*t-(o=Math.floor(6*t)))*e),c=n*(1-(1-s)*e),o%6){case 0:r=n,i=c,a=l;break;case 1:r=u,i=n,a=l;break;case 2:r=l,i=n,a=c;break;case 3:r=l,i=u,a=n;break;case 4:r=c,i=l,a=n;break;case 5:r=n,i=l,a=u}return[r,i,a]}function X(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),a=r-i,o,s=0===r?0:a/r,l=r/255;switch(r){case i:o=0;break;case t:o=e-n+a*(e<n?6:0),o/=6*a;break;case e:o=n-t+2*a,o/=6*a;break;case n:o=t-e+4*a,o/=6*a}return[o,s,l]}function Y(t,e){var n=X(255*t[0],255*t[1],255*t[2]);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),q(n[0],n[1],n[2])}function K(t,e){var n=X(255*t[0],255*t[1],255*t[2]);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),q(n[0],n[1],n[2])}function J(t,e){var n=X(255*t[0],255*t[1],255*t[2]);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),q(n[0],n[1],n[2])}var Q=function(){var t=[],e,n;for(e=0;e<256;e+=1)n=e.toString(16),t[e]=1===n.length?"0"+n:n;return function(e,n,r){return e<0&&(e=0),n<0&&(n=0),r<0&&(r=0),"#"+t[e]+t[n]+t[r]}}(),$=function t(e){y=!!e},tt=function t(){return y},et=function t(e){_=e},nt=function t(){return _},rt=function t(e){x=e},it=function t(){return x},at=function t(e){L=e},ot=function t(){return L},st=function t(e){b=e},lt=function t(){return b};function ut(e){return document.createElementNS(t,e)}function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(t)}var ht=function(){var t=1,e=[],n,r,i={onmessage:function t(){},postMessage:function t(e){n({data:e})}},a={postMessage:function t(e){i.onmessage({data:e})}};function o(t){if(window.Worker&&window.Blob&&s()){var e=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),r=URL.createObjectURL(e);return new Worker(r)}return n=t,i}function l(){r||(r=o((function t(e){function n(){function t(e,n){var o,s,l=e.length,u,c,h,f;for(s=0;s<l;s+=1)if("ks"in(o=e[s])&&!o.completed){if(o.completed=!0,o.hasMask){var d=o.masksProperties;for(c=d.length,u=0;u<c;u+=1)if(d[u].pt.k.i)a(d[u].pt.k);else for(f=d[u].pt.k.length,h=0;h<f;h+=1)d[u].pt.k[h].s&&a(d[u].pt.k[h].s[0]),d[u].pt.k[h].e&&a(d[u].pt.k[h].e[0])}0===o.ty?(o.layers=r(o.refId,n),t(o.layers,n)):4===o.ty?i(o.shapes):5===o.ty&&p(o)}}function e(e,n){if(e){var i=0,a=e.length;for(i=0;i<a;i+=1)1===e[i].t&&(e[i].data.layers=r(e[i].data.refId,n),t(e[i].data.layers,n))}}function n(t,e){for(var n=0,r=e.length;n<r;){if(e[n].id===t)return e[n];n+=1}return null}function r(t,e){var r=n(t,e);return r?r.layers.__used?JSON.parse(JSON.stringify(r.layers)):(r.layers.__used=!0,r.layers):null}function i(t){var e,n,r,o;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)a(t[e].ks.k);else for(o=t[e].ks.k.length,r=0;r<o;r+=1)t[e].ks.k[r].s&&a(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&a(t[e].ks.k[r].e[0]);else"gr"===t[e].ty&&i(t[e].it)}function a(t){var e,n=t.i.length;for(e=0;e<n;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function o(t,e){var n=e?e.split("."):[100,100,100];return t[0]>n[0]||!(n[0]>t[0])&&(t[1]>n[1]||!(n[1]>t[1])&&(t[2]>n[2]||!(n[2]>t[2])&&null))}var s=function(){var t=[4,4,14];function e(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)5===t[n].ty&&e(t[n])}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var r,i=e.assets.length;for(r=0;r<i;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}(),l=(u=[4,7,99],function(t){if(t.chars&&!o(u,t.v)){var e,n=t.chars.length;for(e=0;e<n;e+=1){var r=t.chars[e];r.data&&r.data.shapes&&(i(r.data.shapes),r.data.ip=0,r.data.op=99999,r.data.st=0,r.data.sr=1,r.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[e].t||(r.data.shapes.push({ty:"no"}),r.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),u,c=function(){var t=[5,7,15];function e(t){var e=t.t.p;"number"==typeof e.a&&(e.a={a:0,k:e.a}),"number"==typeof e.p&&(e.p={a:0,k:e.p}),"number"==typeof e.r&&(e.r={a:0,k:e.r})}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)5===t[n].ty&&e(t[n])}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var r,i=e.assets.length;for(r=0;r<i;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}(),h=function(){var t=[4,1,9];function e(t){var n,r=t.length,i,a;for(n=0;n<r;n+=1)if("gr"===t[n].ty)e(t[n].it);else if("fl"===t[n].ty||"st"===t[n].ty)if(t[n].c.k&&t[n].c.k[0].i)for(a=t[n].c.k.length,i=0;i<a;i+=1)t[n].c.k[i].s&&(t[n].c.k[i].s[0]/=255,t[n].c.k[i].s[1]/=255,t[n].c.k[i].s[2]/=255,t[n].c.k[i].s[3]/=255),t[n].c.k[i].e&&(t[n].c.k[i].e[0]/=255,t[n].c.k[i].e[1]/=255,t[n].c.k[i].e[2]/=255,t[n].c.k[i].e[3]/=255);else t[n].c.k[0]/=255,t[n].c.k[1]/=255,t[n].c.k[2]/=255,t[n].c.k[3]/=255}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)4===t[n].ty&&e(t[n].shapes)}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var r,i=e.assets.length;for(r=0;r<i;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}(),f=function(){var t=[4,4,18];function e(t){var n,r,i,a;for(n=t.length-1;n>=0;n-=1)if("sh"===t[n].ty)if(t[n].ks.k.i)t[n].ks.k.c=t[n].closed;else for(a=t[n].ks.k.length,i=0;i<a;i+=1)t[n].ks.k[i].s&&(t[n].ks.k[i].s[0].c=t[n].closed),t[n].ks.k[i].e&&(t[n].ks.k[i].e[0].c=t[n].closed);else"gr"===t[n].ty&&e(t[n].it)}function n(t){var n,r,i=t.length,a,o,s,l;for(r=0;r<i;r+=1){if((n=t[r]).hasMask){var u=n.masksProperties;for(o=u.length,a=0;a<o;a+=1)if(u[a].pt.k.i)u[a].pt.k.c=u[a].cl;else for(l=u[a].pt.k.length,s=0;s<l;s+=1)u[a].pt.k[s].s&&(u[a].pt.k[s].s[0].c=u[a].cl),u[a].pt.k[s].e&&(u[a].pt.k[s].e[0].c=u[a].cl)}4===n.ty&&e(n.shapes)}}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var r,i=e.assets.length;for(r=0;r<i;r+=1)e.assets[r].layers&&n(e.assets[r].layers)}}}();function d(n){n.__complete||(h(n),s(n),l(n),c(n),f(n),t(n.layers,n.assets),e(n.chars,n.assets),n.__complete=!0)}function p(t){0===t.t.a.length&&t.t.p}var m={};return m.completeData=d,m.checkColors=h,m.checkChars=l,m.checkPathProperties=c,m.checkShapes=f,m.completeLayers=t,m}if(a.dataManager||(a.dataManager=n()),a.assetLoader||(a.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===ct(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}function e(e,n,r,i){var a,o=new XMLHttpRequest;try{o.responseType="json"}catch(t){}o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)a=t(o),r(a);else try{a=t(o),r(a)}catch(t){i&&i(t)}};try{o.open(["G","E","T"].join(""),e,!0)}catch(t){o.open(["G","E","T"].join(""),n+"/"+e,!0)}o.send()}return{load:e}}()),"loadAnimation"===e.data.type)a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.dataManager.completeData(t),a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}));else if("complete"===e.data.type){var r=e.data.animation;a.dataManager.completeData(r),a.postMessage({id:e.data.id,payload:r,status:"success"})}else"loadData"===e.data.type&&a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}))})),r.onmessage=function(t){var n=t.data,r=n.id,i=e[r];e[r]=null,"success"===n.status?i.onComplete(n.payload):i.onError&&i.onError()})}function u(n,r){var i="processId_"+(t+=1);return e[i]={onComplete:n,onError:r},i}function c(t,e,n){l();var i=u(e,n);r.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:i})}function h(t,e,n){l();var i=u(e,n);r.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:i})}function f(t,e,n){l();var i=u(e,n);r.postMessage({type:"complete",animation:t,id:i})}return{loadAnimation:c,loadData:h,completeAnimation:f}}(),ft=function(){var t=function(){var t=c("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(t,e,n){var r="";if(t.e)r=t.p;else if(e){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=e+i}else r=n,r+=t.u?t.u:"",r+=t.p;return r}function i(t){var e=0,n=setInterval(function(){var r;(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(n)),e+=1}.bind(this),50)}function a(e){var n=r(e,this.assetsPath,this.path),i=ut("image");w?this.testImageLoaded(i):i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){a.img=t,this._imageLoaded()}.bind(this),!1),i.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(i):this._elementHelper.appendChild(i);var a={img:i,assetData:e};return a}function o(e){var n=r(e,this.assetsPath,this.path),i=c("img");i.crossOrigin="anonymous",i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){a.img=t,this._imageLoaded()}.bind(this),!1),i.src=n;var a={img:i,assetData:e};return a}function s(t){var e={assetData:t},n=r(t,this.assetsPath,this.path);return ht.loadData(n,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function l(t,e){var n;this.imagesLoadedCb=e;var r=t.length;for(n=0;n<r;n+=1)t[n].layers||(t[n].t&&"seq"!==t[n].t?3===t[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[n]))):(this.totalImages+=1,this.images.push(this._createImageData(t[n]))))}function u(t){this.path=t||""}function h(t){this.assetsPath=t||""}function f(t){for(var e=0,n=this.images.length;e<n;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null}function d(){this.imagesLoadedCb=null,this.images.length=0}function p(){return this.totalImages===this.loadedAssets}function m(){return this.totalFootages===this.loadedFootagesCount}function v(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function g(){this._imageLoaded=e.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return g.prototype={loadAssets:l,setAssetsPath:h,setPath:u,loadedImages:p,loadedFootages:m,destroy:d,getAsset:f,createImgData:o,createImageData:a,imageLoaded:e,footageLoaded:n,setCacheType:v},g}();function dt(){}dt.prototype={triggerEvent:function t(e,n){if(this._cbs[e])for(var r=this._cbs[e],i=0;i<r.length;i+=1)r[i](n)},addEventListener:function t(e,n){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(n),function(){this.removeEventListener(e,n)}.bind(this)},removeEventListener:function t(e,n){if(n){if(this._cbs[e]){for(var r=0,i=this._cbs[e].length;r<i;)this._cbs[e][r]===n&&(this._cbs[e].splice(r,1),r-=1,i-=1),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var pt=function(){function t(t){for(var e=t.split("\r\n"),n={},r,i=0,a=0;a<e.length;a+=1)2===(r=e[a].split(":")).length&&(n[r[0]]=r[1].trim(),i+=1);if(0===i)throw new Error;return n}return function(e){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],a={time:i.tm,duration:i.dr};try{a.payload=JSON.parse(e[r].cm)}catch(n){try{a.payload=t(e[r].cm)}catch(t){a.payload={name:e[r].cm}}}n.push(a)}return n}}(),mt=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,n=this.compositions.length;e<n;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),vt={},gt=function t(e,n){vt[e]=n};function yt(t){return vt[t]}function _t(){if(vt.canvas)return"canvas";for(var t in vt)if(vt[t])return t;return""}function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(t)}var bt=function t(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=Z(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=tt(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=mt(),this.imagePreloader=new ft,this.audioController=p(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new F("drawnFrame",0,0,0),this.expressionsPlugin=nt()};h([dt],bt),bt.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var n=yt(e);this.renderer=new n(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),ht.loadAnimation(t.path,this.configAnimation,this.onSetupError))},bt.prototype.onSetupError=function(){this.trigger("data_failed")},bt.prototype.setupAnimation=function(t){ht.completeAnimation(t,this.configAnimation)},bt.prototype.setData=function(t,e){e&&"object"!==xt(e)&&(e=JSON.parse(e));var n={wrapper:t,animationData:e},r=t.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:_t()||"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===i?n.loop=!1:"true"===i?n.loop=!0:""!==i&&(n.loop=parseInt(i,10));var a=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value,o;n.autoplay="false"!==a,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},bt.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,n,r=e.length,i=t.layers,a,o=i.length;for(a=0;a<o;a+=1)for(n=0;n<r;){if(e[n].id===i[a].id){e[n]=i[a];break}n+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,n=0;n<r;n+=1)this.animationData.assets.push(t.assets[n]);this.animationData.__complete=!1,ht.completeAnimation(this.animationData,this.onSegmentComplete)},bt.prototype.onSegmentComplete=function(t){this.animationData=t;var e=nt();e&&e.initExpressions(this),this.loadNextSegment()},bt.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,ht.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},bt.prototype.loadSegments=function(){var t;this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},bt.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},bt.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},bt.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=pt(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},bt.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},bt.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=nt();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},bt.prototype.resize=function(t,e){var n="number"==typeof t?t:void 0,r="number"==typeof e?e:void 0;this.renderer.updateContainerSize(n,r)},bt.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},bt.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},bt.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},bt.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},bt.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},bt.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},bt.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},bt.prototype.getMarkerData=function(t){for(var e,n=0;n<this.markers.length;n+=1)if((e=this.markers[n]).payload&&e.payload.name===t)return e;return null},bt.prototype.goToAndStop=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var i=this.getMarkerData(t);i&&this.goToAndStop(i.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},bt.prototype.goToAndPlay=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var i=this.getMarkerData(t);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(r,e,n);this.play()}},bt.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},bt.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},bt.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},bt.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===xt(t[0])){var n,r=t.length;for(n=0;n<r;n+=1)this.segments.push(t[n])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},bt.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},bt.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},bt.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},bt.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},bt.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},bt.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},bt.prototype.setLoop=function(t){this.loop=t},bt.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},bt.prototype.getVolume=function(){return this.audioController.getVolume()},bt.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},bt.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},bt.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},bt.prototype.getPath=function(){return this.path},bt.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),e=this.assetsPath+n}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},bt.prototype.getAssetData=function(t){for(var e=0,n=this.assets.length;e<n;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},bt.prototype.hide=function(){this.renderer.hide()},bt.prototype.show=function(){this.renderer.show()},bt.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},bt.prototype.updateDocumentData=function(t,e,n){try{var r;this.renderer.getElementByPath(t).updateDocumentData(e,n)}catch(t){}},bt.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new F(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new U(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new z(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new V(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new B(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new F(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new U(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new z(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new V(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new B(t,this))},bt.prototype.triggerRenderFrameError=function(t){var e=new H(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},bt.prototype.triggerConfigError=function(t){var e=new G(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var wt=function(){var t={},e=[],n=0,r=0,i=0,a=!0,o=!1;function s(t){for(var n=0,i=t.target;n<r;)e[n].animation===i&&(e.splice(n,1),n-=1,r-=1,i.isPaused||f()),n+=1}function l(t,n){if(!t)return null;for(var i=0;i<r;){if(e[i].elem===t&&null!==e[i].elem)return e[i].animation;i+=1}var a=new bt;return d(a,t),a.setData(t,n),a}function u(){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r.push(e[t].animation);return r}function h(){i+=1,C()}function f(){i-=1}function d(t,n){t.addEventListener("destroy",s),t.addEventListener("_active",h),t.addEventListener("_idle",f),e.push({elem:n,animation:t}),r+=1}function p(t){var e=new bt;return d(e,null),e.setParams(t),e}function m(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setSpeed(t,n)}function v(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setDirection(t,n)}function g(t){var n;for(n=0;n<r;n+=1)e[n].animation.play(t)}function y(t){var s=t-n,l;for(l=0;l<r;l+=1)e[l].animation.advanceTime(s);n=t,i&&!o?window.requestAnimationFrame(y):a=!0}function _(t){n=t,window.requestAnimationFrame(y)}function x(t){var n;for(n=0;n<r;n+=1)e[n].animation.pause(t)}function b(t,n,i){var a;for(a=0;a<r;a+=1)e[a].animation.goToAndStop(t,n,i)}function w(t){var n;for(n=0;n<r;n+=1)e[n].animation.stop(t)}function M(t){var n;for(n=0;n<r;n+=1)e[n].animation.togglePause(t)}function S(t){var n;for(n=r-1;n>=0;n-=1)e[n].animation.destroy(t)}function E(t,e,n){var r=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),i,a=r.length;for(i=0;i<a;i+=1)n&&r[i].setAttribute("data-bm-type",n),l(r[i],t);if(e&&0===a){n||(n="svg");var o=document.getElementsByTagName("body")[0];o.innerText="";var s=c("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),o.appendChild(s),l(s,t)}}function T(){var t;for(t=0;t<r;t+=1)e[t].animation.resize()}function C(){!o&&i&&a&&(window.requestAnimationFrame(_),a=!1)}function k(){o=!0}function A(){o=!1,C()}function P(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setVolume(t,n)}function L(t){var n;for(n=0;n<r;n+=1)e[n].animation.mute(t)}function D(t){var n;for(n=0;n<r;n+=1)e[n].animation.unmute(t)}return t.registerAnimation=l,t.loadAnimation=p,t.setSpeed=m,t.setDirection=v,t.play=g,t.pause=x,t.stop=w,t.togglePause=M,t.searchAnimations=E,t.resize=T,t.goToAndStop=b,t.destroy=S,t.freeze=k,t.unfreeze=A,t.setVolume=P,t.mute=L,t.unmute=D,t.getRegisteredAnimations=u,t}(),Mt=function(){var t={};t.getBezierEasing=n;var e={};function n(t,n,r,i,a){var o=a||("bez_"+t+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(e[o])return e[o];var s=new g([t,n,r,i]);return e[o]=s,s}var r=4,i=.001,a=1e-7,o=10,s=11,l=.1,u="function"==typeof Float32Array;function c(t,e){return 1-3*e+3*t}function h(t,e){return 3*e-6*t}function f(t){return 3*t}function d(t,e,n){return((c(e,n)*t+h(e,n))*t+f(e))*t}function p(t,e,n){return 3*c(e,n)*t*t+2*h(e,n)*t+f(e)}function m(t,e,n,r,i){var s,l,u=0;do{(s=d(l=e+(n-e)/2,r,i)-t)>0?n=l:e=l}while(Math.abs(s)>a&&++u<o);return l}function v(t,e,n,r){for(var i=0;i<4;++i){var a=p(e,n,r),o;if(0===a)return e;e-=(d(e,n,r)-t)/a}return e}function g(t){this._p=t,this._mSampleValues=u?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return g.prototype={get:function t(e){var n=this._p[0],r=this._p[1],i=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),n===r&&i===a?e:0===e?0:1===e?1:d(this._getTForX(e),r,a)},_precompute:function t(){var e=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,e===n&&r===i||this._calcSampleValues()},_calcSampleValues:function t(){for(var e=this._p[0],n=this._p[2],r=0;r<s;++r)this._mSampleValues[r]=d(r*l,e,n)},_getTForX:function t(e){for(var n=this._p[0],r=this._p[2],a=this._mSampleValues,o=0,s=1,u=10;s!==u&&a[s]<=e;++s)o+=l;var c,h=o+(e-a[--s])/(a[s+1]-a[s])*l,f=p(h,n,r);return f>=i?v(e,h,n,r):0===f?h:m(e,o,o+l,n,r)}},t}(),St=function(){function t(t){return t.concat(v(t.length))}return{double:t}}(),Et=function(t,e,n){var r=0,i=t,a=v(i),o;function s(){var t;return t=r?a[r-=1]:e()}function l(t){r===i&&(a=St.double(a),i*=2),n&&n(t),a[r]=t,r+=1}return{newElement:s,release:l}},Tt=function(){function t(){return{addedLength:0,percents:m("float32",ot()),lengths:m("float32",ot())}}return Et(8,t)}(),Ct=function(){function t(){return{lengths:[],totalLength:0}}function e(t){var e,n=t.lengths.length;for(e=0;e<n;e+=1)Tt.release(t.lengths[e]);t.lengths.length=0}return Et(8,t,e)}();function kt(){var t=Math;function e(t,e,n,r,i,a){var o=t*r+e*i+n*a-i*r-a*t-n*e;return o>-.001&&o<.001}function n(n,r,i,a,o,s,l,u,c){if(0===i&&0===s&&0===c)return e(n,r,a,o,l,u);var h=t.sqrt(t.pow(a-n,2)+t.pow(o-r,2)+t.pow(s-i,2)),f=t.sqrt(t.pow(l-n,2)+t.pow(u-r,2)+t.pow(c-i,2)),d=t.sqrt(t.pow(l-a,2)+t.pow(u-o,2)+t.pow(c-s,2)),p;return(p=h>f?h>d?h-f-d:d-f-h:d>f?d-f-h:f-h-d)>-1e-4&&p<1e-4}var r=function(t,e,n,r){var i=ot(),a,o,s,l,u,c=0,h,f=[],d=[],p=Tt.newElement();for(s=n.length,a=0;a<i;a+=1){for(u=a/(i-1),h=0,o=0;o<s;o+=1)l=S(1-u,3)*t[o]+3*S(1-u,2)*u*n[o]+3*(1-u)*S(u,2)*r[o]+S(u,3)*e[o],f[o]=l,null!==d[o]&&(h+=S(f[o]-d[o],2)),d[o]=f[o];h&&(c+=h=E(h)),p.percents[a]=u,p.lengths[a]=c}return p.addedLength=c,p};function i(t){var e=Ct.newElement(),n=t.c,i=t.v,a=t.o,o=t.i,s,l=t._length,u=e.lengths,c=0;for(s=0;s<l-1;s+=1)u[s]=r(i[s],i[s+1],a[s],o[s+1]),c+=u[s].addedLength;return n&&l&&(u[s]=r(i[s],i[0],a[s],o[0]),c+=u[s].addedLength),e.totalLength=c,e}function a(t){this.segmentLength=0,this.points=new Array(t)}function o(t,e){this.partialLength=t,this.point=e}var s=(l={},function(t,n,r,i){var s=(t[0]+"_"+t[1]+"_"+n[0]+"_"+n[1]+"_"+r[0]+"_"+r[1]+"_"+i[0]+"_"+i[1]).replace(/\./g,"p");if(!l[s]){var u=ot(),c,h,f,d,p,m=0,g,y,_=null;2===t.length&&(t[0]!==n[0]||t[1]!==n[1])&&e(t[0],t[1],n[0],n[1],t[0]+r[0],t[1]+r[1])&&e(t[0],t[1],n[0],n[1],n[0]+i[0],n[1]+i[1])&&(u=2);var x=new a(u);for(f=r.length,c=0;c<u;c+=1){for(y=v(f),p=c/(u-1),g=0,h=0;h<f;h+=1)d=S(1-p,3)*t[h]+3*S(1-p,2)*p*(t[h]+r[h])+3*(1-p)*S(p,2)*(n[h]+i[h])+S(p,3)*n[h],y[h]=d,null!==_&&(g+=S(y[h]-_[h],2));m+=g=E(g),x.points[c]=new o(g,y),_=y}x.segmentLength=m,l[s]=x}return l[s]}),l;function u(t,e){var n=e.percents,r=e.lengths,i=n.length,a=T((i-1)*t),o=t*e.addedLength,s=0;if(a===i-1||0===a||o===r[a])return n[a];for(var l=r[a]>o?-1:1,u=!0;u;)if(r[a]<=o&&r[a+1]>o?(s=(o-r[a])/(r[a+1]-r[a]),u=!1):a+=l,a<0||a>=i-1){if(a===i-1)return n[a];u=!1}return n[a]+(n[a+1]-n[a])*s}function c(e,n,r,i,a,o){var s=u(a,o),l=1-s,c,h;return[t.round(1e3*(l*l*l*e[0]+(s*l*l+l*s*l+l*l*s)*r[0]+(s*s*l+l*s*s+s*l*s)*i[0]+s*s*s*n[0]))/1e3,t.round(1e3*(l*l*l*e[1]+(s*l*l+l*s*l+l*l*s)*r[1]+(s*s*l+l*s*s+s*l*s)*i[1]+s*s*s*n[1]))/1e3]}var h=m("float32",8);function f(e,n,r,i,a,o,s){a<0?a=0:a>1&&(a=1);var l=u(a,s),c=u(o=o>1?1:o,s),f,d=e.length,p=1-l,m=1-c,v=p*p*p,g=l*p*p*3,y=l*l*p*3,_=l*l*l,x=p*p*m,b=l*p*m+p*l*m+p*p*c,w=l*l*m+p*l*c+l*p*c,M=l*l*c,S=p*m*m,E=l*m*m+p*c*m+p*m*c,T=l*c*m+p*c*c+l*m*c,C=l*c*c,k=m*m*m,A=c*m*m+m*c*m+m*m*c,P=c*c*m+m*c*c+c*m*c,L=c*c*c;for(f=0;f<d;f+=1)h[4*f]=t.round(1e3*(v*e[f]+g*r[f]+y*i[f]+_*n[f]))/1e3,h[4*f+1]=t.round(1e3*(x*e[f]+b*r[f]+w*i[f]+M*n[f]))/1e3,h[4*f+2]=t.round(1e3*(S*e[f]+E*r[f]+T*i[f]+C*n[f]))/1e3,h[4*f+3]=t.round(1e3*(k*e[f]+A*r[f]+P*i[f]+L*n[f]))/1e3;return h}return{getSegmentsLength:i,getNewSegment:f,getPointInSegment:c,buildBezierData:s,pointOnLine2D:e,pointOnLine3D:n}}var At=kt(),Pt=a,Lt=Math.abs;function Dt(t,e){var n=this.offsetTime,r;"multidimensional"===this.propType&&(r=m("float32",this.pv.length));for(var i=e.lastIndex,a=i,o=this.keyframes.length-1,s=!0,l,u,c,h,f,d,p,v,g;s;){if(l=this.keyframes[a],u=this.keyframes[a+1],a===o-1&&t>=u.t-n){l.h&&(l=u),i=0;break}if(u.t-n>t){i=a;break}a<o-1?a+=1:(i=0,s=!1)}c=this.keyframesMetadata[a]||{};var y=u.t-n,_=l.t-n,x;if(l.to){c.bezierData||(c.bezierData=At.buildBezierData(l.s,u.s||l.e,l.to,l.ti));var b=c.bezierData;if(t>=y||t<_){var w=t>=y?b.points.length-1:0;for(f=b.points[w].point.length,h=0;h<f;h+=1)r[h]=b.points[w].point[h]}else{c.__fnct?g=c.__fnct:(g=Mt.getBezierEasing(l.o.x,l.o.y,l.i.x,l.i.y,l.n).get,c.__fnct=g),d=g((t-_)/(y-_));var M=b.segmentLength*d,S,E=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastAddedLength:0;for(v=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastPoint:0,s=!0,p=b.points.length;s;){if(E+=b.points[v].partialLength,0===M||0===d||v===b.points.length-1){for(f=b.points[v].point.length,h=0;h<f;h+=1)r[h]=b.points[v].point[h];break}if(M>=E&&M<E+b.points[v+1].partialLength){for(S=(M-E)/b.points[v+1].partialLength,f=b.points[v].point.length,h=0;h<f;h+=1)r[h]=b.points[v].point[h]+(b.points[v+1].point[h]-b.points[v].point[h])*S;break}v<p-1?v+=1:s=!1}e._lastPoint=v,e._lastAddedLength=E-b.points[v].partialLength,e._lastKeyframeIndex=a}}else{var T,C,k,A,P;if(o=l.s.length,x=u.s||l.e,this.sh&&1!==l.h)if(t>=y)r[0]=x[0],r[1]=x[1],r[2]=x[2];else if(t<=_)r[0]=l.s[0],r[1]=l.s[1],r[2]=l.s[2];else{var L,D,R;It(r,Rt(Nt(l.s),Nt(x),(t-_)/(y-_)))}else for(a=0;a<o;a+=1)1!==l.h&&(t>=y?d=1:t<_?d=0:(l.o.x.constructor===Array?(c.__fnct||(c.__fnct=[]),c.__fnct[a]?g=c.__fnct[a]:(T=void 0===l.o.x[a]?l.o.x[0]:l.o.x[a],C=void 0===l.o.y[a]?l.o.y[0]:l.o.y[a],k=void 0===l.i.x[a]?l.i.x[0]:l.i.x[a],A=void 0===l.i.y[a]?l.i.y[0]:l.i.y[a],g=Mt.getBezierEasing(T,C,k,A).get,c.__fnct[a]=g)):c.__fnct?g=c.__fnct:(T=l.o.x,C=l.o.y,k=l.i.x,A=l.i.y,g=Mt.getBezierEasing(T,C,k,A).get,l.keyframeMetadata=g),d=g((t-_)/(y-_)))),x=u.s||l.e,P=1===l.h?l.s[a]:l.s[a]+(x[a]-l.s[a])*d,"multidimensional"===this.propType?r[a]=P:r=P}return e.lastIndex=i,r}function Rt(t,e,n){var r=[],i=t[0],a=t[1],o=t[2],s=t[3],l=e[0],u=e[1],c=e[2],h=e[3],f,d,p,m,v;return(d=i*l+a*u+o*c+s*h)<0&&(d=-d,l=-l,u=-u,c=-c,h=-h),1-d>1e-6?(f=Math.acos(d),p=Math.sin(f),m=Math.sin((1-n)*f)/p,v=Math.sin(n*f)/p):(m=1-n,v=n),r[0]=m*i+v*l,r[1]=m*a+v*u,r[2]=m*o+v*c,r[3]=m*s+v*h,r}function It(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.atan2(2*r*a-2*n*i,1-2*r*r-2*i*i),s=Math.asin(2*n*r+2*i*a),l=Math.atan2(2*n*a-2*r*i,1-2*n*n-2*i*i);t[0]=o/D,t[1]=s/D,t[2]=l/D}function Nt(t){var e=t[0]*D,n=t[1]*D,r=t[2]*D,i=Math.cos(e/2),a=Math.cos(n/2),o=Math.cos(r/2),s=Math.sin(e/2),l=Math.sin(n/2),u=Math.sin(r/2),c,h,f,d;return[s*l*o+i*a*u,s*a*o+i*l*u,i*l*o-s*a*u,i*a*o-s*l*u]}function Ot(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==Pt&&(this._caching.lastFrame>=n&&t>=n||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(t,this._caching);this.pv=r}return this._caching.lastFrame=t,this.pv}function Ft(t){var e;if("unidimensional"===this.propType)e=t*this.mult,Lt(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var n=0,r=this.v.length;n<r;)e=t[n]*this.mult,Lt(this.v[n]-e)>1e-5&&(this.v[n]=e,this._mdf=!0),n+=1}function zt(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)n=this.effectsSequence[t](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Ut(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function Vt(t,e,n,r){this.propType="unidimensional",this.mult=n||1,this.data=e,this.v=n?e.k*n:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=zt,this.setVValue=Ft,this.addEffect=Ut}function Bt(t,e,n,r){var i;this.propType="multidimensional",this.mult=n||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a=e.k.length;for(this.v=m("float32",a),this.pv=m("float32",a),this.vel=m("float32",a),i=0;i<a;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=zt,this.setVValue=Ft,this.addEffect=Ut}function Ht(t,e,n,r){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:Pt,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=n||1,this.elem=t,this.container=r,this.comp=t.comp,this.v=Pt,this.pv=Pt,this._isFirstFrame=!0,this.getValue=zt,this.setVValue=Ft,this.interpolateValue=Dt,this.effectsSequence=[Ot.bind(this)],this.addEffect=Ut}function Gt(t,e,n,r){var i;this.propType="multidimensional";var a=e.k.length,o,s,l,u;for(i=0;i<a-1;i+=1)e.k[i].to&&e.k[i].s&&e.k[i+1]&&e.k[i+1].s&&(o=e.k[i].s,s=e.k[i+1].s,l=e.k[i].to,u=e.k[i].ti,(2===o.length&&(o[0]!==s[0]||o[1]!==s[1])&&At.pointOnLine2D(o[0],o[1],s[0],s[1],o[0]+l[0],o[1]+l[1])&&At.pointOnLine2D(o[0],o[1],s[0],s[1],s[0]+u[0],s[1]+u[1])||3===o.length&&(o[0]!==s[0]||o[1]!==s[1]||o[2]!==s[2])&&At.pointOnLine3D(o[0],o[1],o[2],s[0],s[1],s[2],o[0]+l[0],o[1]+l[1],o[2]+l[2])&&At.pointOnLine3D(o[0],o[1],o[2],s[0],s[1],s[2],s[0]+u[0],s[1]+u[1],s[2]+u[2]))&&(e.k[i].to=null,e.k[i].ti=null),o[0]===s[0]&&o[1]===s[1]&&0===l[0]&&0===l[1]&&0===u[0]&&0===u[1]&&(2===o.length||o[2]===s[2]&&0===l[2]&&0===u[2])&&(e.k[i].to=null,e.k[i].ti=null));this.effectsSequence=[Ot.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=t,this.container=r,this.comp=t.comp,this.getValue=zt,this.setVValue=Ft,this.interpolateValue=Dt,this.frameId=-1;var c=e.k[0].s.length;for(this.v=m("float32",c),this.pv=m("float32",c),i=0;i<c;i+=1)this.v[i]=Pt,this.pv[i]=Pt;this._caching={lastFrame:Pt,lastIndex:0,value:m("float32",c)},this.addEffect=Ut}var Wt=function(){function t(t,e,n,r,i){var a;if(e.sid&&(e=t.globalData.slotManager.getProp(e)),e.k.length)if("number"==typeof e.k[0])a=new Bt(t,e,r,i);else switch(n){case 0:a=new Ht(t,e,r,i);break;case 1:a=new Gt(t,e,r,i)}else a=new Vt(t,e,r,i);return a.effectsSequence.length&&i.addDynamicProperty(a),a}var e;return{getProp:t}}();function Zt(){}Zt.prototype={addDynamicProperty:function t(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function t(){var e;this._mdf=!1;var n=this.dynamicProperties.length;for(e=0;e<n;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function t(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var jt=function(){function t(){return m("float32",2)}return Et(8,t)}();function qt(){this.c=!1,this._length=0,this._maxLength=8,this.v=v(this._maxLength),this.o=v(this._maxLength),this.i=v(this._maxLength)}qt.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var n=0;n<e;)this.v[n]=jt.newElement(),this.o[n]=jt.newElement(),this.i[n]=jt.newElement(),n+=1},qt.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},qt.prototype.doubleArrayLength=function(){this.v=this.v.concat(v(this._maxLength)),this.i=this.i.concat(v(this._maxLength)),this.o=this.o.concat(v(this._maxLength)),this._maxLength*=2},qt.prototype.setXYAt=function(t,e,n,r,i){var a;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}(!a[r]||a[r]&&!i)&&(a[r]=jt.newElement()),a[r][0]=t,a[r][1]=e},qt.prototype.setTripleAt=function(t,e,n,r,i,a,o,s){this.setXYAt(t,e,"v",o,s),this.setXYAt(n,r,"o",o,s),this.setXYAt(i,a,"i",o,s)},qt.prototype.reverse=function(){var t=new qt;t.setPathData(this.c,this._length);var e=this.v,n=this.o,r=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var a=this._length-1,o=this._length,s;for(s=i;s<o;s+=1)t.setTripleAt(e[a][0],e[a][1],r[a][0],r[a][1],n[a][0],n[a][1],s,!1),a-=1;return t},qt.prototype.length=function(){return this._length};var Xt=function(){function t(){return new qt}function e(t){var e=t._length,n;for(n=0;n<e;n+=1)jt.release(t.v[n]),jt.release(t.i[n]),jt.release(t.o[n]),t.v[n]=null,t.i[n]=null,t.o[n]=null;t._length=0,t.c=!1}function n(t){var e=r.newElement(),n,i=void 0===t._length?t.v.length:t._length;for(e.setLength(i),e.c=t.c,n=0;n<i;n+=1)e.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],n);return e}var r=Et(4,t,e);return r.clone=n,r}();function Yt(){this._length=0,this._maxLength=4,this.shapes=v(this._maxLength)}Yt.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(v(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},Yt.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)Xt.release(this.shapes[t]);this._length=0};var Kt=function(){var t={newShapeCollection:i,release:a},e=0,n=4,r=v(n);function i(){var t;return t=e?r[e-=1]:new Yt}function a(t){var i,a=t._length;for(i=0;i<a;i+=1)Xt.release(t.shapes[i]);t._length=0,e===n&&(r=St.double(r),n*=2),r[e]=t,e+=1}return t}(),Jt=function(){var t=-999999;function e(t,e,n){var r=n.lastIndex,i,a,o,s,l,u,c,h,f,d=this.keyframes;if(t<d[0].t-this.offsetTime)i=d[0].s[0],o=!0,r=0;else if(t>=d[d.length-1].t-this.offsetTime)i=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],o=!0;else{for(var p=r,m=d.length-1,v=!0,g,y,_;v&&(g=d[p],!((y=d[p+1]).t-this.offsetTime>t));)p<m-1?p+=1:v=!1;if(_=this.keyframesMetadata[p]||{},r=p,!(o=1===g.h)){if(t>=y.t-this.offsetTime)h=1;else if(t<g.t-this.offsetTime)h=0;else{var x;_.__fnct?x=_.__fnct:(x=Mt.getBezierEasing(g.o.x,g.o.y,g.i.x,g.i.y).get,_.__fnct=x),h=x((t-(g.t-this.offsetTime))/(y.t-this.offsetTime-(g.t-this.offsetTime)))}a=y.s?y.s[0]:g.e[0]}i=g.s[0]}for(u=e._length,c=i.i[0].length,n.lastIndex=r,s=0;s<u;s+=1)for(l=0;l<c;l+=1)f=o?i.i[s][l]:i.i[s][l]+(a.i[s][l]-i.i[s][l])*h,e.i[s][l]=f,f=o?i.o[s][l]:i.o[s][l]+(a.o[s][l]-i.o[s][l])*h,e.o[s][l]=f,f=o?i.v[s][l]:i.v[s][l]+(a.v[s][l]-i.v[s][l])*h,e.v[s][l]=f}function n(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==t&&(i<n&&e<n||i>r&&e>r)||(this._caching.lastIndex=i<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function r(){this.paths=this.localShapeCollection}function i(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var n,r=t._length;for(n=0;n<r;n+=1)if(t.v[n][0]!==e.v[n][0]||t.v[n][1]!==e.v[n][1]||t.o[n][0]!==e.o[n][0]||t.o[n][1]!==e.o[n][1]||t.i[n][0]!==e.i[n][0]||t.i[n][1]!==e.i[n][1])return!1;return!0}function a(t){i(this.v,t)||(this.v=Xt.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(e=0;e<n;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function s(t,e,n){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?e.pt.k:e.ks.k;this.v=Xt.clone(i),this.pv=Xt.clone(this.v),this.localShapeCollection=Kt.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function l(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(e,i,a){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===a?i.pt.k:i.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var o=this.keyframes[0].s[0].i.length;this.v=Xt.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,o),this.pv=Xt.clone(this.v),this.localShapeCollection=Kt.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=r,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[n.bind(this)]}s.prototype.interpolateShape=e,s.prototype.getValue=o,s.prototype.setVValue=a,s.prototype.addEffect=l,u.prototype.getValue=o,u.prototype.interpolateShape=e,u.prototype.setVValue=a,u.prototype.addEffect=l;var c=function(){var t=R;function e(t,e){this.v=Xt.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=Kt.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=Wt.getProp(t,e.p,1,0,this),this.s=Wt.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function t(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function e(){var n=this.p.v[0],r=this.p.v[1],i=this.s.v[0]/2,a=this.s.v[1]/2,o=3!==this.d,s=this.v;s.v[0][0]=n,s.v[0][1]=r-a,s.v[1][0]=o?n+i:n-i,s.v[1][1]=r,s.v[2][0]=n,s.v[2][1]=r+a,s.v[3][0]=o?n-i:n+i,s.v[3][1]=r,s.i[0][0]=o?n-i*t:n+i*t,s.i[0][1]=r-a,s.i[1][0]=o?n+i:n-i,s.i[1][1]=r-a*t,s.i[2][0]=o?n+i*t:n-i*t,s.i[2][1]=r+a,s.i[3][0]=o?n-i:n+i,s.i[3][1]=r+a*t,s.o[0][0]=o?n+i*t:n-i*t,s.o[0][1]=r-a,s.o[1][0]=o?n+i:n-i,s.o[1][1]=r+a*t,s.o[2][0]=o?n-i*t:n+i*t,s.o[2][1]=r+a,s.o[3][0]=o?n-i:n+i,s.o[3][1]=r-a*t}},h([Zt],e),e}(),f=function(){function t(t,e){this.v=Xt.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=Wt.getProp(t,e.ir,0,0,this),this.is=Wt.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=Wt.getProp(t,e.pt,0,0,this),this.p=Wt.getProp(t,e.p,1,0,this),this.r=Wt.getProp(t,e.r,0,D,this),this.or=Wt.getProp(t,e.or,0,0,this),this.os=Wt.getProp(t,e.os,0,.01,this),this.localShapeCollection=Kt.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function t(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function t(){var e=2*Math.floor(this.pt.v),n=2*Math.PI/e,r=!0,i=this.or.v,a=this.ir.v,o=this.os.v,s=this.is.v,l=2*Math.PI*i/(2*e),u=2*Math.PI*a/(2*e),c,h,f,d,p=-Math.PI/2;p+=this.r.v;var m=3===this.data.d?-1:1;for(this.v._length=0,c=0;c<e;c+=1){f=r?o:s,d=r?l:u;var v=(h=r?i:a)*Math.cos(p),g=h*Math.sin(p),y=0===v&&0===g?0:g/Math.sqrt(v*v+g*g),_=0===v&&0===g?0:-v/Math.sqrt(v*v+g*g);v+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(v,g,v-y*d*f*m,g-_*d*f*m,v+y*d*f*m,g+_*d*f*m,c,!0),r=!r,p+=n*m}},convertPolygonToPath:function t(){var e=Math.floor(this.pt.v),n=2*Math.PI/e,r=this.or.v,i=this.os.v,a=2*Math.PI*r/(4*e),o,s=.5*-Math.PI,l=3===this.data.d?-1:1;for(s+=this.r.v,this.v._length=0,o=0;o<e;o+=1){var u=r*Math.cos(s),c=r*Math.sin(s),h=0===u&&0===c?0:c/Math.sqrt(u*u+c*c),f=0===u&&0===c?0:-u/Math.sqrt(u*u+c*c);u+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(u,c,u-h*a*i*l,c-f*a*i*l,u+h*a*i*l,c+f*a*i*l,o,!0),s+=n*l}this.paths.length=0,this.paths[0]=this.v}},h([Zt],t),t}(),d=function(){function t(t,e){this.v=Xt.newElement(),this.v.c=!0,this.localShapeCollection=Kt.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=Wt.getProp(t,e.p,1,0,this),this.s=Wt.getProp(t,e.s,1,0,this),this.r=Wt.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function t(){var e=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,a=k(r,i,this.r.v),o=a*(1-R);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+r,n-i+a,e+r,n-i+a,e+r,n-i+o,0,!0),this.v.setTripleAt(e+r,n+i-a,e+r,n+i-o,e+r,n+i-a,1,!0),0!==a?(this.v.setTripleAt(e+r-a,n+i,e+r-a,n+i,e+r-o,n+i,2,!0),this.v.setTripleAt(e-r+a,n+i,e-r+o,n+i,e-r+a,n+i,3,!0),this.v.setTripleAt(e-r,n+i-a,e-r,n+i-a,e-r,n+i-o,4,!0),this.v.setTripleAt(e-r,n-i+a,e-r,n-i+o,e-r,n-i+a,5,!0),this.v.setTripleAt(e-r+a,n-i,e-r+a,n-i,e-r+o,n-i,6,!0),this.v.setTripleAt(e+r-a,n-i,e+r-o,n-i,e+r-a,n-i,7,!0)):(this.v.setTripleAt(e-r,n+i,e-r+o,n+i,e-r,n+i,2),this.v.setTripleAt(e-r,n-i,e-r,n-i+o,e-r,n-i,3))):(this.v.setTripleAt(e+r,n-i+a,e+r,n-i+o,e+r,n-i+a,0,!0),0!==a?(this.v.setTripleAt(e+r-a,n-i,e+r-a,n-i,e+r-o,n-i,1,!0),this.v.setTripleAt(e-r+a,n-i,e-r+o,n-i,e-r+a,n-i,2,!0),this.v.setTripleAt(e-r,n-i+a,e-r,n-i+a,e-r,n-i+o,3,!0),this.v.setTripleAt(e-r,n+i-a,e-r,n+i-o,e-r,n+i-a,4,!0),this.v.setTripleAt(e-r+a,n+i,e-r+a,n+i,e-r+o,n+i,5,!0),this.v.setTripleAt(e+r-a,n+i,e+r-o,n+i,e+r-a,n+i,6,!0),this.v.setTripleAt(e+r,n+i-a,e+r,n+i-a,e+r,n+i-o,7,!0)):(this.v.setTripleAt(e-r,n-i,e-r+o,n-i,e-r,n-i,1,!0),this.v.setTripleAt(e-r,n+i,e-r,n+i-o,e-r,n+i,2,!0),this.v.setTripleAt(e+r,n+i,e+r-o,n+i,e+r,n+i,3,!0)))},getValue:function t(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},h([Zt],t),t}();function p(t,e,n){var r,i,a;return 3===n||4===n?r=(3===n?e.pt:e.ks).k.length?new u(t,e,n):new s(t,e,n):5===n?r=new d(t,e):6===n?r=new c(t,e):7===n&&(r=new f(t,e)),r.k&&t.addDynamicProperty(r),r}function m(){return s}function v(){return u}var g={};return g.getShapeProp=p,g.getConstructorFunction=m,g.getKeyframedConstructorFunction=v,g}(),Qt=function(){var t=Math.cos,e=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function o(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function s(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function l(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function u(t,e){return this._t(1,e,t,1,0,0)}function c(t,e){return this.shear(n(t),n(e))}function h(r,i){var a=t(i),o=e(i);return this._t(a,o,0,0,-o,a,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(a,-o,0,0,o,a,0,0,0,0,1,0,0,0,0,1)}function f(t,e,n){return n||0===n||(n=1),1===t&&1===e&&1===n?this:this._t(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}function d(t,e,n,r,i,a,o,s,l,u,c,h,f,d,p,m){return this.props[0]=t,this.props[1]=e,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=a,this.props[6]=o,this.props[7]=s,this.props[8]=l,this.props[9]=u,this.props[10]=c,this.props[11]=h,this.props[12]=f,this.props[13]=d,this.props[14]=p,this.props[15]=m,this}function p(t,e,n){return n=n||0,0!==t||0!==e||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1):this}function v(t,e,n,r,i,a,o,s,l,u,c,h,f,d,p,m){var v=this.props;if(1===t&&0===e&&0===n&&0===r&&0===i&&1===a&&0===o&&0===s&&0===l&&0===u&&1===c&&0===h)return v[12]=v[12]*t+v[15]*f,v[13]=v[13]*a+v[15]*d,v[14]=v[14]*c+v[15]*p,v[15]*=m,this._identityCalculated=!1,this;var g=v[0],y=v[1],_=v[2],x=v[3],b=v[4],w=v[5],M=v[6],S=v[7],E=v[8],T=v[9],C=v[10],k=v[11],A=v[12],P=v[13],L=v[14],D=v[15];return v[0]=g*t+y*i+_*l+x*f,v[1]=g*e+y*a+_*u+x*d,v[2]=g*n+y*o+_*c+x*p,v[3]=g*r+y*s+_*h+x*m,v[4]=b*t+w*i+M*l+S*f,v[5]=b*e+w*a+M*u+S*d,v[6]=b*n+w*o+M*c+S*p,v[7]=b*r+w*s+M*h+S*m,v[8]=E*t+T*i+C*l+k*f,v[9]=E*e+T*a+C*u+k*d,v[10]=E*n+T*o+C*c+k*p,v[11]=E*r+T*s+C*h+k*m,v[12]=A*t+P*i+L*l+D*f,v[13]=A*e+P*a+L*u+D*d,v[14]=A*n+P*o+L*c+D*p,v[15]=A*r+P*s+L*h+D*m,this._identityCalculated=!1,this}function g(t){var e=t.props;return this.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function _(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function x(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function w(t,e,n){return{x:t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}}function M(t,e,n){return t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12]}function S(t,e,n){return t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13]}function E(t,e,n){return t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}function T(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,n=-this.props[1]/t,r=-this.props[4]/t,i=this.props[0]/t,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,s=new Qt;return s.props[0]=e,s.props[1]=n,s.props[4]=r,s.props[5]=i,s.props[12]=a,s.props[13]=o,s}function C(t){var e;return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function k(t){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r[e]=C(t[e]);return r}function A(t,e,n){var r=m("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],a=this.props[1],o=this.props[4],s=this.props[5],l=this.props[12],u=this.props[13];r[0]=t[0]*i+t[1]*o+l,r[1]=t[0]*a+t[1]*s+u,r[2]=e[0]*i+e[1]*o+l,r[3]=e[0]*a+e[1]*s+u,r[4]=n[0]*i+n[1]*o+l,r[5]=n[0]*a+n[1]*s+u}return r}function P(t,e,n){var r;return r=this.isIdentity()?[t,e,n]:[t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]]}function L(t,e){if(this.isIdentity())return t+","+e;var n=this.props;return Math.round(100*(t*n[0]+e*n[4]+n[12]))/100+","+Math.round(100*(t*n[1]+e*n[5]+n[13]))/100}function D(){for(var t=0,e=this.props,n="matrix3d(",i=1e4;t<16;)n+=r(e[t]*i)/i,n+=15===t?")":",",t+=1;return n}function R(t){var e=1e4;return t<1e-6&&t>0||t>-1e-6&&t<0?r(t*e)/e:t}function I(){var t=this.props,e,n,r,i,a,o;return"matrix("+R(t[0])+","+R(t[1])+","+R(t[4])+","+R(t[5])+","+R(t[12])+","+R(t[13])+")"}return function(){this.reset=i,this.rotate=a,this.rotateX=o,this.rotateY=s,this.rotateZ=l,this.skew=c,this.skewFromAxis=h,this.shear=u,this.scale=f,this.setTransform=d,this.translate=p,this.transform=v,this.multiply=g,this.applyToPoint=w,this.applyToX=M,this.applyToY=S,this.applyToZ=E,this.applyToPointArray=P,this.applyToTriplePoints=A,this.applyToPointStringified=L,this.toCSS=D,this.to2dCSS=I,this.clone=x,this.cloneFromProps=b,this.equals=_,this.inversePoints=k,this.inversePoint=C,this.getInverseMatrix=T,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=m("float32",16),this.reset()}}();function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(t)}var te={},ee="__[STANDALONE]__",ne="__[ANIMATIONDATA]__",re="";function ie(t){l(t)}function ae(){wt.searchAnimations()}function oe(t){$(t)}function se(t){st(t)}function le(t){return wt.loadAnimation(t)}function ue(t){if("string"==typeof t)switch(t){case"high":at(200);break;default:at(50);break;case"low":at(10)}else!isNaN(t)&&t>1&&at(t);ot()>=50?I(!1):I(!0)}function ce(){return"undefined"!=typeof navigator}function he(t,e){"expressions"===t&&et(e)}function fe(t){switch(t){case"propertyFactory":return Wt;case"shapePropertyFactory":return Jt;case"matrix":return Qt;default:return null}}function de(){"complete"===document.readyState&&(clearInterval(_e),ae())}function pe(t){for(var e=me.split("&"),n=0;n<e.length;n+=1){var r=e[n].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}return null}te.play=wt.play,te.pause=wt.pause,te.setLocationHref=ie,te.togglePause=wt.togglePause,te.setSpeed=wt.setSpeed,te.setDirection=wt.setDirection,te.stop=wt.stop,te.searchAnimations=ae,te.registerAnimation=wt.registerAnimation,te.loadAnimation=le,te.setSubframeRendering=oe,te.resize=wt.resize,te.goToAndStop=wt.goToAndStop,te.destroy=wt.destroy,te.setQuality=ue,te.inBrowser=ce,te.installPlugin=he,te.freeze=wt.freeze,te.unfreeze=wt.unfreeze,te.setVolume=wt.setVolume,te.mute=wt.mute,te.unmute=wt.unmute,te.getRegisteredAnimations=wt.getRegisteredAnimations,te.useWebWorker=o,te.setIDPrefix=se,te.__getFactory=fe,te.version="5.12.2";var me="",ve=document.getElementsByTagName("script"),ge,ye=ve[ve.length-1]||{src:""};me=ye.src?ye.src.replace(/^[^\?]+\??/,""):"",re=pe("renderer");var _e=setInterval(de,100);try{"object"!==$t(e)&&n.amdO}catch(t){}var xe=function(){var t={},e={};function n(t,n){e[t]||(e[t]=n)}function r(t,n,r){return new e[t](n,r)}return t.registerModifier=n,t.getModifier=r,t}();function be(){}function we(){}function Me(){}be.prototype.initModifierProperties=function(){},be.prototype.addShapeToModifier=function(){},be.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:Kt.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},be.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=a,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},be.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},h([Zt],be),h([be],we),we.prototype.initModifierProperties=function(t,e){this.s=Wt.getProp(t,e.s,0,.01,this),this.e=Wt.getProp(t,e.e,0,.01,this),this.o=Wt.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},we.prototype.addShapeToModifier=function(t){t.pathsData=[]},we.prototype.calculateShapeEdges=function(t,e,n,r,i){var a=[];e<=1?a.push({s:t,e:e}):t>=1?a.push({s:t-1,e:e-1}):(a.push({s:t,e:1}),a.push({s:0,e:e-1}));var o=[],s,l=a.length,u;for(s=0;s<l;s+=1){var c,h;(u=a[s]).e*i<r||u.s*i>r+n||(c=u.s*i<=r?0:(u.s*i-r)/n,h=u.e*i>=r+n?1:(u.e*i-r)/n,o.push([c,h]))}return o.length||o.push([0,0]),o},we.prototype.releasePathsData=function(t){var e,n=t.length;for(e=0;e<n;e+=1)Ct.release(t[e]);return t.length=0,t},we.prototype.processShapes=function(t){var e,n,r,i;if(this._mdf||t){var a=this.o.v%360/360;if(a<0&&(a+=1),(e=this.s.v>1?1+a:this.s.v<0?0+a:this.s.v+a)>(n=this.e.v>1?1+a:this.e.v<0?0+a:this.e.v+a)){var o=e;e=n,n=o}e=1e-4*Math.round(1e4*e),n=1e-4*Math.round(1e4*n),this.sValue=e,this.eValue=n}else e=this.sValue,n=this.eValue;var s=this.shapes.length,l,u,c,h,f,d=0;if(n===e)for(i=0;i<s;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if(1===n&&0===e||0===n&&1===e){if(this._mdf)for(i=0;i<s;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var p=[],m,v;for(i=0;i<s;i+=1)if((m=this.shapes[i]).shape._mdf||this._mdf||t||2===this.m){if(u=(r=m.shape.paths)._length,f=0,!m.shape._mdf&&m.pathsData.length)f=m.totalShapeLength;else{for(c=this.releasePathsData(m.pathsData),l=0;l<u;l+=1)h=At.getSegmentsLength(r.shapes[l]),c.push(h),f+=h.totalLength;m.totalShapeLength=f,m.pathsData=c}d+=f,m.shape._mdf=!0}else m.shape.paths=m.localShapeCollection;var g=e,y=n,_=0,x;for(i=s-1;i>=0;i-=1)if((m=this.shapes[i]).shape._mdf){for((v=m.localShapeCollection).releaseShapes(),2===this.m&&s>1?(x=this.calculateShapeEdges(e,n,m.totalShapeLength,_,d),_+=m.totalShapeLength):x=[[g,y]],u=x.length,l=0;l<u;l+=1){g=x[l][0],y=x[l][1],p.length=0,y<=1?p.push({s:m.totalShapeLength*g,e:m.totalShapeLength*y}):g>=1?p.push({s:m.totalShapeLength*(g-1),e:m.totalShapeLength*(y-1)}):(p.push({s:m.totalShapeLength*g,e:m.totalShapeLength}),p.push({s:0,e:m.totalShapeLength*(y-1)}));var b=this.addShapes(m,p[0]);if(p[0].s!==p[0].e){var w;if(p.length>1)if(m.shape.paths.shapes[m.shape.paths._length-1].c){var M=b.pop();this.addPaths(b,v),b=this.addShapes(m,p[1],M)}else this.addPaths(b,v),b=this.addShapes(m,p[1]);this.addPaths(b,v)}}m.shape.paths=v}}},we.prototype.addPaths=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e.addShape(t[n])},we.prototype.addSegment=function(t,e,n,r,i,a,o){i.setXYAt(e[0],e[1],"o",a),i.setXYAt(n[0],n[1],"i",a+1),o&&i.setXYAt(t[0],t[1],"v",a),i.setXYAt(r[0],r[1],"v",a+1)},we.prototype.addSegmentFromArray=function(t,e,n,r){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),r&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},we.prototype.addShapes=function(t,e,n){var r=t.pathsData,i=t.shape.paths.shapes,a,o=t.shape.paths._length,s,l,u=0,c,h,f,d,p=[],m,v=!0;for(n?(h=n._length,m=n._length):(n=Xt.newElement(),h=0,m=0),p.push(n),a=0;a<o;a+=1){for(f=r[a].lengths,n.c=i[a].c,l=i[a].c?f.length:f.length+1,s=1;s<l;s+=1)if(u+(c=f[s-1]).addedLength<e.s)u+=c.addedLength,n.c=!1;else{if(u>e.e){n.c=!1;break}e.s<=u&&e.e>=u+c.addedLength?(this.addSegment(i[a].v[s-1],i[a].o[s-1],i[a].i[s],i[a].v[s],n,h,v),v=!1):(d=At.getNewSegment(i[a].v[s-1],i[a].v[s],i[a].o[s-1],i[a].i[s],(e.s-u)/c.addedLength,(e.e-u)/c.addedLength,f[s-1]),this.addSegmentFromArray(d,n,h,v),v=!1,n.c=!1),u+=c.addedLength,h+=1}if(i[a].c&&f.length){if(c=f[s-1],u<=e.e){var g=f[s-1].addedLength;e.s<=u&&e.e>=u+g?(this.addSegment(i[a].v[s-1],i[a].o[s-1],i[a].i[0],i[a].v[0],n,h,v),v=!1):(d=At.getNewSegment(i[a].v[s-1],i[a].v[0],i[a].o[s-1],i[a].i[0],(e.s-u)/g,(e.e-u)/g,f[s-1]),this.addSegmentFromArray(d,n,h,v),v=!1,n.c=!1)}else n.c=!1;u+=c.addedLength,h+=1}if(n._length&&(n.setXYAt(n.v[m][0],n.v[m][1],"i",m),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),u>e.e)break;a<o-1&&(n=Xt.newElement(),v=!0,p.push(n),h=0)}return p},h([be],Me),Me.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=Wt.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},Me.prototype.processPath=function(t,e){var n=e/100,r=[0,0],i=t._length,a=0;for(a=0;a<i;a+=1)r[0]+=t.v[a][0],r[1]+=t.v[a][1];r[0]/=i,r[1]/=i;var o=Xt.newElement(),s,l,u,c,h,f;for(o.c=t.c,a=0;a<i;a+=1)s=t.v[a][0]+(r[0]-t.v[a][0])*n,l=t.v[a][1]+(r[1]-t.v[a][1])*n,u=t.o[a][0]+(r[0]-t.o[a][0])*-n,c=t.o[a][1]+(r[1]-t.o[a][1])*-n,h=t.i[a][0]+(r[0]-t.i[a][0])*-n,f=t.i[a][1]+(r[1]-t.i[a][1])*-n,o.setTripleAt(s,l,u,c,h,f,a);return o},Me.prototype.processShapes=function(t){var e,n,r=this.shapes.length,i,a,o=this.amount.v,s,l;if(0!==o)for(n=0;n<r;n+=1){if(l=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(l.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,a=s.shape.paths._length,i=0;i<a;i+=1)l.addShape(this.processPath(e[i],o));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var Se=function(){var t=[0,0];function e(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,i;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),i=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),i=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,i=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],i=[];var a=this.px,o=this.py;a._caching.lastFrame+a.offsetTime<=a.keyframes[0].t?(r[0]=a.getValueAtTime((a.keyframes[0].t+.01)/n,0),r[1]=o.getValueAtTime((o.keyframes[0].t+.01)/n,0),i[0]=a.getValueAtTime(a.keyframes[0].t/n,0),i[1]=o.getValueAtTime(o.keyframes[0].t/n,0)):a._caching.lastFrame+a.offsetTime>=a.keyframes[a.keyframes.length-1].t?(r[0]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/n,0),r[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/n,0),i[0]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/n,0),i[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/n,0)):(r=[a.pv,o.pv],i[0]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/n,a.offsetTime),i[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/n,o.offsetTime))}else r=i=t;this.v.rotate(-Math.atan2(r[1]-i[1],r[0]-i[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function r(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}function i(){}function a(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0}function o(t,e,n){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Qt,this.pre=new Qt,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||t),e.p&&e.p.s?(this.px=Wt.getProp(t,e.p.x,0,0,this),this.py=Wt.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=Wt.getProp(t,e.p.z,0,0,this))):this.p=Wt.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=Wt.getProp(t,e.rx,0,D,this),this.ry=Wt.getProp(t,e.ry,0,D,this),this.rz=Wt.getProp(t,e.rz,0,D,this),e.or.k[0].ti){var r,i=e.or.k.length;for(r=0;r<i;r+=1)e.or.k[r].to=null,e.or.k[r].ti=null}this.or=Wt.getProp(t,e.or,1,D,this),this.or.sh=!0}else this.r=Wt.getProp(t,e.r||{k:0},0,D,this);e.sk&&(this.sk=Wt.getProp(t,e.sk,0,D,this),this.sa=Wt.getProp(t,e.sa,0,D,this)),this.a=Wt.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=Wt.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=Wt.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function s(t,e,n){return new o(t,e,n)}return o.prototype={applyToMatrix:e,getValue:n,precalculateMatrix:r,autoOrient:i},h([Zt],o),o.prototype.addDynamicProperty=a,o.prototype._addDynamicProperty=Zt.prototype.addDynamicProperty,{getTransformProperty:s}}();function Ee(){}function Te(){}function Ce(t,e){return 1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e))}function ke(t){return Math.abs(t)<=1e-5}function Ae(t,e,n){return t*(1-n)+e*n}function Pe(t,e,n){return[Ae(t[0],e[0],n),Ae(t[1],e[1],n)]}function Le(t,e,n){if(0===t)return[];var r=e*e-4*t*n;if(r<0)return[];var i=-e/(2*t);if(0===r)return[i];var a=Math.sqrt(r)/(2*t);return[i-a,i+a]}function De(t,e,n,r){return[3*e-t-3*n+r,3*t-6*e+3*n,-3*t+3*e,t]}function Re(t){return new Ie(t,t,t,t,!1)}function Ie(t,e,n,r,i){i&&We(t,e)&&(e=Pe(t,r,1/3)),i&&We(n,r)&&(n=Pe(t,r,2/3));var a=De(t[0],e[0],n[0],r[0]),o=De(t[1],e[1],n[1],r[1]);this.a=[a[0],o[0]],this.b=[a[1],o[1]],this.c=[a[2],o[2]],this.d=[a[3],o[3]],this.points=[t,e,n,r]}function Ne(t,e){var n=t.points[0][e],r=t.points[t.points.length-1][e];if(n>r){var i=r;r=n,n=i}for(var a=Le(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<a.length;o+=1)if(a[o]>0&&a[o]<1){var s=t.point(a[o])[e];s<n?n=s:s>r&&(r=s)}return{min:n,max:r}}function Oe(t,e,n){var r=t.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:t,t:(e+n)/2,t1:e,t2:n}}function Fe(t){var e=t.bez.split(.5);return[Oe(e[0],t.t1,t.t),Oe(e[1],t.t,t.t2)]}function ze(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function Ue(t,e,n,r,i,a){if(ze(t,e))if(n>=a||t.width<=r&&t.height<=r&&e.width<=r&&e.height<=r)i.push([t.t,e.t]);else{var o=Fe(t),s=Fe(e);Ue(o[0],s[0],n+1,r,i,a),Ue(o[0],s[1],n+1,r,i,a),Ue(o[1],s[0],n+1,r,i,a),Ue(o[1],s[1],n+1,r,i,a)}}function Ve(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Be(t,e,n,r){var i=[t[0],t[1],1],a=[e[0],e[1],1],o=[n[0],n[1],1],s=[r[0],r[1],1],l=Ve(Ve(i,a),Ve(o,s));return ke(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function He(t,e,n){return[t[0]+Math.cos(e)*n,t[1]-Math.sin(e)*n]}function Ge(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function We(t,e){return Ce(t[0],e[0])&&Ce(t[1],e[1])}function Ze(){}function je(t,e,n,r,i,a,o){var s=n-Math.PI/2,l=n+Math.PI/2,u=e[0]+Math.cos(n)*r*i,c=e[1]-Math.sin(n)*r*i;t.setTripleAt(u,c,u+Math.cos(s)*a,c-Math.sin(s)*a,u+Math.cos(l)*o,c-Math.sin(l)*o,t.length())}function qe(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=.5*-Math.PI,i;return[Math.cos(r)*n[0]-Math.sin(r)*n[1],Math.sin(r)*n[0]+Math.cos(r)*n[1]]}function Xe(t,e){var n=0===e?t.length()-1:e-1,r=(e+1)%t.length(),i,a,o=qe(t.v[n],t.v[r]);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function Ye(t,e,n,r,i,a,o){var s=Xe(e,n),l=e.v[n%e._length],u=e.v[0===n?e._length-1:n-1],c=e.v[(n+1)%e._length],h=2===a?Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)):0,f=2===a?Math.sqrt(Math.pow(l[0]-c[0],2)+Math.pow(l[1]-c[1],2)):0;je(t,e.v[n%e._length],s,o,r,f/(2*(i+1)),h/(2*(i+1)),a)}function Ke(t,e,n,r,i,a){for(var o=0;o<r;o+=1){var s=(o+1)/(r+1),l=2===i?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,u=e.normalAngle(s),c;je(t,e.point(s),u,a,n,l/(2*(r+1)),l/(2*(r+1)),i),a=-a}return a}function Je(t,e,n){var r=Math.atan2(e[0]-t[0],e[1]-t[1]);return[He(t,r,n),He(e,r,n)]}function Qe(t,e){var n,r,i,a,o,s,l;n=(l=Je(t.points[0],t.points[1],e))[0],r=l[1],i=(l=Je(t.points[1],t.points[2],e))[0],a=l[1],o=(l=Je(t.points[2],t.points[3],e))[0],s=l[1];var u=Be(n,r,i,a);null===u&&(u=r);var c=Be(o,s,i,a);return null===c&&(c=o),new Ie(n,u,c,s)}function $e(t,e,n,r,i){var a=e.points[3],o=n.points[0];if(3===r)return a;if(We(a,o))return a;if(2===r){var s=-e.tangentAngle(1),l=-n.tangentAngle(0)+Math.PI,u=Be(a,He(a,s+Math.PI/2,100),o,He(o,s+Math.PI/2,100)),c=u?Ge(u,a):Ge(a,o)/2,h=He(a,s,2*c*R);return t.setXYAt(h[0],h[1],"o",t.length()-1),h=He(o,l,2*c*R),t.setTripleAt(o[0],o[1],o[0],o[1],h[0],h[1],t.length()),o}var f,d,p=Be(We(a,e.points[2])?e.points[0]:e.points[2],a,o,We(o,n.points[1])?n.points[3]:n.points[1]);return p&&Ge(p,a)<i?(t.setTripleAt(p[0],p[1],p[0],p[1],p[0],p[1],t.length()),p):a}function tn(t,e){var n=t.intersections(e);return n.length&&Ce(n[0][0],1)&&n.shift(),n.length?n[0]:null}function en(t,e){var n=t.slice(),r=e.slice(),i=tn(t[t.length-1],e[0]);return i&&(n[t.length-1]=t[t.length-1].split(i[0])[0],r[0]=e[0].split(i[1])[1]),t.length>1&&e.length>1&&(i=tn(t[0],e[e.length-1]))?[[t[0].split(i[0])[0]],[e[e.length-1].split(i[1])[1]]]:[n,r]}function nn(t){for(var e,n=1;n<t.length;n+=1)e=en(t[n-1],t[n]),t[n-1]=e[0],t[n]=e[1];return t.length>1&&(e=en(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function rn(t,e){var n=t.inflectionPoints(),r,i,a,o;if(0===n.length)return[Qe(t,e)];if(1===n.length||Ce(n[1],1))return r=(a=t.split(n[0]))[0],i=a[1],[Qe(r,e),Qe(i,e)];r=(a=t.split(n[0]))[0];var s=(n[1]-n[0])/(1-n[0]);return o=(a=a[1].split(s))[0],i=a[1],[Qe(r,e),Qe(o,e),Qe(i,e)]}function an(){}function on(t){for(var e=t.fStyle?t.fStyle.split(" "):[],n="normal",r="normal",i=e.length,a,o=0;o<i;o+=1)switch(a=e[o].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:t.fWeight||n}}h([be],Ee),Ee.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=Wt.getProp(t,e.c,0,null,this),this.o=Wt.getProp(t,e.o,0,null,this),this.tr=Se.getTransformProperty(t,e.tr,this),this.so=Wt.getProp(t,e.tr.so,0,.01,this),this.eo=Wt.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Qt,this.rMatrix=new Qt,this.sMatrix=new Qt,this.tMatrix=new Qt,this.matrix=new Qt},Ee.prototype.applyTransforms=function(t,e,n,r,i,a){var o=a?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-i),l=r.s.v[1]+(1-r.s.v[1])*(1-i);t.translate(r.p.v[0]*o*i,r.p.v[1]*o*i,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*o*i),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(a?1/s:s,a?1/l:l),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},Ee.prototype.init=function(t,e,n,r){for(this.elem=t,this.arr=e,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);n>0;)n-=1,this._elements.unshift(e[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},Ee.prototype.resetElements=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},Ee.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},Ee.prototype.changeGroupRender=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]._render=e,"gr"===t[n].ty&&this.changeGroupRender(t[n].it,e)},Ee.prototype.processShapes=function(t){var e,n,r,i,a,o=!1;if(this._mdf||t){var s=Math.ceil(this.c.v),l;if(this._groups.length<s){for(;this._groups.length<s;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}for(a=0,r=0;r<=this._groups.length-1;r+=1){if(l=a<s,this._groups[r]._render=l,this.changeGroupRender(this._groups[r].it,l),!l){var c=this.elemsData[r].it,h=c[c.length-1];0!==h.transform.op.v?(h.transform.op._mdf=!0,h.transform.op.v=0):h.transform.op._mdf=!1}a+=1}this._currentCopies=s;var f=this.o.v,d=f%1,p=f>0?Math.floor(f):Math.ceil(f),m=this.pMatrix.props,v=this.rMatrix.props,g=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y=0,_,x;if(f>0){for(;y<p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,d,!1),y+=d)}else if(f<0){for(;y>p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),y-=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-d,!0),y-=d)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,a=this._currentCopies;a;){if(x=(n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==y){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),_=0;_<x;_+=1)n[_]=this.matrix.props[_];this.matrix.reset()}else for(this.matrix.reset(),_=0;_<x;_+=1)n[_]=this.matrix.props[_];y+=1,a-=1,r+=i}}else for(a=this._currentCopies,r=0,i=1;a;)n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,a-=1,r+=i;return o},Ee.prototype.addShape=function(){},h([be],Te),Te.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=Wt.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},Te.prototype.processPath=function(t,e){var n=Xt.newElement(),r;n.c=t.c;var i=t._length,a,o,s,l,u,c,h=0,f,d,p,m,v,g;for(r=0;r<i;r+=1)a=t.v[r],s=t.o[r],o=t.i[r],a[0]===s[0]&&a[1]===s[1]&&a[0]===o[0]&&a[1]===o[1]?0!==r&&r!==i-1||t.c?(l=0===r?t.v[i-1]:t.v[r-1],c=(u=Math.sqrt(Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2)))?Math.min(u/2,e)/u:0,f=v=a[0]+(l[0]-a[0])*c,d=g=a[1]-(a[1]-l[1])*c,p=f-(f-a[0])*R,m=d-(d-a[1])*R,n.setTripleAt(f,d,p,m,v,g,h),h+=1,l=r===i-1?t.v[0]:t.v[r+1],c=(u=Math.sqrt(Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2)))?Math.min(u/2,e)/u:0,f=p=a[0]+(l[0]-a[0])*c,d=m=a[1]+(l[1]-a[1])*c,v=f-(f-a[0])*R,g=d-(d-a[1])*R,n.setTripleAt(f,d,p,m,v,g,h),h+=1):(n.setTripleAt(a[0],a[1],s[0],s[1],o[0],o[1],h),h+=1):(n.setTripleAt(t.v[r][0],t.v[r][1],t.o[r][0],t.o[r][1],t.i[r][0],t.i[r][1],h),h+=1);return n},Te.prototype.processShapes=function(t){var e,n,r=this.shapes.length,i,a,o=this.rd.v,s,l;if(0!==o)for(n=0;n<r;n+=1){if(l=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||t)for(l.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,a=s.shape.paths._length,i=0;i<a;i+=1)l.addShape(this.processPath(e[i],o));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},Ie.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},Ie.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},Ie.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},Ie.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},Ie.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(ke(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,n=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(n<0)return[];var r=Math.sqrt(n);return ke(r)?r>0&&r<1?[e]:[]:[e-r,e+r].filter((function(t){return t>0&&t<1}))},Ie.prototype.split=function(t){if(t<=0)return[Re(this.points[0]),this];if(t>=1)return[this,Re(this.points[this.points.length-1])];var e=Pe(this.points[0],this.points[1],t),n=Pe(this.points[1],this.points[2],t),r=Pe(this.points[2],this.points[3],t),i=Pe(e,n,t),a=Pe(n,r,t),o=Pe(i,a,t);return[new Ie(this.points[0],e,i,o,!0),new Ie(o,a,r,this.points[3],!0)]},Ie.prototype.bounds=function(){return{x:Ne(this,0),y:Ne(this,1)}},Ie.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},Ie.prototype.intersections=function(t,e,n){void 0===e&&(e=2),void 0===n&&(n=7);var r=[];return Ue(Oe(this,0,1),Oe(t,0,1),0,e,r,n),r},Ie.shapeSegment=function(t,e){var n=(e+1)%t.length();return new Ie(t.v[e],t.o[e],t.i[n],t.v[n],!0)},Ie.shapeSegmentInverted=function(t,e){var n=(e+1)%t.length();return new Ie(t.v[n],t.i[n],t.o[e],t.v[e],!0)},h([be],Ze),Ze.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=Wt.getProp(t,e.s,0,null,this),this.frequency=Wt.getProp(t,e.r,0,null,this),this.pointsType=Wt.getProp(t,e.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},Ze.prototype.processPath=function(t,e,n,r){var i=t._length,a=Xt.newElement();if(a.c=t.c,t.c||(i-=1),0===i)return a;var o=-1,s=Ie.shapeSegment(t,0);Ye(a,t,0,e,n,r,o);for(var l=0;l<i;l+=1)o=Ke(a,s,e,n,r,-o),s=l!==i-1||t.c?Ie.shapeSegment(t,(l+1)%i):null,Ye(a,t,l+1,e,n,r,o);return a},Ze.prototype.processShapes=function(t){var e,n,r=this.shapes.length,i,a,o=this.amplitude.v,s=Math.max(0,Math.round(this.frequency.v)),l=this.pointsType.v,u,c;if(0!==o)for(n=0;n<r;n+=1){if(c=(u=this.shapes[n]).localShapeCollection,u.shape._mdf||this._mdf||t)for(c.releaseShapes(),u.shape._mdf=!0,e=u.shape.paths.shapes,a=u.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(e[i],o,s,l));u.shape.paths=u.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},h([be],an),an.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=Wt.getProp(t,e.a,0,null,this),this.miterLimit=Wt.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=0!==this.amount.effectsSequence.length},an.prototype.processPath=function(t,e,n,r){var i=Xt.newElement();i.c=t.c;var a=t.length(),o,s,l;t.c||(a-=1);var u=[];for(o=0;o<a;o+=1)l=Ie.shapeSegment(t,o),u.push(rn(l,e));if(!t.c)for(o=a-1;o>=0;o-=1)l=Ie.shapeSegmentInverted(t,o),u.push(rn(l,e));u=nn(u);var c=null,h=null;for(o=0;o<u.length;o+=1){var f=u[o];for(h&&(c=$e(i,h,f[0],n,r)),h=f[f.length-1],s=0;s<f.length;s+=1)l=f[s],c&&We(l.points[0],c)?i.setXYAt(l.points[1][0],l.points[1][1],"o",i.length()-1):i.setTripleAt(l.points[0][0],l.points[0][1],l.points[1][0],l.points[1][1],l.points[0][0],l.points[0][1],i.length()),i.setTripleAt(l.points[3][0],l.points[3][1],l.points[3][0],l.points[3][1],l.points[2][0],l.points[2][1],i.length()),c=l.points[3]}return u.length&&$e(i,h,u[0][0],n,r),i},an.prototype.processShapes=function(t){var e,n,r=this.shapes.length,i,a,o=this.amount.v,s=this.miterLimit.v,l=this.lineJoin,u,c;if(0!==o)for(n=0;n<r;n+=1){if(c=(u=this.shapes[n]).localShapeCollection,u.shape._mdf||this._mdf||t)for(c.releaseShapes(),u.shape._mdf=!0,e=u.shape.paths.shapes,a=u.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(e[i],o,l,s));u.shape.paths=u.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var sn=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var r=127988,i=917631,a=917601,o=917626,s=65039,l=8205,u=127462,h=127487,f=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function d(t){var e=t.split(","),n,r=e.length,i=[];for(n=0;n<r;n+=1)"sans-serif"!==e[n]&&"monospace"!==e[n]&&i.push(e[n]);return i.join(",")}function p(t,e){var n=c("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=e;var r=c("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=d(t)+", "+e,{node:r,w:i,parent:n}}function m(){var e,n=this.fonts.length,r,i,a=n;for(e=0;e<n;e+=1)this.fonts[e].loaded?a-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(r=this.fonts[e].monoCase.node,i=this.fonts[e].monoCase.w,r.offsetWidth!==i?(a-=1,this.fonts[e].loaded=!0):(r=this.fonts[e].sansCase.node,i=this.fonts[e].sansCase.w,r.offsetWidth!==i&&(a-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==a&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function v(t,e){var n=document.body&&e?"svg":"canvas",r,i=on(t);if("svg"===n){var a=ut("text");a.style.fontSize="100px",a.setAttribute("font-family",t.fFamily),a.setAttribute("font-style",i.style),a.setAttribute("font-weight",i.weight),a.textContent="1",t.fClass?(a.style.fontFamily="inherit",a.setAttribute("class",t.fClass)):a.style.fontFamily=t.fFamily,e.appendChild(a),r=a}else{var o=new OffscreenCanvas(500,500).getContext("2d");o.font=i.style+" "+i.weight+" 100px "+t.fFamily,r=o}function s(t){return"svg"===n?(r.textContent=t,r.getComputedTextLength()):r.measureText(t).width}return{measureText:s}}function g(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach((function(t){t.helper=v(t),t.cache={}})),void(this.fonts=t.list);var n=t.list,r,i=n.length,a=i;for(r=0;r<i;r+=1){var o=!0,s,l;if(n[r].loaded=!1,n[r].monoCase=p(n[r].fFamily,"monospace"),n[r].sansCase=p(n[r].fFamily,"sans-serif"),n[r].fPath){if("p"===n[r].fOrigin||3===n[r].origin){if((s=document.querySelectorAll('style[f-forigin="p"][f-family="'+n[r].fFamily+'"], style[f-origin="3"][f-family="'+n[r].fFamily+'"]')).length>0&&(o=!1),o){var u=c("style");u.setAttribute("f-forigin",n[r].fOrigin),u.setAttribute("f-origin",n[r].origin),u.setAttribute("f-family",n[r].fFamily),u.type="text/css",u.innerText="@font-face {font-family: "+n[r].fFamily+"; font-style: normal; src: url('"+n[r].fPath+"');}",e.appendChild(u)}}else if("g"===n[r].fOrigin||1===n[r].origin){for(s=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<s.length;l+=1)-1!==s[l].href.indexOf(n[r].fPath)&&(o=!1);if(o){var h=c("link");h.setAttribute("f-forigin",n[r].fOrigin),h.setAttribute("f-origin",n[r].origin),h.type="text/css",h.rel="stylesheet",h.href=n[r].fPath,document.body.appendChild(h)}}else if("t"===n[r].fOrigin||2===n[r].origin){for(s=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<s.length;l+=1)n[r].fPath===s[l].src&&(o=!1);if(o){var f=c("link");f.setAttribute("f-forigin",n[r].fOrigin),f.setAttribute("f-origin",n[r].origin),f.setAttribute("rel","stylesheet"),f.setAttribute("href",n[r].fPath),e.appendChild(f)}}}else n[r].loaded=!0,a-=1;n[r].helper=v(n[r],e),n[r].cache={},this.fonts.push(n[r])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0}function y(t){if(t){var e;this.chars||(this.chars=[]);var n=t.length,r,i=this.chars.length,a;for(e=0;e<n;e+=1){for(r=0,a=!1;r<i;)this.chars[r].style===t[e].style&&this.chars[r].fFamily===t[e].fFamily&&this.chars[r].ch===t[e].ch&&(a=!0),r+=1;a||(this.chars.push(t[e]),i+=1)}}}function _(t,n,r){for(var i=0,a=this.chars.length;i<a;){if(this.chars[i].ch===t&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,r)),e}function x(t,e,n){var r=this.getFontByName(e),i=t;if(!r.cache[i]){var a=r.helper;if(" "===t){var o=a.measureText("|"+t+"|"),s=a.measureText("||");r.cache[i]=(o-s)/100}else r.cache[i]=a.measureText(t)/100}return r.cache[i]*n}function b(t){for(var e=0,n=this.fonts.length;e<n;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]}function w(t){var e=0,n=t.charCodeAt(0);if(n>=55296&&n<=56319){var r=t.charCodeAt(1);r>=56320&&r<=57343&&(e=1024*(n-55296)+r-56320+65536)}return e}function M(t,e){var n=t.toString(16)+e.toString(16);return-1!==f.indexOf(n)}function S(t){return t===l}function E(t){return t===s}function T(t){var e=w(t);return e>=u&&e<=h}function C(t){return T(t.substr(0,2))&&T(t.substr(2,2))}function k(t){return-1!==n.indexOf(t)}function A(t,e){var n=w(t.substr(e,2));if(n!==r)return!1;var s=0;for(e+=2;s<5;){if((n=w(t.substr(e,2)))<a||n>o)return!1;s+=1,e+=2}return w(t.substr(e,2))===i}function P(){this.isLoaded=!0}var L=function t(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)},D;return L.isModifier=M,L.isZeroWidthJoiner=S,L.isFlagEmoji=C,L.isRegionalCode=T,L.isCombinedCharacter=k,L.isRegionalFlag=A,L.isVariationSelector=E,L.BLACK_FLAG_CODE_POINT=r,L.prototype={addChars:y,addFonts:g,getCharData:_,getFontByName:b,measureText:x,checkLoadedFonts:m,setIsLoaded:P},L}();function ln(t){this.animationData=t}function un(t){return new ln(t)}function cn(){}ln.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t},cn.prototype={initRenderable:function t(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function t(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function t(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function t(e){this.checkLayerLimits(e)},checkTransparency:function t(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function t(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function t(){var e,n=this.renderableComponents.length;for(e=0;e<n;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function t(){return{top:0,left:0,width:100,height:100}},getLayerSize:function t(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var hn=(fn={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return fn[t]||""}),fn;function dn(t,e,n){this.p=Wt.getProp(e,t.v,0,0,n)}function pn(t,e,n){this.p=Wt.getProp(e,t.v,0,0,n)}function mn(t,e,n){this.p=Wt.getProp(e,t.v,1,0,n)}function vn(t,e,n){this.p=Wt.getProp(e,t.v,1,0,n)}function gn(t,e,n){this.p=Wt.getProp(e,t.v,0,0,n)}function yn(t,e,n){this.p=Wt.getProp(e,t.v,0,0,n)}function _n(t,e,n){this.p=Wt.getProp(e,t.v,0,0,n)}function xn(){this.p={}}function bn(t,e){var n=t.ef||[],r;this.effectElements=[];var i=n.length,a;for(r=0;r<i;r+=1)a=new wn(n[r],e),this.effectElements.push(a)}function wn(t,e){this.init(t,e)}function Mn(){}function Sn(){}function En(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,n)}function Tn(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,n),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?Wt.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=Wt.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}function Cn(){}h([Zt],wn),wn.prototype.getValue=wn.prototype.iterateDynamicProperties,wn.prototype.init=function(t,e){var n;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r=this.data.ef.length,i,a=this.data.ef;for(n=0;n<r;n+=1){switch(i=null,a[n].ty){case 0:i=new dn(a[n],e,this);break;case 1:i=new pn(a[n],e,this);break;case 2:i=new mn(a[n],e,this);break;case 3:i=new vn(a[n],e,this);break;case 4:case 7:i=new _n(a[n],e,this);break;case 10:i=new gn(a[n],e,this);break;case 11:i=new yn(a[n],e,this);break;case 5:i=new bn(a[n],e,this);break;default:i=new xn(a[n],e,this)}i&&this.effectElements.push(i)}},Mn.prototype={checkMasks:function t(){if(!this.data.hasMask)return!1;for(var e=0,n=this.data.masksProperties.length;e<n;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function t(){var e=it();if(e){var n=e("layer"),r=e("effects"),i=e("shape"),a=e("text"),o=e("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var s=r.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(s),0===this.data.ty||this.data.xt?this.compInterface=o(this):4===this.data.ty?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function t(){var e=hn(this.data.bm),n;(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function t(e,n,r){this.globalData=n,this.comp=r,this.data=e,this.layerId=Z(),this.data.sr||(this.data.sr=1),this.effectsManager=new bn(this.data,this,this.dynamicProperties)},getType:function t(){return this.type},sourceRectAtTime:function t(){}},Sn.prototype={initFrame:function t(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function t(e,n){var r,i=this.dynamicProperties.length;for(r=0;r<i;r+=1)(n||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function t(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},En.prototype.prepareFrame=function(){},h([cn,Mn,Sn],En),En.prototype.getBaseElement=function(){return null},En.prototype.renderFrame=function(){},En.prototype.destroy=function(){},En.prototype.initExpressions=function(){var t=it();if(t){var e=t("footage");this.layerInterface=e(this)}},En.prototype.getFootageData=function(){return this.footageData},Tn.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},h([cn,Mn,Sn],Tn),Tn.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},Tn.prototype.show=function(){},Tn.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},Tn.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},Tn.prototype.resume=function(){this._canPlay=!0},Tn.prototype.setRate=function(t){this.audio.rate(t)},Tn.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},Tn.prototype.getBaseElement=function(){return null},Tn.prototype.destroy=function(){},Tn.prototype.sourceRectAtTime=function(){},Tn.prototype.initExpressions=function(){},Cn.prototype.checkLayers=function(t){var e,n=this.layers.length,r;for(this.completeLayers=!0,e=n-1;e>=0;e-=1)this.elements[e]||(r=this.layers[e]).ip-r.st<=t-this.layers[e].st&&r.op-r.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},Cn.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},Cn.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},Cn.prototype.createAudio=function(t){return new Tn(t,this.globalData,this)},Cn.prototype.createFootage=function(t){return new En(t,this.globalData,this)},Cn.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},Cn.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var n=t.length,r,i=this.layers.length;for(e=0;e<n;e+=1)for(r=0;r<i;){if(this.layers[r].id===t[e].id){this.layers[r]=t[e];break}r+=1}},Cn.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},Cn.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},Cn.prototype.buildElementParenting=function(t,e,n){for(var r=this.elements,i=this.layers,a=0,o=i.length;a<o;)i[a].ind==e&&(r[a]&&!0!==r[a]?(n.push(r[a]),r[a].setAsParent(),void 0!==i[a].parent?this.buildElementParenting(t,i[a].parent,n):t.setHierarchy(n)):(this.buildItem(a),this.addPendingElement(t))),a+=1},Cn.prototype.addPendingElement=function(t){this.pendingElements.push(t)},Cn.prototype.searchExtraCompositions=function(t){var e,n=t.length;for(e=0;e<n;e+=1)if(t[e].xt){var r=this.createComp(t[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},Cn.prototype.getElementById=function(t){var e,n=this.elements.length;for(e=0;e<n;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},Cn.prototype.getElementByPath=function(t){var e=t.shift(),n;if("number"==typeof e)n=this.elements[e];else{var r,i=this.elements.length;for(r=0;r<i;r+=1)if(this.elements[r].data.nm===e){n=this.elements[r];break}}return 0===t.length?n:n.getElementByPath(t)},Cn.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new sn,this.globalData.slotManager=un(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var kn="transformEFfect";function An(){}function Pn(t,e,n){this.data=t,this.element=e,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r=this.globalData.defs,i,a=this.masksProperties?this.masksProperties.length:0,o;this.viewData=v(a),this.solidPath="";var s=this.masksProperties,l=0,c=[],h,f,d=Z(),p,m,g,y,_="clipPath",x="clip-path";for(i=0;i<a;i+=1)if(("a"!==s[i].mode&&"n"!==s[i].mode||s[i].inv||100!==s[i].o.k||s[i].o.x)&&(_="mask",x="mask"),"s"!==s[i].mode&&"i"!==s[i].mode||0!==l?p=null:((p=ut("rect")).setAttribute("fill","#ffffff"),p.setAttribute("width",this.element.comp.data.w||0),p.setAttribute("height",this.element.comp.data.h||0),c.push(p)),o=ut("path"),"n"===s[i].mode)this.viewData[i]={op:Wt.getProp(this.element,s[i].o,0,.01,this.element),prop:Jt.getShapeProp(this.element,s[i],3),elem:o,lastPath:""},r.appendChild(o);else{var b;if(l+=1,o.setAttribute("fill","s"===s[i].mode?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero"),0!==s[i].x.k?(_="mask",x="mask",y=Wt.getProp(this.element,s[i].x,0,null,this.element),b=Z(),(m=ut("filter")).setAttribute("id",b),(g=ut("feMorphology")).setAttribute("operator","erode"),g.setAttribute("in","SourceGraphic"),g.setAttribute("radius","0"),m.appendChild(g),r.appendChild(m),o.setAttribute("stroke","s"===s[i].mode?"#000000":"#ffffff")):(g=null,y=null),this.storedData[i]={elem:o,x:y,expan:g,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===s[i].mode){f=c.length;var w=ut("g");for(h=0;h<f;h+=1)w.appendChild(c[h]);var M=ut("mask");M.setAttribute("mask-type","alpha"),M.setAttribute("id",d+"_"+l),M.appendChild(o),r.appendChild(M),w.setAttribute("mask","url("+u()+"#"+d+"_"+l+")"),c.length=0,c.push(w)}else c.push(o);s[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:o,lastPath:"",op:Wt.getProp(this.element,s[i].o,0,.01,this.element),prop:Jt.getShapeProp(this.element,s[i],3),invRect:p},this.viewData[i].prop.k||this.drawPath(s[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=ut(_),a=c.length,i=0;i<a;i+=1)this.maskElement.appendChild(c[i]);l>0&&(this.maskElement.setAttribute("id",d),this.element.maskedElement.setAttribute(x,"url("+u()+"#"+d+")"),r.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}An.prototype={initTransform:function t(){var e=new Qt;this.finalTransform={mProp:this.data.ks?Se.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function t(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,n=this.finalTransform.mat,r=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<i;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,n.cloneFromProps(e),r=0;r<i;r+=1)n.multiply(this.hierarchy[r].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function t(){if(this.localTransforms){var e=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<n;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var r=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(r),e=1;e<n;e+=1){var i=this.localTransforms[e].matrix;r.multiply(i)}r.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(e=0;e<n;e+=1)a*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function t(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(kn);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Qt;var n=0,r=e.length;for(n=0;n<r;n+=1)this.localTransforms.push(e[n])}}},globalToLocal:function t(e){var n=[];n.push(this.finalTransform);for(var r=!0,i=this.comp,a;r;)i.finalTransform?(i.data.hasMask&&n.splice(0,0,i.finalTransform),i=i.comp):r=!1;var o=n.length,s;for(a=0;a<o;a+=1)s=n[a].mat.applyToPointArray(0,0,0),e=[e[0]-s[0],e[1]-s[1],0];return e},mHelper:new Qt},Pn.prototype.getMaskProperty=function(t){return this.viewData[t].prop},Pn.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,n,r=this.masksProperties.length;for(n=0;n<r;n+=1)if((this.viewData[n].prop._mdf||t)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||t)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),"n"!==this.masksProperties[n].mode&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[n].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||t))){var i=this.storedData[n].expan;this.storedData[n].x.v<0?("erode"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+u()+"#"+this.storedData[n].filterId+")")),i.setAttribute("radius",-this.storedData[n].x.v)):("dilate"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",2*this.storedData[n].x.v))}},Pn.prototype.getMaskelement=function(){return this.maskElement},Pn.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},Pn.prototype.drawPath=function(t,e,n){var r=" M"+e.v[0][0]+","+e.v[0][1],i,a;for(a=e._length,i=1;i<a;i+=1)r+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[i][0]+","+e.i[i][1]+" "+e.v[i][0]+","+e.v[i][1];if(e.c&&a>1&&(r+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==r){var o="";n.elem&&(e.c&&(o=t.inv?this.solidPath+r:r),n.elem.setAttribute("d",o)),n.lastPath=r}},Pn.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var Ln=function(){var t={};function e(t,e){var n=ut("filter");return n.setAttribute("id",t),!0!==e&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n}function n(){var t=ut("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}return t.createFilter=e,t.createAlphaToLuminanceFilter=n,t}(),Dn=(Rn={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas},(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(Rn.maskType=!1),/firefox/i.test(navigator.userAgent)&&(Rn.svgLumaHidden=!1),Rn),Rn,In={},Nn="filter_result_",On;function Fn(t){var e,n="SourceGraphic",r=t.data.ef?t.data.ef.length:0,i=Z(),a=Ln.createFilter(i,!0),o=0,s;for(this.filters=[],e=0;e<r;e+=1){s=null;var l=t.data.ef[e].ty,c;In[l]&&(s=new(0,In[l].effect)(a,t.effectsManager.effectElements[e],t,Nn+o,n),n=Nn+o,In[l].countsAsEffect&&(o+=1)),s&&this.filters.push(s)}o&&(t.globalData.defs.appendChild(a),t.layerElement.setAttribute("filter","url("+u()+"#"+i+")")),this.filters.length&&t.addRenderableComponent(this)}function zn(t,e,n){In[t]={effect:e,countsAsEffect:n}}function Un(){}function Vn(){}function Bn(){}function Hn(t,e,n){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function Gn(t,e){this.elem=t,this.pos=e}function Wn(){}Fn.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)},Fn.prototype.getEffects=function(t){var e,n=this.filters.length,r=[];for(e=0;e<n;e+=1)this.filters[e].type===t&&r.push(this.filters[e]);return r},Un.prototype={initRendererElement:function t(){this.layerElement=ut("g")},createContainerElements:function t(){this.matteElement=ut("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var n=ut("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),e=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var r=ut("clipPath"),i=ut("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=Z();if(r.setAttribute("id",a),r.appendChild(i),this.globalData.defs.appendChild(r),this.checkMasks()){var o=ut("g");o.setAttribute("clip-path","url("+u()+"#"+a+")"),o.appendChild(this.layerElement),this.transformedElement=o,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+u()+"#"+a+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function t(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function t(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function t(){return this.data.hd?null:this.baseElement},createRenderableComponents:function t(){this.maskManager=new Pn(this.data,this,this.globalData),this.renderableEffectsManager=new Fn(this),this.searchEffectTransforms()},getMatte:function t(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var n=this.layerId+"_"+e,r,i,a,o;if(1===e||3===e){var s=ut("mask");s.setAttribute("id",n),s.setAttribute("mask-type",3===e?"luminance":"alpha"),(a=ut("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),s.appendChild(a),this.globalData.defs.appendChild(s),Dn.maskType||1!==e||(s.setAttribute("mask-type","luminance"),r=Z(),i=Ln.createFilter(r),this.globalData.defs.appendChild(i),i.appendChild(Ln.createAlphaToLuminanceFilter()),(o=ut("g")).appendChild(a),s.appendChild(o),o.setAttribute("filter","url("+u()+"#"+r+")"))}else if(2===e){var l=ut("mask");l.setAttribute("id",n),l.setAttribute("mask-type","alpha");var c=ut("g");l.appendChild(c),r=Z(),i=Ln.createFilter(r);var h=ut("feComponentTransfer");h.setAttribute("in","SourceGraphic"),i.appendChild(h);var f=ut("feFuncA");f.setAttribute("type","table"),f.setAttribute("tableValues","1.0 0.0"),h.appendChild(f),this.globalData.defs.appendChild(i);var d=ut("rect");d.setAttribute("width",this.comp.data.w),d.setAttribute("height",this.comp.data.h),d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("fill","#ffffff"),d.setAttribute("opacity","0"),c.setAttribute("filter","url("+u()+"#"+r+")"),c.appendChild(d),(a=ut("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(a),Dn.maskType||(l.setAttribute("mask-type","luminance"),i.appendChild(Ln.createAlphaToLuminanceFilter()),o=ut("g"),c.appendChild(d),o.appendChild(this.layerElement),c.appendChild(o)),this.globalData.defs.appendChild(l)}this.matteMasks[e]=n}return this.matteMasks[e]},setMatte:function t(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+u()+"#"+e+")")}},Vn.prototype={initHierarchy:function t(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function t(e){this.hierarchy=e},setAsParent:function t(){this._isParent=!0},checkParenting:function t(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},h([cn,d({initElement:function t(e,n,r){this.initFrame(),this.initBaseData(e,n,r),this.initTransform(e,n,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function t(){var e;this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function t(){var e;this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function t(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function t(){},prepareFrame:function t(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function t(){this.innerElem=null,this.destroyBaseElement()}})],Bn),h([Mn,An,Un,Vn,Sn,Bn],Hn),Hn.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=ut("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},Hn.prototype.sourceRectAtTime=function(){return this.sourceRect},Wn.prototype={addShapeToModifiers:function t(e){var n,r=this.shapeModifiers.length;for(n=0;n<r;n+=1)this.shapeModifiers[n].addShape(e)},isShapeInAnimatedModifiers:function t(e){for(var n=0,r=this.shapeModifiers.length;0<r;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function t(){if(this.shapeModifiers.length){var e,n=this.shapes.length,r;for(e=0;e<n;e+=1)this.shapes[e].sh.reset();for(e=(n=this.shapeModifiers.length)-1;e>=0&&!(r=this.shapeModifiers[e].processShapes(this._isFirstFrame));e-=1);}},searchProcessedElement:function t(e){for(var n=this.processedElements,r=0,i=n.length;r<i;){if(n[r].elem===e)return n[r].pos;r+=1}return 0},addProcessedElement:function t(e,n){for(var r=this.processedElements,i=r.length;i;)if(r[i-=1].elem===e)return void(r[i].pos=n);r.push(new Gn(e,n))},prepareFrame:function t(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var Zn={1:"butt",2:"round",3:"square"},jn={1:"miter",2:"round",3:"bevel"};function qn(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var r=0,i=t.length;r<i;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function Xn(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=ut("path"),this.msElem=null}function Yn(t,e,n,r){var i;this.elem=t,this.frameId=-1,this.dataProps=v(e.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=m("float32",e.length?e.length-1:0),this.dashoffset=m("float32",1),this.initDynamicPropertyContainer(r);var a=e.length||0,o;for(i=0;i<a;i+=1)o=Wt.getProp(t,e[i].v,0,0,this),this.k=o.k||this.k,this.dataProps[i]={n:e[i].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function Kn(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=Wt.getProp(t,e.o,0,.01,this),this.w=Wt.getProp(t,e.w,0,null,this),this.d=new Yn(t,e.d||{},"svg",this),this.c=Wt.getProp(t,e.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function Jn(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=Wt.getProp(t,e.o,0,.01,this),this.c=Wt.getProp(t,e.c,1,255,this),this.style=n}function Qn(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=n}function $n(t,e,n){this.data=e,this.c=m("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=m("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=Wt.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function tr(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,n)}function er(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=Wt.getProp(t,e.w,0,null,this),this.d=new Yn(t,e.d||{},"svg",this),this.initGradientData(t,e,n),this._isAnimated=!!this._isAnimated}function nr(){this.it=[],this.prevViewData=[],this.gr=ut("g")}function rr(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}qn.prototype.setAsAnimated=function(){this._isAnimated=!0},Xn.prototype.reset=function(){this.d="",this._mdf=!1},Yn.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<n;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},h([Zt],Yn),h([Zt],Kn),h([Zt],Jn),h([Zt],Qn),$n.prototype.comparePoints=function(t,e){for(var n=0,r=this.o.length/2,i;n<r;){if((i=Math.abs(t[4*n]-t[4*e+2*n]))>.01)return!1;n+=1}return!0},$n.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},$n.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,n=4*this.data.p,r,i;for(e=0;e<n;e+=1)r=e%4==0?100:255,i=Math.round(this.prop.v[e]*r),this.c[e]!==i&&(this.c[e]=i,this._cmdf=!t);if(this.o.length)for(n=this.prop.v.length,e=4*this.data.p;e<n;e+=1)r=e%2==0?100:1,i=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==i&&(this.o[e-4*this.data.p]=i,this._omdf=!t);this._mdf=!t}},h([Zt],$n),tr.prototype.initGradientData=function(t,e,n){this.o=Wt.getProp(t,e.o,0,.01,this),this.s=Wt.getProp(t,e.s,1,null,this),this.e=Wt.getProp(t,e.e,1,null,this),this.h=Wt.getProp(t,e.h||{k:0},0,.01,this),this.a=Wt.getProp(t,e.a||{k:0},0,D,this),this.g=new $n(t,e.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,e),this.setGradientOpacity(e,n),this._isAnimated=!!this._isAnimated},tr.prototype.setGradientData=function(t,e){var n=Z(),r=ut(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i=[],a,o,s;for(s=4*e.g.p,o=0;o<s;o+=4)a=ut("stop"),r.appendChild(a),i.push(a);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+u()+"#"+n+")"),this.gf=r,this.cst=i},tr.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,a=ut("mask"),o=ut("path");a.appendChild(o);var s=Z(),l=Z();a.setAttribute("id",l);var c=ut(1===t.t?"linearGradient":"radialGradient");c.setAttribute("id",s),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var h=this.stops;for(r=4*t.g.p;r<i;r+=2)(n=ut("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),h.push(n);o.setAttribute("gf"===t.ty?"fill":"stroke","url("+u()+"#"+s+")"),"gs"===t.ty&&(o.setAttribute("stroke-linecap",Zn[t.lc||2]),o.setAttribute("stroke-linejoin",jn[t.lj||2]),1===t.lj&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=c,this.ms=a,this.ost=h,this.maskId=l,e.msElem=o}},h([Zt],tr),h([tr,Zt],er);var ir=function t(e,n,r,i){if(0===n)return"";var a=e.o,o=e.i,s=e.v,l,u=" M"+i.applyToPointStringified(s[0][0],s[0][1]);for(l=1;l<n;l+=1)u+=" C"+i.applyToPointStringified(a[l-1][0],a[l-1][1])+" "+i.applyToPointStringified(o[l][0],o[l][1])+" "+i.applyToPointStringified(s[l][0],s[l][1]);return r&&n&&(u+=" C"+i.applyToPointStringified(a[l-1][0],a[l-1][1])+" "+i.applyToPointStringified(o[0][0],o[0][1])+" "+i.applyToPointStringified(s[0][0],s[0][1]),u+="z"),u},ar=function(){var t=new Qt,e=new Qt,n;function r(t){switch(t.ty){case"fl":return s;case"gf":return u;case"gs":return l;case"st":return c;case"sh":case"el":case"rc":case"sr":return o;case"tr":return i;case"no":return a;default:return null}}function i(t,e,n){(n||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(n||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function a(){}function o(n,r,i){var a,o,s,l,u,c,h=r.styles.length,f=r.lvl,d,p,m,v;for(c=0;c<h;c+=1){if(l=r.sh._mdf||i,r.styles[c].lvl<f){for(p=e.reset(),m=f-r.styles[c].lvl,v=r.transformers.length-1;!l&&m>0;)l=r.transformers[v].mProps._mdf||l,m-=1,v-=1;if(l)for(m=f-r.styles[c].lvl,v=r.transformers.length-1;m>0;)p.multiply(r.transformers[v].mProps.v),m-=1,v-=1}else p=t;if(o=(d=r.sh.paths)._length,l){for(s="",a=0;a<o;a+=1)(u=d.shapes[a])&&u._length&&(s+=ir(u,u._length,u.c,p));r.caches[c]=s}else s=r.caches[c];r.styles[c].d+=!0===n.hd?"":s,r.styles[c]._mdf=l||r.styles[c]._mdf}}function s(t,e,n){var r=e.style;(e.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+T(e.c.v[0])+","+T(e.c.v[1])+","+T(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function l(t,e,n){u(t,e,n),c(t,e,n)}function u(t,e,n){var r=e.gf,i=e.g._hasOpacity,a=e.s.v,o=e.e.v,s,l,u,c,h;if(e.o._mdf||n){var f="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(f,e.o.v)}if(e.s._mdf||n){var d=1===t.t?"x1":"cx",p="x1"===d?"y1":"cy";r.setAttribute(d,a[0]),r.setAttribute(p,a[1]),i&&!e.g._collapsable&&(e.of.setAttribute(d,a[0]),e.of.setAttribute(p,a[1]))}if(e.g._cmdf||n){s=e.cst;var m=e.g.c;for(u=s.length,l=0;l<u;l+=1)(c=s[l]).setAttribute("offset",m[4*l]+"%"),c.setAttribute("stop-color","rgb("+m[4*l+1]+","+m[4*l+2]+","+m[4*l+3]+")")}if(i&&(e.g._omdf||n)){var v=e.g.o;for(u=(s=e.g._collapsable?e.cst:e.ost).length,l=0;l<u;l+=1)c=s[l],e.g._collapsable||c.setAttribute("offset",v[2*l]+"%"),c.setAttribute("stop-opacity",v[2*l+1])}if(1===t.t)(e.e._mdf||n)&&(r.setAttribute("x2",o[0]),r.setAttribute("y2",o[1]),i&&!e.g._collapsable&&(e.of.setAttribute("x2",o[0]),e.of.setAttribute("y2",o[1])));else if((e.s._mdf||e.e._mdf||n)&&(h=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)),r.setAttribute("r",h),i&&!e.g._collapsable&&e.of.setAttribute("r",h)),e.e._mdf||e.h._mdf||e.a._mdf||n){h||(h=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)));var g=Math.atan2(o[1]-a[1],o[0]-a[0]),y=e.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var _=h*y,x=Math.cos(g+e.a.v)*_+a[0],b=Math.sin(g+e.a.v)*_+a[1];r.setAttribute("fx",x),r.setAttribute("fy",b),i&&!e.g._collapsable&&(e.of.setAttribute("fx",x),e.of.setAttribute("fy",b))}}function c(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),e.c&&(e.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+T(e.c.v[0])+","+T(e.c.v[1])+","+T(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:r}}();function or(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,n),this.prevViewData=[]}function sr(t,e,n,r,i,a){this.o=t,this.sw=e,this.sc=n,this.fc=r,this.m=i,this.p=a,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!r,m:!0,p:!0}}function lr(t,e){this._frameId=a,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}h([Mn,An,Un,Wn,Vn,Sn,Bn],or),or.prototype.initSecondaryElement=function(){},or.prototype.identityMatrix=new Qt,or.prototype.buildExpressionInterface=function(){},or.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},or.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,n,r,i=this.stylesList.length,a,o=[],s=!1;for(r=0;r<i;r+=1){for(a=this.stylesList[r],s=!1,o.length=0,t=0;t<e;t+=1)-1!==(n=this.shapes[t]).styles.indexOf(a)&&(o.push(n),s=n._isAnimated||s);o.length>1&&s&&this.setShapesAsAnimated(o)}},or.prototype.setShapesAsAnimated=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].setAsAnimated()},or.prototype.createStyleElement=function(t,e){var n,r=new Xn(t,e),i=r.pElem;if("st"===t.ty)n=new Kn(this,t,r);else if("fl"===t.ty)n=new Jn(this,t,r);else if("gf"===t.ty||"gs"===t.ty){var a;n=new("gf"===t.ty?tr:er)(this,t,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+u()+"#"+n.maskId+")"))}else"no"===t.ty&&(n=new Qn(this,t,r));return"st"!==t.ty&&"gs"!==t.ty||(i.setAttribute("stroke-linecap",Zn[t.lc||2]),i.setAttribute("stroke-linejoin",jn[t.lj||2]),i.setAttribute("fill-opacity","0"),1===t.lj&&i.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),t.bm&&(i.style["mix-blend-mode"]=hn(t.bm)),this.stylesList.push(r),this.addToAnimatedContents(t,n),n},or.prototype.createGroupElement=function(t){var e=new nr;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=hn(t.bm)),e},or.prototype.createTransformElement=function(t,e){var n=Se.getTransformProperty(this,t,this),r=new rr(n,n.o,e);return this.addToAnimatedContents(t,r),r},or.prototype.createShapeElement=function(t,e,n){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);var i,a=new qn(e,n,Jt.getShapeProp(this,t,r,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(t,a),a},or.prototype.addToAnimatedContents=function(t,e){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===e)return;n+=1}this.animatedContents.push({fn:ar.createRenderFunction(t),element:e,data:t})},or.prototype.setElementStyles=function(t){var e=t.styles,n,r=this.stylesList.length;for(n=0;n<r;n+=1)this.stylesList[n].closed||e.push(this.stylesList[n])},or.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},or.prototype.searchShapes=function(t,e,n,r,i,a,o){var s=[].concat(a),l,u=t.length-1,c,h,f=[],d=[],p,m,v;for(l=u;l>=0;l-=1){if((v=this.searchProcessedElement(t[l]))?e[l]=n[v-1]:t[l]._render=o,"fl"===t[l].ty||"st"===t[l].ty||"gf"===t[l].ty||"gs"===t[l].ty||"no"===t[l].ty)v?e[l].style.closed=!1:e[l]=this.createStyleElement(t[l],i),t[l]._render&&e[l].style.pElem.parentNode!==r&&r.appendChild(e[l].style.pElem),f.push(e[l].style);else if("gr"===t[l].ty){if(v)for(h=e[l].it.length,c=0;c<h;c+=1)e[l].prevViewData[c]=e[l].it[c];else e[l]=this.createGroupElement(t[l]);this.searchShapes(t[l].it,e[l].it,e[l].prevViewData,e[l].gr,i+1,s,o),t[l]._render&&e[l].gr.parentNode!==r&&r.appendChild(e[l].gr)}else"tr"===t[l].ty?(v||(e[l]=this.createTransformElement(t[l],r)),p=e[l].transform,s.push(p)):"sh"===t[l].ty||"rc"===t[l].ty||"el"===t[l].ty||"sr"===t[l].ty?(v||(e[l]=this.createShapeElement(t[l],s,i)),this.setElementStyles(e[l])):"tm"===t[l].ty||"rd"===t[l].ty||"ms"===t[l].ty||"pb"===t[l].ty||"zz"===t[l].ty||"op"===t[l].ty?(v?(m=e[l]).closed=!1:((m=xe.getModifier(t[l].ty)).init(this,t[l]),e[l]=m,this.shapeModifiers.push(m)),d.push(m)):"rp"===t[l].ty&&(v?(m=e[l]).closed=!0:(m=xe.getModifier(t[l].ty),e[l]=m,m.init(this,t,l,e),this.shapeModifiers.push(m),o=!1),d.push(m));this.addProcessedElement(t[l],l+1)}for(u=f.length,l=0;l<u;l+=1)f[l].closed=!0;for(u=d.length,l=0;l<u;l+=1)d[l].closed=!0},or.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},or.prototype.renderShape=function(){var t,e=this.animatedContents.length,n;for(t=0;t<e;t+=1)n=this.animatedContents[t],(this._isFirstFrame||n.element._isAnimated)&&!0!==n.data&&n.fn(n.data,n.element,this._isFirstFrame)},or.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},sr.prototype.update=function(t,e,n,r,i,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,o=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,this._mdf.p=!0,o=!0),o},lr.prototype.defaultBoxWidth=[0,0],lr.prototype.copyData=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},lr.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},lr.prototype.searchProperty=function(){return this.searchKeyframes()},lr.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},lr.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},lr.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var i=this.effectsSequence.length,a=t||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)a=n!==this.keysIndex?this.effectsSequence[r](a,a.t):this.effectsSequence[r](this.currentData,a.t);e!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},lr.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,n=0,r=t.length;n<=r-1&&!(n===r-1||t[n+1].t>e);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},lr.prototype.buildFinalText=function(t){for(var e=[],n=0,r=t.length,i,a,o=!1,s=!1,l="";n<r;)o=s,s=!1,i=t.charCodeAt(n),l=t.charAt(n),sn.isCombinedCharacter(i)?o=!0:i>=55296&&i<=56319?sn.isRegionalFlag(t,n)?l=t.substr(n,14):(a=t.charCodeAt(n+1))>=56320&&a<=57343&&(sn.isModifier(i,a)?(l=t.substr(n,2),o=!0):l=sn.isFlagEmoji(t.substr(n,4))?t.substr(n,4):t.substr(n,2)):i>56319?(a=t.charCodeAt(n+1),sn.isVariationSelector(i)&&(o=!0)):sn.isZeroWidthJoiner(i)&&(o=!0,s=!0),o?(e[e.length-1]+=l,o=!1):e.push(l),n+=l.length;return e},lr.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,n=this.data,r=[],i,a,o,s=0,l,u=n.m.g,c=0,h=0,f=0,d=[],p=0,m=0,v,g,y=e.getFontByName(t.f),_,x=0,b=on(y);t.fWeight=b.weight,t.fStyle=b.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),a=t.finalText.length,t.finalLineHeight=t.lh;var w=t.tr/1e3*t.finalSize,M;if(t.sz)for(var S=!0,E=t.sz[0],T=t.sz[1],C,k;S;){C=0,p=0,a=(k=this.buildFinalText(t.t)).length,w=t.tr/1e3*t.finalSize;var A=-1;for(i=0;i<a;i+=1)M=k[i].charCodeAt(0),o=!1," "===k[i]?A=i:13!==M&&3!==M||(p=0,o=!0,C+=t.finalLineHeight||1.2*t.finalSize),e.chars?(_=e.getCharData(k[i],y.fStyle,y.fFamily),x=o?0:_.w*t.finalSize/100):x=e.measureText(k[i],t.f,t.finalSize),p+x>E&&" "!==k[i]?(-1===A?a+=1:i=A,C+=t.finalLineHeight||1.2*t.finalSize,k.splice(i,A===i?1:0,"\r"),A=-1,p=0):(p+=x,p+=w);C+=y.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&T<C?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=k,a=t.finalText.length,S=!1)}p=-w,x=0;var P=0,L;for(i=0;i<a;i+=1)if(o=!1,13===(M=(L=t.finalText[i]).charCodeAt(0))||3===M?(P=0,d.push(p),m=p>m?p:m,p=-2*w,l="",o=!0,f+=1):l=L,e.chars?(_=e.getCharData(L,y.fStyle,e.getFontByName(t.f).fFamily),x=o?0:_.w*t.finalSize/100):x=e.measureText(l,t.f,t.finalSize)," "===L?P+=x+w:(p+=x+w+P,P=0),r.push({l:x,an:x,add:c,n:o,anIndexes:[],val:l,line:f,animatorJustifyOffset:0}),2==u){if(c+=x,""===l||" "===l||i===a-1){for(""!==l&&" "!==l||(c-=x);h<=i;)r[h].an=c,r[h].ind=s,r[h].extra=x,h+=1;s+=1,c=0}}else if(3==u){if(c+=x,""===l||i===a-1){for(""===l&&(c-=x);h<=i;)r[h].an=c,r[h].ind=s,r[h].extra=x,h+=1;c=0,s+=1}}else r[s].ind=s,r[s].extra=0,s+=1;if(t.l=r,m=p>m?p:m,d.push(p),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=m,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=d;var D=n.a,R,I,N,O;g=D.length;var F=[];for(v=0;v<g;v+=1){for((R=D[v]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),O=0,N=R.s.b,i=0;i<a;i+=1)(I=r[i]).anIndexes[v]=O,(1==N&&""!==I.val||2==N&&""!==I.val&&" "!==I.val||3==N&&(I.n||" "==I.val||i==a-1)||4==N&&(I.n||i==a-1))&&(1===R.s.rn&&F.push(O),O+=1);n.a[v].s.totalChars=O;var z=-1,U;if(1===R.s.rn)for(i=0;i<a;i+=1)z!=(I=r[i]).anIndexes[v]&&(z=I.anIndexes[v],U=F.splice(Math.floor(Math.random()*F.length),1)[0]),I.anIndexes[v]=U}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=y.ascent*t.finalSize/100},lr.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var n=this.copyData({},this.data.d.k[e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.setCurrentData(n),this.elem.addDynamicProperty(this)},lr.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},lr.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},lr.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var ur=function(){var t=Math.max,e=Math.min,n=Math.floor;function r(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=Wt.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?Wt.getProp(t,e.e,0,0,this):{v:100},this.o=Wt.getProp(t,e.o||{k:0},0,0,this),this.xe=Wt.getProp(t,e.xe||{k:0},0,0,this),this.ne=Wt.getProp(t,e.ne||{k:0},0,0,this),this.sm=Wt.getProp(t,e.sm||{k:100},0,0,this),this.a=Wt.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}function i(t,e,n){return new r(t,e,n)}return r.prototype={getMult:function r(i){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,o=0,s=1,l=1;this.ne.v>0?a=this.ne.v/100:o=-this.ne.v/100,this.xe.v>0?s=1-this.xe.v/100:l=1+this.xe.v/100;var u=Mt.getBezierEasing(a,o,s,l).get,c=0,h=this.finalS,f=this.finalE,d=this.data.sh;if(2===d)c=u(c=f===h?i>=f?1:0:t(0,e(.5/(f-h)+(i-h)/(f-h),1)));else if(3===d)c=u(c=f===h?i>=f?0:1:1-t(0,e(.5/(f-h)+(i-h)/(f-h),1)));else if(4===d)f===h?c=0:(c=t(0,e(.5/(f-h)+(i-h)/(f-h),1)))<.5?c*=2:c=1-2*(c-.5),c=u(c);else if(5===d){if(f===h)c=0;else{var p=f-h,m=-p/2+(i=e(t(0,i+.5-h),f-h)),v=p/2;c=Math.sqrt(1-m*m/(v*v))}c=u(c)}else 6===d?(f===h?c=0:(i=e(t(0,i+.5-h),f-h),c=(1+Math.cos(Math.PI+2*Math.PI*i/(f-h)))/2),c=u(c)):(i>=n(h)&&(c=t(0,e(i-h<0?e(f,1)-(h-i):f-i,1))),c=u(c));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var y=.5-.5*g;c<y?c=0:(c=(c-y)/g)>1&&(c=1)}return c*this.a.v},getValue:function t(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var n=2===this.data.r?1:100/this.data.totalChars,r=this.o.v/n,i=this.s.v/n+r,a=this.e.v/n+r;if(i>a){var o=i;i=a,a=o}this.finalS=i,this.finalE=a}},h([Zt],r),{getTextSelectorProp:i}}();function cr(t,e,n){var r={propType:!1},i=Wt.getProp,a=e.a;this.a={r:a.r?i(t,a.r,0,D,n):r,rx:a.rx?i(t,a.rx,0,D,n):r,ry:a.ry?i(t,a.ry,0,D,n):r,sk:a.sk?i(t,a.sk,0,D,n):r,sa:a.sa?i(t,a.sa,0,D,n):r,s:a.s?i(t,a.s,1,.01,n):r,a:a.a?i(t,a.a,1,0,n):r,o:a.o?i(t,a.o,0,.01,n):r,p:a.p?i(t,a.p,1,0,n):r,sw:a.sw?i(t,a.sw,0,0,n):r,sc:a.sc?i(t,a.sc,1,0,n):r,fc:a.fc?i(t,a.fc,1,0,n):r,fh:a.fh?i(t,a.fh,0,0,n):r,fs:a.fs?i(t,a.fs,0,.01,n):r,fb:a.fb?i(t,a.fb,0,.01,n):r,t:a.t?i(t,a.t,0,0,n):r},this.s=ur.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function hr(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=v(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function fr(){}hr.prototype.searchProperties=function(){var t,e=this._textData.a.length,n,r=Wt.getProp;for(t=0;t<e;t+=1)n=this._textData.a[t],this._animatorsData[t]=new cr(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},hr.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,r=this._animatorsData,i=this._textData,a=this.mHelper,o=this._renderType,s=this.renderedLetters.length,l,u,c,h,f=t.l,d,p,m,v,g,y,_,x,b,w,M,S,E,T,C;if(this._hasMaskedPath){if(C=this._pathData.m,!this._pathData.n||this._pathData._mdf){var k=C.v,A;for(this._pathData.r.v&&(k=k.reverse()),d={tLength:0,segments:[]},h=k._length-1,S=0,c=0;c<h;c+=1)A=At.buildBezierData(k.v[c],k.v[c+1],[k.o[c][0]-k.v[c][0],k.o[c][1]-k.v[c][1]],[k.i[c+1][0]-k.v[c+1][0],k.i[c+1][1]-k.v[c+1][1]]),d.tLength+=A.segmentLength,d.segments.push(A),S+=A.segmentLength;c=h,C.v.c&&(A=At.buildBezierData(k.v[c],k.v[0],[k.o[c][0]-k.v[c][0],k.o[c][1]-k.v[c][1]],[k.i[0][0]-k.v[0][0],k.i[0][1]-k.v[0][1]]),d.tLength+=A.segmentLength,d.segments.push(A),S+=A.segmentLength),this._pathData.pi=d}if(d=this._pathData.pi,p=this._pathData.f.v,_=0,y=1,v=0,g=!0,w=d.segments,p<0&&C.v.c)for(d.tLength<Math.abs(p)&&(p=-Math.abs(p)%d.tLength),y=(b=w[_=w.length-1].points).length-1;p<0;)p+=b[y].partialLength,(y-=1)<0&&(y=(b=w[_-=1].points).length-1);x=(b=w[_].points)[y-1],M=(m=b[y]).partialLength}h=f.length,l=0,u=0;var P=1.2*t.finalSize*.714,L=!0,D,R,I,N,O,F;N=r.length;var z=-1,U,V,B,H=p,G=_,W=y,Z=-1,j,q,X,Q,$,tt,et,nt,rt="",it=this.defaultPropsArray,at;if(2===t.j||1===t.j){var ot=0,st=0,lt=2===t.j?-.5:-1,ut=0,ct=!0;for(c=0;c<h;c+=1)if(f[c].n){for(ot&&(ot+=st);ut<c;)f[ut].animatorJustifyOffset=ot,ut+=1;ot=0,ct=!0}else{for(I=0;I<N;I+=1)(D=r[I].a).t.propType&&(ct&&2===t.j&&(st+=D.t.v*lt),(F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars)).length?ot+=D.t.v*F[0]*lt:ot+=D.t.v*F*lt);ct=!1}for(ot&&(ot+=st);ut<c;)f[ut].animatorJustifyOffset=ot,ut+=1}for(c=0;c<h;c+=1){if(a.reset(),j=1,f[c].n)l=0,u+=t.yOffset,u+=L?1:0,p=H,L=!1,this._hasMaskedPath&&(y=W,x=(b=w[_=G].points)[y-1],M=(m=b[y]).partialLength,v=0),rt="",nt="",tt="",at="",it=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==f[c].line){switch(t.j){case 1:p+=S-t.lineWidths[f[c].line];break;case 2:p+=(S-t.lineWidths[f[c].line])/2}Z=f[c].line}z!==f[c].ind&&(f[z]&&(p+=f[z].extra),p+=f[c].an/2,z=f[c].ind),p+=n[0]*f[c].an*.005;var ht=0;for(I=0;I<N;I+=1)(D=r[I].a).p.propType&&((F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars)).length?ht+=D.p.v[0]*F[0]:ht+=D.p.v[0]*F),D.a.propType&&((F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars)).length?ht+=D.a.v[0]*F[0]:ht+=D.a.v[0]*F);for(g=!0,this._pathData.a.v&&(p=.5*f[0].an+(S-this._pathData.f.v-.5*f[0].an-.5*f[f.length-1].an)*z/(h-1),p+=this._pathData.f.v);g;)v+M>=p+ht||!b?(E=(p+ht-v)/m.partialLength,V=x.point[0]+(m.point[0]-x.point[0])*E,B=x.point[1]+(m.point[1]-x.point[1])*E,a.translate(-n[0]*f[c].an*.005,-n[1]*P*.01),g=!1):b&&(v+=m.partialLength,(y+=1)>=b.length&&(y=0,w[_+=1]?b=w[_].points:C.v.c?(y=0,b=w[_=0].points):(v-=m.partialLength,b=null)),b&&(x=m,M=(m=b[y]).partialLength));U=f[c].an/2-f[c].add,a.translate(-U,0,0)}else U=f[c].an/2-f[c].add,a.translate(-U,0,0),a.translate(-n[0]*f[c].an*.005,-n[1]*P*.01,0);for(I=0;I<N;I+=1)(D=r[I].a).t.propType&&(F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars),0===l&&0===t.j||(this._hasMaskedPath?F.length?p+=D.t.v*F[0]:p+=D.t.v*F:F.length?l+=D.t.v*F[0]:l+=D.t.v*F));for(t.strokeWidthAnim&&(X=t.sw||0),t.strokeColorAnim&&(q=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(Q=[t.fc[0],t.fc[1],t.fc[2]]),I=0;I<N;I+=1)(D=r[I].a).a.propType&&((F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars)).length?a.translate(-D.a.v[0]*F[0],-D.a.v[1]*F[1],D.a.v[2]*F[2]):a.translate(-D.a.v[0]*F,-D.a.v[1]*F,D.a.v[2]*F));for(I=0;I<N;I+=1)(D=r[I].a).s.propType&&((F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars)).length?a.scale(1+(D.s.v[0]-1)*F[0],1+(D.s.v[1]-1)*F[1],1):a.scale(1+(D.s.v[0]-1)*F,1+(D.s.v[1]-1)*F,1));for(I=0;I<N;I+=1){if(D=r[I].a,F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars),D.sk.propType&&(F.length?a.skewFromAxis(-D.sk.v*F[0],D.sa.v*F[1]):a.skewFromAxis(-D.sk.v*F,D.sa.v*F)),D.r.propType&&(F.length?a.rotateZ(-D.r.v*F[2]):a.rotateZ(-D.r.v*F)),D.ry.propType&&(F.length?a.rotateY(D.ry.v*F[1]):a.rotateY(D.ry.v*F)),D.rx.propType&&(F.length?a.rotateX(D.rx.v*F[0]):a.rotateX(D.rx.v*F)),D.o.propType&&(F.length?j+=(D.o.v*F[0]-j)*F[0]:j+=(D.o.v*F-j)*F),t.strokeWidthAnim&&D.sw.propType&&(F.length?X+=D.sw.v*F[0]:X+=D.sw.v*F),t.strokeColorAnim&&D.sc.propType)for($=0;$<3;$+=1)F.length?q[$]+=(D.sc.v[$]-q[$])*F[0]:q[$]+=(D.sc.v[$]-q[$])*F;if(t.fillColorAnim&&t.fc){if(D.fc.propType)for($=0;$<3;$+=1)F.length?Q[$]+=(D.fc.v[$]-Q[$])*F[0]:Q[$]+=(D.fc.v[$]-Q[$])*F;D.fh.propType&&(Q=F.length?J(Q,D.fh.v*F[0]):J(Q,D.fh.v*F)),D.fs.propType&&(Q=F.length?Y(Q,D.fs.v*F[0]):Y(Q,D.fs.v*F)),D.fb.propType&&(Q=F.length?K(Q,D.fb.v*F[0]):K(Q,D.fb.v*F))}}for(I=0;I<N;I+=1)(D=r[I].a).p.propType&&(F=(R=r[I].s).getMult(f[c].anIndexes[I],i.a[I].s.totalChars),this._hasMaskedPath?F.length?a.translate(0,D.p.v[1]*F[0],-D.p.v[2]*F[1]):a.translate(0,D.p.v[1]*F,-D.p.v[2]*F):F.length?a.translate(D.p.v[0]*F[0],D.p.v[1]*F[1],-D.p.v[2]*F[2]):a.translate(D.p.v[0]*F,D.p.v[1]*F,-D.p.v[2]*F));if(t.strokeWidthAnim&&(tt=X<0?0:X),t.strokeColorAnim&&(et="rgb("+Math.round(255*q[0])+","+Math.round(255*q[1])+","+Math.round(255*q[2])+")"),t.fillColorAnim&&t.fc&&(nt="rgb("+Math.round(255*Q[0])+","+Math.round(255*Q[1])+","+Math.round(255*Q[2])+")"),this._hasMaskedPath){if(a.translate(0,-t.ls),a.translate(0,n[1]*P*.01+u,0),this._pathData.p.v){T=(m.point[1]-x.point[1])/(m.point[0]-x.point[0]);var ft=180*Math.atan(T)/Math.PI;m.point[0]<x.point[0]&&(ft+=180),a.rotate(-ft*Math.PI/180)}a.translate(V,B,0),p-=n[0]*f[c].an*.005,f[c+1]&&z!==f[c+1].ind&&(p+=f[c].an/2,p+=.001*t.tr*t.finalSize)}else{switch(a.translate(l,u,0),t.ps&&a.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:a.translate(f[c].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[f[c].line]),0,0);break;case 2:a.translate(f[c].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[f[c].line])/2,0,0)}a.translate(0,-t.ls),a.translate(U,0,0),a.translate(n[0]*f[c].an*.005,n[1]*P*.01,0),l+=f[c].l+.001*t.tr*t.finalSize}"html"===o?rt=a.toCSS():"svg"===o?rt=a.to2dCSS():it=[a.props[0],a.props[1],a.props[2],a.props[3],a.props[4],a.props[5],a.props[6],a.props[7],a.props[8],a.props[9],a.props[10],a.props[11],a.props[12],a.props[13],a.props[14],a.props[15]],at=j}s<=c?(O=new sr(at,tt,et,nt,rt,it),this.renderedLetters.push(O),s+=1,this.lettersChangedFlag=!0):(O=this.renderedLetters[c],this.lettersChangedFlag=O.update(at,tt,et,nt,rt,it)||this.lettersChangedFlag)}}},hr.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},hr.prototype.mHelper=new Qt,hr.prototype.defaultPropsArray=[],h([Zt],hr),fr.prototype.initElement=function(t,e,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,n),this.textProperty=new lr(this,t.t,this.dynamicProperties),this.textAnimator=new hr(t.t,this.renderType,this),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},fr.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},fr.prototype.createPathShape=function(t,e){var n,r=e.length,i,a="";for(n=0;n<r;n+=1)"sh"===e[n].ty&&(i=e[n].ks.k,a+=ir(i,i.i.length,!0,t));return a},fr.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},fr.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},fr.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},fr.prototype.applyTextPropertiesToMatrix=function(t,e,n,r,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0)}e.translate(r,i,0)},fr.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},fr.prototype.emptyProp=new sr,fr.prototype.destroy=function(){},fr.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var dr={shapes:[]};function pr(t,e,n){this.textSpans=[],this.renderType="svg",this.initElement(t,e,n)}function mr(t,e,n){this.initElement(t,e,n)}function vr(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initFrame(),this.initTransform(t,e,n),this.initHierarchy()}function gr(){}function yr(){}function _r(t,e,n){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?v(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?Wt.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function xr(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=ut("svg");var n="";if(e&&e.title){var r=ut("title"),i=Z();r.setAttribute("id",i),r.textContent=e.title,this.svgElement.appendChild(r),n+=i}if(e&&e.description){var a=ut("desc"),o=Z();a.setAttribute("id",o),a.textContent=e.description,this.svgElement.appendChild(a),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var s=ut("defs");this.svgElement.appendChild(s);var l=ut("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}return h([Mn,An,Un,Vn,Sn,Bn,fr],pr),pr.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=ut("text"))},pr.prototype.buildTextContents=function(t){for(var e=0,n=t.length,r=[],i="";e<n;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(i),i=""):i+=t[e],e+=1;return r.push(i),r},pr.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var n=t.shapes[0];if(n.it){var r=n.it[n.it.length-1];r.s&&(r.s.k[0]=e,r.s.k[1]=e)}}return t},pr.prototype.buildNewText=function(){var t,e;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=v(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight,a=n.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var o=n.l||[],s=!!this.globalData.fontManager.chars,l;e=o.length;var u=this.mHelper,c="",h=this.data.singleShape,f=0,d=0,p=!0,m=.001*n.tr*n.finalSize;if(!h||s||n.sz){var g=this.textSpans.length,y;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!s||!h||0===t){if(l=g>t?this.textSpans[t].span:ut(s?"g":"text"),g<=t){if(l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=l,s){var _=ut("g");l.appendChild(_),this.textSpans[t].childSpan=_}this.textSpans[t].span=l,this.layerElement.appendChild(l)}l.style.display="inherit"}if(u.reset(),h&&(o[t].n&&(f=-m,d+=n.yOffset,d+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(n,u,o[t].line,f,d),f+=o[t].l||0,f+=m),s){var x;if(1===(y=this.globalData.fontManager.getCharData(n.finalText[t],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t)x=new _r(y.data,this.globalData,this);else{var b=dr;y.data&&y.data.shapes&&(b=this.buildShapeData(y.data,n.finalSize)),x=new or(b,this.globalData,this)}if(this.textSpans[t].glyph){var w=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(w.layerElement),w.destroy()}this.textSpans[t].glyph=x,x._debug=!0,x.prepareFrame(0),x.renderFrame(),this.textSpans[t].childSpan.appendChild(x.layerElement),1===y.t&&this.textSpans[t].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else h&&l.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),l.textContent=o[t].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}h&&l&&l.setAttribute("d",c)}else{var M=this.textContainer,S="start";switch(n.j){case 1:S="end";break;case 2:S="middle";break;default:S="start"}M.setAttribute("text-anchor",S),M.setAttribute("letter-spacing",m);var E=this.buildTextContents(n.finalText);for(e=E.length,d=n.ps?n.ps[1]+n.ascent:0,t=0;t<e;t+=1)(l=this.textSpans[t].span||ut("tspan")).textContent=E[t],l.setAttribute("x",0),l.setAttribute("y",d),l.style.display="inherit",M.appendChild(l),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=l,d+=n.finalLineHeight;this.layerElement.appendChild(M)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},pr.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},pr.prototype.getValue=function(){var t,e=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)(n=this.textSpans[t].glyph)&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},pr.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var n=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l,i,a,o;for(e=r.length,t=0;t<e;t+=1)r[t].n||(i=n[t],a=this.textSpans[t].span,(o=this.textSpans[t].glyph)&&o.renderFrame(),i._mdf.m&&a.setAttribute("transform",i.m),i._mdf.o&&a.setAttribute("opacity",i.o),i._mdf.sw&&a.setAttribute("stroke-width",i.sw),i._mdf.sc&&a.setAttribute("stroke",i.sc),i._mdf.fc&&a.setAttribute("fill",i.fc))}},h([Hn],mr),mr.prototype.createContent=function(){var t=ut("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},vr.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},vr.prototype.renderFrame=function(){},vr.prototype.getBaseElement=function(){return null},vr.prototype.destroy=function(){},vr.prototype.sourceRectAtTime=function(){},vr.prototype.hide=function(){},h([Mn,An,Vn,Sn],vr),h([Cn],gr),gr.prototype.createNull=function(t){return new vr(t,this.globalData,this)},gr.prototype.createShape=function(t){return new or(t,this.globalData,this)},gr.prototype.createText=function(t){return new pr(t,this.globalData,this)},gr.prototype.createImage=function(t){return new Hn(t,this.globalData,this)},gr.prototype.createSolid=function(t){return new mr(t,this.globalData,this)},gr.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var n=ut("clipPath"),r=ut("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=Z();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+u()+"#"+i+")"),e.appendChild(n),this.layers=t.layers,this.elements=v(t.layers.length)},gr.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},gr.prototype.updateContainerSize=function(){},gr.prototype.findIndexByInd=function(t){var e=0,n=this.layers.length;for(e=0;e<n;e+=1)if(this.layers[e].ind===t)return e;return-1},gr.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var n=this.createItem(this.layers[t]);if(e[t]=n,nt()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,t),this.layers[t].tt){var r="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===r)return;if(this.elements[r]&&!0!==this.elements[r]){var i,a=e[r].getMatte(this.layers[t].tt);n.setMatte(a)}else this.buildItem(r),this.addPendingElement(n)}}},gr.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,n=this.elements.length;e<n;){if(this.elements[e]===t){var r="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,i,a=this.elements[r].getMatte(this.layers[e].tt);t.setMatte(a);break}e+=1}}},gr.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},gr.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){for(var r=0,i;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(i=this.elements[r].getBaseElement()),r+=1;i?this.layerElement.insertBefore(n,i):this.layerElement.appendChild(n)}},gr.prototype.hide=function(){this.layerElement.style.display="none"},gr.prototype.show=function(){this.layerElement.style.display="block"},h([Mn,An,Vn,Sn,Bn],yr),yr.prototype.initElement=function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},yr.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},yr.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},yr.prototype.setElements=function(t){this.elements=t},yr.prototype.getElements=function(){return this.elements},yr.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},yr.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},h([gr,yr,Un],_r),_r.prototype.createComp=function(t){return new _r(t,this.globalData,this)},h([gr],xr),xr.prototype.createComp=function(t){return new _r(t,this.globalData,this)},gt("svg",xr),xe.registerModifier("tm",we),xe.registerModifier("pb",Me),xe.registerModifier("rp",Ee),xe.registerModifier("rd",Te),xe.registerModifier("zz",Ze),xe.registerModifier("op",an),te},"object"===s(e)?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i))},2980:function(t,e,n){"use strict";n.r(e),n.d(e,{TabPane:function(){return Na},default:function(){return Ha}});var r=n(45699),i=n(61529),a=n(37296),o=n(26963),s=n(51395),l=n(35384),u=n(61036),c=n(26508),h=n(80268),f=n(85021),d=n(91002),p=n(26779),m=n(74710),v=n(77185),g=n(26486),y=n.n(g),_=n(9914),x=n(83639),b=n(86612),w=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==t?void 0:t.substr(0,4))};function M(t){var e=v.useRef();e.current=t;var n=v.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return n}var S,E=(0,n(82635).Z)()?v.useLayoutEffect:v.useEffect,T=function t(e,n){var r=v.useRef(!0);E((function(){return e(r.current)}),n),E((function(){return r.current=!1,function(){r.current=!0}}),[])},C=function t(e,n){T((function(t){if(!t)return e()}),n)},k=T,A=n(24519);function P(t){return void 0!==t}function L(t,e){var n=e||{},r=n.defaultValue,i=n.value,a=n.onChange,o=n.postState,s=(0,A.Z)((function(){return P(i)?i:P(r)?"function"==typeof r?r():r:"function"==typeof t?t():t})),l=(0,f.Z)(s,2),u=l[0],c=l[1],h=void 0!==i?i:u,d=o?o(h):h,p=M(a),m=(0,A.Z)([h]),v=(0,f.Z)(m,2),g=v[0],y=v[1],_;return C((function(){var t=g[0];u!==t&&p(u,t)}),[g]),C((function(){P(i)||c(i)}),[i]),[d,M((function(t,e){c(t,e),y([h],e)}))]}var D=n(77513),R=n(54980),I=n(9758),N=n(58220),O=n(98452),F=n(33739),z=n(42886),U=n(5589),V=n(61522),B=n(52373),H=n(61818),G=n(79847),W=n(59002),Z=n(28934),j=new Map;function q(t){t.forEach((function(t){var e,n=t.target;null===(e=j.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}var X=new Z.default(q),Y=null,K=null;function J(t,e){j.has(t)||(j.set(t,new Set),X.observe(t)),j.get(t).add(e)}function Q(t,e){j.has(t)&&(j.get(t).delete(e),j.get(t).size||(X.unobserve(t),j.delete(t)))}var $=n(74809),tt=n(57338),et=n(29161),nt=n(7674),rt=function(t){(0,et.Z)(n,t);var e=(0,nt.Z)(n);function n(){return(0,$.Z)(this,n),e.apply(this,arguments)}return(0,tt.Z)(n,[{key:"render",value:function t(){return this.props.children}}]),n}(v.Component),it=v.createContext(null),at;function ot(t){var e=t.children,n=t.onBatchResize,r=v.useRef(0),i=v.useRef([]),a=v.useContext(it),o=v.useCallback((function(t,e,o){r.current+=1;var s=r.current;i.current.push({size:t,element:e,data:o}),Promise.resolve().then((function(){s===r.current&&(null==n||n(i.current),i.current=[])})),null==a||a(t,e,o)}),[n,a]);return v.createElement(it.Provider,{value:o},e)}function st(t,e){var n=t.children,r=t.disabled,i=v.useRef(null),a=v.useRef(null),o=v.useContext(it),s="function"==typeof n,l=s?n(i):n,u=v.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&v.isValidElement(l)&&(0,H.Yr)(l),h=c?l.ref:null,f=v.useMemo((function(){return(0,H.sQ)(h,i)}),[h,i]),d=function t(){return(0,G.Z)(i.current)||(0,G.Z)(a.current)};v.useImperativeHandle(e,(function(){return d()}));var p=v.useRef(t);p.current=t;var g=v.useCallback((function(t){var e=p.current,n=e.onResize,r=e.data,i=t.getBoundingClientRect(),a=i.width,s=i.height,l=t.offsetWidth,c=t.offsetHeight,h=Math.floor(a),f=Math.floor(s);if(u.current.width!==h||u.current.height!==f||u.current.offsetWidth!==l||u.current.offsetHeight!==c){var d={width:h,height:f,offsetWidth:l,offsetHeight:c};u.current=d;var v=l===Math.round(a)?a:l,g=c===Math.round(s)?s:c,y=(0,m.Z)((0,m.Z)({},d),{},{offsetWidth:v,offsetHeight:g});null==o||o(y,t,r),n&&Promise.resolve().then((function(){n(y,t)}))}}),[]);return v.useEffect((function(){var t=d();return t&&!r&&J(t,g),function(){return Q(t,g)}}),[i.current,r]),v.createElement(rt,{ref:a},c?v.cloneElement(l,{ref:f}):l)}var lt=v.forwardRef(st),ut="rc-observer-key";function ct(t,e){var n=t.children,r;return("function"==typeof n?[n]:(0,_.Z)(n)).map((function(n,r){var i=(null==n?void 0:n.key)||"".concat(ut,"-").concat(r);return v.createElement(lt,(0,c.Z)({},t,{key:i,ref:0===r?e:void 0}),n)}))}var ht=v.forwardRef(ct);ht.Collection=ot;var ft=ht;function dt(t){var e=(0,v.useRef)(),n=(0,v.useRef)(!1);function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.current||(U.Z.cancel(e.current),e.current=(0,U.Z)((function(){t.apply(void 0,i)})))}return(0,v.useEffect)((function(){return function(){n.current=!0,U.Z.cancel(e.current)}}),[]),r}function pt(t){var e=(0,v.useRef)([]),n=(0,v.useState)({}),r,i=(0,f.Z)(n,2)[1],a=(0,v.useRef)("function"==typeof t?t():t),o=dt((function(){var t=a.current;e.current.forEach((function(e){t=e(t)})),e.current=[],a.current=t,i({})}));function s(t){e.current.push(t),o()}return[a.current,s]}var mt=n(54175),vt=n(85373);function gt(t,e){var n,r=t.prefixCls,i=t.id,a=t.active,o=t.tab,s=o.key,l=o.tab,u=o.disabled,c=o.closeIcon,f=t.closable,d=t.renderWrapper,p=t.removeAriaLabel,m=t.editable,g=t.onClick,_=t.onRemove,x=t.onFocus,b=t.style,w="".concat(r,"-tab");v.useEffect((function(){return _}),[]);var M=m&&!1!==f&&!u;function S(t){u||g(t)}function E(t){t.preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:s,event:t})}var T=v.createElement("div",{key:s,ref:e,className:y()(w,(n={},(0,h.Z)(n,"".concat(w,"-with-remove"),M),(0,h.Z)(n,"".concat(w,"-active"),a),(0,h.Z)(n,"".concat(w,"-disabled"),u),n)),style:b,onClick:S},v.createElement("div",{role:"tab","aria-selected":a,id:i&&"".concat(i,"-tab-").concat(s),className:"".concat(w,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(s),"aria-disabled":u,tabIndex:u?null:0,onClick:function t(e){e.stopPropagation(),S(e)},onKeyDown:function t(e){[vt.Z.SPACE,vt.Z.ENTER].includes(e.which)&&(e.preventDefault(),S(e))},onFocus:x},l),M&&v.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function t(e){e.stopPropagation(),E(e)}},c||m.removeIcon||"\xd7"));return d?d(T):T}var yt=v.forwardRef(gt),_t={width:0,height:0,left:0,top:0};function xt(t,e,n){return(0,v.useMemo)((function(){for(var n,r=new Map,i=e.get(null===(n=t[0])||void 0===n?void 0:n.key)||_t,a=i.left+i.width,o=0;o<t.length;o+=1){var s=t[o].key,l=e.get(s),u;if(!l)l=e.get(null===(u=t[o-1])||void 0===u?void 0:u.key)||_t;var c=r.get(s)||(0,m.Z)({},l);c.right=a-c.left-c.width,r.set(s,c)}return r}),[t.map((function(t){return t.key})).join("_"),e,n])}var bt={width:0,height:0,left:0,top:0,right:0};function wt(t,e,n,r,i){var a=i.tabs,o=i.tabPosition,s=i.rtl,l,u,c;["top","bottom"].includes(o)?(l="width",u=s?"right":"left",c=Math.abs(e.left)):(l="height",u="top",c=-e.top);var h=e[l],f=n[l],d=r[l],p=h;return f+d>h&&f<h&&(p=h-d),(0,v.useMemo)((function(){if(!a.length)return[0,0];for(var e=a.length,n=e,r=0;r<e;r+=1){var i=t.get(a[r].key)||bt;if(i[u]+i[l]>c+p){n=r-1;break}}for(var o=0,s=e-1;s>=0;s-=1){var h;if((t.get(a[s].key)||bt)[u]<c){o=s+1;break}}return[o,n]}),[t,c,p,o,a.map((function(t){return t.key})).join("_"),s])}var Mt=n(21323),St=n.n(Mt),Et=n(46189),Tt=n(40722),Ct=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],kt=void 0;function At(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,a=t.renderItem,o=t.responsive,s=t.responsiveDisabled,l=t.registerSize,u=t.itemKey,h=t.className,f=t.style,d=t.children,g=t.display,_=t.order,x=t.component,b=void 0===x?"div":x,w=(0,p.Z)(t,Ct),M=o&&!g;function S(t){l(u,t)}v.useEffect((function(){return function(){S(null)}}),[]);var E=a&&i!==kt?a(i):d,T;r||(T={opacity:M?0:1,height:M?0:kt,overflowY:M?"hidden":kt,order:o?_:kt,pointerEvents:M?"none":kt,position:M?"absolute":kt});var C={};M&&(C["aria-hidden"]=!0);var k=v.createElement(b,(0,c.Z)({className:y()(!r&&n,h),style:(0,m.Z)((0,m.Z)({},T),f)},C,w,{ref:e}),E);return o&&(k=v.createElement(ft,{onResize:function t(e){var n;S(e.offsetWidth)},disabled:s},k)),k}var Pt=v.forwardRef(At);Pt.displayName="Item";var Lt=Pt,Dt=n(52623);function Rt(t){if("undefined"==typeof MessageChannel)(0,U.Z)(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function It(){var t=v.useRef(null),e;return function e(n){t.current||(t.current=[],Rt((function(){(0,Dt.unstable_batchedUpdates)((function(){t.current.forEach((function(t){t()})),t.current=null}))}))),t.current.push(n)}}function Nt(t,e){var n=v.useState(e),r=(0,f.Z)(n,2),i=r[0],a=r[1],o;return[i,M((function(e){t((function(){a(e)}))}))]}var Ot=v.createContext(null),Ft=["component"],zt=["className"],Ut=["className"],Vt=function t(e,n){var r=v.useContext(Ot);if(!r){var i=e.component,a=void 0===i?"div":i,o=(0,p.Z)(e,Ft);return v.createElement(a,(0,c.Z)({},o,{ref:n}))}var s=r.className,l=(0,p.Z)(r,zt),u=e.className,h=(0,p.Z)(e,Ut);return v.createElement(Ot.Provider,{value:null},v.createElement(Lt,(0,c.Z)({ref:n,className:y()(s,u)},l,h)))},Bt=v.forwardRef(Vt);Bt.displayName="RawItem";var Ht=Bt,Gt=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Wt="responsive",Zt="invalidate";function jt(t){return"+ ".concat(t.length," ...")}function qt(t,e){var n=t.prefixCls,r=void 0===n?"rc-overflow":n,i=t.data,a=void 0===i?[]:i,o=t.renderItem,s=t.renderRawItem,l=t.itemKey,u=t.itemWidth,h=void 0===u?10:u,d=t.ssr,g=t.style,_=t.className,x=t.maxCount,b=t.renderRest,w=t.renderRawRest,M=t.suffix,S=t.component,E=void 0===S?"div":S,T=t.itemComponent,C=t.onVisibleChange,A=(0,p.Z)(t,Gt),P="full"===d,L=It(),D=Nt(L,null),R=(0,f.Z)(D,2),I=R[0],N=R[1],O=I||0,F=Nt(L,new Map),z=(0,f.Z)(F,2),U=z[0],V=z[1],B=Nt(L,0),H=(0,f.Z)(B,2),G=H[0],W=H[1],Z=Nt(L,0),j=(0,f.Z)(Z,2),q=j[0],X=j[1],Y=Nt(L,0),K=(0,f.Z)(Y,2),J=K[0],Q=K[1],$=(0,v.useState)(null),tt=(0,f.Z)($,2),et=tt[0],nt=tt[1],rt=(0,v.useState)(null),it=(0,f.Z)(rt,2),at=it[0],ot=it[1],st=v.useMemo((function(){return null===at&&P?Number.MAX_SAFE_INTEGER:at||0}),[at,I]),lt=(0,v.useState)(!1),ut=(0,f.Z)(lt,2),ct=ut[0],ht=ut[1],dt="".concat(r,"-item"),pt=Math.max(G,q),mt=x===Wt,vt=a.length&&mt,gt=x===Zt,yt=vt||"number"==typeof x&&a.length>x,_t=(0,v.useMemo)((function(){var t=a;return vt?t=null===I&&P?a:a.slice(0,Math.min(a.length,O/h)):"number"==typeof x&&(t=a.slice(0,x)),t}),[a,h,I,x,vt]),xt=(0,v.useMemo)((function(){return vt?a.slice(st+1):a.slice(_t.length)}),[a,_t,vt,st]),bt=(0,v.useCallback)((function(t,e){var n;return"function"==typeof l?l(t):null!==(n=l&&(null==t?void 0:t[l]))&&void 0!==n?n:e}),[l]),wt=(0,v.useCallback)(o||function(t){return t},[o]);function Mt(t,e,n){(at!==t||void 0!==e&&e!==et)&&(ot(t),n||(ht(t<a.length-1),null==C||C(t)),void 0!==e&&nt(e))}function St(t,e){N(e.clientWidth)}function Et(t,e){V((function(n){var r=new Map(n);return null===e?r.delete(t):r.set(t,e),r}))}function Tt(t,e){X(e),W(q)}function Ct(t,e){Q(e)}function kt(t){return U.get(bt(_t[t],t))}k((function(){if(O&&"number"==typeof pt&&_t){var t=J,e=_t.length,n=e-1;if(!e)return void Mt(0,null);for(var r=0;r<e;r+=1){var i=kt(r);if(P&&(i=i||0),void 0===i){Mt(r-1,void 0,!0);break}if(t+=i,0===n&&t<=O||r===n-1&&t+kt(n)<=O){Mt(n,null);break}if(t+pt>O){Mt(r-1,t-i-J+q);break}}M&&kt(0)+J>O&&nt(null)}}),[O,U,q,J,bt,_t]);var At=ct&&!!xt.length,Pt={};null!==et&&vt&&(Pt={position:"absolute",left:et,top:0});var Dt={prefixCls:dt,responsive:vt,component:T,invalidate:gt},Rt=s?function(t,e){var n=bt(t,e);return v.createElement(Ot.Provider,{key:n,value:(0,m.Z)((0,m.Z)({},Dt),{},{order:e,item:t,itemKey:n,registerSize:Et,display:e<=st})},s(t,e))}:function(t,e){var n=bt(t,e);return v.createElement(Lt,(0,c.Z)({},Dt,{order:e,key:n,item:t,renderItem:wt,itemKey:n,registerSize:Et,display:e<=st}))},Ft,zt={order:At?st:Number.MAX_SAFE_INTEGER,className:"".concat(dt,"-rest"),registerSize:Tt,display:At};if(w)w&&(Ft=v.createElement(Ot.Provider,{value:(0,m.Z)((0,m.Z)({},Dt),zt)},w(xt)));else{var Ut=b||jt;Ft=v.createElement(Lt,(0,c.Z)({},Dt,zt),"function"==typeof Ut?Ut(xt):Ut)}var Vt=v.createElement(E,(0,c.Z)({className:y()(!gt&&r,_),style:g,ref:e},A),_t.map(Rt),yt?Ft:null,M&&v.createElement(Lt,(0,c.Z)({},Dt,{responsive:mt,responsiveDisabled:!vt,order:st,className:"".concat(dt,"-suffix"),registerSize:Ct,display:!0,style:Pt}),M));return mt&&(Vt=v.createElement(ft,{onResize:St,disabled:!vt},Vt)),Vt}var Xt=v.forwardRef(qt);Xt.displayName="Overflow",Xt.Item=Ht,Xt.RESPONSIVE=Wt,Xt.INVALIDATE=Zt;var Yt,Kt=Xt;function Jt(t,e){var n=(0,m.Z)({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}var Qt=n(40840),$t=n(17233),te=["children","locked"],ee=v.createContext(null);function ne(t,e){var n=(0,m.Z)({},t);return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function re(t){var e=t.children,n=t.locked,r=(0,p.Z)(t,te),i=v.useContext(ee),a=(0,$t.Z)((function(){return ne(i,r)}),[i,r],(function(t,e){return!(n||t[0]===e[0]&&St()(t[1],e[1]))}));return v.createElement(ee.Provider,{value:a},e)}function ie(t,e,n,r){var i=v.useContext(ee),a=i.activeKey,o=i.onActive,s=i.onInactive,l={active:a===t};return e||(l.onMouseEnter=function(e){null==n||n({key:t,domEvent:e}),o(t)},l.onMouseLeave=function(e){null==r||r({key:t,domEvent:e}),s(t)}),l}var ae=["item"];function oe(t){var e=t.item,n=(0,p.Z)(t,ae);return Object.defineProperty(n,"item",{get:function t(){return(0,V.ZP)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}function se(t){var e=t.icon,n=t.props,r=t.children,i;return(i="function"==typeof e?v.createElement(e,(0,m.Z)({},n)):e)||r||null}function le(t){var e=v.useContext(ee),n=e.mode,r=e.rtl,i=e.inlineIndent;if("inline"!==n)return null;var a=t;return r?{paddingRight:t*i}:{paddingLeft:t*i}}var ue=[],ce=v.createContext(null);function he(){return v.useContext(ce)}var fe=v.createContext(ue);function de(t){var e=v.useContext(fe);return v.useMemo((function(){return void 0!==t?[].concat((0,z.Z)(e),[t]):e}),[e,t])}var pe=v.createContext(null),me=v.createContext(null);function ve(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function ge(t){var e;return ve(v.useContext(me),t)}var ye,_e=v.createContext({}),xe=["title","attribute","elementRef"],be=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],we=["active"],Me=function(t){(0,et.Z)(n,t);var e=(0,nt.Z)(n);function n(){return(0,$.Z)(this,n),e.apply(this,arguments)}return(0,tt.Z)(n,[{key:"render",value:function t(){var e=this.props,n=e.title,r=e.attribute,i=e.elementRef,a,o=Jt((0,p.Z)(e,xe),["eventKey"]);return(0,V.ZP)(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),v.createElement(Kt.Item,(0,c.Z)({},r,{title:"string"==typeof n?n:void 0},o,{ref:i}))}}]),n}(v.Component),Se=function t(e){var n,r=e.style,i=e.className,a=e.eventKey,o=e.warnKey,s=e.disabled,l=e.itemIcon,u=e.children,f=e.role,d=e.onMouseEnter,g=e.onMouseLeave,_=e.onClick,x=e.onKeyDown,b=e.onFocus,w=(0,p.Z)(e,be),M=ge(a),S=v.useContext(ee),E=S.prefixCls,T=S.onItemClick,C=S.disabled,k=S.overflowDisabled,A=S.itemIcon,P=S.selectedKeys,L=S.onActive,D,R=v.useContext(_e)._internalRenderMenuItem,I="".concat(E,"-item"),N=v.useRef(),O=v.useRef(),F=C||s,U=de(a);var V=function t(e){return{key:a,keyPath:(0,z.Z)(U).reverse(),item:N.current,domEvent:e}},B=l||A,H=ie(a,F,d,g),G=H.active,W=(0,p.Z)(H,we),Z=P.includes(a),j=le(U.length),q=function t(e){if(!F){var n=V(e);null==_||_(oe(n)),T(n)}},X=function t(e){if(null==x||x(e),e.which===vt.Z.ENTER){var n=V(e);null==_||_(oe(n)),T(n)}},Y=function t(e){L(a),null==b||b(e)},K={};"option"===e.role&&(K["aria-selected"]=Z);var J=v.createElement(Me,(0,c.Z)({ref:N,elementRef:O,role:null===f?"none":f||"menuitem",tabIndex:s?null:-1,"data-menu-id":k&&M?null:M},w,W,K,{component:"li","aria-disabled":s,style:(0,m.Z)((0,m.Z)({},j),r),className:y()(I,(n={},(0,h.Z)(n,"".concat(I,"-active"),G),(0,h.Z)(n,"".concat(I,"-selected"),Z),(0,h.Z)(n,"".concat(I,"-disabled"),F),n),i),onClick:q,onKeyDown:X,onFocus:Y}),u,v.createElement(se,{props:(0,m.Z)((0,m.Z)({},e),{},{isSelected:Z}),icon:B}));return R&&(J=R(J,e,{selected:Z})),J};function Ee(t){var e=t.eventKey,n=he(),r=de(e);return v.useEffect((function(){if(n)return n.registerPath(e,r),function(){n.unregisterPath(e,r)}}),[r]),n?null:v.createElement(Se,t)}var Te=Ee;function Ce(t,e){return(0,_.Z)(t).map((function(t,n){if(v.isValidElement(t)){var r,i,a=t.key,o=null!==(r=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:a,s;null==o&&(o="tmp_key-".concat([].concat((0,z.Z)(e),[n]).join("-")));var l={key:o,eventKey:o};return v.cloneElement(t,l)}return t}))}function ke(t){var e=v.useRef(t);e.current=t;var n=v.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return t?n:void 0}var Ae=["className","children"],Pe=function t(e,n){var r=e.className,i=e.children,a=(0,p.Z)(e,Ae),o=v.useContext(ee),s=o.prefixCls,l=o.mode,u=o.rtl;return v.createElement("ul",(0,c.Z)({className:y()(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),r)},a,{"data-menu-list":!0,ref:n}),i)},Le=v.forwardRef(Pe);Le.displayName="SubMenuList";var De=Le,Re=n(71796),Ie=n(9967),Ne=n(71015);function Oe(t,e,n,r){var i=Dt.unstable_batchedUpdates?function t(e){Dt.unstable_batchedUpdates(n,e)}:n;return null!=t&&t.addEventListener&&t.addEventListener(e,i,r),{remove:function n(){null!=t&&t.removeEventListener&&t.removeEventListener(e,i,r)}}}var Fe=n(32459);function ze(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function Ue(t,e,n){var r=t[e]||{};return(0,m.Z)((0,m.Z)({},r),n)}function Ve(t,e,n,r){for(var i=n.points,a=Object.keys(t),o=0;o<a.length;o+=1){var s=a[o];if(ze(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}var Be=n(16194);function He(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function Ge(t){var e=t.prefixCls,n=t.visible,r=t.zIndex,i=t.mask,a=t.maskMotion,o=t.maskAnimation,s=t.maskTransitionName;if(!i)return null;var l={};return(a||s||o)&&(l=(0,m.Z)({motionAppear:!0},He({motion:a,prefixCls:e,transitionName:s,animation:o}))),v.createElement(Be.default,(0,c.Z)({},l,{visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return v.createElement("div",{style:{zIndex:r},className:y()("".concat(e,"-mask"),n)})}))}var We=n(59329),Ze=n(29858),je=n(94646),qe=n(47721),Xe=n(82205),Ye=n(66054),Ke=n(60638),Je=n(47075),Qe=n(92832),$e=n(7688),tn=n(63670),en=n(96131),nn;function rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(n),!0).forEach((function(e){sn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ln={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function un(){if(void 0!==nn)return nn;nn="";var t=document.createElement("p").style,e="Transform";for(var n in ln)n+e in t&&(nn=n);return nn}function cn(){return un()?"".concat(un(),"TransitionProperty"):"transitionProperty"}function hn(){return un()?"".concat(un(),"Transform"):"transform"}function fn(t,e){var n=cn();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function dn(t,e){var n=hn();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}function pn(t){return t.style.transitionProperty||t.style[cn()]}function mn(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(hn());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var vn=/matrix\((.*)\)/,gn=/matrix3d\((.*)\)/,yn,_n;function xn(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(hn());if(r&&"none"!==r){var i,a=r.match(vn),o;if(a)(i=(a=a[1]).split(",").map((function(t){return parseFloat(t,10)})))[4]=e.x,i[5]=e.y,dn(t,"matrix(".concat(i.join(","),")"));else(i=r.match(gn)[1].split(",").map((function(t){return parseFloat(t,10)})))[12]=e.x,i[13]=e.y,dn(t,"matrix3d(".concat(i.join(","),")"))}else dn(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}function bn(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function wn(t,e,n){var r=n;if("object"!==on(e))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(t.style[e]=r)):_n(t,e);for(var i in e)e.hasOwnProperty(i)&&wn(t,i,e[i])}function Mn(t){var e,n,r,i=t.ownerDocument,a=i.body,o=i&&i.documentElement;return e=t.getBoundingClientRect(),n=Math.floor(e.left),r=Math.floor(e.top),{left:n-=o.clientLeft||a.clientLeft||0,top:r-=o.clientTop||a.clientTop||0}}function Sn(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var i=t.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function En(t){return Sn(t)}function Tn(t){return Sn(t,!0)}function Cn(t){var e=Mn(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=En(r),e.top+=Tn(r),e}function kn(t){return null!=t&&t==t.window}function An(t){return kn(t)?t.document:9===t.nodeType?t:t.ownerDocument}function Pn(t,e,n){var r=n,i="",a=An(t);return(r=r||a.defaultView.getComputedStyle(t,null))&&(i=r.getPropertyValue(e)||r[e]),i}var Ln=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),Dn=/^(top|right|bottom|left)$/,Rn="currentStyle",In="runtimeStyle",Nn="left",On="px";function Fn(t,e){var n=t.currentStyle&&t.currentStyle[e];if(Ln.test(n)&&!Dn.test(e)){var r=t.style,i=r.left,a=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+On,r.left=i,t.runtimeStyle.left=a}return""===n?"auto":n}function zn(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function Un(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function Vn(t,e,n){"static"===wn(t,"position")&&(t.style.position="relative");var r=-999,i=-999,a=zn("left",n),o=zn("top",n),s=Un(a),l=Un(o);"left"!==a&&(r=999),"top"!==o&&(i=999);var u="",c=Cn(t);("left"in e||"top"in e)&&(u=pn(t)||"",fn(t,"none")),"left"in e&&(t.style[s]="",t.style[a]="".concat(r,"px")),"top"in e&&(t.style[l]="",t.style[o]="".concat(i,"px")),bn(t);var h=Cn(t),f={};for(var d in e)if(e.hasOwnProperty(d)){var p=zn(d,n),m="left"===d?r:i,v=c[d]-h[d];f[p]=p===d?m+v:m-v}wn(t,f),bn(t),("left"in e||"top"in e)&&fn(t,u);var g={};for(var y in e)if(e.hasOwnProperty(y)){var _=zn(y,n),x=e[y]-c[y];g[_]=y===_?f[_]+x:f[_]-x}wn(t,g)}function Bn(t,e){var n=Cn(t),r=mn(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),xn(t,i)}function Hn(t,e,n){if(n.ignoreShake){var r=Cn(t),i=r.left.toFixed(0),a=r.top.toFixed(0),o=e.left.toFixed(0),s=e.top.toFixed(0);if(i===o&&a===s)return}n.useCssRight||n.useCssBottom?Vn(t,e,n):n.useCssTransform&&hn()in document.body.style?Bn(t,e):Vn(t,e,n)}function Gn(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Wn(t){return"border-box"===_n(t,"boxSizing")}"undefined"!=typeof window&&(_n=window.getComputedStyle?Pn:Fn);var Zn=["margin","border","padding"],jn=-1,qn=2,Xn=1,Yn=0;function Kn(t,e,n){var r={},i=t.style,a;for(a in e)e.hasOwnProperty(a)&&(r[a]=i[a],i[a]=e[a]);for(a in n.call(t),e)e.hasOwnProperty(a)&&(i[a]=r[a])}function Jn(t,e,n){var r=0,i,a,o;for(a=0;a<e.length;a++)if(i=e[a])for(o=0;o<n.length;o++){var s=void 0;s="border"===i?"".concat(i).concat(n[o],"Width"):i+n[o],r+=parseFloat(_n(t,s))||0}return r}var Qn={getParent:function t(e){var n=e;do{n=11===n.nodeType&&n.host?n.host:n.parentNode}while(n&&1!==n.nodeType&&9!==n.nodeType);return n}};function $n(t,e,n){var r=n;if(kn(t))return"width"===e?Qn.viewportWidth(t):Qn.viewportHeight(t);if(9===t.nodeType)return"width"===e?Qn.docWidth(t):Qn.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],a="width"===e?Math.floor(t.getBoundingClientRect().width):Math.floor(t.getBoundingClientRect().height),o=Wn(t),s=0;(null==a||a<=0)&&(a=void 0,(null==(s=_n(t,e))||Number(s)<0)&&(s=t.style[e]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=o?1:jn);var l=void 0!==a||o,u=a||s;return r===jn?l?u-Jn(t,["border","padding"],i):s:l?1===r?u:u+(2===r?-Jn(t,["border"],i):Jn(t,["margin"],i)):s+Jn(t,Zn.slice(r),i)}Gn(["Width","Height"],(function(t){Qn["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],Qn["viewport".concat(t)](n))},Qn["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,a,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var tr={position:"absolute",visibility:"hidden",display:"block"};function er(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return 0!==i.offsetWidth?r=$n.apply(void 0,e):Kn(i,tr,(function(){r=$n.apply(void 0,e)})),r}function nr(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Gn(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Qn["outer".concat(e)]=function(e,n){return e&&er(e,t,n?0:1)};var n="width"===t?["Left","Right"]:["Top","Bottom"];Qn[t]=function(e,r){var i=r,a;return void 0!==i?e?(Wn(e)&&(i+=Jn(e,["padding","border"],n)),wn(e,t,i)):void 0:e&&er(e,t,jn)}}));var rr={getWindow:function t(e){if(e&&e.document&&e.setTimeout)return e;var n=e.ownerDocument||e;return n.defaultView||n.parentWindow},getDocument:An,offset:function t(e,n,r){if(void 0===n)return Cn(e);Hn(e,n,r||{})},isWindow:kn,each:Gn,css:wn,clone:function t(e){var n,r={},i;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);if(e.overflow)for(n in e)e.hasOwnProperty(n)&&(r.overflow[n]=e.overflow[n]);return r},mix:nr,getWindowScrollLeft:function t(e){return En(e)},getWindowScrollTop:function t(e){return Tn(e)},merge:function t(){for(var e={},n=0;n<arguments.length;n++)rr.mix(e,n<0||arguments.length<=n?void 0:arguments[n]);return e},viewportWidth:0,viewportHeight:0};nr(rr,Qn);var ir=rr.getParent;function ar(t){if(rr.isWindow(t)||9===t.nodeType)return null;var e,n=rr.getDocument(t).body,r,i=rr.css(t,"position"),a;if(!("fixed"===i||"absolute"===i))return"html"===t.nodeName.toLowerCase()?null:ir(t);for(r=ir(t);r&&r!==n&&9!==r.nodeType;r=ir(r))if("static"!==(i=rr.css(r,"position")))return r;return null}var or=rr.getParent;function sr(t){if(rr.isWindow(t)||9===t.nodeType)return!1;var e=rr.getDocument(t),n=e.body,r=null;for(r=or(t);r&&r!==n&&r!==e;r=or(r)){var i;if("fixed"===rr.css(r,"position"))return!0}return!1}function lr(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=ar(t),i=rr.getDocument(t),a=i.defaultView||i.parentWindow,o=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===rr.css(r,"overflow")){if(r===o||r===s)break}else{var l=rr.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=ar(r)}var u=null,c;rr.isWindow(t)||9===t.nodeType||(u=t.style.position,"absolute"===rr.css(t,"position")&&(t.style.position="fixed"));var h=rr.getWindowScrollLeft(a),f=rr.getWindowScrollTop(a),d=rr.viewportWidth(a),p=rr.viewportHeight(a),m=s.scrollWidth,v=s.scrollHeight,g=window.getComputedStyle(o);if("hidden"===g.overflowX&&(m=a.innerWidth),"hidden"===g.overflowY&&(v=a.innerHeight),t.style&&(t.style.position=u),e||sr(t))n.left=Math.max(n.left,h),n.top=Math.max(n.top,f),n.right=Math.min(n.right,h+d),n.bottom=Math.min(n.bottom,f+p);else{var y=Math.max(m,h+d);n.right=Math.min(n.right,y);var _=Math.max(v,f+p);n.bottom=Math.min(n.bottom,_)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function ur(t,e,n,r){var i=rr.clone(t),a={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+a.width>n.right&&(a.width-=i.left+a.width-n.right),r.adjustX&&i.left+a.width>n.right&&(i.left=Math.max(n.right-a.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+a.height>n.bottom&&(a.height-=i.top+a.height-n.bottom),r.adjustY&&i.top+a.height>n.bottom&&(i.top=Math.max(n.bottom-a.height,n.top)),rr.mix(i,a)}function cr(t){var e,n,r;if(rr.isWindow(t)||9===t.nodeType){var i=rr.getWindow(t);e={left:rr.getWindowScrollLeft(i),top:rr.getWindowScrollTop(i)},n=rr.viewportWidth(i),r=rr.viewportHeight(i)}else e=rr.offset(t),n=rr.outerWidth(t),r=rr.outerHeight(t);return e.width=n,e.height=r,e}function hr(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,a=t.height,o=t.left,s=t.top;return"c"===n?s+=a/2:"b"===n&&(s+=a),"c"===r?o+=i/2:"r"===r&&(o+=i),{left:o,top:s}}function fr(t,e,n,r,i){var a=hr(e,n[1]),o=hr(t,n[0]),s=[o.left-a.left,o.top-a.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function dr(t,e,n){return t.left<n.left||t.left+e.width>n.right}function pr(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function mr(t,e,n){return t.left>n.right||t.left+e.width<n.left}function vr(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function gr(t,e,n){var r=[];return rr.each(t,(function(t){r.push(t.replace(e,(function(t){return n[t]})))})),r}function yr(t,e){return t[e]=-t[e],t}function _r(t,e){var n;return(n=/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10))||0}function xr(t,e){t[0]=_r(t[0],e.width),t[1]=_r(t[1],e.height)}function br(t,e,n,r){var i=n.points,a=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,l=n.source||t;a=[].concat(a),o=[].concat(o);var u={},c=0,h,f=lr(l,!(!(s=s||{})||!s.alwaysByViewport)),d=cr(l);xr(a,d),xr(o,e);var p=fr(d,e,i,a,o),m=rr.merge(d,p);if(f&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&dr(p,d,f)){var v=gr(i,/[lr]/gi,{l:"r",r:"l"}),g=yr(a,0),y=yr(o,0),_;mr(fr(d,e,v,g,y),d,f)||(c=1,i=v,a=g,o=y)}if(s.adjustY&&pr(p,d,f)){var x=gr(i,/[tb]/gi,{t:"b",b:"t"}),b=yr(a,1),w=yr(o,1),M;vr(fr(d,e,x,b,w),d,f)||(c=1,i=x,a=b,o=w)}c&&(p=fr(d,e,i,a,o),rr.mix(m,p));var S=dr(p,d,f),E=pr(p,d,f);if(S||E){var T=i;S&&(T=gr(i,/[lr]/gi,{l:"r",r:"l"})),E&&(T=gr(i,/[tb]/gi,{t:"b",b:"t"})),i=T,a=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&S,u.adjustY=s.adjustY&&E,(u.adjustX||u.adjustY)&&(m=ur(p,d,f,u))}return m.width!==d.width&&rr.css(l,"width",rr.width(l)+m.width-d.width),m.height!==d.height&&rr.css(l,"height",rr.height(l)+m.height-d.height),rr.offset(l,{left:m.left,top:m.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:a,targetOffset:o,overflow:u}}function wr(t,e){var n=lr(t,e),r=cr(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function Mr(t,e,n){var r=n.target||e,i,a;return br(t,cr(r),n,!wr(r,n.overflow&&n.overflow.alwaysByViewport))}function Sr(t,e,n){var r,i,a=rr.getDocument(t),o=a.defaultView||a.parentWindow,s=rr.getWindowScrollLeft(o),l=rr.getWindowScrollTop(o),u=rr.viewportWidth(o),c=rr.viewportHeight(o),h={left:r="pageX"in e?e.pageX:s+e.clientX,top:i="pageY"in e?e.pageY:l+e.clientY,width:0,height:0},f=r>=0&&r<=s+u&&i>=0&&i<=l+c,d=[n.points[0],"cc"];return br(t,h,an(an({},n),{},{points:d}),f)}Mr.__getOffsetParent=ar,Mr.__getVisibleRectForElement=lr;var Er=null;function Tr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;function i(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=r.has(t);if((0,V.ZP)(!o,"Warning: There may be circular references"),o)return!1;if(t===e)return!0;if(n&&a>1)return!1;r.add(t);var s=a+1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var l=0;l<t.length;l++)if(!i(t[l],e[l],s))return!1;return!0}if(t&&e&&"object"===(0,d.Z)(t)&&"object"===(0,d.Z)(e)){var u=Object.keys(t);return u.length===Object.keys(e).length&&u.every((function(n){return i(t[n],e[n],s)}))}return!1}return i(t,e)}var Cr=Tr,kr=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}}return!1},Ar=function(t,e){var n=v.useRef(!1),r=v.useRef(null);function i(){window.clearTimeout(r.current)}function a(o){if(i(),n.current&&!0!==o)r.current=window.setTimeout((function(){n.current=!1,a()}),e);else{if(!1===t(o))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),e)}}return[a,function(){n.current=!1,i()}]};function Pr(t,e){return t===e||!(!t||!e)&&("pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e&&(t.clientX===e.clientX&&t.clientY===e.clientY))}function Lr(t,e){t!==document.activeElement&&(0,Ne.Z)(e,t)&&"function"==typeof t.focus&&t.focus()}function Dr(t,e){var n=null,r=null;function i(t){var i,a=(0,f.Z)(t,1)[0].target;if(document.documentElement.contains(a)){var o=a.getBoundingClientRect(),s=o.width,l=o.height,u=Math.floor(s),c=Math.floor(l);n===u&&r===c||Promise.resolve().then((function(){e({width:u,height:c})})),n=u,r=c}}var a=new Z.default(i);return t&&a.observe(t),function(){a.disconnect()}}function Rr(t){return"function"!=typeof t?null:t()}function Ir(t){return"object"===(0,d.Z)(t)&&t?t:null}var Nr=function t(e,n){var r=e.children,i=e.disabled,a=e.target,o=e.align,s=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,h=v.useRef({}),d=v.useRef(),p=v.Children.only(r),m=v.useRef({});m.current.disabled=i,m.current.target=a,m.current.align=o,m.current.onAlign=s;var g=Ar((function(){var t=m.current,e=t.disabled,n=t.target,r=t.align,i=t.onAlign,a=d.current;if(!e&&n&&a){var o,s=Rr(n),l=Ir(n);h.current.element=s,h.current.point=l,h.current.align=r;var u,c=document.activeElement;return s&&kr(s)?o=Mr(a,s,r):l&&(o=Sr(a,l,r)),Lr(c,a),i&&o&&i(a,o),!0}return!1}),c),y=(0,f.Z)(g,2),_=y[0],x=y[1],b=v.useState(),w=(0,f.Z)(b,2),M=w[0],S=w[1],E=v.useState(),T=(0,f.Z)(E,2),C=T[0],A=T[1];return k((function(){S(Rr(a)),A(Ir(a))})),v.useEffect((function(){h.current.element===M&&Pr(h.current.point,C)&&Cr(h.current.align,o)||_()})),v.useEffect((function(){var t;return Dr(d.current,_)}),[d.current]),v.useEffect((function(){var t;return Dr(M,_)}),[M]),v.useEffect((function(){i?x():_()}),[i]),v.useEffect((function(){var t;if(l)return Oe(window,"resize",_).remove}),[l]),v.useEffect((function(){return function(){x()}}),[]),v.useImperativeHandle(n,(function(){return{forceAlign:function t(){return _(!0)}}})),v.isValidElement(p)&&(p=v.cloneElement(p,{ref:(0,H.sQ)(p.ref,d)})),p},Or=v.forwardRef(Nr);Or.displayName="Align";var Fr,zr=Or;function Ur(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Ur=function t(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function t(e,n,r){return e[n]=r}}function c(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:C(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",m="executing",v="completed",g={};function y(){}function _(){}function x(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,M=w&&w(w(D([])));M&&M!==n&&r.call(M,o)&&(b=M);var S=x.prototype=y.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(i,a,o,s){var l=h(t[i],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==(0,d.Z)(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function t(r,i){function o(){return new e((function(t,e){n(r,i,t,e)}))}return a=a?a.then(o,o):o()}})}function C(e,n,r){var i=f;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError((0,d.Z)(e)+" is not iterable")}return _.prototype=x,i(S,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:_,configurable:!0}),_.displayName=u(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,l,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function e(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!n)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var i=this;function a(e,r){return l.type="throw",l.arg=n,i.next=e,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],l=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function t(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),g},finish:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var a=i.arg;P(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(n,r,i){return this.delegate={iterator:D(n),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}var Vr=n(97100),Br=["measure","alignPre","align",null,"motion"],Hr=function(t,e){var n=(0,A.Z)(null),r=(0,f.Z)(n,2),i=r[0],a=r[1],o=(0,v.useRef)();function s(t){a(t,!0)}function l(){U.Z.cancel(o.current)}function u(t){l(),o.current=(0,U.Z)((function(){s((function(t){switch(i){case"align":return"motion";case"motion":return"stable"}return t})),null==t||t()}))}return(0,v.useEffect)((function(){s("measure")}),[t]),(0,v.useEffect)((function(){if("measure"===i)e();i&&(o.current=(0,U.Z)((0,Vr.Z)(Ur().mark((function t(){var e,n;return Ur().wrap((function t(r){for(;;)switch(r.prev=r.next){case 0:e=Br.indexOf(i),(n=Br[e+1])&&-1!==e&&s(n);case 3:case"end":return r.stop()}}),t)})))))}),[i]),(0,v.useEffect)((function(){return function(){l()}}),[]),[i,u]},Gr=function(t){var e=v.useState({width:0,height:0}),n=(0,f.Z)(e,2),r=n[0],i=n[1],a;function o(t){var e=t.offsetWidth,n=t.offsetHeight,r=t.getBoundingClientRect(),a=r.width,o=r.height;Math.abs(e-a)<1&&Math.abs(n-o)<1&&(e=a,n=o),i({width:e,height:n})}return[v.useMemo((function(){var e={};if(t){var n=r.width,i=r.height;-1!==t.indexOf("height")&&i?e.height=i:-1!==t.indexOf("minHeight")&&i&&(e.minHeight=i),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,r]),o]},Wr=v.forwardRef((function(t,e){var n=t.visible,r=t.prefixCls,i=t.className,a=t.style,o=t.children,s=t.zIndex,l=t.stretch,u=t.destroyPopupOnHide,h=t.forceRender,d=t.align,p=t.point,g=t.getRootDomNode,_=t.getClassNameFromAlign,x=t.onAlign,b=t.onMouseEnter,w=t.onMouseLeave,M=t.onMouseDown,S=t.onTouchStart,E=t.onClick,T=(0,v.useRef)(),C=(0,v.useRef)(),A=(0,v.useState)(),P=(0,f.Z)(A,2),L=P[0],D=P[1],R=Gr(l),I=(0,f.Z)(R,2),N=I[0],O=I[1];function F(){l&&O(g())}var z=Hr(n,F),U=(0,f.Z)(z,2),V=U[0],B=U[1],H=(0,v.useState)(0),G=(0,f.Z)(H,2),W=G[0],Z=G[1],j=(0,v.useRef)();function q(){return p||g}function X(){var t;null===(t=T.current)||void 0===t||t.forceAlign()}function Y(t,e){var n=_(e);L!==n&&D(n),Z((function(t){return t+1})),"align"===V&&(null==x||x(t,e))}k((function(){"alignPre"===V&&Z(0)}),[V]),k((function(){"align"===V&&(W<3?X():B((function(){var t;null===(t=j.current)||void 0===t||t.call(j)})))}),[W]);var K=(0,m.Z)({},He(t));function J(){return new Promise((function(t){j.current=t}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(t){var e=K[t];K[t]=function(t,n){return B(),null==e?void 0:e(t,n)}})),v.useEffect((function(){K.motionName||"motion"!==V||B()}),[K.motionName,V]),v.useImperativeHandle(e,(function(){return{forceAlign:X,getElement:function t(){return C.current}}}));var Q=(0,m.Z)((0,m.Z)({},N),{},{zIndex:s,opacity:"motion"!==V&&"stable"!==V&&n?0:void 0,pointerEvents:n||"stable"===V?void 0:"none"},a),$=!0;null==d||!d.points||"align"!==V&&"stable"!==V||($=!1);var tt=o;return v.Children.count(o)>1&&(tt=v.createElement("div",{className:"".concat(r,"-content")},o)),v.createElement(Be.default,(0,c.Z)({visible:n,ref:C,leavedClassName:"".concat(r,"-hidden")},K,{onAppearPrepare:J,onEnterPrepare:J,removeOnLeave:u,forceRender:h}),(function(t,e){var n=t.className,a=t.style,o=y()(r,i,L,n);return v.createElement(zr,{target:q(),key:"popup",ref:T,monitorWindowResize:!0,disabled:$,align:d,onAlign:Y},v.createElement("div",{ref:e,className:o,onMouseEnter:b,onMouseLeave:w,onMouseDownCapture:M,onTouchStartCapture:S,onClick:E,style:(0,m.Z)((0,m.Z)({},a),Q)},tt))}))}));Wr.displayName="PopupInner";var Zr=Wr,jr=v.forwardRef((function(t,e){var n=t.prefixCls,r=t.visible,i=t.zIndex,a=t.children,o=t.mobile,s=(o=void 0===o?{}:o).popupClassName,l=o.popupStyle,u=o.popupMotion,h=void 0===u?{}:u,f=o.popupRender,d=t.onClick,p=v.useRef();v.useImperativeHandle(e,(function(){return{forceAlign:function t(){},getElement:function t(){return p.current}}}));var g=(0,m.Z)({zIndex:i},l),_=a;return v.Children.count(a)>1&&(_=v.createElement("div",{className:"".concat(n,"-content")},a)),f&&(_=f(_)),v.createElement(Be.default,(0,c.Z)({visible:r,ref:p,removeOnLeave:!0},h),(function(t,e){var r=t.className,i=t.style,a=y()(n,s,r);return v.createElement("div",{ref:e,className:a,onClick:d,style:(0,m.Z)((0,m.Z)({},i),g)},_)}))}));jr.displayName="MobilePopupInner";var qr=jr,Xr=["visible","mobile"],Yr=v.forwardRef((function(t,e){var n=t.visible,r=t.mobile,i=(0,p.Z)(t,Xr),a=(0,v.useState)(n),o=(0,f.Z)(a,2),s=o[0],l=o[1],u=(0,v.useState)(!1),h=(0,f.Z)(u,2),d=h[0],g=h[1],y=(0,m.Z)((0,m.Z)({},i),{},{visible:s});(0,v.useEffect)((function(){l(n),n&&r&&g(w())}),[n,r]);var _=d?v.createElement(qr,(0,c.Z)({},y,{mobile:r,ref:e})):v.createElement(Zr,(0,c.Z)({},y,{ref:e}));return v.createElement("div",null,v.createElement(Ge,y),_)}));Yr.displayName="Popup";var Kr=Yr,Jr,Qr=v.createContext(null);function $r(){}function ti(){return""}function ei(t){return t?t.ownerDocument:window.document}var ni=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function ri(t){var e=function(e){(0,et.Z)(r,e);var n=(0,nt.Z)(r);function r(t){var e,i;return(0,$.Z)(this,r),e=n.call(this,t),(0,h.Z)((0,Ie.Z)(e),"popupRef",v.createRef()),(0,h.Z)((0,Ie.Z)(e),"triggerRef",v.createRef()),(0,h.Z)((0,Ie.Z)(e),"portalContainer",void 0),(0,h.Z)((0,Ie.Z)(e),"attachId",void 0),(0,h.Z)((0,Ie.Z)(e),"clickOutsideHandler",void 0),(0,h.Z)((0,Ie.Z)(e),"touchOutsideHandler",void 0),(0,h.Z)((0,Ie.Z)(e),"contextMenuOutsideHandler1",void 0),(0,h.Z)((0,Ie.Z)(e),"contextMenuOutsideHandler2",void 0),(0,h.Z)((0,Ie.Z)(e),"mouseDownTimeout",void 0),(0,h.Z)((0,Ie.Z)(e),"focusTime",void 0),(0,h.Z)((0,Ie.Z)(e),"preClickTime",void 0),(0,h.Z)((0,Ie.Z)(e),"preTouchTime",void 0),(0,h.Z)((0,Ie.Z)(e),"delayTimer",void 0),(0,h.Z)((0,Ie.Z)(e),"hasPopupMouseDown",void 0),(0,h.Z)((0,Ie.Z)(e),"onMouseEnter",(function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)})),(0,h.Z)((0,Ie.Z)(e),"onMouseMove",(function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)})),(0,h.Z)((0,Ie.Z)(e),"onMouseLeave",(function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),(0,h.Z)((0,Ie.Z)(e),"onPopupMouseEnter",(function(){e.clearDelayTimer()})),(0,h.Z)((0,Ie.Z)(e),"onPopupMouseLeave",(function(t){var n;t.relatedTarget&&!t.relatedTarget.setTimeout&&(0,Ne.Z)(null===(n=e.popupRef.current)||void 0===n?void 0:n.getElement(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),(0,h.Z)((0,Ie.Z)(e),"onFocus",(function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))})),(0,h.Z)((0,Ie.Z)(e),"onMouseDown",(function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()})),(0,h.Z)((0,Ie.Z)(e),"onTouchStart",(function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()})),(0,h.Z)((0,Ie.Z)(e),"onBlur",(function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)})),(0,h.Z)((0,Ie.Z)(e),"onContextMenu",(function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)})),(0,h.Z)((0,Ie.Z)(e),"onContextMenuClose",(function(){e.isContextMenuToShow()&&e.close()})),(0,h.Z)((0,Ie.Z)(e),"onClick",(function(t){if(e.fireEvents("onClick",t),e.focusTime){var n;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,e.isClickToShow()&&(e.isClickToHide()||e.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault();var r=!e.state.popupVisible;(e.isClickToHide()&&!r||r&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)})),(0,h.Z)((0,Ie.Z)(e),"onPopupMouseDown",(function(){var t;(e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=window.setTimeout((function(){e.hasPopupMouseDown=!1}),0),e.context)&&(t=e.context).onPopupMouseDown.apply(t,arguments)})),(0,h.Z)((0,Ie.Z)(e),"onDocumentClick",(function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,r=e.getRootDomNode(),i=e.getPopupDomNode();(0,Ne.Z)(r,n)&&!e.isContextMenuOnly()||(0,Ne.Z)(i,n)||e.hasPopupMouseDown||e.close()}})),(0,h.Z)((0,Ie.Z)(e),"getRootDomNode",(function(){var t=e.props.getTriggerDOMNode;if(t)return t(e.triggerRef.current);try{var n=(0,G.Z)(e.triggerRef.current);if(n)return n}catch(t){}return Dt.findDOMNode((0,Ie.Z)(e))})),(0,h.Z)((0,Ie.Z)(e),"getPopupClassNameFromAlign",(function(t){var n=[],r=e.props,i=r.popupPlacement,a=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,l=r.getPopupClassNameFromAlign;return i&&a&&n.push(Ve(a,o,t,s)),l&&n.push(l(t)),n.join(" ")})),(0,h.Z)((0,Ie.Z)(e),"getComponent",(function(){var t=e.props,n=t.prefixCls,r=t.destroyPopupOnHide,i=t.popupClassName,a=t.onPopupAlign,o=t.popupMotion,s=t.popupAnimation,l=t.popupTransitionName,u=t.popupStyle,h=t.mask,f=t.maskAnimation,d=t.maskTransitionName,p=t.maskMotion,m=t.zIndex,g=t.popup,y=t.stretch,_=t.alignPoint,x=t.mobile,b=t.forceRender,w=t.onPopupClick,M=e.state,S=M.popupVisible,E=M.point,T=e.getPopupAlign(),C={};return e.isMouseEnterToShow()&&(C.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(C.onMouseLeave=e.onPopupMouseLeave),C.onMouseDown=e.onPopupMouseDown,C.onTouchStart=e.onPopupMouseDown,v.createElement(Kr,(0,c.Z)({prefixCls:n,destroyPopupOnHide:r,visible:S,point:_&&E,className:i,align:T,onAlign:a,animation:s,getClassNameFromAlign:e.getPopupClassNameFromAlign},C,{stretch:y,getRootDomNode:e.getRootDomNode,style:u,mask:h,zIndex:m,transitionName:l,maskAnimation:f,maskTransitionName:d,maskMotion:p,ref:e.popupRef,motion:o,mobile:x,forceRender:b,onClick:w}),"function"==typeof g?g():g)})),(0,h.Z)((0,Ie.Z)(e),"attachParent",(function(t){U.Z.cancel(e.attachId);var n=e.props,r=n.getPopupContainer,i=n.getDocument,a=e.getRootDomNode(),o;r?(a||0===r.length)&&(o=r(a)):o=i(e.getRootDomNode()).body,o?o.appendChild(t):e.attachId=(0,U.Z)((function(){e.attachParent(t)}))})),(0,h.Z)((0,Ie.Z)(e),"getContainer",(function(){if(!e.portalContainer){var t,n=(0,e.props.getDocument)(e.getRootDomNode()).createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",e.portalContainer=n}return e.attachParent(e.portalContainer),e.portalContainer})),(0,h.Z)((0,Ie.Z)(e),"setPoint",(function(t){var n;e.props.alignPoint&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})})),(0,h.Z)((0,Ie.Z)(e),"handlePortalUpdate",(function(){e.state.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)})),(0,h.Z)((0,Ie.Z)(e),"triggerContextValue",{onPopupMouseDown:e.onPopupMouseDown}),i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,e.state={prevPopupVisible:i,popupVisible:i},ni.forEach((function(t){e["fire".concat(t)]=function(n){e.fireEvents(t,n)}})),e}return(0,tt.Z)(r,[{key:"componentDidMount",value:function t(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function t(){var e=this.props,n,r;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(r=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Oe(r,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(r=r||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Oe(r,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(r=r||e.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Oe(r,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Oe(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function t(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),U.Z.cancel(this.attachId)}},{key:"getPopupDomNode",value:function t(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function t(){var e=this.props,n=e.popupPlacement,r=e.popupAlign,i=e.builtinPlacements;return n&&i?Ue(i,n,r):r}},{key:"setPopupVisible",value:function t(e,n){var r=this.props.alignPoint,i=this.state.popupVisible;this.clearDelayTimer(),i!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:i}),this.props.onPopupVisibleChange(e)),r&&n&&e&&this.setPoint(n)}},{key:"delaySetPopupVisible",value:function t(e,n,r){var i=this,a=1e3*n;if(this.clearDelayTimer(),a){var o=r?{pageX:r.pageX,pageY:r.pageY}:null;this.delayTimer=window.setTimeout((function(){i.setPopupVisible(e,o),i.clearDelayTimer()}),a)}else this.setPopupVisible(e,r)}},{key:"clearDelayTimer",value:function t(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function t(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function t(e){var n=this.props.children.props,r=this.props;return n[e]&&r[e]?this["fire".concat(e)]:n[e]||r[e]}},{key:"isClickToShow",value:function t(){var e=this.props,n=e.action,r=e.showAction;return-1!==n.indexOf("click")||-1!==r.indexOf("click")}},{key:"isContextMenuOnly",value:function t(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function t(){var e=this.props,n=e.action,r=e.showAction;return-1!==n.indexOf("contextMenu")||-1!==r.indexOf("contextMenu")}},{key:"isClickToHide",value:function t(){var e=this.props,n=e.action,r=e.hideAction;return-1!==n.indexOf("click")||-1!==r.indexOf("click")}},{key:"isMouseEnterToShow",value:function t(){var e=this.props,n=e.action,r=e.showAction;return-1!==n.indexOf("hover")||-1!==r.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function t(){var e=this.props,n=e.action,r=e.hideAction;return-1!==n.indexOf("hover")||-1!==r.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function t(){var e=this.props,n=e.action,r=e.showAction;return-1!==n.indexOf("focus")||-1!==r.indexOf("focus")}},{key:"isBlurToHide",value:function t(){var e=this.props,n=e.action,r=e.hideAction;return-1!==n.indexOf("focus")||-1!==r.indexOf("blur")}},{key:"forcePopupAlign",value:function t(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function t(e,n){var r=this.props.children.props[e];r&&r(n);var i=this.props[e];i&&i(n)}},{key:"close",value:function t(){this.setPopupVisible(!1)}},{key:"render",value:function e(){var n=this.state.popupVisible,r=this.props,i=r.children,a=r.forceRender,o=r.alignPoint,s=r.className,l=r.autoDestroy,u=v.Children.only(i),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var h=y()(u&&u.props&&u.props.className,s);h&&(c.className=h);var f=(0,m.Z)({},c);(0,H.Yr)(u)&&(f.ref=(0,H.sQ)(this.triggerRef,u.ref));var d=v.cloneElement(u,f),p;return(n||this.popupRef.current||a)&&(p=v.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&l&&(p=null),v.createElement(Qr.Provider,{value:this.triggerContextValue},d,p)}}],[{key:"getDerivedStateFromProps",value:function t(e,n){var r=e.popupVisible,i={};return void 0!==r&&n.popupVisible!==r&&(i.popupVisible=r,i.prevPopupVisible=n.popupVisible),i}}]),r}(v.Component);return(0,h.Z)(e,"contextType",Qr),(0,h.Z)(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:ti,getDocument:ei,onPopupVisibleChange:$r,afterPopupVisibleChange:$r,onPopupAlign:$r,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var ii=ri(Fe.Z),ai={adjustX:1,adjustY:1},oi={topLeft:{points:["bl","tl"],overflow:ai,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ai,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:ai,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:ai,offset:[4,0]}},si={topLeft:{points:["bl","tl"],overflow:ai,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ai,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:ai,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:ai,offset:[4,0]}},li=null;function ui(t,e,n){return e||(n?n[t]||n.other:void 0)}var ci={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function hi(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,a=t.popupClassName,o=t.popupOffset,s=t.disabled,l=t.mode,u=t.onVisibleChange,c=v.useContext(ee),d=c.getPopupContainer,p=c.rtl,g=c.subMenuOpenDelay,_=c.subMenuCloseDelay,x=c.builtinPlacements,b=c.triggerSubMenuAction,w=c.forceSubMenuRender,M=c.motion,S=c.defaultMotions,E=v.useState(!1),T=(0,f.Z)(E,2),C=T[0],k=T[1],A=p?(0,m.Z)((0,m.Z)({},si),x):(0,m.Z)((0,m.Z)({},oi),x),P=ci[l],L=ui(l,M,S),D=(0,m.Z)((0,m.Z)({},L),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=v.useRef();return v.useEffect((function(){return R.current=(0,U.Z)((function(){k(n)})),function(){U.Z.cancel(R.current)}}),[n]),v.createElement(ii,{prefixCls:e,popupClassName:y()("".concat(e,"-popup"),(0,h.Z)({},"".concat(e,"-rtl"),p),a),stretch:"horizontal"===l?"minWidth":null,getPopupContainer:d,builtinPlacements:A,popupPlacement:P,popupVisible:C,popup:i,popupAlign:o&&{offset:o},action:s?[]:[b],mouseEnterDelay:g,mouseLeaveDelay:_,onPopupVisibleChange:u,forceRender:w,popupMotion:D},r)}function fi(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,a="inline",o=v.useContext(ee),s=o.prefixCls,l=o.forceSubMenuRender,u=o.motion,h=o.defaultMotions,d=o.mode,p=v.useRef(!1);p.current=d===a;var g=v.useState(!p.current),y=(0,f.Z)(g,2),_=y[0],x=y[1],b=!!p.current&&n;v.useEffect((function(){p.current&&x(!1)}),[d]);var w=(0,m.Z)({},ui(a,u,h));r.length>1&&(w.motionAppear=!1);var M=w.onVisibleChanged;return w.onVisibleChanged=function(t){return p.current||t||x(!0),null==M?void 0:M(t)},_?null:v.createElement(re,{mode:a,locked:!p.current},v.createElement(Be.default,(0,c.Z)({visible:b},w,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),(function(t){var n=t.className,r=t.style;return v.createElement(De,{id:e,className:n,style:r},i)})))}var di=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],pi=["active"],mi=function t(e){var n,r=e.style,i=e.className,a=e.title,o=e.eventKey,s=e.warnKey,l=e.disabled,u=e.internalPopupClose,d=e.children,g=e.itemIcon,_=e.expandIcon,x=e.popupClassName,b=e.popupOffset,w=e.onClick,M=e.onMouseEnter,S=e.onMouseLeave,E=e.onTitleClick,T=e.onTitleMouseEnter,C=e.onTitleMouseLeave,k=(0,p.Z)(e,di),A=ge(o),P=v.useContext(ee),L=P.prefixCls,D=P.mode,R=P.openKeys,I=P.disabled,N=P.overflowDisabled,O=P.activeKey,F=P.selectedKeys,z=P.itemIcon,U=P.expandIcon,V=P.onItemClick,B=P.onOpenChange,H=P.onActive,G,W=v.useContext(_e)._internalRenderSubMenuItem,Z,j=v.useContext(pe).isSubPathKey,q=de(),X="".concat(L,"-submenu"),Y=I||l,K=v.useRef(),J=v.useRef();var Q=g||z,$=_||U,tt=R.includes(o),et=!N&&tt,nt=j(F,o),rt=ie(o,Y,T,C),it=rt.active,at=(0,p.Z)(rt,pi),ot=v.useState(!1),st=(0,f.Z)(ot,2),lt=st[0],ut=st[1],ct=function t(e){Y||ut(e)},ht=function t(e){ct(!0),null==M||M({key:o,domEvent:e})},ft=function t(e){ct(!1),null==S||S({key:o,domEvent:e})},dt=v.useMemo((function(){return it||"inline"!==D&&(lt||j([O],o))}),[D,it,O,lt,o,j]),pt=le(q.length),mt=function t(e){Y||(null==E||E({key:o,domEvent:e}),"inline"===D&&B(o,!tt))},vt=ke((function(t){null==w||w(oe(t)),V(t)})),gt=function t(e){"inline"!==D&&B(o,e)},yt=function t(){H(o)},_t=A&&"".concat(A,"-popup"),xt=v.createElement("div",(0,c.Z)({role:"menuitem",style:pt,className:"".concat(X,"-title"),tabIndex:Y?null:-1,ref:K,title:"string"==typeof a?a:null,"data-menu-id":N&&A?null:A,"aria-expanded":et,"aria-haspopup":!0,"aria-controls":_t,"aria-disabled":Y,onClick:mt,onFocus:yt},at),a,v.createElement(se,{icon:"horizontal"!==D?$:null,props:(0,m.Z)((0,m.Z)({},e),{},{isOpen:et,isSubMenu:!0})},v.createElement("i",{className:"".concat(X,"-arrow")}))),bt=v.useRef(D);if("inline"!==D&&(bt.current=q.length>1?"vertical":D),!N){var wt=bt.current;xt=v.createElement(hi,{mode:wt,prefixCls:X,visible:!u&&et&&"inline"!==D,popupClassName:x,popupOffset:b,popup:v.createElement(re,{mode:"horizontal"===wt?"vertical":wt},v.createElement(De,{id:_t,ref:J},d)),disabled:Y,onVisibleChange:gt},xt)}var Mt=v.createElement(Kt.Item,(0,c.Z)({role:"none"},k,{component:"li",style:r,className:y()(X,"".concat(X,"-").concat(D),i,(n={},(0,h.Z)(n,"".concat(X,"-open"),et),(0,h.Z)(n,"".concat(X,"-active"),dt),(0,h.Z)(n,"".concat(X,"-selected"),nt),(0,h.Z)(n,"".concat(X,"-disabled"),Y),n)),onMouseEnter:ht,onMouseLeave:ft}),xt,!N&&v.createElement(fi,{id:_t,open:et,keyPath:q},d));return W&&(Mt=W(Mt,e,{selected:nt,active:dt,open:et,disabled:Y})),v.createElement(re,{onItemClick:vt,mode:"horizontal"===D?"vertical":D,itemIcon:Q,expandIcon:$},Mt)};function vi(t){var e=t.eventKey,n=t.children,r=de(e),i=Ce(n,r),a=he(),o;return v.useEffect((function(){if(a)return a.registerPath(e,r),function(){a.unregisterPath(e,r)}}),[r]),o=a?i:v.createElement(mi,t,i),v.createElement(fe.Provider,{value:r},o)}var gi=n(62434);function yi(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kr(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),a=Number(i),o=null;return i&&!Number.isNaN(a)?o=a:r&&null===o&&(o=0),r&&t.disabled&&(o=null),null!==o&&(o>=0||e&&o<0)}return!1}function _i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,z.Z)(t.querySelectorAll("*")).filter((function(t){return yi(t,e)}));return yi(t,e)&&n.unshift(t),n}var xi=null;function bi(){xi=document.activeElement}function wi(){xi=null}function Mi(){if(xi)try{xi.focus()}catch(t){}}function Si(t,e){if(9===e.keyCode){var n=_i(t),r,i,a;if(n[e.shiftKey?0:n.length-1]===document.activeElement||t===document.activeElement)n[e.shiftKey?n.length-1:0].focus(),e.preventDefault()}}var Ei=vt.Z.LEFT,Ti=vt.Z.RIGHT,Ci=vt.Z.UP,ki=vt.Z.DOWN,Ai=vt.Z.ENTER,Pi=vt.Z.ESC,Li=vt.Z.HOME,Di=vt.Z.END,Ri=[Ci,ki,Ei,Ti];function Ii(t,e,n,r){var i,a,o,s,l="prev",u="next",c="children",f="parent";if("inline"===t&&r===Ai)return{inlineTrigger:!0};var d=(i={},(0,h.Z)(i,Ci,l),(0,h.Z)(i,ki,u),i),p=(a={},(0,h.Z)(a,Ei,n?u:l),(0,h.Z)(a,Ti,n?l:u),(0,h.Z)(a,ki,c),(0,h.Z)(a,Ai,c),a),m=(o={},(0,h.Z)(o,Ci,l),(0,h.Z)(o,ki,u),(0,h.Z)(o,Ai,c),(0,h.Z)(o,Pi,f),(0,h.Z)(o,Ei,n?c:f),(0,h.Z)(o,Ti,n?f:c),o),v,g;switch(null===(s={inline:d,horizontal:p,vertical:m,inlineSub:d,horizontalSub:m,verticalSub:m}["".concat(t).concat(e?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case u:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}function Ni(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function Oi(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function Fi(t,e){var n;return _i(t,!0).filter((function(t){return e.has(t)}))}function zi(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var i=Fi(t,e),a=i.length,o=i.findIndex((function(t){return n===t}));return r<0?-1===o?o=a-1:o-=1:r>0&&(o+=1),i[o=(o+a)%a]}function Ui(t,e,n,r,i,a,o,s,l,u){var c=v.useRef(),h=v.useRef();h.current=e;var f=function t(){U.Z.cancel(c.current)};return v.useEffect((function(){return function(){f()}}),[]),function(d){var p=d.which;if([].concat(Ri,[Ai,Pi,Li,Di]).includes(p)){var m,v,g,y=function t(){var e;return m=new Set,v=new Map,g=new Map,a().forEach((function(t){var e=document.querySelector("[data-menu-id='".concat(ve(r,t),"']"));e&&(m.add(e),g.set(e,t),v.set(t,e))})),m};y();var _,x=Oi(v.get(e),m),b=g.get(x),w=Ii(t,1===o(b,!0).length,n,p);if(!w&&p!==Li&&p!==Di)return;(Ri.includes(p)||[Li,Di].includes(p))&&d.preventDefault();var M=function t(e){if(e){var n=e,r=e.querySelector("a");(null==r?void 0:r.getAttribute("href"))&&(n=r);var i=g.get(e);s(i),f(),c.current=(0,U.Z)((function(){h.current===i&&n.focus()}))}};if([Li,Di].includes(p)||w.sibling||!x){var S,E,T=Fi(S=x&&"inline"!==t?Ni(x):i.current,m);E=p===Li?T[0]:p===Di?T[T.length-1]:zi(S,m,x,w.offset),M(E)}else if(w.inlineTrigger)l(b);else if(w.offset>0)l(b,!0),f(),c.current=(0,U.Z)((function(){y();var t=x.getAttribute("aria-controls"),e,n=zi(document.getElementById(t),m);M(n)}),5);else if(w.offset<0){var C=o(b,!0),k=C[C.length-2],A=v.get(k);l(k,!1),M(A)}}null==u||u(d)}}var Vi=Math.random().toFixed(5).toString().slice(2),Bi=0;function Hi(t){var e=L(t,{value:t}),n=(0,f.Z)(e,2),r=n[0],i=n[1];return v.useEffect((function(){Bi+=1;var t="".concat(Vi,"-").concat(Bi);i("rc-menu-uuid-".concat(t))}),[]),r}var Gi=n(22985);function Wi(t){Promise.resolve().then(t)}var Zi="__RC_UTIL_PATH_SPLIT__",ji=function t(e){return e.join(Zi)},qi=function t(e){return e.split(Zi)},Xi="rc-menu-more";function Yi(){var t=v.useState({}),e,n=(0,f.Z)(t,2)[1],r=(0,v.useRef)(new Map),i=(0,v.useRef)(new Map),a=v.useState([]),o=(0,f.Z)(a,2),s=o[0],l=o[1],u=(0,v.useRef)(0),c=(0,v.useRef)(!1),h=function t(){c.current||n({})},d=(0,v.useCallback)((function(t,e){var n=ji(e);i.current.set(n,t),r.current.set(t,n),u.current+=1;var a=u.current;Wi((function(){a===u.current&&h()}))}),[]),p=(0,v.useCallback)((function(t,e){var n=ji(e);i.current.delete(n),r.current.delete(t)}),[]),m=(0,v.useCallback)((function(t){l(t)}),[]),g=(0,v.useCallback)((function(t,e){var n=r.current.get(t)||"",i=qi(n);return e&&s.includes(i[0])&&i.unshift(Xi),i}),[s]),y=(0,v.useCallback)((function(t,e){return t.some((function(t){var n;return g(t,!0).includes(e)}))}),[g]),_=function t(){var e=(0,z.Z)(r.current.keys());return s.length&&e.push(Xi),e},x=(0,v.useCallback)((function(t){var e="".concat(r.current.get(t)).concat(Zi),n=new Set;return(0,z.Z)(i.current.keys()).forEach((function(t){t.startsWith(e)&&n.add(i.current.get(t))})),n}),[]);return v.useEffect((function(){return function(){c.current=!0}}),[]),{registerPath:d,unregisterPath:p,refreshOverflowKeys:m,isSubPathKey:y,getKeyPath:g,getKeys:_,getSubPathKeys:x}}var Ki=["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Ji=[],Qi=v.forwardRef((function(t,e){var n,r,i=t.prefixCls,a=void 0===i?"rc-menu":i,o=t.style,s=t.className,l=t.tabIndex,u=void 0===l?0:l,d=t.children,g=t.direction,_=t.id,x=t.mode,b=void 0===x?"vertical":x,w=t.inlineCollapsed,M=t.disabled,S=t.disabledOverflow,E=t.subMenuOpenDelay,T=void 0===E?.1:E,C=t.subMenuCloseDelay,k=void 0===C?.1:C,A=t.forceSubMenuRender,P=t.defaultOpenKeys,D=t.openKeys,R=t.activeKey,I=t.defaultActiveFirst,N=t.selectable,O=void 0===N||N,F=t.multiple,U=void 0!==F&&F,V=t.defaultSelectedKeys,B=t.selectedKeys,G=t.onSelect,W=t.onDeselect,Z=t.inlineIndent,j=void 0===Z?24:Z,q=t.motion,X=t.defaultMotions,Y=t.triggerSubMenuAction,K=void 0===Y?"hover":Y,J=t.builtinPlacements,Q=t.itemIcon,$=t.expandIcon,tt=t.overflowedIndicator,et=void 0===tt?"...":tt,nt=t.overflowedIndicatorPopupClassName,rt=t.getPopupContainer,it=t.onClick,at=t.onOpenChange,ot=t.onKeyDown,st=t.openAnimation,lt=t.openTransitionName,ut=t._internalRenderMenuItem,ct=t._internalRenderSubMenuItem,ht=(0,p.Z)(t,Ki),ft=Ce(d,Ji),dt=v.useState(!1),pt=(0,f.Z)(dt,2),mt=pt[0],vt=pt[1],gt=v.useRef(),yt=(0,H.sQ)(gt,e),_t=Hi(_),xt="rtl"===g;var bt=v.useMemo((function(){return"inline"!==b&&"vertical"!==b||!w?[b,!1]:["vertical",w]}),[b,w]),wt=(0,f.Z)(bt,2),Mt=wt[0],Et=wt[1],Tt=v.useState(0),Ct=(0,f.Z)(Tt,2),kt=Ct[0],At=Ct[1],Pt=kt>=ft.length-1||"horizontal"!==Mt||S,Lt=L(P,{value:D,postState:function t(e){return e||Ji}}),Dt=(0,f.Z)(Lt,2),Rt=Dt[0],It=Dt[1],Nt=function t(e){It(e),null==at||at(e)},Ot=v.useState(Rt),Ft=(0,f.Z)(Ot,2),zt=Ft[0],Ut=Ft[1],Vt="inline"===Mt,Bt=v.useRef(!1);v.useEffect((function(){Vt&&Ut(Rt)}),[Rt]),v.useEffect((function(){Bt.current?Vt?It(zt):Nt(Ji):Bt.current=!0}),[Vt]);var Ht=Yi(),Gt=Ht.registerPath,Wt=Ht.unregisterPath,Zt=Ht.refreshOverflowKeys,jt=Ht.isSubPathKey,qt=Ht.getKeyPath,Xt=Ht.getKeys,Yt=Ht.getSubPathKeys,Jt=v.useMemo((function(){return{registerPath:Gt,unregisterPath:Wt}}),[Gt,Wt]),Qt=v.useMemo((function(){return{isSubPathKey:jt}}),[jt]);v.useEffect((function(){Zt(Pt?Ji:ft.slice(kt+1).map((function(t){return t.key})))}),[kt,Pt]);var $t=L(R||I&&(null===(n=ft[0])||void 0===n?void 0:n.key),{value:R}),te=(0,f.Z)($t,2),ee=te[0],ne=te[1],ie=ke((function(t){ne(t)})),ae=ke((function(){ne(void 0)})),se=L(V||[],{value:B,postState:function t(e){return Array.isArray(e)?e:null==e?Ji:[e]}}),le=(0,f.Z)(se,2),ue=le[0],he=le[1],fe=function t(e){if(O){var n=e.key,r=ue.includes(n),i;i=U?r?ue.filter((function(t){return t!==n})):[].concat((0,z.Z)(ue),[n]):[n],he(i);var a=(0,m.Z)((0,m.Z)({},e),{},{selectedKeys:i});r?null==W||W(a):null==G||G(a)}!U&&Rt.length&&"inline"!==Mt&&Nt(Ji)},de=ke((function(t){null==it||it(oe(t)),fe(t)})),ve=ke((function(t,e){var n=Rt.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==Mt){var r=Yt(t);n=n.filter((function(t){return!r.has(t)}))}St()(Rt,n)||Nt(n)})),ge=ke(rt),ye,xe=Ui(Mt,ee,xt,_t,gt,Xt,qt,ne,(function t(e,n){var r=null!=n?n:!Rt.includes(e);ve(e,r)}),ot);v.useEffect((function(){vt(!0)}),[]);var be=v.useMemo((function(){return{_internalRenderMenuItem:ut,_internalRenderSubMenuItem:ct}}),[ut,ct]),we="horizontal"!==Mt||S?ft:ft.map((function(t,e){return v.createElement(re,{key:t.key,overflowDisabled:e>kt},t)})),Me=v.createElement(Kt,(0,c.Z)({id:_,ref:yt,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:Te,className:y()(a,"".concat(a,"-root"),"".concat(a,"-").concat(Mt),s,(r={},(0,h.Z)(r,"".concat(a,"-inline-collapsed"),Et),(0,h.Z)(r,"".concat(a,"-rtl"),xt),r)),dir:g,style:o,role:"menu",tabIndex:u,data:we,renderRawItem:function t(e){return e},renderRawRest:function t(e){var n=e.length,r=n?ft.slice(-n):null;return v.createElement(vi,{eventKey:Xi,title:et,disabled:Pt,internalPopupClose:0===n,popupClassName:nt},r)},maxCount:"horizontal"!==Mt||S?Kt.INVALIDATE:Kt.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function t(e){At(e)},onKeyDown:xe},ht));return v.createElement(_e.Provider,{value:be},v.createElement(me.Provider,{value:_t},v.createElement(re,{prefixCls:a,mode:Mt,openKeys:Rt,rtl:xt,disabled:M,motion:mt?q:null,defaultMotions:mt?X:null,activeKey:ee,onActive:ie,onInactive:ae,selectedKeys:ue,inlineIndent:j,subMenuOpenDelay:T,subMenuCloseDelay:k,forceSubMenuRender:A,builtinPlacements:J,triggerSubMenuAction:K,getPopupContainer:ge,itemIcon:Q,expandIcon:$,onItemClick:de,onOpenChange:ve},v.createElement(pe.Provider,{value:Qt},Me),v.createElement("div",{style:{display:"none"},"aria-hidden":!0},v.createElement(ce.Provider,{value:Jt},ft)))))})),$i,ta=["className","title","eventKey","children"],ea=["children"],na=function t(e){var n=e.className,r=e.title,i=e.eventKey,a=e.children,o=(0,p.Z)(e,ta),s,l=v.useContext(ee).prefixCls,u="".concat(l,"-item-group");return v.createElement("li",(0,c.Z)({},o,{onClick:function t(e){return e.stopPropagation()},className:y()(u,n)}),v.createElement("div",{className:"".concat(u,"-title"),title:"string"==typeof r?r:void 0},r),v.createElement("ul",{className:"".concat(u,"-list")},a))};function ra(t){var e=t.children,n=(0,p.Z)(t,ea),r,i=Ce(e,de(n.eventKey)),a;return he()?i:v.createElement(na,Jt(n,["warnKey"]),i)}function ia(t){var e=t.className,n=t.style,r,i=v.useContext(ee).prefixCls,a;return he()?null:v.createElement("li",{className:y()("".concat(i,"-item-divider"),e),style:n})}var aa=de,oa=Qi;oa.Item=Te,oa.SubMenu=vi,oa.ItemGroup=ra,oa.Divider=ia;var sa=oa,la={adjustX:1,adjustY:1},ua=[0,0],ca,ha={topLeft:{points:["bl","tl"],overflow:la,offset:[0,-4],targetOffset:ua},topCenter:{points:["bc","tc"],overflow:la,offset:[0,-4],targetOffset:ua},topRight:{points:["br","tr"],overflow:la,offset:[0,-4],targetOffset:ua},bottomLeft:{points:["tl","bl"],overflow:la,offset:[0,4],targetOffset:ua},bottomCenter:{points:["tc","bc"],overflow:la,offset:[0,4],targetOffset:ua},bottomRight:{points:["tr","br"],overflow:la,offset:[0,4],targetOffset:ua}},fa=vt.Z.ESC,da=vt.Z.TAB;function pa(t){var e=t.visible,n=t.setTriggerVisible,r=t.triggerRef,i=t.menuRef,a=t.onVisibleChange,o=t.autoFocus,s=v.useRef(!1),l=function t(){var i,o,s,l;e&&r.current&&(null===(i=r.current)||void 0===i||null===(o=i.triggerRef)||void 0===o||null===(s=o.current)||void 0===s||null===(l=s.focus)||void 0===l||l.call(s),n(!1),"function"==typeof a&&a(!1))},u=function t(){var e,n;null===(e=i.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e),s.current=!0},c=function t(e){var n;switch(e.keyCode){case fa:l();break;case da:!s.current&&(null===(n=i.current)||void 0===n?void 0:n.focus)?(e.preventDefault(),u()):l()}};v.useEffect((function(){return e?(window.addEventListener("keydown",c),o&&(0,U.Z)(u,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[e])}var ma=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function va(t,e){var n=t.arrow,r=void 0!==n&&n,i=t.prefixCls,a=void 0===i?"rc-dropdown":i,o=t.transitionName,s=t.animation,l=t.align,u=t.placement,c=void 0===u?"bottomLeft":u,d=t.placements,g=void 0===d?ha:d,_=t.getPopupContainer,x=t.showAction,b=t.hideAction,w=t.overlayClassName,M=t.overlayStyle,S=t.visible,E=t.trigger,T=void 0===E?["hover"]:E,C=t.autoFocus,k=(0,p.Z)(t,ma),A=v.useState(),P=(0,f.Z)(A,2),L=P[0],D=P[1],R="visible"in t?S:L,I=v.useRef(null);v.useImperativeHandle(e,(function(){return I.current}));var N=v.useRef(null),O="".concat(a,"-menu");pa({visible:R,setTriggerVisible:D,triggerRef:I,menuRef:N,onVisibleChange:t.onVisibleChange,autoFocus:C});var F=function e(){var n=t.overlay,r;return r="function"==typeof n?n():n},z=function e(n){var r=t.onOverlayClick,i=F().props;D(!1),r&&r(n),i.onClick&&i.onClick(n)},U=function e(n){var r=t.onVisibleChange;D(n),"function"==typeof r&&r(n)},V=function t(){var e,n=F(),i=(0,H.sQ)(N,n.ref),o=(e={prefixCls:O},(0,h.Z)(e,"data-dropdown-inject",!0),(0,h.Z)(e,"onClick",z),(0,h.Z)(e,"ref",(0,H.Yr)(n)?i:void 0),e);return"string"==typeof n.type&&(delete o.prefixCls,delete o["data-dropdown-inject"]),v.createElement(v.Fragment,null,r&&v.createElement("div",{className:"".concat(a,"-arrow")}),v.cloneElement(n,o))},B=function e(){var n;return"function"==typeof t.overlay?V:V()},G=function e(){var n=t.minOverlayWidthMatchTrigger,r=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?n:!r},W=function e(){var n=t.openClassName;return void 0!==n?n:"".concat(a,"-open")},Z=function e(){var n=t.children,r=n.props?n.props:{},i=y()(r.className,W());return R&&n?v.cloneElement(n,{className:i}):n},j=b;return j||-1===T.indexOf("contextMenu")||(j=["click"]),v.createElement(ii,(0,m.Z)((0,m.Z)({builtinPlacements:g},k),{},{prefixCls:a,ref:I,popupClassName:y()(w,(0,h.Z)({},"".concat(a,"-show-arrow"),r)),popupStyle:M,action:T,showAction:x,hideAction:j||[],popupPlacement:c,popupAlign:l,popupTransitionName:o,popupAnimation:s,popupVisible:R,stretch:G()?"minWidth":"",popup:B(),onPopupVisibleChange:U,getPopupContainer:_}),Z())}var ga,ya=v.forwardRef(va);function _a(t,e){var n=t.prefixCls,r=t.editable,i=t.locale,a=t.style;return r&&!1!==r.showAdd?v.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":(null==i?void 0:i.addAriaLabel)||"Add tab",onClick:function t(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null}var xa=v.forwardRef(_a);function ba(t,e){var n=t.prefixCls,r=t.id,i=t.tabs,a=t.locale,o=t.mobile,s=t.moreIcon,l=void 0===s?"More":s,u=t.moreTransitionName,c=t.style,d=t.className,p=t.editable,m=t.tabBarGutter,g=t.rtl,_=t.removeAriaLabel,x=t.onTabClick,b=(0,v.useState)(!1),w=(0,f.Z)(b,2),M=w[0],S=w[1],E=(0,v.useState)(null),T=(0,f.Z)(E,2),C=T[0],k=T[1],A="".concat(r,"-more-popup"),P="".concat(n,"-dropdown"),L=null!==C?"".concat(A,"-").concat(C):null,D=null==a?void 0:a.dropdownAriaLabel;function R(t,e){t.preventDefault(),t.stopPropagation(),p.onEdit("remove",{key:e,event:t})}var I=v.createElement(sa,{onClick:function t(e){var n=e.key,r=e.domEvent;x(n,r),S(!1)},id:A,tabIndex:-1,role:"listbox","aria-activedescendant":L,selectedKeys:[C],"aria-label":void 0!==D?D:"expanded dropdown"},i.map((function(t){var e=p&&!1!==t.closable&&!t.disabled;return v.createElement(Te,{key:t.key,id:"".concat(A,"-").concat(t.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(t.key),disabled:t.disabled},v.createElement("span",null,t.tab),e&&v.createElement("button",{type:"button","aria-label":_||"remove",tabIndex:0,className:"".concat(P,"-menu-item-remove"),onClick:function e(n){n.stopPropagation(),R(n,t.key)}},t.closeIcon||p.removeIcon||"\xd7"))})));function N(t){for(var e=i.filter((function(t){return!t.disabled})),n=e.findIndex((function(t){return t.key===C}))||0,r=e.length,a=0;a<r;a+=1){var o=e[n=(n+t+r)%r];if(!o.disabled)return void k(o.key)}}function O(t){var e=t.which;if(M)switch(e){case vt.Z.UP:N(-1),t.preventDefault();break;case vt.Z.DOWN:N(1),t.preventDefault();break;case vt.Z.ESC:S(!1);break;case vt.Z.SPACE:case vt.Z.ENTER:null!==C&&x(C,t)}else[vt.Z.DOWN,vt.Z.SPACE,vt.Z.ENTER].includes(e)&&(S(!0),t.preventDefault())}(0,v.useEffect)((function(){var t=document.getElementById(L);t&&t.scrollIntoView&&t.scrollIntoView(!1)}),[C]),(0,v.useEffect)((function(){M||k(null)}),[M]);var F=(0,h.Z)({},g?"marginRight":"marginLeft",m);i.length||(F.visibility="hidden",F.order=1);var z=y()((0,h.Z)({},"".concat(P,"-rtl"),g)),U=o?null:v.createElement(ya,{prefixCls:P,overlay:I,trigger:["hover"],visible:M,transitionName:u,onVisibleChange:S,overlayClassName:z,mouseEnterDelay:.1,mouseLeaveDelay:.1},v.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:F,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(r,"-more"),"aria-expanded":M,onKeyDown:O},l));return v.createElement("div",{className:y()("".concat(n,"-nav-operations"),d),style:c,ref:e},U,v.createElement(xa,{prefixCls:n,locale:a,editable:p}))}var wa=v.memo(v.forwardRef(ba),(function(t,e){return e.tabMoving})),Ma=(0,v.createContext)(null),Sa=.1,Ea=.01,Ta=20,Ca=Math.pow(.995,Ta);function ka(t,e){var n=(0,v.useState)(),r=(0,f.Z)(n,2),i=r[0],a=r[1],o=(0,v.useState)(0),s=(0,f.Z)(o,2),l=s[0],u=s[1],c=(0,v.useState)(0),h=(0,f.Z)(c,2),d=h[0],p=h[1],m=(0,v.useState)(),g=(0,f.Z)(m,2),y=g[0],_=g[1],x=(0,v.useRef)();function b(t){var e=t.touches[0],n=e.screenX,r=e.screenY;a({x:n,y:r}),window.clearInterval(x.current)}function w(t){if(i){t.preventDefault();var n=t.touches[0],r=n.screenX,o=n.screenY;a({x:r,y:o});var s=r-i.x,c=o-i.y;e(s,c);var h=Date.now();u(h),p(h-l),_({x:s,y:c})}}function M(){if(i&&(a(null),_(null),y)){var t=y.x/d,n=y.y/d,r=Math.abs(t),o=Math.abs(n);if(Math.max(r,o)<Sa)return;var s=t,l=n;x.current=window.setInterval((function(){Math.abs(s)<Ea&&Math.abs(l)<Ea?window.clearInterval(x.current):e((s*=Ca)*Ta,(l*=Ca)*Ta)}),Ta)}}var S=(0,v.useRef)();function E(t){var n=t.deltaX,r=t.deltaY,i=0,a=Math.abs(n),o=Math.abs(r);a===o?i="x"===S.current?n:r:a>o?(i=n,S.current="x"):(i=r,S.current="y"),e(-i,-i)&&t.preventDefault()}var T=(0,v.useRef)(null);T.current={onTouchStart:b,onTouchMove:w,onTouchEnd:M,onWheel:E},v.useEffect((function(){function e(t){T.current.onTouchStart(t)}function n(t){T.current.onTouchMove(t)}function r(t){T.current.onTouchEnd(t)}function i(t){T.current.onWheel(t)}return document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),t.current.addEventListener("touchstart",e,{passive:!1}),t.current.addEventListener("wheel",i),function(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}}),[])}function Aa(){var t=(0,v.useRef)(new Map);function e(e){return t.current.has(e)||t.current.set(e,v.createRef()),t.current.get(e)}function n(e){t.current.delete(e)}return[e,n]}function Pa(t,e){var n=v.useRef(t),r=v.useState({}),i,a=(0,f.Z)(r,2)[1];function o(t){var r="function"==typeof t?t(n.current):t;r!==n.current&&e(r,n.current),n.current=r,a({})}return[n.current,o]}var La=function t(e){var n=e.position,r=e.prefixCls,i=e.extra,a;if(!i)return null;var o={};return i&&"object"===(0,d.Z)(i)&&!v.isValidElement(i)?o=i:o.right=i,"right"===n&&(a=o.right),"left"===n&&(a=o.left),a?v.createElement("div",{className:"".concat(r,"-extra-content")},a):null};function Da(t,e){var n,r=v.useContext(Ma),i=r.prefixCls,a=r.tabs,o=t.className,s=t.style,l=t.id,u=t.animated,d=t.activeKey,p=t.rtl,g=t.extra,_=t.editable,x=t.locale,b=t.tabPosition,w=t.tabBarGutter,M=t.children,S=t.onTabClick,E=t.onTabScroll,T=(0,v.useRef)(),C=(0,v.useRef)(),k=(0,v.useRef)(),A=(0,v.useRef)(),P=Aa(),L=(0,f.Z)(P,2),D=L[0],R=L[1],I="top"===b||"bottom"===b,N=Pa(0,(function(t,e){I&&E&&E({direction:t>e?"left":"right"})})),O=(0,f.Z)(N,2),F=O[0],V=O[1],B=Pa(0,(function(t,e){!I&&E&&E({direction:t>e?"top":"bottom"})})),H=(0,f.Z)(B,2),G=H[0],W=H[1],Z=(0,v.useState)(0),j=(0,f.Z)(Z,2),q=j[0],X=j[1],Y=(0,v.useState)(0),K=(0,f.Z)(Y,2),J=K[0],Q=K[1],$=(0,v.useState)(null),tt=(0,f.Z)($,2),et=tt[0],nt=tt[1],rt=(0,v.useState)(null),it=(0,f.Z)(rt,2),at=it[0],ot=it[1],st=(0,v.useState)(0),lt=(0,f.Z)(st,2),ut=lt[0],ct=lt[1],ht=(0,v.useState)(0),mt=(0,f.Z)(ht,2),vt=mt[0],gt=mt[1],_t=pt(new Map),bt=(0,f.Z)(_t,2),Mt=bt[0],St=bt[1],Et=xt(a,Mt,q),Tt="".concat(i,"-nav-operations-hidden"),Ct=0,kt=0;function At(t){return t<Ct?Ct:t>kt?kt:t}I?p?(Ct=0,kt=Math.max(0,q-et)):(Ct=Math.min(0,et-q),kt=0):(Ct=Math.min(0,at-J),kt=0);var Pt=(0,v.useRef)(),Lt=(0,v.useState)(),Dt=(0,f.Z)(Lt,2),Rt=Dt[0],It=Dt[1];function Nt(){It(Date.now())}function Ot(){window.clearTimeout(Pt.current)}function Ft(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=Et.get(t)||{width:0,height:0,left:0,right:0,top:0};if(I){var n=F;p?e.right<F?n=e.right:e.right+e.width>F+et&&(n=e.right+e.width-et):e.left<-F?n=-e.left:e.left+e.width>-F+et&&(n=-(e.left+e.width-et)),W(0),V(At(n))}else{var r=G;e.top<-G?r=-e.top:e.top+e.height>-G+at&&(r=-(e.top+e.height-at)),V(0),W(At(r))}}ka(T,(function(t,e){function n(t,e){t((function(t){var n;return At(t+e)}))}if(I){if(et>=q)return!1;n(V,t)}else{if(at>=J)return!1;n(W,e)}return Ot(),Nt(),!0})),(0,v.useEffect)((function(){return Ot(),Rt&&(Pt.current=window.setTimeout((function(){It(0)}),100)),Ot}),[Rt]);var zt=wt(Et,{width:et,height:at,left:F,top:G},{width:q,height:J},{width:ut,height:vt},(0,m.Z)((0,m.Z)({},t),{},{tabs:a})),Ut=(0,f.Z)(zt,2),Vt=Ut[0],Bt=Ut[1],Ht={};"top"===b||"bottom"===b?Ht[p?"marginRight":"marginLeft"]=w:Ht.marginTop=w;var Gt=a.map((function(t,e){var n=t.key;return v.createElement(yt,{id:l,prefixCls:i,key:n,tab:t,style:0===e?void 0:Ht,closable:t.closable,editable:_,active:n===d,renderWrapper:M,removeAriaLabel:null==x?void 0:x.removeAriaLabel,ref:D(n),onClick:function t(e){S(n,e)},onRemove:function t(){R(n)},onFocus:function t(){Ft(n),Nt(),T.current&&(p||(T.current.scrollLeft=0),T.current.scrollTop=0)}})})),Wt=dt((function(){var t,e,n,r,i,o,s=(null===(t=T.current)||void 0===t?void 0:t.offsetWidth)||0,l=(null===(e=T.current)||void 0===e?void 0:e.offsetHeight)||0,u=(null===(n=A.current)||void 0===n?void 0:n.offsetWidth)||0,c=(null===(r=A.current)||void 0===r?void 0:r.offsetHeight)||0;nt(s),ot(l),ct(u),gt(c);var h=((null===(i=C.current)||void 0===i?void 0:i.offsetWidth)||0)-u,f=((null===(o=C.current)||void 0===o?void 0:o.offsetHeight)||0)-c;X(h),Q(f),St((function(){var t=new Map;return a.forEach((function(e){var n=e.key,r=D(n).current;r&&t.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),t}))})),Zt=a.slice(0,Vt),jt=a.slice(Bt+1),qt=[].concat((0,z.Z)(Zt),(0,z.Z)(jt)),Xt=(0,v.useState)(),Yt=(0,f.Z)(Xt,2),Kt=Yt[0],Jt=Yt[1],Qt=Et.get(d),$t=(0,v.useRef)();function te(){U.Z.cancel($t.current)}(0,v.useEffect)((function(){var t={};return Qt&&(I?(p?t.right=Qt.right:t.left=Qt.left,t.width=Qt.width):(t.top=Qt.top,t.height=Qt.height)),te(),$t.current=(0,U.Z)((function(){Jt(t)})),te}),[Qt,I,p]),(0,v.useEffect)((function(){Ft()}),[d,Qt,Et,I]),(0,v.useEffect)((function(){Wt()}),[p,w,d,a.map((function(t){return t.key})).join("_")]);var ee=!!qt.length,ne="".concat(i,"-nav-wrap"),re,ie,ae,oe;return I?p?(ie=F>0,re=F+et<q):(re=F<0,ie=-F+et<q):(ae=G<0,oe=-G+at<J),v.createElement("div",{ref:e,role:"tablist",className:y()("".concat(i,"-nav"),o),style:s,onKeyDown:function t(){Nt()}},v.createElement(La,{position:"left",extra:g,prefixCls:i}),v.createElement(ft,{onResize:Wt},v.createElement("div",{className:y()(ne,(n={},(0,h.Z)(n,"".concat(ne,"-ping-left"),re),(0,h.Z)(n,"".concat(ne,"-ping-right"),ie),(0,h.Z)(n,"".concat(ne,"-ping-top"),ae),(0,h.Z)(n,"".concat(ne,"-ping-bottom"),oe),n)),ref:T},v.createElement(ft,{onResize:Wt},v.createElement("div",{ref:C,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(F,"px, ").concat(G,"px)"),transition:Rt?"none":void 0}},Gt,v.createElement(xa,{ref:A,prefixCls:i,locale:x,editable:_,style:(0,m.Z)((0,m.Z)({},0===Gt.length?void 0:Ht),{},{visibility:ee?"hidden":null})}),v.createElement("div",{className:y()("".concat(i,"-ink-bar"),(0,h.Z)({},"".concat(i,"-ink-bar-animated"),u.inkBar)),style:Kt}))))),v.createElement(wa,(0,c.Z)({},t,{removeAriaLabel:null==x?void 0:x.removeAriaLabel,ref:k,prefixCls:i,tabs:qt,className:!ee&&Tt,tabMoving:!!Rt})),v.createElement(La,{position:"right",extra:g,prefixCls:i}))}var Ra=v.forwardRef(Da);function Ia(t){var e=t.id,n=t.activeKey,r=t.animated,i=t.tabPosition,a=t.rtl,o=t.destroyInactiveTabPane,s=v.useContext(Ma),l=s.prefixCls,u=s.tabs,c=r.tabPane,f=u.findIndex((function(t){return t.key===n}));return v.createElement("div",{className:y()("".concat(l,"-content-holder"))},v.createElement("div",{className:y()("".concat(l,"-content"),"".concat(l,"-content-").concat(i),(0,h.Z)({},"".concat(l,"-content-animated"),c)),style:f&&c?(0,h.Z)({},a?"marginRight":"marginLeft","-".concat(f,"00%")):null},u.map((function(t){return v.cloneElement(t.node,{key:t.key,prefixCls:l,tabKey:t.key,id:e,animated:c,active:t.key===n,destroyInactiveTabPane:o})}))))}function Na(t){var e=t.prefixCls,n=t.forceRender,r=t.className,i=t.style,a=t.id,o=t.active,s=t.animated,l=t.destroyInactiveTabPane,u=t.tabKey,c=t.children,h=v.useState(n),d=(0,f.Z)(h,2),p=d[0],g=d[1];v.useEffect((function(){o?g(!0):l&&g(!1)}),[o,l]);var _={};return o||(s?(_.visibility="hidden",_.height=0,_.overflowY="hidden"):_.display="none"),v.createElement("div",{id:a&&"".concat(a,"-panel-").concat(u),role:"tabpanel",tabIndex:o?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(u),"aria-hidden":!o,style:(0,m.Z)((0,m.Z)({},_),i),className:y()("".concat(e,"-tabpane"),o&&"".concat(e,"-tabpane-active"),r)},(o||p||n)&&c)}var Oa=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"],Fa=0;function za(t){return(0,_.Z)(t).map((function(t){if(v.isValidElement(t)){var e=void 0!==t.key?String(t.key):void 0;return(0,m.Z)((0,m.Z)({key:e},t.props),{},{node:t})}return null})).filter((function(t){return t}))}function Ua(t,e){var n,r=t.id,i=t.prefixCls,a=void 0===i?"rc-tabs":i,o=t.className,s=t.children,l=t.direction,u=t.activeKey,g=t.defaultActiveKey,_=t.editable,x=t.animated,b=void 0===x?{inkBar:!0,tabPane:!1}:x,M=t.tabPosition,S=void 0===M?"top":M,E=t.tabBarGutter,T=t.tabBarStyle,C=t.tabBarExtraContent,k=t.locale,A=t.moreIcon,P=t.moreTransitionName,D=t.destroyInactiveTabPane,R=t.renderTabBar,I=t.onChange,N=t.onTabClick,O=t.onTabScroll,F=(0,p.Z)(t,Oa),z=za(s),U="rtl"===l,V;V=!1===b?{inkBar:!1,tabPane:!1}:!0===b?{inkBar:!0,tabPane:!0}:(0,m.Z)({inkBar:!0,tabPane:!1},"object"===(0,d.Z)(b)?b:{});var B=(0,v.useState)(!1),H=(0,f.Z)(B,2),G=H[0],W=H[1];(0,v.useEffect)((function(){W(w())}),[]);var Z=L((function(){var t;return null===(t=z[0])||void 0===t?void 0:t.key}),{value:u,defaultValue:g}),j=(0,f.Z)(Z,2),q=j[0],X=j[1],Y=(0,v.useState)((function(){return z.findIndex((function(t){return t.key===q}))})),K=(0,f.Z)(Y,2),J=K[0],Q=K[1];(0,v.useEffect)((function(){var t=z.findIndex((function(t){return t.key===q})),e;-1===t&&(t=Math.max(0,Math.min(J,z.length-1)),X(null===(e=z[t])||void 0===e?void 0:e.key));Q(t)}),[z.map((function(t){return t.key})).join("_"),q,J]);var $=L(null,{value:r}),tt=(0,f.Z)($,2),et=tt[0],nt=tt[1],rt=S;function it(t,e){null==N||N(t,e);var n=t!==q;X(t),n&&(null==I||I(t))}G&&!["left","right"].includes(S)&&(rt="top"),(0,v.useEffect)((function(){r||(nt("rc-tabs-".concat(Fa)),Fa+=1)}),[]);var at={id:et,activeKey:q,animated:V,tabPosition:rt,rtl:U,mobile:G},ot,st=(0,m.Z)((0,m.Z)({},at),{},{editable:_,locale:k,moreIcon:A,moreTransitionName:P,tabBarGutter:E,onTabClick:it,onTabScroll:O,extra:C,style:T,panes:s});return ot=R?R(st,Ra):v.createElement(Ra,st),v.createElement(Ma.Provider,{value:{tabs:z,prefixCls:a}},v.createElement("div",(0,c.Z)({ref:e,id:r,className:y()(a,"".concat(a,"-").concat(rt),(n={},(0,h.Z)(n,"".concat(a,"-mobile"),G),(0,h.Z)(n,"".concat(a,"-editable"),_),(0,h.Z)(n,"".concat(a,"-rtl"),U),n),o)},F),ot,v.createElement(Ia,(0,c.Z)({destroyInactiveTabPane:D},at,{animated:V}))))}var Va=v.forwardRef(Ua);Va.TabPane=Na;var Ba,Ha=Va},71015:function(t,e,n){"use strict";function r(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}n.d(e,{Z:function(){return r}})},85373:function(t,e,n){"use strict";var r=n(71796),i=n.n(r),a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function t(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=a.F1&&n<=a.F12)return!1;switch(n){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function t(e){if(e>=a.ZERO&&e<=a.NINE)return!0;if(e>=a.NUM_ZERO&&e<=a.NUM_MULTIPLY)return!0;if(e>=a.A&&e<=a.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};e.Z=a},32459:function(t,e,n){"use strict";var r=n(77185),i=n(52623),a=n(82635),o=(0,r.forwardRef)((function(t,e){var n=t.didUpdate,o=t.getContainer,s=t.children,l=(0,r.useRef)(),u=(0,r.useRef)();(0,r.useImperativeHandle)(e,(function(){return{}}));var c=(0,r.useRef)(!1);return!c.current&&(0,a.Z)()&&(u.current=o(),l.current=u.current.parentNode,c.current=!0),(0,r.useEffect)((function(){null==n||n(t)})),(0,r.useEffect)((function(){return null===u.current.parentNode&&null!==l.current&&l.current.appendChild(u.current),function(){var t,e;null===(t=u.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(u.current)}}),[]),u.current?i.createPortal(s,u.current):null}));e.Z=o},65712:function(t,e,n){var r,i,a;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=n.nmd(t),n(83639),n(47075),n(61529),n(37296),n(66054),n(57973),n(40722),n(60638),n(86612),n(59329),n(36024),n(80875),n(51395),n(40840),n(54239),n(47721),n(82205),n(77513),n(9758),n(58220),n(69559),n(92832),n(7688),n(63670),n(71796),n(61036),n(98452),n(2451),n(55828),n(96475),n(64314),function s(l,u){"object"===o(e)&&"object"===o(t)?t.exports=u(n(77185)):(i=[n(77185)],void 0===(a="function"==typeof(r=u)?r.apply(e,i):r)||(t.exports=a))}(this,(function(t){return function(){var e={"./node_modules/css-mediaquery/index.js":
/*!**********************************************!*\
          !*** ./node_modules/css-mediaquery/index.js ***!
          \**********************************************/
function t(e,n){"use strict";n.match=l,n.parse=u;var r=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,i=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,a=/^(?:(min|max)-)?(.+)/,o=/(em|rem|px|cm|mm|in|pt|pc)?$/,s=/(dpi|dpcm|dppx)?$/;function l(t,e){return u(t).some((function(t){var n=t.inverse,r="all"===t.type||e.type===t.type;if(r&&n||!r&&!n)return!1;var i=t.expressions.every((function(t){var n=t.feature,r=t.modifier,i=t.value,a=e[n];if(!a)return!1;switch(n){case"orientation":case"scan":return a.toLowerCase()===i.toLowerCase();case"width":case"height":case"device-width":case"device-height":i=f(i),a=f(a);break;case"resolution":i=h(i),a=h(a);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":i=c(i),a=c(a);break;case"grid":case"color":case"color-index":case"monochrome":i=parseInt(i,10)||1,a=parseInt(a,10)||0}switch(r){case"min":return a>=i;case"max":return a<=i;default:return a===i}}));return i&&!n||!i&&n}))}function u(t){return t.split(",").map((function(t){var e=(t=t.trim()).match(r),n=e[1],o=e[2],s=e[3]||"",l={};return l.inverse=!!n&&"not"===n.toLowerCase(),l.type=o?o.toLowerCase():"all",s=s.match(/\([^\)]+\)/g)||[],l.expressions=s.map((function(t){var e=t.match(i),n=e[1].toLowerCase().match(a);return{modifier:n[1],feature:n[2],value:e[2]}})),l}))}function c(t){var e=Number(t),n;return e||(e=(n=t.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/n[2]),e}function h(t){var e=parseFloat(t),n;switch(String(t).match(s)[1]){case"dpcm":return e/2.54;case"dppx":return 96*e;default:return e}}function f(t){var e=parseFloat(t),n;switch(String(t).match(o)[1]){case"em":case"rem":return 16*e;case"cm":return 96*e/2.54;case"mm":return 96*e/2.54/10;case"in":return 96*e;case"pt":return 72*e;case"pc":return 72*e/12;default:return e}}},"./node_modules/hyphenate-style-name/index.js":
/*!****************************************************!*\
          !*** ./node_modules/hyphenate-style-name/index.js ***!
          \****************************************************/
function t(e,n,r){"use strict";r.r(n),r.d(n,{default:function t(){return u}});var i=/[A-Z]/g,a=/^ms-/,o={};function s(t){return"-"+t.toLowerCase()}function l(t){if(o.hasOwnProperty(t))return o[t];var e=t.replace(i,s);return o[t]=a.test(e)?"-"+e:e}var u=l},"./node_modules/matchmediaquery/index.js":
/*!***********************************************!*\
          !*** ./node_modules/matchmediaquery/index.js ***!
          \***********************************************/
function t(e,n,r){"use strict";var i=r(
/*! css-mediaquery */
"./node_modules/css-mediaquery/index.js").match,a="undefined"!=typeof window?window.matchMedia:null;function o(t,e,n){var r=this;if(a&&!n){var o=a.call(window,t);this.matches=o.matches,this.media=o.media,o.addListener(u)}else this.matches=i(t,e),this.media=t;function s(t){o&&o.addListener(t)}function l(t){o&&o.removeListener(t)}function u(t){r.matches=t.matches,r.media=t.media}function c(){o&&o.removeListener(u)}this.addListener=s,this.removeListener=l,this.dispose=c}function s(t,e,n){return new o(t,e,n)}e.exports=s},"./node_modules/object-assign/index.js":
/*!*********************************************!*\
          !*** ./node_modules/object-assign/index.js ***!
          \*********************************************/
function t(e){"use strict";
/*
          object-assign
          (c) Sindre Sorhus
          @license MIT
          */var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc"),e;if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(t){return n[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}e.exports=o()?Object.assign:function(t,e){for(var o,s=a(t),l,u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))r.call(o,c)&&(s[c]=o[c]);if(n){l=n(o);for(var h=0;h<l.length;h++)i.call(o,l[h])&&(s[l[h]]=o[l[h]])}}return s}},"./node_modules/prop-types/checkPropTypes.js":
/*!***************************************************!*\
          !*** ./node_modules/prop-types/checkPropTypes.js ***!
          \***************************************************/
function t(e,n,r){"use strict";var i=function t(){},a=r(
/*! ./lib/ReactPropTypesSecret */
"./node_modules/prop-types/lib/ReactPropTypesSecret.js"),s={},l=r(
/*! ./lib/has */
"./node_modules/prop-types/lib/has.js");function u(t,e,n,r,u){for(var c in t)if(l(t,c)){var h;try{if("function"!=typeof t[c]){var f=Error((r||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o(t[c])+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}h=t[c](e,c,r,n,null,a)}catch(t){h=t}if(!h||h instanceof Error||i((r||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+o(h)+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),h instanceof Error&&!(h.message in s)){s[h.message]=!0;var d=u?u():"";i("Failed "+n+" type: "+h.message+(null!=d?d:""))}}}i=function t(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(t){}},u.resetWarningCache=function(){s={}},e.exports=u},"./node_modules/prop-types/factoryWithTypeCheckers.js":
/*!************************************************************!*\
          !*** ./node_modules/prop-types/factoryWithTypeCheckers.js ***!
          \************************************************************/
function t(e,n,r){"use strict";var i=r(
/*! react-is */
"./node_modules/react-is/index.js"),a=r(
/*! object-assign */
"./node_modules/object-assign/index.js"),s=r(
/*! ./lib/ReactPropTypesSecret */
"./node_modules/prop-types/lib/ReactPropTypesSecret.js"),l=r(
/*! ./lib/has */
"./node_modules/prop-types/lib/has.js"),u=r(
/*! ./checkPropTypes */
"./node_modules/prop-types/checkPropTypes.js"),c=function t(){};function h(){return null}c=function t(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(t){}},e.exports=function(t,e){var n="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";function f(t){var e=t&&(n&&t[n]||t["@@iterator"]);if("function"==typeof e)return e}var d="<<anonymous>>",p={array:y("array"),bigint:y("bigint"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:_(),arrayOf:x,element:b(),elementType:w(),instanceOf:M,node:C(),objectOf:E,oneOf:S,oneOfType:T,shape:A,exact:P};function m(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function v(t,e){this.message=t,this.data=e&&"object"===o(e)?e:{},this.stack=""}function g(t){var n={},r=0;function i(i,a,o,l,u,h,f){if(l=l||d,h=h||o,f!==s){if(e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("undefined"!=typeof console){var m=l+":"+o;!n[m]&&r<3&&(c("You are manually calling a React.PropTypes validation function for the `"+h+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[m]=!0,r++)}}return null==a[o]?i?null===a[o]?new v("The "+u+" `"+h+"` is marked as required in `"+l+"`, but its value is `null`."):new v("The "+u+" `"+h+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:t(a,o,l,u,h)}var a=i.bind(null,!1);return a.isRequired=i.bind(null,!0),a}function y(t){function e(e,n,r,i,a,o){var s=e[n],l,u;return R(s)!==t?new v("Invalid "+i+" `"+a+"` of type `"+I(s)+"` supplied to `"+r+"`, expected `"+t+"`.",{expectedType:t}):null}return g(e)}function _(){return g(h)}function x(t){function e(e,n,r,i,a){if("function"!=typeof t)return new v("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=e[n],l;if(!Array.isArray(o))return new v("Invalid "+i+" `"+a+"` of type `"+R(o)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<o.length;u++){var c=t(o,u,r,i,a+"["+u+"]",s);if(c instanceof Error)return c}return null}return g(e)}function b(){function e(e,n,r,i,a){var o=e[n],s;return t(o)?null:new v("Invalid "+i+" `"+a+"` of type `"+R(o)+"` supplied to `"+r+"`, expected a single ReactElement.")}return g(e)}function w(){function t(t,e,n,r,a){var o=t[e],s;return i.isValidElementType(o)?null:new v("Invalid "+r+" `"+a+"` of type `"+R(o)+"` supplied to `"+n+"`, expected a single ReactElement type.")}return g(t)}function M(t){function e(e,n,r,i,a){if(!(e[n]instanceof t)){var o=t.name||d,s;return new v("Invalid "+i+" `"+a+"` of type `"+O(e[n])+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}return null}return g(e)}function S(t){if(!Array.isArray(t))return c(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),h;function e(e,n,r,i,a){for(var o=e[n],s=0;s<t.length;s++)if(m(o,t[s]))return null;var l=JSON.stringify(t,(function t(e,n){var r;return"symbol"===I(n)?String(n):n}));return new v("Invalid "+i+" `"+a+"` of value `"+String(o)+"` supplied to `"+r+"`, expected one of "+l+".")}return g(e)}function E(t){function e(e,n,r,i,a){if("function"!=typeof t)return new v("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=e[n],u=R(o);if("object"!==u)return new v("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(l(o,c)){var h=t(o,c,r,i,a+"."+c,s);if(h instanceof Error)return h}return null}return g(e)}function T(t){if(!Array.isArray(t))return c("Invalid argument supplied to oneOfType, expected an instance of array."),h;for(var e=0;e<t.length;e++){var n=t[e];if("function"!=typeof n)return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+N(n)+" at index "+e+"."),h}function r(e,n,r,i,a){for(var o=[],u=0;u<t.length;u++){var c,h=(0,t[u])(e,n,r,i,a,s);if(null==h)return null;h.data&&l(h.data,"expectedType")&&o.push(h.data.expectedType)}var f;return new v("Invalid "+i+" `"+a+"` supplied to `"+r+"`"+(o.length>0?", expected one of type ["+o.join(", ")+"]":"")+".")}return g(r)}function C(){function t(t,e,n,r,i){return L(t[e])?null:new v("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return g(t)}function k(t,e,n,r,i){return new v((t||"React class")+": "+e+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function A(t){function e(e,n,r,i,a){var o=e[n],l=R(o);if("object"!==l)return new v("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var u in t){var c=t[u];if("function"!=typeof c)return k(r,i,a,u,I(c));var h=c(o,u,r,i,a+"."+u,s);if(h)return h}return null}return g(e)}function P(t){function e(e,n,r,i,o){var u=e[n],c=R(u);if("object"!==c)return new v("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var h=a({},e[n],t);for(var f in h){var d=t[f];if(l(t,f)&&"function"!=typeof d)return k(r,i,o,f,I(d));if(!d)return new v("Invalid "+i+" `"+o+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var p=d(u,f,r,i,o+"."+f,s);if(p)return p}return null}return g(e)}function L(e){switch(o(e)){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(L);if(null===e||t(e))return!0;var n=f(e);if(!n)return!1;var r=n.call(e),i;if(n!==e.entries){for(;!(i=r.next()).done;)if(!L(i.value))return!1}else for(;!(i=r.next()).done;){var a=i.value;if(a&&!L(a[1]))return!1}return!0;default:return!1}}function D(t,e){return"symbol"===t||!!e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function R(t){var e=o(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":D(e,t)?"symbol":e}function I(t){if(null==t)return""+t;var e=R(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function N(t){var e=I(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function O(t){return t.constructor&&t.constructor.name?t.constructor.name:d}return v.prototype=Error.prototype,p.checkPropTypes=u,p.resetWarningCache=u.resetWarningCache,p.PropTypes=p,p}},"./node_modules/prop-types/index.js":
/*!******************************************!*\
          !*** ./node_modules/prop-types/index.js ***!
          \******************************************/
function t(e,n,r){var i=r(
/*! react-is */
"./node_modules/react-is/index.js"),a=!0;e.exports=r(
/*! ./factoryWithTypeCheckers */
"./node_modules/prop-types/factoryWithTypeCheckers.js")(i.isElement,a)},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":
/*!*************************************************************!*\
          !*** ./node_modules/prop-types/lib/ReactPropTypesSecret.js ***!
          \*************************************************************/
function t(e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},"./node_modules/prop-types/lib/has.js":
/*!********************************************!*\
          !*** ./node_modules/prop-types/lib/has.js ***!
          \********************************************/
function t(e){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":
/*!***********************************************************!*\
          !*** ./node_modules/react-is/cjs/react-is.development.js ***!
          \***********************************************************/
function t(e,n){"use strict";
/** @license React v16.13.1
           * react-is.development.js
           *
           * Copyright (c) Facebook, Inc. and its affiliates.
           *
           * This source code is licensed under the MIT license found in the
           * LICENSE file in the root directory of this source tree.
           */(function(){var t="function"==typeof Symbol&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function b(t){return"string"==typeof t||"function"==typeof t||t===i||t===h||t===s||t===a||t===d||t===p||"object"===o(t)&&null!==t&&(t.$$typeof===v||t.$$typeof===m||t.$$typeof===l||t.$$typeof===u||t.$$typeof===f||t.$$typeof===y||t.$$typeof===_||t.$$typeof===x||t.$$typeof===g)}function w(t){if("object"===o(t)&&null!==t){var n=t.$$typeof;switch(n){case e:var p=t.type;switch(p){case c:case h:case i:case s:case a:case d:return p;default:var g=p&&p.$$typeof;switch(g){case u:case f:case v:case m:case l:return g;default:return n}}case r:return n}}}var M=c,S=h,E=u,T=l,C=e,k=f,A=i,P=v,L=m,D=r,R=s,I=a,N=d,O=!1;function F(t){return O||(O=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),z(t)||w(t)===c}function z(t){return w(t)===h}function U(t){return w(t)===u}function V(t){return w(t)===l}function B(t){return"object"===o(t)&&null!==t&&t.$$typeof===e}function H(t){return w(t)===f}function G(t){return w(t)===i}function W(t){return w(t)===v}function Z(t){return w(t)===m}function j(t){return w(t)===r}function q(t){return w(t)===s}function X(t){return w(t)===a}function Y(t){return w(t)===d}n.AsyncMode=M,n.ConcurrentMode=S,n.ContextConsumer=E,n.ContextProvider=T,n.Element=C,n.ForwardRef=k,n.Fragment=A,n.Lazy=P,n.Memo=L,n.Portal=D,n.Profiler=R,n.StrictMode=I,n.Suspense=N,n.isAsyncMode=F,n.isConcurrentMode=z,n.isContextConsumer=U,n.isContextProvider=V,n.isElement=B,n.isForwardRef=H,n.isFragment=G,n.isLazy=W,n.isMemo=Z,n.isPortal=j,n.isProfiler=q,n.isStrictMode=X,n.isSuspense=Y,n.isValidElementType=b,n.typeOf=w})()},"./node_modules/react-is/index.js":
/*!****************************************!*\
          !*** ./node_modules/react-is/index.js ***!
          \****************************************/
function t(e,n,r){"use strict";e.exports=r(
/*! ./cjs/react-is.development.js */
"./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":
/*!******************************************************!*\
          !*** ./node_modules/shallow-equal/dist/index.esm.js ***!
          \******************************************************/
function t(e,n,r){"use strict";function i(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var a=0;a<i;a++){var o=n[a];if(t[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function a(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}r.r(n),r.d(n,{shallowEqualArrays:function t(){return a},shallowEqualObjects:function t(){return i}})},"./src/Component.ts":
/*!**************************!*\
          !*** ./src/Component.ts ***!
          \**************************/
function t(e,n,r){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=a(r(
/*! ./useMediaQuery */
"./src/useMediaQuery.ts")),s=function t(e){var n=e.children,r=e.device,a=e.onChange,s=i(e,["children","device","onChange"]),l=(0,o.default)(s,r,a);return"function"==typeof n?n(l):l?n:null};n.default=s},"./src/Context.ts":
/*!************************!*\
          !*** ./src/Context.ts ***!
          \************************/
function t(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,a=(0,r(
/*! react */
"react").createContext)(void 0);n.default=a},"./src/index.ts":
/*!**********************!*\
          !*** ./src/index.ts ***!
          \**********************/
function t(e,n,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Context=n.toQuery=n.useMediaQuery=n.default=void 0;var a=i(r(
/*! ./useMediaQuery */
"./src/useMediaQuery.ts"));n.useMediaQuery=a.default;var o=i(r(
/*! ./Component */
"./src/Component.ts"));n.default=o.default;var s=i(r(
/*! ./toQuery */
"./src/toQuery.ts"));n.toQuery=s.default;var l=i(r(
/*! ./Context */
"./src/Context.ts"));n.Context=l.default},"./src/mediaQuery.ts":
/*!***************************!*\
          !*** ./src/mediaQuery.ts ***!
          \***************************/
function t(e,n,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=o(r(
/*! prop-types */
"./node_modules/prop-types/index.js")),l=s.default.oneOfType([s.default.string,s.default.number]),u={all:s.default.bool,grid:s.default.bool,aural:s.default.bool,braille:s.default.bool,handheld:s.default.bool,print:s.default.bool,projection:s.default.bool,screen:s.default.bool,tty:s.default.bool,tv:s.default.bool,embossed:s.default.bool},c={orientation:s.default.oneOf(["portrait","landscape"]),scan:s.default.oneOf(["progressive","interlace"]),aspectRatio:s.default.string,deviceAspectRatio:s.default.string,height:l,deviceHeight:l,width:l,deviceWidth:l,color:s.default.bool,colorIndex:s.default.bool,monochrome:s.default.bool,resolution:l,type:Object.keys(u)},h=c.type,f=a(c,["type"]),d=i({minAspectRatio:s.default.string,maxAspectRatio:s.default.string,minDeviceAspectRatio:s.default.string,maxDeviceAspectRatio:s.default.string,minHeight:l,maxHeight:l,minDeviceHeight:l,maxDeviceHeight:l,minWidth:l,maxWidth:l,minDeviceWidth:l,maxDeviceWidth:l,minColor:s.default.number,maxColor:s.default.number,minColorIndex:s.default.number,maxColorIndex:s.default.number,minMonochrome:s.default.number,maxMonochrome:s.default.number,minResolution:l,maxResolution:l},f),p=i(i({},u),d);n.default={all:p,types:u,matchers:c,features:d}},"./src/toQuery.ts":
/*!************************!*\
          !*** ./src/toQuery.ts ***!
          \************************/
function t(e,n,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=i(r(
/*! hyphenate-style-name */
"./node_modules/hyphenate-style-name/index.js")),o=i(r(
/*! ./mediaQuery */
"./src/mediaQuery.ts")),s=function t(e){return"not ".concat(e)},l=function t(e,n){var r=(0,a.default)(e);return"number"==typeof n&&(n="".concat(n,"px")),!0===n?r:!1===n?s(r):"(".concat(r,": ").concat(n,")")},u=function t(e){return e.join(" and ")},c=function t(e){var n=[];return Object.keys(o.default.all).forEach((function(t){var r=e[t];null!=r&&n.push(l(t,r))})),u(n)};n.default=c},"./src/useMediaQuery.ts":
/*!******************************!*\
          !*** ./src/useMediaQuery.ts ***!
          \******************************/
function t(e,n,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=r(
/*! react */
"react"),o=i(r(
/*! matchmediaquery */
"./node_modules/matchmediaquery/index.js")),s=i(r(
/*! hyphenate-style-name */
"./node_modules/hyphenate-style-name/index.js")),l=r(
/*! shallow-equal */
"./node_modules/shallow-equal/dist/index.esm.js"),u=i(r(
/*! ./toQuery */
"./src/toQuery.ts")),c=i(r(
/*! ./Context */
"./src/Context.ts")),h=function t(e){return e.query||(0,u.default)(e)},f=function t(e){var n;if(e)return Object.keys(e).reduce((function(t,n){return t[(0,s.default)(n)]=e[n],t}),{})},d=function t(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){e.current=!0}),[]),e.current},p=function t(e){var n=(0,a.useContext)(c.default),r=function t(){return f(e)||f(n)},i=(0,a.useState)(r),o=i[0],s=i[1];return(0,a.useEffect)((function(){var t=r();(0,l.shallowEqualObjects)(o,t)||s(t)}),[e,n]),o},m=function t(e){var n=function t(){return h(e)},r=(0,a.useState)(n),i=r[0],o=r[1];return(0,a.useEffect)((function(){var t=n();i!==t&&o(t)}),[e]),i},v=function t(e,n){var r=function t(){return(0,o.default)(e,n||{},!!n)},i=(0,a.useState)(r),s=i[0],l=i[1],u=d();return(0,a.useEffect)((function(){if(u){var t=r();return l(t),function(){t&&t.dispose()}}}),[e,n]),s},g=function t(e){var n=(0,a.useState)(e.matches),r=n[0],i=n[1];return(0,a.useEffect)((function(){var t=function t(e){i(e.matches)};return e.addListener(t),i(e.matches),function(){e.removeListener(t)}}),[e]),r},y=function t(e,n,r){var i=p(n),o=m(e);if(!o)throw new Error("Invalid or missing MediaQuery!");var s=v(o,i),l=g(s),u=d();return(0,a.useEffect)((function(){u&&r&&r(l)}),[l]),(0,a.useEffect)((function(){return function(){s&&s.dispose()}}),[]),l};n.default=y},react:
/*!**************************************************************************************!*\
          !*** external {"commonjs":"react","commonjs2":"react","amd":"react","root":"React"} ***!
          \**************************************************************************************/
function e(n){"use strict";n.exports=t}},n={},r;function i(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,i),a.exports}return i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i("./src/index.ts")}()}))},21323:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n(40840),n(59329),n(47721),n(61529),n(82205),n(77513),n(9758),n(58220),t.exports=function t(e,n,i,a){var o=i?i.call(a,e,n):void 0;if(void 0!==o)return!!o;if(e===n)return!0;if("object"!==r(e)||!e||"object"!==r(n)||!n)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(n),c=0;c<s.length;c++){var h=s[c];if(!u(h))return!1;var f=e[h],d=n[h];if(!1===(o=i?i.call(a,f,d,h):void 0)||void 0===o&&f!==d)return!1}return!0}},68556:function(){},57219:function(){},77533:function(){},64783:function(t,e,n){"use strict";var r=n(60255);t.exports=function(t){return void 0!==t&&(r(t,"value")||r(t,"writable"))}},47813:function(t,e,n){"use strict";var r=n(24284),i=2147483647,a=36,o=1,s=26,l=38,u=700,c=72,h=128,f="-",d=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",v=35,g=RangeError,y=r(p.exec),_=Math.floor,x=String.fromCharCode,b=r("".charCodeAt),w=r([].join),M=r([].push),S=r("".replace),E=r("".split),T=r("".toLowerCase),C=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=b(t,n++);if(i>=55296&&i<=56319&&n<r){var a=b(t,n++);56320==(64512&a)?M(e,((1023&i)<<10)+(1023&a)+65536):(M(e,i),n--)}else M(e,i)}return e},k=function(t){return t+22+75*(t<26)},A=function(t,e,n){var r=0;for(t=n?_(t/u):t>>1,t+=_(t/e);t>455;)t=_(t/v),r+=a;return _(r+36*t/(t+l))},P=function(t){var e=[],n=(t=C(t)).length,r=h,o=0,l=c,u,d;for(u=0;u<t.length;u++)(d=t[u])<128&&M(e,x(d));var p=e.length,v=p;for(p&&M(e,f);v<n;){var y=i;for(u=0;u<t.length;u++)(d=t[u])>=r&&d<y&&(y=d);var b=v+1;if(y-r>_((i-o)/b))throw new g(m);for(o+=(y-r)*b,r=y,u=0;u<t.length;u++){if((d=t[u])<r&&++o>i)throw new g(m);if(d===r){for(var S=o,E=a;;){var T=E<=l?1:E>=l+s?s:E-l;if(S<T)break;var P=S-T,L=a-T;M(e,x(k(T+P%L))),S=_(P/L),E+=a}M(e,x(k(S))),l=A(o,b,v===p),o=0,v++}}o++,r++}return w(e,"")};t.exports=function(t){var e=[],n=E(S(T(t),p,"."),"."),r,i;for(r=0;r<n.length;r++)i=n[r],M(e,y(d,i)?"xn--"+P(i):i);return w(e,".")}},12822:function(t,e,n){"use strict";var r=n(1415),i=Math.hypot,a=Math.abs,o=Math.sqrt,s;r({target:"Math",stat:!0,arity:2,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function t(e,n){for(var r=0,i=0,s=arguments.length,l=0,u,c;i<s;)l<(u=a(arguments[i++]))?(r=r*(c=l/u)*c+1,l=u):r+=u>0?(c=u/l)*c:u;return l===1/0?1/0:l*o(r)}})},28527:function(t,e,n){"use strict";var r=n(1415),i=n(3883),a=Math.imul,o;r({target:"Math",stat:!0,forced:i((function(){return-5!==a(4294967295,5)||2!==a.length}))},{imul:function t(e,n){var r=65535,i=+e,a=+n,o=r&i,s=r&a;return 0|o*s+((r&i>>>16)*s+o*(r&a>>>16)<<16>>>0)}})},71532:function(t,e,n){"use strict";var r=n(1415),i=Math.log,a=Math.LN2;r({target:"Math",stat:!0},{log2:function t(e){return i(e)/a}})},7125:function(t,e,n){"use strict";var r,i;n(1415)({target:"Math",stat:!0},{sign:n(65354)})},69137:function(t,e,n){"use strict";var r;n(1415)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},23925:function(t,e,n){"use strict";var r,i;n(1415)({target:"Number",stat:!0},{isInteger:n(82718)})},46189:function(t,e,n){"use strict";var r;n(1415)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},85037:function(t,e,n){"use strict";var r=n(1415),i=n(41307),a=n(80840),o=n(3883),s=n(48453),l=n(80887),u=n(44711),c=n(75853),h=n(77409),f=a&&a.prototype,d;if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){f.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n=l(t);return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),!i&&l(a)){var p=s("Promise").prototype.finally;f.finally!==p&&h(f,"finally",p,{unsafe:!0})}},31763:function(t,e,n){"use strict";var r=n(1415),i=n(62295),a=n(10034),o=n(13621),s=n(64783),l=n(18675),u=n(72242);function c(t,e){var n=arguments.length<3?t:arguments[2],r,h;return o(t)===n?t[e]:(r=l.f(t,e))?s(r)?r.value:void 0===r.get?void 0:i(r.get,n):a(h=u(t))?c(h,e,n):void 0}r({target:"Reflect",stat:!0},{get:c})},50925:function(t,e,n){"use strict";var r,i;n(1415)({target:"String",proto:!0},{repeat:n(87849)})},48223:function(t,e,n){"use strict";var r=n(1415),i=n(99121),a;r({target:"String",proto:!0,forced:n(71253)("sub")},{sub:function t(){return i(this,"sub","","")}})},53020:function(t,e,n){"use strict";var r;n(68409)("Float32",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},84079:function(t,e,n){"use strict";var r;n(68409)("Float64",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},69301:function(t,e,n){"use strict";var r;n(68409)("Int16",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},81463:function(t,e,n){"use strict";var r;n(68409)("Int32",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},65067:function(t,e,n){"use strict";var r;n(68409)("Int8",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},13834:function(t,e,n){"use strict";var r;n(68409)("Uint16",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},4310:function(t,e,n){"use strict";var r;n(68409)("Uint32",(function(t){return function e(n,r,i){return t(this,n,r,i)}}))},35072:function(t,e,n){"use strict";var r;n(68409)("Uint8",(function(t){return function e(n,r,i){return t(this,n,r,i)}}),!0)},95818:function(t,e,n){"use strict";n(9758);var r=n(1415),i=n(39045),a=n(67267),o=n(31552),s=n(97552),l=n(24284),u=n(77409),c=n(57246),h=n(80303),f=n(60255),d=n(63157),p=n(88211),m=n(16668),v=n(83250).codeAt,g=n(47813),y=n(20713),_=n(87796),x=n(28979),b=n(18830),w=n(36797),M=w.set,S=w.getterFor("URL"),E=b.URLSearchParams,T=b.getState,C=o.URL,k=o.TypeError,A=o.parseInt,P=Math.floor,L=Math.pow,D=l("".charAt),R=l(/./.exec),I=l([].join),N=l(1..toString),O=l([].pop),F=l([].push),z=l("".replace),U=l([].shift),V=l("".split),B=l("".slice),H=l("".toLowerCase),G=l([].unshift),W="Invalid authority",Z="Invalid scheme",j="Invalid host",q="Invalid port",X=/[a-z]/i,Y=/[\d+-.a-z]/i,K=/\d/,J=/^0x/i,Q=/^[0-7]+$/,$=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,rt=/^[\u0000-\u0020]+/,it=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,at=/[\t\n\r]/g,ot,st=function(t){var e=V(t,"."),n,r,i,a,o,s,l;if(e.length&&""===e[e.length-1]&&e.length--,(n=e.length)>4)return t;for(r=[],i=0;i<n;i++){if(""===(a=e[i]))return t;if(o=10,a.length>1&&"0"===D(a,0)&&(o=R(J,a)?16:8,a=B(a,8===o?1:2)),""===a)s=0;else{if(!R(10===o?$:8===o?Q:tt,a))return t;s=A(a,o)}F(r,s)}for(i=0;i<n;i++)if(s=r[i],i===n-1){if(s>=L(256,5-n))return null}else if(s>255)return null;for(l=O(r),i=0;i<r.length;i++)l+=r[i]*L(256,3-i);return l},lt=function(t){var e=[0,0,0,0,0,0,0,0],n=0,r=null,i=0,a,o,s,l,u,c,h,f=function(){return D(t,i)};if(":"===f()){if(":"!==D(t,1))return;i+=2,r=++n}for(;f();){if(8===n)return;if(":"!==f()){for(a=o=0;o<4&&R(tt,f());)a=16*a+A(f(),16),i++,o++;if("."===f()){if(0===o)return;if(i-=o,n>6)return;for(s=0;f();){if(l=null,s>0){if(!("."===f()&&s<4))return;i++}if(!R(K,f()))return;for(;R(K,f());){if(u=A(f(),10),null===l)l=u;else{if(0===l)return;l=10*l+u}if(l>255)return;i++}e[n]=256*e[n]+l,2!==++s&&4!==s||n++}if(4!==s)return;break}if(":"===f()){if(i++,!f())return}else if(f())return;e[n++]=a}else{if(null!==r)return;i++,r=++n}}if(null!==r)for(c=n-r,n=7;0!==n&&c>0;)h=e[n],e[n--]=e[r+c-1],e[r+--c]=h;else if(8!==n)return;return e},ut=function(t){for(var e=null,n=1,r=null,i=0,a=0;a<8;a++)0!==t[a]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(e=r,n=i),e},ct=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)G(e,t%256),t=P(t/256);return I(e,".")}if("object"==typeof t){for(e="",r=ut(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=N(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},ht={},ft=d({},ht,{" ":1,'"':1,"<":1,">":1,"`":1}),dt=d({},ft,{"#":1,"?":1,"{":1,"}":1}),pt=d({},dt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),mt=function(t,e){var n=v(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},vt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},gt=function(t,e){var n;return 2===t.length&&R(X,D(t,0))&&(":"===(n=D(t,1))||!e&&"|"===n)},yt=function(t){var e;return t.length>1&&gt(B(t,0,2))&&(2===t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},_t=function(t){return"."===t||"%2e"===H(t)},xt=function(t){return".."===(t=H(t))||"%2e."===t||".%2e"===t||"%2e%2e"===t},bt={},wt={},Mt={},St={},Et={},Tt={},Ct={},kt={},At={},Pt={},Lt={},Dt={},Rt={},It={},Nt={},Ot={},Ft={},zt={},Ut={},Vt={},Bt={},Ht=function(t,e,n){var r=y(t),i,a,o;if(e){if(a=this.parse(r))throw new k(a);this.searchParams=null}else{if(void 0!==n&&(i=new Ht(n,!0)),a=this.parse(r,null,i))throw new k(a);(o=T(new E)).bindURL(this),this.searchParams=o}};Ht.prototype={type:"URL",parse:function(t,e,n){var r=this,i=e||bt,a=0,o="",s=!1,l=!1,u=!1,c,h,d,v;for(t=y(t),e||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,t=z(t,rt,""),t=z(t,it,"$1")),t=z(t,at,""),c=p(t);a<=c.length;){switch(h=c[a],i){case bt:if(!h||!R(X,h)){if(e)return Z;i=Mt;continue}o+=H(h),i=wt;break;case wt:if(h&&(R(Y,h)||"+"===h||"-"===h||"."===h))o+=H(h);else{if(":"!==h){if(e)return Z;o="",i=Mt,a=0;continue}if(e&&(r.isSpecial()!==f(vt,o)||"file"===o&&(r.includesCredentials()||null!==r.port)||"file"===r.scheme&&!r.host))return;if(r.scheme=o,e)return void(r.isSpecial()&&vt[r.scheme]===r.port&&(r.port=null));o="","file"===r.scheme?i=It:r.isSpecial()&&n&&n.scheme===r.scheme?i=St:r.isSpecial()?i=kt:"/"===c[a+1]?(i=Et,a++):(r.cannotBeABaseURL=!0,F(r.path,""),i=Ut)}break;case Mt:if(!n||n.cannotBeABaseURL&&"#"!==h)return Z;if(n.cannotBeABaseURL&&"#"===h){r.scheme=n.scheme,r.path=m(n.path),r.query=n.query,r.fragment="",r.cannotBeABaseURL=!0,i=Bt;break}i="file"===n.scheme?It:Tt;continue;case St:if("/"!==h||"/"!==c[a+1]){i=Tt;continue}i=At,a++;break;case Et:if("/"===h){i=Pt;break}i=zt;continue;case Tt:if(r.scheme=n.scheme,h===ot)r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=m(n.path),r.query=n.query;else if("/"===h||"\\"===h&&r.isSpecial())i=Ct;else if("?"===h)r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=m(n.path),r.query="",i=Vt;else{if("#"!==h){r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=m(n.path),r.path.length--,i=zt;continue}r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=m(n.path),r.query=n.query,r.fragment="",i=Bt}break;case Ct:if(!r.isSpecial()||"/"!==h&&"\\"!==h){if("/"!==h){r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,i=zt;continue}i=Pt}else i=At;break;case kt:if(i=At,"/"!==h||"/"!==D(o,a+1))continue;a++;break;case At:if("/"!==h&&"\\"!==h){i=Pt;continue}break;case Pt:if("@"===h){s&&(o="%40"+o),s=!0,d=p(o);for(var g=0;g<d.length;g++){var _=d[g];if(":"!==_||u){var x=mt(_,pt);u?r.password+=x:r.username+=x}else u=!0}o=""}else if(h===ot||"/"===h||"?"===h||"#"===h||"\\"===h&&r.isSpecial()){if(s&&""===o)return W;a-=p(o).length+1,o="",i=Lt}else o+=h;break;case Lt:case Dt:if(e&&"file"===r.scheme){i=Ot;continue}if(":"!==h||l){if(h===ot||"/"===h||"?"===h||"#"===h||"\\"===h&&r.isSpecial()){if(r.isSpecial()&&""===o)return j;if(e&&""===o&&(r.includesCredentials()||null!==r.port))return;if(v=r.parseHost(o))return v;if(o="",i=Ft,e)return;continue}"["===h?l=!0:"]"===h&&(l=!1),o+=h}else{if(""===o)return j;if(v=r.parseHost(o))return v;if(o="",i=Rt,e===Dt)return}break;case Rt:if(!R(K,h)){if(h===ot||"/"===h||"?"===h||"#"===h||"\\"===h&&r.isSpecial()||e){if(""!==o){var b=A(o,10);if(b>65535)return q;r.port=r.isSpecial()&&b===vt[r.scheme]?null:b,o=""}if(e)return;i=Ft;continue}return q}o+=h;break;case It:if(r.scheme="file","/"===h||"\\"===h)i=Nt;else{if(!n||"file"!==n.scheme){i=zt;continue}switch(h){case ot:r.host=n.host,r.path=m(n.path),r.query=n.query;break;case"?":r.host=n.host,r.path=m(n.path),r.query="",i=Vt;break;case"#":r.host=n.host,r.path=m(n.path),r.query=n.query,r.fragment="",i=Bt;break;default:yt(I(m(c,a),""))||(r.host=n.host,r.path=m(n.path),r.shortenPath()),i=zt;continue}}break;case Nt:if("/"===h||"\\"===h){i=Ot;break}n&&"file"===n.scheme&&!yt(I(m(c,a),""))&&(gt(n.path[0],!0)?F(r.path,n.path[0]):r.host=n.host),i=zt;continue;case Ot:if(h===ot||"/"===h||"\\"===h||"?"===h||"#"===h){if(!e&&gt(o))i=zt;else if(""===o){if(r.host="",e)return;i=Ft}else{if(v=r.parseHost(o))return v;if("localhost"===r.host&&(r.host=""),e)return;o="",i=Ft}continue}o+=h;break;case Ft:if(r.isSpecial()){if(i=zt,"/"!==h&&"\\"!==h)continue}else if(e||"?"!==h)if(e||"#"!==h){if(h!==ot&&(i=zt,"/"!==h))continue}else r.fragment="",i=Bt;else r.query="",i=Vt;break;case zt:if(h===ot||"/"===h||"\\"===h&&r.isSpecial()||!e&&("?"===h||"#"===h)){if(xt(o)?(r.shortenPath(),"/"===h||"\\"===h&&r.isSpecial()||F(r.path,"")):_t(o)?"/"===h||"\\"===h&&r.isSpecial()||F(r.path,""):("file"===r.scheme&&!r.path.length&&gt(o)&&(r.host&&(r.host=""),o=D(o,0)+":"),F(r.path,o)),o="","file"===r.scheme&&(h===ot||"?"===h||"#"===h))for(;r.path.length>1&&""===r.path[0];)U(r.path);"?"===h?(r.query="",i=Vt):"#"===h&&(r.fragment="",i=Bt)}else o+=mt(h,dt);break;case Ut:"?"===h?(r.query="",i=Vt):"#"===h?(r.fragment="",i=Bt):h!==ot&&(r.path[0]+=mt(h,ht));break;case Vt:e||"#"!==h?h!==ot&&("'"===h&&r.isSpecial()?r.query+="%27":r.query+="#"===h?"%23":mt(h,ht)):(r.fragment="",i=Bt);break;case Bt:h!==ot&&(r.fragment+=mt(h,ft))}a++}},parseHost:function(t){var e,n,r;if("["===D(t,0)){if("]"!==D(t,t.length-1))return j;if(!(e=lt(B(t,1,-1))))return j;this.host=e}else if(this.isSpecial()){if(t=g(t),R(et,t))return j;if(null===(e=st(t)))return j;this.host=e}else{if(R(nt,t))return j;for(e="",n=p(t),r=0;r<n.length;r++)e+=mt(n[r],ht);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return f(vt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&gt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,a=t.port,o=t.path,s=t.query,l=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=ct(i),null!==a&&(u+=":"+a)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?o[0]:o.length?"/"+I(o,"/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},setHref:function(t){var e=this.parse(t);if(e)throw new k(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Gt(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+ct(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(y(t)+":",bt)},getUsername:function(){return this.username},setUsername:function(t){var e=p(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=mt(e[n],pt)}},getPassword:function(){return this.password},setPassword:function(t){var e=p(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=mt(e[n],pt)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?ct(t):ct(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Lt)},getHostname:function(){var t=this.host;return null===t?"":ct(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Dt)},getPort:function(){var t=this.port;return null===t?"":y(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=y(t))?this.port=null:this.parse(t,Rt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+I(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ft))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=y(t))?this.query=null:("?"===D(t,0)&&(t=B(t,1)),this.query="",this.parse(t,Vt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=y(t))?("#"===D(t,0)&&(t=B(t,1)),this.fragment="",this.parse(t,Bt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Gt=function t(e){var n=h(this,Wt),r=x(arguments.length,1)>1?arguments[1]:void 0,a=M(n,new Ht(e,!1,r));i||(n.href=a.serialize(),n.origin=a.getOrigin(),n.protocol=a.getProtocol(),n.username=a.getUsername(),n.password=a.getPassword(),n.host=a.getHost(),n.hostname=a.getHostname(),n.port=a.getPort(),n.pathname=a.getPathname(),n.search=a.getSearch(),n.searchParams=a.getSearchParams(),n.hash=a.getHash())},Wt=Gt.prototype,Zt=function(t,e){return{get:function(){return S(this)[t]()},set:e&&function(t){return S(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&(c(Wt,"href",Zt("serialize","setHref")),c(Wt,"origin",Zt("getOrigin")),c(Wt,"protocol",Zt("getProtocol","setProtocol")),c(Wt,"username",Zt("getUsername","setUsername")),c(Wt,"password",Zt("getPassword","setPassword")),c(Wt,"host",Zt("getHost","setHost")),c(Wt,"hostname",Zt("getHostname","setHostname")),c(Wt,"port",Zt("getPort","setPort")),c(Wt,"pathname",Zt("getPathname","setPathname")),c(Wt,"search",Zt("getSearch","setSearch")),c(Wt,"searchParams",Zt("getSearchParams")),c(Wt,"hash",Zt("getHash","setHash"))),u(Wt,"toJSON",(function t(){return S(this).serialize()}),{enumerable:!0}),u(Wt,"toString",(function t(){return S(this).serialize()}),{enumerable:!0}),C){var jt=C.createObjectURL,qt=C.revokeObjectURL;jt&&u(Gt,"createObjectURL",s(jt,C)),qt&&u(Gt,"revokeObjectURL",s(qt,C))}_(Gt,"URL"),r({global:!0,constructor:!0,forced:!a,sham:!i},{URL:Gt})},96358:function(t,e,n){"use strict";n(95818)},13993:function(t,e,n){"use strict";n.d(e,{CP7:function(){return Zd},Ilk:function(){return Aa},TlE:function(){return us},cPb:function(){return rl},jyz:function(){return el},u9r:function(){return Cs},woe:function(){return Qp},xsS:function(){return Yd}});var r=n(40448),i=n(55828),a=n(96475),o=n(64314),s=n(31686),l=n(90015),u=n(28984),c=n(25010),h=n(31763),f=n(29858),d=n(71796),p=n(49525),m=n(33739),v=n(28527),g=n(77513),y=n(79927),_=n(61529),x=n(53020),b=n(73123),w=n(8342),M=n(21061),S=n(36643),E=n(78320),T=n(44080),C=n(50954),k=n(63865),A=n(54759),P=n(51710),L=n(87270),D=n(57915),R=n(94676),I=n(46475),N=n(20387),O=n(27064),F=n(4966),z=n(90461),U=n(43357),V=n(58902),B=n(11979),H=n(16276),G=n(67493),W=n(13834),Z=n(56984),j=n(69301),q=n(65067),X=n(42149),Y=n(82205),K=n(9758),J=n(58220),Q=n(59329),$=n(47721),tt=n(35072),et=n(81463),nt=n(4310),rt=n(84079),it=n(83639),at=n(63670),ot=n(61036),st=n(86612),lt=n(31370),ut=n(54239),ct=n(50925),ht=n(69559),ft=n(77798),dt=n(36024),pt=n(69137),mt=n(40722),vt=n(48223),gt=n(52373),yt=n(37296),_t=n(40840),xt=n(48595),bt=n(71532),wt=n(82210),Mt=n(46189),St=n(66054),Et=n(51395),Tt=n(57973),Ct=n(45699),kt=n(60638),At=n(54980),Pt=n(59002),Lt=n(98452),Dt=n(7125),Rt=n(55303),It=n(13103),Nt=n(50090),Ot=n(47075),Ft=n(85037),zt=n(1871),Ut=n(23925),Vt=n(92832),Bt=n(7688),Ht;function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Wt(t){var e="function"==typeof Map?new Map:void 0;return Wt=function t(n){if(null===n||!jt(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return Zt(n,arguments,pe(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ue(r,n)},Wt(t)}function Zt(t,e,n){return Zt=de()?Reflect.construct:function t(e,n,r){var i=[null];i.push.apply(i,n);var a,o=new(Function.bind.apply(e,i));return r&&ue(o,r.prototype),o},Zt.apply(null,arguments)}function jt(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function qt(t){return Kt(t)||Yt(t)||ne(t)||Xt()}function Xt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Kt(t){if(Array.isArray(t))return re(t)}function Jt(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Qt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Jt(a,r,i,o,s,"next",t)}function s(t){Jt(a,r,i,o,s,"throw",t)}o(void 0)}))}}function $t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ne(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function t(){};return{s:i,n:function e(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1,s;return{s:function e(){n=n.call(t)},n:function t(){var e=n.next();return a=e.done,e},e:function t(e){o=!0,s=e},f:function t(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function te(t,e){return ae(t)||ie(t,e)||ne(t,e)||ee()}function ee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ne(t,e){if(t){if("string"==typeof t)return re(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(t,e):void 0}}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ie(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r=[],i=!0,a=!1,o,s;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw s}}return r}}function ae(t){if(Array.isArray(t))return t}function oe(){return oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function t(e,n,r){var i=se(e,n);if(i){var a=Object.getOwnPropertyDescriptor(i,n);return a.get?a.get.call(arguments.length<3?e:r):a.value}},oe.apply(this,arguments)}function se(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}function le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}function ue(t,e){return ue=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e},ue(t,e)}function ce(t){var e=de();return function n(){var r=pe(t),i;if(e){var a=pe(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return he(this,i)}}function he(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fe(t)}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)},pe(t)}function me(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ve(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ve=function e(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,n,r){return e[n]=r}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new M(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&n.call(v,i)&&(p=v);var g=d.prototype=h.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Gt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var i;this._invoke=function(t,n){function a(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new _(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,M.prototype={constructor:M,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var r=this;function i(t,n){return s.type="throw",s.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function t(e,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=r,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function t(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),c},finish:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),c}},catch:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var a=i.arg;w(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function t(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e,n){return e&&ye(t.prototype,e),n&&ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */var xe="146",be=0,we=1,Me=2,Se=0,Ee=1,Te=2,Ce=0,ke=1,Ae=2,Pe=3,Le=0,De=1,Re=2,Ie=3,Ne=0,Oe=1,Fe=2,ze=3,Ue=0,Ve=1,Be=2,He=0,Ge=1,We=2,Ze=3,je=4,qe=5,Xe=100,Ye=101,Ke=102,Je=103,Qe=104,$e=200,tn=201,en=202,nn=203,rn=204,an=205,on=206,sn=207,ln=208,un=209,cn=210,hn=0,fn=1,dn=2,pn=3,mn=4,vn=5,gn=6,yn=7,_n=0,xn=1,bn=2,wn=0,Mn=1,Sn=2,En=3,Tn=4,Cn=5,kn=300,An=301,Pn=302,Ln=303,Dn=304,Rn=306,In=1e3,Nn=1001,On=1002,Fn=1003,zn=1004,Un=1004,Vn=1005,Bn=1005,Hn=1006,Gn=1007,Wn=1007,Zn=1008,jn=1008,qn=1009,Xn=1010,Yn=1011,Kn=1012,Jn=1013,Qn=1014,$n=1015,tr=1016,er=1017,nr=1018,rr=1020,ir=1021,ar=1022,or=1023,sr=1024,lr=1025,ur=1026,cr=1027,hr=1028,fr=1029,dr=1030,pr=1031,mr=1033,vr=33776,gr=33777,yr=33778,_r=33779,xr=35840,br=35841,wr=35842,Mr=35843,Sr=36196,Er=37492,Tr=37496,Cr=37808,kr=37809,Ar=37810,Pr=37811,Lr=37812,Dr=37813,Rr=37814,Ir=37815,Nr=37816,Or=37817,Fr=37818,zr=37819,Ur=37820,Vr=37821,Br=36492,Hr=2200,Gr=2201,Wr=2202,Zr=2300,jr=2301,qr=2302,Xr=2400,Yr=2401,Kr=2402,Jr=2500,Qr=2501,$r=0,ti=1,ei=2,ni=3e3,ri=3001,ii=3200,ai=3201,oi=0,si=1,li="",ui="srgb",ci="srgb-linear",hi=0,fi=7680,di=7681,pi=7682,mi=7683,vi=34055,gi=34056,yi=5386,_i=512,xi=513,bi=514,wi=515,Mi=516,Si=517,Ei=518,Ti=519,Ci=35044,ki=35048,Ai=35040,Pi=35045,Li=35049,Di=35041,Ri=35046,Ii=35050,Ni=35042,Oi="100",Fi="300 es",zi=1035,Ui=function(){function t(){ge(this,t)}return _e(t,[{key:"addEventListener",value:function t(e,n){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(n)&&r[e].push(n)}},{key:"hasEventListener",value:function t(e,n){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(n)}},{key:"removeEventListener",value:function t(e,n){if(void 0!==this._listeners){var r,i=this._listeners[e];if(void 0!==i){var a=i.indexOf(n);-1!==a&&i.splice(a,1)}}}},{key:"dispatchEvent",value:function t(e){if(void 0!==this._listeners){var n,r=this._listeners[e.type];if(void 0!==r){e.target=this;for(var i=r.slice(0),a=0,o=i.length;a<o;a++)i[a].call(this,e);e.target=null}}}}]),t}(),Vi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Bi=1234567,Hi=Math.PI/180,Gi=180/Math.PI;function Wi(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i;return(Vi[255&t]+Vi[t>>8&255]+Vi[t>>16&255]+Vi[t>>24&255]+"-"+Vi[255&e]+Vi[e>>8&255]+"-"+Vi[e>>16&15|64]+Vi[e>>24&255]+"-"+Vi[63&n|128]+Vi[n>>8&255]+"-"+Vi[n>>16&255]+Vi[n>>24&255]+Vi[255&r]+Vi[r>>8&255]+Vi[r>>16&255]+Vi[r>>24&255]).toLowerCase()}function Zi(t,e,n){return Math.max(e,Math.min(n,t))}function ji(t,e){return(t%e+e)%e}function qi(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Xi(t,e,n){return t!==e?(n-t)/(e-t):0}function Yi(t,e,n){return(1-n)*t+n*e}function Ki(t,e,n,r){return Yi(t,e,1-Math.exp(-n*r))}function Ji(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(ji(t,2*e)-e)}function Qi(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)}function $i(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)}function ta(t,e){return t+Math.floor(Math.random()*(e-t+1))}function ea(t,e){return t+Math.random()*(e-t)}function na(t){return t*(.5-Math.random())}function ra(t){void 0!==t&&(Bi=t);var e=Bi+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}function ia(t){return t*Hi}function aa(t){return t*Gi}function oa(t){return 0==(t&t-1)&&0!==t}function sa(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function la(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function ua(t,e,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((e+r)/2),c=o((e+r)/2),h=a((e-r)/2),f=o((e-r)/2),d=a((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(s*c,l*h,l*f,s*u);break;case"YZY":t.set(l*f,s*c,l*h,s*u);break;case"ZXZ":t.set(l*h,l*f,s*c,s*u);break;case"XZX":t.set(s*c,l*p,l*d,s*u);break;case"YXY":t.set(l*d,s*c,l*p,s*u);break;case"ZYZ":t.set(l*p,l*d,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ca(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ha(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var fa=Object.freeze({__proto__:null,DEG2RAD:Hi,RAD2DEG:Gi,generateUUID:Wi,clamp:Zi,euclideanModulo:ji,mapLinear:qi,inverseLerp:Xi,lerp:Yi,damp:Ki,pingpong:Ji,smoothstep:Qi,smootherstep:$i,randInt:ta,randFloat:ea,randFloatSpread:na,seededRandom:ra,degToRad:ia,radToDeg:aa,isPowerOfTwo:oa,ceilPowerOfTwo:sa,floorPowerOfTwo:la,setQuaternionFromProperEuler:ua,normalize:ha,denormalize:ca}),da=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,e),e.prototype.isVector2=!0,this.x=t,this.y=n}return _e(e,[{key:"width",get:function t(){return this.x},set:function t(e){this.x=e}},{key:"height",get:function t(){return this.y},set:function t(e){this.y=e}},{key:"set",value:function t(e,n){return this.x=e,this.y=n,this}},{key:"setScalar",value:function t(e){return this.x=e,this.y=e,this}},{key:"setX",value:function t(e){return this.x=e,this}},{key:"setY",value:function t(e){return this.y=e,this}},{key:"setComponent",value:function t(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function t(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function t(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function t(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function t(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function t(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function t(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}},{key:"addScaledVector",value:function t(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}},{key:"sub",value:function t(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function t(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function t(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}},{key:"multiply",value:function t(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function t(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function t(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function t(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function t(e){var n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}},{key:"min",value:function t(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function t(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function t(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}},{key:"clampScalar",value:function t(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}},{key:"clampLength",value:function t(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function t(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function t(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function t(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function t(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function t(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function t(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function t(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function t(){return this.x*this.x+this.y*this.y}},{key:"length",value:function t(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function t(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function t(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function t(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t}},{key:"distanceTo",value:function t(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function t(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r}},{key:"manhattanDistanceTo",value:function t(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function t(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function t(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}},{key:"lerpVectors",value:function t(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}},{key:"equals",value:function t(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e}},{key:"fromBufferAttribute",value:function t(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}},{key:"rotateAround",value:function t(e,n){var r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*i+e.x,this.y=a*i+o*r+e.y,this}},{key:"random",value:function t(){return this.x=Math.random(),this.y=Math.random(),this}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),t,this)}))}]),e}(Symbol.iterator),pa=function(){function t(){ge(this,t),t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return _e(t,[{key:"set",value:function t(e,n,r,i,a,o,s,l,u){var c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=n,c[4]=a,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}},{key:"identity",value:function t(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function t(e){var n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}},{key:"extractBasis",value:function t(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function t(e){var n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}},{key:"multiply",value:function t(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function t(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function t(e,n){var r=e.elements,i=n.elements,a=this.elements,o=r[0],s=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],p=r[8],m=i[0],v=i[3],g=i[6],y=i[1],_=i[4],x=i[7],b=i[2],w=i[5],M=i[8];return a[0]=o*m+s*y+l*b,a[3]=o*v+s*_+l*w,a[6]=o*g+s*x+l*M,a[1]=u*m+c*y+h*b,a[4]=u*v+c*_+h*w,a[7]=u*g+c*x+h*M,a[2]=f*m+d*y+p*b,a[5]=f*v+d*_+p*w,a[8]=f*g+d*x+p*M,this}},{key:"multiplyScalar",value:function t(e){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}},{key:"determinant",value:function t(){var e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return n*o*c-n*s*u-r*a*c+r*s*l+i*a*u-i*o*l}},{key:"invert",value:function t(){var e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,f=s*l-c*a,d=u*a-o*l,p=n*h+r*f+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);var m=1/p;return e[0]=h*m,e[1]=(i*u-c*r)*m,e[2]=(s*r-i*o)*m,e[3]=f*m,e[4]=(c*n-i*l)*m,e[5]=(i*a-s*n)*m,e[6]=d*m,e[7]=(r*l-u*n)*m,e[8]=(o*n-r*a)*m,this}},{key:"transpose",value:function t(){var e,n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}},{key:"getNormalMatrix",value:function t(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function t(e){var n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}},{key:"setUvTransform",value:function t(e,n,r,i,a,o,s){var l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*o+u*s)+o+e,-i*u,i*l,-i*(-u*o+l*s)+s+n,0,0,1),this}},{key:"scale",value:function t(e,n){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=n,r[4]*=n,r[7]*=n,this}},{key:"rotate",value:function t(e){var n=Math.cos(e),r=Math.sin(e),i=this.elements,a=i[0],o=i[3],s=i[6],l=i[1],u=i[4],c=i[7];return i[0]=n*a+r*l,i[3]=n*o+r*u,i[6]=n*s+r*c,i[1]=-r*a+n*l,i[4]=-r*o+n*u,i[7]=-r*s+n*c,this}},{key:"translate",value:function t(e,n){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this}},{key:"equals",value:function t(e){for(var n=this.elements,r=e.elements,i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function t(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<9;r++)this.elements[r]=e[r+n];return this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}},{key:"clone",value:function t(){return(new this.constructor).fromArray(this.elements)}}]),t}();function ma(t){for(var e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}var va={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ga(t,e){return new va[t](e)}function ya(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function _a(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function xa(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var ba=(me(Ht={},ui,me({},ci,_a)),me(Ht,ci,me({},ui,xa)),Ht),wa={legacyMode:!0,get workingColorSpace(){return ci},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function t(e,n,r){if(this.legacyMode||n===r||!n||!r)return e;if(ba[n]&&void 0!==ba[n][r]){var i=ba[n][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function t(e,n){return this.convert(e,this.workingColorSpace,n)},toWorkingColorSpace:function t(e,n){return this.convert(e,n,this.workingColorSpace)}},Ma={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sa={r:0,g:0,b:0},Ea={h:0,s:0,l:0},Ta={h:0,s:0,l:0};function Ca(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function ka(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}var Aa=function(t){function e(t,n,r){return ge(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return _e(e,[{key:"set",value:function t(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function t(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,wa.toWorkingColorSpace(this,n),this}},{key:"setRGB",value:function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ci;return this.r=e,this.g=n,this.b=r,wa.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ci;if(e=ji(e,1),n=Zi(n,0,1),r=Zi(r,0,1),0===n)this.r=this.g=this.b=r;else{var a=r<=.5?r*(1+n):r+n-r*n,o=2*r-a;this.r=Ca(o,a,e+1/3),this.g=Ca(o,a,e),this.b=Ca(o,a,e-1/3)}return wa.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui,r;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var a,o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,wa.toWorkingColorSpace(this,n),i(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,wa.toWorkingColorSpace(this,n),i(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){var l=parseFloat(a[1])/360,u=parseFloat(a[2])/100,c=parseFloat(a[3])/100;return i(a[4]),this.setHSL(l,u,c,n)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){var h=r[1],f=h.length;if(3===f)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,wa.toWorkingColorSpace(this,n),this;if(6===f)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,wa.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui,r=Ma[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function t(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function t(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function t(e){return this.r=_a(e.r),this.g=_a(e.g),this.b=_a(e.b),this}},{key:"copyLinearToSRGB",value:function t(e){return this.r=xa(e.r),this.g=xa(e.g),this.b=xa(e.b),this}},{key:"convertSRGBToLinear",value:function t(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function t(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ui;return wa.fromWorkingColorSpace(ka(this,Sa),e),Zi(255*Sa.r,0,255)<<16^Zi(255*Sa.g,0,255)<<8^Zi(255*Sa.b,0,255)<<0}},{key:"getHexString",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ui;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;wa.fromWorkingColorSpace(ka(this,Sa),n);var r=Sa.r,i=Sa.g,a=Sa.b,o=Math.max(r,i,a),s=Math.min(r,i,a),l,u,c=(s+o)/2;if(s===o)l=0,u=0;else{var h=o-s;switch(u=c<=.5?h/(o+s):h/(2-o-s),o){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4}l/=6}return e.h=l,e.s=u,e.l=c,e}},{key:"getRGB",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return wa.fromWorkingColorSpace(ka(this,Sa),n),e.r=Sa.r,e.g=Sa.g,e.b=Sa.b,e}},{key:"getStyle",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ui;return wa.fromWorkingColorSpace(ka(this,Sa),e),e!==ui?"color(".concat(e," ").concat(Sa.r," ").concat(Sa.g," ").concat(Sa.b,")"):"rgb(".concat(255*Sa.r|0,",").concat(255*Sa.g|0,",").concat(255*Sa.b|0,")")}},{key:"offsetHSL",value:function t(e,n,r){return this.getHSL(Ea),Ea.h+=e,Ea.s+=n,Ea.l+=r,this.setHSL(Ea.h,Ea.s,Ea.l),this}},{key:"add",value:function t(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function t(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}},{key:"addScalar",value:function t(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function t(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function t(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function t(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function t(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}},{key:"lerpColors",value:function t(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}},{key:"lerpHSL",value:function t(e,n){this.getHSL(Ea),e.getHSL(Ta);var r=Yi(Ea.h,Ta.h,n),i=Yi(Ea.s,Ta.s,n),a=Yi(Ea.l,Ta.l,n);return this.setHSL(r,i,a),this}},{key:"equals",value:function t(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}},{key:"fromBufferAttribute",value:function t(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}},{key:"toJSON",value:function t(){return this.getHex()}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),t,this)}))}]),e}(Symbol.iterator),Pa;Aa.NAMES=Ma;var La=function(){function t(){ge(this,t)}return _e(t,null,[{key:"getDataURL",value:function t(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===Pa&&(Pa=ya("canvas")),Pa.width=e.width,Pa.height=e.height;var r=Pa.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Pa}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}},{key:"sRGBToLinear",value:function t(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var n=ya("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);for(var i=r.getImageData(0,0,e.width,e.height),a=i.data,o=0;o<a.length;o++)a[o]=255*_a(a[o]/255);return r.putImageData(i,0,0),n}if(e.data){for(var s=e.data.slice(0),l=0;l<s.length;l++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[l]=Math.floor(255*_a(s[l]/255)):s[l]=_a(s[l]);return{data:s,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),t}(),Da=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ge(this,t),this.isSource=!0,this.uuid=Wi(),this.data=e,this.version=0}return _e(t,[{key:"needsUpdate",set:function t(e){!0===e&&this.version++}},{key:"toJSON",value:function t(e){var n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.images[this.uuid])return e.images[this.uuid];var r={uuid:this.uuid,url:""},i=this.data;if(null!==i){var a;if(Array.isArray(i)){a=[];for(var o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(Ra(i[o].image)):a.push(Ra(i[o]))}else a=Ra(i);r.url=a}return n||(e.images[this.uuid]=r),r}}]),t}();function Ra(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?La.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Ia=0,Na=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nn,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nn,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hn,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zn,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:or,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:qn,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ni;return ge(this,n),(t=e.call(this)).isTexture=!0,Object.defineProperty(fe(t),"id",{value:Ia++}),t.uuid=Wi(),t.name="",t.source=new Da(r),t.mipmaps=[],t.mapping=i,t.wrapS=a,t.wrapT=o,t.magFilter=s,t.minFilter=l,t.anisotropy=h,t.format=u,t.internalFormat=null,t.type=c,t.offset=new da(0,0),t.repeat=new da(1,1),t.center=new da(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new pa,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=f,t.userData={},t.version=0,t.onUpdate=null,t.isRenderTargetTexture=!1,t.needsPMREMUpdate=!1,t}return _e(n,[{key:"image",get:function t(){return this.source.data},set:function t(e){this.source.data=e}},{key:"updateMatrix",value:function t(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function t(e){var n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}},{key:"dispose",value:function t(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function t(e){if(this.mapping!==kn)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case In:e.x=e.x-Math.floor(e.x);break;case Nn:e.x=e.x<0?0:1;break;case On:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case In:e.y=e.y-Math.floor(e.y);break;case Nn:e.y=e.y<0?0:1;break;case On:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function t(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Ui);Na.DEFAULT_IMAGE=null,Na.DEFAULT_MAPPING=kn;var Oa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ge(this,e),e.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=i}return _e(e,[{key:"width",get:function t(){return this.z},set:function t(e){this.z=e}},{key:"height",get:function t(){return this.w},set:function t(e){this.w=e}},{key:"set",value:function t(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}},{key:"setScalar",value:function t(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function t(e){return this.x=e,this}},{key:"setY",value:function t(e){return this.y=e,this}},{key:"setZ",value:function t(e){return this.z=e,this}},{key:"setW",value:function t(e){return this.w=e,this}},{key:"setComponent",value:function t(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function t(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function t(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function t(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function t(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function t(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function t(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}},{key:"addScaledVector",value:function t(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}},{key:"sub",value:function t(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function t(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function t(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}},{key:"multiply",value:function t(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function t(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function t(e){var n=this.x,r=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*a,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*a,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*a,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*a,this}},{key:"divideScalar",value:function t(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function t(e){this.w=2*Math.acos(e.w);var n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}},{key:"setAxisAngleFromRotationMatrix",value:function t(e){var n,r,i,a,o=.01,s=.1,l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(c-f)<o&&Math.abs(h-m)<o&&Math.abs(p-v)<o){if(Math.abs(c+f)<s&&Math.abs(h+m)<s&&Math.abs(p+v)<s&&Math.abs(u+d+g-3)<s)return this.set(1,0,0,0),this;n=Math.PI;var y=(u+1)/2,_=(d+1)/2,x=(g+1)/2,b=(c+f)/4,w=(h+m)/4,M=(p+v)/4;return y>_&&y>x?y<o?(r=0,i=.707106781,a=.707106781):(i=b/(r=Math.sqrt(y)),a=w/r):_>x?_<o?(r=.707106781,i=0,a=.707106781):(r=b/(i=Math.sqrt(_)),a=M/i):x<o?(r=.707106781,i=.707106781,a=0):(r=w/(a=Math.sqrt(x)),i=M/a),this.set(r,i,a,n),this}var S=Math.sqrt((v-p)*(v-p)+(h-m)*(h-m)+(f-c)*(f-c));return Math.abs(S)<.001&&(S=1),this.x=(v-p)/S,this.y=(h-m)/S,this.z=(f-c)/S,this.w=Math.acos((u+d+g-1)/2),this}},{key:"min",value:function t(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function t(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function t(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}},{key:"clampScalar",value:function t(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}},{key:"clampLength",value:function t(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function t(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function t(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function t(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function t(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function t(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function t(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function t(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function t(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function t(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function t(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function t(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function t(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}},{key:"lerpVectors",value:function t(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}},{key:"equals",value:function t(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}},{key:"fromBufferAttribute",value:function t(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}},{key:"random",value:function t(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),t,this)}))}]),e}(Symbol.iterator),Fa=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ge(this,n),(t=e.call(this)).isWebGLRenderTarget=!0,t.width=r,t.height=i,t.depth=1,t.scissor=new Oa(0,0,r,i),t.scissorTest=!1,t.viewport=new Oa(0,0,r,i);var o={width:r,height:i,depth:1};return t.texture=new Na(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),t.texture.isRenderTargetTexture=!0,t.texture.flipY=!1,t.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,t.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,t.texture.minFilter=void 0!==a.minFilter?a.minFilter:Hn,t.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,t.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,t.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,t.samples=void 0!==a.samples?a.samples:0,t}return _e(n,[{key:"setSize",value:function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===n&&this.depth===r||(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var n=Object.assign({},e.texture.image);return this.texture.source=new Da(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function t(){this.dispatchEvent({type:"dispose"})}}]),n}(Ui),za=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ge(this,n),(t=e.call(this,null)).isDataArrayTexture=!0,t.image={data:r,width:i,height:a,depth:o},t.magFilter=Fn,t.minFilter=Fn,t.wrapR=Nn,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return _e(n)}(Na),Ua=null,Va=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ge(this,n),(t=e.call(this,null)).isData3DTexture=!0,t.image={data:r,width:i,height:a,depth:o},t.magFilter=Fn,t.minFilter=Fn,t.wrapR=Nn,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return _e(n)}(Na),Ba=null,Ha=null,Ga=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ge(this,e),this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=i}return _e(e,[{key:"x",get:function t(){return this._x},set:function t(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function t(){return this._y},set:function t(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function t(){return this._z},set:function t(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function t(){return this._w},set:function t(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function t(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function t(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function t(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function t(e,n){var r=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,u=s(r/2),c=s(i/2),h=s(a/2),f=l(r/2),d=l(i/2),p=l(a/2);switch(o){case"XYZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"YXZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"ZXY":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"ZYX":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"YZX":this._x=f*c*h+u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h-f*d*p;break;case"XZY":this._x=f*c*h-u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==n&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function t(e,n){var r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function t(e){var n=e.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=r+s+h;if(f>0){var d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(a-u)*d,this._z=(o-i)*d}else if(r>s&&r>h){var p=2*Math.sqrt(1+r-s-h);this._w=(c-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(a+u)/p}else if(s>h){var m=2*Math.sqrt(1+s-r-h);this._w=(a-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{var v=2*Math.sqrt(1+h-r-s);this._w=(o-i)/v,this._x=(a+u)/v,this._y=(l+c)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function t(e,n){var r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}},{key:"angleTo",value:function t(e){return 2*Math.acos(Math.abs(Zi(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function t(e,n){var r=this.angleTo(e);if(0===r)return this;var i=Math.min(1,n/r);return this.slerp(e,i),this}},{key:"identity",value:function t(){return this.set(0,0,0,1)}},{key:"invert",value:function t(){return this.conjugate()}},{key:"conjugate",value:function t(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function t(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function t(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function t(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function t(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function t(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function t(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function t(e,n){var r=e._x,i=e._y,a=e._z,o=e._w,s=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+o*s+i*u-a*l,this._y=i*c+o*l+a*s-r*u,this._z=a*c+o*u+r*l-i*s,this._w=o*c-r*s-i*l-a*u,this._onChangeCallback(),this}},{key:"slerp",value:function t(e,n){if(0===n)return this;if(1===n)return this.copy(e);var r=this._x,i=this._y,a=this._z,o=this._w,s=o*e._w+r*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=i,this._z=a,this;var l=1-s*s;if(l<=Number.EPSILON){var u=1-n;return this._w=u*o+n*this._w,this._x=u*r+n*this._x,this._y=u*i+n*this._y,this._z=u*a+n*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(l),h=Math.atan2(c,s),f=Math.sin((1-n)*h)/c,d=Math.sin(n*h)/c;return this._w=o*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function t(e,n,r){return this.copy(e).slerp(n,r)}},{key:"random",value:function t(){var e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(a),r*Math.cos(a),n*Math.sin(i))}},{key:"equals",value:function t(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}},{key:"fromBufferAttribute",value:function t(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}},{key:"_onChange",value:function t(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function t(){}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),t,this)}))}],[{key:"slerpFlat",value:function t(e,n,r,i,a,o,s){var l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3],f=a[o+0],d=a[o+1],p=a[o+2],m=a[o+3];if(0===s)return e[n+0]=l,e[n+1]=u,e[n+2]=c,void(e[n+3]=h);if(1===s)return e[n+0]=f,e[n+1]=d,e[n+2]=p,void(e[n+3]=m);if(h!==m||l!==f||u!==d||c!==p){var v=1-s,g=l*f+u*d+c*p+h*m,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){var x=Math.sqrt(_),b=Math.atan2(x,g*y);v=Math.sin(v*b)/x,s=Math.sin(s*b)/x}var w=s*y;if(l=l*v+f*w,u=u*v+d*w,c=c*v+p*w,h=h*v+m*w,v===1-s){var M=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=M,u*=M,c*=M,h*=M}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=h}},{key:"multiplyQuaternionsFlat",value:function t(e,n,r,i,a,o){var s=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=a[o],f=a[o+1],d=a[o+2],p=a[o+3];return e[n]=s*p+c*h+l*d-u*f,e[n+1]=l*p+c*f+u*h-s*d,e[n+2]=u*p+c*d+s*f-l*h,e[n+3]=c*p-s*h-l*f-u*d,e}}]),e}(Symbol.iterator),Wa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ge(this,e),e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}return _e(e,[{key:"set",value:function t(e,n,r){return void 0===r&&(r=this.z),this.x=e,this.y=n,this.z=r,this}},{key:"setScalar",value:function t(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function t(e){return this.x=e,this}},{key:"setY",value:function t(e){return this.y=e,this}},{key:"setZ",value:function t(e){return this.z=e,this}},{key:"setComponent",value:function t(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function t(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function t(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function t(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function t(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function t(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function t(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}},{key:"addScaledVector",value:function t(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}},{key:"sub",value:function t(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function t(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function t(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}},{key:"multiply",value:function t(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function t(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function t(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}},{key:"applyEuler",value:function t(e){return this.applyQuaternion(ja.setFromEuler(e))}},{key:"applyAxisAngle",value:function t(e,n){return this.applyQuaternion(ja.setFromAxisAngle(e,n))}},{key:"applyMatrix3",value:function t(e){var n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}},{key:"applyNormalMatrix",value:function t(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function t(e){var n=this.x,r=this.y,i=this.z,a=e.elements,o=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*o,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*o,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*o,this}},{key:"applyQuaternion",value:function t(e){var n=this.x,r=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,u=l*n+o*i-s*r,c=l*r+s*n-a*i,h=l*i+a*r-o*n,f=-a*n-o*r-s*i;return this.x=u*l+f*-a+c*-s-h*-o,this.y=c*l+f*-o+h*-a-u*-s,this.z=h*l+f*-s+u*-o-c*-a,this}},{key:"project",value:function t(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function t(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function t(e){var n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}},{key:"divide",value:function t(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function t(e){return this.multiplyScalar(1/e)}},{key:"min",value:function t(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function t(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function t(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}},{key:"clampScalar",value:function t(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}},{key:"clampLength",value:function t(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function t(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function t(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function t(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function t(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function t(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function t(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function t(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function t(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function t(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function t(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function t(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function t(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}},{key:"lerpVectors",value:function t(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}},{key:"cross",value:function t(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function t(e,n){var r=e.x,i=e.y,a=e.z,o=n.x,s=n.y,l=n.z;return this.x=i*l-a*s,this.y=a*o-r*l,this.z=r*s-i*o,this}},{key:"projectOnVector",value:function t(e){var n=e.lengthSq();if(0===n)return this.set(0,0,0);var r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}},{key:"projectOnPlane",value:function t(e){return Za.copy(this).projectOnVector(e),this.sub(Za)}},{key:"reflect",value:function t(e){return this.sub(Za.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function t(e){var n=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===n)return Math.PI/2;var r=this.dot(e)/n;return Math.acos(Zi(r,-1,1))}},{key:"distanceTo",value:function t(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function t(e){var n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}},{key:"manhattanDistanceTo",value:function t(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function t(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function t(e,n,r){var i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}},{key:"setFromCylindrical",value:function t(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function t(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}},{key:"setFromMatrixPosition",value:function t(e){var n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}},{key:"setFromMatrixScale",value:function t(e){var n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}},{key:"setFromMatrixColumn",value:function t(e,n){return this.fromArray(e.elements,4*n)}},{key:"setFromMatrix3Column",value:function t(e,n){return this.fromArray(e.elements,3*n)}},{key:"setFromEuler",value:function t(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function t(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}},{key:"fromBufferAttribute",value:function t(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}},{key:"random",value:function t(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function t(){var e=2*(Math.random()-.5),n=Math.random()*Math.PI*2,r=Math.sqrt(1-Math.pow(e,2));return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),t,this)}))}]),e}(Symbol.iterator),Za=new Wa,ja=new Ga,qa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa(-1/0,-1/0,-1/0);ge(this,t),this.isBox3=!0,this.min=e,this.max=n}return _e(t,[{key:"set",value:function t(e,n){return this.min.copy(e),this.max.copy(n),this}},{key:"setFromArray",value:function t(e){for(var n=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0,l=0,u=e.length;l<u;l+=3){var c=e[l],h=e[l+1],f=e[l+2];c<n&&(n=c),h<r&&(r=h),f<i&&(i=f),c>a&&(a=c),h>o&&(o=h),f>s&&(s=f)}return this.min.set(n,r,i),this.max.set(a,o,s),this}},{key:"setFromBufferAttribute",value:function t(e){for(var n=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0,l=0,u=e.count;l<u;l++){var c=e.getX(l),h=e.getY(l),f=e.getZ(l);c<n&&(n=c),h<r&&(r=h),f<i&&(i=f),c>a&&(a=c),h>o&&(o=h),f>s&&(s=f)}return this.min.set(n,r,i),this.max.set(a,o,s),this}},{key:"setFromPoints",value:function t(e){this.makeEmpty();for(var n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}},{key:"setFromCenterAndSize",value:function t(e,n){var r=Ya.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}},{key:"setFromObject",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,n)}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function t(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function t(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function t(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function t(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function t(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function t(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function t(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var r=e.geometry;if(void 0!==r)if(n&&null!=r.attributes&&void 0!==r.attributes.position)for(var i=r.attributes.position,a=0,o=i.count;a<o;a++)Ya.fromBufferAttribute(i,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Ya);else null===r.boundingBox&&r.computeBoundingBox(),Ka.copy(r.boundingBox),Ka.applyMatrix4(e.matrixWorld),this.union(Ka);for(var s=e.children,l=0,u=s.length;l<u;l++)this.expandByObject(s[l],n);return this}},{key:"containsPoint",value:function t(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function t(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function t(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function t(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function t(e){return this.clampPoint(e.center,Ya),Ya.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function t(e){var n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}},{key:"intersectsTriangle",value:function t(e){if(this.isEmpty())return!1;this.getCenter(ro),io.subVectors(this.max,ro),Ja.subVectors(e.a,ro),Qa.subVectors(e.b,ro),$a.subVectors(e.c,ro),to.subVectors(Qa,Ja),eo.subVectors($a,Qa),no.subVectors(Ja,$a);var n=[0,-to.z,to.y,0,-eo.z,eo.y,0,-no.z,no.y,to.z,0,-to.x,eo.z,0,-eo.x,no.z,0,-no.x,-to.y,to.x,0,-eo.y,eo.x,0,-no.y,no.x,0];return!!so(n,Ja,Qa,$a,io)&&(!!so(n=[1,0,0,0,1,0,0,0,1],Ja,Qa,$a,io)&&(ao.crossVectors(to,eo),so(n=[ao.x,ao.y,ao.z],Ja,Qa,$a,io)))}},{key:"clampPoint",value:function t(e,n){return n.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function t(e){var n;return Ya.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function t(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ya).length(),e}},{key:"intersect",value:function t(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function t(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function t(e){return this.isEmpty()||(Xa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xa)),this}},{key:"translate",value:function t(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function t(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),t}(),Xa=[new Wa,new Wa,new Wa,new Wa,new Wa,new Wa,new Wa,new Wa],Ya=new Wa,Ka=new qa,Ja=new Wa,Qa=new Wa,$a=new Wa,to=new Wa,eo=new Wa,no=new Wa,ro=new Wa,io=new Wa,ao=new Wa,oo=new Wa;function so(t,e,n,r,i){for(var a=0,o=t.length-3;a<=o;a+=3){oo.fromArray(t,a);var s=i.x*Math.abs(oo.x)+i.y*Math.abs(oo.y)+i.z*Math.abs(oo.z),l=e.dot(oo),u=n.dot(oo),c=r.dot(oo);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var lo=new qa,uo=new Wa,co=new Wa,ho=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;ge(this,t),this.center=e,this.radius=n}return _e(t,[{key:"set",value:function t(e,n){return this.center.copy(e),this.radius=n,this}},{key:"setFromPoints",value:function t(e,n){var r=this.center;void 0!==n?r.copy(n):lo.setFromPoints(e).getCenter(r);for(var i=0,a=0,o=e.length;a<o;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function t(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function t(){return this.radius<0}},{key:"makeEmpty",value:function t(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function t(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function t(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function t(e){var n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}},{key:"intersectsBox",value:function t(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function t(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function t(e,n){var r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}},{key:"getBoundingBox",value:function t(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function t(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function t(e){return this.center.add(e),this}},{key:"expandByPoint",value:function t(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;uo.subVectors(e,this.center);var n=uo.lengthSq();if(n>this.radius*this.radius){var r=Math.sqrt(n),i=.5*(r-this.radius);this.center.addScaledVector(uo,i/r),this.radius+=i}return this}},{key:"union",value:function t(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(co.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(uo.copy(e.center).add(co)),this.expandByPoint(uo.copy(e.center).sub(co))),this)}},{key:"equals",value:function t(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}}]),t}(),fo=new Wa,po=new Wa,mo=new Wa,vo=new Wa,go=new Wa,yo=new Wa,_o=new Wa,xo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa(0,0,-1);ge(this,t),this.origin=e,this.direction=n}return _e(t,[{key:"set",value:function t(e,n){return this.origin.copy(e),this.direction.copy(n),this}},{key:"copy",value:function t(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function t(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function t(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function t(e){return this.origin.copy(this.at(e,fo)),this}},{key:"closestPointToPoint",value:function t(e,n){n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}},{key:"distanceToPoint",value:function t(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function t(e){var n=fo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(fo.copy(this.direction).multiplyScalar(n).add(this.origin),fo.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function t(e,n,r,i){po.copy(e).add(n).multiplyScalar(.5),mo.copy(n).sub(e).normalize(),vo.copy(this.origin).sub(po);var a=.5*e.distanceTo(n),o=-this.direction.dot(mo),s=vo.dot(this.direction),l=-vo.dot(mo),u=vo.lengthSq(),c=Math.abs(1-o*o),h,f,d,p;if(c>0)if(f=o*s-l,p=a*c,(h=o*l-s)>=0)if(f>=-p)if(f<=p){var m=1/c;d=(h*=m)*(h+o*(f*=m)+2*s)+f*(o*h+f+2*l)+u}else f=a,d=-(h=Math.max(0,-(o*f+s)))*h+f*(f+2*l)+u;else f=-a,d=-(h=Math.max(0,-(o*f+s)))*h+f*(f+2*l)+u;else f<=-p?d=-(h=Math.max(0,-(-o*a+s)))*h+(f=h>0?-a:Math.min(Math.max(-a,-l),a))*(f+2*l)+u:f<=p?(h=0,d=(f=Math.min(Math.max(-a,-l),a))*(f+2*l)+u):d=-(h=Math.max(0,-(o*a+s)))*h+(f=h>0?a:Math.min(Math.max(-a,-l),a))*(f+2*l)+u;else f=o>0?-a:a,d=-(h=Math.max(0,-(o*f+s)))*h+f*(f+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(mo).multiplyScalar(f).add(po),d}},{key:"intersectSphere",value:function t(e,n){fo.subVectors(e.center,this.origin);var r=fo.dot(this.direction),i=fo.dot(fo)-r*r,a=e.radius*e.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,l=r+o;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}},{key:"intersectsSphere",value:function t(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function t(e){var n=e.normal.dot(this.direction);if(0===n)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}},{key:"intersectPlane",value:function t(e,n){var r=this.distanceToPlane(e);return null===r?null:this.at(r,n)}},{key:"intersectsPlane",value:function t(e){var n=e.distanceToPoint(this.origin),r;return 0===n||e.normal.dot(this.direction)*n<0}},{key:"intersectBox",value:function t(e,n){var r,i,a,o,s,l,u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(a=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(a=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||a>i?null:((a>r||isNaN(r))&&(r=a),(o<i||isNaN(i))&&(i=o),h>=0?(s=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(s=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||s>i?null:((s>r||r!=r)&&(r=s),(l<i||i!=i)&&(i=l),i<0?null:this.at(r>=0?r:i,n)))}},{key:"intersectsBox",value:function t(e){return null!==this.intersectBox(e,fo)}},{key:"intersectTriangle",value:function t(e,n,r,i,a){go.subVectors(n,e),yo.subVectors(r,e),_o.crossVectors(go,yo);var o=this.direction.dot(_o),s;if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}vo.subVectors(this.origin,e);var l=s*this.direction.dot(yo.crossVectors(vo,yo));if(l<0)return null;var u=s*this.direction.dot(go.cross(vo));if(u<0)return null;if(l+u>o)return null;var c=-s*vo.dot(_o);return c<0?null:this.at(c/o,a)}},{key:"applyMatrix4",value:function t(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function t(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}}]),t}(),bo=function(){function t(){ge(this,t),t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return _e(t,[{key:"set",value:function t(e,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v){var g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=a,g[5]=o,g[9]=s,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=f,g[3]=d,g[7]=p,g[11]=m,g[15]=v,this}},{key:"identity",value:function t(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function e(){return(new t).fromArray(this.elements)}},{key:"copy",value:function t(e){var n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}},{key:"copyPosition",value:function t(e){var n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}},{key:"setFromMatrix3",value:function t(e){var n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}},{key:"extractBasis",value:function t(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function t(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}},{key:"extractRotation",value:function t(e){var n=this.elements,r=e.elements,i=1/wo.setFromMatrixColumn(e,0).length(),a=1/wo.setFromMatrixColumn(e,1).length(),o=1/wo.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromEuler",value:function t(e){var n=this.elements,r=e.x,i=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if("XYZ"===e.order){var f=o*c,d=o*h,p=s*c,m=s*h;n[0]=l*c,n[4]=-l*h,n[8]=u,n[1]=d+p*u,n[5]=f-m*u,n[9]=-s*l,n[2]=m-f*u,n[6]=p+d*u,n[10]=o*l}else if("YXZ"===e.order){var v=l*c,g=l*h,y=u*c,_=u*h;n[0]=v+_*s,n[4]=y*s-g,n[8]=o*u,n[1]=o*h,n[5]=o*c,n[9]=-s,n[2]=g*s-y,n[6]=_+v*s,n[10]=o*l}else if("ZXY"===e.order){var x=l*c,b=l*h,w=u*c,M=u*h;n[0]=x-M*s,n[4]=-o*h,n[8]=w+b*s,n[1]=b+w*s,n[5]=o*c,n[9]=M-x*s,n[2]=-o*u,n[6]=s,n[10]=o*l}else if("ZYX"===e.order){var S=o*c,E=o*h,T=s*c,C=s*h;n[0]=l*c,n[4]=T*u-E,n[8]=S*u+C,n[1]=l*h,n[5]=C*u+S,n[9]=E*u-T,n[2]=-u,n[6]=s*l,n[10]=o*l}else if("YZX"===e.order){var k=o*l,A=o*u,P=s*l,L=s*u;n[0]=l*c,n[4]=L-k*h,n[8]=P*h+A,n[1]=h,n[5]=o*c,n[9]=-s*c,n[2]=-u*c,n[6]=A*h+P,n[10]=k-L*h}else if("XZY"===e.order){var D=o*l,R=o*u,I=s*l,N=s*u;n[0]=l*c,n[4]=-h,n[8]=u*c,n[1]=D*h+N,n[5]=o*c,n[9]=R*h-I,n[2]=I*h-R,n[6]=s*c,n[10]=N*h+D}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function t(e){return this.compose(So,e,Eo)}},{key:"lookAt",value:function t(e,n,r){var i=this.elements;return ko.subVectors(e,n),0===ko.lengthSq()&&(ko.z=1),ko.normalize(),To.crossVectors(r,ko),0===To.lengthSq()&&(1===Math.abs(r.z)?ko.x+=1e-4:ko.z+=1e-4,ko.normalize(),To.crossVectors(r,ko)),To.normalize(),Co.crossVectors(ko,To),i[0]=To.x,i[4]=Co.x,i[8]=ko.x,i[1]=To.y,i[5]=Co.y,i[9]=ko.y,i[2]=To.z,i[6]=Co.z,i[10]=ko.z,this}},{key:"multiply",value:function t(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function t(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function t(e,n){var r=e.elements,i=n.elements,a=this.elements,o=r[0],s=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],p=r[2],m=r[6],v=r[10],g=r[14],y=r[3],_=r[7],x=r[11],b=r[15],w=i[0],M=i[4],S=i[8],E=i[12],T=i[1],C=i[5],k=i[9],A=i[13],P=i[2],L=i[6],D=i[10],R=i[14],I=i[3],N=i[7],O=i[11],F=i[15];return a[0]=o*w+s*T+l*P+u*I,a[4]=o*M+s*C+l*L+u*N,a[8]=o*S+s*k+l*D+u*O,a[12]=o*E+s*A+l*R+u*F,a[1]=c*w+h*T+f*P+d*I,a[5]=c*M+h*C+f*L+d*N,a[9]=c*S+h*k+f*D+d*O,a[13]=c*E+h*A+f*R+d*F,a[2]=p*w+m*T+v*P+g*I,a[6]=p*M+m*C+v*L+g*N,a[10]=p*S+m*k+v*D+g*O,a[14]=p*E+m*A+v*R+g*F,a[3]=y*w+_*T+x*P+b*I,a[7]=y*M+_*C+x*L+b*N,a[11]=y*S+_*k+x*D+b*O,a[15]=y*E+_*A+x*R+b*F,this}},{key:"multiplyScalar",value:function t(e){var n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}},{key:"determinant",value:function t(){var e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],p,m,v,g;return e[3]*(+a*l*h-i*u*h-a*s*f+r*u*f+i*s*d-r*l*d)+e[7]*(+n*l*d-n*u*f+a*o*f-i*o*d+i*u*c-a*l*c)+e[11]*(+n*u*h-n*s*d-a*o*h+r*o*d+a*s*c-r*u*c)+e[15]*(-i*s*c-n*l*h+n*s*f+i*o*h-r*o*f+r*l*c)}},{key:"transpose",value:function t(){var e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}},{key:"setPosition",value:function t(e,n,r){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}},{key:"invert",value:function t(){var e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=h*v*u-m*f*u+m*l*d-s*v*d-h*l*g+s*f*g,_=p*f*u-c*v*u-p*l*d+o*v*d+c*l*g-o*f*g,x=c*m*u-p*h*u+p*s*d-o*m*d-c*s*g+o*h*g,b=p*h*l-c*m*l-p*s*f+o*m*f+c*s*v-o*h*v,w=n*y+r*_+i*x+a*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/w;return e[0]=y*M,e[1]=(m*f*a-h*v*a-m*i*d+r*v*d+h*i*g-r*f*g)*M,e[2]=(s*v*a-m*l*a+m*i*u-r*v*u-s*i*g+r*l*g)*M,e[3]=(h*l*a-s*f*a-h*i*u+r*f*u+s*i*d-r*l*d)*M,e[4]=_*M,e[5]=(c*v*a-p*f*a+p*i*d-n*v*d-c*i*g+n*f*g)*M,e[6]=(p*l*a-o*v*a-p*i*u+n*v*u+o*i*g-n*l*g)*M,e[7]=(o*f*a-c*l*a+c*i*u-n*f*u-o*i*d+n*l*d)*M,e[8]=x*M,e[9]=(p*h*a-c*m*a-p*r*d+n*m*d+c*r*g-n*h*g)*M,e[10]=(o*m*a-p*s*a+p*r*u-n*m*u-o*r*g+n*s*g)*M,e[11]=(c*s*a-o*h*a-c*r*u+n*h*u+o*r*d-n*s*d)*M,e[12]=b*M,e[13]=(c*m*i-p*h*i+p*r*f-n*m*f-c*r*v+n*h*v)*M,e[14]=(p*s*i-o*m*i-p*r*l+n*m*l+o*r*v-n*s*v)*M,e[15]=(o*h*i-c*s*i+c*r*l-n*h*l-o*r*f+n*s*f)*M,this}},{key:"scale",value:function t(e){var n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function t(){var e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}},{key:"makeTranslation",value:function t(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}},{key:"makeRotationX",value:function t(e){var n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}},{key:"makeRotationY",value:function t(e){var n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}},{key:"makeRotationZ",value:function t(e){var n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function t(e,n){var r=Math.cos(n),i=Math.sin(n),a=1-r,o=e.x,s=e.y,l=e.z,u=a*o,c=a*s;return this.set(u*o+r,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+r,c*l-i*o,0,u*l-i*s,c*l+i*o,a*l*l+r,0,0,0,0,1),this}},{key:"makeScale",value:function t(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}},{key:"makeShear",value:function t(e,n,r,i,a,o){return this.set(1,r,a,0,e,1,o,0,n,i,1,0,0,0,0,1),this}},{key:"compose",value:function t(e,n,r){var i=this.elements,a=n._x,o=n._y,s=n._z,l=n._w,u=a+a,c=o+o,h=s+s,f=a*u,d=a*c,p=a*h,m=o*c,v=o*h,g=s*h,y=l*u,_=l*c,x=l*h,b=r.x,w=r.y,M=r.z;return i[0]=(1-(m+g))*b,i[1]=(d+x)*b,i[2]=(p-_)*b,i[3]=0,i[4]=(d-x)*w,i[5]=(1-(f+g))*w,i[6]=(v+y)*w,i[7]=0,i[8]=(p+_)*M,i[9]=(v-y)*M,i[10]=(1-(f+m))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function t(e,n,r){var i=this.elements,a=wo.set(i[0],i[1],i[2]).length(),o=wo.set(i[4],i[5],i[6]).length(),s=wo.set(i[8],i[9],i[10]).length(),l;this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Mo.copy(this);var u=1/a,c=1/o,h=1/s;return Mo.elements[0]*=u,Mo.elements[1]*=u,Mo.elements[2]*=u,Mo.elements[4]*=c,Mo.elements[5]*=c,Mo.elements[6]*=c,Mo.elements[8]*=h,Mo.elements[9]*=h,Mo.elements[10]*=h,n.setFromRotationMatrix(Mo),r.x=a,r.y=o,r.z=s,this}},{key:"makePerspective",value:function t(e,n,r,i,a,o){var s=this.elements,l=2*a/(n-e),u=2*a/(r-i),c=(n+e)/(n-e),h=(r+i)/(r-i),f=-(o+a)/(o-a),d=-2*o*a/(o-a);return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}},{key:"makeOrthographic",value:function t(e,n,r,i,a,o){var s=this.elements,l=1/(n-e),u=1/(r-i),c=1/(o-a),h=(n+e)*l,f=(r+i)*u,d=(o+a)*c;return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}},{key:"equals",value:function t(e){for(var n=this.elements,r=e.elements,i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function t(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<16;r++)this.elements[r]=e[r+n];return this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}]),t}(),wo=new Wa,Mo=new bo,So=new Wa(0,0,0),Eo=new Wa(1,1,1),To=new Wa,Co=new Wa,ko=new Wa,Ao=new bo,Po=new Ga,Lo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;ge(this,e),this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=i}return _e(e,[{key:"x",get:function t(){return this._x},set:function t(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function t(){return this._y},set:function t(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function t(){return this._z},set:function t(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function t(){return this._order},set:function t(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function t(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function t(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Zi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(Zi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-Zi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Zi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Zi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function t(e,n,r){return Ao.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ao,n,r)}},{key:"setFromVector3",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,n)}},{key:"reorder",value:function t(e){return Po.setFromEuler(this),this.setFromQuaternion(Po,e)}},{key:"equals",value:function t(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function t(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}},{key:"_onChange",value:function t(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function t(){}},{key:t,value:ve().mark((function t(){return ve().wrap((function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),t,this)}))},{key:"toVector3",value:function t(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),e}(Symbol.iterator);Lo.DefaultOrder="XYZ",Lo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Do=function(){function t(){ge(this,t),this.mask=1}return _e(t,[{key:"set",value:function t(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function t(e){this.mask|=1<<e|0}},{key:"enableAll",value:function t(){this.mask=-1}},{key:"toggle",value:function t(e){this.mask^=1<<e|0}},{key:"disable",value:function t(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function t(){this.mask=0}},{key:"test",value:function t(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function t(e){return 0!=(this.mask&(1<<e|0))}}]),t}(),Ro=0,Io=new Wa,No=new Ga,Oo=new bo,Fo=new Wa,zo=new Wa,Uo=new Wa,Vo=new Ga,Bo=new Wa(1,0,0),Ho=new Wa(0,1,0),Go=new Wa(0,0,1),Wo={type:"added"},Zo={type:"removed"},jo=function(t){le(n,t);var e=ce(n);function n(){var t;ge(this,n),(t=e.call(this)).isObject3D=!0,Object.defineProperty(fe(t),"id",{value:Ro++}),t.uuid=Wi(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var r=new Wa,i=new Lo,a=new Ga,o=new Wa(1,1,1);function s(){a.setFromEuler(i,!1)}function l(){i.setFromQuaternion(a,void 0,!1)}return i._onChange(s),a._onChange(l),Object.defineProperties(fe(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new bo},normalMatrix:{value:new pa}}),t.matrix=new bo,t.matrixWorld=new bo,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,t.layers=new Do,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return _e(n,[{key:"onBeforeRender",value:function t(){}},{key:"onAfterRender",value:function t(){}},{key:"applyMatrix4",value:function t(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function t(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function t(e,n){this.quaternion.setFromAxisAngle(e,n)}},{key:"setRotationFromEuler",value:function t(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function t(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function t(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function t(e,n){return No.setFromAxisAngle(e,n),this.quaternion.multiply(No),this}},{key:"rotateOnWorldAxis",value:function t(e,n){return No.setFromAxisAngle(e,n),this.quaternion.premultiply(No),this}},{key:"rotateX",value:function t(e){return this.rotateOnAxis(Bo,e)}},{key:"rotateY",value:function t(e){return this.rotateOnAxis(Ho,e)}},{key:"rotateZ",value:function t(e){return this.rotateOnAxis(Go,e)}},{key:"translateOnAxis",value:function t(e,n){return Io.copy(e).applyQuaternion(this.quaternion),this.position.add(Io.multiplyScalar(n)),this}},{key:"translateX",value:function t(e){return this.translateOnAxis(Bo,e)}},{key:"translateY",value:function t(e){return this.translateOnAxis(Ho,e)}},{key:"translateZ",value:function t(e){return this.translateOnAxis(Go,e)}},{key:"localToWorld",value:function t(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function t(e){return e.applyMatrix4(Oo.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function t(e,n,r){e.isVector3?Fo.copy(e):Fo.set(e,n,r);var i=this.parent;this.updateWorldMatrix(!0,!1),zo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oo.lookAt(zo,Fo,this.up):Oo.lookAt(Fo,zo,this.up),this.quaternion.setFromRotationMatrix(Oo),i&&(Oo.extractRotation(i.matrixWorld),No.setFromRotationMatrix(Oo),this.quaternion.premultiply(No.invert()))}},{key:"add",value:function t(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Wo)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function t(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Zo)),this}},{key:"removeFromParent",value:function t(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function t(){for(var e=0;e<this.children.length;e++){var n=this.children[e];n.parent=null,n.dispatchEvent(Zo)}return this.children.length=0,this}},{key:"attach",value:function t(e){return this.updateWorldMatrix(!0,!1),Oo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Oo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Oo),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function t(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function t(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function t(e,n){if(this[e]===n)return this;for(var r=0,i=this.children.length;r<i;r++){var a,o=this.children[r].getObjectByProperty(e,n);if(void 0!==o)return o}}},{key:"getWorldPosition",value:function t(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function t(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zo,e,Uo),e}},{key:"getWorldScale",value:function t(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zo,Vo,e),e}},{key:"getWorldDirection",value:function t(e){this.updateWorldMatrix(!0,!1);var n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}},{key:"raycast",value:function t(){}},{key:"traverse",value:function t(e){e(this);for(var n=this.children,r=0,i=n.length;r<i;r++)n[r].traverse(e)}},{key:"traverseVisible",value:function t(e){if(!1!==this.visible){e(this);for(var n=this.children,r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}}},{key:"traverseAncestors",value:function t(e){var n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}},{key:"updateMatrix",value:function t(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function t(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var n=this.children,r=0,i=n.length;r<i;r++){var a=n[r];!0!==a.matrixWorldAutoUpdate&&!0!==e||a.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function t(e,n){var r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n)for(var i=this.children,a=0,o=i.length;a<o;a++){var s=i[a];!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function t(e){var n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var l=0,u=s.length;l<u;l++){var c=s[l];a(e.shapes,c)}else a(e.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],f=0,d=this.material.length;f<d;f++)h.push(a(e.materials,this.material[f]));i.material=h}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(var p=0;p<this.children.length;p++)i.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var m=0;m<this.animations.length;m++){var v=this.animations[m];i.animations.push(a(e.animations,v))}}if(n){var g=E(e.geometries),y=E(e.materials),_=E(e.textures),x=E(e.images),b=E(e.shapes),w=E(e.skeletons),M=E(e.animations),S=E(e.nodes);g.length>0&&(r.geometries=g),y.length>0&&(r.materials=y),_.length>0&&(r.textures=_),x.length>0&&(r.images=x),b.length>0&&(r.shapes=b),w.length>0&&(r.skeletons=w),M.length>0&&(r.animations=M),S.length>0&&(r.nodes=S)}return r.object=i,r;function E(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}}},{key:"clone",value:function t(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}}]),n}(Ui);jo.DefaultUp=new Wa(0,1,0),jo.DefaultMatrixAutoUpdate=!0,jo.DefaultMatrixWorldAutoUpdate=!0;var qo=new Wa,Xo=new Wa,Yo=new Wa,Ko=new Wa,Jo=new Wa,Qo=new Wa,$o=new Wa,ts=new Wa,es=new Wa,ns=new Wa,rs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wa;ge(this,t),this.a=e,this.b=n,this.c=r}return _e(t,[{key:"set",value:function t(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}},{key:"setFromPointsAndIndices",value:function t(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function t(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function t(){return qo.subVectors(this.c,this.b),Xo.subVectors(this.a,this.b),.5*qo.cross(Xo).length()}},{key:"getMidpoint",value:function t(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function e(n){return t.getNormal(this.a,this.b,this.c,n)}},{key:"getPlane",value:function t(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function e(n,r){return t.getBarycoord(n,this.a,this.b,this.c,r)}},{key:"getUV",value:function e(n,r,i,a,o){return t.getUV(n,this.a,this.b,this.c,r,i,a,o)}},{key:"containsPoint",value:function e(n){return t.containsPoint(n,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function e(n){return t.isFrontFacing(this.a,this.b,this.c,n)}},{key:"intersectsBox",value:function t(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function t(e,n){var r=this.a,i=this.b,a=this.c,o,s;Jo.subVectors(i,r),Qo.subVectors(a,r),ts.subVectors(e,r);var l=Jo.dot(ts),u=Qo.dot(ts);if(l<=0&&u<=0)return n.copy(r);es.subVectors(e,i);var c=Jo.dot(es),h=Qo.dot(es);if(c>=0&&h<=c)return n.copy(i);var f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(Jo,o);ns.subVectors(e,a);var d=Jo.dot(ns),p=Qo.dot(ns);if(p>=0&&d<=p)return n.copy(a);var m=d*u-l*p;if(m<=0&&u>=0&&p<=0)return s=u/(u-p),n.copy(r).addScaledVector(Qo,s);var v=c*p-d*h;if(v<=0&&h-c>=0&&d-p>=0)return $o.subVectors(a,i),s=(h-c)/(h-c+(d-p)),n.copy(i).addScaledVector($o,s);var g=1/(v+m+f);return o=m*g,s=f*g,n.copy(r).addScaledVector(Jo,o).addScaledVector(Qo,s)}},{key:"equals",value:function t(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function t(e,n,r,i){i.subVectors(r,n),qo.subVectors(e,n),i.cross(qo);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}},{key:"getBarycoord",value:function t(e,n,r,i,a){qo.subVectors(i,n),Xo.subVectors(r,n),Yo.subVectors(e,n);var o=qo.dot(qo),s=qo.dot(Xo),l=qo.dot(Yo),u=Xo.dot(Xo),c=Xo.dot(Yo),h=o*u-s*s;if(0===h)return a.set(-2,-1,-1);var f=1/h,d=(u*l-s*c)*f,p=(o*c-s*l)*f;return a.set(1-d-p,p,d)}},{key:"containsPoint",value:function t(e,n,r,i){return this.getBarycoord(e,n,r,i,Ko),Ko.x>=0&&Ko.y>=0&&Ko.x+Ko.y<=1}},{key:"getUV",value:function t(e,n,r,i,a,o,s,l){return this.getBarycoord(e,n,r,i,Ko),l.set(0,0),l.addScaledVector(a,Ko.x),l.addScaledVector(o,Ko.y),l.addScaledVector(s,Ko.z),l}},{key:"isFrontFacing",value:function t(e,n,r,i){return qo.subVectors(r,n),Xo.subVectors(e,n),qo.cross(Xo).dot(i)<0}}]),t}(),is=0,as=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).isMaterial=!0,Object.defineProperty(fe(t),"id",{value:is++}),t.uuid=Wi(),t.name="",t.type="Material",t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.blendSrc=rn,t.blendDst=an,t.blendEquation=Xe,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=Ti,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=fi,t.stencilZFail=fi,t.stencilZPass=fi,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return _e(n,[{key:"alphaTest",get:function t(){return this._alphaTest},set:function t(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function t(){}},{key:"onBeforeRender",value:function t(){}},{key:"onBeforeCompile",value:function t(){}},{key:"customProgramCacheKey",value:function t(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function t(e){if(void 0!==e)for(var n in e){var r=e[n];if(void 0!==r){var i=this[n];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r:console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.")}else console.warn("THREE.Material: '"+n+"' parameter is undefined.")}}},{key:"toJSON",value:function t(e){var n=void 0===e||"string"==typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var a=i(e.textures),o=i(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var n=e.clippingPlanes,r=null;if(null!==n){var i=n.length;r=new Array(i);for(var a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function t(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function t(e){!0===e&&this.version++}}]),n}(Ui),os=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new Aa(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(t),r}return _e(n,[{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(as),ss=new Wa,ls=new da,us=function(){function t(e,n,r){if(ge(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===r,this.usage=Ci,this.updateRange={offset:0,count:-1},this.version=0}return _e(t,[{key:"onUploadCallback",value:function t(){}},{key:"needsUpdate",set:function t(e){!0===e&&this.version++}},{key:"setUsage",value:function t(e){return this.usage=e,this}},{key:"copy",value:function t(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function t(e,n,r){e*=this.itemSize,r*=n.itemSize;for(var i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}},{key:"copyArray",value:function t(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function t(e){if(2===this.itemSize)for(var n=0,r=this.count;n<r;n++)ls.fromBufferAttribute(this,n),ls.applyMatrix3(e),this.setXY(n,ls.x,ls.y);else if(3===this.itemSize)for(var i=0,a=this.count;i<a;i++)ss.fromBufferAttribute(this,i),ss.applyMatrix3(e),this.setXYZ(i,ss.x,ss.y,ss.z);return this}},{key:"applyMatrix4",value:function t(e){for(var n=0,r=this.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.applyMatrix4(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}},{key:"applyNormalMatrix",value:function t(e){for(var n=0,r=this.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.applyNormalMatrix(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}},{key:"transformDirection",value:function t(e){for(var n=0,r=this.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.transformDirection(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}},{key:"set",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,n),this}},{key:"getX",value:function t(e){var n=this.array[e*this.itemSize];return this.normalized&&(n=ca(n,this.array)),n}},{key:"setX",value:function t(e,n){return this.normalized&&(n=ha(n,this.array)),this.array[e*this.itemSize]=n,this}},{key:"getY",value:function t(e){var n=this.array[e*this.itemSize+1];return this.normalized&&(n=ca(n,this.array)),n}},{key:"setY",value:function t(e,n){return this.normalized&&(n=ha(n,this.array)),this.array[e*this.itemSize+1]=n,this}},{key:"getZ",value:function t(e){var n=this.array[e*this.itemSize+2];return this.normalized&&(n=ca(n,this.array)),n}},{key:"setZ",value:function t(e,n){return this.normalized&&(n=ha(n,this.array)),this.array[e*this.itemSize+2]=n,this}},{key:"getW",value:function t(e){var n=this.array[e*this.itemSize+3];return this.normalized&&(n=ca(n,this.array)),n}},{key:"setW",value:function t(e,n){return this.normalized&&(n=ha(n,this.array)),this.array[e*this.itemSize+3]=n,this}},{key:"setXY",value:function t(e,n,r){return e*=this.itemSize,this.normalized&&(n=ha(n,this.array),r=ha(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}},{key:"setXYZ",value:function t(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ha(n,this.array),r=ha(r,this.array),i=ha(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}},{key:"setXYZW",value:function t(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=ha(n,this.array),r=ha(r,this.array),i=ha(i,this.array),a=ha(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}},{key:"onUpload",value:function t(e){return this.onUploadCallback=e,this}},{key:"clone",value:function t(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function t(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ci&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function t(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function t(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function t(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function t(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),t}(),cs=null,hs=null,fs=null,ds=null,ps=function(t){le(n,t);var e=ce(n);function n(t,r,i){return ge(this,n),e.call(this,new Uint16Array(t),r,i)}return _e(n)}(us),ms=null,vs=function(t){le(n,t);var e=ce(n);function n(t,r,i){return ge(this,n),e.call(this,new Uint32Array(t),r,i)}return _e(n)}(us),gs=null,ys=function(t){le(n,t);var e=ce(n);function n(t,r,i){return ge(this,n),e.call(this,new Float32Array(t),r,i)}return _e(n)}(us),_s=null,xs=0,bs=new bo,ws=new jo,Ms=new Wa,Ss=new qa,Es=new qa,Ts=new Wa,Cs=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).isBufferGeometry=!0,Object.defineProperty(fe(t),"id",{value:xs++}),t.uuid=Wi(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return _e(n,[{key:"getIndex",value:function t(){return this.index}},{key:"setIndex",value:function t(e){return Array.isArray(e)?this.index=new(ma(e)?vs:ps)(e,1):this.index=e,this}},{key:"getAttribute",value:function t(e){return this.attributes[e]}},{key:"setAttribute",value:function t(e,n){return this.attributes[e]=n,this}},{key:"deleteAttribute",value:function t(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function t(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:n,materialIndex:r})}},{key:"clearGroups",value:function t(){this.groups=[]}},{key:"setDrawRange",value:function t(e,n){this.drawRange.start=e,this.drawRange.count=n}},{key:"applyMatrix4",value:function t(e){var n=this.attributes.position;void 0!==n&&(n.applyMatrix4(e),n.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=(new pa).getNormalMatrix(e);r.applyNormalMatrix(i),r.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function t(e){return bs.makeRotationFromQuaternion(e),this.applyMatrix4(bs),this}},{key:"rotateX",value:function t(e){return bs.makeRotationX(e),this.applyMatrix4(bs),this}},{key:"rotateY",value:function t(e){return bs.makeRotationY(e),this.applyMatrix4(bs),this}},{key:"rotateZ",value:function t(e){return bs.makeRotationZ(e),this.applyMatrix4(bs),this}},{key:"translate",value:function t(e,n,r){return bs.makeTranslation(e,n,r),this.applyMatrix4(bs),this}},{key:"scale",value:function t(e,n,r){return bs.makeScale(e,n,r),this.applyMatrix4(bs),this}},{key:"lookAt",value:function t(e){return ws.lookAt(e),ws.updateMatrix(),this.applyMatrix4(ws.matrix),this}},{key:"center",value:function t(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ms).negate(),this.translate(Ms.x,Ms.y,Ms.z),this}},{key:"setFromPoints",value:function t(e){for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new ys(n,3)),this}},{key:"computeBoundingBox",value:function t(){null===this.boundingBox&&(this.boundingBox=new qa);var e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Wa(-1/0,-1/0,-1/0),new Wa(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(var r=0,i=n.length;r<i;r++){var a=n[r];Ss.setFromBufferAttribute(a),this.morphTargetsRelative?(Ts.addVectors(this.boundingBox.min,Ss.min),this.boundingBox.expandByPoint(Ts),Ts.addVectors(this.boundingBox.max,Ss.max),this.boundingBox.expandByPoint(Ts)):(this.boundingBox.expandByPoint(Ss.min),this.boundingBox.expandByPoint(Ss.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function t(){null===this.boundingSphere&&(this.boundingSphere=new ho);var e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Wa,1/0);if(e){var r=this.boundingSphere.center;if(Ss.setFromBufferAttribute(e),n)for(var i=0,a=n.length;i<a;i++){var o=n[i];Es.setFromBufferAttribute(o),this.morphTargetsRelative?(Ts.addVectors(Ss.min,Es.min),Ss.expandByPoint(Ts),Ts.addVectors(Ss.max,Es.max),Ss.expandByPoint(Ts)):(Ss.expandByPoint(Es.min),Ss.expandByPoint(Es.max))}Ss.getCenter(r);for(var s=0,l=0,u=e.count;l<u;l++)Ts.fromBufferAttribute(e,l),s=Math.max(s,r.distanceToSquared(Ts));if(n)for(var c=0,h=n.length;c<h;c++)for(var f=n[c],d=this.morphTargetsRelative,p=0,m=f.count;p<m;p++)Ts.fromBufferAttribute(f,p),d&&(Ms.fromBufferAttribute(e,p),Ts.add(Ms)),s=Math.max(s,r.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function t(){var e=this.index,n=this.attributes;if(null!==e&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=e.array,i=n.position.array,a=n.normal.array,o=n.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new us(new Float32Array(4*s),4));for(var l=this.getAttribute("tangent").array,u=[],c=[],h=0;h<s;h++)u[h]=new Wa,c[h]=new Wa;var f=new Wa,d=new Wa,p=new Wa,m=new da,v=new da,g=new da,y=new Wa,_=new Wa,x=this.groups;0===x.length&&(x=[{start:0,count:r.length}]);for(var b=0,w=x.length;b<w;++b)for(var M=x[b],S=M.start,E,T=S,C=S+M.count;T<C;T+=3)U(r[T+0],r[T+1],r[T+2]);for(var k=new Wa,A=new Wa,P=new Wa,L=new Wa,D=0,R=x.length;D<R;++D)for(var I=x[D],N=I.start,O,F=N,z=N+I.count;F<z;F+=3)V(r[F+0]),V(r[F+1]),V(r[F+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function U(t,e,n){f.fromArray(i,3*t),d.fromArray(i,3*e),p.fromArray(i,3*n),m.fromArray(o,2*t),v.fromArray(o,2*e),g.fromArray(o,2*n),d.sub(f),p.sub(f),v.sub(m),g.sub(m);var r=1/(v.x*g.y-g.x*v.y);isFinite(r)&&(y.copy(d).multiplyScalar(g.y).addScaledVector(p,-v.y).multiplyScalar(r),_.copy(p).multiplyScalar(v.x).addScaledVector(d,-g.x).multiplyScalar(r),u[t].add(y),u[e].add(y),u[n].add(y),c[t].add(_),c[e].add(_),c[n].add(_))}function V(t){P.fromArray(a,3*t),L.copy(P);var e=u[t];k.copy(e),k.sub(P.multiplyScalar(P.dot(e))).normalize(),A.crossVectors(L,e);var n,r=A.dot(c[t])<0?-1:1;l[4*t]=k.x,l[4*t+1]=k.y,l[4*t+2]=k.z,l[4*t+3]=r}}},{key:"computeVertexNormals",value:function t(){var e=this.index,n=this.getAttribute("position");if(void 0!==n){var r=this.getAttribute("normal");if(void 0===r)r=new us(new Float32Array(3*n.count),3),this.setAttribute("normal",r);else for(var i=0,a=r.count;i<a;i++)r.setXYZ(i,0,0,0);var o=new Wa,s=new Wa,l=new Wa,u=new Wa,c=new Wa,h=new Wa,f=new Wa,d=new Wa;if(e)for(var p=0,m=e.count;p<m;p+=3){var v=e.getX(p+0),g=e.getX(p+1),y=e.getX(p+2);o.fromBufferAttribute(n,v),s.fromBufferAttribute(n,g),l.fromBufferAttribute(n,y),f.subVectors(l,s),d.subVectors(o,s),f.cross(d),u.fromBufferAttribute(r,v),c.fromBufferAttribute(r,g),h.fromBufferAttribute(r,y),u.add(f),c.add(f),h.add(f),r.setXYZ(v,u.x,u.y,u.z),r.setXYZ(g,c.x,c.y,c.z),r.setXYZ(y,h.x,h.y,h.z)}else for(var _=0,x=n.count;_<x;_+=3)o.fromBufferAttribute(n,_+0),s.fromBufferAttribute(n,_+1),l.fromBufferAttribute(n,_+2),f.subVectors(l,s),d.subVectors(o,s),f.cross(d),r.setXYZ(_+0,f.x,f.y,f.z),r.setXYZ(_+1,f.x,f.y,f.z),r.setXYZ(_+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}},{key:"merge",value:function t(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function t(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)Ts.fromBufferAttribute(e,n),Ts.normalize(),e.setXYZ(n,Ts.x,Ts.y,Ts.z)}},{key:"toNonIndexed",value:function t(){function e(t,e){for(var n=t.array,r=t.itemSize,i=t.normalized,a=new n.constructor(e.length*r),o=0,s=0,l=0,u=e.length;l<u;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new us(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var r=new n,i=this.index.array,a=this.attributes;for(var o in a){var s,l=e(a[o],i);r.setAttribute(o,l)}var u=this.morphAttributes;for(var c in u){for(var h=[],f=u[c],d=0,p=f.length;d<p;d++){var m,v=e(f[d],i);h.push(v)}r.morphAttributes[c]=h}r.morphTargetsRelative=this.morphTargetsRelative;for(var g=this.groups,y=0,_=g.length;y<_;y++){var x=g[y];r.addGroup(x.start,x.count,x.materialIndex)}return r}},{key:"toJSON",value:function t(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var n=this.parameters;for(var r in n)void 0!==n[r]&&(e[r]=n[r]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var a=this.attributes;for(var o in a){var s=a[o];e.data.attributes[o]=s.toJSON(e.data)}var l={},u=!1;for(var c in this.morphAttributes){for(var h=this.morphAttributes[c],f=[],d=0,p=h.length;d<p;d++){var m=h[d];f.push(m.toJSON(e.data))}f.length>0&&(l[c]=f,u=!0)}u&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var g=this.boundingSphere;return null!==g&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var n={};this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone(n));var i=e.attributes;for(var a in i){var o=i[a];this.setAttribute(a,o.clone(n))}var s=e.morphAttributes;for(var l in s){for(var u=[],c=s[l],h=0,f=c.length;h<f;h++)u.push(c[h].clone(n));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,p=0,m=d.length;p<m;p++){var v=d[p];this.addGroup(v.start,v.count,v.materialIndex)}var g=e.boundingBox;null!==g&&(this.boundingBox=g.clone());var y=e.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function t(){this.dispatchEvent({type:"dispose"})}}]),n}(Ui),ks=new bo,As=new xo,Ps=new ho,Ls=new Wa,Ds=new Wa,Rs=new Wa,Is=new Wa,Ns=new Wa,Os=new Wa,Fs=new Wa,zs=new Wa,Us=new Wa,Vs=new da,Bs=new da,Hs=new da,Gs=new Wa,Ws=new Wa,Zs=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new os;return ge(this,n),(t=e.call(this)).isMesh=!0,t.type="Mesh",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function t(){var e,n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){var i=n[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++){var s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}},{key:"raycast",value:function t(e,n){var r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Ps.copy(r.boundingSphere),Ps.applyMatrix4(a),!1!==e.ray.intersectsSphere(Ps)&&(ks.copy(a).invert(),As.copy(e.ray).applyMatrix4(ks),null===r.boundingBox||!1!==As.intersectsBox(r.boundingBox)))){var o,s=r.index,l=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,h=r.attributes.uv,f=r.attributes.uv2,d=r.groups,p=r.drawRange;if(null!==s)if(Array.isArray(i))for(var m=0,v=d.length;m<v;m++)for(var g=d[m],y=i[g.materialIndex],_,x,b=Math.max(g.start,p.start),w=Math.min(s.count,Math.min(g.start+g.count,p.start+p.count));b<w;b+=3){var M=s.getX(b),S=s.getX(b+1),E=s.getX(b+2);(o=qs(this,y,e,As,l,u,c,h,f,M,S,E))&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=g.materialIndex,n.push(o))}else for(var T,C,k=Math.max(0,p.start),A=Math.min(s.count,p.start+p.count);k<A;k+=3){var P=s.getX(k),L=s.getX(k+1),D=s.getX(k+2);(o=qs(this,i,e,As,l,u,c,h,f,P,L,D))&&(o.faceIndex=Math.floor(k/3),n.push(o))}else if(void 0!==l)if(Array.isArray(i))for(var R=0,I=d.length;R<I;R++)for(var N=d[R],O=i[N.materialIndex],F,z,U=Math.max(N.start,p.start),V=Math.min(l.count,Math.min(N.start+N.count,p.start+p.count));U<V;U+=3){var B,H,G;(o=qs(this,O,e,As,l,u,c,h,f,U,U+1,U+2))&&(o.faceIndex=Math.floor(U/3),o.face.materialIndex=N.materialIndex,n.push(o))}else for(var W,Z,j=Math.max(0,p.start),q=Math.min(l.count,p.start+p.count);j<q;j+=3){var X,Y,K;(o=qs(this,i,e,As,l,u,c,h,f,j,j+1,j+2))&&(o.faceIndex=Math.floor(j/3),n.push(o))}}}}]),n}(jo);function js(t,e,n,r,i,a,o,s){var l;if(null===(l=1===e.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==e.side,s)))return null;Ws.copy(s),Ws.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(Ws);return u<n.near||u>n.far?null:{distance:u,point:Ws.clone(),object:t}}function qs(t,e,n,r,i,a,o,s,l,u,c,h){Ls.fromBufferAttribute(i,u),Ds.fromBufferAttribute(i,c),Rs.fromBufferAttribute(i,h);var f=t.morphTargetInfluences;if(a&&f){Fs.set(0,0,0),zs.set(0,0,0),Us.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var m=f[d],v=a[d];0!==m&&(Is.fromBufferAttribute(v,u),Ns.fromBufferAttribute(v,c),Os.fromBufferAttribute(v,h),o?(Fs.addScaledVector(Is,m),zs.addScaledVector(Ns,m),Us.addScaledVector(Os,m)):(Fs.addScaledVector(Is.sub(Ls),m),zs.addScaledVector(Ns.sub(Ds),m),Us.addScaledVector(Os.sub(Rs),m)))}Ls.add(Fs),Ds.add(zs),Rs.add(Us)}t.isSkinnedMesh&&(t.boneTransform(u,Ls),t.boneTransform(c,Ds),t.boneTransform(h,Rs));var g=js(t,e,n,r,Ls,Ds,Rs,Gs);if(g){s&&(Vs.fromBufferAttribute(s,u),Bs.fromBufferAttribute(s,c),Hs.fromBufferAttribute(s,h),g.uv=rs.getUV(Gs,Ls,Ds,Rs,Vs,Bs,Hs,new da)),l&&(Vs.fromBufferAttribute(l,u),Bs.fromBufferAttribute(l,c),Hs.fromBufferAttribute(l,h),g.uv2=rs.getUV(Gs,Ls,Ds,Rs,Vs,Bs,Hs,new da));var y={a:u,b:c,c:h,normal:new Wa,materialIndex:0};rs.getNormal(Ls,Ds,Rs,y.normal),g.face=y}return g}var Xs=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;ge(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var u=fe(t);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],h=[],f=[],d=[],p=0,m=0;function v(t,e,n,r,i,a,o,s,l,v,g){for(var y=a/l,_=o/v,x=a/2,b=o/2,w=s/2,M=l+1,S=v+1,E=0,T=0,C=new Wa,k=0;k<S;k++)for(var A=k*_-b,P=0;P<M;P++){var L=P*y-x;C[t]=L*r,C[e]=A*i,C[n]=w,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),d.push(P/l),d.push(1-k/v),E+=1}for(var D=0;D<v;D++)for(var R=0;R<l;R++){var I=p+R+M*D,N=p+R+M*(D+1),O=p+(R+1)+M*(D+1),F=p+(R+1)+M*D;c.push(I,N,F),c.push(N,O,F),T+=6}u.addGroup(m,T,g),m+=T,p+=E}return v("z","y","x",-1,-1,a,i,r,l,s,0),v("z","y","x",1,-1,a,i,-r,l,s,1),v("x","z","y",1,1,r,a,i,o,l,2),v("x","z","y",1,-1,r,a,-i,o,l,3),v("x","y","z",1,-1,r,i,a,o,s,4),v("x","y","z",-1,-1,r,i,-a,o,s,5),t.setIndex(c),t.setAttribute("position",new ys(h,3)),t.setAttribute("normal",new ys(f,3)),t.setAttribute("uv",new ys(d,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Cs);function Ys(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Ks(t){for(var e={},n=0;n<t.length;n++){var r=Ys(t[n]);for(var i in r)e[i]=r[i]}return e}function Js(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e}var Qs={clone:Ys,merge:Ks},$s="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",tl="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",el=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader=$s,r.fragmentShader=tl,r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&r.setValues(t),r}return _e(n,[{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ys(e.uniforms),this.uniformsGroups=Js(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function t(e){var r=oe(pe(n.prototype),"toJSON",this).call(this,e);for(var i in r.glslVersion=this.glslVersion,r.uniforms={},this.uniforms){var a,o=this.uniforms[i].value;o&&o.isTexture?r.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?r.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?r.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?r.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?r.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?r.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?r.uniforms[i]={type:"m4",value:o.toArray()}:r.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;var s={};for(var l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}]),n}(as),nl=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).isCamera=!0,t.type="Camera",t.matrixWorldInverse=new bo,t.projectionMatrix=new bo,t.projectionMatrixInverse=new bo,t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function t(e){this.updateWorldMatrix(!0,!1);var n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}},{key:"updateMatrixWorld",value:function t(e){oe(pe(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function t(e,r){oe(pe(n.prototype),"updateWorldMatrix",this).call(this,e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}}]),n}(jo),rl=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return ge(this,n),(t=e.call(this)).isPerspectiveCamera=!0,t.type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=a,t.far=o,t.focus=10,t.aspect=i,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function t(e){var n=.5*this.getFilmHeight()/e;this.fov=2*Gi*Math.atan(n),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function t(){var e=Math.tan(.5*Hi*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function t(){return 2*Gi*Math.atan(Math.tan(.5*Hi*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function t(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function t(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function t(e,n,r,i,a,o){this.aspect=e/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function t(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function t(){var e=this.near,n=e*Math.tan(.5*Hi*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,l=o.fullHeight;a+=o.offsetX*i/s,n-=o.offsetY*r/l,i*=o.width/s,r*=o.height/l}var u=this.filmOffset;0!==u&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function t(e){var r=oe(pe(n.prototype),"toJSON",this).call(this,e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}]),n}(nl),il=90,al=1,ol=function(t){le(n,t);var e=ce(n);function n(t,r,i){var a;ge(this,n),(a=e.call(this)).type="CubeCamera",a.renderTarget=i;var o=new rl(il,1,t,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Wa(1,0,0)),a.add(o);var s=new rl(il,1,t,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Wa(-1,0,0)),a.add(s);var l=new rl(il,1,t,r);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(new Wa(0,1,0)),a.add(l);var u=new rl(il,1,t,r);u.layers=a.layers,u.up.set(0,0,-1),u.lookAt(new Wa(0,-1,0)),a.add(u);var c=new rl(il,1,t,r);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new Wa(0,0,1)),a.add(c);var h=new rl(il,1,t,r);return h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Wa(0,0,-1)),a.add(h),a}return _e(n,[{key:"update",value:function t(e,n){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,i=te(this.children,6),a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;var p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,a),e.setRenderTarget(r,1),e.render(n,o),e.setRenderTarget(r,2),e.render(n,s),e.setRenderTarget(r,3),e.render(n,l),e.setRenderTarget(r,4),e.render(n,u),r.texture.generateMipmaps=p,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(h),e.toneMapping=f,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}]),n}(jo),sl=function(t){le(n,t);var e=ce(n);function n(t,r,i,a,o,s,l,u,c,h){var f;return ge(this,n),t=void 0!==t?t:[],r=void 0!==r?r:An,(f=e.call(this,t,r,i,a,o,s,l,u,c,h)).isCubeTexture=!0,f.flipY=!1,f}return _e(n,[{key:"images",get:function t(){return this.image},set:function t(e){this.image=e}}]),n}(Na),ll=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge(this,n),(t=e.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return t.texture=new sl(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),t.texture.isRenderTargetTexture=!0,t.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,t.texture.minFilter=void 0!==i.minFilter?i.minFilter:Hn,t}return _e(n,[{key:"fromEquirectangularTexture",value:function t(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;var r={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Xs(5,5,5),s=new el({name:"CubemapFromEquirect",uniforms:Ys(r),vertexShader:i,fragmentShader:a,side:1,blending:0});s.uniforms.tEquirect.value=n;var l=new Zs(o,s),u=n.minFilter,c;return n.minFilter===Zn&&(n.minFilter=Hn),new ol(1,10,this).update(e,l),n.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}},{key:"clear",value:function t(e,n,r,i){for(var a=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(a)}}]),n}(Fa),ul=new Wa,cl=new Wa,hl=new pa,fl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,t),this.isPlane=!0,this.normal=e,this.constant=n}return _e(t,[{key:"set",value:function t(e,n){return this.normal.copy(e),this.constant=n,this}},{key:"setComponents",value:function t(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function t(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function t(e,n,r){var i=ul.subVectors(r,n).cross(cl.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function t(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function t(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function t(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function t(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function t(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function t(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function t(e,n){var r=e.delta(ul),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?n.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(r).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function t(e){var n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}},{key:"intersectsBox",value:function t(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function t(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function t(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function t(e,n){var r=n||hl.getNormalMatrix(e),i=this.coplanarPoint(ul).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}},{key:"translate",value:function t(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function t(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}}]),t}(),dl=new ho,pl=new Wa,ml=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fl,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fl,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new fl,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new fl,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new fl,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new fl;ge(this,t),this.planes=[e,n,r,i,a,o]}return _e(t,[{key:"set",value:function t(e,n,r,i,a,o){var s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}},{key:"copy",value:function t(e){for(var n=this.planes,r=0;r<6;r++)n[r].copy(e.planes[r]);return this}},{key:"setFromProjectionMatrix",value:function t(e){var n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15];return n[0].setComponents(s-i,h-l,m-f,_-v).normalize(),n[1].setComponents(s+i,h+l,m+f,_+v).normalize(),n[2].setComponents(s+a,h+u,m+d,_+g).normalize(),n[3].setComponents(s-a,h-u,m-d,_-g).normalize(),n[4].setComponents(s-o,h-c,m-p,_-y).normalize(),n[5].setComponents(s+o,h+c,m+p,_+y).normalize(),this}},{key:"intersectsObject",value:function t(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),dl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(dl)}},{key:"intersectsSprite",value:function t(e){return dl.center.set(0,0,0),dl.radius=.7071067811865476,dl.applyMatrix4(e.matrixWorld),this.intersectsSphere(dl)}},{key:"intersectsSphere",value:function t(e){for(var n=this.planes,r=e.center,i=-e.radius,a=0;a<6;a++){var o;if(n[a].distanceToPoint(r)<i)return!1}return!0}},{key:"intersectsBox",value:function t(e){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(pl.x=i.normal.x>0?e.max.x:e.min.x,pl.y=i.normal.y>0?e.max.y:e.min.y,pl.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(pl)<0)return!1}return!0}},{key:"containsPoint",value:function t(e){for(var n=this.planes,r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}}]),t}();function vl(){var t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function a(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function n(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function t(e){n=e},setContext:function e(n){t=n}}}function gl(t,e){var n=e.isWebGL2,r=new WeakMap;function i(e,r){var i=e.array,a=e.usage,o=t.createBuffer(),s;if(t.bindBuffer(r,o),t.bufferData(r,i,a),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function a(e,r,i){var a=r.array,o=r.updateRange;t.bindBuffer(i,e),-1===o.count?t.bufferSubData(i,0,a):(n?t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function s(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function l(t,e){if(t.isGLBufferAttribute){var n=r.get(t);(!n||n.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,i(t,e)):o.version<t.version&&(a(o.buffer,t,e),o.version=t.version)}}return{get:o,remove:s,update:l}}var yl=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ge(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,l=i/2,u=Math.floor(a),c=Math.floor(o),h=u+1,f=c+1,d=r/u,p=i/c,m=[],v=[],g=[],y=[],_=0;_<f;_++)for(var x=_*p-l,b=0;b<h;b++){var w=b*d-s;v.push(w,-x,0),g.push(0,0,1),y.push(b/u),y.push(1-_/c)}for(var M=0;M<c;M++)for(var S=0;S<u;S++){var E=S+h*M,T=S+h*(M+1),C=S+1+h*(M+1),k=S+1+h*M;m.push(E,T,k),m.push(T,C,k)}return t.setIndex(m),t.setAttribute("position",new ys(v,3)),t.setAttribute("normal",new ys(g,3)),t.setAttribute("uv",new ys(y,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Cs),_l,xl,bl,wl,Ml,Sl,El,Tl,Cl,kl,Al,Pl,Ll,Dl,Rl,Il,Nl,Ol,Fl,zl,Ul,Vl,Bl,Hl,Gl,Wl,Zl,jl,ql,Xl,Yl,Kl,Jl,Ql,$l,tu,eu,nu,ru,iu,au,ou,su,lu,uu,cu,hu,fu,du,pu,mu,vu,gu,yu,_u,xu,bu,wu,Mu,Su,Eu,Tu,Cu,ku,Au,Pu,Lu,Du,Ru,Iu,Nu,Ou,Fu,zu,Uu,Vu,Bu,Hu,Gu,Wu,Zu,ju,qu,Xu,Yu,Ku,Ju,Qu,$u,tc,ec,nc,rc,ic,ac,oc,sc,lc,uc,cc,hc,fc,dc,pc,mc,vc,gc,yc,_c,xc,bc,wc,Mc,Sc,Ec,Tc,Cc,kc,Ac,Pc,Lc,Dc,Rc,Ic,Nc,Oc,Fc,zc,Uc,Vc,Bc,Hc,Gc,Wc,Zc,jc,qc,Xc,Yc,Kc,Jc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Qc={common:{diffuse:{value:new Aa(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pa},uv2Transform:{value:new pa},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new da(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Aa(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Aa(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pa}},sprite:{diffuse:{value:new Aa(16777215)},opacity:{value:1},center:{value:new da(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pa}}},$c={basic:{uniforms:Ks([Qc.common,Qc.specularmap,Qc.envmap,Qc.aomap,Qc.lightmap,Qc.fog]),vertexShader:Jc.meshbasic_vert,fragmentShader:Jc.meshbasic_frag},lambert:{uniforms:Ks([Qc.common,Qc.specularmap,Qc.envmap,Qc.aomap,Qc.lightmap,Qc.emissivemap,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,Qc.fog,Qc.lights,{emissive:{value:new Aa(0)}}]),vertexShader:Jc.meshlambert_vert,fragmentShader:Jc.meshlambert_frag},phong:{uniforms:Ks([Qc.common,Qc.specularmap,Qc.envmap,Qc.aomap,Qc.lightmap,Qc.emissivemap,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,Qc.fog,Qc.lights,{emissive:{value:new Aa(0)},specular:{value:new Aa(1118481)},shininess:{value:30}}]),vertexShader:Jc.meshphong_vert,fragmentShader:Jc.meshphong_frag},standard:{uniforms:Ks([Qc.common,Qc.envmap,Qc.aomap,Qc.lightmap,Qc.emissivemap,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,Qc.roughnessmap,Qc.metalnessmap,Qc.fog,Qc.lights,{emissive:{value:new Aa(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jc.meshphysical_vert,fragmentShader:Jc.meshphysical_frag},toon:{uniforms:Ks([Qc.common,Qc.aomap,Qc.lightmap,Qc.emissivemap,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,Qc.gradientmap,Qc.fog,Qc.lights,{emissive:{value:new Aa(0)}}]),vertexShader:Jc.meshtoon_vert,fragmentShader:Jc.meshtoon_frag},matcap:{uniforms:Ks([Qc.common,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,Qc.fog,{matcap:{value:null}}]),vertexShader:Jc.meshmatcap_vert,fragmentShader:Jc.meshmatcap_frag},points:{uniforms:Ks([Qc.points,Qc.fog]),vertexShader:Jc.points_vert,fragmentShader:Jc.points_frag},dashed:{uniforms:Ks([Qc.common,Qc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jc.linedashed_vert,fragmentShader:Jc.linedashed_frag},depth:{uniforms:Ks([Qc.common,Qc.displacementmap]),vertexShader:Jc.depth_vert,fragmentShader:Jc.depth_frag},normal:{uniforms:Ks([Qc.common,Qc.bumpmap,Qc.normalmap,Qc.displacementmap,{opacity:{value:1}}]),vertexShader:Jc.meshnormal_vert,fragmentShader:Jc.meshnormal_frag},sprite:{uniforms:Ks([Qc.sprite,Qc.fog]),vertexShader:Jc.sprite_vert,fragmentShader:Jc.sprite_frag},background:{uniforms:{uvTransform:{value:new pa},t2D:{value:null}},vertexShader:Jc.background_vert,fragmentShader:Jc.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Jc.backgroundCube_vert,fragmentShader:Jc.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Jc.cube_vert,fragmentShader:Jc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jc.equirect_vert,fragmentShader:Jc.equirect_frag},distanceRGBA:{uniforms:Ks([Qc.common,Qc.displacementmap,{referencePosition:{value:new Wa},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jc.distanceRGBA_vert,fragmentShader:Jc.distanceRGBA_frag},shadow:{uniforms:Ks([Qc.lights,Qc.fog,{color:{value:new Aa(0)},opacity:{value:1}}]),vertexShader:Jc.shadow_vert,fragmentShader:Jc.shadow_frag}};function th(t,e,n,r,i,a,o){var s=new Aa(0),l=!0===a?0:1,u,c,h=null,f=0,d=null;function p(r,a){var o=!1,p=!0===a.isScene?a.background:null,v;p&&p.isTexture&&(p=(a.backgroundBlurriness>0?n:e).get(p));var g=t.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(p=null),null===p?m(s,l):p&&p.isColor&&(m(p,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Rn)?(void 0===c&&((c=new Zs(new Xs(1,1,1),new el({name:"BackgroundCubeMaterial",uniforms:Ys($c.backgroundCube.uniforms),vertexShader:$c.backgroundCube.vertexShader,fragmentShader:$c.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function t(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=p,c.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,h===p&&f===p.version&&d===t.toneMapping||(c.material.needsUpdate=!0,h=p,f=p.version,d=t.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):p&&p.isTexture&&(void 0===u&&((u=new Zs(new yl(2,2),new el({name:"BackgroundMaterial",uniforms:Ys($c.background.uniforms),vertexShader:$c.background.vertexShader,fragmentShader:$c.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function t(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),u.material.uniforms.uvTransform.value.copy(p.matrix),h===p&&f===p.version&&d===t.toneMapping||(u.material.needsUpdate=!0,h=p,f=p.version,d=t.toneMapping),u.layers.enableAll(),r.unshift(u,u.geometry,u.material,0,0,null))}function m(t,e){r.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function t(){return s},setClearColor:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),m(s,l=n)},getClearAlpha:function t(){return l},setClearAlpha:function t(e){m(s,l=e)},render:p}}function eh(t,e,n,r){var i=t.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=v(null),u=l,c=!1;function h(e,r,i,a,s){var l=!1;if(o){var h=m(a,i,r);u!==h&&d((u=h).object),(l=g(e,a,i,s))&&y(e,a,i,s)}else{var f=!0===r.wireframe;u.geometry===a.id&&u.program===i.id&&u.wireframe===f||(u.geometry=a.id,u.program=i.id,u.wireframe=f,l=!0)}null!==s&&n.update(s,34963),(l||c)&&(c=!1,S(e,r,i,a),null!==s&&t.bindBuffer(34963,n.get(s).buffer))}function f(){return r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function d(e){return r.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function p(e){return r.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function m(t,e,n){var r=!0===n.wireframe,i=s[t.id];void 0===i&&(i={},s[t.id]=i);var a=i[e.id];void 0===a&&(a={},i[e.id]=a);var o=a[r];return void 0===o&&(o=v(f()),a[r]=o),o}function v(t){for(var e=[],n=[],r=[],a=0;a<i;a++)e[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function g(t,e,n,r){var i=u.attributes,a=e.attributes,o=0,s=n.getAttributes();for(var l in s){var c;if(s[l].location>=0){var h=i[l],f=a[l];if(void 0===f&&("instanceMatrix"===l&&t.instanceMatrix&&(f=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(f=t.instanceColor)),void 0===h)return!0;if(h.attribute!==f)return!0;if(f&&h.data!==f.data)return!0;o++}}return u.attributesNum!==o||u.index!==r}function y(t,e,n,r){var i={},a=e.attributes,o=0,s=n.getAttributes();for(var l in s){var c;if(s[l].location>=0){var h=a[l];void 0===h&&("instanceMatrix"===l&&t.instanceMatrix&&(h=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(h=t.instanceColor));var f={};f.attribute=h,h&&h.data&&(f.data=h.data),i[l]=f,o++}}u.attributes=i,u.attributesNum=o,u.index=r}function _(){for(var t=u.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function x(t){b(t,0)}function b(n,i){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors,l;(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function w(){for(var e=u.newAttributes,n=u.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function M(e,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,a,o,s):t.vertexAttribIPointer(e,n,i,o,s)}function S(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){_();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var h in u){var f=u[h];if(f.location>=0){var d=l[h];if(void 0===d&&("instanceMatrix"===h&&i.instanceMatrix&&(d=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(d=i.instanceColor)),void 0!==d){var p=d.normalized,m=d.itemSize,v=n.get(d);if(void 0===v)continue;var g=v.buffer,y=v.type,S=v.bytesPerElement;if(d.isInterleavedBufferAttribute){var E=d.data,T=E.stride,C=d.offset;if(E.isInstancedInterleavedBuffer){for(var k=0;k<f.locationSize;k++)b(f.location+k,E.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)}else for(var A=0;A<f.locationSize;A++)x(f.location+A);t.bindBuffer(34962,g);for(var P=0;P<f.locationSize;P++)M(f.location+P,m/f.locationSize,y,p,T*S,(C+m/f.locationSize*P)*S)}else{if(d.isInstancedBufferAttribute){for(var L=0;L<f.locationSize;L++)b(f.location+L,d.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var D=0;D<f.locationSize;D++)x(f.location+D);t.bindBuffer(34962,g);for(var R=0;R<f.locationSize;R++)M(f.location+R,m/f.locationSize,y,p,m*S,m/f.locationSize*R*S)}}else if(void 0!==c){var I=c[h];if(void 0!==I)switch(I.length){case 2:t.vertexAttrib2fv(f.location,I);break;case 3:t.vertexAttrib3fv(f.location,I);break;case 4:t.vertexAttrib4fv(f.location,I);break;default:t.vertexAttrib1fv(f.location,I)}}}}w()}}function E(){for(var t in k(),s){var e=s[t];for(var n in e){var r=e[n];for(var i in r)p(r[i].object),delete r[i];delete e[n]}delete s[t]}}function T(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var r=e[n];for(var i in r)p(r[i].object),delete r[i];delete e[n]}delete s[t.id]}}function C(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var r=n[t.id];for(var i in r)p(r[i].object),delete r[i];delete n[t.id]}}}function k(){A(),c=!0,u!==l&&d((u=l).object)}function A(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:k,resetDefaultState:A,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:_,enableAttribute:x,disableUnusedAttributes:w}}function nh(t,e,n,r){var i=r.isWebGL2,a;function o(t){a=t}function s(e,r){t.drawArrays(a,e,r),n.update(r,a,1)}function l(r,o,s){if(0!==s){var l,u;if(i)l=t,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](a,r,o,s),n.update(o,a,s)}}this.setMode=o,this.render=s,this.renderInstances=l}function rh(t,e,n){var r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=o||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),f=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),v=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),_=f>0,x=o||e.has("OES_texture_float"),b,w;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:_&&x,maxSamples:o?t.getParameter(36183):0}}function ih(t){var e=this,n=null,r=0,i=!1,a=!1,o=new fl,s=new pa,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){var a=null!==t?t.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(t[f]).applyMatrix4(h,s),o.normal.toArray(u,d),u[d+3]=o.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){var o=0!==t.length||e||0!==r||i;return i=e,n=c(t,a,0),r=t.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(e,o,s){var h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||a&&!d)a?c(null):u();else{var m=a?0:r,v=4*m,g=p.clippingState||null;l.value=g,g=c(h,o,v,s);for(var y=0;y!==v;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=m}}}function ah(t){var e=new WeakMap;function n(t,e){return e===Ln?t.mapping=An:e===Dn&&(t.mapping=Pn),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping;if(a===Ln||a===Dn){var o;if(e.has(r))return n(e.get(r).texture,r.mapping);var s=r.image;if(s&&s.height>0){var l=new ll(s.height/2);return l.fromEquirectangularTexture(t,r),e.set(r,l),r.addEventListener("dispose",i),n(l.texture,r.mapping)}return null}}return r}function i(t){var n=t.target;n.removeEventListener("dispose",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}$c.physical={uniforms:Ks([$c.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new da(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Aa(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new da},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Aa(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Aa(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Jc.meshphysical_vert,fragmentShader:Jc.meshphysical_frag};var oh=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return ge(this,n),(t=e.call(this)).isOrthographicCamera=!0,t.type="OrthographicCamera",t.zoom=1,t.view=null,t.left=r,t.right=i,t.top=a,t.bottom=o,t.near=s,t.far=l,t.updateProjectionMatrix(),t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function t(e,n,r,i,a,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function t(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function t(){var e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=r-e,o=r+e,s=i+n,l=i-n;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(a+=u*this.view.offsetX)+u*this.view.width,l=(s-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function t(e){var r=oe(pe(n.prototype),"toJSON",this).call(this,e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}]),n}(nl),sh=4,lh=[.125,.215,.35,.446,.526,.582],uh=20,ch=new oh,hh=new Aa,fh=null,dh=(1+Math.sqrt(5))/2,ph=1/dh,mh=[new Wa(1,1,1),new Wa(-1,1,1),new Wa(1,1,-1),new Wa(-1,1,-1),new Wa(0,dh,ph),new Wa(0,dh,-ph),new Wa(ph,0,dh),new Wa(-ph,0,dh),new Wa(dh,ph,0),new Wa(-dh,ph,0)],vh=function(){function t(e){ge(this,t),this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return _e(t,[{key:"fromScene",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;fh=this._renderer.getRenderTarget(),this._setSize(256);var a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,n)}},{key:"fromCubemap",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,n)}},{key:"compileCubemapShader",value:function t(){null===this._cubemapMaterial&&(this._cubemapMaterial=wh(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function t(){null===this._equirectMaterial&&(this._equirectMaterial=bh(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function t(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function t(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function t(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function t(e){this._renderer.setRenderTarget(fh),e.scissorTest=!1,_h(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function t(e,n){e.mapping===An||e.mapping===Pn?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fh=this._renderer.getRenderTarget();var r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}},{key:"_allocateTargets",value:function t(){var e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Hn,minFilter:Hn,generateMipmaps:!1,type:tr,format:or,encoding:ni,depthBuffer:!1},i=yh(e,n,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=yh(e,n,r);var a=this._lodMax,o=gh(a);this._sizeLods=o.sizeLods,this._lodPlanes=o.lodPlanes,this._sigmas=o.sigmas,this._blurMaterial=xh(a,e,n)}return i}},{key:"_compileMaterial",value:function t(e){var n=new Zs(this._lodPlanes[0],e);this._renderer.compile(n,ch)}},{key:"_sceneToCubeUV",value:function t(e,n,r,i){var a,o=1,s=new rl(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(hh),c.toneMapping=0,c.autoClear=!1;var d=new os({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Zs(new Xs,d),m=!1,v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,m=!0):(d.color.copy(hh),m=!0);for(var g=0;g<6;g++){var y=g%3;0===y?(s.up.set(0,l[g],0),s.lookAt(u[g],0,0)):1===y?(s.up.set(0,0,l[g]),s.lookAt(0,u[g],0)):(s.up.set(0,l[g],0),s.lookAt(0,0,u[g]));var _=this._cubeSize;_h(i,y*_,g>2?_:0,_,_),c.setRenderTarget(i),m&&c.render(p,s),c.render(e,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=v}},{key:"_textureToCubeUV",value:function t(e,n){var r=this._renderer,i=e.mapping===An||e.mapping===Pn;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=wh()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=bh());var a=i?this._cubemapMaterial:this._equirectMaterial,o=new Zs(this._lodPlanes[0],a),s;a.uniforms.envMap.value=e;var l=this._cubeSize;_h(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,ch)}},{key:"_applyPMREM",value:function t(e){var n=this._renderer,r=n.autoClear;n.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=mh[(i-1)%mh.length];this._blur(e,i-1,i,a,o)}n.autoClear=r}},{key:"_blur",value:function t(e,n,r,i,a){var o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",a),this._halfBlur(o,e,r,r,i,"longitudinal",a)}},{key:"_halfBlur",value:function t(e,n,r,i,a,o,s){var l=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=3,h=new Zs(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*d):2*Math.PI/39,m=a/p,v=isFinite(a)?1+Math.floor(3*m):uh;v>uh&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(v," samples when the maximum is set to ").concat(uh));for(var g=[],y=0,_=0;_<uh;++_){var x=_/m,b=Math.exp(-x*x/2);g.push(b),0===_?y+=b:_<v&&(y+=2*b)}for(var w=0;w<g.length;w++)g[w]=g[w]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value="latitudinal"===o,s&&(f.poleAxis.value=s);var M=this._lodMax;f.dTheta.value=p,f.mipInt.value=M-r;var S=this._sizeLods[i],E,T;_h(n,3*S*(i>M-4?i-M+4:0),4*(this._cubeSize-S),3*S,2*S),l.setRenderTarget(n),l.render(h,ch)}}]),t}();function gh(t){for(var e=[],n=[],r=[],i=t,a=t-4+1+lh.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var l=1/s;o>t-4?l=lh[o-t+4-1]:0===o&&(l=0),r.push(l);for(var u=1/(s-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,m=3,v=2,g=1,y=new Float32Array(108),_=new Float32Array(72),x=new Float32Array(36),b=0;b<6;b++){var w=b%3*2/3-1,M=b>2?0:-1,S=[w,M,0,w+2/3,M,0,w+2/3,M+1,0,w,M,0,w+2/3,M+1,0,w,M+1,0];y.set(S,18*b),_.set(f,12*b);var E=[b,b,b,b,b,b];x.set(E,6*b)}var T=new Cs;T.setAttribute("position",new us(y,3)),T.setAttribute("uv",new us(_,2)),T.setAttribute("faceIndex",new us(x,1)),e.push(T),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function yh(t,e,n){var r=new Fa(t,e,n);return r.texture.mapping=Rn,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _h(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function xh(t,e,n){var r=new Float32Array(uh),i=new Wa(0,1,0),a;return new el({name:"SphericalGaussianBlur",defines:{n:uh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function bh(){return new el({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wh(){return new el({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Mh(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Sh(t){var e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){var o=r.mapping,s=o===Ln||o===Dn,l=o===An||o===Pn;if(s||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;var u=e.get(r);return null===n&&(n=new vh(t)),u=s?n.fromEquirectangular(r,u):n.fromCubemap(r,u),e.set(r,u),u.texture}if(e.has(r))return e.get(r).texture;var c=r.image;if(s&&c&&c.height>0||l&&c&&i(c)){null===n&&(n=new vh(t));var h=s?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,h),r.addEventListener("dispose",a),h.texture}return null}}return r}function i(t){for(var e=0,n=6,r=0;r<6;r++)void 0!==t[r]&&e++;return 6===e}function a(t){var n=t.target;n.removeEventListener("dispose",a);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Eh(t){var e={};function n(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function t(e){return null!==n(e)},init:function t(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function t(e){var r=n(e);return null===r&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),r}}}function Th(t,e,n,r){var i={},a=new WeakMap;function o(t){var s=t.target;for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete i[s.id];var u=a.get(s);u&&(e.remove(u),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t,e){return!0===i[e.id]||(e.addEventListener("dispose",o),i[e.id]=!0,n.memory.geometries++),e}function l(t){var n=t.attributes;for(var r in n)e.update(n[r],34962);var i=t.morphAttributes;for(var a in i)for(var o=i[a],s=0,l=o.length;s<l;s++)e.update(o[s],34962)}function u(t){var n=[],r=t.index,i=t.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],f=s[l+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;o=i.version;for(var p=0,m=d.length/3-1;p<m;p+=3){var v=p+0,g=p+1,y=p+2;n.push(v,g,g,y,y,v)}}var _=new(ma(n)?vs:ps)(n,1);_.version=o;var x=a.get(t);x&&e.remove(x),a.set(t,_)}function c(t){var e=a.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&u(t)}else u(t);return a.get(t)}return{get:s,update:l,getWireframeAttribute:c}}function Ch(t,e,n,r){var i=r.isWebGL2,a,o,s;function l(t){a=t}function u(t){o=t.type,s=t.bytesPerElement}function c(e,r){t.drawElements(a,r,o,e*s),n.update(r,a,1)}function h(r,l,u){if(0!==u){var c,h;if(i)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](a,l,o,r*s,u),n.update(l,a,u)}}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function kh(t){var e,n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,e,r){switch(n.calls++,e){case 4:n.triangles+=r*(t/3);break;case 1:n.lines+=r*(t/2);break;case 3:n.lines+=r*(t-1);break;case 2:n.lines+=r*t;break;case 0:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:i,update:r}}function Ah(t,e){return t[0]-e[0]}function Ph(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Lh(t,e,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new Oa,s=[],l=0;l<8;l++)s[l]=[l,0];function u(l,u,c,h){var f=l.morphTargetInfluences;if(!0===e.isWebGL2){var d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==d?d.length:0,m=a.get(u);if(void 0===m||m.count!==p){var v=function t(){C.dispose(),a.delete(u),u.removeEventListener("dispose",t)};void 0!==m&&m.texture.dispose();var g=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,_=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],w=u.morphAttributes.color||[],M=0;!0===g&&(M=1),!0===y&&(M=2),!0===_&&(M=3);var S=u.attributes.position.count*M,E=1;S>e.maxTextureSize&&(E=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);var T=new Float32Array(S*E*4*p),C=new za(T,S,E,p);C.type=$n,C.needsUpdate=!0;for(var k=4*M,A=0;A<p;A++)for(var P=x[A],L=b[A],D=w[A],R=S*E*4*A,I=0;I<P.count;I++){var N=I*k;!0===g&&(o.fromBufferAttribute(P,I),T[R+N+0]=o.x,T[R+N+1]=o.y,T[R+N+2]=o.z,T[R+N+3]=0),!0===y&&(o.fromBufferAttribute(L,I),T[R+N+4]=o.x,T[R+N+5]=o.y,T[R+N+6]=o.z,T[R+N+7]=0),!0===_&&(o.fromBufferAttribute(D,I),T[R+N+8]=o.x,T[R+N+9]=o.y,T[R+N+10]=o.z,T[R+N+11]=4===D.itemSize?o.w:1)}m={count:p,texture:C,size:new da(S,E)},a.set(u,m),u.addEventListener("dispose",v)}for(var O=0,F=0;F<f.length;F++)O+=f[F];var z=u.morphTargetsRelative?1:1-O;h.getUniforms().setValue(t,"morphTargetBaseInfluence",z),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{var U=void 0===f?0:f.length,V=r[u.id];if(void 0===V||V.length!==U){V=[];for(var B=0;B<U;B++)V[B]=[B,0];r[u.id]=V}for(var H=0;H<U;H++){var G=V[H];G[0]=H,G[1]=f[H]}V.sort(Ph);for(var W=0;W<8;W++)W<U&&V[W][1]?(s[W][0]=V[W][0],s[W][1]=V[W][1]):(s[W][0]=Number.MAX_SAFE_INTEGER,s[W][1]=0);s.sort(Ah);for(var Z=u.morphAttributes.position,j=u.morphAttributes.normal,q=0,X=0;X<8;X++){var Y=s[X],K=Y[0],J=Y[1];K!==Number.MAX_SAFE_INTEGER&&J?(Z&&u.getAttribute("morphTarget"+X)!==Z[K]&&u.setAttribute("morphTarget"+X,Z[K]),j&&u.getAttribute("morphNormal"+X)!==j[K]&&u.setAttribute("morphNormal"+X,j[K]),i[X]=J,q+=J):(Z&&!0===u.hasAttribute("morphTarget"+X)&&u.deleteAttribute("morphTarget"+X),j&&!0===u.hasAttribute("morphNormal"+X)&&u.deleteAttribute("morphNormal"+X),i[X]=0)}var Q=u.morphTargetsRelative?1:1-q;h.getUniforms().setValue(t,"morphTargetBaseInfluence",Q),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:u}}function Dh(t,e,n,r){var i=new WeakMap;function a(t){var a=r.render.frame,o=t.geometry,l=e.get(t,o);return i.get(l)!==a&&(e.update(l),i.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l}function o(){i=new WeakMap}function s(t){var e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:a,dispose:o}}var Rh=new Na,Ih=new za,Nh=new Va,Oh=new sl,Fh=[],zh=[],Uh=new Float32Array(16),Vh=new Float32Array(9),Bh=new Float32Array(4);function Hh(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,a=Fh[i];if(void 0===a&&(a=new Float32Array(i),Fh[i]=a),0!==e){r.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Gh(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Wh(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Zh(t,e){var n=zh[e];void 0===n&&(n=new Int32Array(e),zh[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function jh(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qh(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gh(n,e))return;t.uniform2fv(this.addr,e),Wh(n,e)}}function Xh(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Gh(n,e))return;t.uniform3fv(this.addr,e),Wh(n,e)}}function Yh(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gh(n,e))return;t.uniform4fv(this.addr,e),Wh(n,e)}}function Kh(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Gh(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Wh(n,e)}else{if(Gh(n,r))return;Bh.set(r),t.uniformMatrix2fv(this.addr,!1,Bh),Wh(n,r)}}function Jh(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Gh(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Wh(n,e)}else{if(Gh(n,r))return;Vh.set(r),t.uniformMatrix3fv(this.addr,!1,Vh),Wh(n,r)}}function Qh(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Gh(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Wh(n,e)}else{if(Gh(n,r))return;Uh.set(r),t.uniformMatrix4fv(this.addr,!1,Uh),Wh(n,r)}}function $h(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function tf(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gh(n,e))return;t.uniform2iv(this.addr,e),Wh(n,e)}}function ef(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gh(n,e))return;t.uniform3iv(this.addr,e),Wh(n,e)}}function nf(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gh(n,e))return;t.uniform4iv(this.addr,e),Wh(n,e)}}function rf(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function af(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gh(n,e))return;t.uniform2uiv(this.addr,e),Wh(n,e)}}function of(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gh(n,e))return;t.uniform3uiv(this.addr,e),Wh(n,e)}}function sf(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gh(n,e))return;t.uniform4uiv(this.addr,e),Wh(n,e)}}function lf(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Rh,i)}function uf(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Nh,i)}function cf(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Oh,i)}function hf(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ih,i)}function ff(t){switch(t){case 5126:return jh;case 35664:return qh;case 35665:return Xh;case 35666:return Yh;case 35674:return Kh;case 35675:return Jh;case 35676:return Qh;case 5124:case 35670:return $h;case 35667:case 35671:return tf;case 35668:case 35672:return ef;case 35669:case 35673:return nf;case 5125:return rf;case 36294:return af;case 36295:return of;case 36296:return sf;case 35678:case 36198:case 36298:case 36306:case 35682:return lf;case 35679:case 36299:case 36307:return uf;case 35680:case 36300:case 36308:case 36293:return cf;case 36289:case 36303:case 36311:case 36292:return hf}}function df(t,e){t.uniform1fv(this.addr,e)}function pf(t,e){var n=Hh(e,this.size,2);t.uniform2fv(this.addr,n)}function mf(t,e){var n=Hh(e,this.size,3);t.uniform3fv(this.addr,n)}function vf(t,e){var n=Hh(e,this.size,4);t.uniform4fv(this.addr,n)}function gf(t,e){var n=Hh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function yf(t,e){var n=Hh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function _f(t,e){var n=Hh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function xf(t,e){t.uniform1iv(this.addr,e)}function bf(t,e){t.uniform2iv(this.addr,e)}function wf(t,e){t.uniform3iv(this.addr,e)}function Mf(t,e){t.uniform4iv(this.addr,e)}function Sf(t,e){t.uniform1uiv(this.addr,e)}function Ef(t,e){t.uniform2uiv(this.addr,e)}function Tf(t,e){t.uniform3uiv(this.addr,e)}function Cf(t,e){t.uniform4uiv(this.addr,e)}function kf(t,e,n){var r=this.cache,i=e.length,a=Zh(n,i);Gh(r,a)||(t.uniform1iv(this.addr,a),Wh(r,a));for(var o=0;o!==i;++o)n.setTexture2D(e[o]||Rh,a[o])}function Af(t,e,n){var r=this.cache,i=e.length,a=Zh(n,i);Gh(r,a)||(t.uniform1iv(this.addr,a),Wh(r,a));for(var o=0;o!==i;++o)n.setTexture3D(e[o]||Nh,a[o])}function Pf(t,e,n){var r=this.cache,i=e.length,a=Zh(n,i);Gh(r,a)||(t.uniform1iv(this.addr,a),Wh(r,a));for(var o=0;o!==i;++o)n.setTextureCube(e[o]||Oh,a[o])}function Lf(t,e,n){var r=this.cache,i=e.length,a=Zh(n,i);Gh(r,a)||(t.uniform1iv(this.addr,a),Wh(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(e[o]||Ih,a[o])}function Df(t){switch(t){case 5126:return df;case 35664:return pf;case 35665:return mf;case 35666:return vf;case 35674:return gf;case 35675:return yf;case 35676:return _f;case 5124:case 35670:return xf;case 35667:case 35671:return bf;case 35668:case 35672:return wf;case 35669:case 35673:return Mf;case 5125:return Sf;case 36294:return Ef;case 36295:return Tf;case 36296:return Cf;case 35678:case 36198:case 36298:case 36306:case 35682:return kf;case 35679:case 36299:case 36307:return Af;case 35680:case 36300:case 36308:case 36293:return Pf;case 36289:case 36303:case 36311:case 36292:return Lf}}var Rf=_e((function t(e,n,r){ge(this,t),this.id=e,this.addr=r,this.cache=[],this.setValue=ff(n.type)})),If=_e((function t(e,n,r){ge(this,t),this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=Df(n.type)})),Nf=function(){function t(e){ge(this,t),this.id=e,this.seq=[],this.map={}}return _e(t,[{key:"setValue",value:function t(e,n,r){for(var i=this.seq,a=0,o=i.length;a!==o;++a){var s=i[a];s.setValue(e,n[s.id],r)}}}]),t}(),Of=/(\w+)(\])?(\[|\.)?/g;function Ff(t,e){t.seq.push(e),t.map[e.id]=e}function zf(t,e,n){var r=t.name,i=r.length;for(Of.lastIndex=0;;){var a=Of.exec(r),o=Of.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){Ff(n,void 0===u?new Rf(s,t,e):new If(s,t,e));break}var c,h=n.map[s];void 0===h&&Ff(n,h=new Nf(s)),n=h}}var Uf=function(){function t(e,n){ge(this,t),this.seq=[],this.map={};for(var r=e.getProgramParameter(n,35718),i=0;i<r;++i){var a=e.getActiveUniform(n,i),o;zf(a,e.getUniformLocation(n,a.name),this)}}return _e(t,[{key:"setValue",value:function t(e,n,r,i){var a=this.map[n];void 0!==a&&a.setValue(e,r,i)}},{key:"setOptional",value:function t(e,n,r){var i=n[r];void 0!==i&&this.setValue(e,r,i)}}],[{key:"upload",value:function t(e,n,r,i){for(var a=0,o=n.length;a!==o;++a){var s=n[a],l=r[s.id];!1!==l.needsUpdate&&s.setValue(e,l.value,i)}}},{key:"seqWithValue",value:function t(e,n){for(var r=[],i=0,a=e.length;i!==a;++i){var o=e[i];o.id in n&&r.push(o)}return r}}]),t}();function Vf(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}var Bf=0;function Hf(t,e){for(var n=t.split("\n"),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===e?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}function Gf(t){switch(t){case ni:return["Linear","( value )"];case ri:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Wf(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+Hf(t.getShaderSource(e),o)}return i}function Zf(t,e){var n=Gf(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function jf(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function qf(t){var e;return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Kf).join("\n")}function Xf(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Yf(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var a=t.getActiveAttrib(e,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function Kf(t){return""!==t}function Jf(t,e){var n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Qf(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var $f=/^[ \t]*#include +<([\w\d./]+)>/gm;function td(t){return t.replace($f,ed)}function ed(t,e){var n=Jc[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return td(n)}var nd=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rd(t){return t.replace(nd,id)}function id(t,e,n,r){for(var i="",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function ad(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function od(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}function sd(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case An:case Pn:e="ENVMAP_TYPE_CUBE";break;case Rn:e="ENVMAP_TYPE_CUBE_UV"}return e}function ld(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap&&t.envMapMode===Pn)e="ENVMAP_MODE_REFRACTION";return e}function ud(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}function cd(t){var e=t.envMapCubeUVHeight;if(null===e)return null;var n=Math.log2(e)-2,r=1/e,i;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function hd(t,e,n,r){var i=t.getContext(),a=n.defines,o=n.vertexShader,s=n.fragmentShader,l=od(n),u=sd(n),c=ld(n),h=ud(n),f=cd(n),d=n.isWebGL2?"":qf(n),p=Xf(a),m=i.createProgram(),v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((v=[p].filter(Kf).join("\n")).length>0&&(v+="\n"),(g=[d,p].filter(Kf).join("\n")).length>0&&(g+="\n")):(v=[ad(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kf).join("\n"),g=[d,ad(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Jc.tonemapping_pars_fragment:"",0!==n.toneMapping?jf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Jc.encodings_pars_fragment,Zf("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Kf).join("\n")),o=Qf(o=Jf(o=td(o),n),n),s=Qf(s=Jf(s=td(s),n),n),o=rd(o),s=rd(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#define varying in",n.glslVersion===Fi?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Fi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);var _,x=y+g+s,b=Vf(i,35633,y+v+o),w=Vf(i,35632,x),M,S;if(i.attachShader(m,b),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){var E=i.getProgramInfoLog(m).trim(),T=i.getShaderInfoLog(b).trim(),C=i.getShaderInfoLog(w).trim(),k=!0,A=!0;if(!1===i.getProgramParameter(m,35714)){k=!1;var P=Wf(i,b,"vertex"),L=Wf(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+E+"\n"+P+"\n"+L)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==T&&""!==C||(A=!1);A&&(this.diagnostics={runnable:k,programLog:E,vertexShader:{log:T,prefix:v},fragmentShader:{log:C,prefix:g}})}return i.deleteShader(b),i.deleteShader(w),this.getUniforms=function(){return void 0===M&&(M=new Uf(i,m)),M},this.getAttributes=function(){return void 0===S&&(S=Yf(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Bf++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=w,this}var fd=0,dd=function(){function t(){ge(this,t),this.shaderCache=new Map,this.materialCache=new Map}return _e(t,[{key:"update",value:function t(e){var n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(a)&&(o.add(a),a.usedTimes++),this}},{key:"remove",value:function t(e){var n,r=$t(this.materialCache.get(e)),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;a.usedTimes--,0===a.usedTimes&&this.shaderCache.delete(a.code)}}catch(t){r.e(t)}finally{r.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function t(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function t(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function t(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function t(e){var n=this.materialCache,r=n.get(e);return void 0===r&&(r=new Set,n.set(e,r)),r}},{key:"_getShaderStage",value:function t(e){var n=this.shaderCache,r=n.get(e);return void 0===r&&(r=new pd(e),n.set(e,r)),r}}]),t}(),pd=_e((function t(e){ge(this,t),this.id=fd++,this.code=e,this.usedTimes=0}));function md(t,e,n,r,i,a,o){var s=new Do,l=new dd,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(a,s,u,m,v){var g=m.fog,y=v.geometry,_=a.isMeshStandardMaterial?m.environment:null,x=(a.isMeshStandardMaterial?n:e).get(a.envMap||_),b=x&&x.mapping===Rn?x.image.height:null,w=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==M?M.length:0,E=0,T,C,k,A;if(void 0!==y.morphAttributes.position&&(E=1),void 0!==y.morphAttributes.normal&&(E=2),void 0!==y.morphAttributes.color&&(E=3),w){var P=$c[w];T=P.vertexShader,C=P.fragmentShader}else T=a.vertexShader,C=a.fragmentShader,l.update(a),k=l.getVertexShaderID(a),A=l.getFragmentShaderID(a);var L=t.getRenderTarget(),D=a.alphaTest>0,R=a.clearcoat>0,I=a.iridescence>0,N;return{isWebGL2:c,shaderID:w,shaderName:a.type,vertexShader:T,fragmentShader:C,defines:a.defines,customVertexShaderID:k,customFragmentShaderID:A,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:f,outputEncoding:null===L?t.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:ni,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===ri,clearcoat:R,clearcoatMap:R&&!!a.clearcoatMap,clearcoatRoughnessMap:R&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!a.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!a.iridescenceMap,iridescenceThicknessMap:I&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:S,morphTextureStride:E,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}}function v(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);return!1===e.isRawShaderMaterial&&(g(n,e),y(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()}function g(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function y(t,e){s.disableAll(),e.isWebGL2&&s.enable(0),e.supportsVertexTextures&&s.enable(1),e.instancing&&s.enable(2),e.instancingColor&&s.enable(3),e.map&&s.enable(4),e.matcap&&s.enable(5),e.envMap&&s.enable(6),e.lightMap&&s.enable(7),e.aoMap&&s.enable(8),e.emissiveMap&&s.enable(9),e.bumpMap&&s.enable(10),e.normalMap&&s.enable(11),e.objectSpaceNormalMap&&s.enable(12),e.tangentSpaceNormalMap&&s.enable(13),e.clearcoat&&s.enable(14),e.clearcoatMap&&s.enable(15),e.clearcoatRoughnessMap&&s.enable(16),e.clearcoatNormalMap&&s.enable(17),e.iridescence&&s.enable(18),e.iridescenceMap&&s.enable(19),e.iridescenceThicknessMap&&s.enable(20),e.displacementMap&&s.enable(21),e.specularMap&&s.enable(22),e.roughnessMap&&s.enable(23),e.metalnessMap&&s.enable(24),e.gradientMap&&s.enable(25),e.alphaMap&&s.enable(26),e.alphaTest&&s.enable(27),e.vertexColors&&s.enable(28),e.vertexAlphas&&s.enable(29),e.vertexUvs&&s.enable(30),e.vertexTangents&&s.enable(31),e.uvsVertexOnly&&s.enable(32),t.push(s.mask),s.disableAll(),e.fog&&s.enable(0),e.useFog&&s.enable(1),e.flatShading&&s.enable(2),e.logarithmicDepthBuffer&&s.enable(3),e.skinning&&s.enable(4),e.morphTargets&&s.enable(5),e.morphNormals&&s.enable(6),e.morphColors&&s.enable(7),e.premultipliedAlpha&&s.enable(8),e.shadowMapEnabled&&s.enable(9),e.physicallyCorrectLights&&s.enable(10),e.doubleSided&&s.enable(11),e.flipSided&&s.enable(12),e.useDepthPacking&&s.enable(13),e.dithering&&s.enable(14),e.specularIntensityMap&&s.enable(15),e.specularColorMap&&s.enable(16),e.transmission&&s.enable(17),e.transmissionMap&&s.enable(18),e.thicknessMap&&s.enable(19),e.sheen&&s.enable(20),e.sheenColorMap&&s.enable(21),e.sheenRoughnessMap&&s.enable(22),e.decodeVideoTexture&&s.enable(23),e.opaque&&s.enable(24),t.push(s.mask)}function _(t){var e=p[t.type],n;if(e){var r=$c[e];n=Qs.clone(r.uniforms)}else n=t.uniforms;return n}function x(e,n){for(var r,i=0,o=u.length;i<o;i++){var s=u[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new hd(t,n,e,a),u.push(r)),r}function b(t){if(0==--t.usedTimes){var e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}}function w(t){l.remove(t)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:_,acquireProgram:x,releaseProgram:b,releaseShaderCache:w,programs:u,dispose:M}}function vd(){var t=new WeakMap;function e(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function gd(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function yd(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function _d(){var t=[],e=0,n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function o(n,r,i,a,o,s){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),e++,l}function s(t,e,a,s,l,u){var c=o(t,e,a,s,l,u);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)}function l(t,e,a,s,l,u){var c=o(t,e,a,s,l,u);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)}function u(t,e){n.length>1&&n.sort(t||gd),r.length>1&&r.sort(e||yd),i.length>1&&i.sort(e||yd)}function c(){for(var n=e,r=t.length;n<r;n++){var i=t[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:s,unshift:l,finish:c,sort:u}}function xd(){var t=new WeakMap;function e(e,n){var r=t.get(e),i;return void 0===r?(i=new _d,t.set(e,[i])):n>=r.length?(i=new _d,r.push(i)):i=r[n],i}function n(){t=new WeakMap}return{get:e,dispose:n}}function bd(){var t={};return{get:function e(n){if(void 0!==t[n.id])return t[n.id];var r;switch(n.type){case"DirectionalLight":r={direction:new Wa,color:new Aa};break;case"SpotLight":r={position:new Wa,direction:new Wa,color:new Aa,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Wa,color:new Aa,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Wa,skyColor:new Aa,groundColor:new Aa};break;case"RectAreaLight":r={color:new Aa,position:new Wa,halfWidth:new Wa,halfHeight:new Wa}}return t[n.id]=r,r}}}function wd(){var t={};return{get:function e(n){if(void 0!==t[n.id])return t[n.id];var r;switch(n.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new da};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new da,shadowCameraNear:1,shadowCameraFar:1e3}}return t[n.id]=r,r}}}var Md=0;function Sd(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Ed(t,e){for(var n=new bd,r=wd(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)i.probe.push(new Wa);var o=new Wa,s=new bo,l=new bo;function u(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,m=0,v=0,g=0,y=0,_=0,x=0;a.sort(Sd);for(var b=!0!==o?Math.PI:1,w=0,M=a.length;w<M;w++){var S=a[w],E=S.color,T=S.intensity,C=S.distance,k=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=E.r*T*b,l+=E.g*T*b,u+=E.b*T*b;else if(S.isLightProbe)for(var A=0;A<9;A++)i.probe[A].addScaledVector(S.sh.coefficients[A],T);else if(S.isDirectionalLight){var P=n.get(S);if(P.color.copy(S.color).multiplyScalar(S.intensity*b),S.castShadow){var L=S.shadow,D=r.get(S);D.shadowBias=L.bias,D.shadowNormalBias=L.normalBias,D.shadowRadius=L.radius,D.shadowMapSize=L.mapSize,i.directionalShadow[h]=D,i.directionalShadowMap[h]=k,i.directionalShadowMatrix[h]=S.shadow.matrix,v++}i.directional[h]=P,h++}else if(S.isSpotLight){var R=n.get(S);R.position.setFromMatrixPosition(S.matrixWorld),R.color.copy(E).multiplyScalar(T*b),R.distance=C,R.coneCos=Math.cos(S.angle),R.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),R.decay=S.decay,i.spot[d]=R;var I=S.shadow;if(S.map&&(i.spotLightMap[_]=S.map,_++,I.updateMatrices(S),S.castShadow&&x++),i.spotLightMatrix[d]=I.matrix,S.castShadow){var N=r.get(S);N.shadowBias=I.bias,N.shadowNormalBias=I.normalBias,N.shadowRadius=I.radius,N.shadowMapSize=I.mapSize,i.spotShadow[d]=N,i.spotShadowMap[d]=k,y++}d++}else if(S.isRectAreaLight){var O=n.get(S);O.color.copy(E).multiplyScalar(T),O.halfWidth.set(.5*S.width,0,0),O.halfHeight.set(0,.5*S.height,0),i.rectArea[p]=O,p++}else if(S.isPointLight){var F=n.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity*b),F.distance=S.distance,F.decay=S.decay,S.castShadow){var z=S.shadow,U=r.get(S);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,U.shadowCameraNear=z.camera.near,U.shadowCameraFar=z.camera.far,i.pointShadow[f]=U,i.pointShadowMap[f]=k,i.pointShadowMatrix[f]=S.shadow.matrix,g++}i.point[f]=F,f++}else if(S.isHemisphereLight){var V=n.get(S);V.skyColor.copy(S.color).multiplyScalar(T*b),V.groundColor.copy(S.groundColor).multiplyScalar(T*b),i.hemi[m]=V,m++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Qc.LTC_FLOAT_1,i.rectAreaLTC2=Qc.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Qc.LTC_HALF_1,i.rectAreaLTC2=Qc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;var B=i.hash;B.directionalLength===h&&B.pointLength===f&&B.spotLength===d&&B.rectAreaLength===p&&B.hemiLength===m&&B.numDirectionalShadows===v&&B.numPointShadows===g&&B.numSpotShadows===y&&B.numSpotMaps===_||(i.directional.length=h,i.spot.length=d,i.rectArea.length=p,i.point.length=f,i.hemi.length=m,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+_-x,i.spotLightMap.length=_,i.numSpotLightShadowsWithMaps=x,B.directionalLength=h,B.pointLength=f,B.spotLength=d,B.rectAreaLength=p,B.hemiLength=m,B.numDirectionalShadows=v,B.numPointShadows=g,B.numSpotShadows=y,B.numSpotMaps=_,i.version=Md++)}function c(t,e){for(var n=0,r=0,a=0,u=0,c=0,h=e.matrixWorldInverse,f=0,d=t.length;f<d;f++){var p=t[f];if(p.isDirectionalLight){var m=i.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),n++}else if(p.isSpotLight){var v=i.spot[a];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var _=i.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),c++}}}return{setup:u,setupView:c,state:i}}function Td(t,e){var n=new Ed(t,e),r=[],i=[],a;function o(){r.length=0,i.length=0}function s(t){r.push(t)}function l(t){i.push(t)}function u(t){n.setup(r,t)}function c(t){n.setupView(r,t)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:u,setupLightsView:c,pushLight:s,pushShadow:l}}function Cd(t,e){var n=new WeakMap;function r(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=n.get(r),o;return void 0===a?(o=new Td(t,e),n.set(r,[o])):i>=a.length?(o=new Td(t,e),a.push(o)):o=a[i],o}function i(){n=new WeakMap}return{get:r,dispose:i}}var kd=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=ii,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(t),r}return _e(n,[{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(as),Ad=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new Wa,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(t),r}return _e(n,[{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(as),Pd="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Ld="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Dd(t,e,n){var r=new ml,i=new da,a=new da,o=new Oa,s=new kd({depthPacking:ai}),l=new Ad,u={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new el({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new da},radius:{value:4}},vertexShader:Pd,fragmentShader:Ld}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new Cs;p.setAttribute("position",new us(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Zs(p,f),v=this;function g(n,r){var a=e.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Fa(i.x,i.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,a,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,a,d,m,null)}function y(e,n,r,i,a,o){var c=null,f=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(c=void 0!==f?f:!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var d=c.uuid,p=n.uuid,m=u[d];void 0===m&&(m={},u[d]=m);var v=m[p];void 0===v&&(v=c.clone(),m[p]=v),c=v}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function _(n,i,a,o,s){if(!1!==n.visible){var l;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=e.update(n),c=n.material;if(Array.isArray(c))for(var h=u.groups,f=0,d=h.length;f<d;f++){var p=h[f],m=c[p.materialIndex];if(m&&m.visible){var v=y(n,m,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,v,n,p)}}else if(c.visible){var g=y(n,c,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,g,n,null)}}for(var x=n.children,b=0,w=x.length;b<w;b++)_(x[b],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==e.length){var l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var m=e[d],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/x.x),i.x=a.x*x.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/x.y),i.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map){var b=3!==this.type?{minFilter:Fn,magFilter:Fn}:{};y.map=new Fa(i.x,i.y,b),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}t.setRenderTarget(y.map),t.clear();for(var w=y.getViewportCount(),M=0;M<w;M++){var S=y.getViewport(M);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),f.viewport(o),y.updateMatrices(m,M),r=y.getFrustum(),_(n,s,y.camera,m,this.type)}!0!==y.isPointLightShadow&&3===this.type&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,t.setRenderTarget(l,u,h)}}}function Rd(t,e,n){var r,i,a=n.isWebGL2;function o(){var e=!1,n=new Oa,r=null,i=new Oa(0,0,0,0);return{setMask:function n(i){r===i||e||(t.colorMask(i,i,i,i),r=i)},setLocked:function t(n){e=n},setClear:function e(r,a,o,s,l){!0===l&&(r*=s,a*=s,o*=s),n.set(r,a,o,s),!1===i.equals(n)&&(t.clearColor(r,a,o,s),i.copy(n))},reset:function t(){e=!1,r=null,i.set(-1,0,0,0)}}}function s(){var e=!1,n=null,r=null,i=null;return{setTest:function t(e){e?Z(2929):j(2929)},setMask:function r(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function e(n){if(r!==n){switch(n){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}r=n}},setLocked:function t(n){e=n},setClear:function e(n){i!==n&&(t.clearDepth(n),i=n)},reset:function t(){e=!1,n=null,r=null,i=null}}}function l(){var e=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function t(n){e||(n?Z(2960):j(2960))},setMask:function r(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function e(n,o,s){r===n&&i===o&&a===s||(t.stencilFunc(n,o,s),r=n,i=o,a=s)},setOp:function e(n,r,i){o===n&&s===r&&l===i||(t.stencilOp(n,r,i),o=n,s=r,l=i)},setLocked:function t(n){e=n},setClear:function e(n){u!==n&&(t.clearStencil(n),u=n)},reset:function t(){e=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}}var u=new o,c=new s,h=new l,f=new WeakMap,d=new WeakMap,p={},m={},v=new WeakMap,g=[],y=null,_=!1,x=null,b=null,w=null,M=null,S=null,E=null,T=null,C=!1,k=null,A=null,P=null,L=null,D=null,R=t.getParameter(35661),I=!1,N=0,O=t.getParameter(7938);-1!==O.indexOf("WebGL")?(N=parseFloat(/^WebGL (\d)/.exec(O)[1]),I=N>=1):-1!==O.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),I=N>=2);var F=null,z={},U=t.getParameter(3088),V=t.getParameter(2978),B=(new Oa).fromArray(U),H=(new Oa).fromArray(V);function G(e,n,r){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<r;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var W={};function Z(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function j(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function q(e,n){return m[e]!==n&&(t.bindFramebuffer(e,n),m[e]=n,a&&(36009===e&&(m[36160]=n),36160===e&&(m[36009]=n)),!0)}function X(r,i){var a=g,o=!1;if(r)if(void 0===(a=v.get(i))&&(a=[],v.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function Y(e){return y!==e&&(t.useProgram(e),y=e,!0)}W[3553]=G(3553,3553,1),W[34067]=G(34067,34069,6),u.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Z(2929),c.setFunc(3),et(!1),nt(1),Z(2884),$(0);var K=(me(r={},Xe,32774),me(r,Ye,32778),me(r,Ke,32779),r);if(a)K[103]=32775,K[104]=32776;else{var J=e.get("EXT_blend_minmax");null!==J&&(K[103]=J.MIN_EXT,K[104]=J.MAX_EXT)}var Q=(me(i={},$e,0),me(i,tn,1),me(i,en,768),me(i,rn,770),me(i,cn,776),me(i,ln,774),me(i,on,772),me(i,nn,769),me(i,an,771),me(i,un,775),me(i,sn,773),i);function $(e,n,r,i,a,o,s,l){if(0!==e){if(!1===_&&(Z(3042),_=!0),5===e)a=a||n,o=o||r,s=s||i,n===b&&a===S||(t.blendEquationSeparate(K[n],K[a]),b=n,S=a),r===w&&i===M&&o===E&&s===T||(t.blendFuncSeparate(Q[r],Q[i],Q[o],Q[s]),w=r,M=i,E=o,T=s),x=e,C=null;else if(e!==x||l!==C){if(b===Xe&&S===Xe||(t.blendEquation(32774),b=Xe,S=Xe),l)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}w=null,M=null,E=null,T=null,x=e,C=l}}else!0===_&&(j(3042),_=!1)}function tt(t,e){2===t.side?j(2884):Z(2884);var n=1===t.side;e&&(n=!n),et(n),1===t.blending&&!1===t.transparent?$(0):$(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),u.setMask(t.colorWrite);var r=t.stencilWrite;h.setTest(r),r&&(h.setMask(t.stencilWriteMask),h.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),h.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),it(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Z(32926):j(32926)}function et(e){k!==e&&(e?t.frontFace(2304):t.frontFace(2305),k=e)}function nt(e){0!==e?(Z(2884),e!==A&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):j(2884),A=e}function rt(e){e!==P&&(I&&t.lineWidth(e),P=e)}function it(e,n,r){e?(Z(32823),L===n&&D===r||(t.polygonOffset(n,r),L=n,D=r)):j(32823)}function at(t){t?Z(3089):j(3089)}function ot(e){void 0===e&&(e=33984+R-1),F!==e&&(t.activeTexture(e),F=e)}function st(e,n,r){void 0===r&&(r=null===F?33984+R-1:F);var i=z[r];void 0===i&&(i={type:void 0,texture:void 0},z[r]=i),i.type===e&&i.texture===n||(F!==r&&(t.activeTexture(r),F=r),t.bindTexture(e,n||W[e]),i.type=e,i.texture=n)}function lt(){var e=z[F];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function ut(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ct(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ht(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ft(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function dt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function pt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function mt(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function vt(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function gt(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function yt(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function _t(e){!1===B.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),B.copy(e))}function xt(e){!1===H.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),H.copy(e))}function bt(e,n){var r=d.get(n);void 0===r&&(r=new WeakMap,d.set(n,r));var i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))}function wt(e,n){var r,i=d.get(n).get(e);f.get(e)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),f.set(e,i))}function Mt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===a&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},F=null,z={},m={},v=new WeakMap,g=[],y=null,_=!1,x=null,b=null,w=null,M=null,S=null,E=null,T=null,C=!1,k=null,A=null,P=null,L=null,D=null,B.set(0,0,t.canvas.width,t.canvas.height),H.set(0,0,t.canvas.width,t.canvas.height),u.reset(),c.reset(),h.reset()}return{buffers:{color:u,depth:c,stencil:h},enable:Z,disable:j,bindFramebuffer:q,drawBuffers:X,useProgram:Y,setBlending:$,setMaterial:tt,setFlipSided:et,setCullFace:nt,setLineWidth:rt,setPolygonOffset:it,setScissorTest:at,activeTexture:ot,bindTexture:st,unbindTexture:lt,compressedTexImage2D:ut,compressedTexImage3D:ct,texImage2D:gt,texImage3D:yt,updateUBOMapping:bt,uniformBlockBinding:wt,texStorage2D:mt,texStorage3D:vt,texSubImage2D:ht,texSubImage3D:ft,compressedTexSubImage2D:dt,compressedTexSubImage3D:pt,scissor:_t,viewport:xt,reset:Mt}}function Id(t,e,n,r,i,a,o){var s,l,u=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,f=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test("undefined"==typeof navigator?"":navigator.userAgent),v=new WeakMap,g,y=new WeakMap,_=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function x(t,e){return _?new OffscreenCanvas(t,e):ya("canvas")}function b(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?la:Math.floor,o=a(i*t.width),s=a(i*t.height);void 0===g&&(g=x(o,s));var l=n?x(o,s):g,u;return l.width=o,l.height=s,l.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function w(t){return oa(t.width)&&oa(t.height)}function M(t){return!u&&(t.wrapS!==Nn||t.wrapT!==Nn||t.minFilter!==Fn&&t.minFilter!==Hn)}function S(t,e){return t.generateMipmaps&&e&&t.minFilter!==Fn&&t.minFilter!==Hn}function E(e){t.generateMipmap(e)}function T(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===ri&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||e.get("EXT_color_buffer_float"),s}function C(t,e,n){return!0===S(t,n)||t.isFramebufferTexture&&t.minFilter!==Fn&&t.minFilter!==Hn?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function k(t){return t===Fn||t===zn||t===Vn?9728:9729}function A(t){var e=t.target;e.removeEventListener("dispose",A),L(e),e.isVideoTexture&&v.delete(e)}function P(t){var e=t.target;e.removeEventListener("dispose",P),R(e)}function L(t){var e=r.get(t);if(void 0!==e.__webglInit){var n=t.source,i=y.get(n);if(i){var a=i[e.__cacheKey];a.usedTimes--,0===a.usedTimes&&D(t),0===Object.keys(i).length&&y.delete(n)}r.remove(t)}}function D(e){var n=r.get(e);t.deleteTexture(n.__webglTexture);var i=e.source,a;delete y.get(i)[n.__cacheKey],o.memory.textures--}function R(e){var n=e.texture,i=r.get(e),a=r.get(n);if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),o.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)t.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var l=0;l<i.__webglColorRenderbuffer.length;l++)i.__webglColorRenderbuffer[l]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[l]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var h=r.get(n[u]);h.__webglTexture&&(t.deleteTexture(h.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(e)}var I=0;function N(){I=0}function O(){var t=I;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),I+=1,t}function F(t){var e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function z(t,e){var i=r.get(t);if(t.isVideoTexture&&it(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){var a=t.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void j(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+e)}function U(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?j(i,t,e):n.bindTexture(35866,i.__webglTexture,33984+e)}function V(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?j(i,t,e):n.bindTexture(32879,i.__webglTexture,33984+e)}function B(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?q(i,t,e):n.bindTexture(34067,i.__webglTexture,33984+e)}var H=(me(s={},In,10497),me(s,Nn,33071),me(s,On,33648),s),G=(me(l={},Fn,9728),me(l,zn,9984),me(l,Vn,9986),me(l,Hn,9729),me(l,Gn,9985),me(l,Zn,9987),l);function W(n,a,o){if(o?(t.texParameteri(n,10242,H[a.wrapS]),t.texParameteri(n,10243,H[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,H[a.wrapR]),t.texParameteri(n,10240,G[a.magFilter]),t.texParameteri(n,10241,G[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===Nn&&a.wrapT===Nn||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,k(a.magFilter)),t.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==Fn&&a.minFilter!==Hn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(a.type===$n&&!1===e.has("OES_texture_float_linear"))return;if(!1===u&&a.type===tr&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function Z(e,n){var r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",A));var i=n.source,a=y.get(i);void 0===a&&(a={},y.set(i,a));var s=F(n);if(s!==e.__cacheKey){void 0===a[s]&&(a[s]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var l=a[e.__cacheKey];void 0!==l&&(a[e.__cacheKey].usedTimes--,0===l.usedTimes&&D(n)),e.__cacheKey=s,e.__webglTexture=a[s].texture}return r}function j(e,i,o){var s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);var l=Z(e,i),c=i.source;n.bindTexture(s,e.__webglTexture,33984+o);var h=r.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(33984+o),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);var d=M(i)&&!1===w(i.image),p=b(i.image,d,!1,f),m=w(p=at(i,p))||u,v=a.convert(i.format,i.encoding),g=a.convert(i.type),y=T(i.internalFormat,v,g,i.encoding,i.isVideoTexture),_;W(s,i,m);var x=i.mipmaps,k=u&&!0!==i.isVideoTexture,A=void 0===h.__version||!0===l,P=C(i,p,m);if(i.isDepthTexture)y=6402,u?y=i.type===$n?36012:i.type===Qn?33190:i.type===rr?35056:33189:i.type===$n&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===ur&&6402===y&&i.type!==Kn&&i.type!==Qn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Qn,g=a.convert(i.type)),i.format===cr&&6402===y&&(y=34041,i.type!==rr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=rr,g=a.convert(i.type))),A&&(k?n.texStorage2D(3553,1,y,p.width,p.height):n.texImage2D(3553,0,y,p.width,p.height,0,v,g,null));else if(i.isDataTexture)if(x.length>0&&m){k&&A&&n.texStorage2D(3553,P,y,x[0].width,x[0].height);for(var L=0,D=x.length;L<D;L++)_=x[L],k?n.texSubImage2D(3553,L,0,0,_.width,_.height,v,g,_.data):n.texImage2D(3553,L,y,_.width,_.height,0,v,g,_.data);i.generateMipmaps=!1}else k?(A&&n.texStorage2D(3553,P,y,p.width,p.height),n.texSubImage2D(3553,0,0,0,p.width,p.height,v,g,p.data)):n.texImage2D(3553,0,y,p.width,p.height,0,v,g,p.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){k&&A&&n.texStorage3D(35866,P,y,x[0].width,x[0].height,p.depth);for(var R=0,I=x.length;R<I;R++)_=x[R],i.format!==or?null!==v?k?n.compressedTexSubImage3D(35866,R,0,0,0,_.width,_.height,p.depth,v,_.data,0,0):n.compressedTexImage3D(35866,R,y,_.width,_.height,p.depth,0,_.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage3D(35866,R,0,0,0,_.width,_.height,p.depth,v,g,_.data):n.texImage3D(35866,R,y,_.width,_.height,p.depth,0,v,g,_.data)}else{k&&A&&n.texStorage2D(3553,P,y,x[0].width,x[0].height);for(var N=0,O=x.length;N<O;N++)_=x[N],i.format!==or?null!==v?k?n.compressedTexSubImage2D(3553,N,0,0,_.width,_.height,v,_.data):n.compressedTexImage2D(3553,N,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage2D(3553,N,0,0,_.width,_.height,v,g,_.data):n.texImage2D(3553,N,y,_.width,_.height,0,v,g,_.data)}else if(i.isDataArrayTexture)k?(A&&n.texStorage3D(35866,P,y,p.width,p.height,p.depth),n.texSubImage3D(35866,0,0,0,0,p.width,p.height,p.depth,v,g,p.data)):n.texImage3D(35866,0,y,p.width,p.height,p.depth,0,v,g,p.data);else if(i.isData3DTexture)k?(A&&n.texStorage3D(32879,P,y,p.width,p.height,p.depth),n.texSubImage3D(32879,0,0,0,0,p.width,p.height,p.depth,v,g,p.data)):n.texImage3D(32879,0,y,p.width,p.height,p.depth,0,v,g,p.data);else if(i.isFramebufferTexture){if(A)if(k)n.texStorage2D(3553,P,y,p.width,p.height);else for(var F=p.width,z=p.height,U=0;U<P;U++)n.texImage2D(3553,U,y,F,z,0,v,g,null),F>>=1,z>>=1}else if(x.length>0&&m){k&&A&&n.texStorage2D(3553,P,y,x[0].width,x[0].height);for(var V=0,B=x.length;V<B;V++)_=x[V],k?n.texSubImage2D(3553,V,0,0,v,g,_):n.texImage2D(3553,V,y,v,g,_);i.generateMipmaps=!1}else k?(A&&n.texStorage2D(3553,P,y,p.width,p.height),n.texSubImage2D(3553,0,0,0,v,g,p)):n.texImage2D(3553,0,y,v,g,p);S(i,m)&&E(s),h.__version=c.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function q(e,i,o){if(6===i.image.length){var s=Z(e,i),l=i.source;n.bindTexture(34067,e.__webglTexture,33984+o);var c=r.get(l);if(l.version!==c.__version||!0===s){n.activeTexture(33984+o),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);for(var f=i.isCompressedTexture||i.image[0].isCompressedTexture,d=i.image[0]&&i.image[0].isDataTexture,p=[],m=0;m<6;m++)p[m]=f||d?d?i.image[m].image:i.image[m]:b(i.image[m],!1,!0,h),p[m]=at(i,p[m]);var v=p[0],g=w(v)||u,y=a.convert(i.format,i.encoding),_=a.convert(i.type),x=T(i.internalFormat,y,_,i.encoding),M=u&&!0!==i.isVideoTexture,k=void 0===c.__version||!0===s,A=C(i,v,g),P;if(W(34067,i,g),f){M&&k&&n.texStorage2D(34067,A,x,v.width,v.height);for(var L=0;L<6;L++){P=p[L].mipmaps;for(var D=0;D<P.length;D++){var R=P[D];i.format!==or?null!==y?M?n.compressedTexSubImage2D(34069+L,D,0,0,R.width,R.height,y,R.data):n.compressedTexImage2D(34069+L,D,x,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?n.texSubImage2D(34069+L,D,0,0,R.width,R.height,y,_,R.data):n.texImage2D(34069+L,D,x,R.width,R.height,0,y,_,R.data)}}}else{P=i.mipmaps,M&&k&&(P.length>0&&A++,n.texStorage2D(34067,A,x,p[0].width,p[0].height));for(var I=0;I<6;I++)if(d){M?n.texSubImage2D(34069+I,0,0,0,p[I].width,p[I].height,y,_,p[I].data):n.texImage2D(34069+I,0,x,p[I].width,p[I].height,0,y,_,p[I].data);for(var N=0;N<P.length;N++){var O,F=P[N].image[I].image;M?n.texSubImage2D(34069+I,N+1,0,0,F.width,F.height,y,_,F.data):n.texImage2D(34069+I,N+1,x,F.width,F.height,0,y,_,F.data)}}else{M?n.texSubImage2D(34069+I,0,0,0,y,_,p[I]):n.texImage2D(34069+I,0,x,y,_,p[I]);for(var z=0;z<P.length;z++){var U=P[z];M?n.texSubImage2D(34069+I,z+1,0,0,y,_,U.image[I]):n.texImage2D(34069+I,z+1,x,y,_,U.image[I])}}}S(i,g)&&E(34067),c.__version=l.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}}function X(e,i,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=T(o.internalFormat,u,c,o.encoding),f;r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,e),rt(i)?p.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,nt(i)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Y(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||rt(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===$n?i=36012:o.type===Qn&&(i=33190));var s=nt(n);rt(n)?p.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){var l=nt(n);r&&!1===rt(n)?t.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):rt(n)?p.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var h=u[c],f=a.convert(h.format,h.encoding),d=a.convert(h.type),m=T(h.internalFormat,f,d,h.encoding),v=nt(n);r&&!1===rt(n)?t.renderbufferStorageMultisample(36161,v,m,n.width,n.height):rt(n)?p.renderbufferStorageMultisampleEXT(36161,v,m,n.width,n.height):t.renderbufferStorage(36161,m,n.width,n.height)}t.bindRenderbuffer(36161,null)}function K(e,i){var a;if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),z(i.depthTexture,0);var o=r.get(i.depthTexture).__webglTexture,s=nt(i);if(i.depthTexture.format===ur)rt(i)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==cr)throw new Error("Unknown depthTexture format");rt(i)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):t.framebufferTexture2D(36160,33306,3553,o,0)}}function J(e){var i=r.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");K(i.__webglFramebuffer,e)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),Y(i.__webglDepthbuffer[o],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),Y(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function Q(t,e,n){var i=r.get(t);void 0!==e&&X(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&J(t)}function $(e){var s=e.texture,l=r.get(e),c=r.get(s);e.addEventListener("dispose",P),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=s.version,o.memory.textures++);var h=!0===e.isWebGLCubeRenderTarget,f=!0===e.isWebGLMultipleRenderTargets,d=w(e)||u;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=t.createFramebuffer()}else{if(l.__webglFramebuffer=t.createFramebuffer(),f)if(i.drawBuffers)for(var m=e.texture,v=0,g=m.length;v<g;v++){var y=r.get(m[v]);void 0===y.__webglTexture&&(y.__webglTexture=t.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&e.samples>0&&!1===rt(e)){var _=f?s:[s];l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var x=0;x<_.length;x++){var b=_[x];l.__webglColorRenderbuffer[x]=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer[x]);var M=a.convert(b.format,b.encoding),C=a.convert(b.type),k=T(b.internalFormat,M,C,b.encoding,!0===e.isXRRenderTarget),A=nt(e);t.renderbufferStorageMultisample(36161,A,k,e.width,e.height),t.framebufferRenderbuffer(36160,36064+x,36161,l.__webglColorRenderbuffer[x])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),Y(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),W(34067,s,d);for(var L=0;L<6;L++)X(l.__webglFramebuffer[L],e,s,36064,34069+L);S(s,d)&&E(34067),n.unbindTexture()}else if(f){for(var D=e.texture,R=0,I=D.length;R<I;R++){var N=D[R],O=r.get(N);n.bindTexture(3553,O.__webglTexture),W(3553,N,d),X(l.__webglFramebuffer,e,N,36064+R,3553),S(N,d)&&E(3553)}n.unbindTexture()}else{var F=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(u?F=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(F,c.__webglTexture),W(F,s,d),X(l.__webglFramebuffer,e,s,36064,F),S(s,d)&&E(F),n.unbindTexture()}e.depthBuffer&&J(e)}function tt(t){for(var e=w(t)||u,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(S(s,e)){var l=t.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(l,c),E(l),n.unbindTexture()}}}function et(e){if(u&&e.samples>0&&!1===rt(e)){var i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=e.width,o=e.height,s=16384,l=[],c=e.stencilBuffer?33306:36096,h=r.get(e),f=!0===e.isWebGLMultipleRenderTargets;if(f)for(var d=0;d<i.length;d++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+d,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),t.framebufferTexture2D(36009,36064+d,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var p=0;p<i.length;p++){l.push(36064+p),e.depthBuffer&&l.push(c);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024)),f&&t.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[p]),!0===v&&(t.invalidateFramebuffer(36008,[c]),t.invalidateFramebuffer(36009,[c])),f){var g=r.get(i[p]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,g,0)}t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),m&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),f)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var _=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),t.framebufferTexture2D(36009,36064+y,3553,_,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}}function nt(t){return Math.min(d,t.samples)}function rt(t){var n=r.get(t);return u&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function it(t){var e=o.render.frame;v.get(t)!==e&&(v.set(t,e),t.update())}function at(t,n){var r=t.encoding,i=t.format,a=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===zi||r!==ni&&(r===ri?!1===u?!0===e.has("EXT_sRGB")&&i===or?(t.format=zi,t.minFilter=Hn,t.generateMipmaps=!1):n=La.sRGBToLinear(n):i===or&&a===qn||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=O,this.resetTextureUnits=N,this.setTexture2D=z,this.setTexture2DArray=U,this.setTexture3D=V,this.setTextureCube=B,this.rebindTextures=Q,this.setupRenderTarget=$,this.updateRenderTargetMipmap=tt,this.updateMultisampleRenderTarget=et,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=X,this.useMultisampledRTT=rt}function Nd(t,e,n){var r=n.isWebGL2;function i(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a;if(n===qn)return 5121;if(n===er)return 32819;if(n===nr)return 32820;if(n===Xn)return 5120;if(n===Yn)return 5122;if(n===Kn)return 5123;if(n===Jn)return 5124;if(n===Qn)return 5125;if(n===$n)return 5126;if(n===tr)return r?5131:null!==(a=e.get("OES_texture_half_float"))?a.HALF_FLOAT_OES:null;if(n===ir)return 6406;if(n===or)return 6408;if(n===sr)return 6409;if(n===lr)return 6410;if(n===ur)return 6402;if(n===cr)return 34041;if(n===hr)return 6403;if(n===ar)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===zi)return null!==(a=e.get("EXT_sRGB"))?a.SRGB_ALPHA_EXT:null;if(n===fr)return 36244;if(n===dr)return 33319;if(n===pr)return 33320;if(n===mr)return 36249;if(n===vr||n===gr||n===yr||n===_r)if(i===ri){if(null===(a=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===vr)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===gr)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===yr)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===_r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=e.get("WEBGL_compressed_texture_s3tc")))return null;if(n===vr)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===gr)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===yr)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===_r)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===xr||n===br||n===wr||n===Mr){if(null===(a=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===xr)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===br)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===wr)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Mr)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Sr)return null!==(a=e.get("WEBGL_compressed_texture_etc1"))?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Er||n===Tr){if(null===(a=e.get("WEBGL_compressed_texture_etc")))return null;if(n===Er)return i===ri?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Tr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===Cr||n===kr||n===Ar||n===Pr||n===Lr||n===Dr||n===Rr||n===Ir||n===Nr||n===Or||n===Fr||n===zr||n===Ur||n===Vr){if(null===(a=e.get("WEBGL_compressed_texture_astc")))return null;if(n===Cr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===kr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ar)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Pr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Lr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Dr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Rr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ir)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Or)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Fr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===zr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Ur)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Vr)return i===ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Br){if(null===(a=e.get("EXT_texture_compression_bptc")))return null;if(n===Br)return i===ri?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===rr?r?34042:null!==(a=e.get("WEBGL_depth_texture"))?a.UNSIGNED_INT_24_8_WEBGL:null:void 0!==t[n]?t[n]:null}return{convert:i}}var Od=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ge(this,n),(t=e.call(this)).isArrayCamera=!0,t.cameras=r,t}return _e(n)}(rl),Fd=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).isGroup=!0,t.type="Group",t}return _e(n)}(jo),zd={type:"move"},Ud=function(){function t(){ge(this,t),this._targetRay=null,this._grip=null,this._hand=null}return _e(t,[{key:"getHandSpace",value:function t(){return null===this._hand&&(this._hand=new Fd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function t(){return null===this._targetRay&&(this._targetRay=new Fd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Wa,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Wa),this._targetRay}},{key:"getGripSpace",value:function t(){return null===this._grip&&(this._grip=new Fd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Wa,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Wa),this._grip}},{key:"dispatchEvent",value:function t(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function t(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function t(e,n,r){var i=null,a=null,o=null,s=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==n.session.visibilityState){if(u&&e.hand){o=!0;var c=$t(e.hand.values()),h;try{for(c.s();!(h=c.n()).done;){var f=h.value,d=n.getJointPose(f,r);if(void 0===u.joints[f.jointName]){var p=new Fd;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[f.jointName]=p,u.add(p)}var m=u.joints[f.jointName];null!==d&&(m.matrix.fromArray(d.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=d.radius),m.visible=null!==d}}catch(t){c.e(t)}finally{c.f()}var v=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],y=v.position.distanceTo(g.position),_=.02,x=.005;u.inputState.pinching&&y>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&y<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&null!==(a=n.getPose(e.gripSpace,r))&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1);null!==s&&(null===(i=n.getPose(e.targetRaySpace,r))&&null!==a&&(i=a),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(zd)))}return null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),null!==u&&(u.visible=null!==o),this}}]),t}(),Vd=function(t){le(n,t);var e=ce(n);function n(t,r,i,a,o,s,l,u,c,h){var f;if(ge(this,n),(h=void 0!==h?h:ur)!==ur&&h!==cr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&h===ur&&(i=Qn),void 0===i&&h===cr&&(i=rr),(f=e.call(this,null,a,o,s,l,u,h,i,c)).isDepthTexture=!0,f.image={width:t,height:r},f.magFilter=void 0!==l?l:Fn,f.minFilter=void 0!==u?u:Fn,f.flipY=!1,f.generateMipmaps=!1,f}return _e(n)}(Na),Bd=function(t){le(n,t);var e=ce(n);function n(t,r){var i;ge(this,n);var a=fe(i=e.call(this)),o=null,s=1,l=null,u="local-floor",c=null,h=null,f=null,d=null,p=null,m=null,v=r.getContextAttributes(),g=null,y=null,_=[],x=[],b=new rl;b.layers.enable(1),b.viewport=new Oa;var w=new rl;w.layers.enable(2),w.viewport=new Oa;var M=[b,w],S=new Od;S.layers.enable(1),S.layers.enable(2);var E=null,T=null;function C(t){var e=x.indexOf(t.inputSource);if(-1!==e){var n=_[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}}function k(){o.removeEventListener("select",C),o.removeEventListener("selectstart",C),o.removeEventListener("selectend",C),o.removeEventListener("squeeze",C),o.removeEventListener("squeezestart",C),o.removeEventListener("squeezeend",C),o.removeEventListener("end",k),o.removeEventListener("inputsourceschange",A);for(var e=0;e<_.length;e++){var n=x[e];null!==n&&(x[e]=null,_[e].disconnect(n))}E=null,T=null,t.setRenderTarget(g),p=null,d=null,f=null,o=null,y=null,O.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function A(t){for(var e=0;e<t.removed.length;e++){var n=t.removed[e],r=x.indexOf(n);r>=0&&(x[r]=null,_[r].dispatchEvent({type:"disconnected",data:n}))}for(var i=0;i<t.added.length;i++){var a=t.added[i],o=x.indexOf(a);if(-1===o){for(var s=0;s<_.length;s++){if(s>=x.length){x.push(a),o=s;break}if(null===x[s]){x[s]=a,o=s;break}}if(-1===o)break}var l=_[o];l&&l.dispatchEvent({type:"connected",data:a})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(t){var e=_[t];return void 0===e&&(e=new Ud,_[t]=e),e.getTargetRaySpace()},i.getControllerGrip=function(t){var e=_[t];return void 0===e&&(e=new Ud,_[t]=e),e.getGripSpace()},i.getHand=function(t){var e=_[t];return void 0===e&&(e=new Ud,_[t]=e),e.getHandSpace()},i.setFramebufferScaleFactor=function(t){s=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(t){u=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return c||l},i.setReferenceSpace=function(t){c=t},i.getBaseLayer=function(){return null!==d?d:p},i.getBinding=function(){return f},i.getFrame=function(){return m},i.getSession=function(){return o},i.setSession=function(){var e=Qt(ve().mark((function e(n){var i,h,m,_,x,b;return ve().wrap((function e(w){for(;;)switch(w.prev=w.next){case 0:if(null===(o=n)){w.next=25;break}if(g=t.getRenderTarget(),o.addEventListener("select",C),o.addEventListener("selectstart",C),o.addEventListener("selectend",C),o.addEventListener("squeeze",C),o.addEventListener("squeezestart",C),o.addEventListener("squeezeend",C),o.addEventListener("end",k),o.addEventListener("inputsourceschange",A),!0===v.xrCompatible){w.next=14;break}return w.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===t.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s},p=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:p}),y=new Fa(p.framebufferWidth,p.framebufferHeight,{format:or,type:qn,encoding:t.outputEncoding,stencilBuffer:v.stencil})):(h=null,m=null,_=null,v.depth&&(_=v.stencil?35056:33190,h=v.stencil?cr:ur,m=v.stencil?rr:Qn),x={colorFormat:32856,depthFormat:_,scaleFactor:s},f=new XRWebGLBinding(o,r),d=f.createProjectionLayer(x),o.updateRenderState({layers:[d]}),y=new Fa(d.textureWidth,d.textureHeight,{format:or,type:qn,depthTexture:new Vd(d.textureWidth,d.textureHeight,m,void 0,void 0,void 0,void 0,void 0,void 0,h),stencilBuffer:v.stencil,encoding:t.outputEncoding,samples:v.antialias?4:0}),(b=t.properties.get(y)).__ignoreDepthValues=d.ignoreDepthValues),y.isXRRenderTarget=!0,this.setFoveation(1),c=null,w.next=20,o.requestReferenceSpace(u);case 20:l=w.sent,O.setContext(o),O.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return w.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var P=new Wa,L=new Wa;function D(t,e,n){P.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);var r=P.distanceTo(L),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var v=o+p,g=s+p,y=f-m,_=d+(r-m),x=l*s/g*v,b=u*s/g*v;t.projectionMatrix.makePerspective(y,_,x,b,v,g)}function R(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}i.updateCamera=function(t){if(null!==o){S.near=w.near=b.near=t.near,S.far=w.far=b.far=t.far,E===S.near&&T===S.far||(o.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,T=S.far);var e=t.parent,n=S.cameras;R(S,e);for(var r=0;r<n.length;r++)R(n[r],e);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),t.matrix.copy(S.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);for(var i=t.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?D(S,b,w):S.projectionMatrix.copy(b.projectionMatrix)}},i.getCamera=function(){return S},i.getFoveation=function(){return null!==d?d.fixedFoveation:null!==p?p.fixedFoveation:void 0},i.setFoveation=function(t){null!==d&&(d.fixedFoveation=t),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=t)};var I=null;function N(e,n){if(h=n.getViewerPose(c||l),m=n,null!==h){var r=h.views;null!==p&&(t.setRenderTargetFramebuffer(y,p.framebuffer),t.setRenderTarget(y));var i=!1;r.length!==S.cameras.length&&(S.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var o=r[a],s=null;if(null!==p)s=p.getViewport(o);else{var u=f.getViewSubImage(d,o);s=u.viewport,0===a&&(t.setRenderTargetTextures(y,u.colorTexture,d.ignoreDepthValues?void 0:u.depthStencilTexture),t.setRenderTarget(y))}var v=M[a];void 0===v&&((v=new rl).layers.enable(a),v.viewport=new Oa,M[a]=v),v.matrix.fromArray(o.transform.matrix),v.projectionMatrix.fromArray(o.projectionMatrix),v.viewport.set(s.x,s.y,s.width,s.height),0===a&&S.matrix.copy(v.matrix),!0===i&&S.cameras.push(v)}}for(var g=0;g<_.length;g++){var b=x[g],w=_[g];null!==b&&void 0!==w&&w.update(b,n,c||l)}I&&I(e,n),m=null}var O=new vl;return O.setAnimationLoop(N),i.setAnimationLoop=function(t){I=t},i.dispose=function(){},i}return _e(n)}(Ui);function Hd(t,e){function n(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function r(t,e,n,r,m){e.isMeshBasicMaterial||e.isMeshLambertMaterial?i(t,e):e.isMeshToonMaterial?(i(t,e),c(t,e)):e.isMeshPhongMaterial?(i(t,e),u(t,e)):e.isMeshStandardMaterial?(i(t,e),h(t,e),e.isMeshPhysicalMaterial&&f(t,e,m)):e.isMeshMatcapMaterial?(i(t,e),d(t,e)):e.isMeshDepthMaterial?i(t,e):e.isMeshDistanceMaterial?(i(t,e),p(t,e)):e.isMeshNormalMaterial?i(t,e):e.isLineBasicMaterial?(a(t,e),e.isLineDashedMaterial&&o(t,e)):e.isPointsMaterial?s(t,e,n,r):e.isSpriteMaterial?l(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var i=e.get(r).envMap,a,o;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}function a(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function o(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function s(t,e,n,r){var i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function l(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function c(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function h(t,n){var r;t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}function f(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}function d(t,e){e.matcap&&(t.matcap.value=e.matcap)}function p(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Gd(t,e,n,r){var i={},a={},o=[],s=n.isWebGL2?t.getParameter(35375):0;function l(t,e){var n=e.program;r.uniformBlockBinding(t,n)}function u(t,n){var o=i[t.id];void 0===o&&(p(t),o=c(t),i[t.id]=o,t.addEventListener("dispose",v));var s=n.program;r.updateUBOMapping(t,s);var l=e.render.frame;a[t.id]!==l&&(f(t),a[t.id]=l)}function c(e){var n=h();e.__bindingPointIndex=n;var r=t.createBuffer(),i=e.__size,a=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,a),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}function h(){for(var t=0;t<s;t++)if(-1===o.indexOf(t))return o.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(e){var n=i[e.id],r=e.uniforms,a=e.__cache;t.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var l=r[o];if(!0===d(l,o,a)){var u=l.value,c=l.__offset;"number"==typeof u?(l.__data[0]=u,t.bufferSubData(35345,c,l.__data)):(l.value.isMatrix3?(l.__data[0]=l.value.elements[0],l.__data[1]=l.value.elements[1],l.__data[2]=l.value.elements[2],l.__data[3]=l.value.elements[0],l.__data[4]=l.value.elements[3],l.__data[5]=l.value.elements[4],l.__data[6]=l.value.elements[5],l.__data[7]=l.value.elements[0],l.__data[8]=l.value.elements[6],l.__data[9]=l.value.elements[7],l.__data[10]=l.value.elements[8],l.__data[11]=l.value.elements[0]):u.toArray(l.__data),t.bufferSubData(35345,c,l.__data))}}t.bindBuffer(35345,null)}function d(t,e,n){var r=t.value;if(void 0===n[e])return n[e]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{var i=n[e];if(!1===i.equals(r))return i.copy(r),!0}return!1}function p(t){for(var e=t.uniforms,n=0,r=16,i=0,a=0,o=e.length;a<o;a++){var s=e[a],l=m(s),u;if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-l.boundary<0&&(n+=r-i,s.__offset=n);n+=l.storage}return(i=n%r)>0&&(n+=r-i),t.__size=n,t.__cache={},this}function m(t){var e=t.value,n={boundary:0,storage:0};return"number"==typeof e?(n.boundary=4,n.storage=4):e.isVector2?(n.boundary=8,n.storage=8):e.isVector3||e.isColor?(n.boundary=16,n.storage=12):e.isVector4?(n.boundary=16,n.storage=16):e.isMatrix3?(n.boundary=48,n.storage=48):e.isMatrix4?(n.boundary=64,n.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),n}function v(e){var n=e.target;n.removeEventListener("dispose",v);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}function g(){for(var e in i)t.deleteBuffer(i[e]);o=[],i={},a={}}return{bind:l,update:u,dispose:g}}function Wd(){var t=ya("canvas");return t.style.display="block",t}function Zd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var e=void 0!==t.canvas?t.canvas:Wd(),n=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,i=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,s=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,c;c=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;var h=null,f=null,d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ni,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function t(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function t(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var m=this,v=!1,g=0,y=0,_=null,x=-1,b=null,w=new Oa,M=new Oa,S=null,E=e.width,T=e.height,C=1,k=null,A=null,P=new Oa(0,0,E,T),L=new Oa(0,0,E,T),D=!1,R=new ml,I=!1,N=!1,O=null,F=new bo,z=new da,U=new Wa,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===_?C:1}var H=n,G,W,Z,j,q,X,Y,K,J,Q,$,tt,et,nt,rt,it,at,ot,st,lt,ut,ct,ht,ft;function dt(t,n){for(var r=0;r<t.length;r++){var i=t[r],a=e.getContext(i,n);if(null!==a)return a}return null}try{var pt={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(xe)),e.addEventListener("webglcontextlost",yt,!1),e.addEventListener("webglcontextrestored",_t,!1),e.addEventListener("webglcontextcreationerror",xt,!1),null===H){var mt=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&mt.shift(),null===(H=dt(mt,pt)))throw dt(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===H.getShaderPrecisionFormat&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function vt(){G=new Eh(H),W=new rh(H,G,t),G.init(W),ct=new Nd(H,G,W),Z=new Rd(H,G,W),j=new kh,q=new vd,X=new Id(H,G,Z,q,W,ct,j),Y=new ah(m),K=new Sh(m),J=new gl(H,W),ht=new eh(H,G,J,W),Q=new Th(H,J,j,ht),$=new Dh(H,Q,J,j),st=new Lh(H,W,X),it=new ih(q),tt=new md(m,Y,K,G,W,ht,it),et=new Hd(m,q),nt=new xd,rt=new Cd(G,W),ot=new th(m,Y,K,Z,$,c,o),at=new Dd(m,$,W),ft=new Gd(H,j,W,Z),lt=new nh(H,G,j,W),ut=new Ch(H,G,j,W),j.programs=tt.programs,m.capabilities=W,m.extensions=G,m.properties=q,m.renderLists=nt,m.shadowMap=at,m.state=Z,m.info=j}vt();var gt=new Bd(m,H);function yt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;var t=j.autoReset,e=at.enabled,n=at.autoUpdate,r=at.needsUpdate,i=at.type;vt(),j.autoReset=t,at.enabled=e,at.autoUpdate=n,at.needsUpdate=r,at.type=i}function xt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function bt(t){var e=t.target;e.removeEventListener("dispose",bt),wt(e)}function wt(t){Mt(t),q.remove(t)}function Mt(t){var e=q.get(t).programs;void 0!==e&&(e.forEach((function(t){tt.releaseProgram(t)})),t.isShaderMaterial&&tt.releaseShaderCache(t))}this.xr=gt,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){var t=G.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=G.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(E,T,!1))},this.getSize=function(t){return t.set(E,T)},this.setSize=function(t,n,r){gt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,T=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(E*C,T*C).floor()},this.setDrawingBufferSize=function(t,n,r){E=t,T=n,C=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),Z.viewport(w.copy(P).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(L)},this.setScissor=function(t,e,n,r){t.isVector4?L.set(t.x,t.y,t.z,t.w):L.set(t,e,n,r),Z.scissor(M.copy(L).multiplyScalar(C).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(t){Z.setScissorTest(D=t)},this.setOpaqueSort=function(t){k=t},this.setTransparentSort=function(t){A=t},this.getClearColor=function(t){return t.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),H.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",yt,!1),e.removeEventListener("webglcontextrestored",_t,!1),e.removeEventListener("webglcontextcreationerror",xt,!1),nt.dispose(),rt.dispose(),q.dispose(),Y.dispose(),K.dispose(),$.dispose(),ht.dispose(),ft.dispose(),tt.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",Tt),gt.removeEventListener("sessionend",Ct),O&&(O.dispose(),O=null),kt.stop()},this.renderBufferDirect=function(t,e,n,r,i,a){null===e&&(e=V);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ot(t,e,n,r,i);Z.setMaterial(r,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c=1,h;!0===r.wireframe&&(l=Q.getWireframeAttribute(n),c=2),ht.setup(i,r,s,n,l);var f=lt;null!==l&&(h=J.get(l),(f=ut).setIndex(h));var d=null!==l?l.count:u.count,p=n.drawRange.start*c,m=n.drawRange.count*c,v=null!==a?a.start*c:0,g=null!==a?a.count*c:1/0,y=Math.max(p,v),_=Math.min(d,p+m,v+g)-1,x=Math.max(0,_-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*B()),f.setMode(1)):f.setMode(4);else if(i.isLine){var b=r.linewidth;void 0===b&&(b=1),Z.setLineWidth(b*B()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,x,w)}else f.render(y,x)}},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&2===t.side?(t.side=1,t.needsUpdate=!0,It(t,e,n),t.side=0,t.needsUpdate=!0,It(t,e,n),t.side=2):It(t,e,n)}(f=rt.get(t)).init(),p.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(m.physicallyCorrectLights),t.traverse((function(e){var r=e.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var a;n(r[i],t,e)}else n(r,t,e)})),p.pop(),f=null};var St=null;function Et(t){St&&St(t)}function Tt(){kt.stop()}function Ct(){kt.start()}var kt=new vl;function At(t,e,n,r){if(!1!==t.visible){var i;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||R.intersectsSprite(t)){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);var a=$.update(t),o=t.material;o.visible&&h.push(t,a,o,n,U.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||R.intersectsObject(t))){r&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);var s=$.update(t),l=t.material;if(Array.isArray(l))for(var u=s.groups,c=0,d=u.length;c<d;c++){var p=u[c],m=l[p.materialIndex];m&&m.visible&&h.push(t,s,m,n,U.z,p)}else l.visible&&h.push(t,s,l,n,U.z,null)}for(var v=t.children,g=0,y=v.length;g<y;g++)At(v[g],e,n,r)}}function Pt(t,e,n,r){var i=t.opaque,a=t.transmissive,o=t.transparent;f.setupLightsView(n),a.length>0&&Lt(i,e,n),r&&Z.viewport(w.copy(r)),i.length>0&&Dt(i,e,n),a.length>0&&Dt(a,e,n),o.length>0&&Dt(o,e,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Lt(t,e,n){var r=W.isWebGL2;null===O&&(O=new Fa(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?tr:qn,minFilter:Zn,samples:r&&!0===a?4:0})),m.getDrawingBufferSize(z),r?O.setSize(z.x,z.y):O.setSize(la(z.x),la(z.y));var i=m.getRenderTarget();m.setRenderTarget(O),m.clear();var o=m.toneMapping;m.toneMapping=0,Dt(t,e,n),m.toneMapping=o,X.updateMultisampleRenderTarget(O),X.updateRenderTargetMipmap(O),m.setRenderTarget(i)}function Dt(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Rt(s,e,n,l,u,c)}}function Rt(t,e,n,r,i,a){t.onBeforeRender(m,e,n,r,i,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(m,e,n,r,t,a),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,a),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,a),i.side=2):m.renderBufferDirect(n,e,r,i,t,a),t.onAfterRender(m,e,n,r,i,a)}function It(t,e,n){!0!==e.isScene&&(e=V);var r=q.get(t),i=f.state.lights,a=f.state.shadowsArray,o=i.state.version,s=tt.getParameters(t,i.state,a,e,n),l=tt.getProgramCacheKey(s),u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?K:Y).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",bt),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Nt(t,s),c}else s.uniforms=tt.getUniforms(t),t.onBuild(n,s,m),t.onBeforeCompile(s,m),c=tt.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=it.uniform),Nt(t,s),r.needsLights=zt(t),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=Uf.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Nt(t,e){var n=q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function Ot(t,e,n,r,i){!0!==e.isScene&&(e=V),X.resetTextureUnits();var a=e.fog,o=r.isMeshStandardMaterial?e.environment:null,s=null===_?m.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:ni,l=(r.isMeshStandardMaterial?K:Y).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,v=r.toneMapped?m.toneMapping:0,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,w=q.get(r),M=f.state.lights;if(!0===I&&(!0===N||t!==b)){var S=t===b&&r.id===x;it.setState(r,t,S)}var E=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==M.state.version||w.outputEncoding!==s||i.isInstancedMesh&&!1===w.instancing?E=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?E=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===r.fog&&w.fog!==a?E=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===it.numPlanes&&w.numIntersection===it.numIntersection?(w.vertexAlphas!==u||w.vertexTangents!==c||w.morphTargets!==h||w.morphNormals!==d||w.morphColors!==p||w.toneMapping!==v||!0===W.isWebGL2&&w.morphTargetsCount!==y)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,w.__version=r.version);var k=w.currentProgram;!0===E&&(k=It(r,e,i));var A=!1,P=!1,L=!1,D=k.getUniforms(),R=w.uniforms;if(Z.useProgram(k.program)&&(A=!0,P=!0,L=!0),r.id!==x&&(x=r.id,P=!0),A||b!==t){if(D.setValue(H,"projectionMatrix",t.projectionMatrix),W.logarithmicDepthBuffer&&D.setValue(H,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,P=!0,L=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var F=D.map.cameraPosition;void 0!==F&&F.setValue(H,U.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(H,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&D.setValue(H,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){D.setOptional(H,i,"bindMatrix"),D.setOptional(H,i,"bindMatrixInverse");var z=i.skeleton;z&&(W.floatVertexTextures?(null===z.boneTexture&&z.computeBoneTexture(),D.setValue(H,"boneTexture",z.boneTexture,X),D.setValue(H,"boneTextureSize",z.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var B=n.morphAttributes;if((void 0!==B.position||void 0!==B.normal||void 0!==B.color&&!0===W.isWebGL2)&&st.update(i,n,r,k),(P||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,D.setValue(H,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),P&&(D.setValue(H,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&Ft(R,L),a&&!0===r.fog&&et.refreshFogUniforms(R,a),et.refreshMaterialUniforms(R,r,C,T,O),Uf.upload(H,w.uniformsList,R,X)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Uf.upload(H,w.uniformsList,R,X),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&D.setValue(H,"center",i.center),D.setValue(H,"modelViewMatrix",i.modelViewMatrix),D.setValue(H,"normalMatrix",i.normalMatrix),D.setValue(H,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var G=r.uniformsGroups,j=0,J=G.length;j<J;j++)if(W.isWebGL2){var Q=G[j];ft.update(Q,k),ft.bind(Q,k)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return k}function Ft(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function zt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}kt.setAnimationLoop(Et),"undefined"!=typeof self&&kt.setContext(self),this.setAnimationLoop=function(t){St=t,gt.setAnimationLoop(t),null===t?kt.stop():kt.start()},gt.addEventListener("sessionstart",Tt),gt.addEventListener("sessionend",Ct),this.render=function(t,e){if(void 0===e||!0===e.isCamera){if(!0!==v){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===gt.enabled&&!0===gt.isPresenting&&(!0===gt.cameraAutoUpdate&&gt.updateCamera(e),e=gt.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,_),(f=rt.get(t,p.length)).init(),p.push(f),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),R.setFromProjectionMatrix(F),N=this.localClippingEnabled,I=it.init(this.clippingPlanes,N,e),(h=nt.get(t,d.length)).init(),d.push(h),At(t,e,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(k,A),!0===I&&it.beginShadows();var n=f.state.shadowsArray;if(at.render(n,t,e),!0===I&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),ot.render(h,t),f.setupLights(m.physicallyCorrectLights),e.isArrayCamera)for(var r=e.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Pt(h,t,o,o.viewport)}else Pt(h,t,e);null!==_&&(X.updateMultisampleRenderTarget(_),X.updateRenderTargetMipmap(_)),!0===t.isScene&&t.onAfterRender(m,t,e),ht.resetDefaultState(),x=-1,b=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(t,e,n){q.get(t.texture).__webglTexture=e,q.get(t.depthTexture).__webglTexture=n;var r=q.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){var n=q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=t,g=e,y=n;var r=!0,i=null,a=!1,o=!1;if(t){var s=q.get(t);void 0!==s.__useDefaultFramebuffer?(Z.bindFramebuffer(36160,null),r=!1):void 0===s.__webglFramebuffer?X.setupRenderTarget(t):s.__hasExternalTextures&&X.rebindTextures(t,q.get(t.texture).__webglTexture,q.get(t.depthTexture).__webglTexture);var l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=u[e],a=!0):i=W.isWebGL2&&t.samples>0&&!1===X.useMultisampledRTT(t)?q.get(t).__webglMultisampledFramebuffer:u,w.copy(t.viewport),M.copy(t.scissor),S=t.scissorTest}else w.copy(P).multiplyScalar(C).floor(),M.copy(L).multiplyScalar(C).floor(),S=D;var c=Z.bindFramebuffer(36160,i);if(c&&W.drawBuffers&&r&&Z.drawBuffers(t,i),Z.viewport(w),Z.scissor(M),Z.setScissorTest(S),a){var h=q.get(t.texture);H.framebufferTexture2D(36160,36064,34069+e,h.__webglTexture,n)}else if(o){var f=q.get(t.texture),d=e||0;H.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,d)}x=-1},this.readRenderTargetPixels=function(t,e,n,r,i,a,o){if(t&&t.isWebGLRenderTarget){var s=q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){Z.bindFramebuffer(36160,s);try{var l=t.texture,u=l.format,c=l.type;if(u!==or&&ct.convert(u)!==H.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===tr&&(G.has("EXT_color_buffer_half_float")||W.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(c===qn||ct.convert(c)===H.getParameter(35738)||c===$n&&(W.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&H.readPixels(e,n,r,i,ct.convert(u),ct.convert(c),a)}finally{var f=null!==_?q.get(_).__webglFramebuffer:null;Z.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r);X.setTexture2D(e,0),H.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,a),Z.unbindTexture()},this.copyTextureToTexture=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.image.width,a=e.image.height,o=ct.convert(n.format),s=ct.convert(n.type);X.setTexture2D(n,0),H.pixelStorei(37440,n.flipY),H.pixelStorei(37441,n.premultiplyAlpha),H.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?H.texSubImage2D(3553,r,t.x,t.y,i,a,o,s,e.image.data):e.isCompressedTexture?H.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):H.texSubImage2D(3553,r,t.x,t.y,o,s,e.image),0===r&&n.generateMipmaps&&H.generateMipmap(3553),Z.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=ct.convert(r.format),u=ct.convert(r.type),c;if(r.isData3DTexture)X.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),c=35866}H.pixelStorei(37440,r.flipY),H.pixelStorei(37441,r.premultiplyAlpha),H.pixelStorei(3317,r.unpackAlignment);var h=H.getParameter(3314),f=H.getParameter(32878),d=H.getParameter(3316),p=H.getParameter(3315),v=H.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;H.pixelStorei(3314,g.width),H.pixelStorei(32878,g.height),H.pixelStorei(3316,t.min.x),H.pixelStorei(3315,t.min.y),H.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?H.texSubImage3D(c,i,e.x,e.y,e.z,a,o,s,l,u,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(c,i,e.x,e.y,e.z,a,o,s,l,g.data)):H.texSubImage3D(c,i,e.x,e.y,e.z,a,o,s,l,u,g),H.pixelStorei(3314,h),H.pixelStorei(32878,f),H.pixelStorei(3316,d),H.pixelStorei(3315,p),H.pixelStorei(32877,v),0===i&&r.generateMipmaps&&H.generateMipmap(c),Z.unbindTexture()}},this.initTexture=function(t){t.isCubeTexture?X.setTextureCube(t,0):t.isData3DTexture?X.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?X.setTexture2DArray(t,0):X.setTexture2D(t,0),Z.unbindTexture()},this.resetState=function(){g=0,y=0,_=null,Z.reset(),ht.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var jd=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(Zd);jd.prototype.isWebGL1Renderer=!0;var qd=null,Xd=null,Yd=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).isScene=!0,t.type="Scene",t.background=null,t.environment=null,t.fog=null,t.backgroundBlurriness=0,t.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:fe(t)})),t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function t(e){var r=oe(pe(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.backgroundBlurriness=this.backgroundBlurriness),r}},{key:"autoUpdate",get:function t(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function t(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(jo),Kd=null,Jd=new Wa,Qd=null,$d=null,tp,ep=new Wa,np=new Wa,rp=new Wa,ip=new da,ap=new da,op=new bo,sp=new Wa,lp=new Wa,up=new Wa,cp=new da,hp=new da,fp=new da,dp=null;function pp(t,e,n,r,i,a){ip.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(ap.x=a*ip.x-i*ip.y,ap.y=i*ip.x+a*ip.y):ap.copy(ip),t.copy(e),t.x+=ap.x,t.y+=ap.y,t.applyMatrix4(op)}var mp=new Wa,vp=new Wa,gp=null,yp=new Wa,_p=new Oa,xp=new Oa,bp=new Wa,wp=new bo,Mp=null,Sp=null,Ep=null,Tp=new bo,Cp=new bo,kp=null,Ap=null,Pp=new bo,Lp=new bo,Dp=null,Rp=new bo,Ip=new Zs,Np=null,Op=null,Fp=new Wa,zp=new Wa,Up=new bo,Vp=new xo,Bp=new ho,Hp=null,Gp=new Wa,Wp=new Wa,Zp=null,jp=null,qp=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new Aa(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(t),r}return _e(n,[{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(as),Xp=new bo,Yp=new xo,Kp=new ho,Jp=new Wa,Qp=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qp;return ge(this,n),(t=e.call(this)).isPoints=!0,t.type="Points",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return _e(n,[{key:"copy",value:function t(e,r){return oe(pe(n.prototype),"copy",this).call(this,e,r),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function t(e,n){var r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Kp.copy(r.boundingSphere),Kp.applyMatrix4(i),Kp.radius+=a,!1!==e.ray.intersectsSphere(Kp)){Xp.copy(i).invert(),Yp.copy(e.ray).applyMatrix4(Xp);var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=r.index,c,h=r.attributes.position;if(null!==u)for(var f,d,p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);p<m;p++){var v=u.getX(p);Jp.fromBufferAttribute(h,v),$p(Jp,v,l,i,e,n,this)}else for(var g,y,_=Math.max(0,o.start),x=Math.min(h.count,o.start+o.count);_<x;_++)Jp.fromBufferAttribute(h,_),$p(Jp,_,l,i,e,n,this)}}},{key:"updateMorphTargets",value:function t(){var e,n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){var i=n[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++){var s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}]),n}(jo);function $p(t,e,n,r,i,a,o){var s=Yp.distanceSqToPoint(t);if(s<n){var l=new Wa;Yp.closestPointToPoint(t,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}var tm=null,em=null,nm=null,rm=null,im=null,am=function(){function t(){ge(this,t),this.type="Curve",this.arcLengthDivisions=200}return _e(t,[{key:"getPoint",value:function t(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function t(e,n){var r=this.getUtoTmapping(e);return this.getPoint(r,n)}},{key:"getPoints",value:function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=[],r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}},{key:"getSpacedPoints",value:function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=[],r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}},{key:"getLength",value:function t(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],r,i=this.getPoint(0),a=0;n.push(0);for(var o=1;o<=e;o++)a+=(r=this.getPoint(o/e)).distanceTo(i),n.push(a),i=r;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function t(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function t(e,n){var r=this.getLengths(),i=0,a=r.length,o;o=n||e*r[a-1];for(var s=0,l=a-1,u;s<=l;)if((u=r[i=Math.floor(s+(l-s)/2)]-o)<0)s=i+1;else{if(!(u>0)){l=i;break}l=i-1}if(r[i=l]===o)return i/(a-1);var c=r[i],h,f,d,p;return(i+(o-c)/(r[i+1]-c))/(a-1)}},{key:"getTangent",value:function t(e,n){var r=1e-4,i=e-r,a=e+r;i<0&&(i=0),a>1&&(a=1);var o=this.getPoint(i),s=this.getPoint(a),l=n||(o.isVector2?new da:new Wa);return l.copy(s).sub(o).normalize(),l}},{key:"getTangentAt",value:function t(e,n){var r=this.getUtoTmapping(e);return this.getTangent(r,n)}},{key:"computeFrenetFrames",value:function t(e,n){for(var r=new Wa,i=[],a=[],o=[],s=new Wa,l=new bo,u=0;u<=e;u++){var c=u/e;i[u]=this.getTangentAt(c,new Wa)}a[0]=new Wa,o[0]=new Wa;var h=Number.MAX_VALUE,f=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);f<=h&&(h=f,r.set(1,0,0)),d<=h&&(h=d,r.set(0,1,0)),p<=h&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(var m=1;m<=e;m++){if(a[m]=a[m-1].clone(),o[m]=o[m-1].clone(),s.crossVectors(i[m-1],i[m]),s.length()>Number.EPSILON){s.normalize();var v=Math.acos(Zi(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(s,v))}o[m].crossVectors(i[m],a[m])}if(!0===n){var g=Math.acos(Zi(a[0].dot(a[e]),-1,1));g/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(g=-g);for(var y=1;y<=e;y++)a[y].applyMatrix4(l.makeRotationAxis(i[y],g*y)),o[y].crossVectors(i[y],a[y])}return{tangents:i,normals:a,binormals:o}}},{key:"clone",value:function t(){return(new this.constructor).copy(this)}},{key:"copy",value:function t(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function t(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function t(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),t}(),om=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return ge(this,n),(t=e.call(this)).isEllipseCurve=!0,t.type="EllipseCurve",t.aX=r,t.aY=i,t.xRadius=a,t.yRadius=o,t.aStartAngle=s,t.aEndAngle=l,t.aClockwise=u,t.aRotation=c,t}return _e(n,[{key:"getPoint",value:function t(e,n){for(var r=n||new da,i=2*Math.PI,a=this.aEndAngle-this.aStartAngle,o=Math.abs(a)<Number.EPSILON;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(a=o?0:i),!0!==this.aClockwise||o||(a===i?a=-i:a-=i);var s=this.aStartAngle+e*a,l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return r.set(l,u)}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(am),sm=function(t){le(n,t);var e=ce(n);function n(t,r,i,a,o,s){var l;return ge(this,n),(l=e.call(this,t,r,i,i,a,o,s)).isArcCurve=!0,l.type="ArcCurve",l}return _e(n)}(om);function lm(){var t=0,e=0,n=0,r=0;function i(i,a,o,s){t=i,e=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function t(e,n,r,a,o){i(n,r,o*(r-e),o*(a-n))},initNonuniformCatmullRom:function t(e,n,r,a,o,s,l){var u=(n-e)/o-(r-e)/(o+s)+(r-n)/s,c=(r-n)/s-(a-n)/(s+l)+(a-r)/l;i(n,r,u*=s,c*=s)},calc:function i(a){var o=a*a,s;return t+e*a+n*o+r*(o*a)}}}var um=new Wa,cm=new lm,hm=new lm,fm=new lm,dm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return ge(this,n),(t=e.call(this)).isCatmullRomCurve3=!0,t.type="CatmullRomCurve3",t.points=r,t.closed=i,t.curveType=a,t.tension=o,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,r=n,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s,u,c;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?u=i[(s-1)%a]:(um.subVectors(i[0],i[1]).add(i[0]),u=um);var h=i[s%a],f=i[(s+1)%a];if(this.closed||s+2<a?c=i[(s+2)%a]:(um.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=um),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(u.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(f),d),v=Math.pow(f.distanceToSquared(c),d);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),cm.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,p,m,v),hm.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,p,m,v),fm.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,p,m,v)}else"catmullrom"===this.curveType&&(cm.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),hm.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),fm.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(cm.calc(l),hm.calc(l),fm.calc(l)),r}},{key:"copy",value:function t(e){oe(pe(n.prototype),"copy",this).call(this,e),this.points=[];for(var r=0,i=e.points.length;r<i;r++){var a=e.points[r];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);e.points=[];for(var r=0,i=this.points.length;r<i;r++){var a=this.points[r];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function t(e){oe(pe(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var r=0,i=e.points.length;r<i;r++){var a=e.points[r];this.points.push((new Wa).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(am);function pm(t,e,n,r,i){var a=.5*(r-e),o=.5*(i-n),s=t*t,l;return(2*n-2*r+a+o)*(t*s)+(-3*n+3*r-2*a-o)*s+a*t+n}function mm(t,e){var n=1-t;return n*n*e}function vm(t,e){return 2*(1-t)*t*e}function gm(t,e){return t*t*e}function ym(t,e,n,r){return mm(t,e)+vm(t,n)+gm(t,r)}function _m(t,e){var n=1-t;return n*n*n*e}function xm(t,e){var n=1-t;return 3*n*n*t*e}function bm(t,e){return 3*(1-t)*t*t*e}function wm(t,e){return t*t*t*e}function Mm(t,e,n,r,i){return _m(t,e)+xm(t,n)+bm(t,r)+wm(t,i)}var Sm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new da,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new da,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new da;return ge(this,n),(t=e.call(this)).isCubicBezierCurve=!0,t.type="CubicBezierCurve",t.v0=r,t.v1=i,t.v2=a,t.v3=o,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,r=n,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(Mm(e,i.x,a.x,o.x,s.x),Mm(e,i.y,a.y,o.y,s.y)),r}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(am),Em=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wa,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wa;return ge(this,n),(t=e.call(this)).isCubicBezierCurve3=!0,t.type="CubicBezierCurve3",t.v0=r,t.v1=i,t.v2=a,t.v3=o,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,r=n,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(Mm(e,i.x,a.x,o.x,s.x),Mm(e,i.y,a.y,o.y,s.y),Mm(e,i.z,a.z,o.z,s.z)),r}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(am),Tm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new da,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da;return ge(this,n),(t=e.call(this)).isLineCurve=!0,t.type="LineCurve",t.v1=r,t.v2=i,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,r=n;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}},{key:"getPointAt",value:function t(e,n){return this.getPoint(e,n)}},{key:"getTangent",value:function t(e,n){var r=n||new da;return r.copy(this.v2).sub(this.v1).normalize(),r}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(am),Cm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa;return ge(this,n),(t=e.call(this)).isLineCurve3=!0,t.type="LineCurve3",t.v1=r,t.v2=i,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,r=n;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}},{key:"getPointAt",value:function t(e,n){return this.getPoint(e,n)}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(am),km=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new da,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new da;return ge(this,n),(t=e.call(this)).isQuadraticBezierCurve=!0,t.type="QuadraticBezierCurve",t.v0=r,t.v1=i,t.v2=a,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,r=n,i=this.v0,a=this.v1,o=this.v2;return r.set(ym(e,i.x,a.x,o.x),ym(e,i.y,a.y,o.y)),r}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(am),Am=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wa,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wa;return ge(this,n),(t=e.call(this)).isQuadraticBezierCurve3=!0,t.type="QuadraticBezierCurve3",t.v0=r,t.v1=i,t.v2=a,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wa,r=n,i=this.v0,a=this.v1,o=this.v2;return r.set(ym(e,i.x,a.x,o.x),ym(e,i.y,a.y,o.y),ym(e,i.z,a.z,o.z)),r}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(am),Pm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ge(this,n),(t=e.call(this)).isSplineCurve=!0,t.type="SplineCurve",t.points=r,t}return _e(n,[{key:"getPoint",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new da,r=n,i=this.points,a=(i.length-1)*e,o=Math.floor(a),s=a-o,l=i[0===o?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(pm(s,l.x,u.x,c.x,h.x),pm(s,l.y,u.y,c.y,h.y)),r}},{key:"copy",value:function t(e){oe(pe(n.prototype),"copy",this).call(this,e),this.points=[];for(var r=0,i=e.points.length;r<i;r++){var a=e.points[r];this.points.push(a.clone())}return this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);e.points=[];for(var r=0,i=this.points.length;r<i;r++){var a=this.points[r];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function t(e){oe(pe(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var r=0,i=e.points.length;r<i;r++){var a=e.points[r];this.points.push((new da).fromArray(a))}return this}}]),n}(am),Lm=Object.freeze({__proto__:null,ArcCurve:sm,CatmullRomCurve3:dm,CubicBezierCurve:Sm,CubicBezierCurve3:Em,EllipseCurve:om,LineCurve:Tm,LineCurve3:Cm,QuadraticBezierCurve:km,QuadraticBezierCurve3:Am,SplineCurve:Pm}),Dm=function(t){le(n,t);var e=ce(n);function n(){var t;return ge(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return _e(n,[{key:"add",value:function t(e){this.curves.push(e)}},{key:"closePath",value:function t(){var e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new Tm(n,e))}},{key:"getPoint",value:function t(e,n){for(var r=e*this.getLength(),i=this.getCurveLengths(),a=0;a<i.length;){if(i[a]>=r){var o=i[a]-r,s=this.curves[a],l=s.getLength(),u=0===l?0:1-o/l;return s.getPointAt(u,n)}a++}return null}},{key:"getLength",value:function t(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function t(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function t(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],n=0,r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,n=[],r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}},{key:"getPoints",value:function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r,i=0,a=this.curves;i<a.length;i++)for(var o=a[i],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(s),u=0;u<l.length;u++){var c=l[u];r&&r.equals(c)||(n.push(c),r=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function t(e){oe(pe(n.prototype),"copy",this).call(this,e),this.curves=[];for(var r=0,i=e.curves.length;r<i;r++){var a=e.curves[r];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var r=0,i=this.curves.length;r<i;r++){var a=this.curves[r];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function t(e){oe(pe(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var r=0,i=e.curves.length;r<i;r++){var a=e.curves[r];this.curves.push((new Lm[a.type]).fromJSON(a))}return this}}]),n}(am),Rm=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this)).type="Path",r.currentPoint=new da,t&&r.setFromPoints(t),r}return _e(n,[{key:"setFromPoints",value:function t(e){this.moveTo(e[0].x,e[0].y);for(var n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}},{key:"moveTo",value:function t(e,n){return this.currentPoint.set(e,n),this}},{key:"lineTo",value:function t(e,n){var r=new Tm(this.currentPoint.clone(),new da(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}},{key:"quadraticCurveTo",value:function t(e,n,r,i){var a=new km(this.currentPoint.clone(),new da(e,n),new da(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}},{key:"bezierCurveTo",value:function t(e,n,r,i,a,o){var s=new Sm(this.currentPoint.clone(),new da(e,n),new da(r,i),new da(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}},{key:"splineThru",value:function t(e){var n=[this.currentPoint.clone()].concat(e),r=new Pm(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function t(e,n,r,i,a,o){var s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,n+l,r,i,a,o),this}},{key:"absarc",value:function t(e,n,r,i,a,o){return this.absellipse(e,n,r,r,i,a,o),this}},{key:"ellipse",value:function t(e,n,r,i,a,o,s,l){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,r,i,a,o,s,l),this}},{key:"absellipse",value:function t(e,n,r,i,a,o,s,l){var u=new om(e,n,r,i,a,o,s,l);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var h=u.getPoint(1);return this.currentPoint.copy(h),this}},{key:"copy",value:function t(e){return oe(pe(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function t(e){return oe(pe(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Dm),Im=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new da(0,-.5),new da(.5,0),new da(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ge(this,n),(t=e.call(this)).type="LatheGeometry",t.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=Zi(o,0,2*Math.PI);for(var s=[],l=[],u=[],c=[],h=[],f=1/i,d=new Wa,p=new da,m=new Wa,v=new Wa,g=new Wa,y=0,_=0,x=0;x<=r.length-1;x++)switch(x){case 0:y=r[x+1].x-r[x].x,_=r[x+1].y-r[x].y,m.x=1*_,m.y=-y,m.z=0*_,g.copy(m),m.normalize(),c.push(m.x,m.y,m.z);break;case r.length-1:c.push(g.x,g.y,g.z);break;default:y=r[x+1].x-r[x].x,_=r[x+1].y-r[x].y,m.x=1*_,m.y=-y,m.z=0*_,v.copy(m),m.x+=g.x,m.y+=g.y,m.z+=g.z,m.normalize(),c.push(m.x,m.y,m.z),g.copy(v)}for(var b=0;b<=i;b++)for(var w=a+b*f*o,M=Math.sin(w),S=Math.cos(w),E=0;E<=r.length-1;E++){d.x=r[E].x*M,d.y=r[E].y,d.z=r[E].x*S,l.push(d.x,d.y,d.z),p.x=b/i,p.y=E/(r.length-1),u.push(p.x,p.y);var T=c[3*E+0]*M,C=c[3*E+1],k=c[3*E+0]*S;h.push(T,C,k)}for(var A=0;A<i;A++)for(var P=0;P<r.length-1;P++){var L=P+A*r.length,D=L,R=L+r.length,I=L+r.length+1,N=L+1;s.push(D,R,N),s.push(I,N,R)}return t.setIndex(s),t.setAttribute("position",new ys(l,3)),t.setAttribute("uv",new ys(u,2)),t.setAttribute("normal",new ys(h,3)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(Cs),Nm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;ge(this,n);var s=new Rm;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(t=e.call(this,s.getPoints(a),o)).type="CapsuleGeometry",t.parameters={radius:r,height:i,capSegments:a,radialSegments:o},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(Im),Om=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ge(this,n),(t=e.call(this)).type="CircleGeometry",t.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],l=[],u=[],c=[],h=new Wa,f=new da;l.push(0,0,0),u.push(0,0,1),c.push(.5,.5);for(var d=0,p=3;d<=i;d++,p+=3){var m=a+d/i*o;h.x=r*Math.cos(m),h.y=r*Math.sin(m),l.push(h.x,h.y,h.z),u.push(0,0,1),f.x=(l[p]/r+1)/2,f.y=(l[p+1]/r+1)/2,c.push(f.x,f.y)}for(var v=1;v<=i;v++)s.push(v,v+1,0);return t.setIndex(s),t.setAttribute("position",new ys(l,3)),t.setAttribute("normal",new ys(u,3)),t.setAttribute("uv",new ys(c,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(Cs),Fm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;ge(this,n),(t=e.call(this)).type="CylinderGeometry",t.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:c};var h=fe(t);o=Math.floor(o),s=Math.floor(s);var f=[],d=[],p=[],m=[],v=0,g=[],y=a/2,_=0;function x(){for(var t=new Wa,e=new Wa,n=0,l=(i-r)/a,x=0;x<=s;x++){for(var b=[],w=x/s,M=w*(i-r)+r,S=0;S<=o;S++){var E=S/o,T=E*c+u,C=Math.sin(T),k=Math.cos(T);e.x=M*C,e.y=-w*a+y,e.z=M*k,d.push(e.x,e.y,e.z),t.set(C,l,k).normalize(),p.push(t.x,t.y,t.z),m.push(E,1-w),b.push(v++)}g.push(b)}for(var A=0;A<o;A++)for(var P=0;P<s;P++){var L=g[P][A],D=g[P+1][A],R=g[P+1][A+1],I=g[P][A+1];f.push(L,D,I),f.push(D,R,I),n+=6}h.addGroup(_,n,0),_+=n}function b(t){for(var e=v,n=new da,a=new Wa,s=0,l=!0===t?r:i,g=!0===t?1:-1,x=1;x<=o;x++)d.push(0,y*g,0),p.push(0,g,0),m.push(.5,.5),v++;for(var b=v,w=0;w<=o;w++){var M,S=w/o*c+u,E=Math.cos(S),T=Math.sin(S);a.x=l*T,a.y=y*g,a.z=l*E,d.push(a.x,a.y,a.z),p.push(0,g,0),n.x=.5*E+.5,n.y=.5*T*g+.5,m.push(n.x,n.y),v++}for(var C=0;C<o;C++){var k=e+C,A=b+C;!0===t?f.push(A,A+1,k):f.push(A+1,A,k),s+=3}h.addGroup(_,s,!0===t?1:2),_+=s}return x(),!1===l&&(r>0&&b(!0),i>0&&b(!1)),t.setIndex(f),t.setAttribute("position",new ys(d,3)),t.setAttribute("normal",new ys(p,3)),t.setAttribute("uv",new ys(m,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Cs),zm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return ge(this,n),(t=e.call(this,0,r,i,a,o,s,l,u)).type="ConeGeometry",t.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Fm),Um=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ge(this,n),(t=e.call(this)).type="PolyhedronGeometry",t.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],l=[];function u(t){for(var e=new Wa,n=new Wa,r=new Wa,a=0;a<i.length;a+=3)m(i[a+0],e),m(i[a+1],n),m(i[a+2],r),c(e,n,r,t)}function c(t,e,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=t.clone().lerp(n,o/i),l=e.clone().lerp(n,o/i),u=i-o,c=0;c<=u;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(l,c/u)}for(var h=0;h<i;h++)for(var f=0;f<2*(i-h)-1;f++){var d=Math.floor(f/2);f%2==0?(p(a[h][d+1]),p(a[h+1][d]),p(a[h][d])):(p(a[h][d+1]),p(a[h+1][d+1]),p(a[h+1][d]))}}function h(t){for(var e=new Wa,n=0;n<s.length;n+=3)e.x=s[n+0],e.y=s[n+1],e.z=s[n+2],e.normalize().multiplyScalar(t),s[n+0]=e.x,s[n+1]=e.y,s[n+2]=e.z}function f(){for(var t=new Wa,e=0;e<s.length;e+=3){t.x=s[e+0],t.y=s[e+1],t.z=s[e+2];var n=y(t)/2/Math.PI+.5,r=_(t)/Math.PI+.5;l.push(n,1-r)}v(),d()}function d(){for(var t=0;t<l.length;t+=6){var e=l[t+0],n=l[t+2],r=l[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(l[t+0]+=1),n<.2&&(l[t+2]+=1),r<.2&&(l[t+4]+=1))}}function p(t){s.push(t.x,t.y,t.z)}function m(t,e){var n=3*t;e.x=r[n+0],e.y=r[n+1],e.z=r[n+2]}function v(){for(var t=new Wa,e=new Wa,n=new Wa,r=new Wa,i=new da,a=new da,o=new da,u=0,c=0;u<s.length;u+=9,c+=6){t.set(s[u+0],s[u+1],s[u+2]),e.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),i.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),r.copy(t).add(e).add(n).divideScalar(3);var h=y(r);g(i,c+0,t,h),g(a,c+2,e,h),g(o,c+4,n,h)}}function g(t,e,n,r){r<0&&1===t.x&&(l[e]=t.x-1),0===n.x&&0===n.z&&(l[e]=r/2/Math.PI+.5)}function y(t){return Math.atan2(t.z,-t.x)}function _(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}return u(o),h(a),f(),t.setAttribute("position",new ys(s,3)),t.setAttribute("normal",new ys(s.slice(),3)),t.setAttribute("uv",new ys(l,2)),0===o?t.computeVertexNormals():t.normalizeNormals(),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(Cs),Vm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(t=e.call(this,s,l,r,i)).type="DodecahedronGeometry",t.parameters={radius:r,detail:i},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.detail)}}]),n}(Um),Bm=new Wa,Hm=new Wa,Gm=new Wa,Wm=new rs,Zm=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(ge(this,n),(t=e.call(this)).type="EdgesGeometry",t.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=4,o=Math.pow(10,a),s=Math.cos(Hi*i),l=r.getIndex(),u=r.getAttribute("position"),c=l?l.count:u.count,h=[0,0,0],f=["a","b","c"],d=new Array(3),p={},m=[],v=0;v<c;v+=3){l?(h[0]=l.getX(v),h[1]=l.getX(v+1),h[2]=l.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);var g=Wm.a,y=Wm.b,_=Wm.c;if(g.fromBufferAttribute(u,h[0]),y.fromBufferAttribute(u,h[1]),_.fromBufferAttribute(u,h[2]),Wm.getNormal(Gm),d[0]="".concat(Math.round(g.x*o),",").concat(Math.round(g.y*o),",").concat(Math.round(g.z*o)),d[1]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),d[2]="".concat(Math.round(_.x*o),",").concat(Math.round(_.y*o),",").concat(Math.round(_.z*o)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var x=0;x<3;x++){var b=(x+1)%3,w=d[x],M=d[b],S=Wm[f[x]],E=Wm[f[b]],T="".concat(w,"_").concat(M),C="".concat(M,"_").concat(w);C in p&&p[C]?(Gm.dot(p[C].normal)<=s&&(m.push(S.x,S.y,S.z),m.push(E.x,E.y,E.z)),p[C]=null):T in p||(p[T]={index0:h[x],index1:h[b],normal:Gm.clone()})}}for(var k in p)if(p[k]){var A=p[k],P=A.index0,L=A.index1;Bm.fromBufferAttribute(u,P),Hm.fromBufferAttribute(u,L),m.push(Bm.x,Bm.y,Bm.z),m.push(Hm.x,Hm.y,Hm.z)}t.setAttribute("position",new ys(m,3))}return t}return _e(n)}(Cs),jm=function(t){le(n,t);var e=ce(n);function n(t){var r;return ge(this,n),(r=e.call(this,t)).uuid=Wi(),r.type="Shape",r.holes=[],r}return _e(n,[{key:"getPointsHoles",value:function t(e){for(var n=[],r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}},{key:"extractPoints",value:function t(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function t(e){oe(pe(n.prototype),"copy",this).call(this,e),this.holes=[];for(var r=0,i=e.holes.length;r<i;r++){var a=e.holes[r];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var r=0,i=this.holes.length;r<i;r++){var a=this.holes[r];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function t(e){oe(pe(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var r=0,i=e.holes.length;r<i;r++){var a=e.holes[r];this.holes.push((new Rm).fromJSON(a))}return this}}]),n}(Rm),qm=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=n&&n.length,a=i?n[0]*r:e.length,o=Xm(e,0,a,r,!0),s=[],l,u,c,h,f,d,p;if(!o||o.next===o.prev)return s;if(i&&(o=ev(e,n,o,r)),e.length>80*r){l=c=e[0],u=h=e[1];for(var m=r;m<a;m+=r)(f=e[m])<l&&(l=f),(d=e[m+1])<u&&(u=d),f>c&&(c=f),d>h&&(h=d);p=0!==(p=Math.max(c-l,h-u))?32767/p:0}return Km(o,s,r,l,u,p,0),s};function Xm(t,e,n,r,i){var a,o;if(i===Sv(t,e,n,r)>0)for(a=e;a<n;a+=r)o=bv(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=bv(a,t[a],t[a+1],o);return o&&dv(o,o.next)&&(wv(o),o=o.next),o}function Ym(t,e){if(!t)return t;e||(e=t);var n=t,r;do{if(r=!1,n.steiner||!dv(n,n.next)&&0!==fv(n.prev,n,n.next))n=n.next;else{if(wv(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Km(t,e,n,r,i,a,o){if(t){!o&&a&&ov(t,r,i,a);for(var s=t,l,u;t.prev!==t.next;)if(l=t.prev,u=t.next,a?Qm(t,r,i,a):Jm(t))e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),wv(t),t=u.next,s=u.next;else if((t=u)===s){o?1===o?Km(t=$m(Ym(t),e,n),e,n,r,i,a,2):2===o&&tv(t,e,n,r,i,a):Km(Ym(t),e,n,r,i,a,1);break}}}function Jm(t){var e=t.prev,n=t,r=t.next;if(fv(e,n,r)>=0)return!1;for(var i=e.x,a=n.x,o=r.x,s=e.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,f=i>a?i>o?i:o:a>o?a:o,d=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==e;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&cv(i,s,a,l,o,u,p.x,p.y)&&fv(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Qm(t,e,n,r){var i=t.prev,a=t,o=t.next;if(fv(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,f=o.y,d=s<l?s<u?s:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,m=s>l?s>u?s:u:l>u?l:u,v=c>h?c>f?c:f:h>f?h:f,g=lv(d,p,e,n,r),y=lv(m,v,e,n,r),_=t.prevZ,x=t.nextZ;_&&_.z>=g&&x&&x.z<=y;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&cv(s,c,l,h,u,f,_.x,_.y)&&fv(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&cv(s,c,l,h,u,f,x.x,x.y)&&fv(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&cv(s,c,l,h,u,f,_.x,_.y)&&fv(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&cv(s,c,l,h,u,f,x.x,x.y)&&fv(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function $m(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!dv(i,a)&&pv(i,r,r.next,a)&&yv(i,a)&&yv(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),wv(r),wv(r.next),r=t=a),r=r.next}while(r!==t);return Ym(r)}function tv(t,e,n,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&hv(o,s)){var l=xv(o,s);return o=Ym(o,o.next),l=Ym(l,l.next),Km(o,e,n,r,i,a,0),void Km(l,e,n,r,i,a,0)}s=s.next}o=o.next}while(o!==t)}function ev(t,e,n,r){var i=[],a,o,s,l,u;for(a=0,o=e.length;a<o;a++)(u=Xm(t,s=e[a]*r,l=a<o-1?e[a+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),i.push(uv(u));for(i.sort(nv),a=0;a<i.length;a++)n=rv(i[a],n);return n}function nv(t,e){return t.x-e.x}function rv(t,e){var n=iv(t,e);if(!n)return e;var r=xv(n,t);return Ym(r,r.next),Ym(n,n.next)}function iv(t,e){var n=e,r=-1/0,i,a=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=a&&s>r&&(r=s,i=n.x<n.next.x?n:n.next,s===a))return i}n=n.next}while(n!==e);if(!i)return null;var l=i,u=i.x,c=i.y,h=1/0,f;n=i;do{a>=n.x&&n.x>=u&&a!==n.x&&cv(o<c?a:r,o,u,c,o<c?r:a,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(a-n.x),yv(n,t)&&(f<h||f===h&&(n.x>i.x||n.x===i.x&&av(i,n)))&&(i=n,h=f)),n=n.next}while(n!==l);return i}function av(t,e){return fv(t.prev,t,e.prev)<0&&fv(e.next,t,t.next)<0}function ov(t,e,n,r){var i=t;do{0===i.z&&(i.z=lv(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,sv(i)}function sv(t){var e,n,r,i,a,o,s,l,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1);return t}function lv(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function uv(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function cv(t,e,n,r,i,a,o,s){return(i-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(r-s)>=(n-o)*(e-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function hv(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!gv(t,e)&&(yv(t,e)&&yv(e,t)&&_v(t,e)&&(fv(t.prev,t,e.prev)||fv(t,e.prev,e))||dv(t,e)&&fv(t.prev,t,t.next)>0&&fv(e.prev,e,e.next)>0)}function fv(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function dv(t,e){return t.x===e.x&&t.y===e.y}function pv(t,e,n,r){var i=vv(fv(t,e,n)),a=vv(fv(t,e,r)),o=vv(fv(n,r,t)),s=vv(fv(n,r,e));return i!==a&&o!==s||(!(0!==i||!mv(t,n,e))||(!(0!==a||!mv(t,r,e))||(!(0!==o||!mv(n,t,r))||!(0!==s||!mv(n,e,r)))))}function mv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function vv(t){return t>0?1:t<0?-1:0}function gv(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&pv(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function yv(t,e){return fv(t.prev,t,t.next)<0?fv(t,e,t.next)>=0&&fv(t,t.prev,e)>=0:fv(t,e,t.prev)<0||fv(t,t.next,e)<0}function _v(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function xv(t,e){var n=new Mv(t.i,t.x,t.y),r=new Mv(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function bv(t,e,n,r){var i=new Mv(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wv(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Mv(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sv(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}var Ev=function(){function t(){ge(this,t)}return _e(t,null,[{key:"area",value:function t(e){for(var n=e.length,r=0,i=n-1,a=0;a<n;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return.5*r}},{key:"isClockWise",value:function e(n){return t.area(n)<0}},{key:"triangulateShape",value:function t(e,n){var r=[],i=[],a=[];Tv(e),Cv(r,e);var o=e.length;n.forEach(Tv);for(var s=0;s<n.length;s++)i.push(o),o+=n[s].length,Cv(r,n[s]);for(var l=qm(r,i),u=0;u<l.length;u+=3)a.push(l.slice(u,u+3));return a}}]),t}();function Tv(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Cv(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var kv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jm([new da(.5,.5),new da(-.5,.5),new da(-.5,-.5),new da(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge(this,n),(t=e.call(this)).type="ExtrudeGeometry",t.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=fe(t),o=[],s=[],l=0,u=r.length;l<u;l++){var c=r[l];h(c)}function h(t){var e=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,l=void 0!==i.depth?i.depth:1,u=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:c-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,m=void 0!==i.UVGenerator?i.UVGenerator:Av,v,g=!1,y,_,x,b;p&&(v=p.getSpacedPoints(r),g=!0,u=!1,y=p.computeFrenetFrames(r,!1),_=new Wa,x=new Wa,b=new Wa),u||(d=0,c=0,h=0,f=0);var w=t.extractPoints(n),M=w.shape,S=w.holes,E;if(!Ev.isClockWise(M)){M=M.reverse();for(var T=0,C=S.length;T<C;T++){var k=S[T];Ev.isClockWise(k)&&(S[T]=k.reverse())}}for(var A=Ev.triangulateShape(M,S),P=M,L=0,D=S.length;L<D;L++){var R=S[L];M=M.concat(R)}function I(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var N=M.length,O=A.length;function F(t,e,n){var r,i,a,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=e.x-s/f,m=e.y+o/f,v,g,y=((n.x-u/d-p)*u-(n.y+l/d-m)*l)/(o*u-s*l),_=(r=p+o*y-t.x)*r+(i=m+s*y-t.y)*i;if(_<=2)return new da(r,i);a=Math.sqrt(_/2)}else{var x=!1;o>Number.EPSILON?l>Number.EPSILON&&(x=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(u)&&(x=!0),x?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new da(r/a,i/a)}for(var z=[],U=0,V=P.length,B=V-1,H=U+1;U<V;U++,B++,H++)B===V&&(B=0),H===V&&(H=0),z[U]=F(P[U],P[B],P[H]);for(var G=[],W,Z=z.concat(),j=0,q=S.length;j<q;j++){var X=S[j];W=[];for(var Y=0,K=X.length,J=K-1,Q=Y+1;Y<K;Y++,J++,Q++)J===K&&(J=0),Q===K&&(Q=0),W[Y]=F(X[Y],X[J],X[Q]);G.push(W),Z=Z.concat(W)}for(var $=0;$<d;$++){for(var tt=$/d,et=c*Math.cos(tt*Math.PI/2),nt=h*Math.sin(tt*Math.PI/2)+f,rt=0,it=P.length;rt<it;rt++){var at=I(P[rt],z[rt],nt);It(at.x,at.y,-et)}for(var ot=0,st=S.length;ot<st;ot++){var lt=S[ot];W=G[ot];for(var ut=0,ct=lt.length;ut<ct;ut++){var ht=I(lt[ut],W[ut],nt);It(ht.x,ht.y,-et)}}}for(var ft=h+f,dt=0;dt<N;dt++){var pt=u?I(M[dt],Z[dt],ft):M[dt];g?(x.copy(y.normals[0]).multiplyScalar(pt.x),_.copy(y.binormals[0]).multiplyScalar(pt.y),b.copy(v[0]).add(x).add(_),It(b.x,b.y,b.z)):It(pt.x,pt.y,0)}for(var mt=1;mt<=r;mt++)for(var vt=0;vt<N;vt++){var gt=u?I(M[vt],Z[vt],ft):M[vt];g?(x.copy(y.normals[mt]).multiplyScalar(gt.x),_.copy(y.binormals[mt]).multiplyScalar(gt.y),b.copy(v[mt]).add(x).add(_),It(b.x,b.y,b.z)):It(gt.x,gt.y,l/r*mt)}for(var yt=d-1;yt>=0;yt--){for(var _t=yt/d,xt=c*Math.cos(_t*Math.PI/2),bt=h*Math.sin(_t*Math.PI/2)+f,wt=0,Mt=P.length;wt<Mt;wt++){var St=I(P[wt],z[wt],bt);It(St.x,St.y,l+xt)}for(var Et=0,Tt=S.length;Et<Tt;Et++){var Ct=S[Et];W=G[Et];for(var kt=0,At=Ct.length;kt<At;kt++){var Pt=I(Ct[kt],W[kt],bt);g?It(Pt.x,Pt.y+v[r-1].y,v[r-1].x+xt):It(Pt.x,Pt.y,l+xt)}}}function Lt(){var t=o.length/3;if(u){for(var e=0,n=N*e,i=0;i<O;i++){var s=A[i];Nt(s[2]+n,s[1]+n,s[0]+n)}n=N*(e=r+2*d);for(var l=0;l<O;l++){var c=A[l];Nt(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<O;h++){var f=A[h];Nt(f[2],f[1],f[0])}for(var p=0;p<O;p++){var m=A[p];Nt(m[0]+N*r,m[1]+N*r,m[2]+N*r)}}a.addGroup(t,o.length/3-t,0)}function Dt(){var t=o.length/3,e=0;Rt(P,e),e+=P.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Rt(i,e),e+=i.length}a.addGroup(t,o.length/3-t,1)}function Rt(t,e){for(var n=t.length;--n>=0;){var i=n,a=n-1;a<0&&(a=t.length-1);for(var o=0,s=r+2*d;o<s;o++){var l=N*o,u=N*(o+1),c,h,f,p;Ot(e+i+l,e+a+l,e+a+u,e+i+u)}}}function It(t,n,r){e.push(t),e.push(n),e.push(r)}function Nt(t,e,n){Ft(t),Ft(e),Ft(n);var r=o.length/3,i=m.generateTopUV(a,o,r-3,r-2,r-1);zt(i[0]),zt(i[1]),zt(i[2])}function Ot(t,e,n,r){Ft(t),Ft(e),Ft(r),Ft(e),Ft(n),Ft(r);var i=o.length/3,s=m.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);zt(s[0]),zt(s[1]),zt(s[3]),zt(s[1]),zt(s[2]),zt(s[3])}function Ft(t){o.push(e[3*t+0]),o.push(e[3*t+1]),o.push(e[3*t+2])}function zt(t){s.push(t.x),s.push(t.y)}Lt(),Dt()}return t.setAttribute("position",new ys(o,3)),t.setAttribute("uv",new ys(s,2)),t.computeVertexNormals(),t}return _e(n,[{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this),r,i;return Pv(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function t(e,r){for(var i=[],a=0,o=e.shapes.length;a<o;a++){var s=r[e.shapes[a]];i.push(s)}var l=e.options.extrudePath;return void 0!==l&&(e.options.extrudePath=(new Lm[l.type]).fromJSON(l)),new n(i,e.options)}}]),n}(Cs),Av={generateTopUV:function t(e,n,r,i,a){var o=n[3*r],s=n[3*r+1],l=n[3*i],u=n[3*i+1],c=n[3*a],h=n[3*a+1];return[new da(o,s),new da(l,u),new da(c,h)]},generateSideWallUV:function t(e,n,r,i,a,o){var s=n[3*r],l=n[3*r+1],u=n[3*r+2],c=n[3*i],h=n[3*i+1],f=n[3*i+2],d=n[3*a],p=n[3*a+1],m=n[3*a+2],v=n[3*o],g=n[3*o+1],y=n[3*o+2];return Math.abs(l-h)<Math.abs(s-c)?[new da(s,1-u),new da(c,1-f),new da(d,1-m),new da(v,1-y)]:[new da(l,1-u),new da(h,1-f),new da(p,1-m),new da(g,1-y)]}};function Pv(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}var Lv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(t=e.call(this,o,s,r,i)).type="IcosahedronGeometry",t.parameters={radius:r,detail:i},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.detail)}}]),n}(Um),Dv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(t=e.call(this,a,o,r,i)).type="OctahedronGeometry",t.parameters={radius:r,detail:i},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.detail)}}]),n}(Um),Rv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;ge(this,n),(t=e.call(this)).type="RingGeometry",t.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a);for(var u=[],c=[],h=[],f=[],d=r,p=(i-r)/(o=Math.max(1,o)),m=new Wa,v=new da,g=0;g<=o;g++){for(var y=0;y<=a;y++){var _=s+y/a*l;m.x=d*Math.cos(_),m.y=d*Math.sin(_),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/i+1)/2,v.y=(m.y/i+1)/2,f.push(v.x,v.y)}d+=p}for(var x=0;x<o;x++)for(var b=x*(a+1),w=0;w<a;w++){var M=w+b,S=M,E=M+a+1,T=M+a+2,C=M+1;u.push(S,E,C),u.push(E,T,C)}return t.setIndex(u),t.setAttribute("position",new ys(c,3)),t.setAttribute("normal",new ys(h,3)),t.setAttribute("uv",new ys(f,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(Cs),Iv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jm([new da(0,.5),new da(-.5,-.5),new da(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;ge(this,n),(t=e.call(this)).type="ShapeGeometry",t.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(r))f(r);else for(var h=0;h<r.length;h++)f(r[h]),t.addGroup(u,c,h),u+=c,c=0;function f(t){var e=o.length/3,n=t.extractPoints(i),r=n.shape,u=n.holes;!1===Ev.isClockWise(r)&&(r=r.reverse());for(var h=0,f=u.length;h<f;h++){var d=u[h];!0===Ev.isClockWise(d)&&(u[h]=d.reverse())}for(var p=Ev.triangulateShape(r,u),m=0,v=u.length;m<v;m++){var g=u[m];r=r.concat(g)}for(var y=0,_=r.length;y<_;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var b=0,w=p.length;b<w;b++){var M=p[b],S=M[0]+e,E=M[1]+e,T=M[2]+e;a.push(S,E,T),c+=3}}return t.setIndex(a),t.setAttribute("position",new ys(o,3)),t.setAttribute("normal",new ys(s,3)),t.setAttribute("uv",new ys(l,2)),t}return _e(n,[{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this),r;return Nv(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function t(e,r){for(var i=[],a=0,o=e.shapes.length;a<o;a++){var s=r[e.shapes[a]];i.push(s)}return new n(i,e.curveSegments)}}]),n}(Cs);function Nv(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}var Ov=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;ge(this,n),(t=e.call(this)).type="SphereGeometry",t.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(l+u,Math.PI),h=0,f=[],d=new Wa,p=new Wa,m=[],v=[],g=[],y=[],_=0;_<=a;_++){var x=[],b=_/a,w=0;0==_&&0==l?w=.5/i:_==a&&c==Math.PI&&(w=-.5/i);for(var M=0;M<=i;M++){var S=M/i;d.x=-r*Math.cos(o+S*s)*Math.sin(l+b*u),d.y=r*Math.cos(l+b*u),d.z=r*Math.sin(o+S*s)*Math.sin(l+b*u),v.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(S+w,1-b),x.push(h++)}f.push(x)}for(var E=0;E<a;E++)for(var T=0;T<i;T++){var C=f[E][T+1],k=f[E][T],A=f[E+1][T],P=f[E+1][T+1];(0!==E||l>0)&&m.push(C,k,P),(E!==a-1||c<Math.PI)&&m.push(k,A,P)}return t.setIndex(m),t.setAttribute("position",new ys(v,3)),t.setAttribute("normal",new ys(g,3)),t.setAttribute("uv",new ys(y,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(Cs),Fv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(t=e.call(this,a,o,r,i)).type="TetrahedronGeometry",t.parameters={radius:r,detail:i},t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.detail)}}]),n}(Um),zv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;ge(this,n),(t=e.call(this)).type="TorusGeometry",t.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],u=[],c=[],h=[],f=new Wa,d=new Wa,p=new Wa,m=0;m<=a;m++)for(var v=0;v<=o;v++){var g=v/o*s,y=m/a*Math.PI*2;d.x=(r+i*Math.cos(y))*Math.cos(g),d.y=(r+i*Math.cos(y))*Math.sin(g),d.z=i*Math.sin(y),u.push(d.x,d.y,d.z),f.x=r*Math.cos(g),f.y=r*Math.sin(g),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(v/o),h.push(m/a)}for(var _=1;_<=a;_++)for(var x=1;x<=o;x++){var b=(o+1)*_+x-1,w=(o+1)*(_-1)+x-1,M=(o+1)*(_-1)+x,S=(o+1)*_+x;l.push(b,w,S),l.push(w,M,S)}return t.setIndex(l),t.setAttribute("position",new ys(u,3)),t.setAttribute("normal",new ys(c,3)),t.setAttribute("uv",new ys(h,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(Cs),Uv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;ge(this,n),(t=e.call(this)).type="TorusKnotGeometry",t.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var u=[],c=[],h=[],f=[],d=new Wa,p=new Wa,m=new Wa,v=new Wa,g=new Wa,y=new Wa,_=new Wa,x=0;x<=a;++x){var b=x/a*s*Math.PI*2;D(b,s,l,r,m),D(b+.01,s,l,r,v),y.subVectors(v,m),_.addVectors(v,m),g.crossVectors(y,_),_.crossVectors(g,y),g.normalize(),_.normalize();for(var w=0;w<=o;++w){var M=w/o*Math.PI*2,S=-i*Math.cos(M),E=i*Math.sin(M);d.x=m.x+(S*_.x+E*g.x),d.y=m.y+(S*_.y+E*g.y),d.z=m.z+(S*_.z+E*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),h.push(p.x,p.y,p.z),f.push(x/a),f.push(w/o)}}for(var T=1;T<=a;T++)for(var C=1;C<=o;C++){var k=(o+1)*(T-1)+(C-1),A=(o+1)*T+(C-1),P=(o+1)*T+C,L=(o+1)*(T-1)+C;u.push(k,A,L),u.push(A,P,L)}function D(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}return t.setIndex(u),t.setAttribute("position",new ys(c,3)),t.setAttribute("normal",new ys(h,3)),t.setAttribute("uv",new ys(f,2)),t}return _e(n,null,[{key:"fromJSON",value:function t(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(Cs),Vv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Am(new Wa(-1,-1,0),new Wa(-1,1,0),new Wa(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ge(this,n),(t=e.call(this)).type="TubeGeometry",t.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var l=r.computeFrenetFrames(i,s);t.tangents=l.tangents,t.normals=l.normals,t.binormals=l.binormals;var u=new Wa,c=new Wa,h=new da,f=new Wa,d=[],p=[],m=[],v=[];function g(){for(var t=0;t<i;t++)y(t);y(!1===s?i:0),x(),_()}function y(t){f=r.getPointAt(t/i,f);for(var e=l.normals[t],n=l.binormals[t],s=0;s<=o;s++){var h=s/o*Math.PI*2,m=Math.sin(h),v=-Math.cos(h);c.x=v*e.x+m*n.x,c.y=v*e.y+m*n.y,c.z=v*e.z+m*n.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=f.x+a*c.x,u.y=f.y+a*c.y,u.z=f.z+a*c.z,d.push(u.x,u.y,u.z)}}function _(){for(var t=1;t<=i;t++)for(var e=1;e<=o;e++){var n=(o+1)*(t-1)+(e-1),r=(o+1)*t+(e-1),a=(o+1)*t+e,s=(o+1)*(t-1)+e;v.push(n,r,s),v.push(r,a,s)}}function x(){for(var t=0;t<=i;t++)for(var e=0;e<=o;e++)h.x=t/i,h.y=e/o,m.push(h.x,h.y)}return g(),t.setIndex(v),t.setAttribute("position",new ys(d,3)),t.setAttribute("normal",new ys(p,3)),t.setAttribute("uv",new ys(m,2)),t}return _e(n,[{key:"toJSON",value:function t(){var e=oe(pe(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function t(e){return new n((new Lm[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(Cs),Bv=function(t){le(n,t);var e=ce(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(ge(this,n),(t=e.call(this)).type="WireframeGeometry",t.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new Wa,s=new Wa;if(null!==r.index){var l=r.attributes.position,u=r.index,c=r.groups;0===c.length&&(c=[{start:0,count:u.count,materialIndex:0}]);for(var h=0,f=c.length;h<f;++h)for(var d=c[h],p=d.start,m=d.count,v=p,g=p+m;v<g;v+=3)for(var y=0;y<3;y++){var _=u.getX(v+y),x=u.getX(v+(y+1)%3);o.fromBufferAttribute(l,_),s.fromBufferAttribute(l,x),!0===Hv(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var b=r.attributes.position,w=0,M=b.count/3;w<M;w++)for(var S=0;S<3;S++){var E=3*w+S,T=3*w+(S+1)%3;o.fromBufferAttribute(b,E),s.fromBufferAttribute(b,T),!0===Hv(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}t.setAttribute("position",new ys(i,3))}return t}return _e(n)}(Cs);function Hv(t,e,n){var r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Gv=Object.freeze({__proto__:null,BoxGeometry:Xs,CapsuleGeometry:Nm,CircleGeometry:Om,ConeGeometry:zm,CylinderGeometry:Fm,DodecahedronGeometry:Vm,EdgesGeometry:Zm,ExtrudeGeometry:kv,IcosahedronGeometry:Lv,LatheGeometry:Im,OctahedronGeometry:Dv,PlaneGeometry:yl,PolyhedronGeometry:Um,RingGeometry:Rv,ShapeGeometry:Iv,SphereGeometry:Ov,TetrahedronGeometry:Fv,TorusGeometry:zv,TorusKnotGeometry:Uv,TubeGeometry:Vv,WireframeGeometry:Bv}),Wv=null,Zv=null,jv=null,qv=null,Xv=null,Yv=null,Kv=null,Jv=null,Qv=null,$v=null;function tg(t,e,n){return ng(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function eg(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function ng(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rg(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function ig(t,e,n){for(var r=t.length,i=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*e,l=0;l!==e;++l)i[o++]=t[s+l];return i}function ag(t,e,n,r){for(var i=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(e.push(a.time),n.push.apply(n,o)),a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(e.push(a.time),o.toArray(n,n.length)),a=t[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(e.push(a.time),n.push(o)),a=t[i++]}while(void 0!==a)}}function og(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],f=0;f<l.times.length;++f){var d=l.times[f]*i;if(!(d<n||d>=r)){c.push(l.times[f]);for(var p=0;p<u;++p)h.push(l.values[f*u+p])}}0!==c.length&&(l.times=eg(c,l.times.constructor),l.values=eg(h,l.values.constructor),o.push(l))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a}function sg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=e/r,o=function e(r){var i=n.tracks[r],o=i.ValueTypeName;if("bool"===o||"string"===o)return"continue";var s=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===o}));if(void 0===s)return"continue";var l=0,u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);var c=0,h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);var f=i.times.length-1,d=void 0,p;if(a<=i.times[0]){var m=l,v=u-l;d=tg(i.values,m,v)}else if(a>=i.times[f]){var g=f*u+l,y=g+u-l;d=tg(i.values,g,y)}else{var _=i.createInterpolant(),x=l,b=u-l;_.evaluate(a),d=tg(_.resultBuffer,x,b)}"quaternion"===o&&(new Ga).fromArray(d).normalize().conjugate().toArray(d);for(var w=s.times.length,M=0;M<w;++M){var S=M*h+c;if("quaternion"===o)Ga.multiplyQuaternionsFlat(s.values,S,d,0,s.values,S);else for(var E=h-2*c,T=0;T<E;++T)s.values[S+T]-=d[T]}},s=0;s<i;++s)var l=o(s);return t.blendMode=Qr,t}var lg=Object.freeze({__proto__:null,arraySlice:tg,convertArray:eg,isTypedArray:ng,getKeyframeOrder:rg,sortedArray:ig,flattenJSON:ag,subclip:og,makeClipAdditive:sg}),ug=function(){function t(e,n,r,i){ge(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return _e(t,[{key:"evaluate",value:function t(e){var n=this.parameterPositions,r=this._cachedIndex,i=n[r],a=n[r-1];t:{e:{var o;n:{r:if(!(e<i)){for(var s=r+2;;){if(void 0===i){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(a=i,e<(i=n[++r]))break e}o=n.length;break n}if(e>=a)break t;var l=n[1];e<l&&(r=2,a=l);for(var u=r-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(i=a,e>=(a=n[--r-1]))break e}o=r,r=0}for(;r<o;){var c=r+o>>>1;e<n[c]?o=c:r=c+1}if(i=n[r],void 0===(a=n[r-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}},{key:"getSettings_",value:function t(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function t(e){for(var n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i,o=0;o!==i;++o)n[o]=r[a+o];return n}},{key:"interpolate_",value:function t(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function t(){}}]),t}(),cg=function(t){le(n,t);var e=ce(n);function n(t,r,i,a){var o;return ge(this,n),(o=e.call(this,t,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Xr,endingEnd:Xr},o}return _e(n,[{key:"intervalChanged_",value:function t(e,n,r){var i=this.parameterPositions,a=e-2,o=e+1,s=i[a],l=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case Yr:a=e,s=2*n-r;break;case Kr:s=n+i[a=i.length-2]-i[a+1];break;default:a=e,s=r}if(void 0===l)switch(this.getSettings_().endingEnd){case Yr:o=e,l=2*r-n;break;case Kr:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}var u=.5*(r-n),c=this.valueSize;this._weightPrev=u/(n-s),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=o*c}},{key:"interpolate_",value:function t(e,n,r,i){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(r-n)/(i-n),m=p*p,v=m*p,g=-f*v+2*f*m-f*p,y=(1+f)*v+(-1.5-2*f)*m+(-.5+f)*p+1,_=(-1-d)*v+(1.5+d)*m+.5*p,x=d*v-d*m,b=0;b!==s;++b)a[b]=g*o[c+b]+y*o[u+b]+_*o[l+b]+x*o[h+b];return a}}]),n}(ug),hg=function(t){le(n,t);var e=ce(n);function n(t,r,i,a){return ge(this,n),e.call(this,t,r,i,a)}return _e(n,[{key:"interpolate_",value:function t(e,n,r,i){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=(r-n)/(i-n),h=1-c,f=0;f!==s;++f)a[f]=o[u+f]*h+o[l+f]*c;return a}}]),n}(ug),fg=function(t){le(n,t);var e=ce(n);function n(t,r,i,a){return ge(this,n),e.call(this,t,r,i,a)}return _e(n,[{key:"interpolate_",value:function t(e){return this.copySampleValue_(e-1)}}]),n}(ug),dg=function(){function t(e,n,r,i){if(ge(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eg(n,this.TimeBufferType),this.values=eg(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return _e(t,[{key:"InterpolantFactoryMethodDiscrete",value:function t(e){return new fg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function t(e){return new hg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function t(e){return new cg(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function t(e){var n;switch(e){case Zr:n=this.InterpolantFactoryMethodDiscrete;break;case jr:n=this.InterpolantFactoryMethodLinear;break;case qr:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}},{key:"getInterpolation",value:function t(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zr;case this.InterpolantFactoryMethodLinear:return jr;case this.InterpolantFactoryMethodSmooth:return qr}}},{key:"getValueSize",value:function t(){return this.values.length/this.times.length}},{key:"shift",value:function t(e){if(0!==e)for(var n=this.times,r=0,i=n.length;r!==i;++r)n[r]+=e;return this}},{key:"scale",value:function t(e){if(1!==e)for(var n=this.times,r=0,i=n.length;r!==i;++r)n[r]*=e;return this}},{key:"trim",value:function t(e,n){for(var r=this.times,i=r.length,a=0,o=i-1;a!==i&&r[a]<e;)++a;for(;-1!==o&&r[o]>n;)--o;if(++o,0!==a||o!==i){a>=o&&(a=(o=Math.max(o,1))-1);var s=this.getValueSize();this.times=tg(r,a,o),this.values=tg(this.values,a*s,o*s)}return this}},{key:"validate",value:function t(){var e=!0,n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,i=this.values,a=r.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,s=0;s!==a;s++){var l=r[s];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(void 0!==i&&ng(i))for(var u=0,c=i.length;u!==c;++u){var h=i[u];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,h),e=!1;break}}return e}},{key:"optimize",value:function t(){for(var e=tg(this.times),n=tg(this.values),r=this.getValueSize(),i=this.getInterpolation()===qr,a=e.length-1,o=1,s=1;s<a;++s){var l=!1,u=e[s],c;if(u!==e[s+1]&&(1!==s||u!==e[0]))if(i)l=!0;else for(var h=s*r,f=h-r,d=h+r,p=0;p!==r;++p){var m=n[h+p];if(m!==n[f+p]||m!==n[d+p]){l=!0;break}}if(l){if(s!==o){e[o]=e[s];for(var v=s*r,g=o*r,y=0;y!==r;++y)n[g+y]=n[v+y]}++o}}if(a>0){e[o]=e[a];for(var _=a*r,x=o*r,b=0;b!==r;++b)n[x+b]=n[_+b];++o}return o!==e.length?(this.times=tg(e,0,o),this.values=tg(n,0,o*r)):(this.times=e,this.values=n),this}},{key:"clone",value:function t(){var e=tg(this.times,0),n=tg(this.values,0),r,i=new(0,this.constructor)(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}],[{key:"toJSON",value:function t(e){var n=e.constructor,r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:eg(e.times,Array),values:eg(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}}]),t}();dg.prototype.TimeBufferType=Float32Array,dg.prototype.ValueBufferType=Float32Array,dg.prototype.DefaultInterpolation=jr;var pg=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(dg);pg.prototype.ValueTypeName="bool",pg.prototype.ValueBufferType=Array,pg.prototype.DefaultInterpolation=Zr,pg.prototype.InterpolantFactoryMethodLinear=void 0,pg.prototype.InterpolantFactoryMethodSmooth=void 0;var mg=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(dg);mg.prototype.ValueTypeName="color";var vg=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(dg);vg.prototype.ValueTypeName="number";var gg=function(t){le(n,t);var e=ce(n);function n(t,r,i,a){return ge(this,n),e.call(this,t,r,i,a)}return _e(n,[{key:"interpolate_",value:function t(e,n,r,i){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-n)/(i-n),u=e*s,c=u+s;u!==c;u+=4)Ga.slerpFlat(a,0,o,u-s,o,u,l);return a}}]),n}(ug),yg=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n,[{key:"InterpolantFactoryMethodLinear",value:function t(e){return new gg(this.times,this.values,this.getValueSize(),e)}}]),n}(dg);yg.prototype.ValueTypeName="quaternion",yg.prototype.DefaultInterpolation=jr,yg.prototype.InterpolantFactoryMethodSmooth=void 0;var _g=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(dg);_g.prototype.ValueTypeName="string",_g.prototype.ValueBufferType=Array,_g.prototype.DefaultInterpolation=Zr,_g.prototype.InterpolantFactoryMethodLinear=void 0,_g.prototype.InterpolantFactoryMethodSmooth=void 0;var xg=function(t){le(n,t);var e=ce(n);function n(){return ge(this,n),e.apply(this,arguments)}return _e(n)}(dg);xg.prototype.ValueTypeName="vector";var bg=null;function wg(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vg;case"vector":case"vector2":case"vector3":case"vector4":return xg;case"color":return mg;case"quaternion":return yg;case"bool":case"boolean":return pg;case"string":return _g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Mg(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=wg(t.type);if(void 0===t.times){var n=[],r=[];ag(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Sg={enabled:!1,files:{},add:function t(e,n){!1!==this.enabled&&(this.files[e]=n)},get:function t(e){if(!1!==this.enabled)return this.files[e]},remove:function t(e){delete this.files[e]},clear:function t(){this.files={}}},Eg=_e((function t(e,n,r){ge(this,t);var i=this,a=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){s++,!1===a&&void 0!==i.onStart&&i.onStart(t,o,s),a=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return l?l(t):t},this.setURLModifier=function(t){return l=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],i=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}})),Tg=new Eg,Cg=null,kg={},Ag=function(t){le(n,t);var e=ce(n);function n(t,r){var i;return ge(this,n),(i=e.call(this,t)).response=r,i}return _e(n)}(Wt(Error)),Pg=null,Lg=null,Dg=null,Rg=null,Ig=null,Ng=null,Og=null,Fg=null,zg=null,Ug=new bo,Vg=new Wa,Bg=new Wa,Hg=null,Gg=null,Wg=null,Zg=new bo,jg=new Wa,qg=new Wa,Xg=null,Yg=null,Kg=null,Jg=null,Qg=null,$g=null,ty=null,ey=null,ny=null,ry=null,iy=null,ay=null,oy=null,sy={UVMapping:kn,CubeReflectionMapping:An,CubeRefractionMapping:Pn,EquirectangularReflectionMapping:Ln,EquirectangularRefractionMapping:Dn,CubeUVReflectionMapping:Rn},ly={RepeatWrapping:In,ClampToEdgeWrapping:Nn,MirroredRepeatWrapping:On},uy={NearestFilter:Fn,NearestMipmapNearestFilter:zn,NearestMipmapLinearFilter:Vn,LinearFilter:Hn,LinearMipmapNearestFilter:Gn,LinearMipmapLinearFilter:Zn},cy=null,hy,fy=null,dy=null,py=null,my=null,vy=new bo,gy=new bo,yy=new bo,_y=null,xy=null;function by(){return("undefined"==typeof performance?Date:performance).now()}var wy=new Wa,My=new Ga,Sy=new Wa,Ey=new Wa,Ty=null,Cy=null,ky=new Wa,Ay=new Ga,Py=new Wa,Ly=new Wa,Dy=null,Ry=null,Iy=null,Ny="\\[\\]\\.:\\/",Oy=new RegExp("[\\[\\]\\.:\\/]","g"),Fy="[^\\[\\]\\.:\\/]",zy="[^"+Ny.replace("\\.","")+"]",Uy,Vy,By,Hy,Gy=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Fy)+/(WCOD+)?/.source.replace("WCOD",zy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fy)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fy)+"$"),Wy=["material","materials","bones","map"],Zy=function(){function t(e,n,r){ge(this,t);var i=r||jy.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}return _e(t,[{key:"getValue",value:function t(e,n){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,n)}},{key:"setValue",value:function t(e,n){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,n)}},{key:"bind",value:function t(){for(var e=this._bindings,n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}},{key:"unbind",value:function t(){for(var e=this._bindings,n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}]),t}(),jy=function(){function t(e,n,r){ge(this,t),this.path=n,this.parsedPath=r||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _e(t,[{key:"_getValue_unavailable",value:function t(){}},{key:"_setValue_unavailable",value:function t(){}},{key:"_getValue_direct",value:function t(e,n){e[n]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function t(e,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)e[n++]=r[i]}},{key:"_getValue_arrayElement",value:function t(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function t(e,n){this.resolvedProperty.toArray(e,n)}},{key:"_setValue_direct",value:function t(e,n){this.targetObject[this.propertyName]=e[n]}},{key:"_setValue_direct_setNeedsUpdate",value:function t(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function t(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function t(e,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=e[n++]}},{key:"_setValue_array_setNeedsUpdate",value:function t(e,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function t(e,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function t(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function t(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function t(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function t(e,n){this.resolvedProperty.fromArray(e,n)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function t(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function t(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function t(e,n){this.bind(),this.getValue(e,n)}},{key:"_setValue_unbound",value:function t(e,n){this.bind(),this.setValue(e,n)}},{key:"bind",value:function e(){var n=this.node,r=this.parsedPath,i=r.objectName,a=r.propertyName,o=r.propertyIndex;if(n||(n=t.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,n){if(i){var s=r.objectIndex;switch(i){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(var l=0;l<n.length;l++)if(n[l].name===s){s=l;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(void 0===n[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[i]}if(void 0!==s){if(void 0===n[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[s]}}var u=n[a];if(void 0!==u){var c=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===a){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[o]&&(o=n.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(h=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}else{var f=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",n)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function t(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function e(n,r,i){return n&&n.isAnimationObjectGroup?new t.Composite(n,r,i):new t(n,r,i)}},{key:"sanitizeNodeName",value:function t(e){return e.replace(/\s/g,"_").replace(Oy,"")}},{key:"parseTrackName",value:function t(e){var n=Gy.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var a=r.nodeName.substring(i+1);-1!==Wy.indexOf(a)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}},{key:"findNode",value:function t(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){var i,a=function t(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===n||i.uuid===n)return i;var a=t(i.children);if(a)return a}return null}(e.children);if(a)return a}return null}}]),t}();jy.Composite=Zy,jy.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jy.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jy.prototype.GetterByBindingType=[jy.prototype._getValue_direct,jy.prototype._getValue_array,jy.prototype._getValue_arrayElement,jy.prototype._getValue_toArray],jy.prototype.SetterByBindingTypeAndVersioning=[[jy.prototype._setValue_direct,jy.prototype._setValue_direct_setNeedsUpdate,jy.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jy.prototype._setValue_array,jy.prototype._setValue_array_setNeedsUpdate,jy.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jy.prototype._setValue_arrayElement,jy.prototype._setValue_arrayElement_setNeedsUpdate,jy.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jy.prototype._setValue_fromArray,jy.prototype._setValue_fromArray_setNeedsUpdate,jy.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var qy=null,Xy=null,Yy=new Float32Array(1),Ky=null,Jy=null,Qy=0,$y=null,t_=null,e_=null,n_=null;function r_(t,e){return t.distance-e.distance}function i_(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r)for(var i=t.children,a=0,o=i.length;a<o;a++)i_(i[a],e,n,!0)}var a_=null,o_=null,s_=new da,l_=null,u_=new Wa,c_=new Wa,h_=null,f_=new Wa,d_=null,p_=new Wa,m_=new bo,v_=new bo,g_=null;function y_(t){var e=[];!0===t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,y_(t.children[n]));return e}var __=null,x_=new Wa,b_=new Aa,w_=new Aa,M_=null,S_=null,E_=null,T_=new Wa,C_=new Wa,k_=new Wa,A_=null,P_=new Wa,L_=new nl,D_=null;function R_(t,e,n,r,i,a,o){P_.set(i,a,o).unproject(r);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],P_.x,P_.y,P_.z)}var I_=new qa,N_=null,O_=null,F_=null,z_=new Wa,U_,V_,B_=null,H_=null,G_=null,W_=Z_();function Z_(){for(var t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64),c=1;c<1024;++c){for(var h=c<<13,f=0;0==(8388608&h);)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[c]=h|f}for(var d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(var p=1;p<31;++p)l[p]=p<<23;l[31]=1199570944,l[32]=2147483648;for(var m=33;m<63;++m)l[m]=2147483648+(m-32<<23);l[63]=3347054592;for(var v=1;v<64;++v)32!==v&&(u[v]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:l,offsetTable:u}}function j_(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Zi(t,-65504,65504),W_.floatView[0]=t;var e=W_.uint32View[0],n=e>>23&511;return W_.baseTable[n]+((8388607&e)>>W_.shiftTable[n])}function q_(t){var e=t>>10;return W_.uint32View[0]=W_.mantissaTable[W_.offsetTable[e]+(1023&t)]+W_.exponentTable[e],W_.floatView[0]}var X_=Object.freeze({__proto__:null,toHalfFloat:j_,fromHalfFloat:q_});function Y_(){console.error("THREE.ImmediateRenderObject has been removed.")}var K_=null,J_=null,Q_=null,$_=null,tx=null,ex=null,nx=null,rx=null,ix=null,ax=null,ox=null,sx=null,lx=null,ux=null,cx=null,hx=null,fx=null,dx=null,px=null,mx=null,vx=null,gx=null;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xe}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xe)}}]);