(function($,Drupal,drupalSettings){'use strict';const euList=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","CH","IS","LI","NO"];window.userTracker={country:null,initialisationComplete:false,euSubdomain:false,getUserCountry:function getUserCountry(){return userTracker.country;},setUserCountry:function setUserCountry(){if(userTracker.initialisationComplete){return;}
let storedCountry=sessionStorage.getItem('userCountry'),locationStatus=$.cookie('location_is_verified');if(storedCountry&&typeof(locationStatus)!=='undefined'&&locationStatus){userTracker.country=storedCountry;userTracker.initialisationComplete=true;$(window).once('locationLoad').trigger('userTracker:load');}
else{var endpoint='http://ip-api.com/json/?fields=countryCode';if(typeof(drupalSettings.apiEndpoint)!=='undefined'&&drupalSettings.apiEndpoint){endpoint=drupalSettings.apiEndpoint;}
var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState===4&&this.status===200){var response=JSON.parse(this.responseText);if(response.countryCode){userTracker.country=response.countryCode;sessionStorage.setItem('userCountry',userTracker.country);userTracker.initialisationComplete=true;$(window).once('locationLoad').trigger('userTracker:load');userTracker.verifyLocation(true);}}};xhr.open('GET',endpoint,true);xhr.send();}
if(typeof(drupalSettings.disableModal)!=='undefined'&&drupalSettings.disableModal){localStorage.setItem('automaticRedirect','accept');}},verifyLocation:function verifyLocation(verified){let domain="."+document.domain;if(verified){$.cookie('location_is_verified',1,{expires:1,path:'/',domain:domain});}
else{$.removeCookie('location_is_verified',{path:'/',domain:domain});}},executeOnCountryLookup:function executeOnCountryLookup(callback,callbackData){if(typeof callback==="function"){if(userTracker.initialisationComplete){callback(callbackData);}
else{$(window).on('userTracker:load',function(){callback(callbackData);});}}}};userTracker.setUserCountry();}(jQuery,Drupal,window.drupalSettings));;(function($,Drupal,drupalSettings){'use strict';function initCountryRedirect(redirects){let country=userTracker.getUserCountry(),redirectData=redirects[country];if(redirectData){let automaticRedirect=localStorage.getItem('automaticRedirect');if(automaticRedirect==='accept'){let targetUrl=redirectData['to'];if(window.location.href!==targetUrl){if(localStorage.getItem('stopRedirect')){console.log('no redirect');}else{window.location.replace(targetUrl);}}}
else if(automaticRedirect==='decline'){$('.block-regional-redirect-block').remove();}
else{injectRedirectModal(redirectData);initRedirectEventListeners(redirectData);}}
else{$('.block-regional-redirect-block').remove();}}
const injectRedirectModal=function(redirectData){let $modalCopy=$('.modal-redirect-copy'),$acceptLink=$('.accept-redirect'),$cancelLink=$('.cancel-redirect'),$rememberBox=$('.form-item-remember-choice label');$modalCopy.once('inject-modal-copy').append(redirectData['modalCopy']);$rememberBox.once('inject-modal-box').text(redirectData['modalBoxText']);$acceptLink.once('inject-accept').val(redirectData['acceptText']);$cancelLink.once('inject-cancel').val(redirectData['cancelText']);$('.regional-redirect-wrapper').removeClass('hidden');};const initRedirectEventListeners=function(redirectData){let $acceptLink=$('.accept-redirect'),$cancelLink=$('.cancel-redirect'),$rememberBox=$('.modal-redirect-remember'),targetUrl=redirectData['to'];$acceptLink.once('accept-redirect-click').click(function(e){e.preventDefault();if($rememberBox.prop('checked')){localStorage.setItem('automaticRedirect','accept');}
else{localStorage.removeItem('automaticRedirect');}
setTimeout(function(){window.location.replace(targetUrl)},200);});$cancelLink.once('cancel-redirect-click').click(function(e){e.preventDefault();if($rememberBox.prop('checked')){localStorage.setItem('automaticRedirect','decline')}
else{localStorage.removeItem('automaticRedirect');}});$('.regional-redirect-wrapper').once('modal-injected').trigger('regionRedirect:load').addClass('modal-injected');};Drupal.behaviors.countryRedirects={attach:function(context,settings){const preInit=function(){if(settings.disableModal==='undefined'){let $redirectModal=$('.regional-redirect-wrapper');if(!$redirectModal.length){return false;}}
let redirects=getRedirects();userTracker.executeOnCountryLookup(initCountryRedirect,redirects);};const getRedirects=function(){if(typeof(settings.crrData)!=='undefined'&&settings.crrData){return settings.crrData;}
return[];};preInit();}};}(jQuery,Drupal,window.drupalSettings));;