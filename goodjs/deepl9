"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[4255],{18544:function(e,t,a){a.d(t,{q:function(){return o}});var r=a(27378),l=a(82486),s=a(49359),n=a(73405);let o=e=>{let{fixed:t,...a}=e;return r.createElement("div",{className:(0,s.Ch)([n.Z.overlay,t&&n.Z.fixed])},r.createElement("div",{className:(0,s.Ch)([n.Z.overlayLoadingIndicator,t&&n.Z.fixed])},r.createElement(l.T,a)))};o.defaultProps={fixed:!1}},24106:function(e,t,a){a.d(t,{v:function(){return d}});var r=a(27378);let l=()=>r.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1C5.02944 1 1 5.02944 1 10C1 14.9706 5.02944 19 10 19ZM10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20ZM10.9582 4.19446H9.33309L9.5316 11.6448H10.7455L10.9582 4.19446ZM9.45453 14.3962L9.45983 14.4023L9.4655 14.408C9.65188 14.5954 9.88257 14.6945 10.1454 14.6945C10.4087 14.6945 10.6381 14.5948 10.8176 14.4022L10.8204 14.3993L10.823 14.3962C10.9946 14.2 11.0832 13.9668 11.0832 13.7069C11.0832 13.4421 10.9972 13.2069 10.8147 13.0226C10.6356 12.8321 10.4073 12.7335 10.1454 12.7335C9.87825 12.7335 9.64437 12.8296 9.46284 13.0226C9.28039 13.2069 9.19434 13.4421 9.19434 13.7069C9.19434 13.9668 9.28295 14.2 9.45453 14.3962Z",fill:"currentColor"})),s=()=>r.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{strokeWidth:"1.5px",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",vectorEffect:"non-scaling-stroke",d:"M8 12L10 10M10 10L12 8M10 10L8 8M10 10L12 12M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z"})),n=()=>r.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10ZM20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10ZM8.47542 13.7057L14.8526 7.35429L14.147 6.64575L8.47542 12.2943L5.35264 9.18421L4.64697 9.89275L8.47542 13.7057Z",fill:"currentColor"}));var o=a(6029);let i={info:r.createElement(l,null),error:r.createElement(s,null),warning:r.createElement(l,null),success:r.createElement(n,null)},c={info:{background:"bg-dark-8",border:"border-neutral-300",icon:"text-dark-4",text:"text-dark-1"},success:{background:"bg-green-100",border:"border-green-200",icon:"text-green-500",text:"text-green-600"},warning:{background:"bg-yellow-100",border:"border-yellow-200",icon:"text-yellow-500",text:"text-yellow-600"},error:{background:"bg-red-100",border:"border-red-200",icon:"text-red-500",text:"text-red-600"}},d=(0,r.forwardRef)((e,t)=>{var a;let{className:l="",type:s="info",hideIcon:n=!1,message:d="",fontSize:u="sm",style:g,onClose:m,closeButtonAriaLabel:y,children:_,...p}=e,{0:E,1:f}=(0,r.useState)("");return(0,r.useEffect)(()=>{f(d)},[d]),r.createElement("div",{ref:t,className:`${c[s].background} ${c[s].border} relative box-border flex w-full flex-row flex-nowrap gap-3 whitespace-normal rounded-[6px] border p-4 ${l}`,style:g,"data-testid":null!==(a=p["data-testid"])&&void 0!==a?a:`${s}-notification`},s&&!n&&r.createElement("div",{className:`${c[s].icon} flex-none align-baseline`},i[s]),r.createElement("div",{role:"error"===s?"alert":"status",className:`${c[s].text} grow text-${u} [&_a]:font-medium [&_a]:underline`,dangerouslySetInnerHTML:{__html:E}}),_,m&&r.createElement("div",{className:"z-[810] flex-none"},r.createElement(o.P,{onClick:m,ariaLabel:null!=y?y:"Close"})))})},4637:function(e,t,a){a.d(t,{z:function(){return i}});var r=a(27378),l=a(59454),s=a(95189),n=a(79394);let o=e=>{let{color:t="rgb(3, 113, 113)",fullWidth:a=!1}=e;return r.createElement(s.l,{className:a?n.Z.fullWidth:"",height:a?"100%":void 0,width:a?"100%":void 0,viewBox:"0 0 23 22"},r.createElement("g",{transform:"matrix(0.593934,0,0,0.593934,3.24442,4.80407)"},r.createElement("path",{d:"M4.123,9.623L11.623,17.123L24.623,4.123",style:{fill:"none",stroke:t,strokeWidth:"3.37px"}})),r.createElement("g",{transform:"matrix(1.23327,0,0,1.23327,-5.2089,-4.13117)"},r.createElement("circle",{cx:"13.776",cy:"12.361",r:"7.504",style:{fill:"none",stroke:t,strokeWidth:"1.62px",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1.5}})))},i=()=>r.createElement("div",{className:l.Z.successOverlay},r.createElement("div",{className:l.Z.successIcon},r.createElement(o,{fullWidth:!0})))},51890:function(e,t,a){a.d(t,{P:function(){return s}});var r=a(27378),l=a(42643);function s(e,t){void 0===t&&(t={reserveScrollBarGap:!0});let a=(0,r.useRef)(),s=(0,r.useCallback)(e=>{a.current=e},[]);return(0,r.useEffect)(()=>(a.current&&(e?(0,l.Qp)(a.current,t):(0,l.tG)(a.current)),()=>(0,l.tP)()),[a.current,e,t.reserveScrollBarGap]),[s]}},42643:function(e,t,a){let r,l;a.d(t,{Qp:function(){return E},tG:function(){return h},tP:function(){return f}});var s=a(4769),n=a(45058);let o=!1;if("undefined"!=typeof window){let e={get passive(){o=!0;return}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}let i=[],c=!1,d=-1,u=e=>i.some(t=>!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))),g=e=>{let t=e||window.event;if(u(t.target))return!0;let a=t.touches.length>1;return!!a||(t.preventDefault&&t.preventDefault(),!1)},m=e=>{if(void 0===l){let t=!!e&&!0===e.reserveScrollBarGap,a=window.innerWidth-document.documentElement.clientWidth;if(t&&a>0){let e=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);l=document.body.style.paddingRight,document.body.style.paddingRight=`${e+a}px`}}void 0===r&&(r=document.body.style.overflow,document.body.style.overflow="hidden")},y=()=>{void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==r&&(document.body.style.overflow=r,r=void 0)},_=e=>!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight,p=(e,t)=>{let a=e.targetTouches[0].clientY-d;if(u(e.target))return!1;let r=t&&0===t.scrollTop&&a>0;if(r)return g(e);let l=_(t)&&a<0;return l?g(e):(e.stopPropagation(),!0)},E=(e,t)=>{if(!e){console.error("[disableBodyScroll] - targetElement must be provided when calling disableBodyScroll on iOS devices.");return}let a=i.some(t=>t.targetElement===e);!a&&(i=[].concat((0,s.Z)(i),[{targetElement:e,options:t||{}}]),(0,n.gn)()?(e.ontouchstart=e=>{let t=1===e.targetTouches.length;t&&(d=e.targetTouches[0].clientY)},e.ontouchmove=t=>{let a=1===t.targetTouches.length;a&&p(t,e)},c||(document.addEventListener("touchmove",g,o?{passive:!1}:void 0),c=!0)):m(t))},f=()=>{(0,n.gn)()?(i.forEach(e=>{e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),c&&(document.removeEventListener("touchmove",g,o?{passive:!1}:void 0),c=!1),d=-1):y(),i=[]},h=e=>{if(!e){console.error("[enableBodyScroll] - targetElement must be provided when calling enableBodyScroll on iOS devices.");return}i=i.filter(t=>t.targetElement!==e),(0,n.gn)()?(e.ontouchstart=null,e.ontouchmove=null,c&&0===i.length&&(document.removeEventListener("touchmove",g,o?{passive:!1}:void 0),c=!1)):i.length||y()}},61756:function(e,t,a){var r=a(27378),l=a(712);let s=e=>r.createElement(l.W,e);s.displayName=l.W.displayName,t.Z=s},29429:function(e,t,a){a.r(t),a.d(t,{GlossaryWrapper:function(){return ty},default:function(){return t_}});var r=a(27378),l=a(41945),s=a(48769),n=a(31326);let o=()=>{let e=(0,n.d)("/translator/glossary");return e};var i=a(74394),c=a(84627),d=a(14512),u=a(57233),g=a(66442);let m=()=>{let e=!!(0,u.bY)("DM-386"),t=!!(0,u.bY)("DM-385");return g.pl?t:!!g.FA||e};var y=function(){let e=(0,l.v9)(e=>e.glossary),t=(0,l.I0)(),a=m(),{translatorInterface:s,isProUser:n,isEnterpriseAccount:o,multipleGlossariesLimit:c}=(0,r.useContext)(d.Z);(0,r.useEffect)(()=>{t((0,i.DK)(!n))},[t,n]);let{0:u,1:g}=(0,r.useState)(null),{0:y,1:_}=(0,r.useState)(null);(0,r.useEffect)(()=>{if(void 0!==e.userIsFree){if(e.userIsFree){s.storageUseLocal(!0),t((0,i.CX)({isEnterprise:!1,useLocal:!0,multipleGlossariesLimit:1,uploadDownloadProDriver:a}));return}g(o),o?(s.storageUseLocal(!0),t((0,i.CX)({isEnterprise:o,useLocal:!0,multipleGlossariesLimit:1,uploadDownloadProDriver:a}))):_(c)}},[e.userIsFree]),(0,r.useEffect)(()=>{null!=y&&(s.storageUseLocal(!1),t((0,i.CX)({isEnterprise:u,useLocal:!1,multipleGlossariesLimit:y,uploadDownloadProDriver:a})))},[y])},_=a(47697),p=a(98333),E=a(38392),f=a(10177),h=a(40096),S=a(56591),v=a(34681),C=a(92647),I=a(89831),b=a(95177);let T={NUMBER_OF_GLOSSARIES:11},w=()=>{let{t:e}=(0,v.$)("glossary"),{requestPlansPage:t,requestProPage:a,webTranslatorCore:s}=(0,r.useContext)(d.Z),n=(0,l.v9)(e=>e.glossary),o=(0,l.v9)(e=>{var t,a;return null===(t=e.privacy)||void 0===t?void 0:null===(a=t.activePrivacyConsent)||void 0===a?void 0:a.includes("COMFORT")}),c=(0,l.I0)();(0,r.useEffect)(()=>{let{langSource:e,langTarget:t}=b.Z.getTranslatorLanguages(s);n.showAdvancedAd&&c((0,i.sc)({type:n.userIsFree?"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_DISPLAYED":"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_DISPLAYED",langSource:e,langTarget:t}))},[n.showAdvancedAd]);let u=()=>{if(c((0,i.bI)(!1)),"undefined"!=typeof window&&o){var e;window.localStorage.setItem("LMT_resumeCheckout",JSON.stringify({...JSON.parse(null!==(e=window.localStorage.getItem("LMT_resumeCheckout"))&&void 0!==e?e:"{}"),pd:T.NUMBER_OF_GLOSSARIES}))}n.userIsFree?a({cta:"customization"}):t({cta:"customization"});let{langSource:r,langTarget:l}=b.Z.getTranslatorLanguages(s);c((0,i.sc)({type:n.userIsFree?"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_PRO_CtA_CLICKED":"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_PRO_CtA_CLICKED",langSource:r,langTarget:l}))},m=()=>{c((0,i.bI)(!1))},y=()=>{m();let{langSource:e,langTarget:t}=b.Z.getTranslatorLanguages(s);c((0,i.sc)({type:n.userIsFree?"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_SECONDARY_BUTTON_CLICKED":"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_SECONDARY_BUTTON_CLICKED",langSource:e,langTarget:t}))};return g.N0?r.createElement(_.T,{open:n.showAdvancedAd,onClose:m},r.createElement(p.t,null),r.createElement(C._,{cancelButtonProps:{onClick:y},cancelButtonText:e("advanced_ad_button_cancel"),closeHandler:y,confirmButtonProps:{onClick:u},confirmButtonText:e("advanced_ad_button_try_pro"),title:e("advanced_ad_headline")},r.createElement("div",null,e("advanced_ad_subtext")),r.createElement(I.ez,null,r.createElement(I.vY,null,e("advanced_ad_bullet_point_1")),n.userIsFree&&r.createElement(I.vY,null,e("advanced_ad_bullet_point_2"))))):r.createElement(_.T,{open:n.showAdvancedAd,onClose:m},r.createElement(p.t,null),r.createElement(E.F,{className:"lmt__glossary_ad_wrapper","data-testid":"glossary-pro-overlay"},r.createElement(f.V.Title,{className:"lmt__glossary_ad_headline"},e("advanced_ad_headline")),r.createElement(f.V.Description,{className:"lmt__glossary_ad_subtext"},e("advanced_ad_subtext")),r.createElement("div",{className:"lmt__glossary_ad_bulletPoints"},r.createElement("div",{className:"lmt__glossary_ad_bulletPoint"},r.createElement("div",{className:"lmt__glossary_ad_checkmark"}),r.createElement("div",{className:"lmt__glossary_ad_text"},e("advanced_ad_bullet_point_1"))),n.userIsFree&&r.createElement("div",{className:"lmt__glossary_ad_bulletPoint"},r.createElement("div",{className:"lmt__glossary_ad_checkmark"}),r.createElement("div",{className:"lmt__glossary_ad_text"},e("advanced_ad_bullet_point_2")))),r.createElement("div",{className:"lmt__glossary_ad_buttons"},r.createElement(h.z,{variant:"contained",color:"secondary",onClick:u,"data-testid":"glossary-ad-learnmore-button"},e("advanced_ad_button_try_pro")),r.createElement("div",{className:"lmt__glossary_ad_buttons__sep"},e("pro_ad_or")),r.createElement(h.z,{className:"cancelButton",variant:"outline",color:"primary",onClick:y,"data-testid":"glossary-ad-back-button"},e("advanced_ad_button_cancel"))),r.createElement(S.i,{onClick:y})))};var L=a(42643);function N(e){let{0:t,1:a}=(0,r.useState)(!0),{0:l,1:s}=(0,r.useState)(!0),{0:n,1:o}=(0,r.useState)(!0),{0:i,1:c}=(0,r.useState)(!0);return(0,r.useEffect)(()=>{a(b.Z.isTextInputEmpty(e));let t=b.Z.hasTextInputValidChars(e),r=b.Z.isTextWithinSizeLimit(e);o(t),c(r),s(t&&r)},[e]),{isTextEmpty:t,isTextValid:l,isTextWithinSizeLimit:i,hasTextInputValidChars:n}}function O(){let{t:e}=(0,v.$)("glossary"),t=(0,l.I0)(),a=(0,l.v9)(e=>e.glossary),{0:s,1:n}=(0,r.useState)(""),{0:o,1:c}=(0,r.useState)(!1),d=(0,r.useMemo)(()=>s.trim(),[s]),{isTextValid:u}=N(d),g=(0,r.useMemo)(()=>o&&u&&d.length>0&&a.glossariesInfo.every(e=>e.name!==d),[o,d,u,a.glossariesInfo]),m=(0,r.useRef)(null);function y(){d&&g&&(t((0,i.Zt)(d)),t((0,i.nh)(!1)),c(!1),t((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_ADD_TOOLTIP_ADD_CLICKED",langSource:a.editorActiveLangPair.langSource,langTarget:a.editorActiveLangPair.langTarget,inputText:d})))}(0,r.useEffect)(()=>{if(a.editorIsNewGlossaryDialogOpen){var e;null===(e=m.current)||void 0===e||e.focus()}else c(!1),n("")},[a.editorIsNewGlossaryDialogOpen]);let _=e=>{"Enter"===e.key?y():"Escape"===e.key&&t((0,i.nh)(null))},p=(0,r.useRef)(null);b.Z.useOnClickOutside(r.useEffect,p,e=>{let r=b.Z.getElementPathClasses(e.target);!r.includes("lmt__glossary_editor_glossaryAddNewWrapper")&&a.editorIsNewGlossaryDialogOpen&&t((0,i.nh)(!1))});let{0:E,1:f}=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(null!=a.userCanHaveMultipleGlossaries){if(a.userCanHaveMultipleGlossaries){let e=a.userMultipleGlossariesLimit>(a.glossariesInfo||[]).length;f(e)}else f(!0)}},[a.userMultipleGlossariesLimit,a.userCanHaveMultipleGlossaries,a.glossariesInfo]),E?r.createElement("div",{className:`lmt__glossary_editor_glossaryAddNewWrapper ${a.editorIsNewGlossaryDialogOpen?"lmt__glossary_dialog--arrow lmt__glossary_dialog--arrow-up":""}`,"data-testid":"new-glossary-root"},r.createElement("button",{type:"button",className:"lmt__glossary__action-button lmt__glossary_editor_glossaryAddNew",onClick:function(){a.editorIsNewGlossaryDialogOpen||t((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_ADD_CUSTOMIZATION_CLICKED",langSource:a.editorActiveLangPair.langSource,langTarget:a.editorActiveLangPair.langTarget})),a.userCanHaveMultipleGlossaries?t((0,i.nh)(!a.editorIsNewGlossaryDialogOpen)):t((0,i.bI)(!0))}},e(a.isDownloadAndUploadEnabled?"create":"add_new_glossary")),r.createElement("div",{ref:p,className:"lmt__glossary_editor_glossaryAddNewDialogWrapper forced-colors-mode-border"},r.createElement("div",{className:`lmt__glossary_editor_glossaryAddNewDialog ${a.editorIsNewGlossaryDialogOpen?"visible":""}`},r.createElement("input",{className:`glossary-input ${o&&!g?"error":""}`,onChange:e=>{c(!0),n(e.target.value)},onKeyDown:_,placeholder:e("name_your_glossary"),"aria-label":e("name_your_glossary"),"aria-invalid":o&&!g,ref:m,type:"text",value:s}),r.createElement("button",{type:"submit",onClick:y,className:`lmt__glossary_editor_glossaryAddNewDialog_addButton ${o&&g?"":"error"}`,disabled:!g},e("glossary_add_button_label"))))):r.createElement(r.Fragment,null)}var A=function(){let{t:e}=(0,v.$)("glossary"),t=(0,l.v9)(e=>e.glossary),a=(0,l.I0)();return Array.isArray(t.glossaryLangPairSets)&&t.glossaryLangPairSets.length>0?r.createElement("div",{className:"lmt__glossary_editor_glossaryDownloadWrapper"},r.createElement("button",{type:"button",className:"lmt__glossary__action-button lmt__glossary_editor_glossaryDownload",onClick:function(){a((0,i.zE)()),a((0,i.sc)({type:"TRANSLATOR_DOWNLOAD_LINK_CLICKED"}))}},e("download"))):r.createElement(r.Fragment,null)},P=function(){let{t:e}=(0,v.$)("glossary"),t=(0,l.v9)(e=>e.glossary),a=(0,l.I0)(),s=m();return r.createElement("div",{className:"lmt__glossary_editor_glossaryUploadWrapper"},r.createElement("button",{type:"button",className:"lmt__glossary__action-button lmt__glossary_editor_glossaryAddNew",onClick:function(){let e=t.userMultipleGlossariesLimit<=1&&t.isDownloadAndUploadEnabled&&!t.editorIsUploadGlossaryDialogOpen&&s;e?a((0,i.zz)()):a((0,i.EJ)()),a((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_UPLOAD_CLICKED"}))}},e("upload")))},R=a(24106);function x(e){let{sourceText:t,targetText:a,testIdPrefix:l}=e,{hasTextInputValidChars:s,isTextWithinSizeLimit:n}=N(t),{hasTextInputValidChars:o,isTextWithinSizeLimit:i}=N(a),{t:c}=(0,v.$)("glossary");return r.createElement(r.Fragment,null,(!s||!o)&&r.createElement("div",{className:"lmt__glossary_textInput--error","data-testid":`${l}-invalid-character-error`},c("editor_invalid_character")),(!n||!i)&&r.createElement("div",{className:"lmt__glossary_textInput--error","data-testid":`${l}-text-too-long-error`},c("editor_input_text_too_long")))}function G(e){let{entry:t,langSource:a,langTarget:s}=e,{languageManagement:n}=(0,r.useContext)(d.Z),{getIsoFormattedLangCodeWithCountryCode:o}=n,c=o(a),u=o(s),g=t.textSource,m=t.textTarget,y=(0,l.v9)(e=>e.glossary),_=(0,r.useRef)(null),p=(0,r.useRef)(null),E=(0,l.I0)();(0,r.useEffect)(()=>{"source"===y.editorEntryInEditModeSide?_.current.focus():"target"===y.editorEntryInEditModeSide&&p.current.focus()},[y.editorEntryInEditModeSide]);let{textSource:f,textTarget:h}=t,{0:S,1:v}=(0,r.useState)(f),{0:C,1:I}=(0,r.useState)(h),{0:T,1:w}=(0,r.useState)(!0),{isTextEmpty:L,isTextValid:O}=N(S),{isTextEmpty:A,isTextValid:P}=N(C);(0,r.useEffect)(()=>{let e=b.Z.wouldUpdatedEntryOverwrite(y.glossaryLangPairSets,t,a,s,S);w(!e&&!L&&!A&&O&&P)},[S,C,L,A,O,P,y.glossaryLangPairSets,t,a,s]);let R=e=>{13===e.keyCode?k():27===e.keyCode&&E((0,i.os)())},G=e=>{v(e.target.value)},D=e=>{I(e.target.value)};function k(){T&&((S!==g||C!==m)&&E((0,i.E8)({langSource:a,langTarget:s,textSource:b.Z.sanitizeTextInput(S),textTarget:b.Z.sanitizeTextInput(C),entryToUpdate:t})),E((0,i.os)()))}let M=(0,r.useRef)(null);return b.Z.useOnClickOutside(r.useEffect,M,e=>{let t=b.Z.getElementPathClasses(e.target);t.includes("lmt__glossary_editorRow_editMode")||E((0,i.os)())}),r.createElement(r.Fragment,null,r.createElement("div",{className:"lmt__glossary_editorRow lmt__glossary_editorRow_editMode","data-testid":"glossary-entry-edit-mode",ref:M},r.createElement("input",{className:`editInput source focus-visible-disabled ${L||O?"":"error"}`,type:"text",lang:c,value:S,onChange:G,onKeyDown:R,ref:_,"data-testid":"glossary-entry-source-input"}),r.createElement("div",{className:"lmt__glossary_arrowRightWrapper"},r.createElement("div",{className:"lmt__glossary_arrowRight"})),r.createElement("input",{className:`editInput target focus-visible-disabled ${A||P?"":"error"}`,type:"text",lang:u,value:C,onChange:D,onKeyDown:R,ref:p,"data-testid":"glossary-entry-target-input"}),r.createElement("button",{type:"submit",onClick:k,className:`lmt__glossary_acceptButton ${T?"":"lmt__glossary_acceptButton--disabled"}`,"data-testid":"glossary-entry-accept-button"},r.createElement("div",{className:"lmt__glossary_editor_checkmark"}))),r.createElement(x,{sourceText:S,targetText:C,testIdPrefix:"glossary-editentry"}))}function D(e){let{entry:t,langSource:a,langTarget:s}=e,n=(0,l.I0)(),{t:o}=(0,v.$)("glossary"),{textSource:c,textTarget:u}=t,{languageManagement:g}=(0,r.useContext)(d.Z),{getIsoFormattedLangCodeWithCountryCode:m}=g,y=(0,l.v9)(e=>e.glossary.glossaryRights),_=b.Z.canEditGlossary(y),p=m(a),E=m(s),f=e=>{_&&(n((0,i.sc)({type:"editEntryClicked",langSource:a,langTarget:s})),n((0,i.jV)(t,e)))},h=()=>{if(!_)return;let{textSource:e,textTarget:r}=t;n((0,i.sc)({type:"removeEntryClicked",langSource:a,langTarget:s})),n((0,i.BX)({langSource:a,langTarget:s,textSource:e,textTarget:r}))};return r.createElement(r.Fragment,null,r.createElement("div",{className:"lmt__glossary_editorRow","data-testid":"glossary-entry"},r.createElement("div",{className:"columnSourceWrapper"},r.createElement("span",{className:"columnSource",lang:p,onClick:()=>f("source"),"data-testid":"glossary-entry-source-text"},c)),r.createElement("div",{className:"lmt__glossary_arrowRightWrapper"},r.createElement("div",{className:"lmt__glossary_arrowRight"})),r.createElement("div",{className:"columnTargetWrapper"},r.createElement("span",{className:"columnTarget",lang:E,onClick:()=>f("target"),"data-testid":"glossary-entry-target-text"},u)),_&&r.createElement(r.Fragment,null,r.createElement("button",{className:"iconButton",onClick:()=>f("source"),title:o("edit"),"data-testid":"glossary-entry-edit-button",type:"button"},r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"currentColor",viewBox:"0, 0, 400,400"},r.createElement("g",{id:"svg"},r.createElement("path",{id:"path0",d:"M266.374 72.000 L 245.227 92.000 150.614 92.000 C 58.667 92.000,56.000 92.225,56.000 100.000 C 56.000 107.754,58.667 108.000,142.875 108.000 L 229.750 108.000 206.000 132.000 L 182.250 156.000 119.125 156.000 C 58.667 156.000,56.000 156.338,56.000 164.000 C 56.000 171.611,58.667 172.000,110.875 172.000 L 165.750 172.000 142.000 196.000 L 118.250 220.000 87.125 220.000 C 58.667 220.000,56.000 220.685,56.000 228.000 C 56.000 235.060,58.667 236.000,78.697 236.000 L 101.395 236.000 92.660 245.297 C 84.422 254.066,50.116 347.449,53.785 351.118 C 54.726 352.059,75.859 346.146,100.748 337.978 L 146.000 323.126 249.000 220.592 C 365.229 104.888,360.973 112.652,327.366 77.654 C 297.714 46.774,293.463 46.380,266.374 72.000 M316.863 86.850 C 342.131 111.738,348.104 101.970,244.005 205.995 L 152.011 297.924 129.043 274.957 L 106.076 251.989 198.005 159.995 C 302.275 55.651,291.758 62.123,316.863 86.850 M136.968 308.337 C 132.519 312.344,79.752 329.086,77.782 327.116 C 76.844 326.177,80.779 311.421,86.527 294.324 L 96.979 263.240 118.457 284.452 C 130.271 296.118,138.601 306.867,136.968 308.337 "})))),r.createElement("button",{className:"iconButton",onClick:h,title:o("delete"),"data-testid":"glossary-entry-delete-button",type:"button"},r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"currentColor",viewBox:"0, 0, 400,400"},r.createElement("g",{id:"svg"},r.createElement("path",{id:"path0",d:"M160.000 45.466 C 4.469 90.972,1.163 304.502,155.252 352.096 C 287.410 392.915,404.506 251.350,341.473 126.960 C 309.358 63.585,226.006 26.153,160.000 45.466 M261.391 69.527 C 393.871 134.343,356.571 333.720,210.207 343.113 C 88.705 350.911,13.360 217.823,82.362 117.288 C 120.961 61.050,200.625 39.797,261.391 69.527 M132.800 132.800 C 128.918 136.682,134.380 144.240,158.851 168.856 L 189.812 200.000 158.851 231.144 C 134.380 255.760,128.918 263.318,132.800 267.200 C 136.682 271.082,144.240 265.620,168.856 241.149 L 200.000 210.188 231.144 241.149 C 255.760 265.620,263.318 271.082,267.200 267.200 C 271.082 263.318,265.620 255.760,241.149 231.144 L 210.188 200.000 241.149 168.856 C 265.620 144.240,271.082 136.682,267.200 132.800 C 263.318 128.918,255.760 134.380,231.144 158.851 L 200.000 189.812 168.856 158.851 C 144.240 134.380,136.682 128.918,132.800 132.800 "})))))))}function k(e){let{entry:t,langSource:a,langTarget:s}=e,n=(0,l.v9)(e=>e.glossary);return r.createElement(r.Fragment,null,t===n.editorEntryInEditMode?r.createElement(G,{entry:t,langSource:a,langTarget:s}):r.createElement(D,{entry:t,langSource:a,langTarget:s}))}let M=e=>{let{langSource:t,langTarget:a,entries:l}=e,s=(0,r.useMemo)(()=>b.Z.sortLangPairSetEntriesCaseInsensitive(l,t),[l,t]);return r.createElement(r.Fragment,null,s.map((e,l)=>r.createElement(k,{entry:e,langSource:t,langTarget:a,key:l})))},Z=e=>{let{langPairSet:t}=e,{t:a}=(0,v.$)("glossary"),{langSource:l,langTarget:s}=t;return r.createElement(r.Fragment,null,r.createElement("div",{className:"lmt__glossary_editor_langPairHeadline"},r.createElement("span",{className:"source"},a(`select_lang_${l}`)),r.createElement("div",{className:"lmt__glossary_editor_langPairHeadline_separator"},"-"),r.createElement("span",{className:"target"},a(`select_lang_${s}`))))},B=(e,t)=>{try{return new Intl.ListFormat(t,{style:"long",type:"conjunction"}).format(e)}catch(t){return e.join(", ")}};var U=function(e){let{langPairSets:t=[]}=e,{t:a}=(0,v.$)("glossary"),{il:s}=(0,r.useContext)(d.Z),n=(0,l.v9)(e=>e.glossary),o=(0,r.useMemo)(()=>{let e=e=>a(`select_lang_${e}`);return b.Z.sortLangPairSets(e,t)},[a,t]),i=n.uploads.find(e=>e.id===n.glossaryId);return r.createElement("div",{className:"lmt__glossary_editorRowsWrapper"},i&&i.linesWithError.length>0&&r.createElement(R.v,{message:a("upload_errors",{erroneousLines:B(i.linesWithError,s)}),type:"warning"}),r.createElement("div",{className:"lmt__glossary_editorRows"},o.map((e,t)=>r.createElement("div",{key:t},r.createElement(Z,{langPairSet:e}),r.createElement(M,{langSource:e.langSource,langTarget:e.langTarget,entries:e.entries})))))},$=a(11663);let F=(0,r.createContext)(void 0),W=()=>{let e=(0,r.useContext)(F);if(!e)throw Error("useFormContext must be used within FormContextProvider");return e};var z=function(){let{sourceLang:e,targetLang:t}=W(),{t:a}=(0,v.$)("glossary"),{glossaryRights:s}=(0,l.v9)(e=>e.glossary);if(!b.Z.canEditGlossary(s))return r.createElement("div",{className:"lmt__glossary_explanation_not_owner"},a("empty_glossary"));let n=(e,t,r)=>a(`empty_state_${e}_example_${t}_${r}`);return r.createElement("div",{className:"lmt__glossary_explanation visible","data-testid":"glossary-explanation"},r.createElement("div",{id:"glossary-example",className:"lmt__glossary_explanation_headline"},a("empty_state_headline")),r.createElement("div",{id:"glossary-example-title",className:"lmt__glossary_explanation_example_headline"},a("empty_state_example_headline")),r.createElement("div",{id:"glossary-example-details",className:"lmt__glossary_explanation_example"},["first","second"].map(a=>r.createElement(r.Fragment,{key:a},r.createElement("span",{className:"lmt__glossary_explanation_example_term"},n(a,"source",e)),r.createElement($.X,{className:"lmt__glossary_explanation_example_icon","aria-label":"to"}),r.createElement("span",{className:"lmt__glossary_explanation_example_term"},n(a,"target",t))))))},Y=a(31542),V=a(6029),H=a(18544),K=a(76009),J=a(49359),q={background:"background--GktZJ",transparent:"transparent--WVwyw"};let j=e=>{let{onClick:t,disableBackground:a,children:l,className:s}=e;return r.createElement("div",{className:(0,J.Ch)([q.background,s,a&&q.transparent]),onClick:t},l)};j.defaultProps={onClick:null,disableBackground:!1,children:null,className:""};var Q={header:"header--Lhva0",title:"title--Ck4ol"};let X=e=>{let{title:t}=e;return r.createElement("div",{className:Q.header},r.createElement("h2",{className:Q.title},t))};var ee=a(4637),et={buttonContainer:"buttonContainer--RJkDq",hasButtonBox:"hasButtonBox--Krrgf"};let ea=e=>{let{buttons:t,enableButtonBox:a}=e;return r.createElement("div",{className:(0,J.Ch)([a&&et.hasButtonBox,et.buttonContainer]),"data-testid":"modalButtonArea"},t.map(e=>r.createElement(h.z,{key:e.text,variant:e.variant,color:e.color,onClick:e.action,disabled:e.disabled,size:e.size,"data-testid":"modalButtons"},e.text)))};ea.defaultProps={enableButtonBox:!1,buttons:void 0};var er={content:"content--LOv8G",noScroll:"noScroll--TIJhM",nopadding:"nopadding--Ut4pk"};let el=e=>{let{disableScroll:t,disablePadding:a,children:l}=e;return r.createElement("div",{className:(0,J.Ch)([er.content,a&&er.nopadding,t&&er.noScroll])},l)};el.defaultProps={disableScroll:!0,disablePadding:!1};var es={modal:"modal--lfFiz",modalInnerContainer:"modalInnerContainer--LkRgi",noScroll:"noScroll--kCUYY",nopadding:"nopadding--cDwm3",closeButtonContainer:"closeButtonContainer--O8BWK",closeButton:"closeButton--ztgKQ"},en=a(51890);let eo=e=>{let{title:t,topLeft:a=!1,topRight:l=!1,target:s,className:n="",style:o={},children:i,buttons:c,isOpen:d,onClose:u,onBackdropClick:g,onCloseButtonClick:m,isLoading:y=!1,disablePadding:_=!1,disableBackdrop:p=!1,disableCloseButton:E=!1,disableScroll:f=!1,disableScrollBarGapForScrollLock:h=!1,enableSuccessOverlay:S=!1,enableButtonBox:v=!1,closeButtonAriaLabel:C,testId:I}=e;(0,K.T)(u,d);let[b]=(0,en.P)(d,{reserveScrollBarGap:!h}),T=(0,r.useCallback)(()=>{u(),m&&m()},[u,m]),w=(0,r.useCallback)(()=>{u(),g&&g()},[u,g]),L=d?r.createElement(j,{onClick:w,disableBackground:p},r.createElement("div",{ref:b,className:(0,J.Ch)([es.modal,"forced-colors-mode-border",f&&es.noScroll,n]),"data-testid":I,onClick:e=>e.stopPropagation(),style:(()=>{if(!s)return"object"==typeof o?o:{};let e=o||{};if(a)e={...e,top:s.top,left:s.left};else if(l){var t,r;let a=window.innerWidth-(null!==(t=s.left)&&void 0!==t?t:0)-(null!==(r=s.width)&&void 0!==r?r:0);e={...e,top:s.top,right:a<=0?20:a}}return e})()},!E&&r.createElement("div",{className:es.closeButtonContainer},r.createElement(V.P,{className:es.closeButton,onClick:T,"data-testid":"close-button",ariaLabel:C})),r.createElement("div",{className:(0,J.Ch)([es.modalInnerContainer,f&&es.noScroll,_&&es.nopadding])},t&&r.createElement(X,{title:t}),r.createElement(el,{disableScroll:f,disablePadding:_},i),!!c&&r.createElement(ea,{enableButtonBox:v,buttons:c}),y&&r.createElement(H.q,null),S&&r.createElement(ee.z,null)))):r.createElement(r.Fragment,null);return r.createElement(r.Fragment,null,Y.createPortal(L,document.body))};eo.defaultProps={title:null,target:null,topLeft:!1,topRight:!1,className:"",style:{},buttons:null,onCloseButtonClick:null,onBackdropClick:null,isLoading:!1,disablePadding:!1,disableBackdrop:!1,disableCloseButton:!1,disableScroll:!1,disableScrollBarGapForScrollLock:!1,enableSuccessOverlay:!1,enableButtonBox:!1,testId:null};var ei=a(19783),ec=a.n(ei);let ed=e=>{let{0:t,1:a}=(0,r.useState)(void 0),l=(0,r.useCallback)(()=>{a(eu())},[]);return(0,r.useEffect)(()=>{l()},[l,e]),(0,r.useEffect)(()=>{l();let e=ec()(l,50);return window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[l]),null!=t?t:eu()};function eu(){if("undefined"==typeof window)return;let e=document.querySelectorAll(".glossary-custom-dialog-anchor");if(e.length>0)for(let t of e){let e=t.getBoundingClientRect();if(0!==e.width&&0!==e.height)return e}let t=document.querySelector("#glossary-button");return null==t?void 0:t.getBoundingClientRect()}let eg=e=>{let{isOpen:t}=e,a=ed(t),{t:l}=(0,v.$)("index");return r.createElement(eo,Object.assign({topRight:!0,target:a,disableBackdrop:!g.N0,disableScroll:!0,testId:"glossary-modal",closeButtonAriaLabel:l("buttonClose")},e))};var em=a(30122);function ey(e){e?(0,em.t_)("#glossary",!1):(0,em.lm)(!1,"#glossary")}function e_(){let{t:e}=(0,v.$)("glossary"),{translatorInterface:t}=(0,r.useContext)(d.Z),a=(0,l.v9)(e=>e.glossary),s=(0,r.useRef)(null),n=(0,l.I0)(),o=()=>{t.editorIsOpen(!1),n((0,i.ob)(!1)),ey(!1)};return(0,r.useEffect)(()=>{if(a.forceInitialFocus){var e;null===(e=s.current)||void 0===e||e.focus(),n((0,i.D3)(!1))}},[n,a.forceInitialFocus]),r.createElement("div",{className:"lmt__glossary_editor_mainBar focus-visible-light-container",tabIndex:-1,role:"region","aria-label":e("customization"),ref:s},r.createElement("h3",{className:"lmt__glossary_editorLabel"},e("customization")),r.createElement("button",{className:"lmt__glossary_editorClose",onClick:o,"data-testid":"glossary-close-editor",type:"button","aria-label":"Close glossary"},"âœ•"))}var ep={container:"GlossaryModalWithIllustration-module--container--ZfZ04",emptyGlossary:"GlossaryModalWithIllustration-module--emptyGlossary--sEKgh",title:"GlossaryModalWithIllustration-module--title--fWrNi",smallContainer:"GlossaryModalWithIllustration-module--smallContainer--qlhGE",smallTitle:"GlossaryModalWithIllustration-module--smallTitle--HD4tg",content:"GlossaryModalWithIllustration-module--content--K-A4E",smallContent:"GlossaryModalWithIllustration-module--smallContent--B5sEI",modal:"GlossaryModalWithIllustration-module--modal--Sd4l8"};let eE=e=>{let{title:t,isOpen:a,onClose:l,children:s,className:n="",classNameTitle:o="",small:i=!1,useModalTitle:c=!1,displayFirstEntryInDialog:d=!1,...u}=e;return r.createElement(eg,Object.assign({isOpen:a,onClose:l,className:`${ep.modal} ${n||""}`,title:c&&t,style:d&&{minWidth:"auto"},disablePadding:d,disableCloseButton:d},u),d&&r.createElement(e_,null),r.createElement("div",{className:`${ep.container} ${i?ep.smallContainer:""} ${d?ep.emptyGlossary:""}`},r.createElement("img",{src:"https://static.deepl.com/img/glossary/first-entry.svg",alt:""}),r.createElement("div",{className:`${ep.content} ${i?ep.smallContent:""}`},!c&&r.createElement("div",{className:`${ep.title} ${i?ep.smallTitle:""} ${o}`},t),s)))},ef=e=>{let{languagePair:t,langClassName:a="",arrowClassName:l=""}=e;return r.createElement(r.Fragment,null,r.createElement("span",{className:`LanguagePair_languageKey ${a}`},t.langSource),r.createElement("svg",{stroke:"currentColor",className:`LanguagePair_arrow ${l}`,width:"17",height:"10",viewBox:"0 0 22 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M16.7765 1L20.7746 4.99815M20.7746 4.99815L16.7765 8.99629M20.7746 4.99815H1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),r.createElement("span",{className:`LanguagePair_languageKey ${a}`},t.langTarget))};function eh(e){let{toggleLangPairMenu:t,pair:a}=e;return r.createElement("button",{className:"lmt__glossary_newEntry_langButton",onClick:t,"data-testid":"glossary-newentry-lang-button",type:"button"},r.createElement(ef,{languagePair:a,langClassName:"lmt__glossary_newEntry_langValue",arrowClassName:"lmt__glossary_arrowRight"}),r.createElement("div",{className:"lmt__glossary_arrowDown"}))}var eS=function(e){let{langPairMenuOptions:t,onLangPairSelect:a}=e,{0:s,1:n}=(0,r.useState)(null),o=(0,r.useRef)(null),c=(0,l.v9)(e=>e.glossary),d=(0,l.I0)();b.Z.useOnClickOutside(r.useEffect,o,e=>{let t=b.Z.getElementPathClasses(e.target);!t.includes("lmt__glossary_newEntry_langButton")&&c.editorIsLangPairMenuOpen&&d((0,i.RB)())}),(0,r.useEffect)(()=>{c.editorIsLangPairMenuOpen&&function(){let e=o.current.style;e.setProperty("top","-1000px"),e.setProperty("display","block");let t=Array.from(Y.findDOMNode(o.current).querySelectorAll(".langName")),a=0;t.forEach(e=>{a=Math.max(a,e.clientWidth)}),n(a),e.removeProperty("top"),e.removeProperty("display")}()},[c.editorIsLangPairMenuOpen]);let u=e=>{let{langNameSource:t,langNameTarget:a,langNameStyle:l,langCodeSource:s,langCodeTarget:n,onLangPairSelect:o}=e;return r.createElement(r.Fragment,null,r.createElement("button",{type:"button",onClick:e=>{e.stopPropagation(),o()},"data-testid":"glossary-newentry-lang-dropdown-option"},r.createElement("span",{className:"langName source",style:l},t),r.createElement("div",{className:"langCodePair"},r.createElement(ef,{languagePair:{langSource:s,langTarget:n},langClassName:"langCode"})),r.createElement("span",{className:"langName target",style:l},a)))};return r.createElement("div",{className:"lmt__glossary_newEntry_dropdown",ref:o},r.createElement("div",{className:"lmt__language_select__menu lmt__glossary_newEntry_langDropdown"},t.map(e=>{let{langNameSource:t,langNameTarget:l,langCodeSource:n,langCodeTarget:o}=e;return r.createElement(u,{key:`${t}${l}${n}${o}`,langNameSource:t,langNameTarget:l,langNameStyle:s?{width:`${s}px`}:{},langCodeSource:n,langCodeTarget:o,onLangPairSelect:()=>a(n,o)})})))},ev=a(6713),eC=a(35426),eI=a(30165),eb=a(26908),eT={form:"Form-module--form--GWZfd",inputSource:"Form-module--inputSource--ciIrw",inputTarget:"Form-module--inputTarget--P6CkZ",submit:"Form-module--submit--Di0s0"},ew=a(96279),eL=a(7766);let eN=(e,t)=>t[0]!==t[1]&&e.includes(t[0])&&e.includes(t[1]),eO=(e,t)=>{let a=[e,t];return eL.Gr&&e!==t?[e,t]:ew.ds.find(e=>eN(e,a))},eA=e=>ew.ds.find(t=>t.includes(e)),eP=(e,t)=>t&&t.includes(e)?t[0]===e?t[1]:t[0]:void 0,eR=e=>!!e&&""!==e.trim(),ex=(e,t)=>{let{t:a}=(0,v.$)("glossary"),l=(0,r.useMemo)(()=>ew.J3.map(e=>({id:Math.random(),displayName:a(`select_lang_${e}`),displayNameShort:e.toLocaleUpperCase(),attachment:{languageCode:e},highlighted:ew.js.includes(e)})),[a]),s=(0,r.useMemo)(()=>l.map(t=>{let a=!eO(e,t.attachment.languageCode),r=t.attachment.languageCode===e;return{...t,unavailable:a&&!r}}),[l,e]),n=(0,r.useMemo)(()=>{var e;return null!==(e=l.find(e=>e.attachment.languageCode===ew.F6))&&void 0!==e?e:l[0]},[l]),o=(0,r.useMemo)(()=>{var e;return null!==(e=l.find(e=>e.attachment.languageCode===ew.R7))&&void 0!==e?e:l[1]},[l]),i=(0,r.useMemo)(()=>(e,t)=>{let a;return(a="target"===t?s.find(t=>t.attachment.languageCode===e):l.find(t=>t.attachment.languageCode===e))?a:t?"source"===t?n:o:void 0},[l,s,n,o]),{0:c,1:d}=(0,r.useState)(i(e,"source"));(0,r.useEffect)(()=>{d(i(e,"source"))},[e,i]);let{0:u,1:g}=(0,r.useState)(i(t,"target"));return(0,r.useEffect)(()=>{g(i(t,"target"))},[t,i]),{sourceLangOptions:l,targetLangOptions:s,selectedSourceLangOption:c,selectedTargetLangOption:u,getOptionByLang:i}},eG=e=>{let{sourceValue:t,targetValue:a,languagePairError:s,sourceError:n,targetError:o,sourceLang:c,targetLang:d,updateSourceValue:u,updateTargetValue:g}=W(),m=(0,l.I0)(),y=(0,r.useCallback)(r=>{var l;if(r.preventDefault(),!eR(t)||!eR(a))return;let y=b.Z.sanitizeTextInput(t||""),_=b.Z.sanitizeTextInput(a||"");if(eR(s)||eR(n)||eR(o)){m((0,i.sc)({type:"createEntryWithError",langSource:c,langTarget:d,textSource:y,textTarget:_}));return}m((0,i.hk)({from:"editor",langSource:c,langTarget:d,textSource:y,textTarget:_,overwrite:!0})),u(""),g(""),null==e||null===(l=e.current)||void 0===l||l.focus()},[t,a,s,n,o,c,d,u,g,m,e]);return y},eD=e=>{let{hasGreyBackground:t=!0,activeLangPair:a={langSource:"",langTarget:""}}=e,{t:l}=(0,v.$)("glossary"),s=(0,r.useRef)(null),n=(0,r.useRef)(null),{sourceLang:o,sourceValue:i,sourceError:c,updateSourceValue:d,updateSourceLang:m,targetLang:y,targetValue:_,targetError:p,updateTargetValue:E,updateTargetLang:f,languagePairError:h}=W(),{sourceLangOptions:S,targetLangOptions:C,selectedSourceLangOption:I,selectedTargetLangOption:b}=ex(o,y),T=eG(n),w=!!(0,u.bY)("B2B-343")&&g.pl,L=!!(0,u.bY)("B2B-344")&&g.FA,N=!!(0,u.bY)("B2B-345")&&!g.N0,O=w||L||N,A=(0,r.useCallback)((e,t)=>{m(t||void 0,O),d(e)},[m,d,O]),P=(e,t)=>{f(t||void 0,O),E(e)};(0,r.useEffect)(()=>{if(!a.langSource||!a.langTarget)return;let{langSource:e,langTarget:t}=a,r=S.find(t=>t.attachment.languageCode===e),l=C.find(e=>e.attachment.languageCode===t);m(r,O),f(l,O)},[a]),(0,r.useLayoutEffect)(()=>{var e;null===(e=s.current)||void 0===e||e.focus()},[]);let R=eR(i)&&eR(_)&&!eR(c)&&!eR(p)&&!eR(h),x={numberOfRows:O?6:5,showCutoff:O,theme:O?"themeBlue":"themeYellow",width:60,flyoutWidth:O?256:"fit-content",displayNameShortWidth:24,withBorderOnFlyout:!0,withBorder:!0,size:"small",attached:"left"};return r.createElement("form",{className:`${t?"bg-deprecated-grey":"bg-none"} ${eT.form}`,onSubmit:T},r.createElement(eI.p,{ariaDescribedBy:"glossary-example glossary-example-title glossary-example-details",id:"sourceLangInput",className:eT.inputSource,inputValue:i,selectOptions:S,selectValue:I,labelHighlighted:l("new"),onChange:A,selectLabel:l("select_source_language"),inputLabel:l("source_glossary_entry"),inputPlaceholder:l("editor_placeholder_source_text"),errorMessage:c,width:"full",selectRef:s,inputRef:n,selectLayoutOptions:x,selectTestId:"glossary-newentry-source-language-select",inputTestId:"glossary-newentry-source-input"}),r.createElement(eI.p,{id:"targetLangInput",className:eT.inputTarget,labelHighlighted:l("pro-api:new"),inputValue:_,selectOptions:C,selectValue:b,onChange:(e,t)=>P(e,t),selectLabel:l("select_target_language"),inputLabel:l("target_glossary_entry"),inputPlaceholder:l("editor_placeholder_target_text"),errorMessage:null!=p?p:h,width:"full",selectLayoutOptions:x,selectTestId:"glossary-newentry-target-language-select",inputTestId:"glossary-newentry-target-input"}),r.createElement("button",{type:"submit",className:eT.submit,"aria-label":l("save_entry"),disabled:!R,"data-testid":"glossary-newentry-accept-button"},r.createElement(eb.n,null)))};var ek=function(){let e=(0,r.useContext)(d.Z),{t}=(0,v.$)("glossary"),{languageManagement:a,webTranslatorCore:s,translatorInterface:n}=e,o=(0,u.bY)("B2B-364")&&!g.N0,c=(0,u.bY)("B2B-365")&&g.FA,m=(0,u.bY)("B2B-366")&&g.pl,y=(0,ev.s)(),_=(0,l.v9)(e=>e.glossary),p=b.Z.canEditGlossary(_.glossaryRights),E=(0,l.I0)(),{editorNewEntrySourceText:f,editorNewEntryTargetText:h}=_,{0:S,1:C}=(0,r.useState)(!1),{0:I,1:T}=(0,r.useState)(!1),{isTextEmpty:w,isTextValid:L}=N(f),{isTextEmpty:O,isTextValid:A}=N(h),P=(0,r.useRef)(null),R=(0,r.useRef)(null),G=e=>{E((0,i._r)(e.target.value)),S&&C(0===e.target.value.length)},D=e=>{E((0,i.QU)(e.target.value)),I&&T(0===e.target.value.length)},k=e=>{13===e.keyCode&&(e.currentTarget.blur(),K())},{0:M,1:Z}=(0,r.useState)({langSource:"",langTarget:""});(0,r.useEffect)(()=>{E((0,i.Oq)(M))},[M]);let B=eC.languagePairs.map(e=>{let{langSource:a,langTarget:r}=e;return{langNameSource:t(`select_lang_${a}`),langNameTarget:t(`select_lang_${r}`),langCodeSource:a.toUpperCase(),langCodeTarget:r.toUpperCase()}}),U=()=>{let{prioritizedLangs:e,targetLang:t}=b.Z.getPrioritizedSourceLangsAndTargetLang(a,s),r=!1,l="",n="";if(e.forEach(e=>{eC.languagePairs.forEach(a=>{r||a.langSource!==e||a.langTarget!==t||(l=a.langSource,n=a.langTarget,r=!0)})}),!r){let{langSource:e,langTarget:t}=eC.languagePairs[0];l=e,n=t}l&&n&&Z({langSource:l,langTarget:n})},{0:$,1:F}=(0,r.useState)(""),{0:W,1:z}=(0,r.useState)("");(0,r.useEffect)(()=>{let{langSource:e,langTarget:t}=M;if(!e||!t)return;let{getIsoFormattedLangCodeWithCountryCode:r}=a,l=r(e);F(l);let s=r(t);z(s)},[M,a]),(0,r.useEffect)(()=>{P.current&&P.current.focus(),U()},[]);let{0:Y,1:V}=(0,r.useState)(!1);(0,r.useEffect)(()=>{V(!w&&!O&&L&&A)},[w,O,L,A]);let H=e=>{e.preventDefault(),Y||(C(0===f.length),T(0===h.length)),K()};async function K(){if(!Y){L&&A||E((0,i.sc)({type:"createEntryWithError",langSource:M.langSource,langTarget:M.langTarget,textSource:f,textTarget:h}));return}let e=b.Z.convertLangPairSetsToEntries(_.glossaryLangPairSets).filter(e=>e.langSource===M.langSource&&e.langTarget===M.langTarget&&e.textSource===f&&e.textTarget===h)[0];if(e){E((0,i._r)("")),E((0,i.QU)("")),V(!1),P.current&&P.current.focus();return}E((0,i.hk)({from:"editor",langSource:M.langSource,langTarget:M.langTarget,textSource:b.Z.sanitizeTextInput(f),textTarget:b.Z.sanitizeTextInput(h),overwrite:!0}))}let J=(0,r.useCallback)(()=>{n.editorIsOpen(!1),E((0,i.ob)(!1)),ey(!1)},[E,n]),q=!((w||L)&&!S),j=!((O||A)&&!I),Q=e=>t(`first_entry_example_placeholder_${e}`);return p||y?y?r.createElement(eE,{isOpen:!0,onClose:J,title:t("onboarding_heading"),small:g.N0,displayFirstEntryInDialog:!g.N0},o||c||m?r.createElement(eD,{hasGreyBackground:!1,activeLangPair:M}):r.createElement("form",{className:`lmt_firstEntry-content lmt__glossary_newEntryForm ${_.editorIsLangPairMenuOpen?"lmt__glossary_newEntry_langMenu--open":""}`,onSubmit:H},r.createElement("div",{className:"lmt_firstEntry-content-inputs"},r.createElement("div",{className:"lmt_firstEntry-source-column"},r.createElement("div",{className:`lmt_firstEntry-labelSource lmt_firstEntry-fieldWidth ${q?"error":""}`},t("first_entry_replace")),r.createElement("input",{className:`lmt__glossary_newEntry_inputSource focus-visible-disabled ${q?"error":""}`,"data-testid":"glossary-newentry-source-input",lang:$,onChange:G,onKeyDown:k,placeholder:Q(M.langSource),ref:P,type:"text",value:f})),r.createElement("div",{className:"lmt_firstEntry-target-column"},r.createElement("div",{className:`lmt_firstEntry-labelTarget lmt_firstEntry-fieldWidth ${j?"error":""}`},t("first_entry_with")),r.createElement("input",{className:`lmt__glossary_newEntry_inputTarget focus-visible-disabled ${j?"error":""}`,"data-testid":"glossary-newentry-target-input",lang:W,onChange:D,onKeyDown:k,placeholder:Q(M.langTarget),ref:R,type:"text",value:h})),r.createElement(eh,{pair:M,toggleLangPairMenu:function(){_.editorIsLangPairMenuOpen?E((0,i.RB)()):E((0,i.b2)())}}),r.createElement(eS,{langPairMenuOptions:B,onLangPairSelect:function(e,t){Z({langSource:b.Z.correctLangFormat(e),langTarget:b.Z.correctLangFormat(t)}),E((0,i.sc)({type:"selectLangPair",langSource:b.Z.correctLangFormat(e),langTarget:b.Z.correctLangFormat(t)})),E((0,i.RB)())}})),r.createElement(x,{sourceText:f,targetText:h,testIdPrefix:"glossary-newentry"}),(S||I)&&r.createElement("div",{className:"lmt__glossary_textInput--fill-both-words-error","data-testid":"glossary-newentry-fill-both-words-error"},t("first_entry_fill_both_words")),r.createElement("button",{type:"submit",className:`lmt__glossary_acceptButton ${Y?"":"lmt__glossary_acceptButton--disabled"}`,"data-testid":"glossary-newentry-accept-button"},"+",t("glossary_add_button_label")))):r.createElement(eD,{activeLangPair:M}):null},eM=a(37083);function eZ(){let{t:e}=(0,v.$)("glossary"),{persistentValue:t,il:a}=(0,r.useContext)(d.Z),s=(0,l.v9)(e=>e.glossary),n=(0,l.I0)(),o=(0,r.useRef)(null),{0:c,1:u}=(0,r.useState)(""),g=(0,r.useMemo)(()=>null==c?void 0:c.trim(),[c]),{isTextValid:m}=N(g),y=(0,r.useMemo)(()=>{var e;let t=null===(e=s.glossariesInfo)||void 0===e?void 0:e.filter(e=>e.id!==s.editorGlossaryInNameEditMode).map(e=>e.name);return m&&g.length>0&&!t.includes(g)},[s.glossariesInfo,s.editorGlossaryInNameEditMode,m,g]);function _(e){if(y){if(e.name===g||!g){n((0,i.So)(null));return}e.id?n((0,i.Xy)(e.id,g)):n((0,i.Zt)(g))}}(0,r.useEffect)(()=>{null!=s.editorGlossaryInNameEditMode&&o.current.focus()},[s.editorGlossaryInNameEditMode]);let p=(e,t)=>{"Enter"===e.key?_(t):"Escape"===e.key&&n((0,i.So)(null))},E=(0,r.useRef)(null);return b.Z.useOnClickOutside(r.useEffect,E,e=>{if(!s.editorIsGlossarySelectionDialogOpen||s.commandAskToRemoveGlossary)return;let t=b.Z.getElementPathClasses(e.target);t.includes("lmt__glossary_editor_glossaryNameWrapper")||t.includes("lmt__glossary_editor_glossarySelectionWrapper")||n((0,i.bV)(!1))}),r.createElement("div",{className:"lmt__glossary_editor_glossarySelect"},r.createElement("div",{className:"lmt__glossary_editor_glossaryNameWrapper",onClick:function(){let e=Array.isArray(s.glossariesInfo)&&s.glossariesInfo.length>1;if(s.userCanHaveMultipleGlossaries||e){let e=!s.editorIsGlossarySelectionDialogOpen;e&&n((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_CLICKED",isDropdownArrowDisplayed:!0})),n((0,i.cP)())}else n((0,i.bI)(!0))}},r.createElement("div",{className:"lmt__glossary_editor_glossaryName no_overflow"},s.glossaryName),r.createElement("div",{className:`lmt__glossary_editor_glossarySelectChevron ${s.editorIsGlossarySelectionDialogOpen?"lmt__glossary_arrowUp":"lmt__glossary_arrowDown"}`,"data-testid":"glossary-select-dropdown"})),r.createElement("div",{className:`lmt__glossary_editor_glossarySelectionWrapper forced-colors-mode-border ${s.editorIsGlossarySelectionDialogOpen?"visible":""}`,ref:E},r.createElement("div",{className:"lmt__glossary_editor_glossarySelectionWrapperInner"},Array.isArray(s.glossariesInfo)&&b.Z.sortGlossaries(s.glossariesInfo,a).map(a=>a.id===s.editorGlossaryInNameEditMode&&null!=a.id?r.createElement("div",{className:"lmt__glossary_editor_glossaryNameEdit",key:`${a.id}`},r.createElement("input",{className:`glossary-input lmt__glossary_editName_input ${y?"":"error"}`,onChange:e=>u(e.target.value),onKeyDown:e=>p(e,a),ref:o,type:"text",value:c}),r.createElement("button",{className:`lmt__glossary_acceptButton ${y?"":"lmt__glossary_acceptButton--disabled"}`,onClick:()=>_(a),type:"button"},r.createElement("div",{className:"lmt__glossary_editor_checkmark"}))):r.createElement("div",{className:"lmt__glossary_editor_glossarySelectionItem",key:`${a.id}`},r.createElement("button",{className:"lmt__glossary_editor_glossarySelectionName",onClick:()=>{a.id!==s.glossaryId&&(t.activeGlossaryId(a.id),n((0,i.hb)(a.id)),window.setTimeout(()=>{n((0,i.sc)({type:"glossarySelected",glossaryId:a.id,...(0,eM.r)(a.rights,a.shared)}))},2e3)),n((0,i.bV)(!1))},type:"button"},a.name),b.Z.canEditGlossary(a.rights)&&r.createElement(r.Fragment,null,s.userCanHaveMultipleGlossaries&&r.createElement("button",{className:"iconButton",onClick:()=>{u(a.name),a.id&&n((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_EDIT_ICON_CLICKED"})),n((0,i.So)(a.id))},title:e("edit"),type:"button"},r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0, 0, 400,400"},r.createElement("g",{id:"svg"},r.createElement("path",{id:"path0",d:"M266.374 72.000 L 245.227 92.000 150.614 92.000 C 58.667 92.000,56.000 92.225,56.000 100.000 C 56.000 107.754,58.667 108.000,142.875 108.000 L 229.750 108.000 206.000 132.000 L 182.250 156.000 119.125 156.000 C 58.667 156.000,56.000 156.338,56.000 164.000 C 56.000 171.611,58.667 172.000,110.875 172.000 L 165.750 172.000 142.000 196.000 L 118.250 220.000 87.125 220.000 C 58.667 220.000,56.000 220.685,56.000 228.000 C 56.000 235.060,58.667 236.000,78.697 236.000 L 101.395 236.000 92.660 245.297 C 84.422 254.066,50.116 347.449,53.785 351.118 C 54.726 352.059,75.859 346.146,100.748 337.978 L 146.000 323.126 249.000 220.592 C 365.229 104.888,360.973 112.652,327.366 77.654 C 297.714 46.774,293.463 46.380,266.374 72.000 M316.863 86.850 C 342.131 111.738,348.104 101.970,244.005 205.995 L 152.011 297.924 129.043 274.957 L 106.076 251.989 198.005 159.995 C 302.275 55.651,291.758 62.123,316.863 86.850 M136.968 308.337 C 132.519 312.344,79.752 329.086,77.782 327.116 C 76.844 326.177,80.779 311.421,86.527 294.324 L 96.979 263.240 118.457 284.452 C 130.271 296.118,138.601 306.867,136.968 308.337 "})))),r.createElement("button",{className:"iconButton",onClick:()=>{n((0,i.Dw)(a.id,a.name))},title:e("delete"),type:"button"},r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0, 0, 400,400"},r.createElement("g",{id:"svg"},r.createElement("path",{id:"path0",d:"M160.000 45.466 C 4.469 90.972,1.163 304.502,155.252 352.096 C 287.410 392.915,404.506 251.350,341.473 126.960 C 309.358 63.585,226.006 26.153,160.000 45.466 M261.391 69.527 C 393.871 134.343,356.571 333.720,210.207 343.113 C 88.705 350.911,13.360 217.823,82.362 117.288 C 120.961 61.050,200.625 39.797,261.391 69.527 M132.800 132.800 C 128.918 136.682,134.380 144.240,158.851 168.856 L 189.812 200.000 158.851 231.144 C 134.380 255.760,128.918 263.318,132.800 267.200 C 136.682 271.082,144.240 265.620,168.856 241.149 L 200.000 210.188 231.144 241.149 C 255.760 265.620,263.318 271.082,267.200 267.200 C 271.082 263.318,265.620 255.760,241.149 231.144 L 210.188 200.000 241.149 168.856 C 265.620 144.240,271.082 136.682,267.200 132.800 C 263.318 128.918,255.760 134.380,231.144 158.851 L 200.000 189.812 168.856 158.851 C 144.240 134.380,136.682 128.918,132.800 132.800 "}))))))))))}var eB=function(){let e=(0,l.v9)(e=>e.glossary);return r.createElement(r.Fragment,null,e.isAsyncPending&&r.createElement("div",{className:"lmt__glossary_editor_uiBlocker visible"},r.createElement("div",{className:"lmt__glossary_editor_loadingSpinner"})))},eU=a(12652),e$={wrapper:"ShareGlossary-module--wrapper--0HlfZ",sharedWithYou:"ShareGlossary-module--sharedWithYou--gY3lf"};let eF=()=>{let{t:e}=(0,v.$)("glossary"),t=(0,l.I0)(),{isSharingAllowed:a}=(0,r.useContext)(d.Z),{glossaryShared:s,glossaryId:n,glossaryRights:o}=(0,l.v9)(e=>e.glossary),c=e=>{t((0,i.CD)(n,e)),t((0,i.sc)({type:"sharedStateToggled",toggleMode:e?1:2}))};return a||s?b.Z.isGlossaryAdmin(o)?r.createElement("div",{className:e$.wrapper},r.createElement(eU.Z,{label:e("label_share_with_team"),size:"small",toggledOn:s,onToggle:c})):r.createElement("div",{className:e$.sharedWithYou},e("label_shared_with_you")):null};var eW=function(){let{translatorInterface:e}=(0,r.useContext)(d.Z),t=(0,l.I0)(),a=(0,l.v9)(e=>e.glossary),s=a.glossaryLangPairSets||[],n=(0,r.useRef)(null),o=a.isDownloadAndUploadEnabled&&(!g.FA||(0,g.MT)("3.0.0"));return b.Z.useOnClickOutside(r.useEffect,n,()=>{a.commandAskToRemoveGlossary||a.showAdvancedAd||(e.editorIsOpen(!1),t((0,i.ob)(!1)),ey(!1))}),(0,r.useEffect)(()=>(n.current&&(a.editorIsOpen?(0,L.Qp)(n.current,{reserveScrollBarGap:!0}):(0,L.tG)(n.current)),()=>(0,L.tP)()),[a.editorIsOpen]),r.createElement("div",{ref:n,className:"lmt__glossary_editor lmt__glossary_editor_react","data-testid":"glossary-editor"},r.createElement(eB,null),r.createElement(e_,null),r.createElement("div",{className:"lmt__glossary_editor_subBar_top"},r.createElement(eZ,null),r.createElement(eF,null)),r.createElement("div",{className:"lmt__glossary_editor_subBar_bottom"},r.createElement(O,null),a.isDownloadAndUploadEnabled&&r.createElement(P,null),o&&r.createElement(A,null)),r.createElement(ek,null),Array.isArray(s)&&s.length?r.createElement(U,{langPairSets:s}):r.createElement(z,null))},ez=a(10204);let eY={NUMBER_OF_ENTRIES_PER_GLOSSARY:12},eV=()=>{var e;let{t}=(0,v.$)("glossary"),{requestProPage:a}=(0,r.useContext)(d.Z),{showProAd:s}=(0,l.v9)(e=>e.glossary),n=(0,l.v9)(e=>{var t,a;return null===(t=e.privacy)||void 0===t?void 0:null===(a=t.activePrivacyConsent)||void 0===a?void 0:a.includes("COMFORT")}),o=(0,l.I0)(),c=null===(e=(0,ez.M)())||void 0===e?void 0:e.toString(),u=()=>{o((0,i.P5)(!1))},m=()=>{u(),o((0,i.sc)({type:"proAd_secondaryCta"}))},y=()=>{if("undefined"!=typeof window&&n){var e;window.localStorage.setItem("LMT_resumeCheckout",JSON.stringify({...JSON.parse(null!==(e=window.localStorage.getItem("LMT_resumeCheckout"))&&void 0!==e?e:"{}"),pd:eY.NUMBER_OF_ENTRIES_PER_GLOSSARY}))}a({cta:"customization"}),u(),o((0,i.sc)({type:"proAd_proCta"}))};return g.N0?r.createElement(_.T,{open:s,onClose:m},r.createElement(p.t,null),r.createElement(C._,{closeHandler:m,confirmButtonProps:{onClick:y},confirmButtonText:t("pro_ad_button_try_pro_n_days",{trialDays:c}),title:t("pro_ad_headline")},r.createElement("div",null,t("pro_ad_subtext")),r.createElement(I.ez,null,r.createElement(I.vY,null,t("pro_ad_bullet_point_1")),r.createElement(I.vY,null,t("pro_ad_bullet_point_2"))))):r.createElement(_.T,{open:s,onClose:u},r.createElement(p.t,null),r.createElement(E.F,{className:"lmt__glossary_ad_wrapper"},r.createElement(f.V.Title,{className:"lmt__glossary_ad_headline"},t("pro_ad_headline")),r.createElement(f.V.Description,{className:"lmt__glossary_ad_subtext"},t("pro_ad_subtext")),r.createElement("div",{className:"lmt__glossary_ad_bulletPoints"},r.createElement("div",{className:"lmt__glossary_ad_bulletPoint"},r.createElement("div",{className:"lmt__glossary_ad_checkmark"}),r.createElement("div",{className:"lmt__glossary_ad_text"},t("pro_ad_bullet_point_1"))),r.createElement("div",{className:"lmt__glossary_ad_bulletPoint"},r.createElement("div",{className:"lmt__glossary_ad_checkmark"}),r.createElement("div",{className:"lmt__glossary_ad_text"},t("pro_ad_bullet_point_2")))),r.createElement("div",{className:"lmt__glossary_ad_buttons"},r.createElement(h.z,{variant:"contained",color:"secondary",onClick:y},t("pro_ad_button_try_pro_n_days",{trialDays:c})),r.createElement("div",{className:"lmt__glossary_ad_buttons__sep"},t("pro_ad_or")),r.createElement(h.z,{variant:"outline",color:"primary",onClick:m},t("pro_ad_button_cancel"))),r.createElement(S.i,{onClick:m})))};var eH=a(41941),eK=function(){let{languageManagement:e,translationBackend:t,smartTargetEditing:a,webTranslatorCore:s}=(0,r.useContext)(d.Z),n=(0,l.v9)(e=>e.glossary),{0:o,1:i}=(0,r.useState)(null);function c(a){if(n.termbaseHasError)return;let{langSource:r,langTarget:l}=b.Z.getTranslatorLanguages(s);if(!eC.languagePairs.some(e=>e.langSource===r&&e.langTarget===l))return;let{targetSentence:o}=a,i=o.getFullSnapshot(-1),c=o.getFullSnapshot(-2);if(!i||!c)return;let d=o.getSourceSentence().getNormalizedText(),g=c.text,m=i.text;!function(a,r,l){let s={kind:eH.Z.JOB_KIND__SUGGEST_GLOSSARY_TAGS,sentences:[{id:0,prefix:"",complete_translation_original:r,complete_translation:l,text:a}]},n=e.getActiveLangContext().createJobSettings();n.commonJobParams&&(delete n.commonJobParams.termbase,"richtext"===n.commonJobParams.textType&&(n.commonJobParams.textType="plaintext")),t.sendTranslationJobs([s],n,!1).then(u)}(d,g,m)}function u(e){var t,a;if(null!=e&&null!==(t=e.translations[0])&&void 0!==t&&null!==(a=t.glossary_tag_suggestions)&&void 0!==a&&a.length){let t=e.translations[0].glossary_tag_suggestions.slice(0,eL.nw),a=t.map(e=>({textSource:e.tag_l1.trim(),textTarget:e.tag_l2.trim()})),r=a.filter(e=>b.Z.hasTextInputValidChars(e.textSource)&&b.Z.hasTextInputValidChars(e.textTarget));i(r)}}return(0,r.useEffect)(()=>(a.onTargetSentenceChangedByAlternative.push(c),()=>{a.onTargetSentenceChangedByAlternative.remove(c)}),[]),(0,r.useEffect)(()=>{n.hasFatalError&&a.onTargetSentenceChangedByAlternative.remove(c)},[n.hasFatalError]),o},eJ=function(e){let{suggestion:t,onCloseDialog:a}=e,{t:s}=(0,v.$)("glossary"),{textSource:n,textTarget:o}=t,{webTranslatorCore:c}=(0,r.useContext)(d.Z),u=(0,l.I0)(),g=s("dialog_question_with_save_option",{sourceText:"|",targetText:"|"}),m=g.split("|"),y="."!==m[2][0],{langSource:_,langTarget:p}=b.Z.getTranslatorLanguages(c),E=e=>{e.stopPropagation(),u((0,i.hk)({from:"dialog",langSource:_,langTarget:p,textSource:b.Z.sanitizeTextInput(n),textTarget:b.Z.sanitizeTextInput(o),overwrite:!0})),a()},f=c._internalLanguageManagement.getLangAttributeForSelectedSourceLang(),h=c._internalLanguageManagement.getLangAttributeForSelectedTargetLang();return r.createElement(r.Fragment,null,r.createElement("div",{className:"lmt__glossary_dialog__line"},r.createElement("div",{className:"translate"},r.createElement("span",null,m[0]),r.createElement("span",{className:"word source",lang:f},` "${n.trim()}" `),r.createElement("span",null,m[1]),r.createElement("span",{className:`word target ${y?"padRight":""}`,lang:h},` "${o.trim()}"`),r.createElement("span",null,m[2])),r.createElement("div",{className:"choice"},r.createElement("div",{className:"option",onClick:E},s("dialog_save")))))},eq=a(52644),ej=function(){let{t:e}=(0,v.$)("glossary"),{persistentValue:t,targetTextarea:a}=(0,r.useContext)(d.Z),s=(0,l.I0)(),o=(0,l.v9)(e=>e.glossary),{0:c,1:u}=(0,r.useState)([]),{0:m,1:y}=(0,r.useState)(null),{0:_,1:p}=(0,r.useState)(!1),{0:E,1:f}=(0,r.useState)(!1),{0:h,1:S}=(0,r.useState)(""),{0:C,1:I}=(0,r.useState)(""),{0:T,1:w}=(0,r.useState)(""),L=ed(o.suggestionsIsDialogOpen);(0,r.useEffect)(()=>{y(!g.N0||window.innerWidth<=eL.$G)},[L]),(0,r.useEffect)(()=>{R(c.length)},[m]);let N=(0,r.useRef)(null);b.Z.useOnClickOutside(r.useEffect,N,()=>{o.suggestionsIsDialogOpen&&s((0,i.Iu)(!1,t.hasDialogBeenShown()))}),(0,r.useEffect)(()=>{let e=()=>{G(),s((0,i.Iu)(!1,t.hasDialogBeenShown()))};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[s,t]);let O=function(){let e=(0,n.d)("/translator/webTranslatorCore"),{glossaryLangPairSets:t,suggestionsValues:a}=(0,l.v9)(e=>e.glossary);return(0,r.useMemo)(()=>{if(!e)return[];let{langSource:r,langTarget:l}=b.Z.getTranslatorLanguages(e),s=b.Z.convertLangPairSetsToEntries(t).filter(e=>e.langSource===r&&e.langTarget===l),n=a.filter(e=>s.every(t=>t.textSource!==e.textSource||t.textTarget!==e.textTarget));return n},[e,t,a])}();function A(){window.clearTimeout(o.suggestionsDialogClosingTimeout)}function P(){A(),s((0,i.Iu)(!1,t.hasDialogBeenShown())),f(!1)}function R(e){switch(e){case 1:I(m?"":"one");break;case 2:I(m?"":"two"),w("twoSuggestions");break;case 3:I(m?"":"three"),w("threeSuggestions")}}function x(){if(!N.current)return;let{top:e,right:t}=L,a=c.length<3||window.pageYOffset<80,r=window.innerHeight-e+(a?7:0),l=document.body.clientWidth-t;D({bottom:r,right:l})}function G(){D({top:-1e3})}function D(e){var t,a,r,l,s,n,o,i;let{left:c,right:d,top:u,bottom:g}=e;"number"==typeof c?null===(t=N.current)||void 0===t||t.style.setProperty("left",`${c}px`):null===(a=N.current)||void 0===a||a.style.removeProperty("left"),"number"==typeof d?null===(r=N.current)||void 0===r||r.style.setProperty("right",`${d}px`):null===(l=N.current)||void 0===l||l.style.removeProperty("right"),"number"==typeof u?null===(s=N.current)||void 0===s||s.style.setProperty("top",`${u}px`):null===(n=N.current)||void 0===n||n.style.removeProperty("top"),"number"==typeof g?null===(o=N.current)||void 0===o||o.style.setProperty("bottom",`${g}px`):null===(i=N.current)||void 0===i||i.style.removeProperty("bottom")}return(0,r.useEffect)(()=>{O.length>0&&u(O)},[O]),(0,r.useEffect)(()=>{c.length&&(f(!1),I(""),w(""),R(c.length),p(c.length>1))},[c]),(0,r.useEffect)(()=>{if(!c.length)return;let e=t.hasDialogBeenShown();e||t.hasDialogBeenShown(!0),s((0,i.Iu)(!0,e))},[L]),(0,r.useEffect)(()=>{o.suggestionsIsDialogOpen||(G(),u([]))},[o.suggestionsIsDialogOpen]),(0,r.useEffect)(()=>{o.suggestionsIsDialogOpen&&window.setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.style.removeProperty("z-index"),g.N0?m?x():function(){if(!N.current)return;let e=N.current.getBoundingClientRect(),{width:t}=e,{left:a}=L;D({left:a-t-7,top:2})}():0===window.pageYOffset?(x(),S("lmt__glossary_dialog--arrow")):(function(){var e,t;let{top:r,right:l}=null!==(e=document.querySelector(".lmt__side_container--target .lmt__textarea_container"))&&void 0!==e?e:a.getBoundingClientRect(),s=null!==(t=document.querySelector(".dl_header"))&&void 0!==t?t:document.querySelector("header"),{bottom:n}=s.getBoundingClientRect();D({top:n>r?n+5:r+5,right:document.body.clientWidth-l+5})}(),S(""))})},[L,m]),(0,r.useEffect)(()=>{S(`lmt__glossary_dialog--arrow${m?"":"-right"} ${C}`)},[m,C]),o.glossaryRights===eq.M.User?null:r.createElement("div",{className:`lmt__glossary_dialog--wrapper ${o.suggestionsHasDialogBeenShown?"":"blue"} ${o.suggestionsIsDialogOpen?"":"lmt__glossary_dialog--closed"} ${m?"aboveButton":""}`,ref:N},r.createElement("div",{className:`lmt__glossary_dialog ${T}`,"data-testid":"glossary-dialog",onMouseEnter:function(){A()},onMouseLeave:function(){!function(){let e=window.setTimeout(()=>{s((0,i.Iu)(!1,t.hasDialogBeenShown()))},1e3*eL.w0);s((0,i.Dp)(e))}()}},r.createElement("span",{className:"lmt__glossary_dialog__title"},e("dialog_title")," ",o.glossaryName),r.createElement("div",{className:`lmt__glossary_dialog__rows ${E?`showMore-${c.length}`:""}`},c.map((e,t)=>r.createElement(eJ,{key:t,onCloseDialog:P,suggestion:e}))),_&&r.createElement("div",{className:"lmt__glossary_dialog__line--suggestions"},r.createElement("span",{className:"moreSuggestions",onClick:function(){f(!0),p(!1)}},e("dialog_more_suggestions")))),r.createElement("div",{className:h,style:o.suggestionsIsDialogOpen?{}:{display:"none"}}))},eQ=function(){let e=(0,l.v9)(e=>e.glossary),{persistentValue:t,webTranslatorCore:a}=(0,r.useContext)(d.Z),s=(0,l.I0)(),n=eK(),{langSource:o,langTarget:c}=b.Z.getTranslatorLanguages(a),u=[o,c],g=!!ew.ds.find(e=>eN(e,u));return(0,r.useEffect)(()=>{Array.isArray(n)&&n.length&&s((0,i.VO)(n))},[n]),(0,r.useEffect)(()=>{if(Array.isArray(e.suggestionsValues)&&e.suggestionsValues.length){let e=t.hasDialogBeenShown();e||t.hasDialogBeenShown(!0),s((0,i.Iu)(!0,e)),s((0,i.sc)({type:"glossarySuggestionsPopup",langSource:o,langTarget:c}))}},[e.suggestionsValues]),g?Y.createPortal(r.createElement(ej,null),document.getElementById("glossarySuggestionsDialogPortal")):null},eX=a(93117),e0=a(31441),e1=a(4174),e2=a(71115);function e4(){let{t:e}=(0,v.$)(["glossary","index","common"]),t={comma:eL.CS.Comma,semicolon:eL.CS.Semicolon,tab:eL.CS.Tab},a=(0,r.useRef)(null),s=(0,l.v9)(e=>e.glossary),n=(0,l.I0)(),{0:o,1:c}=(0,r.useState)(!0),{0:d,1:u}=(0,r.useState)(eC.languagePairs[0]),{0:g,1:m}=(0,r.useState)(eL.CS.Tab),{0:y,1:_}=(0,r.useState)(!1);(0,r.useEffect)(()=>{!1===s.editorIsUploadGlossaryDialogOpen&&(c(!0),_(!1))},[s.editorIsUploadGlossaryDialogOpen]);let p=e=>{e.preventDefault();let t=a.current.files[0],r=new FileReader;r.readAsText(t),r.onload=()=>{let e=s.glossariesInfo.map(e=>e.name),a={source:d.langSource,target:d.langTarget};(0,e2.Qc)(r.result,a,g).then(a=>{let{langPairSets:r,linesWithError:l}=a;n((0,i.Bw)({glossaryName:b.Z.getUniqueFilename(e,b.Z.removeFileEnding(t.name)),langPairSets:r,linesWithError:l,separator:g}));for(let e=0;e<r.length;e++){let a=r[e];n((0,i.sc)({type:"TRANSLATOR_GLOSSARY_UPLOAD_STARTED",fileType:"csv",fileSize:t.size,langSource:a.langSource,langTarget:a.langTarget,separator:b.Z.getSeparatorText(g),entriesCount:a.entries.length+(0===e?l.length:0)}))}})}},E=()=>{let e=a.current.files[0];(0,e2.Yb)(e).then(e=>{e&&(m(e),_(!0))})},f=()=>{c(!0),n((0,i.ic)(!1))},h=[{text:e("index:genericDialog.cancelButton"),color:"primaryAlt",variant:"text",action:f,size:"medium"},{text:e("glossary:upload"),action:p,size:"medium",disabled:o}],S=t=>{let a=b.Z.getSeparatorText(t);return a?y&&g===t?e(`glossary:separator_auto_detected_${a}`):e(`glossary:separator_type_${a}`):""};return r.createElement(eE,{title:e("glossary:upload_glossary"),isOpen:s.editorIsUploadGlossaryDialogOpen,onClose:f,buttons:h,useModalTitle:!0,small:!0},r.createElement(eX.l,{onSubmit:p,className:"glossary_upload"},r.createElement(e0.p,{accept:".csv",ref:a,onChange:e=>{var t,a;n((0,i.ud)()),(null!==(t=null===(a=e.target.files)||void 0===a?void 0:a.length)&&void 0!==t?t:0)>0&&(c(!1),E())},fieldError:s.uploadFailed&&e("glossary:upload_file_error"),fieldInfo:e("glossary:upload_file_formatting_guidelines"),label:e("glossary:upload_file_label"),browseLabel:e("common:component.fileUpload.label"),fieldInfoDescription:r.createElement("ul",{className:"glossary_upload_tooltip"},r.createElement("li",null,e("glossary:upload_file_hint3")),r.createElement("li",null,e("glossary:upload_file_hint4")),r.createElement("li",null,e("glossary:upload_file_hint2")),r.createElement("li",null,e("glossary:upload_file_hint5")))}),r.createElement("div",{className:"separator_languagePair_container"},r.createElement(e1.J,{label:e("glossary:separator"),onChange:e=>{m(e.target.value),_(!1)},name:"separator",formattedValue:S(g),value:g},Object.entries(t).map(e=>{let t=e[0],a=e[1];return r.createElement("option",{key:t,value:a},S(a))})),r.createElement(e1.J,{name:"languagePair",label:e("glossary:language_pair"),onChange:e=>{u(b.Z.convertToLangSourceAndLangTarget(e.target.value))},formattedValue:r.createElement(ef,{languagePair:d}),value:b.Z.convertToLangPair(d.langSource,d.langTarget)},eC.languagePairs.map(e=>{let t=b.Z.convertToLangPair(e.langSource,e.langTarget);return r.createElement("option",{key:t,value:t},t.toUpperCase())})))))}var e6={buttonContainer:"GlossaryUploadOrCreateModal-module--buttonContainer--qMJ8h",buttonCreate:"GlossaryUploadOrCreateModal-module--buttonCreate--HnvHE",title:"GlossaryUploadOrCreateModal-module--title--MxKPX"};let e3=()=>{let{t:e}=(0,v.$)("glossary"),{translatorInterface:t}=(0,r.useContext)(d.Z),a=(0,l.v9)(e=>e.glossary),{editorIsUploadOrCreateModalOpen:s}=a,n=(0,l.I0)(),o=m(),c=(0,r.useCallback)(()=>{n((0,i.q7)(!1))},[n]),u=(0,r.useCallback)(()=>{let e=a.userMultipleGlossariesLimit<=1&&a.isDownloadAndUploadEnabled&&o;n((0,i.q7)(!1)),e?n((0,i.$W)()):n((0,i.ic)(!0)),n((0,i.sc)({type:"TRANSLATOR_UPLOAD_OR_CREATE_LAYER_UPLOAD_CLICKED"}))},[n,a.isDownloadAndUploadEnabled,a.userMultipleGlossariesLimit,o]),y=(0,r.useCallback)(()=>{n((0,i.q7)(!1)),t.editorIsOpen(!0),n((0,i.ob)(!0)),n((0,i.sc)({type:"TRANSLATOR_UPLOAD_OR_CREATE_LAYER_CREATE_CLICKED"}))},[n,t]);return r.createElement(eE,{title:e("advanced_upload_accesspoint_title"),isOpen:s,onClose:c,small:g.N0,classNameTitle:e6.title},r.createElement("div",{className:e6.buttonContainer},r.createElement(h.z,{onClick:u},e("advanced_upload_accesspoint_button_upload")),r.createElement(h.z,{variant:"outline",className:e6.buttonCreate,onClick:y,"data-testid":"glossary-choose-manual-input-button"},e("advanced_upload_accesspoint_button_manually"))))};var e5=a(90619);let e9=e=>{let{0:t,1:a}=(0,r.useState)(e);return(0,r.useEffect)(()=>{e&&a(e)},[e]),t},e7=()=>{var e;let{t}=(0,v.$)("glossary"),a=(0,l.I0)(),s=(0,r.useRef)(null),{commandAskToRemoveGlossary:n,glossariesInfo:o}=(0,l.v9)(e=>e.glossary),{id:c,name:d,shared:u}=null!==(e=(null!=o?o:[]).find(e=>e.id===(null==n?void 0:n.glossaryId)))&&void 0!==e?e:{},g=e9(d),m=()=>{a((0,i.sc)({type:"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_DELETE_ICON_CLICKED"})),a((0,i.V0)(c))},y=()=>a((0,i.Db)()),_=t(u?"confirm_delete_shared_text":"confirm_delete_text");return r.createElement(e5.V,{open:null!==n,onClose:y,initialFocus:s},r.createElement(e5.V.Overlay,null),r.createElement(e5.V.Content,null,r.createElement(e5.V.Title,null,t("confirm_delete_title",{glossaryName:null!=d?d:g})),r.createElement(e5.V.Description,{className:"text-base"},_),r.createElement(e5.V.Buttons,null,r.createElement(h.z,{variant:"text",onClick:y},t("confirm_delete_button_cancel")),r.createElement(h.z,{ref:s,variant:"contained",color:"red",onClick:m},t("confirm_delete_button_delete")))))};var e8=a(4769),te=a(9443),tt=function(e,t){function a(e){let t={};return t.id=e.id,t.name=e.name,t.rights=e.rights,t.shared=e.shared,t}function r(a){b.Z.isFatalError(a)&&(b.Z.overwriteTermbaseRPCsWithEmptyFunctions(e),t())}return{changeGlossaryName:async function(t,a){let l;try{await e.changeTermbaseName({id:t,name:a})}catch(e){r(l=e)}return{glossaryName:l?null:a}},changeLangPairSet:async function(t,a){let l,s;let{id:n,langSource:o,langTarget:i,entries:c}=a,d=b.Z.convertToLangPair(o,i),u=b.Z.serializeGlossaryEntries(c);try{l=await e.changeTermDictionary({termbaseId:t,previousId:n||0,languagePair:d,entries:u})}catch(e){r(s=e)}return{langPairSetId:l,error:s}},changeGlossarySharedState:async function(t,a){let l;try{await e.changeTermbaseSharedState({id:t,shared:a})}catch(e){r(l=e)}return{success:!l}},createGlossary:async function(t){let a,l;try{a=await e.createTermbase({name:t})}catch(e){r(l=e)}return{newGlossaryId:a,error:l}},getAllGlossariesInfo:async function(){let t,l;try{let r=await e.getTermbases();t=r.map(a)}catch(e){r(l=e)}return{glossariesInfo:t,error:l}},getAllLangPairSets:async function(t){let a,l;try{let r=await e.getTermDictionaries({termbaseId:t});a=[],r.forEach(e=>{let{id:t,languagePair:r}=e,{langSource:l,langTarget:s}=b.Z.convertToLangSourceAndLangTarget(r),n=b.Z.parseGlossaryEntriesFromString(e.entries);a.push({id:t,langSource:l,langTarget:s,entries:n})})}catch(e){r(l=e)}return{langPairSets:a,success:!l,error:l}},getOneLangPairSet:async function(t,a,l){let s,n;try{let r=b.Z.convertToLangPair(a,l),n=await e.getTermDictionary({termbaseId:t,languagePair:r});s={id:n.id,langSource:a,langTarget:l,entries:b.Z.parseGlossaryEntriesFromString(n.entries)}}catch(e){r(n=e)}return{langPairSet:s,success:!n,error:n}},removeGlossary:async function(t){let a;if(t)try{await e.deleteTermbase({id:t})}catch(e){r(a=e)}return{success:!a}}}};let ta=function(){function e(e,t,a){this.defaultGlossaryName=a,this.storage=void 0,this.storage=tt(e,t)}var t=e.prototype;return t.initialize=async function(){let e;let{glossariesInfo:t}=await this.storage.getAllGlossariesInfo(),a=(0,te.OC)(eL.Fe.ActiveGlossaryId,"",eL.DJ);if(Array.isArray(t)&&t.length){let r=a(),l=t.some(e=>e.id===r),s=l?t.filter(e=>e.id===r)[0]:t.pop();(e=await this.loadGlossaryData(s)).glossariesInfo=t}else{let t={id:"",name:this.defaultGlossaryName,rights:eq.M.Admin,shared:!1};e={...t,langPairSets:[],glossariesInfo:[{...t}]}}return e},t.refreshGlossaries=async function(){let{glossariesInfo:e}=await this.storage.getAllGlossariesInfo();return e},t.loadGlossaryData=async function(e){let t;if(e.id){let{langPairSets:a}=await this.storage.getAllLangPairSets(e.id);t={...e,langPairSets:a}}return t},t._tryUploadGlossary=async function(e){let{glossaryName:t,langPairSets:a}=e;if(a.length<=0)return{success:!1};let{newGlossaryId:r}=await this.storage.createGlossary(t);if(!r)return{success:!1};let l=await Promise.all(a.map(e=>(e.id=void 0,e)).map(e=>this.storage.changeLangPairSet(r,e).then(t=>(e.id=t.langPairSetId,e))));for(let e of l)if(!e.id)return await this.storage.removeGlossary(r),{success:!1};return{success:!0,glossaryId:r}},t.uploadGlossary=async function(e){let{glossaryName:t,langPairSets:a,linesWithError:r,separator:l}=e,{success:s,glossaryId:n}=await this._tryUploadGlossary(e);return{success:s,id:n,name:t,langPairSets:a,separator:l,linesWithError:r}},t.createEntry=async function(e,t){let a,r,l=e.id,s=e.name,n=!1,o=!1,i=!1,{langSource:c,langTarget:d,textSource:u,textTarget:g,overwrite:m}=t,y={textSource:u,textTarget:g},_=b.Z.wouldCreatedEntryOverwrite(e.langPairSets,c,d,u);return(m||!_)&&(l||(s=this.defaultGlossaryName,l=(await this.storage.createGlossary(s)).newGlossaryId,o=!0),l&&((a=b.Z.getLangPairSetCopy(e.langPairSets,c,d))?(_?b.Z.replaceEntry(a,u,g):a.entries.push(y),r=(await this.storage.changeLangPairSet(l,a)).langPairSetId):(a={langSource:c,langTarget:d,entries:[y]},r=(await this.storage.changeLangPairSet(l,a)).langPairSetId,i=!0),r&&(n=!0,a.id=r))),{success:n,id:l,name:s,langPairSet:a,newGlossaryWasCreated:o,newLangPairSetWasCreated:i}},t.updateEntry=async function(e,t){let{langSource:a,langTarget:r,textSource:l,textTarget:s,entryToUpdate:n}=t;n.textSource=l,n.textTarget=s;let o=b.Z.getLangPairSetCopy(e.langPairSets,a,r);return o.id=(await this.storage.changeLangPairSet(e.id,o)).langPairSetId,{success:!0,langPairSet:o}},t.removeEntry=async function(e,t){let{langSource:a,langTarget:r,textSource:l,textTarget:s}=t,n=b.Z.getLangPairSetCopy(e.langPairSets,a,r);return n.entries=b.Z.removeEntry(n.entries,l,s),n.id=(await this.storage.changeLangPairSet(e.id,n)).langPairSetId,{success:!0,langPairSet:n}},t.createGlossary=async function(e){let{glossaryName:t}=e,{newGlossaryId:a}=await this.storage.createGlossary(t);return{success:!0,newGlossaryId:a}},t.removeGlossary=async function(e){let{glossaryId:t}=e,{success:a}=await this.storage.removeGlossary(t);return{success:a,removedGlossaryId:t}},t.changeGlossaryName=async function(e){let{glossaryId:t,newGlossaryName:a}=e,{glossaryName:r}=await this.storage.changeGlossaryName(t,a);return{glossaryId:t,glossaryName:r}},t.changeGlossarySharedState=async function(e){let{glossaryId:t,shared:a}=e,{success:r}=await this.storage.changeGlossarySharedState(t,a);return{success:r,shared:a}},e}();var tr=function(e,t){let a={name:t,langPairSets:[],rights:eq.M.Admin},r=e?(0,te.OC)(eL.Fe.EnterpriseUser,a):(0,te.OC)(eL.Fe.FreeUser,a,eL.DJ);return{readGlossaryData:async function(){let e=r();return{rights:eq.M.Admin,...e}},writeGlossaryData:async function(e){let t={...a};t.langPairSets=e.filter(e=>(e.entries||[]).length>0),r({...t})}}},tl=a(7130);let ts=function(){function e(e,t){this.storage=void 0,this.isEnterpriseUser=void 0,this.storage=tr(e,t),this.isEnterpriseUser=e}var t=e.prototype;return t.initialize=async function(){let e=await this.storage.readGlossaryData(),t=await this.migrate(e);return t},t.migrate=async function(e){if(!e.langPairSets)return e;let t=te.ZP.persistentValue(eL.Fe.DataMigration,!1);return t()||(e.langPairSets=e.langPairSets.map(e=>({...e,entries:e.entries.map(e=>({...e,textSource:(0,tl.Nw)(e.textSource),textTarget:(0,tl.Nw)(e.textTarget)}))})),this.storage.writeGlossaryData(e.langPairSets),t(!0)),e},t.createEntry=async function(e,t){let a;let{langPairSets:r}=e,l=b.Z.getAllEntriesCount(r),s=!1,n=!1,o=!1,i=!1;if(e&&(e.id||!(e.langPairSets.length<=0))||(i=!0),this.isEnterpriseUser||l<eL.Wn){let{langSource:e,langTarget:l,textSource:s,textTarget:i,overwrite:c}=t,d=b.Z.wouldCreatedEntryOverwrite(r,e,l,s);if(c||!d){let t=b.Z.getLangPairSetsCopy(r);(a=b.Z.getLangPairSet(t,e,l))?d?b.Z.replaceEntry(a,s,i):a.entries.push({textSource:s,textTarget:i}):(a={langSource:e,langTarget:l,entries:[{textSource:s,textTarget:i}]},t.push(a),o=!0),await this.storage.writeGlossaryData(t),n=!0}}else s=!0;return{success:n,showProAd:s,langPairSet:a,newLangPairSetWasCreated:o,newGlossaryWasCreated:i}},t.updateEntry=async function(e,t){let{langPairSets:a}=e,{langSource:r,langTarget:l,textSource:s,textTarget:n,entryToUpdate:o}=t;o.textSource=s,o.textTarget=n;let i=b.Z.getLangPairSetsCopy(a);await this.storage.writeGlossaryData(i);let c=b.Z.getLangPairSet(i,r,l);return{success:!0,langPairSet:c}},t.removeEntry=async function(e,t){let{langPairSets:a}=e,{langSource:r,langTarget:l,textSource:s,textTarget:n}=t,o=b.Z.getLangPairSet(a,r,l);o.entries=b.Z.removeEntry(o.entries,s,n),o.entries.length||(a=b.Z.removeLangPairSet(a,o));let i=b.Z.getLangPairSetsCopy(a);return await this.storage.writeGlossaryData(i),{success:!0,langPairSet:o}},e}();var tn=a(94287),to=function(e){var t,a;let s=(0,l.I0)(),n=(0,l.v9)(e=>e.glossary),{glossaryId:o}=n,c=n.glossaryShared,d=n.glossaryRights,u=(0,r.useMemo)(()=>(0,eM.r)(d,c),[c,d]),g=n.glossaryLangPairSets,m=(0,r.useMemo)(()=>g?g.reduce((e,t)=>e+t.entries.length,0):0,[g]);(0,r.useEffect)(()=>{if(!n.notification)return;let t=n.notification;switch(t.type){case"toggleSwitch":t.isEnabled&&e.onToggleGlossary({inButton:t.isInButton,enabled:t.isGlossaryEnabled,translatorCustomizationCollaborationState:u,numberOfAllCustomizationEntries:m,glossaryId:o});break;case"glossaryButtonClicked":e.onGlossaryButtonClicked();break;case"selectLangPair":e.onSelectGlossaryLanguagePair({langSource:t.langSource,langTarget:t.langTarget});break;case"selectSourceLang":e.onSelectGlossarySourceLang({langSource:t.langSource,langTarget:t.langTarget,...t.trackHighlighted&&{sourceIsHighlighted:t.sourceIsHighlighted,targetIsHighlighted:t.targetIsHighlighted}});break;case"selectTargetLang":e.onSelectGlossaryTargetLang({langSource:t.langSource,langTarget:t.langTarget,...t.trackHighlighted&&{sourceIsHighlighted:t.sourceIsHighlighted,targetIsHighlighted:t.targetIsHighlighted}});break;case"createEntryWithError":e.onGlossaryCreateEntryErrorMessageDisplayed({langSource:t.langSource,langTarget:t.langTarget,textSource:t.textSource,textTarget:t.textTarget});break;case"editEntryClicked":e.onEditEntryClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"removeEntryClicked":e.onDeleteEntryClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"proAd_proCta":e.onProAdProCtaClicked();break;case"proAd_secondaryCta":e.onProAdSecondaryCtaClicked();break;case"proUploadAd_displayed":e.onProUploadAdDisplayed();break;case"proUploadAd_proCta":e.onProUploadAdProCtaClicked();break;case"advancedAd_proCta":e.onAdvancedAdProCtaClicked();break;case"advancedAd_secondaryCta":e.onAdvancedAdSecondaryCtaClicked();break;case"TRANSLATOR_CUSTOMIZATION_LAYER_ADD_CUSTOMIZATION_CLICKED":e.onMultiGlossaryAddNewGlossaryLinkClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_CUSTOMIZATION_LAYER_ADD_TOOLTIP_ADD_CLICKED":e.onMultiGlossaryAddNewGlossaryButtonClicked({inputText:t.inputText,langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_CLICKED":e.onMultiGlossarySelectionDropdownClicked({isDropdownArrowDisplayed:t.isDropdownArrowDisplayed});break;case"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_DELETE_ICON_CLICKED":e.onMultiGlossaryDeleteGlossaryClicked({translatorCustomizationCollaborationState:u,glossaryId:o});break;case"TRANSLATOR_CUSTOMIZATION_LAYER_CUSTOMIZATION_SELECTION_DROPDOWN_EDIT_ICON_CLICKED":e.onMultiGlossaryEditGlossaryClicked({glossaryId:o});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_DISPLAYED":e.onMultiGlossaryFreeUserPromotionDisplayed({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_PRO_CtA_CLICKED":e.onMultiGlossaryFreeUserCTAClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_PRO_PROMOTION_OVERLAY_SECONDARY_BUTTON_CLICKED":e.onMultiGlossaryFreeUserSecondaryButtonClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_DISPLAYED":e.onMultiGlossaryStarterUserPromotionDisplayed({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_PRO_CtA_CLICKED":e.onMultiGlossaryStarterUserCTAClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_MULTIPLE_GLOSSARIES_UPGRADE_OVERLAY_SECONDARY_BUTTON_CLICKED":e.onMultiGlossaryStarterUserSecondaryButtonClicked({langSource:t.langSource,langTarget:t.langTarget});break;case"TRANSLATOR_CUSTOMIZATION_LAYER_UPLOAD_CLICKED":e.onEditorUploadGlossaryClicked();break;case"TRANSLATOR_UPLOAD_OR_CREATE_LAYER_UPLOAD_CLICKED":e.onUploadOrCreateLayerUploadGlossaryClicked();break;case"TRANSLATOR_UPLOAD_OR_CREATE_LAYER_CREATE_CLICKED":e.onUploadOrCreateLayerCreateGlossaryClicked();break;case"TRANSLATOR_GLOSSARY_UPLOAD_STARTED":e.onUploadGlossaryStarted({langSource:t.langSource,langTarget:t.langTarget,fileSize:t.fileSize,fileType:t.fileType,separator:t.separator,entriesCount:t.entriesCount});break;case"TRANSLATOR_GLOSSARY_UPLOAD_FINISHED":e.onUploadGlossaryFinished({success:t.success,entriesCount:t.entriesCount,langSource:t.langSource,langTarget:t.langTarget,separator:t.separator,glossaryId:o});break;case"TRANSLATOR_DOWNLOAD_LINK_CLICKED":e.onDownloadLinkClicked({translatorCustomizationCollaborationState:u,glossaryId:o});break;case"sharedStateToggled":e.onSharedStateToggles({mode:t.toggleMode,numberOfAllCustomizationEntries:m,glossaryId:o});break;case"dropdownGlossarySelected":e.onDropdownGlossarySelected({glossaryId:t.glossaryId,numberOfAllCustomizationEntries:m,rights:t.rights,isShared:t.isShared});break;case"glossarySelected":e.onGlossarySelected({glossaryId:t.glossaryId,numberOfAllCustomizationEntries:m,rights:t.rights,isShared:t.isShared});break;case"sharedNotificationShown":e.onSharedNotificationShown({sharedNotificationActionType:t.sharedNotificationActionType,numberOfNewlySharedGlossaries:t.numberOfNewlySharedGlossaries});break;case"sharedNotificationAction":e.onSharedNotificationAction({sharedNotificationActionType:t.sharedNotificationActionType,numberOfNewlySharedGlossaries:t.numberOfNewlySharedGlossaries});break;case"glossaryDropdownClicked":e.onGlossaryDropdownClicked();break;case"glossarySuggestionsPopup":e.onGlossarySuggestionsPopup({langSource:t.langSource,langTarget:t.langTarget})}s((0,i.sc)(null))},[e,n.notification]);let{langSource:y,langTarget:_,textSource:p,textTarget:E,from:f}=null!==(t=n.commandCreateEntry)&&void 0!==t?t:{},{success:h}=null!==(a=n.commandCreateEntrySuccess)&&void 0!==a?a:{};(0,r.useEffect)(()=>{h&&(e.onGlossaryEntryCreated({langSource:y,langTarget:_,textSource:p,textTarget:E,from:f}),s({type:tn.Hx.SET_BUTTON_STATE,payload:{commandCreateEntrySuccess:null}}))},[s,e,y,_,p,E,f,h]),(0,r.useEffect)(()=>{n.showProAd&&e.onProAdDisplayed()},[e,n.showProAd])};let ti=()=>{let{t:e}=(0,v.$)("glossary"),{requestProPage:t}=(0,r.useContext)(d.Z),a=(0,l.I0)(),s=(0,l.v9)(e=>e.glossary),n=g.FA;(0,r.useEffect)(()=>{s.showProUploadAd&&a((0,i.sc)({type:"proUploadAd_displayed"}))},[s.showProUploadAd]);let o=()=>{a((0,i.fy)(!1))},c=()=>{t({cta:s.showProUploadAd}),o(),a((0,i.sc)({type:"proUploadAd_proCta"}))};return r.createElement(_.T,{open:!!s.showProUploadAd,onClose:o},r.createElement(p.t,null),r.createElement(E.F,{className:"lmt__glossary_ad_wrapper"},r.createElement(f.V.Title,{className:"lmt__glossary_ad_headline"},e("pro_uploadDownload_ad_headline")),r.createElement(f.V.Description,{className:"lmt__glossary_ad_subtext"},e("pro_uploadDownload_ad_subtext")),n?r.createElement("div",{className:"lmt__glossary_ad_buttons"},r.createElement(h.z,{variant:"contained",color:"secondary",onClick:c},e("advanced_ad_button_try_pro")),r.createElement("div",{className:"lmt__glossary_ad_buttons__sep"},e("pro_ad_or")),r.createElement(h.z,{className:"cancelButton",variant:"outline",color:"primary",onClick:o},e("advanced_ad_button_cancel"))):r.createElement("div",{className:"lmt__glossary_upload_ad_buttons"},r.createElement(h.z,{className:"cancelButton",variant:"outline",color:"primary",onClick:o},e("advanced_ad_button_cancel")),r.createElement(h.z,{variant:"contained",color:"secondary",onClick:c},e("advanced_ad_button_try_pro"))),r.createElement(S.i,{onClick:o})))},tc=()=>{let{languageManagement:e}=(0,r.useContext)(d.Z);return(0,r.useMemo)(()=>{var t;let{prioritizedLangs:a,targetLang:r}=b.Z.getPrioritizedSourceLangsAndTargetLang(e),l=null!==(t=a.find(e=>ew.J3.includes(e)))&&void 0!==t?t:ew.F6,s=ew.J3.includes(r)?r:ew.R7;l===s&&(s=ew.J3.find(e=>e!==l));let n=[l,s];if(eL.Gr)return n;let o=eO(l,s);if(o)return n;let i=eA(l);return i?[l,eP(l,i)]:[ew.F6,ew.R7]},[e])},td=()=>{let{t:e}=(0,v.$)("glossary"),[t,a]=tc(),{0:s,1:n}=(0,r.useState)(t),{0:o,1:c}=(0,r.useState)(a),{0:d,1:u}=(0,r.useState)(!1),{0:g,1:m}=(0,r.useState)(!1),{0:y,1:_}=(0,r.useState)(),p=(0,l.I0)(),E=(0,r.useCallback)(function(t,a){if(void 0===a&&(a=!1),!t)return;let{languageCode:r}=t.attachment;if(r!==s){if(u(t.highlighted||!1),n(r),p((0,i.sc)({type:"selectSourceLang",trackHighlighted:a,langSource:r,langTarget:o,...a&&{sourceIsHighlighted:t.highlighted,targetIsHighlighted:g}})),r===o){c(s);return}_(void 0),eO(r,o)||_(e("error_unsupported_language_pair"))}},[p,o,s,g,e]),f=(0,r.useCallback)(function(t,a){if(void 0===a&&(a=!1),!t)return;let{languageCode:r}=t.attachment;if(r!==o){if(m(t.highlighted||!1),c(r),p((0,i.sc)({type:"selectTargetLang",trackHighlighted:a,langSource:s,langTarget:r,...a&&{sourceIsHighlighted:d,targetIsHighlighted:t.highlighted}})),r===s){n(o);return}_(void 0),eO(r,s)||_(e("error_unsupported_language_pair"))}},[p,o,s,d,e]);return{sourceLang:s,targetLang:o,updateSourceLang:E,updateTargetLang:f,languagePairError:y}},tu=()=>{let{t:e}=(0,v.$)("glossary"),{0:t,1:a}=(0,r.useState)(),{0:l,1:s}=(0,r.useState)(),n=(0,r.useCallback)(r=>{r!==t&&(a(r),s(void 0),b.Z.hasTextInputValidChars(null!=r?r:"")||s(e("editor_invalid_character")),b.Z.isTextWithinSizeLimit(null!=r?r:"")||s(e("editor_input_text_too_long")))},[e,t]);return[t,n,l]},tg=e=>{let{children:t}=e,{sourceLang:a,targetLang:l,updateSourceLang:s,updateTargetLang:n,languagePairError:o}=td(),[i,c,d]=tu(),[u,g,m]=tu();return r.createElement(F.Provider,{value:{sourceLang:a,sourceValue:i,sourceError:d,updateSourceValue:c,updateSourceLang:s,targetLang:l,targetValue:u,targetError:m,updateTargetValue:g,updateTargetLang:n,languagePairError:o}},t)};function tm(e){let{isGlossaryEnabled:t,glossaryLangPairSets:a,glossaryId:s,glossariesInfo:n,glossaryShared:o,glossaryRights:u,glossaryNotifications:g,setGlossaryEnabledState:_}=e,{popups:p,translatorInterface:E,persistentValue:f}=(0,r.useContext)(d.Z),h=(0,ev.s)(),S=(0,l.v9)(e=>e.glossary),C=(0,l.I0)(),I=(0,r.useRef)(E),T=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{T.current||(c.ZP.withValue(_,e=>{null!==e&&(I.current.glossaryIsEnabled(e),C((0,i.Zw)(e)))}),T.current=!0)}),(0,r.useEffect)(()=>{let e=()=>{setTimeout(()=>{S.commandAskToRemoveGlossary&&C((0,i.Db)()),S.editorIsOpen&&(I.current.editorIsOpen(!1),C((0,i.ob)(!1)),ey(!1)),S.editorIsUploadOrCreateModalOpen&&C((0,i.q7)(!1)),S.editorIsUploadGlossaryDialogOpen&&C((0,i.ic)(!1)),S.showAdvancedAd&&C((0,i.bI)(!1)),S.showProAd&&C((0,i.P5)(!1)),S.showProUploadAd&&C((0,i.fy)(!1))},0)};return p.onHide.push(e),()=>{p.onHide.remove(e)}},[C,S,p.onHide]),to(g),g.onReady(),(0,r.useEffect)(()=>{t(S.glossaryIsEnabled)},[S.glossaryIsEnabled,t,f]),(0,r.useEffect)(()=>{a(S.glossaryLangPairSets)},[a,S.glossaryLangPairSets]),(0,r.useEffect)(()=>{s(S.glossaryId)},[s,S.glossaryId]),(0,r.useEffect)(()=>{n(S.glossariesInfo)},[n,S.glossariesInfo]),(0,r.useEffect)(()=>{o(S.glossaryShared)},[o,S.glossaryShared]),(0,r.useEffect)(()=>{u(S.glossaryRights)},[u,S.glossaryRights]),(0,r.useEffect)(()=>{let e=S.asyncOperationsCount>0;e?(I.current.isAsyncPending(!0),C((0,i.HI)(e))):(I.current.isAsyncPending(!1),C((0,i.HI)(!1)))},[C,S.asyncOperationsCount]),y(),!function(){let{0:e,1:t}=(0,r.useState)(null),{termbaseRpc:a,translatorInterface:s,persistentValue:n}=(0,r.useContext)(d.Z),{t:o}=(0,v.$)("glossary"),c=o("default_glossary_name"),u=(0,l.I0)(),g=(0,l.v9)(e=>e.glossary),y=()=>({id:g.glossaryId,name:g.glossaryName,rights:g.glossaryRights,shared:g.glossaryShared,langPairSets:g.glossaryLangPairSets});(0,r.useEffect)(()=>{g.storageIsDecided&&(g.storageUseLocal?t(new ts(g.userIsEnterprise,c)):t(new ta(a,()=>{g.hasFatalError||(s.hasFatalError(!0),u((0,i.Xx)()))},c)))},[g.storageIsDecided]),(0,r.useEffect)(()=>{e&&e.initialize().then(e=>{e.id&&n.activeGlossaryId(e.id),u((0,i.c2)({...e,suggestionsHasDialogBeenShown:n.hasDialogBeenShown()},n.glossaryIsEnabled))})},[u,e]),(0,r.useEffect)(()=>{g.isInitialized&&(g.storageUseLocal||p(),s.glossaryId(g.glossaryId),s.glossaryLangPairSets(g.glossaryLangPairSets),s.glossaryIsEnabled(g.glossaryIsEnabled),s.isInitialized(!0))},[g.isInitialized]),(0,r.useEffect)(()=>{g.isInitialized&&"boolean"==typeof g.glossaryIsEnabled&&(s.glossaryIsEnabled(g.glossaryIsEnabled),n.glossaryIsEnabled(g.glossaryIsEnabled))},[g.isInitialized,g.glossaryIsEnabled]),(0,r.useEffect)(()=>{let t=!0;if(!g.storageUseLocal&&g.glossaryId&&!g.hasFatalError&&e){u((0,i.Tl)());let a=y(),r=async()=>{if(!t)return;let r=await e.refreshGlossaries(),l=await e.loadGlossaryData(a);l.id&&n.activeGlossaryId(l.id),u((0,i.c2)({...l,glossariesInfo:r,suggestionsHasDialogBeenShown:n.hasDialogBeenShown()},n.glossaryIsEnabled))};r()}return()=>{t=!1}},[g.editorIsOpen,g.glossaryId]),(0,r.useEffect)(()=>{g.glossaryId&&s.glossaryId(g.glossaryId)},[g.glossaryId]),(0,r.useEffect)(()=>{g.commandCreateEntry&&e&&e.createEntry(y(),g.commandCreateEntry).then(e=>{let{success:t,id:a,name:r,langPairSet:l,newGlossaryWasCreated:n,newLangPairSetWasCreated:c,showProAd:d}=e,m={commandCreateEntrySuccess:{success:t}};if(t){if(n){var y;m.glossaryId=a,m.glossaryName=null!=r?r:o("default_glossary_name"),m.glossaryRights=eq.M.Admin,m.glossaryShared=!1,m.glossariesInfo=null===(y=g.glossariesInfo)||void 0===y?void 0:y.map(e=>""===e.id&&e.name===r?{id:a,name:r,rights:eq.M.Admin,shared:!1}:e)}let e=g.glossaryLangPairSets||[];m.glossaryLangPairSets=c?[].concat((0,e8.Z)(e),[l]):b.Z.replaceLangPairSet(e,l),s.glossaryLangPairSets(m.glossaryLangPairSets);let t=b.Z.getAllEntriesCount(m.glossaryLangPairSets);1===t&&(m.glossaryIsEnabled=!0,m.onOffSwitchIsEnabled=!0),m.glossaryIsEnabled||"dialog"!==g.commandCreateEntry.from||(m.glossaryIsEnabled=!0,m.onOffSwitchIsEnabled=!0)}else d&&(m.showProAd=!0,m.editorIsOpen=!1,m.editorIsLangPairMenuOpen=!1,m.editorEntryInEditMode=null,m.editorEntryInEditModeSide=null,s.editorIsOpen(!1));u((0,i.rO)(m))})},[g.commandCreateEntry]),(0,r.useEffect)(()=>{g.commandUpdateEntry&&e&&e.updateEntry(y(),g.commandUpdateEntry).then(e=>{let{success:t,langPairSet:a}=e,r={commandUpdateEntrySuccess:{success:!0}};t&&(r.glossaryLangPairSets=b.Z.replaceLangPairSet(g.glossaryLangPairSets,a),s.glossaryLangPairSets(r.glossaryLangPairSets)),u((0,i.C7)(r))})},[g.commandUpdateEntry]),(0,r.useEffect)(()=>{g.commandRemoveEntry&&e&&e.removeEntry(y(),g.commandRemoveEntry).then(e=>{let{success:t,langPairSet:a}=e,r={commandRemoveEntrySuccess:{success:!0}};if(t){r.glossaryLangPairSets=a.entries.length>0?b.Z.replaceLangPairSet(g.glossaryLangPairSets,a):b.Z.removeLangPairSet(g.glossaryLangPairSets,a),s.glossaryLangPairSets(r.glossaryLangPairSets);let e=b.Z.getAllEntriesCount(r.glossaryLangPairSets);0===e&&(r.glossaryIsEnabled=!1,r.onOffSwitchIsEnabled=!1)}u((0,i.$8)(r))})},[g.commandRemoveEntry]),(0,r.useEffect)(()=>{g.commandCreateGlossary&&e&&e.createGlossary(g.commandCreateGlossary).then(e=>{let{newGlossaryId:t}=e,a={commandCreateGlossarySuccess:{success:null!=t},asyncOperationsCount:g.asyncOperationsCount-1};if(t){let{glossaryName:e}=g.commandCreateGlossary;a.glossaryId=t,a.glossaryName=e,a.glossaryRights=eq.M.Admin,a.glossaryShared=!1;let r=g.glossariesInfo||[];r=r.filter(e=>(e.id||"").length>0),a.glossariesInfo=[].concat((0,e8.Z)(r),[{id:t,name:e,rights:eq.M.Admin,shared:!1}])}n.activeGlossaryId(t),s.glossaryId(t),u((0,i.cj)(a))})},[g.commandCreateGlossary]),(0,r.useEffect)(()=>{g.commandUploadGlossary&&!g.useLocal&&e&&e.uploadGlossary(g.commandUploadGlossary).then(e=>{let{success:t,id:a,name:r,langPairSets:l,linesWithError:n,separator:o}=e;for(let e of l)u((0,i.sc)({type:"TRANSLATOR_GLOSSARY_UPLOAD_FINISHED",success:t,langSource:e.langSource,langTarget:e.langTarget,separator:b.Z.getSeparatorText(o),entriesCount:e.entries.length}));let c={commandUploadGlossarySuccess:{success:t,linesWithError:n,id:a}};if(t){c.glossaryId=a,c.glossaryName=r,c.glossaryRights=eq.M.Admin,c.glossaryShared=!1;let e=g.glossariesInfo||[];e.push({id:a,name:r,rights:eq.M.Admin,shared:!1}),c.glossariesInfo=e,c.glossaryLangpairSets=l,s.glossaryLangPairSets(c.glossaryLangPairSets)}u((0,i.Zs)(c))})},[g.commandUploadGlossary]),(0,r.useEffect)(()=>{g.commandRemoveGlossary&&e&&e.removeGlossary(g.commandRemoveGlossary).then(e=>{let{success:t,removedGlossaryId:a}=e,r={commandRemoveGlossarySuccess:{success:!0}};if(t&&(r.glossariesInfo=g.glossariesInfo.filter(e=>e.id!==a),a===g.glossaryId||""===a)){let e,t,a,l;r.glossariesInfo.length?(e=r.glossariesInfo[0].id,t=r.glossariesInfo[0].name,a=r.glossariesInfo[0].rights,l=r.glossariesInfo[0].shared):(e="",t=c,a=eq.M.Admin,l=!1,r.glossaryLangPairSets=[],r.glossariesInfo=[{id:e,name:t,rights:a,shared:l}]),n.activeGlossaryId(e),s.glossaryId(e),r.glossaryId=e,r.glossaryName=t,r.glossaryRights=a,r.glossaryShared=l}u((0,i.YF)(r))})},[g.commandRemoveGlossary]),(0,r.useEffect)(()=>{g.commandChangeGlossaryName&&e&&e.changeGlossaryName(g.commandChangeGlossaryName).then(e=>{let{glossaryId:t,glossaryName:a}=e,r={commandChangeGlossaryNameSuccess:{success:null!=a},asyncOperationsCount:g.asyncOperationsCount-1};a&&(g.glossaryId===t&&(r.glossaryName=a),r.glossariesInfo=(0,e8.Z)((g.glossariesInfo||[]).map(e=>(e.id===t&&(e.name=a),e)))),r.editorGlossaryInNameEditMode=null,u((0,i.bC)(r))})},[g.commandChangeGlossaryName]),(0,r.useEffect)(()=>{g.commandChangeGlossarySharedState&&e&&e.changeGlossarySharedState(g.commandChangeGlossarySharedState).then(e=>{let{success:t,shared:a}=e,r={};t&&(r.commandChangeGlossarySharedStateSuccess={success:t},r.glossaryShared=a,r.glossariesInfo=(0,e8.Z)((g.glossariesInfo||[]).map(e=>(e.id===g.glossaryId&&(e.shared=a),e)))),u((0,i.Dt)(r))})},[g.commandChangeGlossarySharedState]),(0,r.useEffect)(()=>{let{glossaryLangPairSets:e}=g;s.glossaryLangPairSets(e),u((0,i.Gv)(n.glossaryIsEnabled()))},[g.glossaryLangPairSets]),(0,r.useEffect)(()=>{if(g.storageUseLocal||!g.termbaseHasError||!e)return;let t=window.setTimeout(()=>{e.loadGlossaryData(y()).then(()=>{s.termbaseHasError(!1),u((0,i.dS)(!1))})},eL.UJ);u((0,i.Z5)(t))},[g.termbaseHasError]),(0,r.useEffect)(()=>{if(!Array.isArray(g.entriesToCreateQueue)||!g.entriesToCreateQueue.length)return;let e=g.entriesToCreateQueue[0],{langSource:t,langTarget:a,textSource:r,textTarget:l}=e;u((0,i.hk)({from:"queue",langSource:t,langTarget:a,textSource:b.Z.sanitizeTextInput(r),textTarget:b.Z.sanitizeTextInput(l),overwrite:!1}))},[g.entriesToCreateQueue]),(0,r.useEffect)(()=>{if(g.commandCreateEntrySuccess&&g.commandCreateEntrySuccess&&Array.isArray(g.entriesToCreateQueue)&&g.entriesToCreateQueue.length){g.entriesToCreateQueue.shift();let e=(0,e8.Z)(g.entriesToCreateQueue);u((0,i.Zz)(e))}},[g.commandCreateEntrySuccess]);let _=m();async function p(){let e=new ts(g.userIsEnterprise,c),{storage:t}=e;t.readGlossaryData().then(e=>{if(!e||!e.langPairSets||!e.langPairSets.length)return;let a=[];for(let t=0;t<e.langPairSets.length;t+=1){let{langSource:r,langTarget:l,entries:s}=e.langPairSets[t];for(let e=0;e<s.length;e+=1){let{textSource:t,textTarget:n}=s[e];a.push({langSource:r,langTarget:l,textSource:t,textTarget:n})}}u((0,i.Zz)(a)),t.writeGlossaryData([])})}(0,r.useEffect)(()=>{if(!g.commandUploadGlossarySuccess)return;let{success:e,linesWithError:t,id:a}=g.commandUploadGlossarySuccess;if(e){let e=g.userMultipleGlossariesLimit<=1&&g.isDownloadAndUploadEnabled&&!g.editorIsUploadGlossaryDialogOpen&&_;u((0,i.wW)({id:a,linesWithError:t})),e?u((0,i.zz)()):u((0,i.EJ)()),s.editorIsOpen(!0),u((0,i.ob)(!0))}else u((0,i.Fn)())},[g.commandUploadGlossarySuccess])}(),r.createElement(tg,null,S.editorIsOpen&&(h?r.createElement(ek,null):r.createElement(eW,null)),r.createElement(eQ,null),r.createElement(w,null),r.createElement(eV,null),r.createElement(ti,null),S.isDownloadAndUploadEnabled&&r.createElement(e4,null),r.createElement(e3,null),r.createElement(e7,null))}let ty=e=>{let{children:t}=e,a=o(),n=(0,l.I0)(),c=(0,s.V9)("glossary");if(c&&setTimeout(()=>{n((0,i.D3)(!0)),n((0,i.ob)(!0))},0),(0,r.useEffect)(()=>{function e(e){let{hash:t}=new URL(e.newURL),{hash:a}=new URL(e.oldURL);if(t===a)return;let r="#glossary"===t;n((0,i.D3)(r)),n((0,i.ob)(r))}return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[n]),!a)return t(!1);let{dependencies:u,translatorInterface:g,isGlossaryEnabled:m,glossaryLangPairSets:y,glossaryId:_,glossariesInfo:p,glossaryShared:E,glossaryRights:f,setGlossaryEnabledState:h,glossaryNotifications:S}=a;return r.createElement(d.Z.Provider,{value:{...u,translatorInterface:g,config:u.config}},r.createElement(tm,{isGlossaryEnabled:m,glossaryLangPairSets:y,glossaryId:_,glossariesInfo:p,glossaryShared:E,glossaryRights:f,glossaryNotifications:S,setGlossaryEnabledState:h}),t(!0))};var t_=ty},37083:function(e,t,a){a.d(t,{r:function(){return l}});var r=a(52644);let l=(e,t)=>{let a=0;switch(e){case r.M.Admin:a=1;break;case r.M.Editor:a=2;break;case r.M.User:a=3}return{rights:a,isShared:t}}},89920:function(e,t,a){a.r(t),a.d(t,{GlossaryButtonContainer:function(){return A},default:function(){return P}});var r=a(27378),l=a(41945),s=a(67923),n=a(34681),o=a(74394),i=a(11602),c=a(49359),d=a(66442),u=a(61756),g=a(14512),m=a(6713),y=a(12652),_=function(e){let{isInButton:t=!1,isOnDarkBackground:a=!1}=e,{t:s}=(0,n.$)("glossary"),{translatorInterface:i,persistentValue:c}=(0,r.useContext)(g.Z),{glossaryIsEnabled:d,onOffSwitchIsEnabled:u}=(0,l.v9)(e=>e.glossary),m=(0,l.I0)(),_=(e,a)=>{i.beforeUserInteraction(),m((0,o.sc)({type:"toggleSwitch",isEnabled:u,isInButton:t,isGlossaryEnabled:e})),u?(i.glossaryIsEnabled(e),m((0,o.Zw)(e)),c.glossaryIsEnabled(e)):t&&(i.editorIsOpen(!0),m((0,o.ob)(!0))),a.stopPropagation()};return r.createElement(y.Z,{toggledOn:d,onToggle:_,label:s("toggle_label"),hideLabel:!0,size:"small",testId:"glossary-on-off-switch",disabled:!u,isOnDarkBackground:a})};let p=e=>{let{withChevron:t=!1,isInWebOptionsDropdown:a=!1}=e,{translatorInterface:s}=(0,r.useContext)(g.Z),y=(0,l.I0)(),p=(0,l.v9)(e=>e.glossary),E=(0,r.useContext)(g.Z),{coreConfig:f}=E,{t:h}=(0,n.$)("glossary"),S=(0,m.s)(),v=()=>{p.buttonIsReadyForUse&&(y((0,o.sc)({type:"glossaryButtonClicked"})),S&&p.isDownloadAndUploadEnabled?y((0,o.q7)(!0)):(s.editorIsOpen(!0),y((0,o.ob)(!0))))},C=d.N0&&t,I=f.get("isWriteMode");return p.storageIsDecided&&!I?r.createElement(r.Fragment,null,r.createElement("div",{className:(0,c.Ch)(["lmt__glossaryButton",p.buttonIsReadyForUse&&"ready",!a&&"toggle-left"])},r.createElement(u.Z,{tip:h("tooltip_customization_button"),position:d.N0?["left","auto"]:["top","auto"],maxWidth:d.N0?512:160},r.createElement("button",{id:"glossary-button",type:"button",onClick:v,className:(0,c.Ch)(["lmt__glossaryButton__desktop",p.glossaryIsEnabled&&"switchedOn",p.onOffSwitchIsEnabled&&"switchVisible",a&&"!border-none"])},r.createElement("div",{className:`lmt__glossary_button ${p.buttonHasDialogStyle?"dialog":""} ${a&&"!border-none"}`},r.createElement("div",{className:"lmt__glossary_button_label","data-testid":"glossary-button"},h("customization"),C&&r.createElement(i.v,{className:"h-6 w-6","aria-hidden":!0}))))),p.onOffSwitchIsEnabled&&r.createElement("div",{className:"lmt__glossary_onOffSwitch_container"},r.createElement(_,{isInButton:!0})))):null};var E=a(14494),f=a(41510),h=a(42274),S=a(26908),v=a(48861),C=a(52644),I={wrapper:"GlossarySelect-module--wrapper--04ofJ",switchWrapper:"GlossarySelect-module--switchWrapper--o-213",dropdownWrapper:"GlossarySelect-module--dropdownWrapper--4DCj4",listboxWrapper:"GlossarySelect-module--listboxWrapper--P55TH",button:"GlossarySelect-module--button--RZP40",buttonIcon:"GlossarySelect-module--buttonIcon--qkU3k",flyout:"GlossarySelect-module--flyout--rTbn4",option:"GlossarySelect-module--option--dz9Bw",optionName:"GlossarySelect-module--optionName--fpoTd",optionNameName:"GlossarySelect-module--optionNameName--lGu01",sharedIcon:"GlossarySelect-module--sharedIcon--PkHEq",iconOfSelected:"GlossarySelect-module--iconOfSelected--eFtFD",active:"GlossarySelect-module--active--KOqia",withBorderOnFlyout:"GlossarySelect-module--withBorderOnFlyout--cPazC",manageOption:"GlossarySelect-module--manageOption--wwQed",manageOptionIcon:"GlossarySelect-module--manageOptionIcon--X-Gr3",manageOptionActive:"GlossarySelect-module--manageOptionActive--s4Awy",empty:"GlossarySelect-module--empty--jzgz2",hidden:"GlossarySelect-module--hidden--g7cu8"},b=a(95177),T=a(37083);let w=e=>{let{isInWebOptionsDropdown:t}=e,{translatorInterface:a,persistentValue:s,il:y}=(0,r.useContext)(g.Z),p=(0,l.I0)(),w=(0,l.v9)(e=>e.glossary),L=(0,r.useMemo)(()=>{var e;return b.Z.sortGlossaries(null!==(e=w.glossariesInfo)&&void 0!==e?e:[],y)},[w,y]),{t:N}=(0,n.$)("glossary"),O=(0,m.s)(),A=()=>{w.buttonIsReadyForUse&&(p((0,o.sc)({type:"glossaryButtonClicked"})),O&&w.isDownloadAndUploadEnabled?p((0,o.q7)(!0)):(a.editorIsOpen(!0),p((0,o.ob)(!0))))},P=e=>{if("manage"===e){A();return}if(e!==w.glossaryId){a.beforeUserInteraction(),s.activeGlossaryId(e),p((0,o.hb)(e));let t=L.find(t=>t.id===e);window.setTimeout(()=>{p((0,o.sc)({type:"dropdownGlossarySelected",glossaryId:e,...(0,T.r)((null==t?void 0:t.rights)||C.M.User,(null==t?void 0:t.shared)||!1)}))},2e3),w.glossaryIsEnabled||(window.setTimeout(()=>{p((0,o.sc)({type:"toggleSwitch",isEnabled:!0,isInButton:!1,isGlossaryEnabled:!0}))},1500),a.glossaryIsEnabled(!0),p((0,o.Zw)(!0)),s.glossaryIsEnabled(!0))}},R=()=>p((0,o.sc)({type:"glossaryDropdownClicked"}));return w.storageIsDecided?r.createElement("div",{className:(0,c.Ch)(I.wrapper,"glossary-custom-dialog-anchor","lmt__glossaryButtonContainer__border",t&&"!border-none !pl-0")},!t&&r.createElement("div",{className:`${I.switchWrapper}`},r.createElement(_,{isInButton:!0})),r.createElement("div",{className:(0,c.Ch)(I.dropdownWrapper,t&&"grow")},r.createElement(u.Z,{tip:N("tooltip_customization_button"),position:["top"],maxWidth:160,disabled:d.N0},r.createElement(E.R,{value:w.glossaryId,onChange:P},e=>{let{open:t,disabled:a}=e;return r.createElement("div",{className:(0,c.Ch)(I.listboxWrapper,L.length<=0?I.empty:"")},r.createElement(E.R.Label,{className:I.hidden},N("label_glossary_selection")),r.createElement(E.R.Button,{className:`${I.button} !pl-[10px]`,onClick:R,"data-testid":"glossary-button"},r.createElement("span",null,w.glossaryName),r.createElement("span",{className:I.buttonIcon},t?r.createElement(f.g,null):r.createElement(i.v,null))),r.createElement(E.R.Options,{className:(0,c.Ch)(I.flyout,I.withBorderOnFlyout),as:"ol"},L.map(e=>r.createElement(E.R.Option,{key:e.id,value:e.id,as:r.Fragment},t=>{let{active:a,selected:l}=t;return r.createElement("li",{className:(0,c.Ch)(I.option,a?I.active:"")},r.createElement("span",{className:I.optionName},r.createElement("span",{className:I.optionNameName},e.name),e.shared&&r.createElement("span",{className:I.sharedIcon,"aria-label":N("label_shared_glossary")},r.createElement(h.o,null))),r.createElement("span",{className:I.iconOfSelected,"aria-hidden":!0},l&&r.createElement(S.n,null)))})),r.createElement(E.R.Option,{key:"manage",value:"manage",as:r.Fragment},e=>{let{active:t}=e;return r.createElement("li",{className:(0,c.Ch)(I.manageOption,t?I.manageOptionActive:""),"data-testid":"manage-glossaries-button"},r.createElement("span",{className:I.manageOptionIcon},r.createElement(v.i,null)),r.createElement("span",null,N("label_manage_glossaries")))})))}))),t&&r.createElement("div",{className:`${I.switchWrapper}`},r.createElement(_,{isInButton:!0}))):null};var L=a(4769),N=a(75671);let O=e=>{let{0:t,1:a}=(0,r.useState)([]);return(0,r.useEffect)(()=>{if(!e||e.length<=0)return;let t=(0,N.O)("dl_known_glossaries.ids",[]),r=e.reduce((e,a)=>a.rights===C.M.Admin||t().includes(a.id)?e:[].concat((0,L.Z)(e),[a.name]),[]);a(e=>e.length>0?e:r),t(e.map(e=>e.id))},[e]),t},A=e=>{var t;let{withChevron:a=!1,isInWebOptionsDropdown:i}=e,c=(0,l.I0)(),{t:d}=(0,n.$)(["index","glossary"]),u=null!==(t=(0,l.v9)(e=>e.glossary.glossariesInfo))&&void 0!==t?t:[],g=O(u),m="";1===g.length?m=d("glossary:shared_glossary_notification",{glossaryName:`${g[0]}`}):g.length>=2&&(m=d("glossary:shared_glossaries_notification",{numberOfGlossaries:`${g.length}`}));let y=(0,r.useCallback)(e=>{c((0,o.sc)({type:"sharedNotificationAction",sharedNotificationActionType:e,numberOfNewlySharedGlossaries:g.length}))},[c,g]),[_,E]=(0,s.R)({callout:{ariaCloseLabel:d("index:buttonClose"),onClose:()=>y(2),id:"shared-glossary-notification",title:m},shortcutPhrase:d("index:shortcut_callout_interaction")});(0,r.useEffect)(()=>{m.length>0&&window.setTimeout(()=>{E(3e4,()=>y(1)),c((0,o.sc)({type:"sharedNotificationShown",numberOfNewlySharedGlossaries:g.length}))},5e3)},[m,E,y,g,c]);let f=u.length<=1?r.createElement(p,{withChevron:a,isInWebOptionsDropdown:i}):r.createElement(w,{isInWebOptionsDropdown:i});return r.createElement(r.Fragment,null,f,r.createElement("div",{style:{position:"fixed",bottom:"12px",left:"0px",width:"100%",display:"flex",justifyContent:"center",whiteSpace:"normal",zIndex:"50"}},_))};var P=A},14512:function(e,t,a){var r=a(27378);let l=(0,r.createContext)(null);t.Z=l},6713:function(e,t,a){a.d(t,{s:function(){return s}});var r=a(41945),l=a(95177);let s=()=>{let e=(0,r.v9)(e=>e.glossary),t=e&&0===l.Z.getAllEntriesCount(e.glossaryLangPairSets),a=e&&e.glossaryShared,s=e&&(!e.glossariesInfo||e.glossariesInfo.length<=1);return s&&t&&!a}},9443:function(e,t,a){a.d(t,{ZP:function(){return u},OC:function(){return d}});var r=a(4769),l={clientVars:"clientVars",LMT_customization:"customization",LMT_docTrans:"docTransOption"},s=a(84627),n=a(75671),o=a(30171);let i={REHYDRATE_PERSIST_BY_U:e=>`${e}/rehydrate_persist_by_u`,DELETE_ITEM:e=>`${e}/delete_item`},c=Object.keys(l),d=(e,t,s)=>{var d,u;let[g,...m]=e.split(".");if(!c.includes(g))return(0,n.O)(e,t,s);let y=l[g],_=(e,t)=>e.reduce((e,t)=>null==e?void 0:e[t],t),p=e=>{var t;let l={...null===(t=a.g.store)||void 0===t?void 0:t.getState()[y]};delete l._persist;let s=(0,r.Z)(m),n=s.pop(),o=s?_(s,l):l;return o[n]=e,l},E=(0,o.S3)(_(m,null===(d=a.g.store)||void 0===d?void 0:d.getState()[y])||t);return null===(u=a.g.store)||void 0===u||u.dispatch({type:i.REHYDRATE_PERSIST_BY_U(y),payload:p(E())}),E.onValueChanged.push(e=>{var t;null===(t=a.g.store)||void 0===t||t.dispatch({type:i.REHYDRATE_PERSIST_BY_U(y),payload:p(e)})}),E};s.ZP.persistentValue=d;var u=s.ZP},41941:function(e,t){t.Z={JOB_KIND__DEFAULT:"default",JOB_KIND__AUTOCOMPLETION:"autocompletion",JOB_KIND__ALTERNATIVES_AT_POSITION:"alternatives_at_position",JOB_KIND__SUGGEST_GLOSSARY_TAGS:"suggest_glossary_tags"}},59454:function(e,t){t.Z={successOverlay:"successOverlay--psteC",successIcon:"successIcon--dsTIY"}},79394:function(e,t){t.Z={fullWidth:"fullWidth--R2TVV"}}}]);