(window.TT_HD_WEBPACK_JSONP=window.TT_HD_WEBPACK_JSONP||[]).push([[16],{QLfM:function(e,t,a){"use strict";a.r(t),a.d(t,"mount",(function(){return b}));var n=a("bb6g"),c=a("mXGw"),i=a.n(c),r=a("xaFU"),o=a("8Jek"),s=a.n(o),l=a("3WMe"),m=a("vwu8"),u=a("k5Tp");var f=a("eMCs"),d=a.n(f),h=a("w5Ut"),v=a.n(h),g={insert:"head",singleton:!1},p=(d()(v.a,g),v.a.locals||{});function b(e){Object(r.createRoot)(e.root).render(i.a.createElement(w,Object(n.a)({},e)))}function w(e){var t=e.container,a=e.callback,n=Object(c.useState)(!0),r=n[0],o=n[1];return Object(c.useEffect)((function(){var e=null;function a(){clearTimeout(e),o(!0)}function n(){e=setTimeout((function(){o(!1)}),200)}return t.addEventListener("mouseenter",a,!1),t.addEventListener("mouseleave",n,!1),function(){t.removeEventListener("mouseenter",a,!1),t.removeEventListener("mouseleave",n,!1)}}),[]),Object(c.useEffect)((function(){if(r)try{Object(u.a)({eid:"pageview/navi/saishiDiv",eid_desc:"点击/导航/赛事浮层"})}catch(e){}}),[r]),Object(c.useEffect)(a,[]),i.a.createElement(E,{visible:r})}function E(e){var t=e.visible,a=Object(c.useRef)(null),r=Object(l.b)((function(e){if(t)if(a.current)e(a.current);else{u();var c=(o={matchLives:[],matchReplays:[],matchNotices:[]},new Promise((function(e,t){$.ajax({url:m.a+"cache.php?m=Nav&do=ajaxGetHotMatch",type:"get",dataType:"jsonp",jsonpCallback:"huyaNavHotMatch",timeout:5e3,cache:!0}).done((function(t){var a=t.status,c=t.msg,i=t.data;200==a?i?((!i.matchLives||!i.matchLives.length)&&(i.matchLives=[]),(!i.matchReplays||!i.matchReplays.length)&&(i.matchReplays=[]),(!i.matchNotices||!i.matchNotices.length)&&(i.matchNotices=[]),e(i)):e(Object(n.a)({},o)):(e(Object(n.a)({},o)),console.error("getHotMatch 服务异常: "+c+"("+a+")"))})).fail((function(t,a){e(Object(n.a)({},o)),console.error("getHotMatch 网络异常("+a+")")}))}))),i=new Promise((function(e){return TT.getUserInfo(e)})),r=Promise.all([c,i]).then((function(e){var t=e[0].matchNotices,a=e[1].uid;return function(e,t){return new Promise((function(a,n){0!=t&&e.length?$.ajax({url:"//upevent.huya.com/getSubscribeState",type:"get",dataType:"jsonp",data:{event_ids:e.join(","),uid:t},timeout:5e3,cache:!1}).done((function(e){var t=e.code,n=e.message,c=e.data;0==t?a(c&&c.length?c:[]):(a([]),console.error("getSubscribeState 服务异常: "+n+"("+t+")"))})).fail((function(e,t){a([]),console.error("getSubscribeState 网络异常("+t+")")})):a([])}))}(t.filter((function(e){return 1!=e.liveState})).map((function(e){return e.eventId})),a)}));e(Promise.all([c,r,i]).then((function(e){return a.current=e,setTimeout((function(){a.current=null}),5e3),a.current})))}var o}),[t]),o=r[0],s=(r[1],r[2]),u=r[3];return i.a.createElement(i.a.Fragment,null,s===l.a.Pending&&i.a.createElement(N,null),s===l.a.Fulfilled&&o&&i.a.createElement(x,{data:o}))}function x(e){var t=e.data,a=t[0],n=a.matchLives,r=a.matchReplays,o=a.matchNotices,s=t[1],l=n.length+r.length+o.length,f=Object(c.useCallback)((function(e){try{Object(u.a)({eid:"click/navi/saishi/live/"+e,eid_desc:"点击/导航/赛事/赛事热播/位置-"+e})}catch(e){}}),[]),d=Object(c.useCallback)((function(e){try{Object(u.a)({eid:"click/navi/saishi/replay/"+e,eid_desc:"点击/导航/赛事/赛事重播/位置-"+e})}catch(e){}}),[]),h=-1;return i.a.createElement("div",{className:p.Panel},l>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:p.Sec},i.a.createElement("div",{className:p.SecHd},"赛事热播"),i.a.createElement("div",{className:p.SecBd},i.a.createElement("div",{className:p.SecMatch},n.slice(0,6).map((function(e,t){var a=e.name,n=e.privateHost,c=e.profileRoom,r=e.yyid,o=e.schedule;return h+=1,i.a.createElement("a",{className:p.MatchItem,href:""+m.a+TT.createRoomHost(n,c,r),onClick:function(){return f(h)},title:a,target:"_blank",key:t},i.a.createElement("i",{className:p.IconLiving}),i.a.createElement("span",{className:p.name,style:{marginRight:"0.6em"}},a),!!o&&(2==o.teamNum?i.a.createElement(i.a.Fragment,null,o.teamAName,i.a.createElement("i",{className:p.Score},o.teamAResult),":",i.a.createElement("i",{className:p.Score},o.teamBResult),o.teamBName):o.title))})),n.length<6&&r.slice(0,6-n.length).map((function(e,t){var a=e.name,n=e.privateHost,c=e.profileRoom,r=e.yyid;e.schedule;return h+=1,i.a.createElement("a",{className:p.MatchItem,href:""+m.a+TT.createRoomHost(n,c,r),onClick:function(){return d(h)},title:a,target:"_blank",key:t},i.a.createElement("i",{className:p.IconReplay}),i.a.createElement("span",{className:p.name},a))}))))),o.length>0&&i.a.createElement("div",{className:p.Sec},i.a.createElement("div",{className:p.SecHd},"赛事预告"),i.a.createElement("div",{className:p.SecBd},i.a.createElement("div",{className:p.SecPreview},i.a.createElement("div",{className:p.List},o.map((function(e,t){var a=s.find((function(t){return t.iEventID==e.eventId}));return i.a.createElement("div",{className:p.Item,key:t},i.a.createElement(A,{data:e,subscribeStateInfo:a}))}))))))):i.a.createElement(O,null))}function A(e){var t=e.data,a=e.subscribeStateInfo,n=t.upTime,r=t.title,o=t.liveState,l=t.privateHost,f=t.profileRoom,d=a||{},h=d.iEventID,v=void 0===h?0:h,g=d.bSubscribe,b=void 0!==g&&g,w=Object(c.useState)(!1),E=w[0],x=w[1],A=Object(c.useState)(b),O=A[0],N=A[1],S=Object(c.useCallback)((function(e){e.preventDefault(),!1===E&&TT.sudo((function(e){var t=e.uid;x(!0);var a=!O;(function(e,t,a){return new Promise((function(n,c){$.ajax({url:m.a+"member/index.php?m=Upcoming&do=subscribe",type:"get",dataType:"jsonp",data:{eid:e,subscribe:t,uid:a},timeout:5e3,cache:!1}).done((function(e){var t=e.status,a=e.message;0==t?n():c(new Error(a+"("+t+")"))})).fail((function(e,t){c(new Error("网络异常("+t+")"))}))}))})(v,a?1:0,t).then((function(){if(x(!1),N(a),a)try{Object(u.a)({eid:"click/navi/saishi/book",eid_desc:"点击/导航/赛事/预定"})}catch(e){}})).catch((function(e){x(!1),alert("操作失败："+e.message)}))}))}),[O,v,E]),y=Object(c.useMemo)((function(){var e=new Date;e.setHours(0,0,0,0);var t=Math.floor(e.getTime()/1e3),a=new Date(1e3*n),c=a.getMonth(),i=a.getDate(),r=a.getHours(),o=a.getMinutes();function s(e){return("00"+e).slice((e+"").length)}var l=s(c+1)+"."+s(i);return[t,t+86400,t+172800].forEach((function(e,t){if(n>=e)switch(t){case 0:l="今天  ";break;case 1:l="明天  "}})),l+" "+s(r)+":"+s(o)}),[n]);return i.a.createElement("div",{className:p.Preview},i.a.createElement("i",{className:p.dateTime},y),i.a.createElement("span",{className:p.name,title:r},r),1==o?i.a.createElement("a",{className:s()(p.btn,p["state-0"]),href:""+m.a+TT.createRoomHost(l,f),target:"_blank"},"观看"):i.a.createElement("a",{className:s()(p.btn,p["state-"+(E?2:O?1:0)]),href:"#",onClick:S},O?"已预订":"预订"))}function O(){return i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("img",{style:{width:120},src:"https://a.msstatic.com/huya/main3/components/helperbar/Game/img/b_072d9.png"}),i.a.createElement("p",{style:{fontSize:14}},"暂无数据~"))}function N(){return i.a.createElement("div",{style:{height:100,background:"url(https://a.msstatic.com/huya/main/assets/img/loading.gif) 50% no-repeat"}})}},w5Ut:function(e,t,a){t=e.exports=a("Ai0b")(!1);var n=a("V74C"),c=n(a("Zhm1")),i=n(a("B3Qg")),r=n(a("rRAL")),o=n(a("gm0n"));t.push([e.i,"@keyframes Living--3sAx0fIE8G79Lrgzmf6WEI{0%{background-position:0 0}100%{background-position:-108px 0}}.Panel--1w4HH4lSfn6zhop6J3tcxY{font-size:12px;word-wrap:normal}.Sec--1zVcdGI0OLqcJMtE1clvGn+.Sec--1zVcdGI0OLqcJMtE1clvGn{margin-top:10px}.Sec--1zVcdGI0OLqcJMtE1clvGn .SecHd--1FtobNVLWVqNt5sIPz41wT{padding-left:15px;font-size:14px;font-weight:700;color:#333}.Sec--1zVcdGI0OLqcJMtE1clvGn .SecBd--KtiJTJP_z43yenfTAyFnS{padding:5px 0 0 15px}.MatchItem--UozdfAtWPa2olUMLfWSAA{display:block;height:30px;line-height:30px;text-decoration:none;color:#333;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.MatchItem--UozdfAtWPa2olUMLfWSAA:hover{background:#f1f1f1;text-decoration:none}.MatchItem--UozdfAtWPa2olUMLfWSAA:hover .name--29fw86N0wKrVfsc-Yd8s4K{color:#ff9600}.MatchItem--UozdfAtWPa2olUMLfWSAA .IconLiving--3nIqaCiGMXL8egI7cIIK5U,.MatchItem--UozdfAtWPa2olUMLfWSAA .IconReplay--3pRvNTuDuEAwodA0nlcxSS{position:relative;top:4px;margin-right:5px;display:inline-block;width:18px;height:18px;border-radius:50%}.MatchItem--UozdfAtWPa2olUMLfWSAA .IconLiving--3nIqaCiGMXL8egI7cIIK5U{background-color:#f80;background-image:url("+c+");animation:Living--3sAx0fIE8G79Lrgzmf6WEI .6s steps(6) infinite}.MatchItem--UozdfAtWPa2olUMLfWSAA .IconReplay--3pRvNTuDuEAwodA0nlcxSS{background-image:url("+i+")}.MatchItem--UozdfAtWPa2olUMLfWSAA .Score--RhfFZqnzCuPiYkmkqVcgu{display:inline-block;margin:0 2px;width:14px;height:17px;text-align:center;line-height:17px;font-weight:bold;color:#616161;background:url("+r+")}.SecPreview--30h0VJqv44gxo5BNOzOA40 .List--3tVAzci75x-rt448nbYvcH{margin-left:2px;border-left:1px solid #cdcdcd}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Item--n0jsHTYFqxOYuYwlukxEc+.Item--n0jsHTYFqxOYuYwlukxEc{margin-top:7px}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Item--n0jsHTYFqxOYuYwlukxEc{position:relative;padding:0 15px 0 4px;margin-left:6px;line-height:30px}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Item--n0jsHTYFqxOYuYwlukxEc:hover{background:#f1f1f1}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Item--n0jsHTYFqxOYuYwlukxEc:after{position:absolute;left:-11px;top:11px;display:inline-block;width:9px;height:9px;background:url("+o+');content:""}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc{zoom:1}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc:before,.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc:after{display:table;content:""}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc:after{clear:both}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .dateTime--3q6tBFbXwkkCqBgeO1lEhU{float:left;color:#62b5f7;margin-right:5px}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .name--29fw86N0wKrVfsc-Yd8s4K{float:left;max-width:9.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#333}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e{float:right;margin-top:5px;width:4em;line-height:20px;overflow:hidden;color:#fff;border-radius:10px;text-align:center;white-space:nowrap;text-decoration:none}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e:visited{color:#fff}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e:hover{text-decoration:none}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e.state-0--1GuUVh6m0kJJNrAp8pYeu7{background:#62b5f7}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e.state-0--1GuUVh6m0kJJNrAp8pYeu7:hover{background:#7cc6ff}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e.state-1--3BAugcyHxKcqFA79ArYbq8{color:#fff;background:#babdc1}.SecPreview--30h0VJqv44gxo5BNOzOA40 .Preview--9NsCElym1jOEnA7b7UeMc .btn--TFZY0sfhywBrKatszf2e.state-2--1glxZJ_ia-jHFctdTLBzdd{text-indent:10em;background:url(https://a.msstatic.com/huya/main/assets/img/loading.gif) 50% no-repeat #eee}',""]),t.locals={Panel:"Panel--1w4HH4lSfn6zhop6J3tcxY",Sec:"Sec--1zVcdGI0OLqcJMtE1clvGn",SecHd:"SecHd--1FtobNVLWVqNt5sIPz41wT",SecBd:"SecBd--KtiJTJP_z43yenfTAyFnS",MatchItem:"MatchItem--UozdfAtWPa2olUMLfWSAA",name:"name--29fw86N0wKrVfsc-Yd8s4K",IconLiving:"IconLiving--3nIqaCiGMXL8egI7cIIK5U",IconReplay:"IconReplay--3pRvNTuDuEAwodA0nlcxSS",Living:"Living--3sAx0fIE8G79Lrgzmf6WEI",Score:"Score--RhfFZqnzCuPiYkmkqVcgu",SecPreview:"SecPreview--30h0VJqv44gxo5BNOzOA40",List:"List--3tVAzci75x-rt448nbYvcH",Item:"Item--n0jsHTYFqxOYuYwlukxEc",Preview:"Preview--9NsCElym1jOEnA7b7UeMc",dateTime:"dateTime--3q6tBFbXwkkCqBgeO1lEhU",btn:"btn--TFZY0sfhywBrKatszf2e","state-0":"state-0--1GuUVh6m0kJJNrAp8pYeu7","state-1":"state-1--3BAugcyHxKcqFA79ArYbq8","state-2":"state-2--1glxZJ_ia-jHFctdTLBzdd"}}}]);