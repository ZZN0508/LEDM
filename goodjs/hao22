define("indexnew:component/gamebox/hotRecommend/index.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/config.js","indexnew:static/js/format.js","indexnew:component/gamebox/hotRecommend/template.js","indexnew:component/gamebox/common/index.js","indexnew:component/gamebox/common/template.js"],function(t,e,i,n,o,r,a,h,s,m){var u=o,l=r,c=a,g=l.get("userinfo")&&l.get("userinfo").islanding,d=h,f=s,x=m,p=u("#feed_news_wrap"),v={duration:8e3,giftStylePrefix:"hot-item-bottom",currentIndex:0,imgCount:0,hotData:{},$hotBtn:null,timer:null,initHotList:function(){this.$imglist=u("li.hot-item",this.$gameBox),this.imgCount=this.$imglist.length,this.$hotBtn=u(".gameBox-item-hot",this.$gameBox),this.$hotHearder=u(".gameBox-item-header-hot",this.$gameBox),this.$hotFakeAEle=u(".hot-item-fake",this.$gameBox),this.$imglist.eq(this.currentIndex).fadeIn(this.animateInTime)},goNext:function(){this.autoPlay();var t=this.currentIndex;++this.currentIndex===this.imgCount&&(this.currentIndex=0),this.render(t)},goPrev:function(){this.autoPlay();var t=this.currentIndex;--this.currentIndex<0&&(this.currentIndex=this.imgCount-1),this.render(t)},autoPlay:function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=setInterval(function(){t.goNext()},this.duration)},clearTimer:function(){clearInterval(this.timer)},render:function(t){this.changeHotBtn(),this.$imglist.eq(t).fadeOut(this.animateOutTime).end().eq(this.currentIndex).fadeIn(this.animateInTime)},changeHotBtn:function(){var t=this.hotData.gamelist[this.currentIndex].jump_url,e=this.hotData.gamelist[this.currentIndex].jump_desc;this.$hotBtn.text(e),this.$hotBtn.attr("href",t),this.$hotHearder.attr("href",t),this.$hotFakeAEle.attr("href",t)},renderHotBtnTpl:function(t,e,i){return c(x.hotBtnTpl,{url:t,text:e,extralStyle:i})},renderHeaderLinkTpl:function(t,e){return c(d.headerLinkTpl,{type:t,href:e.gamelist[this.currentIndex].jump_url})},renderHotTpl:function(t){this.hotData=t;var e=this.renderHeaderLinkTpl("hot",t),i=t.gamelist||[],n="";i[0]&&(n=this.renderHotBtnTpl(i[0].jump_url,i[0].jump_desc,"gameBox-item-hot"));var o="",r=this;return u.each(i,function(t,e){e&&(o+=c(d.hotItemTpl,{url:e.jump_url,imgUrl:e.icon_url,name:f.limitLen(e.game_name,13),bottomStyle:e.has_gift?"":r.giftStylePrefix+"-su",hasGift:e.has_gift?"":"hide",label:e.gift_info.tags,giftDesc:f.limitLen(e.gift_info.desc,35),giftUrl:e.gift_info.jump_url}))}),{hotHeader:e,hotList:o,hotBtn:n}},bindEvent:function(){var t=this,e=u("#gameBox",p),i=u(".hot",e),n=u(".hot-item-top",i),o=u(".hot-item-bottom-title",i),r=u(".hot-arrow",i),a=u(".hot-arrow.hot-prev",i),h=u(".hot-arrow.hot-next",i);t.imgCount>1&&i.mouseenter(function(){r.toggle(),t.clearTimer()}).mouseleave(function(){r.toggle(),t.autoPlay()}),t.autoPlay(),a.click(function(){t.goPrev()}),h.click(function(){t.goNext()}),g||(f.bindSaveEvent(n,t.hotData.gamelist,f.changeHotKey.bind(f)),f.bindSaveEvent(o,t.hotData.gamelist,f.changeHotKey.bind(f)),t.$hotBtn.click(function(){var e=t.hotData.gamelist&&t.hotData.gamelist[t.currentIndex]||{};f.saveData(e,f.changeHotKey.bind(f))}))}};e.exports=v});