"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7525],{37894:function(e,t,n){var a=n(73126),l=n(60942),r=n(59056),c=n(81643),o=n.n(c),i=n(2991),s=n.n(i),u=n(67294),m=n(46066),d=n(9361),_=n(65596),f=n(36265),p=n(91481),v=n(68956),h=n(94184),g=n.n(h),E=n(45601),b=n(89138),N="BU-BannerV3";t.Z=function(e){var t=e.list,n=e.className,c=e.handleClick,i=e.handleExposure,h=(0,u.useRef)(null),Z=(0,u.useRef)([]),y=(0,u.useState)(!1),k=(0,r.Z)(y,2),C=k[0],w=k[1],P=(0,u.useState)(0),x=(0,r.Z)(P,2),T=x[0],L=x[1],O=(0,u.useRef)(null),S=function(){(0,E.h)({name:"banner-error",tags:{action:"".concat(window.location.pathname," empty-banner")}})},j=function(e){var t,n;if(i)i(e);else{var a=e.url;v.Z.banner.banner_exposure({banner_name:e.title||"",go_url:a,log_pb:(null===(t=e.anchorProps)||void 0===t||null===(n=t.query)||void 0===n?void 0:n.logPb)||"{}"})}},R=(0,l.Z)((function(e){var t,n=O.current;null==n||null===(t=n.slickGoTo)||void 0===t||t.call(n,e)}),100).run,U={dots:!0,infinite:!0,speed:0,slidesToShow:1,slidesToScroll:1,autoplay:!0,pauseOnDotsHover:!0,afterChange:function(e){L(e)},appendDots:function(e){return u.createElement("ul",null,s()(e).call(e,(function(e,n){var a=t[n],l=a.thumbImg;return u.createElement("div",{className:g()("".concat(N,"__li")),onMouseOver:function(){return R(n)},key:n,tabIndex:0,role:"listitem","aria-label":a.title},u.createElement("div",{className:g()("".concat(N,"__shadow")),style:{display:n===T?"none":""}}),u.createElement(f.Z,{src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl((0,p.Ph)(l),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),className:g()({slide__active:n===T}),fallbackSrc:"https://sf1-cdn-tos.toutiaostatic.com/obj/ttfe/ixigua_banner/error.jpg"}))})))},beforeChange:function(e,n){var a;C&&o()(a=Z.current).call(a,n+"")<0&&t.length>1&&(j(t[n]),Z.current.push(n+""))}};return(0,u.useEffect)((function(){t&&t.length>0&&j(t[0])}),[]),u.createElement(u.Fragment,null,t&&t.length>0?u.createElement(d.ZP,{onChange:function(e,n){if(e.isIntersecting){if(w(!0),t&&t.length>0)if(Z.current.length===t.length)n();else try{var a,l=h.current.getElementsByClassName("slick-active")[0].getElementsByTagName("a")[0].dataset.inx;l&&o()(a=Z.current).call(a,l)<0&&(j(t[l]),l&&Z.current.push(l))}catch(e){}}else w(!1)}},u.createElement(b.Z,{className:g()(N,n),ref:h},u.createElement(m.Z,(0,a.Z)({ref:O},U),s()(t).call(t,(function(e,n){var l=e.img,r=e.anchorProps,o=u.createElement(u.Fragment,null,u.createElement(f.Z,{src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl((0,p.Ph)(l),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),fallbackSrc:"https://sf1-cdn-tos.toutiaostatic.com/obj/ttfe/ixigua_banner/error.jpg",onError:S}),e.title&&1!==t.length&&u.createElement(u.Fragment,null,u.createElement("div",{className:"".concat(N,"__mask")}),u.createElement("div",{className:"".concat(N,"__title"),style:{width:"calc(100% - ".concat(72*t.length+16+148,"px)")}},e.title)));return r?u.createElement(_.Z,(0,a.Z)({className:"".concat(N,"__link"),isRouterLink:!1,target:"_blank"},r,{onClick:function(){return function(e,t){v.Z.channel.bannerClick({log_pb:e.query.logPb,url:t})}(e.anchorProps,e.url)}}),o):u.createElement("a",{key:n,className:"".concat(N,"__link"),href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(e.url,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank",onClick:function(){return function(e){var t,n;if(c)c(e);else{var a=e.url;v.Z.banner.banner_click({banner_name:e.title||"",go_url:a,log_pb:(null===(t=e.anchorProps)||void 0===t||null===(n=t.query)||void 0===n?void 0:n.logPb)||"{}"})}}(e)}},o)}))))):null)}},48050:function(e,t,n){n.d(t,{b:function(){return z},Z:function(){return ee}});n(41539),n(54747);var a=n(86902),l=n.n(a),r=n(14310),c=n.n(r),o=n(20116),i=n.n(o),s=n(34074),u=n.n(s),m=n(39649),d=n.n(m),_=n(33938),f=n(41266),p=n(73126),v=n(44845),h=n(59056),g=n(63109),E=n.n(g),b=(n(56977),n(67294)),N=n(36265),Z=n(94184),y=n.n(Z),k=n(65596),C=n(91899),w=n(41948),P=n(93282),x=n(45804),T=n(79349),L=n(2991),O=n.n(L),S=n(3649),j=n.n(S),R=n(77766),U=n.n(R),F=(n(68309),n(88768)),I=n(76438),B=n(11482),W=n(67853),A=n(91481),H=n(89138),V="VerticalFeedCardRichPreview",D=function(e){var t,n,a,l,r,c=e.score,o=e.coverURL,s=e.actorList,u=e.areaList,m=e.intro,d=e.albumTypeValueList,_=e.year,f=e.tagList,v=e.anchorProps,g=e.title,E=e.videoURL,N=e.videoVid,Z=e.isCollect,C=e.albumId,w=e.userId,P=e.userFollow,x=e.onClickAnchor,L=e.onCollectChange,S=e.lineClamp,R=e.introHeight,D=e.categoryName,q=e.refreshPreviewGid,G="";c&&c>=7&&(G=c.toFixed(1));var K=O()(d).call(d,(function(e){return F.tq[e]})),M=N||E,z=(0,b.useState)(!1),J=(0,h.Z)(z,2),Q=J[0],X=J[1],Y=(0,W.E)({refreshGid:q}).VideoPreview;(0,b.useLayoutEffect)((function(){var e=setTimeout((function(){X(!0)}),300);return function(){window.clearTimeout(e)}}),[]);var $=function(e,t){null==t||t.stopPropagation(),null==x||x(e)},ee=(0,b.useRef)(null);return b.createElement("div",{className:V},b.createElement(k.Z,(0,p.Z)({},v,{onClick:function(){$("cover")},className:y()("".concat(V,"__coverWrapper"))}),b.createElement(B.Z,{src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(o,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),!!M&&Q&&b.createElement(Y,{className:"cover",url:(0,A.Ph)(E)})),b.createElement(k.Z,(0,p.Z)({},v,{onClick:function(){$("other")},className:y()("".concat(V,"__textWrapper"))}),b.createElement("div",{className:"".concat(V,"__header block")},b.createElement("div",{onClick:function(e){$("title",e)},className:"".concat(V,"__header__title"),title:g},g),b.createElement(H.Z,{className:"".concat(V,"__header__score")},G)),b.createElement("div",{className:"block"},b.createElement("div",{className:"".concat(V,"__details__item")},b.createElement("span",{className:"color-content-tertiary"},"类型："),b.createElement("span",{className:"color-content-secondary"},O()(t=j()(n=i()(a=U()(l=[]).call(l,(0,T.Z)(K),(0,T.Z)(null!=u?u:[]),[_],(0,T.Z)(null!=f?f:[]))).call(a,Boolean)).call(n,0,4)).call(t,(function(e,t){return b.createElement("span",{className:t?"".concat(V,"__details__item__split"):""},e)})))),s&&s.length?b.createElement("div",{className:"".concat(V,"__details__item"),style:{marginBottom:0}},b.createElement("span",{className:"color-content-tertiary"},"主演："),b.createElement("span",{className:"color-content-secondary"},O()(r=j()(s).call(s,0,3)).call(r,(function(e,t){return b.createElement("span",{className:t?"".concat(V,"__details__item__split"):""},"string"==typeof e?e:null==e?void 0:e.name)})))):void 0),m&&b.createElement("div",{className:"block introContainer color-content-secondary",ref:ee},b.createElement("div",{className:"".concat(V,"__details__item intro "),style:{height:"".concat(R,"px"),WebkitLineClamp:S,marginBottom:s&&s.length?0:"18px"}},b.createElement("span",null,m))),b.createElement(I.Z,{defaultStatus:Z,album_id:C,onChange:L,author_id:w,group_id:C,is_following:P?1:0,category_name:D})))},q=n(1028),G=n(22533),K=n(75485),M="VerticalFeedCard",z=function(e){var t=e.className;return b.createElement("div",{className:y()(M,"".concat(M,"--placeholder"),t)},b.createElement("div",{className:"".concat(M,"__coverWrapper")}),b.createElement("div",{className:"".concat(M,"__title")}),b.createElement("div",{className:"".concat(M,"__bottomInfo")}))},J=["isCollect","onCollectChange"];function Q(e,t){var n=l()(e);if(c()){var a=c()(e);t&&(a=i()(a).call(a,(function(t){return u()(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):d()?Object.defineProperties(e,d()(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,u()(n,t))}))}return e}var Y="VerticalFeedCard",$={isRouterLink:!1,target:"_unique"},ee=function(e){var t=e.title,n=e.anchorProps,a=e.className,l=e.tagMark,r=e.RBTag,c=e.inView,o=e.coverURL,i=e.subTitle,s=e.score,u=e.distance,m=e.clientShowParams,d=e.disableZoomAnimation,v=e.richPreviewProps,g=e.userInfo,Z=(0,K.Z)().side,T=((0,C.Z)(),(0,b.useState)({display:"none"})),L=(0,h.Z)(T,2),O=L[0],S=L[1],j=X(X({},$),n),R=(0,x.Z)(),U=R.ref,F=R.isHover,I=(0,b.useState)(!1),B=(0,h.Z)(I,2),W=B[0],A=B[1],V=(0,b.useState)(1440),M=(0,h.Z)(V,2),z=M[0],Q=M[1],ee=(0,b.useCallback)((function(){A(!0),null==c||c()}),[c]),te=function(){return b.createElement("div",{className:y()(Y,a),ref:U},b.createElement(k.Z,(0,p.Z)({},j,{className:y()("".concat(Y,"__coverWrapper"),{disableZoomAnimation:d||undefined}),title:F?void 0:t}),b.createElement(N.Z,{inView:ee,src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(o,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),distance:u,alt:t,title:F?void 0:t}),void 0!==l&&b.createElement(w.ZP,{isForFeed:!0,mark:String(l),className:"".concat(Y,"__tag")}),(n=r?b.createElement("span",{className:"".concat(Y,"__coverWrapper__RBTag")},r):(e="",s&&s>=7&&(e=s.toFixed(1)),e?b.createElement(H.Z,{className:"".concat(Y,"__score")},e):void 0))?b.createElement(b.Fragment,null,b.createElement("div",{className:"".concat(Y,"__coverWrapper__shadow")}),n):null),t?b.createElement(k.Z,(0,p.Z)({},j,{className:"".concat(Y,"__title color-link-content-primary"),title:t,tabIndex:-1,"aria-hidden":!0}),t):b.createElement("span",{className:"".concat(Y,"__title")}),i&&b.createElement("div",{className:"".concat(Y,"__bottomInfo color-content-secondary")},i));var e,n},ne=(0,b.useState)(null==v?void 0:v.isCollect),ae=(0,h.Z)(ne,2),le=ae[0],re=ae[1],ce=v?function(){var e,n;if(void 0===v)return console.error("需要richPreviewProps"),b.createElement("div",null);for(var a=te(),l=(v.isCollect,v.onCollectChange),r=(0,f.Z)(v,J),c=(null===(e=U.current)||void 0===e?void 0:e.offsetWidth)||0,o=(null===(n=U.current)||void 0===n?void 0:n.offsetHeight)||0,i=z>1680?24:22,s=(z>1680?132:118)+1.15*c*192/319,u=0;s+u*i<o+12;)u++;return b.createElement(q.Z,{action:["hover"],popupClassName:"".concat(Y,"__popup"),popupStyle:O,popup:b.createElement(D,(0,p.Z)({anchorProps:j,isCollect:le,onCollectChange:function(e){re(e),null==l||l(e)},userId:null==g?void 0:g.userId,userFollow:null==g?void 0:g.follow},r,{title:t,lineClamp:u,introHeight:u*i})),popupAlign:{points:["tc","tc"],offset:[0,-12]},destroyPopupOnHide:!0},a)}:te,oe=(0,b.useCallback)((function(){if(v){var e=U.current;U.current&&null!=e&&e.offsetWidth&&null!=e&&e.offsetHeight&&S({width:1.15*e.offsetWidth}),Q(document.body.clientWidth)}}),[U,v]);return(0,b.useEffect)((function(){var e=function(){var e=(0,_.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.coverURL&&((new Image).src=globalThis.xssNamespace.xigua_video_web_pc.filterUrl(v.coverURL,null,{logType:"js.href/src",mode:"black",reportOnly:!1}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();W&&e()}),[W]),(0,b.useLayoutEffect)(oe,[U,F,Z]),(0,G.Z)(oe,200),m?b.createElement(P.Z,{params:m,children:ce()}):ce()}}}]);
//# sourceMappingURL=https://sourcemap.ixigua.com/obj/xigua-video-web-pc-sourcemap/xgpc/sourcemap/js/7525.f7ae82e4c7.chunk.js.map